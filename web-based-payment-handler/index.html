<!DOCTYPE html>
<html lang="ja-JP">

<head>
    <meta charset="utf-8">
    <!-- <meta name="generator" content="ReSpec 35.5.1"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        span.example-title {
            text-transform: none
        }

        :is(aside, div).example,
        div.illegal-example {
            padding: .5em;
            margin: 1em 0;
            position: relative;
            clear: both
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: #000
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff
        }
    </style>
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-color: var(--warning-border, #f11);
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
            background: var(--warning-bg, #fbe9e9);
            color: #000;
            color: var(--text, #000)
        }

        .warning-title:before {
            content: "⚠";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        pre.idl {
            padding: 1em;
            position: relative
        }

        pre.idl>code {
            color: #000;
            color: var(--text, #000)
        }

        @media print {
            pre.idl {
                white-space: pre-wrap
            }
        }

        .idlHeader {
            display: block;
            width: 150px;
            background: #8ccbf2;
            background: var(--def-border, #8ccbf2);
            color: #fff;
            color: var(--defrow-border, #fff);
            font-family: sans-serif;
            font-weight: 700;
            margin: -1em 0 1em -1em;
            height: 28px;
            line-height: 28px
        }

        .idlHeader a.self-link {
            margin-left: .3cm;
            text-decoration: none;
            border-bottom: none;
            color: inherit
        }

        .idlID {
            font-weight: 700;
            color: #005a9c
        }

        .idlType {
            color: #005a9c
        }

        .idlName {
            color: #ff4500
        }

        .idlName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none
        }

        a.idlEnumItem {
            color: #000;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        .idlSuperclass {
            font-style: italic;
            color: #005a9c
        }

        .idlDefaultValue,
        .idlParamName {
            font-style: italic
        }

        .extAttr {
            color: #666
        }

        .idlSectionComment {
            color: gray
        }

        .idlIncludes a {
            font-weight: 700
        }

        .respec-button-copy-paste:focus {
            text-decoration: none;
            border-color: #51a7e8;
            outline: 0;
            box-shadow: 0 0 5px rgba(81, 167, 232, .5)
        }

        .respec-button-copy-paste:is(:focus:hover, .selected:focus) {
            border-color: #51a7e8
        }

        .respec-button-copy-paste:is(:hover, :active, .zeroclipboard-is-hover, .zeroclipboard-is-active) {
            text-decoration: none;
            background-color: #ddd;
            background-image: linear-gradient(#eee, #ddd);
            border-color: #ccc
        }

        .respec-button-copy-paste:is(:active, .selected, .zeroclipboard-is-active) {
            background-color: #dcdcdc;
            background-image: none;
            border-color: #b5b5b5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, .15)
        }

        .respec-button-copy-paste.selected:hover {
            background-color: #cfcfcf
        }

        .respec-button-copy-paste:is(:disabled, :disabled:hover, .disabled, .disabled:hover) {
            color: rgba(102, 102, 102, .5);
            cursor: default;
            background-color: rgba(229, 229, 229, .5);
            background-image: none;
            border-color: rgba(197, 197, 197, .5);
            box-shadow: none
        }

        @media print {
            .respec-button-copy-paste {
                visibility: hidden
            }
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            background: var(--indextable-hover-bg, #fff);
            color: #000;
            color: var(--text, #000);
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 1em 3em -.4em var(--tocsidebar-shadow, rgba(0, 0, 0, .3)), 0 0 1px 1px var(--tocsidebar-shadow, rgba(0, 0, 0, .05));
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            border-bottom-color: var(--indextable-hover-bg, #fff);
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1;
            border-bottom-color: var(--indextable-hover-bg, #a2a9b1)
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            color: var(--text, #000);
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333;
            color: var(--text, #333)
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>


    <title>支払いハンドラ API</title>

    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: italic
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>


    <meta name="color-scheme" content="light">
    <!-- <meta name="revision" content="dd7e0d284c4476b1804c49ca205967141ebb464d"> -->
    <meta name="description" content="この仕様は、Webアプリケーションが
            支払い要求を処理できる機能を定義します。">
    <link rel="canonical" href="https://www.w3.org/TR/web-based-payment-handler/">
    <style>
        .hljs {
            --base: #fafafa;
            --mono-1: #383a42;
            --mono-2: #686b77;
            --mono-3: #717277;
            --hue-1: #0b76c5;
            --hue-2: #336ae3;
            --hue-3: #a626a4;
            --hue-4: #42803c;
            --hue-5: #ca4706;
            --hue-5-2: #c91243;
            --hue-6: #986801;
            --hue-6-2: #9a6a01
        }

        @media (prefers-color-scheme:dark) {
            .hljs {
                --base: #282c34;
                --mono-1: #abb2bf;
                --mono-2: #818896;
                --mono-3: #5c6370;
                --hue-1: #56b6c2;
                --hue-2: #61aeee;
                --hue-3: #c678dd;
                --hue-4: #98c379;
                --hue-5: #e06c75;
                --hue-5-2: #be5046;
                --hue-6: #d19a66;
                --hue-6-2: #e6c07b
            }
        }

        .hljs {
            display: block;
            overflow-x: auto;
            padding: .5em;
            color: #383a42;
            color: var(--mono-1, #383a42);
            background: #fafafa;
            background: var(--base, #fafafa)
        }

        .hljs-comment,
        .hljs-quote {
            color: #717277;
            color: var(--mono-3, #717277);
            font-style: italic
        }

        .hljs-doctag,
        .hljs-formula,
        .hljs-keyword {
            color: #a626a4;
            color: var(--hue-3, #a626a4)
        }

        .hljs-deletion,
        .hljs-name,
        .hljs-section,
        .hljs-selector-tag,
        .hljs-subst {
            color: #ca4706;
            color: var(--hue-5, #ca4706);
            font-weight: 700
        }

        .hljs-literal {
            color: #0b76c5;
            color: var(--hue-1, #0b76c5)
        }

        .hljs-addition,
        .hljs-attribute,
        .hljs-meta-string,
        .hljs-regexp,
        .hljs-string {
            color: #42803c;
            color: var(--hue-4, #42803c)
        }

        .hljs-built_in,
        .hljs-class .hljs-title {
            color: #9a6a01;
            color: var(--hue-6-2, #9a6a01)
        }

        .hljs-attr,
        .hljs-number,
        .hljs-selector-attr,
        .hljs-selector-class,
        .hljs-selector-pseudo,
        .hljs-template-variable,
        .hljs-type,
        .hljs-variable {
            color: #986801;
            color: var(--hue-6, #986801)
        }

        .hljs-bullet,
        .hljs-link,
        .hljs-meta,
        .hljs-selector-id,
        .hljs-symbol,
        .hljs-title {
            color: #336ae3;
            color: var(--hue-2, #336ae3)
        }

        .hljs-emphasis {
            font-style: italic
        }

        .hljs-strong {
            font-weight: 700
        }

        .hljs-link {
            text-decoration: underline
        }
    </style>
    <style>
        var:hover {
            text-decoration: underline;
            cursor: pointer
        }

        var.respec-hl {
            color: var(--color, #000);
            background-color: var(--bg-color);
            box-shadow: 0 0 0 2px var(--bg-color)
        }

        @media (prefers-color-scheme:dark) {
            var.respec-hl {
                filter: saturate(.9) brightness(.9)
            }
        }

        var.respec-hl-c1 {
            --bg-color: #f4d200
        }

        var.respec-hl-c2 {
            --bg-color: #ff87a2
        }

        var.respec-hl-c3 {
            --bg-color: #96e885
        }

        var.respec-hl-c4 {
            --bg-color: #3eeed2
        }

        var.respec-hl-c5 {
            --bg-color: #eacfb6
        }

        var.respec-hl-c6 {
            --bg-color: #82ddff
        }

        var.respec-hl-c7 {
            --bg-color: #ffbcf2
        }

        @media print {
            var.respec-hl {
                background: 0 0;
                color: #000;
                box-shadow: unset
            }
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #222
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #222;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "github": "https://github.com/w3c/web-based-payment-handler/",
  "specStatus": "WD",
  "previousPublishDate": "2019-10-21",
  "prevVersion": "FPWD",
  "previousMaturity": "WD",
  "editors": [
    {
      "name": "Ian Jacobs",
      "url": "http://www.w3.org/People/Jacobs/",
      "company": "W3C",
      "companyURL": "https://www.w3.org/",
      "w3cid": 2175
    },
    {
      "name": "Jinho Bang",
      "company": "Invited Expert",
      "email": "zino@chromium.org",
      "url": "https://github.com/romandev",
      "w3cid": 77147
    },
    {
      "name": "Stephen McGruer",
      "company": "Google",
      "companyURL": "https://www.google.com/",
      "email": "smcgruer@chromium.org",
      "w3cid": 96463
    }
  ],
  "formerEditors": [
    {
      "name": "Andre Lyver",
      "url": "https://github.com/lyverovski",
      "company": "Shopify",
      "companyURL": "https://shopify.com",
      "w3cid": 87485
    },
    {
      "name": "Tommy Thorsen",
      "url": "https://github.com/tommythorsen",
      "company": "Opera",
      "companyURL": "https://opera.com",
      "w3cid": 90636
    },
    {
      "name": "Adam Roach",
      "url": "https://github.com/adamroach",
      "company": "Mozilla",
      "companyURL": "https://mozilla.org",
      "w3cid": 67785
    },
    {
      "name": "Rouslan Solomakhin",
      "url": "https://github.com/rsolomakhin",
      "company": "Google",
      "companyURL": "https://www.google.com/",
      "w3cid": 83784
    },
    {
      "name": "Adrian Hope-Bailie",
      "url": "https://github.com/adrianhopebailie",
      "company": "Coil",
      "companyURL": "https://coil.com",
      "w3cid": 42590
    }
  ],
  "group": "payments",
  "testSuiteURI": "https://wpt.live/payment-handler/",
  "xref": "web-platform",
  "publishDate": "2026-02-17",
  "publishISODate": "2026-02-17T00:00:00.000Z",
  "generatedSubtitle": "W3C Working Draft 17 February 2026"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD">
</head>

<body data-cite="WEBIDL service-workers payment-method-id HTML INFRA URL WEBIDL DOM FETCH" class="h-entry">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.w3.org/"><img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a></p>
        <h1 id="title" class="title">支払いハンドラ API</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C作業草案</a> <time class="dt-published"
                datetime="2026-02-17">2026年2月17日</time></p>
        <details open="">
            <summary>この文書の詳細について</summary>
            <dl>
                <dt>このバージョン:</dt>
                <dd>
                    <a class="u-url"
                        href="https://www.w3.org/TR/2026/WD-web-based-payment-handler-20260217/">https://www.w3.org/TR/2026/WD-web-based-payment-handler-20260217/</a>
                </dd>
                <dt>最新の公開バージョン:</dt>
                <dd>
                    <a
                        href="https://www.w3.org/TR/web-based-payment-handler/">https://www.w3.org/TR/web-based-payment-handler/</a>
                </dd>
                <dt>最新の編集者ドラフト:</dt>
                <dd><a
                        href="https://w3c.github.io/web-based-payment-handler/">https://w3c.github.io/web-based-payment-handler/</a>
                </dd>
                <dt>履歴:</dt>
                <dd>
                    <a href="https://www.w3.org/standards/history/web-based-payment-handler/"
                        data-previous-shortname="payment-handler">https://www.w3.org/standards/history/web-based-payment-handler/</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/web-based-payment-handler/commits/">Commit history</a>
                </dd>
                <dt>テストスイート:</dt>
                <dd><a href="https://wpt.live/payment-handler/">https://wpt.live/payment-handler/</a></dd>




                <dt>編集者:</dt>
                <dd class="editor p-author h-card vcard" data-editor-id="2175">
                    <a class="u-url url p-name fn" href="https://www.w3.org/People/Jacobs/">Ian Jacobs</a> (<a
                        class="p-org org h-org" href="https://www.w3.org/">W3C</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="77147">
                    <a class="u-url url p-name fn" href="https://github.com/romandev">Jinho Bang</a> (<span
                        class="p-org org h-org">招待専門家</span>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="96463">
                    <span class="p-name fn">Stephen McGruer</span> (<a class="p-org org h-org"
                        href="https://www.google.com/">Google</a>)
                </dd>
                <dt>
                    以前の編集者:
                </dt>
                <dd class="editor p-author h-card vcard" data-editor-id="87485">
                    <a class="u-url url p-name fn" href="https://github.com/lyverovski">Andre Lyver</a> (<a
                        class="p-org org h-org" href="https://shopify.com">Shopify</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="90636">
                    <a class="u-url url p-name fn" href="https://github.com/tommythorsen">Tommy Thorsen</a> (<a
                        class="p-org org h-org" href="https://opera.com">Opera</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="67785">
                    <a class="u-url url p-name fn" href="https://github.com/adamroach">Adam Roach</a> (<a
                        class="p-org org h-org" href="https://mozilla.org">Mozilla</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="83784">
                    <a class="u-url url p-name fn" href="https://github.com/rsolomakhin">Rouslan Solomakhin</a> (<a
                        class="p-org org h-org" href="https://www.google.com/">Google</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="42590">
                    <a class="u-url url p-name fn" href="https://github.com/adrianhopebailie">Adrian Hope-Bailie</a> (<a
                        class="p-org org h-org" href="https://coil.com">Coil</a>)
                </dd>

                <dt>フィードバック:</dt>
                <dd>
                    <a href="https://github.com/w3c/web-based-payment-handler/">GitHub w3c/web-based-payment-handler</a>
                    (<a href="https://github.com/w3c/web-based-payment-handler/pulls/">pull requests</a>,
                    <a href="https://github.com/w3c/web-based-payment-handler/issues/new/choose">new issue</a>,
                    <a href="https://github.com/w3c/web-based-payment-handler/issues/">open issues</a>)
                </dd>


            </dl>
        </details>


        <p class="copyright">
            <a href="https://www.w3.org/policies/#copyright">Copyright</a>
            ©
            2026

            <a href="https://www.w3.org/">World Wide Web Consortium</a>.
            <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
            <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>,
            <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/copyright/software-license-2023/"
                title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>要旨</h2>
        <p>
            この仕様は、Webアプリケーションが支払い要求を処理できる機能を定義します。
        </p>
    </section>
    <section id="sotd" class="introductory">
        <h2>この文書の状況</h2>
        <p><em>このセクションは、本書の公開時点での状態を説明します。現在の <abbr title="World Wide Web Consortium">W3C</abbr>
                の刊行物の一覧および本技術報告書の最新改訂版は、<a href="https://www.w3.org/TR/"><abbr
                        title="World Wide Web Consortium">W3C</abbr> の標準と草案の索引</a>で確認できます。</em></p>
        <p>
            Web Payments Working Group は、グループがまだ対応していないすべてのバグ報告の一覧を <a
                href="https://github.com/w3c/payment-handler/issues">管理しています</a>。この草案では、作業部会でまだ議論される保留中のいくつかの問題点を示しています。これらの問題（有効かどうかを含む）の結論についてはまだ決定されていません。未解決の問題に対する仕様案を含むプルリクエストは歓迎されます。
        </p>
        <p>
            この文書は、<a href="https://www.w3.org/groups/wg/payments">Web Payments Working Group</a> によって、<a
                href="https://www.w3.org/policies/process/20250818/#recs-and-notes">勧告トラック</a>を使用した作業草案として公開されました。
        </p>
        <p>作業草案としての公開は、<abbr title="World Wide Web Consortium">W3C</abbr> およびそのメンバーによる支持を意味するものではありません。</p>
        <p>
            本書は草案であり、いつでも更新、置換、または他の文書により廃止される可能性があります。本書を作業中の文書以外として引用することは適切ではありません。
        </p>
        <p>
            本書は、<a href="https://www.w3.org/policies/patent-policy/"><abbr title="World Wide Web Consortium">W3C</abbr>
                特許方針</a>の下で運営されるグループによって作成されました。
            <abbr title="World Wide Web Consortium">W3C</abbr> は、グループの成果物に関連して行われたあらゆる特許開示の <a rel="disclosure"
                href="https://www.w3.org/groups/wg/payments/ipr">公開リスト</a>
            を維持しています；そのページには特許を開示するための手順も含まれます。個人が、当該個人が本質的な請求（<a
                href="https://www.w3.org/policies/patent-policy/#def-essential">Essential
                Claim(s)</a>）を含むと信じる特許を実際に知っている場合は、<a
                href="https://www.w3.org/policies/patent-policy/#sec-Disclosure">W3C 特許方針の第6節</a>に従ってその情報を開示する必要があります。
        </p>
        <p>
            この文書は、<a id="w3c_process_revision" href="https://www.w3.org/policies/process/20250818/">2025年8月18日 の <abbr
                    title="World Wide Web Consortium">W3C</abbr> プロセス文書</a>に従って管理されています。
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">目次</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">要旨</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">この文書の状況</a></li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>
                    導入
                </a></li>
            <li class="tocline"><a class="tocxref" href="#model"><bdi class="secno">2. </bdi>
                    概要
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#handling-a-payment-request"><bdi class="secno">2.1
                            </bdi>
                            支払い要求の処理
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#relation-to-other-types-of-payment-apps"><bdi
                                class="secno">2.2 </bdi>
                            他の種類の支払いアプリとの関係
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#registration"><bdi class="secno">3. </bdi>
                    登録
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#just-in-time-registration"><bdi class="secno">3.1
                            </bdi>
                            ジャストインタイム登録
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#management"><bdi class="secno">4. </bdi>
                    管理
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref"
                            href="#extension-to-the-serviceworkerregistration-interface"><bdi class="secno">4.1 </bdi>
                            <span> <code>ServiceWorkerRegistration</code> インターフェイスへの拡張</span>
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#paymentmanager-interface"><bdi class="secno">4.2
                            </bdi>
                            <span data-export="" data-dfn-type="interface" data-idl="interface"
                                data-title="PaymentManager" data-dfn-for=""><code>PaymentManager</code></span> インターフェイス
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#userhint-attribute"><bdi class="secno">4.2.1
                                    </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="userHint" data-dfn-for="PaymentManager" data-type="DOMString"
                                        data-lt="userHint"
                                        data-local-lt="PaymentManager.userHint"><code>userHint</code></span> 属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#enabledelegations-method"><bdi
                                        class="secno">4.2.2 </bdi>
                                    <span data-export="" data-dfn-type="method" data-idl="operation"
                                        data-title="enableDelegations()" data-dfn-for="PaymentManager"
                                        data-type="Promise" data-lt="enableDelegations()|enableDelegations(delegations)"
                                        data-local-lt="PaymentManager.enableDelegations|PaymentManager.enableDelegations()|enableDelegations"><code>enableDelegations()</code></span>
                                    メソッド
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#paymentdelegation-enum"><bdi class="secno">4.3 </bdi>
                            <span data-export="" data-dfn-type="enum" data-idl="enum" data-title="PaymentDelegation"
                                data-dfn-for=""><code>PaymentDelegation</code></span> 列挙型
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#canmakepayment"><bdi class="secno">5. </bdi>
                    支払いが可能か
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#extension-to-serviceworkerglobalscope"><bdi
                                class="secno">5.1 </bdi>
                            <span> <code>ServiceWorkerGlobalScope</code> への拡張</span>
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#oncanmakepayment-attribute"><bdi
                                        class="secno">5.1.1 </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="oncanmakepayment" data-dfn-for="ServiceWorkerGlobalScope"
                                        data-type="EventHandler" data-lt="oncanmakepayment"
                                        data-local-lt="ServiceWorkerGlobalScope.oncanmakepayment"><code>oncanmakepayment</code></span>
                                    属性
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#the-canmakepaymentevent"><bdi class="secno">5.2 </bdi>
                            <span><code>CanMakePaymentEvent</code></span>
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#respondwith-method"><bdi class="secno">5.2.1
                                    </bdi>
                                    <span data-export="" data-dfn-type="method" data-idl="operation"
                                        data-title="respondWith()" data-dfn-for="CanMakePaymentEvent"
                                        data-type="undefined"
                                        data-lt="respondWith()|respondWith(canMakePaymentResponse)"
                                        data-local-lt="CanMakePaymentEvent.respondWith|CanMakePaymentEvent.respondWith()|respondWith"><code>respondWith()</code></span>
                                    メソッド
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#handling-a-canmakepaymentevent"><bdi class="secno">5.3
                            </bdi>
                            <span> <code>CanMakePaymentEvent</code> の処理</span>
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#canmakepayment-example"><bdi class="secno">5.4 </bdi>
                            <span> <code>CanMakePaymentEvent</code> の処理の例</span>
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#filtering-of-payment-handlers"><bdi class="secno">5.5
                            </bdi>
                            支払いハンドラのフィルタリング
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#invocation"><bdi class="secno">6. </bdi>
                    呼び出し
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#extension-to-serviceworkerglobalscope-0"><bdi
                                class="secno">6.1 </bdi>
                            <span data-cite="SERVICE-WORKERS#serviceworkerglobalscope-interface" data-link-type="idl"
                                class="formerLink"><code>ServiceWorkerGlobalScope</code> への拡張</span>
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#onpaymentrequest-attribute"><bdi
                                        class="secno">6.1.1 </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="onpaymentrequest" data-dfn-for="ServiceWorkerGlobalScope"
                                        data-type="EventHandler" data-lt="onpaymentrequest"
                                        data-local-lt="ServiceWorkerGlobalScope.onpaymentrequest"><code>onpaymentrequest</code></span>
                                    属性
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#the-paymentrequestdetailsupdate"><bdi
                                class="secno">6.2 </bdi>
                            <span data-export="" data-dfn-type="dictionary" data-idl="dictionary"
                                data-title="PaymentRequestDetailsUpdate"
                                data-dfn-for=""><code>PaymentRequestDetailsUpdate</code></span> 辞書
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#error-member"><bdi class="secno">6.2.1 </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field" data-title="error"
                                        data-dfn-for="PaymentRequestDetailsUpdate"
                                        data-type="DOMString"><code>error</code></span> メンバー
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#total-member"><bdi class="secno">6.2.2 </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field" data-title="total"
                                        data-dfn-for="PaymentRequestDetailsUpdate"
                                        data-type="PaymentCurrencyAmount"><code>total</code></span> メンバー
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#modifiers-member"><bdi class="secno">6.2.3
                                    </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="modifiers" data-dfn-for="PaymentRequestDetailsUpdate"
                                        data-type="sequence"><code>modifiers</code></span> メンバー
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#shippingoptions-member"><bdi
                                        class="secno">6.2.4 </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="shippingOptions" data-dfn-for="PaymentRequestDetailsUpdate"
                                        data-type="sequence"><code>shippingOptions</code></span> メンバー
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#paymentmethoderrors-member"><bdi
                                        class="secno">6.2.5 </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="paymentMethodErrors" data-dfn-for="PaymentRequestDetailsUpdate"
                                        data-type="object"><code>paymentMethodErrors</code></span> メンバー
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#shippingaddresserrors-member"><bdi
                                        class="secno">6.2.6 </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="shippingAddressErrors" data-dfn-for="PaymentRequestDetailsUpdate"
                                        data-type="AddressErrors"><code>shippingAddressErrors</code></span> メンバー
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#the-paymentrequestevent"><bdi class="secno">6.3 </bdi>
                            <span data-export="" data-dfn-type="interface" data-idl="interface"
                                data-title="PaymentRequestEvent" data-dfn-for=""><code>PaymentRequestEvent</code></span>
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#toporigin-attribute"><bdi class="secno">6.3.1
                                    </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="topOrigin" data-dfn-for="PaymentRequestEvent" data-type="USVString"
                                        data-lt="topOrigin"
                                        data-local-lt="PaymentRequestEvent.topOrigin"><code>topOrigin</code></span> 属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#paymentrequestorigin-attribute"><bdi
                                        class="secno">6.3.2 </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="paymentRequestOrigin" data-dfn-for="PaymentRequestEvent"
                                        data-type="USVString" data-lt="paymentRequestOrigin"
                                        data-local-lt="PaymentRequestEvent.paymentRequestOrigin"><code>paymentRequestOrigin</code></span>
                                    属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#paymentrequestid-attribute"><bdi
                                        class="secno">6.3.3 </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="paymentRequestId" data-dfn-for="PaymentRequestEvent"
                                        data-type="DOMString" data-lt="paymentRequestId"
                                        data-local-lt="PaymentRequestEvent.paymentRequestId"><code>paymentRequestId</code></span>
                                    属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#methoddata-attribute"><bdi class="secno">6.3.4
                                    </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="methodData" data-dfn-for="PaymentRequestEvent"
                                        data-type="FrozenArray" data-lt="methodData"
                                        data-local-lt="PaymentRequestEvent.methodData"><code>methodData</code></span> 属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#total-attribute"><bdi class="secno">6.3.5
                                    </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="total" data-dfn-for="PaymentRequestEvent" data-type="object"
                                        data-lt="total"
                                        data-local-lt="PaymentRequestEvent.total"><code>total</code></span> 属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#modifiers-attribute"><bdi class="secno">6.3.6
                                    </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="modifiers" data-dfn-for="PaymentRequestEvent"
                                        data-type="FrozenArray" data-lt="modifiers"
                                        data-local-lt="PaymentRequestEvent.modifiers"><code>modifiers</code></span> 属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#paymentoptions-attribute"><bdi
                                        class="secno">6.3.7 </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="paymentOptions" data-dfn-for="PaymentRequestEvent"
                                        data-type="object" data-lt="paymentOptions"
                                        data-local-lt="PaymentRequestEvent.paymentOptions"><code>paymentOptions</code></span>
                                    属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#shippingoptions-attribute"><bdi
                                        class="secno">6.3.8 </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="shippingOptions" data-dfn-for="PaymentRequestEvent"
                                        data-type="FrozenArray" data-lt="shippingOptions"
                                        data-local-lt="PaymentRequestEvent.shippingOptions"><code>shippingOptions</code></span>
                                    属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#openwindow-method"><bdi class="secno">6.3.9
                                    </bdi>
                                    <span data-export="" data-dfn-type="method" data-idl="operation"
                                        data-title="openWindow()" data-dfn-for="PaymentRequestEvent" data-type="Promise"
                                        data-lt="openWindow()|openWindow(url)"
                                        data-local-lt="PaymentRequestEvent.openWindow|PaymentRequestEvent.openWindow()|openWindow"><code>openWindow()</code></span>
                                    メソッド
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#changepaymentmethod-method"><bdi
                                        class="secno">6.3.10 </bdi>
                                    <span
                                        data-lt="changePaymentMethod(methodName, methodDetails)|changePaymentMethod()|changePaymentMethod(methodName)"
                                        data-export="" data-dfn-type="method" data-idl="operation"
                                        data-title="changePaymentMethod()" data-dfn-for="PaymentRequestEvent"
                                        data-type="Promise"
                                        data-local-lt="PaymentRequestEvent.changePaymentMethod|PaymentRequestEvent.changePaymentMethod()|changePaymentMethod"><code>changePaymentMethod()</code></span>
                                    メソッド
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#changeshippingaddress-method"><bdi
                                        class="secno">6.3.11 </bdi>
                                    <span data-lt="changeShippingAddress(shippingAddress)|changeShippingAddress()"
                                        data-export="" data-dfn-type="method" data-idl="operation"
                                        data-title="changeShippingAddress()" data-dfn-for="PaymentRequestEvent"
                                        data-type="Promise"
                                        data-local-lt="PaymentRequestEvent.changeShippingAddress|PaymentRequestEvent.changeShippingAddress()|changeShippingAddress"><code>changeShippingAddress()</code></span>
                                    メソッド
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#changeshippingoption-method"><bdi
                                        class="secno">6.3.12 </bdi>
                                    <span data-lt="changeShippingOption(shippingOption)|changeShippingOption()"
                                        data-export="" data-dfn-type="method" data-idl="operation"
                                        data-title="changeShippingOption()" data-dfn-for="PaymentRequestEvent"
                                        data-type="Promise"
                                        data-local-lt="PaymentRequestEvent.changeShippingOption|PaymentRequestEvent.changeShippingOption()|changeShippingOption"><code>changeShippingOption()</code></span>
                                    メソッド
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#respondwith-method-0"><bdi
                                        class="secno">6.3.13 </bdi>
                                    <span data-lt="respondWith(handlerResponsePromise)|respondWith()" data-export=""
                                        data-dfn-type="method" data-idl="operation" data-title="respondWith()"
                                        data-dfn-for="PaymentRequestEvent" data-type="undefined"
                                        data-local-lt="PaymentRequestEvent.respondWith|PaymentRequestEvent.respondWith()|respondWith"><code>respondWith()</code></span>
                                    メソッド
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#paymentrequesteventinit-dictionary"><bdi
                                        class="secno">6.3.14 </bdi>
                                    <span data-export="" data-dfn-type="dictionary" data-idl="dictionary"
                                        data-title="PaymentRequestEventInit"
                                        data-dfn-for=""><code>PaymentRequestEventInit</code></span> 辞書
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#methoddata-population-algorithm"><bdi
                                        class="secno">6.3.15 </bdi>
                                    <span>MethodData の生成アルゴリズム</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#modifiers-population-algorithm"><bdi
                                        class="secno">6.3.16 </bdi>
                                    <span>Modifiers の生成アルゴリズム</span>
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#internal-slots"><bdi class="secno">6.4 </bdi>
                            内部スロット
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#handling-a-paymentrequestevent"><bdi class="secno">6.5
                            </bdi>
                            <span><code>PaymentRequestEvent</code> の処理</span>
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#windows"><bdi class="secno">7. </bdi>
                    Windows
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#open-window-algorithm"><bdi class="secno">7.1 </bdi>
                            <span>ウィンドウを開くアルゴリズム</span>
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#post-example"><bdi class="secno">7.2 </bdi>
                            <span><code>PaymentRequestEvent</code> の処理の例</span>
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#response"><bdi class="secno">8. </bdi>
                    応答
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#paymenthandlerresponse-dictionary"><bdi
                                class="secno">8.1 </bdi>
                            <span data-export="" data-dfn-type="dictionary" data-idl="dictionary"
                                data-title="PaymentHandlerResponse"
                                data-dfn-for=""><code>PaymentHandlerResponse</code></span> 辞書
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#methodname-attribute"><bdi class="secno">8.1.1
                                    </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="methodName" data-dfn-for="PaymentHandlerResponse"
                                        data-type="DOMString"><code>methodName</code></span> 属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#details-attribute"><bdi class="secno">8.1.2
                                    </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="details" data-dfn-for="PaymentHandlerResponse"
                                        data-type="object"><code>details</code></span> 属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#payername-attribute"><bdi class="secno">8.1.3
                                    </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="payerName" data-dfn-for="PaymentHandlerResponse"
                                        data-type="DOMString"><code>payerName</code></span> 属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#payeremail-attribute"><bdi class="secno">8.1.4
                                    </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="payerEmail" data-dfn-for="PaymentHandlerResponse"
                                        data-type="DOMString"><code>payerEmail</code></span> 属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#payerphone-attribute"><bdi class="secno">8.1.5
                                    </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="payerPhone" data-dfn-for="PaymentHandlerResponse"
                                        data-type="DOMString"><code>payerPhone</code></span> 属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#shippingaddress-attribute"><bdi
                                        class="secno">8.1.6 </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="shippingAddress" data-dfn-for="PaymentHandlerResponse"
                                        data-type="AddressInit"><code>shippingAddress</code></span> 属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#shippingoption-attribute"><bdi
                                        class="secno">8.1.7 </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="shippingOption" data-dfn-for="PaymentHandlerResponse"
                                        data-type="DOMString"><code>shippingOption</code></span> 属性
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#change-payment-method-algorithm"><bdi
                                class="secno">8.2 </bdi>
                            支払い方法変更アルゴリズム
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#change-payment-details-algorithm"><bdi
                                class="secno">8.3 </bdi>
                            支払い詳細変更アルゴリズム
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#respond-to-paymentrequest-algorithm"><bdi
                                class="secno">8.4 </bdi>
                            PaymentRequest に応答するアルゴリズム
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#security"><bdi class="secno">9. </bdi>
                    セキュリティおよびプライバシーに関する考慮事項
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#addresses"><bdi class="secno">9.1 </bdi>住所</a>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#information-about-the-user-environment"><bdi
                                class="secno">9.2 </bdi>
                            ユーザー環境に関する情報
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#user-consent-to-install"><bdi class="secno">9.3 </bdi>
                            支払いハンドラのインストールに対するユーザーの同意
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#user-consent-before-payment"><bdi class="secno">9.4
                            </bdi>
                            支払い前のユーザーの同意
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#user-awareness-about-sharing-data-cross-origin"><bdi
                                class="secno">9.5 </bdi>
                            クロスオリジンでのデータ共有に関するユーザーの認識
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#secure-communications"><bdi class="secno">9.6 </bdi>
                            安全な通信
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#authorized-payment-apps"><bdi class="secno">9.7 </bdi>
                            認可された支払いアプリ
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#supported-origin"><bdi class="secno">9.8 </bdi>
                            サポートされるオリジン
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#data-validation"><bdi class="secno">9.9 </bdi>
                            データ検証
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#private-browsing-mode"><bdi class="secno">9.10 </bdi>
                            プライベートブラウジングモード
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#display"><bdi class="secno">10. </bdi>
                    支払いハンドラの表示に関する考慮事項
                </a></li>
            <li class="tocline"><a class="tocxref" href="#dependencies"><bdi class="secno">11. </bdi>
                    依存関係
                </a></li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">12. </bdi>準拠</a></li>
            <li class="tocline"><a class="tocxref" href="#idl-index"><bdi class="secno">A. </bdi>IDL インデックス</a></li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">B. </bdi>参考文献</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">B.1
                            </bdi>規範的参照</a></li>
                    <li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">B.2
                            </bdi>参考文献</a></li>
                </ol>
            </li>
        </ol>
    </nav>
    <section class="informative" id="introduction">
        <div class="header-wrapper">
            <h2 id="x1-introduction"><bdi class="secno">1. </bdi>
                導入
            </h2><a class="self-link" href="#introduction" aria-label="Permalink for Section 1."></a>
        </div>
        <p><em>このセクションは規範ではありません。</em></p>

        <p>
            この仕様は、Webアプリケーションがユーザーに代わって支払い要求を処理できるようにするためのいくつかの新機能を定義します：
        </p>
        <ul>
            <li>オリジンベースの、支払い要求イベントを処理するための権限。</li>
            <li>支払い要求イベント型（<a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent"
                    class="internalDFN" id="ref-for-dom-paymentrequestevent-1"><code>PaymentRequestEvent</code></a>）。<a
                    href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-payment-handler-1">支払いハンドラ</a>は<a data-link-type="idl" data-lt="PaymentRequestEvent"
                    href="#dom-paymentrequestevent" class="internalDFN"
                    id="ref-for-dom-paymentrequestevent-2"><code>PaymentRequestEvent</code></a>のイベントハンドラです。</li>
            <li><a href="#dfn-service-worker-registration" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-service-worker-registration-1">service worker registration</a>インターフェイスへの拡張（<a
                    data-link-type="idl" data-lt="PaymentManager" href="#dom-paymentmanager" class="internalDFN"
                    id="ref-for-dom-paymentmanager-1"><code>PaymentManager</code></a>）により、支払いハンドラのプロパティを管理します。</li>
            <li><a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent"
                    class="internalDFN"
                    id="ref-for-dom-paymentrequestevent-3"><code>PaymentRequestEvent</code></a>に応答する仕組み。</li>
        </ul>
        <div class="note" role="note" id="issue-container-generatedID">
            <div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>注</span></div>
            <p class="">
                この仕様は、オペレーティングシステム固有の仕組み（いわゆる「ネイティブアプリ」）で作られたソフトウェアがどのように支払い要求を処理するかについては扱いません。
            </p>
        </div>
    </section>
    <section id="model">
        <div class="header-wrapper">
            <h2 id="x2-overview"><bdi class="secno">2. </bdi>
                概要
            </h2><a class="self-link" href="#model" aria-label="Permalink for Section 2."></a>
        </div>

        <p>
            本文書では次のフローを想定します：
        </p>
        <ol>
            <li>あるオリジンが、サポートされる支払い方法の集合について支払い要求を処理するためのユーザー許可を要求します。例えば、ユーザーが小売店や銀行のサイトを訪れたときに、そのオリジンから支払いハンドラを登録するよう促される場合があります。オリジンは権限の範囲を確立しますが、オリジンの機能は追加のユーザー同意を必要とせずに進化する可能性があります。
            </li>
            <li>
                <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-payment-handler-2">支払いハンドラ</a>は<a data-link-type="dfn"
                    href="https://www.w3.org/TR/service-workers/#service-worker-concept">service worker</a>コード内で定義されます。
            </li>
            <li>商人（または他の <dfn id="dfn-payee" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">payee</dfn>）が[<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-payment-request" title="Payment Request API">payment-request</a></cite>] の <a
                    data-link-type="dfn"
                    href="https://www.w3.org/TR/payment-request/#canmakepayment-method">canMakePayment()</a> または <a
                    data-link-type="dfn" href="https://www.w3.org/TR/payment-request/#show-method">show()</a>
                メソッドを呼び出すと（例：ユーザー—<dfn id="dfn-payer" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">payer</dfn>—がチェックアウトページのボタンを押したとき）、ユーザーエージェントは候補となる支払いハンドラのリストを計算します。これは商人が受け入れる支払い方法と、ユーザーエージェントがさまざまな手段で知っている支払い方法を比較することで行われ、以下を含むがこれらに限定されません：
                <ul>
                    <li>このAPIを通じて以前に登録されたもの。</li>
                    <li>トランザクションの過程でこのAPIを通じて登録される可能性があるもの（例えば、<a data-link-type="dfn"
                            href="https://www.w3.org/TR/payment-method-manifest/#payment-method-manifest">payment method
                            manifest</a>で特定されるもの）。</li>
                    <li>オペレーティングシステムなど、他の仕組みを通じて登録されたもの。</li>
                </ul>
            </li>
            <li>ユーザーエージェントはユーザーに対して候補支払いハンドラの選択肢を表示します。ユーザーエージェントはこれらの選択肢を、登録時に提供された、またはWebアプリから入手可能な情報（ラベルやアイコン）を用いて表示します。
            </li>
            <li>ユーザー（<a href="#dfn-payer" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-payer-1">payer</a>）が支払いハンドラを選択すると、ユーザーエージェントは選択された支払いハンドラの <a data-link-type="idl"
                    data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent" class="internalDFN"
                    id="ref-for-dom-paymentrequestevent-4"><code>PaymentRequestEvent</code></a> を（<a
                    data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source">user
                    interaction task source</a>を参照）選択された支払いハンドラの <a data-link-type="dfn"
                    href="https://www.w3.org/TR/service-workers/#service-worker-concept">service worker</a> 内で発火します。<a
                    data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent"
                    class="internalDFN" id="ref-for-dom-paymentrequestevent-5"><code>PaymentRequestEvent</code></a> には
                PaymentRequest（[<cite><a class="bibref" data-link-type="biblio" href="#bib-payment-request"
                        title="Payment Request API">payment-request</a></cite>]で定義) からの情報や、支払い先のオリジンなどの追加情報が含まれます。
            </li>
            <li>支払いハンドラが起動されると、必要な手順を実行して<a href="#handling-a-payment-request">支払い要求を処理</a>し、適切な支払い応答を<a
                    href="#dfn-payee" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-payee-1">payee</a>に返します。ユーザーとの対話が必要な場合、支払いハンドラはその目的のためにウィンドウを開くことができます。
            </li>
            <li>支払いハンドラが要求の処理を終えると、ユーザーエージェントは非同期に応答を受け取ります。その応答は[<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-payment-request" title="Payment Request API">payment-request</a></cite>]の <a
                    data-link-type="dfn"
                    href="https://www.w3.org/TR/payment-request/#dom-paymentresponse">PaymentResponse</a> になります。
            </li>
        </ol>
        <div class="note" role="note" id="issue-container-generatedID-0">
            <div role="heading" class="note-title marker" id="h-note-0" aria-level="3"><span>注</span></div>
            <p class="">
                あるオリジンは複数の service worker を用いて支払いアプリを実装することができ、そのためオリジンごとに複数の<a href="#dfn-payment-handler"
                    class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-payment-handler-4">支払いハンドラ</a>が登録される場合があります。どのハンドラが呼び出されるかはユーザーの選択によって決まります。
            </p>
        </div>
        <section class="informative" id="handling-a-payment-request">
            <div class="header-wrapper">
                <h3 id="x2-1-handling-a-payment-request"><bdi class="secno">2.1 </bdi>
                    支払い要求の処理
                </h3><a class="self-link" href="#handling-a-payment-request" aria-label="Permalink for Section 2.1"></a>
            </div>
            <p><em>このセクションは規範ではありません。</em></p>

            <p>
                <dfn data-plurals="payment handlers" id="dfn-payment-handler" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">支払いハンドラ</dfn>は、ユーザーに代わって支払い要求を処理できるWebアプリケーションです。
            </p>
            <p>
                支払いハンドラのロジックは、サポートする支払い方法によって駆動されます。いくつかの支払い方法は支払いハンドラによるほとんど処理を必要とせず、単に支払いカードの詳細を応答として返すだけです。その場合は、返されたデータを入力として支払いを処理するのはpayeeのウェブサイトの役割です。
            </p>
            <p>
                対照的に、暗号通貨の支払いや銀行発のクレジット振替のように、支払いハンドラが支払いの処理を開始することを要求する支払い方法もあります。そのような場合、支払いハンドラは支払い参照、エンドポイントURL、あるいはpayeeのウェブサイトが支払いの結果を判定するのに使用できるその他のデータを返します（支払い自体を処理するのではなく）。
            </p>
            <p>
                支払い要求の処理には、多数の相互作用が含まれることがあります：新しいウィンドウや他のAPI（例えば<cite><a data-matched-text="[[[WebCryptoAPI]]]"
                        href="https://www.w3.org/TR/WebCryptoAPI/">Web Cryptography
                        API</a></cite>）を通じたユーザーとのやり取り、またはウェブリクエストなどを通じた他のサービスやオリジンとのやり取りなどです。
            </p>
            <p>
                この仕様は、<a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent"
                    class="internalDFN" id="ref-for-dom-paymentrequestevent-6"><code>PaymentRequestEvent</code></a>
                を支払いハンドラが受け入れてから支払いハンドラが応答を返すまでに発生するこれらの活動については扱いません。支払いハンドラを構成し支払い要求を処理するために必要となる可能性のあるこれらすべての活動は、支払いハンドラの実装に委ねられます。例えば：
            </p>
            <ul>
                <li>支払いサービスを提供するオリジンとユーザーがどのようにアカウントを確立するか。</li>
                <li>オリジンがユーザーをどのように認証するか。</li>
                <li>payeeサーバーとpayee Webアプリケーションの間、または支払いアプリのオリジンと他の関係者との間で通信がどのように行われるか。</li>
            </ul>
            <p>
                したがって、オリジンはライフサイクル管理、セキュリティ、ユーザー認証、ユーザーとの対話などのために他の多くのWeb技術に依存します。
            </p>
        </section>
        <section class="informative" id="relation-to-other-types-of-payment-apps">
            <div class="header-wrapper">
                <h3 id="x2-2-relation-to-other-types-of-payment-apps"><bdi class="secno">2.2 </bdi>
                    他の種類の支払いアプリとの関係
                </h3><a class="self-link" href="#relation-to-other-types-of-payment-apps"
                    aria-label="Permalink for Section 2.2"></a>
            </div>
            <p><em>このセクションは規範ではありません。</em></p>

            <p>
                この仕様は、サードパーティのモバイル支払いアプリがユーザーエージェントとどのように（独自の仕組みを通じて）相互作用するか、あるいはユーザーエージェント自体がどのように簡易的な支払いアプリ機能を提供するかを扱うものではありません。
            </p>
            <figure
                id="fig-payment-handler-api-enables-web-apps-to-handle-payments-other-types-of-payment-apps-may-use-other-proprietary-mechanisms">
                <img alt="Different types of payment apps. Payment Handler API is for Web apps."
                    src="https://www.w3.org/TR/payment-handler/app-types.png">
                <figcaption><a class="self-link"
                        href="#fig-payment-handler-api-enables-web-apps-to-handle-payments-other-types-of-payment-apps-may-use-other-proprietary-mechanisms">Figure
                        <bdi class="figno">1</bdi></a> <span class="fig-title">
                        Payment Handler API は Web アプリが支払いを処理できるようにします。他の種類の支払いアプリは別の（独自の）仕組みを使用する場合があります。
                    </span></figcaption>
            </figure>
        </section>
    </section>

    <section id="registration">
        <div class="header-wrapper">
            <h2 id="x3-registration"><bdi class="secno">3. </bdi>
                登録
            </h2><a class="self-link" href="#registration" aria-label="Permalink for Section 3."></a>
        </div>

        <p>
            支払いハンドラは、ユーザーエージェントに対してジャストインタイム（JIT）登録メカニズムを通じて登録されます。
        </p>
        <section id="just-in-time-registration">
            <div class="header-wrapper">
                <h3 id="x3-1-just-in-time-registration"><bdi class="secno">3.1 </bdi>
                    ジャストインタイム登録
                </h3><a class="self-link" href="#just-in-time-registration" aria-label="Permalink for Section 3.1"></a>
            </div>

            <p>
                支払いハンドラが商人が<a data-link-type="idl" data-lt="show()"
                    href="https://www.w3.org/TR/payment-request/#show-method"><code>show</code></a><code>()</code>
                メソッドを呼び出したときに登録されていない場合、ユーザーエージェントはトランザクション中にユーザーがこの支払いハンドラを登録することを許可する可能性があります（「ジャストインタイム」）。
            </p>
            <p><em>このセクションの残りの内容は規範ではありません。</em></p>
            <p>
                ユーザーエージェントは、商人が要求したURLベースの支払い方法識別子を通じて見つかった<a data-link-type="dfn"
                    href="https://www.w3.org/TR/payment-method-manifest/#payment-method-manifest">payment method
                    manifest</a>から支払いハンドラ情報を導出することにより、ジャストインタイムインストールを実行する場合があります。
            </p>
        </section>
    </section>
    <section id="management">
        <div class="header-wrapper">
            <h2 id="x4-management"><bdi class="secno">4. </bdi>
                管理
            </h2><a class="self-link" href="#management" aria-label="Permalink for Section 4."></a>
        </div>

        <p>
            本セクションでは、支払いハンドラが自身のプロパティを管理するために利用できる機能を説明します。
        </p>
        <section data-dfn-for="ServiceWorkerRegistration" id="extension-to-the-serviceworkerregistration-interface">
            <div class="header-wrapper">
                <h3 id="x4-1-extension-to-the-serviceworkerregistration-interface"><bdi class="secno">4.1 </bdi>
                    <code>ServiceWorkerRegistration</code> インターフェイスへの拡張
                </h3><a class="self-link" href="#extension-to-the-serviceworkerregistration-interface"
                    aria-label="Permalink for Section 4.1"></a>
            </div>

            <pre class="idl def" id="webidl-1742672635"><span class="idlHeader"><a class="self-link" href="#webidl-1742672635">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-serviceworkerregistration-partial-1" data-title="ServiceWorkerRegistration">partial interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-serviceworkerregistration"><code>ServiceWorkerRegistration</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-serviceworkerregistration-paymentmanager" data-title="paymentManager" data-dfn-for="ServiceWorkerRegistration">
  [<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-paymentmanager" class="internalDFN" id="ref-for-dom-paymentmanager-2"><code>PaymentManager</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerregistration-paymentmanager" id="ref-for-dom-serviceworkerregistration-paymentmanager-1"><code>paymentManager</code></a>;</span>
};</span></code></pre>
            <p>
                <dfn data-export="" data-dfn-type="attribute" id="dom-serviceworkerregistration-paymentmanager"
                    data-idl="attribute" data-title="paymentManager" data-dfn-for="ServiceWorkerRegistration"
                    data-type="PaymentManager" data-lt="paymentManager"
                    data-local-lt="ServiceWorkerRegistration.paymentManager" tabindex="0"
                    aria-haspopup="dialog"><code>paymentManager</code></dfn> 属性は支払いハンドラ管理機能を公開します。
            </p>
        </section>
        <section data-dfn-for="PaymentManager" id="paymentmanager-interface">
            <div class="header-wrapper">
                <h3 id="x4-2-paymentmanager-interface"><bdi class="secno">4.2 </bdi>
                    <dfn data-export="" data-dfn-type="interface" id="dom-paymentmanager" data-idl="interface"
                        data-title="PaymentManager" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>PaymentManager</code></dfn> インターフェイス
                </h3><a class="self-link" href="#paymentmanager-interface" aria-label="Permalink for Section 4.2"></a>
            </div>

            <pre class="idl def" id="webidl-1708874582"><span class="idlHeader"><a class="self-link" href="#webidl-1708874582">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-paymentmanager" data-title="PaymentManager">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-paymentmanager" id="ref-for-dom-paymentmanager-3"><code>PaymentManager</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-paymentmanager-userhint" data-title="userHint" data-dfn-for="PaymentManager">
  attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentmanager-userhint" id="ref-for-dom-paymentmanager-userhint-1"><code>userHint</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-paymentmanager-enabledelegations-delegations" data-title="enableDelegations" data-dfn-for="PaymentManager"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentmanager-enabledelegations" id="ref-for-dom-paymentmanager-enabledelegations-1"><code>enableDelegations</code></a>(<span class="idlType"><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-paymentdelegation" class="internalDFN" id="ref-for-dom-paymentdelegation-1"><code>PaymentDelegation</code></a>&gt;</span> <span class="idlParamName">delegations</span>);</span>
};</span></code></pre>
            <p>
                <a data-link-type="idl" data-lt="PaymentManager" href="#dom-paymentmanager" class="internalDFN"
                    id="ref-for-dom-paymentmanager-4"><code>PaymentManager</code></a> は<a href="#dfn-payment-handler"
                    class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-payment-handler-5">支払いハンドラ</a>が自身のサポートする委任（delegations）を管理するために使用されます。
            </p>
            <section id="userhint-attribute">
                <div class="header-wrapper">
                    <h4 id="x4-2-1-userhint-attribute"><bdi class="secno">4.2.1 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-paymentmanager-userhint"
                            data-idl="attribute" data-title="userHint" data-dfn-for="PaymentManager"
                            data-type="DOMString" data-lt="userHint" data-local-lt="PaymentManager.userHint"
                            tabindex="0" aria-haspopup="dialog"><code>userHint</code></dfn> 属性
                    </h4><a class="self-link" href="#userhint-attribute" aria-label="Permalink for Section 4.2.1"></a>
                </div>

                <p>
                    支払いハンドラ名とアイコンを表示する際、ユーザーエージェントはこの文字列を用いてユーザー体験を向上させる場合があります。例えば "**** 1234" のような user hint
                    は特定のカードがこの支払いハンドラ経由で利用可能であることをユーザーに思い出させることができます。
                </p>
            </section>
            <section id="enabledelegations-method">
                <div class="header-wrapper">
                    <h4 id="x4-2-2-enabledelegations-method"><bdi class="secno">4.2.2 </bdi>
                        <dfn data-export="" data-dfn-type="method" id="dom-paymentmanager-enabledelegations"
                            data-idl="operation" data-title="enableDelegations()" data-dfn-for="PaymentManager"
                            data-type="Promise" data-lt="enableDelegations()|enableDelegations(delegations)"
                            data-local-lt="PaymentManager.enableDelegations|PaymentManager.enableDelegations()|enableDelegations"
                            tabindex="0" aria-haspopup="dialog"><code>enableDelegations()</code></dfn> メソッド
                    </h4><a class="self-link" href="#enabledelegations-method"
                        aria-label="Permalink for Section 4.2.2"></a>
                </div>

                <p>
                    このメソッドは<a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-payment-handler-6">支払いハンドラ</a>が非同期にサポートする<a href="#dom-paymentdelegation"
                        class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-paymentdelegation-2"><code>PaymentDelegation</code></a>のリストを宣言することを可能にします。
                </p>
            </section>
        </section>
        <section data-dfn-for="PaymentDelegation" id="paymentdelegation-enum">
            <div class="header-wrapper">
                <h3 id="x4-3-paymentdelegation-enum"><bdi class="secno">4.3 </bdi>
                    <dfn data-export="" data-dfn-type="enum" id="dom-paymentdelegation" data-idl="enum"
                        data-title="PaymentDelegation" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>PaymentDelegation</code></dfn> 列挙型
                </h3><a class="self-link" href="#paymentdelegation-enum" aria-label="Permalink for Section 4.3"></a>
            </div>

            <pre class="idl def" id="webidl-1015767474"><span class="idlHeader"><a class="self-link" href="#webidl-1015767474">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-paymentdelegation" data-title="PaymentDelegation">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-paymentdelegation" id="ref-for-dom-paymentdelegation-3"><code>PaymentDelegation</code></a> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-paymentdelegation-shippingaddress" id="ref-for-dom-paymentdelegation-shippingaddress-1"><code>shippingAddress</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-paymentdelegation-payername" id="ref-for-dom-paymentdelegation-payername-1"><code>payerName</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-paymentdelegation-payerphone" id="ref-for-dom-paymentdelegation-payerphone-1"><code>payerPhone</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-paymentdelegation-payeremail" id="ref-for-dom-paymentdelegation-payeremail-1"><code>payerEmail</code></a>"</span>
};</span></code></pre>
            <dl>
                <dt>
                    "<dfn data-export="" data-dfn-type="enum-value" id="dom-paymentdelegation-shippingaddress"
                        data-idl="enum-value" data-title="shippingAddress" data-dfn-for="PaymentDelegation" tabindex="0"
                        aria-haspopup="dialog"><code>shippingAddress</code></dfn>"
                </dt>
                <dd>
                    支払いハンドラは必要に応じて配送先住所を提供します。
                </dd>
                <dt>
                    "<dfn data-export="" data-dfn-type="enum-value" id="dom-paymentdelegation-payername"
                        data-idl="enum-value" data-title="payerName" data-dfn-for="PaymentDelegation" tabindex="0"
                        aria-haspopup="dialog"><code>payerName</code></dfn>"
                </dt>
                <dd>
                    支払いハンドラは必要に応じて支払人の名前を提供します。
                </dd>
                <dt>
                    "<dfn data-export="" data-dfn-type="enum-value" id="dom-paymentdelegation-payerphone"
                        data-idl="enum-value" data-title="payerPhone" data-dfn-for="PaymentDelegation" tabindex="0"
                        aria-haspopup="dialog"><code>payerPhone</code></dfn>"
                </dt>
                <dd>
                    支払いハンドラは必要に応じて支払人の電話番号を提供します。
                </dd>
                <dt>
                    "<dfn data-export="" data-dfn-type="enum-value" id="dom-paymentdelegation-payeremail"
                        data-idl="enum-value" data-title="payerEmail" data-dfn-for="PaymentDelegation" tabindex="0"
                        aria-haspopup="dialog"><code>payerEmail</code></dfn>"
                </dt>
                <dd>
                    支払いハンドラは必要に応じて支払人のメールアドレスを提供します。
                </dd>
            </dl>
        </section>
    </section>
    <section id="canmakepayment">
        <div class="header-wrapper">
            <h2 id="x5-can-make-payment"><bdi class="secno">5. </bdi>
                支払いが可能か
            </h2><a class="self-link" href="#canmakepayment" aria-label="Permalink for Section 5."></a>
        </div>

        <p>
            <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-payment-handler-7">支払いハンドラ</a>が <a href="#dom-canmakepaymentevent" class="internalDFN"
                data-link-type="idl" id="ref-for-dom-canmakepaymentevent-1"><code>CanMakePaymentEvent</code></a>
            をサポートしている場合、<a href="#dfn-user-agents" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agents-1">ユーザーエージェント</a>は利用可能な支払いハンドラのフィルタリングに役立てるためにそれを使用してもよい。
        </p>
        <p>
            実装は、開発者が <a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                id="ref-for-dom-canmakepaymentevent-2"><code>CanMakePaymentEvent</code></a>
            に応答するためのタイムアウトを課す場合がある。タイムアウトが期限切れになった場合、実装は <a data-link-type="idl" data-lt="respondWith()"
                href="#dom-canmakepaymentevent-respondwith" class="internalDFN"
                id="ref-for-dom-canmakepaymentevent-respondwith-1"><code>respondWith</code></a><code>()</code> が
            <code>false</code> を引数に呼び出されたかのように動作する。
        </p>
        <section data-dfn-for="ServiceWorkerGlobalScope" id="extension-to-serviceworkerglobalscope">
            <div class="header-wrapper">
                <h3 id="x5-1-extension-to-serviceworkerglobalscope"><bdi class="secno">5.1 </bdi>
                    <code>ServiceWorkerGlobalScope</code> への拡張
                </h3><a class="self-link" href="#extension-to-serviceworkerglobalscope"
                    aria-label="Permalink for Section 5.1"></a>
            </div>

            <pre class="idl def" id="webidl-1445944587"><span class="idlHeader"><a class="self-link" href="#webidl-1445944587">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-serviceworkerglobalscope-partial-1" data-title="ServiceWorkerGlobalScope">partial interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-serviceworkerglobalscope"><code>ServiceWorkerGlobalScope</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-serviceworkerglobalscope-oncanmakepayment" data-title="oncanmakepayment" data-dfn-for="ServiceWorkerGlobalScope">
  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerglobalscope-oncanmakepayment" id="ref-for-dom-serviceworkerglobalscope-oncanmakepayment-1"><code>oncanmakepayment</code></a>;</span>
};</span></code></pre>
            <section id="oncanmakepayment-attribute">
                <div class="header-wrapper">
                    <h4 id="x5-1-1-oncanmakepayment-attribute"><bdi class="secno">5.1.1 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-serviceworkerglobalscope-oncanmakepayment"
                            data-idl="attribute" data-title="oncanmakepayment" data-dfn-for="ServiceWorkerGlobalScope"
                            data-type="EventHandler" data-lt="oncanmakepayment"
                            data-local-lt="ServiceWorkerGlobalScope.oncanmakepayment" tabindex="0"
                            aria-haspopup="dialog"><code>oncanmakepayment</code></dfn> 属性
                    </h4><a class="self-link" href="#oncanmakepayment-attribute"
                        aria-label="Permalink for Section 5.1.1"></a>
                </div>

                <p>
                    <a data-link-type="idl" href="#dom-serviceworkerglobalscope-oncanmakepayment" class="internalDFN"
                        id="ref-for-dom-serviceworkerglobalscope-oncanmakepayment-2"><code>oncanmakepayment</code></a>
                    属性は、対応する<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers">イベントハンドラ</a>の<a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">イベントハンドラのイベント型</a>が
                    "canmakepayment" であるイベントハンドラである。
                </p>
            </section>
        </section>
        <section data-dfn-for="CanMakePaymentEvent" id="the-canmakepaymentevent">
            <div class="header-wrapper">
                <h3 id="x5-2-the-canmakepaymentevent"><bdi class="secno">5.2 </bdi>
                    <dfn data-export="" data-dfn-type="interface" id="dom-canmakepaymentevent" data-idl="interface"
                        data-title="CanMakePaymentEvent" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>CanMakePaymentEvent</code></dfn>
                </h3><a class="self-link" href="#the-canmakepaymentevent" aria-label="Permalink for Section 5.2"></a>
            </div>

            <p>
                <a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-canmakepaymentevent-3"><code>CanMakePaymentEvent</code></a>
                は、支払いハンドラが支払い要求に応答できるかどうかのシグナルとして用いられる。
            </p>
            <pre class="idl def" id="webidl-238602632"><span class="idlHeader"><a class="self-link" href="#webidl-238602632">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-canmakepaymentevent" data-title="CanMakePaymentEvent">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-canmakepaymentevent" id="ref-for-dom-canmakepaymentevent-4"><code>CanMakePaymentEvent</code></a> : <span class="idlSuperclass"><a data-link-type="idl" href="https://www.w3.org/TR/service-workers/#extendableevent-interface">ExtendableEvent</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-canmakepaymentevent-constructor-type" data-title="constructor" data-dfn-for="CanMakePaymentEvent">
  <dfn data-export="" data-dfn-type="constructor" id="dom-canmakepaymentevent-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="CanMakePaymentEvent" data-lt="constructor()|constructor(type)" data-local-lt="CanMakePaymentEvent.constructor|CanMakePaymentEvent.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>);</span><span data-idl="" class="idlMethod" id="idl-def-canmakepaymentevent-respondwith-canmakepaymentresponse" data-title="respondWith" data-dfn-for="CanMakePaymentEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-canmakepaymentevent-respondwith" id="ref-for-dom-canmakepaymentevent-respondwith-2"><code>respondWith</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a>&gt;</span> <span class="idlParamName">canMakePaymentResponse</span>);</span>
};</span></code></pre>
            <section id="respondwith-method">
                <div class="header-wrapper">
                    <h4 id="x5-2-1-respondwith-method"><bdi class="secno">5.2.1 </bdi>
                        <dfn data-export="" data-dfn-type="method" id="dom-canmakepaymentevent-respondwith"
                            data-idl="operation" data-title="respondWith()" data-dfn-for="CanMakePaymentEvent"
                            data-type="undefined" data-lt="respondWith()|respondWith(canMakePaymentResponse)"
                            data-local-lt="CanMakePaymentEvent.respondWith|CanMakePaymentEvent.respondWith()|respondWith"
                            tabindex="0" aria-haspopup="dialog"><code>respondWith()</code></dfn> メソッド
                    </h4><a class="self-link" href="#respondwith-method" aria-label="Permalink for Section 5.2.1"></a>
                </div>

                <p>
                    このメソッドは、支払いハンドラが支払い要求に応答できるかどうかのシグナルとして用いられる。
                </p>
            </section>
        </section>
        <section id="handling-a-canmakepaymentevent">
            <div class="header-wrapper">
                <h3 id="x5-3-handling-a-canmakepaymentevent"><bdi class="secno">5.3 </bdi>
                    <dfn id="dfn-handling-a-canmakepaymentevent" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">CanMakePaymentEvent の処理</dfn>
                </h3><a class="self-link" href="#handling-a-canmakepaymentevent"
                    aria-label="Permalink for Section 5.3"></a>
            </div>

            <p>
                <a data-link-type="dfn"
                    href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> を受信したら、<a
                    href="#dfn-user-agents" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agents-2">ユーザーエージェント</a>は次の手順を<em class="rfc2119">MUST</em>実行する:
            </p>
            <ol>
                <li><a href="#dfn-user-agents" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-user-agents-3">ユーザーエージェント</a>の設定が <a href="#dom-canmakepaymentevent"
                        class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-canmakepaymentevent-5"><code>CanMakePaymentEvent</code></a>
                    の使用を禁止している（例：プライベートブラウジングモードの場合）なら、これらの手順を終了する。
                </li>
                <li><var>registration</var> を、<a data-link-type="idl" data-lt="ServiceWorkerRegistration"
                        href="https://www.w3.org/TR/service-workers/#service-worker-registration-concept"><code>ServiceWorkerRegistration</code></a>
                    とする。
                </li>
                <li><var>registration</var> が見つからない場合、これらの手順を終了する。
                </li>
                <li>
                    <p>
                        <a data-link-type="dfn"
                            href="https://www.w3.org/TR/service-workers/#fire-functional-event-algorithm">機能イベントを発火</a>
                        "<code>canmakepayment</code>" を、<var>registration</var> 上で <a href="#dom-canmakepaymentevent"
                            class="internalDFN" data-link-type="idl"
                            id="ref-for-dom-canmakepaymentevent-6"><code>CanMakePaymentEvent</code></a> を用いて行う。
                    </p>
                </li>
            </ol>
        </section>
        <section id="canmakepayment-example" class="informative">
            <div class="header-wrapper">
                <h3 id="x5-4-example-of-handling-the-canmakepaymentevent"><bdi class="secno">5.4 </bdi>
                    <a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-canmakepaymentevent-7"><code>CanMakePaymentEvent</code></a> の処理の例
                </h3><a class="self-link" href="#canmakepayment-example" aria-label="Permalink for Section 5.4"></a>
            </div>
            <p><em>このセクションは規範ではありません。</em></p>

            <p>
                この例では、<a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-canmakepaymentevent-8"><code>CanMakePaymentEvent</code></a> を監視する service worker
                の書き方を示す。<a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-canmakepaymentevent-9"><code>CanMakePaymentEvent</code></a> を受信すると、service worker
                は常に true を返す。
            </p>
            <div class="example" id="example-handling-the-canmakepaymentevent">
                <div class="marker">
                    <a class="self-link" href="#example-handling-the-canmakepaymentevent">Example<bdi> 1</bdi></a><span
                        class="example-title">: CanMakePaymentEvent の処理</span>
                </div>
                <pre aria-busy="false"><code class="hljs js">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"canmakepayment"</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
  e.<span class="hljs-title function_">respondWith</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">resolve, reject</span>) {
    <span class="hljs-title function_">resolve</span>(<span class="hljs-literal">true</span>);
  }));
});</code></pre>
            </div>
        </section>
        <section id="filtering-of-payment-handlers">
            <div class="header-wrapper">
                <h3 id="x5-5-filtering-of-payment-handlers"><bdi class="secno">5.5 </bdi>
                    支払いハンドラのフィルタリング
                </h3><a class="self-link" href="#filtering-of-payment-handlers"
                    aria-label="Permalink for Section 5.5"></a>
            </div>

            <p>
                <a data-link-type="dfn"
                    href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a>
                と、<a data-link-type="dfn"
                    href="https://www.w3.org/TR/payment-method-id/#dfn-pmi">支払い方法識別子</a>で一致する支払いハンドラが与えられたとき、このアルゴリズムはその支払いハンドラが支払いに使用できる場合に
                <code>true</code> を返す:
            </p>
            <ol class="algorithm">
                <li><var>methodName</var> を、<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a>
                    に指定された<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-id/#dfn-pmi">支払い方法識別子</a>の文字列とする。
                </li>
                <li><var>methodData</var> を、<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a>
                    の支払い方法固有データとする。
                </li>
                <li><var>paymentHandlerOrigin</var> を、支払いハンドラの <a data-link-type="idl"
                        data-lt="ServiceWorkerRegistration"
                        href="https://www.w3.org/TR/service-workers/#service-worker-registration-concept"><code>ServiceWorkerRegistration</code></a>
                    のスコープ URL の<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> とする。
                </li>
                <li><var>paymentMethodManifest</var> を、<var>methodName</var> の<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-manifest/#ingest-payment-method-manifests">取り込み</a>および<a
                        data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-manifest/#parsed-payment-method-manifest">解析</a>済みの<a
                        data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-manifest/#payment-method-manifest">支払い方法マニフェスト</a>とする。
                </li>
                <li>もし <var>methodName</var> が、<var>paymentMethodManifest</var> の <code>"*"</code> 文字列の<a
                        data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-manifest/#parsed-payment-method-manifest-supported-origins">サポートされるオリジン</a>を持つ<a
                        data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-id/#dfn-url-based-payment-method-identifier">URL
                        ベースの支払い方法識別子</a>であるなら、<code>true</code> を返す。
                </li>
                <li>それ以外で、<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-id/#dfn-url-based-payment-method-identifier">URL
                        ベースの支払い方法識別子</a>である <var>methodName</var> の<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> が
                    <var>paymentHandlerOrigin</var> と同じである場合、支払いハンドラで <a href="#dom-canmakepaymentevent"
                        class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-canmakepaymentevent-10"><code>CanMakePaymentEvent</code></a> を発火し、その結果を返す。
                </li>
                <li>それ以外で、<var>paymentMethodManifest</var> の<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-manifest/#parsed-payment-method-manifest-supported-origins">サポートされるオリジン</a>が
                    <var>paymentHandlerOrigin</var> を含む<a data-link-type="dfn"
                        href="https://url.spec.whatwg.org/#concept-url-origin">origin</a> の順序付き集合である場合、支払いハンドラで
                    <a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-canmakepaymentevent-11"><code>CanMakePaymentEvent</code></a> を発火し、その結果を返す。
                </li>
                <li>それ以外の場合、<code>false</code> を返す。
                </li>
            </ol>
        </section>
    </section>
    <section id="invocation">
        <div class="header-wrapper">
            <h2 id="x6-invocation"><bdi class="secno">6. </bdi>
                呼び出し
            </h2><a class="self-link" href="#invocation" aria-label="Permalink for Section 6."></a>
        </div>

        <p>
            ユーザーが支払いハンドラを選択すると、ユーザーエージェントは
            <a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent" class="internalDFN"
                id="ref-for-dom-paymentrequestevent-7"><code>PaymentRequestEvent</code></a> を発火し、その後の <a
                href="#dom-paymenthandlerresponse" class="internalDFN" data-link-type="idl"
                id="ref-for-dom-paymenthandlerresponse-1"><code>PaymentHandlerResponse</code></a> を用いて [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-payment-request"
                    title="Payment Request API">payment-request</a></cite>] の <a data-link-type="dfn"
                href="https://www.w3.org/TR/payment-request/#dom-paymentresponse">PaymentResponse</a> を作成する。
        </p>
        <div class="issue" id="issue-container-number-117">
            <div role="heading" class="issue-title marker" id="h-issue" aria-level="3"><a
                    href="https://github.com/w3c/web-based-payment-handler/issues/117"><span class="issue-number">Issue
                        117</span></a><span class="issue-label">: Abort() の委任を Payment Handler でサポートするか</span></div>
            <p class="">
                Payment Request API は、中止（abort）の管理責任を支払いアプリに委任することをサポートしている。Payment Handler インターフェイスに
                paymentRequestAborted イベントを追加する提案がある。このイベントは、paymentRequest が正常に中止されたかどうかを示す boolean パラメータを取る
                respondWith メソッドを持つ。
            </p>
        </div>
        <section data-dfn-for="ServiceWorkerGlobalScope" data-link-for="ServiceWorkerGlobalScope"
            id="extension-to-serviceworkerglobalscope-0">
            <div class="header-wrapper">
                <h3 id="x6-1-extension-to-serviceworkerglobalscope"><bdi class="secno">6.1 </bdi>
                    <a data-link-type="idl"
                        href="https://www.w3.org/TR/service-workers/#serviceworkerglobalscope-interface"><code>ServiceWorkerGlobalScope</code></a>
                    への拡張
                </h3><a class="self-link" href="#extension-to-serviceworkerglobalscope-0"
                    aria-label="Permalink for Section 6.1"></a>
            </div>

            <p>
                本仕様は <a data-link-type="idl"
                    href="https://www.w3.org/TR/service-workers/#serviceworkerglobalscope-interface"><code>ServiceWorkerGlobalScope</code></a>
                インターフェイスを拡張する。
            </p>
            <pre class="idl def" id="webidl-1119623754"><span class="idlHeader"><a class="self-link" href="#webidl-1119623754">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-serviceworkerglobalscope-partial-2" data-title="ServiceWorkerGlobalScope">partial interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-serviceworkerglobalscope"><code>ServiceWorkerGlobalScope</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-serviceworkerglobalscope-onpaymentrequest" data-title="onpaymentrequest" data-dfn-for="ServiceWorkerGlobalScope">
  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerglobalscope-onpaymentrequest" id="ref-for-dom-serviceworkerglobalscope-onpaymentrequest-1"><code>onpaymentrequest</code></a>;</span>
};</span></code></pre>
            <section id="onpaymentrequest-attribute">
                <div class="header-wrapper">
                    <h4 id="x6-1-1-onpaymentrequest-attribute"><bdi class="secno">6.1.1 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-serviceworkerglobalscope-onpaymentrequest"
                            data-idl="attribute" data-title="onpaymentrequest" data-dfn-for="ServiceWorkerGlobalScope"
                            data-type="EventHandler" data-lt="onpaymentrequest"
                            data-local-lt="ServiceWorkerGlobalScope.onpaymentrequest" tabindex="0"
                            aria-haspopup="dialog"><code>onpaymentrequest</code></dfn> 属性
                    </h4><a class="self-link" href="#onpaymentrequest-attribute"
                        aria-label="Permalink for Section 6.1.1"></a>
                </div>

                <p>
                    <a href="#dom-serviceworkerglobalscope-onpaymentrequest" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-serviceworkerglobalscope-onpaymentrequest-2"><code>onpaymentrequest</code></a>
                    属性は<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers">イベントハンドラ</a>であり、対応する<a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">イベントハンドラのイベント型</a>は
                    <a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent"
                        class="internalDFN" id="ref-for-dom-paymentrequestevent-8"><code>PaymentRequestEvent</code></a>
                    である。
                </p>
            </section>
        </section>
        <section data-dfn-for="PaymentRequestDetailsUpdate" data-link-for="PaymentRequestDetailsUpdate"
            id="the-paymentrequestdetailsupdate">
            <div class="header-wrapper">
                <h3 id="x6-2-the-paymentrequestdetailsupdate"><bdi class="secno">6.2 </bdi>
                    <dfn data-export="" data-dfn-type="dictionary" id="dom-paymentrequestdetailsupdate"
                        data-idl="dictionary" data-title="PaymentRequestDetailsUpdate" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>PaymentRequestDetailsUpdate</code></dfn> 辞書
                </h3><a class="self-link" href="#the-paymentrequestdetailsupdate"
                    aria-label="Permalink for Section 6.2"></a>
            </div>

            <p>
                <code>PaymentRequestDetailsUpdate</code>
                は、更新された合計（必要に応じて修飾子や配送オプションを含む）および、支払い方法・配送先住所・配送オプションのユーザー選択に起因する可能性のあるエラーを含む。
            </p>
            <pre class="idl def" id="webidl-2024425618"><span class="idlHeader"><a class="self-link" href="#webidl-2024425618">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-paymentrequestdetailsupdate" data-title="PaymentRequestDetailsUpdate">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-paymentrequestdetailsupdate" id="ref-for-dom-paymentrequestdetailsupdate-1"><code>PaymentRequestDetailsUpdate</code></a> {<span data-idl="" class="idlMember" id="idl-def-paymentrequestdetailsupdate-error" data-title="error" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-error" id="ref-for-dom-paymentrequestdetailsupdate-error-1"><code>error</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequestdetailsupdate-total" data-title="total" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentcurrencyamount-dictionary">PaymentCurrencyAmount</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-total" id="ref-for-dom-paymentrequestdetailsupdate-total-1"><code>total</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequestdetailsupdate-modifiers" data-title="modifiers" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentdetailsmodifier-dictionary">PaymentDetailsModifier</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-modifiers" id="ref-for-dom-paymentrequestdetailsupdate-modifiers-1"><code>modifiers</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequestdetailsupdate-shippingoptions" data-title="shippingOptions" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentshippingoption">PaymentShippingOption</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-shippingoptions" id="ref-for-dom-paymentrequestdetailsupdate-shippingoptions-1"><code>shippingOptions</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequestdetailsupdate-paymentmethoderrors" data-title="paymentMethodErrors" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-paymentmethoderrors" id="ref-for-dom-paymentrequestdetailsupdate-paymentmethoderrors-1"><code>paymentMethodErrors</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequestdetailsupdate-shippingaddresserrors" data-title="shippingAddressErrors" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-addresserrors">AddressErrors</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-shippingaddresserrors" id="ref-for-dom-paymentrequestdetailsupdate-shippingaddresserrors-1"><code>shippingAddressErrors</code></a>;</span>
};</span></code></pre>
            <section id="error-member">
                <div class="header-wrapper">
                    <h4 id="x6-2-1-error-member"><bdi class="secno">6.2.1 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member" id="dom-paymentrequestdetailsupdate-error"
                            data-idl="field" data-title="error" data-dfn-for="PaymentRequestDetailsUpdate"
                            data-type="DOMString" tabindex="0" aria-haspopup="dialog"><code>error</code></dfn> メンバー
                    </h4><a class="self-link" href="#error-member" aria-label="Permalink for Section 6.2.1"></a>
                </div>

                <p>
                    ユーザーが選択した支払い方法・配送先住所・配送オプションが使用できない理由を説明する、人間が読める文字列。
                </p>
            </section>
            <section id="total-member">
                <div class="header-wrapper">
                    <h4 id="x6-2-2-total-member"><bdi class="secno">6.2.2 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member" id="dom-paymentrequestdetailsupdate-total"
                            data-idl="field" data-title="total" data-dfn-for="PaymentRequestDetailsUpdate"
                            data-type="PaymentCurrencyAmount" tabindex="0"
                            aria-haspopup="dialog"><code>total</code></dfn> メンバー
                    </h4><a class="self-link" href="#total-member" aria-label="Permalink for Section 6.2.2"></a>
                </div>

                <p>
                    変更された支払い方法・配送先住所・配送オプションに基づく更新後の合計。例えば、ユーザーが選択した支払い方法の請求先住所により付加価値税（VAT）が変わる場合や、ユーザーが選択・提供した配送オプション／住所により配送料が変わる場合に、合計は変更されうる。
                </p>
            </section>
            <section id="modifiers-member">
                <div class="header-wrapper">
                    <h4 id="x6-2-3-modifiers-member"><bdi class="secno">6.2.3 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member" id="dom-paymentrequestdetailsupdate-modifiers"
                            data-idl="field" data-title="modifiers" data-dfn-for="PaymentRequestDetailsUpdate"
                            data-type="sequence" tabindex="0" aria-haspopup="dialog"><code>modifiers</code></dfn> メンバー
                    </h4><a class="self-link" href="#modifiers-member" aria-label="Permalink for Section 6.2.3"></a>
                </div>

                <p>
                    変更された支払い方法・配送先住所・配送オプションに基づく更新後の修飾子。例えば、請求先または配送先住所に基づいて全体の合計が €1.00 増えた場合、各修飾子で指定された合計も €1.00
                    増えるべきである。
                </p>
            </section>
            <section id="shippingoptions-member">
                <div class="header-wrapper">
                    <h4 id="x6-2-4-shippingoptions-member"><bdi class="secno">6.2.4 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member"
                            id="dom-paymentrequestdetailsupdate-shippingoptions" data-idl="field"
                            data-title="shippingOptions" data-dfn-for="PaymentRequestDetailsUpdate" data-type="sequence"
                            tabindex="0" aria-haspopup="dialog"><code>shippingOptions</code></dfn> メンバー
                    </h4><a class="self-link" href="#shippingoptions-member"
                        aria-label="Permalink for Section 6.2.4"></a>
                </div>

                <p>
                    変更された配送先住所に基づく更新後の shippingOptions。例えば、ユーザーが提供した国では速達配送がより高価であったり、利用不可であったりする可能性がある。
                </p>
            </section>
            <section id="paymentmethoderrors-member">
                <div class="header-wrapper">
                    <h4 id="x6-2-5-paymentmethoderrors-member"><bdi class="secno">6.2.5 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member"
                            id="dom-paymentrequestdetailsupdate-paymentmethoderrors" data-idl="field"
                            data-title="paymentMethodErrors" data-dfn-for="PaymentRequestDetailsUpdate"
                            data-type="object" tabindex="0"
                            aria-haspopup="dialog"><code>paymentMethodErrors</code></dfn> メンバー
                    </h4><a class="self-link" href="#paymentmethoderrors-member"
                        aria-label="Permalink for Section 6.2.5"></a>
                </div>

                <p>
                    支払い方法に対する検証エラー（存在する場合）。
                </p>
            </section>
            <section id="shippingaddresserrors-member">
                <div class="header-wrapper">
                    <h4 id="x6-2-6-shippingaddresserrors-member"><bdi class="secno">6.2.6 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member"
                            id="dom-paymentrequestdetailsupdate-shippingaddresserrors" data-idl="field"
                            data-title="shippingAddressErrors" data-dfn-for="PaymentRequestDetailsUpdate"
                            data-type="AddressErrors" tabindex="0"
                            aria-haspopup="dialog"><code>shippingAddressErrors</code></dfn> メンバー
                    </h4><a class="self-link" href="#shippingaddresserrors-member"
                        aria-label="Permalink for Section 6.2.6"></a>
                </div>

                <p>
                    配送先住所に対する検証エラー（存在する場合）。
                </p>
            </section>
        </section>
        <section data-dfn-for="PaymentRequestEvent" data-link-for="PaymentRequestEvent" id="the-paymentrequestevent">
            <div class="header-wrapper">
                <h3 id="x6-3-the-paymentrequestevent"><bdi class="secno">6.3 </bdi>
                    <dfn data-export="" data-dfn-type="interface" id="dom-paymentrequestevent" data-idl="interface"
                        data-title="PaymentRequestEvent" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>PaymentRequestEvent</code></dfn>
                </h3><a class="self-link" href="#the-paymentrequestevent" aria-label="Permalink for Section 6.3"></a>
            </div>

            <p>
                PaymentRequestEvent は、ユーザーによる選択後に Payment Handler で利用可能なデータとメソッドを表す。ユーザーエージェントは、<a data-link-type="dfn"
                    href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> で利用可能なデータのサブセットを
                Payment Handler に伝える。
            </p>
            <pre class="idl def" id="webidl-941889379"><span class="idlHeader"><a class="self-link" href="#webidl-941889379">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-paymentrequestevent" data-title="PaymentRequestEvent">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-paymentrequestevent" id="ref-for-dom-paymentrequestevent-9"><code>PaymentRequestEvent</code></a> : <span class="idlSuperclass"><a data-link-type="idl" href="https://www.w3.org/TR/service-workers/#extendableevent-interface">ExtendableEvent</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-paymentrequestevent-constructor-type-eventinitdict" data-title="constructor" data-dfn-for="PaymentRequestEvent">
  <dfn data-export="" data-dfn-type="constructor" id="dom-paymentrequestevent-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="PaymentRequestEvent" data-lt="constructor()|constructor(type)|constructor(type, eventInitDict)" data-local-lt="PaymentRequestEvent.constructor|PaymentRequestEvent.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-paymentrequesteventinit" class="internalDFN" id="ref-for-dom-paymentrequesteventinit-1"><code>PaymentRequestEventInit</code></a></span> <span class="idlParamName">eventInitDict</span> = {});</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequestevent-toporigin" data-title="topOrigin" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-toporigin" id="ref-for-dom-paymentrequestevent-toporigin-1"><code>topOrigin</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequestevent-paymentrequestorigin" data-title="paymentRequestOrigin" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-paymentrequestorigin" id="ref-for-dom-paymentrequestevent-paymentrequestorigin-1"><code>paymentRequestOrigin</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequestevent-paymentrequestid" data-title="paymentRequestId" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-paymentrequestid" id="ref-for-dom-paymentrequestevent-paymentrequestid-1"><code>paymentRequestId</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequestevent-methoddata" data-title="methodData" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array">FrozenArray</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a>&gt;</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-methoddata" id="ref-for-dom-paymentrequestevent-methoddata-1"><code>methodData</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequestevent-total" data-title="total" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-total" id="ref-for-dom-paymentrequestevent-total-1"><code>total</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequestevent-modifiers" data-title="modifiers" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array">FrozenArray</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentdetailsmodifier-dictionary">PaymentDetailsModifier</a>&gt;</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-modifiers" id="ref-for-dom-paymentrequestevent-modifiers-1"><code>modifiers</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequestevent-paymentoptions" data-title="paymentOptions" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-paymentoptions" id="ref-for-dom-paymentrequestevent-paymentoptions-1"><code>paymentOptions</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequestevent-shippingoptions" data-title="shippingOptions" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array">FrozenArray</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentshippingoption">PaymentShippingOption</a>&gt;?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-shippingoptions" id="ref-for-dom-paymentrequestevent-shippingoptions-1"><code>shippingOptions</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-paymentrequestevent-openwindow-url" data-title="openWindow" data-dfn-for="PaymentRequestEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dfn-windowclient-0" class="internalDFN" id="ref-for-dfn-windowclient-0-1">WindowClient</a>?&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentrequestevent-openwindow" id="ref-for-dom-paymentrequestevent-openwindow-1"><code>openWindow</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <span class="idlParamName">url</span>);</span><span data-idl="" class="idlMethod" id="idl-def-paymentrequestevent-changepaymentmethod-methodname-methoddetails" data-title="changePaymentMethod" data-dfn-for="PaymentRequestEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-paymentrequestdetailsupdate" class="internalDFN" id="ref-for-dom-paymentrequestdetailsupdate-2"><code>PaymentRequestDetailsUpdate</code></a>?&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentrequestevent-changepaymentmethod" id="ref-for-dom-paymentrequestevent-changepaymentmethod-1"><code>changePaymentMethod</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">methodName</span>, optional<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a>?</span> <span class="idlParamName">methodDetails</span> = null);</span><span data-idl="" class="idlMethod" id="idl-def-paymentrequestevent-changeshippingaddress-shippingaddress" data-title="changeShippingAddress" data-dfn-for="PaymentRequestEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-paymentrequestdetailsupdate" class="internalDFN" id="ref-for-dom-paymentrequestdetailsupdate-3"><code>PaymentRequestDetailsUpdate</code></a>?&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentrequestevent-changeshippingaddress" id="ref-for-dom-paymentrequestevent-changeshippingaddress-1"><code>changeShippingAddress</code></a>(optional<span class="idlType"> <a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-addressinit">AddressInit</a></span> <span class="idlParamName">shippingAddress</span> = {});</span><span data-idl="" class="idlMethod" id="idl-def-paymentrequestevent-changeshippingoption-shippingoption" data-title="changeShippingOption" data-dfn-for="PaymentRequestEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-paymentrequestdetailsupdate" class="internalDFN" id="ref-for-dom-paymentrequestdetailsupdate-4"><code>PaymentRequestDetailsUpdate</code></a>?&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentrequestevent-changeshippingoption" id="ref-for-dom-paymentrequestevent-changeshippingoption-1"><code>changeShippingOption</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">shippingOption</span>);</span><span data-idl="" class="idlMethod" id="idl-def-paymentrequestevent-respondwith-handlerresponsepromise" data-title="respondWith" data-dfn-for="PaymentRequestEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentrequestevent-respondwith" id="ref-for-dom-paymentrequestevent-respondwith-1"><code>respondWith</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-paymenthandlerresponse" class="internalDFN" id="ref-for-dom-paymenthandlerresponse-2"><code>PaymentHandlerResponse</code></a>&gt;</span> <span class="idlParamName">handlerResponsePromise</span>);</span>
};</span></code></pre>
            <section id="toporigin-attribute">
                <div class="header-wrapper">
                    <h4 id="x6-3-1-toporigin-attribute"><bdi class="secno">6.3.1 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-paymentrequestevent-toporigin"
                            data-idl="attribute" data-title="topOrigin" data-dfn-for="PaymentRequestEvent"
                            data-type="USVString" data-lt="topOrigin" data-local-lt="PaymentRequestEvent.topOrigin"
                            tabindex="0" aria-haspopup="dialog"><code>topOrigin</code></dfn> 属性
                    </h4><a class="self-link" href="#toporigin-attribute" aria-label="Permalink for Section 6.3.1"></a>
                </div>

                <p>
                    最上位の<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>（<a
                        href="#dfn-payee" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-payee-2">payee</a>
                    のウェブページ）の文字列を返す。この属性は、<a href="#dfn-handling-a-paymentrequestevent" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-handling-a-paymentrequestevent-1">PaymentRequestEvent
                        の処理</a>により初期化される。
                </p>
            </section>
            <section id="paymentrequestorigin-attribute">
                <div class="header-wrapper">
                    <h4 id="x6-3-2-paymentrequestorigin-attribute"><bdi class="secno">6.3.2 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-paymentrequestevent-paymentrequestorigin"
                            data-idl="attribute" data-title="paymentRequestOrigin" data-dfn-for="PaymentRequestEvent"
                            data-type="USVString" data-lt="paymentRequestOrigin"
                            data-local-lt="PaymentRequestEvent.paymentRequestOrigin" tabindex="0"
                            aria-haspopup="dialog"><code>paymentRequestOrigin</code></dfn> 属性
                    </h4><a class="self-link" href="#paymentrequestorigin-attribute"
                        aria-label="Permalink for Section 6.3.2"></a>
                </div>

                <p>
                    <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> が初期化された<a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                    を示す文字列を返す。<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> が <a
                        href="#dom-paymentrequestevent-toporigin" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-paymentrequestevent-toporigin-2"><code>topOrigin</code></a>
                    内で初期化された場合、両属性は同じ値を持ち、そうでない場合は異なる値を持つ。例えば、<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> が <a
                        href="#dom-paymentrequestevent-toporigin" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-paymentrequestevent-toporigin-3"><code>topOrigin</code></a> とは異なるオリジンの iframe
                    内で初期化された場合、この属性の値はその iframe のオリジンとなる。この属性は <a href="#dfn-handling-a-paymentrequestevent"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-handling-a-paymentrequestevent-2">PaymentRequestEvent の処理</a> により初期化される。
                </p>
            </section>
            <section data-cite="payment-request" id="paymentrequestid-attribute">
                <div class="header-wrapper">
                    <h4 id="x6-3-3-paymentrequestid-attribute"><bdi class="secno">6.3.3 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-paymentrequestevent-paymentrequestid"
                            data-idl="attribute" data-title="paymentRequestId" data-dfn-for="PaymentRequestEvent"
                            data-type="DOMString" data-lt="paymentRequestId"
                            data-local-lt="PaymentRequestEvent.paymentRequestId" tabindex="0"
                            aria-haspopup="dialog"><code>paymentRequestId</code></dfn> 属性
                    </h4><a class="self-link" href="#paymentrequestid-attribute"
                        aria-label="Permalink for Section 6.3.3"></a>
                </div>

                <p>
                    取得時、<a href="#dom-paymentrequestevent-paymentrequestid" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-paymentrequestevent-paymentrequestid-2"><code>paymentRequestId</code></a>
                    属性は、この <a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent"
                        class="internalDFN" id="ref-for-dom-paymentrequestevent-10"><code>PaymentRequestEvent</code></a>
                    に対応する <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> の <a
                        data-link-type="attribute" data-lt="[[details]]"
                        href="https://www.w3.org/TR/payment-request/#dfn-details"><code>[[details]]</code></a>.<a
                        data-link-type="dfn" href="https://www.w3.org/TR/payment-request/#id-attribute">id</a> を返す。
                </p>
            </section>
            <section id="methoddata-attribute">
                <div class="header-wrapper">
                    <h4 id="x6-3-4-methoddata-attribute"><bdi class="secno">6.3.4 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-paymentrequestevent-methoddata"
                            data-idl="attribute" data-title="methodData" data-dfn-for="PaymentRequestEvent"
                            data-type="FrozenArray" data-lt="methodData" data-local-lt="PaymentRequestEvent.methodData"
                            tabindex="0" aria-haspopup="dialog"><code>methodData</code></dfn> 属性
                    </h4><a class="self-link" href="#methoddata-attribute" aria-label="Permalink for Section 6.3.4"></a>
                </div>

                <p>
                    この属性には、ウェブサイトが受け入れる<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-id/#dfn-pmi">支払い方法識別子</a>および関連する各<a
                        data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dfn-payment-method">支払い方法</a>固有データを含む <a
                        data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a>
                    辞書が含まれる。これは、下記で定義する <a href="#dfn-methoddata-population-algorithm" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-methoddata-population-algorithm-1">MethodData の生成アルゴリズム</a>
                    を用いて <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> から設定される。
                </p>
            </section>
            <section id="total-attribute">
                <div class="header-wrapper">
                    <h4 id="x6-3-5-total-attribute"><bdi class="secno">6.3.5 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-paymentrequestevent-total"
                            data-idl="attribute" data-title="total" data-dfn-for="PaymentRequestEvent"
                            data-type="object" data-lt="total" data-local-lt="PaymentRequestEvent.total" tabindex="0"
                            aria-haspopup="dialog"><code>total</code></dfn> 属性
                    </h4><a class="self-link" href="#total-attribute" aria-label="Permalink for Section 6.3.5"></a>
                </div>

                <p>
                    この属性は、支払いに要求されている合計額を示す。これは [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-payment-request" title="Payment Request API">payment-request</a></cite>] で定義される
                    <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#paymentcurrencyamount-dictionary">PaymentCurrencyAmount</a>
                    辞書型であり、対応する <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a>
                    オブジェクトが生成された際に提供された <a href="#dom-paymentrequestevent-total" class="internalDFN"
                        data-link-type="idl" id="ref-for-dom-paymentrequestevent-total-2"><code>total</code></a>
                    フィールドのコピーで初期化される。
                </p>
            </section>
            <section id="modifiers-attribute">
                <div class="header-wrapper">
                    <h4 id="x6-3-6-modifiers-attribute"><bdi class="secno">6.3.6 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-paymentrequestevent-modifiers"
                            data-idl="attribute" data-title="modifiers" data-dfn-for="PaymentRequestEvent"
                            data-type="FrozenArray" data-lt="modifiers" data-local-lt="PaymentRequestEvent.modifiers"
                            tabindex="0" aria-haspopup="dialog"><code>modifiers</code></dfn> 属性
                    </h4><a class="self-link" href="#modifiers-attribute" aria-label="Permalink for Section 6.3.6"></a>
                </div>

                <p>
                    この <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#paymentdetailsmodifier-dictionary">PaymentDetailsModifier</a>
                    辞書の列は、特定の支払い方法識別子に対する修飾子を含む（例：支払い金額や通貨種別が支払い方法ごとに異なる場合）。これは、下記で定義する <a
                        href="#dfn-modifiers-population-algorithm" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-modifiers-population-algorithm-1">Modifiers の生成アルゴリズム</a> を用いて <a
                        data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> から設定される。
                </p>
            </section>
            <section id="paymentoptions-attribute">
                <div class="header-wrapper">
                    <h4 id="x6-3-7-paymentoptions-attribute"><bdi class="secno">6.3.7 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-paymentrequestevent-paymentoptions"
                            data-idl="attribute" data-title="paymentOptions" data-dfn-for="PaymentRequestEvent"
                            data-type="object" data-lt="paymentOptions"
                            data-local-lt="PaymentRequestEvent.paymentOptions" tabindex="0"
                            aria-haspopup="dialog"><code>paymentOptions</code></dfn> 属性
                    </h4><a class="self-link" href="#paymentoptions-attribute"
                        aria-label="Permalink for Section 6.3.7"></a>
                </div>

                <p>
                    対応する <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> における <a
                        href="https://www.w3.org/TR/payment-request/#dom-paymentoptions">PaymentOptions</a>
                    の値。配送先住所および／または支払人の連絡先情報のいずれかが要求されている場合にのみ利用可能。
                </p>
            </section>
            <section id="shippingoptions-attribute">
                <div class="header-wrapper">
                    <h4 id="x6-3-8-shippingoptions-attribute"><bdi class="secno">6.3.8 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-paymentrequestevent-shippingoptions"
                            data-idl="attribute" data-title="shippingOptions" data-dfn-for="PaymentRequestEvent"
                            data-type="FrozenArray" data-lt="shippingOptions"
                            data-local-lt="PaymentRequestEvent.shippingOptions" tabindex="0"
                            aria-haspopup="dialog"><code>shippingOptions</code></dfn> 属性
                    </h4><a class="self-link" href="#shippingoptions-attribute"
                        aria-label="Permalink for Section 6.3.8"></a>
                </div>

                <p>
                    対応する <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#paymentdetailsinit-dictionary">PaymentDetailsInit</a>
                    辞書における <a
                        href="https://www.w3.org/TR/payment-request/#dom-paymentdetailsbase-shippingoptions">ShippingOptions</a>
                    の値（<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#paymentdetailsinit-dictionary">PaymentDetailsInit</a>
                    は <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#paymentdetailsbase-dictionary">PaymentDetailsBase</a>
                    から ShippingOptions を継承する）。配送先住所が要求されている場合にのみ利用可能。
                </p>
            </section>
            <section id="openwindow-method">
                <div class="header-wrapper">
                    <h4 id="x6-3-9-openwindow-method"><bdi class="secno">6.3.9 </bdi>
                        <dfn data-export="" data-dfn-type="method" id="dom-paymentrequestevent-openwindow"
                            data-idl="operation" data-title="openWindow()" data-dfn-for="PaymentRequestEvent"
                            data-type="Promise" data-lt="openWindow()|openWindow(url)"
                            data-local-lt="PaymentRequestEvent.openWindow|PaymentRequestEvent.openWindow()|openWindow"
                            tabindex="0" aria-haspopup="dialog"><code>openWindow()</code></dfn> メソッド
                    </h4><a class="self-link" href="#openwindow-method" aria-label="Permalink for Section 6.3.9"></a>
                </div>

                <p>
                    このメソッドは、支払いハンドラがユーザーにウィンドウを表示するために使用する。呼び出されると、<a href="#dfn-open-window-algorithm"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-open-window-algorithm-1">ウィンドウを開くアルゴリズム</a> を実行する。
                </p>
            </section>
            <section id="changepaymentmethod-method">
                <div class="header-wrapper">
                    <h4 id="x6-3-10-changepaymentmethod-method"><bdi class="secno">6.3.10 </bdi>
                        <dfn data-lt="changePaymentMethod(methodName, methodDetails)|changePaymentMethod()|changePaymentMethod(methodName)"
                            data-export="" data-dfn-type="method" id="dom-paymentrequestevent-changepaymentmethod"
                            data-idl="operation" data-title="changePaymentMethod()" data-dfn-for="PaymentRequestEvent"
                            data-type="Promise"
                            data-local-lt="PaymentRequestEvent.changePaymentMethod|PaymentRequestEvent.changePaymentMethod()|changePaymentMethod"
                            tabindex="0" aria-haspopup="dialog"><code>changePaymentMethod()</code></dfn>
                        メソッド
                    </h4><a class="self-link" href="#changepaymentmethod-method"
                        aria-label="Permalink for Section 6.3.10"></a>
                </div>

                <p>
                    このメソッドは、請求先住所などの支払い方法の詳細が与えられたときに更新後の合計を取得するために、支払いハンドラによって使用される。呼び出されると、<a
                        href="#dfn-change-payment-method-algorithm" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-change-payment-method-algorithm-1">支払い方法変更アルゴリズム</a> を実行する。
                </p>
            </section>
            <section id="changeshippingaddress-method">
                <div class="header-wrapper">
                    <h4 id="x6-3-11-changeshippingaddress-method"><bdi class="secno">6.3.11 </bdi>
                        <dfn data-lt="changeShippingAddress(shippingAddress)|changeShippingAddress()" data-export=""
                            data-dfn-type="method" id="dom-paymentrequestevent-changeshippingaddress"
                            data-idl="operation" data-title="changeShippingAddress()" data-dfn-for="PaymentRequestEvent"
                            data-type="Promise"
                            data-local-lt="PaymentRequestEvent.changeShippingAddress|PaymentRequestEvent.changeShippingAddress()|changeShippingAddress"
                            tabindex="0" aria-haspopup="dialog"><code>changeShippingAddress()</code></dfn>
                        メソッド
                    </h4><a class="self-link" href="#changeshippingaddress-method"
                        aria-label="Permalink for Section 6.3.11"></a>
                </div>

                <p>
                    このメソッドは、shippingAddress が与えられたときに更新後の支払い詳細を取得するために、支払いハンドラによって使用される。呼び出されると、<a
                        href="#dfn-change-payment-details-algorithm" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-change-payment-details-algorithm-1">支払い詳細変更アルゴリズム</a> を実行する。
                </p>
            </section>
            <section id="changeshippingoption-method">
                <div class="header-wrapper">
                    <h4 id="x6-3-12-changeshippingoption-method"><bdi class="secno">6.3.12 </bdi>
                        <dfn data-lt="changeShippingOption(shippingOption)|changeShippingOption()" data-export=""
                            data-dfn-type="method" id="dom-paymentrequestevent-changeshippingoption"
                            data-idl="operation" data-title="changeShippingOption()" data-dfn-for="PaymentRequestEvent"
                            data-type="Promise"
                            data-local-lt="PaymentRequestEvent.changeShippingOption|PaymentRequestEvent.changeShippingOption()|changeShippingOption"
                            tabindex="0" aria-haspopup="dialog"><code>changeShippingOption()</code></dfn>
                        メソッド
                    </h4><a class="self-link" href="#changeshippingoption-method"
                        aria-label="Permalink for Section 6.3.12"></a>
                </div>

                <p>
                    このメソッドは、shippingOption 識別子が与えられたときに更新後の支払い詳細を取得するために、支払いハンドラによって使用される。呼び出されると、<a
                        href="#dfn-change-payment-details-algorithm" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-change-payment-details-algorithm-2">支払い詳細変更アルゴリズム</a> を実行する。
                </p>
            </section>
            <section id="respondwith-method-0">
                <div class="header-wrapper">
                    <h4 id="x6-3-13-respondwith-method"><bdi class="secno">6.3.13 </bdi>
                        <dfn data-lt="respondWith(handlerResponsePromise)|respondWith()" data-export=""
                            data-dfn-type="method" id="dom-paymentrequestevent-respondwith" data-idl="operation"
                            data-title="respondWith()" data-dfn-for="PaymentRequestEvent" data-type="undefined"
                            data-local-lt="PaymentRequestEvent.respondWith|PaymentRequestEvent.respondWith()|respondWith"
                            tabindex="0" aria-haspopup="dialog"><code>respondWith()</code></dfn> メソッド
                    </h4><a class="self-link" href="#respondwith-method-0"
                        aria-label="Permalink for Section 6.3.13"></a>
                </div>

                <p>
                    このメソッドは、支払いが正常に完了した際に <a href="#dom-paymenthandlerresponse" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-paymenthandlerresponse-3"><code>PaymentHandlerResponse</code></a>
                    を提供するために、支払いハンドラによって使用される。呼び出されると、<var>event</var> と <var>handlerResponsePromise</var> を引数として <a
                        href="#dfn-respond-to-paymentrequest-algorithm" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-respond-to-paymentrequest-algorithm-1">PaymentRequest に応答するアルゴリズム</a> を実行する。
                </p>
            </section>
            <div class="issue" id="issue-container-number-123">
                <div role="heading" class="issue-title marker" id="h-issue-0" aria-level="4"><a
                        href="https://github.com/w3c/web-based-payment-handler/issues/123"><span class="issue-number">Issue
                            123</span></a><span class="issue-label">: ユーザーデータを支払いアプリと共有すべきか？</span></div>
                <p class="">
                    支払いアプリは、ユーザーの明示的な同意のもとでユーザーエージェントに保存されたユーザーデータを受け取るべきだろうか？ 支払いアプリは、インストール時または初回起動時に権限を要求できる。
                </p>
            </div>
            <section data-dfn-for="PaymentRequestEventInit" id="paymentrequesteventinit-dictionary">
                <div class="header-wrapper">
                    <h4 id="x6-3-14-paymentrequesteventinit-dictionary"><bdi class="secno">6.3.14 </bdi>
                        <dfn data-export="" data-dfn-type="dictionary" id="dom-paymentrequesteventinit"
                            data-idl="dictionary" data-title="PaymentRequestEventInit" data-dfn-for="" tabindex="0"
                            aria-haspopup="dialog"><code>PaymentRequestEventInit</code></dfn> 辞書
                    </h4><a class="self-link" href="#paymentrequesteventinit-dictionary"
                        aria-label="Permalink for Section 6.3.14"></a>
                </div>

                <pre class="idl def" id="webidl-488183213"><span class="idlHeader"><a class="self-link" href="#webidl-488183213">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-paymentrequesteventinit" data-title="PaymentRequestEventInit">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-paymentrequesteventinit" id="ref-for-dom-paymentrequesteventinit-2"><code>PaymentRequestEventInit</code></a> : <span class="idlSuperclass"><a data-link-type="idl" href="https://www.w3.org/TR/service-workers/#dictdef-extendableeventinit">ExtendableEventInit</a></span> {<span data-idl="" class="idlMember" id="idl-def-paymentrequesteventinit-toporigin" data-title="topOrigin" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-toporigin" id="ref-for-dom-paymentrequesteventinit-toporigin-1"><code>topOrigin</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequesteventinit-paymentrequestorigin" data-title="paymentRequestOrigin" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-paymentrequestorigin" id="ref-for-dom-paymentrequesteventinit-paymentrequestorigin-1"><code>paymentRequestOrigin</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequesteventinit-paymentrequestid" data-title="paymentRequestId" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-paymentrequestid" id="ref-for-dom-paymentrequesteventinit-paymentrequestid-1"><code>paymentRequestId</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequesteventinit-methoddata" data-title="methodData" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-methoddata" id="ref-for-dom-paymentrequesteventinit-methoddata-1"><code>methodData</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequesteventinit-total" data-title="total" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentcurrencyamount-dictionary">PaymentCurrencyAmount</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-total" id="ref-for-dom-paymentrequesteventinit-total-1"><code>total</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequesteventinit-modifiers" data-title="modifiers" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentdetailsmodifier-dictionary">PaymentDetailsModifier</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-modifiers" id="ref-for-dom-paymentrequesteventinit-modifiers-1"><code>modifiers</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequesteventinit-paymentoptions" data-title="paymentOptions" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="idl" href="#dom-paymentrequestevent-paymentoptions" class="internalDFN" id="ref-for-dom-paymentrequestevent-paymentoptions-2">PaymentOptions</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-paymentoptions" id="ref-for-dom-paymentrequesteventinit-paymentoptions-1"><code>paymentOptions</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequesteventinit-shippingoptions" data-title="shippingOptions" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentshippingoption">PaymentShippingOption</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-shippingoptions" id="ref-for-dom-paymentrequesteventinit-shippingoptions-1"><code>shippingOptions</code></a>;</span>
};</span></code></pre>
                <p>
                    <dfn data-export="" data-dfn-type="dict-member" id="dom-paymentrequesteventinit-toporigin"
                        data-idl="field" data-title="topOrigin" data-dfn-for="PaymentRequestEventInit"
                        data-type="USVString" tabindex="0" aria-haspopup="dialog"><code>topOrigin</code></dfn>、<dfn
                        data-export="" data-dfn-type="dict-member" id="dom-paymentrequesteventinit-paymentrequestorigin"
                        data-idl="field" data-title="paymentRequestOrigin" data-dfn-for="PaymentRequestEventInit"
                        data-type="USVString" tabindex="0"
                        aria-haspopup="dialog"><code>paymentRequestOrigin</code></dfn>、
                    <dfn data-export="" data-dfn-type="dict-member" id="dom-paymentrequesteventinit-paymentrequestid"
                        data-idl="field" data-title="paymentRequestId" data-dfn-for="PaymentRequestEventInit"
                        data-type="DOMString" tabindex="0" aria-haspopup="dialog"><code>paymentRequestId</code></dfn>、
                    <dfn data-export="" data-dfn-type="dict-member" id="dom-paymentrequesteventinit-methoddata"
                        data-idl="field" data-title="methodData" data-dfn-for="PaymentRequestEventInit"
                        data-type="sequence" tabindex="0" aria-haspopup="dialog"><code>methodData</code></dfn>、
                    <dfn data-export="" data-dfn-type="dict-member" id="dom-paymentrequesteventinit-total"
                        data-idl="field" data-title="total" data-dfn-for="PaymentRequestEventInit"
                        data-type="PaymentCurrencyAmount" tabindex="0" aria-haspopup="dialog"><code>total</code></dfn>、
                    <dfn data-export="" data-dfn-type="dict-member" id="dom-paymentrequesteventinit-modifiers"
                        data-idl="field" data-title="modifiers" data-dfn-for="PaymentRequestEventInit"
                        data-type="sequence" tabindex="0" aria-haspopup="dialog"><code>modifiers</code></dfn>、<dfn
                        data-export="" data-dfn-type="dict-member" id="dom-paymentrequesteventinit-paymentoptions"
                        data-idl="field" data-title="paymentOptions" data-dfn-for="PaymentRequestEventInit"
                        data-type="PaymentOptions" tabindex="0"
                        aria-haspopup="dialog"><code>paymentOptions</code></dfn>、
                    および <dfn data-export="" data-dfn-type="dict-member" id="dom-paymentrequesteventinit-shippingoptions"
                        data-idl="field" data-title="shippingOptions" data-dfn-for="PaymentRequestEventInit"
                        data-type="sequence" tabindex="0" aria-haspopup="dialog"><code>shippingOptions</code></dfn>
                    の各メンバーは、<a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent"
                        class="internalDFN" id="ref-for-dom-paymentrequestevent-11"><code>PaymentRequestEvent</code></a>
                    に定義されたものと同じ定義を共有する。
                </p>
            </section>
            <section id="methoddata-population-algorithm">
                <div class="header-wrapper">
                    <h4 id="x6-3-15-methoddata-population-algorithm"><bdi class="secno">6.3.15 </bdi>
                        <dfn id="dfn-methoddata-population-algorithm" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">MethodData の生成アルゴリズム</dfn>
                    </h4><a class="self-link" href="#methoddata-population-algorithm"
                        aria-label="Permalink for Section 6.3.15"></a>
                </div>

                <p>
                    <a href="#dom-paymentrequestevent-methoddata" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-paymentrequestevent-methoddata-2"><code>methodData</code></a>
                    の値を初期化するために、ユーザーエージェントは次の手順（または同等の手順）を <em class="rfc2119">MUST</em> 実行する:
                </p>
                <ol>
                    <li><var>registeredMethods</var> を、起動された支払いハンドラの登録済み<a data-link-type="dfn"
                            href="https://www.w3.org/TR/payment-method-id/#dfn-pmi">支払い方法識別子</a>の集合とする。
                    </li>
                    <li>新しい空の <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">Sequence</a>
                        を作成する。
                    </li>
                    <li><var>dataList</var> を、新しく作成した <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#idl-sequence">Sequence</a> に設定する。
                    </li>
                    <li>対応する支払いリクエストにおける
                        <a data-link-type="dfn"
                            href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a>@<var>[[methodData]]</var>
                        の各項目について、次の手順を実行する:
                        <ol>
                            <li>検討中の項目を <var>inData</var> に設定する。
                            </li>
                            <li><var>commonMethods</var> を、<var>inData</var>.<a data-link-type="dfn"
                                    href="https://www.w3.org/TR/payment-request/#dom-paymentmethoddata-supportedmethods">supportedMethods</a>
                                と <var>registeredMethods</var> の積集合に設定する。
                            </li>
                            <li><var>commonMethods</var> が空である場合、残りのサブステップをスキップし、次の項目（存在する場合）に進む。
                            </li>
                            <li>新しい <a data-link-type="dfn"
                                    href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a>
                                オブジェクトを作成する。
                            </li>
                            <li>新しく作成した <a data-link-type="dfn"
                                    href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a>
                                を <var>outData</var> に設定する。
                            </li>
                            <li><var>outData</var>.<a data-link-type="dfn"
                                    href="https://www.w3.org/TR/payment-request/#dom-paymentmethoddata-supportedmethods">supportedMethods</a>
                                を、<var>commonMethods</var> のメンバーを含むリストに設定する。
                            </li>
                            <li><var>outData</var>.data を、<var>inData</var>.data のコピーに設定する。
                            </li>
                            <li><var>outData</var> を <var>dataList</var> に追加する。
                            </li>
                        </ol>
                    </li>
                    <li><a href="#dom-paymentrequestevent-methoddata" class="internalDFN" data-link-type="idl"
                            id="ref-for-dom-paymentrequestevent-methoddata-3"><code>methodData</code></a> を
                        <var>dataList</var> に設定する。
                    </li>
                </ol>
            </section>
            <section id="modifiers-population-algorithm">
                <div class="header-wrapper">
                    <h4 id="x6-3-16-modifiers-population-algorithm"><bdi class="secno">6.3.16 </bdi>
                        <dfn id="dfn-modifiers-population-algorithm" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">Modifiers の生成アルゴリズム</dfn>
                    </h4><a class="self-link" href="#modifiers-population-algorithm"
                        aria-label="Permalink for Section 6.3.16"></a>
                </div>

                <p>
                    <a href="#dom-paymentrequestevent-modifiers" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-paymentrequestevent-modifiers-2"><code>modifiers</code></a>
                    の値を初期化するために、ユーザーエージェントは次の手順（または同等の手順）を <em class="rfc2119">MUST</em> 実行する:
                </p>
                <ol>
                    <li><var>registeredMethods</var> を、起動された支払いハンドラの登録済み<a data-link-type="dfn"
                            href="https://www.w3.org/TR/payment-method-id/#dfn-pmi">支払い方法識別子</a>の集合とする。
                    </li>
                    <li>新しい空の <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">Sequence</a>
                        を作成する。
                    </li>
                    <li><var>modifierList</var> を、新しく作成した <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#idl-sequence">Sequence</a> に設定する。
                    </li>
                    <li>対応する支払いリクエストにおける
                        <a data-link-type="dfn"
                            href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a>@<var>[[paymentDetails]]</var>.<a
                            href="#dom-paymentrequestevent-modifiers" class="internalDFN" data-link-type="idl"
                            id="ref-for-dom-paymentrequestevent-modifiers-3"><code>modifiers</code></a>
                        の各項目について、次の手順を実行する:
                        <ol>
                            <li>検討中の項目を <var>inModifier</var> に設定する。
                            </li>
                            <li><var>inModifier</var>.<a data-link-type="dfn"
                                    href="https://www.w3.org/TR/payment-request/#dom-paymentmethoddata-supportedmethods">supportedMethods</a>
                                と <var>registeredMethods</var> の積集合を <var>commonMethods</var> に設定する。
                            </li>
                            <li><var>commonMethods</var> が空である場合、残りのサブステップをスキップし、次の項目（存在する場合）に進む。
                            </li>
                            <li>新しい <a data-link-type="dfn"
                                    href="https://www.w3.org/TR/payment-request/#paymentdetailsmodifier-dictionary">PaymentDetailsModifier</a>
                                オブジェクトを作成する。
                            </li>
                            <li>新しく作成した <a data-link-type="dfn"
                                    href="https://www.w3.org/TR/payment-request/#paymentdetailsmodifier-dictionary">PaymentDetailsModifier</a>
                                を <var>outModifier</var> に設定する。
                            </li>
                            <li><var>outModifier</var>.<a data-link-type="dfn"
                                    href="https://www.w3.org/TR/payment-request/#dom-paymentmethoddata-supportedmethods">supportedMethods</a>
                                を、<var>commonMethods</var> のメンバーを含むリストに設定する。
                            </li>
                            <li><var>outModifier</var>.<a href="#dom-paymentrequestevent-total" class="internalDFN"
                                    data-link-type="idl"
                                    id="ref-for-dom-paymentrequestevent-total-3"><code>total</code></a> を、<var>
                                    inModifier</var>.<a href="#dom-paymentrequestevent-total" class="internalDFN"
                                    data-link-type="idl"
                                    id="ref-for-dom-paymentrequestevent-total-4"><code>total</code></a> のコピーに設定する。
                            </li>
                            <li><var>outModifier</var> を <var>modifierList</var> に追加する。
                            </li>
                        </ol>
                    </li>
                    <li><a href="#dom-paymentrequestevent-modifiers" class="internalDFN" data-link-type="idl"
                            id="ref-for-dom-paymentrequestevent-modifiers-4"><code>modifiers</code></a> を
                        <var>modifierList</var> に設定する。
                    </li>
                </ol>
            </section>
        </section>
        <section id="internal-slots">
            <div class="header-wrapper">
                <h3 id="x6-4-internal-slots"><bdi class="secno">6.4 </bdi>
                    内部スロット
                </h3><a class="self-link" href="#internal-slots" aria-label="Permalink for Section 6.4"></a>
            </div>

            <p>
                <a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent"
                    class="internalDFN" id="ref-for-dom-paymentrequestevent-12"><code>PaymentRequestEvent</code></a>
                のインスタンスは、次の表の内部スロットを持って作成される:
            </p>
            <table>
                <tbody>
                    <tr>
                        <th>
                            内部スロット
                        </th>
                        <th>
                            既定値
                        </th>
                        <th>
                            説明（<em>規範ではない</em>）
                        </th>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-dfn-for="PaymentRequestEvent" data-idl="" data-noexport=""
                                data-dfn-type="attribute" id="dfn-windowclient" tabindex="0"
                                aria-haspopup="dialog">[[windowClient]]</dfn>
                        </td>
                        <td>
                            null
                        </td>
                        <td>
                            現在アクティブな <dfn id="dfn-windowclient-0" tabindex="0" aria-haspopup="dialog"
                                data-dfn-type="dfn">WindowClient</dfn>。支払いハンドラが現在ユーザーにウィンドウを表示している場合に設定される。そうでない場合は
                            null。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-dfn-for="PaymentRequestEvent" data-idl="" data-noexport=""
                                data-dfn-type="attribute" id="dfn-respondwithcalled" tabindex="0"
                                aria-haspopup="dialog">[[respondWithCalled]]</dfn>
                        </td>
                        <td>
                            false
                        </td>
                        <td>
                            YAHO
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section id="handling-a-paymentrequestevent">
            <div class="header-wrapper">
                <h3 id="x6-5-handling-a-paymentrequestevent"><bdi class="secno">6.5 </bdi>
                    <dfn id="dfn-handling-a-paymentrequestevent" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">PaymentRequestEvent の処理</dfn>
                </h3><a class="self-link" href="#handling-a-paymentrequestevent"
                    aria-label="Permalink for Section 6.5"></a>
            </div>

            <p>
                <a data-link-type="dfn"
                    href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> を <a
                    href="https://www.w3.org/TR/payment-request/#show-method">PaymentRequest.show()</a>
                によって受け取り、その後ユーザーが支払いハンドラを選択した場合、<a href="#dfn-user-agents" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agents-4">ユーザーエージェント</a>は次の手順を <em class="rfc2119">MUST</em> 実行する:
            </p>
            <ol>
                <li><var>registration</var> を、ユーザーが選択した支払いハンドラに対応する <a data-link-type="idl"
                        data-lt="ServiceWorkerRegistration"
                        href="https://www.w3.org/TR/service-workers/#service-worker-registration-concept"><code>ServiceWorkerRegistration</code></a>
                    とする。
                </li>
                <li><var>registration</var> が見つからない場合、<a data-link-type="interface" data-lt="Promise"
                        href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a> を、<a
                        href="https://www.w3.org/TR/payment-request/#show-method">PaymentRequest.show()</a>
                    によって作成されたものに対して "<a data-link-type="exception"
                        href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>" の
                    <a data-link-type="interface" data-lt="DOMException"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                    で拒否し、これらの手順を終了する。
                </li>
                <li>
                    <p>
                        <a data-link-type="dfn"
                            href="https://www.w3.org/TR/service-workers/#fire-functional-event-algorithm">機能イベントを発火</a>
                        "<code>paymentrequest</code>" を、<var>registration</var> 上で <a data-link-type="idl"
                            data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent" class="internalDFN"
                            id="ref-for-dom-paymentrequestevent-13"><code>PaymentRequestEvent</code></a>
                        を用いて、次のプロパティとともに行う:
                    </p>
                    <dl>
                        <dt>
                            <a data-link-type="idl" href="#dom-paymentrequestevent-toporigin" class="internalDFN"
                                id="ref-for-dom-paymentrequestevent-toporigin-4"><code>topOrigin</code></a>
                        </dt>
                        <dd>
                            最上位の支払い先ウェブページの<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#ascii-serialisation-of-an-origin">オリジンの直列化</a>。
                        </dd>
                        <dt>
                            <a data-lt="PaymentRequestEvent.paymentRequestOrigin"
                                href="#dom-paymentrequestevent-paymentrequestorigin" class="internalDFN"
                                data-link-type="idl"
                                id="ref-for-dom-paymentrequestevent-paymentrequestorigin-2"><code>paymentRequestOrigin</code></a>
                        </dt>
                        <dd>
                            PaymentRequest が初期化されたコンテキストの<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#ascii-serialisation-of-an-origin">オリジンの直列化</a>。
                        </dd>
                        <dt>
                            <a data-link-type="idl" href="#dom-paymentrequestevent-methoddata" class="internalDFN"
                                id="ref-for-dom-paymentrequestevent-methoddata-4"><code>methodData</code></a>
                        </dt>
                        <dd>
                            <a href="#dfn-methoddata-population-algorithm" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-methoddata-population-algorithm-2">MethodData の生成アルゴリズム</a> を実行した結果。
                        </dd>
                        <dt>
                            <a data-lt="PaymentRequestEvent.modifiers" href="#dom-paymentrequestevent-modifiers"
                                class="internalDFN" data-link-type="idl"
                                id="ref-for-dom-paymentrequestevent-modifiers-5"><code>modifiers</code></a>
                        </dt>
                        <dd>
                            <a href="#dfn-modifiers-population-algorithm" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-modifiers-population-algorithm-2">Modifiers の生成アルゴリズム</a> を実行した結果。
                        </dd>
                        <dt>
                            <a data-link-type="idl" href="#dom-paymentrequestevent-total" class="internalDFN"
                                id="ref-for-dom-paymentrequestevent-total-5"><code>total</code></a>
                        </dt>
                        <dd>
                            対応する <a data-link-type="dfn"
                                href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> の <a
                                data-link-type="dfn"
                                href="https://www.w3.org/TR/payment-request/#paymentdetailsinit-dictionary">PaymentDetailsInit</a>
                            上の total フィールドのコピー。
                        </dd>
                        <dt>
                            <a data-lt="PaymentRequestEvent.paymentRequestId"
                                href="#dom-paymentrequestevent-paymentrequestid" class="internalDFN"
                                data-link-type="idl"
                                id="ref-for-dom-paymentrequestevent-paymentrequestid-3"><code>paymentRequestId</code></a>
                        </dt>
                        <dd>
                            <a data-link-type="dfn"
                                href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> の
                            \[\[details\]\].<a data-link-type="dfn"
                                href="https://www.w3.org/TR/payment-request/#id-attribute">id</a>。
                        </dd>
                        <dt>
                            <a data-lt="PaymentRequestEvent.paymentOptions"
                                href="#dom-paymentrequestevent-paymentoptions" class="internalDFN" data-link-type="idl"
                                id="ref-for-dom-paymentrequestevent-paymentoptions-3"><code>paymentOptions</code></a>
                        </dt>
                        <dd>
                            対応する <a data-link-type="dfn"
                                href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a>
                            のコンストラクターに渡された paymentOptions 辞書のコピー。
                        </dd>
                        <dt>
                            <a data-lt="PaymentRequestEvent.shippingOptions"
                                href="#dom-paymentrequestevent-shippingoptions" class="internalDFN" data-link-type="idl"
                                id="ref-for-dom-paymentrequestevent-shippingoptions-2"><code>shippingOptions</code></a>
                        </dt>
                        <dd>
                            対応する <a data-link-type="dfn"
                                href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> の <a
                                data-link-type="dfn"
                                href="https://www.w3.org/TR/payment-request/#paymentdetailsinit-dictionary">PaymentDetailsInit</a>
                            上の shippingOptions フィールドのコピー。
                        </dd>
                    </dl>
                    <p>
                        その後、<var>dispatchedEvent</var> について並行して次の手順を実行する:
                    </p>
                    <ol>
                        <li><var>dispatchedEvent</var> の<a data-link-type="dfn"
                                href="https://www.w3.org/TR/service-workers/#extendableevent-extend-lifetime-promises">寿命延長プロミス</a>に含まれるすべてのプロミスが解決するのを待つ。
                        </li>
                        <li>もし <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-payment-handler-8">支払いハンドラ</a>が <a href="#dom-paymenthandlerresponse"
                                class="internalDFN" data-link-type="idl"
                                id="ref-for-dom-paymenthandlerresponse-4"><code>PaymentHandlerResponse</code></a>
                            を提供していない場合、<a data-link-type="interface" data-lt="Promise"
                                href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a>（<a
                                href="https://www.w3.org/TR/payment-request/#show-method">PaymentRequest.show()</a>
                            によって作成されたもの）を "<a data-link-type="exception"
                                href="https://webidl.spec.whatwg.org/#operationerror"><code>OperationError</code></a>" の
                            <a data-link-type="interface" data-lt="DOMException"
                                href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                            で拒否する。
                        </li>
                    </ol>
                </li>
            </ol>
        </section>
    </section>
    <section id="windows">
        <div class="header-wrapper">
            <h2 id="x7-windows"><bdi class="secno">7. </bdi>
                <dfn data-lt="payment handler window|Windows" id="dfn-payment-handler-window" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">Windows</dfn>
            </h2><a class="self-link" href="#windows" aria-label="Permalink for Section 7."></a>
        </div>

        <p>
            呼び出された支払いハンドラは、自身に関する情報を表示したり、ユーザー入力を求めたりする必要がある場合とない場合がある。支払いハンドラの表示の例としては次のようなものがある:
        </p>
        <ul>
            <li>支払いハンドラがウィンドウを開き、ユーザーに認可コードの入力を求める。
            </li>
            <li>支払いハンドラがウィンドウを開き、事前のユーザー設定によって提供された当該サイトの既定情報を用いて、ユーザーが支払いを容易に確認できるようにする。
            </li>
            <li>あるセッションで初めて支払いに選択されたとき、支払いハンドラがウィンドウを開く。同一セッション内の以後の支払いでは、支払いハンドラは（設定によって）ウィンドウを開いたりユーザー操作を必要としたりすることなく処理を行う。
            </li>
        </ul>
        <p>
            表示やユーザーとの対話を必要とする <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-payment-handler-9">支払いハンドラ</a>は、openWindow() を呼び出してユーザーにページを表示できる。
        </p>
        <div class="note" role="note" id="issue-container-generatedID-1">
            <div role="heading" class="note-title marker" id="h-note-1" aria-level="3"><span>注</span></div>
            <p class="">
                ユーザーエージェントは、このメソッドが
                <a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent"
                    class="internalDFN" id="ref-for-dom-paymentrequestevent-14"><code>PaymentRequestEvent</code></a>
                と関連していることを知っているため、ユーザーのフローと整合し、混乱を招かない方法でウィンドウを描画するべきである（<em
                    class="rfc2119">SHOULD</em>）。生成されるウィンドウクライアントは、
                <a data-link-type="dfn"
                    href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a>
                を開始したタブ／ウィンドウに結び付けられる。単一の <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-payment-handler-10">支払いハンドラ</a>が、このメソッドを用いて複数のクライアントウィンドウを開くことは許されるべきではない（<em
                    class="rfc2119">SHOULD NOT</em>）。
            </p>
        </div>
        <section id="open-window-algorithm">
            <div class="header-wrapper">
                <h3 id="x7-1-open-window-algorithm"><bdi class="secno">7.1 </bdi>
                    <dfn id="dfn-open-window-algorithm" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">ウィンドウを開くアルゴリズム</dfn>
                </h3><a class="self-link" href="#open-window-algorithm" aria-label="Permalink for Section 7.1"></a>
            </div>

            <div class="issue" id="issue-container-number-115">
                <div role="heading" class="issue-title marker" id="h-issue-1" aria-level="4"><a
                        href="https://github.com/w3c/web-based-payment-handler/issues/115"><span
                            class="issue-number">Issue 115</span></a><span class="issue-label">: ウィンドウを開く
                        アルゴリズム</span></div>
                <p class="">
                    このアルゴリズムは、Service Workers 仕様における
                    <a href="#dfn-open-window-algorithm" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-open-window-algorithm-2">ウィンドウを開くアルゴリズム</a>に類似している。
                </p>
            </div>
            <div class="issue" id="issue-container-number-115-0">
                <div role="heading" class="issue-title marker" id="h-issue-2" aria-level="4"><a
                        href="https://github.com/w3c/web-based-payment-handler/issues/115"><span
                            class="issue-number">Issue 115</span></a></div>
                <p class="">
                    手順をコピーするのではなく、Service Workers 仕様を参照すべきだろうか？
                </p>
            </div>
            <ol class="algorithm">
                <li><var>event</var> を、この <a data-link-type="idl" data-lt="PaymentRequestEvent"
                        href="#dom-paymentrequestevent" class="internalDFN"
                        id="ref-for-dom-paymentrequestevent-15"><code>PaymentRequestEvent</code></a> とする。
                </li>
                <li><var>event</var> の <a data-link-type="attribute"
                        href="https://dom.spec.whatwg.org/#dom-event-istrusted"><code>isTrusted</code></a> 属性が
                    false の場合、"<a data-link-type="exception"
                        href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>" の
                    <a data-link-type="interface" data-lt="DOMException"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a> で拒否された
                    <a data-link-type="interface" data-lt="Promise"
                        href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a> を返す。
                </li>
                <li><var>request</var> を、この <a data-link-type="idl" data-lt="PaymentRequestEvent"
                        href="#dom-paymentrequestevent" class="internalDFN"
                        id="ref-for-dom-paymentrequestevent-16"><code>PaymentRequestEvent</code></a> をトリガーした <a
                        data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> とする。
                </li>
                <li><var>url</var> を、<var>url</var> 引数を <a
                        href="https://url.spec.whatwg.org/#concept-url-parser">parsing</a> した結果とする。
                </li>
                <li>URL のパースで例外がスローされた場合、その例外で拒否された <a data-link-type="interface" data-lt="Promise"
                        href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a> を返す。
                </li>
                <li><var>url</var> が <code>about:blank</code> の場合、<a data-link-type="exception" data-lt="TypeError"
                        href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a> で拒否された
                    <a data-link-type="interface" data-lt="Promise"
                        href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a> を返す。
                </li>
                <li><var>url</var> の origin が、支払いハンドラに関連付けられた
                    <a data-link-type="dfn" href="https://www.w3.org/TR/service-workers/#service-worker-concept">service
                        worker</a> の origin と同一でない場合、null で解決された
                    <a data-link-type="interface" data-lt="Promise"
                        href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a> を返す。
                </li>
                <li><var>promise</var> を新しい <a data-link-type="interface" data-lt="Promise"
                        href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a> とする。
                </li>
                <li><var>promise</var> を返し、残りの手順を並行して実行する:
                </li>
                <li><var>event</var>.<a data-link-type="attribute" data-lt="[[windowClient]]" href="#dfn-windowclient"
                        class="internalDFN" id="ref-for-dfn-windowclient-1"><code>[[windowClient]]</code></a> が null
                    でない場合:
                    <ol>
                        <li><var>event</var>.<a data-link-type="attribute" data-lt="[[windowClient]]"
                                href="#dfn-windowclient" class="internalDFN"
                                id="ref-for-dfn-windowclient-2"><code>[[windowClient]]</code></a>.<a
                                href="https://www.w3.org/TR/service-workers/#client-visibilitystate">visibilityState</a>
                            が "unloaded" でないなら、<var>promise</var> を
                            "<a data-link-type="exception"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>"
                            の <a data-link-type="interface" data-lt="DOMException"
                                href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                            で拒否し、これらの手順を中止する。
                        </li>
                    </ol>
                </li>
                <li><var>newContext</var> を新しい <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context">top-level
                        browsing
                        context</a> とする。
                </li>
                <li>
                    <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate">Navigate</a>
                    を用いて、例外有効・置換有効で <var>newContext</var> を <var>url</var> に移動する。
                </li>
                <li>ナビゲーションで例外がスローされた場合、その例外で <var>promise</var> を拒否し、これらの手順を中止する。
                </li>
                <li><var>newContext</var> の origin が、支払いハンドラに関連付けられた
                    <a data-link-type="dfn" href="https://www.w3.org/TR/service-workers/#dfn-service-worker-client">
                        service worker client</a> の origin と同一でない場合:
                    <ol>
                        <li> <var>promise</var> を null で解決する。
                        </li>
                        <li>これらの手順を中止する。
                        </li>
                    </ol>
                </li>
                <li><var>client</var> を、<a
                        href="https://www.w3.org/TR/service-workers/#create-windowclient-algorithm">create
                        window client</a> アルゴリズムを <var>newContext</var> を引数として実行した結果とする。
                </li>
                <li><var>event</var>.<a data-link-type="attribute" data-lt="[[windowClient]]" href="#dfn-windowclient"
                        class="internalDFN" id="ref-for-dfn-windowclient-3"><code>[[windowClient]]</code></a> に
                    <var>client</var> を設定する。
                </li>
                <li><var>promise</var> を <var>client</var> で解決する。
                </li>
            </ol>
        </section>
        <section id="post-example" class="informative">
            <div class="header-wrapper">
                <h3 id="x7-2-example-of-handling-the-paymentrequestevent"><bdi class="secno">7.2 </bdi>
                    <a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent"
                        class="internalDFN" id="ref-for-dom-paymentrequestevent-17"><code>PaymentRequestEvent</code></a>
                    の処理の例
                </h3><a class="self-link" href="#post-example" aria-label="Permalink for Section 7.2"></a>
            </div>
            <p><em>このセクションは規範ではありません。</em></p>

            <p>
                この例では、<a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent"
                    class="internalDFN" id="ref-for-dom-paymentrequestevent-18"><code>PaymentRequestEvent</code></a>
                を監視する service worker の書き方を示す。<a data-link-type="idl" data-lt="PaymentRequestEvent"
                    href="#dom-paymentrequestevent" class="internalDFN"
                    id="ref-for-dom-paymentrequestevent-19"><code>PaymentRequestEvent</code></a> を受信すると、service worker
                はユーザーとの対話のためにウィンドウを開く。
            </p>
            <div class="example" id="example-handling-the-paymentrequestevent">
                <div class="marker">
                    <a class="self-link" href="#example-handling-the-paymentrequestevent">Example<bdi> 2</bdi></a><span
                        class="example-title">: PaymentRequestEvent の処理</span>
                </div>
                <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getPaymentResponseFromWindow</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"message"</span>, listener = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
      self.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"message"</span>, listener);
      <span class="hljs-keyword">if</span> (!e.<span class="hljs-property">data</span> || !e.<span class="hljs-property">data</span>.<span class="hljs-property">methodName</span>) {
        <span class="hljs-title function_">reject</span>();
        <span class="hljs-keyword">return</span>;
      }
      <span class="hljs-title function_">resolve</span>(e.<span class="hljs-property">data</span>);
    });
  });
}

self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"paymentrequest"</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
  e.<span class="hljs-title function_">respondWith</span>((<span class="hljs-title function_">async</span>() =&gt; {
    <span class="hljs-comment">// Open a new window for providing payment UI to user.</span>
    <span class="hljs-keyword">const</span> windowClient = <span class="hljs-keyword">await</span> e.<span class="hljs-title function_">openWindow</span>(<span class="hljs-string">"payment_ui.html"</span>);

    <span class="hljs-comment">// Send data to the opened window.</span>
    windowClient.<span class="hljs-title function_">postMessage</span>({
      <span class="hljs-attr">total</span>: e.<span class="hljs-property">total</span>,
      <span class="hljs-attr">modifiers</span>: e.<span class="hljs-property">modifiers</span>
    });

    <span class="hljs-comment">// Wait for a payment response from the opened window.</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">getPaymentResponseFromWindow</span>();
  })());
});</code></pre>
            </div>
            <p>
                上記のシンプルな仕組みを用いると、<a href="#dfn-payment-handler-window" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-payment-handler-window-1">支払いハンドラのウィンドウ</a>に読み込まれる簡単な HTML ページは次のようになる:
            </p>
            <div class="example" id="example-simple-payment-handler-window">
                <div class="marker">
                    <a class="self-link" href="#example-simple-payment-handler-window">Example<bdi> 3</bdi></a><span
                        class="example-title">: シンプルな Payment Handler ウィンドウ</span>
                </div>
                <pre aria-busy="false"><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"form"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Cardholder Name:<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"cardholderName"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Card Number:<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"cardNumber"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Expiration Month:<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"expiryMonth"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Expiration Year:<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"expiryYear"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Security Code:<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"cardSecurityCode"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Pay"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"message"</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
  <span class="hljs-comment">/* Note: message sent from payment app is available in e.data */</span>
});

<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"form"</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"submit"</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> details = {};
  [<span class="hljs-string">"cardholderName"</span>, <span class="hljs-string">"cardNumber"</span>, <span class="hljs-string">"expiryMonth"</span>, <span class="hljs-string">"expiryYear"</span>, <span class="hljs-string">"cardSecurityCode"</span>]
  .<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">field</span> =&gt;</span> {
    details[field] = form.<span class="hljs-property">elements</span>[field].<span class="hljs-property">value</span>;
  });

  <span class="hljs-keyword">const</span> paymentAppResponse = {
    <span class="hljs-attr">methodName</span>: <span class="hljs-string">"https://example.com/pay"</span>,
    details
  };

  navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">postMessage</span>(paymentAppResponse);
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">close</span>();
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
            </div>
        </section>
    </section>
    <section id="response">
        <div class="header-wrapper">
            <h2 id="x8-response"><bdi class="secno">8. </bdi>
                応答
            </h2><a class="self-link" href="#response" aria-label="Permalink for Section 8."></a>
        </div>

        <section data-dfn-for="PaymentHandlerResponse" data-link-for="PaymentHandlerResponse"
            id="paymenthandlerresponse-dictionary">
            <div class="header-wrapper">
                <h3 id="x8-1-paymenthandlerresponse-dictionary"><bdi class="secno">8.1 </bdi>
                    <dfn data-export="" data-dfn-type="dictionary" id="dom-paymenthandlerresponse" data-idl="dictionary"
                        data-title="PaymentHandlerResponse" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>PaymentHandlerResponse</code></dfn> 辞書
                </h3><a class="self-link" href="#paymenthandlerresponse-dictionary"
                    aria-label="Permalink for Section 8.1"></a>
            </div>
            PaymentHandlerResponse は、次の辞書を用いて伝達される:
            <pre class="idl def" id="webidl-822477832"><span class="idlHeader"><a class="self-link" href="#webidl-822477832">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-paymenthandlerresponse" data-title="PaymentHandlerResponse">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-paymenthandlerresponse" id="ref-for-dom-paymenthandlerresponse-5"><code>PaymentHandlerResponse</code></a> {<span data-idl="" class="idlMember" id="idl-def-paymenthandlerresponse-methodname" data-title="methodName" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-methodname" id="ref-for-dom-paymenthandlerresponse-methodname-1"><code>methodName</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymenthandlerresponse-details" data-title="details" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-details" id="ref-for-dom-paymenthandlerresponse-details-1"><code>details</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymenthandlerresponse-payername" data-title="payerName" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-payername" id="ref-for-dom-paymenthandlerresponse-payername-1"><code>payerName</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymenthandlerresponse-payeremail" data-title="payerEmail" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-payeremail" id="ref-for-dom-paymenthandlerresponse-payeremail-1"><code>payerEmail</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymenthandlerresponse-payerphone" data-title="payerPhone" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-payerphone" id="ref-for-dom-paymenthandlerresponse-payerphone-1"><code>payerPhone</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymenthandlerresponse-shippingaddress" data-title="shippingAddress" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-addressinit">AddressInit</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-shippingaddress" id="ref-for-dom-paymenthandlerresponse-shippingaddress-1"><code>shippingAddress</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymenthandlerresponse-shippingoption" data-title="shippingOption" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-shippingoption" id="ref-for-dom-paymenthandlerresponse-shippingoption-1"><code>shippingOption</code></a>;</span>
};</span></code></pre>
            <section id="methodname-attribute">
                <div class="header-wrapper">
                    <h4 id="x8-1-1-methodname-attribute"><bdi class="secno">8.1.1 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member" id="dom-paymenthandlerresponse-methodname"
                            data-idl="field" data-title="methodName" data-dfn-for="PaymentHandlerResponse"
                            data-type="DOMString" tabindex="0" aria-haspopup="dialog"><code>methodName</code></dfn>
                        属性
                    </h4><a class="self-link" href="#methodname-attribute" aria-label="Permalink for Section 8.1.1"></a>
                </div>

                <p>
                    取引を完了するためにユーザーが選択した <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-id/#dfn-pmi">支払い方法識別子</a>（当該 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dfn-payment-method">支払い方法</a>のもの）。
                </p>
            </section>
            <section id="details-attribute">
                <div class="header-wrapper">
                    <h4 id="x8-1-2-details-attribute"><bdi class="secno">8.1.2 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member" id="dom-paymenthandlerresponse-details"
                            data-idl="field" data-title="details" data-dfn-for="PaymentHandlerResponse"
                            data-type="object" tabindex="0" aria-haspopup="dialog"><code>details</code></dfn> 属性
                    </h4><a class="self-link" href="#details-attribute" aria-label="Permalink for Section 8.1.2"></a>
                </div>

                <p>
                    販売者が取引を処理し、資金移動の成功を判断するために用いる、<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dfn-payment-method">支払い方法</a>固有のメッセージを提供する、<a
                        data-link-type="dfn" href="https://www.w3.org/TR/payment-request/#dfn-json-serialize">JSON
                        で直列化可能</a>なオブジェクト。
                </p>
                <p>
                    ユーザーエージェントは、対応する
                    <a data-link-type="idl" href="#dom-paymentrequestevent-respondwith" class="internalDFN"
                        id="ref-for-dom-paymentrequestevent-respondwith-2"><code>respondWith</code></a> 関数に渡された Promise
                    が解決されることで、支払いハンドラから成功応答を受け取る。
                    アプリケーションは、支払い応答を含む <a href="#dom-paymenthandlerresponse" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-paymenthandlerresponse-6"><code>PaymentHandlerResponse</code></a> インスタンスで
                    Promise を解決することが期待される。ユーザーによるキャンセルやエラーの場合、アプリケーションは Promise を拒否して失敗を通知してもよい。
                </p>
                <p>
                    Promise が拒否された場合、ユーザーエージェントは <em class="rfc2119">MUST</em> <dfn
                        id="dfn-payment-app-failure-algorithm" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">payment app failure algorithm</dfn>
                    を実行する。このアルゴリズムの正確な詳細は実装者に委ねられる。許容される動作には、次のようなものが含まれる（これらに限定されない）:
                </p>
                <ul>
                    <li>同じ支払いハンドラまたは別のものを使って、ユーザーに再試行させる。
                    </li>
                    <li><a href="https://www.w3.org/TR/payment-request/#show-method">PaymentRequest.show()</a> によって作成された
                        Promise を拒否する。
                    </li>
                </ul>
            </section>
            <section id="payername-attribute">
                <div class="header-wrapper">
                    <h4 id="x8-1-3-payername-attribute"><bdi class="secno">8.1.3 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member" id="dom-paymenthandlerresponse-payername"
                            data-idl="field" data-title="payerName" data-dfn-for="PaymentHandlerResponse"
                            data-type="DOMString" tabindex="0" aria-haspopup="dialog"><code>payerName</code></dfn>
                        属性
                    </h4><a class="self-link" href="#payername-attribute" aria-label="Permalink for Section 8.1.3"></a>
                </div>

                <p>
                    ユーザーが提供した支払人の氏名。
                </p>
            </section>
            <section id="payeremail-attribute">
                <div class="header-wrapper">
                    <h4 id="x8-1-4-payeremail-attribute"><bdi class="secno">8.1.4 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member" id="dom-paymenthandlerresponse-payeremail"
                            data-idl="field" data-title="payerEmail" data-dfn-for="PaymentHandlerResponse"
                            data-type="DOMString" tabindex="0" aria-haspopup="dialog"><code>payerEmail</code></dfn>
                        属性
                    </h4><a class="self-link" href="#payeremail-attribute" aria-label="Permalink for Section 8.1.4"></a>
                </div>

                <p>
                    ユーザーが提供した支払人のメールアドレス。
                </p>
            </section>
            <section id="payerphone-attribute">
                <div class="header-wrapper">
                    <h4 id="x8-1-5-payerphone-attribute"><bdi class="secno">8.1.5 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member" id="dom-paymenthandlerresponse-payerphone"
                            data-idl="field" data-title="payerPhone" data-dfn-for="PaymentHandlerResponse"
                            data-type="DOMString" tabindex="0" aria-haspopup="dialog"><code>payerPhone</code></dfn>
                        属性
                    </h4><a class="self-link" href="#payerphone-attribute" aria-label="Permalink for Section 8.1.5"></a>
                </div>

                <p>
                    ユーザーが提供した支払人の電話番号。
                </p>
            </section>
            <section id="shippingaddress-attribute">
                <div class="header-wrapper">
                    <h4 id="x8-1-6-shippingaddress-attribute"><bdi class="secno">8.1.6 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member" id="dom-paymenthandlerresponse-shippingaddress"
                            data-idl="field" data-title="shippingAddress" data-dfn-for="PaymentHandlerResponse"
                            data-type="AddressInit" tabindex="0"
                            aria-haspopup="dialog"><code>shippingAddress</code></dfn> 属性
                    </h4><a class="self-link" href="#shippingaddress-attribute"
                        aria-label="Permalink for Section 8.1.6"></a>
                </div>

                <p>
                    ユーザーが提供した配送先住所。
                </p>
            </section>
            <section id="shippingoption-attribute">
                <div class="header-wrapper">
                    <h4 id="x8-1-7-shippingoption-attribute"><bdi class="secno">8.1.7 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member" id="dom-paymenthandlerresponse-shippingoption"
                            data-idl="field" data-title="shippingOption" data-dfn-for="PaymentHandlerResponse"
                            data-type="DOMString" tabindex="0" aria-haspopup="dialog"><code>shippingOption</code></dfn>
                        属性
                    </h4><a class="self-link" href="#shippingoption-attribute"
                        aria-label="Permalink for Section 8.1.7"></a>
                </div>

                <p>
                    ユーザーが選択した配送オプションの識別子。
                </p>
            </section>
        </section>
        <section id="change-payment-method-algorithm">
            <div class="header-wrapper">
                <h3 id="x8-2-change-payment-method-algorithm"><bdi class="secno">8.2 </bdi>
                    <dfn id="dfn-change-payment-method-algorithm" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">支払い方法変更アルゴリズム</dfn>
                </h3><a class="self-link" href="#change-payment-method-algorithm"
                    aria-label="Permalink for Section 8.2"></a>
            </div>

            <p>
                このアルゴリズムが <var>methodName</var> および <var>methodDetails</var> のパラメータで呼び出されたとき、ユーザーエージェントは次の手順を <em
                    class="rfc2119">MUST</em> 実行する:
            </p>
            <ol class="algorithm">
                <li><a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#payment-method-changed-algorithm">payment method
                        changed algorithm</a> を、与えられた <var>methodName</var> および <var>methodDetails</var> パラメータを用いて構築した
                    <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentmethodchangeevent">PaymentMethodChangeEvent</a>
                    <var>event</var> で実行する。
                </li>
                <li><var>event</var>.<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#updatewith-method">updateWith(detailsPromise)</a>
                    が実行されなかった場合、<code>null</code> を返す。
                </li>
                <li><var>event</var>.<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#updatewith-method">updateWith(detailsPromise)</a>
                    が例外を投げた場合、そのエラーを再スローする。
                </li>
                <li><var>event</var>.<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#updatewith-method">updateWith(detailsPromise)</a>
                    がタイムアウトした場合（任意）、"<a data-link-type="exception"
                        href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>" の
                    <a data-link-type="interface" data-lt="DOMException"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a> を投げる。
                </li>
                <li><var>event</var>.<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#updatewith-method">updateWith(detailsPromise)</a> の
                    <var>detailsPromise</var> から、<a href="#dom-paymentrequestdetailsupdate" class="internalDFN"
                        data-link-type="idl"
                        id="ref-for-dom-paymentrequestdetailsupdate-5"><code>PaymentRequestDetailsUpdate</code></a>
                    を構築して返す。
                </li>
            </ol>
        </section>
        <section id="change-payment-details-algorithm">
            <div class="header-wrapper">
                <h3 id="x8-3-change-payment-details-algorithm"><bdi class="secno">8.3 </bdi>
                    <dfn id="dfn-change-payment-details-algorithm" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">支払い詳細変更アルゴリズム</dfn>
                </h3><a class="self-link" href="#change-payment-details-algorithm"
                    aria-label="Permalink for Section 8.3"></a>
            </div>

            <p>
                このアルゴリズムが <var>shippingAddress</var> または <var>shippingOption</var> で呼び出されたとき、ユーザーエージェントは次の手順を <em
                    class="rfc2119">MUST</em> 実行する:
            </p>
            <ol class="algorithm">
                <li><a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#paymentrequest-updated-algorithm">PaymentRequest
                        updated algorithm</a> を、更新された詳細（<var>shippingAddress</var> または
                    <var>shippingOption</var>）を用いて構築した
                    <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequestupdateevent">PaymentRequestUpdateEvent</a>
                    <var>event</var> で実行する。
                </li>
                <li><var>event</var>.<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#updatewith-method">updateWith(detailsPromise)</a>
                    が実行されなかった場合、<code>null</code> を返す。
                </li>
                <li><var>event</var>.<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#updatewith-method">updateWith(detailsPromise)</a>
                    が例外を投げた場合、そのエラーを再スローする。
                </li>
                <li><var>event</var>.<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#updatewith-method">updateWith(detailsPromise)</a>
                    がタイムアウトした場合（任意）、"<a data-link-type="exception"
                        href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>" の
                    <a data-link-type="interface" data-lt="DOMException"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a> を投げる。
                </li>
                <li><var>event</var>.<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#updatewith-method">updateWith(detailsPromise)</a> の
                    <var>detailsPromise</var> から、<a href="#dom-paymentrequestdetailsupdate" class="internalDFN"
                        data-link-type="idl"
                        id="ref-for-dom-paymentrequestdetailsupdate-6"><code>PaymentRequestDetailsUpdate</code></a>
                    を構築して返す。
                </li>
            </ol>
        </section>
        <section id="respond-to-paymentrequest-algorithm">
            <div class="header-wrapper">
                <h3 id="x8-4-respond-to-paymentrequest-algorithm"><bdi class="secno">8.4 </bdi>
                    <dfn id="dfn-respond-to-paymentrequest-algorithm" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">PaymentRequest に応答するアルゴリズム</dfn>
                </h3><a class="self-link" href="#respond-to-paymentrequest-algorithm"
                    aria-label="Permalink for Section 8.4"></a>
            </div>

            <p>
                このアルゴリズムが <var>event</var> および <var>handlerResponsePromise</var> のパラメータで呼び出されたとき、ユーザーエージェントは次の手順を <em
                    class="rfc2119">MUST</em> 実行する:
            </p>
            <ol class="algorithm">
                <li><var>event</var> の <a data-link-type="attribute"
                        href="https://dom.spec.whatwg.org/#dom-event-istrusted"><code>isTrusted</code></a> が false
                    の場合、"InvalidStateError" の <a data-link-type="interface" data-lt="DOMException"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                    を投げ、これらの手順を中止する。
                </li>
                <li><var>event</var> の <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#dispatch-flag">dispatch flag</a> が未設定の場合、"<a
                        data-link-type="exception"
                        href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>" の
                    <a data-link-type="interface" data-lt="DOMException"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                    を投げ、これらの手順を中止する。
                </li>
                <li><var>event</var>.<a data-link-type="attribute" data-lt="[[respondWithCalled]]"
                        href="#dfn-respondwithcalled" class="internalDFN"
                        id="ref-for-dfn-respondwithcalled-1"><code>[[respondWithCalled]]</code></a> が true の場合、"<a
                        data-link-type="exception"
                        href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>" の
                    <a data-link-type="interface" data-lt="DOMException"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                    を投げ、これらの手順を中止する。
                </li>
                <li><var>event</var>.<a data-link-type="attribute" data-lt="[[respondWithCalled]]"
                        href="#dfn-respondwithcalled" class="internalDFN"
                        id="ref-for-dfn-respondwithcalled-2"><code>[[respondWithCalled]]</code></a> を true に設定する。
                </li>
                <li><var>event</var> の <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#stop-propagation-flag">stop propagation flag</a> と
                    <var>event</var> の <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#stop-immediate-propagation-flag">stop immediate propagation
                        flag</a> を設定する。
                </li>
                <li><var>handlerResponsePromise</var> を <var>event</var> の <a data-link-type="dfn"
                        href="https://www.w3.org/TR/service-workers/#extendableevent-extend-lifetime-promises">extend
                        lifetime promises</a> に追加する。
                </li>
                <li><var>event</var> の <a data-link-type="dfn"
                        href="https://www.w3.org/TR/service-workers/#extendableevent-pending-promises-count">pending
                        promises count</a> を 1 増やす。
                </li>
                <li>
                    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#upon-rejection">Upon rejection</a>
                    （<var>handlerResponsePromise</var> が拒否されたとき）:
                    <ol>
                        <li><a href="#dfn-payment-app-failure-algorithm" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-payment-app-failure-algorithm-1">payment app
                                failure algorithm</a> を実行し、これらの手順を終了する。
                        </li>
                    </ol>
                </li>
                <li>
                    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#upon-fulfillment">Upon fulfillment</a>
                    （<var>handlerResponsePromise</var> が履行されたとき）:
                    <ol>
                        <li><var>handlerResponse</var> を、<var>value</var> を IDL 値 <a data-link-type="idl"
                                data-lt="PaymentHandlerResponse" href="#dom-paymenthandlerresponse" class="internalDFN"
                                id="ref-for-dom-paymenthandlerresponse-7"><code>PaymentHandlerResponse</code></a> に <a
                                data-link-type="dfn"
                                href="https://webidl.spec.whatwg.org/#dfn-convert-ecmascript-to-idl-value">変換</a>
                            したものとする。これが例外を投げた場合、<a href="#dfn-payment-app-failure-algorithm" class="internalDFN"
                                data-link-type="dfn" id="ref-for-dfn-payment-app-failure-algorithm-2">payment app
                                failure algorithm</a> を実行し、これらの手順を終了する。
                        </li>
                        <li><var>handlerResponse</var> に必須メンバーがすべて存在し、正しく整形されていることを検証する。
                            <ol>
                                <li><var>handlerResponse</var>.<a data-lt="PaymentHandlerResponse.methodName"
                                        href="#dom-paymenthandlerresponse-methodname" class="internalDFN"
                                        data-link-type="idl"
                                        id="ref-for-dom-paymenthandlerresponse-methodname-2"><code>methodName</code></a>
                                    が存在しない、または
                                    <var>event</var>.<a data-lt="PaymentRequestEvent.methodData"
                                        href="#dom-paymentrequestevent-methoddata" class="internalDFN"
                                        data-link-type="idl"
                                        id="ref-for-dom-paymentrequestevent-methoddata-5"><code>methodData</code></a>
                                    の値のいずれにも設定されていない場合、<a href="#dfn-payment-app-failure-algorithm" class="internalDFN"
                                        data-link-type="dfn" id="ref-for-dfn-payment-app-failure-algorithm-3">
                                        payment app failure algorithm</a> を実行し、これらの手順を終了する。
                                </li>
                                <li><var>handlerResponse</var>.<a data-lt="PaymentHandlerResponse.details"
                                        href="#dom-paymenthandlerresponse-details" class="internalDFN"
                                        data-link-type="idl"
                                        id="ref-for-dom-paymenthandlerresponse-details-2"><code>details</code></a>
                                    が存在しない、または <a data-link-type="dfn"
                                        href="https://www.w3.org/TR/payment-request/#dfn-json-serialize">JSON で直列化可能</a>
                                    でない場合、<a href="#dfn-payment-app-failure-algorithm" class="internalDFN"
                                        data-link-type="dfn" id="ref-for-dfn-payment-app-failure-algorithm-4">payment
                                        app failure algorithm</a> を実行し、これらの手順を終了する。
                                </li>
                                <li><var>shippingRequired</var> を、関連する PaymentRequest の
                                    <a
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentoptions-requestshipping">requestShipping</a>
                                    の値とする。<var>shippingRequired</var> であり、かつ
                                    <var>handlerResponse</var>.<a data-lt="PaymentHandlerResponse.shippingAddress"
                                        href="#dom-paymenthandlerresponse-shippingaddress" class="internalDFN"
                                        data-link-type="idl"
                                        id="ref-for-dom-paymenthandlerresponse-shippingaddress-2"><code>shippingAddress</code></a>
                                    が存在しない場合、<a href="#dfn-payment-app-failure-algorithm" class="internalDFN"
                                        data-link-type="dfn" id="ref-for-dfn-payment-app-failure-algorithm-5">payment
                                        app failure
                                        algorithm</a> を実行し、これらの手順を終了する。
                                </li>
                                <li><var>shippingRequired</var> であり、かつ
                                    <var>handlerResponse</var>.<a data-lt="PaymentHandlerResponse.shippingOption"
                                        href="#dom-paymenthandlerresponse-shippingoption" class="internalDFN"
                                        data-link-type="idl"
                                        id="ref-for-dom-paymenthandlerresponse-shippingoption-2"><code>shippingOption</code></a>
                                    が存在しない、または
                                    <var>event</var>.<a data-lt="PaymentRequestEvent.shippingOptions"
                                        href="#dom-paymentrequestevent-shippingoptions" class="internalDFN"
                                        data-link-type="idl"
                                        id="ref-for-dom-paymentrequestevent-shippingoptions-3"><code>shippingOptions</code></a>
                                    の識別子のいずれにも設定されていない場合、<a href="#dfn-payment-app-failure-algorithm"
                                        class="internalDFN" data-link-type="dfn"
                                        id="ref-for-dfn-payment-app-failure-algorithm-6">payment
                                        app failure algorithm</a> を実行し、これらの手順を終了する。
                                </li>
                                <li><var>payerNameRequired</var> を、関連する PaymentRequest の
                                    <a
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentoptions-requestpayername">requestPayerName</a>
                                    の値とする。<var>payerNameRequired</var> であり、
                                    <var>handlerResponse</var>.<a data-lt="PaymentHandlerResponse.payerName"
                                        href="#dom-paymenthandlerresponse-payername" class="internalDFN"
                                        data-link-type="idl"
                                        id="ref-for-dom-paymenthandlerresponse-payername-2"><code>payerName</code></a>
                                    が存在しない場合、<a href="#dfn-payment-app-failure-algorithm" class="internalDFN"
                                        data-link-type="dfn" id="ref-for-dfn-payment-app-failure-algorithm-7">payment
                                        app failure algorithm</a> を実行し、これらの手順を終了する。
                                </li>
                                <li><var>payerEmailRequired</var> を、関連する PaymentRequest の
                                    <a
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentoptions-requestpayeremail">requestPayerEmail</a>
                                    の値とする。<var>payerEmailRequired</var> であり、
                                    <var>handlerResponse</var>.<a data-lt="PaymentHandlerResponse.payerEmail"
                                        href="#dom-paymenthandlerresponse-payeremail" class="internalDFN"
                                        data-link-type="idl"
                                        id="ref-for-dom-paymenthandlerresponse-payeremail-2"><code>payerEmail</code></a>
                                    が存在しない場合、<a href="#dfn-payment-app-failure-algorithm" class="internalDFN"
                                        data-link-type="dfn" id="ref-for-dfn-payment-app-failure-algorithm-8">payment
                                        app failure algorithm</a> を実行し、これらの手順を終了する。
                                </li>
                                <li><var>payerPhoneRequired</var> を、関連する PaymentRequest の
                                    <a
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentoptions-requestpayerphone">requestPayerPhone</a>
                                    の値とする。<var>payerPhoneRequired</var> であり、
                                    <var>handlerResponse</var>.<a data-lt="PaymentHandlerResponse.payerPhone"
                                        href="#dom-paymenthandlerresponse-payerphone" class="internalDFN"
                                        data-link-type="idl"
                                        id="ref-for-dom-paymenthandlerresponse-payerphone-2"><code>payerPhone</code></a>
                                    が存在しない場合、<a href="#dfn-payment-app-failure-algorithm" class="internalDFN"
                                        data-link-type="dfn" id="ref-for-dfn-payment-app-failure-algorithm-9">payment
                                        app failure algorithm</a> を実行し、これらの手順を終了する。
                                </li>
                            </ol>
                        </li>
                        <li><var>handlerResponse</var> の必須メンバーを直列化する（<var>methodName</var> と <var>details</var> は常に必須。
                            <var>shippingRequired</var> が true のときは <var>shippingAddress</var> と
                            <var>shippingOption</var> も必須。
                            <var>payerNameRequired</var>、<var>payerEmailRequired</var>、<var>payerPhoneRequired</var>
                            がそれぞれ true のときは、
                            <var>payerName</var>、<var>payerEmail</var>、<var>payerPhone</var> も必須。):
                            <ol>
                                <li><var>handlerResponse</var> の各 <var>member</var> について、
                                    <var>serializeMember</var> を <a
                                        href="https://html.spec.whatwg.org/multipage/#structuredserialize">StructuredSerialize</a>
                                    を
                                    <var>handlerResponse</var>.<var>member</var> に対して実行した結果とする。発生した例外は再スローする。
                                </li>
                            </ol>
                        </li>
                        <li>ユーザーエージェントは、[<cite><a class="bibref" data-link-type="biblio" href="#bib-payment-request"
                                    title="Payment Request API">payment-request</a></cite>] で定義される
                            <a data-link-type="dfn"
                                href="https://www.w3.org/TR/payment-request/#user-accepts-the-payment-request-algorithm">user
                                accepts the payment request algorithm</a> を実行し、手順 9〜15 を以下の手順（または同等の手順）に置き換え <em
                                class="rfc2119">MUST</em> 実行する。
                            <ol>
                                <li>直列化されたメンバーを逆直列化する:
                                    <ol>
                                        <li>各 <var>serializeMember</var> について、
                                            <var>member</var> を <a
                                                href="https://html.spec.whatwg.org/multipage/#structureddeserialize">StructuredDeserialize</a>
                                            を
                                            <var>serializeMember</var> に対して実行した結果とする。発生した例外は再スローする。
                                        </li>
                                    </ol>
                                </li>
                                <li>上記の手順でいずれかの例外が発生した場合、<a href="#dfn-payment-app-failure-algorithm"
                                        class="internalDFN" data-link-type="dfn"
                                        id="ref-for-dfn-payment-app-failure-algorithm-10">payment
                                        app failure algorithm</a> を実行し、これらの手順を終了する。
                                </li>
                                <li><var>methodName</var> を、関連する PaymentRequest の
                                    <a data-lt="PaymentResponse" data-link-type="dfn"
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentresponse"><var>response</var></a>.<a
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentresponse-methodname">methodName</a>
                                    に代入する。
                                </li>
                                <li><var>details</var> を、関連する PaymentReqeust の
                                    <a data-lt="PaymentResponse" data-link-type="dfn"
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentresponse"><var>response</var></a>.<a
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentresponse-details">details</a>
                                    に代入する。
                                </li>
                                <li><var>shippingRequired</var> の場合、関連する PaymentReqeust の
                                    <a
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentresponse-shippingaddress">
                                        shippingAddress</a> 属性に <var>shippingAddress</var> を設定する。そうでない場合は null を設定する。
                                </li>
                                <li><var>shippingRequired</var> の場合、関連する PaymentReqeust の
                                    <a href="https://www.w3.org/TR/payment-request/#dom-paymentresponse-shippingoption">
                                        shippingOption</a> 属性に <var>shippingOption</var> を設定する。そうでない場合は null を設定する。
                                </li>
                                <li><var>payerNameRequired</var> の場合、関連する PaymentReqeust の
                                    <a href="https://www.w3.org/TR/payment-request/#dom-paymentresponse-payername">
                                        payerName</a> 属性に <var>payerName</var> を設定する。そうでない場合は null を設定する。
                                </li>
                                <li><var>payerEmailRequired</var> の場合、関連する PaymentReqeust の
                                    <a
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentresponse-payeremail">payerEmail</a>
                                    属性に <var>payerEmail</var> を設定する。そうでない場合は null を設定する。
                                </li>
                                <li><var>payerPhoneRequired</var> の場合、関連する PaymentReqeust の
                                    <a
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentresponse-payerphone">payerPhone</a>
                                    属性に <var>payerPhone</var> を設定する。そうでない場合は null を設定する。
                                </li>
                            </ol>
                        </li>
                    </ol>
                </li>
                <li>
                    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#upon-fulfillment">Upon fulfillment</a>
                    または <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#upon-rejection">upon rejection</a>
                    のいずれかで <var>handlerResponsePromise</var> が完了したら、次の手順を実行するために
                    <a href="https://html.spec.whatwg.org/multipage/#queue-a-microtask">マイクロタスクをキューに入れる</a>:
                    <ol>
                        <li><var>event</var> の <a data-link-type="dfn"
                                href="https://www.w3.org/TR/service-workers/#extendableevent-pending-promises-count">pending
                                promises count</a> を 1 減らす。
                        </li>
                        <li><var>registration</var> を、
                            <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> の <a
                                data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">relevant
                                global object</a> に関連付けられた
                            <a data-link-type="dfn"
                                href="https://www.w3.org/TR/service-workers/#service-worker-concept">service
                                worker</a> の
                            <a data-link-type="dfn"
                                href="https://www.w3.org/TR/service-workers/#dfn-containing-service-worker-registration">containing
                                service worker registration</a> とする。
                        </li>
                        <li><var>registration</var> が null でない場合、<a data-link-type="dfn"
                                href="https://www.w3.org/TR/service-workers/#try-activate-algorithm">Try
                                Activate</a> を <var>registration</var> で呼び出す。
                        </li>
                    </ol>
                </li>
            </ol>
            <p>
                次の例は、支払い要求に応答する方法を示す:
            </p>
            <div class="example" id="example-sending-a-payment-response">
                <div class="marker">
                    <a class="self-link" href="#example-sending-a-payment-response">Example<bdi> 4</bdi></a><span
                        class="example-title">: 支払い応答の送信</span>
                </div>
                <pre aria-busy="false"><code class="hljs js">paymentRequestEvent.<span class="hljs-title function_">respondWith</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">accept,reject</span>) {
  <span class="hljs-comment">/* ... processing may occur here ... */</span>
  <span class="hljs-title function_">accept</span>({
    <span class="hljs-attr">methodName</span>: <span class="hljs-string">"https://example.com/pay"</span>,
    <span class="hljs-attr">details</span>: {
      <span class="hljs-attr">cardHolderName</span>:   <span class="hljs-string">"John Smith"</span>,
      <span class="hljs-attr">cardNumber</span>:       <span class="hljs-string">"1232343451234"</span>,
      <span class="hljs-attr">expiryMonth</span>:      <span class="hljs-string">"12"</span>,
      expiryYear :      <span class="hljs-string">"2020"</span>,
      <span class="hljs-attr">cardSecurityCode</span>: <span class="hljs-string">"123"</span>
     },
    <span class="hljs-attr">shippingAddress</span>: {
      <span class="hljs-attr">addressLine</span>: [
        <span class="hljs-string">"1875 Explorer St #1000"</span>,
      ],
      <span class="hljs-attr">city</span>: <span class="hljs-string">"Reston"</span>,
      <span class="hljs-attr">country</span>: <span class="hljs-string">"US"</span>,
      <span class="hljs-attr">dependentLocality</span>: <span class="hljs-string">""</span>,
      <span class="hljs-attr">organization</span>: <span class="hljs-string">""</span>,
      <span class="hljs-attr">phone</span>: <span class="hljs-string">"+15555555555"</span>,
      <span class="hljs-attr">postalCode</span>: <span class="hljs-string">"20190"</span>,
      <span class="hljs-attr">recipient</span>: <span class="hljs-string">"John Smith"</span>,
      <span class="hljs-attr">region</span>: <span class="hljs-string">"VA"</span>,
      <span class="hljs-attr">sortingCode</span>: <span class="hljs-string">""</span>
    },
    <span class="hljs-attr">shippingOption</span>: <span class="hljs-string">"express"</span>,
    <span class="hljs-attr">payerEmail</span>: <span class="hljs-string">"john.smith@gmail.com"</span>,
  });
}));</code></pre>
            </div>
            <div class="note" role="note" id="issue-container-generatedID-2">
                <div role="heading" class="note-title marker" id="h-note-2" aria-level="4"><span>注</span></div>
                <p class="">
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-payment-request"
                            title="Payment Request API">payment-request</a></cite>]
                    は、エコシステム内の関係者（支払いアプリ提供者や支払い先を含む）が、ネットワーク障害やその他の障害後の照合に用いることができる <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#id-attribute">ID</a> を定義している。
                </p>
            </div>
        </section>
    </section>

    <section id="security">
        <div class="header-wrapper">
            <h2 id="x9-security-and-privacy-considerations"><bdi class="secno">9. </bdi>
                セキュリティおよびプライバシーに関する考慮事項
            </h2><a class="self-link" href="#security" aria-label="Permalink for Section 9."></a>
        </div>

        <section id="addresses">
            <div class="header-wrapper">
                <h3 id="x9-1-addresses"><bdi class="secno">9.1 </bdi>住所</h3><a class="self-link" href="#addresses"
                    aria-label="Permalink for Section 9.1"></a>
            </div>

            <p>
                Web Payments Working Group は、プライバシー上の問題により Payment Request API の初期版から配送先住所および請求先住所のサポートを削除しました（<a
                    href="https://github.com/w3c/payment-request/issues/842">issue
                    842</a> を参照）。この機能を引き続きサポートする実装に関する文書を提供するため、作業部会はプライバシー問題に対処することを前提として当該機能を復元しています。その過程で、他の
                API（例：Content
                Picker API）の進化に基づき、Payment Request API に変更を加える可能性もあります。
            </p>
        </section>
        <section id="information-about-the-user-environment">
            <div class="header-wrapper">
                <h3 id="x9-2-information-about-the-user-environment"><bdi class="secno">9.2 </bdi>
                    ユーザー環境に関する情報
                </h3><a class="self-link" href="#information-about-the-user-environment"
                    aria-label="Permalink for Section 9.2"></a>
            </div>

            <ul>
                <li>この API は、ユーザーが登録した支払いハンドラに関する情報を共有しません。オリジンからの情報は、ユーザーの同意がある場合にのみ支払い先と共有されます。
                </li>
                <li>ユーザーがその支払いハンドラを選択するまでは、ユーザーエージェントは支払い要求の情報をいかなる支払いハンドラとも共有すべきではありません。
                </li>
                <li>Payment Handler API をサポートするブラウザでは、販売者が URL ベースの支払い方法識別子で PaymentRequest
                    オブジェクトを作成すると、登録済みの支払いハンドラのうち有限のオリジン（支払い方法マニフェストのオリジンと、その<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-manifest/#parsed-payment-method-manifest-supported-origins">サポートされるオリジン</a>）から、
                    <a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-canmakepaymentevent-12"><code>CanMakePaymentEvent</code></a>
                    が発火します。このイベントはユーザーがその支払いハンドラを選択する前に発火しますが、トリガー元のオリジン（すなわち販売者サイト）に関する情報を含まないため、直接的にユーザーを追跡する目的では使用できません。
                </li>
                <li>
                    <a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-canmakepaymentevent-13"><code>CanMakePaymentEvent</code></a>
                    を介したタイミング攻撃のリスクを認識しています:
                    <ul>
                        <li>販売者サイトがバックエンドのチャネル（例：fetch API）を通じて支払いハンドラのオリジンに通知を送り、PaymentRequest オブジェクトの構築を開始する旨を共有する。
                        </li>
                        <li>その後、販売者サイトが PaymentRequest を構築し、インストール済みの支払いハンドラに対して <a href="#dom-canmakepaymentevent"
                                class="internalDFN" data-link-type="idl"
                                id="ref-for-dom-canmakepaymentevent-14"><code>CanMakePaymentEvent</code></a> を発火させる。
                        </li>
                        <li>当該支払いハンドラが自オリジンに接続し、サーバー側で両リクエストの突合を試みる。</li>
                    </ul>
                </li>
                <li>ユーザーエージェントは、ユーザーが
                    <a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-canmakepaymentevent-15"><code>CanMakePaymentEvent</code></a>
                    のサポートを無効化できるようにすべきです。
                </li>
                <li>Payment Handler API をサポートするブラウザでは、登録済みの支払いハンドラのうち、必要に応じて配送先住所や支払人の連絡先情報など販売者が要求するすべての情報を提供できるものに対して
                    <a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-canmakepaymentevent-16"><code>CanMakePaymentEvent</code></a>
                    が発火します。
                </li>
            </ul>
        </section>
        <section id="user-consent-to-install">
            <div class="header-wrapper">
                <h3 id="x9-3-user-consent-to-install-a-payment-handler"><bdi class="secno">9.3 </bdi>
                    支払いハンドラのインストールに対するユーザーの同意
                </h3><a class="self-link" href="#user-consent-to-install" aria-label="Permalink for Section 9.3"></a>
            </div>

            <ul>
                <li>この仕様は、支払いハンドラが最初に登録される際に、ユーザーエージェントがどのようにユーザーの同意を確立するかを定義しません。ユーザーエージェントは、登録時にユーザーへ通知したり、プロンプトを表示したりする場合があります。
                </li>
                <li>ユーザーエージェントはセキュリティ上の理由（例：無効な SSL 証明書）により支払いハンドラの登録を拒否してもよい（<em
                        class="rfc2119">MAY</em>）。この場合、ユーザーに通知すべきです（<em class="rfc2119">SHOULD</em>）。</li>
            </ul>
        </section>
        <section id="user-consent-before-payment">
            <div class="header-wrapper">
                <h3 id="x9-4-user-consent-before-payment"><bdi class="secno">9.4 </bdi>
                    支払い前のユーザーの同意
                </h3><a class="self-link" href="#user-consent-before-payment"
                    aria-label="Permalink for Section 9.4"></a>
            </div>

            <ul>
                <li>この仕様の目標のひとつは、支払いのために必要なユーザー操作を最小化することです。しかし同時に、ユーザーが支払いを行うことに同意する機会を確保したいとも考えています。支払いハンドラはユーザーとの対話のためにウィンドウを開く必要がない場合があるため、ユーザーエージェントは必要な措置を講じて、ユーザーが
                    (1)
                    支払い要求が呼び出されたことを認識でき、(2) 販売者が支払いハンドラからの応答を受け取る前に、その支払いハンドラと対話できる機会を持てるようにすべきです。</li>
            </ul>
        </section>
        <section id="user-awareness-about-sharing-data-cross-origin">
            <div class="header-wrapper">
                <h3 id="x9-5-user-awareness-about-sharing-data-cross-origin"><bdi class="secno">9.5 </bdi>
                    クロスオリジンでのデータ共有に関するユーザーの認識
                </h3><a class="self-link" href="#user-awareness-about-sharing-data-cross-origin"
                    aria-label="Permalink for Section 9.5"></a>
            </div>

            <ul>
                <li>設計上、あるオリジンの支払いハンドラは他のオリジン（例：販売者サイト）とデータを共有します。
                </li>
                <li>フィッシング攻撃を軽減するため、ユーザーエージェントがユーザーに支払いハンドラのオリジンを明確に示すことが重要です。
                </li>
                <li>ユーザーエージェントは、ユーザーがクロスオリジンで情報を共有していること、理想的にはどの情報を共有しているかを理解できるよう支援すべきです。
                </li>
            </ul>
        </section>
        <section id="secure-communications">
            <div class="header-wrapper">
                <h3 id="x9-6-secure-communications"><bdi class="secno">9.6 </bdi>
                    安全な通信
                </h3><a class="self-link" href="#secure-communications" aria-label="Permalink for Section 9.6"></a>
            </div>

            <ul>
                <li><a href="https://www.w3.org/TR/service-workers/#security-considerations">Service Worker
                        のセキュリティに関する考慮事項</a>を参照してください。
                </li>
                <li>支払い方法のセキュリティは本仕様の対象外であり、当該支払い方法をサポートする支払いハンドラによって対処されます。
                </li>
            </ul>
        </section>
        <section id="authorized-payment-apps">
            <div class="header-wrapper">
                <h3 id="x9-7-authorized-payment-apps"><bdi class="secno">9.7 </bdi>
                    認可された支払いアプリ
                </h3><a class="self-link" href="#authorized-payment-apps" aria-label="Permalink for Section 9.7"></a>
            </div>

            <ul>
                <li>支払い方法の責任主体は、<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-manifest/#payment-method-manifest">payment method
                        manifest</a> を通じて支払いアプリを認可します。詳細は <a href="#dfn-handling-a-canmakepaymentevent"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-handling-a-canmakepaymentevent-1">Handling a
                        CanMakePaymentEvent</a> アルゴリズムを参照してください。
                </li>
                <li>ユーザーエージェントは、セキュリティ上の問題を引き起こす支払いハンドラを利用可能にする必要はありません。セキュリティ上の問題の例には次のようなものが含まれます:
                    <ul>
                        <li>期限切れ、失効、自己署名などの証明書
                        </li>
                        <li>混在コンテンツ
                        </li>
                        <li>HTTPS で提供されていたページが非 HTTPS のページへリダイレクトされる
                        </li>
                        <li>セーフブラウジングのデータベースで悪意あるものとして知られている支払いハンドラ
                        </li>
                    </ul>
                    <p>
                        セキュリティ上の理由により支払いハンドラが利用できない場合、ユーザーエージェントは支払いハンドラの開発者に理由（例：コンソールメッセージ）を提供すべきであり、混乱を避けるためにユーザーへ通知してもよいです。
                    </p>
                </li>
            </ul>
        </section>
        <section id="supported-origin">
            <div class="header-wrapper">
                <h3 id="x9-8-supported-origin"><bdi class="secno">9.8 </bdi>
                    サポートされるオリジン
                </h3><a class="self-link" href="#supported-origin" aria-label="Permalink for Section 9.8"></a>
            </div>

            <ul>
                <li>
                    <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-manifest/#payment-method-manifest">Payment method
                        manifests</a> は、特定の支払い方法について支払いアプリを配布する権限をオリジンに付与します。ユーザーエージェントが、支払いハンドラが
                    <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-manifest/#payment-method-manifest">payment method
                        manifest</a> に記載されたオリジンと一致するかどうかを判定する際には、当該支払いハンドラの
                    <a href="#dfn-service-worker-registration" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-service-worker-registration-2">service worker registration</a>
                    のスコープ URL を使用します。
                </li>
            </ul>
        </section>
        <section id="data-validation">
            <div class="header-wrapper">
                <h3 id="x9-9-data-validation"><bdi class="secno">9.9 </bdi>
                    データ検証
                </h3><a class="self-link" href="#data-validation" aria-label="Permalink for Section 9.9"></a>
            </div>

            <ul>
                <li>ハイジャックされた支払い先サイトが、詐欺的または不正形式の支払い方法データ（あるいは支払い要求データ）を支払い先サーバーへ送信するシナリオを軽減するため、支払い先サーバーはデータ形式を検証し、サーバー上の権威ある情報（受け入れ可能な支払い方法、合計、表示項目、配送先住所など）と相関付けるべきです。
                </li>
            </ul>
        </section>
        <section id="private-browsing-mode">
            <div class="header-wrapper">
                <h3 id="x9-10-private-browsing-mode"><bdi class="secno">9.10 </bdi>
                    プライベートブラウジングモード
                </h3><a class="self-link" href="#private-browsing-mode" aria-label="Permalink for Section 9.10"></a>
            </div>

            <ul>
                <li>「プライベートブラウジングモード」で Payment Request API
                    が呼び出された場合、ユーザーエージェントは支払いハンドラをプライベートなコンテキストで起動すべきです。これは一般に、サイトが以前に保存された情報へアクセスすることを防ぎます。その結果、ユーザーはオリジンへログインするか、支払い情報を再入力する必要が生じる可能性があります。
                </li>
                <li><a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-canmakepaymentevent-17"><code>CanMakePaymentEvent</code></a>
                    イベントは、プライベートブラウジングモードでは発火すべきではありません。ユーザーエージェントは、
                    <a data-lt="CanMakePaymentEvent.respondWith()" href="#dom-canmakepaymentevent-respondwith"
                        class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-canmakepaymentevent-respondwith-3"><code>respondWith()</code></a>
                    が <code>false</code> を引数として呼び出されたかのように振る舞うべきです。その結果としてのリスクも認識しています：ある主体が Payment Request API
                    呼び出しのオリジンと支払いハンドラのオリジンの両方を制御している場合、その主体はユーザーがプライベートブラウジングモードである可能性を推測できるかもしれません。
                </li>
            </ul>
        </section>
    </section>
    <section id="display" class="informative">
        <div class="header-wrapper">
            <h2 id="x10-payment-handler-display-considerations"><bdi class="secno">10. </bdi>
                支払いハンドラの表示に関する考慮事項
            </h2><a class="self-link" href="#display" aria-label="Permalink for Section 10."></a>
        </div>
        <p><em>このセクションは規範ではありません。</em></p>

        <p>
            支払いハンドラの順序付けにおいて、ユーザーエージェントは他の優先度よりもユーザーの優先設定を尊重することが期待されます。ユーザーエージェントは、オリジン単位またはすべてのオリジンに対して、優先する支払いハンドラの表示順序を設定するなど、手動構成オプションを提供することが期待されます。
        </p>
        <p>
            ユーザー体験に関する詳細は実装者に委ねられます。
        </p>
    </section>
    <section id="dependencies">
        <div class="header-wrapper">
            <h2 id="x11-dependencies"><bdi class="secno">11. </bdi>
                依存関係
            </h2><a class="self-link" href="#dependencies" aria-label="Permalink for Section 11."></a>
        </div>

        <p>
            本仕様は、いくつかの基礎となる仕様に依存します。
        </p>
        <dl>
            <dt>
                Payment Request API
            </dt>
            <dd>
                用語 <dfn data-lt="payment methods" id="dfn-payment-methods" class="externalDFN" data-no-export=""
                    data-dfn-type="dfn"><a href="https://www.w3.org/TR/payment-request/#dfn-payment-method">payment
                        method</a></dfn>、
                <dfn id="dfn-paymentrequest" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a></dfn>、
                <dfn id="dfn-paymentresponse" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#dom-paymentresponse">PaymentResponse</a></dfn>、
                <dfn id="dfn-supportedmethods" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#dom-paymentmethoddata-supportedmethods">supportedMethods</a></dfn>、
                <dfn id="dfn-paymentcurrencyamount" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#paymentcurrencyamount-dictionary">PaymentCurrencyAmount</a></dfn>、
                <dfn id="dfn-paymentdetailsmodifier" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#paymentdetailsmodifier-dictionary">paymentDetailsModifier</a></dfn>、
                <dfn id="dfn-paymentdetailsinit" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#paymentdetailsinit-dictionary">paymentDetailsInit</a></dfn>、
                <dfn id="dfn-paymentdetailsbase" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#paymentdetailsbase-dictionary">paymentDetailsBase</a></dfn>、
                <dfn id="dfn-paymentmethoddata" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a></dfn>、
                <dfn id="dfn-paymentoptions" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#dom-paymentoptions">PaymentOptions</a></dfn>、
                <dfn id="dfn-paymentshippingoption" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#dom-paymentshippingoption">PaymentShippingOption</a></dfn>、
                <dfn id="dfn-addressinit" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#dom-addressinit">AddressInit</a></dfn>、
                <dfn id="dfn-addresserrors" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#dom-addresserrors">AddressErrors</a></dfn>、
                <dfn id="dfn-paymentmethodchangeevent" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#dom-paymentmethodchangeevent">PaymentMethodChangeEvent</a></dfn>、
                <dfn id="dfn-paymentrequestupdateevent" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequestupdateevent">PaymentRequestUpdateEvent</a></dfn>、
                <dfn id="dfn-id" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#id-attribute">ID</a></dfn>、
                <dfn id="dfn-canmakepayment" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#canmakepayment-method">canMakePayment()</a></dfn>、
                <dfn id="dfn-show" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#show-method">show()</a></dfn>、
                <dfn id="dfn-updatewith-detailspromise" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#updatewith-method">updateWith(detailsPromise)</a></dfn>、
                <dfn id="dfn-user-accepts-the-payment-request-algorithm" class="externalDFN" data-no-export=""
                    data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#user-accepts-the-payment-request-algorithm">user
                        accepts the payment request algorithm</a></dfn>、<dfn id="dfn-payment-method-changed-algorithm"
                    class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#payment-method-changed-algorithm">payment method
                        changed algorithm</a></dfn>、<dfn id="dfn-paymentrequest-updated-algorithm" class="externalDFN"
                    data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#paymentrequest-updated-algorithm">PaymentRequest
                        updated algorithm</a></dfn>、および <dfn id="dfn-json-serializable" class="externalDFN"
                    data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#dfn-json-serialize">JSON-serializable</a></dfn> は、
                Payment Request API 仕様
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-payment-request"
                        title="Payment Request API">payment-request</a></cite>] によって定義されています。
            </dd>
            <dt>
                ECMAScript
            </dt>
            <dd>
                用語 <dfn id="dfn-internal-slot" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://tc39.es/ecma262/multipage/#sec-object-internal-methods-and-internal-slots">internal
                        slot</a></dfn> および
                <code><dfn id="dfn-json-stringify" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://tc39.es/ecma262/multipage/#sec-json.stringify">JSON.stringify</a></dfn></code>
                は、
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-ecmascript"
                        title="ECMAScript Language Specification">ECMASCRIPT</a></cite>] によって定義されています。
            </dd>
            <dt>
                Payment Method Manifest
            </dt>
            <dd>
                用語 <dfn data-lt="payment method manifests" id="dfn-payment-method-manifests" class="externalDFN"
                    data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-method-manifest/#payment-method-manifest">payment method
                        manifest</a></dfn>、<dfn data-lt="ingested" id="dfn-ingested" class="externalDFN"
                    data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-method-manifest/#ingest-payment-method-manifests">ingest
                        payment method manifest</a></dfn>、<dfn data-lt="parsed" id="dfn-parsed" class="externalDFN"
                    data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-method-manifest/#parsed-payment-method-manifest">parsed
                        payment method manifest</a></dfn>、および <dfn id="dfn-supported-origins" class="externalDFN"
                    data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-method-manifest/#parsed-payment-method-manifest-supported-origins">
                        supported origins</a></dfn> は、Payment Method Manifest 仕様
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-payment-method-manifest"
                        title="Payment Method Manifest">payment-method-manifest</a></cite>] によって定義されています。
            </dd>
            <dt>
                Service Workers
            </dt>
            <dd>
                用語 <dfn id="dfn-service-worker" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/service-workers/#service-worker-concept">service worker</a></dfn>、
                <dfn id="dfn-service-worker-registration" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">service worker registration</dfn>、
                <dfn id="dfn-service-worker-client" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/service-workers/#dfn-service-worker-client">service
                        worker client</a></dfn>、
                <code><dfn id="dom-serviceworkerregistration" data-idl="interface" data-title="ServiceWorkerRegistration" data-dfn-for="" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://www.w3.org/TR/service-workers/#service-worker-registration-concept">ServiceWorkerRegistration</a></dfn></code>、
                <code><dfn id="dom-serviceworkerglobalscope" data-idl="interface" data-title="ServiceWorkerGlobalScope" data-dfn-for="" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://www.w3.org/TR/service-workers/#serviceworkerglobalscope-interface">ServiceWorkerGlobalScope</a></dfn></code>、
                <dfn id="dfn-fire-functional-event" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/service-workers/#fire-functional-event-algorithm">fire
                        functional event</a></dfn>、<dfn id="dfn-extend-lifetime-promises" class="externalDFN"
                    data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/service-workers/#extendableevent-extend-lifetime-promises">extend
                        lifetime
                        promises</a></dfn>、<dfn id="dfn-pending-promises-count" class="externalDFN" data-no-export=""
                    data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/service-workers/#extendableevent-pending-promises-count">pending
                        promises
                        count</a></dfn>、<dfn id="dfn-containing-service-worker-registration" class="externalDFN"
                    data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/service-workers/#dfn-containing-service-worker-registration">containing
                        service worker registration</a></dfn>、
                <dfn id="dfn-try-clear-registration" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/service-workers/#try-clear-registration-algorithm">Try
                        Clear Registration</a></dfn>、<dfn id="dfn-try-activate" class="externalDFN" data-no-export=""
                    data-dfn-type="dfn"><a href="https://www.w3.org/TR/service-workers/#try-activate-algorithm">Try
                        Activate</a></dfn>、
                <dfn id="dfn-extendableevent" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/service-workers/#extendableevent-interface">ExtendableEvent</a></dfn>、
                <dfn id="dfn-extendableeventinit" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/service-workers/#dictdef-extendableeventinit">ExtendableEventInit</a></dfn>、
                および <dfn id="dfn-scope-url" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/service-workers/#dfn-scope-url">scope URL</a></dfn>
                は、
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-service-workers"
                        title="Service Workers Nightly">SERVICE-WORKERS</a></cite>] で定義されています。
            </dd>
        </dl>
    </section>
    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x12-conformance"><bdi class="secno">12. </bdi>準拠</h2><a class="self-link" href="#conformance"
                aria-label="Permalink for Section 12."></a>
        </div>
        <p>非規範（non-normative）と明記されたセクションに加え、本仕様に含まれるすべてのオーサリングガイドライン、図、例、および注記は非規範です。それ以外のすべては規範です。</p>
        <p>
            本文書におけるキーワード <em class="rfc2119">MAY</em>、<em class="rfc2119">MUST</em>、<em class="rfc2119">SHOULD</em>、
            および <em class="rfc2119">SHOULD NOT</em> は、
            <a href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119"
                    title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] および [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc8174"
                    title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
            に従って、ここに示すようにすべて大文字で記載されている場合に限り解釈されます。
        </p>
        <p>
            本仕様に準拠を主張できる製品クラスは 1 種類のみです：<dfn data-lt="user agents|user agent" id="dfn-user-agents" tabindex="0"
                aria-haspopup="dialog" data-dfn-type="dfn">ユーザーエージェント</dfn>。
        </p>
        <p>
            ユーザーエージェントは、本仕様で示されるアルゴリズムとは異なる方法でそれらを実装してもよい（<em
                class="rfc2119">MAY</em>）ですが、最終的な結果が仕様のアルゴリズムによって得られる結果と区別できないことが条件です。
        </p>
        <p>
            ユーザーエージェントは、サービス妨害攻撃の防止、メモリ枯渇の防止、プラットフォーム固有の制限への対処などのため、その他は無制限の入力に実装固有の制限を課してもよい（<em
                class="rfc2119">MAY</em>）。入力が実装固有の制限を超えた場合、ユーザーエージェントは
            <em class="rfc2119">MUST</em> 例外を投げるか、Promise の文脈では <a data-link-type="exception" data-lt="TypeError"
                href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a>
            で拒否し、特定の入力がどのように制限を超えたかを開発者に任意で知らせます。
        </p>
    </section>
    <section class="appendix" id="idl-index">
        <div class="header-wrapper">
            <h2 id="a-idl-index"><bdi class="secno">A. </bdi>IDL インデックス</h2><a class="self-link" href="#idl-index"
                aria-label="Permalink for Appendix A."></a>
        </div>
        <pre class="idl def" id="actual-idl-index"><span class="idlHeader"><a class="self-link" href="#actual-idl-index">WebIDL</a></span><code><span data-idl="" class="idlInterface" data-title="ServiceWorkerRegistration">partial interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-serviceworkerregistration"><code>ServiceWorkerRegistration</code></a> {<span data-idl="" class="idlAttribute" data-title="paymentManager" data-dfn-for="ServiceWorkerRegistration">
  [<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-paymentmanager" class="internalDFN" id="ref-for-dom-paymentmanager-5"><code>PaymentManager</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerregistration-paymentmanager" id="ref-for-dom-serviceworkerregistration-paymentmanager-2"><code>paymentManager</code></a>;</span>
};</span>

<span data-idl="" class="idlInterface" data-title="PaymentManager">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-paymentmanager" id="ref-for-dom-paymentmanager-6"><code>PaymentManager</code></a> {<span data-idl="" class="idlAttribute" data-title="userHint" data-dfn-for="PaymentManager">
  attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentmanager-userhint" id="ref-for-dom-paymentmanager-userhint-2"><code>userHint</code></a>;</span><span data-idl="" class="idlMethod" data-title="enableDelegations" data-dfn-for="PaymentManager"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentmanager-enabledelegations" id="ref-for-dom-paymentmanager-enabledelegations-2"><code>enableDelegations</code></a>(<span class="idlType"><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-paymentdelegation" class="internalDFN" id="ref-for-dom-paymentdelegation-4"><code>PaymentDelegation</code></a>&gt;</span> <span class="idlParamName">delegations</span>);</span>
};</span>

<span data-idl="" class="idlEnum" data-title="PaymentDelegation">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-paymentdelegation" id="ref-for-dom-paymentdelegation-5"><code>PaymentDelegation</code></a> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-paymentdelegation-shippingaddress" id="ref-for-dom-paymentdelegation-shippingaddress-2"><code>shippingAddress</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-paymentdelegation-payername" id="ref-for-dom-paymentdelegation-payername-2"><code>payerName</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-paymentdelegation-payerphone" id="ref-for-dom-paymentdelegation-payerphone-2"><code>payerPhone</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-paymentdelegation-payeremail" id="ref-for-dom-paymentdelegation-payeremail-2"><code>payerEmail</code></a>"</span>
};</span>

<span data-idl="" class="idlInterface" data-title="ServiceWorkerGlobalScope">partial interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-serviceworkerglobalscope"><code>ServiceWorkerGlobalScope</code></a> {<span data-idl="" class="idlAttribute" data-title="oncanmakepayment" data-dfn-for="ServiceWorkerGlobalScope">
  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerglobalscope-oncanmakepayment" id="ref-for-dom-serviceworkerglobalscope-oncanmakepayment-3"><code>oncanmakepayment</code></a>;</span>
};</span>

<span data-idl="" class="idlInterface" data-title="CanMakePaymentEvent">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-canmakepaymentevent" id="ref-for-dom-canmakepaymentevent-18"><code>CanMakePaymentEvent</code></a> : <span class="idlSuperclass"><a data-link-type="idl" href="https://www.w3.org/TR/service-workers/#extendableevent-interface">ExtendableEvent</a></span> {<span data-idl="" class="idlConstructor" data-title="constructor" data-dfn-for="CanMakePaymentEvent">
  <dfn data-export="" data-dfn-type="constructor" data-idl="constructor" data-title="constructor" data-dfn-for="CanMakePaymentEvent" data-lt="constructor()|constructor(type)" data-local-lt="CanMakePaymentEvent.constructor|CanMakePaymentEvent.constructor()|constructor"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>);</span><span data-idl="" class="idlMethod" data-title="respondWith" data-dfn-for="CanMakePaymentEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-canmakepaymentevent-respondwith" id="ref-for-dom-canmakepaymentevent-respondwith-4"><code>respondWith</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a>&gt;</span> <span class="idlParamName">canMakePaymentResponse</span>);</span>
};</span>

<span data-idl="" class="idlInterface" data-title="ServiceWorkerGlobalScope">partial interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-serviceworkerglobalscope"><code>ServiceWorkerGlobalScope</code></a> {<span data-idl="" class="idlAttribute" data-title="onpaymentrequest" data-dfn-for="ServiceWorkerGlobalScope">
  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerglobalscope-onpaymentrequest" id="ref-for-dom-serviceworkerglobalscope-onpaymentrequest-3"><code>onpaymentrequest</code></a>;</span>
};</span>

<span data-idl="" class="idlDictionary" data-title="PaymentRequestDetailsUpdate">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-paymentrequestdetailsupdate" id="ref-for-dom-paymentrequestdetailsupdate-7"><code>PaymentRequestDetailsUpdate</code></a> {<span data-idl="" class="idlMember" data-title="error" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-error" id="ref-for-dom-paymentrequestdetailsupdate-error-2"><code>error</code></a>;</span><span data-idl="" class="idlMember" data-title="total" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentcurrencyamount-dictionary">PaymentCurrencyAmount</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-total" id="ref-for-dom-paymentrequestdetailsupdate-total-2"><code>total</code></a>;</span><span data-idl="" class="idlMember" data-title="modifiers" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentdetailsmodifier-dictionary">PaymentDetailsModifier</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-modifiers" id="ref-for-dom-paymentrequestdetailsupdate-modifiers-2"><code>modifiers</code></a>;</span><span data-idl="" class="idlMember" data-title="shippingOptions" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentshippingoption">PaymentShippingOption</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-shippingoptions" id="ref-for-dom-paymentrequestdetailsupdate-shippingoptions-2"><code>shippingOptions</code></a>;</span><span data-idl="" class="idlMember" data-title="paymentMethodErrors" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-paymentmethoderrors" id="ref-for-dom-paymentrequestdetailsupdate-paymentmethoderrors-2"><code>paymentMethodErrors</code></a>;</span><span data-idl="" class="idlMember" data-title="shippingAddressErrors" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-addresserrors">AddressErrors</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-shippingaddresserrors" id="ref-for-dom-paymentrequestdetailsupdate-shippingaddresserrors-2"><code>shippingAddressErrors</code></a>;</span>
};</span>

<span data-idl="" class="idlInterface" data-title="PaymentRequestEvent">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-paymentrequestevent" id="ref-for-dom-paymentrequestevent-21"><code>PaymentRequestEvent</code></a> : <span class="idlSuperclass"><a data-link-type="idl" href="https://www.w3.org/TR/service-workers/#extendableevent-interface">ExtendableEvent</a></span> {<span data-idl="" class="idlConstructor" data-title="constructor" data-dfn-for="PaymentRequestEvent">
  <dfn data-export="" data-dfn-type="constructor" data-idl="constructor" data-title="constructor" data-dfn-for="PaymentRequestEvent" data-lt="constructor()|constructor(type)|constructor(type, eventInitDict)" data-local-lt="PaymentRequestEvent.constructor|PaymentRequestEvent.constructor()|constructor"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-paymentrequesteventinit" class="internalDFN" id="ref-for-dom-paymentrequesteventinit-3"><code>PaymentRequestEventInit</code></a></span> <span class="idlParamName">eventInitDict</span> = {});</span><span data-idl="" class="idlAttribute" data-title="topOrigin" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-toporigin" id="ref-for-dom-paymentrequestevent-toporigin-5"><code>topOrigin</code></a>;</span><span data-idl="" class="idlAttribute" data-title="paymentRequestOrigin" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-paymentrequestorigin" id="ref-for-dom-paymentrequestevent-paymentrequestorigin-3"><code>paymentRequestOrigin</code></a>;</span><span data-idl="" class="idlAttribute" data-title="paymentRequestId" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-paymentrequestid" id="ref-for-dom-paymentrequestevent-paymentrequestid-4"><code>paymentRequestId</code></a>;</span><span data-idl="" class="idlAttribute" data-title="methodData" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array">FrozenArray</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a>&gt;</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-methoddata" id="ref-for-dom-paymentrequestevent-methoddata-6"><code>methodData</code></a>;</span><span data-idl="" class="idlAttribute" data-title="total" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-total" id="ref-for-dom-paymentrequestevent-total-6"><code>total</code></a>;</span><span data-idl="" class="idlAttribute" data-title="modifiers" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array">FrozenArray</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentdetailsmodifier-dictionary">PaymentDetailsModifier</a>&gt;</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-modifiers" id="ref-for-dom-paymentrequestevent-modifiers-6"><code>modifiers</code></a>;</span><span data-idl="" class="idlAttribute" data-title="paymentOptions" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-paymentoptions" id="ref-for-dom-paymentrequestevent-paymentoptions-4"><code>paymentOptions</code></a>;</span><span data-idl="" class="idlAttribute" data-title="shippingOptions" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array">FrozenArray</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentshippingoption">PaymentShippingOption</a>&gt;?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-shippingoptions" id="ref-for-dom-paymentrequestevent-shippingoptions-4"><code>shippingOptions</code></a>;</span><span data-idl="" class="idlMethod" data-title="openWindow" data-dfn-for="PaymentRequestEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dfn-windowclient-0" class="internalDFN" id="ref-for-dfn-windowclient-0-2">WindowClient</a>?&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentrequestevent-openwindow" id="ref-for-dom-paymentrequestevent-openwindow-2"><code>openWindow</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <span class="idlParamName">url</span>);</span><span data-idl="" class="idlMethod" data-title="changePaymentMethod" data-dfn-for="PaymentRequestEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-paymentrequestdetailsupdate" class="internalDFN" id="ref-for-dom-paymentrequestdetailsupdate-8"><code>PaymentRequestDetailsUpdate</code></a>?&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentrequestevent-changepaymentmethod" id="ref-for-dom-paymentrequestevent-changepaymentmethod-2"><code>changePaymentMethod</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">methodName</span>, optional<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a>?</span> <span class="idlParamName">methodDetails</span> = null);</span><span data-idl="" class="idlMethod" data-title="changeShippingAddress" data-dfn-for="PaymentRequestEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-paymentrequestdetailsupdate" class="internalDFN" id="ref-for-dom-paymentrequestdetailsupdate-9"><code>PaymentRequestDetailsUpdate</code></a>?&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentrequestevent-changeshippingaddress" id="ref-for-dom-paymentrequestevent-changeshippingaddress-2"><code>changeShippingAddress</code></a>(optional<span class="idlType"> <a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-addressinit">AddressInit</a></span> <span class="idlParamName">shippingAddress</span> = {});</span><span data-idl="" class="idlMethod" data-title="changeShippingOption" data-dfn-for="PaymentRequestEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-paymentrequestdetailsupdate" class="internalDFN" id="ref-for-dom-paymentrequestdetailsupdate-10"><code>PaymentRequestDetailsUpdate</code></a>?&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentrequestevent-changeshippingoption" id="ref-for-dom-paymentrequestevent-changeshippingoption-2"><code>changeShippingOption</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">shippingOption</span>);</span><span data-idl="" class="idlMethod" data-title="respondWith" data-dfn-for="PaymentRequestEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentrequestevent-respondwith" id="ref-for-dom-paymentrequestevent-respondwith-3"><code>respondWith</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-paymenthandlerresponse" class="internalDFN" id="ref-for-dom-paymenthandlerresponse-8"><code>PaymentHandlerResponse</code></a>&gt;</span> <span class="idlParamName">handlerResponsePromise</span>);</span>
};</span>

<span data-idl="" class="idlDictionary" data-title="PaymentRequestEventInit">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-paymentrequesteventinit" id="ref-for-dom-paymentrequesteventinit-4"><code>PaymentRequestEventInit</code></a> : <span class="idlSuperclass"><a data-link-type="idl" href="https://www.w3.org/TR/service-workers/#dictdef-extendableeventinit">ExtendableEventInit</a></span> {<span data-idl="" class="idlMember" data-title="topOrigin" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-toporigin" id="ref-for-dom-paymentrequesteventinit-toporigin-2"><code>topOrigin</code></a>;</span><span data-idl="" class="idlMember" data-title="paymentRequestOrigin" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-paymentrequestorigin" id="ref-for-dom-paymentrequesteventinit-paymentrequestorigin-2"><code>paymentRequestOrigin</code></a>;</span><span data-idl="" class="idlMember" data-title="paymentRequestId" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-paymentrequestid" id="ref-for-dom-paymentrequesteventinit-paymentrequestid-2"><code>paymentRequestId</code></a>;</span><span data-idl="" class="idlMember" data-title="methodData" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-methoddata" id="ref-for-dom-paymentrequesteventinit-methoddata-2"><code>methodData</code></a>;</span><span data-idl="" class="idlMember" data-title="total" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentcurrencyamount-dictionary">PaymentCurrencyAmount</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-total" id="ref-for-dom-paymentrequesteventinit-total-2"><code>total</code></a>;</span><span data-idl="" class="idlMember" data-title="modifiers" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentdetailsmodifier-dictionary">PaymentDetailsModifier</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-modifiers" id="ref-for-dom-paymentrequesteventinit-modifiers-2"><code>modifiers</code></a>;</span><span data-idl="" class="idlMember" data-title="paymentOptions" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="idl" href="#dom-paymentrequestevent-paymentoptions" class="internalDFN" id="ref-for-dom-paymentrequestevent-paymentoptions-5">PaymentOptions</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-paymentoptions" id="ref-for-dom-paymentrequesteventinit-paymentoptions-2"><code>paymentOptions</code></a>;</span><span data-idl="" class="idlMember" data-title="shippingOptions" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentshippingoption">PaymentShippingOption</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-shippingoptions" id="ref-for-dom-paymentrequesteventinit-shippingoptions-2"><code>shippingOptions</code></a>;</span>
};</span>

<span data-idl="" class="idlDictionary" data-title="PaymentHandlerResponse">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-paymenthandlerresponse" id="ref-for-dom-paymenthandlerresponse-9"><code>PaymentHandlerResponse</code></a> {<span data-idl="" class="idlMember" data-title="methodName" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-methodname" id="ref-for-dom-paymenthandlerresponse-methodname-3"><code>methodName</code></a>;</span><span data-idl="" class="idlMember" data-title="details" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-details" id="ref-for-dom-paymenthandlerresponse-details-3"><code>details</code></a>;</span><span data-idl="" class="idlMember" data-title="payerName" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-payername" id="ref-for-dom-paymenthandlerresponse-payername-3"><code>payerName</code></a>;</span><span data-idl="" class="idlMember" data-title="payerEmail" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-payeremail" id="ref-for-dom-paymenthandlerresponse-payeremail-3"><code>payerEmail</code></a>;</span><span data-idl="" class="idlMember" data-title="payerPhone" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-payerphone" id="ref-for-dom-paymenthandlerresponse-payerphone-3"><code>payerPhone</code></a>;</span><span data-idl="" class="idlMember" data-title="shippingAddress" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-addressinit">AddressInit</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-shippingaddress" id="ref-for-dom-paymenthandlerresponse-shippingaddress-3"><code>shippingAddress</code></a>;</span><span data-idl="" class="idlMember" data-title="shippingOption" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-shippingoption" id="ref-for-dom-paymenthandlerresponse-shippingoption-3"><code>shippingOption</code></a>;</span>
};</span></code></pre>
    </section>


    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="b-references"><bdi class="secno">B. </bdi>参考文献</h2><a class="self-link" href="#references"
                aria-label="Permalink for Appendix B."></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="b-1-normative-references"><bdi class="secno">B.1 </bdi>規範的参照</h3><a class="self-link"
                    href="#normative-references" aria-label="Permalink for Appendix B.1"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-dom">[dom]</dt>
                <dd>
                    <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Anne van Kesteren. WHATWG.
                    Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-ecmascript">[ECMASCRIPT]</dt>
                <dd>
                    <a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript Language Specification</cite></a>.
                    Ecma International. URL: <a
                        href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
                </dd>
                <dt id="bib-html">[HTML]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren;
                    Domenic Denicola; Dominic Farolino; Ian Hickson; Philip Jägenstedt; Simon Pieters. WHATWG. Living
                    Standard. URL: <a
                        href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-payment-method-id">[payment-method-id]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/payment-method-id/"><cite>Payment Method Identifiers</cite></a>.
                    Marcos Caceres. W3C. 8 September 2022. W3C Recommendation. URL: <a
                        href="https://www.w3.org/TR/payment-method-id/">https://www.w3.org/TR/payment-method-id/</a>
                </dd>
                <dt id="bib-payment-method-manifest">[payment-method-manifest]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/payment-method-manifest/"><cite>Payment Method Manifest</cite></a>.
                    Dapeng(Max) Liu; Domenic Denicola; Zach Koch. W3C. 12 December 2017. FPWD. URL: <a
                        href="https://www.w3.org/TR/payment-method-manifest/">https://www.w3.org/TR/payment-method-manifest/</a>
                </dd>
                <dt id="bib-payment-request">[payment-request]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/payment-request/"><cite>Payment Request API</cite></a>. Marcos
                    Caceres; Ian Jacobs; Stephen McGruer. W3C. 27 January 2026. CRD. URL: <a
                        href="https://www.w3.org/TR/payment-request/">https://www.w3.org/TR/payment-request/</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate
                            Requirement Levels</cite></a>. S. Bradner. IETF. March 1997. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
                </dd>
                <dt id="bib-rfc8174">[RFC8174]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC
                            2119 Key Words</cite></a>. B. Leiba. IETF. May 2017. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
                </dd>
                <dt id="bib-service-workers">[SERVICE-WORKERS]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/service-workers/"><cite>Service Workers Nightly</cite></a>. Monica
                    CHINTALA; Yoshisato Yanagisawa. W3C. 26 January 2026. CRD. URL: <a
                        href="https://www.w3.org/TR/service-workers/">https://www.w3.org/TR/service-workers/</a>
                </dd>
                <dt id="bib-url">[URL]</dt>
                <dd>
                    <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Anne van Kesteren. WHATWG.
                    Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-webidl">[WEBIDL]</dt>
                <dd>
                    <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Edgar Chen; Timothy Gu.
                    WHATWG. Living Standard. URL: <a
                        href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
        <section id="informative-references">
            <div class="header-wrapper">
                <h3 id="b-2-informative-references"><bdi class="secno">B.2 </bdi>参考文献</h3><a class="self-link"
                    href="#informative-references" aria-label="Permalink for Appendix B.2"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-webcryptoapi">[WebCryptoAPI]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/WebCryptoAPI/"><cite>Web Cryptography API</cite></a>. Mark Watson.
                    W3C. 26 January 2017. W3C Recommendation. URL: <a
                        href="https://www.w3.org/TR/WebCryptoAPI/">https://www.w3.org/TR/WebCryptoAPI/</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="先頭へ戻る">↑</abbr></a>
    </p>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-payee"
        aria-label="Links in this document to definition: payee">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-payee"
                aria-label="Permalink for definition: payee. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-payee-1" title="§ 2. Overview">§ 2. Overview</a>
            </li>
            <li>
                <a href="#ref-for-dfn-payee-2" title="§ 6.3.1 topOrigin attribute">§ 6.3.1 topOrigin attribute</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-payer"
        aria-label="Links in this document to definition: payer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-payer"
                aria-label="Permalink for definition: payer. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-payer-1" title="§ 2. Overview">§ 2. Overview</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-payment-handler"
        aria-label="Links in this document to definition: payment handler">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-payment-handler"
                aria-label="Permalink for definition: payment handler. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-payment-handler-1" title="§ 1. Introduction">§ 1. Introduction</a>
            </li>
            <li>
                <a href="#ref-for-dfn-payment-handler-2" title="§ 2. Overview">§ 2. Overview</a> <a
                    href="#ref-for-dfn-payment-handler-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-payment-handler-4" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-payment-handler-5" title="§ 4.2 PaymentManager interface">§ 4.2 PaymentManager
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-payment-handler-6" title="§ 4.2.2 enableDelegations() method">§ 4.2.2
                    enableDelegations() method</a>
            </li>
            <li>
                <a href="#ref-for-dfn-payment-handler-7" title="§ 5. Can make payment">§ 5. Can make payment</a>
            </li>
            <li>
                <a href="#ref-for-dfn-payment-handler-8" title="§ 6.5 Handling a PaymentRequestEvent">§ 6.5 Handling a
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dfn-payment-handler-9" title="§ 7. Windows">§ 7. Windows</a> <a
                    href="#ref-for-dfn-payment-handler-10" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-serviceworkerregistration-paymentmanager"
        aria-label="Links in this document to definition: paymentManager">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-serviceworkerregistration-paymentmanager"
                aria-label="Permalink for definition: paymentManager. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1742672635">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-serviceworkerregistration-paymentmanager-1"
                    title="§ 4.1 Extension to the ServiceWorkerRegistration interface">§ 4.1 Extension to the
                    ServiceWorkerRegistration interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-serviceworkerregistration-paymentmanager-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymentmanager"
        aria-label="Links in this document to definition: PaymentManager">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentmanager"
                aria-label="Permalink for definition: PaymentManager. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1708874582">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentmanager-1" title="§ 1. Introduction">§ 1. Introduction</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentmanager-2"
                    title="§ 4.1 Extension to the ServiceWorkerRegistration interface">§ 4.1 Extension to the
                    ServiceWorkerRegistration interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentmanager-3" title="§ 4.2 PaymentManager interface">§ 4.2 PaymentManager
                    interface</a> <a href="#ref-for-dom-paymentmanager-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentmanager-5" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-paymentmanager-6" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymentmanager-userhint"
        aria-label="Links in this document to definition: userHint">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentmanager-userhint"
                aria-label="Permalink for definition: userHint. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1708874582">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentmanager-userhint-1" title="§ 4.2 PaymentManager interface">§ 4.2
                    PaymentManager interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentmanager-userhint-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentmanager-enabledelegations"
        aria-label="Links in this document to definition: enableDelegations()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentmanager-enabledelegations"
                aria-label="Permalink for definition: enableDelegations(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1708874582">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentmanager-enabledelegations-1" title="§ 4.2 PaymentManager interface">§ 4.2
                    PaymentManager interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentmanager-enabledelegations-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymentdelegation"
        aria-label="Links in this document to definition: PaymentDelegation">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentdelegation"
                aria-label="Permalink for definition: PaymentDelegation. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015767474">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentdelegation-1" title="§ 4.2 PaymentManager interface">§ 4.2 PaymentManager
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentdelegation-2" title="§ 4.2.2 enableDelegations() method">§ 4.2.2
                    enableDelegations() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentdelegation-3" title="§ 4.3 PaymentDelegation enum">§ 4.3 PaymentDelegation
                    enum</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentdelegation-4" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-paymentdelegation-5" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentdelegation-shippingaddress"
        aria-label="Links in this document to definition: shippingAddress">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentdelegation-shippingaddress"
                aria-label="Permalink for definition: shippingAddress. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015767474">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentdelegation-shippingaddress-1" title="§ 4.3 PaymentDelegation enum">§ 4.3
                    PaymentDelegation enum</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentdelegation-shippingaddress-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymentdelegation-payername"
        aria-label="Links in this document to definition: payerName">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentdelegation-payername"
                aria-label="Permalink for definition: payerName. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015767474">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentdelegation-payername-1" title="§ 4.3 PaymentDelegation enum">§ 4.3
                    PaymentDelegation enum</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentdelegation-payername-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymentdelegation-payerphone"
        aria-label="Links in this document to definition: payerPhone">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentdelegation-payerphone"
                aria-label="Permalink for definition: payerPhone. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015767474">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentdelegation-payerphone-1" title="§ 4.3 PaymentDelegation enum">§ 4.3
                    PaymentDelegation enum</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentdelegation-payerphone-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymentdelegation-payeremail"
        aria-label="Links in this document to definition: payerEmail">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentdelegation-payeremail"
                aria-label="Permalink for definition: payerEmail. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015767474">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentdelegation-payeremail-1" title="§ 4.3 PaymentDelegation enum">§ 4.3
                    PaymentDelegation enum</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentdelegation-payeremail-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-serviceworkerglobalscope-oncanmakepayment"
        aria-label="Links in this document to definition: oncanmakepayment">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-serviceworkerglobalscope-oncanmakepayment"
                aria-label="Permalink for definition: oncanmakepayment. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1445944587">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-serviceworkerglobalscope-oncanmakepayment-1"
                    title="§ 5.1 Extension to ServiceWorkerGlobalScope">§ 5.1 Extension to ServiceWorkerGlobalScope</a>
            </li>
            <li>
                <a href="#ref-for-dom-serviceworkerglobalscope-oncanmakepayment-2"
                    title="§ 5.1.1 oncanmakepayment attribute">§ 5.1.1 oncanmakepayment attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-serviceworkerglobalscope-oncanmakepayment-3" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-canmakepaymentevent"
        aria-label="Links in this document to definition: CanMakePaymentEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-canmakepaymentevent"
                aria-label="Permalink for definition: CanMakePaymentEvent. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-238602632">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-1" title="§ 5. Can make payment">§ 5. Can make payment</a> <a
                    href="#ref-for-dom-canmakepaymentevent-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-3" title="§ 5.2 The CanMakePaymentEvent">§ 5.2 The
                    CanMakePaymentEvent</a> <a href="#ref-for-dom-canmakepaymentevent-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-5" title="§ 5.3 Handling a CanMakePaymentEvent">§ 5.3 Handling
                    a CanMakePaymentEvent</a> <a href="#ref-for-dom-canmakepaymentevent-6" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-7" title="§ 5.4 Example of handling the CanMakePaymentEvent">§
                    5.4 Example of handling the CanMakePaymentEvent</a> <a href="#ref-for-dom-canmakepaymentevent-8"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-canmakepaymentevent-9" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-10" title="§ 5.5 Filtering of Payment Handlers">§ 5.5
                    Filtering of Payment Handlers</a> <a href="#ref-for-dom-canmakepaymentevent-11"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-12" title="§ 9.2 Information about the User Environment">§ 9.2
                    Information about the User Environment</a> <a href="#ref-for-dom-canmakepaymentevent-13"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-canmakepaymentevent-14"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-canmakepaymentevent-15"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-canmakepaymentevent-16"
                    title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-17" title="§ 9.10 Private Browsing Mode">§ 9.10 Private
                    Browsing Mode</a>
            </li>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-18" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-canmakepaymentevent-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-canmakepaymentevent-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-canmakepaymentevent-respondwith"
        aria-label="Links in this document to definition: respondWith()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-canmakepaymentevent-respondwith"
                aria-label="Permalink for definition: respondWith(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-238602632">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-respondwith-1" title="§ 5. Can make payment">§ 5. Can make
                    payment</a>
            </li>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-respondwith-2" title="§ 5.2 The CanMakePaymentEvent">§ 5.2 The
                    CanMakePaymentEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-respondwith-3" title="§ 9.10 Private Browsing Mode">§ 9.10
                    Private Browsing Mode</a>
            </li>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-respondwith-4" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-handling-a-canmakepaymentevent"
        aria-label="Links in this document to definition: Handling a CanMakePaymentEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-handling-a-canmakepaymentevent"
                aria-label="Permalink for definition: Handling a CanMakePaymentEvent. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-handling-a-canmakepaymentevent-1" title="§ 9.7 Authorized Payment Apps">§ 9.7
                    Authorized Payment Apps</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-serviceworkerglobalscope-onpaymentrequest"
        aria-label="Links in this document to definition: onpaymentrequest">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-serviceworkerglobalscope-onpaymentrequest"
                aria-label="Permalink for definition: onpaymentrequest. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1119623754">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-serviceworkerglobalscope-onpaymentrequest-1"
                    title="§ 6.1 Extension to ServiceWorkerGlobalScope">§ 6.1 Extension to ServiceWorkerGlobalScope</a>
            </li>
            <li>
                <a href="#ref-for-dom-serviceworkerglobalscope-onpaymentrequest-2"
                    title="§ 6.1.1 onpaymentrequest attribute">§ 6.1.1 onpaymentrequest attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-serviceworkerglobalscope-onpaymentrequest-3" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymentrequestdetailsupdate"
        aria-label="Links in this document to definition: PaymentRequestDetailsUpdate">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestdetailsupdate"
                aria-label="Permalink for definition: PaymentRequestDetailsUpdate. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2024425618">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-1" title="§ 6.2 The PaymentRequestDetailsUpdate">§ 6.2
                    The PaymentRequestDetailsUpdate</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-2" title="§ 6.3 The PaymentRequestEvent">§ 6.3 The
                    PaymentRequestEvent</a> <a href="#ref-for-dom-paymentrequestdetailsupdate-3"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-paymentrequestdetailsupdate-4"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-5" title="§ 8.2 Change Payment Method Algorithm">§ 8.2
                    Change Payment Method Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-6" title="§ 8.3 Change Payment Details Algorithm">§
                    8.3 Change Payment Details Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-7" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-paymentrequestdetailsupdate-8" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-paymentrequestdetailsupdate-9" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-paymentrequestdetailsupdate-10" title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestdetailsupdate-error"
        aria-label="Links in this document to definition: error">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestdetailsupdate-error"
                aria-label="Permalink for definition: error. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2024425618">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-error-1"
                    title="§ 6.2 The PaymentRequestDetailsUpdate">§ 6.2 The PaymentRequestDetailsUpdate</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-error-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestdetailsupdate-total"
        aria-label="Links in this document to definition: total">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestdetailsupdate-total"
                aria-label="Permalink for definition: total. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2024425618">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-total-1"
                    title="§ 6.2 The PaymentRequestDetailsUpdate">§ 6.2 The PaymentRequestDetailsUpdate</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-total-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestdetailsupdate-modifiers"
        aria-label="Links in this document to definition: modifiers">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestdetailsupdate-modifiers"
                aria-label="Permalink for definition: modifiers. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2024425618">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-modifiers-1"
                    title="§ 6.2 The PaymentRequestDetailsUpdate">§ 6.2 The PaymentRequestDetailsUpdate</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-modifiers-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestdetailsupdate-shippingoptions"
        aria-label="Links in this document to definition: shippingOptions">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestdetailsupdate-shippingoptions"
                aria-label="Permalink for definition: shippingOptions. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2024425618">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-shippingoptions-1"
                    title="§ 6.2 The PaymentRequestDetailsUpdate">§ 6.2 The PaymentRequestDetailsUpdate</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-shippingoptions-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestdetailsupdate-paymentmethoderrors"
        aria-label="Links in this document to definition: paymentMethodErrors">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestdetailsupdate-paymentmethoderrors"
                aria-label="Permalink for definition: paymentMethodErrors. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2024425618">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-paymentmethoderrors-1"
                    title="§ 6.2 The PaymentRequestDetailsUpdate">§ 6.2 The PaymentRequestDetailsUpdate</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-paymentmethoderrors-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestdetailsupdate-shippingaddresserrors"
        aria-label="Links in this document to definition: shippingAddressErrors">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestdetailsupdate-shippingaddresserrors"
                aria-label="Permalink for definition: shippingAddressErrors. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2024425618">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-shippingaddresserrors-1"
                    title="§ 6.2 The PaymentRequestDetailsUpdate">§ 6.2 The PaymentRequestDetailsUpdate</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-shippingaddresserrors-2" title="§ A. IDL Index">§ A.
                    IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymentrequestevent"
        aria-label="Links in this document to definition: PaymentRequestEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent"
                aria-label="Permalink for definition: PaymentRequestEvent. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-1" title="§ 1. Introduction">§ 1. Introduction</a> <a
                    href="#ref-for-dom-paymentrequestevent-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-paymentrequestevent-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-4" title="§ 2. Overview">§ 2. Overview</a> <a
                    href="#ref-for-dom-paymentrequestevent-5" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-6" title="§ 2.1 Handling a Payment Request">§ 2.1 Handling a
                    Payment Request</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-7" title="§ 6. Invocation">§ 6. Invocation</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-8" title="§ 6.1.1 onpaymentrequest attribute">§ 6.1.1
                    onpaymentrequest attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-9" title="§ 6.3 The PaymentRequestEvent">§ 6.3 The
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-10" title="§ 6.3.3 paymentRequestId attribute">§ 6.3.3
                    paymentRequestId attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-11" title="§ 6.3.14 PaymentRequestEventInit dictionary">§
                    6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-12" title="§ 6.4 Internal Slots">§ 6.4 Internal Slots</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-13" title="§ 6.5 Handling a PaymentRequestEvent">§ 6.5
                    Handling a PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-14" title="§ 7. Windows">§ 7. Windows</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-15" title="§ 7.1 Open Window Algorithm">§ 7.1 Open Window
                    Algorithm</a> <a href="#ref-for-dom-paymentrequestevent-16" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-17"
                    title="§ 7.2 Example of handling the PaymentRequestEvent">§ 7.2 Example of handling the
                    PaymentRequestEvent</a> <a href="#ref-for-dom-paymentrequestevent-18" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-paymentrequestevent-19" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-20" title="§ 8.1.2 details attribute">§ 8.1.2 details
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-21" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-toporigin"
        aria-label="Links in this document to definition: topOrigin">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-toporigin"
                aria-label="Permalink for definition: topOrigin. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-toporigin-1" title="§ 6.3 The PaymentRequestEvent">§ 6.3 The
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-toporigin-2" title="§ 6.3.2 paymentRequestOrigin attribute">§
                    6.3.2 paymentRequestOrigin attribute</a> <a href="#ref-for-dom-paymentrequestevent-toporigin-3"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-toporigin-4" title="§ 6.5 Handling a PaymentRequestEvent">§
                    6.5 Handling a PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-toporigin-5" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-paymentrequestorigin"
        aria-label="Links in this document to definition: paymentRequestOrigin">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-paymentrequestorigin"
                aria-label="Permalink for definition: paymentRequestOrigin. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentrequestorigin-1"
                    title="§ 6.3 The PaymentRequestEvent">§ 6.3 The PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentrequestorigin-2"
                    title="§ 6.5 Handling a PaymentRequestEvent">§ 6.5 Handling a PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentrequestorigin-3" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-paymentrequestid"
        aria-label="Links in this document to definition: paymentRequestId">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-paymentrequestid"
                aria-label="Permalink for definition: paymentRequestId. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentrequestid-1" title="§ 6.3 The PaymentRequestEvent">§
                    6.3 The PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentrequestid-2"
                    title="§ 6.3.3 paymentRequestId attribute">§ 6.3.3 paymentRequestId attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentrequestid-3"
                    title="§ 6.5 Handling a PaymentRequestEvent">§ 6.5 Handling a PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentrequestid-4" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-methoddata"
        aria-label="Links in this document to definition: methodData">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-methoddata"
                aria-label="Permalink for definition: methodData. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-methoddata-1" title="§ 6.3 The PaymentRequestEvent">§ 6.3 The
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-methoddata-2"
                    title="§ 6.3.15 MethodData Population Algorithm">§ 6.3.15 MethodData Population Algorithm</a> <a
                    href="#ref-for-dom-paymentrequestevent-methoddata-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-methoddata-4" title="§ 6.5 Handling a PaymentRequestEvent">§
                    6.5 Handling a PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-methoddata-5"
                    title="§ 8.4 Respond to PaymentRequest Algorithm">§ 8.4 Respond to PaymentRequest Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-methoddata-6" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymentrequestevent-total"
        aria-label="Links in this document to definition: total">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-total"
                aria-label="Permalink for definition: total. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-total-1" title="§ 6.3 The PaymentRequestEvent">§ 6.3 The
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-total-2" title="§ 6.3.5 total attribute">§ 6.3.5 total
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-total-3" title="§ 6.3.16 Modifiers Population Algorithm">§
                    6.3.16 Modifiers Population Algorithm</a> <a href="#ref-for-dom-paymentrequestevent-total-4"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-total-5" title="§ 6.5 Handling a PaymentRequestEvent">§ 6.5
                    Handling a PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-total-6" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-modifiers"
        aria-label="Links in this document to definition: modifiers">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-modifiers"
                aria-label="Permalink for definition: modifiers. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-modifiers-1" title="§ 6.3 The PaymentRequestEvent">§ 6.3 The
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-modifiers-2" title="§ 6.3.16 Modifiers Population Algorithm">§
                    6.3.16 Modifiers Population Algorithm</a> <a href="#ref-for-dom-paymentrequestevent-modifiers-3"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-paymentrequestevent-modifiers-4"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-modifiers-5" title="§ 6.5 Handling a PaymentRequestEvent">§
                    6.5 Handling a PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-modifiers-6" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-paymentoptions"
        aria-label="Links in this document to definition: paymentOptions">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-paymentoptions"
                aria-label="Permalink for definition: paymentOptions. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentoptions-1" title="§ 6.3 The PaymentRequestEvent">§ 6.3
                    The PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentoptions-2"
                    title="§ 6.3.14 PaymentRequestEventInit dictionary">§ 6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentoptions-3"
                    title="§ 6.5 Handling a PaymentRequestEvent">§ 6.5 Handling a PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentoptions-4" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-paymentrequestevent-paymentoptions-5" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-shippingoptions"
        aria-label="Links in this document to definition: shippingOptions">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-shippingoptions"
                aria-label="Permalink for definition: shippingOptions. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-shippingoptions-1" title="§ 6.3 The PaymentRequestEvent">§ 6.3
                    The PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-shippingoptions-2"
                    title="§ 6.5 Handling a PaymentRequestEvent">§ 6.5 Handling a PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-shippingoptions-3"
                    title="§ 8.4 Respond to PaymentRequest Algorithm">§ 8.4 Respond to PaymentRequest Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-shippingoptions-4" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-openwindow"
        aria-label="Links in this document to definition: openWindow()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-openwindow"
                aria-label="Permalink for definition: openWindow(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-openwindow-1" title="§ 6.3 The PaymentRequestEvent">§ 6.3 The
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-openwindow-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-changepaymentmethod"
        aria-label="Links in this document to definition: changePaymentMethod()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-changepaymentmethod"
                aria-label="Permalink for definition: changePaymentMethod(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-changepaymentmethod-1" title="§ 6.3 The PaymentRequestEvent">§
                    6.3 The PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-changepaymentmethod-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-changeshippingaddress"
        aria-label="Links in this document to definition: changeShippingAddress()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-changeshippingaddress"
                aria-label="Permalink for definition: changeShippingAddress(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-changeshippingaddress-1"
                    title="§ 6.3 The PaymentRequestEvent">§ 6.3 The PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-changeshippingaddress-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-changeshippingoption"
        aria-label="Links in this document to definition: changeShippingOption()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-changeshippingoption"
                aria-label="Permalink for definition: changeShippingOption(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-changeshippingoption-1"
                    title="§ 6.3 The PaymentRequestEvent">§ 6.3 The PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-changeshippingoption-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-respondwith"
        aria-label="Links in this document to definition: respondWith()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-respondwith"
                aria-label="Permalink for definition: respondWith(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-respondwith-1" title="§ 6.3 The PaymentRequestEvent">§ 6.3 The
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-respondwith-2" title="§ 8.1.2 details attribute">§ 8.1.2
                    details attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-respondwith-3" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymentrequesteventinit"
        aria-label="Links in this document to definition: PaymentRequestEventInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequesteventinit"
                aria-label="Permalink for definition: PaymentRequestEventInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-488183213">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-1" title="§ 6.3 The PaymentRequestEvent">§ 6.3 The
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-2" title="§ 6.3.14 PaymentRequestEventInit dictionary">§
                    6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-3" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-paymentrequesteventinit-4" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequesteventinit-toporigin"
        aria-label="Links in this document to definition: topOrigin">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequesteventinit-toporigin"
                aria-label="Permalink for definition: topOrigin. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-488183213">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-toporigin-1"
                    title="§ 6.3.14 PaymentRequestEventInit dictionary">§ 6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-toporigin-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequesteventinit-paymentrequestorigin"
        aria-label="Links in this document to definition: paymentRequestOrigin">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequesteventinit-paymentrequestorigin"
                aria-label="Permalink for definition: paymentRequestOrigin. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-488183213">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-paymentrequestorigin-1"
                    title="§ 6.3.14 PaymentRequestEventInit dictionary">§ 6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-paymentrequestorigin-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequesteventinit-paymentrequestid"
        aria-label="Links in this document to definition: paymentRequestId">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequesteventinit-paymentrequestid"
                aria-label="Permalink for definition: paymentRequestId. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-488183213">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-paymentrequestid-1"
                    title="§ 6.3.14 PaymentRequestEventInit dictionary">§ 6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-paymentrequestid-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequesteventinit-methoddata"
        aria-label="Links in this document to definition: methodData">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequesteventinit-methoddata"
                aria-label="Permalink for definition: methodData. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-488183213">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-methoddata-1"
                    title="§ 6.3.14 PaymentRequestEventInit dictionary">§ 6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-methoddata-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequesteventinit-total" aria-label="Links in this document to definition: total">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequesteventinit-total"
                aria-label="Permalink for definition: total. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-488183213">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-total-1"
                    title="§ 6.3.14 PaymentRequestEventInit dictionary">§ 6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-total-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequesteventinit-modifiers"
        aria-label="Links in this document to definition: modifiers">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequesteventinit-modifiers"
                aria-label="Permalink for definition: modifiers. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-488183213">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-modifiers-1"
                    title="§ 6.3.14 PaymentRequestEventInit dictionary">§ 6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-modifiers-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequesteventinit-paymentoptions"
        aria-label="Links in this document to definition: paymentOptions">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequesteventinit-paymentoptions"
                aria-label="Permalink for definition: paymentOptions. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-488183213">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-paymentoptions-1"
                    title="§ 6.3.14 PaymentRequestEventInit dictionary">§ 6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-paymentoptions-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequesteventinit-shippingoptions"
        aria-label="Links in this document to definition: shippingOptions">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequesteventinit-shippingoptions"
                aria-label="Permalink for definition: shippingOptions. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-488183213">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-shippingoptions-1"
                    title="§ 6.3.14 PaymentRequestEventInit dictionary">§ 6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-shippingoptions-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-methoddata-population-algorithm"
        aria-label="Links in this document to definition: MethodData Population Algorithm">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-methoddata-population-algorithm"
                aria-label="Permalink for definition: MethodData Population Algorithm. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-methoddata-population-algorithm-1" title="§ 6.3.4 methodData attribute">§ 6.3.4
                    methodData attribute</a>
            </li>
            <li>
                <a href="#ref-for-dfn-methoddata-population-algorithm-2" title="§ 6.5 Handling a PaymentRequestEvent">§
                    6.5 Handling a PaymentRequestEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-modifiers-population-algorithm"
        aria-label="Links in this document to definition: Modifiers Population Algorithm">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-modifiers-population-algorithm"
                aria-label="Permalink for definition: Modifiers Population Algorithm. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-modifiers-population-algorithm-1" title="§ 6.3.6 modifiers attribute">§ 6.3.6
                    modifiers attribute</a>
            </li>
            <li>
                <a href="#ref-for-dfn-modifiers-population-algorithm-2" title="§ 6.5 Handling a PaymentRequestEvent">§
                    6.5 Handling a PaymentRequestEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-windowclient"
        aria-label="Links in this document to definition: [[windowClient]]">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-windowclient"
                aria-label="Permalink for definition: [[windowClient]]. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-windowclient-1" title="§ 7.1 Open Window Algorithm">§ 7.1 Open Window
                    Algorithm</a> <a href="#ref-for-dfn-windowclient-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-windowclient-3" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-windowclient-0"
        aria-label="Links in this document to definition: WindowClient">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-windowclient-0"
                aria-label="Permalink for definition: WindowClient. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-windowclient-0-1" title="§ 6.3 The PaymentRequestEvent">§ 6.3 The
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dfn-windowclient-0-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-respondwithcalled"
        aria-label="Links in this document to definition: [[respondWithCalled]]">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-respondwithcalled"
                aria-label="Permalink for definition: [[respondWithCalled]]. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-respondwithcalled-1" title="§ 8.4 Respond to PaymentRequest Algorithm">§ 8.4
                    Respond to PaymentRequest Algorithm</a> <a href="#ref-for-dfn-respondwithcalled-2"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-handling-a-paymentrequestevent"
        aria-label="Links in this document to definition: Handling a PaymentRequestEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-handling-a-paymentrequestevent"
                aria-label="Permalink for definition: Handling a PaymentRequestEvent. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-handling-a-paymentrequestevent-1" title="§ 6.3.1 topOrigin attribute">§ 6.3.1
                    topOrigin attribute</a>
            </li>
            <li>
                <a href="#ref-for-dfn-handling-a-paymentrequestevent-2" title="§ 6.3.2 paymentRequestOrigin attribute">§
                    6.3.2 paymentRequestOrigin attribute</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-payment-handler-window"
        aria-label="Links in this document to definition: Windows">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-payment-handler-window"
                aria-label="Permalink for definition: Windows. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-payment-handler-window-1"
                    title="§ 7.2 Example of handling the PaymentRequestEvent">§ 7.2 Example of handling the
                    PaymentRequestEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-open-window-algorithm"
        aria-label="Links in this document to definition: Open Window Algorithm">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-open-window-algorithm"
                aria-label="Permalink for definition: Open Window Algorithm. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-open-window-algorithm-1" title="§ 6.3.9 openWindow() method">§ 6.3.9 openWindow()
                    method</a>
            </li>
            <li>
                <a href="#ref-for-dfn-open-window-algorithm-2" title="§ 7.1 Open Window Algorithm">§ 7.1 Open Window
                    Algorithm</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymenthandlerresponse"
        aria-label="Links in this document to definition: PaymentHandlerResponse">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymenthandlerresponse"
                aria-label="Permalink for definition: PaymentHandlerResponse. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-822477832">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-1" title="§ 6. Invocation">§ 6. Invocation</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-2" title="§ 6.3 The PaymentRequestEvent">§ 6.3 The
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-3" title="§ 6.3.13 respondWith() method">§ 6.3.13
                    respondWith() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-4" title="§ 6.5 Handling a PaymentRequestEvent">§ 6.5
                    Handling a PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-5" title="§ 8.1 PaymentHandlerResponse dictionary">§ 8.1
                    PaymentHandlerResponse dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-6" title="§ 8.1.2 details attribute">§ 8.1.2 details
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-7" title="§ 8.4 Respond to PaymentRequest Algorithm">§ 8.4
                    Respond to PaymentRequest Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-8" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-paymenthandlerresponse-9" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymenthandlerresponse-methodname"
        aria-label="Links in this document to definition: methodName">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymenthandlerresponse-methodname"
                aria-label="Permalink for definition: methodName. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-822477832">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-methodname-1"
                    title="§ 8.1 PaymentHandlerResponse dictionary">§ 8.1 PaymentHandlerResponse dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-methodname-2"
                    title="§ 8.4 Respond to PaymentRequest Algorithm">§ 8.4 Respond to PaymentRequest Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-methodname-3" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymenthandlerresponse-details"
        aria-label="Links in this document to definition: details">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymenthandlerresponse-details"
                aria-label="Permalink for definition: details. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-822477832">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-details-1"
                    title="§ 8.1 PaymentHandlerResponse dictionary">§ 8.1 PaymentHandlerResponse dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-details-2"
                    title="§ 8.4 Respond to PaymentRequest Algorithm">§ 8.4 Respond to PaymentRequest Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-details-3" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-payment-app-failure-algorithm"
        aria-label="Links in this document to definition: payment app failure algorithm">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-payment-app-failure-algorithm"
                aria-label="Permalink for definition: payment app failure algorithm. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-payment-app-failure-algorithm-1"
                    title="§ 8.4 Respond to PaymentRequest Algorithm">§ 8.4 Respond to PaymentRequest Algorithm</a> <a
                    href="#ref-for-dfn-payment-app-failure-algorithm-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-payment-app-failure-algorithm-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-payment-app-failure-algorithm-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-payment-app-failure-algorithm-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-payment-app-failure-algorithm-6" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-payment-app-failure-algorithm-7" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-payment-app-failure-algorithm-8" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-payment-app-failure-algorithm-9" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-payment-app-failure-algorithm-10" title="Reference 10">(10)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymenthandlerresponse-payername"
        aria-label="Links in this document to definition: payerName">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymenthandlerresponse-payername"
                aria-label="Permalink for definition: payerName. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-822477832">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-payername-1"
                    title="§ 8.1 PaymentHandlerResponse dictionary">§ 8.1 PaymentHandlerResponse dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-payername-2"
                    title="§ 8.4 Respond to PaymentRequest Algorithm">§ 8.4 Respond to PaymentRequest Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-payername-3" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymenthandlerresponse-payeremail"
        aria-label="Links in this document to definition: payerEmail">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymenthandlerresponse-payeremail"
                aria-label="Permalink for definition: payerEmail. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-822477832">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-payeremail-1"
                    title="§ 8.1 PaymentHandlerResponse dictionary">§ 8.1 PaymentHandlerResponse dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-payeremail-2"
                    title="§ 8.4 Respond to PaymentRequest Algorithm">§ 8.4 Respond to PaymentRequest Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-payeremail-3" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymenthandlerresponse-payerphone"
        aria-label="Links in this document to definition: payerPhone">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymenthandlerresponse-payerphone"
                aria-label="Permalink for definition: payerPhone. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-822477832">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-payerphone-1"
                    title="§ 8.1 PaymentHandlerResponse dictionary">§ 8.1 PaymentHandlerResponse dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-payerphone-2"
                    title="§ 8.4 Respond to PaymentRequest Algorithm">§ 8.4 Respond to PaymentRequest Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-payerphone-3" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymenthandlerresponse-shippingaddress"
        aria-label="Links in this document to definition: shippingAddress">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymenthandlerresponse-shippingaddress"
                aria-label="Permalink for definition: shippingAddress. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-822477832">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-shippingaddress-1"
                    title="§ 8.1 PaymentHandlerResponse dictionary">§ 8.1 PaymentHandlerResponse dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-shippingaddress-2"
                    title="§ 8.4 Respond to PaymentRequest Algorithm">§ 8.4 Respond to PaymentRequest Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-shippingaddress-3" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymenthandlerresponse-shippingoption"
        aria-label="Links in this document to definition: shippingOption">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymenthandlerresponse-shippingoption"
                aria-label="Permalink for definition: shippingOption. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-822477832">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-shippingoption-1"
                    title="§ 8.1 PaymentHandlerResponse dictionary">§ 8.1 PaymentHandlerResponse dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-shippingoption-2"
                    title="§ 8.4 Respond to PaymentRequest Algorithm">§ 8.4 Respond to PaymentRequest Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-shippingoption-3" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-change-payment-method-algorithm"
        aria-label="Links in this document to definition: Change Payment Method Algorithm">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-change-payment-method-algorithm"
                aria-label="Permalink for definition: Change Payment Method Algorithm. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-change-payment-method-algorithm-1" title="§ 6.3.10 changePaymentMethod() method">§
                    6.3.10 changePaymentMethod() method</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-change-payment-details-algorithm"
        aria-label="Links in this document to definition: Change Payment Details Algorithm">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-change-payment-details-algorithm"
                aria-label="Permalink for definition: Change Payment Details Algorithm. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-change-payment-details-algorithm-1"
                    title="§ 6.3.11 changeShippingAddress() method">§ 6.3.11 changeShippingAddress() method</a>
            </li>
            <li>
                <a href="#ref-for-dfn-change-payment-details-algorithm-2"
                    title="§ 6.3.12 changeShippingOption() method">§ 6.3.12 changeShippingOption() method</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-respond-to-paymentrequest-algorithm"
        aria-label="Links in this document to definition: Respond to PaymentRequest Algorithm">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-respond-to-paymentrequest-algorithm"
                aria-label="Permalink for definition: Respond to PaymentRequest Algorithm. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-respond-to-paymentrequest-algorithm-1" title="§ 6.3.13 respondWith() method">§
                    6.3.13 respondWith() method</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-service-worker-registration"
        aria-label="Links in this document to definition: service worker registration">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-service-worker-registration"
                aria-label="Permalink for definition: service worker registration. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-service-worker-registration-1" title="§ 1. Introduction">§ 1. Introduction</a>
            </li>
            <li>
                <a href="#ref-for-dfn-service-worker-registration-2" title="§ 9.8 Supported Origin">§ 9.8 Supported
                    Origin</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-user-agents"
        aria-label="Links in this document to definition: user agent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-user-agents"
                aria-label="Permalink for definition: user agent. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-user-agents-1" title="§ 5. Can make payment">§ 5. Can make payment</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agents-2" title="§ 5.3 Handling a CanMakePaymentEvent">§ 5.3 Handling a
                    CanMakePaymentEvent</a> <a href="#ref-for-dfn-user-agents-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agents-4" title="§ 6.5 Handling a PaymentRequestEvent">§ 6.5 Handling a
                    PaymentRequestEvent</a>
            </li>
        </ul>
    </div>
    <script id="respec-highlight-vars">(() => {
            // @ts-check

            if (document.respec) {
                document.respec.ready.then(setupVarHighlighter);
            } else {
                setupVarHighlighter();
            }

            function setupVarHighlighter() {
                document
                    .querySelectorAll("var")
                    .forEach(varElem => varElem.addEventListener("click", highlightListener));
            }

            function highlightListener(ev) {
                ev.stopPropagation();
                const { target: varElem } = ev;
                const hightligtedElems = highlightVars(varElem);
                const resetListener = () => {
                    const hlColor = getHighlightColor(varElem);
                    hightligtedElems.forEach(el => removeHighlight(el, hlColor));
                    [...HL_COLORS.keys()].forEach(key => HL_COLORS.set(key, true));
                };
                if (hightligtedElems.length) {
                    document.body.addEventListener("click", resetListener, { once: true });
                }
            }

            // availability of highlight colors. colors from var.css
            const HL_COLORS = new Map([
                ["respec-hl-c1", true],
                ["respec-hl-c2", true],
                ["respec-hl-c3", true],
                ["respec-hl-c4", true],
                ["respec-hl-c5", true],
                ["respec-hl-c6", true],
                ["respec-hl-c7", true],
            ]);

            function getHighlightColor(target) {
                // return current colors if applicable
                const { value } = target.classList;
                const re = /respec-hl-\w+/;
                const activeClass = re.test(value) && value.match(re);
                if (activeClass) return activeClass[0];

                // first color preference
                if (HL_COLORS.get("respec-hl-c1") === true) return "respec-hl-c1";

                // otherwise get some other available color
                return [...HL_COLORS.keys()].find(c => HL_COLORS.get(c)) || "respec-hl-c1";
            }

            function highlightVars(varElem) {
                const textContent = norm(varElem.textContent);
                const parent = varElem.closest(".algorithm, section");
                const highlightColor = getHighlightColor(varElem);

                const varsToHighlight = [...parent.querySelectorAll("var")].filter(
                    el =>
                        norm(el.textContent) === textContent &&
                        el.closest(".algorithm, section") === parent
                );

                // update availability of highlight color
                const colorStatus = varsToHighlight[0].classList.contains("respec-hl");
                HL_COLORS.set(highlightColor, colorStatus);

                // highlight vars
                if (colorStatus) {
                    varsToHighlight.forEach(el => removeHighlight(el, highlightColor));
                    return [];
                } else {
                    varsToHighlight.forEach(el => addHighlight(el, highlightColor));
                }
                return varsToHighlight;
            }

            function removeHighlight(el, highlightColor) {
                el.classList.remove("respec-hl", highlightColor);
                // clean up empty class attributes so they don't come in export
                if (!el.classList.length) el.removeAttribute("class");
            }

            function addHighlight(elem, highlightColor) {
                elem.classList.add("respec-hl", highlightColor);
            }

            /**
             * Same as `norm` from src/core/utils, but our build process doesn't allow
             * imports in runtime scripts, so duplicated here.
             * @param {string} str
             */
            function norm(str) {
                return str.trim().replace(/\s+/g, " ");
            }
        })()</script>
    <script id="respec-dfn-panel">(() => {
                                               // @ts-check
                                               if (document.respec) {
                                                   document.respec.ready.then(setupPanel);
                                               } else {
                                                   setupPanel();
                                               }

                                               function setupPanel() {
                                                   const listener = panelListener();
                                                   document.body.addEventListener("keydown", listener);
                                                   document.body.addEventListener("click", listener);
                                               }

                                               function panelListener() {
                                                   /** @type {HTMLElement} */
                                                   let panel = null;
                                                   return event => {
                                                       const { target, type } = event;

                                                       if (!(target instanceof HTMLElement)) return;

                                                       // For keys, we only care about Enter key to activate the panel
                                                       // otherwise it's activated via a click.
                                                       if (type === "keydown" && event.key !== "Enter") return;

                                                       const action = deriveAction(event);

                                                       switch (action) {
                                                           case "show": {
                                                               hidePanel(panel);
                                                               /** @type {HTMLElement} */
                                                               const dfn = target.closest("dfn, .index-term");
                                                               panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                                                               const coords = deriveCoordinates(event);
                                                               displayPanel(dfn, panel, coords);
                                                               break;
                                                           }
                                                           case "dock": {
                                                               panel.style.left = null;
                                                               panel.style.top = null;
                                                               panel.classList.add("docked");
                                                               break;
                                                           }
                                                           case "hide": {
                                                               hidePanel(panel);
                                                               panel = null;
                                                               break;
                                                           }
                                                       }
                                                   };
                                               }

                                               /**
                                                * @param {MouseEvent|KeyboardEvent} event
                                                */
                                               function deriveCoordinates(event) {
                                                   const target = /** @type HTMLElement */ (event.target);

                                                   // We prevent synthetic AT clicks from putting
                                                   // the dialog in a weird place. The AT events sometimes
                                                   // lack coordinates, so they have clientX/Y = 0
                                                   const rect = target.getBoundingClientRect();
                                                   if (
                                                       event instanceof MouseEvent &&
                                                       event.clientX >= rect.left &&
                                                       event.clientY >= rect.top
                                                   ) {
                                                       // The event probably happened inside the bounding rect...
                                                       return { x: event.clientX, y: event.clientY };
                                                   }

                                                   // Offset to the middle of the element
                                                   const x = rect.x + rect.width / 2;
                                                   // Placed at the bottom of the element
                                                   const y = rect.y + rect.height;
                                                   return { x, y };
                                               }

                                               /**
                                                * @param {Event} event
                                                */
                                               function deriveAction(event) {
                                                   const target = /** @type {HTMLElement} */ (event.target);
                                                   const hitALink = !!target.closest("a");
                                                   if (target.closest("dfn:not([data-cite]), .index-term")) {
                                                       return hitALink ? "none" : "show";
                                                   }
                                                   if (target.closest(".dfn-panel")) {
                                                       if (hitALink) {
                                                           return target.classList.contains("self-link") ? "hide" : "dock";
                                                       }
                                                       const panel = target.closest(".dfn-panel");
                                                       return panel.classList.contains("docked") ? "hide" : "none";
                                                   }
                                                   if (document.querySelector(".dfn-panel:not([hidden])")) {
                                                       return "hide";
                                                   }
                                                   return "none";
                                               }

                                               /**
                                                * @param {HTMLElement} dfn
                                                * @param {HTMLElement} panel
                                                * @param {{ x: number, y: number }} clickPosition
                                                */
                                               function displayPanel(dfn, panel, { x, y }) {
                                                   panel.hidden = false;
                                                   // distance (px) between edge of panel and the pointing triangle (caret)
                                                   const MARGIN = 20;

                                                   const dfnRects = dfn.getClientRects();
                                                   // Find the `top` offset when the `dfn` can be spread across multiple lines
                                                   let closestTop = 0;
                                                   let minDiff = Infinity;
                                                   for (const rect of dfnRects) {
                                                       const { top, bottom } = rect;
                                                       const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                                                       if (diffFromClickY < minDiff) {
                                                           minDiff = diffFromClickY;
                                                           closestTop = top;
                                                       }
                                                   }

                                                   const top = window.scrollY + closestTop + dfnRects[0].height;
                                                   const left = x - MARGIN;
                                                   panel.style.left = `${left}px`;
                                                   panel.style.top = `${top}px`;

                                                   // Find if the panel is flowing out of the window
                                                   const panelRect = panel.getBoundingClientRect();
                                                   const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                                                   if (panelRect.right > SCREEN_WIDTH) {
                                                       const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                                                       const newCaretOffset = left - newLeft;
                                                       panel.style.left = `${newLeft}px`;
                                                       /** @type {HTMLElement} */
                                                       const caret = panel.querySelector(".caret");
                                                       caret.style.left = `${newCaretOffset}px`;
                                                   }

                                                   // As it's a dialog, we trap focus.
                                                   // TODO: when <dialog> becomes a implemented, we should really
                                                   // use that.
                                                   trapFocus(panel, dfn);
                                               }

                                               /**
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function trapFocus(panel, dfn) {
                                                   /** @type NodeListOf<HTMLAnchorElement> elements */
                                                   const anchors = panel.querySelectorAll("a[href]");
                                                   // No need to trap focus
                                                   if (!anchors.length) return;

                                                   // Move focus to first anchor element
                                                   const first = anchors.item(0);
                                                   first.focus();

                                                   const trapListener = createTrapListener(anchors, panel, dfn);
                                                   panel.addEventListener("keydown", trapListener);

                                                   // Hiding the panel releases the trap
                                                   const mo = new MutationObserver(records => {
                                                       const [record] = records;
                                                       const target = /** @type HTMLElement */ (record.target);
                                                       if (target.hidden) {
                                                           panel.removeEventListener("keydown", trapListener);
                                                           mo.disconnect();
                                                       }
                                                   });
                                                   mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
                                               }

                                               /**
                                                *
                                                * @param {NodeListOf<HTMLAnchorElement>} anchors
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function createTrapListener(anchors, panel, dfn) {
                                                   const lastIndex = anchors.length - 1;
                                                   let currentIndex = 0;
                                                   return event => {
                                                       switch (event.key) {
                                                           // Hitting "Tab" traps us in a nice loop around elements.
                                                           case "Tab": {
                                                               event.preventDefault();
                                                               currentIndex += event.shiftKey ? -1 : +1;
                                                               if (currentIndex < 0) {
                                                                   currentIndex = lastIndex;
                                                               } else if (currentIndex > lastIndex) {
                                                                   currentIndex = 0;
                                                               }
                                                               anchors.item(currentIndex).focus();
                                                               break;
                                                           }

                                                           // Hitting "Enter" on an anchor releases the trap.
                                                           case "Enter":
                                                               hidePanel(panel);
                                                               break;

                                                           // Hitting "Escape" returns focus to dfn.
                                                           case "Escape":
                                                               hidePanel(panel);
                                                               dfn.focus();
                                                               return;
                                                       }
                                                   };
                                               }

                                               /** @param {HTMLElement} panel */
                                               function hidePanel(panel) {
                                                   if (!panel) return;
                                                   panel.hidden = true;
                                                   panel.classList.remove("docked");
                                               }
                                           })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
</body>

</html>