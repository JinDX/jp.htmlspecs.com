<!DOCTYPE html>
<html lang="ja-JP">

<head>
    <meta charset="utf-8">
    <meta name="generator" content="ReSpec 35.5.0">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-color: var(--warning-border, #f11);
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
            background: var(--warning-bg, #fbe9e9);
            color: #000;
            color: var(--text, #000)
        }

        .warning-title:before {
            content: "⚠";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        pre.idl {
            padding: 1em;
            position: relative
        }

        pre.idl>code {
            color: #000;
            color: var(--text, #000)
        }

        @media print {
            pre.idl {
                white-space: pre-wrap
            }
        }

        .idlHeader {
            display: block;
            width: 150px;
            background: #8ccbf2;
            background: var(--def-border, #8ccbf2);
            color: #fff;
            color: var(--defrow-border, #fff);
            font-family: sans-serif;
            font-weight: 700;
            margin: -1em 0 1em -1em;
            height: 28px;
            line-height: 28px
        }

        .idlHeader a.self-link {
            margin-left: .3cm;
            text-decoration: none;
            border-bottom: none;
            color: inherit
        }

        .idlID {
            font-weight: 700;
            color: #005a9c
        }

        .idlType {
            color: #005a9c
        }

        .idlName {
            color: #ff4500
        }

        .idlName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none
        }

        a.idlEnumItem {
            color: #000;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        .idlSuperclass {
            font-style: italic;
            color: #005a9c
        }

        .idlDefaultValue,
        .idlParamName {
            font-style: italic
        }

        .extAttr {
            color: #666
        }

        .idlSectionComment {
            color: gray
        }

        .idlIncludes a {
            font-weight: 700
        }

        .respec-button-copy-paste:focus {
            text-decoration: none;
            border-color: #51a7e8;
            outline: 0;
            box-shadow: 0 0 5px rgba(81, 167, 232, .5)
        }

        .respec-button-copy-paste:is(:focus:hover, .selected:focus) {
            border-color: #51a7e8
        }

        .respec-button-copy-paste:is(:hover, :active, .zeroclipboard-is-hover, .zeroclipboard-is-active) {
            text-decoration: none;
            background-color: #ddd;
            background-image: linear-gradient(#eee, #ddd);
            border-color: #ccc
        }

        .respec-button-copy-paste:is(:active, .selected, .zeroclipboard-is-active) {
            background-color: #dcdcdc;
            background-image: none;
            border-color: #b5b5b5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, .15)
        }

        .respec-button-copy-paste.selected:hover {
            background-color: #cfcfcf
        }

        .respec-button-copy-paste:is(:disabled, :disabled:hover, .disabled, .disabled:hover) {
            color: rgba(102, 102, 102, .5);
            cursor: default;
            background-color: rgba(229, 229, 229, .5);
            background-image: none;
            border-color: rgba(197, 197, 197, .5);
            box-shadow: none
        }

        @media print {
            .respec-button-copy-paste {
                visibility: hidden
            }
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            background: var(--indextable-hover-bg, #fff);
            color: #000;
            color: var(--text, #000);
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 1em 3em -.4em var(--tocsidebar-shadow, rgba(0, 0, 0, .3)), 0 0 1px 1px var(--tocsidebar-shadow, rgba(0, 0, 0, .05));
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            border-bottom-color: var(--indextable-hover-bg, #fff);
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1;
            border-bottom-color: var(--indextable-hover-bg, #a2a9b1)
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            color: var(--text, #000);
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333;
            color: var(--text, #333)
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>


    <title>入力イベント レベル 2</title>

    <style>
        .invisible-table table {
            border: 0;
            border-spacing: 0px;
            border-collapse: collapse;
        }

        .invisible-table table td,
        .invisible-table table th {
            padding: 6px;
        }
    </style>



    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: italic
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>
    <meta name="color-scheme" content="light">
    <meta name="revision" content="453a1a0c28e9e38ab3918dc8ea4b6b709e53ff6d">
    <meta name="description"
        content="この仕様は、テキストおよび関連する入力イベントへの追加を定義し、テキストエディターアプリケーションやテキスト入力・テキスト整形を扱う他のアプリケーションにおいて、ブラウザーのデフォルト動作を監視・操作できるようにします。この仕様は UI イベント仕様 [UI-EVENTS] を基盤としています。">
    <link rel="canonical" href="https://www.w3.org/TR/input-events-2/">
    <style>
        var:hover {
            text-decoration: underline;
            cursor: pointer
        }

        var.respec-hl {
            color: var(--color, #000);
            background-color: var(--bg-color);
            box-shadow: 0 0 0 2px var(--bg-color)
        }

        @media (prefers-color-scheme:dark) {
            var.respec-hl {
                filter: saturate(.9) brightness(.9)
            }
        }

        var.respec-hl-c1 {
            --bg-color: #f4d200
        }

        var.respec-hl-c2 {
            --bg-color: #ff87a2
        }

        var.respec-hl-c3 {
            --bg-color: #96e885
        }

        var.respec-hl-c4 {
            --bg-color: #3eeed2
        }

        var.respec-hl-c5 {
            --bg-color: #eacfb6
        }

        var.respec-hl-c6 {
            --bg-color: #82ddff
        }

        var.respec-hl-c7 {
            --bg-color: #ffbcf2
        }

        @media print {
            var.respec-hl {
                background: 0 0;
                color: #000;
                box-shadow: unset
            }
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #222
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #222;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "specStatus": "WD",
  "github": "w3c/input-events",
  "level": 2,
  "group": "webediting",
  "wgPublicList": "public-editing-tf",
  "editors": [
    {
      "name": "Johannes Wilm",
      "mailto": "johannes@fiduswriter.org",
      "company": "Invited Expert",
      "w3cid": "75083",
      "url": "mailto:johannes@fiduswriter.org"
    }
  ],
  "formerEditors": [
    {
      "name": "Ben Peters",
      "company": "Microsoft",
      "companyURL": "https://www.microsoft.com",
      "retiredDate": "2015-02-23"
    }
  ],
  "otherLinks": [
    {
      "key": "Latest published version by level",
      "data": [
        {
          "value": "Level 2",
          "href": "https://www.w3.org/TR/input-events-2/"
        }
      ]
    },
    {
      "key": "Latest editor's draft by level",
      "data": [
        {
          "value": "Level 2",
          "href": "https://w3c.github.io/input-events/"
        }
      ]
    }
  ],
  "xref": [
    "dom",
    "html",
    "infra",
    "mimesniff",
    "uievents",
    "i18n-glossary"
  ],
  "gitRevision": "453a1a0c28e9e38ab3918dc8ea4b6b709e53ff6d",
  "publishDate": "2025-08-14",
  "publishISODate": "2025-08-14T00:00:00.000Z",
  "generatedSubtitle": "W3C Working Draft 14 August 2025"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD">
</head>

<body class="h-entry" data-cite="WEBIDL dom html infra mimesniff uievents i18n-glossary">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.w3.org/"><img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a></p>
        <h1 id="title" class="title">入力イベント レベル 2</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C 作業草案</a> <time class="dt-published"
                datetime="2025-08-14">2025年8月14日</time></p>
        <details open="">
            <summary>この文書の詳細</summary>
            <dl>
                <dt>このバージョン:</dt>
                <dd>
                    <a class="u-url"
                        href="https://www.w3.org/TR/2025/WD-input-events-2-20250814/">https://www.w3.org/TR/2025/WD-input-events-2-20250814/</a>
                </dd>
                <dt>最新公開バージョン:</dt>
                <dd>
                    <a href="https://www.w3.org/TR/input-events-2/">https://www.w3.org/TR/input-events-2/</a>
                </dd>
                <dt>最新エディタ草案:</dt>
                <dd><a href="https://w3c.github.io/input-events/">https://w3c.github.io/input-events/</a></dd>
                <dt>履歴:</dt>
                <dd>
                    <a
                        href="https://www.w3.org/standards/history/input-events-2/">https://www.w3.org/standards/history/input-events-2/</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/input-events/commits/">コミット履歴</a>
                </dd>
                <dt>編集者:</dt>
                <dd class="editor p-author h-card vcard" data-editor-id="75083">
                    <a class="ed_mailto u-email email p-name" href="mailto:johannes@fiduswriter.org">Johannes Wilm</a>
                    (<span class="p-org org h-org">招待専門家</span>)
                </dd>
                <dt>
                    元編集者:
                </dt>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Ben Peters</span> (<a class="p-org org h-org"
                        href="https://www.microsoft.com">Microsoft</a>) - 2015年2月23日まで
                </dd>
                <dt>フィードバック:</dt>
                <dd>
                    <a href="https://github.com/w3c/input-events/">GitHub w3c/input-events</a>
                    (<a href="https://github.com/w3c/input-events/pulls/">プルリクエスト</a>,
                    <a href="https://github.com/w3c/input-events/issues/new/choose">新しい課題</a>,
                    <a href="https://github.com/w3c/input-events/issues/">オープン課題</a>)
                </dd>
                <dd><a
                        href="mailto:public-editing-tf@w3.org?subject=%5Binput-events-2%5D%20YOUR%20TOPIC%20HERE">public-editing-tf@w3.org</a>
                    件名 <kbd>[input-events-2] <em>… メッセージトピック …</em></kbd> (<a rel="discussion"
                        href="https://lists.w3.org/Archives/Public/public-editing-tf">アーカイブ</a>)</dd>
                <dt>レベルごとの最新公開バージョン</dt>
                <dd>
                    <a href="https://www.w3.org/TR/input-events-2/">レベル2</a>
                </dd>
                <dt>レベルごとの最新エディタ草案</dt>
                <dd>
                    <a href="https://w3c.github.io/input-events/">レベル2</a>
                </dd>
            </dl>
        </details>


        <p class="copyright">
            <a href="https://www.w3.org/policies/#copyright">Copyright</a>
            ©
            2025

            <a href="https://www.w3.org/">World Wide Web Consortium</a>.
            <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
            <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>,
            <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/copyright/software-license-2023/"
                title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>概要</h2>
        <p>
            本仕様は、テキストおよび関連する入力イベントへの追加を定義し、テキストエディターアプリケーションやテキスト入力・テキスト整形を扱う他のアプリケーションにおいて、ブラウザーのデフォルト動作を監視・操作できるようにします。この仕様は
            UI イベント仕様 [<cite><a class="bibref" data-link-type="biblio" href="#bib-ui-events"
                    title="UI Events">UI-EVENTS</a></cite>] を基盤としています。
        </p>
    </section>
    <section id="sotd" class="introductory">
        <h2>この文書のステータス</h2>
        <p><em>このセクションは、本書が公開された時点での
                文書のステータスを示します。現在の <abbr title="World Wide Web Consortium">W3C</abbr>
                公開物と、この技術レポートの最新リビジョンは
                <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr>
                    標準・草案一覧</a>で確認できます。</em></p>
        <p>
            「入力イベント レベル 2」は初版の「入力イベント」
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-input-events"
                    title="Input Events Level 1">INPUT-EVENTS</a></cite>] を置き換え、以下を含みます。
        </p>
        <ul>
            <li>IME構成開始・終了用の beforeinput イベント inputtype を追加し、IME構成プロセスの分離を可能にしました。
            </li>
            <li>beforeinput イベントのキャンセル可否について要件が追加され、IME構成プロセス内で発行されるもの以外すべてがキャンセル可能となります。
            </li>
        </ul>
        <p>
            Input Events仕様の<a href="https://github.com/web-platform-tests/wpt/tree/master/input-events">テストスイート</a>および<a
                href="https://w3c.github.io/test-results/input-events/">実装レポート</a>は現在も作業中です。
        </p>
        <p>
            本書は <a href="https://www.w3.org/groups/wg/webediting">Web編集作業グループ</a>により
            <a href="https://www.w3.org/policies/process/20231103/#recs-and-notes">勧告トラック</a>で作業草案として公開されました。
        </p>
        <p>作業草案としての公開は
            <abbr title="World Wide Web Consortium">W3C</abbr>およびそのメンバーによる支持を意味するものではありません。
        </p>
        <p>
            この文書はドラフトであり、随時更新・置換・廃止される可能性があります。他の文書の引用には適切ではありません。

        </p>
        <p>
            本書は
            <a href="https://www.w3.org/policies/patent-policy/"><abbr title="World Wide Web Consortium">W3C</abbr>
                特許ポリシー</a>の下で活動するグループによって作成されました。

            <abbr title="World Wide Web Consortium">W3C</abbr>は
            <a rel="disclosure" href="https://www.w3.org/groups/wg/webediting/ipr">グループ成果物に関連する特許開示の公開リスト</a>
            を管理しています。このページには特許開示の方法も記載されています。ある個人が「必須クレーム」を含むと考える特許について実際の知識がある場合、その情報は
            <a href="https://www.w3.org/policies/patent-policy/#sec-Disclosure">W3C特許ポリシー第6章</a>に従って開示しなければなりません。
        </p>
        <p>
            この文書は
            <a id="w3c_process_revision" href="https://www.w3.org/policies/process/20231103/">2023年11月3日 <abbr
                    title="World Wide Web Consortium">W3C</abbr>プロセス文書</a>に従います。
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">目次</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">概要</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">この文書のステータス</a></li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>
                    はじめに
                </a></li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">2. </bdi>適合性</a></li>
            <li class="tocline"><a class="tocxref" href="#definitions"><bdi class="secno">3. </bdi>
                    定義
                </a></li>
            <li class="tocline"><a class="tocxref" href="#problems-solved"><bdi class="secno">4. </bdi>
                    解決される課題
                </a></li>
            <li class="tocline"><a class="tocxref" href="#use-cases"><bdi class="secno">5. </bdi>
                    ユースケース
                </a></li>
            <li class="tocline"><a class="tocxref" href="#events-inputevents"><bdi class="secno">6. </bdi>
                    入力イベントタイプ
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#interface-InputEvent"><bdi class="secno">6.1 </bdi>
                            InputEvent インターフェイス
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#overview"><bdi class="secno">6.1.1 </bdi>
                                    概要
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#interface-InputEvent-Attributes"><bdi
                                        class="secno">6.1.2 </bdi>
                                    属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#interface-InputEvent-Methods"><bdi
                                        class="secno">6.1.3 </bdi>
                                    メソッド
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#event-definitions"><bdi class="secno">6.2 </bdi>
                            イベント定義
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#input-event-order-during-composition"><bdi class="secno">7.
                    </bdi>
                    IME構成中の入力イベント順序
                </a></li>
            <li class="tocline"><a class="tocxref" href="#event-order-when-using-insertfrompaste"><bdi class="secno">8.
                    </bdi>
                    <code>"insertFromPaste"</code>利用時のイベント順序
                </a></li>
            <li class="tocline"><a class="tocxref" href="#privacy-and-security-considerations"><bdi class="secno">9.
                    </bdi>
                    プライバシーおよびセキュリティの考慮事項
                </a></li>
            <li class="tocline"><a class="tocxref" href="#acknowledgements"><bdi class="secno">10. </bdi>
                    謝辞
                </a></li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">A. </bdi>参考文献</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">A.1
                            </bdi>規範となる参考文献</a></li>
                    <li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">A.2
                            </bdi>参考情報</a></li>
                </ol>
            </li>
        </ol>
    </nav>
    <section id="introduction">
        <div class="header-wrapper">
            <h2 id="x1-introduction"><bdi class="secno">1. </bdi>
                はじめに
            </h2><a class="self-link" href="#introduction" aria-label="Permalink for Section 1."></a>
        </div>

        <p>
            この文書は、UIイベント仕様 [<cite><a class="bibref" data-link-type="biblio" href="#bib-ui-events"
                    title="UI Events">UI-EVENTS</a></cite>] で説明されている <a
                href="https://w3c.github.io/uievents/#event-type-input">input</a> および <a
                href="https://w3c.github.io/uievents/#beforeinput">beforeinput</a>
            の2つのイベントに編集関連の追加を記述します。これらのイベントの目的は、著者が編集の前後でデフォルト編集動作を理解・上書きできるようにすることです。
        </p>
    </section>
    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x2-conformance"><bdi class="secno">2. </bdi>適合性</h2><a class="self-link" href="#conformance"
                aria-label="Permalink for Section 2."></a>
        </div>
        <p>非規範的と記載されたセクションだけでなく、本仕様書に含まれる著作ガイドライン・図・例・注記もすべて非規範的です。それ以外の記述はすべて規範的です。</p>
        <p>
            本文書中の <em class="rfc2119">MAY</em>、<em class="rfc2119">MUST</em>、<em class="rfc2119">MUST NOT</em>
            というキーワードは、<a href="https://www.rfc-editor.org/info/bcp14">BCP 14</a> [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-rfc2119"
                    title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc8174"
                    title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
            に示される通り、ここで示すようにすべて大文字で記載されている場合のみ適用されます。
        </p>
    </section>
    <section id="definitions">
        <div class="header-wrapper">
            <h2 id="x3-definitions"><bdi class="secno">3. </bdi>
                定義
            </h2><a class="self-link" href="#definitions" aria-label="Permalink for Section 3."></a>
        </div>

        <dl>
            <dt>
                <dfn id="dfn-express-intention" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">意図の表明</dfn>
            </dt>
            <dd>
                ユーザーは、キーボード・IME・音声入力などの手段を使って、特定の編集操作を実行する意図を<a data-lt="express intention"
                    href="#dfn-express-intention" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-express-intention-1">表明</a>できます。具体的な入力操作は、プラットフォームごとの慣習に従って意図にマッピングされます。
            </dd>
            <dt>
                <dfn id="dfn-kill-buffer" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">キルバッファ</dfn>
            </dt>
            <dd>
                <p>
                    <i>この定義は規範的ではありません。</i>
                </p><a href="#dfn-kill-buffer" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-kill-buffer-1">キルバッファ</a>は、クリップボードとは別のリッチテキストコンテンツを格納するインメモリストアで、特定の削除コマンドによって削除された内容を一時的に保存するためのものです。ユーザーはキルバッファをヤンクする意図を示すことで、現在の選択範囲をキルバッファの内容で置換できます。
            </dd>
        </dl>
    </section>
    <section id="problems-solved">
        <div class="header-wrapper">
            <h2 id="x4-problems-solved"><bdi class="secno">4. </bdi>
                解決される課題
            </h2><a class="self-link" href="#problems-solved" aria-label="Permalink for Section 4."></a>
        </div>

        <p>
            <i>このセクションは規範的ではありません。</i>
        </p>
        <p>
            ウェブベースのテキストエディターを作成するには、ブラウザーコードの上に多くのJavaScriptが必要になりますが、その理由は以下の通りです。
        </p>
        <ol>
            <li>ブラウザーごとに編集操作の扱いが異なるため。
            </li>
            <li>一部の編集操作に対するブラウザーの挙動にバグが多いため。
            </li>
            <li>各サイトごとに編集操作の扱いに独自の好みがあるため。
            </li>
            <li>ブラウザーの高機能テキスト編集機能の開発は、<a href="https://extensiblewebmanifesto.org/">Extensible Web
                    Manifesto</a>の原則に従っていない場合があり、ウェブ開発者コミュニティのニーズと連携していないことがあるため。
            </li>
        </ol>
        <p>
            本仕様は、<a href="#dfn-beforeinput" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-beforeinput-1">beforeinput</a> イベントを通じてすべてのユーザー入力に関するブラウザーの処理を上書きできる方法と、<a
                href="#dfn-input" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-1">input</a>
            イベントを通じてユーザー入力によるDOMの変更を監視できる方法をウェブ開発者に提供し、こうした課題の解消を目指します。
        </p>
    </section>
    <section id="use-cases">
        <div class="header-wrapper">
            <h2 id="x5-use-cases"><bdi class="secno">5. </bdi>
                ユースケース
            </h2><a class="self-link" href="#use-cases" aria-label="Permalink for Section 5."></a>
        </div>

        <p>
            <i>このセクションは規範的ではありません。</i>
        </p>
        <ol>
            <li>JavaScriptテキストエディターを作成し、ユーザーが太字としてマークしたテキストを &lt;b&gt; タグではなく &lt;strong&gt;
                タグでマークするように、すべてのブラウザーにアクセスできなくても、ブラウザー組み込みの太字機能を利用できるようにする。
            </li>
            <li>編集されたテキストのDOMへのレンダリングをJavaScriptが担当し、裏でデータモデルが動作するJavaScriptテキストエディターを作成する。
            </li>
            <li>太字のみ許可し斜体は許可しないなど、リッチテキスト編集の一部のみを許可するJavaScriptエディターを作成する。
            </li>
            <li>ユーザーが異なるブラウザーで異なる意図表現方法を用いても、ユーザーの意図に基づきJavaScriptでDOM変更をレンダリングする協働型エディターを作成する。
            </li>
            <li>一部ユーザーのみテキスト追加・削除が可能、他のユーザーのみ特定の書式設定の追加・削除が可能な、異なるアクセス権限を持つJavaScriptエディターを作成する。
            </li>
        </ol>
    </section>
    <section id="events-inputevents">
        <div class="header-wrapper">
            <h2 id="x6-input-event-types"><bdi class="secno">6. </bdi>
                入力イベントタイプ
            </h2><a class="self-link" href="#events-inputevents" aria-label="Permalink for Section 6."></a>
        </div>

        <p>
            入力イベントは、ユーザーがマークアップを編集しようとする前（beforeinputイベント）および後（inputイベント）に送信されます。これには、内容の挿入・削除や書式変更も含まれます。
        </p>
        <p>
            入力イベントは、<a data-link-type="dfn"
                href="https://dom.spec.whatwg.org/#concept-event-dispatch">dispatch</a>される対象として、<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">編集ホスト</a>となる要素（contenteditable属性が設定された要素、
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/form-elements.html#the-textarea-element">textarea</a></code>
            要素、ならびに
            <code><a data-link-type="element" href="#dfn-input" class="internalDFN" id="ref-for-dfn-input-2">input</a></code>
            要素でテキスト入力を許可するもの）が含まれます。
        </p>
        <section id="interface-InputEvent">
            <div class="header-wrapper">
                <h3 id="x6-1-interface-inputevent"><bdi class="secno">6.1 </bdi>
                    InputEvent インターフェイス
                </h3><a class="self-link" href="#interface-InputEvent" aria-label="Permalink for Section 6.1"></a>
            </div>

            <pre class="idl def" id="webidl-827932857"><span class="idlHeader"><a class="self-link" href="#webidl-827932857">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-inputevent-partial-1" data-title="InputEvent">partial interface <a data-idl="partial" data-link-type="interface" data-title="InputEvent" class="idlID" data-dfn-for="InputEvent" href="https://www.w3.org/TR/uievents/#inputevent">InputEvent</a> {<span data-idl="" class="idlAttribute" id="idl-def-inputevent-datatransfer" data-title="dataTransfer" data-dfn-for="InputEvent">
   readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer">DataTransfer</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-inputevent-datatransfer" id="ref-for-dom-inputevent-datatransfer-1"><code>dataTransfer</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-inputevent-gettargetranges" data-title="getTargetRanges" data-dfn-for="InputEvent"><span class="idlType">
   <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://dom.spec.whatwg.org/#interface-staticrange">StaticRange</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-inputevent-gettargetranges" id="ref-for-dom-inputevent-gettargetranges-1"><code>getTargetRanges</code></a>();</span>
};</span><span data-idl="" class="idlDictionary" id="idl-def-inputeventinit-partial-1" data-title="InputEventInit">

partial dictionary <a data-idl="partial" data-link-type="dictionary" data-title="InputEventInit" class="idlID" data-dfn-for="InputEventInit" href="https://www.w3.org/TR/uievents/#dictdef-inputeventinit">InputEventInit</a> {<span data-idl="" class="idlMember" id="idl-def-inputeventinit-datatransfer" data-title="dataTransfer" data-dfn-for="InputEventInit"><span class="idlType">
   <a data-link-type="interface" href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer">DataTransfer</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-inputeventinit-datatransfer" id="ref-for-dom-inputeventinit-datatransfer-1"><code>dataTransfer</code></a> = null;</span><span data-idl="" class="idlMember" id="idl-def-inputeventinit-targetranges" data-title="targetRanges" data-dfn-for="InputEventInit"><span class="idlType">
   <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://dom.spec.whatwg.org/#interface-staticrange">StaticRange</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-inputeventinit-targetranges" id="ref-for-dom-inputeventinit-targetranges-1"><code>targetRanges</code></a> = [];</span>
};</span></code></pre>
            <p data-dfn-for="InputEventInit">
                <a data-link-type="attribute"
                    href="https://www.w3.org/TR/uievents/#dom-inputevent-inputtype"><code>inputType</code></a>属性、<dfn
                    data-export="" data-dfn-type="dict-member" id="dom-inputeventinit-datatransfer" data-idl="field"
                    data-title="dataTransfer" data-dfn-for="InputEventInit" data-type="DataTransfer" tabindex="0"
                    aria-haspopup="dialog"><code>dataTransfer</code></dfn>属性、および
                <dfn data-lt="targetRange|targetRanges" data-plurals="targetrange" data-export=""
                    data-dfn-type="dict-member" id="dom-inputeventinit-targetranges" data-idl="field"
                    data-title="targetRanges" data-dfn-for="InputEventInit" data-type="sequence" tabindex="0"
                    aria-haspopup="dialog"><code>targetRanges</code></dfn>属性は、<a data-link-type="dictionary"
                    data-lt="InputEventInit"
                    href="https://www.w3.org/TR/uievents/#dictdef-inputeventinit"><code>InputEventInit</code></a>
                により、対応する<a data-link-type="interface" data-lt="InputEvent"
                    href="https://www.w3.org/TR/uievents/#inputevent"><code>InputEvent</code></a>オブジェクトの属性を初期化します。
            </p>
            <section id="overview">
                <div class="header-wrapper">
                    <h4 id="x6-1-1-overview"><bdi class="secno">6.1.1 </bdi>
                        概要
                    </h4><a class="self-link" href="#overview" aria-label="Permalink for Section 6.1.1"></a>
                </div>

                <p>
                    <i>このセクションは規範的ではありません。</i>
                </p>
                <p data-link-for="InputEvent">
                    次の表は、<a href="#dfn-data" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-data-1"><code>data</code></a>属性および
                    <a href="#dom-inputevent-datatransfer" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-inputevent-datatransfer-2"><code>dataTransfer</code></a>属性が内容を持つ場合とnullになる場合、また<a
                        href="#dom-inputevent-gettargetranges" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-inputevent-gettargetranges-2"><code>getTargetRanges()</code></a>メソッドが空配列または非空配列を返すタイミングを、inputTypeごとにまとめたものです。
                </p>
                <table class="parameters simple">
                    <thead>
                        <tr>
                            <th>
                                編集ホスト
                            </th>
                            <th>
                                inputType
                            </th>
                            <th>
                                data
                            </th>
                            <th>
                                dataTransfer
                            </th>
                            <th>
                                getTargetRanges()
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                Contenteditable
                            </td>
                            <td>
                                <code>"insertText"</code>,
                                <code>"insertCompositionText"</code>,
                                <code>"formatSetBlockTextDirection"</code>,
                                <code>"formatSetInlineTextDirection"</code>,
                                <code>"formatBackColor"</code>,
                                <code>"formatFontColor"</code>,
                                <code>"formatFontName"</code>, <code>"insertLink"</code>
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                非空配列
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Contenteditable
                            </td>
                            <td>
                                <code>"insertFromPaste"</code>,
                                <code>"insertFromPasteAsQuotation"</code>,
                                <code>"insertFromDrop"</code>,
                                <code>"insertReplacementText"</code>,
                                <code>"insertFromYank"</code>
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                非空配列
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>&lt;textarea&gt;</code>, <code>&lt;input
                  type="text"&gt;</code>
                            </td>
                            <td>
                                <code>"insertText"</code>,
                                <code>"insertCompositionText"</code>,
                                <code>"insertFromPaste"</code>,
                                <code>"insertFromPasteAsQuotation"</code>,
                                <code>"insertFromDrop"</code>,
                                <code>"insertReplacementText"</code>,
                                <code>"insertFromYank"</code>,
                                <code>"formatSetBlockTextDirection"</code>,
                                <code>"formatSetInlineTextDirection"</code>,
                                <code>"formatBackColor"</code>,
                                <code>"formatFontColor"</code>,
                                <code>"formatFontName"</code>, <code>"insertLink"</code>
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                空配列
                            </td>
                        </tr>
                        <tr>
                            <td>
                                すべて
                            </td>
                            <td>
                                <code>"historyUndo"</code>, <code>"historyRedo"</code>
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                空配列
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Contenteditable
                            </td>
                            <td>
                                その他すべて
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                非空配列
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>&lt;textarea&gt;</code>, <code>&lt;input
                  type="text"&gt;</code>
                            </td>
                            <td>
                                その他すべて
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                空配列
                            </td>
                        </tr>
                    </tbody>
                </table>
            </section>
            <section id="interface-InputEvent-Attributes" data-dfn-for="InputEvent">
                <div class="header-wrapper">
                    <h4 id="x6-1-2-attributes"><bdi class="secno">6.1.2 </bdi>
                        属性
                    </h4><a class="self-link" href="#interface-InputEvent-Attributes"
                        aria-label="Permalink for Section 6.1.2"></a>
                </div>

                <p>
                    beforeinput イベントがキャンセル可能かどうかは inputType に依存します。
                </p>
                <p>
                    選択される inputType は、ユーザーの<a data-lt="express intention" href="#dfn-express-intention"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-express-intention-2">意図の表明</a>、IME構成中かどうか、選択状態によって決まります。
                </p>
                <p>
                    本仕様は、下記の表中 inputType 列の値を inputType の値として定義します。
                </p>
                <table class="parameters simple">
                    <thead>
                        <tr>
                            <th>
                                inputType
                            </th>
                            <th>
                                ユーザーの意図の表明
                            </th>
                            <th>
                                IME構成中
                            </th>
                            <th>
                                beforeinput キャンセル可能
                            </th>
                            <th>
                                選択状態
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <code>"insertText"</code>
                            </td>
                            <td>
                                入力されたプレーンテキストの挿入
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertReplacementText"</code>
                            </td>
                            <td>
                                スペルチェッカー、オートコレクト、入力候補などによる既存内容の挿入・置換
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertLineBreak"</code>
                            </td>
                            <td>
                                改行の挿入
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertParagraph"</code>
                            </td>
                            <td>
                                段落区切りの挿入
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertOrderedList"</code>
                            </td>
                            <td>
                                番号付きリストの挿入
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertUnorderedList"</code>
                            </td>
                            <td>
                                箇条書きリストの挿入
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertHorizontalRule"</code>
                            </td>
                            <td>
                                水平線の挿入
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertFromYank"</code>
                            </td>
                            <td>
                                現在の選択範囲を<a href="#dfn-kill-buffer" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-kill-buffer-2">キルバッファ</a>の内容で置換
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertFromDrop"</code>
                            </td>
                            <td>
                                ドロップ操作による内容の挿入
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertFromPaste"</code>
                            </td>
                            <td>
                                クリップボードからの貼り付け、またはクライアント画像ライブラリからの画像貼り付け
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertFromPasteAsQuotation"</code>
                            </td>
                            <td>
                                クリップボードから引用として貼り付け
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertTranspose"</code>
                            </td>
                            <td>
                                直前に入力された2つの<a data-link-type="dfn"
                                    href="https://www.w3.org/TR/i18n-glossary/#dfn-grapheme-cluster"
                                    class="respec-offending-element" title="Normative reference to non-normative term."
                                    id="respec-offender-normative-reference-to-non-normative-term">書記素クラスタ</a>の入れ替え
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertCompositionText"</code>
                            </td>
                            <td>
                                現在のIME構成文字列の置換
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertLink"</code>
                            </td>
                            <td>
                                リンクの挿入
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteWordBackward"</code>
                            </td>
                            <td>
                                キャレット直前の単語の削除
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                折りたたみ
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteWordForward"</code>
                            </td>
                            <td>
                                キャレット直後の単語の削除
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                折りたたみ
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteSoftLineBackward"</code>
                            </td>
                            <td>
                                キャレットから直前の表示行区切りまでの削除
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                折りたたみ
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteSoftLineForward"</code>
                            </td>
                            <td>
                                キャレットから直後の表示行区切りまでの削除
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                折りたたみ
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteEntireSoftLine"</code>
                            </td>
                            <td>
                                キャレット前後の表示行区切り間の削除
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                折りたたみ
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteHardLineBackward"</code>
                            </td>
                            <td>
                                キャレットから直前のブロック要素または<code><a data-link-type="element" href="https://html.spec.whatwg.org/#the-br-element">br</a></code>要素までの削除
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                折りたたみ
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteHardLineForward"</code>
                            </td>
                            <td>
                                キャレットから直後のブロック要素または<code><a data-link-type="element" href="https://html.spec.whatwg.org/#the-br-element">br</a></code>要素までの削除
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                折りたたみ
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteByDrag"</code>
                            </td>
                            <td>
                                ドラッグ操作によるDOMからの内容の削除
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteByCut"</code>
                            </td>
                            <td>
                                カット操作として現在の選択範囲を削除
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteContent"</code>
                            </td>
                            <td>
                                削除方向を指定せず、他のinputTypeで扱われない場合の選択範囲の削除
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                非折りたたみ
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteContentBackward"</code>
                            </td>
                            <td>
                                キャレット直前の内容を削除し、他のinputTypeで扱われない場合、または削除後に選択範囲が開始位置に折りたたまれる場合
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteContentForward"</code>
                            </td>
                            <td>
                                キャレット直後の内容を削除し、他のinputTypeで扱われない場合、または削除後に選択範囲が終了位置に折りたたまれる場合
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"historyUndo"</code>
                            </td>
                            <td>
                                直前の編集操作を元に戻す
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"historyRedo"</code>
                            </td>
                            <td>
                                直前に取り消した編集操作をやり直す
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatBold"</code>
                            </td>
                            <td>
                                太字の開始
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatItalic"</code>
                            </td>
                            <td>
                                斜体の開始
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatUnderline"</code>
                            </td>
                            <td>
                                下線の開始
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatStrikeThrough"</code>
                            </td>
                            <td>
                                取り消し線の開始
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatSuperscript"</code>
                            </td>
                            <td>
                                上付き文字の開始
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatSubscript"</code>
                            </td>
                            <td>
                                下付き文字の開始
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatJustifyFull"</code>
                            </td>
                            <td>
                                選択範囲の両端揃え
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatJustifyCenter"</code>
                            </td>
                            <td>
                                選択範囲の中央揃え
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatJustifyRight"</code>
                            </td>
                            <td>
                                選択範囲の右揃え
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatJustifyLeft"</code>
                            </td>
                            <td>
                                選択範囲の左揃え
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatIndent"</code>
                            </td>
                            <td>
                                選択範囲のインデント
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatOutdent"</code>
                            </td>
                            <td>
                                選択範囲のインデント解除
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatRemove"</code>
                            </td>
                            <td>
                                選択範囲のすべての書式を削除
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatSetBlockTextDirection"</code>
                            </td>
                            <td>
                                テキストブロックの方向設定
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatSetInlineTextDirection"</code>
                            </td>
                            <td>
                                テキストインライン方向の設定
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatBackColor"</code>
                            </td>
                            <td>
                                背景色の変更
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatFontColor"</code>
                            </td>
                            <td>
                                フォント色の変更
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatFontName"</code>
                            </td>
                            <td>
                                フォントファミリーの変更
                            </td>
                            <td>
                                いいえ
                            </td>
                            <td>
                                はい
                            </td>
                            <td>
                                任意
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="note" role="note" id="issue-container-generatedID">
                    <div role="heading" class="note-title marker" id="h-note" aria-level="5"><span>注</span></div>
                    <div class="">
                        他の仕様書がこの定義を拡張する可能性があります。
                    </div>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-0">
                    <div role="heading" class="note-title marker" id="h-note-0" aria-level="5"><span>注</span></div>
                    <div class="">
                        上記の<code>inputTypes</code>が存在するからといって、すべての実装がこれらすべてに対応しているとは限りません。しかし、ブラウザーがDOM変更を引き起こす可能性のある編集操作をサポートしている場合、そのブラウザーは対応する<code>beforeinput</code>および<code>input</code>イベントを<em
                            class="rfc2119">必ず</em><a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#concept-event-dispatch">dispatch</a>しなければなりません。
                    </div>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-1">
                    <div role="heading" class="note-title marker" id="h-note-1" aria-level="5"><span>注</span></div>
                    <div class="">
                        選択範囲が折りたたまれている場合、<code>"deleteContentBackward"</code>は、ユーザーがテキストノード内でテキスト削除を求めた場合と、キャレットがテキストノードの先頭にある場合により複雑な要素の削除や段落結合の意図を示した場合の両方で使用されます。
                    </div>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-2">
                    <div role="heading" class="note-title marker" id="h-note-2" aria-level="5"><span>注</span></div>
                    <div class="">
                        選択範囲が折りたたまれている場合、<code>"deleteContentForward"</code>は、ユーザーがテキストノード内でテキスト削除を求めた場合と、キャレットがテキストノードの末尾にある場合により複雑な要素の削除や段落結合の意図を示した場合の両方で使用されます。
                    </div>
                </div>
                <p>
                    <dfn id="dfn-data" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><code>data</code></dfn>
                    は、文書に追加されるプレーンテキストデータの情報を保持します。
                </p>
                <table class="parameters simple">
                    <thead>
                        <tr>
                            <th>
                                inputType
                            </th>
                            <th>
                                編集ホスト
                            </th>
                            <th>
                                data
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <code>"insertText"</code> または
                                <code>"insertCompositionText"</code>
                            </td>
                            <td>
                                任意
                            </td>
                            <td>
                                挿入されるプレーンテキスト文字列
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertFromPaste"</code>,
                                <code>"insertFromPasteAsQuotation"</code>,
                                <code>"insertFromDrop"</code>,
                                <code>"insertTranspose"</code>,
                                <code>"insertReplacementText"</code> または
                                <code>"insertFromYank"</code>
                            </td>
                            <td>
                                <code><a href="https://html.spec.whatwg.org/multipage/input.html#the-input-element">input</a></code>
                                または
                                <code><a href="https://html.spec.whatwg.org/multipage/form-elements.html#the-textarea-element">textarea</a></code>
                            </td>
                            <td>
                                挿入されるプレーンテキスト文字列
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatSetInlineTextDirection"</code> または
                                <code>"formatSetBlockTextDirection"</code>
                            </td>
                            <td>
                                任意
                            </td>
                            <td>
                                <code>"ltr"</code>, <code>"rtl"</code>, <code>"auto"</code>
                                または <code>"null"</code>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatBackColor"</code> または
                                <code>"formatFontColor"</code>
                            </td>
                            <td>
                                任意
                            </td>
                            <td>
                                提案する色の<a
                                    href="https://www.w3.org/TR/cssom-1/#serialize-a-css-component-value">CSSコンポーネント値のシリアライズ</a>文字列
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatFontName"</code>
                            </td>
                            <td>
                                任意
                            </td>
                            <td>
                                提案される font-family CSS プロパティ値
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertLink"</code>
                            </td>
                            <td>
                                任意
                            </td>
                            <td>
                                提案されるリンクのURL
                            </td>
                        </tr>
                        <tr>
                            <td>
                                その他すべて
                            </td>
                            <td>
                                任意
                            </td>
                            <td>
                                null
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p>
                    <dfn data-dfn-for="InputEvent" data-export="" data-dfn-type="attribute"
                        id="dom-inputevent-datatransfer" data-idl="attribute" data-title="dataTransfer"
                        data-type="DataTransfer" data-lt="dataTransfer" data-local-lt="InputEvent.dataTransfer"
                        tabindex="0" aria-haspopup="dialog"><code>dataTransfer</code></dfn> は、<a
                        data-link-type="interface" data-lt="DataTransfer"
                        href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer"><code>DataTransfer</code></a>オブジェクトに、リッチテキストおよびプレーンテキストデータを文書から取得もしくは追加する情報を保持します（該当データがある場合）。
                </p>
                <table class="parameters simple">
                    <thead>
                        <tr>
                            <th>
                                inputType
                            </th>
                            <th>
                                編集ホスト
                            </th>
                            <th>
                                dataTransfer
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <code>"insertFromPaste"</code>,
                                <code>"insertFromPasteAsQuotation"</code>,
                                <code>"insertFromDrop"</code>,
                                <code>"insertTranspose"</code>,
                                <code>"insertReplacementText"</code> または
                                <code>"insertFromYank"</code>
                            </td>
                            <td>
                                <code>contenteditable</code>
                            </td>
                            <td>
                                事前にセットされた<a data-link-type="interface" data-lt="DataTransfer"
                                    href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer"><code>DataTransfer</code></a>オブジェクトで、以下の条件を満たす：
                                <ol>
                                    <li><a data-link-type="interface" data-lt="DataTransfer"
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer"><code>DataTransfer</code></a>オブジェクトの<a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#drag-data-store">drag
                                            data store</a>は<a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#concept-dnd-ro">read-only</a>モードである。[<cite><a
                                                class="bibref" data-link-type="biblio" href="#bib-html"
                                                title="HTML Standard">HTML</a></cite>]
                                    </li>
                                    <li>貼り付け内容がファイルの場合、<a data-link-type="interface" data-lt="DataTransfer"
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer"><code>DataTransfer</code></a>オブジェクトの<a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-kind">drag
                                            data store item list</a>には、ファイルの<a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-type-string">drag
                                            data item type
                                            string</a>（MIMEタイプ）が1件含まれ、その<em>kind</em>は<em>File</em>で、データは貼り付けファイルに対応する<a
                                            href="https://www.w3.org/TR/FileAPI/#dfn-file">File オブジェクト</a>である。[<cite><a
                                                class="bibref" data-link-type="biblio" href="#bib-html"
                                                title="HTML Standard">HTML</a></cite>]
                                    </li>
                                    <li><a data-link-type="interface" data-lt="DataTransfer"
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer"><code>DataTransfer</code></a>オブジェクトの<a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#drag-data-store-item-list">drag
                                            data store item list</a>には、<a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-type-string">drag
                                            data item type
                                            string</a><code>"text/html"</code>が1件含まれ、その<em>kind</em>は<em>Plain Unicode
                                            string</em>で、データはクリップボードまたは<a href="#dfn-kill-buffer" class="internalDFN"
                                            data-link-type="dfn"
                                            id="ref-for-dfn-kill-buffer-3">キルバッファ</a>にある内容のHTML表現、もしくは追加される内容である。[<cite><a
                                                class="bibref" data-link-type="biblio" href="#bib-html"
                                                title="HTML Standard">HTML</a></cite>]
                                    </li>
                                    <li><a data-link-type="interface" data-lt="DataTransfer"
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer"><code>DataTransfer</code></a>オブジェクトの<a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-kind">drag
                                            data store item list</a>には、<a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-type-string">drag
                                            data item type
                                            string</a><code>"text/plain"</code>が1件含まれ、その<em>kind</em>は<em>Plain Unicode
                                            string</em>で、データは貼り付け・ドロップ・追加される内容のプレーンテキスト表現である。[<cite><a class="bibref"
                                                data-link-type="biblio" href="#bib-html"
                                                title="HTML Standard">HTML</a></cite>]
                                    </li>
                                    <li>貼り付け内容がリンクの場合、<a data-link-type="interface" data-lt="DataTransfer"
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer"><code>DataTransfer</code></a>オブジェクトの<a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-kind">drag
                                            data store item list</a>には、<a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-type-string">drag
                                            data item type
                                            string</a><code>"text/uri-list"</code>が1件含まれ、その<em>kind</em>は<em>Plain
                                            Unicode string</em>で、データはドロップまたは追加されるリンクのプレーンテキスト表現である。[<cite><a
                                                class="bibref" data-link-type="biblio" href="#bib-html"
                                                title="HTML Standard">HTML</a></cite>]
                                    </li>
                                </ol>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                その他すべて
                            </td>
                            <td>
                                任意
                            </td>
                            <td>
                                null
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p>
                    <dfn data-dfn-for="InputEvent" data-lt="targetRange|getTargetRanges()" data-export=""
                        data-dfn-type="method" id="dom-inputevent-gettargetranges" data-idl="operation"
                        data-title="getTargetRanges()" data-type="sequence"
                        data-local-lt="InputEvent.getTargetRanges|InputEvent.getTargetRanges()|getTargetRanges"
                        tabindex="0"
                        aria-haspopup="dialog"><code>getTargetRanges()</code></dfn>は、イベントがキャンセルされなかった場合に変更される内容を表す<a
                        data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#interface-staticrange">StaticRanges</a>の配列を返します。<a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">編集ホスト</a>が
                    contenteditable ノードまたは<a href="https://w3c.github.io/edit-context/#dfn-editcontext-editing-host">
                        EditContext 編集ホスト</a>の場合に限ります。そうでなければ、このメソッドは何も返しません。返される<a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#interface-staticrange">StaticRanges</a>は、ブラウザーが通常置換する<a
                        href="https://infra.spec.whatwg.org/#code-points">コードポイント</a>のみを<em
                        class="rfc2119">必ず</em>カバーし、たとえそれが<a data-link-type="dfn"
                        href="https://www.w3.org/TR/i18n-glossary/#dfn-grapheme-cluster"
                        class="respec-offending-element" title="Normative reference to non-normative term."
                        id="respec-offender-normative-reference-to-non-normative-term-0">書記素クラスタ</a>の一部のみでもです。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-3">
                    <div role="heading" class="note-title marker" id="h-note-3" aria-level="5"><span>注</span></div>
                    <div class="" data-link-for="InputEvent">
                        <p>
                            <i>この注記は規範的ではありません。</i>
                        </p>スクリプトやプラットフォームによっては、折りたたみ選択状態のテキストノードで前方・後方削除を行うと、1つまたは複数の<a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#code-point">コードポイント</a>や、全体の<a data-link-type="dfn"
                            href="https://www.w3.org/TR/i18n-glossary/#dfn-grapheme-cluster">書記素クラスタ</a>が削除される場合があります。例えば、「café」を含むテキストノードで後方削除を行うと、スクリプトやプラットフォームによって、アキュートアクセントのみが削除される場合や「é」全体が削除される場合があります。
                    </div>
                </div>
            </section>
            <section id="interface-InputEvent-Methods" data-dfn-for="InputEvent">
                <div class="header-wrapper">
                    <h4 id="x6-1-3-methods"><bdi class="secno">6.1.3 </bdi>
                        メソッド
                    </h4><a class="self-link" href="#interface-InputEvent-Methods"
                        aria-label="Permalink for Section 6.1.3"></a>
                </div>

                <table class="parameters simple">
                    <thead>
                        <tr>
                            <th>
                                inputType
                            </th>
                            <th>
                                編集ホスト
                            </th>
                            <th>
                                <code>getTargetRanges()</code>の応答
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <code>"historyUndo"</code> または <code>"historyRedo"</code>
                            </td>
                            <td>
                                任意
                            </td>
                            <td>
                                空配列
                            </td>
                        </tr>
                        <tr>
                            <td>
                                その他すべて
                            </td>
                            <td>
                                <code>contenteditable</code>
                            </td>
                            <td>
                                イベントに関連付けられた<dfn data-lt="StaticRange" id="dfn-staticrange" class="externalDFN"
                                    data-no-export="" data-dfn-type="dfn"><a
                                        href="https://dom.spec.whatwg.org/#interface-staticrange">StaticRanges</a></dfn>
                                [<cite><a class="bibref" data-link-type="biblio" href="#bib-dom"
                                        title="DOM Standard">DOM</a></cite>]の配列
                            </td>
                        </tr>
                        <tr>
                            <td>
                                その他すべて
                            </td>
                            <td>
                                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/input.html#the-input-element">input</a></code>
                                または
                                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/form-elements.html#the-textarea-element">textarea</a></code>
                            </td>
                            <td>
                                空配列
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p>
                    <code>"historyUndo"</code>または<code>"historyRedo"</code>がinputTypeである場合や、<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">編集ホスト</a>がcontenteditable要素でない場合は、空配列を返します。
                </p>
            </section>
        </section>
        <section id="event-definitions">
            <div class="header-wrapper">
                <h3 id="x6-2-event-definitions"><bdi class="secno">6.2 </bdi>
                    イベント定義
                </h3><a class="self-link" href="#event-definitions" aria-label="Permalink for Section 6.2"></a>
            </div>

            <div class="event-definition">
                <dl>
                    <dt id="event-type-beforeinput">
                        <dfn id="dfn-beforeinput" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><a
                                class="eventtype" href="#event-type-beforeinput"><code>beforeinput</code></a></dfn>
                    </dt>
                    <dd>
                        <table class="invisible-table" data-summary="この表は指定されたイベントタイプの意味論に関する情報を含みます">
                            <tbody>
                                <tr>
                                    <th>
                                        タイプ
                                    </th>
                                    <td>
                                        <strong><code>beforeinput</code></strong>
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        インターフェイス
                                    </th>
                                    <td>
                                        <a href="#interface-InputEvent"><code>InputEvent</code></a>
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        同期/非同期
                                    </th>
                                    <td>
                                        同期
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        バブル
                                    </th>
                                    <td>
                                        はい
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        信頼できるターゲット
                                    </th>
                                    <td>
                                        <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">編集ホスト</a>である任意の<code>Element</code>
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        <a href="https://www.w3.org/TR/uievents/#default-action">既定の動作</a> [<cite><a
                                                class="bibref" data-link-type="biblio" href="#bib-ui-events"
                                                title="UI Events">UI-EVENTS</a></cite>]
                                    </th>
                                    <td>
                                        <ul>
                                            <li>inputType
                                                <code>"insertCompositionText"</code>のcontentEditable=typing編集ホストの場合:
                                                「DOMの更新」
                                            </li>
                                            <li><code>contentEditable="true"</code>の<a data-link-type="dfn"
                                                    href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">編集ホスト</a>の場合、すべてのinputTypeで:
                                                「DOMの更新」
                                            </li>
                                            <li><a
                                                    href="https://w3c.github.io/edit-context/#dfn-editcontext-editing-host">
                                                    EditContext編集ホスト</a>で<a
                                                    href="https://w3c.github.io/edit-context/#dfn-editcontext-handled-inputtype">
                                                    EditContext対応inputType</a>の場合: <a
                                                    href="https://w3c.github.io/edit-context/#dfn-handle-input-for-editcontext">
                                                    EditContext用ハンドル入力</a>を指定の<a data-link-type="dfn"
                                                    href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">編集ホスト</a>要素に対して行う
                                            </li>
                                            <li>それ以外はなし
                                            </li>
                                        </ul>
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        コンテキスト<br>
                                        （信頼できるイベント）
                                    </th>
                                    <td>
                                        <ul>
                                            <li>
                                                <a href="#dfn-data" id="ref-for-dfn-data-2"><code
                                                        class="attribute-name">InputEvent.data</code></a>:
                                                要素に追加されたデータを含む文字列。該当しない場合はnullとなることがある。
                                            </li>
                                            <li>
                                                <a href="#dom-inputevent-datatransfer"
                                                    id="ref-for-dom-inputevent-datatransfer-3"><code
                                                        class="attribute-name">InputEvent.dataTransfer</code></a>:
                                                要素に追加・削除されたリッチテキストデータ。該当しない場合はnullとなることがある。
                                            </li>
                                            <li>
                                                <a href="#dom-inputevent-gettargetranges" class="internalDFN"
                                                    data-link-type="idl"
                                                    id="ref-for-dom-inputevent-gettargetranges-3"><code
                                                        class="methods-name">InputEvent.getTargetRanges()</code></a>:
                                                イベントがキャンセルされなければDOMに影響を与える<a data-link-type="dfn"
                                                    href="https://dom.spec.whatwg.org/#interface-staticrange">StaticRanges</a>の配列を返す
                                            </li>
                                        </ul>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <p>
                            <a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#user-agent">ユーザーエージェント</a>は、ユーザーがcontenteditable要素に入力しようとした際に必ずこのイベントを<a
                                data-link-type="dfn"
                                href="https://dom.spec.whatwg.org/#concept-event-dispatch">dispatch</a>しなければなりません。これは<a
                                data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#user-agent">ユーザーエージェント</a>が必ずDOMを更新することを意味しません。
                        </p>
                        <p>
                            <a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#user-agent">ユーザーエージェント</a>は、ユーザー入力の試行によるものではないイベント（例えばシステムイベント）によって、このイベントを<a
                                data-link-type="dfn"
                                href="https://dom.spec.whatwg.org/#concept-event-dispatch">dispatch</a>してはなりません。
                        </p>
                    </dd>
                </dl>
            </div>

            <div class="event-definition">
                <dl>
                    <dt id="event-type-input">
                        <dfn id="dfn-input" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><a class="eventtype"
                                href="#event-type-input"><code>input</code></a></dfn>
                    </dt>
                    <dd>
                        <table class="invisible-table" data-summary="この表は指定されたイベントタイプの意味論に関する情報を含みます">
                            <tbody>
                                <tr>
                                    <th>
                                        タイプ
                                    </th>
                                    <td>
                                        <strong><code>input</code></strong>
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        インターフェイス
                                    </th>
                                    <td>
                                        <a href="#interface-InputEvent"><code>InputEvent</code></a>
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        同期/非同期
                                    </th>
                                    <td>
                                        同期
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        バブル
                                    </th>
                                    <td>
                                        はい
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        信頼できるターゲット
                                    </th>
                                    <td>
                                        <code>contenteditable</code>属性が有効な任意の<code>Element</code>
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        <a href="https://www.w3.org/TR/uievents/#default-action">既定の動作</a> [<cite><a
                                                class="bibref" data-link-type="biblio" href="#bib-ui-events"
                                                title="UI Events">UI-EVENTS</a></cite>]
                                    </th>
                                    <td>
                                        なし
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        コンテキスト<br>
                                        （信頼できるイベント）
                                    </th>
                                    <td>
                                        <ul>
                                            <li>
                                                <a href="#dfn-data" id="ref-for-dfn-data-3"><code
                                                        class="attribute-name">InputEvent.data</code></a>:
                                                要素に追加されたデータを含む文字列。該当しない場合はnullとなることがある。
                                            </li>
                                            <li>
                                                <a href="#dom-inputevent-datatransfer"
                                                    id="ref-for-dom-inputevent-datatransfer-4"><code
                                                        class="attribute-name">InputEvent.dataTransfer</code></a>:
                                                要素に追加・削除されたリッチテキストデータ。該当しない場合はnullとなることがある。
                                            </li>
                                        </ul>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <p>
                            <a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#user-agent">ユーザーエージェント</a>は、ユーザーの意図による文書内容の変更をブラウザーが処理してDOMが更新された直後に必ずこのイベントを<a
                                data-link-type="dfn"
                                href="https://dom.spec.whatwg.org/#concept-event-dispatch">dispatch</a>しなければなりません。編集ホストが<a
                                href="https://w3c.github.io/edit-context/#dfn-editcontext-editing-host">
                                EditContext編集ホスト</a>（自動DOM変更を行わない）である場合や、<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#user-agent">ユーザーエージェント</a>がDOM変更不要と判断した場合には、このイベントをdispatchしてはなりません。
                        </p>
                    </dd>
                </dl>
            </div>
        </section>
    </section>
    <section id="input-event-order-during-composition">
        <div class="header-wrapper">
            <h2 id="x7-input-event-order-during-composition"><bdi class="secno">7. </bdi>
                IME構成中の入力イベント順序
            </h2><a class="self-link" href="#input-event-order-during-composition"
                aria-label="Permalink for Section 7."></a>
        </div>

        <p>
            構成の開始は、<a data-link-type="dfn"
                href="https://www.w3.org/TR/uievents/#compositionstart">compositionstart</a>イベントのdispatchによって示されます。
        </p>
        <p>
            構成セッション中、テキスト構成システムがアクティブなテキスト部分を更新するたびに、<a data-link-type="dfn"
                href="https://www.w3.org/TR/uievents/#compositionupdate">compositionupdate</a>イベントがdispatchされます。
        </p>
        <p>
            各<a data-link-type="dfn"
                href="https://www.w3.org/TR/uievents/#compositionupdate">compositionupdate</a>イベントの後に、<a
                data-link-type="idl" data-lt="beforeinput" href="#dfn-beforeinput" class="internalDFN"
                id="ref-for-dfn-beforeinput-2"><code>beforeinput</code></a>イベントと<a data-link-type="idl" data-lt="input"
                href="#dfn-input" class="internalDFN"
                id="ref-for-dfn-input-3"><code>input</code></a>イベントのペアがdispatchされます。
            <a data-link-type="idl" data-lt="beforeinput" href="#dfn-beforeinput" class="internalDFN"
                id="ref-for-dfn-beforeinput-3"><code>beforeinput</code></a>および<a data-link-type="idl" data-lt="input"
                href="#dfn-input" class="internalDFN" id="ref-for-dfn-input-4"><code>input</code></a>イベントは：
        </p>
        <ul>
            <li>キャンセル不可である
            </li>
            <li><a data-link-type="attribute"
                    href="https://www.w3.org/TR/uievents/#dom-inputevent-inputtype"><code>inputType</code></a>が<code>"insertCompositionText"</code>に設定されている
            </li>
            <li><a data-link-type="idl" data-lt="data" href="#dfn-data" class="internalDFN"
                    id="ref-for-dfn-data-4"><code><code>data</code></code></a>属性は<a data-link-type="dfn"
                    href="https://www.w3.org/TR/uievents/#compositionupdate">compositionupdate</a>イベントのそれと等しい
            </li>
            <li><a data-link-type="idl" href="#dom-inputevent-gettargetranges" class="internalDFN"
                    id="ref-for-dom-inputevent-gettargetranges-4"><code>targetRange</code></a>は構成のアクティブなテキスト部分を囲む
            </li>
        </ul>
        <p>
            アクティブなテキスト部分のDOM内容は、<a data-link-type="idl" data-lt="beforeinput" href="#dfn-beforeinput"
                class="internalDFN" id="ref-for-dfn-beforeinput-4"><code>beforeinput</code></a>イベントのdispatch後、<a
                data-link-type="idl" data-lt="input" href="#dfn-input" class="internalDFN"
                id="ref-for-dfn-input-5"><code>input</code></a>イベントのdispatch前に更新されます。
        </p>
        <p>
            構成セッションの終了は、<a data-link-type="dfn"
                href="https://www.w3.org/TR/uievents/#compositionend">compositionend</a>イベントのdispatchによって示されます。
        </p>
    </section>
    <section id="event-order-when-using-insertfrompaste">
        <div class="header-wrapper">
            <h2 id="x8-event-order-when-using-insertfrompaste"><bdi class="secno">8. </bdi>
                <code>"insertFromPaste"</code>利用時のイベント順序
            </h2><a class="self-link" href="#event-order-when-using-insertfrompaste"
                aria-label="Permalink for Section 8."></a>
        </div>

        <p>
            <code>"insertFromPaste"</code>の<a data-link-type="idl" data-lt="beforeinput" href="#dfn-beforeinput"
                class="internalDFN"
                id="ref-for-dfn-beforeinput-5"><code>beforeinput</code></a>イベントがdispatchされる場合、必ずその前に<a
                href="https://www.w3.org/TR/clipboard-apis/#clipboard-event-paste">paste</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-clipboard-apis"
                    title="Clipboard API and events">CLIPBOARD-APIS</a></cite>]イベントがdispatchされなければなりません。
        </p>
    </section>
    <section id="privacy-and-security-considerations">
        <div class="header-wrapper">
            <h2 id="x9-privacy-and-security-considerations"><bdi class="secno">9. </bdi>
                プライバシーおよびセキュリティの考慮事項
            </h2><a class="self-link" href="#privacy-and-security-considerations"
                aria-label="Permalink for Section 9."></a>
        </div>

        <p>
            <i>このセクションは規範的ではありません。</i>
        </p>
        <p>
            この機能による既存イベント（<a data-link-type="dfn"
                href="https://www.w3.org/TR/uievents/#keydown"><code>keydown</code></a>や<a data-link-type="dfn"
                href="https://www.w3.org/TR/uievents/#keypress"><code>keypress</code></a>[<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-ui-events"
                    title="UI Events">UI-EVENTS</a></cite>]イベントなど）ですでに利用可能な<a data-link-type="dfn"
                href="https://www.w3.org/TR/fingerprinting-guidance/#dfn-browser-fingerprinting">フィンガープリント</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-fingerprinting-guidance"
                    title="Mitigating Browser Fingerprinting in Web Specifications">fingerprinting-guidance</a></cite>]技術を除き、既知のセキュリティやプライバシーへの影響はありません。
        </p>
        <p>
            この機能が既存イベントを置き換える場合、ユーザーの意図が記録されるため、利用したハードウェアの種類ではなく<a data-link-type="dfn"
                href="https://www.w3.org/TR/fingerprinting-guidance/#dfn-browser-fingerprinting">フィンガープリント</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-fingerprinting-guidance"
                    title="Mitigating Browser Fingerprinting in Web Specifications">fingerprinting-guidance</a></cite>]技術の利用可能性が低下する可能性があります。
            <a data-lt="express intention" href="#dfn-express-intention" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-express-intention-3">意図の表明</a>方法が記録されるためです。
        </p>
    </section>
    <section id="acknowledgements">
        <div class="header-wrapper">
            <h2 id="x10-acknowledgements"><bdi class="secno">10. </bdi>
                謝辞
            </h2><a class="self-link" href="#acknowledgements" aria-label="Permalink for Section 10."></a>
        </div>

        <p>
            Michael Aufreiter、Adrian Bateman、Oliver Buchtala、Robin Berjon、Enrica Casucci、Bo Cupp、Domenic Denicola、Emil
            Eklund、Olivier Forget、Aryeh Gregor、Marijn Haverbeke、Yoshifumi Inoue、Koji Ishii、Gary Kacmarcik、Ian
            Kilpatrick、Frederico Caldeira Knabben、Takayoshi Kochi、Piotrek Koszuliński、Travis Leithead、Grisha
            Lyukshin、Miles Maxfield、Chaals McCathie Nevile、Masayuki Nakano、Ryosuke Niwa、Julie Parent、Ben Peters、Florian
            Rivoal、Morgan Smith、Hallvord R. M. Steen、Johan Sörlin、Cristian Talau、Dave Tapuska、Ojan Vafai、Léonie
            Watson、Xiaoqian Wu、Chong Zhang、Joanmarie、そしてEditing Taskforceの皆様に感謝します。
        </p>
    </section>


    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="a-references"><bdi class="secno">A. </bdi>参考文献</h2><a class="self-link" href="#references"
                aria-label="Permalink for Appendix A."></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="a-1-normative-references"><bdi class="secno">A.1 </bdi>規範となる参考文献</h3><a class="self-link"
                    href="#normative-references" aria-label="Permalink for Appendix A.1"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-clipboard-apis">[CLIPBOARD-APIS]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/clipboard-apis/"><cite>クリップボードAPIとイベント</cite></a>. Gary
                    Kacmarcik; Anupam Snigdha. W3C. 2025年5月16日. W3C作業草案. URL: <a
                        href="https://www.w3.org/TR/clipboard-apis/">https://www.w3.org/TR/clipboard-apis/</a>
                </dd>
                <dt id="bib-cssom">[CSSOM]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/cssom-1/"><cite>CSSオブジェクトモデル（CSSOM）</cite></a>. Daniel Glazman;
                    Emilio Cobos Álvarez. W3C. 2021年8月26日. W3C作業草案. URL: <a
                        href="https://www.w3.org/TR/cssom-1/">https://www.w3.org/TR/cssom-1/</a>
                </dd>
                <dt id="bib-dom">[DOM]</dt>
                <dd>
                    <a href="https://dom.spec.whatwg.org/"><cite>DOM現行標準</cite></a>. Anne van Kesteren. WHATWG.
                    現行標準. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-fileapi">[FileAPI]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/FileAPI/"><cite>ファイルAPI</cite></a>. Marijn Kruisselbrink. W3C.
                    2024年12月4日. W3C作業草案. URL: <a
                        href="https://www.w3.org/TR/FileAPI/">https://www.w3.org/TR/FileAPI/</a>
                </dd>
                <dt id="bib-fingerprinting-guidance">[fingerprinting-guidance]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/fingerprinting-guidance/"><cite>Web仕様におけるブラウザフィンガープリント対策</cite></a>.
                    Nick Doty; Tom Ritter. W3C. 2025年8月4日. W3C作業グループノート. URL: <a
                        href="https://www.w3.org/TR/fingerprinting-guidance/">https://www.w3.org/TR/fingerprinting-guidance/</a>
                </dd>
                <dt id="bib-html">[HTML]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML現行標準</cite></a>. Anne van Kesteren;
                    Domenic Denicola; Dominic Farolino; Ian Hickson; Philip Jägenstedt; Simon Pieters. WHATWG. 現行標準.
                    URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-infra">[infra]</dt>
                <dd>
                    <a href="https://infra.spec.whatwg.org/"><cite>インフラ現行標準</cite></a>. Anne van Kesteren; Domenic
                    Denicola. WHATWG. 現行標準. URL: <a
                        href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-mimesniff">[mimesniff]</dt>
                <dd>
                    <a href="https://mimesniff.spec.whatwg.org/"><cite>MIME Sniffing現行標準</cite></a>. Gordon P.
                    Hemsley. WHATWG. 現行標準. URL: <a
                        href="https://mimesniff.spec.whatwg.org/">https://mimesniff.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>RFCで要件レベルを示すためのキーワード</cite></a>. S. Bradner.
                    IETF. 1997年3月. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
                </dd>
                <dt id="bib-rfc8174">[RFC8174]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>RFC2119キーワードの大文字・小文字の曖昧性</cite></a>. B.
                    Leiba. IETF. 2017年5月. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
                </dd>
                <dt id="bib-ui-events">[UI-EVENTS]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/uievents/"><cite>UIイベント</cite></a>. Gary Kacmarcik; Travis
                    Leithead. W3C. 2024年9月7日. W3C作業草案. URL: <a
                        href="https://www.w3.org/TR/uievents/">https://www.w3.org/TR/uievents/</a>
                </dd>
                <dt id="bib-webidl">[WEBIDL]</dt>
                <dd>
                    <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL現行標準</cite></a>. Edgar Chen; Timothy Gu.
                    WHATWG. 現行標準. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
        <section id="informative-references">
            <div class="header-wrapper">
                <h3 id="a-2-informative-references"><bdi class="secno">A.2 </bdi>参考情報</h3><a class="self-link"
                    href="#informative-references" aria-label="Permalink for Appendix A.2"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-i18n-glossary">[i18n-glossary]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/i18n-glossary/"><cite>国際化用語集</cite></a>.
                    Richard Ishida; Addison Phillips. W3C. 2024年10月17日. W3C作業グループノート. URL: <a
                        href="https://www.w3.org/TR/i18n-glossary/">https://www.w3.org/TR/i18n-glossary/</a>
                </dd>
                <dt id="bib-input-events">[INPUT-EVENTS]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/input-events-1/"><cite>入力イベント レベル 1</cite></a>. Johannes
                    Wilm. W3C. 2023年9月28日. W3C作業草案. URL: <a
                        href="https://www.w3.org/TR/input-events-1/">https://www.w3.org/TR/input-events-1/</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="トップへ戻る">↑</abbr></a>
    </p>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-express-intention"
        aria-label="Links in this document to definition: express intention">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-express-intention"
                aria-label="Permalink for definition: express intention. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-express-intention-1" title="§ 3. Definitions">§ 3. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-express-intention-2" title="§ 6.1.2 Attributes">§ 6.1.2 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-express-intention-3" title="§ 9. Privacy and security considerations">§ 9. Privacy
                    and security considerations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-kill-buffer"
        aria-label="Links in this document to definition: kill buffer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-kill-buffer"
                aria-label="Permalink for definition: kill buffer. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-kill-buffer-1" title="§ 3. Definitions">§ 3. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-kill-buffer-2" title="§ 6.1.2 Attributes">§ 6.1.2 Attributes</a> <a
                    href="#ref-for-dfn-kill-buffer-3" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-inputeventinit-datatransfer"
        aria-label="Links in this document to definition: dataTransfer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-inputeventinit-datatransfer"
                aria-label="Permalink for definition: dataTransfer. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-827932857">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-inputeventinit-datatransfer-1" title="§ 6.1 Interface InputEvent">§ 6.1 Interface
                    InputEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-inputeventinit-targetranges"
        aria-label="Links in this document to definition: targetRanges">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-inputeventinit-targetranges"
                aria-label="Permalink for definition: targetRanges. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-827932857">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-inputeventinit-targetranges-1" title="§ 6.1 Interface InputEvent">§ 6.1 Interface
                    InputEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-data"
        aria-label="Links in this document to definition: data">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-data"
                aria-label="Permalink for definition: data. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-data-1" title="§ 6.1.1 Overview">§ 6.1.1 Overview</a>
            </li>
            <li>
                <a href="#ref-for-dfn-data-2" title="§ 6.2 Event definitions">§ 6.2 Event definitions</a> <a
                    href="#ref-for-dfn-data-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-data-4" title="§ 7. Input Event Order During Composition">§ 7. Input Event Order
                    During Composition</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-inputevent-datatransfer"
        aria-label="Links in this document to definition: dataTransfer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-inputevent-datatransfer"
                aria-label="Permalink for definition: dataTransfer. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-827932857">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-inputevent-datatransfer-1" title="§ 6.1 Interface InputEvent">§ 6.1 Interface
                    InputEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-inputevent-datatransfer-2" title="§ 6.1.1 Overview">§ 6.1.1 Overview</a>
            </li>
            <li>
                <a href="#ref-for-dom-inputevent-datatransfer-3" title="§ 6.2 Event definitions">§ 6.2 Event
                    definitions</a> <a href="#ref-for-dom-inputevent-datatransfer-4" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-inputevent-gettargetranges"
        aria-label="Links in this document to definition: getTargetRanges()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-inputevent-gettargetranges"
                aria-label="Permalink for definition: getTargetRanges(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-827932857">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-inputevent-gettargetranges-1" title="§ 6.1 Interface InputEvent">§ 6.1 Interface
                    InputEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-inputevent-gettargetranges-2" title="§ 6.1.1 Overview">§ 6.1.1 Overview</a>
            </li>
            <li>
                <a href="#ref-for-dom-inputevent-gettargetranges-3" title="§ 6.2 Event definitions">§ 6.2 Event
                    definitions</a>
            </li>
            <li>
                <a href="#ref-for-dom-inputevent-gettargetranges-4" title="§ 7. Input Event Order During Composition">§
                    7. Input Event Order During Composition</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-beforeinput"
        aria-label="Links in this document to definition: beforeinput">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-beforeinput"
                aria-label="Permalink for definition: beforeinput. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-beforeinput-1" title="§ 4. Problems solved">§ 4. Problems solved</a>
            </li>
            <li>
                <a href="#ref-for-dfn-beforeinput-2" title="§ 7. Input Event Order During Composition">§ 7. Input Event
                    Order During Composition</a> <a href="#ref-for-dfn-beforeinput-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-beforeinput-4" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-beforeinput-5" title="§ 8. Event order when using &quot;insertFromPaste&quot;">§
                    8. Event order when using "insertFromPaste"</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-input"
        aria-label="Links in this document to definition: input">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-input"
                aria-label="Permalink for definition: input. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-input-1" title="§ 4. Problems solved">§ 4. Problems solved</a>
            </li>
            <li>
                <a href="#ref-for-dfn-input-2" title="§ 6. Input Event Types">§ 6. Input Event Types</a>
            </li>
            <li>
                <a href="#ref-for-dfn-input-3" title="§ 7. Input Event Order During Composition">§ 7. Input Event Order
                    During Composition</a> <a href="#ref-for-dfn-input-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-input-5" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <script id="respec-highlight-vars">(() => {
            // @ts-check

            if (document.respec) {
                document.respec.ready.then(setupVarHighlighter);
            } else {
                setupVarHighlighter();
            }

            function setupVarHighlighter() {
                document
                    .querySelectorAll("var")
                    .forEach(varElem => varElem.addEventListener("click", highlightListener));
            }

            function highlightListener(ev) {
                ev.stopPropagation();
                const { target: varElem } = ev;
                const hightligtedElems = highlightVars(varElem);
                const resetListener = () => {
                    const hlColor = getHighlightColor(varElem);
                    hightligtedElems.forEach(el => removeHighlight(el, hlColor));
                    [...HL_COLORS.keys()].forEach(key => HL_COLORS.set(key, true));
                };
                if (hightligtedElems.length) {
                    document.body.addEventListener("click", resetListener, { once: true });
                }
            }

            // availability of highlight colors. colors from var.css
            const HL_COLORS = new Map([
                ["respec-hl-c1", true],
                ["respec-hl-c2", true],
                ["respec-hl-c3", true],
                ["respec-hl-c4", true],
                ["respec-hl-c5", true],
                ["respec-hl-c6", true],
                ["respec-hl-c7", true],
            ]);

            function getHighlightColor(target) {
                // return current colors if applicable
                const { value } = target.classList;
                const re = /respec-hl-\w+/;
                const activeClass = re.test(value) && value.match(re);
                if (activeClass) return activeClass[0];

                // first color preference
                if (HL_COLORS.get("respec-hl-c1") === true) return "respec-hl-c1";

                // otherwise get some other available color
                return [...HL_COLORS.keys()].find(c => HL_COLORS.get(c)) || "respec-hl-c1";
            }

            function highlightVars(varElem) {
                const textContent = norm(varElem.textContent);
                const parent = varElem.closest(".algorithm, section");
                const highlightColor = getHighlightColor(varElem);

                const varsToHighlight = [...parent.querySelectorAll("var")].filter(
                    el =>
                        norm(el.textContent) === textContent &&
                        el.closest(".algorithm, section") === parent
                );

                // update availability of highlight color
                const colorStatus = varsToHighlight[0].classList.contains("respec-hl");
                HL_COLORS.set(highlightColor, colorStatus);

                // highlight vars
                if (colorStatus) {
                    varsToHighlight.forEach(el => removeHighlight(el, highlightColor));
                    return [];
                } else {
                    varsToHighlight.forEach(el => addHighlight(el, highlightColor));
                }
                return varsToHighlight;
            }

            function removeHighlight(el, highlightColor) {
                el.classList.remove("respec-hl", highlightColor);
                // clean up empty class attributes so they don't come in export
                if (!el.classList.length) el.removeAttribute("class");
            }

            function addHighlight(elem, highlightColor) {
                elem.classList.add("respec-hl", highlightColor);
            }

            /**
             * Same as `norm` from src/core/utils, but our build process doesn't allow
             * imports in runtime scripts, so duplicated here.
             * @param {string} str
             */
            function norm(str) {
                return str.trim().replace(/\s+/g, " ");
            }
        })()</script>
    <script id="respec-dfn-panel">(() => {
                                               // @ts-check
                                               if (document.respec) {
                                                   document.respec.ready.then(setupPanel);
                                               } else {
                                                   setupPanel();
                                               }

                                               function setupPanel() {
                                                   const listener = panelListener();
                                                   document.body.addEventListener("keydown", listener);
                                                   document.body.addEventListener("click", listener);
                                               }

                                               function panelListener() {
                                                   /** @type {HTMLElement} */
                                                   let panel = null;
                                                   return event => {
                                                       const { target, type } = event;

                                                       if (!(target instanceof HTMLElement)) return;

                                                       // For keys, we only care about Enter key to activate the panel
                                                       // otherwise it's activated via a click.
                                                       if (type === "keydown" && event.key !== "Enter") return;

                                                       const action = deriveAction(event);

                                                       switch (action) {
                                                           case "show": {
                                                               hidePanel(panel);
                                                               /** @type {HTMLElement} */
                                                               const dfn = target.closest("dfn, .index-term");
                                                               panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                                                               const coords = deriveCoordinates(event);
                                                               displayPanel(dfn, panel, coords);
                                                               break;
                                                           }
                                                           case "dock": {
                                                               panel.style.left = null;
                                                               panel.style.top = null;
                                                               panel.classList.add("docked");
                                                               break;
                                                           }
                                                           case "hide": {
                                                               hidePanel(panel);
                                                               panel = null;
                                                               break;
                                                           }
                                                       }
                                                   };
                                               }

                                               /**
                                                * @param {MouseEvent|KeyboardEvent} event
                                                */
                                               function deriveCoordinates(event) {
                                                   const target = /** @type HTMLElement */ (event.target);

                                                   // We prevent synthetic AT clicks from putting
                                                   // the dialog in a weird place. The AT events sometimes
                                                   // lack coordinates, so they have clientX/Y = 0
                                                   const rect = target.getBoundingClientRect();
                                                   if (
                                                       event instanceof MouseEvent &&
                                                       event.clientX >= rect.left &&
                                                       event.clientY >= rect.top
                                                   ) {
                                                       // The event probably happened inside the bounding rect...
                                                       return { x: event.clientX, y: event.clientY };
                                                   }

                                                   // Offset to the middle of the element
                                                   const x = rect.x + rect.width / 2;
                                                   // Placed at the bottom of the element
                                                   const y = rect.y + rect.height;
                                                   return { x, y };
                                               }

                                               /**
                                                * @param {Event} event
                                                */
                                               function deriveAction(event) {
                                                   const target = /** @type {HTMLElement} */ (event.target);
                                                   const hitALink = !!target.closest("a");
                                                   if (target.closest("dfn:not([data-cite]), .index-term")) {
                                                       return hitALink ? "none" : "show";
                                                   }
                                                   if (target.closest(".dfn-panel")) {
                                                       if (hitALink) {
                                                           return target.classList.contains("self-link") ? "hide" : "dock";
                                                       }
                                                       const panel = target.closest(".dfn-panel");
                                                       return panel.classList.contains("docked") ? "hide" : "none";
                                                   }
                                                   if (document.querySelector(".dfn-panel:not([hidden])")) {
                                                       return "hide";
                                                   }
                                                   return "none";
                                               }

                                               /**
                                                * @param {HTMLElement} dfn
                                                * @param {HTMLElement} panel
                                                * @param {{ x: number, y: number }} clickPosition
                                                */
                                               function displayPanel(dfn, panel, { x, y }) {
                                                   panel.hidden = false;
                                                   // distance (px) between edge of panel and the pointing triangle (caret)
                                                   const MARGIN = 20;

                                                   const dfnRects = dfn.getClientRects();
                                                   // Find the `top` offset when the `dfn` can be spread across multiple lines
                                                   let closestTop = 0;
                                                   let minDiff = Infinity;
                                                   for (const rect of dfnRects) {
                                                       const { top, bottom } = rect;
                                                       const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                                                       if (diffFromClickY < minDiff) {
                                                           minDiff = diffFromClickY;
                                                           closestTop = top;
                                                       }
                                                   }

                                                   const top = window.scrollY + closestTop + dfnRects[0].height;
                                                   const left = x - MARGIN;
                                                   panel.style.left = `${left}px`;
                                                   panel.style.top = `${top}px`;

                                                   // Find if the panel is flowing out of the window
                                                   const panelRect = panel.getBoundingClientRect();
                                                   const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                                                   if (panelRect.right > SCREEN_WIDTH) {
                                                       const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                                                       const newCaretOffset = left - newLeft;
                                                       panel.style.left = `${newLeft}px`;
                                                       /** @type {HTMLElement} */
                                                       const caret = panel.querySelector(".caret");
                                                       caret.style.left = `${newCaretOffset}px`;
                                                   }

                                                   // As it's a dialog, we trap focus.
                                                   // TODO: when <dialog> becomes a implemented, we should really
                                                   // use that.
                                                   trapFocus(panel, dfn);
                                               }

                                               /**
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function trapFocus(panel, dfn) {
                                                   /** @type NodeListOf<HTMLAnchorElement> elements */
                                                   const anchors = panel.querySelectorAll("a[href]");
                                                   // No need to trap focus
                                                   if (!anchors.length) return;

                                                   // Move focus to first anchor element
                                                   const first = anchors.item(0);
                                                   first.focus();

                                                   const trapListener = createTrapListener(anchors, panel, dfn);
                                                   panel.addEventListener("keydown", trapListener);

                                                   // Hiding the panel releases the trap
                                                   const mo = new MutationObserver(records => {
                                                       const [record] = records;
                                                       const target = /** @type HTMLElement */ (record.target);
                                                       if (target.hidden) {
                                                           panel.removeEventListener("keydown", trapListener);
                                                           mo.disconnect();
                                                       }
                                                   });
                                                   mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
                                               }

                                               /**
                                                *
                                                * @param {NodeListOf<HTMLAnchorElement>} anchors
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function createTrapListener(anchors, panel, dfn) {
                                                   const lastIndex = anchors.length - 1;
                                                   let currentIndex = 0;
                                                   return event => {
                                                       switch (event.key) {
                                                           // Hitting "Tab" traps us in a nice loop around elements.
                                                           case "Tab": {
                                                               event.preventDefault();
                                                               currentIndex += event.shiftKey ? -1 : +1;
                                                               if (currentIndex < 0) {
                                                                   currentIndex = lastIndex;
                                                               } else if (currentIndex > lastIndex) {
                                                                   currentIndex = 0;
                                                               }
                                                               anchors.item(currentIndex).focus();
                                                               break;
                                                           }

                                                           // Hitting "Enter" on an anchor releases the trap.
                                                           case "Enter":
                                                               hidePanel(panel);
                                                               break;

                                                           // Hitting "Escape" returns focus to dfn.
                                                           case "Escape":
                                                               hidePanel(panel);
                                                               dfn.focus();
                                                               return;
                                                       }
                                                   };
                                               }

                                               /** @param {HTMLElement} panel */
                                               function hidePanel(panel) {
                                                   if (!panel) return;
                                                   panel.hidden = true;
                                                   panel.classList.remove("docked");
                                               }
                                           })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
</body>

</html>