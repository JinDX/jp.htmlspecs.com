<!doctype html>
<html lang="ja-JP">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>インターセクションオブザーバー</title>
    <meta content="WD" name="w3c-status">
    <meta content="Bikeshed version 82ce88815, updated Thu Sep 7 16:33:55 2023 -0700" name="generator">
    <link href="https://www.w3.org/TR/intersection-observer/" rel="canonical">
    <meta content="ef83cd25ec091f25420a0b487c23210b64c9cfff" name="document-revision">
    <style>
        /* Boilerplate: style-autolinks */
        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --selflink-text: black;
                --selflink-bg: silver;
                --selflink-hover-text: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-colors */

        /* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
        :root {
            color-scheme: light dark;

            --text: black;
            --bg: white;

            --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

            --logo-bg: #1a5e9a;
            --logo-active-bg: #c00;
            --logo-text: white;

            --tocnav-normal-text: #707070;
            --tocnav-normal-bg: var(--bg);
            --tocnav-hover-text: var(--tocnav-normal-text);
            --tocnav-hover-bg: #f8f8f8;
            --tocnav-active-text: #c00;
            --tocnav-active-bg: var(--tocnav-normal-bg);

            --tocsidebar-text: var(--text);
            --tocsidebar-bg: #f7f8f9;
            --tocsidebar-shadow: rgba(0, 0, 0, .1);
            --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

            --toclink-text: var(--text);
            --toclink-underline: #3980b5;
            --toclink-visited-text: var(--toclink-text);
            --toclink-visited-underline: #054572;

            --heading-text: #005a9c;

            --hr-text: var(--text);

            --algo-border: #def;

            --del-text: red;
            --del-bg: transparent;
            --ins-text: #080;
            --ins-bg: transparent;

            --a-normal-text: #034575;
            --a-normal-underline: #bbb;
            --a-visited-text: var(--a-normal-text);
            --a-visited-underline: #707070;
            --a-hover-bg: rgba(75%, 75%, 75%, .25);
            --a-active-text: #c00;
            --a-active-underline: #c00;

            --blockquote-border: silver;
            --blockquote-bg: transparent;
            --blockquote-text: currentcolor;

            --issue-border: #e05252;
            --issue-bg: #fbe9e9;
            --issue-text: var(--text);
            --issueheading-text: #831616;

            --example-border: #e0cb52;
            --example-bg: #fcfaee;
            --example-text: var(--text);
            --exampleheading-text: #574b0f;

            --note-border: #52e052;
            --note-bg: #e9fbe9;
            --note-text: var(--text);
            --noteheading-text: hsl(120, 70%, 30%);
            --notesummary-underline: silver;

            --assertion-border: #aaa;
            --assertion-bg: #eee;
            --assertion-text: black;

            --advisement-border: orange;
            --advisement-bg: #fec;
            --advisement-text: var(--text);
            --advisementheading-text: #b35f00;

            --warning-border: red;
            --warning-bg: hsla(40, 100%, 50%, 0.95);
            --warning-text: var(--text);

            --amendment-border: #330099;
            --amendment-bg: #F5F0FF;
            --amendment-text: var(--text);
            --amendmentheading-text: #220066;

            --def-border: #8ccbf2;
            --def-bg: #def;
            --def-text: var(--text);
            --defrow-border: #bbd7e9;

            --datacell-border: silver;

            --indexinfo-text: #707070;

            --indextable-hover-text: black;
            --indextable-hover-bg: #f7f8f9;

            --outdatedspec-bg: rgba(0, 0, 0, .5);
            --outdatedspec-text: black;
            --outdated-bg: maroon;
            --outdated-text: white;
            --outdated-shadow: red;

            --editedrec-bg: darkorange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --text: #ddd;
                --bg: black;

                --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

                --logo-bg: #1a5e9a;
                --logo-active-bg: #c00;
                --logo-text: white;

                --tocnav-normal-text: #999;
                --tocnav-normal-bg: var(--bg);
                --tocnav-hover-text: var(--tocnav-normal-text);
                --tocnav-hover-bg: #080808;
                --tocnav-active-text: #f44;
                --tocnav-active-bg: var(--tocnav-normal-bg);

                --tocsidebar-text: var(--text);
                --tocsidebar-bg: #080808;
                --tocsidebar-shadow: rgba(255, 255, 255, .1);
                --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

                --toclink-text: var(--text);
                --toclink-underline: #6af;
                --toclink-visited-text: var(--toclink-text);
                --toclink-visited-underline: #054572;

                --heading-text: #8af;

                --hr-text: var(--text);

                --algo-border: #456;

                --del-text: #f44;
                --del-bg: transparent;
                --ins-text: #4a4;
                --ins-bg: transparent;

                --a-normal-text: #6af;
                --a-normal-underline: #555;
                --a-visited-text: var(--a-normal-text);
                --a-visited-underline: var(--a-normal-underline);
                --a-hover-bg: rgba(25%, 25%, 25%, .2);
                --a-active-text: #f44;
                --a-active-underline: var(--a-active-text);

                --borderedblock-bg: rgba(255, 255, 255, .05);

                --blockquote-border: silver;
                --blockquote-bg: var(--borderedblock-bg);
                --blockquote-text: currentcolor;

                --issue-border: #e05252;
                --issue-bg: var(--borderedblock-bg);
                --issue-text: var(--text);
                --issueheading-text: hsl(0deg, 70%, 70%);

                --example-border: hsl(50deg, 90%, 60%);
                --example-bg: var(--borderedblock-bg);
                --example-text: var(--text);
                --exampleheading-text: hsl(50deg, 70%, 70%);

                --note-border: hsl(120deg, 100%, 35%);
                --note-bg: var(--borderedblock-bg);
                --note-text: var(--text);
                --noteheading-text: hsl(120, 70%, 70%);
                --notesummary-underline: silver;

                --assertion-border: #444;
                --assertion-bg: var(--borderedblock-bg);
                --assertion-text: var(--text);

                --advisement-border: orange;
                --advisement-bg: #222218;
                --advisement-text: var(--text);
                --advisementheading-text: #f84;

                --warning-border: red;
                --warning-bg: hsla(40, 100%, 20%, 0.95);
                --warning-text: var(--text);

                --amendment-border: #330099;
                --amendment-bg: #080010;
                --amendment-text: var(--text);
                --amendmentheading-text: #cc00ff;

                --def-border: #8ccbf2;
                --def-bg: #080818;
                --def-text: var(--text);
                --defrow-border: #136;

                --datacell-border: silver;

                --indexinfo-text: #aaa;

                --indextable-hover-text: var(--text);
                --indextable-hover-bg: #181818;

                --outdatedspec-bg: rgba(255, 255, 255, .5);
                --outdatedspec-text: black;
                --outdated-bg: maroon;
                --outdated-text: white;
                --outdated-shadow: red;

                --editedrec-bg: darkorange;
            }

            /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
            img {
                background: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-counters */
        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* Boilerplate: style-dfn-panel */
        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dfnpanel-bg: #222;
                --dfnpanel-text: var(--text);
            }
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0 0 0 1em;
            list-style: none;
        }

        .dfn-panel li a {
            white-space: pre;
            display: inline-block;
            max-width: calc(300px - 1.5em - 1em);
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled[role="button"] {
            cursor: pointer;
        }
    </style>
    <style>
        /* Boilerplate: style-dfn-panel */
        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dfnpanel-bg: #222;
                --dfnpanel-text: var(--text);
            }
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0 0 0 1em;
            list-style: none;
        }

        .dfn-panel li a {
            white-space: pre;
            display: inline-block;
            max-width: calc(300px - 1.5em - 1em);
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled[role="button"] {
            cursor: pointer;
        }
    </style>
    <style>
        /* Boilerplate: style-issues */
        a[href].issue-return {
            float: right;
            float: inline-end;
            color: var(--issueheading-text);
            font-weight: bold;
            text-decoration: none;
        }
    </style>
    <style>
        /* Boilerplate: style-md-lists */
        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* Boilerplate: style-mdn-anno */
        :root {
            --mdn-bg: #EEE;
            --mdn-shadow: #999;
            --mdn-nosupport-text: #ccc;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --mdn-bg: #222;
                --mdn-shadow: #444;
                --mdn-nosupport-text: #666;
            }
        }

        .mdn-anno {
            background: var(--mdn-bg, #EEE);
            border-radius: .25em;
            box-shadow: 0 0 3px var(--mdn-shadow, #999);
            color: var(--text, black);
            font: 1em sans-serif;
            hyphens: none;
            max-width: min-content;
            overflow: hidden;
            padding: 0.2em;
            position: absolute;
            right: 0.3em;
            top: auto;
            white-space: nowrap;
            word-wrap: normal;
            z-index: 8;
        }

        .mdn-anno.unpositioned {
            display: none;
        }

        .mdn-anno.overlapping-main {
            opacity: .2;
            transition: opacity .1s;
        }

        .mdn-anno[open] {
            opacity: 1;
            z-index: 9;
            min-width: 9em;
        }

        .mdn-anno:hover {
            opacity: 1;
            outline: var(--text, black) 1px solid;
        }

        .mdn-anno>summary {
            font-weight: normal;
            text-align: right;
            cursor: pointer;
            display: block;
        }

        .mdn-anno>summary>.less-than-two-engines-flag {
            color: red;
            padding-right: 2px;
        }

        .mdn-anno>summary>.all-engines-flag {
            color: green;
            padding-right: 2px;
        }

        .mdn-anno>summary>span {
            color: #fff;
            background-color: #000;
            font-weight: normal;
            font-family: zillaslab, Palatino, "Palatino Linotype", serif;
            padding: 2px 3px 0px 3px;
            line-height: 1.3em;
            vertical-align: top;
        }

        .mdn-anno>.feature {
            margin-top: 20px;
        }

        .mdn-anno>.feature:not(:first-of-type) {
            border-top: 1px solid #999;
            margin-top: 6px;
            padding-top: 2px;
        }

        .mdn-anno>.feature>.less-than-two-engines-text {
            color: red;
        }

        .mdn-anno>.feature>.all-engines-text {
            color: green;
        }

        .mdn-anno>.feature>p {
            font-size: .75em;
            margin-top: 6px;
            margin-bottom: 0;
        }

        .mdn-anno>.feature>p+p {
            margin-top: 3px;
        }

        .mdn-anno>.feature>.support {
            display: block;
            font-size: 0.6em;
            margin: 0;
            padding: 0;
            margin-top: 2px;
        }

        .mdn-anno>.feature>.support+div {
            padding-top: 0.5em;
        }

        .mdn-anno>.feature>.support>hr {
            display: block;
            border: none;
            border-top: 1px dotted #999;
            padding: 3px 0px 0px 0px;
            margin: 2px 3px 0px 3px;
        }

        .mdn-anno>.feature>.support>hr::before {
            content: "";
        }

        .mdn-anno>.feature>.support>span {
            padding: 0.2em 0;
            display: block;
            display: table;
        }

        .mdn-anno>.feature>.support>span.no {
            color: var(--mdn-nosupport-text);
            filter: grayscale(100%);
        }

        .mdn-anno>.feature>.support>span.no::before {
            opacity: 0.5;
        }

        .mdn-anno>.feature>.support>span:first-of-type {
            padding-top: 0.5em;
        }

        .mdn-anno>.feature>.support>span>span {
            padding: 0 0.5em;
            display: table-cell;
        }

        .mdn-anno>.feature>.support>span>span:first-child {
            width: 100%;
        }

        .mdn-anno>.feature>.support>span>span:last-child {
            width: 100%;
            white-space: pre;
            padding: 0;
        }

        .mdn-anno>.feature>.support>span::before {
            content: ' ';
            display: table-cell;
            min-width: 1.5em;
            height: 1.5em;
            background: no-repeat center center;
            background-size: contain;
            text-align: right;
            font-size: 0.75em;
            font-weight: bold;
        }

        .mdn-anno>.feature>.support>.chrome_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
        }

        .mdn-anno>.feature>.support>.firefox_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
        }

        .mdn-anno>.feature>.support>.chrome::before {
            background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
        }

        .mdn-anno>.feature>.support>.edge_blink::before {
            background-image: url(https://resources.whatwg.org/browser-logos/edge.svg);
        }

        .mdn-anno>.feature>.support>.edge::before {
            background-image: url(https://resources.whatwg.org/browser-logos/edge_legacy.svg);
        }

        .mdn-anno>.feature>.support>.firefox::before {
            background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
        }

        .mdn-anno>.feature>.support>.ie::before {
            background-image: url(https://resources.whatwg.org/browser-logos/ie.png);
        }

        .mdn-anno>.feature>.support>.safari_ios::before {
            background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg);
        }

        .mdn-anno>.feature>.support>.nodejs::before {
            background-image: url(https://nodejs.org/static/images/favicons/favicon.ico);
        }

        .mdn-anno>.feature>.support>.opera_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
        }

        .mdn-anno>.feature>.support>.opera::before {
            background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
        }

        .mdn-anno>.feature>.support>.safari::before {
            background-image: url(https://resources.whatwg.org/browser-logos/safari.png);
        }

        .mdn-anno>.feature>.support>.samsunginternet_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/samsung.svg);
        }

        .mdn-anno>.feature>.support>.webview_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/android-webview.png);
        }

        .name-slug-mismatch {
            color: red;
        }

        .caniuse-status:hover {
            z-index: 9;
        }

        /* dt, li, .issue, .note, and .example are "position: relative", so to put annotation at right margin, must move to right of containing block */
        ;

        .h-entry:not(.status-LS) dt>.mdn-anno,
        .h-entry:not(.status-LS) li>.mdn-anno,
        .h-entry:not(.status-LS) .issue>.mdn-anno,
        .h-entry:not(.status-LS) .note>.mdn-anno,
        .h-entry:not(.status-LS) .example>.mdn-anno {
            right: -6.7em;
        }

        .h-entry p+.mdn-anno {
            margin-top: 0;
        }

        h2+.mdn-anno.after {
            margin: -48px 0 0 0;
        }

        h3+.mdn-anno.after {
            margin: -46px 0 0 0;
        }

        h4+.mdn-anno.after {
            margin: -42px 0 0 0;
        }

        h5+.mdn-anno.after {
            margin: -40px 0 0 0;
        }

        h6+.mdn-anno.after {
            margin: -40px 0 0 0;
        }
    </style>
    <style>
        /* Boilerplate: style-selflinks */

        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        .example>a.self-link,
        .note>a.self-link,
        .issue>a.self-link {
            /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
            left: auto;
            right: 0;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* Boilerplate: style-syntax-highlighting */

        pre.idl.highlight {
            background: var(--borderedblock-bg, var(--def-bg));
        }
    </style>
    <style>
        /* Boilerplate: style-syntax-highlighting */

        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        .highlight:not(.idl) {
            background: rgba(0, 0, 0, .03);
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */


        @media (prefers-color-scheme: dark) {
            .highlight:not(.idl) {
                background: rgba(255, 255, 255, .05);
            }

            c-[a] {
                color: #d33682
            }

            /* Keyword.Declaration */
            c-[b] {
                color: #d33682
            }

            /* Keyword.Type */
            c-[c] {
                color: #2aa198
            }

            /* Comment */
            c-[d] {
                color: #2aa198
            }

            /* Comment.Multiline */
            c-[e] {
                color: #268bd2
            }

            /* Name.Attribute */
            c-[f] {
                color: #b58900
            }

            /* Name.Tag */
            c-[g] {
                color: #cb4b16
            }

            /* Name.Variable */
            c-[k] {
                color: #d33682
            }

            /* Keyword */
            c-[l] {
                color: #657b83
            }

            /* Literal */
            c-[m] {
                color: #657b83
            }

            /* Literal.Number */
            c-[n] {
                color: #268bd2
            }

            /* Name */
            c-[o] {
                color: #657b83
            }

            /* Operator */
            c-[p] {
                color: #657b83
            }

            /* Punctuation */
            c-[s] {
                color: #6c71c4
            }

            /* Literal.String */
            c-[t] {
                color: #6c71c4
            }

            /* Literal.String.Single */
            c-[u] {
                color: #6c71c4
            }

            /* Literal.String.Double */
            c-[ch] {
                color: #2aa198
            }

            /* Comment.Hashbang */
            c-[cp] {
                color: #2aa198
            }

            /* Comment.Preproc */
            c-[cpf] {
                color: #2aa198
            }

            /* Comment.PreprocFile */
            c-[c1] {
                color: #2aa198
            }

            /* Comment.Single */
            c-[cs] {
                color: #2aa198
            }

            /* Comment.Special */
            c-[kc] {
                color: #d33682
            }

            /* Keyword.Constant */
            c-[kn] {
                color: #d33682
            }

            /* Keyword.Namespace */
            c-[kp] {
                color: #d33682
            }

            /* Keyword.Pseudo */
            c-[kr] {
                color: #d33682
            }

            /* Keyword.Reserved */
            c-[ld] {
                color: #657b83
            }

            /* Literal.Date */
            c-[nc] {
                color: #268bd2
            }

            /* Name.Class */
            c-[no] {
                color: #268bd2
            }

            /* Name.Constant */
            c-[nd] {
                color: #268bd2
            }

            /* Name.Decorator */
            c-[ni] {
                color: #268bd2
            }

            /* Name.Entity */
            c-[ne] {
                color: #268bd2
            }

            /* Name.Exception */
            c-[nf] {
                color: #268bd2
            }

            /* Name.Function */
            c-[nl] {
                color: #268bd2
            }

            /* Name.Label */
            c-[nn] {
                color: #268bd2
            }

            /* Name.Namespace */
            c-[py] {
                color: #268bd2
            }

            /* Name.Property */
            c-[ow] {
                color: #657b83
            }

            /* Operator.Word */
            c-[mb] {
                color: #657b83
            }

            /* Literal.Number.Bin */
            c-[mf] {
                color: #657b83
            }

            /* Literal.Number.Float */
            c-[mh] {
                color: #657b83
            }

            /* Literal.Number.Hex */
            c-[mi] {
                color: #657b83
            }

            /* Literal.Number.Integer */
            c-[mo] {
                color: #657b83
            }

            /* Literal.Number.Oct */
            c-[sa] {
                color: #6c71c4
            }

            /* Literal.String.Affix */
            c-[sb] {
                color: #6c71c4
            }

            /* Literal.String.Backtick */
            c-[sc] {
                color: #6c71c4
            }

            /* Literal.String.Char */
            c-[dl] {
                color: #6c71c4
            }

            /* Literal.String.Delimiter */
            c-[sd] {
                color: #6c71c4
            }

            /* Literal.String.Doc */
            c-[se] {
                color: #6c71c4
            }

            /* Literal.String.Escape */
            c-[sh] {
                color: #6c71c4
            }

            /* Literal.String.Heredoc */
            c-[si] {
                color: #6c71c4
            }

            /* Literal.String.Interpol */
            c-[sx] {
                color: #6c71c4
            }

            /* Literal.String.Other */
            c-[sr] {
                color: #6c71c4
            }

            /* Literal.String.Regex */
            c-[ss] {
                color: #6c71c4
            }

            /* Literal.String.Symbol */
            c-[fm] {
                color: #268bd2
            }

            /* Name.Function.Magic */
            c-[vc] {
                color: #cb4b16
            }

            /* Name.Variable.Class */
            c-[vg] {
                color: #cb4b16
            }

            /* Name.Variable.Global */
            c-[vi] {
                color: #cb4b16
            }

            /* Name.Variable.Instance */
            c-[vm] {
                color: #cb4b16
            }

            /* Name.Variable.Magic */
            c-[il] {
                color: #657b83
            }

            /* Literal.Number.Integer.Long */
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD" rel="stylesheet">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
        <h1 class="p-name no-ref" id="title">インターセクションオブザーバー</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C作業草案</a>, <time class="dt-updated"
                datetime="2023-10-18">2023年10月18日</time></p>
        <details open>
            <summary>この文書の詳細</summary>
            <div data-fill-with="spec-metadata">
                <dl>
                    <dt>このバージョン:
                    <dd><a class="u-url"
                            href="https://www.w3.org/TR/2023/WD-intersection-observer-20231018/">https://www.w3.org/TR/2023/WD-intersection-observer-20231018/</a>
                    <dt>最新の公開バージョン:
                    <dd><a
                            href="https://www.w3.org/TR/intersection-observer/">https://www.w3.org/TR/intersection-observer/</a>
                    <dt>編集者ドラフト:
                    <dd><a
                            href="https://w3c.github.io/IntersectionObserver/">https://w3c.github.io/IntersectionObserver/</a>
                    <dt>以前のバージョン:
                    <dd><a href="https://www.w3.org/TR/2023/WD-intersection-observer-20231003/"
                            rel="prev">https://www.w3.org/TR/2023/WD-intersection-observer-20231003/</a>
                    <dd><a href="https://www.w3.org/TR/2023/WD-intersection-observer-20231003/"
                            rel="prev">https://www.w3.org/TR/2023/WD-intersection-observer-20231003/</a>
                    <dt>履歴:
                    <dd><a class="u-url"
                            href="https://www.w3.org/standards/history/intersection-observer/">https://www.w3.org/standards/history/intersection-observer/</a>
                    <dt>テストスイート:
                    <dd><a
                            href="http://w3c-test.org/intersection-observer/">http://w3c-test.org/intersection-observer/</a>
                    <dt>フィードバック:
                    <dd><a href="https://github.com/W3C/IntersectionObserver/issues/">GitHub</a>
                    <dt class="editor">編集者:
                    <dd class="editor p-author h-card vcard" data-editor-id="91208"><a class="p-name fn u-email email"
                            href="mailto:szager@google.com">Stefan Zager</a> (<span class="p-org org">Google</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="106537"><a class="p-name fn u-email email"
                            href="mailto:emilio@mozilla.com">Emilio Cobos Álvarez</a> (<span
                            class="p-org org">Mozilla</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="137959"><a class="p-name fn u-email email"
                            href="mailto:tcaptan@google.com">Traian Captan</a> (<span class="p-org org">Google</span>)
                    <dt class="editor">前編集者:
                    <dd class="editor p-author h-card vcard" data-editor-id="73819"><a class="p-name fn u-email email"
                            href="mailto:mpb@google.com">Michael Blain</a> (<span class="p-org org">Google</span>)
                </dl>
            </div>
        </details>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2023 <a
                href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr
                title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/Consortium/Legal/copyright-software" rel="license"
                title="W3C Software and Document License">permissive document license</a> rules apply. </p>
        <hr title="Separator for header">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">概要</span></h2>
        <p>この仕様は、DOM要素（「ターゲット」）の可視性と位置を、包含要素またはトップレベルのビューポート（「ルート」）に対して把握するために使用できるAPIについて説明します。位置情報は非同期で提供され、要素の可視性の把握や、DOMコンテンツの事前読み込み・遅延読み込みの実装に役立ちます。
        </p>
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">この文書のステータス</span></h2>
    <div data-fill-with="status">
        <p> <em>このセクションでは、公開時点の文書のステータスについて説明します。現行の<abbr
                    title="World Wide Web Consortium">W3C</abbr>出版物一覧やこの技術レポートの最新版は、<a
                    href="https://www.w3.org/TR/"><abbr
                        title="World Wide Web Consortium">W3C</abbr>技術レポート索引</a>（https://www.w3.org/TR/）で確認できます。</em>
        </p>
        <p> この文書は、<a href="https://www.w3.org/groups/wg/webapps">Web Applications Working
                Group</a>により作業草案として公開されました。本書は<abbr title="World Wide Web Consortium">W3C</abbr>勧告となることを目的としています。 </p>
        <p></p>
        <p> この文書は、<a href="https://www.w3.org/groups/wg/webapps">Web Applications Working Group</a>によって、<a
                href="https://www.w3.org/2023/Process-20230612/#recs-and-notes">勧告トラック</a>を用いて作業草案として公開されました。

            仕様へのフィードバックやコメントは歓迎します。<a href="https://github.com/W3C/IntersectionObserver/issues">GitHub
                issues</a>をご利用ください。過去の議論は<a
                href="https://lists.w3.org/Archives/Public/public-webapps/">public-webapps@w3.org アーカイブ</a>で閲覧できます。</p>
        <p>作業草案として公開されていることは、<abbr
                title="World Wide Web Consortium">W3C</abbr>およびその会員による承認を意味しません。本書は草案文書であり、今後随時更新・置換・廃止される可能性があります。本書を進行中の作業以外として引用するのは不適切です。
        </p>
        <p>この文書は、<a href="https://www.w3.org/Consortium/Patent-Policy-20200915/"><abbr
                    title="World Wide Web Consortium">W3C</abbr>特許ポリシー</a>に基づき、グループによって作成されました。<abbr
                title="World Wide Web Consortium">W3C</abbr>は、グループ成果物に関連する特許開示の<a
                href="https://www.w3.org/2004/01/pp-impl/114929/status"
                rel="disclosure">公開リスト</a>を管理しています。また、そのページでは特許の開示方法についても説明されています。特許の実際の知識を有し、その特許に<a
                href="https://www.w3.org/Consortium/Patent-Policy-20200915/#def-essential">必要なクレーム</a>が含まれていると考える場合は、<a
                href="https://www.w3.org/Consortium/Patent-Policy-20200915/#sec-Disclosure">W3C特許ポリシー第6節</a>に従い情報を開示する必要があります。
        </p>
        <p>この文書は、<a href="https://www.w3.org/2023/Process-20230612/"
                id="w3c_process_revision">2023年6月12日W3Cプロセス文書</a>に従って管理されています。</p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目次</h2>
        <ol class="toc" role="directory">
            <li><a href="#introduction"><span class="secno">1</span> <span class="content">はじめに</span></a>
            <li>
                <a href="#intersection-observer-api"><span class="secno">2</span> <span
                        class="content">インターセクションオブザーバー</span></a>
                <ol class="toc">
                    <li><a href="#intersection-observer-callback"><span class="secno">2.1</span> <span class="content">
                                IntersectionObserverCallback</span></a>
                    <li><a href="#intersection-observer-interface"><span class="secno">2.2</span> <span class="content">
                                IntersectionObserverインターフェース</span></a>
                    <li><a href="#intersection-observer-entry"><span class="secno">2.3</span> <span class="content">
                                IntersectionObserverEntryインターフェース</span></a>
                    <li><a href="#intersection-observer-init"><span class="secno">2.4</span> <span class="content">
                                IntersectionObserverInit辞書</span></a>
                </ol>
            <li>
                <a href="#intersection-observer-processing-model"><span class="secno">3</span> <span class="content">
                        処理モデル</span></a>
                <ol class="toc">
                    <li>
                        <a href="#defines"><span class="secno">3.1</span> <span class="content">内部スロット定義</span></a>
                        <ol class="toc">
                            <li><a href="#document-defines"><span class="secno">3.1.1</span> <span class="content">
                                        ドキュメント</span></a>
                            <li><a href="#element-private-slots"><span class="secno">3.1.2</span> <span class="content">
                                        要素</span></a>
                            <li><a href="#intersection-observer-private-slots"><span class="secno">3.1.3</span> <span
                                        class="content"> IntersectionObserver</span></a>
                        </ol>
                    <li>
                        <a href="#algorithms"><span class="secno">3.2</span> <span class="content">
                                アルゴリズム</span></a>
                        <ol class="toc">
                            <li><a href="#initialize-new-intersection-observer"><span class="secno">3.2.1</span> <span
                                        class="content">新しいIntersectionObserverの初期化</span></a>
                            <li><a href="#observe-target-element"><span class="secno">3.2.2</span> <span
                                        class="content">ターゲットElementの監視</span></a>
                            <li><a href="#unobserve-target-element"><span class="secno">3.2.3</span> <span
                                        class="content">ターゲットElementの監視解除</span></a>
                            <li><a href="#queue-intersection-observer-task"><span class="secno">3.2.4</span> <span
                                        class="content"> Intersection Observerタスクのキューイング</span></a>
                            <li><a href="#notify-intersection-observers-algo"><span class="secno">3.2.5</span> <span
                                        class="content"> Intersection Observerへの通知</span></a>
                            <li><a href="#queue-intersection-observer-entry-algo"><span class="secno">3.2.6</span> <span
                                        class="content"> IntersectionObserverEntryのキューイング</span></a>
                            <li><a href="#calculate-intersection-rect-algo"><span class="secno">3.2.7</span> <span
                                        class="content">ターゲットElementとルートの交差領域の計算</span></a>
                            <li><a href="#update-intersection-observations-algo"><span class="secno">3.2.8</span> <span
                                        class="content"> インターセクション監視の更新手順の実行</span></a>
                        </ol>
                    <li><a href="#lifetime"><span class="secno">3.3</span> <span class="content">
                                IntersectionObserverのライフタイム</span></a>
                    <li>
                        <a href="#external-spec-integrations"><span class="secno">3.4</span> <span class="content">
                                外部仕様との統合</span></a>
                        <ol class="toc">
                            <li><a href="#event-loop"><span class="secno">3.4.1</span> <span class="content">HTML処理モデル:
                                        イベントループ</span></a>
                            <li><a href="#pending-initial-observation"><span class="secno">3.4.2</span> <span
                                        class="content">初期IntersectionObserverターゲットの保留</span></a>
                        </ol>
                </ol>
            <li><a href="#accessibility"><span class="secno">4</span> <span class="content">アクセシビリティに関する考慮事項</span></a>
            <li><a href="#privacy"><span class="secno">5</span> <span class="content">プライバシーとセキュリティ</span></a>
            <li><a href="#internationalization"><span class="secno">6</span> <span class="content">国際化</span></a>
            <li><a href="#acknowledgements"><span class="secno">7</span> <span class="content">謝辞</span></a>
            <li>
                <a href="#w3c-conformance"><span class="secno"></span> <span class="content">適合性</span></a>
                <ol class="toc">
                    <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">文書の規約</span></a>
                    <li><a href="#w3c-conformant-algorithms"><span class="secno"></span> <span
                                class="content">適合性のあるアルゴリズム</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">この仕様で定義されている用語</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">参照によって定義されている用語</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">規定参考文献</span></a>
                </ol>
            <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL索引</span></a>
        </ol>
    </nav>
    <main>
        <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span
                class="content">はじめに</span><a class="self-link" href="#introduction"></a></h2>
        <p>ウェブの従来の位置計算メカニズムは、DOMの状態を明示的にクエリすることに依存しており、これは（高コストな）スタイル再計算やレイアウトを引き起こすことで知られています。そして、多くの場合、この情報を継続的にポーリングすることによる大きなパフォーマンスのオーバーヘッドの原因となっています。
        </p>
        <p>しかし、これらの挙動に依存した一般的な慣習が発展してきました。例として、以下のようなものがあります：</p>
        <ul>
            <li data-md>
                <p>DOMやデータのカスタム事前・遅延読み込みの構築。</p>
            <li data-md>
                <p>データにバインドされた高性能なスクロールリストの実装。これらのリストはデータセットの一部のみをロード・レンダリングします。モバイルインタラクションの中心的なイディオムです。</p>
            <li data-md>
                <p>要素の可視性の計算。特に、<a
                        href="http://www.iab.net/iablog/2014/03/viewability-has-arrived-what-you-need-to-know-to-see-through-this-sea-change.html">
                        広告ネットワークではインプレッションの収益化のために広告の「可視性」報告が要求されるようになりました</a>。これにより、多くのサイトがスクロールハンドラを乱用するようになり
                    （スクロール時にジャンクが発生）、<a
                        href="http://gent.ilcore.com/2011/03/how-not-to-trigger-layout-in-webkit.html">同期レイアウトによるリードバック</a>（rAFループで不要なクリティカルワークを発生）、
                    さらには「真の」要素の可視性を計算するためにプラグインベースの特殊なソリューションを使うようになりました（プラグインアーキテクチャのオーバーヘッドも伴います）。</p>
        </ul>
        <p>これらのユースケースにはいくつかの共通点があります：</p>
        <ol>
            <li data-md>
                <p>これらは、個々の要素の状態を他の要素（またはグローバルな<a data-link-type="dfn"
                        href="https://drafts.csswg.org/css2/visuren.html#viewport"
                        id="ref-for-viewport">ビューポート</a>）に対する受動的な「クエリ」として表現できます。</p>
            <li data-md>
                <p>厳密なレイテンシ要件を課しません。つまり、情報は非同期（例えば別スレッドから）で提供されても問題ありません。</p>
            <li data-md>
                <p>これらは既存のウェブプラットフォーム機能のほぼすべての組み合わせで十分にサポートされていないため、広く使われているにも関わらず開発者に多大な労力を要求します。</p>
        </ol>
        <p>注目すべき非目的は、実際に表示された内容についてのピクセル単位の正確な情報です（これは、フィルタ・webgl・その他の機能の影響下で、特定のブラウザアーキテクチャでは効率的に取得するのが非常に困難な場合があります）。
            これらすべてのシナリオにおいて、情報は少し遅れて、完璧な合成結果データがなくても有用です。</p>
        <p>Intersection Observer APIは、上記の問題に対処し、開発者がある要素の位置を他の要素やグローバルな<a data-link-type="dfn"
                href="https://drafts.csswg.org/css2/visuren.html#viewport"
                id="ref-for-viewport①">ビューポート</a>に対して非同期にクエリできる新しい方法を提供します。
            非同期での情報提供は、高コストなDOMやスタイルのクエリ、継続的なポーリング、カスタムプラグインの使用を不要にします。
            これらの手法を排除することで、アプリケーションのCPU・GPU・エネルギー消費を大幅に削減できます。</p>
        <div class="example" id="example-ffe37088">
            <a class="self-link" href="#example-ffe37088"></a>
            <pre class="highlight"><c- a>var</c-> observer <c- o>=</c-> <c- ow>new</c-> IntersectionObserver<c- p>(</c->changes <c- p>=></c-> <c- p>{</c->
  <c- k>for</c-> <c- p>(</c-><c- a>const</c-> change <c- k>of</c-> changes<c- p>)</c-> <c- p>{</c->
    console<c- p>.</c->log<c- p>(</c->change<c- p>.</c->time<c- p>);</c->               <c- c1>// 変更が発生した時刻のタイムスタンプ</c->
    console<c- p>.</c->log<c- p>(</c->change<c- p>.</c->rootBounds<c- p>);</c->         <c- c1>// ルートの切り取られていない領域</c->
    console<c- p>.</c->log<c- p>(</c->change<c- p>.</c->boundingClientRect<c- p>);</c-> <c- c1>// target.getBoundingClientRect()</c->
    console<c- p>.</c->log<c- p>(</c->change<c- p>.</c->intersectionRect<c- p>);</c->   <c- c1>// boundingClientRect（包含ブロックの先祖でクリップされ、rootBoundsと交差）</c->
    console<c- p>.</c->log<c- p>(</c->change<c- p>.</c->intersectionRatio<c- p>);</c->  <c- c1>// intersectionRectの面積とboundingClientRectの面積の比率</c->
    console<c- p>.</c->log<c- p>(</c->change<c- p>.</c->target<c- p>);</c->             <c- c1>// Elementターゲット</c->
  <c- p>}</c->
<c- p>},</c-> <c- p>{});</c->

<c- c1>// 特定のターゲットElementのインターセクションイベントを監視する。</c->
observer<c- p>.</c->observe<c- p>(</c->target<c- p>);</c->

<c- c1>// 特定のターゲットElementのインターセクションイベントの監視を停止する。</c->
observer<c- p>.</c->unobserve<c- p>(</c->target<c- p>);</c->

<c- c1>// すべてのターゲット要素のしきい値イベントの監視を停止する。</c->
observer<c- p>.</c->disconnect<c- p>();</c->
</pre>
        </div>
        <h2 class="heading settled" data-level="2" id="intersection-observer-api"><span class="secno">2. </span><span
                class="content">インターセクションオブザーバー</span><a class="self-link" href="#intersection-observer-api"></a>
        </h2>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="intersection-observer">Intersection
                Observer</dfn> APIは、開発者が
            <dfn class="dfn-paneled" data-dfn-for="IntersectionObserver" data-dfn-type="dfn" data-noexport
                id="intersectionobserver-target">ターゲット</dfn>DOM
            要素の可視性と位置を<a data-link-type="dfn" href="#intersectionobserver-intersection-root"
                id="ref-for-intersectionobserver-intersection-root">インターセクションルート</a>に対して把握できるようにします。
        </p>
        <h3 class="heading settled" data-level="2.1" id="intersection-observer-callback"><span class="secno">2.1.
            </span><span class="content"> IntersectionObserverCallback</span><a class="self-link"
                href="#intersection-observer-callback"></a></h3>
        <pre class="idl highlight def"><c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-intersectionobservercallback"><code><c- g>IntersectionObserverCallback</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a> (<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#intersectionobserverentry" id="ref-for-intersectionobserverentry"><c- n>IntersectionObserverEntry</c-></a>> <dfn class="idl-code" data-dfn-for="IntersectionObserverCallback" data-dfn-type="argument" data-export id="dom-intersectionobservercallback-entries"><code><c- g>entries</c-></code><a class="self-link" href="#dom-intersectionobservercallback-entries"></a></dfn>, <a data-link-type="idl-name" href="#intersectionobserver" id="ref-for-intersectionobserver"><c- n>IntersectionObserver</c-></a> <dfn class="idl-code" data-dfn-for="IntersectionObserverCallback" data-dfn-type="argument" data-export id="dom-intersectionobservercallback-observer"><code><c- g>observer</c-></code><a class="self-link" href="#dom-intersectionobservercallback-observer"></a></dfn>);
</pre>
        <p>このコールバックは、<a data-link-type="dfn" href="#intersectionobserver-target"
                id="ref-for-intersectionobserver-target">ターゲット</a>の
            <a data-link-type="dfn" href="#intersectionobserver-intersection-root"
                id="ref-for-intersectionobserver-intersection-root①">インターセクションルート</a>との交差状態に変更があった場合、<a
                data-link-type="dfn" href="#intersection-observer-processing-model"
                id="ref-for-intersection-observer-processing-model">処理モデル</a>に従って呼び出されます。
        </p>
        <h3 class="heading settled" data-level="2.2" id="intersection-observer-interface"><span class="secno">2.2.
            </span><span class="content">IntersectionObserverインターフェース</span><a class="self-link"
                href="#intersection-observer-interface"></a></h3>
        <p><code
                class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver①">IntersectionObserver</a></code>
            インターフェースは、<a data-link-type="dfn" href="#intersectionobserver-intersection-root"
                id="ref-for-intersectionobserver-intersection-root②">インターセクションルート</a>と1つ以上の <a data-link-type="dfn"
                href="#intersectionobserver-target" id="ref-for-intersectionobserver-target①">ターゲット</a> <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element">Element</a></code>
            の交差状態の変化を監視するために使用できます。</p>
        <p><dfn class="dfn-paneled" data-dfn-for="IntersectionObserver" data-dfn-type="dfn" data-noexport
                id="intersectionobserver-intersection-root">インターセクションルート</dfn>は、<code
                class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②">IntersectionObserver</a></code>
            の <code
                class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-root" id="ref-for-dom-intersectionobserver-root">root</a></code>
            属性が <code>null</code> でなければその値です。
            <code>null</code> の場合は、<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context"
                id="ref-for-top-level-browsing-context">トップレベル閲覧コンテキスト</a>の <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2">document</a></code>
            ノードとなり、
            これは <dfn class="dfn-paneled" data-dfn-for="IntersectionObserver" data-dfn-type="dfn" data-noexport
                id="intersectionobserver-implicit-root">暗黙的ルート</dfn>と呼ばれます。
        </p>
        <p><code
                class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver③">IntersectionObserver</a></code>
            で <code
                class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-root" id="ref-for-dom-intersectionobserver-root①">root</a></code>
            が <code>null</code> でないものは <dfn class="dfn-paneled" data-dfn-for="IntersectionObserver" data-dfn-type="dfn"
                data-noexport id="intersectionobserver-explicit-root-observer">明示的ルートオブザーバー</dfn> と呼ばれます。
            この場合、<a data-link-type="dfn" href="#intersectionobserver-target"
                id="ref-for-intersectionobserver-target②">ターゲット</a> <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①">Element</a></code>
            は <a data-link-type="dfn" href="https://drafts.csswg.org/css-display/#containing-block-chain"
                id="ref-for-containing-block-chain">包含ブロックチェーン</a>内で <code
                class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-root" id="ref-for-dom-intersectionobserver-root②">root</a></code>
            の子孫である必要があります。
            <code
                class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver④">IntersectionObserver</a></code>
            で <code
                class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-root" id="ref-for-dom-intersectionobserver-root③">root</a></code>
            が <code>null</code> のものは <dfn class="dfn-paneled" data-dfn-for="IntersectionObserver" data-dfn-type="dfn"
                data-noexport id="intersectionobserver-implicit-root-observer">暗黙的ルートオブザーバー</dfn> と呼ばれます。
            <a data-link-type="dfn" href="#intersectionobserver-implicit-root-observer"
                id="ref-for-intersectionobserver-implicit-root-observer">暗黙的ルートオブザーバー</a>の有効な <a data-link-type="dfn"
                href="#intersectionobserver-target" id="ref-for-intersectionobserver-target③">ターゲット</a>は、
            <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context"
                id="ref-for-top-level-browsing-context①">トップレベル閲覧コンテキスト</a>内のすべての <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element②">Element</a></code>、
            および <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/browsers.html#list-of-the-descendant-browsing-contexts"
                id="ref-for-list-of-the-descendant-browsing-contexts">子孫閲覧コンテキストのリスト</a>に含まれる
            <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context"
                id="ref-for-nested-browsing-context">ネストされた閲覧コンテキスト</a>内のすべての <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element③">Element</a></code>
            です。
        </p>
        <p><a data-link-type="dfn" href="#intersectionobserver-implicit-root-observer"
                id="ref-for-intersectionobserver-implicit-root-observer①">暗黙的ルートオブザーバー</a>を扱う際、APIは次の区別を行います。
            <a data-link-type="dfn" href="#intersectionobserver-target"
                id="ref-for-intersectionobserver-target④">ターゲット</a>の <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object"
                id="ref-for-relevant-settings-object">関連設定オブジェクト</a> の <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/origin.html#origin" id="ref-for-origin">オリジン</a> が <a
                data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin-domain"
                id="ref-for-same-origin-domain">同一オリジンドメイン</a>であり、
            <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin"
                id="ref-for-concept-environment-top-level-origin">トップレベルオリジン</a>と一致している場合は <dfn class="dfn-paneled"
                data-dfn-for="IntersectionObserver" data-dfn-type="dfn" data-noexport
                id="intersectionobserver-same-origin-domain-target">同一オリジンドメインターゲット</dfn> となります。
            それ以外は <dfn class="dfn-paneled" data-dfn-for="IntersectionObserver" data-dfn-type="dfn" data-noexport
                id="intersectionobserver-cross-origin-domain-target">クロスオリジンドメインターゲット</dfn> となります。
            <a data-link-type="dfn" href="#intersectionobserver-explicit-root-observer"
                id="ref-for-intersectionobserver-explicit-root-observer">明示的ルートオブザーバー</a>の <a data-link-type="dfn"
                href="#intersectionobserver-target" id="ref-for-intersectionobserver-target⑤">ターゲット</a> も <a
                data-link-type="dfn" href="#intersectionobserver-same-origin-domain-target"
                id="ref-for-intersectionobserver-same-origin-domain-target">同一オリジンドメインターゲット</a> となります。
            これは <a data-link-type="dfn" href="#intersectionobserver-target"
                id="ref-for-intersectionobserver-target⑥">ターゲット</a>が <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/dom.html#document" id="ref-for-document">document</a> と <a
                data-link-type="dfn" href="#intersectionobserver-intersection-root"
                id="ref-for-intersectionobserver-intersection-root③">インターセクションルート</a>が同じである必要があるためです。
        </p>
        <p class="note" role="note"><span class="marker">注:</span> <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#mutationobserver" id="ref-for-mutationobserver">MutationObserver</a></code>では、
            <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dictdef-mutationobserverinit" id="ref-for-dictdef-mutationobserverinit">MutationObserverInit</a></code>
            のオプションは
            <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-mutationobserver-observe" id="ref-for-dom-mutationobserver-observe">observe()</a></code>
            に渡されますが、<code
                class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver⑤">IntersectionObserver</a></code>
            では
            コンストラクタに渡されます。MutationObserverの場合、各<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#node" id="ref-for-node">Node</a></code>
            ごとに異なるフィルタ属性セットを持つことができますが、
            IntersectionObserverでは、同じオプションセットで複数のターゲットを追跡するために単一のオブザーバーを使うことも、各ターゲットごとに異なるオブザーバーを使うこともできます。
            <code
                class="idl"><a data-link-type="idl" href="#dom-intersectionobserverinit-rootmargin" id="ref-for-dom-intersectionobserverinit-rootmargin">rootMargin</a></code>
            や<code
                class="idl"><a data-link-type="idl" href="#dom-intersectionobserverinit-threshold" id="ref-for-dom-intersectionobserverinit-threshold">threshold</a></code>
            を各ターゲットごとに設定するのは、追加ユースケースを解決せず複雑さが増すだけです。必要に応じて、将来的にobserve()ごとのオプション提供も検討されます。
        </p>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="intersectionobserver"><code><c- g>IntersectionObserver</c-></code></dfn> {
  <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="constructor" data-export data-lt="IntersectionObserver(callback, options)|constructor(callback, options)|IntersectionObserver(callback)|constructor(callback)" id="dom-intersectionobserver-intersectionobserver"><code><c- g>constructor</c-></code></dfn>(<a data-link-type="idl-name" href="#callbackdef-intersectionobservercallback" id="ref-for-callbackdef-intersectionobservercallback"><c- n>IntersectionObserverCallback</c-></a> <dfn class="idl-code" data-dfn-for="IntersectionObserver/IntersectionObserver(callback, options), IntersectionObserver/constructor(callback, options), IntersectionObserver/IntersectionObserver(callback), IntersectionObserver/constructor(callback)" data-dfn-type="argument" data-export id="dom-intersectionobserver-intersectionobserver-callback-options-callback"><code><c- g>callback</c-></code><a class="self-link" href="#dom-intersectionobserver-intersectionobserver-callback-options-callback"></a></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-intersectionobserverinit" id="ref-for-dictdef-intersectionobserverinit"><c- n>IntersectionObserverInit</c-></a> <dfn class="idl-code" data-dfn-for="IntersectionObserver/IntersectionObserver(callback, options), IntersectionObserver/constructor(callback, options), IntersectionObserver/IntersectionObserver(callback), IntersectionObserver/constructor(callback)" data-dfn-type="argument" data-export id="dom-intersectionobserver-intersectionobserver-callback-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-intersectionobserver-intersectionobserver-callback-options-options"></a></dfn> = {});
  <c- b>readonly</c-> <c- b>attribute</c-> (<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element④"><c- n>Element</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①"><c- n>Document</c-></a>)? <a class="idl-code" data-link-type="attribute" data-readonly data-type="(Element or Document)?" href="#dom-intersectionobserver-root" id="ref-for-dom-intersectionobserver-root④"><c- g>root</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-intersectionobserver-rootmargin" id="ref-for-dom-intersectionobserver-rootmargin"><c- g>rootMargin</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-intersectionobserver-scrollmargin" id="ref-for-dom-intersectionobserver-scrollmargin"><c- g>scrollMargin</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array" id="ref-for-idl-frozen-array"><c- b>FrozenArray</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double"><c- b>double</c-></a>> <a class="idl-code" data-link-type="attribute" data-readonly data-type="FrozenArray<double>" href="#dom-intersectionobserver-thresholds" id="ref-for-dom-intersectionobserver-thresholds"><c- g>thresholds</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-intersectionobserver-observe" id="ref-for-dom-intersectionobserver-observe①"><c- g>observe</c-></a>(<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑤"><c- n>Element</c-></a> <dfn class="idl-code" data-dfn-for="IntersectionObserver/observe(target)" data-dfn-type="argument" data-export id="dom-intersectionobserver-observe-target-target"><code><c- g>target</c-></code><a class="self-link" href="#dom-intersectionobserver-observe-target-target"></a></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined②"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-intersectionobserver-unobserve" id="ref-for-dom-intersectionobserver-unobserve"><c- g>unobserve</c-></a>(<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑥"><c- n>Element</c-></a> <dfn class="idl-code" data-dfn-for="IntersectionObserver/unobserve(target)" data-dfn-type="argument" data-export id="dom-intersectionobserver-unobserve-target-target"><code><c- g>target</c-></code><a class="self-link" href="#dom-intersectionobserver-unobserve-target-target"></a></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined③"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-intersectionobserver-disconnect" id="ref-for-dom-intersectionobserver-disconnect"><c- g>disconnect</c-></a>();
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#intersectionobserverentry" id="ref-for-intersectionobserverentry①"><c- n>IntersectionObserverEntry</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-intersectionobserver-takerecords" id="ref-for-dom-intersectionobserver-takerecords"><c- g>takeRecords</c-></a>();
};
</pre>
        <div>
            <dl>
                <dt data-md><dfn class="idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="constructor"
                        data-export data-lt="IntersectionObserver(callback, options = {})"
                        id="dom-intersectionobserver-intersectionobserver-callback-options"><code> new IntersectionObserver(callback, options)</code><a
                            class="self-link"
                            href="#dom-intersectionobserver-intersectionobserver-callback-options"></a></dfn>
                <dd data-md>
                    <p><a data-link-type="dfn" href="#initialize-a-new-intersectionobserver"
                            id="ref-for-initialize-a-new-intersectionobserver">新しいIntersectionObserverの初期化</a>
                        アルゴリズムを<var>callback</var>と<var>options</var>を指定して実行した結果を返します。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="method"
                        data-export id="dom-intersectionobserver-observe"><code>observe(target)</code></dfn>
                <dd data-md>
                    <p><a data-link-type="dfn" href="#observe-a-target-element"
                            id="ref-for-observe-a-target-element">ターゲットElementの監視</a>アルゴリズムを<var>this</var>と<var>target</var>
                        で実行します。
                    </p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="method"
                        data-export id="dom-intersectionobserver-unobserve"><code>unobserve(target)</code></dfn>
                <dd data-md>
                    <p><a data-link-type="dfn" href="#unobserve-a-target-element"
                            id="ref-for-unobserve-a-target-element">ターゲットElementの監視解除</a>アルゴリズムを<var>this</var>と<var>target</var>
                        で実行します。
                    </p>
                    <p class="note" role="note"><span class="marker">注:</span> <code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#mutationobserver" id="ref-for-mutationobserver①">MutationObserver</a></code>
                        には<code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-unobserve" id="ref-for-dom-intersectionobserver-unobserve①">unobserve()</a></code>
                        は実装されていません。
                        <code
                            class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver⑦">IntersectionObserver</a></code>
                        では、
                        <code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-unobserve" id="ref-for-dom-intersectionobserver-unobserve②">unobserve()</a></code>
                        は遅延読み込みユースケースへの対応です。<var>target</var>が表示された後は、追跡する必要がありません。
                        全<var>target</var>で<code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-disconnect" id="ref-for-dom-intersectionobserver-disconnect①">disconnect()</a></code>
                        を呼び出して残りを<code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-observe" id="ref-for-dom-intersectionobserver-observe②">observe()</a></code>
                        するか、各<var>target</var>ごとに別の<code
                            class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver⑧">IntersectionObserver</a></code>
                        を作るのは手間です。
                    </p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="method"
                        data-export id="dom-intersectionobserver-disconnect"><code>disconnect()</code></dfn>
                <dd data-md>
                    <p><var>this</var>の内部<code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-observationtargets-slot" id="ref-for-dom-intersectionobserver-observationtargets-slot">[[ObservationTargets]]</a></code>
                        スロット内の各<var>target</var>について：</p>
                    <ol>
                        <li data-md>
                            <p><var>target</var>の内部<code
                                    class="idl"><a data-link-type="idl" href="#dom-element-registeredintersectionobservers-slot" id="ref-for-dom-element-registeredintersectionobservers-slot">[[RegisteredIntersectionObservers]]</a></code>
                                スロットから、<code
                                    class="idl"><a data-link-type="idl" href="#intersectionobserverregistration" id="ref-for-intersectionobserverregistration">IntersectionObserverRegistration</a></code>
                                レコードで<code
                                    class="idl"><a data-link-type="idl" href="#dom-intersectionobserverregistration-observer" id="ref-for-dom-intersectionobserverregistration-observer">observer</a></code>
                                プロパティが<var>this</var>に一致するものを削除します。</p>
                        <li data-md>
                            <p><var>this</var>の内部<code
                                    class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-observationtargets-slot" id="ref-for-dom-intersectionobserver-observationtargets-slot①">[[ObservationTargets]]</a></code>
                                スロットから<var>target</var>を削除します。</p>
                    </ol>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="method"
                        data-export id="dom-intersectionobserver-takerecords"><code>takeRecords()</code></dfn>
                <dd data-md>
                    <ol>
                        <li data-md>
                            <p><var>this</var>の内部<code
                                    class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-queuedentries-slot" id="ref-for-dom-intersectionobserver-queuedentries-slot">[[QueuedEntries]]</a></code>
                                スロットのコピーを<var>queue</var>とします。</p>
                        <li data-md>
                            <p><var>this</var>の内部<code
                                    class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-queuedentries-slot" id="ref-for-dom-intersectionobserver-queuedentries-slot①">[[QueuedEntries]]</a></code>
                                スロットをクリアします。</p>
                        <li data-md>
                            <p><var>queue</var>を返します。</p>
                    </ol>
            </dl>
        </div>
        <div>
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver"
                        data-dfn-type="attribute" data-export
                        id="dom-intersectionobserver-root"><code>root</code></dfn>, <span>型は<code
                            class="idl-code">(Element or Document)</code>、readonly、nullable</span>
                <dd data-md>
                    <p><code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserverinit-root" id="ref-for-dom-intersectionobserverinit-root">root</a></code>
                        は<code
                            class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver⑨">IntersectionObserver</a></code>
                        のコンストラクタに渡された値、渡されていなければ<code>null</code>です。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver"
                        data-dfn-type="attribute" data-export
                        id="dom-intersectionobserver-rootmargin"><code>rootMargin</code></dfn>, <span>型は<a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-DOMString"
                            id="ref-for-idl-DOMString②">DOMString</a>、readonly</span>
                <dd data-md>
                    <p><a data-link-type="dfn" href="#intersectionobserver-root-intersection-rectangle"
                            id="ref-for-intersectionobserver-root-intersection-rectangle">ルート交差矩形</a>に適用されるオフセットで、
                        交差判定に使うボックスを拡張・縮小します。<b>これらのオフセットは<a data-link-type="dfn"
                                href="#intersectionobserver-same-origin-domain-target"
                                id="ref-for-intersectionobserver-same-origin-domain-target①">同一オリジンドメインターゲット</a>の
                            処理時のみ適用され、<a data-link-type="dfn" href="#intersectionobserver-cross-origin-domain-target"
                                id="ref-for-intersectionobserver-cross-origin-domain-target">クロスオリジンドメインターゲット</a>
                            には無視されます。</b></p>
                    <p>取得時は、<code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-rootmargin-slot" id="ref-for-dom-intersectionobserver-rootmargin-slot">[[rootMargin]]</a></code>
                        の各要素をスペース区切りで直列化した結果を返します。ピクセル長は数値+"px"、パーセンテージは数値+"%"となります。
                        これは、<var>options</var>.<code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserverinit-rootmargin" id="ref-for-dom-intersectionobserverinit-rootmargin①">rootMargin</a></code>
                        に渡された値と必ずしも一致しません。何も渡されなかった場合は"0px 0px 0px 0px"になります。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver"
                        data-dfn-type="attribute" data-export
                        id="dom-intersectionobserver-scrollmargin"><code>scrollMargin</code></dfn>, <span>型は<a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-DOMString"
                            id="ref-for-idl-DOMString③">DOMString</a>、readonly</span>
                <dd data-md>
                    <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scrollport"
                            id="ref-for-scrollport">インターセクションルート</a>から<a data-link-type="dfn"
                            href="#intersectionobserver-target"
                            id="ref-for-intersectionobserver-target⑧">ターゲット</a>までのパス上の
                        scrollportに適用されるオフセットで、交差判定に使うclip矩形を拡張・縮小します。</p>
                    <p>取得時は、<code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-scrollmargin-slot" id="ref-for-dom-intersectionobserver-scrollmargin-slot">[[scrollMargin]]</a></code>
                        の各要素をスペース区切りで直列化した結果を返します。ピクセル長は数値+"px"、パーセンテージは数値+"%"となります。
                        これは<var>options</var>.<code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserverinit-scrollmargin" id="ref-for-dom-intersectionobserverinit-scrollmargin">scrollMargin</a></code>
                        に渡された値と必ずしも一致しません。何も渡されなかった場合は"0px 0px 0px 0px"になります。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver"
                        data-dfn-type="attribute" data-export
                        id="dom-intersectionobserver-thresholds"><code>thresholds</code></dfn>, <span>
                        型はFrozenArray&lt;<a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double"
                            id="ref-for-idl-double①">double</a>>、readonly</span>
                <dd data-md>
                    <p>しきい値のリストで、数値昇順に並んでいます。各しきい値は監視対象の交差面積／バウンディングボックス面積の比率です。
                        しきい値をまたぐ度に通知が発生します。
                        <var>options</var>.<code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserverinit-threshold" id="ref-for-dom-intersectionobserverinit-threshold①">threshold</a></code>
                        が指定されなかった場合や空の場合は[0]となります。
                    </p>
            </dl>
        </div>
        <p><code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑦">Element</a></code>
            のcomputed styleで<a data-link-type="dfn" href="https://drafts.csswg.org/css-overflow-3/#overflow-properties"
                id="ref-for-overflow-properties">overflowプロパティ</a>により内容が要素の<a data-link-type="dfn"
                href="https://drafts.csswg.org/css-box/#padding-edge" id="ref-for-padding-edge">padding
                edge</a>でクリップされる場合は、<dfn class="dfn-paneled" data-dfn-for="IntersectionObserver" data-dfn-type="dfn"
                data-noexport id="intersectionobserver-content-clip">コンテントクリップ</dfn>を持つと定義されます。</p>
        <p><dfn class="dfn-paneled" data-dfn-for="IntersectionObserver" data-dfn-type="dfn" data-noexport
                id="intersectionobserver-root-intersection-rectangle">ルート交差矩形</dfn>は、<code
                class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver①⑤">IntersectionObserver</a></code>
            でターゲットと比較する矩形です。</p>
        <dl class="switch">
            <dt>もし<code
                    class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver①⑥">IntersectionObserver</a></code>
                が<a data-link-type="dfn" href="#intersectionobserver-implicit-root-observer"
                    id="ref-for-intersectionobserver-implicit-root-observer②">暗黙ルートオブザーバー</a>なら
            <dd>ルートは<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context"
                    id="ref-for-top-level-browsing-context③">トップレベル閲覧コンテキスト</a>の<code
                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2①">document</a></code>
                であるものとして扱い、以下のdocumentに関するルールを適用します。
            <dt>もし<a data-link-type="dfn" href="#intersectionobserver-intersection-root"
                    id="ref-for-intersectionobserver-intersection-root⑤">インターセクションルート</a>が<code
                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2③">document</a></code>
                なら
            <dd><code
                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2④">document</a></code>の
                <a data-link-type="dfn" href="https://drafts.csswg.org/css2/visuren.html#viewport"
                    id="ref-for-viewport②">ビューポート</a>のサイズ（この処理段階に到達するのは、documentが<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active"
                    id="ref-for-fully-active">完全にアクティブ</a>な場合のみ）。
            <dt>それ以外で<a data-link-type="dfn" href="#intersectionobserver-intersection-root"
                    id="ref-for-intersectionobserver-intersection-root⑥">インターセクションルート</a>が<a data-link-type="dfn"
                    href="#intersectionobserver-content-clip"
                    id="ref-for-intersectionobserver-content-clip">コンテントクリップ</a>を持つ場合
            <dd>要素の<a data-link-type="dfn" href="https://drafts.csswg.org/css-box/#padding-area"
                    id="ref-for-padding-area">padding area</a>。
            <dt>それ以外の場合
            <dd><a data-link-type="dfn" href="https://drafts.csswg.org/cssom-view-1/#element-get-the-bounding-box"
                    id="ref-for-element-get-the-bounding-box">要素のバウンディングボックス取得</a>の結果。
        </dl>
        <p><a data-link-type="dfn" href="#intersectionobserver-root-intersection-rectangle"
                id="ref-for-intersectionobserver-root-intersection-rectangle①">ルート交差矩形</a>の計算時、
            <a data-link-type="dfn" href="#intersectionobserver-same-origin-domain-target"
                id="ref-for-intersectionobserver-same-origin-domain-target②">同一オリジンドメインターゲット</a>の場合は、
            <code
                class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver①⑦">IntersectionObserver</a></code>の
            <code
                class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-rootmargin-slot" id="ref-for-dom-intersectionobserver-rootmargin-slot①">[[rootMargin]]</a></code>
            スロットのオフセットで拡張します。CSSの<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-box-4/#propdef-margin" id="ref-for-propdef-margin">margin</a>プロパティのように、
            4つの値はそれぞれ上・右・下・左の拡張量で、正の値は外側への拡張です。
            パーセンテージは拡張前の矩形の幅に対して解決されます。
        </p>
        <p class="note" role="note"><span class="marker">注:</span> <code
                class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-rootmargin" id="ref-for-dom-intersectionobserver-rootmargin①">rootMargin</a></code>
            は<a data-link-type="dfn" href="#intersectionobserver-intersection-root"
                id="ref-for-intersectionobserver-intersection-root⑧">インターセクションルート</a>自体にのみ適用されます。
            <a data-link-type="dfn" href="#intersectionobserver-target"
                id="ref-for-intersectionobserver-target⑨">ターゲット</a><code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑧">Element</a></code>
            がインターセクションルート以外の祖先によってクリップされている場合、そのクリップには<code
                class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-rootmargin" id="ref-for-dom-intersectionobserver-rootmargin②">rootMargin</a></code>
            の影響はありません。
        </p>
        <dl>
            <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                    id="apply-scroll-margin-to-a-scrollport">スクロールポートにスクロールマージンを適用する</dfn>
            <dd data-md>
                <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scrollport"
                        id="ref-for-scrollport①">scrollport</a>の交差矩形を
                    <a data-link-type="dfn" href="#intersectionobserver-same-origin-domain-target"
                        id="ref-for-intersectionobserver-same-origin-domain-target③">同一オリジンドメインターゲット</a>に対して計算する場合、
                    矩形は
                    <code
                        class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver①⑧">IntersectionObserver</a></code>の
                    <code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-scrollmargin-slot" id="ref-for-dom-intersectionobserver-scrollmargin-slot①">[[scrollMargin]]</a></code>
                    スロットのオフセットに従って
                    CSSの<a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-box-4/#propdef-margin"
                        id="ref-for-propdef-margin①">margin</a>プロパティと同様の方法で拡張されます。
                    4つの値は、それぞれ上、右、下、左の端がどれだけオフセットされるかを示し、正の長さは外側へのオフセットを意味します。
                    パーセンテージは拡張前の矩形の幅に対して解決されます。
                </p>
                <p><b>これらのオフセットは<a data-link-type="dfn" href="#intersectionobserver-same-origin-domain-target"
                            id="ref-for-intersectionobserver-same-origin-domain-target④">同一オリジンドメインターゲット</a>を扱う場合のみ適用されます。
                        <a data-link-type="dfn" href="#intersectionobserver-cross-origin-domain-target"
                            id="ref-for-intersectionobserver-cross-origin-domain-target①">クロスオリジンドメインターゲット</a>の場合は無視されます。</b>
                </p>
                <p class="note" role="note"><span class="marker">Note:</span> <code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-scrollmargin" id="ref-for-dom-intersectionobserver-scrollmargin①">scrollMargin</a></code>
                    は、<a data-link-type="dfn" href="#intersectionobserver-target"
                        id="ref-for-intersectionobserver-target①⓪">ターゲット</a>がすべてのスクロール可能な先祖によって
                    <a data-link-type="dfn" href="#intersectionobserver-intersection-root"
                        id="ref-for-intersectionobserver-intersection-root①⓪">インターセクションルート</a>までクリッピングされる際に影響します。
                    <code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-scrollmargin" id="ref-for-dom-intersectionobserver-scrollmargin②">scrollMargin</a></code>
                    と
                    <code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-rootmargin" id="ref-for-dom-intersectionobserver-rootmargin③">rootMargin</a></code>
                    の両方がスクロール可能な<a data-link-type="dfn" href="#intersectionobserver-intersection-root"
                        id="ref-for-intersectionobserver-intersection-root①①">インターセクションルート</a>の矩形に適用されます。
                </p>
        </dl>
        <p class="note" role="note"><span class="marker">Note:</span> <a data-link-type="dfn"
                href="#intersectionobserver-root-intersection-rectangle"
                id="ref-for-intersectionobserver-root-intersection-rectangle②">ルート交差矩形</a>および<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-overflow-3/#scrollport" id="ref-for-scrollport②">scrollport</a>交差矩形は<a
                data-link-type="dfn" href="https://drafts.csswg.org/cssom-view-1/#pinch-zoom"
                id="ref-for-pinch-zoom">ピンチズーム</a>の影響を受けず、調整されていない<a data-link-type="dfn"
                href="https://drafts.csswg.org/css2/visuren.html#viewport" id="ref-for-viewport③">ビューポート</a>を報告します。
            これはピンチズームの意図（虫眼鏡のように動作し、レイアウトを変更しない）と一致します。</p>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="parse-a-margin">マージンをパースする</dfn>（ルートまたはスクロール）
            入力文字列<var>marginString</var>から
            4つのピクセル長またはパーセンテージのリスト、もしくは失敗を返す：</p>
        <ol>
            <li data-md>
                <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-syntax-3/#parse-a-list-of-component-values"
                        id="ref-for-parse-a-list-of-component-values">コンポーネント値のリストをパースする</a>
                    <var>marginString</var>
                    の結果を<var>tokens</var>として保存する。
                </p>
            <li data-md>
                <p><var>tokens</var>からすべての空白トークンを取り除く。</p>
            <li data-md>
                <p><var>tokens</var>の長さが4より大きい場合、失敗を返す。</p>
            <li data-md>
                <p><var>tokens</var>に要素が0個の場合、<var>tokens</var>を["0px"]に設定する。</p>
            <li data-md>
                <p><var>tokens</var>内の各<var>token</var>を置き換える：</p>
                <ul>
                    <li data-md>
                        <p><var>token</var>が<a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-values-3/#absolute-length"
                                id="ref-for-absolute-length">絶対長</a>の<a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-values-3/#dimension"
                                id="ref-for-dimension">次元</a>トークンなら、同等のピクセル長に置き換える。</p>
                    <li data-md>
                        <p><var>token</var>が<a class="production css" data-link-type="type"
                                href="https://www.w3.org/TR/css-values-4/#percentage-value"
                                id="ref-for-percentage-value">&lt;percentage></a>トークンなら、同等のパーセンテージに置き換える。</p>
                    <li data-md>
                        <p>それ以外の場合は失敗を返す。</p>
                </ul>
            <li data-md>
                <p><var>tokens</var>が1要素の場合、その要素を3つ複製して<var>tokens</var>へ追加する。
                    2要素の場合は各要素を複製して追加する。
                    3要素の場合は2番目の要素を複製して追加する。</p>
            <li data-md>
                <p><var>tokens</var>を返す。</p>
        </ol>
        <h3 class="heading settled" data-level="2.3" id="intersection-observer-entry"><span class="secno">2.3.
            </span><span class="content">IntersectionObserverEntryインターフェース</span><a class="self-link"
                href="#intersection-observer-entry"></a></h3>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="intersectionobserverentry"><code><c- g>IntersectionObserverEntry</c-></code></dfn> {
  <dfn class="idl-code" data-dfn-for="IntersectionObserverEntry" data-dfn-type="constructor" data-export data-lt="IntersectionObserverEntry(intersectionObserverEntryInit)|constructor(intersectionObserverEntryInit)" id="dom-intersectionobserverentry-intersectionobserverentry"><code><c- g>constructor</c-></code><a class="self-link" href="#dom-intersectionobserverentry-intersectionobserverentry"></a></dfn>(<a data-link-type="idl-name" href="#dictdef-intersectionobserverentryinit" id="ref-for-dictdef-intersectionobserverentryinit"><c- n>IntersectionObserverEntryInit</c-></a> <dfn class="idl-code" data-dfn-for="IntersectionObserverEntry/IntersectionObserverEntry(intersectionObserverEntryInit), IntersectionObserverEntry/constructor(intersectionObserverEntryInit)" data-dfn-type="argument" data-export id="dom-intersectionobserverentry-intersectionobserverentry-intersectionobserverentryinit-intersectionobserverentryinit"><code><c- g>intersectionObserverEntryInit</c-></code><a class="self-link" href="#dom-intersectionobserverentry-intersectionobserverentry-intersectionobserverentryinit-intersectionobserverentryinit"></a></dfn>);
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/hr-time/#domhighrestimestamp" id="ref-for-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMHighResTimeStamp" href="#dom-intersectionobserverentry-time" id="ref-for-dom-intersectionobserverentry-time"><c- g>time</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly"><c- n>DOMRectReadOnly</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMRectReadOnly?" href="#dom-intersectionobserverentry-rootbounds" id="ref-for-dom-intersectionobserverentry-rootbounds"><c- g>rootBounds</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly①"><c- n>DOMRectReadOnly</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMRectReadOnly" href="#dom-intersectionobserverentry-boundingclientrect" id="ref-for-dom-intersectionobserverentry-boundingclientrect"><c- g>boundingClientRect</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly②"><c- n>DOMRectReadOnly</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMRectReadOnly" href="#dom-intersectionobserverentry-intersectionrect" id="ref-for-dom-intersectionobserverentry-intersectionrect"><c- g>intersectionRect</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-intersectionobserverentry-isintersecting" id="ref-for-dom-intersectionobserverentry-isintersecting"><c- g>isIntersecting</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②"><c- b>double</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="double" href="#dom-intersectionobserverentry-intersectionratio" id="ref-for-dom-intersectionobserverentry-intersectionratio"><c- g>intersectionRatio</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑨"><c- n>Element</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="Element" href="#dom-intersectionobserverentry-target" id="ref-for-dom-intersectionobserverentry-target"><c- g>target</c-></a>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-intersectionobserverentryinit"><code><c- g>IntersectionObserverEntryInit</c-></code></dfn> {
  <c- b>required</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/hr-time/#domhighrestimestamp" id="ref-for-domhighrestimestamp①"><c- n>DOMHighResTimeStamp</c-></a> <dfn class="idl-code" data-dfn-for="IntersectionObserverEntryInit" data-dfn-type="dict-member" data-export data-type="DOMHighResTimeStamp " id="dom-intersectionobserverentryinit-time"><code><c- g>time</c-></code><a class="self-link" href="#dom-intersectionobserverentryinit-time"></a></dfn>;
  <c- b>required</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/geometry-1/#dictdef-domrectinit" id="ref-for-dictdef-domrectinit"><c- n>DOMRectInit</c-></a>? <dfn class="idl-code" data-dfn-for="IntersectionObserverEntryInit" data-dfn-type="dict-member" data-export data-type="DOMRectInit? " id="dom-intersectionobserverentryinit-rootbounds"><code><c- g>rootBounds</c-></code><a class="self-link" href="#dom-intersectionobserverentryinit-rootbounds"></a></dfn>;
  <c- b>required</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/geometry-1/#dictdef-domrectinit" id="ref-for-dictdef-domrectinit①"><c- n>DOMRectInit</c-></a> <dfn class="idl-code" data-dfn-for="IntersectionObserverEntryInit" data-dfn-type="dict-member" data-export data-type="DOMRectInit " id="dom-intersectionobserverentryinit-boundingclientrect"><code><c- g>boundingClientRect</c-></code><a class="self-link" href="#dom-intersectionobserverentryinit-boundingclientrect"></a></dfn>;
  <c- b>required</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/geometry-1/#dictdef-domrectinit" id="ref-for-dictdef-domrectinit②"><c- n>DOMRectInit</c-></a> <dfn class="idl-code" data-dfn-for="IntersectionObserverEntryInit" data-dfn-type="dict-member" data-export data-type="DOMRectInit " id="dom-intersectionobserverentryinit-intersectionrect"><code><c- g>intersectionRect</c-></code><a class="self-link" href="#dom-intersectionobserverentryinit-intersectionrect"></a></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <dfn class="idl-code" data-dfn-for="IntersectionObserverEntryInit" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-intersectionobserverentryinit-isintersecting"><code><c- g>isIntersecting</c-></code><a class="self-link" href="#dom-intersectionobserverentryinit-isintersecting"></a></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double③"><c- b>double</c-></a> <dfn class="idl-code" data-dfn-for="IntersectionObserverEntryInit" data-dfn-type="dict-member" data-export data-type="double " id="dom-intersectionobserverentryinit-intersectionratio"><code><c- g>intersectionRatio</c-></code><a class="self-link" href="#dom-intersectionobserverentryinit-intersectionratio"></a></dfn>;
  <c- b>required</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①⓪"><c- n>Element</c-></a> <dfn class="idl-code" data-dfn-for="IntersectionObserverEntryInit" data-dfn-type="dict-member" data-export data-type="Element " id="dom-intersectionobserverentryinit-target"><code><c- g>target</c-></code><a class="self-link" href="#dom-intersectionobserverentryinit-target"></a></dfn>;
};
</pre>
        <div>
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntry"
                        data-dfn-type="attribute" data-export
                        id="dom-intersectionobserverentry-boundingclientrect"><code>boundingClientRect</code></dfn>,
                    <span> 型 <a data-link-type="idl-name" href="https://www.w3.org/TR/geometry-1/#domrectreadonly"
                            id="ref-for-domrectreadonly③">DOMRectReadOnly</a>、読み取り専用</span>
                <dd data-md>
                    <p><code
                            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly④">DOMRectReadOnly</a></code>
                        は、<code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-target" id="ref-for-dom-intersectionobserverentry-target①">target</a></code>の
                        <a data-link-type="dfn"
                            href="https://drafts.csswg.org/cssom-view-1/#element-get-the-bounding-box"
                            id="ref-for-element-get-the-bounding-box①">バウンディングボックスを取得</a>して得られます。
                    </p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntry"
                        data-dfn-type="attribute" data-export
                        id="dom-intersectionobserverentry-intersectionrect"><code>intersectionRect</code></dfn>, <span>
                        型 <a data-link-type="idl-name" href="https://www.w3.org/TR/geometry-1/#domrectreadonly"
                            id="ref-for-domrectreadonly⑤">DOMRectReadOnly</a>、読み取り専用</span>
                <dd data-md>
                    <p><code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-boundingclientrect" id="ref-for-dom-intersectionobserverentry-boundingclientrect①">boundingClientRect</a></code>
                        を、<code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-target" id="ref-for-dom-intersectionobserverentry-target②">target</a></code>
                        の各祖先の
                        クリップ矩形（ただし <code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-root" id="ref-for-dom-intersectionobserver-root⑤">root</a></code>
                        を除く）で交差させ、
                        さらに <a data-link-type="dfn" href="#intersectionobserver-root-intersection-rectangle"
                            id="ref-for-intersectionobserver-root-intersection-rectangle③">root の交差矩形</a> と交差させます。
                        この値は、<code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-target" id="ref-for-dom-intersectionobserverentry-target③">target</a></code>
                        が
                        <a data-link-type="dfn" href="#intersectionobserver-root-intersection-rectangle"
                            id="ref-for-intersectionobserver-root-intersection-rectangle④">root
                            の交差矩形</a>内で実際に見える部分を表します。
                    </p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntry"
                        data-dfn-type="attribute" data-export
                        id="dom-intersectionobserverentry-isintersecting"><code>isIntersecting</code></dfn>, <span> 型 <a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-boolean"
                            id="ref-for-idl-boolean②">boolean</a>、読み取り専用</span>
                <dd data-md>
                    <p><code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-target" id="ref-for-dom-intersectionobserverentry-target④">target</a></code>
                        が
                        <code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-root" id="ref-for-dom-intersectionobserver-root⑥">root</a></code>と交差していれば
                        true、そうでなければ false です。
                        このフラグにより、
                        <code
                            class="idl"><a data-link-type="idl" href="#intersectionobserverentry" id="ref-for-intersectionobserverentry②">IntersectionObserverEntry</a></code>
                        が
                        交差状態から非交差状態への遷移を示す場合と、
                        <code
                            class="idl"><a data-link-type="idl" href="#intersectionobserverentry" id="ref-for-intersectionobserverentry③">IntersectionObserverEntry</a></code>
                        が
                        非交差状態から交差状態への遷移（交差矩形の面積がゼロの場合、例えば端同士が接する交差や <code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-boundingclientrect" id="ref-for-dom-intersectionobserverentry-boundingclientrect②">boundingClientRect</a></code>
                        の面積がゼロの場合）を区別できます。
                    </p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntry"
                        data-dfn-type="attribute" data-export
                        id="dom-intersectionobserverentry-intersectionratio"><code>intersectionRatio</code></dfn>,
                    <span> 型 <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double"
                            id="ref-for-idl-double④">double</a>、読み取り専用</span>
                <dd data-md>
                    <p>
                        <code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-boundingclientrect" id="ref-for-dom-intersectionobserverentry-boundingclientrect③">boundingClientRect</a></code>
                        の面積がゼロでない場合、
                        <code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-intersectionrect" id="ref-for-dom-intersectionobserverentry-intersectionrect①">intersectionRect</a></code>
                        の面積を
                        <code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-boundingclientrect" id="ref-for-dom-intersectionobserverentry-boundingclientrect④">boundingClientRect</a></code>
                        の面積で割った比率になります。
                        それ以外の場合、<code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-isintersecting" id="ref-for-dom-intersectionobserverentry-isintersecting①">isIntersecting</a></code>
                        が true なら 1、そうでなければ 0 となります。
                    </p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntry"
                        data-dfn-type="attribute" data-export
                        id="dom-intersectionobserverentry-rootbounds"><code>rootBounds</code></dfn>, <span> 型 <a
                            data-link-type="idl-name" href="https://www.w3.org/TR/geometry-1/#domrectreadonly"
                            id="ref-for-domrectreadonly⑥">DOMRectReadOnly</a>、読み取り専用、nullable</span>
                <dd data-md>
                    <p>
                        <a data-link-type="dfn" href="#intersectionobserver-same-origin-domain-target"
                            id="ref-for-intersectionobserver-same-origin-domain-target⑤">同一オリジンドメインターゲット</a>の場合、
                        <a data-link-type="dfn" href="#intersectionobserver-root-intersection-rectangle"
                            id="ref-for-intersectionobserver-root-intersection-rectangle⑤">root の交差矩形</a> になります。
                        それ以外の場合は <code>null</code> です。
                        ターゲットが <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context"
                            id="ref-for-browsing-context">閲覧コンテキスト</a>が <a data-link-type="dfn"
                            href="#intersectionobserver-intersection-root"
                            id="ref-for-intersectionobserver-intersection-root①②">intersection root</a> と異なる場合、
                        この値は <code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-boundingclientrect" id="ref-for-dom-intersectionobserverentry-boundingclientrect⑤">boundingClientRect</a></code>
                        や
                        <code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-intersectionrect" id="ref-for-dom-intersectionobserverentry-intersectionrect②">intersectionRect</a></code>
                        と
                        異なる座標系になります。
                    </p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntry"
                        data-dfn-type="attribute" data-export
                        id="dom-intersectionobserverentry-target"><code>target</code></dfn>, <span> 型 <a
                            data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"
                            id="ref-for-element①①">Element</a>、読み取り専用</span>
                <dd data-md>
                    <p>
                        <code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①②">Element</a></code>
                        は、
                        <a data-link-type="dfn" href="#intersectionobserver-intersection-root"
                            id="ref-for-intersectionobserver-intersection-root①③">intersection root</a>
                        との交差状態が変更された要素です。
                    </p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntry"
                        data-dfn-type="attribute" data-export
                        id="dom-intersectionobserverentry-time"><code>time</code></dfn>, <span> 型 <a
                            data-link-type="idl-name" href="https://www.w3.org/TR/hr-time/#domhighrestimestamp"
                            id="ref-for-domhighrestimestamp②">DOMHighResTimeStamp</a>、読み取り専用</span>
                <dd data-md>
                    <p>
                        この属性は、通知を生成した IntersectionObserver インスタンスに関連付けられたグローバルオブジェクトの
                        <a data-link-type="dfn" href="https://www.w3.org/TR/hr-time/#time-origin"
                            id="ref-for-time-origin">タイムオリジン</a> を基準とした、
                        交差が記録された時刻に対応する <code
                            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/hr-time/#domhighrestimestamp" id="ref-for-domhighrestimestamp③">DOMHighResTimeStamp</a></code>
                        を返します。
                    </p>
            </dl>
        </div>
        <h3 class="heading settled" data-level="2.4" id="intersection-observer-init"><span class="secno">2.4.
            </span><span class="content">IntersectionObserverInit辞書</span><a class="self-link"
                href="#intersection-observer-init"></a></h3>
        <pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-intersectionobserverinit"><code><c- g>IntersectionObserverInit</c-></code></dfn> {
  (<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①③"><c- n>Element</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②"><c- n>Document</c-></a>)?  <a class="idl-code" data-default="null" data-link-type="dict-member" data-type="(Element or Document)?  " href="#dom-intersectionobserverinit-root" id="ref-for-dom-intersectionobserverinit-root①"><c- g>root</c-></a> = <c- b>null</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString④"><c- b>DOMString</c-></a> <a class="idl-code" data-default="&quot;0px&quot;" data-link-type="dict-member" data-type="DOMString " href="#dom-intersectionobserverinit-rootmargin" id="ref-for-dom-intersectionobserverinit-rootmargin③"><c- g>rootMargin</c-></a> = "0px";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑤"><c- b>DOMString</c-></a> <a class="idl-code" data-default="&quot;0px&quot;" data-link-type="dict-member" data-type="DOMString " href="#dom-intersectionobserverinit-scrollmargin" id="ref-for-dom-intersectionobserverinit-scrollmargin②"><c- g>scrollMargin</c-></a> = "0px";
  (<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double⑤"><c- b>double</c-></a> <c- b>or</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence②"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double⑥"><c- b>double</c-></a>>) <a class="idl-code" data-default="0" data-link-type="dict-member" data-type="(double or sequence<double>) " href="#dom-intersectionobserverinit-threshold" id="ref-for-dom-intersectionobserverinit-threshold②"><c- g>threshold</c-></a> = 0;
};
</pre>
        <div>
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverInit"
                        data-dfn-type="dict-member" data-export
                        id="dom-intersectionobserverinit-root"><code>root</code></dfn>, <span> 型 <code
                            class="idl-code">(Element or Document)</code>、nullable、デフォルトは
                        <code>null</code></span>
                <dd data-md>
                    <p>交差判定に使用する <code
                            class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver①⑨">root</a></code>
                        です。
                        指定されていない場合は <a data-link-type="dfn" href="#intersectionobserver-implicit-root"
                            id="ref-for-intersectionobserver-implicit-root">暗黙的ルート</a>を使用します。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverInit"
                        data-dfn-type="dict-member" data-export
                        id="dom-intersectionobserverinit-rootmargin"><code>rootMargin</code></dfn>, <span> 型 <a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-DOMString"
                            id="ref-for-idl-DOMString⑥">DOMString</a>、デフォルトは <code>"0px"</code></span>
                <dd data-md>
                    <p>CSS の <a class="property css" data-link-type="property"
                            href="https://www.w3.org/TR/css-box-4/#propdef-margin"
                            id="ref-for-propdef-margin②">margin</a> プロパティに類似しており、
                        1～4個のコンポーネントからなる文字列です。
                        各コンポーネントは <a data-link-type="dfn" href="https://www.w3.org/TR/css-values-3/#absolute-length"
                            id="ref-for-absolute-length①">絶対長</a>またはパーセンテージです。</p>
                    <pre class="example highlight" id="example-105651ff"><a class="self-link" href="#example-105651ff"></a><c- u>"5px"</c->                <c- c1>// すべてのマージンが 5px</c->
<c- u>"5px 10px"</c->           <c- c1>// 上下 = 5px、左右 = 10px</c->
<c- u>"-10px 5px 8px"</c->      <c- c1>// 上 = -10px、左右 = 5px、下 = 8px</c->
<c- u>"-10px -5px 5px 8px"</c-> <c- c1>// 上 = -10px、右 = -5px、下 = 5px、左 = 8px</c->
</pre>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverInit"
                        data-dfn-type="dict-member" data-export
                        id="dom-intersectionobserverinit-scrollmargin"><code>scrollMargin</code></dfn>, <span> 型
                        <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-DOMString"
                            id="ref-for-idl-DOMString⑦">DOMString</a>、デフォルトは <code>"0px"</code></span>
                <dd data-md>
                    <p>
                        <code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserverinit-rootmargin" id="ref-for-dom-intersectionobserverinit-rootmargin④">rootMargin</a></code>
                        と同様で、
                        1～4個のコンポーネントからなる文字列です。
                        各コンポーネントは <a data-link-type="dfn" href="https://www.w3.org/TR/css-values-3/#absolute-length"
                            id="ref-for-absolute-length②">絶対長</a>またはパーセンテージです。
                    </p>
                    <p>例については上記 <code
                            class="idl"><a data-link-type="idl" href="#dom-intersectionobserverinit-rootmargin" id="ref-for-dom-intersectionobserverinit-rootmargin⑤">rootMargin</a></code>
                        を参照してください。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverInit"
                        data-dfn-type="dict-member" data-export
                        id="dom-intersectionobserverinit-threshold"><code>threshold</code></dfn>, <span> 型 <code
                            class="idl-code">(double or sequence&lt;double>)</code>、デフォルトは <code>0</code></span>
                <dd data-md>
                    <p>コールバックをトリガーするしきい値（複数可）のリストです。
                        intersectionRect の面積が任意のしきい値以上から未満に変化した場合、またはその逆の場合、コールバックが呼び出されます。</p>
                    <p>しきい値は [0, 1.0] の範囲で、<a data-link-type="dfn"
                            href="https://drafts.csswg.org/cssom-view-1/#element-get-the-bounding-box"
                            id="ref-for-element-get-the-bounding-box②">バウンディングボックスを取得</a>した <a data-link-type="dfn"
                            href="#intersectionobserver-target" id="ref-for-intersectionobserver-target①①">target</a>
                        の矩形面積に対する割合を表します。</p>
                    <p class="note" role="note"><span class="marker">Note:</span> 0.0 は実質的に「1ピクセル以上が非ゼロ」の意味になります。</p>
            </dl>
        </div>
        <h2 class="heading settled dfn-paneled" data-dfn-type="dfn" data-level="3" data-lt="Processing Model"
            data-noexport id="intersection-observer-processing-model"><span class="secno">3. </span><span
                class="content">処理モデル</span><a class="self-link" href="#intersection-observer-processing-model"
                id="ref-for-intersection-observer-processing-model①"></a>
        </h2>
        <p>このセクションでは、<a data-link-type="dfn" href="#intersection-observer"
                id="ref-for-intersection-observer">Intersection
                Observer</a> APIを実装する際にユーザーエージェントが実行すべき手順を概説します。</p>
        <h3 class="heading settled" data-level="3.1" id="defines"><span class="secno">3.1. </span><span class="content">
                内部スロット定義</span><a class="self-link" href="#defines"></a></h3>
        <h4 class="heading settled" data-level="3.1.1" id="document-defines"><span class="secno">3.1.1. </span><span
                class="content">ドキュメント</span><a class="self-link" href="#document-defines"></a></h4>
        <p>各<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2⑥">document</a></code>
            は、<dfn class="dfn-paneled" data-dfn-for="Document" data-dfn-type="dfn" data-noexport
                id="document-intersectionobservertaskqueued">IntersectionObserverTaskQueued</dfn>フラグを持ち、初期値はfalseです。</p>
        <h4 class="heading settled" data-level="3.1.2" id="element-private-slots"><span class="secno">3.1.2.
            </span><span class="content">要素</span><a class="self-link" href="#element-private-slots"></a></h4>
        <p><code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①④">Element</a></code>
            オブジェクトは、内部<dfn class="dfn-paneled idl-code" data-dfn-for="Element" data-dfn-type="attribute" data-export
                id="dom-element-registeredintersectionobservers-slot"><code>[[RegisteredIntersectionObservers]]</code></dfn>
            スロットを持ち、初期値は空のリストです。
            このリストは<dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export
                id="intersectionobserverregistration"><code>IntersectionObserverRegistration</code></dfn>レコードを保持します。
            これらは、<dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverRegistration"
                data-dfn-type="attribute" data-export
                id="dom-intersectionobserverregistration-observer"><code>observer</code></dfn>プロパティ（<code
                class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②⓪">IntersectionObserver</a></code>を保持）、
            <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverRegistration" data-dfn-type="attribute"
                data-export
                id="dom-intersectionobserverregistration-previousthresholdindex"><code>previousThresholdIndex</code></dfn>プロパティ
            （observerの<code
                class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-thresholds" id="ref-for-dom-intersectionobserver-thresholds①">thresholds</a></code>プロパティの長さの範囲内で-1からの数値）、
            <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverRegistration" data-dfn-type="attribute"
                data-export
                id="dom-intersectionobserverregistration-previousisintersecting"><code>previousIsIntersecting</code></dfn>プロパティ
            （boolean値）を持ちます。
        </p>
        <h4 class="heading settled" data-level="3.1.3" id="intersection-observer-private-slots"><span
                class="secno">3.1.3. </span><span class="content">IntersectionObserver</span><a class="self-link"
                href="#intersection-observer-private-slots"></a></h4>
        <p><code
                class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②①">IntersectionObserver</a></code>
            オブジェクトは、内部<dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="attribute"
                data-export id="dom-intersectionobserver-queuedentries-slot"><code>[[QueuedEntries]]</code></dfn>および<dfn
                class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="attribute" data-export
                id="dom-intersectionobserver-observationtargets-slot"><code>[[ObservationTargets]]</code></dfn>スロット（ともに初期値は空リスト）、
            <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="attribute" data-export
                id="dom-intersectionobserver-callback-slot"><code>[[callback]]</code></dfn>スロット
            （<code
                class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-intersectionobserver" id="ref-for-dom-intersectionobserver-intersectionobserver">IntersectionObserver(callback, options)</a></code>で初期化）を持ちます。
            また、内部<dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="attribute"
                data-export id="dom-intersectionobserver-rootmargin-slot"><code>[[rootMargin]]</code></dfn>および<dfn
                class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="attribute" data-export
                id="dom-intersectionobserver-scrollmargin-slot"><code>[[scrollMargin]]</code></dfn>スロット（4つのピクセル長またはパーセンテージのリスト）も持ちます。
        </p>
        <h3 class="heading settled" data-level="3.2" id="algorithms"><span class="secno">3.2. </span><span
                class="content">アルゴリズム</span><a class="self-link" href="#algorithms"></a></h3>
        <h4 class="heading settled" data-level="3.2.1" id="initialize-new-intersection-observer"><span
                class="secno">3.2.1. </span><span class="content">新しいIntersectionObserverの初期化</span><a class="self-link"
                href="#initialize-new-intersection-observer"></a></h4>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="initialize-a-new-intersectionobserver">新しいIntersectionObserverを初期化する</dfn>には、<code
                class="idl"><a data-link-type="idl" href="#callbackdef-intersectionobservercallback" id="ref-for-callbackdef-intersectionobservercallback①">IntersectionObserverCallback</a></code>
            <var>callback</var>と<code
                class="idl"><a data-link-type="idl" href="#dictdef-intersectionobserverinit" id="ref-for-dictdef-intersectionobserverinit①">IntersectionObserverInit</a></code>
            辞書<var>options</var>を指定して、次の手順を実行します：
        </p>
        <ol>
            <li data-md>
                <p><var>this</var>を新しい<code
                        class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②②">IntersectionObserver</a></code>
                    オブジェクトとする</p>
            <li data-md>
                <p><var>this</var>の内部<code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-callback-slot" id="ref-for-dom-intersectionobserver-callback-slot">[[callback]]</a></code>
                    スロットに<var>callback</var>をセットする。</p>
            <li data-md>
                <p><var>options</var>.<code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserverinit-rootmargin" id="ref-for-dom-intersectionobserverinit-rootmargin⑥">rootMargin</a></code>から
                    <a data-link-type="dfn" href="#parse-a-margin" id="ref-for-parse-a-margin">マージンをパースする</a>ことを試みる。
                    リストが返された場合、
                    <var>this</var>の内部<code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-rootmargin-slot" id="ref-for-dom-intersectionobserver-rootmargin-slot②">[[rootMargin]]</a></code>
                    スロットにそれをセットする。
                    そうでなければ、<a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw"
                        id="ref-for-dfn-throw">throw</a>で<code
                        class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dfn-simple-exception" id="ref-for-dfn-simple-exception">SyntaxError</a></code>
                    例外を投げる。
                </p>
            <li data-md>
                <p><var>options</var>.<code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserverinit-scrollmargin" id="ref-for-dom-intersectionobserverinit-scrollmargin③">scrollMargin</a></code>から
                    <a data-link-type="dfn" href="#parse-a-margin" id="ref-for-parse-a-margin①">マージンをパースする</a>ことを試みる。
                    リストが返された場合、
                    <var>this</var>の内部<code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-scrollmargin-slot" id="ref-for-dom-intersectionobserver-scrollmargin-slot②">[[scrollMargin]]</a></code>
                    スロットにそれをセットする。
                    そうでなければ、<a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw"
                        id="ref-for-dfn-throw①">throw</a>で<code
                        class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dfn-simple-exception" id="ref-for-dfn-simple-exception①">SyntaxError</a></code>
                    例外を投げる。
                </p>
            <li data-md>
                <p><var>thresholds</var>を<var>options</var>.<code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserverinit-threshold" id="ref-for-dom-intersectionobserverinit-threshold③">threshold</a></code>と同じリストにする。
                </p>
            <li data-md>
                <p><var>thresholds</var>内に0.0未満または1.0超の値があれば、
                    <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw"
                        id="ref-for-dfn-throw②">throw</a>で<code
                        class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dfn-simple-exception" id="ref-for-dfn-simple-exception②">RangeError</a></code>
                    例外を投げる。
                </p>
            <li data-md>
                <p><var>thresholds</var>を昇順にソートする。</p>
            <li data-md>
                <p><var>thresholds</var>が空なら<code>0</code>を追加する。</p>
            <li data-md>
                <p><code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-thresholds" id="ref-for-dom-intersectionobserver-thresholds②">thresholds</a></code>
                    属性のgetterはこの昇順の<var>thresholds</var>リストを返す。</p>
            <li data-md>
                <p><var>this</var>を返す。</p>
        </ol>
        <h4 class="heading settled" data-level="3.2.2" id="observe-target-element"><span class="secno">3.2.2.
            </span><span class="content">ターゲットElementの監視</span><a class="self-link" href="#observe-target-element"></a>
        </h4>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="observe-a-target-element">ターゲットElementの監視</dfn>は、<code
                class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②③">IntersectionObserver</a></code>
            <var>observer</var>と<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①⑤">Element</a></code>
            <var>target</var>を指定して、次の手順を実行します：
        </p>
        <ol>
            <li data-md>
                <p><var>target</var>が<var>observer</var>の内部<code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-observationtargets-slot" id="ref-for-dom-intersectionobserver-observationtargets-slot②">[[ObservationTargets]]</a></code>
                    スロットに含まれていれば、returnする。</p>
            <li data-md>
                <p><var>intersectionObserverRegistration</var>を
                    <code
                        class="idl"><a data-link-type="idl" href="#intersectionobserverregistration" id="ref-for-intersectionobserverregistration①">IntersectionObserverRegistration</a></code>
                    レコードとして、
                    <code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserverregistration-observer" id="ref-for-dom-intersectionobserverregistration-observer①">observer</a></code>プロパティに<var>observer</var>、
                    <code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserverregistration-previousthresholdindex" id="ref-for-dom-intersectionobserverregistration-previousthresholdindex">previousThresholdIndex</a></code>プロパティに<code>-1</code>、
                    <code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserverregistration-previousisintersecting" id="ref-for-dom-intersectionobserverregistration-previousisintersecting">previousIsIntersecting</a></code>プロパティに<code>false</code>をセットする。
                </p>
            <li data-md>
                <p><var>intersectionObserverRegistration</var>を<var>target</var>の内部<code
                        class="idl"><a data-link-type="idl" href="#dom-element-registeredintersectionobservers-slot" id="ref-for-dom-element-registeredintersectionobservers-slot①">[[RegisteredIntersectionObservers]]</a></code>
                    スロットに追加する。</p>
            <li data-md>
                <p><var>target</var>を<var>observer</var>の内部<code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-observationtargets-slot" id="ref-for-dom-intersectionobserver-observationtargets-slot③">[[ObservationTargets]]</a></code>
                    スロットに追加する。</p>
        </ol>
        <h4 class="heading settled" data-level="3.2.3" id="unobserve-target-element"><span class="secno">3.2.3.
            </span><span class="content">ターゲットElementの監視解除</span><a class="self-link"
                href="#unobserve-target-element"></a></h4>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="unobserve-a-target-element">ターゲットElementの監視解除</dfn>は、<code
                class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②④">IntersectionObserver</a></code>
            <var>observer</var>と<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①⑥">Element</a></code>
            <var>target</var>を指定して、次の手順を実行します：
        </p>
        <ol>
            <li data-md>
                <p><var>target</var>の内部<code
                        class="idl"><a data-link-type="idl" href="#dom-element-registeredintersectionobservers-slot" id="ref-for-dom-element-registeredintersectionobservers-slot②">[[RegisteredIntersectionObservers]]</a></code>
                    スロットから、<code
                        class="idl"><a data-link-type="idl" href="#intersectionobserverregistration" id="ref-for-intersectionobserverregistration②">IntersectionObserverRegistration</a></code>
                    レコード（<code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserverregistration-observer" id="ref-for-dom-intersectionobserverregistration-observer②">observer</a></code>プロパティが<var>this</var>と等しいもの）を削除する（存在する場合）。
                </p>
            <li data-md>
                <p><var>this</var>の内部<code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-observationtargets-slot" id="ref-for-dom-intersectionobserver-observationtargets-slot④">[[ObservationTargets]]</a></code>
                    スロットから<var>target</var>を削除する（存在する場合）。</p>
        </ol>
        <h4 class="heading settled" data-level="3.2.4" id="queue-intersection-observer-task"><span class="secno">3.2.4.
            </span><span class="content">Intersection Observerタスクのキューイング</span><a class="self-link"
                href="#queue-intersection-observer-task"></a></h4>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="intersectionobserver-task-source">IntersectionObserverタスクソース</dfn>は
            <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#task-source"
                id="ref-for-task-source">タスクソース</a>であり、
            <a href="#notify-intersection-observers-algo">§ 3.2.5 Intersection Observerへの通知</a>のタスクをスケジューリングするために使われます。
        </p>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="queue-an-intersection-observer-task">intersection observerタスクをキューイングする</dfn>には、
            <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2⑦">document</a></code>
            <var>document</var>を指定して、次の手順を実行します：
        </p>
        <ol>
            <li data-md>
                <p><var>document</var>の<a data-link-type="dfn" href="#document-intersectionobservertaskqueued"
                        id="ref-for-document-intersectionobservertaskqueued">IntersectionObserverTaskQueued</a>フラグがtrueなら、returnする。
                </p>
            <li data-md>
                <p><var>document</var>の<a data-link-type="dfn" href="#document-intersectionobservertaskqueued"
                        id="ref-for-document-intersectionobservertaskqueued①">IntersectionObserverTaskQueued</a>フラグをtrueにセットする。
                </p>
            <li data-md>
                <p><code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2⑧">document</a></code>の
                    <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop"
                        id="ref-for-event-loop">イベントループ</a>に関連付けられた
                    <a data-link-type="dfn" href="#intersectionobserver-task-source"
                        id="ref-for-intersectionobserver-task-source">IntersectionObserverタスクソース</a>上で
                    <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"
                        id="ref-for-queue-a-task">タスクをキューイング</a>し、
                    <a data-link-type="dfn" href="#notify-intersection-observers"
                        id="ref-for-notify-intersection-observers">Intersection Observerへの通知</a>を実行する。
                </p>
        </ol>
        <h4 class="heading settled" data-level="3.2.5" id="notify-intersection-observers-algo"><span
                class="secno">3.2.5. </span><span class="content">Intersection Observerへの通知</span><a class="self-link"
                href="#notify-intersection-observers-algo"></a></h4>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="notify-intersection-observers">Intersection
                Observerへの通知</dfn>は、
            <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2⑨">document</a></code>
            <var>document</var>について、次の手順を実行します：
        </p>
        <ol>
            <li data-md>
                <p><var>document</var>の<a data-link-type="dfn" href="#document-intersectionobservertaskqueued"
                        id="ref-for-document-intersectionobservertaskqueued②">IntersectionObserverTaskQueued</a>フラグをfalseにセットする。
                </p>
            <li data-md>
                <p><var>notify list</var>を、<var>document</var>のDOMツリー内に<code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-root" id="ref-for-dom-intersectionobserver-root⑦">root</a></code>を持つすべての
                    <code
                        class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②⑤">IntersectionObserver</a></code>のリストとする。
                </p>
            <li data-md>
                <p><var>notify list</var>内の各<code
                        class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②⑥">IntersectionObserver</a></code>オブジェクト<var>observer</var>について、以下を実行：
                </p>
                <ol>
                    <li data-md>
                        <p><var>observer</var>の内部<code
                                class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-queuedentries-slot" id="ref-for-dom-intersectionobserver-queuedentries-slot②">[[QueuedEntries]]</a></code>スロットが空なら、次へ。
                        </p>
                    <li data-md>
                        <p><var>queue</var>を<var>observer</var>の内部<code
                                class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-queuedentries-slot" id="ref-for-dom-intersectionobserver-queuedentries-slot③">[[QueuedEntries]]</a></code>スロットのコピーとする。
                        </p>
                    <li data-md>
                        <p><var>observer</var>の内部<code
                                class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-queuedentries-slot" id="ref-for-dom-intersectionobserver-queuedentries-slot④">[[QueuedEntries]]</a></code>スロットをクリアする。
                        </p>
                    <li data-md>
                        <p><var>callback</var>を<var>observer</var>の内部<code
                                class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-callback-slot" id="ref-for-dom-intersectionobserver-callback-slot①">[[callback]]</a></code>スロットの値とする。
                        </p>
                    <li data-md>
                        <p><var>callback</var>を、第1引数に<var>queue</var>、第2引数に<var>observer</var>、
                            <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/infrastructure.html#dfn-callback-this-value"
                                id="ref-for-dfn-callback-this-value">callback this
                                value</a>として<var>observer</var>を指定して呼び出す。
                            例外が投げられた場合、<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception"
                                id="ref-for-report-the-exception">例外を報告</a>する。
                        </p>
                </ol>
        </ol>
        <h4 class="heading settled" data-level="3.2.6" id="queue-intersection-observer-entry-algo"><span
                class="secno">3.2.6. </span><span class="content">IntersectionObserverEntryのキューイング</span><a
                class="self-link" href="#queue-intersection-observer-entry-algo"></a></h4>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="queue-an-intersectionobserverentry">IntersectionObserverEntryをキューイングする</dfn>には、
            <code
                class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②⑦">IntersectionObserver</a></code>
            <var>observer</var>、<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2①⓪">document</a></code>
            <var>document</var>、<code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/hr-time/#domhighrestimestamp" id="ref-for-domhighrestimestamp④">DOMHighResTimeStamp</a></code>
            <var>time</var>、<code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/geometry-1/#domrect" id="ref-for-domrect">DOMRect</a></code>各種
            <var>rootBounds</var>、<var>boundingClientRect</var>、<var>intersectionRect</var>、<var>isIntersecting</var>フラグ、
            <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①⑦">Element</a></code>
            <var>target</var>を指定して、次の手順を実行します：
        </p>
        <ol>
            <li data-md>
                <p><code
                        class="idl"><a data-link-type="idl" href="#intersectionobserverentry" id="ref-for-intersectionobserverentry④">IntersectionObserverEntry</a></code>
                    を、<var>time</var>、<var>rootBounds</var>、<var>boundingClientRect</var>、
                    <var>intersectionRect</var>、<var>isIntersecting</var>、<var>target</var>を引数として生成する。
                </p>
            <li data-md>
                <p>それを<var>observer</var>の内部<code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-queuedentries-slot" id="ref-for-dom-intersectionobserver-queuedentries-slot⑤">[[QueuedEntries]]</a></code>
                    スロットに追加する。</p>
            <li data-md>
                <p><a data-link-type="dfn" href="#queue-an-intersection-observer-task"
                        id="ref-for-queue-an-intersection-observer-task">intersection
                        observerタスクをキューイング</a>する（<var>document</var>）。</p>
        </ol>
        <h4 class="heading settled" data-level="3.2.7" id="calculate-intersection-rect-algo"><span class="secno">3.2.7.
            </span><span class="content">ターゲットElementとルートの交差領域の計算</span><a class="self-link"
                href="#calculate-intersection-rect-algo"></a></h4>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="compute-the-intersection">交差領域を計算する</dfn>には、
            <a data-link-type="dfn" href="#intersectionobserver-target"
                id="ref-for-intersectionobserver-target①②">target</a> <var>target</var>と
            <a data-link-type="dfn" href="#intersectionobserver-intersection-root"
                id="ref-for-intersectionobserver-intersection-root①④">intersection root</a>
            <var>root</var>を指定して、次の手順を実行します：
        </p>
        <ol>
            <li data-md>
                <p><var>intersectionRect</var>を<var>target</var>の<a data-link-type="dfn"
                        href="https://drafts.csswg.org/cssom-view-1/#element-get-the-bounding-box"
                        id="ref-for-element-get-the-bounding-box③">バウンディングボックスを取得</a>した結果とする。</p>
            <li data-md>
                <p><var>container</var>を<var>target</var>の<a data-link-type="dfn"
                        href="https://drafts.csswg.org/css-box/#containing-block"
                        id="ref-for-containing-block">包含ブロック</a>とする。</p>
            <li data-md>
                <p><var>container</var>が<var>root</var>でない間：</p>
                <ol>
                    <li data-md>
                        <p><var>container</var>が<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context"
                                id="ref-for-nested-browsing-context①">ネストされた閲覧コンテキスト</a>の<code
                                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2①①">document</a></code>なら、
                            <var>intersectionRect</var>をその<code
                                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2①②">document</a></code>の
                            <a data-link-type="dfn" href="https://drafts.csswg.org/css2/visuren.html#viewport"
                                id="ref-for-viewport④">ビューポート</a>でクリップし、
                            <var>container</var>をその<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context-container"
                                id="ref-for-browsing-context-container">閲覧コンテキストコンテナ</a>に更新する。
                        </p>
                    <li data-md>
                        <p><var>intersectionRect</var>を<var>container</var>の座標空間にマップする。</p>
                    <li data-md>
                        <p><var>container</var>が<a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                                id="ref-for-scroll-container">スクロールコンテナ</a>なら、
                            <code
                                class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②⑧">IntersectionObserver</a></code>の
                            <code
                                class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-scrollmargin-slot" id="ref-for-dom-intersectionobserver-scrollmargin-slot③">[[scrollMargin]]</a></code>を
                            <var>container</var>のクリップ矩形に<a data-link-type="dfn"
                                href="#apply-scroll-margin-to-a-scrollport"
                                id="ref-for-apply-scroll-margin-to-a-scrollport">スクロールポートにスクロールマージンを適用する</a>に従って適用する。
                        </p>
                    <li data-md>
                        <p><var>container</var>が<a data-link-type="dfn" href="#intersectionobserver-content-clip"
                                id="ref-for-intersectionobserver-content-clip①">content clip</a>やcssの<a
                                data-link-type="dfn" href="https://www.w3.org/TR/css-masking-1/#propdef-clip-path"
                                id="ref-for-propdef-clip-path">clip-path</a>プロパティを持つ場合、
                            <var>container</var>のクリップを<var>intersectionRect</var>に適用する。
                        </p>
                    <li data-md>
                        <p><var>container</var>が<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context"
                                id="ref-for-browsing-context①">閲覧コンテキスト</a>のルート要素なら、
                            <var>container</var>をその<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context"
                                id="ref-for-browsing-context②">閲覧コンテキスト</a>の<code
                                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2①③">document</a></code>に更新する。
                            それ以外の場合は、<var>container</var>の<a data-link-type="dfn"
                                href="https://drafts.csswg.org/css-box/#containing-block"
                                id="ref-for-containing-block①">包含ブロック</a>に更新する。
                        </p>
                </ol>
            <li data-md>
                <p><var>intersectionRect</var>を<var>root</var>の座標空間にマップする。</p>
            <li data-md>
                <p><var>intersectionRect</var>を<a data-link-type="dfn"
                        href="#intersectionobserver-root-intersection-rectangle"
                        id="ref-for-intersectionobserver-root-intersection-rectangle⑥">rootの交差矩形</a>と交差させて更新する。</p>
            <li data-md>
                <p><var>intersectionRect</var>を<var>target</var>を含む<code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2①④">document</a></code>の
                    <a data-link-type="dfn" href="https://drafts.csswg.org/css2/visuren.html#viewport"
                        id="ref-for-viewport⑤">ビューポート</a>の座標空間にマップする。
                </p>
            <li data-md>
                <p><var>intersectionRect</var>を返す。</p>
        </ol>
        <h4 class="heading settled" data-level="3.2.8" id="update-intersection-observations-algo"><span
                class="secno">3.2.8. </span><span class="content">インターセクション監視の更新手順の実行</span><a class="self-link"
                href="#update-intersection-observations-algo"></a></h4>
        <p><dfn data-dfn-type="dfn" data-export
                id="run-the-update-intersection-observations-steps">インターセクション監視の更新手順を実行する<a class="self-link"
                    href="#run-the-update-intersection-observations-steps"></a></dfn>には、<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/dom.html#document" id="ref-for-document③">Document</a>
            <var>document</var>とタイムスタンプ<var>time</var>を指定して、以下の手順を実行します：
        </p>
        <ol>
            <li data-md>
                <p><var>observer list</var>を、<var>document</var>のDOMツリー内に<code
                        class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②⑨">IntersectionObserver</a></code>の<code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-root" id="ref-for-dom-intersectionobserver-root⑧">root</a></code>が存在するすべてのリストとする。
                    <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context"
                        id="ref-for-top-level-browsing-context④">トップレベル閲覧コンテキスト</a>の場合、<a data-link-type="dfn"
                        href="#intersectionobserver-implicit-root-observer"
                        id="ref-for-intersectionobserver-implicit-root-observer③">暗黙的ルートオブザーバー</a>も含まれます。
                </p>
            <li data-md>
                <p><var>observer list</var>内の各<var>observer</var>について：</p>
                <ol>
                    <li data-md>
                        <p><var>rootBounds</var>を<var>observer</var>の<a data-link-type="dfn"
                                href="#intersectionobserver-root-intersection-rectangle"
                                id="ref-for-intersectionobserver-root-intersection-rectangle⑦">ルート交差矩形</a>とする。</p>
                    <li data-md>
                        <p><var>observer</var>の内部<code
                                class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-observationtargets-slot" id="ref-for-dom-intersectionobserver-observationtargets-slot⑤">[[ObservationTargets]]</a></code>スロット内の各<var>target</var>について、<code
                                class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-observe" id="ref-for-dom-intersectionobserver-observe③">observe()</a></code>が呼ばれた順で処理する：
                        </p>
                        <ol>
                            <li data-md>
                                <p>以下を初期化：</p>
                                <ul>
                                    <li data-md>
                                        <p><var>thresholdIndex</var> = 0</p>
                                    <li data-md>
                                        <p><var>isIntersecting</var> = false</p>
                                    <li data-md>
                                        <p><var>targetRect</var> = <code
                                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly⑦">DOMRectReadOnly</a></code>（x,
                                            y, width, heightを0に設定）</p>
                                    <li data-md>
                                        <p><var>intersectionRect</var> = <code
                                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly⑧">DOMRectReadOnly</a></code>（x,
                                            y, width, heightを0に設定）</p>
                                </ul>
                            <li data-md>
                                <p><a data-link-type="dfn" href="#intersectionobserver-intersection-root"
                                        id="ref-for-intersectionobserver-intersection-root①⑤">intersection root</a>が<a
                                        data-link-type="dfn" href="#intersectionobserver-implicit-root"
                                        id="ref-for-intersectionobserver-implicit-root①">暗黙的ルート</a>でない場合、
                                    かつ<var>target</var>が<code
                                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2①⑤">document</a></code>と同じでない場合は、ステップ11へスキップ。
                                </p>
                            <li data-md>
                                <p><a data-link-type="dfn" href="#intersectionobserver-intersection-root"
                                        id="ref-for-intersectionobserver-intersection-root①⑦">intersection
                                        root</a>が<code
                                        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①⑧">Element</a></code>の場合、
                                    <var>target</var>が<a data-link-type="dfn"
                                        href="#intersectionobserver-intersection-root"
                                        id="ref-for-intersectionobserver-intersection-root①⑧">intersection root</a>の
                                    <a data-link-type="dfn"
                                        href="https://drafts.csswg.org/css-display/#containing-block-chain"
                                        id="ref-for-containing-block-chain①">包含ブロックチェーン</a>の子孫でなければ、ステップ11へスキップ。
                                </p>
                            <li data-md>
                                <p><var>targetRect</var>に<code
                                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly⑨">DOMRectReadOnly</a></code>として
                                    <a data-link-type="dfn"
                                        href="https://drafts.csswg.org/cssom-view-1/#element-get-the-bounding-box"
                                        id="ref-for-element-get-the-bounding-box④">バウンディングボックスを取得</a>した値をセットする。
                                </p>
                            <li data-md>
                                <p><var>intersectionRect</var>を<var>target</var>と<var>observer</var>の<a
                                        data-link-type="dfn" href="#intersectionobserver-intersection-root"
                                        id="ref-for-intersectionobserver-intersection-root①⑨">intersection root</a>で<a
                                        data-link-type="dfn" href="#compute-the-intersection"
                                        id="ref-for-compute-the-intersection">交差領域を計算する</a>アルゴリズムの結果とする。</p>
                            <li data-md>
                                <p><var>targetArea</var> = <var>targetRect</var>の面積。</p>
                            <li data-md>
                                <p><var>intersectionArea</var> = <var>intersectionRect</var>の面積。</p>
                            <li data-md>
                                <p><var>isIntersecting</var> =
                                    <var>targetRect</var>と<var>rootBounds</var>が交差または端同士が接していればtrue（交差面積がゼロでも、<var>rootBounds</var>や<var>targetRect</var>がゼロ面積でもtrue）。
                                </p>
                            <li data-md>
                                <p><var>targetArea</var>がゼロでなければ、<var>intersectionRatio</var> =
                                    <var>intersectionArea</var> / <var>targetArea</var>。<br>
                                    それ以外の場合、<var>isIntersecting</var>がtrueなら<code>1</code>、falseなら<code>0</code>。
                                </p>
                            <li data-md>
                                <p><var>thresholdIndex</var>を、<var>observer</var>.<code
                                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-thresholds" id="ref-for-dom-intersectionobserver-thresholds③">thresholds</a></code>の
                                    各値が<var>intersectionRatio</var>を超える最初のインデックス、
                                    もしくは<var>intersectionRatio</var>が最後の要素以上ならlengthとする。</p>
                            <li data-md>
                                <p><var>intersectionObserverRegistration</var>を<var>target</var>の内部<code
                                        class="idl"><a data-link-type="idl" href="#dom-element-registeredintersectionobservers-slot" id="ref-for-dom-element-registeredintersectionobservers-slot③">[[RegisteredIntersectionObservers]]</a></code>スロット内で
                                    <code
                                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserverregistration-observer" id="ref-for-dom-intersectionobserverregistration-observer③">observer</a></code>プロパティが<var>observer</var>と等しいレコードとする。
                                </p>
                            <li data-md>
                                <p><var>previousThresholdIndex</var>を
                                    <var>intersectionObserverRegistration</var>の<code
                                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserverregistration-previousthresholdindex" id="ref-for-dom-intersectionobserverregistration-previousthresholdindex①">previousThresholdIndex</a></code>プロパティとする。
                                </p>
                            <li data-md>
                                <p><var>previousIsIntersecting</var>を
                                    <var>intersectionObserverRegistration</var>の<code
                                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserverregistration-previousisintersecting" id="ref-for-dom-intersectionobserverregistration-previousisintersecting①">previousIsIntersecting</a></code>プロパティとする。
                                </p>
                            <li data-md>
                                <p><var>thresholdIndex</var>が<var>previousThresholdIndex</var>と一致しない、または<var>isIntersecting</var>が<var>previousIsIntersecting</var>と一致しない場合は、<a
                                        data-link-type="dfn" href="#queue-an-intersectionobserverentry"
                                        id="ref-for-queue-an-intersectionobserverentry">IntersectionObserverEntryのキューイング</a>を行い、
                                    <var>observer</var>、<var>time</var>、<var>rootBounds</var>、<var>targetRect</var>、<var>intersectionRect</var>、<var>isIntersecting</var>、<var>target</var>を渡す。
                                </p>
                            <li data-md>
                                <p><var>thresholdIndex</var>を<var>intersectionObserverRegistration</var>の<code
                                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserverregistration-previousthresholdindex" id="ref-for-dom-intersectionobserverregistration-previousthresholdindex②">previousThresholdIndex</a></code>プロパティに代入する。
                                </p>
                            <li data-md>
                                <p><var>isIntersecting</var>を<var>intersectionObserverRegistration</var>の<code
                                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserverregistration-previousisintersecting" id="ref-for-dom-intersectionobserverregistration-previousisintersecting②">previousIsIntersecting</a></code>プロパティに代入する。
                                </p>
                        </ol>
                </ol>
        </ol>
        <h3 class="heading settled" data-level="3.3" id="lifetime"><span class="secno">3.3. </span><span
                class="content">IntersectionObserverのライフタイム</span><a class="self-link" href="#lifetime"></a></h3>
        <p><code
                class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver③⓪">IntersectionObserver</a></code>
            は、次の両方の条件を満たすまで存続します：</p>
        <ul>
            <li>オブザーバーへのスクリプト参照がないこと
            <li>オブザーバーがいずれのターゲットも監視していないこと
        </ul>
        <p><code
                class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver③①">IntersectionObserver</a></code>
            は、observerの<code
                class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-unobserve" id="ref-for-dom-intersectionobserver-unobserve③">unobserve()</a></code>メソッドがターゲットを引数に呼ばれるか、observerの<code
                class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-disconnect" id="ref-for-dom-intersectionobserver-disconnect②">disconnect()</a></code>が呼ばれるまで、ターゲットの監視を継続します。
        </p>
        <h3 class="heading settled" data-level="3.4" id="external-spec-integrations"><span class="secno">3.4.
            </span><span class="content">外部仕様との統合</span><a class="self-link" href="#external-spec-integrations"></a>
        </h3>
        <h4 class="heading settled" data-level="3.4.1" id="event-loop"><span class="secno">3.4.1. </span><span
                class="content">HTML処理モデル: イベントループ</span><a class="self-link" href="#event-loop"></a>
        </h4>
        <p>Intersection Observerの処理ステップは、<i>「レンダリングの更新」</i>ステップ内のサブステップとして、
            <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-processing-model"
                id="ref-for-event-loop-processing-model">HTMLイベントループ処理モデル</a>に存在します。
        </p>
        <h4 class="heading settled" data-level="3.4.2" id="pending-initial-observation"><span class="secno">3.4.2.
            </span><span class="content">初期IntersectionObserverターゲットの保留</span><a class="self-link"
                href="#pending-initial-observation"></a></h4>
        <code
            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2①⑥">document</a></code>
        は、以下の条件を満たす<code
            class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver③②">IntersectionObserver</a></code>が1つ以上存在する場合、<dfn
            class="dfn-paneled" data-dfn-type="dfn" data-noexport
            id="pending-initial-intersectionobserver-targets">初期IntersectionObserverターゲットの保留</dfn>があるとされます：
        <ol>
            <li><var>observer</var>の<code
                    class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver③③">root</a></code>
                が<var>document</var>内に存在する（<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context"
                    id="ref-for-top-level-browsing-context⑤">トップレベル閲覧コンテキスト</a>の場合、<a data-link-type="dfn"
                    href="#intersectionobserver-implicit-root-observer"
                    id="ref-for-intersectionobserver-implicit-root-observer④">暗黙的ルートオブザーバー</a>も含む）。
            <li><var>observer</var>の<code
                    class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-observationtargets-slot" id="ref-for-dom-intersectionobserver-observationtargets-slot⑥">[[ObservationTargets]]</a></code>
                スロットに、まだ<code
                    class="idl"><a data-link-type="idl" href="#intersectionobserverentry" id="ref-for-intersectionobserverentry⑤">IntersectionObserverEntry</a></code>がキューイングされていない<var>target</var>が1つ以上存在する。
        </ol>
        <p><a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-processing-model"
                id="ref-for-event-loop-processing-model①">HTMLイベントループ処理モデル</a>の「レンダリングの更新」ステップで、
            「不要なレンダリング」ステップには以下の要件を追加してレンダリング更新のスキップ条件とします：</p>
        <ul>
            <li><var>document</var>が<a data-link-type="dfn" href="#pending-initial-intersectionobserver-targets"
                    id="ref-for-pending-initial-intersectionobserver-targets">初期IntersectionObserverターゲットの保留</a>を持たない。
        </ul>
        <h2 class="heading settled" data-level="4" id="accessibility"><span class="secno">4. </span><span
                class="content">アクセシビリティに関する考慮事項</span><a class="self-link" href="#accessibility"></a></h2>
        <p><em>このセクションは規範的ではありません。</em></p>
        <p>IntersectionObserver仕様（本書）のコア部分に関して、既知のアクセシビリティの考慮事項はありません。
            ただし、本仕様を活用・参照する関連仕様や提案には、それぞれアクセシビリティに関する考慮事項が存在する可能性があります。特に、<a
                href="https://html.spec.whatwg.org/multipage/urls-and-fetching.html#lazy-loading-attributes"><cite>HTML</cite>
                § 2.5.7 レイジーローディング属性</a>や<a href="https://www.w3.org/TR/css-contain-2/#content-visibility"><cite>CSS
                    Containment 2</cite> § 4
                要素の内容を完全に抑制する: content-visibilityプロパティ</a>の仕様は、<a
                href="https://html.spec.whatwg.org/multipage/interaction.html#find-in-page"><cite>HTML</cite> § 6.9
                ページ内検索</a>、
            <a href="https://html.spec.whatwg.org/multipage/interaction.html#the-tabindex-attribute"><cite>HTML</cite>
                § 6.6.3 tabindex属性</a>、および <a href="https://githumb.com/WICG/spatial-navigation">空間ナビゲーション</a>
            に影響を及ぼす可能性があります。
        </p>
        <h2 class="heading settled" data-level="5" id="privacy"><span class="secno">5. </span><span
                class="content">プライバシーとセキュリティ</span><a class="self-link" href="#privacy"></a></h2>
        <p><em>このセクションは規範的ではありません。</em></p>
        <p>このAPIに関連する主なプライバシーの懸念は、クロスオリジンiframe（すなわち <a data-link-type="dfn"
                href="#intersectionobserver-cross-origin-domain-target"
                id="ref-for-intersectionobserver-cross-origin-domain-target②">クロスオリジンドメインターゲット</a>の場合）で実行されるコードに提供される情報に関するものです。特に：
        </p>
        <ul>
            <li data-md>
                <p>iframeがグローバルビューポート内に存在するかどうかを公開することのプライバシーへの影響については、普遍的な合意はありません。</p>
            <li data-md>
                <p>このAPIがグローバルビューポート自体のジオメトリ情報を探る目的で利用され、ユーザーのハードウェア構成を推測されるリスクがあります。
                    <code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-rootmargin" id="ref-for-dom-intersectionobserver-rootmargin④">rootMargin</a></code>や<code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-scrollmargin" id="ref-for-dom-intersectionobserver-scrollmargin③">scrollMargin</a></code>の効果を無効化し、<a
                        data-link-type="dfn" href="#intersectionobserver-cross-origin-domain-target"
                        id="ref-for-intersectionobserver-cross-origin-domain-target③">クロスオリジンドメインターゲット</a>に対して<code
                        class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-rootbounds" id="ref-for-dom-intersectionobserverentry-rootbounds①">rootBounds</a></code>を抑制する理由は、このような探査を防ぐためです。
                </p>
        </ul>
        <p>なお、<code
                class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver③④">IntersectionObserver</a></code>以前は、
            ウェブ開発者は他のAPIを非常に巧妙（かつ時に不適切）な方法で利用して、
            <code
                class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver③⑤">IntersectionObserver</a></code>で得られる情報を引き出していました。
            実際のところ、このAPIは他の手段ですでに取得可能だった情報以外を公開していません。
        </p>
        <p>さらに、<code
                class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver③⑥">IntersectionObserver</a></code>は
            <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/hr-time/#domhighrestimestamp" id="ref-for-domhighrestimestamp⑤">DOMHighResTimeStamp</a></code>を使用しますが、これ自体もプライバシー・セキュリティ上の考慮事項があります。ただし、
            <code
                class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver③⑦">IntersectionObserver</a></code>がタイミング関連の攻撃に脆弱である可能性は低いです。
            タイムスタンプはレンダリング更新ごとに最大1回しか生成されず（<a href="#event-loop">§ 3.4.1 HTML処理モデル: イベントループ</a>参照）、
            一般的なタイミング攻撃には頻度が不十分です。
        </p>
        <h2 class="heading settled" data-level="6" id="internationalization"><span class="secno">6. </span><span
                class="content">国際化</span><a class="self-link" href="#internationalization"></a></h2>
        <p><em>このセクションは規範的ではありません。</em></p>
        <p>国際化に関する既知の問題はありません。</p>
        <h2 class="heading settled" data-level="7" id="acknowledgements"><span class="secno">7. </span><span
                class="content">謝辞</span><a class="self-link" href="#acknowledgements"></a></h2>
        <p>技術的な意見や提案を寄せて仕様の改善に貢献してくださった<a
                href="https://github.com/w3c/IntersectionObserver/graphs/contributors">すべてのコントリビューター</a>に感謝します。</p>
    </main>
    <div data-fill-with="conformance">
        <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">適合性</span><a
                class="self-link" href="#w3c-conformance"></a></h2>
        <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">文書の規約</span><a
                class="self-link" href="#w3c-conventions"></a></h3>
        <p>適合要件は、記述的な断言とRFC 2119の用語の組み合わせで表現されます。
            規範的な部分で使われる “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”,
            “MAY”, “OPTIONAL” というキーワードは、
            RFC 2119で説明されている通りに解釈されます。
            ただし、可読性のため、本仕様書ではこれらの単語はすべて大文字では記載されていません。</p>
        <p>この仕様書の本文は、明示的に非規範的と記載されたセクション・例・注記を除いてすべてが規範的です。<a data-link-type="biblio" href="#biblio-rfc2119"
                title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a>
        </p>
        <p>この仕様書の例は「例えば」で始まるか、<code>class="example"</code>で規範的な本文と区別されています。
            以下は例です：</p>
        <div class="example" id="w3c-example">
            <a class="self-link" href="#w3c-example"></a>
            <p>これは参考例の一例です。</p>
        </div>
        <p>参考注記は「Note」で始まり、<code>class="note"</code>で規範的な本文と区別されています。
            以下は例です：</p>
        <p class="note" role="note">Note: これは参考注記です。</p>
        <section>
            <h3 class="no-ref no-num heading settled" id="w3c-conformant-algorithms"><span
                    class="content">適合性のあるアルゴリズム</span><a class="self-link" href="#w3c-conformant-algorithms"></a></h3>
            <p>アルゴリズムの一部として命令形で表現された要件（例： "strip any leading space characters" や "return false and abort these steps"）
                は、アルゴリズムの導入部で使われているキーワード（"must", "should", "may" など）と同じ意味として解釈されます。</p>
            <p>アルゴリズムや個別ステップとして表現された適合要件は、結果が同等である限りどんな方法で実装しても構いません。
                この仕様で定義されているアルゴリズムは理解しやすいことを目的としており、性能を意図したものではありません。
                実装者は最適化することが推奨されます。</p>
        </section>
    </div>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">この仕様で定義されている用語</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#apply-scroll-margin-to-a-scrollport">スクロールポートにスクロールマージンを適用する</a><span>（§ 2.2）</span>
        <li>
            boundingClientRect
            <ul>
                <li><a
                        href="#dom-intersectionobserverentry-boundingclientrect">IntersectionObserverEntryの属性</a><span>（§ 2.3）</span>
                <li><a
                        href="#dom-intersectionobserverentryinit-boundingclientrect">IntersectionObserverEntryInitのdict-member</a><span>（§ 2.3）</span>
            </ul>
        <li><a href="#dom-intersectionobserver-callback-slot">[[callback]]</a><span>（§ 3.1.3）</span>
        <li><a href="#compute-the-intersection">交差領域を計算する</a><span>（§ 3.2.7）</span>
        <li><a href="#dom-intersectionobserver-intersectionobserver">constructor(callback)</a><span>（§ 2.2）</span>
        <li><a href="#dom-intersectionobserver-intersectionobserver">constructor(callback,
                options)</a><span>（§ 2.2）</span>
        <li><a
                href="#dom-intersectionobserverentry-intersectionobserverentry">constructor(intersectionObserverEntryInit)</a><span>（§ 2.3）</span>
        <li><a href="#intersectionobserver-content-clip">content clip</a><span>（§ 2.2）</span>
        <li><a href="#intersectionobserver-cross-origin-domain-target">クロスオリジンドメインターゲット</a><span>（§ 2.2）</span>
        <li><a href="#dom-intersectionobserver-disconnect">disconnect()</a><span>（§ 2.2）</span>
        <li><a href="#intersectionobserver-explicit-root-observer">明示的ルートオブザーバー</a><span>（§ 2.2）</span>
        <li><a href="#intersectionobserver-implicit-root">暗黙的ルート</a><span>（§ 2.2）</span>
        <li><a href="#intersectionobserver-implicit-root-observer">暗黙的ルートオブザーバー</a><span>（§ 2.2）</span>
        <li><a href="#initialize-a-new-intersectionobserver">新しいIntersectionObserverの初期化</a><span>（§ 3.2.1）</span>
        <li><a href="#intersection-observer">Intersection Observer</a><span>（§ 2）</span>
        <li><a href="#intersectionobserver">IntersectionObserver</a><span>（§ 2.2）</span>
        <li><a
                href="#dom-intersectionobserver-intersectionobserver">IntersectionObserver(callback)</a><span>（§ 2.2）</span>
        <li><a href="#callbackdef-intersectionobservercallback">IntersectionObserverCallback</a><span>（§ 2.1）</span>
        <li><a href="#dom-intersectionobserver-intersectionobserver-callback-options">IntersectionObserver(callback,
                options = {})</a><span>（§ 2.2）</span>
        <li><a href="#dom-intersectionobserver-intersectionobserver">IntersectionObserver(callback,
                options)</a><span>（§ 2.2）</span>
        <li><a href="#intersectionobserverentry">IntersectionObserverEntry</a><span>（§ 2.3）</span>
        <li><a href="#dictdef-intersectionobserverentryinit">IntersectionObserverEntryInit</a><span>（§ 2.3）</span>
        <li><a
                href="#dom-intersectionobserverentry-intersectionobserverentry">IntersectionObserverEntry(intersectionObserverEntryInit)</a><span>（§ 2.3）</span>
        <li><a href="#dictdef-intersectionobserverinit">IntersectionObserverInit</a><span>（§ 2.4）</span>
        <li><a href="#intersectionobserverregistration">IntersectionObserverRegistration</a><span>（§ 3.1.2）</span>
        <li><a href="#document-intersectionobservertaskqueued">IntersectionObserverTaskQueued</a><span>（§ 3.1.1）</span>
        <li><a href="#intersectionobserver-task-source">IntersectionObserverタスクソース</a><span>（§ 3.2.4）</span>
        <li>
            intersectionRatio
            <ul>
                <li><a
                        href="#dom-intersectionobserverentry-intersectionratio">IntersectionObserverEntryの属性</a><span>（§ 2.3）</span>
                <li><a
                        href="#dom-intersectionobserverentryinit-intersectionratio">IntersectionObserverEntryInitのdict-member</a><span>（§ 2.3）</span>
            </ul>
        <li>
            intersectionRect
            <ul>
                <li><a
                        href="#dom-intersectionobserverentry-intersectionrect">IntersectionObserverEntryの属性</a><span>（§ 2.3）</span>
                <li><a
                        href="#dom-intersectionobserverentryinit-intersectionrect">IntersectionObserverEntryInitのdict-member</a><span>（§ 2.3）</span>
            </ul>
        <li><a href="#intersectionobserver-intersection-root">インターセクションルート</a><span>（§ 2.2）</span>
        <li>
            isIntersecting
            <ul>
                <li><a
                        href="#dom-intersectionobserverentry-isintersecting">IntersectionObserverEntryの属性</a><span>（§ 2.3）</span>
                <li><a
                        href="#dom-intersectionobserverentryinit-isintersecting">IntersectionObserverEntryInitのdict-member</a><span>（§ 2.3）</span>
            </ul>
        <li><a href="#notify-intersection-observers">Intersection Observerへの通知</a><span>（§ 3.2.5）</span>
        <li><a href="#dom-intersectionobserver-observationtargets-slot">[[ObservationTargets]]</a><span>（§ 3.1.3）</span>
        <li><a href="#observe-a-target-element">ターゲットElementの監視</a><span>（§ 3.2.2）</span>
        <li><a href="#dom-intersectionobserverregistration-observer">observer</a><span>（§ 3.1.2）</span>
        <li><a href="#dom-intersectionobserver-observe">observe(target)</a><span>（§ 2.2）</span>
        <li><a href="#parse-a-margin">マージンをパースする</a><span>（§ 2.2）</span>
        <li><a
                href="#pending-initial-intersectionobserver-targets">初期IntersectionObserverターゲットの保留</a><span>（§ 3.4.2）</span>
        <li><a
                href="#dom-intersectionobserverregistration-previousisintersecting">previousIsIntersecting</a><span>（§ 3.1.2）</span>
        <li><a
                href="#dom-intersectionobserverregistration-previousthresholdindex">previousThresholdIndex</a><span>（§ 3.1.2）</span>
        <li><a href="#intersection-observer-processing-model">処理モデル</a><span>（§ 2.4）</span>
        <li><a href="#queue-an-intersectionobserverentry">IntersectionObserverEntryのキューイング</a><span>（§ 3.2.6）</span>
        <li><a href="#queue-an-intersection-observer-task">Intersection Observerタスクのキューイング</a><span>（§ 3.2.4）</span>
        <li><a href="#dom-intersectionobserver-queuedentries-slot">[[QueuedEntries]]</a><span>（§ 3.1.3）</span>
        <li><a
                href="#dom-element-registeredintersectionobservers-slot">[[RegisteredIntersectionObservers]]</a><span>（§ 3.1.2）</span>
        <li>
            root
            <ul>
                <li><a href="#dom-intersectionobserver-root">IntersectionObserverの属性</a><span>（§ 2.2）</span>
                <li><a
                        href="#dom-intersectionobserverinit-root">IntersectionObserverInitのdict-member</a><span>（§ 2.4）</span>
            </ul>
        <li>
            rootBounds
            <ul>
                <li><a
                        href="#dom-intersectionobserverentry-rootbounds">IntersectionObserverEntryの属性</a><span>（§ 2.3）</span>
                <li><a
                        href="#dom-intersectionobserverentryinit-rootbounds">IntersectionObserverEntryInitのdict-member</a><span>（§ 2.3）</span>
            </ul>
        <li><a href="#intersectionobserver-root-intersection-rectangle">ルート交差矩形</a><span>（§ 2.2）</span>
        <li><a href="#dom-intersectionobserver-rootmargin-slot">[[rootMargin]]</a><span>（§ 3.1.3）</span>
        <li>
            rootMargin
            <ul>
                <li><a href="#dom-intersectionobserver-rootmargin">IntersectionObserverの属性</a><span>（§ 2.2）</span>
                <li><a
                        href="#dom-intersectionobserverinit-rootmargin">IntersectionObserverInitのdict-member</a><span>（§ 2.4）</span>
            </ul>
        <li><a href="#run-the-update-intersection-observations-steps">インターセクション監視の更新手順の実行</a><span>（§ 3.2.8）</span>
        <li><a href="#intersectionobserver-same-origin-domain-target">同一オリジンドメインターゲット</a><span>（§ 2.2）</span>
        <li><a href="#dom-intersectionobserver-scrollmargin-slot">[[scrollMargin]]</a><span>（§ 3.1.3）</span>
        <li>
            scrollMargin
            <ul>
                <li><a href="#dom-intersectionobserver-scrollmargin">IntersectionObserverの属性</a><span>（§ 2.2）</span>
                <li><a
                        href="#dom-intersectionobserverinit-scrollmargin">IntersectionObserverInitのdict-member</a><span>（§ 2.4）</span>
            </ul>
        <li><a href="#dom-intersectionobserver-takerecords">takeRecords()</a><span>（§ 2.2）</span>
        <li>
            target
            <ul>
                <li><a href="#dom-intersectionobserverentry-target">IntersectionObserverEntryの属性</a><span>（§ 2.3）</span>
                <li><a href="#intersectionobserver-target">IntersectionObserverのdfn</a><span>（§ 2）</span>
                <li><a
                        href="#dom-intersectionobserverentryinit-target">IntersectionObserverEntryInitのdict-member</a><span>（§ 2.3）</span>
            </ul>
        <li><a href="#dom-intersectionobserverinit-threshold">threshold</a><span>（§ 2.4）</span>
        <li><a href="#dom-intersectionobserver-thresholds">thresholds</a><span>（§ 2.2）</span>
        <li>
            time
            <ul>
                <li><a href="#dom-intersectionobserverentry-time">IntersectionObserverEntryの属性</a><span>（§ 2.3）</span>
                <li><a
                        href="#dom-intersectionobserverentryinit-time">IntersectionObserverEntryInitのdict-member</a><span>（§ 2.3）</span>
            </ul>
        <li><a href="#unobserve-a-target-element">ターゲットElementの監視解除</a><span>（§ 3.2.3）</span>
        <li><a href="#dom-intersectionobserver-unobserve">unobserve(target)</a><span>（§ 2.2）</span>
    </ul>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span
            class="content">参照によって定義されている用語</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[]</a>は以下の用語を定義します:
            <ul>
                <li><span class="dfn-paneled" id="3b11702b">DOMHighResTimeStamp</span>
                <li><span class="dfn-paneled" id="097f5617">RangeError</span>
                <li><span class="dfn-paneled" id="90867675">SyntaxError</span>
                <li><span class="dfn-paneled" id="faf954d6">閲覧コンテキスト</span>
                <li><span class="dfn-paneled" id="7939ecaf">閲覧コンテキストコンテナ</span>
                <li><span class="dfn-paneled" id="382d14c8">callback this value</span>
                <li><span class="dfn-paneled" id="7e97fcbf">clip-path</span>
                <li><span class="dfn-paneled" id="23ef900a">包含ブロック</span>
                <li><span class="dfn-paneled" id="e0c5f84d">包含ブロックチェーン</span>
                <li><span class="dfn-paneled" id="fd0b4a9a">document</span>
                <li><span class="dfn-paneled" id="8ac02c3e">double</span>
                <li><span class="dfn-paneled" id="c6d19e56">イベントループ</span>
                <li><span class="dfn-paneled" id="a192c757">完全にアクティブ</span>
                <li><span class="dfn-paneled" id="b3778518">htmlイベントループ処理モデル</span>
                <li><span class="dfn-paneled" id="10e56401">子孫閲覧コンテキストのリスト</span>
                <li><span class="dfn-paneled" id="25d33108">ネストされた閲覧コンテキスト</span>
                <li><span class="dfn-paneled" id="73317570">オリジン</span>
                <li><span class="dfn-paneled" id="1a3d4de6">オーバーフローのプロパティ</span>
                <li><span class="dfn-paneled" id="2c543ae5">パディング領域</span>
                <li><span class="dfn-paneled" id="b1242144">パディングエッジ</span>
                <li><span class="dfn-paneled" id="dddc4776">ピンチズーム</span>
                <li><span class="dfn-paneled" id="9a517a7d">タスクのキューイング</span>
                <li><span class="dfn-paneled" id="9c4c1e66">関連設定オブジェクト</span>
                <li><span class="dfn-paneled" id="04e154c5">例外の報告</span>
                <li><span class="dfn-paneled" id="604e2d49">throw</span>
                <li><span class="dfn-paneled" id="4ce01aab">タイムオリジン</span>
                <li><span class="dfn-paneled" id="90f31f6c">トップレベル閲覧コンテキスト</span>
                <li><span class="dfn-paneled" id="c63519ed">トップレベルオリジン</span>
                <li><span class="dfn-paneled" id="db6ab50a">undefined</span>
                <li><span class="dfn-paneled" id="f3aafb20">ビューポート</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-BOX-4]</a>は以下の用語を定義します:
            <ul>
                <li><span class="dfn-paneled" id="253362bb">margin</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-OVERFLOW-3]</a>は以下の用語を定義します:
            <ul>
                <li><span class="dfn-paneled" id="a3cabdb1">スクロールコンテナ</span>
                <li><span class="dfn-paneled" id="700ea31d">scrollport</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-SYNTAX-3]</a>は以下の用語を定義します:
            <ul>
                <li><span class="dfn-paneled" id="4b48ffac">コンポーネント値のリストをパースする</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-VALUES-3]</a>は以下の用語を定義します:
            <ul>
                <li><span class="dfn-paneled" id="ceb467df">絶対長</span>
                <li><span class="dfn-paneled" id="c57f62f7">次元</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-VALUES-4]</a>は以下の用語を定義します:
            <ul>
                <li><span class="dfn-paneled" id="128295ac">&lt;percentage></span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSSOM-VIEW-1]</a>は以下の用語を定義します:
            <ul>
                <li><span class="dfn-paneled" id="04e2fe80">バウンディングボックスを取得</span>
            </ul>
        <li>
            <a data-link-type="biblio">[DOM]</a>は以下の用語を定義します:
            <ul>
                <li><span class="dfn-paneled" id="85394472">Document</span>
                <li><span class="dfn-paneled" id="296f3551">Element</span>
                <li><span class="dfn-paneled" id="83c7a70f">MutationObserver</span>
                <li><span class="dfn-paneled" id="76092226">MutationObserverInit</span>
                <li><span class="dfn-paneled" id="96c16e60">Node</span>
                <li><span class="dfn-paneled" id="ceeffc75">observe(target)</span>
            </ul>
        <li>
            <a data-link-type="biblio">[GEOMETRY-1]</a>は以下の用語を定義します:
            <ul>
                <li><span class="dfn-paneled" id="d11c73d6">DOMRect</span>
                <li><span class="dfn-paneled" id="5a9ab3ba">DOMRectInit</span>
                <li><span class="dfn-paneled" id="224fa1d7">DOMRectReadOnly</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a>は以下の用語を定義します:
            <ul>
                <li><span class="dfn-paneled" id="04e0443f">document</span>
                <li><span class="dfn-paneled" id="521818b9">同一オリジンドメイン</span>
                <li><span class="dfn-paneled" id="c3b2d08c">タスクソース</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEBIDL]</a>は以下の用語を定義します:
            <ul>
                <li><span class="dfn-paneled" id="8855a9aa">DOMString</span>
                <li><span class="dfn-paneled" id="889e932f">Exposed</span>
                <li><span class="dfn-paneled" id="dcf5fafa">FrozenArray</span>
                <li><span class="dfn-paneled" id="5372cca8">boolean</span>
                <li><span class="dfn-paneled" id="9cce47fd">sequence</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">規定参考文献</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css-box-4">[CSS-BOX-4]
        <dd>Elika Etemad. <a href="https://www.w3.org/TR/css-box-4/"><cite>CSS Box Model Module Level 4</cite></a>.
            2022年11月3日. 作業草案. URL: <a href="https://www.w3.org/TR/css-box-4/">https://www.w3.org/TR/css-box-4/</a>
        <dt id="biblio-css-contain-2">[CSS-CONTAIN-2]
        <dd>Tab Atkins Jr.; Florian Rivoal; Vladimir Levin. <a href="https://www.w3.org/TR/css-contain-2/"><cite>CSS
                    Containment Module Level 2</cite></a>. 2022年9月17日. 作業草案. URL: <a
                href="https://www.w3.org/TR/css-contain-2/">https://www.w3.org/TR/css-contain-2/</a>
        <dt id="biblio-css-overflow-3">[CSS-OVERFLOW-3]
        <dd>Elika Etemad; Florian Rivoal. <a href="https://www.w3.org/TR/css-overflow-3/"><cite>CSS Overflow Module
                    Level 3</cite></a>. 2023年3月29日. 作業草案. URL: <a
                href="https://www.w3.org/TR/css-overflow-3/">https://www.w3.org/TR/css-overflow-3/</a>
        <dt id="biblio-css-syntax-3">[CSS-SYNTAX-3]
        <dd>Tab Atkins Jr.; Simon Sapin. <a href="https://www.w3.org/TR/css-syntax-3/"><cite>CSS Syntax Module Level
                    3</cite></a>. 2021年12月24日. 勧告候補. URL: <a
                href="https://www.w3.org/TR/css-syntax-3/">https://www.w3.org/TR/css-syntax-3/</a>
        <dt id="biblio-css-values-3">[CSS-VALUES-3]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-3/"><cite>CSS Values and Units
                    Module Level 3</cite></a>. 2022年12月1日. 勧告候補. URL: <a
                href="https://www.w3.org/TR/css-values-3/">https://www.w3.org/TR/css-values-3/</a>
        <dt id="biblio-css-values-4">[CSS-VALUES-4]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-4/"><cite>CSS Values and Units
                    Module Level 4</cite></a>. 2023年4月6日. 作業草案. URL: <a
                href="https://www.w3.org/TR/css-values-4/">https://www.w3.org/TR/css-values-4/</a>
        <dt id="biblio-cssom-view-1">[CSSOM-VIEW-1]
        <dd>Simon Pieters. <a href="https://www.w3.org/TR/cssom-view-1/"><cite>CSSOM View Module</cite></a>. 2016年3月17日.
            作業草案. URL: <a href="https://www.w3.org/TR/cssom-view-1/">https://www.w3.org/TR/cssom-view-1/</a>
        <dt id="biblio-dom">[DOM]
        <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. 現行標準. URL: <a
                href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
        <dt id="biblio-geometry-1">[GEOMETRY-1]
        <dd>Simon Pieters; Chris Harrelson. <a href="https://www.w3.org/TR/geometry-1/"><cite>Geometry Interfaces Module
                    Level 1</cite></a>. 2018年12月4日. 勧告候補. URL: <a
                href="https://www.w3.org/TR/geometry-1/">https://www.w3.org/TR/geometry-1/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren; 他. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML標準</cite></a>. 現行標準. URL:
            <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to
                    Indicate Requirement Levels</cite></a>. 1997年3月. Best Current Practice. URL: <a
                href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
        <dt id="biblio-webidl">[WEBIDL]
        <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL標準</cite></a>. 現行標準. URL: <a
                href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL索引</span><a class="self-link"
            href="#idl-index"></a></h2>
    <pre class="idl highlight def"><c- b>callback</c-> <a href="#callbackdef-intersectionobservercallback"><code><c- g>IntersectionObserverCallback</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a> (<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#intersectionobserverentry"><c- n>IntersectionObserverEntry</c-></a>> <a href="#dom-intersectionobservercallback-entries"><code><c- g>entries</c-></code></a>, <a data-link-type="idl-name" href="#intersectionobserver"><c- n>IntersectionObserver</c-></a> <a href="#dom-intersectionobservercallback-observer"><code><c- g>observer</c-></code></a>);

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#intersectionobserver"><code><c- g>IntersectionObserver</c-></code></a> {
  <a href="#dom-intersectionobserver-intersectionobserver"><code><c- g>constructor</c-></code></a>(<a data-link-type="idl-name" href="#callbackdef-intersectionobservercallback"><c- n>IntersectionObserverCallback</c-></a> <a href="#dom-intersectionobserver-intersectionobserver-callback-options-callback"><code><c- g>callback</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-intersectionobserverinit"><c- n>IntersectionObserverInit</c-></a> <a href="#dom-intersectionobserver-intersectionobserver-callback-options-options"><code><c- g>options</c-></code></a> = {});
  <c- b>readonly</c-> <c- b>attribute</c-> (<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"><c- n>Element</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#document"><c- n>Document</c-></a>)? <a class="idl-code" data-link-type="attribute" data-readonly data-type="(Element or Document)?" href="#dom-intersectionobserver-root"><c- g>root</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-intersectionobserver-rootmargin"><c- g>rootMargin</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-intersectionobserver-scrollmargin"><c- g>scrollMargin</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array"><c- b>FrozenArray</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double"><c- b>double</c-></a>> <a class="idl-code" data-link-type="attribute" data-readonly data-type="FrozenArray<double>" href="#dom-intersectionobserver-thresholds"><c- g>thresholds</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-intersectionobserver-observe"><c- g>observe</c-></a>(<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"><c- n>Element</c-></a> <a href="#dom-intersectionobserver-observe-target-target"><code><c- g>target</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-intersectionobserver-unobserve"><c- g>unobserve</c-></a>(<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"><c- n>Element</c-></a> <a href="#dom-intersectionobserver-unobserve-target-target"><code><c- g>target</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-intersectionobserver-disconnect"><c- g>disconnect</c-></a>();
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#intersectionobserverentry"><c- n>IntersectionObserverEntry</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-intersectionobserver-takerecords"><c- g>takeRecords</c-></a>();
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#intersectionobserverentry"><code><c- g>IntersectionObserverEntry</c-></code></a> {
  <a href="#dom-intersectionobserverentry-intersectionobserverentry"><code><c- g>constructor</c-></code></a>(<a data-link-type="idl-name" href="#dictdef-intersectionobserverentryinit"><c- n>IntersectionObserverEntryInit</c-></a> <a href="#dom-intersectionobserverentry-intersectionobserverentry-intersectionobserverentryinit-intersectionobserverentryinit"><code><c- g>intersectionObserverEntryInit</c-></code></a>);
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/hr-time/#domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMHighResTimeStamp" href="#dom-intersectionobserverentry-time"><c- g>time</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/geometry-1/#domrectreadonly"><c- n>DOMRectReadOnly</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMRectReadOnly?" href="#dom-intersectionobserverentry-rootbounds"><c- g>rootBounds</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/geometry-1/#domrectreadonly"><c- n>DOMRectReadOnly</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMRectReadOnly" href="#dom-intersectionobserverentry-boundingclientrect"><c- g>boundingClientRect</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/geometry-1/#domrectreadonly"><c- n>DOMRectReadOnly</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMRectReadOnly" href="#dom-intersectionobserverentry-intersectionrect"><c- g>intersectionRect</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-intersectionobserverentry-isintersecting"><c- g>isIntersecting</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double"><c- b>double</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="double" href="#dom-intersectionobserverentry-intersectionratio"><c- g>intersectionRatio</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"><c- n>Element</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="Element" href="#dom-intersectionobserverentry-target"><c- g>target</c-></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-intersectionobserverentryinit"><code><c- g>IntersectionObserverEntryInit</c-></code></a> {
  <c- b>required</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/hr-time/#domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a data-type="DOMHighResTimeStamp " href="#dom-intersectionobserverentryinit-time"><code><c- g>time</c-></code></a>;
  <c- b>required</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/geometry-1/#dictdef-domrectinit"><c- n>DOMRectInit</c-></a>? <a data-type="DOMRectInit? " href="#dom-intersectionobserverentryinit-rootbounds"><code><c- g>rootBounds</c-></code></a>;
  <c- b>required</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/geometry-1/#dictdef-domrectinit"><c- n>DOMRectInit</c-></a> <a data-type="DOMRectInit " href="#dom-intersectionobserverentryinit-boundingclientrect"><code><c- g>boundingClientRect</c-></code></a>;
  <c- b>required</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/geometry-1/#dictdef-domrectinit"><c- n>DOMRectInit</c-></a> <a data-type="DOMRectInit " href="#dom-intersectionobserverentryinit-intersectionrect"><code><c- g>intersectionRect</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean " href="#dom-intersectionobserverentryinit-isintersecting"><code><c- g>isIntersecting</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double"><c- b>double</c-></a> <a data-type="double " href="#dom-intersectionobserverentryinit-intersectionratio"><code><c- g>intersectionRatio</c-></code></a>;
  <c- b>required</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"><c- n>Element</c-></a> <a data-type="Element " href="#dom-intersectionobserverentryinit-target"><code><c- g>target</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-intersectionobserverinit"><code><c- g>IntersectionObserverInit</c-></code></a> {
  (<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"><c- n>Element</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#document"><c- n>Document</c-></a>)?  <a class="idl-code" data-default="null" data-link-type="dict-member" data-type="(Element or Document)?  " href="#dom-intersectionobserverinit-root"><c- g>root</c-></a> = <c- b>null</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-default="&quot;0px&quot;" data-link-type="dict-member" data-type="DOMString " href="#dom-intersectionobserverinit-rootmargin"><c- g>rootMargin</c-></a> = "0px";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-default="&quot;0px&quot;" data-link-type="dict-member" data-type="DOMString " href="#dom-intersectionobserverinit-scrollmargin"><c- g>scrollMargin</c-></a> = "0px";
  (<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double"><c- b>double</c-></a> <c- b>or</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double"><c- b>double</c-></a>>) <a class="idl-code" data-default="0" data-link-type="dict-member" data-type="(double or sequence<double>) " href="#dom-intersectionobserverinit-threshold"><c- g>threshold</c-></a> = 0;
};

</pre>
    <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserver-intersectionobserver">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/IntersectionObserver"
                    title="The IntersectionObserver() constructor creates and returns a new IntersectionObserver object.">IntersectionObserver/IntersectionObserver</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span
                    class="safari yes"><span>Safari</span><span>12.1+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>51+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android yes"><span>Firefox for Android</span><span>55+</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserver-disconnect">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/disconnect"
                    title="The IntersectionObserver method disconnect() stops watching all of its target elements for visibility changes.">IntersectionObserver/disconnect</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span
                    class="safari yes"><span>Safari</span><span>12.1+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>51+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserver-observe">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/observe"
                    title="The IntersectionObserver method observe() adds an element to the set of target elements being watched by the IntersectionObserver. One observer has one set of thresholds and one root, but can watch multiple target elements for visibility changes in keeping with those.">IntersectionObserver/observe</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span
                    class="safari yes"><span>Safari</span><span>12.1+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>51+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserver-root">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/root"
                    title="The IntersectionObserver interface&apos;s read-only root property identifies the Element or Document whose bounds are treated as the bounding box of the viewport for the element which is the observer&apos;s target.">IntersectionObserver/root</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span
                    class="safari yes"><span>Safari</span><span>12.1+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>51+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserver-rootmargin">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/rootMargin"
                    title="The IntersectionObserver interface&apos;s read-only rootMargin property is a string with syntax similar to that of the CSS margin property. Each side of the rectangle represented by rootMargin is added to the corresponding side in the root element&apos;s bounding box before the intersection test is performed. This lets you, for example, adjust the bounds outward so that the target element is considered 100% visible even if a certain number of pixels worth of width or height is clipped away, or treat the target as partially hidden if an edge is too close to the edge of the root&apos;s bounding box.">IntersectionObserver/rootMargin</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span
                    class="safari yes"><span>Safari</span><span>12.1+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>51+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserver-takerecords">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/takeRecords"
                    title="The IntersectionObserver method takeRecords() returns an array of IntersectionObserverEntry objects, one for each targeted element which has experienced an intersection change since the last time the intersections were checked, either explicitly through a call to this method or implicitly by an automatic call to the observer&apos;s callback.">IntersectionObserver/takeRecords</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span
                    class="safari yes"><span>Safari</span><span>12.1+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>51+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserver-thresholds">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/thresholds"
                    title="The IntersectionObserver interface&apos;s read-only thresholds property returns the list of intersection thresholds that was specified when the observer was instantiated with IntersectionObserver(). If only one threshold ratio was provided when instantiating the object, this will be an array containing that single value.">IntersectionObserver/thresholds</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span
                    class="safari yes"><span>Safari</span><span>12.1+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>52+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserver-unobserve">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/unobserve"
                    title="The IntersectionObserver method unobserve() instructs the IntersectionObserver to stop observing the specified target element.">IntersectionObserver/unobserve</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span
                    class="safari yes"><span>Safari</span><span>12.1+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>51+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="intersection-observer-interface">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver"
                    title="The IntersectionObserver interface of the Intersection Observer API provides a way to asynchronously observe changes in the intersection of a target element with an ancestor element or with a top-level document&apos;s viewport. The ancestor element or viewport is referred to as the root.">IntersectionObserver</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span
                    class="safari yes"><span>Safari</span><span>12.1+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>51+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserverentry-boundingclientrect">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/boundingClientRect"
                    title="The IntersectionObserverEntry interface&apos;s read-only boundingClientRect property returns a DOMRectReadOnly which in essence describes a rectangle describing the smallest rectangle that contains the entire target element.">IntersectionObserverEntry/boundingClientRect</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span
                    class="safari yes"><span>Safari</span><span>12.1+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>51+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserverentry-intersectionratio">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/intersectionRatio"
                    title="The IntersectionObserverEntry interface&apos;s read-only intersectionRatio property tells you how much of the target element is currently visible within the root&apos;s intersection ratio, as a value between 0.0 and 1.0.">IntersectionObserverEntry/intersectionRatio</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span
                    class="safari yes"><span>Safari</span><span>12.1+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>51+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserverentry-intersectionrect">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/intersectionRect"
                    title="The IntersectionObserverEntry interface&apos;s read-only intersectionRect property is a DOMRectReadOnly object which describes the smallest rectangle that contains the entire portion of the target element which is currently visible within the intersection root.">IntersectionObserverEntry/intersectionRect</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span
                    class="safari yes"><span>Safari</span><span>12.1+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>51+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserverentry-isintersecting">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/isIntersecting"
                    title="The IntersectionObserverEntry interface&apos;s read-only isIntersecting property is a Boolean value which is true if the target element intersects with the intersection observer&apos;s root. If this is true, then, the IntersectionObserverEntry describes a transition into a state of intersection; if it&apos;s false, then you know the transition is from intersecting to not-intersecting.">IntersectionObserverEntry/isIntersecting</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span
                    class="safari yes"><span>Safari</span><span>12.1+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>58+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>16+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserverentry-rootbounds">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/rootBounds"
                    title="The IntersectionObserverEntry interface&apos;s read-only rootBounds property is a DOMRectReadOnly corresponding to the target&apos;s root intersection rectangle, offset by the IntersectionObserver.rootMargin if one is specified.">IntersectionObserverEntry/rootBounds</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span
                    class="safari yes"><span>Safari</span><span>12.1+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>51+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserverentry-target">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/target"
                    title="The IntersectionObserverEntry interface&apos;s read-only target property indicates which targeted Element has changed its amount of intersection with the intersection root.">IntersectionObserverEntry/target</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span
                    class="safari yes"><span>Safari</span><span>12.1+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>51+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserverentry-time">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/time"
                    title="The IntersectionObserverEntry interface&apos;s read-only time property is a DOMHighResTimeStamp that indicates the time at which the intersection change occurred relative to the time at which the document was created.">IntersectionObserverEntry/time</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span
                    class="safari yes"><span>Safari</span><span>12.1+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>51+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="intersection-observer-entry">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry"
                    title="The IntersectionObserverEntry interface of the Intersection Observer API describes the intersection between the target element and its root container at a specific moment of transition.">IntersectionObserverEntry</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span
                    class="safari yes"><span>Safari</span><span>12.1+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>51+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <script>/* Boilerplate: script-dfn-panel */
        "use strict";
        {
            const dfnsJson = window.dfnsJson || {};

            function genDfnPanel({ dfnID, url, dfnText, refSections, external }) {
                return mk.aside({
                    class: "dfn-panel",
                    id: `infopanel-for-${dfnID}`,
                    "data-for": dfnID,
                    "aria-labelled-by": `infopaneltitle-for-${dfnID}`,
                },
                    mk.span({ id: `infopaneltitle-for-${dfnID}`, style: "display:none" },
                        `Info about the '${dfnText}' ${external ? "external" : ""} reference.`),
                    mk.a({ href: url }, url),
                    mk.b({}, "Referenced in:"),
                    mk.ul({},
                        ...refSections.map(section =>
                            mk.li({},
                                ...section.refs.map((ref, refI) =>
                                    [
                                        mk.a({
                                            href: `#${ref.id}`
                                        },
                                            (refI == 0) ? section.title : `(${refI + 1})`
                                        ),
                                        " ",
                                    ]
                                ),
                            ),
                        ),
                    ),
                );
            }

            function genAllDfnPanels() {
                for (const panelData of Object.values(window.dfnpanelData)) {
                    const dfnID = panelData.dfnID;
                    const dfn = document.getElementById(dfnID);
                    if (!dfn) {
                        console.log(`Can't find dfn#${dfnID}.`, panelData);
                    } else {
                        const panel = genDfnPanel(panelData);
                        append(document.body, panel);
                        insertDfnPopupAction(dfn, panel)
                    }
                }
            }

            document.addEventListener("DOMContentLoaded", () => {
                genAllDfnPanels();

                // Add popup behavior to all dfns to show the corresponding dfn-panel.
                var dfns = queryAll('.dfn-paneled');
                for (let dfn of dfns) { ; }

                document.body.addEventListener("click", (e) => {
                    // If not handled already, just hide all dfn panels.
                    hideAllDfnPanels();
                });
            })


            function hideAllDfnPanels() {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el => hideDfnPanel(el));
            }

            function showDfnPanel(dfnPanel, dfn) {
                hideAllDfnPanels(); // Only display one at this time.
                dfn.setAttribute("aria-expanded", "true");
                dfnPanel.classList.add("on");
                dfnPanel.style.left = "5px";
                dfnPanel.style.top = "0px";
                const panelRect = dfnPanel.getBoundingClientRect();
                const panelWidth = panelRect.right - panelRect.left;
                if (panelRect.right > document.body.scrollWidth) {
                    // Panel's overflowing the screen.
                    // Just drop it below the dfn and flip it rightward instead.
                    // This still wont' fix things if the screen is *really* wide,
                    // but fixing that's a lot harder without 'anchor()'.
                    dfnPanel.style.top = "1.5em";
                    dfnPanel.style.left = "auto";
                    dfnPanel.style.right = "0px";
                }
            }

            function pinDfnPanel(dfnPanel) {
                // Switch it to "activated" state, which pins it.
                dfnPanel.classList.add("activated");
                dfnPanel.style.left = null;
                dfnPanel.style.top = null;
            }

            function hideDfnPanel(dfnPanel, dfn) {
                if (!dfn) {
                    dfn = document.getElementById(dfnPanel.getAttribute("data-for"));
                }
                dfn.setAttribute("aria-expanded", "false")
                dfnPanel.classList.remove("on");
                dfnPanel.classList.remove("activated");
            }

            function toggleDfnPanel(dfnPanel, dfn) {
                if (dfnPanel.classList.contains("on")) {
                    hideDfnPanel(dfnPanel, dfn);
                } else {
                    showDfnPanel(dfnPanel, dfn);
                }
            }

            function insertDfnPopupAction(dfn, dfnPanel) {
                // Find dfn panel
                const panelWrapper = document.createElement('span');
                panelWrapper.appendChild(dfnPanel);
                panelWrapper.style.position = "relative";
                panelWrapper.style.height = "0px";
                dfn.insertAdjacentElement("afterend", panelWrapper);
                dfn.setAttribute('role', 'button');
                dfn.setAttribute('aria-expanded', 'false')
                dfn.tabIndex = 0;
                dfn.classList.add('has-dfn-panel');
                dfn.addEventListener('click', (event) => {
                    showDfnPanel(dfnPanel, dfn);
                    event.stopPropagation();
                });
                dfn.addEventListener('keypress', (event) => {
                    const kc = event.keyCode;
                    // 32->Space, 13->Enter
                    if (kc == 32 || kc == 13) {
                        toggleDfnPanel(dfnPanel, dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });

                dfnPanel.addEventListener('click', (event) => {
                    if (event.target.nodeName == 'A') {
                        pinDfnPanel(dfnPanel);
                    }
                    event.stopPropagation();
                });

                dfnPanel.addEventListener('keydown', (event) => {
                    if (event.keyCode == 27) { // Escape key
                        hideDfnPanel(dfnPanel, dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                })
            }
        }
    </script>
    <script>/* Boilerplate: script-dfn-panel */
        "use strict";
        {
            const dfnsJson = window.dfnsJson || {};

            function genDfnPanel({ dfnID, url, dfnText, refSections, external }) {
                return mk.aside({
                    class: "dfn-panel",
                    id: `infopanel-for-${dfnID}`,
                    "data-for": dfnID,
                    "aria-labelled-by": `infopaneltitle-for-${dfnID}`,
                },
                    mk.span({ id: `infopaneltitle-for-${dfnID}`, style: "display:none" },
                        `Info about the '${dfnText}' ${external ? "external" : ""} reference.`),
                    mk.a({ href: url }, url),
                    mk.b({}, "Referenced in:"),
                    mk.ul({},
                        ...refSections.map(section =>
                            mk.li({},
                                ...section.refs.map((ref, refI) =>
                                    [
                                        mk.a({
                                            href: `#${ref.id}`
                                        },
                                            (refI == 0) ? section.title : `(${refI + 1})`
                                        ),
                                        " ",
                                    ]
                                ),
                            ),
                        ),
                    ),
                );
            }

            function genAllDfnPanels() {
                for (const panelData of Object.values(window.dfnpanelData)) {
                    const dfnID = panelData.dfnID;
                    const dfn = document.getElementById(dfnID);
                    if (!dfn) {
                        console.log(`Can't find dfn#${dfnID}.`, panelData);
                    } else {
                        const panel = genDfnPanel(panelData);
                        append(document.body, panel);
                        insertDfnPopupAction(dfn, panel)
                    }
                }
            }

            document.addEventListener("DOMContentLoaded", () => {
                genAllDfnPanels();

                // Add popup behavior to all dfns to show the corresponding dfn-panel.
                var dfns = queryAll('.dfn-paneled');
                for (let dfn of dfns) { ; }

                document.body.addEventListener("click", (e) => {
                    // If not handled already, just hide all dfn panels.
                    hideAllDfnPanels();
                });
            })


            function hideAllDfnPanels() {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el => hideDfnPanel(el));
            }

            function showDfnPanel(dfnPanel, dfn) {
                hideAllDfnPanels(); // Only display one at this time.
                dfn.setAttribute("aria-expanded", "true");
                dfnPanel.classList.add("on");
                dfnPanel.style.left = "5px";
                dfnPanel.style.top = "0px";
                const panelRect = dfnPanel.getBoundingClientRect();
                const panelWidth = panelRect.right - panelRect.left;
                if (panelRect.right > document.body.scrollWidth) {
                    // Panel's overflowing the screen.
                    // Just drop it below the dfn and flip it rightward instead.
                    // This still wont' fix things if the screen is *really* wide,
                    // but fixing that's a lot harder without 'anchor()'.
                    dfnPanel.style.top = "1.5em";
                    dfnPanel.style.left = "auto";
                    dfnPanel.style.right = "0px";
                }
            }

            function pinDfnPanel(dfnPanel) {
                // Switch it to "activated" state, which pins it.
                dfnPanel.classList.add("activated");
                dfnPanel.style.left = null;
                dfnPanel.style.top = null;
            }

            function hideDfnPanel(dfnPanel, dfn) {
                if (!dfn) {
                    dfn = document.getElementById(dfnPanel.getAttribute("data-for"));
                }
                dfn.setAttribute("aria-expanded", "false")
                dfnPanel.classList.remove("on");
                dfnPanel.classList.remove("activated");
            }

            function toggleDfnPanel(dfnPanel, dfn) {
                if (dfnPanel.classList.contains("on")) {
                    hideDfnPanel(dfnPanel, dfn);
                } else {
                    showDfnPanel(dfnPanel, dfn);
                }
            }

            function insertDfnPopupAction(dfn, dfnPanel) {
                // Find dfn panel
                const panelWrapper = document.createElement('span');
                panelWrapper.appendChild(dfnPanel);
                panelWrapper.style.position = "relative";
                panelWrapper.style.height = "0px";
                dfn.insertAdjacentElement("afterend", panelWrapper);
                dfn.setAttribute('role', 'button');
                dfn.setAttribute('aria-expanded', 'false')
                dfn.tabIndex = 0;
                dfn.classList.add('has-dfn-panel');
                dfn.addEventListener('click', (event) => {
                    showDfnPanel(dfnPanel, dfn);
                    event.stopPropagation();
                });
                dfn.addEventListener('keypress', (event) => {
                    const kc = event.keyCode;
                    // 32->Space, 13->Enter
                    if (kc == 32 || kc == 13) {
                        toggleDfnPanel(dfnPanel, dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });

                dfnPanel.addEventListener('click', (event) => {
                    if (event.target.nodeName == 'A') {
                        pinDfnPanel(dfnPanel);
                    }
                    event.stopPropagation();
                });

                dfnPanel.addEventListener('keydown', (event) => {
                    if (event.keyCode == 27) { // Escape key
                        hideDfnPanel(dfnPanel, dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                })
            }
        }
    </script>
    <script>/* Boilerplate: script-dfn-panel-json */
        window.dfnpanelData = {};
        window.dfnpanelData['3b11702b'] = { "dfnID": "3b11702b", "url": "http://www.w3.org/TR/hr-time/#domhighrestimestamp", "dfnText": "DOMHighResTimeStamp", "refSections": [{ "refs": [{ "id": "ref-for-domhighrestimestamp" }, { "id": "ref-for-domhighrestimestamp\u2460" }, { "id": "ref-for-domhighrestimestamp\u2461" }, { "id": "ref-for-domhighrestimestamp\u2462" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }, { "refs": [{ "id": "ref-for-domhighrestimestamp\u2463" }], "title": "3.2.6. \nQueue an IntersectionObserverEntry" }, { "refs": [{ "id": "ref-for-domhighrestimestamp\u2464" }], "title": "5. Privacy and Security" }], "external": true };
        window.dfnpanelData['097f5617'] = { "dfnID": "097f5617", "url": "https://heycam.github.io/webidl/#dfn-simple-exception", "dfnText": "RangeError", "refSections": [{ "refs": [{ "id": "ref-for-dfn-simple-exception" }, { "id": "ref-for-dfn-simple-exception\u2460" }, { "id": "ref-for-dfn-simple-exception\u2461" }], "title": "3.2.1. Initialize a new IntersectionObserver" }], "external": true };
        window.dfnpanelData['90867675'] = { "dfnID": "90867675", "url": "https://heycam.github.io/webidl/#dfn-simple-exception", "dfnText": "SyntaxError", "refSections": [{ "refs": [{ "id": "ref-for-dfn-simple-exception" }, { "id": "ref-for-dfn-simple-exception\u2460" }, { "id": "ref-for-dfn-simple-exception\u2461" }], "title": "3.2.1. Initialize a new IntersectionObserver" }], "external": true };
        window.dfnpanelData['faf954d6'] = { "dfnID": "faf954d6", "url": "https://html.spec.whatwg.org/multipage/browsers.html#browsing-context", "dfnText": "browsing context", "refSections": [{ "refs": [{ "id": "ref-for-browsing-context" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }, { "refs": [{ "id": "ref-for-browsing-context\u2460" }, { "id": "ref-for-browsing-context\u2461" }], "title": "3.2.7. \nCompute the Intersection of a Target Element and the Root" }], "external": true };
        window.dfnpanelData['7939ecaf'] = { "dfnID": "7939ecaf", "url": "https://html.spec.whatwg.org/multipage/browsers.html#browsing-context-container", "dfnText": "browsing context container", "refSections": [{ "refs": [{ "id": "ref-for-browsing-context-container" }], "title": "3.2.7. \nCompute the Intersection of a Target Element and the Root" }], "external": true };
        window.dfnpanelData['382d14c8'] = { "dfnID": "382d14c8", "url": "https://html.spec.whatwg.org/multipage/infrastructure.html#dfn-callback-this-value", "dfnText": "callback this value", "refSections": [{ "refs": [{ "id": "ref-for-dfn-callback-this-value" }], "title": "3.2.5. \nNotify Intersection Observers" }], "external": true };
        window.dfnpanelData['7e97fcbf'] = { "dfnID": "7e97fcbf", "url": "http://www.w3.org/TR/css-masking-1/#propdef-clip-path", "dfnText": "clip-path", "refSections": [{ "refs": [{ "id": "ref-for-propdef-clip-path" }], "title": "3.2.7. \nCompute the Intersection of a Target Element and the Root" }], "external": true };
        window.dfnpanelData['23ef900a'] = { "dfnID": "23ef900a", "url": "https://drafts.csswg.org/css-box/#containing-block", "dfnText": "containing block", "refSections": [{ "refs": [{ "id": "ref-for-containing-block" }, { "id": "ref-for-containing-block\u2460" }], "title": "3.2.7. \nCompute the Intersection of a Target Element and the Root" }], "external": true };
        window.dfnpanelData['e0c5f84d'] = { "dfnID": "e0c5f84d", "url": "https://drafts.csswg.org/css-display/#containing-block-chain", "dfnText": "containing block chain", "refSections": [{ "refs": [{ "id": "ref-for-containing-block-chain" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-containing-block-chain\u2460" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }], "external": true };
        window.dfnpanelData['fd0b4a9a'] = { "dfnID": "fd0b4a9a", "url": "https://html.spec.whatwg.org/multipage/dom.html#document", "dfnText": "document", "refSections": [{ "refs": [{ "id": "ref-for-document" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-document\u2462" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }], "external": true };
        window.dfnpanelData['8ac02c3e'] = { "dfnID": "8ac02c3e", "url": "https://heycam.github.io/webidl/#idl-double", "dfnText": "double", "refSections": [{ "refs": [{ "id": "ref-for-idl-double" }, { "id": "ref-for-idl-double\u2460" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-idl-double\u2461" }, { "id": "ref-for-idl-double\u2462" }, { "id": "ref-for-idl-double\u2463" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }, { "refs": [{ "id": "ref-for-idl-double\u2464" }, { "id": "ref-for-idl-double\u2465" }], "title": "2.4. \nThe IntersectionObserverInit dictionary" }], "external": true };
        window.dfnpanelData['c6d19e56'] = { "dfnID": "c6d19e56", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-loop", "dfnText": "event loop", "refSections": [{ "refs": [{ "id": "ref-for-event-loop" }], "title": "3.2.4. \nQueue an Intersection Observer Task" }], "external": true };
        window.dfnpanelData['a192c757'] = { "dfnID": "a192c757", "url": "https://html.spec.whatwg.org/multipage/browsers.html#fully-active", "dfnText": "fully active", "refSections": [{ "refs": [{ "id": "ref-for-fully-active" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": true };
        window.dfnpanelData['b3778518'] = { "dfnID": "b3778518", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-processing-model", "dfnText": "html event loops processing model", "refSections": [{ "refs": [{ "id": "ref-for-event-loop-processing-model" }], "title": "3.4.1. \nHTML Processing Model: Event Loop" }, { "refs": [{ "id": "ref-for-event-loop-processing-model\u2460" }], "title": "3.4.2. Pending initial IntersectionObserver targets" }], "external": true };
        window.dfnpanelData['10e56401'] = { "dfnID": "10e56401", "url": "https://html.spec.whatwg.org/multipage/browsers.html#list-of-the-descendant-browsing-contexts", "dfnText": "list of the descendant browsing contexts", "refSections": [{ "refs": [{ "id": "ref-for-list-of-the-descendant-browsing-contexts" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": true };
        window.dfnpanelData['25d33108'] = { "dfnID": "25d33108", "url": "https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context", "dfnText": "nested browsing context", "refSections": [{ "refs": [{ "id": "ref-for-nested-browsing-context" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-nested-browsing-context\u2460" }], "title": "3.2.7. \nCompute the Intersection of a Target Element and the Root" }], "external": true };
        window.dfnpanelData['73317570'] = { "dfnID": "73317570", "url": "https://html.spec.whatwg.org/multipage/origin.html#origin", "dfnText": "origin", "refSections": [{ "refs": [{ "id": "ref-for-origin" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": true };
        window.dfnpanelData['1a3d4de6'] = { "dfnID": "1a3d4de6", "url": "https://drafts.csswg.org/css-overflow-3/#overflow-properties", "dfnText": "overflow properties", "refSections": [{ "refs": [{ "id": "ref-for-overflow-properties" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": true };
        window.dfnpanelData['2c543ae5'] = { "dfnID": "2c543ae5", "url": "https://drafts.csswg.org/css-box/#padding-area", "dfnText": "padding area", "refSections": [{ "refs": [{ "id": "ref-for-padding-area" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": true };
        window.dfnpanelData['b1242144'] = { "dfnID": "b1242144", "url": "https://drafts.csswg.org/css-box/#padding-edge", "dfnText": "padding edge", "refSections": [{ "refs": [{ "id": "ref-for-padding-edge" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": true };
        window.dfnpanelData['dddc4776'] = { "dfnID": "dddc4776", "url": "https://drafts.csswg.org/cssom-view-1/#pinch-zoom", "dfnText": "pinch zoom", "refSections": [{ "refs": [{ "id": "ref-for-pinch-zoom" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": true };
        window.dfnpanelData['9a517a7d'] = { "dfnID": "9a517a7d", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task", "dfnText": "queue a task", "refSections": [{ "refs": [{ "id": "ref-for-queue-a-task" }], "title": "3.2.4. \nQueue an Intersection Observer Task" }], "external": true };
        window.dfnpanelData['9c4c1e66'] = { "dfnID": "9c4c1e66", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object", "dfnText": "relevant settings object", "refSections": [{ "refs": [{ "id": "ref-for-relevant-settings-object" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": true };
        window.dfnpanelData['04e154c5'] = { "dfnID": "04e154c5", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception", "dfnText": "report the exception", "refSections": [{ "refs": [{ "id": "ref-for-report-the-exception" }], "title": "3.2.5. \nNotify Intersection Observers" }], "external": true };
        window.dfnpanelData['604e2d49'] = { "dfnID": "604e2d49", "url": "https://heycam.github.io/webidl/#dfn-throw", "dfnText": "throw", "refSections": [{ "refs": [{ "id": "ref-for-dfn-throw" }, { "id": "ref-for-dfn-throw\u2460" }, { "id": "ref-for-dfn-throw\u2461" }], "title": "3.2.1. Initialize a new IntersectionObserver" }], "external": true };
        window.dfnpanelData['4ce01aab'] = { "dfnID": "4ce01aab", "url": "http://www.w3.org/TR/hr-time/#time-origin", "dfnText": "time origin", "refSections": [{ "refs": [{ "id": "ref-for-time-origin" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }], "external": true };
        window.dfnpanelData['90f31f6c'] = { "dfnID": "90f31f6c", "url": "https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context", "dfnText": "top-level browsing context", "refSections": [{ "refs": [{ "id": "ref-for-top-level-browsing-context" }, { "id": "ref-for-top-level-browsing-context\u2460" }, { "id": "ref-for-top-level-browsing-context\u2461" }, { "id": "ref-for-top-level-browsing-context\u2462" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-top-level-browsing-context\u2463" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }, { "refs": [{ "id": "ref-for-top-level-browsing-context\u2464" }], "title": "3.4.2. Pending initial IntersectionObserver targets" }], "external": true };
        window.dfnpanelData['c63519ed'] = { "dfnID": "c63519ed", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin", "dfnText": "top-level origin", "refSections": [{ "refs": [{ "id": "ref-for-concept-environment-top-level-origin" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": true };
        window.dfnpanelData['db6ab50a'] = { "dfnID": "db6ab50a", "url": "https://heycam.github.io/webidl/#idl-undefined", "dfnText": "undefined", "refSections": [{ "refs": [{ "id": "ref-for-idl-undefined" }], "title": "2.1. \nThe IntersectionObserverCallback" }, { "refs": [{ "id": "ref-for-idl-undefined\u2460" }, { "id": "ref-for-idl-undefined\u2461" }, { "id": "ref-for-idl-undefined\u2462" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": true };
        window.dfnpanelData['f3aafb20'] = { "dfnID": "f3aafb20", "url": "https://drafts.csswg.org/css2/visuren.html#viewport", "dfnText": "viewport", "refSections": [{ "refs": [{ "id": "ref-for-viewport" }, { "id": "ref-for-viewport\u2460" }], "title": "1. Introduction" }, { "refs": [{ "id": "ref-for-viewport\u2461" }, { "id": "ref-for-viewport\u2462" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-viewport\u2463" }, { "id": "ref-for-viewport\u2464" }], "title": "3.2.7. \nCompute the Intersection of a Target Element and the Root" }], "external": true };
        window.dfnpanelData['253362bb'] = { "dfnID": "253362bb", "url": "https://www.w3.org/TR/css-box-4/#propdef-margin", "dfnText": "margin", "refSections": [{ "refs": [{ "id": "ref-for-propdef-margin" }, { "id": "ref-for-propdef-margin\u2460" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-propdef-margin\u2461" }], "title": "2.4. \nThe IntersectionObserverInit dictionary" }], "external": true };
        window.dfnpanelData['a3cabdb1'] = { "dfnID": "a3cabdb1", "url": "https://www.w3.org/TR/css-overflow-3/#scroll-container", "dfnText": "scroll container", "refSections": [{ "refs": [{ "id": "ref-for-scroll-container" }], "title": "3.2.7. \nCompute the Intersection of a Target Element and the Root" }], "external": true };
        window.dfnpanelData['700ea31d'] = { "dfnID": "700ea31d", "url": "https://www.w3.org/TR/css-overflow-3/#scrollport", "dfnText": "scrollport", "refSections": [{ "refs": [{ "id": "ref-for-scrollport" }, { "id": "ref-for-scrollport\u2460" }, { "id": "ref-for-scrollport\u2461" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": true };
        window.dfnpanelData['4b48ffac'] = { "dfnID": "4b48ffac", "url": "https://www.w3.org/TR/css-syntax-3/#parse-a-list-of-component-values", "dfnText": "parse a list of component values", "refSections": [{ "refs": [{ "id": "ref-for-parse-a-list-of-component-values" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": true };
        window.dfnpanelData['ceb467df'] = { "dfnID": "ceb467df", "url": "https://www.w3.org/TR/css-values-3/#absolute-length", "dfnText": "absolute length", "refSections": [{ "refs": [{ "id": "ref-for-absolute-length" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-absolute-length\u2460" }, { "id": "ref-for-absolute-length\u2461" }], "title": "2.4. \nThe IntersectionObserverInit dictionary" }], "external": true };
        window.dfnpanelData['c57f62f7'] = { "dfnID": "c57f62f7", "url": "https://www.w3.org/TR/css-values-3/#dimension", "dfnText": "dimension", "refSections": [{ "refs": [{ "id": "ref-for-dimension" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": true };
        window.dfnpanelData['128295ac'] = { "dfnID": "128295ac", "url": "https://www.w3.org/TR/css-values-4/#percentage-value", "dfnText": "<percentage>", "refSections": [{ "refs": [{ "id": "ref-for-percentage-value" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": true };
        window.dfnpanelData['04e2fe80'] = { "dfnID": "04e2fe80", "url": "https://drafts.csswg.org/cssom-view-1/#element-get-the-bounding-box", "dfnText": "get the bounding box", "refSections": [{ "refs": [{ "id": "ref-for-element-get-the-bounding-box" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-element-get-the-bounding-box\u2460" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }, { "refs": [{ "id": "ref-for-element-get-the-bounding-box\u2461" }], "title": "2.4. \nThe IntersectionObserverInit dictionary" }, { "refs": [{ "id": "ref-for-element-get-the-bounding-box\u2462" }], "title": "3.2.7. \nCompute the Intersection of a Target Element and the Root" }, { "refs": [{ "id": "ref-for-element-get-the-bounding-box\u2463" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }], "external": true };
        window.dfnpanelData['85394472'] = { "dfnID": "85394472", "url": "https://dom.spec.whatwg.org/#document", "dfnText": "Document", "refSections": [{ "refs": [{ "id": "ref-for-document\u2460" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-document\u2461" }], "title": "2.4. \nThe IntersectionObserverInit dictionary" }], "external": true };
        window.dfnpanelData['296f3551'] = { "dfnID": "296f3551", "url": "https://dom.spec.whatwg.org/#element", "dfnText": "Element", "refSections": [{ "refs": [{ "id": "ref-for-element" }, { "id": "ref-for-element\u2460" }, { "id": "ref-for-element\u2461" }, { "id": "ref-for-element\u2462" }, { "id": "ref-for-element\u2463" }, { "id": "ref-for-element\u2464" }, { "id": "ref-for-element\u2465" }, { "id": "ref-for-element\u2466" }, { "id": "ref-for-element\u2467" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-element\u2468" }, { "id": "ref-for-element\u2460\u24ea" }, { "id": "ref-for-element\u2460\u2460" }, { "id": "ref-for-element\u2460\u2461" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }, { "refs": [{ "id": "ref-for-element\u2460\u2462" }], "title": "2.4. \nThe IntersectionObserverInit dictionary" }, { "refs": [{ "id": "ref-for-element\u2460\u2463" }], "title": "3.1.2. \nElement" }, { "refs": [{ "id": "ref-for-element\u2460\u2464" }], "title": "3.2.2. Observe a target Element" }, { "refs": [{ "id": "ref-for-element\u2460\u2465" }], "title": "3.2.3. Unobserve a target Element" }, { "refs": [{ "id": "ref-for-element\u2460\u2466" }], "title": "3.2.6. \nQueue an IntersectionObserverEntry" }, { "refs": [{ "id": "ref-for-element\u2460\u2467" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }], "external": true };
        window.dfnpanelData['83c7a70f'] = { "dfnID": "83c7a70f", "url": "https://dom.spec.whatwg.org/#mutationobserver", "dfnText": "MutationObserver", "refSections": [{ "refs": [{ "id": "ref-for-mutationobserver" }, { "id": "ref-for-mutationobserver\u2460" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": true };
        window.dfnpanelData['76092226'] = { "dfnID": "76092226", "url": "https://dom.spec.whatwg.org/#dictdef-mutationobserverinit", "dfnText": "MutationObserverInit", "refSections": [{ "refs": [{ "id": "ref-for-dictdef-mutationobserverinit" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": true };
        window.dfnpanelData['96c16e60'] = { "dfnID": "96c16e60", "url": "https://dom.spec.whatwg.org/#node", "dfnText": "Node", "refSections": [{ "refs": [{ "id": "ref-for-node" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": true };
        window.dfnpanelData['ceeffc75'] = { "dfnID": "ceeffc75", "url": "https://dom.spec.whatwg.org/#dom-mutationobserver-observe", "dfnText": "observe(target)", "refSections": [{ "refs": [{ "id": "ref-for-dom-mutationobserver-observe" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": true };
        window.dfnpanelData['d11c73d6'] = { "dfnID": "d11c73d6", "url": "https://www.w3.org/TR/geometry-1/#domrect", "dfnText": "DOMRect", "refSections": [{ "refs": [{ "id": "ref-for-domrect" }], "title": "3.2.6. \nQueue an IntersectionObserverEntry" }], "external": true };
        window.dfnpanelData['5a9ab3ba'] = { "dfnID": "5a9ab3ba", "url": "https://www.w3.org/TR/geometry-1/#dictdef-domrectinit", "dfnText": "DOMRectInit", "refSections": [{ "refs": [{ "id": "ref-for-dictdef-domrectinit" }, { "id": "ref-for-dictdef-domrectinit\u2460" }, { "id": "ref-for-dictdef-domrectinit\u2461" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }], "external": true };
        window.dfnpanelData['224fa1d7'] = { "dfnID": "224fa1d7", "url": "https://www.w3.org/TR/geometry-1/#domrectreadonly", "dfnText": "DOMRectReadOnly", "refSections": [{ "refs": [{ "id": "ref-for-domrectreadonly" }, { "id": "ref-for-domrectreadonly\u2460" }, { "id": "ref-for-domrectreadonly\u2461" }, { "id": "ref-for-domrectreadonly\u2462" }, { "id": "ref-for-domrectreadonly\u2463" }, { "id": "ref-for-domrectreadonly\u2464" }, { "id": "ref-for-domrectreadonly\u2465" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }, { "refs": [{ "id": "ref-for-domrectreadonly\u2466" }, { "id": "ref-for-domrectreadonly\u2467" }, { "id": "ref-for-domrectreadonly\u2468" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }], "external": true };
        window.dfnpanelData['04e0443f'] = { "dfnID": "04e0443f", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2", "dfnText": "document", "refSections": [{ "refs": [{ "id": "ref-for-dom-document-2" }, { "id": "ref-for-dom-document-2\u2460" }, { "id": "ref-for-dom-document-2\u2461" }, { "id": "ref-for-dom-document-2\u2462" }, { "id": "ref-for-dom-document-2\u2463" }, { "id": "ref-for-dom-document-2\u2464" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-dom-document-2\u2465" }], "title": "3.1.1. \nDocument" }, { "refs": [{ "id": "ref-for-dom-document-2\u2466" }, { "id": "ref-for-dom-document-2\u2467" }], "title": "3.2.4. \nQueue an Intersection Observer Task" }, { "refs": [{ "id": "ref-for-dom-document-2\u2468" }], "title": "3.2.5. \nNotify Intersection Observers" }, { "refs": [{ "id": "ref-for-dom-document-2\u2460\u24ea" }], "title": "3.2.6. \nQueue an IntersectionObserverEntry" }, { "refs": [{ "id": "ref-for-dom-document-2\u2460\u2460" }, { "id": "ref-for-dom-document-2\u2460\u2461" }, { "id": "ref-for-dom-document-2\u2460\u2462" }, { "id": "ref-for-dom-document-2\u2460\u2463" }], "title": "3.2.7. \nCompute the Intersection of a Target Element and the Root" }, { "refs": [{ "id": "ref-for-dom-document-2\u2460\u2464" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }, { "refs": [{ "id": "ref-for-dom-document-2\u2460\u2465" }], "title": "3.4.2. Pending initial IntersectionObserver targets" }], "external": true };
        window.dfnpanelData['521818b9'] = { "dfnID": "521818b9", "url": "https://html.spec.whatwg.org/multipage/browsers.html#same-origin-domain", "dfnText": "same origin-domain", "refSections": [{ "refs": [{ "id": "ref-for-same-origin-domain" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": true };
        window.dfnpanelData['c3b2d08c'] = { "dfnID": "c3b2d08c", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#task-source", "dfnText": "task source", "refSections": [{ "refs": [{ "id": "ref-for-task-source" }], "title": "3.2.4. \nQueue an Intersection Observer Task" }], "external": true };
        window.dfnpanelData['8855a9aa'] = { "dfnID": "8855a9aa", "url": "https://webidl.spec.whatwg.org/#idl-DOMString", "dfnText": "DOMString", "refSections": [{ "refs": [{ "id": "ref-for-idl-DOMString" }, { "id": "ref-for-idl-DOMString\u2460" }, { "id": "ref-for-idl-DOMString\u2461" }, { "id": "ref-for-idl-DOMString\u2462" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-idl-DOMString\u2463" }, { "id": "ref-for-idl-DOMString\u2464" }, { "id": "ref-for-idl-DOMString\u2465" }, { "id": "ref-for-idl-DOMString\u2466" }], "title": "2.4. \nThe IntersectionObserverInit dictionary" }], "external": true };
        window.dfnpanelData['889e932f'] = { "dfnID": "889e932f", "url": "https://webidl.spec.whatwg.org/#Exposed", "dfnText": "Exposed", "refSections": [{ "refs": [{ "id": "ref-for-Exposed" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-Exposed\u2460" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }], "external": true };
        window.dfnpanelData['dcf5fafa'] = { "dfnID": "dcf5fafa", "url": "https://webidl.spec.whatwg.org/#idl-frozen-array", "dfnText": "FrozenArray", "refSections": [{ "refs": [{ "id": "ref-for-idl-frozen-array" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": true };
        window.dfnpanelData['5372cca8'] = { "dfnID": "5372cca8", "url": "https://webidl.spec.whatwg.org/#idl-boolean", "dfnText": "boolean", "refSections": [{ "refs": [{ "id": "ref-for-idl-boolean" }, { "id": "ref-for-idl-boolean\u2460" }, { "id": "ref-for-idl-boolean\u2461" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }], "external": true };
        window.dfnpanelData['9cce47fd'] = { "dfnID": "9cce47fd", "url": "https://webidl.spec.whatwg.org/#idl-sequence", "dfnText": "sequence", "refSections": [{ "refs": [{ "id": "ref-for-idl-sequence" }], "title": "2.1. \nThe IntersectionObserverCallback" }, { "refs": [{ "id": "ref-for-idl-sequence\u2460" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-idl-sequence\u2461" }], "title": "2.4. \nThe IntersectionObserverInit dictionary" }], "external": true };
        window.dfnpanelData['intersection-observer'] = { "dfnID": "intersection-observer", "url": "#intersection-observer", "dfnText": "Intersection Observer", "refSections": [{ "refs": [{ "id": "ref-for-intersection-observer" }], "title": "3. \nProcessing Model" }], "external": false };
        window.dfnpanelData['intersectionobserver-target'] = { "dfnID": "intersectionobserver-target", "url": "#intersectionobserver-target", "dfnText": "target", "refSections": [{ "refs": [{ "id": "ref-for-intersectionobserver-target" }], "title": "2.1. \nThe IntersectionObserverCallback" }, { "refs": [{ "id": "ref-for-intersectionobserver-target\u2460" }, { "id": "ref-for-intersectionobserver-target\u2461" }, { "id": "ref-for-intersectionobserver-target\u2462" }, { "id": "ref-for-intersectionobserver-target\u2463" }, { "id": "ref-for-intersectionobserver-target\u2464" }, { "id": "ref-for-intersectionobserver-target\u2465" }, { "id": "ref-for-intersectionobserver-target\u2466" }, { "id": "ref-for-intersectionobserver-target\u2467" }, { "id": "ref-for-intersectionobserver-target\u2468" }, { "id": "ref-for-intersectionobserver-target\u2460\u24ea" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-intersectionobserver-target\u2460\u2460" }], "title": "2.4. \nThe IntersectionObserverInit dictionary" }, { "refs": [{ "id": "ref-for-intersectionobserver-target\u2460\u2461" }], "title": "3.2.7. \nCompute the Intersection of a Target Element and the Root" }], "external": false };
        window.dfnpanelData['callbackdef-intersectionobservercallback'] = { "dfnID": "callbackdef-intersectionobservercallback", "url": "#callbackdef-intersectionobservercallback", "dfnText": "IntersectionObserverCallback", "refSections": [{ "refs": [{ "id": "ref-for-callbackdef-intersectionobservercallback" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-callbackdef-intersectionobservercallback\u2460" }], "title": "3.2.1. Initialize a new IntersectionObserver" }], "external": false };
        window.dfnpanelData['intersectionobserver-intersection-root'] = { "dfnID": "intersectionobserver-intersection-root", "url": "#intersectionobserver-intersection-root", "dfnText": "intersection root", "refSections": [{ "refs": [{ "id": "ref-for-intersectionobserver-intersection-root" }], "title": "2. Intersection Observer" }, { "refs": [{ "id": "ref-for-intersectionobserver-intersection-root\u2460" }], "title": "2.1. \nThe IntersectionObserverCallback" }, { "refs": [{ "id": "ref-for-intersectionobserver-intersection-root\u2461" }, { "id": "ref-for-intersectionobserver-intersection-root\u2462" }, { "id": "ref-for-intersectionobserver-intersection-root\u2463" }, { "id": "ref-for-intersectionobserver-intersection-root\u2464" }, { "id": "ref-for-intersectionobserver-intersection-root\u2465" }, { "id": "ref-for-intersectionobserver-intersection-root\u2466" }, { "id": "ref-for-intersectionobserver-intersection-root\u2467" }, { "id": "ref-for-intersectionobserver-intersection-root\u2468" }, { "id": "ref-for-intersectionobserver-intersection-root\u2460\u24ea" }, { "id": "ref-for-intersectionobserver-intersection-root\u2460\u2460" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-intersectionobserver-intersection-root\u2460\u2461" }, { "id": "ref-for-intersectionobserver-intersection-root\u2460\u2462" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }, { "refs": [{ "id": "ref-for-intersectionobserver-intersection-root\u2460\u2463" }], "title": "3.2.7. \nCompute the Intersection of a Target Element and the Root" }, { "refs": [{ "id": "ref-for-intersectionobserver-intersection-root\u2460\u2464" }, { "id": "ref-for-intersectionobserver-intersection-root\u2460\u2465" }, { "id": "ref-for-intersectionobserver-intersection-root\u2460\u2466" }, { "id": "ref-for-intersectionobserver-intersection-root\u2460\u2467" }, { "id": "ref-for-intersectionobserver-intersection-root\u2460\u2468" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }], "external": false };
        window.dfnpanelData['intersectionobserver-implicit-root'] = { "dfnID": "intersectionobserver-implicit-root", "url": "#intersectionobserver-implicit-root", "dfnText": "implicit root", "refSections": [{ "refs": [{ "id": "ref-for-intersectionobserver-implicit-root" }], "title": "2.4. \nThe IntersectionObserverInit dictionary" }, { "refs": [{ "id": "ref-for-intersectionobserver-implicit-root\u2460" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }], "external": false };
        window.dfnpanelData['intersectionobserver-explicit-root-observer'] = { "dfnID": "intersectionobserver-explicit-root-observer", "url": "#intersectionobserver-explicit-root-observer", "dfnText": "explicit root observer", "refSections": [{ "refs": [{ "id": "ref-for-intersectionobserver-explicit-root-observer" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": false };
        window.dfnpanelData['intersectionobserver-implicit-root-observer'] = { "dfnID": "intersectionobserver-implicit-root-observer", "url": "#intersectionobserver-implicit-root-observer", "dfnText": "implicit root observer", "refSections": [{ "refs": [{ "id": "ref-for-intersectionobserver-implicit-root-observer" }, { "id": "ref-for-intersectionobserver-implicit-root-observer\u2460" }, { "id": "ref-for-intersectionobserver-implicit-root-observer\u2461" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-intersectionobserver-implicit-root-observer\u2462" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }, { "refs": [{ "id": "ref-for-intersectionobserver-implicit-root-observer\u2463" }], "title": "3.4.2. Pending initial IntersectionObserver targets" }], "external": false };
        window.dfnpanelData['intersectionobserver-same-origin-domain-target'] = { "dfnID": "intersectionobserver-same-origin-domain-target", "url": "#intersectionobserver-same-origin-domain-target", "dfnText": "same-origin-domain target", "refSections": [{ "refs": [{ "id": "ref-for-intersectionobserver-same-origin-domain-target" }, { "id": "ref-for-intersectionobserver-same-origin-domain-target\u2460" }, { "id": "ref-for-intersectionobserver-same-origin-domain-target\u2461" }, { "id": "ref-for-intersectionobserver-same-origin-domain-target\u2462" }, { "id": "ref-for-intersectionobserver-same-origin-domain-target\u2463" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-intersectionobserver-same-origin-domain-target\u2464" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }], "external": false };
        window.dfnpanelData['intersectionobserver-cross-origin-domain-target'] = { "dfnID": "intersectionobserver-cross-origin-domain-target", "url": "#intersectionobserver-cross-origin-domain-target", "dfnText": "cross-origin-domain target", "refSections": [{ "refs": [{ "id": "ref-for-intersectionobserver-cross-origin-domain-target" }, { "id": "ref-for-intersectionobserver-cross-origin-domain-target\u2460" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-intersectionobserver-cross-origin-domain-target\u2461" }, { "id": "ref-for-intersectionobserver-cross-origin-domain-target\u2462" }], "title": "5. Privacy and Security" }], "external": false };
        window.dfnpanelData['intersectionobserver'] = { "dfnID": "intersectionobserver", "url": "#intersectionobserver", "dfnText": "IntersectionObserver", "refSections": [{ "refs": [{ "id": "ref-for-intersectionobserver" }], "title": "2.1. \nThe IntersectionObserverCallback" }, { "refs": [{ "id": "ref-for-intersectionobserver\u2460" }, { "id": "ref-for-intersectionobserver\u2461" }, { "id": "ref-for-intersectionobserver\u2462" }, { "id": "ref-for-intersectionobserver\u2463" }, { "id": "ref-for-intersectionobserver\u2464" }, { "id": "ref-for-intersectionobserver\u2465" }, { "id": "ref-for-intersectionobserver\u2466" }, { "id": "ref-for-intersectionobserver\u2467" }, { "id": "ref-for-intersectionobserver\u2468" }, { "id": "ref-for-intersectionobserver\u2460\u24ea" }, { "id": "ref-for-intersectionobserver\u2460\u2460" }, { "id": "ref-for-intersectionobserver\u2460\u2461" }, { "id": "ref-for-intersectionobserver\u2460\u2462" }, { "id": "ref-for-intersectionobserver\u2460\u2463" }, { "id": "ref-for-intersectionobserver\u2460\u2464" }, { "id": "ref-for-intersectionobserver\u2460\u2465" }, { "id": "ref-for-intersectionobserver\u2460\u2466" }, { "id": "ref-for-intersectionobserver\u2460\u2467" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-intersectionobserver\u2460\u2468" }], "title": "2.4. \nThe IntersectionObserverInit dictionary" }, { "refs": [{ "id": "ref-for-intersectionobserver\u2461\u24ea" }], "title": "3.1.2. \nElement" }, { "refs": [{ "id": "ref-for-intersectionobserver\u2461\u2460" }], "title": "3.1.3. \nIntersectionObserver" }, { "refs": [{ "id": "ref-for-intersectionobserver\u2461\u2461" }], "title": "3.2.1. Initialize a new IntersectionObserver" }, { "refs": [{ "id": "ref-for-intersectionobserver\u2461\u2462" }], "title": "3.2.2. Observe a target Element" }, { "refs": [{ "id": "ref-for-intersectionobserver\u2461\u2463" }], "title": "3.2.3. Unobserve a target Element" }, { "refs": [{ "id": "ref-for-intersectionobserver\u2461\u2464" }, { "id": "ref-for-intersectionobserver\u2461\u2465" }], "title": "3.2.5. \nNotify Intersection Observers" }, { "refs": [{ "id": "ref-for-intersectionobserver\u2461\u2466" }], "title": "3.2.6. \nQueue an IntersectionObserverEntry" }, { "refs": [{ "id": "ref-for-intersectionobserver\u2461\u2467" }], "title": "3.2.7. \nCompute the Intersection of a Target Element and the Root" }, { "refs": [{ "id": "ref-for-intersectionobserver\u2461\u2468" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }, { "refs": [{ "id": "ref-for-intersectionobserver\u2462\u24ea" }, { "id": "ref-for-intersectionobserver\u2462\u2460" }], "title": "3.3. \nIntersectionObserver Lifetime" }, { "refs": [{ "id": "ref-for-intersectionobserver\u2462\u2461" }, { "id": "ref-for-intersectionobserver\u2462\u2462" }], "title": "3.4.2. Pending initial IntersectionObserver targets" }, { "refs": [{ "id": "ref-for-intersectionobserver\u2462\u2463" }, { "id": "ref-for-intersectionobserver\u2462\u2464" }, { "id": "ref-for-intersectionobserver\u2462\u2465" }, { "id": "ref-for-intersectionobserver\u2462\u2466" }], "title": "5. Privacy and Security" }], "external": false };
        window.dfnpanelData['dom-intersectionobserver-intersectionobserver'] = { "dfnID": "dom-intersectionobserver-intersectionobserver", "url": "#dom-intersectionobserver-intersectionobserver", "dfnText": "constructor", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserver-intersectionobserver" }], "title": "3.1.3. \nIntersectionObserver" }], "external": false };
        window.dfnpanelData['dom-intersectionobserver-observe'] = { "dfnID": "dom-intersectionobserver-observe", "url": "#dom-intersectionobserver-observe", "dfnText": "observe(target)", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserver-observe" }, { "id": "ref-for-dom-intersectionobserver-observe\u2460" }, { "id": "ref-for-dom-intersectionobserver-observe\u2461" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-dom-intersectionobserver-observe\u2462" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }], "external": false };
        window.dfnpanelData['dom-intersectionobserver-unobserve'] = { "dfnID": "dom-intersectionobserver-unobserve", "url": "#dom-intersectionobserver-unobserve", "dfnText": "unobserve(target)", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserver-unobserve" }, { "id": "ref-for-dom-intersectionobserver-unobserve\u2460" }, { "id": "ref-for-dom-intersectionobserver-unobserve\u2461" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-dom-intersectionobserver-unobserve\u2462" }], "title": "3.3. \nIntersectionObserver Lifetime" }], "external": false };
        window.dfnpanelData['dom-intersectionobserver-disconnect'] = { "dfnID": "dom-intersectionobserver-disconnect", "url": "#dom-intersectionobserver-disconnect", "dfnText": "disconnect()", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserver-disconnect" }, { "id": "ref-for-dom-intersectionobserver-disconnect\u2460" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-dom-intersectionobserver-disconnect\u2461" }], "title": "3.3. \nIntersectionObserver Lifetime" }], "external": false };
        window.dfnpanelData['dom-intersectionobserver-takerecords'] = { "dfnID": "dom-intersectionobserver-takerecords", "url": "#dom-intersectionobserver-takerecords", "dfnText": "takeRecords()", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserver-takerecords" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": false };
        window.dfnpanelData['dom-intersectionobserver-root'] = { "dfnID": "dom-intersectionobserver-root", "url": "#dom-intersectionobserver-root", "dfnText": "root", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserver-root" }, { "id": "ref-for-dom-intersectionobserver-root\u2460" }, { "id": "ref-for-dom-intersectionobserver-root\u2461" }, { "id": "ref-for-dom-intersectionobserver-root\u2462" }, { "id": "ref-for-dom-intersectionobserver-root\u2463" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-dom-intersectionobserver-root\u2464" }, { "id": "ref-for-dom-intersectionobserver-root\u2465" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }, { "refs": [{ "id": "ref-for-dom-intersectionobserver-root\u2466" }], "title": "3.2.5. \nNotify Intersection Observers" }, { "refs": [{ "id": "ref-for-dom-intersectionobserver-root\u2467" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }], "external": false };
        window.dfnpanelData['dom-intersectionobserver-rootmargin'] = { "dfnID": "dom-intersectionobserver-rootmargin", "url": "#dom-intersectionobserver-rootmargin", "dfnText": "rootMargin", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserver-rootmargin" }, { "id": "ref-for-dom-intersectionobserver-rootmargin\u2460" }, { "id": "ref-for-dom-intersectionobserver-rootmargin\u2461" }, { "id": "ref-for-dom-intersectionobserver-rootmargin\u2462" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-dom-intersectionobserver-rootmargin\u2463" }], "title": "5. Privacy and Security" }], "external": false };
        window.dfnpanelData['dom-intersectionobserver-scrollmargin'] = { "dfnID": "dom-intersectionobserver-scrollmargin", "url": "#dom-intersectionobserver-scrollmargin", "dfnText": "scrollMargin", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserver-scrollmargin" }, { "id": "ref-for-dom-intersectionobserver-scrollmargin\u2460" }, { "id": "ref-for-dom-intersectionobserver-scrollmargin\u2461" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-dom-intersectionobserver-scrollmargin\u2462" }], "title": "5. Privacy and Security" }], "external": false };
        window.dfnpanelData['dom-intersectionobserver-thresholds'] = { "dfnID": "dom-intersectionobserver-thresholds", "url": "#dom-intersectionobserver-thresholds", "dfnText": "thresholds", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserver-thresholds" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-dom-intersectionobserver-thresholds\u2460" }], "title": "3.1.2. \nElement" }, { "refs": [{ "id": "ref-for-dom-intersectionobserver-thresholds\u2461" }], "title": "3.2.1. Initialize a new IntersectionObserver" }, { "refs": [{ "id": "ref-for-dom-intersectionobserver-thresholds\u2462" }, { "id": "ref-for-dom-intersectionobserver-thresholds\u2463" }, { "id": "ref-for-dom-intersectionobserver-thresholds\u2464" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }], "external": false };
        window.dfnpanelData['intersectionobserver-content-clip'] = { "dfnID": "intersectionobserver-content-clip", "url": "#intersectionobserver-content-clip", "dfnText": "content clip", "refSections": [{ "refs": [{ "id": "ref-for-intersectionobserver-content-clip" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-intersectionobserver-content-clip\u2460" }], "title": "3.2.7. \nCompute the Intersection of a Target Element and the Root" }], "external": false };
        window.dfnpanelData['intersectionobserver-root-intersection-rectangle'] = { "dfnID": "intersectionobserver-root-intersection-rectangle", "url": "#intersectionobserver-root-intersection-rectangle", "dfnText": "root intersection rectangle", "refSections": [{ "refs": [{ "id": "ref-for-intersectionobserver-root-intersection-rectangle" }, { "id": "ref-for-intersectionobserver-root-intersection-rectangle\u2460" }, { "id": "ref-for-intersectionobserver-root-intersection-rectangle\u2461" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-intersectionobserver-root-intersection-rectangle\u2462" }, { "id": "ref-for-intersectionobserver-root-intersection-rectangle\u2463" }, { "id": "ref-for-intersectionobserver-root-intersection-rectangle\u2464" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }, { "refs": [{ "id": "ref-for-intersectionobserver-root-intersection-rectangle\u2465" }], "title": "3.2.7. \nCompute the Intersection of a Target Element and the Root" }, { "refs": [{ "id": "ref-for-intersectionobserver-root-intersection-rectangle\u2466" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }], "external": false };
        window.dfnpanelData['apply-scroll-margin-to-a-scrollport'] = { "dfnID": "apply-scroll-margin-to-a-scrollport", "url": "#apply-scroll-margin-to-a-scrollport", "dfnText": "apply scroll margin to a scrollport", "refSections": [{ "refs": [{ "id": "ref-for-apply-scroll-margin-to-a-scrollport" }], "title": "3.2.7. \nCompute the Intersection of a Target Element and the Root" }], "external": false };
        window.dfnpanelData['parse-a-margin'] = { "dfnID": "parse-a-margin", "url": "#parse-a-margin", "dfnText": "parse a margin", "refSections": [{ "refs": [{ "id": "ref-for-parse-a-margin" }, { "id": "ref-for-parse-a-margin\u2460" }], "title": "3.2.1. Initialize a new IntersectionObserver" }], "external": false };
        window.dfnpanelData['intersectionobserverentry'] = { "dfnID": "intersectionobserverentry", "url": "#intersectionobserverentry", "dfnText": "IntersectionObserverEntry", "refSections": [{ "refs": [{ "id": "ref-for-intersectionobserverentry" }], "title": "2.1. \nThe IntersectionObserverCallback" }, { "refs": [{ "id": "ref-for-intersectionobserverentry\u2460" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-intersectionobserverentry\u2461" }, { "id": "ref-for-intersectionobserverentry\u2462" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }, { "refs": [{ "id": "ref-for-intersectionobserverentry\u2463" }], "title": "3.2.6. \nQueue an IntersectionObserverEntry" }, { "refs": [{ "id": "ref-for-intersectionobserverentry\u2464" }], "title": "3.4.2. Pending initial IntersectionObserver targets" }], "external": false };
        window.dfnpanelData['dictdef-intersectionobserverentryinit'] = { "dfnID": "dictdef-intersectionobserverentryinit", "url": "#dictdef-intersectionobserverentryinit", "dfnText": "IntersectionObserverEntryInit", "refSections": [{ "refs": [{ "id": "ref-for-dictdef-intersectionobserverentryinit" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }], "external": false };
        window.dfnpanelData['dom-intersectionobserverentry-boundingclientrect'] = { "dfnID": "dom-intersectionobserverentry-boundingclientrect", "url": "#dom-intersectionobserverentry-boundingclientrect", "dfnText": "boundingClientRect", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserverentry-boundingclientrect" }, { "id": "ref-for-dom-intersectionobserverentry-boundingclientrect\u2460" }, { "id": "ref-for-dom-intersectionobserverentry-boundingclientrect\u2461" }, { "id": "ref-for-dom-intersectionobserverentry-boundingclientrect\u2462" }, { "id": "ref-for-dom-intersectionobserverentry-boundingclientrect\u2463" }, { "id": "ref-for-dom-intersectionobserverentry-boundingclientrect\u2464" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }], "external": false };
        window.dfnpanelData['dom-intersectionobserverentry-intersectionrect'] = { "dfnID": "dom-intersectionobserverentry-intersectionrect", "url": "#dom-intersectionobserverentry-intersectionrect", "dfnText": "intersectionRect", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserverentry-intersectionrect" }, { "id": "ref-for-dom-intersectionobserverentry-intersectionrect\u2460" }, { "id": "ref-for-dom-intersectionobserverentry-intersectionrect\u2461" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }], "external": false };
        window.dfnpanelData['dom-intersectionobserverentry-isintersecting'] = { "dfnID": "dom-intersectionobserverentry-isintersecting", "url": "#dom-intersectionobserverentry-isintersecting", "dfnText": "isIntersecting", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserverentry-isintersecting" }, { "id": "ref-for-dom-intersectionobserverentry-isintersecting\u2460" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }], "external": false };
        window.dfnpanelData['dom-intersectionobserverentry-intersectionratio'] = { "dfnID": "dom-intersectionobserverentry-intersectionratio", "url": "#dom-intersectionobserverentry-intersectionratio", "dfnText": "intersectionRatio", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserverentry-intersectionratio" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }], "external": false };
        window.dfnpanelData['dom-intersectionobserverentry-rootbounds'] = { "dfnID": "dom-intersectionobserverentry-rootbounds", "url": "#dom-intersectionobserverentry-rootbounds", "dfnText": "rootBounds", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserverentry-rootbounds" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }, { "refs": [{ "id": "ref-for-dom-intersectionobserverentry-rootbounds\u2460" }], "title": "5. Privacy and Security" }], "external": false };
        window.dfnpanelData['dom-intersectionobserverentry-target'] = { "dfnID": "dom-intersectionobserverentry-target", "url": "#dom-intersectionobserverentry-target", "dfnText": "target", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserverentry-target" }, { "id": "ref-for-dom-intersectionobserverentry-target\u2460" }, { "id": "ref-for-dom-intersectionobserverentry-target\u2461" }, { "id": "ref-for-dom-intersectionobserverentry-target\u2462" }, { "id": "ref-for-dom-intersectionobserverentry-target\u2463" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }], "external": false };
        window.dfnpanelData['dom-intersectionobserverentry-time'] = { "dfnID": "dom-intersectionobserverentry-time", "url": "#dom-intersectionobserverentry-time", "dfnText": "time", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserverentry-time" }], "title": "2.3. \nThe IntersectionObserverEntry interface" }], "external": false };
        window.dfnpanelData['dictdef-intersectionobserverinit'] = { "dfnID": "dictdef-intersectionobserverinit", "url": "#dictdef-intersectionobserverinit", "dfnText": "IntersectionObserverInit", "refSections": [{ "refs": [{ "id": "ref-for-dictdef-intersectionobserverinit" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-dictdef-intersectionobserverinit\u2460" }], "title": "3.2.1. Initialize a new IntersectionObserver" }], "external": false };
        window.dfnpanelData['dom-intersectionobserverinit-root'] = { "dfnID": "dom-intersectionobserverinit-root", "url": "#dom-intersectionobserverinit-root", "dfnText": "root", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserverinit-root" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-dom-intersectionobserverinit-root\u2460" }], "title": "2.4. \nThe IntersectionObserverInit dictionary" }], "external": false };
        window.dfnpanelData['dom-intersectionobserverinit-rootmargin'] = { "dfnID": "dom-intersectionobserverinit-rootmargin", "url": "#dom-intersectionobserverinit-rootmargin", "dfnText": "rootMargin", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserverinit-rootmargin" }, { "id": "ref-for-dom-intersectionobserverinit-rootmargin\u2460" }, { "id": "ref-for-dom-intersectionobserverinit-rootmargin\u2461" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-dom-intersectionobserverinit-rootmargin\u2462" }, { "id": "ref-for-dom-intersectionobserverinit-rootmargin\u2463" }, { "id": "ref-for-dom-intersectionobserverinit-rootmargin\u2464" }], "title": "2.4. \nThe IntersectionObserverInit dictionary" }, { "refs": [{ "id": "ref-for-dom-intersectionobserverinit-rootmargin\u2465" }], "title": "3.2.1. Initialize a new IntersectionObserver" }], "external": false };
        window.dfnpanelData['dom-intersectionobserverinit-scrollmargin'] = { "dfnID": "dom-intersectionobserverinit-scrollmargin", "url": "#dom-intersectionobserverinit-scrollmargin", "dfnText": "scrollMargin", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserverinit-scrollmargin" }, { "id": "ref-for-dom-intersectionobserverinit-scrollmargin\u2460" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-dom-intersectionobserverinit-scrollmargin\u2461" }], "title": "2.4. \nThe IntersectionObserverInit dictionary" }, { "refs": [{ "id": "ref-for-dom-intersectionobserverinit-scrollmargin\u2462" }], "title": "3.2.1. Initialize a new IntersectionObserver" }], "external": false };
        window.dfnpanelData['dom-intersectionobserverinit-threshold'] = { "dfnID": "dom-intersectionobserverinit-threshold", "url": "#dom-intersectionobserverinit-threshold", "dfnText": "threshold", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserverinit-threshold" }, { "id": "ref-for-dom-intersectionobserverinit-threshold\u2460" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-dom-intersectionobserverinit-threshold\u2461" }], "title": "2.4. \nThe IntersectionObserverInit dictionary" }, { "refs": [{ "id": "ref-for-dom-intersectionobserverinit-threshold\u2462" }], "title": "3.2.1. Initialize a new IntersectionObserver" }], "external": false };
        window.dfnpanelData['intersection-observer-processing-model'] = { "dfnID": "intersection-observer-processing-model", "url": "#intersection-observer-processing-model", "dfnText": "3. \nProcessing Model", "refSections": [{ "refs": [{ "id": "ref-for-intersection-observer-processing-model" }], "title": "2.1. \nThe IntersectionObserverCallback" }, { "refs": [{ "id": "ref-for-intersection-observer-processing-model" }], "title": "3. \nProcessing Model" }], "external": false };
        window.dfnpanelData['document-intersectionobservertaskqueued'] = { "dfnID": "document-intersectionobservertaskqueued", "url": "#document-intersectionobservertaskqueued", "dfnText": "IntersectionObserverTaskQueued", "refSections": [{ "refs": [{ "id": "ref-for-document-intersectionobservertaskqueued" }, { "id": "ref-for-document-intersectionobservertaskqueued\u2460" }], "title": "3.2.4. \nQueue an Intersection Observer Task" }, { "refs": [{ "id": "ref-for-document-intersectionobservertaskqueued\u2461" }], "title": "3.2.5. \nNotify Intersection Observers" }], "external": false };
        window.dfnpanelData['dom-element-registeredintersectionobservers-slot'] = { "dfnID": "dom-element-registeredintersectionobservers-slot", "url": "#dom-element-registeredintersectionobservers-slot", "dfnText": "[[RegisteredIntersectionObservers]]", "refSections": [{ "refs": [{ "id": "ref-for-dom-element-registeredintersectionobservers-slot" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-dom-element-registeredintersectionobservers-slot\u2460" }], "title": "3.2.2. Observe a target Element" }, { "refs": [{ "id": "ref-for-dom-element-registeredintersectionobservers-slot\u2461" }], "title": "3.2.3. Unobserve a target Element" }, { "refs": [{ "id": "ref-for-dom-element-registeredintersectionobservers-slot\u2462" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }], "external": false };
        window.dfnpanelData['intersectionobserverregistration'] = { "dfnID": "intersectionobserverregistration", "url": "#intersectionobserverregistration", "dfnText": "IntersectionObserverRegistration", "refSections": [{ "refs": [{ "id": "ref-for-intersectionobserverregistration" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-intersectionobserverregistration\u2460" }], "title": "3.2.2. Observe a target Element" }, { "refs": [{ "id": "ref-for-intersectionobserverregistration\u2461" }], "title": "3.2.3. Unobserve a target Element" }, { "refs": [{ "id": "ref-for-intersectionobserverregistration\u2462" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }], "external": false };
        window.dfnpanelData['dom-intersectionobserverregistration-observer'] = { "dfnID": "dom-intersectionobserverregistration-observer", "url": "#dom-intersectionobserverregistration-observer", "dfnText": "observer", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserverregistration-observer" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-dom-intersectionobserverregistration-observer\u2460" }], "title": "3.2.2. Observe a target Element" }, { "refs": [{ "id": "ref-for-dom-intersectionobserverregistration-observer\u2461" }], "title": "3.2.3. Unobserve a target Element" }, { "refs": [{ "id": "ref-for-dom-intersectionobserverregistration-observer\u2462" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }], "external": false };
        window.dfnpanelData['dom-intersectionobserverregistration-previousthresholdindex'] = { "dfnID": "dom-intersectionobserverregistration-previousthresholdindex", "url": "#dom-intersectionobserverregistration-previousthresholdindex", "dfnText": "previousThresholdIndex", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserverregistration-previousthresholdindex" }], "title": "3.2.2. Observe a target Element" }, { "refs": [{ "id": "ref-for-dom-intersectionobserverregistration-previousthresholdindex\u2460" }, { "id": "ref-for-dom-intersectionobserverregistration-previousthresholdindex\u2461" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }], "external": false };
        window.dfnpanelData['dom-intersectionobserverregistration-previousisintersecting'] = { "dfnID": "dom-intersectionobserverregistration-previousisintersecting", "url": "#dom-intersectionobserverregistration-previousisintersecting", "dfnText": "previousIsIntersecting", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserverregistration-previousisintersecting" }], "title": "3.2.2. Observe a target Element" }, { "refs": [{ "id": "ref-for-dom-intersectionobserverregistration-previousisintersecting\u2460" }, { "id": "ref-for-dom-intersectionobserverregistration-previousisintersecting\u2461" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }], "external": false };
        window.dfnpanelData['dom-intersectionobserver-queuedentries-slot'] = { "dfnID": "dom-intersectionobserver-queuedentries-slot", "url": "#dom-intersectionobserver-queuedentries-slot", "dfnText": "[[QueuedEntries]]", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserver-queuedentries-slot" }, { "id": "ref-for-dom-intersectionobserver-queuedentries-slot\u2460" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-dom-intersectionobserver-queuedentries-slot\u2461" }, { "id": "ref-for-dom-intersectionobserver-queuedentries-slot\u2462" }, { "id": "ref-for-dom-intersectionobserver-queuedentries-slot\u2463" }], "title": "3.2.5. \nNotify Intersection Observers" }, { "refs": [{ "id": "ref-for-dom-intersectionobserver-queuedentries-slot\u2464" }], "title": "3.2.6. \nQueue an IntersectionObserverEntry" }], "external": false };
        window.dfnpanelData['dom-intersectionobserver-observationtargets-slot'] = { "dfnID": "dom-intersectionobserver-observationtargets-slot", "url": "#dom-intersectionobserver-observationtargets-slot", "dfnText": "[[ObservationTargets]]", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserver-observationtargets-slot" }, { "id": "ref-for-dom-intersectionobserver-observationtargets-slot\u2460" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-dom-intersectionobserver-observationtargets-slot\u2461" }, { "id": "ref-for-dom-intersectionobserver-observationtargets-slot\u2462" }], "title": "3.2.2. Observe a target Element" }, { "refs": [{ "id": "ref-for-dom-intersectionobserver-observationtargets-slot\u2463" }], "title": "3.2.3. Unobserve a target Element" }, { "refs": [{ "id": "ref-for-dom-intersectionobserver-observationtargets-slot\u2464" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }, { "refs": [{ "id": "ref-for-dom-intersectionobserver-observationtargets-slot\u2465" }], "title": "3.4.2. Pending initial IntersectionObserver targets" }], "external": false };
        window.dfnpanelData['dom-intersectionobserver-callback-slot'] = { "dfnID": "dom-intersectionobserver-callback-slot", "url": "#dom-intersectionobserver-callback-slot", "dfnText": "[[callback]]", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserver-callback-slot" }], "title": "3.2.1. Initialize a new IntersectionObserver" }, { "refs": [{ "id": "ref-for-dom-intersectionobserver-callback-slot\u2460" }], "title": "3.2.5. \nNotify Intersection Observers" }], "external": false };
        window.dfnpanelData['dom-intersectionobserver-rootmargin-slot'] = { "dfnID": "dom-intersectionobserver-rootmargin-slot", "url": "#dom-intersectionobserver-rootmargin-slot", "dfnText": "[[rootMargin]]", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserver-rootmargin-slot" }, { "id": "ref-for-dom-intersectionobserver-rootmargin-slot\u2460" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-dom-intersectionobserver-rootmargin-slot\u2461" }], "title": "3.2.1. Initialize a new IntersectionObserver" }], "external": false };
        window.dfnpanelData['dom-intersectionobserver-scrollmargin-slot'] = { "dfnID": "dom-intersectionobserver-scrollmargin-slot", "url": "#dom-intersectionobserver-scrollmargin-slot", "dfnText": "[[scrollMargin]]", "refSections": [{ "refs": [{ "id": "ref-for-dom-intersectionobserver-scrollmargin-slot" }, { "id": "ref-for-dom-intersectionobserver-scrollmargin-slot\u2460" }], "title": "2.2. \nThe IntersectionObserver interface" }, { "refs": [{ "id": "ref-for-dom-intersectionobserver-scrollmargin-slot\u2461" }], "title": "3.2.1. Initialize a new IntersectionObserver" }, { "refs": [{ "id": "ref-for-dom-intersectionobserver-scrollmargin-slot\u2462" }], "title": "3.2.7. \nCompute the Intersection of a Target Element and the Root" }], "external": false };
        window.dfnpanelData['initialize-a-new-intersectionobserver'] = { "dfnID": "initialize-a-new-intersectionobserver", "url": "#initialize-a-new-intersectionobserver", "dfnText": "initialize a new IntersectionObserver", "refSections": [{ "refs": [{ "id": "ref-for-initialize-a-new-intersectionobserver" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": false };
        window.dfnpanelData['observe-a-target-element'] = { "dfnID": "observe-a-target-element", "url": "#observe-a-target-element", "dfnText": "observe a target Element", "refSections": [{ "refs": [{ "id": "ref-for-observe-a-target-element" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": false };
        window.dfnpanelData['unobserve-a-target-element'] = { "dfnID": "unobserve-a-target-element", "url": "#unobserve-a-target-element", "dfnText": "unobserve a target Element", "refSections": [{ "refs": [{ "id": "ref-for-unobserve-a-target-element" }], "title": "2.2. \nThe IntersectionObserver interface" }], "external": false };
        window.dfnpanelData['intersectionobserver-task-source'] = { "dfnID": "intersectionobserver-task-source", "url": "#intersectionobserver-task-source", "dfnText": "IntersectionObserver task source", "refSections": [{ "refs": [{ "id": "ref-for-intersectionobserver-task-source" }], "title": "3.2.4. \nQueue an Intersection Observer Task" }], "external": false };
        window.dfnpanelData['queue-an-intersection-observer-task'] = { "dfnID": "queue-an-intersection-observer-task", "url": "#queue-an-intersection-observer-task", "dfnText": "queue an intersection observer task", "refSections": [{ "refs": [{ "id": "ref-for-queue-an-intersection-observer-task" }], "title": "3.2.6. \nQueue an IntersectionObserverEntry" }], "external": false };
        window.dfnpanelData['notify-intersection-observers'] = { "dfnID": "notify-intersection-observers", "url": "#notify-intersection-observers", "dfnText": "notify intersection observers", "refSections": [{ "refs": [{ "id": "ref-for-notify-intersection-observers" }], "title": "3.2.4. \nQueue an Intersection Observer Task" }], "external": false };
        window.dfnpanelData['queue-an-intersectionobserverentry'] = { "dfnID": "queue-an-intersectionobserverentry", "url": "#queue-an-intersectionobserverentry", "dfnText": "queue an IntersectionObserverEntry", "refSections": [{ "refs": [{ "id": "ref-for-queue-an-intersectionobserverentry" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }], "external": false };
        window.dfnpanelData['compute-the-intersection'] = { "dfnID": "compute-the-intersection", "url": "#compute-the-intersection", "dfnText": "compute the intersection", "refSections": [{ "refs": [{ "id": "ref-for-compute-the-intersection" }], "title": "3.2.8. \nRun the Update Intersection Observations Steps" }], "external": false };
        window.dfnpanelData['pending-initial-intersectionobserver-targets'] = { "dfnID": "pending-initial-intersectionobserver-targets", "url": "#pending-initial-intersectionobserver-targets", "dfnText": "pending initial IntersectionObserver targets", "refSections": [{ "refs": [{ "id": "ref-for-pending-initial-intersectionobserver-targets" }], "title": "3.4.2. Pending initial IntersectionObserver targets" }], "external": false };
    </script>
    <script>/* Boilerplate: script-dom-helper */
        function query(sel) { return document.querySelector(sel); }

        function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

        function iter(obj) {
            if (!obj) return [];
            var it = obj[Symbol.iterator];
            if (it) return it;
            return Object.entries(obj);
        }

        function mk(tagname, attrs, ...children) {
            const el = document.createElement(tagname);
            for (const [k, v] of iter(attrs)) {
                if (k.slice(0, 3) == "_on") {
                    const eventName = k.slice(3);
                    el.addEventListener(eventName, v);
                } else if (k[0] == "_") {
                    // property, not attribute
                    el[k.slice(1)] = v;
                } else {
                    if (v === false || v == null) {
                        continue;
                    } else if (v === true) {
                        el.setAttribute(k, "");
                        continue;
                    } else {
                        el.setAttribute(k, v);
                    }
                }
            }
            append(el, children);
            return el;
        }

        /* Create shortcuts for every known HTML element */
        [
            "a",
            "abbr",
            "acronym",
            "address",
            "applet",
            "area",
            "article",
            "aside",
            "audio",
            "b",
            "base",
            "basefont",
            "bdo",
            "big",
            "blockquote",
            "body",
            "br",
            "button",
            "canvas",
            "caption",
            "center",
            "cite",
            "code",
            "col",
            "colgroup",
            "datalist",
            "dd",
            "del",
            "details",
            "dfn",
            "dialog",
            "div",
            "dl",
            "dt",
            "em",
            "embed",
            "fieldset",
            "figcaption",
            "figure",
            "font",
            "footer",
            "form",
            "frame",
            "frameset",
            "head",
            "header",
            "h1",
            "h2",
            "h3",
            "h4",
            "h5",
            "h6",
            "hr",
            "html",
            "i",
            "iframe",
            "img",
            "input",
            "ins",
            "kbd",
            "label",
            "legend",
            "li",
            "link",
            "main",
            "map",
            "mark",
            "meta",
            "meter",
            "nav",
            "nobr",
            "noscript",
            "object",
            "ol",
            "optgroup",
            "option",
            "output",
            "p",
            "param",
            "pre",
            "progress",
            "q",
            "s",
            "samp",
            "script",
            "section",
            "select",
            "small",
            "source",
            "span",
            "strike",
            "strong",
            "style",
            "sub",
            "summary",
            "sup",
            "table",
            "tbody",
            "td",
            "template",
            "textarea",
            "tfoot",
            "th",
            "thead",
            "time",
            "title",
            "tr",
            "u",
            "ul",
            "var",
            "video",
            "wbr",
            "xmp",
        ].forEach(tagname => {
            mk[tagname] = (...args) => mk(tagname, ...args);
        });

        function* nodesFromChildList(children) {
            for (const child of children.flat(Infinity)) {
                if (child instanceof Node) {
                    yield child;
                } else {
                    yield new Text(child);
                }
            }
        }
        function append(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                if (el instanceof Node) el.appendChild(child);
                else el.push(child);
            }
            return el;
        }

        function insertAfter(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                el.parentNode.insertBefore(child, el.nextSibling);
            }
            return el;
        }

        function clearContents(el) {
            el.innerHTML = "";
            return el;
        }

        function parseHTML(markup) {
            if (markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
                const doc = document.implementation.createHTMLDocument("");
                doc.documentElement.innerHTML = markup;
                return doc;
            } else {
                const el = mk.template({});
                el.innerHTML = markup;
                return el.content;
            }
        }
    </script>
    <script>/* Boilerplate: script-position-annos */
        "use strict";
        {

            function repositionAnnoPanels() {
                const panels = [...document.querySelectorAll("[data-anno-for]")];
                const main = document.querySelector("main");
                let mainRect;
                if (main) mainRect = main.getBoundingClientRect();
                for (const panel of panels) {
                    const dfn = document.getElementById(panel.getAttribute("data-anno-for"));
                    if (!dfn) {
                        console.log("Can't find the annotation panel target:", panel);
                        continue;
                    }
                    const rect = dfn.getBoundingClientRect();
                    const top = window.scrollY + rect.top
                    panel.style.top = top + "px";
                    panel.top = top;
                    panel.height = rect.height;
                    panel.classList.remove("unpositioned");
                    const panelRect = panel.getBoundingClientRect()
                    if (main) {
                        panel.classList.toggle("overlapping-main", panelRect.left < mainRect.right)
                    }
                }
                let vSoFar = 0;
                for (const panel of panels.sort(cmpTops)) {
                    if (panel.top < vSoFar) {
                        panel.top = vSoFar;
                        panel.style.top = vSoFar + "px";
                    }
                    vSoFar = panel.top + panel.height + 15;
                }
            }

            function cmpTops(a, b) {
                return a.top - b.top;
            }

            window.addEventListener("load", repositionAnnoPanels);
            window.addEventListener("resize", repositionAnnoPanels);
        }
    </script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
