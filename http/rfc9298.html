<!DOCTYPE html>
<html lang="ja-JP" class="RFC">

<head>
    <meta charset="utf-8">
    <meta content="Common,Latin" name="scripts">
    <meta content="initial-scale=1.0" name="viewport">
    <title>RFC 9298: HTTP における UDP のプロキシ</title>
    <meta content="David Schinazi" name="author">
    <meta content="
       この文書は、HTTP における UDP のプロキシ方法を説明します。これは、HTTP の CONNECT メソッドが HTTP 上で TCP をプロキシするのと同様の仕組みです。より具体的には、本書は HTTP クライアントがプロキシとして動作する HTTP サーバーを介して UDP 通信のトンネルを作成できるプロトコルを定義します。
    " name="description">
    <meta content="xml2rfc 3.14.1" name="generator">
    <meta content="quic" name="keyword">
    <meta content="http" name="keyword">
    <meta content="datagram" name="keyword">
    <meta content="udp" name="keyword">
    <meta content="proxy" name="keyword">
    <meta content="tunnels" name="keyword">
    <meta content="quic in quic" name="keyword">
    <meta content="turtles all the way down" name="keyword">
    <meta content="masque" name="keyword">
    <meta content="http-ng" name="keyword">
    <meta content="9298" name="rfc.number">
    <!-- Generator version information:
  xml2rfc 3.14.1
    Python 3.9.13
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.1
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 3.1.2
    kitchen 1.2.6
    lxml 4.9.0
    MarkupSafe 2.1.1
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.28.0
    setuptools 44.1.1
    six 1.16.0
    weasyprint 56.1
-->
    <link href="rfc9298.xml" rel="alternate" type="application/rfc+xml">
    <link href="#copyright" rel="license">
    <style type="text/css">
        /*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

        /* fonts */
        @import url('https://fonts.googleapis.com/css?family=Noto+Sans');
        /* Sans-serif */
        @import url('https://fonts.googleapis.com/css?family=Noto+Serif');
        /* Serif (print) */
        @import url('https://fonts.googleapis.com/css?family=Roboto+Mono');
        /* Monospace */

        @viewport {
            zoom: 1.0;
            width: extend-to-zoom;
        }

        @-ms-viewport {
            width: extend-to-zoom;
            zoom: 1.0;
        }

        /* general and mobile first */
        html {}

        body {
            max-width: 90%;
            margin: 1.5em auto;
            color: #222;
            background-color: #fff;
            font-size: 14px;
            font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
            line-height: 1.6;
            scroll-behavior: smooth;
        }

        .ears {
            display: none;
        }

        /* headings */
        #title,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            margin: 1em 0 0.5em;
            font-weight: bold;
            line-height: 1.3;
        }

        #title {
            clear: both;
            border-bottom: 1px solid #ddd;
            margin: 0 0 0.5em 0;
            padding: 1em 0 0.5em;
        }

        .author {
            padding-bottom: 4px;
        }

        h1 {
            font-size: 26px;
            margin: 1em 0;
        }

        h2 {
            font-size: 22px;
            margin-top: -20px;
            /* provide offset for in-page anchors */
            padding-top: 33px;
        }

        h3 {
            font-size: 18px;
            margin-top: -36px;
            /* provide offset for in-page anchors */
            padding-top: 42px;
        }

        h4 {
            font-size: 16px;
            margin-top: -36px;
            /* provide offset for in-page anchors */
            padding-top: 42px;
        }

        h5,
        h6 {
            font-size: 14px;
        }

        #n-copyright-notice {
            border-bottom: 1px solid #ddd;
            padding-bottom: 1em;
            margin-bottom: 1em;
        }

        /* general structure */
        p {
            padding: 0;
            margin: 0 0 1em 0;
            text-align: left;
        }

        div,
        span {
            position: relative;
        }

        div {
            margin: 0;
        }

        .alignRight.art-text {
            background-color: #f9f9f9;
            border: 1px solid #eee;
            border-radius: 3px;
            padding: 1em 1em 0;
            margin-bottom: 1.5em;
        }

        .alignRight.art-text pre {
            padding: 0;
        }

        .alignRight {
            margin: 1em 0;
        }

        .alignRight>*:first-child {
            border: none;
            margin: 0;
            float: right;
            clear: both;
        }

        .alignRight>*:nth-child(2) {
            clear: both;
            display: block;
            border: none;
        }

        svg {
            display: block;
        }

        .alignCenter.art-text {
            background-color: #f9f9f9;
            border: 1px solid #eee;
            border-radius: 3px;
            padding: 1em 1em 0;
            margin-bottom: 1.5em;
        }

        .alignCenter.art-text pre {
            padding: 0;
        }

        .alignCenter {
            margin: 1em 0;
        }

        .alignCenter>*:first-child {
            display: table;
            border: none;
            margin: 0 auto;
        }

        /* lists */
        ol,
        ul {
            padding: 0;
            margin: 0 0 1em 2em;
        }

        ol ol,
        ul ul,
        ol ul,
        ul ol {
            margin-left: 1em;
        }

        li {
            margin: 0 0 0.25em 0;
        }

        .ulCompact li {
            margin: 0;
        }

        ul.empty,
        .ulEmpty {
            list-style-type: none;
        }

        ul.empty li,
        .ulEmpty li {
            margin-top: 0.5em;
        }

        ul.ulBare,
        li.ulBare {
            margin-left: 0em !important;
        }

        ul.compact,
        .ulCompact,
        ol.compact,
        .olCompact {
            line-height: 100%;
            margin: 0 0 0 2em;
        }

        /* definition lists */
        dl {}

        dl>dt {
            float: left;
            margin-right: 1em;
        }

        /* 
dl.nohang > dt {
  float: none;
}
*/
        dl>dd {
            margin-bottom: .8em;
            min-height: 1.3em;
        }

        dl.compact>dd,
        .dlCompact>dd {
            margin-bottom: 0em;
        }

        dl>dd>dl {
            margin-top: 0.5em;
            margin-bottom: 0em;
        }

        /* links */
        a {
            text-decoration: none;
        }

        a[href] {
            color: #22e;
            /* Arlen: WCAG 2019 */
        }

        a[href]:hover {
            background-color: #f2f2f2;
        }

        figcaption a[href],
        a[href].selfRef {
            color: #222;
        }

        /* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

        /* Figures */
        tt,
        code,
        pre,
        code {
            background-color: #f9f9f9;
            font-family: 'Roboto Mono', monospace;
        }

        pre {
            border: 1px solid #eee;
            margin: 0;
            padding: 1em;
        }

        img {
            max-width: 100%;
        }

        figure {
            margin: 0;
        }

        figure blockquote {
            margin: 0.8em 0.4em 0.4em;
        }

        figcaption {
            font-style: italic;
            margin: 0 0 1em 0;
        }

        @media screen {
            pre {
                overflow-x: auto;
                max-width: 100%;
                max-width: calc(100% - 22px);
            }
        }

        /* aside, blockquote */
        aside,
        blockquote {
            margin-left: 0;
            padding: 1.2em 2em;
        }

        blockquote {
            background-color: #f9f9f9;
            color: #111;
            /* Arlen: WCAG 2019 */
            border: 1px solid #ddd;
            border-radius: 3px;
            margin: 1em 0;
        }

        cite {
            display: block;
            text-align: right;
            font-style: italic;
        }

        /* tables */
        table {
            width: 100%;
            margin: 0 0 1em;
            border-collapse: collapse;
            border: 1px solid #eee;
        }

        th,
        td {
            text-align: left;
            vertical-align: top;
            padding: 0.5em 0.75em;
        }

        th {
            text-align: left;
            background-color: #e9e9e9;
        }

        tr:nth-child(2n+1)>td {
            background-color: #f5f5f5;
        }

        table caption {
            font-style: italic;
            margin: 0;
            padding: 0;
            text-align: left;
        }

        table p {
            /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
            margin: 0;
        }

        /* pilcrow */
        a.pilcrow {
            color: #666;
            /* Arlen: AHDJ 2019 */
            text-decoration: none;
            visibility: hidden;
            user-select: none;
            -ms-user-select: none;
            -o-user-select: none;
            -moz-user-select: none;
            -khtml-user-select: none;
            -webkit-user-select: none;
            -webkit-touch-callout: none;
        }

        @media screen {

            aside:hover>a.pilcrow,
            p:hover>a.pilcrow,
            blockquote:hover>a.pilcrow,
            div:hover>a.pilcrow,
            li:hover>a.pilcrow,
            pre:hover>a.pilcrow {
                visibility: visible;
            }

            a.pilcrow:hover {
                background-color: transparent;
            }
        }

        /* misc */
        hr {
            border: 0;
            border-top: 1px solid #eee;
        }

        .bcp14 {
            font-variant: small-caps;
        }

        .role {
            font-variant: all-small-caps;
        }

        /* info block */
        #identifiers {
            margin: 0;
            font-size: 0.9em;
        }

        #identifiers dt {
            width: 3em;
            clear: left;
        }

        #identifiers dd {
            float: left;
            margin-bottom: 0;
        }

        /* Fix PDF info block run off issue */
        @media print {
            #identifiers dd {
                float: none;
            }
        }

        #identifiers .authors .author {
            display: inline-block;
            margin-right: 1.5em;
        }

        #identifiers .authors .org {
            font-style: italic;
        }

        /* The prepared/rendered info at the very bottom of the page */
        .docInfo {
            color: #666;
            /* Arlen: WCAG 2019 */
            font-size: 0.9em;
            font-style: italic;
            margin-top: 2em;
        }

        .docInfo .prepared {
            float: left;
        }

        .docInfo .prepared {
            float: right;
        }

        /* table of contents */
        #toc {
            padding: 0.75em 0 2em 0;
            margin-bottom: 1em;
        }

        nav.toc ul {
            margin: 0 0.5em 0 0;
            padding: 0;
            list-style: none;
        }

        nav.toc li {
            line-height: 1.3em;
            margin: 0.75em 0;
            padding-left: 1.2em;
            text-indent: -1.2em;
        }

        /* references */
        .references dt {
            text-align: right;
            font-weight: bold;
            min-width: 7em;
        }

        .references dd {
            margin-left: 8em;
            overflow: auto;
        }

        .refInstance {
            margin-bottom: 1.25em;
        }

        .references .ascii {
            margin-bottom: 0.25em;
        }

        /* index */
        .index ul {
            margin: 0 0 0 1em;
            padding: 0;
            list-style: none;
        }

        .index ul ul {
            margin: 0;
        }

        .index li {
            margin: 0;
            text-indent: -2em;
            padding-left: 2em;
            padding-bottom: 5px;
        }

        .indexIndex {
            margin: 0.5em 0 1em;
        }

        .index a {
            font-weight: 700;
        }

        /* make the index two-column on all but the smallest screens */
        @media (min-width: 600px) {
            .index ul {
                -moz-column-count: 2;
                -moz-column-gap: 20px;
            }

            .index ul ul {
                -moz-column-count: 1;
                -moz-column-gap: 0;
            }
        }

        /* authors */
        address.vcard {
            font-style: normal;
            margin: 1em 0;
        }

        address.vcard .nameRole {
            font-weight: 700;
            margin-left: 0;
        }

        address.vcard .label {
            font-family: "Noto Sans", Arial, Helvetica, sans-serif;
            margin: 0.5em 0;
        }

        address.vcard .type {
            display: none;
        }

        .alternative-contact {
            margin: 1.5em 0 1em;
        }

        hr.addr {
            border-top: 1px dashed;
            margin: 0;
            color: #ddd;
            max-width: calc(100% - 16px);
        }

        /* temporary notes */
        .rfcEditorRemove::before {
            position: absolute;
            top: 0.2em;
            right: 0.2em;
            padding: 0.2em;
            content: "The RFC Editor will remove this note";
            color: #9e2a00;
            /* Arlen: WCAG 2019 */
            background-color: #ffd;
            /* Arlen: WCAG 2019 */
        }

        .rfcEditorRemove {
            position: relative;
            padding-top: 1.8em;
            background-color: #ffd;
            /* Arlen: WCAG 2019 */
            border-radius: 3px;
        }

        .cref {
            background-color: #ffd;
            /* Arlen: WCAG 2019 */
            padding: 2px 4px;
        }

        .crefSource {
            font-style: italic;
        }

        /* alternative layout for smaller screens */
        @media screen and (max-width: 1023px) {
            body {
                padding-top: 2em;
            }

            #title {
                padding: 1em 0;
            }

            h1 {
                font-size: 24px;
            }

            h2 {
                font-size: 20px;
                margin-top: -18px;
                /* provide offset for in-page anchors */
                padding-top: 38px;
            }

            #identifiers dd {
                max-width: 60%;
            }

            #toc {
                position: fixed;
                z-index: 2;
                top: 0;
                right: 0;
                padding: 0;
                margin: 0;
                background-color: inherit;
                border-bottom: 1px solid #ccc;
            }

            #toc h2 {
                margin: -1px 0 0 0;
                padding: 4px 0 4px 6px;
                padding-right: 1em;
                min-width: 190px;
                font-size: 1.1em;
                text-align: right;
                background-color: #444;
                color: white;
                cursor: pointer;
            }

            #toc h2::before {
                /* css hamburger */
                float: right;
                position: relative;
                width: 1em;
                height: 1px;
                left: -164px;
                margin: 6px 0 0 0;
                background: white none repeat scroll 0 0;
                box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
                content: "";
            }

            #toc nav {
                display: none;
                padding: 0.5em 1em 1em;
                overflow: auto;
                height: calc(100vh - 48px);
                border-left: 1px solid #ddd;
            }
        }

        /* alternative layout for wide screens */
        @media screen and (min-width: 1024px) {
            body {
                max-width: 724px;
                margin: 42px auto;
                padding-left: 1.5em;
                padding-right: 29em;
            }

            #toc {
                position: fixed;
                top: 42px;
                right: 42px;
                width: 25%;
                margin: 0;
                padding: 0 1em;
                z-index: 1;
            }

            #toc h2 {
                border-top: none;
                border-bottom: 1px solid #ddd;
                font-size: 1em;
                font-weight: normal;
                margin: 0;
                padding: 0.25em 1em 1em 0;
            }

            #toc nav {
                display: block;
                height: calc(90vh - 84px);
                bottom: 0;
                padding: 0.5em 0 0;
                overflow: auto;
            }

            img {
                /* future proofing */
                max-width: 100%;
                height: auto;
            }
        }

        /* pagination */
        @media print {
            body {

                width: 100%;
            }

            p {
                orphans: 3;
                widows: 3;
            }

            #n-copyright-notice {
                border-bottom: none;
            }

            #toc,
            #n-introduction {
                page-break-before: always;
            }

            #toc {
                border-top: none;
                padding-top: 0;
            }

            figure,
            pre {
                page-break-inside: avoid;
            }

            figure {
                overflow: scroll;
            }

            pre.breakable {
                break-inside: auto;
            }

            h1,
            h2,
            h3,
            h4,
            h5,
            h6 {
                page-break-after: avoid;
            }

            h2+*,
            h3+*,
            h4+*,
            h5+*,
            h6+* {
                page-break-before: avoid;
            }

            pre {
                white-space: pre-wrap;
                word-wrap: break-word;
                font-size: 10pt;
            }

            table {
                border: 1px solid #ddd;
            }

            td {
                border-top: 1px solid #ddd;
            }
        }

        /* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
        /*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

        @page :first {
            padding-top: 0;

            @top-left {
                content: normal;
                border: none;
            }

            @top-center {
                content: normal;
                border: none;
            }

            @top-right {
                content: normal;
                border: none;
            }
        }

        @page {
            size: A4;
            margin-bottom: 45mm;
            padding-top: 20px;
            /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
            /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

        }

        /* Changes introduced to fix issues found during implementation */
        /* Make sure links are clickable even if overlapped by following H* */
        a {
            z-index: 2;
        }

        /* Separate body from document info even without intervening H1 */
        section {
            clear: both;
        }


        /* Top align author divs, to avoid names without organization dropping level with org names */
        .author {
            vertical-align: top;
        }

        /* Leave room in document info to show Internet-Draft on one line */
        #identifiers dt {
            width: 8em;
        }

        /* Don't waste quite as much whitespace between label and value in doc info */
        #identifiers dd {
            margin-left: 1em;
        }

        /* Give floating toc a background color (needed when it's a div inside section */
        #toc {
            background-color: white;
        }

        /* Make the collapsed ToC header render white on gray also when it's a link */
        @media screen and (max-width: 1023px) {

            #toc h2 a,
            #toc h2 a:link,
            #toc h2 a:focus,
            #toc h2 a:hover,
            #toc a.toplink,
            #toc a.toplink:hover {
                color: white;
                background-color: #444;
                text-decoration: none;
            }
        }

        /* Give the bottom of the ToC some whitespace */
        @media screen and (min-width: 1024px) {
            #toc {
                padding: 0 0 1em 1em;
            }
        }

        /* Style section numbers with more space between number and title */
        .section-number {
            padding-right: 0.5em;
        }

        /* prevent monospace from becoming overly large */
        tt,
        code,
        pre,
        code {
            font-size: 95%;
        }

        /* Fix the height/width aspect for ascii art*/
        pre.sourcecode,
        .art-text pre {
            line-height: 1.12;
        }


        /* Add styling for a link in the ToC that points to the top of the document */
        a.toplink {
            float: right;
            margin-right: 0.5em;
        }

        /* Fix the dl styling to match the RFC 7992 attributes */
        dl>dt,
        dl.dlParallel>dt {
            float: left;
            margin-right: 1em;
        }

        dl.dlNewline>dt {
            float: none;
        }

        /* Provide styling for table cell text alignment */
        table td.text-left,
        table th.text-left {
            text-align: left;
        }

        table td.text-center,
        table th.text-center {
            text-align: center;
        }

        table td.text-right,
        table th.text-right {
            text-align: right;
        }

        /* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
        .alternative-contact {
            margin: 0.5em 0 0.25em 0;
        }

        address .non-ascii {
            margin: 0 0 0 2em;
        }

        /* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
        table {
            width: auto;
        }

        /* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
        .references dd {
            overflow: visible;
        }

        /* Control caption placement */
        caption {
            caption-side: bottom;
        }

        /* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

        address.vcard {
            max-width: 30em;
            margin-right: auto;
        }

        /* For address alignment dependent on LTR or RTL scripts */
        address div.left {
            text-align: left;
        }

        address div.right {
            text-align: right;
        }

        /* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
        table.right {
            margin-left: auto;
            margin-right: 0;
        }

        table.center {
            margin-left: auto;
            margin-right: auto;
        }

        table.left {
            margin-left: 0;
            margin-right: auto;
        }

        /* Give the table caption label the same styling as the figcaption */
        caption a[href] {
            color: #222;
        }

        @media print {
            .toplink {
                display: none;
            }

            /* avoid overwriting the top border line with the ToC header */
            #toc {
                padding-top: 1px;
            }

            /* Avoid page breaks inside dl and author address entries */
            .vcard {
                page-break-inside: avoid;
            }

        }

        /* Tweak the bcp14 keyword presentation */
        .bcp14 {
            font-variant: small-caps;
            font-weight: bold;
            font-size: 0.9em;
        }

        /* Tweak the invisible space above H* in order not to overlay links in text above */
        h2 {
            margin-top: -18px;
            /* provide offset for in-page anchors */
            padding-top: 31px;
        }

        h3 {
            margin-top: -18px;
            /* provide offset for in-page anchors */
            padding-top: 24px;
        }

        h4 {
            margin-top: -18px;
            /* provide offset for in-page anchors */
            padding-top: 24px;
        }

        /* Float artwork pilcrow to the right */
        @media screen {
            .artwork a.pilcrow {
                display: block;
                line-height: 0.7;
                margin-top: 0.15em;
            }
        }

        /* Make pilcrows on dd visible */
        @media screen {
            dd:hover>a.pilcrow {
                visibility: visible;
            }
        }

        /* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
        .alignLeft.art-text,
        .alignCenter.art-text,
        .alignRight.art-text {
            margin-bottom: 0;
        }

        .alignLeft,
        .alignCenter,
        .alignRight {
            margin: 1em 0 0 0;
        }

        /* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
        @media print {
            a.pilcrow {
                display: none;
            }
        }

        /* Styling for the external metadata */
        div#external-metadata {
            background-color: #eee;
            padding: 0.5em;
            margin-bottom: 0.5em;
            display: none;
        }

        div#internal-metadata {
            padding: 0.5em;
            /* to match the external-metadata padding */
        }

        /* Styling for title RFC Number */
        h1#rfcnum {
            clear: both;
            margin: 0 0 -1em;
            padding: 1em 0 0 0;
        }

        /* Make .olPercent look the same as <ol><li> */
        dl.olPercent>dd {
            margin-bottom: 0.25em;
            min-height: initial;
        }

        /* Give aside some styling to set it apart */
        aside {
            border-left: 1px solid #ddd;
            margin: 1em 0 1em 2em;
            padding: 0.2em 2em;
        }

        aside>dl,
        aside>ol,
        aside>ul,
        aside>table,
        aside>p {
            margin-bottom: 0.5em;
        }

        /* Additional page break settings */
        @media print {

            figcaption,
            table caption {
                page-break-before: avoid;
            }
        }

        /* Font size adjustments for print */
        @media print {
            body {
                font-size: 10pt;
                line-height: normal;
                max-width: 96%;
            }

            h1 {
                font-size: 1.72em;
                padding-top: 1.5em;
            }

            /* 1*1.2*1.2*1.2 */
            h2 {
                font-size: 1.44em;
                padding-top: 1.5em;
            }

            /* 1*1.2*1.2 */
            h3 {
                font-size: 1.2em;
                padding-top: 1.5em;
            }

            /* 1*1.2 */
            h4 {
                font-size: 1em;
                padding-top: 1.5em;
            }

            h5,
            h6 {
                font-size: 1em;
                margin: initial;
                padding: 0.5em 0 0.3em;
            }
        }

        /* Sourcecode margin in print, when there's no pilcrow */
        @media print {

            .artwork,
            .sourcecode {
                margin-bottom: 1em;
            }
        }

        /* Avoid narrow tables forcing too narrow table captions, which may render badly */
        table {
            min-width: 20em;
        }

        /* ol type a */
        ol.type-a {
            list-style-type: lower-alpha;
        }

        ol.type-A {
            list-style-type: upper-alpha;
        }

        ol.type-i {
            list-style-type: lower-roman;
        }

        ol.type-I {
            list-style-type: lower-roman;
        }

        /* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
        table {
            border: 1px solid #ddd;
        }

        td {
            border-top: 1px solid #ddd;
        }

        tr:nth-child(2n+1)>td {
            background-color: #f8f8f8;
        }

        /* Use style rules to govern display of the TOC. */
        @media screen and (max-width: 1023px) {
            #toc nav {
                display: none;
            }

            #toc.active nav {
                display: block;
            }
        }

        /* Add support for keepWithNext */
        .keepWithNext {
            break-after: avoid-page;
            break-after: avoid-page;
        }

        /* Add support for keepWithPrevious */
        .keepWithPrevious {
            break-before: avoid-page;
        }

        /* Change the approach to avoiding breaks inside artwork etc. */
        figure,
        pre,
        table,
        .artwork,
        .sourcecode {
            break-before: auto;
            break-after: auto;
        }

        /* Avoid breaks between <dt> and <dd> */
        dl {
            break-before: auto;
            break-inside: auto;
        }

        dt {
            break-before: auto;
            break-after: avoid-page;
        }

        dd {
            break-before: avoid-page;
            break-after: auto;
            orphans: 3;
            widows: 3
        }

        span.break,
        dd.break {
            margin-bottom: 0;
            min-height: 0;
            break-before: auto;
            break-inside: auto;
            break-after: auto;
        }

        /* Undo break-before ToC */
        @media print {
            #toc {
                break-before: auto;
            }
        }

        /* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
        ul.compact p,
        .ulCompact p,
        ol.compact p,
        .olCompact p {
            margin: 0;
        }

        /* But the list as a whole needs the extra space at the end */
        section ul.compact,
        section .ulCompact,
        section ol.compact,
        section .olCompact {
            margin-bottom: 1em;
            /* same as p not within ul.compact etc. */
        }

        /* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
        tt,
        code {
            background-color: transparent;
        }

        p tt,
        p code,
        li tt,
        li code {
            background-color: #f8f8f8;
        }

        /* Tweak the pre margin -- 0px doesn't come out well */
        pre {
            margin-top: 0.5px;
        }

        /* Tweak the comact list text */
        ul.compact,
        .ulCompact,
        ol.compact,
        .olCompact,
        dl.compact,
        .dlCompact {
            line-height: normal;
        }

        /* Don't add top margin for nested lists */
        li>ul,
        li>ol,
        li>dl,
        dd>ul,
        dd>ol,
        dd>dl,
        dl>dd>dl {
            margin-top: initial;
        }

        /* Elements that should not be rendered on the same line as a <dt> */
        /* This should match the element list in writer.text.TextWriter.render_dl() */
        dd>div.artwork:first-child,
        dd>aside:first-child,
        dd>figure:first-child,
        dd>ol:first-child,
        dd>div:first-child>pre.sourcecode,
        dd>table:first-child,
        dd>ul:first-child {
            clear: left;
        }

        /* fix for weird browser behaviour when <dd/> is empty */
        dt+dd:empty::before {
            content: "\00a0";
        }

        /* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
        li>p {
            margin-bottom: 0.5em
        }

        /* Don't let p margin spill out from inside list items */
        li>p:last-of-type {
            margin-bottom: 0;
        }
    </style>
    <link href="https://www.rfc-editor.org/rfc/rfc-local.css" rel="stylesheet" type="text/css">
    <link href="https://dx.doi.org/10.17487/rfc9298" rel="alternate">
    <link href="urn:issn:2070-1721" rel="alternate">
    <link href="https://datatracker.ietf.org/doc/draft-ietf-masque-connect-udp-latest" rel="prev">
</head>

<body>
    <script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
    <table class="ears">
        <thead>
            <tr>
                <td class="left">RFC 9298</td>
                <td class="center">HTTP における UDP のプロキシ</td>
                <td class="right">2022年8月</td>
            </tr>
        </thead>
        <tfoot>
            <tr>
                <td class="left">Schinazi</td>
                <td class="center">標準トラック</td>
                <td class="right">[ページ]</td>
            </tr>
        </tfoot>
    </table>
    <div id="external-metadata" class="document-information"></div>
    <div id="internal-metadata" class="document-information">
        <dl id="identifiers">
            <dt class="label-stream">Stream:</dt>
            <dd class="stream">インターネットエンジニアリングタスクフォース (IETF)</dd>
            <dt class="label-rfc">RFC:</dt>
            <dd class="rfc"><a href="https://www.rfc-editor.org/rfc/rfc9298" class="eref">9298</a></dd>
            <dt class="label-category">Category:</dt>
            <dd class="category">標準トラック</dd>
            <dt class="label-published">Published:</dt>
            <dd class="published">
                <time datetime="2022-08" class="published">2022年8月</time>
            </dd>
            <dt class="label-issn">ISSN:</dt>
            <dd class="issn">2070-1721</dd>
            <dt class="label-authors">Author:</dt>
            <dd class="authors">
                <div class="author">
                    <div class="author-name">D. Schinazi</div>
                    <div class="org">Google LLC</div>
                </div>
            </dd>
        </dl>
    </div>
    <h1 id="rfcnum">RFC 9298</h1>
    <h1 id="title">Proxying UDP in HTTP</h1>
    <section id="section-abstract">
        <h2 id="abstract"><a href="#abstract" class="selfRef">概要</a></h2>
        <p id="section-abstract-1">本書は、HTTP の CONNECT メソッドが HTTP 上で TCP をプロキシする仕組みに類似して、HTTP における UDP
            のプロキシ方法を説明します。より具体的には、本書は HTTP クライアントがプロキシとして動作する HTTP サーバーを介して UDP 通信のためのトンネルを作成できるプロトコルを定義します。<a
                href="#section-abstract-1" class="pilcrow">¶</a></p>
    </section>
    <div id="status-of-memo">
        <section id="section-boilerplate.1">
            <h2 id="name-status-of-this-memo">
                <a href="#name-status-of-this-memo" class="section-name selfRef">本メモの状態</a>
            </h2>
            <p id="section-boilerplate.1-1">
                これはインターネット標準トラックの文書です。<a href="#section-boilerplate.1-1" class="pilcrow">¶</a>
            </p>
            <p id="section-boilerplate.1-2">
                この文書はインターネットエンジニアリングタスクフォース（IETF）の成果物です。IETF コミュニティの合意を表しており、公開審査を経て Internet Engineering Steering Group
                (IESG) によって公開が承認されています。インターネット標準に関する詳細は RFC 7841 のセクション 2 を参照してください。<a href="#section-boilerplate.1-2"
                    class="pilcrow">¶</a></p>
            <p id="section-boilerplate.1-3">
                本文書の現状、訂正情報、およびフィードバックの送付方法に関する情報は <span><a
                        href="https://www.rfc-editor.org/info/rfc9298">https://www.rfc-editor.org/info/rfc9298</a></span>
                で入手できます。<a href="#section-boilerplate.1-3" class="pilcrow">¶</a>
            </p>
        </section>
    </div>
    <div id="copyright">
        <section id="section-boilerplate.2">
            <h2 id="name-copyright-notice">
                <a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
            </h2>
            <p id="section-boilerplate.2-1">
                Copyright (c) 2022 IETF Trust and the persons identified as the
                document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
            <p id="section-boilerplate.2-2">
                This document is subject to BCP 78 and the IETF Trust's Legal
                Provisions Relating to IETF Documents
                (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>)
                in effect on the date of
                publication of this document. Please review these documents
                carefully, as they describe your rights and restrictions with
                respect to this document. Code Components extracted from this
                document must include Revised BSD License text as described in
                Section 4.e of the Trust Legal Provisions and are provided without
                warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2"
                    class="pilcrow">¶</a></p>
        </section>
    </div>
    <div id="toc">
        <section id="section-toc.1">
            <a href="#" onclick="scroll(0,0)" class="toplink">▲</a>
            <h2 id="name-table-of-contents">
                <a href="#name-table-of-contents" class="section-name selfRef">目次</a>
            </h2>
            <nav class="toc">
                <ul class="compact toc ulBare ulEmpty">
                    <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
                        <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>. <a
                                href="#name-introduction" class="xref">導入</a></p>
                        <ul class="compact toc ulBare ulEmpty">
                            <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1"
                                        class="xref">1.1</a>. <a href="#name-conventions-and-definitions"
                                        class="xref">表記と定義</a></p>
                            </li>
                        </ul>
                    </li>
                    <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
                        <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>. <a
                                href="#name-client-configuration" class="xref">クライアント構成</a></p>
                    </li>
                    <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
                        <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>. <a
                                href="#name-tunneling-udp-over-http" class="xref">HTTP 上での UDP トンネリング</a></p>
                        <ul class="compact toc ulBare ulEmpty">
                            <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>. <a
                                        href="#name-udp-proxy-handling" class="xref">UDP プロキシの取り扱い</a></p>
                            </li>
                            <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>. <a
                                        href="#name-http-11-request" class="xref">HTTP/1.1 リクエスト</a></p>
                            </li>
                            <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>. <a
                                        href="#name-http-11-response" class="xref">HTTP/1.1 レスポンス</a></p>
                            </li>
                            <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4">
                                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="xref">3.4</a>. <a
                                        href="#name-http-2-and-http-3-requests" class="xref">HTTP/2 と HTTP/3 のリクエスト</a>
                                </p>
                            </li>
                            <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.5">
                                <p id="section-toc.1-1.3.2.5.1"><a href="#section-3.5" class="xref">3.5</a>. <a
                                        href="#name-http-2-and-http-3-responses" class="xref">HTTP/2 と HTTP/3 のレスポンス</a>
                                </p>
                            </li>
                        </ul>
                    </li>
                    <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
                        <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>. <a
                                href="#name-context-identifiers" class="xref">コンテキスト識別子</a></p>
                    </li>
                    <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
                        <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>. <a
                                href="#name-http-datagram-payload-forma" class="xref">HTTP データグラム ペイロード形式</a>
                        </p>
                    </li>
                    <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
                        <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>. <a
                                href="#name-performance-considerations" class="xref">性能に関する考慮事項</a></p>
                        <ul class="compact toc ulBare ulEmpty">
                            <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>. <a
                                        href="#name-mtu-considerations" class="xref">MTU に関する考慮</a></p>
                            </li>
                            <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="xref">6.2</a>. <a
                                        href="#name-tunneling-of-ecn-marks" class="xref">ECN マークのトンネリング</a></p>
                            </li>
                        </ul>
                    </li>
                    <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
                        <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>. <a
                                href="#name-security-considerations" class="xref">セキュリティに関する考慮事項</a></p>
                    </li>
                    <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
                        <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>. <a
                                href="#name-iana-considerations" class="xref">IANA に関する考慮事項</a></p>
                        <ul class="compact toc ulBare ulEmpty">
                            <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="xref">8.1</a>. <a
                                        href="#name-http-upgrade-token" class="xref">HTTP Upgrade トークン</a></p>
                            </li>
                            <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="xref">8.2</a>. <a
                                        href="#name-well-known-uri" class="xref">Well-Known URI</a></p>
                            </li>
                        </ul>
                    </li>
                    <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
                        <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>. <a href="#name-references"
                                class="xref">参考文献</a></p>
                        <ul class="compact toc ulBare ulEmpty">
                            <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="xref">9.1</a>. <a
                                        href="#name-normative-references" class="xref">規範的参考文献</a></p>
                            </li>
                            <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="xref">9.2</a>. <a
                                        href="#name-informative-references" class="xref">参考資料</a></p>
                            </li>
                        </ul>
                    </li>
                    <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
                        <p id="section-toc.1-1.10.1"><a href="#appendix-A" class="xref"></a><a
                                href="#name-acknowledgments" class="xref">謝辞</a></p>
                    </li>
                    <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
                        <p id="section-toc.1-1.11.1"><a href="#appendix-B" class="xref"></a><a
                                href="#name-authors-address" class="xref">著者の連絡先</a></p>
                    </li>
                </ul>
            </nav>
        </section>
    </div>
    <div id="introduction">
        <section id="section-1">
            <h2 id="name-introduction">
                <a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction"
                    class="section-name selfRef">導入</a>
            </h2>
            <p id="section-1-1">HTTP は TCP トンネルを作成するための CONNECT メソッド（参照: <span><a
                        href="https://www.rfc-editor.org/rfc/rfc9110#section-9.3.6" class="relref">Section 9.3.6</a> of
                    [<a href="#RFC9110" class="xref">HTTP</a>]</span>）を提供しますが、本仕様以前は UDP トラフィック用の同等の手段がありませんでした。<a
                    href="#section-1-1" class="pilcrow">¶</a></p>
            <p id="section-1-2">本書は、HTTP を介して UDP 専用のプロキシとして動作するサーバーへ UDP をトンネリングするためのプロトコルを記述します。UDP
                トンネルはエンドツーエンドの仮想接続を作成するために一般的に使用され、その上で QUIC <span>[<a href="#RFC9000" class="xref">QUIC</a>]</span> や
                UDP 上で動作するその他のプロトコルにより保護できます。HTTP CONNECT メソッドとは異なり、UDP プロキシ自体はトラフィックの送信先を含む絶対 URL で識別されます。クライアントはそれらの
                URL を <span>[<a href="#RFC6570" class="xref">TEMPLATE</a>]</span> によって生成し、その方法は <a href="#client-config"
                    class="xref">セクション 2</a> に記載されます。<a href="#section-1-2" class="pilcrow">¶</a>
            </p>
            <p id="section-1-3">このプロトコルは HTTP Datagrams <span>[<a href="#RFC9297" class="xref">HTTP-DGRAM</a>]</span>
                を使用することで、既存のすべての HTTP バージョンをサポートします。HTTP/2 <span>[<a href="#RFC9113" class="xref">HTTP/2</a>]</span> または
                HTTP/3 <span>[<a href="#RFC9114" class="xref">HTTP/3</a>]</span> を使用する場合は、<span>[<a href="#RFC8441"
                        class="xref">EXT-CONNECT2</a>]</span> および <span>[<a href="#RFC9220"
                        class="xref">EXT-CONNECT3</a>]</span> に記載された HTTP Extended CONNECT を使用します。HTTP/1.x <span>[<a
                        href="#RFC9112" class="xref">HTTP/1.1</a>]</span> を使用する場合は、<span><a
                        href="https://www.rfc-editor.org/rfc/rfc9110#section-7.8" class="relref">Section 7.8</a> of [<a
                        href="#RFC9110" class="xref">HTTP</a>]</span> に定義される HTTP Upgrade を使用します。<a href="#section-1-3"
                    class="pilcrow">¶</a>
            </p>
            <div id="conventions">
                <section id="section-1.1">
                    <h3 id="name-conventions-and-definitions">
                        <a href="#section-1.1" class="section-number selfRef">1.1. </a><a
                            href="#name-conventions-and-definitions" class="section-name selfRef">表記と定義</a>
                    </h3>
                    <p id="section-1.1-1">本書中のキーワード "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST
                            NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>",
                        "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span
                            class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span
                            class="bcp14">NOT RECOMMENDED</span>",
                        "<span class="bcp14">MAY</span>", および "<span class="bcp14">OPTIONAL</span>" は、すべて大文字で現れる場合に限り
                        BCP 14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174"
                                class="xref">RFC8174</a>]</span> に従って解釈されます。<a href="#section-1.1-1"
                            class="pilcrow">¶</a></p>
                    <p id="section-1.1-2">本書では、"UDP proxy" という用語を、クライアントの UDP トンネリング要求に基づいてターゲットサーバーへの UDP
                        ソケットを開き、その要求に対するレスポンスを生成する HTTP サーバーを指すために使用します。クライアントと UDP プロキシの間に HTTP 仲介者（<span><a
                                href="https://www.rfc-editor.org/rfc/rfc9110#section-3.7" class="relref">Section 3.7</a>
                            of [<a href="#RFC9110" class="xref">HTTP</a>]</span> に定義）が存在する場合、それらは本書中で "intermediaries"
                        と呼ばれます。<a href="#section-1.1-2" class="pilcrow">¶</a></p>
                    <p id="section-1.1-3">使用中の HTTP バージョンがストリームの多重化をサポートしていない場合（例えば HTTP/1.1）、本書中の "stream"
                        への言及は接続全体を表すことに注意してください。<a href="#section-1.1-3" class="pilcrow">¶</a></p>
                </section>
            </div>
        </section>
    </div>
    <div id="client-config">
        <section id="section-2">
            <h2 id="name-client-configuration">
                <a href="#section-2" class="section-number selfRef">2. </a><a href="#name-client-configuration"
                    class="section-name selfRef">クライアント構成</a>
            </h2>
            <p id="section-2-1">HTTP クライアントは "target_host" と "target_port" という変数を持つ URI テンプレート <span>[<a href="#RFC6570"
                        class="xref">TEMPLATE</a>]</span> を用いて UDP プロキシを指定するように構成されます。以下に例を示します。<a href="#section-2-1"
                    class="pilcrow">¶</a>
            </p>
            <span id="name-uri-template-examples"></span>
            <div id="fig-template-examples">
                <figure id="figure-1">
                    <div class="alignLeft art-ascii-art art-text artwork" id="section-2-2.1">
                        <pre>
https://example.org/.well-known/masque/udp/{target_host}/{target_port}/
https://proxy.example.org:4443/masque?h={target_host}&amp;p={target_port}
https://proxy.example.org:4443/masque{?target_host,target_port}
</pre>
                    </div>
                    <figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
                        <a href="#name-uri-template-examples" class="selfRef">URI テンプレートの例</a>
                    </figcaption>
                </figure>
            </div>
            <p id="section-2-3">URI テンプレートには次の要件が適用されます：<a href="#section-2-3" class="pilcrow">¶</a></p>
            <ul class="normal">
                <li class="normal" id="section-2-4.1">URI テンプレートはレベル 3 以下でなければなりません（<span class="bcp14">MUST</span>）。<a
                        href="#section-2-4.1" class="pilcrow">¶</a>
                </li>
                <li class="normal" id="section-2-4.2">URI
                    テンプレートは絶対形式であり、スキーム、オーソリティ、およびパスの各コンポーネントが空でないことを含める必要があります（<span class="bcp14">MUST</span>）。<a
                        href="#section-2-4.2" class="pilcrow">¶</a>
                </li>
                <li class="normal" id="section-2-4.3">URI テンプレートのパス成分はスラッシュ ("/") で始まらなければなりません（<span
                        class="bcp14">MUST</span>）。<a href="#section-2-4.3" class="pilcrow">¶</a>
                </li>
                <li class="normal" id="section-2-4.4">すべてのテンプレート変数はパスまたはクエリの成分内にある必要があります（<span
                        class="bcp14">MUST</span>）。<a href="#section-2-4.4" class="pilcrow">¶</a>
                </li>
                <li class="normal" id="section-2-4.5">URI テンプレートは "target_host" と "target_port" の2つの変数を含まなければならず（<span
                        class="bcp14">MUST</span>）、他の変数を含んでも差し支えありません（<span class="bcp14">MAY</span>）。<a
                        href="#section-2-4.5" class="pilcrow">¶</a>
                </li>
                <li class="normal" id="section-2-4.6">URI テンプレートは非 ASCII の Unicode 文字を含んではならず（<span class="bcp14">MUST
                        NOT</span>）、ASCII の範囲 0x21-0x7E の文字のみを含む必要があります（パーセントエンコーディングは許可されます；参照: <span><a
                            href="https://www.rfc-editor.org/rfc/rfc3986#section-2.1" class="relref">Section 2.1</a> of
                        [<a href="#RFC3986" class="xref">URI</a>]</span>）。<a href="#section-2-4.6" class="pilcrow">¶</a>
                </li>
                <li class="normal" id="section-2-4.7">URI テンプレートは Reserved Expansion ("+" 演算子)、Fragment Expansion ("#"
                    演算子)、Label Expansion with Dot-Prefix、Path Segment Expansion with Slash-Prefix、または Path-Style
                    Parameter Expansion with Semicolon-Prefix を使用してはなりません（<span class="bcp14">MUST NOT</span>）。<a
                        href="#section-2-4.7" class="pilcrow">¶</a>
                </li>
            </ul>
            <p id="section-2-5">クライアントは上記の要件を検証することが推奨されます（<span class="bcp14">SHOULD</span>）；ただし、一般的な URI
                テンプレート実装でこれらの特定の検証が欠けている場合、クライアントはそれを使用しても構いません（<span class="bcp14">MAY</span>）。クライアントが URI
                テンプレートが上記要件を満たしていないことを検出した場合、クライアントはその設定を拒否し、UDP プロキシへリクエストを送信することなく中止しなければなりません（<span
                    class="bcp14">MUST</span>）。<a href="#section-2-5" class="pilcrow">¶</a></p>
            <p id="section-2-6">元の HTTP CONNECT
                メソッドはターゲットホストとポートの伝達を許可していましたが、スキーム、プロキシのオーソリティ、パス、クエリは含んでいませんでした。そのため、プロキシホストとプロキシポートのみを設定するクライアント構成インターフェースを持つクライアントも存在します。そのような制約のある実装は、デフォルトテンプレートを使用して
                UDP プロキシ機能へアクセスしようとすることができます。デフォルトテンプレートは
                "https://$PROXY_HOST:$PROXY_PORT/.well-known/masque/udp/{target_host}/{target_port}/" と定義され、ここで
                $PROXY_HOST と $PROXY_PORT はそれぞれ構成された UDP プロキシのホストとポートです。UDP
                プロキシの実装は、これらのクライアントと相互運用する必要がある場合、この場所でサービスを提供することを推奨します（<span class="bcp14">SHOULD</span>）。<a
                    href="#section-2-6" class="pilcrow">¶</a></p>
        </section>
    </div>
    <div id="tunneling-udp-over-http">
        <section id="section-3">
            <h2 id="name-tunneling-udp-over-http">
                <a href="#section-3" class="section-number selfRef">3. </a><a href="#name-tunneling-udp-over-http"
                    class="section-name selfRef">HTTP 上での UDP トンネリング</a>
            </h2>
            <p id="section-3-1">UDP を HTTP 上でトンネリングするためのネゴシエーションを可能にするために、本書は "connect-udp" という HTTP Upgrade
                トークンを定義します。生成される UDP トンネルは Capsule Protocol（参照: <span><a
                        href="https://www.rfc-editor.org/rfc/rfc9297#section-3.2" class="relref">Section 3.2</a> of [<a
                        href="#RFC9297" class="xref">HTTP-DGRAM</a>]</span>）と、<a href="#format" class="xref">セクション 5</a>
                で定義される形式の HTTP Datagrams を使用します。<a href="#section-3-1" class="pilcrow">¶</a></p>
            <p id="section-3-2">単一の HTTP ストリームに関連付けられた UDP トンネルを開始するには、クライアントは "connect-udp" Upgrade
                トークンを含むリクエストを発行します。トンネルの宛先は、URI テンプレートの "target_host" および "target_port" 変数を介してクライアントによって UDP
                プロキシに示されます（参照: <a href="#client-config" class="xref">セクション 2</a>）。<a href="#section-3-2"
                    class="pilcrow">¶</a></p>
            <p id="section-3-3">"target_host" は DNS 名、IPv6 リテラル、IPv4 リテラルの使用をサポートします。IPv6
                スコープドアドレッシングのゾーン識別子はサポートされない点に注意してください。<span>[<a href="#RFC3986" class="xref">URI</a>]</span> の
                IPv6address、IPv4address、reg-name、port の用語を用いると、"target_host" と "target_port" 変数は <span>[<a
                        href="#RFC2234" class="xref">ABNF</a>]</span> の表記を使用して <a href="#target-format" class="xref">図
                    2</a> の形式に従わなければなりません（<span class="bcp14">MUST</span>）。さらに次の点に注意してください：<a href="#section-3-3"
                    class="pilcrow">¶</a></p>
            <ul class="normal">
                <li class="normal" id="section-3-4.1">"target_host" と "target_port" の両方は空であってはなりません（<span
                        class="bcp14">MUST NOT</span>）。<a href="#section-3-4.1" class="pilcrow">¶</a>
                </li>
                <li class="normal" id="section-3-4.2">"target_host" が IPv6 リテラルを含む場合、コロン (":")
                    はパーセントエンコーディングされなければなりません（<span class="bcp14">MUST</span>）。例えばターゲットホストが "2001:db8::42" の場合、URI では
                    "2001%3Adb8%3A%3A42" とエンコードされます。<a href="#section-3-4.2" class="pilcrow">¶</a>
                </li>
                <li class="normal" id="section-3-4.3">"target_port" は 1 から 65535 までの整数である必要があります（<span
                        class="bcp14">MUST</span>）。<a href="#section-3-4.3" class="pilcrow">¶</a>
                </li>
            </ul>
            <span id="name-uri-template-variable-forma"></span>
            <div id="target-format">
                <figure id="figure-2">
                    <div class="alignLeft art-ascii-art art-text artwork" id="section-3-5.1">
                        <pre>
target_host = IPv6address / IPv4address / reg-name
target_port = port
</pre>
                    </div>
                    <figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
                        <a href="#name-uri-template-variable-forma" class="selfRef">URI テンプレート変数の形式</a>
                    </figcaption>
                </figure>
            </div>
            <p id="section-3-6">UDP プロキシング要求を送信する際、クライアントは URI テンプレート展開を実行してリクエストのパスおよびクエリを決定しなければなりません（<span
                    class="bcp14">SHALL</span>）。<a href="#section-3-6" class="pilcrow">¶</a>
            </p>
            <p id="section-3-7">リクエストが成功した場合、UDP プロキシは受信した HTTP Datagrams を UDP パケットに変換し、その逆も行うことを、トンネルが閉じられるまで約束します。<a
                    href="#section-3-7" class="pilcrow">¶</a></p>
            <p id="section-3-8">Capsule Protocol の定義（参照: <span><a
                        href="https://www.rfc-editor.org/rfc/rfc9297#section-3.2" class="relref">Section 3.2</a> of [<a
                        href="#RFC9297" class="xref">HTTP-DGRAM</a>]</span>）により、UDP
                プロキシング要求はメッセージ本体を運ばないことに注意してください。同様に、成功した UDP プロキシングレスポンスもメッセージ本体を運びません。<a href="#section-3-8"
                    class="pilcrow">¶</a></p>
            <div id="handling">
                <section id="section-3.1">
                    <h3 id="name-udp-proxy-handling">
                        <a href="#section-3.1" class="section-number selfRef">3.1. </a><a
                            href="#name-udp-proxy-handling" class="section-name selfRef">UDP プロキシの取り扱い</a>
                    </h3>
                    <p id="section-3.1-1">UDP プロキシング要求を受信した際：<a href="#section-3.1-1" class="pilcrow">¶</a></p>
                    <ul class="normal">
                        <li class="normal" id="section-3.1-2.1">受信者が別の HTTP プロキシを使用するよう構成されている場合、受信者は仲介者として振る舞い、その要求を別の
                            HTTP サーバーへ転送します。仲介者が受信に使用した HTTP
                            バージョンと異なるバージョンでフォワードする場合、リクエストの再エンコードが必要になることがある点に注意してください（エンコーディングはバージョンによって異なります）。<a
                                href="#section-3.1-2.1" class="pilcrow">¶</a>
                        </li>
                        <li class="normal" id="section-3.1-2.2">それ以外の場合、受信者は UDP プロキシとして動作します。受信したリクエストヘッダから再構築した URI から
                            "target_host" と "target_port" 変数を抽出し、パーセントデコードを行い、要求されたターゲットへ直接 UDP ソケットを開くことでトンネルを確立します。<a
                                href="#section-3.1-2.2" class="pilcrow">¶</a>
                        </li>
                    </ul>
                    <p id="section-3.1-3">TCP とは異なり、UDP はコネクションレスです。UDP ソケットを開く UDP
                        プロキシは、宛先が到達可能かどうかを知る方法がないため、ターゲットからのパケットを待つことなくリクエストに応答する必要があります。ただし、"target_host" が DNS
                        名である場合、UDP プロキシは HTTP リクエストに応答する前に DNS 解決を実行しなければなりません（<span
                            class="bcp14">MUST</span>）。この処理中にエラーが発生した場合、UDP プロキシはリクエストを拒否し、適切な Proxy-Status ヘッダーフィールド
                        <span>[<a href="#RFC9209" class="xref">PROXY-STATUS</a>]</span> を用いて詳細を送信することが推奨されます（<span
                            class="bcp14">SHOULD</span>）。例えば、DNS 解決がエラーを返した場合、プロキシは <span><a
                                href="https://www.rfc-editor.org/rfc/rfc9209#section-2.3.2" class="relref">Section
                                2.3.2</a> of [<a href="#RFC9209" class="xref">PROXY-STATUS</a>]</span> にある dns_error
                        Proxy Error Type を使用できます。<a href="#section-3.1-3" class="pilcrow">¶</a>
                    </p>
                    <p id="section-3.1-4">UDP プロキシは、OS がサポートする場合は接続済み UDP ソケットを使用できます。これによりカーネルにより正しい 5-タプルに一致する UDP
                        パケットのみがプロキシに渡されることを期待できます。非接続ソケットを使用する場合、受信パケットの IP 送信元アドレスと UDP
                        送信元ポートがクライアントの要求と一致することを検証しなければなりません（<span
                            class="bcp14">MUST</span>）。一致しないパケットは破棄されなければなりません（<span class="bcp14">MUST</span>）。<a
                            href="#section-3.1-4" class="pilcrow">¶</a></p>
                    <p id="section-3.1-5">ソケットの寿命はリクエストストリームに結びついています。UDP
                        プロキシはリクエストストリームが開いている間ソケットを開いたままにしておかなければなりません（<span class="bcp14">MUST</span>）。OS
                        によりソケットが使用不可能になったと通知された場合、UDP プロキシはリクエストストリームを閉じなければなりません（<span
                            class="bcp14">MUST</span>）。例えば、ICMP Destination Unreachable を受信した場合などにこれが起こり得ます（参照: <span><a
                                href="https://www.rfc-editor.org/rfc/rfc4443#section-3.1" class="relref">Section 3.1</a>
                            of [<a href="#RFC4443" class="xref">ICMP6</a>]</span>）。UDP
                        プロキシはアイドル期間によってソケットを閉じることができます（<span
                            class="bcp14">MAY</span>）が、その場合はソケットを閉じる際にリクエストストリームを閉じなければなりません（<span
                            class="bcp14">MUST</span>）。アイドル期間でソケットを閉じる UDP プロキシは、2 分未満の期間を使用すべきではありません（<span
                            class="bcp14">SHOULD NOT</span>）；参照: <span><a
                                href="https://www.rfc-editor.org/rfc/rfc4787#section-4.3" class="relref">Section 4.3</a>
                            of [<a href="#RFC4787" class="xref">BEHAVE</a>]</span>。<a href="#section-3.1-5"
                            class="pilcrow">¶</a></p>
                    <p id="section-3.1-6">成功レスポンス（<a href="#resp1" class="xref">3.3</a> および <a href="#resp23"
                            class="xref">3.5</a> で定義）は、UDP プロキシが要求されたターゲットへのソケットを開き、UDP
                        ペイロードのプロキシを行うことに同意したことを示します。それ以外のレスポンスは要求が失敗したことを示すため、クライアントはリクエストを中止しなければなりません（<span
                            class="bcp14">MUST</span>）。<a href="#section-3.1-6" class="pilcrow">¶</a></p>
                    <p id="section-3.1-7">UDP プロキシは、UDP ソケットに対して HTTP Datagrams をフォワードする際に IP レイヤでの断片化を導入してはなりません（<span
                            class="bcp14">MUST NOT</span>）；過大なデータグラムは黙って破棄されます。IPv4 では、可能であれば Don't Fragment (DF)
                        ビットを設定してパス上の断片化を防止しなければなりません（<span class="bcp14">MUST</span>）。将来の拡張がこれらの要件を削除する可能性があります（<span
                            class="bcp14">MAY</span>）。<a href="#section-3.1-7" class="pilcrow">¶</a></p>
                    <p id="section-3.1-8">UDP プロキシの実装者は <span>[<a href="#RFC8085" class="xref">UDP-USAGE</a>]</span>
                        にあるガイダンスを参照すると有益です。<a href="#section-3.1-8" class="pilcrow">¶</a></p>
                </section>
            </div>
            <div id="req1">
                <section id="section-3.2">
                    <h3 id="name-http-11-request">
                        <a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-http-11-request"
                            class="section-name selfRef">HTTP/1.1 リクエスト</a>
                    </h3>
                    <p id="section-3.2-1">HTTP/1.1 <span>[<a href="#RFC9112" class="xref">HTTP/1.1</a>]</span>
                        を使用する場合、UDP プロキシング要求は次の要件を満たす必要があります：<a href="#section-3.2-1" class="pilcrow">¶</a></p>
                    <ul class="normal">
                        <li class="normal" id="section-3.2-2.1">メソッドは "GET" でなければなりません（<span
                                class="bcp14">SHALL</span>）。<a href="#section-3.2-2.1" class="pilcrow">¶</a>
                        </li>
                        <li class="normal" id="section-3.2-2.2">リクエストは UDP プロキシのオリジンを含む単一の Host
                            ヘッダーフィールドを含まなければなりません（<span class="bcp14">SHALL</span>）。<a href="#section-3.2-2.2"
                                class="pilcrow">¶</a>
                        </li>
                        <li class="normal" id="section-3.2-2.3">リクエストは値が "Upgrade" の Connection
                            ヘッダーフィールドを含まなければなりません（この要件は大文字小文字を区別しないことに注意；参照: <span><a
                                    href="https://www.rfc-editor.org/rfc/rfc9110#section-7.6.1" class="relref">Section
                                    7.6.1</a> of [<a href="#RFC9110" class="xref">HTTP</a>]</span>）。<a
                                href="#section-3.2-2.3" class="pilcrow">¶</a>
                        </li>
                        <li class="normal" id="section-3.2-2.4">リクエストは値が "connect-udp" の Upgrade
                            ヘッダーフィールドを含まなければなりません（<span class="bcp14">SHALL</span>）。<a href="#section-3.2-2.4"
                                class="pilcrow">¶</a>
                        </li>
                    </ul>
                    <p id="section-3.2-3">これらの制約に準拠しない UDP プロキシング要求は不正な形式です。そのような不正なリクエストを受信した受信者はエラーで応答し、400 (Bad
                        Request) ステータスコードを使用することが推奨されます（<span class="bcp14">MUST</span> と <span
                            class="bcp14">SHOULD</span>）。<a href="#section-3.2-3" class="pilcrow">¶</a></p>
                    <p id="section-3.2-4">例えば、クライアントが URI テンプレート
                        "https://example.org/.well-known/masque/udp/{target_host}/{target_port}/" を構成し、ターゲット
                        192.0.2.6:443 への UDP プロキシトンネルを開きたい場合、次のようなリクエストを送信できます：<a href="#section-3.2-4"
                            class="pilcrow">¶</a></p>
                    <span id="name-example-http-11-request"></span>
                    <div id="fig-req-h1">
                        <figure id="figure-3">
                            <div class="alignLeft art-text artwork" id="section-3.2-5.1">
                                <pre>
GET https://example.org/.well-known/masque/udp/192.0.2.6/443/ HTTP/1.1
Host: example.org
Connection: Upgrade
Upgrade: connect-udp
Capsule-Protocol: ?1
</pre>
                            </div>
                            <figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
                                <a href="#name-example-http-11-request" class="selfRef">HTTP/1.1 リクエストの例</a>
                            </figcaption>
                        </figure>
                    </div>
                    <p id="section-3.2-6">HTTP/1.1 では、このプロトコルは WebSocket プロトコル <span>[<a href="#RFC6455"
                                class="xref">WEBSOCKET</a>]</span> の設計を模倣するために GET メソッドを使用します。<a href="#section-3.2-6"
                            class="pilcrow">¶</a></p>
                </section>
            </div>
            <div id="resp1">
                <section id="section-3.3">
                    <h3 id="name-http-11-response">
                        <a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-http-11-response"
                            class="section-name selfRef">HTTP/1.1 レスポンス</a>
                    </h3>
                    <p id="section-3.3-1">UDP プロキシは成功レスポンスを次の要件で応答することで示します：<a href="#section-3.3-1"
                            class="pilcrow">¶</a></p>
                    <ul class="normal">
                        <li class="normal" id="section-3.3-2.1">レスポンスの HTTP ステータスコードは 101 (Switching Protocols)
                            でなければなりません（<span class="bcp14">SHALL</span>）。<a href="#section-3.3-2.1"
                                class="pilcrow">¶</a>
                        </li>
                        <li class="normal" id="section-3.3-2.2">レスポンスは値が "Upgrade" の Connection
                            ヘッダーフィールドを含まなければなりません（この要件は大文字小文字を区別しません）。<a href="#section-3.3-2.2" class="pilcrow">¶</a>
                        </li>
                        <li class="normal" id="section-3.3-2.3">レスポンスは値が "connect-udp" の単一の Upgrade
                            ヘッダーフィールドを含まなければなりません（<span class="bcp14">SHALL</span>）。<a href="#section-3.3-2.3"
                                class="pilcrow">¶</a>
                        </li>
                        <li class="normal" id="section-3.3-2.4">レスポンスは Capsule Protocol を開始する HTTP
                            レスポンスの要件を満たす必要があります（参照: <span><a href="https://www.rfc-editor.org/rfc/rfc9297#section-3.2"
                                    class="relref">Section 3.2</a> of [<a href="#RFC9297"
                                    class="xref">HTTP-DGRAM</a>]</span>）。<a href="#section-3.3-2.4"
                                class="pilcrow">¶</a>
                        </li>
                    </ul>
                    <p id="section-3.3-3">これらの要件が満たされない場合、クライアントはプロキシング試行を失敗として扱い、接続を中止しなければなりません（<span
                            class="bcp14">MUST</span>）。<a href="#section-3.3-3" class="pilcrow">¶</a></p>
                    <p id="section-3.3-4">例えば、UDP プロキシは次のように応答できます：<a href="#section-3.3-4" class="pilcrow">¶</a></p>
                    <span id="name-example-http-11-response"></span>
                    <div id="fig-resp-h1">
                        <figure id="figure-4">
                            <div id="section-3.3-5.1">
                                <pre class="lang-http-message sourcecode">
HTTP/1.1 101 Switching Protocols
Connection: Upgrade
Upgrade: connect-udp
Capsule-Protocol: ?1
</pre>
                            </div>
                            <figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
                                <a href="#name-example-http-11-response" class="selfRef">HTTP/1.1 レスポンスの例</a>
                            </figcaption>
                        </figure>
                    </div>
                </section>
            </div>
            <div id="req23">
                <section id="section-3.4">
                    <h3 id="name-http-2-and-http-3-requests">
                        <a href="#section-3.4" class="section-number selfRef">3.4. </a><a
                            href="#name-http-2-and-http-3-requests" class="section-name selfRef">HTTP/2 および HTTP/3
                            におけるリクエスト</a>
                    </h3>
                    <p id="section-3.4-1">HTTP/2 <span>[<a href="#RFC9113" class="xref">HTTP/2</a>]</span> または
                        HTTP/3 <span>[<a href="#RFC9114" class="xref">HTTP/3</a>]</span> を使用する場合、UDP プロキシング要求は
                        HTTP Extended CONNECT を使用します。これは、サーバーが <span>[<a href="#RFC8441"
                                class="xref">EXT-CONNECT2</a>]</span> および <span>[<a href="#RFC9220"
                                class="xref">EXT-CONNECT3</a>]</span> に規定されたとおりの HTTP 設定を送信することを要求し、さらに要求が次の要件を満たす HTTP
                        擬似ヘッダーフィールドを使用することを要求します。<a href="#section-3.4-1" class="pilcrow">¶</a></p>
                    <ul class="normal">
                        <li class="normal" id="section-3.4-2.1">:method 擬似ヘッダーフィールドは <span class="bcp14">SHALL</span>
                            "CONNECT" でなければなりません。<a href="#section-3.4-2.1" class="pilcrow">¶</a>
                        </li>
                        <li class="normal" id="section-3.4-2.2">:protocol 擬似ヘッダーフィールドは <span class="bcp14">SHALL</span>
                            "connect-udp" でなければなりません。<a href="#section-3.4-2.2" class="pilcrow">¶</a>
                        </li>
                        <li class="normal" id="section-3.4-2.3">:authority 擬似ヘッダーフィールドは UDP
                            プロキシのオーソリティを含むこと <span class="bcp14">SHALL</span>。<a href="#section-3.4-2.3"
                                class="pilcrow">¶</a>
                        </li>
                        <li class="normal" id="section-3.4-2.4">:path および :scheme 擬似ヘッダーフィールドは空であってはなりません（<span
                                class="bcp14">SHALL NOT</span>）。それらの値は URI テンプレートの展開処理が完了した後のスキームおよびパスを含むこと <span
                                class="bcp14">SHALL</span>。<a href="#section-3.4-2.4" class="pilcrow">¶</a>
                        </li>
                    </ul>
                    <p id="section-3.4-3">これらの制約に従わない UDP プロキシング要求は不正な形式です（参照: <span><a
                                href="https://www.rfc-editor.org/rfc/rfc9113#section-8.1.1" class="relref">Section
                                8.1.1</a> of [<a href="#RFC9113" class="xref">HTTP/2</a>]</span>
                        および <span><a href="https://www.rfc-editor.org/rfc/rfc9114#section-4.1.2" class="relref">Section
                                4.1.2</a> of [<a href="#RFC9114" class="xref">HTTP/3</a>]</span>）。<a
                            href="#section-3.4-3" class="pilcrow">¶</a></p>
                    <p id="section-3.4-4">例えば、クライアントが URI テンプレート
                        "https://example.org/.well-known/masque/udp/{target_host}/{target_port}/" を構成し、
                        192.0.2.6:443 宛の UDP プロキシトンネルを開きたい場合、次のようなリクエストを送信できます：<a href="#section-3.4-4"
                            class="pilcrow">¶</a></p>
                    <span id="name-example-http-2-request"></span>
                    <div id="fig-req-h2">
                        <figure id="figure-5">
                            <div id="section-3.4-5.1">
                                <pre class="lang-http-message sourcecode">
HEADERS
:method = CONNECT
:protocol = connect-udp
:scheme = https
:path = /.well-known/masque/udp/192.0.2.6/443/
:authority = example.org
capsule-protocol = ?1
</pre>
                            </div>
                            <figcaption><a href="#figure-5" class="selfRef">図 5</a>:
                                <a href="#name-example-http-2-request" class="selfRef">HTTP/2 リクエストの例</a>
                            </figcaption>
                        </figure>
                    </div>
                </section>
            </div>
            <div id="resp23">
                <section id="section-3.5">
                    <h3 id="name-http-2-and-http-3-responses">
                        <a href="#section-3.5" class="section-number selfRef">3.5. </a><a
                            href="#name-http-2-and-http-3-responses" class="section-name selfRef">HTTP/2 および HTTP/3
                            のレスポンス</a>
                    </h3>
                    <p id="section-3.5-1">UDP プロキシは成功レスポンスを次の要件で応答することで示さなければなりません（<span class="bcp14">SHALL</span>）：<a
                            href="#section-3.5-1" class="pilcrow">¶</a></p>
                    <ul class="normal">
                        <li class="normal" id="section-3.5-2.1">レスポンスの HTTP ステータスコードは 2xx（Successful）範囲であること <span
                                class="bcp14">SHALL</span>。<a href="#section-3.5-2.1" class="pilcrow">¶</a>
                        </li>
                        <li class="normal" id="section-3.5-2.2">レスポンスは Capsule Protocol を開始する HTTP レスポンスの要件を満たすこと <span
                                class="bcp14">SHALL</span>；参照: <span><a
                                    href="https://www.rfc-editor.org/rfc/rfc9297#section-3.2" class="relref">Section
                                    3.2</a> of [<a href="#RFC9297" class="xref">HTTP-DGRAM</a>]</span>。<a
                                href="#section-3.5-2.2" class="pilcrow">¶</a>
                        </li>
                    </ul>
                    <p id="section-3.5-3">これらの要件が満たされない場合、クライアントはこのプロキシング試行を失敗として扱い、リクエストを中止しなければなりません（<span
                            class="bcp14">MUST</span>）。<a href="#section-3.5-3" class="pilcrow">¶</a></p>
                    <p id="section-3.5-4">例えば、UDP プロキシは次のように応答できます：<a href="#section-3.5-4" class="pilcrow">¶</a></p>
                    <span id="name-example-http-2-response"></span>
                    <div id="fig-resp-h2">
                        <figure id="figure-6">
                            <div id="section-3.5-5.1">
                                <pre class="lang-http-message sourcecode">
HEADERS
:status = 200
capsule-protocol = ?1
</pre>
                            </div>
                            <figcaption><a href="#figure-6" class="selfRef">図 6</a>:
                                <a href="#name-example-http-2-response" class="selfRef">HTTP/2 レスポンスの例</a>
                            </figcaption>
                        </figure>
                    </div>
                </section>
            </div>
        </section>
    </div>
    <div id="context-id">
        <section id="section-4">
            <h2 id="name-context-identifiers">
                <a href="#section-4" class="section-number selfRef">4. </a><a href="#name-context-identifiers"
                    class="section-name selfRef">コンテキスト識別子</a>
            </h2>
            <p id="section-4-1">本書で定義される HTTP における UDP のプロキシ機構は、UDP ペイロードとは異なる意味を持つ HTTP Datagrams
                を交換するための将来の拡張を許容します。これらの拡張の一部は UDP ペイロードに追加データを付加することができ、他のものは UDP
                ペイロードとは完全に独立したデータを交換することができます。そのため、UDP プロキシング要求ストリームに関連付けられたすべての HTTP Datagrams は Context ID
                フィールドで始まります；参照: <a href="#format" class="xref">セクション 5</a>。<a href="#section-4-1" class="pilcrow">¶</a>
            </p>
            <p id="section-4-2">Context ID は 62 ビット整数（0 から 2<sup>62</sup>-1）です。Context ID は可変長整数としてエンコードされます；参照:
                <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-16" class="relref">Section 16</a> of [<a
                        href="#RFC9000" class="xref">QUIC</a>]</span>。Context ID 値 0 は UDP
                ペイロード用に予約されており、非ゼロ値は動的に割り当てられます。非ゼロの偶数の Context ID はクライアント割り当て、奇数の Context ID はプロキシ割り当てです。Context ID
                名前空間は特定の HTTP リクエストに結び付けられており、同じ数値の Context ID が異なるリクエストで同時に割り当てられ、異なる意味を持つ可能性があります。Context ID は特定の HTTP
                名前空間内で再割り当てしてはなりません（<span class="bcp14">MUST NOT</span>）が、任意の順序で割り当てること <span class="bcp14">MAY</span>
                できます。偶数／奇数の割り当て制限はエンドポイント間の同期の必要性を回避するために存在します。しかし、一度 Context ID が割り当てられると、その使用に対するこれらの制限は適用されなくなり、その
                Context ID は当初割り当てたエンドポイントとは無関係に任意のクライアントまたは UDP プロキシによって使用できます。<a href="#section-4-2"
                    class="pilcrow">¶</a>
            </p>
            <p id="section-4-3">登録は、エンドポイントが与えられた Context ID の意味と形式をピアに通知する行為です。本書は登録がどのように行われるかを定義しません。将来の拡張は Context
                ID を登録するために HTTP ヘッダーフィールドやカプセルを使用する <span class="bcp14">MAY</span> あります。使用される手法によっては、Context ID
                がまだ登録されていない状態で datagram が受信されることがあります。たとえば、datagram
                を含むパケットと登録メッセージを含むパケットが伝送中に順序入れ替わることが原因でこのような状況が生じ得ます。<a href="#section-4-3" class="pilcrow">¶</a></p>
        </section>
    </div>
    <div id="format">
        <section id="section-5">
            <h2 id="name-http-datagram-payload-forma">
                <a href="#section-5" class="section-number selfRef">5. </a><a href="#name-http-datagram-payload-forma"
                    class="section-name selfRef">HTTP データグラムのペイロード形式</a>
            </h2>
            <p id="section-5-1">UDP プロキシング要求ストリームに関連付けられた HTTP Datagrams（参照: <span><a
                        href="https://www.rfc-editor.org/rfc/rfc9297#section-2" class="relref">Section 2</a> of [<a
                        href="#RFC9297" class="xref">HTTP-DGRAM</a>]</span>）のとき、HTTP Datagram Payload フィールドは <a
                    href="#dgram-format" class="xref">図 7</a> に定義された形式を持ちます。表記は <span><a
                        href="https://www.rfc-editor.org/rfc/rfc9000#section-1.3" class="relref">Section 1.3</a> of [<a
                        href="#RFC9000" class="xref">QUIC</a>]</span> を使用しています。QUIC DATAGRAM フレームを用いて HTTP Datagrams
                がエンコードされる場合（<span>[<a href="#RFC9221" class="xref">QUIC-DGRAM</a>]</span>）、以下に定義する Context ID フィールドは
                QUIC DATAGRAM フレームペイロードの先頭にある Quarter Stream ID フィールドの直後に置かれます；参照: <span><a
                        href="https://www.rfc-editor.org/rfc/rfc9297#section-2.1" class="relref">Section 2.1</a> of [<a
                        href="#RFC9297" class="xref">HTTP-DGRAM</a>]</span>。<a href="#section-5-1" class="pilcrow">¶</a>
            </p>
            <span id="name-udp-proxying-http-datagram-"></span>
            <div id="dgram-format">
                <figure id="figure-7">
                    <div class="alignLeft art-ascii-art art-text artwork" id="section-5-2.1">
                        <pre>
UDP Proxying HTTP Datagram Payload {
  Context ID (i),
  UDP Proxying Payload (..),
}
</pre>
                    </div>
                    <figcaption><a href="#figure-7" class="selfRef">図 7</a>:
                        <a href="#name-udp-proxying-http-datagram-" class="selfRef">UDP プロキシング HTTP データグラム形式</a>
                    </figcaption>
                </figure>
            </div>
            <span class="break"></span>
            <dl class="dlCompact dlParallel" id="section-5-3">
                <dt id="section-5-3.1">Context ID:</dt>
                <dd style="margin-left: 1.5em" id="section-5-3.2">
                    <p id="section-5-3.2.1">可変長整数（参照: <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-16"
                                class="relref">Section 16</a>
                            of [<a href="#RFC9000" class="xref">QUIC</a>]</span>）で Context ID の値を含みます。未知の Context ID を含む
                        HTTP/3 Datagram を受信した場合、受信者はその datagram を黙って破棄するか、対応する Context ID
                        の登録を待つために一時的（おおむね往復時間程度）にバッファすること <span class="bcp14">SHALL</span> です。<a href="#section-5-3.2.1"
                            class="pilcrow">¶</a></p>
                </dd>
                <dd class="break"></dd>
                <dt id="section-5-3.3">UDP Proxying Payload:</dt>
                <dd style="margin-left: 1.5em" id="section-5-3.4">
                    <p id="section-5-3.4.1">前フィールドの値に依存する datagram のペイロードです。このフィールドは空にできる点に注意してください。<a
                            href="#section-5-3.4.1" class="pilcrow">¶</a></p>
                </dd>
                <dd class="break"></dd>
            </dl>
            <p id="section-5-4">UDP パケットは Context ID フィールドがゼロに設定された HTTP Datagrams を用いてエンコードされます。Context ID
                フィールドがゼロの場合、UDP Proxying Payload フィールドは UDP パケットの修飾されていないペイロード（<span>[<a href="#RFC0768"
                        class="xref">UDP</a>]</span> における data octets と同じ）を含みます。<a href="#section-5-4"
                    class="pilcrow">¶</a>
            </p>
            <p id="section-5-5">UDP ヘッダの定義上（<span>[<a href="#RFC0768" class="xref">UDP</a>]</span>）、65527 バイトを超える UDP
                ペイロードをエンコードすることは不可能です。したがって、エンドポイントは Context ID がゼロの状態で UDP Proxying Payload フィールドが 65527 バイトを超える HTTP
                Datagrams を送信してはなりません（<span class="bcp14">MUST NOT</span>）。受信者が Context ID ゼロを使用する HTTP Datagram
                を受け取り、その UDP Proxying Payload フィールドが 65527 を超えている場合、受信者は対応するストリームを中止しなければなりません（<span
                    class="bcp14">MUST</span>）。UDP プロキシが基盤となるリンクの MTU により送出可能な UDP パケットの長さが制限されていることを知っている場合、その限界を超える
                incoming の HTTP Datagrams（Context ID ゼロ）は破棄する他ありません。その破棄された HTTP Datagram が DATAGRAM
                カプセルで運ばれていた場合、受信者はそのカプセル内容をバッファせずにそのカプセルを破棄すること <span class="bcp14">SHOULD</span> です。<a
                    href="#section-5-5" class="pilcrow">¶</a></p>
            <p id="section-5-6">UDP プロキシが対応するリクエストを受け取る前に HTTP Datagram を受信した場合、受信者はその HTTP Datagram
                を黙って破棄するか、対応するリクエストを待つために一時的（おおむね往復時間程度）にバッファすること <span class="bcp14">SHALL</span> です。<a
                    href="#section-5-6" class="pilcrow">¶</a></p>
            <p id="section-5-7">datagram をバッファすること（リクエスト未着や Context ID 未登録のためいずれの場合も）はリソースを消費します。datagram
                をバッファする受信者は、リソース枯渇のリスクを低減するためにバッファ制限を適用すること <span class="bcp14">SHOULD</span> です。たとえば、受信者はバッファ済み
                datagram の総数や累積サイズを、ストリーム単位、コンテキスト単位、あるいは接続単位で制限できます。<a href="#section-5-7" class="pilcrow">¶</a></p>
            <p id="section-5-8">クライアントは UDP プロキシング要求に対するレスポンスを受け取る前に楽観的に HTTP Datagrams 内で UDP パケットの送信を開始してもよい（<span
                    class="bcp14">MAY</span>）。ただし、そのようなプロキシされたパケットは、UDP プロキシがリクエストに対して失敗で応答した場合や、UDP
                プロキシがリクエスト前に受信したプロキシ済みパケットをバッファしないと判断した場合には処理されない可能性があることに実装者は留意すべきです。<a href="#section-5-8"
                    class="pilcrow">¶</a></p>
        </section>
    </div>
    <div id="performance">
        <section id="section-6">
            <h2 id="name-performance-considerations">
                <a href="#section-6" class="section-number selfRef">6. </a><a href="#name-performance-considerations"
                    class="section-name selfRef">性能に関する考慮事項</a>
            </h2>
            <p id="section-6-1">バースト性の高いトラフィックは時間的に相関したパケット損失を引き起こすことがあり、それが UDP
                上で動作するプロトコルの輻輳制御に対して最適でない反応を招く可能性があります。これを避けるため、UDP プロキシは UDP トラフィックのバースト性を増大させないよう努めるべきであり（<span
                    class="bcp14">SHOULD</span>）、バッチ処理を増やすためにパケットをキューイングすべきではありません（<span class="bcp14">SHOULD
                    NOT</span>）。<a href="#section-6-1" class="pilcrow">¶</a></p>
            <p id="section-6-2">プロキシ対象の UDP 上で動作するプロトコルが輻輳制御を使用する場合（例: <span>[<a href="#RFC9000"
                        class="xref">QUIC</a>]</span>）、プロキシされたトラフィックは少なくとも二重のネストされた輻輳制御を被ります。基盤となる HTTP
                接続は、内部トラフィックが輻輳制御されていることを外部手段で絶対確実に知っている場合を除き、輻輳制御を無効にしてはなりません（<span class="bcp14">MUST NOT</span>）。<a
                    href="#section-6-2" class="pilcrow">¶</a></p>
            <p id="section-6-3">UDP プロキシング要求ストリームを含む接続を持つクライアントまたは UDP プロキシが輻輳制御を無効にする場合、その接続上で ECN（Explicit Congestion
                Notification、<span>[<a href="#RFC3168" class="xref">ECN</a>]</span>）のサポートを示してはなりません（<span
                    class="bcp14">MUST NOT</span>）。つまり、すべての IP ヘッダを Not-ECT コードポイントでマーキングしなければなりません（<span
                    class="bcp14">MUST</span>）。ただし、ピアが輻輳制御を無効にしていない可能性があるため、QUIC の ACK_ECN フレームや TCP の ECE ビットを介して ECN
                フィードバックの報告を続けること <span class="bcp14">MAY</span> できます。<a href="#section-6-3" class="pilcrow">¶</a></p>
            <p id="section-6-4">プロキシ対象の UDP 上で動作するプロトコルが損失回復を使用する場合（例: <span>[<a href="#RFC9000"
                        class="xref">QUIC</a>]</span>）、そして基盤となる HTTP 接続が TCP
                上で動作する場合、プロキシされたトラフィックは少なくとも二重のネストされた損失回復機構を被ります。これは両者が同じデータを独立に再送することがあり得るため、性能を低下させる可能性があります。これを避けるため、UDP
                プロキシングは QUIC DATAGRAM フレームを利用できるように HTTP/3 上で実施すること <span class="bcp14">SHOULD</span> です。<a
                    href="#section-6-4" class="pilcrow">¶</a></p>
            <div id="mtu-considerations">
                <section id="section-6.1">
                    <h3 id="name-mtu-considerations">
                        <a href="#section-6.1" class="section-number selfRef">6.1. </a><a
                            href="#name-mtu-considerations" class="section-name selfRef">MTU に関する考慮</a>
                    </h3>
                    <p id="section-6.1-1">QUIC Datagram 拡張（<span>[<a href="#RFC9221"
                                class="xref">QUIC-DGRAM</a>]</span>）を使用する HTTP/3 を利用する場合、UDP ペイロードは QUIC DATAGRAM
                        フレームで送信されます。それらは断片化できないため、QUIC 接続設定とパス MTU（PMTU）によって決まる長さまでのペイロードしか運べません。UDP プロキシが QUIC DATAGRAM
                        フレームを使用しており、ターゲットから受信した UDP ペイロードが QUIC DATAGRAM フレームに収まらない場合、UDP プロキシはその UDP ペイロードを DATAGRAM
                        カプセル内で送信すべきではありません（<span class="bcp14">SHOULD NOT</span>）。これは DPLPMTUD
                        のような手法が依存するエンドツーエンドの信頼性の低さという特性を損なうためです。この状況では、UDP プロキシはその UDP ペイロードを破棄し、ターゲットに対して ICMP Packet
                        Too Big メッセージを送信すること <span class="bcp14">SHOULD</span> します；参照: <span><a
                                href="https://www.rfc-editor.org/rfc/rfc4443#section-3.2" class="relref">Section 3.2</a>
                            of [<a href="#RFC4443" class="xref">ICMP6</a>]</span>。<a href="#section-6.1-1"
                            class="pilcrow">¶</a>
                    </p>
                </section>
            </div>
            <div id="tunneling-of-ecn-marks">
                <section id="section-6.2">
                    <h3 id="name-tunneling-of-ecn-marks">
                        <a href="#section-6.2" class="section-number selfRef">6.2. </a><a
                            href="#name-tunneling-of-ecn-marks" class="section-name selfRef">ECN マークのトンネリング</a>
                    </h3>
                    <p id="section-6.2-1">UDP プロキシングは IP-in-IP トンネルを作成しないため、内側と外側の IP ヘッダ間で ECN マークを転送することに関する <span>[<a
                                href="#RFC6040" class="xref">ECN-TUNNEL</a>]</span> の指針は適用されません。UDP プロキシングトンネルには内側の IP
                        ヘッダが存在しません。<a href="#section-6.2-1" class="pilcrow">¶</a>
                    </p>
                    <p id="section-6.2-2">本仕様では、UDP プロキシングのクライアントは UDP プロキシがターゲットに送る UDP パケットの ECN
                        コードポイントを制御する能力を持たないこと、また UDP プロキシがターゲットから UDP プロキシへ送られてくる各 UDP パケットのマーキングを伝達できないことに注意してください。<a
                            href="#section-6.2-2" class="pilcrow">¶</a></p>
                    <p id="section-6.2-3">UDP プロキシはターゲットから受信した UDP パケットの IP ヘッダ内の ECN ビットを無視しなければなりません（<span
                            class="bcp14">MUST</span>）。また、UDP プロキシがターゲットに送信する UDP パケットでは ECN ビットを Not-ECT
                        に設定しなければなりません（<span class="bcp14">MUST</span>）。これらはクライアントと UDP プロキシ間で送信されるパケットの ECN
                        マーキングとは無関係です。<a href="#section-6.2-3" class="pilcrow">¶</a></p>
                </section>
            </div>
        </section>
    </div>
    <div id="security">
        <section id="section-7">
            <h2 id="name-security-considerations">
                <a href="#section-7" class="section-number selfRef">7. </a><a href="#name-security-considerations"
                    class="section-name selfRef">セキュリティに関する考慮事項</a>
            </h2>
            <p id="section-7-1">任意のクライアントが任意のターゲットへのトンネルを確立できることには重大なリスクがあります。これにより悪意ある者がトラフィックを送信し、それが UDP
                プロキシに帰属するように見える可能性があります。UDP プロキシをサポートする HTTP サーバーは、その使用を認証済みユーザーに限定すべきです。<a href="#section-7-1"
                    class="pilcrow">¶</a></p>
            <p id="section-7-2">受信リクエストの送信元 IP アドレスに基づいてアクセス制御を行うソフトウェアやネットワークの展開が存在します。たとえば、127.0.0.1
                から発生した場合に認証なしで設定変更を許すソフトウェアがあります。そのようなソフトウェアが UDP プロキシと同じホスト上、あるいは同じブロードキャストドメイン上で動作している可能性があります。プロキシ経由の
                UDP トラフィックは UDP プロキシのソース IP アドレスで受信されるため、そのソースアドレスがアクセス制御に使用されている場合、UDP プロキシングクライアントは UDP
                プロキシを用いて本来持たないアクセス特権をエスカレートできる可能性があります。このため、UDP プロキシは UDP プロキシ自身のアドレスや
                localhost、リンクローカル、マルチキャスト、ブロードキャストアドレスなどの脆弱なターゲットへの UDP プロキシング要求を拒否すべきです。UDP
                プロキシはそのような要求を拒否する際に、Proxy-Status の destination_ip_prohibited Proxy Error Type を使用できます（参照: <span><a
                        href="https://www.rfc-editor.org/rfc/rfc9209#section-2.3.5" class="relref">Section 2.3.5</a> of
                    [<a href="#RFC9209" class="xref">PROXY-STATUS</a>]</span>）。<a href="#section-7-2"
                    class="pilcrow">¶</a></p>
            <p id="section-7-3">UDP プロキシはインフラとして濫用される点で TCP CONNECT
                プロキシと多くの類似性があります。どちらも攻撃者の送信元アドレスを攻撃対象から隠すことができます。ステートレスなボリューム型攻撃（例：TCP SYN フラッドや UDP
                フラッド）の場合、両タイプのプロキシはトラフィックをターゲットに渡します。ステートフルなボリューム型攻撃（例：HTTP フラッディング）が TCP CONNECT プロキシ経由で送られる場合、ターゲットが
                TCP SYN-ACK で応答しない限りプロキシはデータを送信しません。ターゲットへの経路がフラッドされると、TCP CONNECT プロキシはターゲットからの応答を受け取らなくなり、送信を停止します。UDP
                はターゲットとの間で共有状態を確立しないため、UDP プロキシはそのような状況でもターゲットへの送信を続ける可能性があります。UDP プロキシはターゲットからの応答を観測するまで転送する UDP
                パケット数を制限することによりある程度の保護を提供できるかもしれませんが、プロトコルがオープンな UDP
                ポートを標的とする場合には限定的な保護にしかなりません。そのようなパケット制限は正当なトラフィックにも問題を引き起こす可能性があります。<a href="#section-7-3"
                    class="pilcrow">¶</a></p>
            <p id="section-7-4"><span><a href="https://www.rfc-editor.org/rfc/rfc9297#section-4" class="relref">Section
                        4</a> of [<a href="#RFC9297" class="xref">HTTP-DGRAM</a>]</span> に記載されたセキュリティ考慮事項もここに適用されます。IP
                パケットを UDP 上でトンネルできるため、<span>[<a href="#RFC6169" class="xref">TUNNEL-SECURITY</a>]</span>
                のガイダンスが適用される場合があります。<a href="#section-7-4" class="pilcrow">¶</a>
            </p>
        </section>
    </div>
    <div id="iana">
        <section id="section-8">
            <h2 id="name-iana-considerations">
                <a href="#section-8" class="section-number selfRef">8. </a><a href="#name-iana-considerations"
                    class="section-name selfRef">IANA に関する考慮事項</a>
            </h2>
            <div id="iana-upgrade">
                <section id="section-8.1">
                    <h3 id="name-http-upgrade-token">
                        <a href="#section-8.1" class="section-number selfRef">8.1. </a><a
                            href="#name-http-upgrade-token" class="section-name selfRef">HTTP Upgrade トークン</a>
                    </h3>
                    <p id="section-8.1-1">IANA は "connect-udp" を &lt;<span><a
                                href="https://www.iana.org/assignments/http-upgrade-tokens">https://www.iana.org/assignments/http-upgrade-tokens</a></span>&gt;
                        にある "HTTP Upgrade Tokens" レジストリに登録しました。<a href="#section-8.1-1" class="pilcrow">¶</a></p>
                    <span class="break"></span>
                    <dl class="dlCompact dlParallel" id="section-8.1-2">
                        <dt id="section-8.1-2.1">Value:</dt>
                        <dd style="margin-left: 1.5em" id="section-8.1-2.2">
                            <p id="section-8.1-2.2.1">connect-udp<a href="#section-8.1-2.2.1" class="pilcrow">¶</a></p>
                        </dd>
                        <dd class="break"></dd>
                        <dt id="section-8.1-2.3">Description:</dt>
                        <dd style="margin-left: 1.5em" id="section-8.1-2.4">
                            <p id="section-8.1-2.4.1">UDP ペイロードのプロキシ<a href="#section-8.1-2.4.1" class="pilcrow">¶</a>
                            </p>
                        </dd>
                        <dd class="break"></dd>
                        <dt id="section-8.1-2.5">Expected Version Tokens:</dt>
                        <dd style="margin-left: 1.5em" id="section-8.1-2.6">
                            <p id="section-8.1-2.6.1">None<a href="#section-8.1-2.6.1" class="pilcrow">¶</a></p>
                        </dd>
                        <dd class="break"></dd>
                        <dt id="section-8.1-2.7">Reference:</dt>
                        <dd style="margin-left: 1.5em" id="section-8.1-2.8">
                            <p id="section-8.1-2.8.1">RFC 9298<a href="#section-8.1-2.8.1" class="pilcrow">¶</a></p>
                        </dd>
                        <dd class="break"></dd>
                    </dl>
                </section>
            </div>
            <div id="iana-uri">
                <section id="section-8.2">
                    <h3 id="name-well-known-uri">
                        <a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-well-known-uri"
                            class="section-name selfRef">Well-Known URI</a>
                    </h3>
                    <p id="section-8.2-1">IANA は "masque" を &lt;<span><a
                                href="https://www.iana.org/assignments/well-known-uris">https://www.iana.org/assignments/well-known-uris</a></span>&gt;
                        にある "Well-Known URIs" レジストリに登録しました。<a href="#section-8.2-1" class="pilcrow">¶</a></p>
                    <span class="break"></span>
                    <dl class="dlCompact dlParallel" id="section-8.2-2">
                        <dt id="section-8.2-2.1">URI Suffix:</dt>
                        <dd style="margin-left: 1.5em" id="section-8.2-2.2">
                            <p id="section-8.2-2.2.1">masque<a href="#section-8.2-2.2.1" class="pilcrow">¶</a></p>
                        </dd>
                        <dd class="break"></dd>
                        <dt id="section-8.2-2.3">Change Controller:</dt>
                        <dd style="margin-left: 1.5em" id="section-8.2-2.4">
                            <p id="section-8.2-2.4.1">IETF<a href="#section-8.2-2.4.1" class="pilcrow">¶</a></p>
                        </dd>
                        <dd class="break"></dd>
                        <dt id="section-8.2-2.5">Reference:</dt>
                        <dd style="margin-left: 1.5em" id="section-8.2-2.6">
                            <p id="section-8.2-2.6.1">RFC 9298<a href="#section-8.2-2.6.1" class="pilcrow">¶</a></p>
                        </dd>
                        <dd class="break"></dd>
                        <dt id="section-8.2-2.7">Status:</dt>
                        <dd style="margin-left: 1.5em" id="section-8.2-2.8">
                            <p id="section-8.2-2.8.1">permanent<a href="#section-8.2-2.8.1" class="pilcrow">¶</a></p>
                        </dd>
                        <dd class="break"></dd>
                        <dt id="section-8.2-2.9">Related Information:</dt>
                        <dd style="margin-left: 1.5em" id="section-8.2-2.10">
                            <p id="section-8.2-2.10.1">"/.well-known/masque/udp/" というパスプレフィックスで識別されるすべてのリソースを含みます<a
                                    href="#section-8.2-2.10.1" class="pilcrow">¶</a></p>
                        </dd>
                        <dd class="break"></dd>
                    </dl>
                </section>
            </div>
        </section>
    </div>
    <section id="section-9">
        <h2 id="name-references">
            <a href="#section-9" class="section-number selfRef">9. </a><a href="#name-references"
                class="section-name selfRef">参考文献</a>
        </h2>
        <section id="section-9.1">
            <h3 id="name-normative-references">
                <a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-normative-references"
                    class="section-name selfRef">規範的参考文献</a>
            </h3>
            <dl class="references">
                <dt id="RFC2234">[ABNF]</dt>
                <dd>
                    <span class="refAuthor">Crocker, D., Ed.</span> and <span class="refAuthor">P. Overell</span>, <span
                        class="refTitle">"Augmented BNF for Syntax Specifications: ABNF"</span>, <span
                        class="seriesInfo">RFC 2234</span>, <span class="seriesInfo">DOI 10.17487/RFC2234</span>, <time
                        datetime="1997-11" class="refDate">November 1997</time>, <span>&lt;<a
                            href="https://www.rfc-editor.org/info/rfc2234">https://www.rfc-editor.org/info/rfc2234</a>&gt;</span>.
                </dd>
                <dd class="break"></dd>
                <dt id="RFC3168">[ECN]</dt>
                <dd>
                    <span class="refAuthor">Ramakrishnan, K.</span>, <span class="refAuthor">Floyd, S.</span>, and <span
                        class="refAuthor">D. Black</span>, <span class="refTitle">"The Addition of Explicit Congestion
                        Notification (ECN) to IP"</span>, <span class="seriesInfo">RFC 3168</span>, <span
                        class="seriesInfo">DOI 10.17487/RFC3168</span>, <time datetime="2001-09"
                        class="refDate">September 2001</time>, <span>&lt;<a
                            href="https://www.rfc-editor.org/info/rfc3168">https://www.rfc-editor.org/info/rfc3168</a>&gt;</span>.
                </dd>
                <dd class="break"></dd>
                <!-- The rest of the reference list remains unchanged -->
            </dl>
        </section>
        <section id="section-9.2">
            <h3 id="name-informative-references">
                <a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-informative-references"
                    class="section-name selfRef">参考資料</a>
            </h3>
            <dl class="references">
                <dt id="RFC4787">[BEHAVE]</dt>
                <dd>
                    <span class="refAuthor">Audet, F., Ed.</span> and <span class="refAuthor">C. Jennings</span>, <span
                        class="refTitle">"Network Address Translation (NAT) Behavioral Requirements for Unicast
                        UDP"</span>, <span class="seriesInfo">BCP 127</span>, <span class="seriesInfo">RFC 4787</span>,
                    <span class="seriesInfo">DOI 10.17487/RFC4787</span>, <time datetime="2007-01"
                        class="refDate">January 2007</time>, <span>&lt;<a
                            href="https://www.rfc-editor.org/info/rfc4787">https://www.rfc-editor.org/info/rfc4787</a>&gt;</span>.
                </dd>
                <dd class="break"></dd>
                <!-- The rest of the informative references remain unchanged -->
            </dl>
        </section>
    </section>
    <div id="acknowledgments">
        <section id="appendix-A">
            <h2 id="name-acknowledgments">
                <a href="#name-acknowledgments" class="section-name selfRef">謝辞</a>
            </h2>
            <p id="appendix-A-1">この文書は MASQUE ワーキンググループの成果物であり、著者は MASQUE
                に関わるすべての参加者に感謝します。本提案は多くの人々による先行作業に直接的または間接的に触発されました。特に <span>[<a href="#I-D.schwartz-httpbis-helium"
                        class="xref">HELIUM</a>]</span>（Ben Schwartz）、<span>[<a
                        href="#I-D.pardue-httpbis-http-network-tunnelling" class="xref">HiNT</a>]</span>（Lucas
                Pardue）、および著者によるオリジナルの MASQUE プロトコル <span>[<a href="#I-D.schinazi-masque"
                        class="xref">MASQUE-ORIGINAL</a>]</span> に感謝します。<a href="#appendix-A-1" class="pilcrow">¶</a>
            </p>
            <p id="appendix-A-2">著者は Eric Rescorla に HTTP メソッドを使用して UDP をプロキシするという提案を示唆してくれたことに感謝します。Mark Nottingham と
                Lucas Pardue は本書に多くの改善を提供してくれました。本書の拡張性設計は HTTP Datagrams デザインチーム（Alan Frindell、Alex Chernyakhovsky、Ben
                Schwartz、Eric Rescorla、Lucas Pardue、Marcus Ihlar、Martin Thomson、Mike Bishop、Tommy Pauly、Victor
                Vasiliev、および著者）による議論から生まれました。<a href="#appendix-A-2" class="pilcrow">¶</a></p>
        </section>
    </div>
    <div id="authors-addresses">
        <section id="appendix-B">
            <h2 id="name-authors-address">
                <a href="#name-authors-address" class="section-name selfRef">著者の連絡先</a>
            </h2>
            <address class="vcard">
                <div dir="auto" class="left"><span class="fn nameRole">David Schinazi</span></div>
                <div dir="auto" class="left"><span class="org">Google LLC</span></div>
                <div dir="auto" class="left"><span class="street-address">1600 Amphitheatre Parkway</span></div>
                <div dir="auto" class="left">
                    <span class="locality">Mountain View</span>, <span class="region">CA</span> <span
                        class="postal-code">94043</span>
                </div>
                <div dir="auto" class="left"><span class="country-name">United States of America</span></div>
                <div class="email">
                    <span>Email:</span>
                    <a href="mailto:dschinazi.ietf@gmail.com" class="email">dschinazi.ietf@gmail.com</a>
                </div>
            </address>
        </section>
    </div>
    <script>const toc = document.getElementById("toc");
        toc.querySelector("h2").addEventListener("click", e => {
            toc.classList.toggle("active");
        });
        toc.querySelector("nav").addEventListener("click", e => {
            toc.classList.remove("active");
        });
    </script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
</body>

</html>