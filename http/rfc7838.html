<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="ja-JP">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>RFC 7838 - HTTP の代替サービス</title>
    <script>
        function getMeta(rfcno, container) {
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "https://www.rfc-editor.org/rfc/rfc" + rfcno + ".json", true);
            xhr.onload = function (e) {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        var data = JSON.parse(xhr.response);

                        var cont = document.getElementById(container);
                        // empty the container
                        while (cont.firstChild) {
                            cont.removeChild(myNode.firstChild);
                        }

                        var c = data.status;
                        if (c) {
                            var bld = newElementWithText("b", c);
                            cont.appendChild(bld);
                        } else {
                            cont.appendChild(newElementWithText("i", "(document status unknown)"));
                        }

                        c = data.updated_by;
                        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
                            cont.appendChild(newElement("br"));
                            cont.appendChild(newText("Updated by: "));
                            appendRfcLinks(cont, c);
                        }

                        c = data.obsoleted_by;
                        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
                            cont.appendChild(newElement("br"));
                            cont.appendChild(newText("Obsoleted by: "));
                            appendRfcLinks(cont, c);
                        }

                        c = data.errata_url;
                        if (c) {
                            cont.appendChild(newElement("br"));
                            var link = newElementWithText("a", "errata");
                            link.setAttribute("href", c);
                            var errata = newElementWithText("i", "This document has ");
                            errata.appendChild(link);
                            errata.appendChild(newText("."));
                            cont.appendChild(errata);
                        }

                        cont.style.display = "block";
                    } else {
                        console.error(xhr.statusText);
                    }
                }
            };
            xhr.onerror = function (e) {
                console.error(xhr.status + " " + xhr.statusText);
            };
            xhr.send(null);
        }
        function appendRfcLinks(parent, updates) {
            var template = "https://www.rfc-editor.org/rfc/rfc{rfc}.html";
            for (var i = 0; i < updates.length; i++) {
                var rfc = updates[i].trim().toLowerCase();
                if (rfc.substring(0, 3) == "rfc") {
                    var no = parseInt(rfc.substring(3), 10);

                    var link = newElement("a");
                    link.setAttribute("href", template.replace("{rfc}", no));
                    link.appendChild(newText(no));
                    parent.appendChild(link);
                } else {
                    parent.appendChild(newText(rfc));
                }
                if (i != updates.length - 1) {
                    parent.appendChild(newText(", "));
                }
            }
        }

        // DOM helpers
        function newElement(name) {
            return document.createElement(name);
        }
        function newElementWithText(name, txt) {
            var e = document.createElement(name);
            e.appendChild(newText(txt));
            return e;
        }
        function newText(text) {
            return document.createTextNode(text);
        }
    </script>
    <script>
        function anchorRewrite() {
            map = { "OWS": "imported.abnf", "delta-seconds": "imported.abnf", "port": "imported.abnf", "quoted-string": "imported.abnf", "token": "imported.abnf", "uri-host": "imported.abnf" };
            if (window.location.hash.length >= 1) {
                var fragid = window.location.hash.substr(1);
                if (fragid) {
                    if (!document.getElementById(fragid)) {
                        var prefix = "rfc.";
                        var mapped = map[fragid];
                        if (mapped) {
                            window.location.hash = mapped;
                        } else if (fragid.indexOf("section-") == 0) {
                            window.location.hash = prefix + "section." + fragid.substring(8).replace("-", ".p.");
                        } else if (fragid.indexOf("appendix-") == 0) {
                            window.location.hash = prefix + "section." + fragid.substring(9).replace("-", ".p.");
                        } else if (fragid.indexOf("s-") == 0) {
                            var postfix = fragid.substring(2);
                            if (postfix.startsWith("abstract")) {
                                window.location.hash = prefix + postfix;
                            } else if (postfix.startsWith("note-")) {
                                window.location.hash = prefix + "note." + postfix.substring(5).replace("-", ".p.");
                            } else {
                                window.location.hash = prefix + "section." + postfix.replace("-", ".p.");
                            }
                        } else if (fragid.indexOf("p-") == 0) {
                            var r = fragid.substring(2);
                            var p = r.indexOf("-");
                            if (p >= 0) {
                                window.location.hash = prefix + "section." + r.substring(0, p) + ".p." + r.substring(p + 1);
                            }
                        }
                    }
                }
            }
        }
        window.addEventListener('hashchange', anchorRewrite);
        window.addEventListener('DOMContentLoaded', anchorRewrite);
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:type" content="article">
    <meta property="og:title" content="RFC7838">
    <meta property="og:description" content="HTTP Alternative Services">
    <meta property="og:url" content="https://httpwg.org/specs/rfc7838.html">
    <meta property="og:site_name" content="IETF HTTP Working Group Specifications">
    <meta property="og:image" content="https://httpwg.org/assets/favicon/apple-icon-180x180.png">
    <link rel="stylesheet" type="text/css"
        href="https://httpwg.org/assets/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <style type="text/css">
        body {
            padding-top: 80px;
            padding-bottom: 80px;
            position: relative;
        }

        .table.header th,
        .table.header td {
            border-top: none;
            padding: 0;
        }

        #sidebar {
            margin-top: -10px;
            height: 90%;
            overflow-y: auto;
            font-size: 90%;
        }

        #rfc\.meta {
            width: 40%;
            float: right
        }

        .toc ul {
            list-style: none;
        }

        .filename {
            color: rgb(119, 119, 119);
            font-size: 23px;
            font-weight: normal;
            height: auto;
            line-height: 23px;
        }

        dl {
            margin-left: 1em;
        }

        dl.dl-horizontal {
            margin-left: 0;
        }

        dl>dt {
            float: left;
            margin-right: 1em;
        }

        dl.nohang>dt {
            float: none;
        }

        dl>dd {
            margin-bottom: .5em;
        }

        dl.compact>dd {
            margin-bottom: 0em;
        }

        dl>dd>dl {
            margin-top: 0.5em;
            margin-bottom: 0em;
        }

        ul.empty {
            list-style-type: none;
        }

        ul.empty li {
            margin-top: .5em;
        }

        td.reference {
            padding-right: 1em;
            vertical-align: top;
        }

        .feedback {
            position: fixed;
            bottom: 5px;
            right: 5px;
        }

        .fbbutton {
            margin-left: 5px;
        }

        h1 a,
        h2 a,
        h3 a,
        h4 a,
        h5 a,
        h6 a {
            color: rgb(51, 51, 51);
        }

        span.tt {
            font: 11pt consolas, monospace;
            font-size-adjust: none;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="https://httpwg.org/assets/site.css">
    <link rel="Contents" href="#rfc.toc">
    <link rel="Author" href="#rfc.authors">
    <link rel="License" href="#rfc.copyrightnotice">
    <link rel="Chapter" title="1 Introduction" href="#rfc.section.1">
    <link rel="Chapter" title="2 Alternative Services Concepts" href="#rfc.section.2">
    <link rel="Chapter" title="3 The Alt-Svc HTTP Header Field" href="#rfc.section.3">
    <link rel="Chapter" title="4 The ALTSVC HTTP/2 Frame" href="#rfc.section.4">
    <link rel="Chapter" title="5 The Alt-Used HTTP Header Field" href="#rfc.section.5">
    <link rel="Chapter" title="6 The 421 (Misdirected Request) HTTP Status Code" href="#rfc.section.6">
    <link rel="Chapter" title="7 IANA Considerations" href="#rfc.section.7">
    <link rel="Chapter" title="8 Internationalization Considerations" href="#rfc.section.8">
    <link rel="Chapter" title="9 Security Considerations" href="#rfc.section.9">
    <link rel="Chapter" title="10 References" href="#rfc.section.10">
    <link rel="Appendix" title="Acknowledgements" href="#rfc.section.unnumbered-1">
    <link rel="Alternate" title="Plain Text Version" href="http://www.ietf.org/rfc/rfc7838.txt">
    <link rel="Help" title="RFC-Editor's Status Page" href="http://www.rfc-editor.org/info/rfc7838">
    <meta name="viewport" content="initial-scale=1">
    <meta name="generator"
        content="https://github.com/mnot/RFCBootstrap XSLT vendor: Saxonica http://www.saxonica.com/">
    <meta name="keywords" content="HTTP, ALPN, Alternative Services">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.creator" content="Nottingham, M.">
    <meta name="dcterms.creator" content="McManus, P.">
    <meta name="dcterms.creator" content="Reschke, J. F.">
    <meta name="dcterms.identifier" content="urn:ietf:rfc:7838">
    <meta name="dcterms.issued" content="2016-04">
    <meta name="dcterms.abstract"
        content="This document specifies 'Alternative Services' for HTTP, which allow an origin's resources to be authoritatively available at a separate network location, possibly accessed with a different protocol configuration.">
    <meta name="dcterms.isPartOf" content="urn:issn:2070-1721">
    <meta name="description"
        content="This document specifies 'Alternative Services' for HTTP, which allow an origin's resources to be authoritatively available at a separate network location, possibly accessed with a different protocol configuration.">
</head>

<body onload="getMeta(7838,'rfc.meta');">
    <nav class="navbar navbar-dark bg-dark d-print-none navbar-expand-lg fixed-top ps-3 pe-3" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapse"
                aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <a class="navbar-brand" href="https://httpwg.org/"><img src="https://httpwg.org/assets/http.svg"
                    height="23"></a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse">

            <div class="navbar-nav me-auto">

                <a class="nav-item ms-1 text-white" href="https://httpwg.org/specs/">📄 Documentation</a>

                <div class="dropdown ms-4">
                    <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Work in
                        Progress</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item"><a href="https://httpwg.org/http-extensions/">HTTP Extensions</a></li>
                        <li class="dropdown-item"><a
                                href="https://github.com/httpwg/admin/issues?q=is%3Aissue+is%3Aopen+label%3Aadoption">Future
                                Work</a></li>
                    </ul>
                </div>

                <div class="dropdown ms-4">
                    <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Participate</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item"><a href="https://httpwg.org/about/">About the HTTP Working Group</a>
                        </li>
                        <li class="divider"></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/CONTRIBUTING.html">Contribution Policy</a>
                        </li>
                        <li class="dropdown-item"><a href="http://datatracker.ietf.org/wg/httpbis/charter/">WG
                                Charter</a></li>
                        <li class="dropdown-item"><a href="http://lists.w3.org/Archives/Public/ietf-http-wg/">Group
                                Mailing List 📨</a></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/wg-materials/">Meeting Materials</a></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/admin/editors/">Document Editor
                                Resources</a></li>
                    </ul>
                </div>
            </div>

        </div>
    </nav>
    <div class="container" id="top">
        <div class="row">
            <div class="col-lg-4 order-last d-none d-lg-block" id="sidebar" role="navigation">
                <div class="navbar">
                    <div class="navbar-brand"><a href="#top"><strong>RFC </strong>7838</a></div><br clear="all">
                    <div class="">
                        <div class="toc ">
                            <ul>
                                <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#introduction">導入</a>
                                    <ul>
                                        <li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#notational-conventions">表記規約</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#alternative">代替サービスの概念</a>
                                    <ul>
                                        <li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#host_auth">ホストの認証</a></li>
                                        <li><a href="#rfc.section.2.2">2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#caching">代替サービスのキャッシュ</a></li>
                                        <li><a href="#rfc.section.2.3">2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#requiring-server-name-indication">サーバー名表示の要求</a></li>
                                        <li><a href="#rfc.section.2.4">2.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#switching">代替サービスの利用</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a href="#alt-svc">Alt-Svc HTTP
                                        ヘッダーフィールド</a>
                                    <ul>
                                        <li><a href="#rfc.section.3.1">3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#caching-alt-svc-header-field-values">Alt-Svc ヘッダーフィールド値のキャッシュ</a>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#frame">ALTSVC HTTP/2
                                        フレーム</a></li>
                                <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#indicator">Alt-Used HTTP
                                        ヘッダーフィールド</a></li>
                                <li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a href="#status">421 (Misdirected
                                        Request) HTTP ステータスコード</a></li>
                                <li><a href="#rfc.section.7">7.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-considerations">IANA
                                        の考慮事項</a>
                                    <ul>
                                        <li><a href="#rfc.section.7.1">7.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.section.7.1">ヘッダーフィールド登録</a></li>
                                        <li><a href="#rfc.section.7.2">7.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#alt-svc-frame-registration">ALTSVC HTTP/2 フレームタイプ</a></li>
                                        <li><a href="#rfc.section.7.3">7.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#iana.parameters">Alt-Svc パラメータ登録</a>
                                            <ul>
                                                <li><a href="#rfc.section.7.3.1">7.3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#parameter.registry.procedure">手続き</a></li>
                                                <li><a href="#rfc.section.7.3.2">7.3.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#parameter.registrations">登録</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.8">8.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#internationalization-considerations">国際化に関する考慮事項</a></li>
                                <li><a href="#rfc.section.9">9.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#security-considerations">セキュリティに関する考慮事項</a>
                                    <ul>
                                        <li><a href="#rfc.section.9.1">9.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#changing-ports">ポートの変更</a></li>
                                        <li><a href="#rfc.section.9.2">9.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#host_security">ホストの変更</a></li>
                                        <li><a href="#rfc.section.9.3">9.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#changing-protocols">プロトコルの変更</a></li>
                                        <li><a href="#rfc.section.9.4">9.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#tracking">代替サービスを利用するクライアントの追跡</a></li>
                                        <li><a href="#rfc.section.9.5">9.5.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#confusion-regarding-request-scheme">リクエストスキームに関する混乱</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.10">10.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references">参考文献</a>
                                    <ul>
                                        <li><a href="#rfc.section.10.1">10.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.references.1">規範的参考文献</a></li>
                                        <li><a href="#rfc.section.10.2">10.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.references.2">参考資料</a></li>
                                    </ul>
                                </li>
                                <li><a href="#acknowledgements">謝辞</a></li>
                                <li><a href="#rfc.authors">著者の連絡先</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-8 order-first main" role="main">
                <header>
                    <table class="table table-condensed header" id="rfc.headerblock">
                        <tbody>
                            <tr>
                                <td class="text-left">インターネット技術タスクフォース (IETF)</td>
                                <td class="text-right">M. Nottingham</td>
                            </tr>
                            <tr>
                                <td class="text-left">Request for Comments: 7838</td>
                                <td class="text-right">Akamai</td>
                            </tr>
                            <tr>
                                <td class="text-left">カテゴリー: 標準トラック</td>
                                <td class="text-right">P. McManus</td>
                            </tr>
                            <tr>
                                <td class="text-left">ISSN: 2070-1721</td>
                                <td class="text-right">Mozilla</td>
                            </tr>
                            <tr>
                                <td class="text-left"></td>
                                <td class="text-right">J. Reschke</td>
                            </tr>
                            <tr>
                                <td class="text-left"></td>
                                <td class="text-right">greenbytes</td>
                            </tr>
                            <tr>
                                <td class="text-left"></td>
                                <td class="text-right">2016年4月</td>
                            </tr>
                        </tbody>
                    </table>
                    <div id="rfc.title">
                        <h1>HTTP 代替サービス</h1>
                    </div>
                </header>
                <hr>
                <h2 id="rfc.abstract"><a href="#rfc.abstract">概要</a></h2>
                <div class="lead">
                    <div id="rfc.abstract.p.1">
                        <p>本書は HTTP
                            の「代替サービス」を規定します。これにより、オリジンのリソースを別のネットワーク上の場所で正規に公開でき、場合によっては異なるプロトコル構成でアクセスできるようになります。</p>
                    </div>
                </div>
                <aside id="rfc.meta" class="alert alert-info"></aside>
                <section id="rfc.status">
                    <h2><a href="#rfc.status">本メモの状態</a></h2>
                    <div id="rfc.boilerplate.1.p.1">
                        <p>これはインターネット標準トラックの文書です。</p>
                    </div>
                    <div id="rfc.boilerplate.1.p.2">
                        <p>この文書は Internet Engineering Task Force (IETF) の成果物です。IETF コミュニティの合意を表しています。公開審査を受け、Internet
                            Engineering Steering Group (IESG) によって公開が承認されています。インターネット標準に関するさらなる情報は <a
                                href="https://www.rfc-editor.org/rfc/rfc5741.html#section-2">RFC 5741 のセクション 2</a>
                            をご覧ください。
                        </p>
                    </div>
                    <div id="rfc.boilerplate.1.p.3">
                        <p>この文書の現状、訂正情報、およびフィードバックの送付方法に関する情報は <a
                                href="http://www.rfc-editor.org/info/rfc7838">http://www.rfc-editor.org/info/rfc7838</a>
                            で入手できます。
                        </p>
                    </div>
                </section>
                <section id="rfc.copyrightnotice">
                    <h2><a href="#rfc.copyrightnotice">Copyright Notice</a></h2>
                    <div id="rfc.boilerplate.2.p.1">
                        <p>Copyright (c) 2016 IETF Trust and the persons identified as the document authors. All rights
                            reserved.</p>
                    </div>
                    <div id="rfc.boilerplate.2.p.2">
                        <p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF
                            Documents (<a
                                href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in
                            effect on the date of publication of this document. Please review these documents carefully,
                            as they describe your rights and restrictions with respect to this document. Code Components
                            extracted from this document must include Simplified BSD License text as described in
                            Section 4.e of the Trust Legal Provisions and are provided without warranty as described in
                            the Simplified BSD License.</p>
                    </div>
                </section>
                <div class="toc d-lg-none">
                    <ul>
                        <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#introduction">導入</a>
                            <ul>
                                <li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#notational-conventions">表記規約</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#alternative">代替サービスの概念</a>
                            <ul>
                                <li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a href="#host_auth">ホスト認証</a>
                                </li>
                                <li><a href="#rfc.section.2.2">2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#caching">代替サービスのキャッシュ</a></li>
                                <li><a href="#rfc.section.2.3">2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#requiring-server-name-indication">サーバー名表示の要求</a>
                                </li>
                                <li><a href="#rfc.section.2.4">2.4.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#switching">代替サービスの利用</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a href="#alt-svc">Alt-Svc HTTP
                                ヘッダーフィールド</a>
                            <ul>
                                <li><a href="#rfc.section.3.1">3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#caching-alt-svc-header-field-values">Alt-Svc ヘッダーフィールド値のキャッシュ</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#frame">ALTSVC HTTP/2 フレーム</a>
                        </li>
                        <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#indicator">Alt-Used HTTP
                                ヘッダーフィールド</a></li>
                        <li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a href="#status">421 (Misdirected Request)
                                HTTP ステータスコード</a></li>
                        <li><a href="#rfc.section.7">7.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-considerations">IANA
                                の考慮事項</a>
                            <ul>
                                <li><a href="#rfc.section.7.1">7.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.section.7.1">ヘッダーフィールド登録</a></li>
                                <li><a href="#rfc.section.7.2">7.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#alt-svc-frame-registration">ALTSVC HTTP/2 フレームタイプ</a></li>
                                <li><a href="#rfc.section.7.3">7.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#iana.parameters">Alt-Svc パラメータ登録</a>
                                    <ul>
                                        <li><a href="#rfc.section.7.3.1">7.3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#parameter.registry.procedure">手続き</a></li>
                                        <li><a href="#rfc.section.7.3.2">7.3.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#parameter.registrations">登録</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.8">8.</a>&nbsp;&nbsp;&nbsp;<a
                                href="#internationalization-considerations">国際化に関する考慮事項</a></li>
                        <li><a href="#rfc.section.9">9.</a>&nbsp;&nbsp;&nbsp;<a
                                href="#security-considerations">セキュリティに関する考慮事項</a>
                            <ul>
                                <li><a href="#rfc.section.9.1">9.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#changing-ports">ポートの変更</a></li>
                                <li><a href="#rfc.section.9.2">9.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#host_security">ホストの変更</a></li>
                                <li><a href="#rfc.section.9.3">9.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#changing-protocols">プロトコルの変更</a></li>
                                <li><a href="#rfc.section.9.4">9.4.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#tracking">代替サービスを利用するクライアントの追跡</a></li>
                                <li><a href="#rfc.section.9.5">9.5.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#confusion-regarding-request-scheme">リクエストスキームに関する混乱</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.10">10.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references">参考文献</a>
                            <ul>
                                <li><a href="#rfc.section.10.1">10.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references.1">規範的参考文献</a></li>
                                <li><a href="#rfc.section.10.2">10.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references.2">参考資料</a></li>
                            </ul>
                        </li>
                        <li><a href="#acknowledgements">謝辞</a></li>
                        <li><a href="#rfc.authors">著者の連絡先</a></li>
                    </ul>
                </div>
                <section id="introduction">
                    <h2 id="rfc.section.1" class="np"><a href="#rfc.section.1">1.</a>&nbsp;<a
                            href="#introduction">導入</a></h2>
                    <div id="rfc.section.1.p.1">
                        <p>HTTP <a href="#RFC7230"><cite
                                    title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>
                            は、リソースの識別とその位置を同一視しています。言い換えれば、"http://" と "https://" の URI は、対象を識別するためにも、アクセスするためにも使われます。
                        </p>
                    </div>
                    <div id="rfc.section.1.p.2">
                        <p>場合によっては、HTTP において識別と場所を分離し、同じ識別子を維持しつつネットワーク上の別の場所でやり取りすることが望ましいことがあります。</p>
                    </div>
                    <div id="rfc.section.1.p.3">
                        <p>例えば: </p>
                        <ul>
                            <li>オリジンサーバーは、負荷が高いときやクライアントにより近いロケーションのサーバーを見つけたときに、クライアントを別のサーバーへリダイレクトしたい場合があります。</li>
                            <li>オリジンサーバーは、HTTP/2 <a href="#RFC7540"><cite
                                        title="Hypertext Transfer Protocol version 2">[RFC7540]</cite></a>
                                のような新しいプロトコル、または Transport Layer Security (TLS) <a href="#RFC5246"><cite
                                        title="The Transport Layer Security (TLS) Protocol Version 1.2">[RFC5246]</cite></a>
                                のような改善されたセキュリティを用いてリソースへのアクセスを提供したい場合があります。</li>
                            <li>オリジンサーバーは、運用上の理由から Server Name Indication (SNI)（<a
                                    href="https://www.rfc-editor.org/rfc/rfc6066.html#section-3">Section 3</a> of <a
                                    href="#RFC6066"><cite
                                        title="Transport Layer Security (TLS) Extensions: Extension Definitions">[RFC6066]</cite></a>）をサポートするクライアントなど、クライアントを機能別に分割したい場合があります。
                            </li>
                        </ul>
                    </div>
                    <div id="rfc.section.1.p.4">
                        <p>本仕様は HTTP における新しい概念「代替サービス（Alternative
                            Services）」を定義します。オリジンのリソースがネットワーク上の別の場所でも正規に利用可能であることをオリジンサーバーが指名できるようにします。セクション 2（<a
                                href="#alternative"
                                title="Alternative Services Concepts">代替サービスの概念</a>）では一般的なフレームワークを定義し、HTTP
                            ヘッダーフィールド（セクション 3、<a href="#alt-svc" title="The Alt-Svc HTTP Header Field">Alt-Svc
                                ヘッダーフィールド</a>）や HTTP/2 フレーム（セクション 4、<a href="#frame"
                                title="The ALTSVC HTTP/2 Frame">ALTSVC HTTP/2
                                フレーム</a>）を用いてそれらの存在を通知する具体的な仕組み、および代替サービスが使用されたことを示す方法（セクション 5、<a href="#indicator"
                                title="The Alt-Used HTTP Header Field">Alt-Used ヘッダーフィールド</a>）を定義します。</p>
                    </div>
                    <div id="rfc.section.1.p.5">
                        <p>また、誤った場所が使用された場合にオリジンサーバーまたはその指定された代替が権限を持たないことを示すために、ステータスコード 421 (Misdirected
                            Request)（セクション 6、<a href="#status"
                                title="The 421 (Misdirected Request) HTTP Status Code">421 (Misdirected Request) HTTP
                                ステータスコード</a>）を推奨します。</p>
                    </div>
                    <section id="notational-conventions">
                        <h3 id="rfc.section.1.1"><a href="#rfc.section.1.1">1.1.</a>&nbsp;<a
                                href="#notational-conventions">表記規約</a></h3>
                        <div id="rfc.section.1.1.p.1">
                            <p>この文書内のキーワード "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
                                "RECOMMENDED", "MAY", および "OPTIONAL" は、<a href="#RFC2119"><cite
                                        title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</cite></a>
                                に記載されているとおりに解釈されます。</p>
                        </div>
                        <div id="rfc.section.1.1.p.2" class="avoidbreakafter">
                            <p id="imported.abnf">この文書は、<a href="#RFC5234"><cite
                                        title="Augmented BNF for Syntax Specifications: ABNF">RFC5234</cite></a>
                                で定義され、<a href="#RFC7405"><cite
                                        title="Case-Sensitive String Support in ABNF">RFC7405</cite></a> によって更新された拡張
                                BNF（ABNF）と、<a
                                    href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#abnf.extension"
                                    title="ABNF List Extension: #rule">RFC7230 の Section 7 にある "#rule"
                                    拡張</a>を使用します。以下のルールは <a href="#RFC5234"><cite>RFC5234</cite></a>、<a
                                    href="#RFC7230"><cite>RFC7230</cite></a>、および <a
                                    href="#RFC7234"><cite>RFC7234</cite></a> に定義されています：</p>
                        </div>
                        <div id="rfc.figure.u.1">
                            <div>
                                <pre class="inline">OWS           = &lt;OWS, see <a href="#RFC7230"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>, <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#whitespace" title="Whitespace">Section 3.2.3</a>&gt;
delta-seconds = &lt;delta-seconds; see <a href="#RFC7234"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Caching">[RFC7234]</cite></a>, <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7234.html#delta-seconds" title="Delta Seconds">Section 1.2.1</a>&gt;
port          = &lt;port, see <a href="#RFC7230"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>, <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#uri" title="Uniform Resource Identifiers">Section 2.7</a>&gt;
quoted-string = &lt;quoted-string, see <a href="#RFC7230"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>, <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#field.components" title="Field Value Components">Section 3.2.6</a>&gt;
token         = &lt;token, see <a href="#RFC7230"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>, <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#field.components" title="Field Value Components">Section 3.2.6</a>&gt;
uri-host      = &lt;uri-host, see <a href="#RFC7230"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>, <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#uri" title="Uniform Resource Identifiers">Section 2.7</a>&gt;
</pre>
                            </div>
                        </div>
                    </section>
                </section>
                <section id="alternative">
                    <h2 id="rfc.section.2"><a href="#rfc.section.2">2.</a>&nbsp;<a href="#alternative">代替サービスの概念</a>
                    </h2>
                    <div id="rfc.section.2.p.1">
                        <p>本仕様は HTTP における新しい概念 "<dfn>代替サービス（Alternative Service）</dfn>" を定義します。オリジン <a
                                href="#RFC6454"><cite title="The Web Origin Concept">[RFC6454]</cite></a>
                            が異なるプロトコル/ホスト/ポートの組み合わせを通じてアクセス可能なリソースを持つ場合、そのオリジンは代替サービスを持つとされます。</p>
                    </div>
                    <div id="rfc.section.2.p.2">
                        <p>代替サービスは、ネットワーク上の別の場所でオリジンサーバーのリソースとやり取りするために使用でき、場合によっては異なるプロトコル構成を使用することがあります。代替サービスは、<a
                                href="#RFC7230"><cite
                                    title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>
                            の意味で、オリジンのリソースについて権威を持つものと見なされます（Section 9.1 参照）。</p>
                    </div>
                    <div id="rfc.figure.u.2">
                        <p>例えば、あるオリジン：</p>
                        <div>
                            <pre class="text">("http", "www.example.com", "80")
</pre>
                        </div>
                    </div>
                    <div id="rfc.figure.u.3">
                        <p>が、以下の代替サービスでもリソースにアクセスできると宣言するかもしれません：</p>
                        <div>
                            <pre class="text">("h2", "new.example.com", "81")
</pre>
                        </div>
                    </div>
                    <div id="rfc.section.2.p.3">
                        <p>代替サービスはその性質上、オリジンの粒度で明示的に適用されます。オリジン内のリソースに対して選択的に適用することはできません。</p>
                    </div>
                    <div id="rfc.section.2.p.4">
                        <p>代替サービスは、あるリソースのオリジンを置き換えたり変更したりするものではありません。一般に、アクセス機構より上位のソフトウェアには見えません。代替サービスは基本的に代替のルーティング情報であり、DNS
                            の CNAME や SRV レコードが名前解決レベルでルーティング情報を定義するのと同様に、オリジンに到達するために使用できます。各オリジンはこれらのルートの集合にマップされます —
                            デフォルトのルートはオリジン自体から導出され、他のルートは代替サービス情報に基づいて導入されます。</p>
                    </div>
                    <div id="rfc.section.2.p.5">
                        <p>さらに、代替サービスタプルの最初の要素はオリジンの "scheme"
                            コンポーネントとは異なります。これはより具体的であり、使用されるプロトコルの主要なバージョンだけでなく、そのプロトコルの通信オプションも識別する可能性があります。</p>
                    </div>
                    <div id="rfc.section.2.p.6">
                        <p>これは、代替サービスを使用するクライアントがリソースを取得するためにホスト、ポート、およびプロトコルを変更できることを意味しますが、これらの変更は HTTP
                            を使用しているアプリケーションに伝播してはなりません（<em class="bcp14">MUST NOT</em>）。その観点から、アクセスされている URI
                            およびそこから派生するすべての情報（scheme、host、port）は従前と同じままです。</p>
                    </div>
                    <div id="rfc.section.2.p.7">
                        <p>重要なことに、これにはセキュリティコンテキストも含まれます。特に、TLS <a href="#RFC5246"><cite
                                    title="The Transport Layer Security (TLS) Protocol Version 1.2">[RFC5246]</cite></a>
                            を用いて認証が行われる場合、代替サービスは代替のホスト名ではなくオリジンのホスト名の証明書を提示する必要があります。同様に、Host ヘッダーフィールド（<a
                                href="#RFC7230"><cite
                                    title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>、Section
                            5.4）は代替サービスではなくオリジンから導出されます（CNAME を使用する場合と同様です）。</p>
                    </div>
                    <div id="rfc.section.2.p.8">
                        <p>これらの変更はデバッグツールやコンソール等で表示される場合があります（<em class="bcp14">MAY</em>）。</p>
                    </div>
                    <div id="rfc.section.2.p.9">
                        <p>形式的には、代替サービスは以下の組み合わせで識別されます：</p>
                        <ul>
                            <li>Application Layer Protocol Negotiation (ALPN) のプロトコル名（<a href="#RFC7301"><cite
                                        title="Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension">[RFC7301]</cite></a>
                                に従う）</li>
                            <li>ホスト（<a href="#RFC3986"><cite
                                        title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</cite></a>、Section
                                3.2.2 に従う）</li>
                            <li>ポート（<a href="#RFC3986"><cite
                                        title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</cite></a>、Section
                                3.2.3 に従う）</li>
                        </ul>
                    </div>
                    <div id="rfc.section.2.p.10">
                        <p>ALPN プロトコル名は、代替サービスが使用するアプリケーションプロトコルまたはプロトコル群を識別するために使われます。本仕様の目的上、ALPN プロトコル名は定義で別段の記載がない限り
                            TLS をプロトコル群に暗黙的に含むものと見なされます。特に、ALPN 名 "http/1.1"（RFC7301 の Section 6 に登録）は TLS 上の HTTP/1.1
                            を識別します。</p>
                    </div>
                    <div id="rfc.section.2.p.11">
                        <p>さらに、各代替サービスは有効寿命（秒単位）を持たなければなりません（<a href="#caching"
                                title="Alternative Service Caching">Section 2.2</a>参照）。</p>
                    </div>
                    <div id="rfc.section.2.p.12">
                        <p>クライアントがオリジンに関連する代替サービスを発見する方法は複数あります。本書では二つの仕組みを説明します：Alt-Svc ヘッダーフィールド（セクション 3）と ALTSVC
                            HTTP/2 フレームタイプ（セクション 4）。</p>
                    </div>
                    <div id="rfc.section.2.p.13">
                        <p>このセクションの残りは、発見方法に関係なく代替サービスに共通する要件を説明します。</p>
                    </div>
                    <section id="host_auth">
                        <h3 id="rfc.section.2.1"><a href="#rfc.section.2.1">2.1.</a>&nbsp;<a href="#host_auth">ホスト認証</a>
                        </h3>
                        <div id="rfc.section.2.1.p.1">
                            <p>クライアントは代替サービスがオリジン全体の管理下にあり、当該オリジンに対して有効であるという合理的な保証を持つこと（<em
                                    class="bcp14">MUST</em>）が必要です。これはセクション 9.2 の攻撃を軽減します。</p>
                        </div>
                        <div id="rfc.section.2.1.p.2">
                            <p>本書の目的上、「合理的な保証」は RFC2818 に定義された証明書検証を含む TLS
                                ベースのプロトコルの使用によって確立できます。クライアントは合理的な保証を確立するために追加の基準を課すことができます（<em class="bcp14">MAY</em>）。
                            </p>
                        </div>
                        <div id="rfc.section.2.1.p.3">
                            <p>例えば、オリジンのホストが "www.example.com" で代替が "other.example.com"、プロトコルが "h2" の場合に、提示された証明書が
                                "www.example.com" に対して有効であればクライアントは代替を使用できます。しかし、どちらかが "h2c"
                                で提供されている場合、当該プロトコルではオリジンと代替の関係を確立する手段がないためクライアントはそれを使用できません。</p>
                        </div>
                    </section>
                    <section id="caching">
                        <h3 id="rfc.section.2.2"><a href="#rfc.section.2.2">2.2.</a>&nbsp;<a
                                href="#caching">代替サービスのキャッシュ</a></h3>
                        <div id="rfc.section.2.2.p.1">
                            <p>代替サービスを発見するためのメカニズムは、それらに対して有効寿命を関連付けます。例えば Alt-Svc ヘッダーフィールドは "ma" パラメータを使用します。</p>
                        </div>
                        <div id="rfc.section.2.2.p.2">
                            <p>クライアントは、代替サービス情報が新鮮である限りいつでもオリジンの代わりに代替サービスを使用することができます（詳細は <a href="#switching"
                                    title="Using Alternative Services">Section 2.4</a> を参照）。</p>
                        </div>
                        <div id="rfc.section.2.2.p.3">
                            <p>代替サービスへの既存の接続を持つクライアントは、その有効寿命が切れてもそれを使い続ける必要はありません。キャッシュ機構は新しい接続を確立するために代替サービスを使用できる期間を制限するためのものであり、既存の接続の利用を制限するものではありません。
                            </p>
                        </div>
                        <div id="rfc.section.2.2.p.4">
                            <p>代替サービスは当該オリジンについて完全に権威的であり、キャッシュされた代替サービスエントリをクリアまたは更新し、有効寿命を延長し、オリジンサーバーが持つその他の権限を行使できます。
                            </p>
                        </div>
                        <div id="rfc.section.2.2.p.5">
                            <p>代替サービスがクライアントを最適なサーバーへ誘導するために使用される場合、ネットワーク構成の変化によりキャッシュされた値が最適でなくなることがあります。そのため、クライアントはネットワーク状態に関する情報が利用可能なときに、"persist"
                                フラグに値 "1" を持たないすべての代替サービスをキャッシュから削除することを推奨します（<em class="bcp14">SHOULD</em>）。</p>
                        </div>
                    </section>
                    <section id="requiring-server-name-indication">
                        <h3 id="rfc.section.2.3"><a href="#rfc.section.2.3">2.3.</a>&nbsp;<a
                                href="#requiring-server-name-indication">サーバー名表示の要求</a></h3>
                        <div id="rfc.section.2.3.p.1">
                            <p>クライアントは SNI（TLS Server Name Indication）をサポートしていない限り、TLS ベースの代替サービスを使用してはなりません（<em
                                    class="bcp14">MUST NOT</em>）。これは代替サービスホスト上の IP アドレスの節約を助けます。</p>
                        </div>
                        <div id="rfc.section.2.3.p.2">
                            <p>TLS によって TLS クライアントが提供する SNI 情報は代替ではなくオリジンのものになる点に注意してください（Host ヘッダーフィールドの値も同様です）。</p>
                        </div>
                    </section>
                    <section id="switching">
                        <h3 id="rfc.section.2.4"><a href="#rfc.section.2.4">2.4.</a>&nbsp;<a
                                href="#switching">代替サービスの利用</a></h3>
                        <div id="rfc.section.2.4.p.1">
                            <p>代替サービスはその性質上 <em class="bcp14">OPTIONAL</em>
                                です：クライアントはそれらを使用する必要はありません。ただし、サーバーが代替サービスを利用する際にクライアントが予測可能な動作をすることは、負荷分散のような目的に資するため有利です。
                            </p>
                        </div>
                        <div id="rfc.section.2.4.p.2">
                            <p>したがって、本仕様をサポートするクライアントが代替サービスを認識した場合、代替サービス情報が新鮮であり（<a href="#caching"
                                    title="Alternative Service Caching">Section
                                    2.2</a>）、代替サービスのプロトコルのセキュリティ特性が既存の接続と比較して望ましい場合、クライアントは関連するオリジンへのすべてのリクエストに対してその代替サービスを利用すべきです（<em
                                    class="bcp14">SHOULD</em>）。有効な代替サービスはその後オリジンと同様に扱われます。これには代替サービスを広告する能力も含まれます。</p>
                        </div>
                        <div id="rfc.section.2.4.p.3">
                            <p>クライアントが複数の代替サービスを認識した場合、セキュリティ特性を考慮しつつ自身の基準に従って最適なものを選択します。例えば、オリジンが複数のバージョンの HTTP
                                をサポートしていることを通知するために複数の代替サービスを広告することがあります。</p>
                        </div>
                        <div id="rfc.section.2.4.p.4">
                            <p>あるリクエストのためにプロキシを使用するように設定されたクライアントは、そのリクエストのために直接代替サービスに接続してはならず（<em class="bcp14">SHOULD
                                    NOT</em>）、代わりにそのプロキシを経由してルーティングすべきです。</p>
                        </div>
                        <div id="rfc.section.2.4.p.5">
                            <p>クライアントがリクエストのために代替サービスを使用する場合、Alt-Used ヘッダーフィールド（セクション 5）を使用してサーバーにこれを通知できます。</p>
                        </div>
                        <div id="rfc.section.2.4.p.6">
                            <p>クライアントは既存の接続上のリクエストをブロックする必要はありません；代替接続が確立されるまで既存の接続を使用できます。ただし、既存接続のセキュリティ特性が弱い場合（例えば平文の
                                HTTP/1.1）には、新しい接続が完全に利用可能になるまでブロックして情報漏洩を避ける方が理にかなっていることがあります。</p>
                        </div>
                        <div id="rfc.section.2.4.p.7">
                            <p>さらに、代替サービスへの接続が失敗するか応答しない場合、クライアントはオリジンまたは他の代替サービスへフォールバックすることができます（<em
                                    class="bcp14">MAY</em>）。ただし、これはダウングレード攻撃の原因となり得るため、代替サービスの強化されたセキュリティ特性を失うことになります。代替サービスへの接続が期待されたプロトコルをネゴシエートしない場合（例えば
                                ALPN が h2 をネゴシエートしない、または h2c への Upgrade 要求が受け入れられない場合）、その接続は失敗したものとみなさなければなりません（<em
                                    class="bcp14">MUST</em>）。</p>
                        </div>
                    </section>
                </section>
                <section id="alt-svc">
                    <h2 id="rfc.section.3"><a href="#rfc.section.3">3.</a>&nbsp;<a href="#alt-svc">Alt-Svc HTTP
                            ヘッダーフィールド</a></h2>
                    <div id="rfc.section.3.p.1">
                        <p>HTTP(S) オリジンサーバーはレスポンスに Alt-Svc ヘッダーフィールドを追加することで、クライアントに代替サービスの利用可能性を通知できます。</p>
                    </div>
                    <div id="rfc.figure.u.4">
                        <div>
                            <pre class="inline">Alt-Svc       = clear / 1#alt-value
clear         = %s"clear"; "clear", case-sensitive
alt-value     = alternative *( OWS ";" OWS parameter )
alternative   = protocol-id "=" alt-authority
protocol-id   = &lt;a href="#imported.abnf" class="smpl"&gt;token&lt;/a&gt; ; percent-encoded ALPN protocol name
alt-authority = &lt;a href="#imported.abnf" class="smpl"&gt;quoted-string&lt;/a&gt; ; containing [ &lt;a href="#imported.abnf" class="smpl"&gt;uri-host&lt;/a&gt; ] ":" &lt;a href="#imported.abnf" class="smpl"&gt;port&lt;/a&gt;
parameter     = &lt;a href="#imported.abnf" class="smpl"&gt;token&lt;/a&gt; "=" ( &lt;a href="#imported.abnf" class="smpl"&gt;token&lt;/a&gt; / &lt;a href="#imported.abnf" class="smpl"&gt;quoted-string&lt;/a&gt; )
</pre>
                        </div>
                    </div>
                    <div id="rfc.section.3.p.2">
                        <p>フィールド値は、各々が一つの代替サービスを示す値のリスト、またはキーワード "clear" のいずれかで構成されます。</p>
                    </div>
                    <div id="rfc.section.3.p.3">
                        <p>特殊値 "clear" を含むフィールド値は、オリジンがそのオリジンに対するすべての代替を無効化することを要求していることを示します（同じレスポンスに "clear"
                            と代替サービスが両方含まれている場合のような、無効な応答を含む場合も含む）。</p>
                    </div>
                    <div id="rfc.section.3.p.4">
                        <p>ALPN プロトコル名はオクテット列であり、形式に関する追加の制約はありません。トークンで許可されないオクテット（RFC7230 Section 3.2.6 参照）は、RFC3986
                            Section 2.1 に従ってパーセントエンコーディングされなければなりません。したがって、パーセント文字 "%"（16 進で
                            25）を表すオクテットもパーセントエンコードされなければなりません。</p>
                    </div>
                    <div id="rfc.section.3.p.5">
                        <p>任意の ALPN プロトコル名を正確に一つの方法で表現するために、以下の追加制約が適用されます：</p>
                        <ol>
                            <li>ALPN プロトコル名内のオクテットは "%" を除きトークン文字として有効であればパーセントエンコードしてはなりません、</li>
                            <li>パーセントエンコーディングを使用する場合は大文字の16進数字を使用しなければなりません。</li>
                        </ol>
                    </div>
                    <div id="rfc.section.3.p.6">
                        <p>これらの制約により、受信者は単純な文字列比較でプロトコル識別子を照合できます。</p>
                    </div>
                    <div id="rfc.section.3.p.7">
                        <p>"alt-authority" コンポーネントは <em class="bcp14">OPTIONAL</em> な uri-host（RFC3986 Section 3.2.2 の
                            "host"）とコロン（":"）とポート番号で構成されます。</p>
                    </div>
                    <div id="rfc.figure.u.5">
                        <p>例えば：</p>
                        <div>
                            <pre class="text">Alt-Svc: h2=":8000"
</pre>
                        </div>
                        <p>これは同一ホスト上のポート 8000 で "h2" プロトコル（RFC7540）を示します。</p>
                    </div>
                    <div id="rfc.figure.u.6">
                        <p>ホストを変更する例：</p>
                        <div>
                            <pre class="text">Alt-Svc: h2="new.example.org:80"
</pre>
                        </div>
                        <p>これはホスト "new.example.org" のポート 80 で "h2" プロトコルを示します。":" は "token" で許可されないため "quoted-string"
                            構文を使用する必要がある点に注意してください。</p>
                    </div>
                    <div id="rfc.table.u.1" class="table table-condensed table-striped">
                        <p>プロトコル名のエスケープ例：</p>
                        <table class="table table-condensed table-striped all tleft">
                            <thead>
                                <tr>
                                    <th>ALPN プロトコル名</th>
                                    <th>protocol-id</th>
                                    <th>注記</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="text-left">h2</td>
                                    <td class="text-left">h2</td>
                                    <td class="text-left">エスケープ不要</td>
                                </tr>
                                <tr>
                                    <td class="text-left">w=x:y#z</td>
                                    <td class="text-left">w%3Dx%3Ay#z</td>
                                    <td class="text-left">"=" と ":" をエスケープ</td>
                                </tr>
                                <tr>
                                    <td class="text-left">x%y</td>
                                    <td class="text-left">x%25y</td>
                                    <td class="text-left">"%" をエスケープする必要あり</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="rfc.section.3.p.8">
                        <p>Alt-Svc は任意の HTTP レスポンスメッセージで現れてよく、ステータスコードに依存しません。Alt-Svc
                            を受け取った受信者はこれを無視することができます（特定の状況では無視が要求されます；詳しくはセクション <a href="#host_auth"
                                title="Host Authentication">2.1</a> と <a href="#status"
                                title="The 421 (Misdirected Request) HTTP Status Code">6</a> を参照）。</p>
                    </div>
                    <div id="rfc.figure.u.7">
                        <p>Alt-Svc フィールド値は複数の値を持つことができます：</p>
                        <div>
                            <pre class="text">Alt-Svc: h2="alt.example.com:8000", h2=":443"
</pre>
                        </div>
                    </div>
                    <div id="rfc.section.3.p.9">
                        <p>複数の値が存在する場合、値の順序はサーバーの優先順位を反映します（最初の値が最も優先されます）。</p>
                    </div>
                    <div id="rfc.section.3.p.10">
                        <p>Alt-Svc
                            によって広告された値は、クライアントが代替サービスへの新しい接続を開くために使用できます。後続のリクエストはこの新しい接続を直ちに使用開始するか、既存の接続を使用し続けながら新しい接続を作成することができます。
                        </p>
                    </div>
                    <div id="rfc.section.3.p.11">
                        <p>HTTP/2 を使用する場合、サーバーは代わりに ALTSVC フレーム（セクション 4）を送信すべきです（<em class="bcp14">SHOULD</em>）。単一の
                            ALTSVC フレームは接続ごとに送信できます；すべてのリクエストごとに新しいフレームを送る必要はありません。それにもかかわらず、HTTP/2 上で配信されたレスポンス内の
                            Alt-Svc ヘッダーフィールドは有効です。</p>
                    </div>
                    <div id="rfc.section.3.p.12">
                        <p>各 "alt-value" の後にはセミコロンで区切られた追加パラメータの <em class="bcp14">OPTIONAL</em> リストが続くことがあり、各
                            "parameter" は名前と値からなります。</p>
                    </div>
                    <div id="rfc.section.3.p.13">
                        <p>本仕様は "ma" と "persist" の二つのパラメータを定義します（セクション 3.1）。未知のパラメータは <em class="bcp14">MUST</em>
                            無視されなければなりません。すなわち、それらが現れる値（alt-value）は未知のパラメータが存在しないかのように処理されなければなりません。</p>
                    </div>
                    <div id="rfc.section.3.p.14">
                        <p>新しいパラメータは拡張仕様で定義できます（登録の詳細はセクション 7.3 を参照）。</p>
                    </div>
                    <div id="rfc.section.3.p.15">
                        <p>"quoted-string" 構文を許すすべてのフィールド要素は RFC7230 の Section 3.2.6 に従って処理されなければなりません（<em
                                class="bcp14">MUST</em>）。</p>
                    </div>
                    <section id="caching-alt-svc-header-field-values">
                        <h3 id="rfc.section.3.1"><a href="#rfc.section.3.1">3.1.</a>&nbsp;<a
                                href="#caching-alt-svc-header-field-values">Alt-Svc ヘッダーフィールド値のキャッシュ</a></h3>
                        <div id="rfc.section.3.1.p.1">
                            <p>Alt-Svc を使用して代替サービスが広告されると、それはそのメッセージ生成から 24 時間新鮮と見なされます。これは "ma"（max-age）パラメータで変更できます。
                            </p>
                        </div>
                        <div id="rfc.figure.u.8">
                            <p>構文：</p>
                            <div>
                                <pre class="inline">ma = &lt;a href="#imported.abnf" class="smpl"&gt;delta-seconds&lt;/a&gt;; see <a href="#RFC7234"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Caching">[RFC7234]</cite></a>, <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7234.html#delta-seconds" title="Delta Seconds">Section 1.2.1</a>
</pre>
                            </div>
                        </div>
                        <div id="rfc.section.3.1.p.2">
                            <p>delta-seconds 値はレスポンスが生成されてから代替サービスが新鮮と見なされるまでの秒数を示します。</p>
                        </div>
                        <div id="rfc.figure.u.9">
                            <div>
                                <pre class="text">Alt-Svc: h2=":443"; ma=3600
</pre>
                            </div>
                        </div>
                        <div id="rfc.section.3.1.p.3">
                            <p>レスポンスの経過時間の決定に関しては RFC7234 の Section 4.2.3 を参照してください。</p>
                        </div>
                        <div id="rfc.figure.u.10">
                            <p>例えば、次のレスポンスは：</p>
                            <div>
                                <pre class="text">HTTP/1.1 200 OK
Content-Type: text/html
Cache-Control: max-age=600
Age: 30
Alt-Svc: h2=":8000"; ma=60
</pre>
                            </div>
                            <p>代替サービスが今後 60 秒間利用可能であることを示します。ただし、レスポンスは既に 30 秒キャッシュされているため（Age
                                ヘッダの値）、実際にはこのレスポンスを受信してから推定転送時間を差し引いた 30 秒間だけ代替サービスは新鮮です。</p>
                        </div>
                        <div id="rfc.section.3.1.p.4">
                            <p>HTTP キャッシュの新鮮度（ここでは 600 秒）は Alt-Svc 値のキャッシュには影響しない点に注意してください。</p>
                        </div>
                        <div id="rfc.section.3.1.p.5">
                            <p>オリジンから Alt-Svc レスポンスヘッダーフィールドを受け取った場合、その値は当該オリジンに対するキャッシュされたすべての代替サービスを無効化し置き換えます。</p>
                        </div>
                        <div id="rfc.section.3.1.p.6">
                            <p>デフォルトでは、クライアントはネットワーク変更を検出したときにキャッシュされた代替サービスをクリアします。クライアントアクセスネットワークに特有でない長寿命の代替サービスは、"persist"
                                パラメータを値 "1" で持ち、ネットワーク構成の変更を超えて有用であることを示すヒントを与えることができます。</p>
                        </div>
                        <div id="rfc.figure.u.11">
                            <p>構文：</p>
                            <div>
                                <pre class="inline">persist = "1"
</pre>
                            </div>
                        </div>
                        <div id="rfc.section.3.1.p.7" class="avoidbreakafter">
                            <p>例えば：</p>
                        </div>
                        <div id="rfc.figure.u.12">
                            <div>
                                <pre class="text">Alt-Svc: h2=":443"; ma=2592000; persist=1
</pre>
                            </div>
                        </div>
                        <div id="rfc.section.3.1.p.8">
                            <p>本仕様は "persist" に対して単一の値のみを定義します。クライアントは "1" 以外の値を持つ "persist" パラメータを無視しなければなりません（<em
                                    class="bcp14">MUST</em>）。</p>
                        </div>
                        <div id="rfc.section.3.1.p.9">
                            <p>代替サービスのキャッシュに関する一般要件はセクション 2.2 を参照してください。</p>
                        </div>
                    </section>
                </section>
                <section id="frame">
                    <h2 id="rfc.section.4"><a href="#rfc.section.4">4.</a>&nbsp;<a href="#frame">ALTSVC HTTP/2 フレーム</a>
                    </h2>
                    <div id="rfc.section.4.p.1">
                        <p>ALTSVC HTTP/2 フレーム（RFC7540、Section 4） は、HTTP/2 クライアントに代替サービスの利用可能性を通知します。</p>
                    </div>
                    <div id="rfc.section.4.p.2">
                        <p>ALTSVC フレームは HTTP/2 に対する非クリティカルな拡張です。このフレームをサポートしていないエンドポイントは無視します（RFC7540 の拡張ルールに従う）。</p>
                    </div>
                    <div id="rfc.section.4.p.3">
                        <p>ストリーム 0 以外のストリームでサーバーからクライアントへ送られた ALTSVC フレームは、伝達された代替サービスがそのストリームのオリジンに関連付けられていることを示します。
                        </p>
                    </div>
                    <div id="rfc.section.4.p.4">
                        <p>ストリーム 0 の ALTSVC フレームは、フレームの Origin
                            フィールドに含まれるオリジンに関連付けられた代替サービスを示します。クライアントが現在の接続に対して権威があると見なさないオリジンに関連付けられたものは無視しなければなりません（<em
                                class="bcp14">MUST</em>）。</p>
                    </div>
                    <div id="rfc.section.4.p.5">
                        <p>ALTSVC フレームタイプは 0xa（10）です。</p>
                    </div>
                    <div id="rfc.figure.1">
                        <div>
                            <pre class="drawing"> +-------------------------------+-------------------------------+
 |         Origin-Len (16)       | Origin? (*)                 ...
 +-------------------------------+-------------------------------+
 |                   Alt-Svc-Field-Value (*)                   ...
 +---------------------------------------------------------------+
</pre>
                        </div>
                    </div>
                    <p class="figure">図 1: ALTSVC フレームペイロード</p>
                    <div id="rfc.section.4.p.6">
                        <p>ALTSVC フレームは以下のフィールドを含みます：</p>
                        <dl>
                            <dt>Origin-Len:</dt>
                            <dd>Origin フィールドの長さをオクテット単位で示す符号なし 16 ビット整数。</dd>
                            <dt>Origin:</dt>
                            <dd><em class="bcp14">OPTIONAL</em> な文字列列で、代替サービスが適用されるオリジンの ASCII シリアライゼーションを含みます（RFC6454
                                Section 6.2 参照）。</dd>
                            <dt>Alt-Svc-Field-Value:</dt>
                            <dd>一連のオクテット（フレーム長から先行するすべてのフィールドの長さを差し引いて決定される長さ）で、Section 3 で定義された Alt-Svc フィールド値（ABNF
                                生成規則 "Alt-Svc"）と同一の値を含みます。</dd>
                        </dl>
                    </div>
                    <div id="rfc.section.4.p.7">
                        <p>ALTSVC フレームはフラグを定義しません。</p>
                    </div>
                    <div id="rfc.section.4.p.8">
                        <p>ALTSVC フレームはクライアントによる受信を意図しています。サーバーとして振る舞うデバイスはこれを無視しなければなりません（<em class="bcp14">MUST</em>）。
                        </p>
                    </div>
                    <div id="rfc.section.4.p.9">
                        <p>ストリーム 0 上の Origin 情報が空（長さ 0）の ALTSVC フレームは無効であり無視されなければなりません（<em
                                class="bcp14">MUST</em>）。ストリーム 0 以外のストリームで非空の Origin 情報を含む ALTSVC
                            フレームは無効であり無視されなければなりません（<em class="bcp14">MUST</em>）。</p>
                    </div>
                    <div id="rfc.section.4.p.10">
                        <p>ALTSVC フレームはホップバイホップで処理されます。仲介者は ALTSVC フレームを転送してはならず（<em class="bcp14">MUST
                                NOT</em>）、ただし自身のクライアントに送るための新しい ALTSVC フレームを作成する際にその情報を使用することはできます。</p>
                    </div>
                    <div id="rfc.section.4.p.11">
                        <p>ALTSVC フレームを受信することは Alt-Svc ヘッダーフィールドを受信することと意味的に同等です。その結果、ALTSVC
                            フレームは対応するオリジンの代替サービスを置き換えます。Alt-Svc ヘッダーフィールドと ALTSVC
                            フレームの使用を混在させるのは、受信の順序が予測困難になるため賢明ではありません。</p>
                    </div>
                </section>
                <section id="indicator">
                    <h2 id="rfc.section.5"><a href="#rfc.section.5">5.</a>&nbsp;<a href="#indicator">Alt-Used HTTP
                            ヘッダーフィールド</a></h2>
                    <div id="rfc.section.5.p.1">
                        <p>Alt-Used ヘッダーフィールドは、Host ヘッダーフィールド（RFC7230 Section 5.4）と同様に、リクエストで使用されている代替サービスを識別するために使われます。
                        </p>
                    </div>
                    <div id="rfc.figure.u.13">
                        <div>
                            <pre class="inline">Alt-Used     = uri-host [ ":" port ]
</pre>
                        </div>
                    </div>
                    <div id="rfc.section.5.p.2">
                        <p>Alt-Used
                            は、代替サービスがループを検出したり、負荷分散のためにトラフィックを差別化したり、トラフィックの意図された宛先を識別できるようにすることを目的としています。プロトコルが既に使用されている後でこの情報を導入するのは問題を生じやすいことが実証されています。
                        </p>
                    </div>
                    <div id="rfc.section.5.p.3">
                        <p>代替サービスを使用する場合、クライアントはすべてのリクエストに Alt-Used ヘッダーフィールドを含めるべきです（<em class="bcp14">SHOULD</em>）。
                        </p>
                    </div>
                    <div id="rfc.figure.u.14">
                        <p>例えば：</p>
                        <div>
                            <pre class="text2">GET /thing HTTP/1.1
Host: origin.example.com
Alt-Used: alternate.example.net
</pre>
                        </div>
                    </div>
                </section>
                <section id="status">
                    <h2 id="rfc.section.6"><a href="#rfc.section.6">6.</a>&nbsp;<a href="#status">421 (Misdirected
                            Request) HTTP ステータスコード</a></h2>
                    <div id="rfc.section.6.p.1">
                        <p>421 (Misdirected Request) ステータスコードは RFC7540 の Section 9.1.2
                            で定義されており、現在のサーバーインスタンスが要求されたリソースに対して権威を持たないことを示します。これは代替サービスが権威を持たないことを示すためにも使用できます（セクション 2
                            を参照）。</p>
                    </div>
                    <div id="rfc.section.6.p.2">
                        <p>代替サービスから 421 を受け取ったクライアントは、当該オリジンに対する代替サービスキャッシュから対応するエントリを削除しなければなりません（<em
                                class="bcp14">MUST</em>; セクション 2.2
                            参照）。リクエストメソッドの冪等性に関わらず、クライアントはリクエストを別の代替サーバーまたはオリジンへ再試行してもよい（<em class="bcp14">MAY</em>）です。
                        </p>
                    </div>
                    <div id="rfc.section.6.p.3">
                        <p>421 レスポンスに含まれる Alt-Svc ヘッダーフィールドは無視されなければなりません（<em class="bcp14">MUST</em>）。</p>
                    </div>
                </section>
                <section id="iana-considerations">
                    <h2 id="rfc.section.7"><a href="#rfc.section.7">7.</a>&nbsp;<a href="#iana-considerations">IANA
                            の考慮事項</a></h2>
                    <section id="n-header-field-registrations">
                        <h3 id="rfc.section.7.1"><a href="#rfc.section.7.1">7.1.</a>&nbsp;<a
                                href="#n-header-field-registrations">ヘッダーフィールド登録</a></h3>
                        <div id="rfc.section.7.1.p.1">
                            <p>HTTP ヘッダーフィールドは IANA が管理する "Message Headers"
                                レジストリに登録されます（https://www.iana.org/assignments/message-headers/）。</p>
                        </div>
                        <div id="rfc.section.7.1.p.2" class="avoidbreakafter">
                            <p>本書は以下の HTTP ヘッダーフィールドを定義しているため、恒久的登録に従ってそれらの関連するレジストリエントリが追加されました（BCP90 参照）：</p>
                        </div>
                        <div id="rfc.table.1" class="table table-condensed table-striped">
                            <div id="iana.header.registration.table"></div>
                            <table class="table table-condensed table-striped full tleft">
                                <thead>
                                    <tr>
                                        <th>ヘッダーフィールド名</th>
                                        <th>プロトコル</th>
                                        <th>ステータス</th>
                                        <th>参照</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="text-left">Alt-Svc</td>
                                        <td class="text-left">http</td>
                                        <td class="text-left">standard</td>
                                        <td class="text-left"><a href="#alt-svc"
                                                title="The Alt-Svc HTTP Header Field">Section 3</a> </td>
                                    </tr>
                                    <tr>
                                        <td class="text-left">Alt-Used</td>
                                        <td class="text-left">http</td>
                                        <td class="text-left">standard</td>
                                        <td class="text-left"><a href="#indicator"
                                                title="The Alt-Used HTTP Header Field">Section 5</a> </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div id="rfc.section.7.1.p.3">
                            <p>Change Controller は "IETF (iesg@ietf.org) -- Internet Engineering Task Force" です。</p>
                        </div>
                    </section>
                    <section id="alt-svc-frame-registration">
                        <h3 id="rfc.section.7.2"><a href="#rfc.section.7.2">7.2.</a>&nbsp;<a
                                href="#alt-svc-frame-registration">ALTSVC HTTP/2 フレームタイプ</a></h3>
                        <div id="rfc.section.7.2.p.1">
                            <p>本書は ALTSVC フレームタイプを "HTTP/2 Frame Type" レジストリに登録します（RFC7540, Section 11.2）。</p>
                            <ul class="empty">
                                <li>Frame Type: ALTSVC</li>
                                <li>Code: 0xa</li>
                                <li>Specification: <a href="#frame" title="The ALTSVC HTTP/2 Frame">Section 4</a> of
                                    this document</li>
                            </ul>
                        </div>
                    </section>
                    <section id="iana.parameters">
                        <h3 id="rfc.section.7.3"><a href="#rfc.section.7.3">7.3.</a>&nbsp;<a
                                href="#iana.parameters">Alt-Svc パラメータ登録</a></h3>
                        <div id="rfc.section.7.3.p.1">
                            <p>"HTTP Alt-Svc Parameter Registry" はパラメータの名前空間を定義します。これは
                                &lt;http://www.iana.org/assignments/http-alt-svc-parameters&gt; に作成され、維持されます。</p>
                        </div>
                        <section id="parameter.registry.procedure">
                            <h4 id="rfc.section.7.3.1"><a href="#rfc.section.7.3.1">7.3.1.</a>&nbsp;<a
                                    href="#parameter.registry.procedure">手続き</a></h4>
                            <div id="rfc.section.7.3.1.p.1">
                                <p>登録には以下のフィールドが含まれなければなりません（<em class="bcp14">MUST</em>）：</p>
                                <ul>
                                    <li>Parameter Name</li>
                                    <li>Pointer to specification text</li>
                                </ul>
                            </div>
                            <div id="rfc.section.7.3.1.p.2">
                                <p>この名前空間に追加される値は Expert Review を必要とします（RFC5226 Section 4.1 参照）。</p>
                            </div>
                        </section>
                        <section id="parameter.registrations">
                            <h4 id="rfc.section.7.3.2"><a href="#rfc.section.7.3.2">7.3.2.</a>&nbsp;<a
                                    href="#parameter.registrations">登録</a></h4>
                            <div id="rfc.section.7.3.2.p.1" class="avoidbreakafter">
                                <p>"HTTP Alt-Svc Parameter Registry" には以下の登録が含まれています：</p>
                            </div>
                            <div id="rfc.table.u.2" class="table table-condensed table-striped">
                                <table class="table table-condensed table-striped full tleft">
                                    <thead>
                                        <tr>
                                            <th>Alt-Svc パラメータ</th>
                                            <th>参照</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="text-left">ma</td>
                                            <td class="text-left"><a href="#caching-alt-svc-header-field-values"
                                                    title="Caching Alt-Svc Header Field Values">Section 3.1</a> </td>
                                        </tr>
                                        <tr>
                                            <td class="text-left">persist</td>
                                            <td class="text-left"><a href="#caching-alt-svc-header-field-values"
                                                    title="Caching Alt-Svc Header Field Values">Section 3.1</a> </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </section>
                    </section>
                </section>
                <section id="internationalization-considerations">
                    <h2 id="rfc.section.8"><a href="#rfc.section.8">8.</a>&nbsp;<a
                            href="#internationalization-considerations">国際化に関する考慮事項</a></h2>
                    <div id="rfc.section.8.p.1">
                        <p>ヘッダーフィールド（セクション 3）または HTTP/2 フレーム（セクション 4）に現れる国際化ドメイン名は、A-label（RFC5890 Section
                            2.3.2.1）を使用して表現されなければなりません（<em class="bcp14">MUST</em>）。</p>
                    </div>
                </section>
                <section id="security-considerations">
                    <h2 id="rfc.section.9"><a href="#rfc.section.9">9.</a>&nbsp;<a
                            href="#security-considerations">セキュリティに関する考慮事項</a></h2>
                    <section id="changing-ports">
                        <h3 id="rfc.section.9.1"><a href="#rfc.section.9.1">9.1.</a>&nbsp;<a
                                href="#changing-ports">ポートの変更</a></h3>
                        <div id="rfc.section.9.1.p.1">
                            <p>代替サービスを使用するということは、少なくとも代替のポートでオリジンのリソースにアクセスすることを意味します。したがって、代替サービスを挿入し広告されたポートで受信できる攻撃者はオリジンをハイジャックできます。特定のサーバーでは、ユーザーが共有ポート上でいくつかの個人ページを制御でき、特権の低いポートでリクエストを受け付けることが通常あります。
                            </p>
                        </div>
                        <div id="rfc.section.9.1.p.2">
                            <p>例えば、攻撃者があるページに HTTP レスポンスヘッダーフィールドを追加できる場合、Alt-Svc
                                ヘッダーフィールドを使用して同じホスト上の異なるポートへオリジン全体のトラフィックをリダイレクトできます。そのポートが攻撃者の管理下にあれば、攻撃者は HTTP
                                サーバーになりすますことができます。</p>
                        </div>
                        <div id="rfc.section.9.1.p.3">
                            <p>このリスクはセクション 2.1 の要件によって緩和されます。</p>
                        </div>
                        <div id="rfc.section.9.1.p.4">
                            <p>サーバー側では、代替サービスを広告できる権限やそのホスト上でリスンするポートを開ける者を制限することで、このリスクを低減できます。</p>
                        </div>
                    </section>
                    <section id="host_security">
                        <h3 id="rfc.section.9.2"><a href="#rfc.section.9.2">9.2.</a>&nbsp;<a
                                href="#host_security">ホストの変更</a></h3>
                        <div id="rfc.section.9.2.p.1">
                            <p>代替サービスの使用によりホストが変更される場合、攻撃者がオリジンへの通信をハイジャックする機会が生じます。</p>
                        </div>
                        <div id="rfc.section.9.2.p.2">
                            <p>例えば、攻撃者がユーザーエージェントに対して "innocent.example.org" のすべてのトラフィックを "evil.example.com"
                                に送らせるように代替サービスを関連付けられれば、攻撃者はそのオリジンになりすますことができます。これはローカルに行われる場合（ポート変更の緩和策を参照）や中間者によるリモート（man-in-the-middle）攻撃として行われる可能性があります。
                            </p>
                        </div>
                        <div id="rfc.section.9.2.p.3">
                            <p>これが、代替サービスがオリジンの管理下にあり有効であるという合理的な保証をクライアントが持つことを要求する（セクション
                                2.1）の理由です。例えばオリジンのための証明書を提示することで代替サービスがオリジンのトラフィックを配信する権限を持つことを証明できます。</p>
                        </div>
                        <div id="rfc.section.9.2.p.4">
                            <p>この保証は代替サービスを認証するために用いられる方法の強度に依存します。特に TLS
                                認証を用いる場合、攻撃者の証明書を正当なものに見せかける既知の攻撃が存在する点に注意してください。</p>
                        </div>
                        <div id="rfc.section.9.2.p.5">
                            <p>代替サービスはそのような攻撃を持続させるために利用され得ます。例えば中間者がターゲットへの TLS
                                保護通信を中間者攻撃で傍受し、その後長い有効寿命を持つ代替サービスへすべてのトラフィックを誘導すれば、ユーザーエージェントは中間者を通さない場合でも攻撃者にトラフィックを送り続けることになります。
                            </p>
                        </div>
                        <div id="rfc.section.9.2.p.6">
                            <p>実装は代替サービスでも証明書ピンニング検証（RFC7469 など）を直接接続時と同様に実行しなければなりません（<em
                                    class="bcp14">MUST</em>）。実装は代替サービスに対してどの証明書が受け入れ可能かについて追加の要件を設けることもできます。</p>
                        </div>
                    </section>
                    <section id="changing-protocols">
                        <h3 id="rfc.section.9.3"><a href="#rfc.section.9.3">9.3.</a>&nbsp;<a
                                href="#changing-protocols">プロトコルの変更</a></h3>
                        <div id="rfc.section.9.3.p.1">
                            <p>代替サービスの使用により ALPN
                                プロトコルが変更される場合、新しい接続のセキュリティ特性は「通常の」オリジンへの接続と異なることがあります。プロトコル識別子自体がそれを示唆するためです。</p>
                        </div>
                        <div id="rfc.section.9.3.p.2">
                            <p>例えば、"https://" URI に対してエンドツーエンド暗号化（TLS 等）を使用しないプロトコルが広告されている場合、これは URI
                                スキームが暗示するセキュリティの期待を裏切ります。したがって、クライアントは代替サービスを盲目的に使用してはならず、提示された選択肢が仕様、実装、エンドユーザーのセキュリティ要件と期待を満たすか評価しなければなりません。
                            </p>
                        </div>
                    </section>
                    <section id="tracking">
                        <h3 id="rfc.section.9.4"><a href="#rfc.section.9.4">9.4.</a>&nbsp;<a
                                href="#tracking">代替サービスを利用するクライアントの追跡</a></h3>
                        <div id="rfc.section.9.4.p.1">
                            <p>代替サービスを選ぶことはサーバーが供給した新しいホスト名に接続することを意味します。サーバーがユニークな名前を使用すると、クライアント要求を追跡できるようになります。特に
                                "persist" フラグが使われる場合、複数のネットワークに跨ってユーザーを追跡できる可能性があります。</p>
                        </div>
                        <div id="rfc.section.9.4.p.2">
                            <p>リクエストの相関を防ぎたいクライアントは、相関されるべきでない複数のリクエストに対して代替サービスを使用しないことを決定できます。</p>
                        </div>
                        <div id="rfc.section.9.4.p.3">
                            <p>ユーザーエージェントでは、オリジン固有データがクリアされる（通常クッキーがクリアされる）際に、代替サービス情報もすべて削除されなければなりません（<em
                                    class="bcp14">MUST</em>）。</p>
                        </div>
                    </section>
                    <section id="confusion-regarding-request-scheme">
                        <h3 id="rfc.section.9.5"><a href="#rfc.section.9.5">9.5.</a>&nbsp;<a
                                href="#confusion-regarding-request-scheme">リクエストスキームに関する混乱</a></h3>
                        <div id="rfc.section.9.5.p.1">
                            <p>一部のサーバーサイド HTTP アプリケーションは接続のコンテキストに基づいてセキュリティを仮定します。例えば、ポート 443 で提供されることを "https://" URI
                                の使用と同一視し、それが暗示するさまざまなセキュリティ特性を前提とすることがあります。</p>
                        </div>
                        <div id="rfc.section.9.5.p.2">
                            <p>これは接続自体のセキュリティ特性だけでなく、接続先クライアント側の状態にも影響します。例えば Web ブラウザは多くの場合、"https://" と "http://"
                                を扱いで区別します。</p>
                        </div>
                        <div id="rfc.section.9.5.p.3">
                            <p>代替サービスの用途の一つは接続を異なるプロトコルやポートに移行することにありますが、これらのアプリケーションはある接続のセキュリティ特性を混乱させ、セキュアなコンテキスト向けの情報（例：クッキーやコンテンツ）をそれをセキュアとして扱わないクライアントへ送ってしまうことがあります。
                            </p>
                        </div>
                        <div id="rfc.section.9.5.p.4">
                            <p>このリスクは、サーバーがプロトコルで明示的に運ぶ URI スキーム（HTTP/2 の ":scheme" や HTTP/1.1 のリクエストターゲットの absolute
                                form）をセキュリティコンテキストの指標として使用することで軽減できます（RFC7540 Section 8.1.2.3 および RFC7230 Section 5.3.2
                                を参照）。</p>
                        </div>
                        <div id="rfc.section.9.5.p.5">
                            <p>プロトコルがスキームを明示的に運ばない場合（通常は TLS 上の HTTP/1.1
                                でのように）、サーバーはすべてのリクエストを非安全コンテキストと見なすか、非安全なスキーム（例：HTTP）のために代替サービスを広告しないことでこのリスクを軽減できます。
                            </p>
                        </div>
                    </section>
                </section>
                <section id="rfc.references">
                    <h2 id="rfc.section.10"><a href="#rfc.section.10">10.</a> 参考文献</h2>
                    <section>
                        <div id="rfc.references.1">
                            <h3 id="rfc.section.10.1"><a href="#rfc.section.10.1">10.1.</a> 規範的参考文献</h3>
                            <dl class="dl-horizontal">
                                <dt id="RFC2119">[<a href="#RFC2119" class="smpl">RFC2119</a>]</dt>
                                <dd>Bradner, S., “<a href="https://www.rfc-editor.org/rfc/rfc2119.html">Key words for
                                        use in RFCs to Indicate Requirement Levels</a>”, BCP 14, RFC 2119, DOI
                                    10.17487/RFC2119, March 1997, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a>&gt;.
                                </dd>
                                <dt id="RFC2818">[<a href="#RFC2818" class="smpl">RFC2818</a>]</dt>
                                <dd>Rescorla, E., “<a href="https://www.rfc-editor.org/rfc/rfc2818.html">HTTP Over
                                        TLS</a>”, RFC 2818, DOI 10.17487/RFC2818, May 2000, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc2818">http://www.rfc-editor.org/info/rfc2818</a>&gt;.
                                </dd>
                                <dt id="RFC3986">[<a href="#RFC3986" class="smpl">RFC3986</a>]</dt>
                                <dd>Berners-Lee, T., Fielding, R., and L. Masinter, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc3986.html">Uniform Resource Identifier
                                        (URI): Generic Syntax</a>”, STD 66, RFC 3986, DOI 10.17487/RFC3986, January
                                    2005, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc3986">http://www.rfc-editor.org/info/rfc3986</a>&gt;.
                                </dd>
                                <dt id="RFC5226">[<a href="#RFC5226" class="smpl">RFC5226</a>]</dt>
                                <dd>Narten, T. and H. Alvestrand, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc5226.html">Guidelines for Writing an
                                        IANA Considerations Section in RFCs</a>”, BCP 26, RFC 5226, DOI
                                    10.17487/RFC5226, May 2008, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc5226">http://www.rfc-editor.org/info/rfc5226</a>&gt;.
                                </dd>
                                <dt id="RFC5234">[<a href="#RFC5234" class="smpl">RFC5234</a>]</dt>
                                <dd>Crocker, D., Ed. and P. Overell, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc5234.html">Augmented BNF for Syntax
                                        Specifications: ABNF</a>”, STD 68, RFC 5234, DOI 10.17487/RFC5234, January 2008,
                                    &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc5234">http://www.rfc-editor.org/info/rfc5234</a>&gt;.
                                </dd>
                                <dt id="RFC5890">[<a href="#RFC5890" class="smpl">RFC5890</a>]</dt>
                                <dd>Klensin, J., “<a
                                        href="https://www.rfc-editor.org/rfc/rfc5890.html">Internationalized Domain
                                        Names for Applications (IDNA): Definitions and Document Framework</a>”, RFC
                                    5890, DOI 10.17487/RFC5890, August 2010, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc5890">http://www.rfc-editor.org/info/rfc5890</a>&gt;.
                                </dd>
                                <dt id="RFC6066">[<a href="#RFC6066" class="smpl">RFC6066</a>]</dt>
                                <dd>Eastlake, D., “<a href="https://www.rfc-editor.org/rfc/rfc6066.html">Transport Layer
                                        Security (TLS) Extensions: Extension Definitions</a>”, RFC 6066, DOI
                                    10.17487/RFC6066, January 2011, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc6066">http://www.rfc-editor.org/info/rfc6066</a>&gt;.
                                </dd>
                                <dt id="RFC6454">[<a href="#RFC6454" class="smpl">RFC6454</a>]</dt>
                                <dd>Barth, A., “<a href="https://www.rfc-editor.org/rfc/rfc6454.html">The Web Origin
                                        Concept</a>”, RFC 6454, DOI 10.17487/RFC6454, December 2011, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc6454">http://www.rfc-editor.org/info/rfc6454</a>&gt;.
                                </dd>
                                <dt id="RFC7230">[<a href="#RFC7230" class="smpl">RFC7230</a>]</dt>
                                <dd>Fielding, R., Ed. and J. Reschke, Ed., “<a
                                        href="https://www.rfc-editor.org/rfc/rfc7230.html">Hypertext Transfer Protocol
                                        (HTTP/1.1): Message Syntax and Routing</a>”, RFC 7230, DOI 10.17487/RFC7230,
                                    June 2014, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc7230">http://www.rfc-editor.org/info/rfc7230</a>&gt;.
                                </dd>
                                <dt id="RFC7234">[<a href="#RFC7234" class="smpl">RFC7234</a>]</dt>
                                <dd>Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., “<a
                                        href="https://www.rfc-editor.org/rfc/rfc7234.html">Hypertext Transfer Protocol
                                        (HTTP/1.1): Caching</a>”, RFC 7234, DOI 10.17487/RFC7234, June 2014, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc7234">http://www.rfc-editor.org/info/rfc7234</a>&gt;.
                                </dd>
                                <dt id="RFC7301">[<a href="#RFC7301" class="smpl">RFC7301</a>]</dt>
                                <dd>Friedl, S., Popov, A., Langley, A., and S. Emile, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc7301.html">Transport Layer Security
                                        (TLS) Application-Layer Protocol Negotiation Extension</a>”, RFC 7301, DOI
                                    10.17487/RFC7301, July 2014, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc7301">http://www.rfc-editor.org/info/rfc7301</a>&gt;.
                                </dd>
                                <dt id="RFC7405">[<a href="#RFC7405" class="smpl">RFC7405</a>]</dt>
                                <dd>Kyzivat, P., “<a href="https://www.rfc-editor.org/rfc/rfc7405.html">Case-Sensitive
                                        String Support in ABNF</a>”, RFC 7405, DOI 10.17487/RFC7405, December 2014,
                                    &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc7405">http://www.rfc-editor.org/info/rfc7405</a>&gt;.
                                </dd>
                                <dt id="RFC7540">[<a href="#RFC7540" class="smpl">RFC7540</a>]</dt>
                                <dd>Belshe, M., Peon, R., and M. Thomson, Ed., “<a
                                        href="https://www.rfc-editor.org/rfc/rfc7540.html">Hypertext Transfer Protocol
                                        version 2</a>”, RFC 7540, DOI 10.17487/RFC7540, May 2015, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc7540">http://www.rfc-editor.org/info/rfc7540</a>&gt;.
                                </dd>
                            </dl>
                        </div>
                    </section>
                    <section>
                        <div id="rfc.references.2">
                            <h3 id="rfc.section.10.2"><a href="#rfc.section.10.2">10.2.</a> 参考資料</h3>
                            <dl class="dl-horizontal">
                                <dt id="BCP90">[<a href="#BCP90" class="smpl">BCP90</a>]</dt>
                                <dd>Klyne, G., Nottingham, M., and J. Mogul, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc3864.html">Registration Procedures for
                                        Message Header Fields</a>”, BCP 90, RFC 3864, September 2004, &lt;<a
                                        href="http://www.rfc-editor.org/info/bcp90">http://www.rfc-editor.org/info/bcp90</a>&gt;.
                                </dd>
                                <dt id="RFC5246">[<a href="#RFC5246" class="smpl">RFC5246</a>]</dt>
                                <dd>Dierks, T. and E. Rescorla, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc5246.html">The Transport Layer Security
                                        (TLS) Protocol Version 1.2</a>”, RFC 5246, DOI 10.17487/RFC5246, August 2008,
                                    &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc5246">http://www.rfc-editor.org/info/rfc5246</a>&gt;.
                                </dd>
                                <dt id="RFC6265">[<a href="#RFC6265" class="smpl">RFC6265</a>]</dt>
                                <dd>Barth, A., “<a href="https://www.rfc-editor.org/rfc/rfc6265.html">HTTP State
                                        Management Mechanism</a>”, RFC 6265, DOI 10.17487/RFC6265, April 2011, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc6265">http://www.rfc-editor.org/info/rfc6265</a>&gt;.
                                </dd>
                                <dt id="RFC7469">[<a href="#RFC7469" class="smpl">RFC7469</a>]</dt>
                                <dd>Evans, C., Palmer, C., and R. Sleevi, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc7469.html">Public Key Pinning Extension
                                        for HTTP</a>”, RFC 7469, DOI 10.17487/RFC7469, April 2015, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc7469">http://www.rfc-editor.org/info/rfc7469</a>&gt;.
                                </dd>
                            </dl>
                        </div>
                    </section>
                </section>
                <section id="acknowledgements">
                    <h2 id="rfc.section.unnumbered-1"><a href="#acknowledgements">謝辞</a></h2>
                    <div id="rfc.section.unnumbered-1.p.1">
                        <p>Adam Langley, Bence Beky, Chris Lonvick, Eliot Lear, Erik Nygren, Guy Podjarny, Herve
                            Ruellan, Lucas Pardue, Martin Thomson, Matthew Kerwin, Mike Bishop, Paul Hoffman, Richard
                            Barnes, Richard Bradbury, Stephen Farrell, Stephen Ludin, and Will Chan
                            に感謝します。フィードバックと提案に感謝します。</p>
                    </div>
                    <div id="rfc.section.unnumbered-1.p.2">
                        <p>Alt-Svc ヘッダーフィールドは SPDY の Alternate-Protocol ヘッダーフィールドの設計の影響を受けています。</p>
                    </div>
                </section>
                <section id="rfc.authors" class="avoidbreakinside">
                    <h2><a href="#rfc.authors">著者の連絡先</a></h2>
                    <address><b>Mark Nottingham</b><br>Akamai<br>Email: mnot@mnot.net<br>URI: <a
                            href="https://www.mnot.net/">https://www.mnot.net/</a></address>
                    <address><b>Patrick McManus</b><br>Mozilla<br>Email: mcmanus@ducksong.com<br>URI: <a
                            href="https://mozillians.org/u/pmcmanus/">https://mozillians.org/u/pmcmanus/</a></address>
                    <address><b>Julian F. Reschke</b><br>greenbytes GmbH<br>Email: julian.reschke@greenbytes.de<br>URI:
                        <a href="https://greenbytes.de/tech/webdav/">https://greenbytes.de/tech/webdav/</a>
                    </address>
                </section>
            </div>
        </div>
    </div>
    <script src="https://httpwg.org/assets/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="https://httpwg.org/assets/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
</body>

</html>