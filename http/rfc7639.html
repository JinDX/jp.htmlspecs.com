<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="ja-JP">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>RFC 7639 - ALPN HTTP ヘッダーフィールド</title>
    <script>
        function getMeta(rfcno, container) {
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "https://www.rfc-editor.org/rfc/rfc" + rfcno + ".json", true);
            xhr.onload = function (e) {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        var data = JSON.parse(xhr.response);

                        var cont = document.getElementById(container);
                        // empty the container
                        while (cont.firstChild) {
                            cont.removeChild(myNode.firstChild);
                        }

                        var c = data.status;
                        if (c) {
                            var bld = newElementWithText("b", c);
                            cont.appendChild(bld);
                        } else {
                            cont.appendChild(newElementWithText("i", "(document status unknown)"));
                        }

                        c = data.updated_by;
                        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
                            cont.appendChild(newElement("br"));
                            cont.appendChild(newText("Updated by: "));
                            appendRfcLinks(cont, c);
                        }

                        c = data.obsoleted_by;
                        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
                            cont.appendChild(newElement("br"));
                            cont.appendChild(newText("Obsoleted by: "));
                            appendRfcLinks(cont, c);
                        }

                        c = data.errata_url;
                        if (c) {
                            cont.appendChild(newElement("br"));
                            var link = newElementWithText("a", "errata");
                            link.setAttribute("href", c);
                            var errata = newElementWithText("i", "This document has ");
                            errata.appendChild(link);
                            errata.appendChild(newText("."));
                            cont.appendChild(errata);
                        }

                        cont.style.display = "block";
                    } else {
                        console.error(xhr.statusText);
                    }
                }
            };
            xhr.onerror = function (e) {
                console.error(xhr.status + " " + xhr.statusText);
            };
            xhr.send(null);
        }
        function appendRfcLinks(parent, updates) {
            var template = "https://www.rfc-editor.org/rfc/rfc{rfc}.html";
            for (var i = 0; i < updates.length; i++) {
                var rfc = updates[i].trim().toLowerCase();
                if (rfc.substring(0, 3) == "rfc") {
                    var no = parseInt(rfc.substring(3), 10);

                    var link = newElement("a");
                    link.setAttribute("href", template.replace("{rfc}", no));
                    link.appendChild(newText(no));
                    parent.appendChild(link);
                } else {
                    parent.appendChild(newText(rfc));
                }
                if (i != updates.length - 1) {
                    parent.appendChild(newText(", "));
                }
            }
        }

        // DOM helpers
        function newElement(name) {
            return document.createElement(name);
        }
        function newElementWithText(name, txt) {
            var e = document.createElement(name);
            e.appendChild(newText(txt));
            return e;
        }
        function newText(text) {
            return document.createTextNode(text);
        }
    </script>
    <script>
        function anchorRewrite() {
            map = {};
            if (window.location.hash.length >= 1) {
                var fragid = window.location.hash.substr(1);
                if (fragid) {
                    if (!document.getElementById(fragid)) {
                        var prefix = "rfc.";
                        var mapped = map[fragid];
                        if (mapped) {
                            window.location.hash = mapped;
                        } else if (fragid.indexOf("section-") == 0) {
                            window.location.hash = prefix + "section." + fragid.substring(8).replace("-", ".p.");
                        } else if (fragid.indexOf("appendix-") == 0) {
                            window.location.hash = prefix + "section." + fragid.substring(9).replace("-", ".p.");
                        } else if (fragid.indexOf("s-") == 0) {
                            var postfix = fragid.substring(2);
                            if (postfix.startsWith("abstract")) {
                                window.location.hash = prefix + postfix;
                            } else if (postfix.startsWith("note-")) {
                                window.location.hash = prefix + "note." + postfix.substring(5).replace("-", ".p.");
                            } else {
                                window.location.hash = prefix + "section." + postfix.replace("-", ".p.");
                            }
                        } else if (fragid.indexOf("p-") == 0) {
                            var r = fragid.substring(2);
                            var p = r.indexOf("-");
                            if (p >= 0) {
                                window.location.hash = prefix + "section." + r.substring(0, p) + ".p." + r.substring(p + 1);
                            }
                        }
                    }
                }
            }
        }
        window.addEventListener('hashchange', anchorRewrite);
        window.addEventListener('DOMContentLoaded', anchorRewrite);
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:type" content="article">
    <meta property="og:title" content="RFC7639">
    <meta property="og:description" content="The ALPN HTTP Header Field">
    <meta property="og:url" content="https://httpwg.org/specs/rfc7639.html">
    <meta property="og:site_name" content="IETF HTTP Working Group Specifications">
    <meta property="og:image" content="https://httpwg.org/assets/favicon/apple-icon-180x180.png">
    <link rel="stylesheet" type="text/css"
        href="https://httpwg.org/assets/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <style type="text/css">
        body {
            padding-top: 80px;
            padding-bottom: 80px;
            position: relative;
        }

        .table.header th,
        .table.header td {
            border-top: none;
            padding: 0;
        }

        #sidebar {
            margin-top: -10px;
            height: 90%;
            overflow-y: auto;
            font-size: 90%;
        }

        #rfc\.meta {
            width: 40%;
            float: right
        }

        .toc ul {
            list-style: none;
        }

        .filename {
            color: rgb(119, 119, 119);
            font-size: 23px;
            font-weight: normal;
            height: auto;
            line-height: 23px;
        }

        dl {
            margin-left: 1em;
        }

        dl.dl-horizontal {
            margin-left: 0;
        }

        dl>dt {
            float: left;
            margin-right: 1em;
        }

        dl.nohang>dt {
            float: none;
        }

        dl>dd {
            margin-bottom: .5em;
        }

        dl.compact>dd {
            margin-bottom: 0em;
        }

        dl>dd>dl {
            margin-top: 0.5em;
            margin-bottom: 0em;
        }

        ul.empty {
            list-style-type: none;
        }

        ul.empty li {
            margin-top: .5em;
        }

        td.reference {
            padding-right: 1em;
            vertical-align: top;
        }

        .feedback {
            position: fixed;
            bottom: 5px;
            right: 5px;
        }

        .fbbutton {
            margin-left: 5px;
        }

        h1 a,
        h2 a,
        h3 a,
        h4 a,
        h5 a,
        h6 a {
            color: rgb(51, 51, 51);
        }

        span.tt {
            font: 11pt consolas, monospace;
            font-size-adjust: none;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="https://httpwg.org/assets/site.css">
    <link rel="Contents" href="#rfc.toc">
    <link rel="Author" href="#rfc.authors">
    <link rel="License" href="#rfc.copyrightnotice">
    <link rel="Chapter" title="1 Introduction" href="#rfc.section.1">
    <link rel="Chapter" title="2 The ALPN HTTP Header Field" href="#rfc.section.2">
    <link rel="Chapter" title="3 IANA Considerations" href="#rfc.section.3">
    <link rel="Chapter" title="4 Security Considerations" href="#rfc.section.4">
    <link rel="Chapter" title="5 References" href="#rfc.section.5">
    <link rel="Alternate" title="Plain Text Version" href="http://www.ietf.org/rfc/rfc7639.txt">
    <link rel="Help" title="RFC-Editor's Status Page" href="http://www.rfc-editor.org/info/rfc7639">
    <meta name="viewport" content="initial-scale=1">
    <meta name="generator"
        content="https://github.com/mnot/RFCBootstrap XSLT vendor: Saxonica http://www.saxonica.com/">
    <meta name="keywords" content="HTTP CONNECT, Firewall, HTTP proxy">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.creator" content="Hutton, A.">
    <meta name="dcterms.creator" content="Uberti, J.">
    <meta name="dcterms.creator" content="Thomson, M.">
    <meta name="dcterms.identifier" content="urn:ietf:rfc:7639">
    <meta name="dcterms.issued" content="2015-08">
    <meta name="dcterms.abstract"
        content="This specification allows HTTP CONNECT requests to indicate what protocol is intended to be used within the tunnel once established, using the ALPN header field.">
    <meta name="dcterms.isPartOf" content="urn:issn:2070-1721">
    <meta name="description"
        content="This specification allows HTTP CONNECT requests to indicate what protocol is intended to be used within the tunnel once established, using the ALPN header field.">
</head>

<body onload="getMeta(7639,'rfc.meta');">
    <nav class="navbar navbar-dark bg-dark d-print-none navbar-expand-lg fixed-top ps-3 pe-3" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapse"
                aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <a class="navbar-brand" href="https://httpwg.org/"><img src="https://httpwg.org/assets/http.svg"
                    height="23"></a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse">

            <div class="navbar-nav me-auto">

                <a class="nav-item ms-1 text-white" href="https://httpwg.org/specs/">📄 Documentation</a>

                <div class="dropdown ms-4">
                    <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Work in
                        Progress</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item"><a href="https://httpwg.org/http-extensions/">HTTP Extensions</a></li>
                        <li class="dropdown-item"><a
                                href="https://github.com/httpwg/admin/issues?q=is%3Aissue+is%3Aopen+label%3Aadoption">Future
                                Work</a></li>
                    </ul>
                </div>

                <div class="dropdown ms-4">
                    <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Participate</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item"><a href="https://httpwg.org/about/">About the HTTP Working Group</a>
                        </li>
                        <li class="divider"></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/CONTRIBUTING.html">Contribution Policy</a>
                        </li>
                        <li class="dropdown-item"><a href="http://datatracker.ietf.org/wg/httpbis/charter/">WG
                                Charter</a></li>
                        <li class="dropdown-item"><a href="http://lists.w3.org/Archives/Public/ietf-http-wg/">Group
                                Mailing List 📨</a></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/wg-materials/">Meeting Materials</a></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/admin/editors/">Document Editor
                                Resources</a></li>
                    </ul>
                </div>
            </div>

        </div>
    </nav>
    <div class="container" id="top">
        <div class="row">
            <div class="col-lg-4 order-last d-none d-lg-block" id="sidebar" role="navigation">
                <div class="navbar">
                    <div class="navbar-brand"><a href="#top"><strong>RFC </strong>7639</a></div><br clear="all">
                    <div class="">
                        <div class="toc ">
                            <ul>
                                <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.1">導入</a>
                                    <ul>
                                        <li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.section.1.1">要件言語</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#tp">ALPN HTTP
                                        ヘッダーフィールド</a>
                                    <ul>
                                        <li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.section.2.1">ヘッダーフィールド値</a></li>
                                        <li><a href="#rfc.section.2.2">2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.section.2.2">構文</a></li>
                                        <li><a href="#rfc.section.2.3">2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.section.2.3">使用法</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a href="#IANA">IANAの考慮事項</a></li>
                                <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#Security">セキュリティ上の考慮事項</a></li>
                                <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references">参考文献</a>
                                    <ul>
                                        <li><a href="#rfc.section.5.1">5.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.references.1">規範的参考文献</a></li>
                                        <li><a href="#rfc.section.5.2">5.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.references.2">参考資料</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.authors">著者の連絡先</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-8 order-first main" role="main">
                <header>
                    <table class="table table-condensed header" id="rfc.headerblock">
                        <tbody>
                            <tr>
                                <td class="text-left">インターネット技術タスクフォース (IETF)</td>
                                <td class="text-right">A. Hutton</td>
                            </tr>
                            <tr>
                                <td class="text-left">Request for Comments: 7639</td>
                                <td class="text-right">Unify</td>
                            </tr>
                            <tr>
                                <td class="text-left">カテゴリー: 標準トラック</td>
                                <td class="text-right">J. Uberti</td>
                            </tr>
                            <tr>
                                <td class="text-left">ISSN: 2070-1721</td>
                                <td class="text-right">Google</td>
                            </tr>
                            <tr>
                                <td class="text-left"></td>
                                <td class="text-right">M. Thomson</td>
                            </tr>
                            <tr>
                                <td class="text-left"></td>
                                <td class="text-right">Mozilla</td>
                            </tr>
                            <tr>
                                <td class="text-left"></td>
                                <td class="text-right">2015年8月</td>
                            </tr>
                        </tbody>
                    </table>
                    <div id="rfc.title">
                        <h1>ALPN HTTP ヘッダーフィールド</h1>
                    </div>
                </header>
                <hr>
                <h2 id="rfc.abstract"><a href="#rfc.abstract">概要</a></h2>
                <div class="lead">
                    <div id="rfc.abstract.p.1">
                        <p>本仕様は、HTTP CONNECT リクエストがトンネルが確立された後にトンネル内で使用される予定のプロトコルを、ALPN ヘッダーフィールドを使用して示すことを可能にします。</p>
                    </div>
                </div>
                <aside id="rfc.meta" class="alert alert-info"></aside>
                <section id="rfc.status">
                    <h2><a href="#rfc.status">本メモの状態</a></h2>
                    <div id="rfc.boilerplate.1.p.1">
                        <p>これはインターネット標準トラックの文書です。</p>
                    </div>
                    <div id="rfc.boilerplate.1.p.2">
                        <p>この文書はInternet Engineering Task Force (IETF) の成果物です。IETF コミュニティの合意を表しています。公開審査を受け、Internet
                            Engineering Steering Group (IESG) によって公開が承認されています。インターネット標準に関するさらなる情報は <a
                                href="https://www.rfc-editor.org/rfc/rfc5741.html#section-2">RFC 5741 のセクション 2</a>
                            をご覧ください。
                        </p>
                    </div>
                    <div id="rfc.boilerplate.1.p.3">
                        <p>この文書の現状、訂正情報、およびフィードバックの送付方法に関する情報は <a
                                href="http://www.rfc-editor.org/info/rfc7639">http://www.rfc-editor.org/info/rfc7639</a>
                            で入手できます。
                        </p>
                    </div>
                </section>
                <section id="rfc.copyrightnotice">
                    <h2><a href="#rfc.copyrightnotice">Copyright Notice</a></h2>
                    <div id="rfc.boilerplate.2.p.1">
                        <p>Copyright (c) 2015 IETF Trust and the persons identified as the document authors. All rights
                            reserved.</p>
                    </div>
                    <div id="rfc.boilerplate.2.p.2">
                        <p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF
                            Documents (<a
                                href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in
                            effect on the date of publication of this document. Please review these documents carefully,
                            as they describe your rights and restrictions with respect to this document. Code Components
                            extracted from this document must include Simplified BSD License text as described in
                            Section 4.e of the Trust Legal Provisions and are provided without warranty as described in
                            the Simplified BSD License.</p>
                    </div>
                </section>
                <div class="toc d-lg-none">
                    <ul>
                        <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.1">導入</a>
                            <ul>
                                <li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.section.1.1">要件言語</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#tp">ALPN HTTP ヘッダーフィールド</a>
                            <ul>
                                <li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.section.2.1">ヘッダーフィールド値</a></li>
                                <li><a href="#rfc.section.2.2">2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.section.2.2">構文</a></li>
                                <li><a href="#rfc.section.2.3">2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.section.2.3">使用法</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a href="#IANA">IANAの考慮事項</a>
                        </li>
                        <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#Security">セキュリティ上の考慮事項</a></li>
                        <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references">参考文献</a>
                            <ul>
                                <li><a href="#rfc.section.5.1">5.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references.1">規範的参考文献</a></li>
                                <li><a href="#rfc.section.5.2">5.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references.2">参考資料</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.authors">著者の連絡先</a></li>
                    </ul>
                </div>
                <section id="n-introduction">
                    <h2 id="rfc.section.1" class="np"><a href="#rfc.section.1">1.</a>&nbsp;<a
                            href="#n-introduction">導入</a></h2>
                    <div id="rfc.section.1.p.1">
                        <p>HTTP CONNECT メソッド（<a href="https://www.rfc-editor.org/rfc/rfc7231.html#section-4.3.6">Section
                                4.3.6</a> of <a href="#RFC7231"><cite
                                    title="Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content">[RFC7231]</cite></a>）
                            は、受信者に指定されたオリジンサーバーへのトンネルを確立し、その後トンネルが閉じられるまで双方向にパケットを転送するよう要求します。こうしたトンネルは、1つまたは複数のプロキシを経由してエンドツーエンドの仮想接続を作成するために一般的に使用されます。
                        </p>
                    </div>
                    <div id="rfc.section.1.p.2">
                        <p>ALPN HTTP ヘッダーフィールドは、クライアントが CONNECT
                            を使って確立されたトンネル内で使用することを意図しているプロトコル（または使用される可能性のあるプロトコル群）を識別します。これは Application-Layer Protocol
                            Negotiation（ALPN）識別子を使用します <a href="#RFC7301"><cite
                                    title="Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension">[RFC7301]</cite></a>。
                        </p>
                    </div>
                    <div id="rfc.section.1.p.3">
                        <p>TLS（<a href="#RFC5246"><cite
                                    title="The Transport Layer Security (TLS) Protocol Version 1.2">Transport Layer
                                    Security (TLS)</cite></a> <cite
                                title="The Transport Layer Security (TLS) Protocol Version 1.2">[RFC5246]</cite>）で保護されるトンネルの場合、ヘッダーフィールドは
                            TLS ハンドシェイク内で使用されるのと同じアプリケーションプロトコルラベルを運びます <a href="#RFC7301"><cite
                                    title="Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension">[RFC7301]</cite></a>。複数の可能なアプリケーションプロトコルがある場合は、それらすべてが示されます。
                        </p>
                    </div>
                    <div id="rfc.section.1.p.4">
                        <p>ALPN ヘッダーフィールドはクライアントの意図を示すだけです。ここで使われる ALPN
                            識別子は、クライアントがトンネル内で使用することを意図しているアプリケーションプロトコルまたはプロトコル群を識別するためだけのものです。このヘッダーフィールドを用いて交渉は行われません。TLS
                            では最終的なアプリケーションプロトコルの選択はサーバーがクライアントから提示された選択肢の中から行います。他の基盤（substate）ではアプリケーションプロトコルを異なる方法で交渉することがあります。
                        </p>
                    </div>
                    <div id="rfc.section.1.p.5">
                        <p>プロキシはトンネル内のプロトコルを実装しませんが、ヘッダーフィールドの値に基づいてポリシー判断を行う場合があります。例えば、プロキシはアプリケーションプロトコルを使って適切なトラフィック優先度を選択することができます。
                        </p>
                    </div>
                    <section id="n-requirements-language">
                        <h3 id="rfc.section.1.1"><a href="#rfc.section.1.1">1.1.</a>&nbsp;<a
                                href="#n-requirements-language">要件言語</a></h3>
                        <div id="rfc.section.1.1.p.1">
                            <p>この文書内のキーワード "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
                                "RECOMMENDED", "MAY", および "OPTIONAL" は、<a href="#RFC2119"><cite
                                        title="Key words for use in RFCs to Indicate Requirement Levels">RFC
                                        2119</cite></a> に記載されているとおりに解釈されます <cite
                                    title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</cite>。
                            </p>
                        </div>
                    </section>
                </section>
                <section id="tp">
                    <h2 id="rfc.section.2"><a href="#rfc.section.2">2.</a>&nbsp;<a href="#tp">ALPN HTTP ヘッダーフィールド</a>
                    </h2>
                    <div id="rfc.section.2.p.1">
                        <p>クライアントは、CONNECT リクエストに ALPN
                            ヘッダーフィールドを含めて、トンネル内でクライアントが使用することを意図するアプリケーション層プロトコル、またはトンネル内で使用される可能性のあるプロトコルの集合を示します。</p>
                    </div>
                    <section id="n-header-field-values">
                        <h3 id="rfc.section.2.1"><a href="#rfc.section.2.1">2.1.</a>&nbsp;<a
                                href="#n-header-field-values">ヘッダーフィールド値</a></h3>
                        <div id="rfc.section.2.1.p.1">
                            <p>protocol フィールドの有効な値は、"Application-Layer Protocol Negotiation (ALPN) Protocol ID" レジストリ <a
                                    href="#ALPN-IDS"><cite
                                        title="Application-Layer Protocol Negotiation (ALPN) Protocol ID">[ALPN-IDS]</cite></a>（<a
                                    href="#RFC7301"><cite
                                        title="Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension">[RFC7301]</cite></a>
                                により確立）から取られます。</p>
                        </div>
                    </section>
                    <section id="n-syntax">
                        <h3 id="rfc.section.2.2"><a href="#rfc.section.2.2">2.2.</a>&nbsp;<a href="#n-syntax">構文</a>
                        </h3>
                        <div id="rfc.section.2.2.p.1">
                            <p>ALPN ヘッダーフィールド値の ABNF（拡張バッカス・ノア形式）構文は以下のとおりです。これは <a
                                    href="https://www.rfc-editor.org/rfc/rfc7230.html#section-1.2">Section 1.2</a> of <a
                                    href="#RFC7230"><cite
                                        title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>
                                で定義された構文を使用します。</p>
                        </div>
                        <div id="rfc.figure.u.1">
                            <div>
                                <pre class="inline">
ALPN            = 1#protocol-id
protocol-id     = token ; percent-encoded ALPN protocol identifier
</pre>
                            </div>
                        </div>
                        <div id="rfc.section.2.2.p.2">
                            <p>ALPN プロトコル名はオクテット列であり、形式に関する追加の制約はありません。トークンで許可されていないオクテット（<a href="#RFC7230"><cite
                                        title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>、
                                <a href="https://www.rfc-editor.org/rfc/rfc7230.html#section-3.2.6">Section
                                    3.2.6</a>）は、<a
                                    href="https://www.rfc-editor.org/rfc/rfc3986.html#section-2.1">Section 2.1</a> of <a
                                    href="#RFC3986"><cite
                                        title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</cite></a>
                                に従ってパーセントエンコーディングされなければなりません。したがって、パーセント文字 "%"（16 進で
                                25）を表すオクテットもパーセントエンコーディングされなければなりません。
                            </p>
                        </div>
                        <div id="rfc.section.2.2.p.3">
                            <p>任意の ALPN プロトコル名を正確に一つの方法で表現するために、次の追加制約が適用されます：</p>
                            <ul>
                                <li>ALPN プロトコル内のオクテットは、"%" を除き、トークン文字として有効であればパーセントエンコードしてはなりません。</li>
                                <li>パーセントエンコーディングを使用する場合は、大文字の16進数字を使用しなければなりません。</li>
                            </ul>
                        </div>
                        <div id="rfc.section.2.2.p.4">
                            <p>これらの制約により、受信側はプロトコル識別子を照合するために単純な文字列比較を適用できます。</p>
                        </div>
                        <div id="rfc.figure.u.2">
                            <p>例えば：</p>
                            <div>
                                <pre class="text2">

  CONNECT www.example.com HTTP/1.1
  Host: www.example.com
  ALPN: h2, http%2F1.1
  </pre>
                            </div>
                        </div>
                    </section>
                    <section id="n-usage">
                        <h3 id="rfc.section.2.3"><a href="#rfc.section.2.3">2.3.</a>&nbsp;<a href="#n-usage">使用法</a>
                        </h3>
                        <div id="rfc.section.2.3.p.1">
                            <p>ALPN ヘッダーフィールドで使用される ALPN 識別子は、単一のプロトコル層やコンポーネントではなく、完全なアプリケーションプロトコルスタックを識別するために使われます。
                            </p>
                        </div>
                        <div id="rfc.section.2.3.p.2">
                            <p>TLS で保護されたプロトコルを運ぶ CONNECT トンネルの場合、ALPN ヘッダーフィールドの値は TLS ClientHello メッセージで送信されるのと同じ ALPN
                                識別子のリストを含みます <a href="#RFC7301"><cite
                                        title="Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension">[RFC7301]</cite></a>。
                            </p>
                        </div>
                        <div id="rfc.section.2.3.p.3">
                            <p>TLS を使用しないなど、プロトコル交渉が発生しないと予想される場合、ALPN ヘッダーフィールドには使用される予定のアプリケーションプロトコルに対応する単一の ALPN
                                プロトコル識別子が含まれます。別の形式のプロトコル交渉が可能な場合、ALPN ヘッダーフィールドには交渉され得るプロトコルの集合が含まれます。</p>
                        </div>
                        <div id="rfc.section.2.3.p.4">
                            <p>プロキシは ALPN ヘッダーフィールドの値を使用して CONNECT トンネルのリクエストをより明確かつ効率的に拒否することができます。HTTP
                                レイヤーでプロトコル情報を公開することで、プロキシはより早くリクエストを拒否し、（例えば 403 ステータスのような）より良いエラー報告を行うことができます。ALPN
                                ヘッダーフィールドは偽造され得るため、リクエストの認可の根拠としては十分ではありません。</p>
                        </div>
                        <div id="rfc.section.2.3.p.5">
                            <p>プロキシはパケットを検査して使用中のプロトコルを判断しようとすることができます。これはプロキシが各 ALPN 識別子を理解していることを要求します。TLS
                                のようなプロトコルは交渉されたプロトコルを隠す可能性があり、またプロトコル交渉の詳細は時間とともに変わり得ます。したがって、プロキシはプロトコルを認識できなかったという理由だけで
                                CONNECT トンネルを破壊してはなりません（SHOULD NOT）。</p>
                        </div>
                        <div id="rfc.section.2.3.p.6">
                            <p>プロキシは接続の管理や優先度付けを変更するために ALPN ヘッダーフィールドの値を使用することができます。</p>
                        </div>
                    </section>
                </section>
                <section id="IANA">
                    <h2 id="rfc.section.3"><a href="#rfc.section.3">3.</a>&nbsp;<a href="#IANA">IANAの考慮事項</a>
                    </h2>
                    <div id="rfc.section.3.p.1">
                        <p>HTTP ヘッダーフィールドは IANA が管理する "Permanent Message Header Field Names" レジストリに登録されます <a
                                href="#MSG-HDRS"><cite
                                    title="Permanent Message Header Field Names&gt;">[MSG-HDRS]</cite></a>。本書は ALPN
                            ヘッダーフィールドを定義し、<a href="#RFC3864"><cite
                                    title="Registration Procedures for Message Header Fields">[RFC3864]</cite></a>
                            に従って以下のように登録します：</p>
                        <dl>
                            <dt>Header Field Name:</dt>
                            <dd>ALPN</dd>
                            <dt>Protocol:</dt>
                            <dd>http</dd>
                            <dt>Status:</dt>
                            <dd>Standard</dd>
                            <dt>Reference:</dt>
                            <dd><a href="#tp" title="The ALPN HTTP Header Field">Section 2</a> of this document (RFC
                                7639)</dd>
                            <dt>Change Controller:</dt>
                            <dd>IETF (iesg@ietf.org) - Internet Engineering Task Force</dd>
                        </dl>
                    </div>
                </section>
                <section id="Security">
                    <h2 id="rfc.section.4"><a href="#rfc.section.4">4.</a>&nbsp;<a href="#Security">セキュリティ上の考慮事項</a>
                    </h2>
                    <div id="rfc.section.4.p.1">
                        <p>HTTP CONNECT を TURN（Traversal Using Relays around NAT、<a href="#RFC5766"><cite
                                    title="Traversal Using Relays around NAT (TURN): Relay Extensions to Session Traversal Utilities for NAT (STUN)">[RFC5766]</cite></a>）サーバーに対して使用する場合、<a
                                href="https://www.rfc-editor.org/rfc/rfc7231.html#section-4.3.6">Section 4.3.6</a> of <a
                                href="#RFC7231"><cite
                                    title="Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content">[RFC7231]</cite></a>
                            のセキュリティ上の考慮事項が適用されます。同節は「任意のサーバーへのトンネルを確立することには重大なリスクが伴う、特に宛先がウェブトラフィック用ではない既知または予約された TCP
                            ポートである場合はそうである。… CONNECT
                            をサポートするプロキシは、その使用を既知の限られたポート群または安全なリクエスト対象の設定可能なホワイトリストに制限すべきである。」と述べています。</p>
                    </div>
                    <div id="rfc.section.4.p.2">
                        <p>本書で説明する ALPN ヘッダーフィールドは OPTIONAL です。クライアントや HTTP
                            プロキシはこれをサポートしないことを選択でき、その場合は提供しないか、存在しても無視します。ヘッダーフィールドが利用できないか無視される場合、プロキシはトンネルの目的を特定できず、それをトンネルに関する認可判断の入力として使用することはできません。これはクライアントまたはプロキシが
                            ALPN ヘッダーフィールドをサポートしていない場合と区別がつきません。</p>
                    </div>
                    <div id="rfc.section.4.p.3">
                        <p>ALPN ヘッダーフィールドには機密性保護がありません。機密またはセンシティブな情報を明らかにするおそれのある ALPN 識別子は送信すべきではありません（SHOULD NOT）。詳細は
                            <a href="https://www.rfc-editor.org/rfc/rfc7301.html#section-5">Section 5</a> of <a
                                href="#RFC7301"><cite
                                    title="Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension">[RFC7301]</cite></a>
                            を参照してください。
                        </p>
                    </div>
                    <div id="rfc.section.4.p.4">
                        <p>ALPN ヘッダーフィールドの値はクライアントによって偽造される可能性があります。トンネルを通して送信されるデータが暗号化されている場合（例えば <a
                                href="#RFC5246"><cite
                                    title="The Transport Layer Security (TLS) Protocol Version 1.2">TLS</cite></a> <cite
                                title="The Transport Layer Security (TLS) Protocol Version 1.2">[RFC5246]</cite>
                            など）、プロキシは主張されたプロトコルが実際に使用されているものかを直接検査して検証できないかもしれませんが、プロキシはトラフィック解析を行える可能性があります <a
                                href="#TRAFFIC"><cite
                                    title="Identifying Website Users by TLS Traffic Analysis: New Attacks and Effective Countermeasures, Revision 1">[TRAFFIC]</cite></a>。したがって、プロキシはすべての場合において
                            ALPN ヘッダーフィールドの値をポリシーの入力として依存することはできません。</p>
                    </div>
                </section>
                <section id="rfc.references">
                    <h2 id="rfc.section.5"><a href="#rfc.section.5">5.</a> 参考文献</h2>
                    <section>
                        <div id="rfc.references.1">
                            <h3 id="rfc.section.5.1"><a href="#rfc.section.5.1">5.1.</a> 規範的参考文献</h3>
                            <dl class="dl-horizontal">
                                <dt id="RFC2119">[<a href="#RFC2119" class="smpl">RFC2119</a>]</dt>
                                <dd><a href="mailto:sob@harvard.edu">Bradner, S.</a>, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc2119.html">Key words for use in RFCs to
                                        Indicate Requirement Levels</a>”, <a
                                        href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>, RFC 2119, <a
                                        href="https://dx.doi.org/10.17487/RFC2119">DOI 10.17487/RFC2119</a>, March 1997,
                                    &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a>&gt;.
                                </dd>
                                <dt id="RFC3864">[<a href="#RFC3864" class="smpl">RFC3864</a>]</dt>
                                <dd>Klyne, G., Nottingham, M., and J. Mogul, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc3864.html">Registration Procedures for
                                        Message Header Fields</a>”, <a href="https://www.rfc-editor.org/info/bcp90">BCP
                                        90</a>, RFC 3864, <a href="https://dx.doi.org/10.17487/RFC3864">DOI
                                        10.17487/RFC3864</a>, September 2004, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc3864">http://www.rfc-editor.org/info/rfc3864</a>&gt;.
                                </dd>
                                <dt id="RFC3986">[<a href="#RFC3986" class="smpl">RFC3986</a>]</dt>
                                <dd><a href="mailto:timbl@w3.org">Berners-Lee, T.</a>, <a
                                        href="mailto:fielding@gbiv.com">Fielding, R.</a>, and <a
                                        href="mailto:LMM@acm.org">L. Masinter</a>, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc3986.html">Uniform Resource Identifier
                                        (URI): Generic Syntax</a>”, <a href="https://www.rfc-editor.org/info/std66">STD
                                        66</a>, RFC 3986, <a href="https://dx.doi.org/10.17487/RFC3986">DOI
                                        10.17487/RFC3986</a>, January 2005, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc3986">http://www.rfc-editor.org/info/rfc3986</a>&gt;.
                                </dd>
                                <dt id="RFC7230">[<a href="#RFC7230" class="smpl">RFC7230</a>]</dt>
                                <dd>Fielding, R. and J. Reschke, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc7230.html">Hypertext Transfer Protocol
                                        (HTTP/1.1): Message Syntax and Routing</a>”, RFC 7230, <a
                                        href="https://dx.doi.org/10.17487/RFC7230">DOI 10.17487/RFC7230</a>, June 2014,
                                    &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc7230">http://www.rfc-editor.org/info/rfc7230</a>&gt;.
                                </dd>
                                <dt id="RFC7231">[<a href="#RFC7231" class="smpl">RFC7231</a>]</dt>
                                <dd>Fielding, R. and J. Reschke, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc7231.html">Hypertext Transfer Protocol
                                        (HTTP/1.1): Semantics and Content</a>”, RFC 7231, <a
                                        href="https://dx.doi.org/10.17487/RFC7231">DOI 10.17487/RFC7231</a>, June 2014,
                                    &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc7231">http://www.rfc-editor.org/info/rfc7231</a>&gt;.
                                </dd>
                                <dt id="RFC7301">[<a href="#RFC7301" class="smpl">RFC7301</a>]</dt>
                                <dd>Friedl, S., Popov, A., Langley, A., and E. Stephan, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc7301.html">Transport Layer Security
                                        (TLS) Application-Layer Protocol Negotiation Extension</a>”, RFC 7301, <a
                                        href="https://dx.doi.org/10.17487/RFC7301">DOI 10.17487/RFC7301</a>, July 2014,
                                    &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc7301">http://www.rfc-editor.org/info/rfc7301</a>&gt;.
                                </dd>
                            </dl>
                        </div>
                    </section>
                    <section>
                        <div id="rfc.references.2">
                            <h3 id="rfc.section.5.2"><a href="#rfc.section.5.2">5.2.</a> 参考資料</h3>
                            <dl class="dl-horizontal">
                                <dt id="ALPN-IDS">[<a href="#ALPN-IDS" class="smpl">ALPN-IDS</a>]</dt>
                                <dd>IANA, “<a
                                        href="http://www.iana.org/assignments/tls-extensiontype-values">Application-Layer
                                        Protocol Negotiation (ALPN) Protocol ID</a>”, &lt;<a
                                        href="http://www.iana.org/assignments/tls-extensiontype-values">http://www.iana.org/assignments/tls-extensiontype-values</a>&gt;.
                                </dd>
                                <dt id="MSG-HDRS">[<a href="#MSG-HDRS" class="smpl">MSG-HDRS</a>]</dt>
                                <dd>IANA, “<a href="https://www.iana.org/assignments/message-headers">Permanent Message
                                        Header Field Names&gt;</a>”, &lt;<a
                                        href="https://www.iana.org/assignments/message-headers">https://www.iana.org/assignments/message-headers</a>&gt;.
                                </dd>
                                <dt id="RFC5246">[<a href="#RFC5246" class="smpl">RFC5246</a>]</dt>
                                <dd>Dierks, T. and E. Rescorla, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc5246.html">The Transport Layer Security
                                        (TLS) Protocol Version 1.2</a>”, RFC 5246, <a
                                        href="https://dx.doi.org/10.17487/RFC5246">DOI 10.17487/RFC5246</a>, August
                                    2008, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc5246">http://www.rfc-editor.org/info/rfc5246</a>&gt;.
                                </dd>
                                <dt id="RFC5766">[<a href="#RFC5766" class="smpl">RFC5766</a>]</dt>
                                <dd>Mahy, R., Matthews, P., and J. Rosenberg, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc5766.html">Traversal Using Relays around
                                        NAT (TURN): Relay Extensions to Session Traversal Utilities for NAT (STUN)</a>”,
                                    RFC 5766, <a href="https://dx.doi.org/10.17487/RFC5766">DOI 10.17487/RFC5766</a>,
                                    April 2010, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc5766">http://www.rfc-editor.org/info/rfc5766</a>&gt;.
                                </dd>
                                <dt id="TRAFFIC">[<a href="#TRAFFIC" class="smpl">TRAFFIC</a>]</dt>
                                <dd>Pironti, A., Strub, P-Y., and K. Bhargavan, “<a
                                        href="https://alfredo.pironti.eu/research/publications/full/identifying-website-users-tls-traffic-analysis-new-attacks-and-effective-counterme">Identifying
                                        Website Users by TLS Traffic Analysis: New Attacks and Effective
                                        Countermeasures, Revision 1</a>”, 2012, &lt;<a
                                        href="https://alfredo.pironti.eu/research/publications/full/identifying-website-users-tls-traffic-analysis-new-attacks-and-effective-counterme">https://alfredo.pironti.eu/research/publications/full/identifying-website-users-tls-traffic-analysis-new-attacks-and-effective-counterme</a>&gt;.
                                </dd>
                            </dl>
                        </div>
                    </section>
                </section>
                <section id="rfc.authors" class="avoidbreakinside">
                    <h2><a href="#rfc.authors">著者の連絡先</a></h2>
                    <address><b>Andrew Hutton</b><br>Unify<br>Technology Drive<br>Nottingham, NG9 1LA<br>United
                        Kingdom<br>EMail: <a href="mailto:andrew.hutton@unify.com">andrew.hutton@unify.com</a></address>
                    <address><b>Justin Uberti</b><br>Google<br>747 6th Street South<br>Kirkland, WA 98033<br>United
                        States<br>EMail: <a href="mailto:justin@uberti.name">justin@uberti.name</a></address>
                    <address><b>Martin Thomson</b><br>Mozilla<br>331 East Evelyn Avenue<br>Mountain View, CA
                        94041<br>United States<br>EMail: <a
                            href="mailto:martin.thomson@gmail.com">martin.thomson@gmail.com</a></address>
                </section>
            </div>
        </div>
    </div>
    <script src="https://httpwg.org/assets/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="https://httpwg.org/assets/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
</body>

</html>