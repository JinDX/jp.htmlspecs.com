<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="ja-JP">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>RFC 9204 - QPACK: HTTP/3 のフィールド圧縮</title>
    <script>
        function getMeta(rfcno, container) {
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "https://www.rfc-editor.org/rfc/rfc" + rfcno + ".json", true);
            xhr.onload = function (e) {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        var data = JSON.parse(xhr.response);

                        var cont = document.getElementById(container);
                        // empty the container
                        while (cont.firstChild) {
                            cont.removeChild(myNode.firstChild);
                        }

                        var c = data.status;
                        if (c) {
                            var bld = newElementWithText("b", c);
                            cont.appendChild(bld);
                        } else {
                            cont.appendChild(newElementWithText("i", "(document status unknown)"));
                        }

                        c = data.updated_by;
                        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
                            cont.appendChild(newElement("br"));
                            cont.appendChild(newText("Updated by: "));
                            appendRfcLinks(cont, c);
                        }

                        c = data.obsoleted_by;
                        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
                            cont.appendChild(newElement("br"));
                            cont.appendChild(newText("Obsoleted by: "));
                            appendRfcLinks(cont, c);
                        }

                        c = data.errata_url;
                        if (c) {
                            cont.appendChild(newElement("br"));
                            var link = newElementWithText("a", "errata");
                            link.setAttribute("href", c);
                            var errata = newElementWithText("i", "This document has ");
                            errata.appendChild(link);
                            errata.appendChild(newText("."));
                            cont.appendChild(errata);
                        }

                        cont.style.display = "block";
                    } else {
                        console.error(xhr.statusText);
                    }
                }
            };
            xhr.onerror = function (e) {
                console.error(xhr.status + " " + xhr.statusText);
            };
            xhr.send(null);
        }
        function appendRfcLinks(parent, updates) {
            var template = "https://www.rfc-editor.org/rfc/rfc{rfc}.html";
            for (var i = 0; i < updates.length; i++) {
                var rfc = updates[i].trim().toLowerCase();
                if (rfc.substring(0, 3) == "rfc") {
                    var no = parseInt(rfc.substring(3), 10);

                    var link = newElement("a");
                    link.setAttribute("href", template.replace("{rfc}", no));
                    link.appendChild(newText(no));
                    parent.appendChild(link);
                } else {
                    parent.appendChild(newText(rfc));
                }
                if (i != updates.length - 1) {
                    parent.appendChild(newText(", "));
                }
            }
        }

        // DOM helpers
        function newElement(name) {
            return document.createElement(name);
        }
        function newElementWithText(name, txt) {
            var e = document.createElement(name);
            e.appendChild(newText(txt));
            return e;
        }
        function newText(text) {
            return document.createTextNode(text);
        }
    </script>
    <script>
        function anchorRewrite() {
            map = {};
            if (window.location.hash.length >= 1) {
                var fragid = window.location.hash.substr(1);
                if (fragid) {
                    if (!document.getElementById(fragid)) {
                        var prefix = "rfc.";
                        var mapped = map[fragid];
                        if (mapped) {
                            window.location.hash = mapped;
                        } else if (fragid.indexOf("section-") == 0) {
                            window.location.hash = prefix + "section." + fragid.substring(8).replace("-", ".p.");
                        } else if (fragid.indexOf("appendix-") == 0) {
                            window.location.hash = prefix + "section." + fragid.substring(9).replace("-", ".p.");
                        } else if (fragid.indexOf("s-") == 0) {
                            var postfix = fragid.substring(2);
                            if (postfix.startsWith("abstract")) {
                                window.location.hash = prefix + postfix;
                            } else if (postfix.startsWith("note-")) {
                                window.location.hash = prefix + "note." + postfix.substring(5).replace("-", ".p.");
                            } else {
                                window.location.hash = prefix + "section." + postfix.replace("-", ".p.");
                            }
                        } else if (fragid.indexOf("p-") == 0) {
                            var r = fragid.substring(2);
                            var p = r.indexOf("-");
                            if (p >= 0) {
                                window.location.hash = prefix + "section." + r.substring(0, p) + ".p." + r.substring(p + 1);
                            }
                        }
                    }
                }
            }
        }
        window.addEventListener('hashchange', anchorRewrite);
        window.addEventListener('DOMContentLoaded', anchorRewrite);
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:type" content="article">
    <meta property="og:title" content="RFC9204">
    <meta property="og:description" content="QPACK: Field Compression for HTTP/3">
    <meta property="og:url" content="https://httpwg.org/specs/rfc9204.html">
    <meta property="og:site_name" content="IETF HTTP Working Group Specifications">
    <meta property="og:image" content="https://httpwg.org/assets/favicon/apple-icon-180x180.png">
    <link rel="stylesheet" type="text/css"
        href="https://httpwg.org/assets/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <style type="text/css">
        body {
            padding-top: 80px;
            padding-bottom: 80px;
            position: relative;
        }

        .table.header th,
        .table.header td {
            border-top: none;
            padding: 0;
        }

        #sidebar {
            margin-top: -10px;
            height: 90%;
            overflow-y: auto;
            font-size: 90%;
        }

        #rfc\.meta {
            width: 40%;
            float: right
        }

        .toc ul {
            list-style: none;
        }

        .filename {
            color: rgb(119, 119, 119);
            font-size: 23px;
            font-weight: normal;
            height: auto;
            line-height: 23px;
        }

        dl {
            margin-left: 1em;
        }

        dl.dl-horizontal {
            margin-left: 0;
        }

        dl>dt {
            float: left;
            margin-right: 1em;
        }

        dl.nohang>dt {
            float: none;
        }

        dl>dd {
            margin-bottom: .5em;
        }

        dl.compact>dd {
            margin-bottom: 0em;
        }

        dl>dd>dl {
            margin-top: 0.5em;
            margin-bottom: 0em;
        }

        ul.empty {
            list-style-type: none;
        }

        ul.empty li {
            margin-top: .5em;
        }

        td.reference {
            padding-right: 1em;
            vertical-align: top;
        }

        .feedback {
            position: fixed;
            bottom: 5px;
            right: 5px;
        }

        .fbbutton {
            margin-left: 5px;
        }

        h1 a,
        h2 a,
        h3 a,
        h4 a,
        h5 a,
        h6 a {
            color: rgb(51, 51, 51);
        }

        span.tt {
            font: 11pt consolas, monospace;
            font-size-adjust: none;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="https://httpwg.org/assets/site.css">
    <link rel="Contents" href="#rfc.toc">
    <link rel="Author" href="#rfc.authors">
    <link rel="License" href="#rfc.copyrightnotice">
    <link rel="Chapter" title="1 Introduction" href="#rfc.section.1">
    <link rel="Chapter" title="2 Compression Process Overview" href="#rfc.section.2">
    <link rel="Chapter" title="3 Reference Tables" href="#rfc.section.3">
    <link rel="Chapter" title="4 Wire Format" href="#rfc.section.4">
    <link rel="Chapter" title="5 Configuration" href="#rfc.section.5">
    <link rel="Chapter" title="6 Error Handling" href="#rfc.section.6">
    <link rel="Chapter" title="7 Security Considerations" href="#rfc.section.7">
    <link rel="Chapter" title="8 IANA Considerations" href="#rfc.section.8">
    <link rel="Chapter" title="9 References" href="#rfc.section.9">
    <link rel="Appendix" title="A Static Table" href="#rfc.section.A">
    <link rel="Appendix" title="B Encoding and Decoding Examples" href="#rfc.section.B">
    <link rel="Appendix" title="C Sample Single-Pass Encoding Algorithm" href="#rfc.section.C">
    <link rel="Appendix" title="Acknowledgments" href="#rfc.section.unnumbered-4">
    <link href="https://dx.doi.org/10.17487/rfc9204" rel="alternate">
    <link href="urn:issn:2070-1721" rel="alternate">
    <link href="https://datatracker.ietf.org/doc/draft-ietf-quic-qpack-latest" rel="prev">
    <link rel="Alternate" title="Plain Text Version" href="http://www.ietf.org/rfc/rfc9204.txt">
    <link rel="Help" title="RFC-Editor's Status Page" href="https://www.rfc-editor.org/info/rfc9204">
    <meta name="viewport" content="initial-scale=1">
    <meta name="generator"
        content="https://github.com/mnot/RFCBootstrap XSLT vendor: Saxonica http://www.saxonica.com/">
    <meta name="keywords" content="compression, HTTP/3, HPACK, header, field, trailer">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.creator" content="Krasic, C.">
    <meta name="dcterms.creator" content="Bishop, M.">
    <meta name="dcterms.creator" content="Frindell, A.">
    <meta name="dcterms.identifier" content="urn:ietf:rfc:9204">
    <meta name="dcterms.issued" content="2022-06">
    <meta name="dcterms.abstract"
        content="This specification defines QPACK: a compression format for efficiently representing HTTP fields that is to be used in HTTP/3. This is a variation of HPACK compression that seeks to reduce head-of-line blocking.">
    <meta name="dcterms.isPartOf" content="urn:issn:2070-1721">
    <meta name="description"
        content="This specification defines QPACK: a compression format for efficiently representing HTTP fields that is to be used in HTTP/3. This is a variation of HPACK compression that seeks to reduce head-of-line blocking.">
</head>

<body onload="getMeta(9204,'rfc.meta');">
    <nav class="navbar navbar-dark bg-dark d-print-none navbar-expand-lg fixed-top ps-3 pe-3" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapse"
                aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <a class="navbar-brand" href="https://httpwg.org/"><img src="https://httpwg.org/assets/http.svg"
                    height="23"></a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse">

            <div class="navbar-nav me-auto">

                <a class="nav-item ms-1 text-white" href="https://httpwg.org/specs/">📄 Documentation</a>

                <div class="dropdown ms-4">
                    <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Work in
                        Progress</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item"><a href="https://httpwg.org/http-extensions/">HTTP Extensions</a></li>
                        <li class="dropdown-item"><a
                                href="https://github.com/httpwg/admin/issues?q=is%3Aissue+is%3Aopen+label%3Aadoption">Future
                                Work</a></li>
                    </ul>
                </div>

                <div class="dropdown ms-4">
                    <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Participate</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item"><a href="https://httpwg.org/about/">About the HTTP Working Group</a>
                        </li>
                        <li class="divider"></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/CONTRIBUTING.html">Contribution Policy</a>
                        </li>
                        <li class="dropdown-item"><a href="http://datatracker.ietf.org/wg/httpbis/charter/">WG
                                Charter</a></li>
                        <li class="dropdown-item"><a href="http://lists.w3.org/Archives/Public/ietf-http-wg/">Group
                                Mailing List 📨</a></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/wg-materials/">Meeting Materials</a></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/admin/editors/">Document Editor
                                Resources</a></li>
                    </ul>
                </div>
            </div>

        </div>
    </nav>
    <div class="container" id="top">
        <div class="row">
            <div class="col-lg-4 order-last d-none d-lg-block" id="sidebar" role="navigation">
                <div class="navbar">
                    <div class="navbar-brand"><a href="#top"><strong>RFC </strong>9204</a></div><br clear="all">
                    <div class="">
                        <div class="toc ">
                            <ul>
                                <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#introduction">導入</a>
                                    <ul>
                                        <li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#conventions-and-definitions">規約と定義</a></li>
                                        <li><a href="#rfc.section.1.2">1.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#notational-conventions">表記上の規約</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#compression-process-overview">圧縮プロセスの概要</a>
                                    <ul>
                                        <li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#encoder">エンコーダ</a>
                                            <ul>
                                                <li><a href="#rfc.section.2.1.1">2.1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#blocked-insertion">動的テーブル挿入の制限</a>
                                                </li>
                                                <li><a href="#rfc.section.2.1.2">2.1.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#blocked-streams">ブロックされたストリーム</a></li>
                                                <li><a href="#rfc.section.2.1.3">2.1.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#avoiding-flow-control-deadlocks">フロー制御デッドロックの回避</a></li>
                                                <li><a href="#rfc.section.2.1.4">2.1.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#known-received-count">既知の受信カウント</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#rfc.section.2.2">2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#decoder">デコーダ</a>
                                            <ul>
                                                <li><a href="#rfc.section.2.2.1">2.2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#blocked-decoding">ブロックされたデコード</a></li>
                                                <li><a href="#rfc.section.2.2.2">2.2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#state-synchronization">状態の同期</a></li>
                                                <li><a href="#rfc.section.2.2.3">2.2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#invalid-references">無効な参照</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#reference-tables">参照テーブル</a>
                                    <ul>
                                        <li><a href="#rfc.section.3.1">3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#header-table-static">静的テーブル</a></li>
                                        <li><a href="#rfc.section.3.2">3.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#header-table-dynamic">動的テーブル</a>
                                            <ul>
                                                <li><a href="#rfc.section.3.2.1">3.2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#dynamic-table-size">動的テーブルサイズ</a></li>
                                                <li><a href="#rfc.section.3.2.2">3.2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#eviction">動的テーブル容量と追い出し</a></li>
                                                <li><a href="#rfc.section.3.2.3">3.2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#maximum-dynamic-table-capacity">最大動的テーブル容量</a></li>
                                                <li><a href="#rfc.section.3.2.4">3.2.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#indexing">絶対インデックス</a></li>
                                                <li><a href="#rfc.section.3.2.5">3.2.5.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#relative-indexing">相対インデックス</a></li>
                                                <li><a href="#rfc.section.3.2.6">3.2.6.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#post-base">ポストベースインデックス</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#wire-format">ワイヤ形式</a>
                                    <ul>
                                        <li><a href="#rfc.section.4.1">4.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#primitives">原始型</a>
                                            <ul>
                                                <li><a href="#rfc.section.4.1.1">4.1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#prefixed-integers">プレフィックス付き整数</a></li>
                                                <li><a href="#rfc.section.4.1.2">4.1.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#string-literals">文字列リテラル</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#rfc.section.4.2">4.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#enc-dec-stream-def">エンコーダおよびデコーダストリーム</a></li>
                                        <li><a href="#rfc.section.4.3">4.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#encoder-instructions">エンコーダ命令</a>
                                            <ul>
                                                <li><a href="#rfc.section.4.3.1">4.3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#set-dynamic-capacity">動的テーブル容量の設定</a></li>
                                                <li><a href="#rfc.section.4.3.2">4.3.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#insert-with-name-reference">名前参照付き挿入</a></li>
                                                <li><a href="#rfc.section.4.3.3">4.3.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#insert-with-literal-name">リテラル名での挿入</a>
                                                </li>
                                                <li><a href="#rfc.section.4.3.4">4.3.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#duplicate">重複</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#rfc.section.4.4">4.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#decoder-instructions">デコーダ命令</a>
                                            <ul>
                                                <li><a href="#rfc.section.4.4.1">4.4.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#header-acknowledgment">セクション確認応答</a></li>
                                                <li><a href="#rfc.section.4.4.2">4.4.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#stream-cancellation">ストリームのキャンセル</a></li>
                                                <li><a href="#rfc.section.4.4.3">4.4.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#insert-count-increment">挿入カウント増分</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#rfc.section.4.5">4.5.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#field-line-representations">フィールド行の表現</a>
                                            <ul>
                                                <li><a href="#rfc.section.4.5.1">4.5.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#header-prefix">エンコードされたフィールドセクション接頭辞</a></li>
                                                <li><a href="#rfc.section.4.5.2">4.5.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#indexed-field-line">インデックス付きフィールド行</a></li>
                                                <li><a href="#rfc.section.4.5.3">4.5.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#indexed-field-line-with-post-base-index">ポストベースインデックスを用いたインデックス付きフィールド行</a>
                                                </li>
                                                <li><a href="#rfc.section.4.5.4">4.5.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#literal-name-reference">名前参照を用いたリテラルフィールド行</a></li>
                                                <li><a href="#rfc.section.4.5.5">4.5.5.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#literal-field-line-with-post-base-name-reference">ポストベース名前参照を用いたリテラルフィールド行</a>
                                                </li>
                                                <li><a href="#rfc.section.4.5.6">4.5.6.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#literal-field-line-with-literal-name">リテラル名を用いたリテラルフィールド行</a>
                                                </li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#configuration">設定</a>
                                </li>
                                <li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a href="#error-handling">エラー処理</a>
                                </li>
                                <li><a href="#rfc.section.7">7.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#security-considerations">セキュリティに関する考慮事項</a>
                                    <ul>
                                        <li><a href="#rfc.section.7.1">7.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#probing-dynamic-table-state">動的テーブル状態のプロービング</a>
                                            <ul>
                                                <li><a href="#rfc.section.7.1.1">7.1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#applicability-to-qpack-and-http">QPACK と HTTP への適用性</a>
                                                </li>
                                                <li><a href="#rfc.section.7.1.2">7.1.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#mitigation">緩和策</a></li>
                                                <li><a href="#rfc.section.7.1.3">7.1.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#never-indexed-literals">インデックスされないリテラル</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#rfc.section.7.2">7.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#static-huffman-encoding">静的ハフマン符号化</a></li>
                                        <li><a href="#rfc.section.7.3">7.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#memory-consumption">メモリ消費</a></li>
                                        <li><a href="#rfc.section.7.4">7.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#implementation-limits">実装上の制限</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.8">8.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-considerations">IANA
                                        に関する考慮事項</a>
                                    <ul>
                                        <li><a href="#rfc.section.8.1">8.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#settings-registration">設定の登録</a></li>
                                        <li><a href="#rfc.section.8.2">8.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#stream-type-registration">ストリームタイプの登録</a></li>
                                        <li><a href="#rfc.section.8.3">8.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#error-code-registration">エラーコードの登録</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.9">9.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references">参考文献</a>
                                    <ul>
                                        <li><a href="#rfc.section.9.1">9.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.references.2">規範的参考文献</a></li>
                                        <li><a href="#rfc.section.9.2">9.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.references.3">情報的参考文献</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.A">Appendix A.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#static-table">静的テーブル</a></li>
                                <li><a href="#rfc.section.B">Appendix B.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#encoding-and-decoding-examples">エンコード／デコード例</a>
                                    <ul>
                                        <li><a href="#rfc.section.B.1">B.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#literal-field-line-with-name-reference">名前参照付きリテラルフィールド行</a></li>
                                        <li><a href="#rfc.section.B.2">B.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#dynamic-table">動的テーブル</a></li>
                                        <li><a href="#rfc.section.B.3">B.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#speculative-insert">投機的挿入</a></li>
                                        <li><a href="#rfc.section.B.4">B.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#duplicate-instruction-stream-cancellation">重複命令、ストリームのキャンセル</a>
                                        </li>
                                        <li><a href="#rfc.section.B.5">B.5.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#dynamic-table-insert-eviction">動的テーブル挿入と追い出し</a>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.C">Appendix C.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#sample-single-pass-encoding-algorithm">単一パスエンコーディングアルゴリズムの例</a></li>
                                <li><a href="#acknowledgments">謝辞</a></li>
                                <li><a href="#rfc.authors">著者の連絡先</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-8 order-first main" role="main">
                <header>
                    <table class="table table-condensed header" id="rfc.headerblock">
                        <tbody>
                            <tr>
                                <td class="text-left">インターネット技術タスクフォース (IETF)</td>
                                <td class="text-right">C. Krasic</td>
                            </tr>
                            <tr>
                                <td class="text-left">Request for Comments: 9204</td>
                                <td class="text-right">M. Bishop</td>
                            </tr>
                            <tr>
                                <td class="text-left">カテゴリ: 標準トラック</td>
                                <td class="text-right">Akamai Technologies</td>
                            </tr>
                            <tr>
                                <td class="text-left">ISSN: 2070-1721</td>
                                <td class="text-right">A. Frindell, Editor</td>
                            </tr>
                            <tr>
                                <td class="text-left"></td>
                                <td class="text-right">Facebook</td>
                            </tr>
                            <tr>
                                <td class="text-left"></td>
                                <td class="text-right">2022年6月</td>
                            </tr>
                        </tbody>
                    </table>
                    <div id="rfc.title">
                        <h1>QPACK: HTTP/3 のフィールド圧縮</h1>
                    </div>
                </header>
                <hr>
                <h2 id="rfc.abstract"><a href="#rfc.abstract">概要</a></h2>
                <div class="lead">
                    <div id="rfc.abstract.p.1">
                        <p>本仕様は QPACK を定義します：HTTP/3 で使用される HTTP フィールドを効率的に表現するための圧縮形式です。これは HPACK
                            圧縮の変種であり、ヘッドオブラインブロッキング（Head-of-Line blocking）の低減を目指しています。</p>
                    </div>
                </div>
                <aside id="rfc.meta" class="alert alert-info"></aside>
                <section id="rfc.status">
                    <h2><a href="#rfc.status">本メモの状態</a></h2>
                    <div id="rfc.boilerplate.1.p.1">
                        <p>これはインターネット標準トラック文書です。</p>
                    </div>
                    <div id="rfc.boilerplate.1.p.2">
                        <p>この文書はインターネット技術タスクフォース (IETF) の成果物です。IETF コミュニティのコンセンサスを表しており、公開レビューを受け、Internet Engineering
                            Steering Group (IESG) によって出版が承認されています。インターネット標準に関する詳細は <a
                                href="https://www.rfc-editor.org/rfc/rfc7841.html#section-2">RFC 7841 のセクション 2</a>
                            を参照してください。
                        </p>
                    </div>
                    <div id="rfc.boilerplate.1.p.3">
                        <p>本文書の現在の状態、訂正情報 (errata)、およびフィードバックの提供方法に関する情報は <a
                                href="https://www.rfc-editor.org/info/rfc9204">https://www.rfc-editor.org/info/rfc9204</a>
                            で入手できます。
                        </p>
                    </div>
                </section>
                <section id="rfc.copyrightnotice">
                    <h2><a href="#rfc.copyrightnotice">Copyright Notice</a></h2>
                    <div id="rfc.boilerplate.2.p.1">
                        <p>Copyright (c) 2022 IETF Trust and the persons identified as the document authors. All rights
                            reserved.</p>
                    </div>
                    <div id="rfc.boilerplate.2.p.2">
                        <p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF
                            Documents (<a
                                href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>)
                            in effect on the date of publication of this document. Please review these documents
                            carefully, as they describe your rights and restrictions with respect to this document. Code
                            Components extracted from this document must include Revised BSD License text as described
                            in Section 4.e of the Trust Legal Provisions and are provided without warranty as described
                            in the Revised BSD License.</p>
                    </div>
                </section>
                <div class="toc d-lg-none">
                    <ul>
                        <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#introduction">導入</a>
                            <ul>
                                <li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#conventions-and-definitions">規約と定義</a></li>
                                <li><a href="#rfc.section.1.2">1.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#notational-conventions">表記上の規約</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a
                                href="#compression-process-overview">圧縮プロセスの概要</a>
                            <ul>
                                <li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a href="#encoder">エンコーダ</a>
                                    <ul>
                                        <li><a href="#rfc.section.2.1.1">2.1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#blocked-insertion">動的テーブル挿入の制限</a></li>
                                        <li><a href="#rfc.section.2.1.2">2.1.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#blocked-streams">ブロックされたストリーム</a></li>
                                        <li><a href="#rfc.section.2.1.3">2.1.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#avoiding-flow-control-deadlocks">フロー制御デッドロックの回避</a></li>
                                        <li><a href="#rfc.section.2.1.4">2.1.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#known-received-count">既知の受信カウント</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.2.2">2.2.</a>&nbsp;&nbsp;&nbsp;<a href="#decoder">デコーダ</a>
                                    <ul>
                                        <li><a href="#rfc.section.2.2.1">2.2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#blocked-decoding">ブロックされたデコード</a></li>
                                        <li><a href="#rfc.section.2.2.2">2.2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#state-synchronization">状態の同期</a></li>
                                        <li><a href="#rfc.section.2.2.3">2.2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#invalid-references">無効な参照</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a href="#reference-tables">参照テーブル</a>
                            <ul>
                                <li><a href="#rfc.section.3.1">3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#header-table-static">静的テーブル</a></li>
                                <li><a href="#rfc.section.3.2">3.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#header-table-dynamic">動的テーブル</a>
                                    <ul>
                                        <li><a href="#rfc.section.3.2.1">3.2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#dynamic-table-size">動的テーブルサイズ</a></li>
                                        <li><a href="#rfc.section.3.2.2">3.2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#eviction">動的テーブル容量と追い出し</a></li>
                                        <li><a href="#rfc.section.3.2.3">3.2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#maximum-dynamic-table-capacity">最大動的テーブル容量</a></li>
                                        <li><a href="#rfc.section.3.2.4">3.2.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#indexing">絶対インデックス</a></li>
                                        <li><a href="#rfc.section.3.2.5">3.2.5.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#relative-indexing">相対インデックス</a></li>
                                        <li><a href="#rfc.section.3.2.6">3.2.6.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#post-base">ポストベースインデックス</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#wire-format">ワイヤ形式</a>
                            <ul>
                                <li><a href="#rfc.section.4.1">4.1.</a>&nbsp;&nbsp;&nbsp;<a href="#primitives">原始型</a>
                                    <ul>
                                        <li><a href="#rfc.section.4.1.1">4.1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#prefixed-integers">プレフィックス付き整数</a></li>
                                        <li><a href="#rfc.section.4.1.2">4.1.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#string-literals">文字列リテラル</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.4.2">4.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#enc-dec-stream-def">エンコーダおよびデコーダストリーム</a></li>
                                <li><a href="#rfc.section.4.3">4.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#encoder-instructions">エンコーダ命令</a>
                                    <ul>
                                        <li><a href="#rfc.section.4.3.1">4.3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#set-dynamic-capacity">動的テーブル容量の設定</a></li>
                                        <li><a href="#rfc.section.4.3.2">4.3.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#insert-with-name-reference">名前参照付き挿入</a></li>
                                        <li><a href="#rfc.section.4.3.3">4.3.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#insert-with-literal-name">リテラル名での挿入</a></li>
                                        <li><a href="#rfc.section.4.3.4">4.3.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#duplicate">重複</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.4.4">4.4.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#decoder-instructions">デコーダ命令</a>
                                    <ul>
                                        <li><a href="#rfc.section.4.4.1">4.4.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#header-acknowledgment">セクション確認応答</a></li>
                                        <li><a href="#rfc.section.4.4.2">4.4.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#stream-cancellation">ストリームのキャンセル</a></li>
                                        <li><a href="#rfc.section.4.4.3">4.4.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#insert-count-increment">挿入カウント増分</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.4.5">4.5.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#field-line-representations">フィールド行の表現</a>
                                    <ul>
                                        <li><a href="#rfc.section.4.5.1">4.5.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#header-prefix">エンコードされたフィールドセクション接頭辞</a></li>
                                        <li><a href="#rfc.section.4.5.2">4.5.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#indexed-field-line">インデックス付きフィールド行</a></li>
                                        <li><a href="#rfc.section.4.5.3">4.5.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#indexed-field-line-with-post-base-index">ポストベースインデックスを用いたインデックス付きフィールド行</a>
                                        </li>
                                        <li><a href="#rfc.section.4.5.4">4.5.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#literal-name-reference">名前参照を用いたリテラルフィールド行</a></li>
                                        <li><a href="#rfc.section.4.5.5">4.5.5.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#literal-field-line-with-post-base-name-reference">ポストベース名前参照を用いたリテラルフィールド行</a>
                                        </li>
                                        <li><a href="#rfc.section.4.5.6">4.5.6.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#literal-field-line-with-literal-name">リテラル名を用いたリテラルフィールド行</a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#configuration">設定</a>
                        </li>
                        <li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a href="#error-handling">エラー処理</a></li>
                        <li><a href="#rfc.section.7">7.</a>&nbsp;&nbsp;&nbsp;<a
                                href="#security-considerations">セキュリティに関する考慮事項</a>
                            <ul>
                                <li><a href="#rfc.section.7.1">7.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#probing-dynamic-table-state">動的テーブル状態のプロービング</a>
                                    <ul>
                                        <li><a href="#rfc.section.7.1.1">7.1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#applicability-to-qpack-and-http">QPACK と HTTP への適用性</a></li>
                                        <li><a href="#rfc.section.7.1.2">7.1.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#mitigation">緩和策</a></li>
                                        <li><a href="#rfc.section.7.1.3">7.1.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#never-indexed-literals">インデックスされないリテラル</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.7.2">7.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#static-huffman-encoding">静的ハフマン符号化</a></li>
                                <li><a href="#rfc.section.7.3">7.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#memory-consumption">メモリ消費</a></li>
                                <li><a href="#rfc.section.7.4">7.4.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#implementation-limits">実装上の制限</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.8">8.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-considerations">IANA
                                に関する考慮事項</a>
                            <ul>
                                <li><a href="#rfc.section.8.1">8.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#settings-registration">設定の登録</a></li>
                                <li><a href="#rfc.section.8.2">8.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#stream-type-registration">ストリームタイプの登録</a></li>
                                <li><a href="#rfc.section.8.3">8.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#error-code-registration">エラーコードの登録</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.9">9.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references">参考文献</a>
                            <ul>
                                <li><a href="#rfc.section.9.1">9.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references.2">規範的参考文献</a></li>
                                <li><a href="#rfc.section.9.2">9.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references.3">情報的参考文献</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.A">Appendix A.</a>&nbsp;&nbsp;&nbsp;<a href="#static-table">静的テーブル</a>
                        </li>
                        <li><a href="#rfc.section.B">Appendix B.</a>&nbsp;&nbsp;&nbsp;<a
                                href="#encoding-and-decoding-examples">エンコード／デコード例</a>
                            <ul>
                                <li><a href="#rfc.section.B.1">B.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#literal-field-line-with-name-reference">名前参照付きリテラルフィールド行</a></li>
                                <li><a href="#rfc.section.B.2">B.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#dynamic-table">動的テーブル</a></li>
                                <li><a href="#rfc.section.B.3">B.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#speculative-insert">投機的挿入</a></li>
                                <li><a href="#rfc.section.B.4">B.4.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#duplicate-instruction-stream-cancellation">重複命令、ストリームのキャンセル</a></li>
                                <li><a href="#rfc.section.B.5">B.5.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#dynamic-table-insert-eviction">動的テーブル挿入と追い出し</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.C">Appendix C.</a>&nbsp;&nbsp;&nbsp;<a
                                href="#sample-single-pass-encoding-algorithm">単一パスエンコーディングアルゴリズムの例</a>
                        </li>
                        <li><a href="#acknowledgments">謝辞</a></li>
                        <li><a href="#rfc.authors">著者の連絡先</a></li>
                    </ul>
                </div>
                <hr class="hidden-print">
                <section id="introduction">
                    <h2 id="rfc.section.1" class="np"><a href="#rfc.section.1">1.</a>&nbsp;<a
                            href="#introduction">導入</a></h2>
                    <div id="rfc.section.1.p.1">
                        <p>The QUIC transport protocol (<a href="#QUIC-TRANSPORT"><cite
                                    title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>)
                            は HTTP セマンティクスをサポートするよう設計されており、その設計は多くの HTTP/2 (<a href="#HTTP2"><cite
                                    title="HTTP/2">[HTTP/2]</cite></a>) の機能を包含します。HTTP/2 はヘッダとトレーラ部分の圧縮に HPACK (<a
                                href="#RFC7541"><cite title="HPACK: Header Compression for HTTP/2">[RFC7541]</cite></a>)
                            を使用します。もし HPACK を HTTP/3 (<a href="#HTTP3"><cite title="HTTP/3">[HTTP/3]</cite></a>)
                            に使用した場合、すべてのストリーム上のフレームに対する総順序が暗黙の前提となるため、フィールドセクションに対してヘッドオブラインブロッキングを引き起こします。</p>
                    </div>
                    <div id="rfc.section.1.p.2">
                        <p>QPACK は HPACK
                            のコア概念を再利用しますが、順序外配信が存在する状況でも正しく動作するよう再設計されています。実装がヘッドオブラインブロッキングに対する耐性と最適な圧縮率の間でバランスをとる柔軟性を持てるようにしています。設計目標は、同じ損失条件下で
                            HPACK とほぼ同等の圧縮率に近づきつつ、はるかに少ないヘッドオブラインブロッキングを実現することです。</p>
                    </div>
                    <section id="conventions-and-definitions">
                        <h3 id="rfc.section.1.1"><a href="#rfc.section.1.1">1.1.</a>&nbsp;<a
                                href="#conventions-and-definitions">規約と定義</a></h3>
                        <div id="rfc.section.1.1.p.1">
                            <p>本書におけるキーワード "<em class="bcp14">MUST</em>", "<em class="bcp14">MUST NOT</em>", "<em
                                    class="bcp14">REQUIRED</em>", "<em class="bcp14">SHALL</em>", "<em
                                    class="bcp14">SHALL NOT</em>", "<em class="bcp14">SHOULD</em>", "<em
                                    class="bcp14">SHOULD NOT</em>", "<em class="bcp14">RECOMMENDED</em>", "<em
                                    class="bcp14">NOT RECOMMENDED</em>", "<em class="bcp14">MAY</em>", および "<em
                                    class="bcp14">OPTIONAL</em>" は、すべて大文字で現れる場合に限り、BCP 14 の記述（<a href="#RFC2119"><cite
                                        title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</cite></a>
                                および <a href="#RFC8174"><cite
                                        title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">[RFC8174]</cite></a>）に従って解釈されます。
                            </p>
                        </div>
                        <div id="rfc.section.1.1.p.2" class="avoidbreakafter">
                            <p>本書で使用する用語は次の通りです。</p>
                        </div>
                        <div id="rfc.section.1.1.p.3">
                            <dl>
                                <dt>HTTP fields:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>HTTP
                                        メッセージの一部として送信されるメタデータ。ヘッダフィールドとトレーラフィールドの両方を含みます。一般に「headers」と呼ばれることが多いですが、本書では一般性を持たせるために「fields」を使用します。
                                    </div>
                                </dd>
                                <dt>HTTP field line:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>HTTP フィールドセクションの一部として送信される名前と値のペア。詳細は <a
                                            href="https://www.rfc-editor.org/rfc/rfc9110.html#section-6.3">RFC 9110
                                            セクション 6.3</a> および <a
                                            href="https://www.rfc-editor.org/rfc/rfc9110.html#section-6.5">同セクション
                                            6.5</a> を参照してください。</div>
                                </dd>
                                <dt>HTTP field value:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>フィールド名に関連するデータで、そのセクション内で同じ名前を持つすべてのフィールド行値をコンマで連結したものです。</div>
                                </dd>
                                <dt>Field section:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>HTTP メッセージに関連付けられた順序付けられた HTTP
                                        フィールド行の集合。複数の同一名のフィールド行や重複するフィールド行を含むことがあります。HTTP
                                        メッセージはヘッダとトレーラの両方のセクションを含むことができます。</div>
                                </dd>
                                <dt>Representation:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>フィールド行を表現する命令であり、動的テーブルや静的テーブルへの参照によって表されることがあります。</div>
                                </dd>
                                <dt>Encoder:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>フィールドセクションをエンコードする実装。</div>
                                </dd>
                                <dt>Decoder:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>エンコードされたフィールドセクションをデコードする実装。</div>
                                </dd>
                                <dt>Absolute Index:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>動的テーブル内の各エントリに対する一意のインデックス。</div>
                                </dd>
                                <dt>Base:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>相対インデックスやポストベースインデックスの基準点。動的テーブルエントリを参照する表現は Base を基準とします。</div>
                                </dd>
                                <dt>Insert Count:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>動的テーブルに挿入されたエントリの総数。</div>
                                </dd>
                            </dl>
                        </div>
                        <div id="rfc.section.1.1.p.4">
                            <p>QPACK は名前であり、略語ではないことに注意してください。</p>
                        </div>
                    </section>
                    <section id="notational-conventions">
                        <h3 id="rfc.section.1.2"><a href="#rfc.section.1.2">1.2.</a>&nbsp;<a
                                href="#notational-conventions">表記上の規約</a></h3>
                        <div id="rfc.section.1.2.p.1" class="avoidbreakafter">
                            <p>本書の図は <a href="https://www.rfc-editor.org/rfc/rfc2360.html#section-3.1">RFC 2360 セクション
                                    3.1</a> の形式を使用し、次の追加的な規約を用います。</p>
                        </div>
                        <div id="rfc.section.1.2.p.2">
                            <dl>
                                <dt>x (A)</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>x が A ビット長であることを示します。</div>
                                </dd>
                                <dt>x (A+)</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>x が <a href="#prefixed-integers" title="Prefixed Integers">セクション 4.1.1</a>
                                        で定義されたプレフィックス付き整数エンコーディングを使用し、A ビットのプレフィックスで始まることを示します。</div>
                                </dd>
                                <dt>x ...</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>x が可変長で領域の終わりまで続くことを示します。</div>
                                </dd>
                            </dl>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="compression-process-overview">
                    <h2 id="rfc.section.2" class="np"><a href="#rfc.section.2">2.</a>&nbsp;<a
                            href="#compression-process-overview">圧縮プロセスの概要</a></h2>
                    <div id="rfc.section.2.p.1">
                        <p>HPACK と同様に、QPACK はフィールド行（「headers」）をインデックスに関連付けるために二つのテーブルを使用します。静的テーブル（<a
                                href="#header-table-static" title="Static Table">セクション
                                3.1</a>）は事前定義され、一般的なヘッダフィールド行（その一部は空の値を持つ）を含みます。動的テーブル（<a href="#header-table-dynamic"
                                title="Dynamic Table">セクション
                                3.2</a>）は接続の経過とともに構築され、エンコーダはこれを用いてエンコードされたフィールドセクション内のヘッダおよびトレーラのフィールド行をインデックスできます。</p>
                    </div>
                    <div id="rfc.section.2.p.2">
                        <p>QPACK はエンコーダからデコーダへ、また逆方向へ命令を送るための一方向ストリームを定義します。</p>
                    </div>
                    <section id="encoder">
                        <h3 id="rfc.section.2.1"><a href="#rfc.section.2.1">2.1.</a>&nbsp;<a href="#encoder">エンコーダ</a>
                        </h3>
                        <div id="rfc.section.2.1.p.1">
                            <p>エンコーダはヘッダまたはトレーラセクションを一連の表現に変換し、リスト内の各フィールド行に対してインデックス表現かリテラル表現のいずれかを出力します（<a
                                    href="#field-line-representations" title="Field Line Representations">セクション
                                    4.5</a>参照）。インデックス表現は、リテラルの名前および場合によっては値を静的テーブルまたは動的テーブルへのインデックスに置き換えることで高い圧縮を達成します。静的テーブルへの参照やリテラル表現は動的な状態を必要とせず、ヘッドオブラインブロッキングのリスクを伴いません。動的テーブルへの参照は、エンコーダがそのエントリがデコーダ側で利用可能であることを示す確認を受け取っていない場合にはヘッドオブラインブロッキングのリスクを伴います。
                            </p>
                        </div>
                        <div id="rfc.section.2.1.p.2">
                            <p>エンコーダは、圧縮しているフィールド行に限定せず、任意のエントリを動的テーブルに挿入しても <em class="bcp14">MAY</em> です。</p>
                        </div>
                        <div id="rfc.section.2.1.p.3">
                            <p>QPACK は各フィールドセクション内のフィールド行の順序を保持します。エンコーダは入力フィールドセクションに現れる順序でフィールド表現を出力しなければなりません（<em
                                    class="bcp14">MUST</em>）。</p>
                        </div>
                        <div id="rfc.section.2.1.p.4">
                            <p>QPACK はオプションの状態追跡の負担をエンコーダ側に置くよう設計されており、その結果デコーダは比較的単純になります。</p>
                        </div>
                        <section id="blocked-insertion">
                            <h4 id="rfc.section.2.1.1"><a href="#rfc.section.2.1.1">2.1.1.</a>&nbsp;<a
                                    href="#blocked-insertion">動的テーブル挿入の制限</a></h4>
                            <div id="rfc.section.2.1.1.p.1">
                                <p>テーブルに追い出せないエントリが含まれている場合、新しいエントリを動的テーブルに挿入できないことがあります。</p>
                            </div>
                            <div id="rfc.section.2.1.1.p.2">
                                <p>動的テーブルのエントリは、挿入直後に直ちに追い出せない場合があります（参照されていない場合でも）。一度動的テーブルエントリの挿入が確認され、かつ未確認の表現に対する未処理の参照が存在しない場合、そのエントリは追い出し可能になります。エンコーダストリーム上の参照は、当該エントリを追い出す命令が処理される前に必ず処理されることが保証されるため、エントリの追い出しを妨げることはありません。
                                </p>
                            </div>
                            <div id="rfc.section.2.1.1.p.3">
                                <p>もし動的テーブルに他のエントリを追い出さずには新しいエントリを格納する余地がなく、追い出されるべきエントリが追い出し可能でない場合、エンコーダはそのエントリ（既存エントリの重複を含む）を動的テーブルに挿入してはなりません（<em
                                        class="bcp14">MUST
                                        NOT</em>）。これを回避するには、動的テーブルを使用するエンコーダは、デコーダが確認するまで各フィールドセクションによって参照される動的テーブルエントリを追跡しておく必要があります（<a
                                        href="#header-acknowledgment" title="Section Acknowledgment">セクション 4.4.1</a>参照）。
                                </p>
                            </div>
                            <section id="avoiding-prohibited-insertions">
                                <h5 id="rfc.section.2.1.1.1"><a href="#rfc.section.2.1.1.1">2.1.1.1.</a>&nbsp;<a
                                        href="#avoiding-prohibited-insertions">禁止される挿入の回避</a></h5>
                                <div id="rfc.section.2.1.1.1.p.1">
                                    <p>エンコーダが新しいエントリを追加できない状況を防ぐために、追い出しに近いエントリを参照することを避けることができます。そのようなエントリを参照する代わりに、エンコーダは
                                        Duplicate 命令（<a href="#duplicate" title="Duplicate">セクション
                                            4.3.4</a>）を出力し、代わりにその重複を参照することができます。</p>
                                </div>
                                <div id="rfc.section.2.1.1.1.p.2">
                                    <p>どのエントリが追い出しに近すぎるかを決定するのはエンコーダの好みです。一つのヒューリスティックは、動的テーブル内で固定量の利用可能空間を目標にすることです：未使用空間か、非ブロッキングなエントリを追い出すことで回収できる空間のどちらかです。これを実現するために、エンコーダは
                                        draining index（ドレイニングインデックス）を維持することができます。これはエンコーダが参照を出力する動的テーブル内での最小の絶対インデックス（<a
                                            href="#indexing" title="Absolute Indexing">セクション
                                            3.2.4</a>）です。新しいエントリが挿入されると、エンコーダは参照しないテーブル領域を維持するためにドレイニングインデックスを増加させます。もしエンコーダがドレイニングインデックスより小さい絶対インデックスのエントリへの新しい参照を作らなければ、それらのエントリへの未確認参照数は最終的に
                                        0 になり、追い出し可能になります。</p>
                                </div>
                                <div id="fig-draining-index"></div>
                                <div id="rfc.figure.1">
                                    <div>
                                        <pre>
             &lt;-- Newer Entries          Older Entries --&gt;
               (Larger Indices)       (Smaller Indices)
   +--------+---------------------------------+----------+
   | Unused |          Referenceable          | Draining |
   | Space  |             Entries             | Entries  |
   +--------+---------------------------------+----------+
            ^                                 ^          ^
            |                                 |          |
      Insertion Point                 Draining Index  Dropping
                                                       Point
</pre>
                                    </div>
                                </div>
                                <p class="figure">図 1: ドレイニング動的テーブルエントリ</p>
                            </section>
                        </section>
                        <section id="blocked-streams">
                            <h4 id="rfc.section.2.1.2"><a href="#rfc.section.2.1.2">2.1.2.</a>&nbsp;<a
                                    href="#blocked-streams">ブロックされたストリーム</a></h4>
                            <div id="rfc.section.2.1.2.p.1">
                                <p>QUIC は異なるストリーム上のデータ間の順序を保証しないため、デコーダはまだ受け取っていない動的テーブルエントリを参照する表現に遭遇することがあります。</p>
                            </div>
                            <div id="rfc.section.2.1.2.p.2">
                                <p>各エンコードされたフィールドセクションは Required Insert Count（<a href="#header-prefix"
                                        title="Encoded Field Section Prefix">セクション
                                        4.5.1</a>）を含みます。これはそのフィールドセクションをデコードするために必要となる可能性のある Insert Count
                                    の最小値です。動的テーブルへの参照を用いたフィールドセクションの場合、Required Insert Count
                                    は参照されたすべての動的テーブルエントリの最大絶対インデックスより 1
                                    大きい値です。動的テーブルへの参照を含まないエンコード済みフィールドセクションでは、Required Insert Count は 0 です。</p>
                            </div>
                            <div id="rfc.section.2.1.2.p.3">
                                <p>デコーダが自身の Insert Count より大きい Required Insert Count
                                    を持つエンコード済みフィールドセクションを受け取った場合、そのストリームは直ちには処理できず「blocked（ブロック）」と見なされます（<a
                                        href="#blocked-decoding" title="Blocked Decoding">セクション 2.2.1</a>参照）。</p>
                            </div>
                            <div id="rfc.section.2.1.2.p.4">
                                <p>デコーダは SETTINGS_QPACK_BLOCKED_STREAMS 設定を用いてブロック可能なストリーム数の上限を指定します（<a
                                        href="#configuration" title="Configuration">セクション
                                        5</a>参照）。エンコーダは常に、潜在的にブロックされ得るストリームの数を SETTINGS_QPACK_BLOCKED_STREAMS
                                    の値に制限しなければなりません（<em
                                        class="bcp14">MUST</em>）。もしデコーダが約束した数より多くのブロックされたストリームに遭遇した場合、これは
                                    QPACK_DECOMPRESSION_FAILED 型の接続エラーとして扱わなければなりません（<em class="bcp14">MUST</em>）。</p>
                            </div>
                            <div id="rfc.section.2.1.2.p.5">
                                <p>デコーダが実際にすべての危険なストリームでブロック状態になるとは限らない点に注意してください。</p>
                            </div>
                            <div id="rfc.section.2.1.2.p.6">
                                <p>エンコーダはストリームがブロックされるリスクを取るかどうかを決定できます。SETTINGS_QPACK_BLOCKED_STREAMS
                                    の値が許すなら、まだ転送中の動的テーブルエントリを参照することで圧縮効率を改善できることが多いですが、損失や順序入れ替えが発生するとデコーダ側でストリームがブロックされる可能性があります。エンコーダは確認済みの動的テーブルエントリのみを参照することでブロッキングのリスクを避けることができますが、その場合はリテラルを使用することになり得ます。リテラルはエンコード済みフィールドセクションを大きくするため、エンコーダが輻輳やフロー制御の制限でブロックされる原因となることがあります。
                                </p>
                            </div>
                        </section>
                        <section id="avoiding-flow-control-deadlocks">
                            <h4 id="rfc.section.2.1.3"><a href="#rfc.section.2.1.3">2.1.3.</a>&nbsp;<a
                                    href="#avoiding-flow-control-deadlocks">フロー制御デッドロックの回避</a></h4>
                            <div id="rfc.section.2.1.3.p.1">
                                <p>フロー制御によって制限されたストリームに命令を書き込むとデッドロックが発生する可能性があります。</p>
                            </div>
                            <div id="rfc.section.2.1.3.p.2">
                                <p>デコーダは必要な更新がエンコーダストリーム上で受信されるまで、エンコード済みフィールドセクションを運ぶストリームへのフロー制御クレジットの発行を停止するかもしれません。もしエンコーダストリーム（または接続全体）へのフロー制御クレジットの付与が、エンコード済みフィールドセクションを運ぶストリーム上のデータの消費と解放に依存するなら、デッドロックが生じる可能性があります。
                                </p>
                            </div>
                            <div id="rfc.section.2.1.3.p.3">
                                <p>一般に、大きな命令を含むストリームは、その命令が完全に受信されるまでデコーダがフロー制御クレジットを保留するとデッドロック状態になるかもしれません。</p>
                            </div>
                            <div id="rfc.section.2.1.3.p.4">
                                <p>これらのデッドロックを避けるために、エンコーダは命令全体に対して十分なストリームおよび接続のフロー制御クレジットが利用可能でない限り命令を書き込むべきではありません（<em
                                        class="bcp14">SHOULD NOT</em>）。</p>
                            </div>
                        </section>
                        <section id="known-received-count">
                            <h4 id="rfc.section.2.1.4"><a href="#rfc.section.2.1.4">2.1.4.</a>&nbsp;<a
                                    href="#known-received-count">既知の受信カウント</a></h4>
                            <div id="rfc.section.2.1.4.p.1">
                                <p>Known Received Count
                                    はデコーダが確認した動的テーブルへの挿入および複製の総数です。エンコーダはどの動的テーブルエントリを参照してもストリームをブロックしないかを識別するために Known
                                    Received Count を追跡します。デコーダは Insert Count Increment 命令を送るために Known Received Count
                                    を追跡します。</p>
                            </div>
                            <div id="rfc.section.2.1.4.p.2">
                                <p>セクション確認応答命令（<a href="#header-acknowledgment" title="Section Acknowledgment">セクション
                                        4.4.1</a>）は、デコーダがそのフィールドセクションをデコードするのに必要なすべての動的テーブル状態を受信したことを意味します。もし確認されたフィールドセクションの
                                    Required Insert Count が現在の Known Received Count より大きければ、Known Received Count はその
                                    Required Insert Count に更新されます。</p>
                            </div>
                            <div id="rfc.section.2.1.4.p.3">
                                <p>Insert Count Increment 命令（<a href="#insert-count-increment"
                                        title="Insert Count Increment">セクション 4.4.3</a>）はその Increment パラメータによって Known
                                    Received Count を増加させます。詳細は <a href="#new-table-entries"
                                        title="New Table Entries">セクション 2.2.2.3</a> を参照してください。</p>
                            </div>
                        </section>
                    </section>
                    <section id="decoder">
                        <h3 id="rfc.section.2.2"><a href="#rfc.section.2.2">2.2.</a>&nbsp;<a href="#decoder">デコーダ</a>
                        </h3>
                        <div id="rfc.section.2.2.p.1">
                            <p>HPACK
                                と同様に、デコーダは一連の表現を処理して対応するフィールドセクションを出力します。また、動的テーブルを変更するエンコーダストリーム上の命令も処理します。エンコード済みフィールドセクションとエンコーダストリーム命令は別々のストリームで到着する点に注意してください。これは
                                HPACK と異なり、HPACK ではヘッダブロック内に動的テーブルを変更する命令が含まれ得て、HPACK 命令の専用ストリームはありません。</p>
                        </div>
                        <div id="rfc.section.2.2.p.2">
                            <p>デコーダは、表現が出現する順序でフィールド行を出力しなければなりません（<em class="bcp14">MUST</em>）。</p>
                        </div>
                        <section id="blocked-decoding">
                            <h4 id="rfc.section.2.2.1"><a href="#rfc.section.2.2.1">2.2.1.</a>&nbsp;<a
                                    href="#blocked-decoding">ブロックされたデコード</a></h4>
                            <div id="rfc.section.2.2.1.p.1">
                                <p>エンコード済みフィールドセクションを受信すると、デコーダは Required Insert Count を調べます。Required Insert Count
                                    がデコーダの Insert Count
                                    以下であれば、そのフィールドセクションは直ちに処理できます。そうでなければ、そのフィールドセクションを受信したストリームはブロックされます。</p>
                            </div>
                            <div id="rfc.section.2.2.1.p.2">
                                <p>ブロック中、エンコード済みフィールドセクションのデータはブロックされたストリームのフロー制御ウィンドウ内に残すべきです（<em
                                        class="bcp14">SHOULD</em>）。このデータはストリームがアンブロックになるまで使用できず、フロー制御を早期に解放するとデコーダがメモリ枯渇攻撃に脆弱になります。あるストリームがアンブロックされるのは、デコーダがそのストリームから読み始めたすべてのエンコード済みフィールドセクションに対して
                                    Insert Count が Required Insert Count 以上になったときです。</p>
                            </div>
                            <div id="rfc.section.2.2.1.p.3">
                                <p>エンコード済みフィールドセクションを処理する際、デコーダは Required Insert Count
                                    が当該フィールドセクションをデコードするのに必要な最小値に等しいことを期待します（<a href="#blocked-streams"
                                        title="Blocked Streams">セクション 2.1.2</a>参照）。もし予想より小さい Required Insert Count
                                    に遭遇した場合、デコーダは QPACK_DECOMPRESSION_FAILED 型の接続エラーとして扱わなければなりません（<em
                                        class="bcp14">MUST</em>）。もし予想より大きい Required Insert Count に遭遇した場合、デコーダは
                                    QPACK_DECOMPRESSION_FAILED 型の接続エラーとして扱ってもよい（<em class="bcp14">MAY</em>）です。</p>
                            </div>
                        </section>
                        <section id="state-synchronization">
                            <h4 id="rfc.section.2.2.2"><a href="#rfc.section.2.2.2">2.2.2.</a>&nbsp;<a
                                    href="#state-synchronization">状態の同期</a></h4>
                            <div id="rfc.section.2.2.2.p.1">
                                <p>デコーダはデコーダストリーム上でデコーダ命令（<a href="#decoder-instructions"
                                        title="Decoder Instructions">セクション 4.4</a>）を発行することで次のイベントを通知します。</p>
                            </div>
                            <section id="completed-processing-of-a-field-section">
                                <h5 id="rfc.section.2.2.2.1"><a href="#rfc.section.2.2.2.1">2.2.2.1.</a>&nbsp;<a
                                        href="#completed-processing-of-a-field-section">フィールドセクションの処理完了</a></h5>
                                <div id="rfc.section.2.2.2.1.p.1">
                                    <p>デコーダが動的テーブル参照を含む表現でエンコードされたフィールドセクションのデコードを終了した後、デコーダはセクション確認応答命令（<a
                                            href="#header-acknowledgment" title="Section Acknowledgment">セクション
                                            4.4.1</a>）を発行しなければなりません（<em
                                            class="bcp14">MUST</em>）。中間応答、トレーラ、プッシュされたリクエストなどのケースでは、ストリームが複数のフィールドセクションを運ぶことがあります。エンコーダは各セクション確認応答命令を、そのストリーム上で送信された動的テーブル参照を含む最も古い未確認フィールドセクションの確認として解釈します。
                                    </p>
                                </div>
                            </section>
                            <section id="abandonment-of-a-stream">
                                <h5 id="rfc.section.2.2.2.2"><a href="#rfc.section.2.2.2.2">2.2.2.2.</a>&nbsp;<a
                                        href="#abandonment-of-a-stream">ストリームの放棄</a></h5>
                                <div id="rfc.section.2.2.2.2.p.1">
                                    <p>エンドポイントがストリームの終端前にストリームリセットを受け取った場合、あるいはそのストリーム上のすべてのエンコード済みフィールドセクションが処理される前に読み取りを放棄した場合、デコーダはストリームキャンセル命令を生成します（<a
                                            href="#stream-cancellation" title="Stream Cancellation">セクション
                                            4.4.2</a>参照）。これは当該ストリーム上の動的テーブルへのすべての参照がもはや未処理でないことをエンコーダに通知します。最大動的テーブル容量（<a
                                            href="#maximum-dynamic-table-capacity"
                                            title="Maximum Dynamic Table Capacity">セクション 3.2.3</a>）が 0
                                        のデコーダは、エンコーダが動的テーブル参照を持ち得ないため、ストリームキャンセルを送らないことができます（<em
                                            class="bcp14">MAY</em>）。ただし、エンコーダはこの命令から動的テーブルの更新が受信されたと推測することはできません。</p>
                                </div>
                                <div id="rfc.section.2.2.2.2.p.2">
                                    <p>セクション確認応答およびストリームキャンセル命令は、エンコーダが動的テーブル内のエントリへの参照を削除できるようにします。既知の受信カウント（Known
                                        Received Count）より小さい絶対インデックスのエントリが参照数 0 になった場合、それは追い出し可能とみなされます（<a
                                            href="#blocked-insertion" title="Limits on Dynamic Table Insertions">セクション
                                            2.1.1</a>参照）。</p>
                                </div>
                            </section>
                            <section id="new-table-entries">
                                <h5 id="rfc.section.2.2.2.3"><a href="#rfc.section.2.2.2.3">2.2.2.3.</a>&nbsp;<a
                                        href="#new-table-entries">新しいテーブルエントリ</a></h5>
                                <div id="rfc.section.2.2.2.3.p.1">
                                    <p>エンコーダストリームで新しいテーブルエントリを受信した後、デコーダはいつ Insert Count Increment 命令を発行するかを選択します（<a
                                            href="#insert-count-increment" title="Insert Count Increment">セクション
                                            4.4.3</a>参照）。新しい動的テーブルエントリごとにこの命令を発行すればエンコーダに最も迅速なフィードバックを提供しますが、他のデコーダフィードバックと冗長になる可能性があります。Insert
                                        Count Increment 命令を遅らせることで、デコーダは複数の Insert Count Increment
                                        命令をまとめるか、あるいはそれらをセクション確認応答で置き換えることができます（<a href="#header-acknowledgment"
                                            title="Section Acknowledgment">セクション
                                            4.4.1</a>参照）。しかし、遅らせすぎるとエンコーダがエントリの確認を待って使用する場合に圧縮効率の低下を招く可能性があります。</p>
                                </div>
                            </section>
                        </section>
                        <section id="invalid-references">
                            <h4 id="rfc.section.2.2.3"><a href="#rfc.section.2.2.3">2.2.3.</a>&nbsp;<a
                                    href="#invalid-references">無効な参照</a></h4>
                            <div id="rfc.section.2.2.3.p.1">
                                <p>デコーダがフィールド行表現内で、既に追い出された動的テーブルエントリ、または宣言された Required Insert Count（<a
                                        href="#header-prefix" title="Encoded Field Section Prefix">セクション
                                        4.5.1</a>）以上の絶対インデックスを参照する場合、デコーダはこれを QPACK_DECOMPRESSION_FAILED
                                    型の接続エラーとして扱わなければなりません（<em class="bcp14">MUST</em>）。</p>
                            </div>
                            <div id="rfc.section.2.2.3.p.2">
                                <p>デコーダがエンコーダ命令の参照で既に追い出された動的テーブルエントリに遭遇した場合、デコーダはこれを QPACK_ENCODER_STREAM_ERROR
                                    型の接続エラーとして扱わなければなりません（<em class="bcp14">MUST</em>）。</p>
                            </div>
                        </section>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="reference-tables">
                    <h2 id="rfc.section.3" class="np"><a href="#rfc.section.3">3.</a>&nbsp;<a
                            href="#reference-tables">参照テーブル</a></h2>
                    <div id="rfc.section.3.p.1">
                        <p>HPACK と異なり、QPACK の静的テーブルと動的テーブルのエントリは別々にアドレス指定されます。以下の節では各テーブル内のエントリがどのようにアドレス指定されるかを説明します。
                        </p>
                    </div>
                    <section id="header-table-static">
                        <h3 id="rfc.section.3.1"><a href="#rfc.section.3.1">3.1.</a>&nbsp;<a
                                href="#header-table-static">静的テーブル</a></h3>
                        <div id="rfc.section.3.1.p.1">
                            <p>静的テーブルは事前定義されたフィールド行の一覧で構成され、それぞれに時間を通じて固定のインデックスが割り当てられます。そのエントリは <a
                                    href="#static-table" title="Static Table">付録 A</a> に定義されています。</p>
                        </div>
                        <div id="rfc.section.3.1.p.2">
                            <p>静的テーブル内のすべてのエントリには名前と値があります。ただし、値は空（長さ 0）であり得ます。各エントリは一意のインデックスで識別されます。</p>
                        </div>
                        <div id="rfc.section.3.1.p.3">
                            <p>QPACK の静的テーブルは 0 からインデックスされるのに対し、HPACK の静的テーブルは 1 からインデックスされる点に注意してください。</p>
                        </div>
                        <div id="rfc.section.3.1.p.4">
                            <p>デコーダがフィールド行表現内で無効な静的テーブルインデックスに遭遇した場合、これは QPACK_DECOMPRESSION_FAILED
                                型の接続エラーとして扱わなければなりません（<em class="bcp14">MUST</em>）。このインデックスがエンコーダストリーム上で受信された場合は、これは
                                QPACK_ENCODER_STREAM_ERROR 型の接続エラーとして扱わなければなりません（<em class="bcp14">MUST</em>）。</p>
                        </div>
                    </section>
                    <section id="header-table-dynamic">
                        <h3 id="rfc.section.3.2"><a href="#rfc.section.3.2">3.2.</a>&nbsp;<a
                                href="#header-table-dynamic">動的テーブル</a></h3>
                        <div id="rfc.section.3.2.p.1">
                            <p>動的テーブルは先入れ先出し順で維持されるフィールド行の一覧で構成されます。QPACK
                                のエンコーダとデコーダは最初は空の共有動的テーブルを持ちます。エンコーダは動的テーブルにエントリを追加し、それらをエンコーダストリーム上の命令を介してデコーダに送信します（<a
                                    href="#encoder-instructions" title="Encoder Instructions">セクション 4.3</a>参照）。</p>
                        </div>
                        <div id="rfc.section.3.2.p.2">
                            <p>動的テーブルは重複するエントリ（同じ名前かつ同じ値を持つエントリ）を含むことができます。したがって、重複エントリはデコーダによってエラーとして扱われてはなりません（<em
                                    class="bcp14">MUST NOT</em>）。</p>
                        </div>
                        <div id="rfc.section.3.2.p.3">
                            <p>動的テーブルのエントリは空の値を持つことができます。</p>
                        </div>
                        <section id="dynamic-table-size">
                            <h4 id="rfc.section.3.2.1"><a href="#rfc.section.3.2.1">3.2.1.</a>&nbsp;<a
                                    href="#dynamic-table-size">動的テーブルのサイズ</a></h4>
                            <div id="rfc.section.3.2.1.p.1">
                                <p>動的テーブルのサイズは、そのエントリのサイズの合計です。</p>
                            </div>
                            <div id="rfc.section.3.2.1.p.2">
                                <p>エントリのサイズは、名前のバイト長、値のバイト長、および追加の 32 バイトの合計です。エントリのサイズは名前と値の長さをハフマン符号化を適用しない状態で計算します。
                                </p>
                            </div>
                        </section>
                        <section id="eviction">
                            <h4 id="rfc.section.3.2.2"><a href="#rfc.section.3.2.2">3.2.2.</a>&nbsp;<a
                                    href="#eviction">動的テーブル容量と追い出し</a></h4>
                            <div id="rfc.section.3.2.2.p.1">
                                <p>エンコーダは動的テーブルの容量を設定し、これはそのサイズの上限となります。動的テーブルの初期容量は 0 です。エンコーダは非ゼロの容量を伴う Set Dynamic
                                    Table Capacity 命令（<a href="#set-dynamic-capacity"
                                        title="Set Dynamic Table Capacity">セクション 4.3.1</a>）を送信して動的テーブルの使用を開始します。</p>
                            </div>
                            <div id="rfc.section.3.2.2.p.2">
                                <p>新しいエントリが動的テーブルに追加される前に、動的テーブルの末尾からエントリを追い出して、新しいエントリのサイズを差し引いた後で動的テーブルのサイズが（テーブル容量 -
                                    新しいエントリのサイズ）以下になるまで続けます。エンコーダは、追い出されるエントリが追い出し可能でない限り、そのエントリを追い出すことを引き起こしてはなりません（<em
                                        class="bcp14">MUST NOT</em>）（詳細は <a href="#blocked-insertion"
                                        title="Limits on Dynamic Table Insertions">セクション
                                        2.1.1</a>参照）。その後、新しいエントリがテーブルに追加されます。エンコーダが動的テーブル容量より大きいエントリの追加を試みるとエラーとなるため、デコーダはこれを
                                    QPACK_ENCODER_STREAM_ERROR 型の接続エラーとして扱わなければなりません（<em class="bcp14">MUST</em>）。</p>
                            </div>
                            <div id="rfc.section.3.2.2.p.3">
                                <p>新しいエントリは、追加する際に追い出される動的テーブル内のエントリを参照することがあります。実装は、参照された名前や値を、新しいエントリを挿入する前に参照されたエントリが追い出される場合でも削除しないよう注意する必要があります。
                                </p>
                            </div>
                            <div id="rfc.section.3.2.2.p.4">
                                <p>エンコーダが動的テーブル容量を縮小した場合（<a href="#set-dynamic-capacity"
                                        title="Set Dynamic Table Capacity">セクション
                                        4.3.1</a>）、動的テーブルのサイズが新しい容量以下になるまで末尾からエントリが追い出されます。この仕組みにより容量を 0
                                    に設定して動的テーブルからエントリを完全にクリアし、その後復元することができます。</p>
                            </div>
                        </section>
                        <section id="maximum-dynamic-table-capacity">
                            <h4 id="rfc.section.3.2.3"><a href="#rfc.section.3.2.3">3.2.3.</a>&nbsp;<a
                                    href="#maximum-dynamic-table-capacity">動的テーブル容量の上限</a></h4>
                            <div id="rfc.section.3.2.3.p.1">
                                <p>デコーダのメモリ要件を抑えるため、デコーダはエンコーダが動的テーブル容量として設定できる最大値を制限します。HTTP/3 ではこの制限はデコーダから送信される
                                    SETTINGS_QPACK_MAX_TABLE_CAPACITY の値によって決まります（<a href="#configuration"
                                        title="Configuration">セクション 5</a>参照）。エンコーダはこの最大値を超える動的テーブル容量を設定してはなりません（<em
                                        class="bcp14">MUST NOT</em>）、ただしより小さい容量を選択することはできます（<a
                                        href="#set-dynamic-capacity" title="Set Dynamic Table Capacity">セクション
                                        4.3.1</a>参照）。</p>
                            </div>
                            <div id="rfc.section.3.2.3.p.2">
                                <p>HTTP/3 で 0-RTT データを使用するクライアントの場合、サーバの最大テーブル容量はその設定の記憶値（以前に送信されていなければ 0）です。クライアントの
                                    0-RTT における設定値が 0 の場合、サーバは SETTINGS フレームで非ゼロ値に設定してもよい（<em
                                        class="bcp14">MAY</em>）。記憶された値が非ゼロである場合、サーバは SETTINGS
                                    フレームで同じ非ゼロ値を送信しなければなりません（<em class="bcp14">MUST</em>）。もし他の値を指定するか、SETTINGS から
                                    SETTINGS_QPACK_MAX_TABLE_CAPACITY を省略した場合、エンコーダはこれを QPACK_DECODER_STREAM_ERROR
                                    型の接続エラーとして扱わなければなりません。</p>
                            </div>
                            <div id="rfc.section.3.2.3.p.3">
                                <p>0-RTT データを使用しないクライアント（0-RTT を試行しない、または拒否された場合）およびすべての HTTP/3 サーバについては、エンコーダが非ゼロの
                                    SETTINGS_QPACK_MAX_TABLE_CAPACITY を含む SETTINGS フレームを処理するまで、最大テーブル容量は 0 です。</p>
                            </div>
                            <div id="rfc.section.3.2.3.p.4">
                                <p>最大テーブル容量が 0 の場合、エンコーダは動的テーブルにエントリを挿入してはならず（<em class="bcp14">MUST
                                        NOT</em>）、エンコーダストリーム上でいかなるエンコーダ命令も送信してはなりません（<em class="bcp14">MUST NOT</em>）。
                                </p>
                            </div>
                        </section>
                        <section id="indexing">
                            <h4 id="rfc.section.3.2.4"><a href="#rfc.section.3.2.4">3.2.4.</a>&nbsp;<a
                                    href="#indexing">絶対インデックス</a></h4>
                            <div id="rfc.section.3.2.4.p.1">
                                <p>各エントリはそのエントリの寿命中に固定される絶対インデックスを持ちます。最初に挿入されたエントリの絶対インデックスは 0 であり、挿入ごとにインデックスは 1
                                    ずつ増加します。</p>
                            </div>
                        </section>
                        <section id="relative-indexing">
                            <h4 id="rfc.section.3.2.5"><a href="#rfc.section.3.2.5">3.2.5.</a>&nbsp;<a
                                    href="#relative-indexing">相対インデックス</a></h4>
                            <div id="rfc.section.3.2.5.p.1">
                                <p>相対インデックスは 0 から始まり、絶対インデックスとは逆方向に増加します。相対インデックス 0 がどのエントリを指すかは参照の文脈に依存します。</p>
                            </div>
                            <div id="rfc.section.3.2.5.p.2">
                                <p>エンコーダ命令（<a href="#encoder-instructions" title="Encoder Instructions">セクション
                                        4.3</a>）内では、相対インデックス 0
                                    は動的テーブルで直近に挿入された値を指します。これにより、エンコーダストリーム上の命令を解釈している間に、特定の相対インデックスが指すエントリが変化し得ることに注意してください。
                                </p>
                            </div>
                            <div id="rfc.figure.2">
                                <div>
                                    <pre>
      +-----+---------------+-------+
      | n-1 |      ...      |   d   |  Absolute Index
      + - - +---------------+ - - - +
      |  0  |      ...      | n-d-1 |  Relative Index
      +-----+---------------+-------+
      ^                             |
      |                             V
Insertion Point               Dropping Point

n = count of entries inserted
d = count of entries dropped
</pre>
                                </div>
                            </div>
                            <p class="figure">図 2: 動的テーブルインデックスの例 - エンコーダストリーム</p>
                            <div id="rfc.section.3.2.5.p.3">
                                <p>エンコーダ命令とは異なり、フィールド行表現内の相対インデックスは、エンコードされたフィールドセクションの開始時点での Base を基準とします（<a
                                        href="#header-prefix" title="Encoded Field Section Prefix">セクション
                                        4.5.1</a>参照）。これにより、エンコードされたフィールドセクションと動的テーブルの更新が順不同で処理されても参照が安定します。</p>
                            </div>
                            <div id="rfc.section.3.2.5.p.4">
                                <p>フィールド行表現において、相対インデックス 0 は絶対インデックスが Base - 1 に等しいエントリを指します。</p>
                            </div>
                            <div id="rfc.figure.3">
                                <div>
                                    <pre>
               Base
                |
                V
    +-----+-----+-----+-----+-------+
    | n-1 | n-2 | n-3 | ... |   d   |  Absolute Index
    +-----+-----+  -  +-----+   -   +
                |  0  | ... | n-d-3 |  Relative Index
                +-----+-----+-------+

n = count of entries inserted
d = count of entries dropped
In this example, Base = n - 2
</pre>
                                </div>
                            </div>
                            <p class="figure">図 3: 動的テーブルインデックスの例 - 表現内の相対インデックス</p>
                        </section>
                        <section id="post-base">
                            <h4 id="rfc.section.3.2.6"><a href="#rfc.section.3.2.6">3.2.6.</a>&nbsp;<a
                                    href="#post-base">ポストベースインデックス</a></h4>
                            <div id="rfc.section.3.2.6.p.1">
                                <p>ポストベースインデックスは、Base 以上の絶対インデックスを持つエントリ用にフィールド行表現で使用されます。Base
                                    と等しい絶対インデックスのエントリがポストベースインデックス 0 となり、絶対インデックスと同じ方向に増加します。</p>
                            </div>
                            <div id="rfc.section.3.2.6.p.2">
                                <p>ポストベースインデックスにより、エンコーダは単一パスでフィールドセクションを処理し、この（または他の）フィールドセクションの処理中に追加されたエントリへの参照を含めることができます。
                                </p>
                            </div>
                            <div id="rfc.figure.4">
                                <div>
                                    <pre>
               Base
                |
                V
    +-----+-----+-----+-----+-----+
    | n-1 | n-2 | n-3 | ... |  d  |  Absolute Index
    +-----+-----+-----+-----+-----+
    |  1  |  0  |                    Post-Base Index
    +-----+-----+

n = count of entries inserted
d = count of entries dropped
In this example, Base = n - 2
</pre>
                                </div>
                            </div>
                            <p class="figure">図 4: 動的テーブルインデックスの例 - 表現内のポストベースインデックス</p>
                        </section>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="wire-format">
                    <h2 id="rfc.section.4" class="np"><a href="#rfc.section.4">4.</a>&nbsp;<a
                            href="#wire-format">ワイヤ形式</a></h2>
                    <section id="primitives">
                        <h3 id="rfc.section.4.1"><a href="#rfc.section.4.1">4.1.</a>&nbsp;<a href="#primitives">原始型</a>
                        </h3>
                        <section id="prefixed-integers">
                            <h4 id="rfc.section.4.1.1"><a href="#rfc.section.4.1.1">4.1.1.</a>&nbsp;<a
                                    href="#prefixed-integers">プレフィックス付き整数</a></h4>
                            <div id="rfc.section.4.1.1.p.1">
                                <p><a href="https://www.rfc-editor.org/rfc/rfc7541.html#section-5.1">RFC 7541 セクション
                                        5.1</a> のプレフィックス付き整数は本書で広く使用されます。RFC 7541 の形式は変更せずに使用します。ただし、QPACK は HPACK
                                    で実際に使用されないプレフィックスサイズを用いることがある点に注意してください。</p>
                            </div>
                            <div id="rfc.section.4.1.1.p.2">
                                <p>QPACK 実装は最大 62 ビット長までの整数をデコードできなければなりません（<em class="bcp14">MUST</em>）。</p>
                            </div>
                        </section>
                        <section id="string-literals">
                            <h4 id="rfc.section.4.1.2"><a href="#rfc.section.4.1.2">4.1.2.</a>&nbsp;<a
                                    href="#string-literals">文字列リテラル</a></h4>
                            <div id="rfc.section.4.1.2.p.1">
                                <p><a href="https://www.rfc-editor.org/rfc/rfc7541.html#section-5.2">RFC 7541 セクション
                                        5.2</a> で定義された文字列リテラルも本書で使用されます。この文字列形式にはオプションのハフマン符号化が含まれます。</p>
                            </div>
                            <div id="rfc.section.4.1.2.p.2">
                                <p>HPACK は文字列リテラルがオクテット境界で始まることを定義しています。これらは本書で 'H' と表される 1
                                    ビットのフラグ（ハフマン符号化されているかどうか）で始まり、続いて 7
                                    ビットプレフィックスの整数で表現される文字列長、最後に指示されたバイト数のデータが続きます。ハフマン符号化が有効な場合、RFC 7541 の付録 B
                                    のハフマンテーブルを変更なく使用し、指示された長さは符号化後の文字列のサイズです。</p>
                            </div>
                            <div id="rfc.section.4.1.2.p.3">
                                <p>本書は文字列リテラルがオクテット境界以外で始まることを許容することで定義を拡張します。 "N ビットプレフィックス文字列リテラル" はバイト中間から始まり、最初の
                                    (8-N) ビットは前のフィールドに割り当てられます。文字列はハフマンフラグに 1 ビットを使い、続いて (N-1)
                                    ビットプレフィックス整数として符号化された符号化後文字列長が続きます。プレフィックスサイズ N は 2 から 8
                                    の間で指定できます。文字列リテラルの残り部分は変更されません。</p>
                            </div>
                            <div id="rfc.section.4.1.2.p.4">
                                <p>プレフィックス長が指定されていない文字列リテラルは 8 ビットプレフィックスの文字列リテラルであり、RFC 7541 に定義された通りに動作します。</p>
                            </div>
                        </section>
                    </section>
                    <section id="enc-dec-stream-def">
                        <h3 id="rfc.section.4.2"><a href="#rfc.section.4.2">4.2.</a>&nbsp;<a
                                href="#enc-dec-stream-def">エンコーダおよびデコーダストリーム</a></h3>
                        <div id="rfc.section.4.2.p.1" class="avoidbreakafter">
                            <p>QPACK は二つの一方向ストリーム型を定義します：</p>
                        </div>
                        <div id="rfc.section.4.2.p.2">
                            <ul>
                                <li>エンコーダストリームはタイプ 0x02 の一方向ストリームで、エンコーダからデコーダへのフレーム化されていないエンコーダ命令のシーケンスを運びます。</li>
                                <li>デコーダストリームはタイプ 0x03 の一方向ストリームで、デコーダからエンコーダへのフレーム化されていないデコーダ命令のシーケンスを運びます。</li>
                            </ul>
                        </div>
                        <div id="rfc.section.4.2.p.3">
                            <p>HTTP/3 エンドポイントは QPACK のエンコーダとデコーダを含みます。各エンドポイントはエンコーダストリームを最大 1 本、デコーダストリームを最大 1
                                本まで開始しなければなりません（<em class="bcp14">MUST</em>）。これらのストリーム型の第二のインスタンスを受信した場合、それは
                                H3_STREAM_CREATION_ERROR 型の接続エラーとして扱われなければなりません。</p>
                        </div>
                        <div id="rfc.section.4.2.p.4">
                            <p>送信者はこれらのいずれのストリームも閉じてはならず（<em class="bcp14">MUST
                                    NOT</em>）、受信者は送信者に対してこれらのストリームを閉じるよう要求してはなりません（<em class="bcp14">MUST
                                    NOT</em>）。いずれか一方の一方向ストリームの閉鎖は H3_CLOSED_CRITICAL_STREAM 型の接続エラーとして扱われなければなりません（<em
                                    class="bcp14">MUST</em>）。</p>
                        </div>
                        <div id="rfc.section.4.2.p.5">
                            <p>エンドポイントは、エンコーダストリームを使用しない場合（たとえばエンコーダが動的テーブルを使用しない、あるいはピアが許可する最大動的テーブルサイズが 0
                                の場合など）にエンコーダストリームを作成しないことができます（<em class="bcp14">MAY</em>）。</p>
                        </div>
                        <div id="rfc.section.4.2.p.6">
                            <p>デコーダが動的テーブルの最大容量を 0 に設定している場合、エンドポイントはデコーダストリームを作成しないことができます（<em class="bcp14">MAY</em>）。
                            </p>
                        </div>
                        <div id="rfc.section.4.2.p.7">
                            <p>エンドポイントは、たとえ接続の設定がそれらの使用を妨げる場合でも、ピアがエンコーダストリームおよびデコーダストリームを作成することを許容しなければなりません（<em
                                    class="bcp14">MUST</em>）。</p>
                        </div>
                    </section>
                    <section id="encoder-instructions">
                        <h3 id="rfc.section.4.3"><a href="#rfc.section.4.3">4.3.</a>&nbsp;<a
                                href="#encoder-instructions">エンコーダ命令</a></h3>
                        <div id="rfc.section.4.3.p.1">
                            <p>エンコーダはエンコーダストリーム上で、動的テーブルの容量を設定したり動的テーブルエントリを追加する命令を送信します。エントリを追加する命令は既存エントリを利用して冗長な情報の送信を避けることができます。名前は静的または動的テーブル内の既存エントリへの参照として送信するか、文字列リテラルとして送信できます。既に動的テーブルに存在するエントリについては、重複エントリを作ることで完全なエントリを参照することもできます。
                            </p>
                        </div>
                        <section id="set-dynamic-capacity">
                            <h4 id="rfc.section.4.3.1"><a href="#rfc.section.4.3.1">4.3.1.</a>&nbsp;<a
                                    href="#set-dynamic-capacity">動的テーブル容量の設定</a></h4>
                            <div id="rfc.section.4.3.1.p.1">
                                <p>エンコーダは '001' の 3 ビットパターンで始まる命令を使って動的テーブル容量の変更をデコーダに通知します。これに続いて 5
                                    ビットプレフィックスの整数として表現された新しい動的テーブル容量が続きます（<a href="#prefixed-integers"
                                        title="Prefixed Integers">セクション 4.1.1</a>参照）。</p>
                            </div>
                            <div id="fig-set-capacity"></div>
                            <div id="rfc.figure.5">
                                <div>
                                    <pre>
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 1 |   Capacity (5+)   |
+---+---+---+-------------------+
</pre>
                                </div>
                            </div>
                            <p class="figure">図 5: 動的テーブル容量の設定</p>
                            <div id="rfc.section.4.3.1.p.2">
                                <p>新しい容量は <a href="#maximum-dynamic-table-capacity"
                                        title="Maximum Dynamic Table Capacity">セクション 3.2.3</a> に記載された制限以下でなければなりません（<em
                                        class="bcp14">MUST</em>）。HTTP/3 ではこの制限はデコーダが送信した
                                    SETTINGS_QPACK_MAX_TABLE_CAPACITY パラメータの値です（<a href="#configuration"
                                        title="Configuration">セクション 5</a>参照）。デコーダはこの制限を超える新しい動的テーブル容量の値を
                                    QPACK_ENCODER_STREAM_ERROR 型の接続エラーとして扱わなければなりません（<em class="bcp14">MUST</em>）。</p>
                            </div>
                            <div id="rfc.section.4.3.1.p.3">
                                <p>動的テーブル容量の縮小はエントリの追い出しを引き起こす可能性があります（<a href="#eviction"
                                        title="Dynamic Table Capacity and Eviction">セクション
                                        3.2.2</a>参照）。この命令はエントリを挿入するものではないため確認応答は行われません。</p>
                            </div>
                        </section>
                        <section id="insert-with-name-reference">
                            <h4 id="rfc.section.4.3.2"><a href="#rfc.section.4.3.2">4.3.2.</a>&nbsp;<a
                                    href="#insert-with-name-reference">名前参照を用いた挿入</a></h4>
                            <div id="rfc.section.4.3.2.p.1">
                                <p>エンコーダは '1' の 1
                                    ビットパターンで始まる命令を使って、フィールド名が静的または動的テーブルに格納されたエントリのフィールド名と一致するエントリを動的テーブルに追加します。2
                                    番目のビット（'T'）は参照が静的テーブルか動的テーブルかを示します。続く 6 ビットプレフィックス整数（<a href="#prefixed-integers"
                                        title="Prefixed Integers">セクション 4.1.1</a>）はフィールド名のテーブルエントリを特定するために使われます。T=1
                                    の場合、その数値は静的テーブルインデックスを表し、T=0 の場合は動的テーブル内の相対インデックスを表します。</p>
                            </div>
                            <div id="rfc.section.4.3.2.p.2">
                                <p>フィールド名参照の後に、フィールド値が文字列リテラルとして続きます（<a href="#string-literals"
                                        title="String Literals">セクション 4.1.2</a>参照）。</p>
                            </div>
                            <div id="rfc.figure.6">
                                <div>
                                    <pre>
     0   1   2   3   4   5   6   7
   +---+---+---+---+---+---+---+---+
   | 1 | T |    Name Index (6+)    |
   +---+---+-----------------------+
   | H |     Value Length (7+)     |
   +---+---------------------------+
   |  Value String (Length bytes)  |
   +-------------------------------+
</pre>
                                </div>
                            </div>
                            <p class="figure">図 6: フィールド行挿入 — インデックスされた名前</p>
                        </section>
                        <section id="insert-with-literal-name">
                            <h4 id="rfc.section.4.3.3"><a href="#rfc.section.4.3.3">4.3.3.</a>&nbsp;<a
                                    href="#insert-with-literal-name">リテラル名での挿入</a></h4>
                            <div id="rfc.section.4.3.3.p.1">
                                <p>エンコーダは '01' の 2 ビットパターンで始まる命令を使って、フィールド名とフィールド値の両方が文字列リテラルとして表されるエントリを動的テーブルに追加します。
                                </p>
                            </div>
                            <div id="rfc.section.4.3.3.p.2">
                                <p>これに続いて 6 ビットプレフィックスの文字列リテラルによる名前、および 8 ビットプレフィックスの文字列リテラルによる値が続きます（<a
                                        href="#string-literals" title="String Literals">セクション 4.1.2</a>参照）。</p>
                            </div>
                            <div id="rfc.figure.7">
                                <div>
                                    <pre>
     0   1   2   3   4   5   6   7
   +---+---+---+---+---+---+---+---+
   | 0 | 1 | H | Name Length (5+)  |
   +---+---+---+-------------------+
   |  Name String (Length bytes)   |
   +---+---------------------------+
   | H |     Value Length (7+)     |
   +---+---------------------------+
   |  Value String (Length bytes)  |
   +-------------------------------+
</pre>
                                </div>
                            </div>
                            <p class="figure">図 7: フィールド行挿入 — 新しい名前</p>
                        </section>
                        <section id="duplicate">
                            <h4 id="rfc.section.4.3.4"><a href="#rfc.section.4.3.4">4.3.4.</a>&nbsp;<a
                                    href="#duplicate">重複</a></h4>
                            <div id="rfc.section.4.3.4.p.1">
                                <p>エンコーダは '000' の 3 ビットパターンで始まる命令を使って、動的テーブル内の既存のエントリを複製します。これに続いて既存エントリの相対インデックスが 5
                                    ビットプレフィックスの整数として続きます（<a href="#prefixed-integers" title="Prefixed Integers">セクション
                                        4.1.1</a>参照）。</p>
                            </div>
                            <div id="fig-index-with-duplication"></div>
                            <div id="rfc.figure.8">
                                <div>
                                    <pre>
     0   1   2   3   4   5   6   7
   +---+---+---+---+---+---+---+---+
   | 0 | 0 | 0 |    Index (5+)     |
   +---+---+---+-------------------+
</pre>
                                </div>
                            </div>
                            <p class="figure">図 8: 重複</p>
                            <div id="rfc.section.4.3.4.p.2">
                                <p>既存のエントリは名前や値を再送することなく動的テーブルに再挿入されます。これは、古いエントリへの参照を追加して新しいエントリの挿入を妨げることを避けるのに有用です。
                                </p>
                            </div>
                        </section>
                    </section>
                    <section id="decoder-instructions">
                        <h3 id="rfc.section.4.4"><a href="#rfc.section.4.4">4.4.</a>&nbsp;<a
                                href="#decoder-instructions">デコーダ命令</a></h3>
                        <div id="rfc.section.4.4.p.1">
                            <p>デコーダはデコーダストリーム上でデコーダ命令を送信して、フィールドセクションやテーブル更新の処理をエンコーダに通知し、動的テーブルの整合性を確保します。</p>
                        </div>
                        <section id="header-acknowledgment">
                            <h4 id="rfc.section.4.4.1"><a href="#rfc.section.4.4.1">4.4.1.</a>&nbsp;<a
                                    href="#header-acknowledgment">セクション確認応答</a></h4>
                            <div id="rfc.section.4.4.1.p.1">
                                <p>宣言された Required Insert Count
                                    がゼロでないエンコード済みフィールドセクションを処理した後、デコーダはセクション確認応答命令を発行します。この命令は '1' の 1
                                    ビットパターンで始まり、続いて当該フィールドセクションに関連付けられたストリーム ID を 7 ビットプレフィックス整数でエンコードした値が続きます。詳細は <a
                                        href="#prefixed-integers" title="Prefixed Integers">セクション 4.1.1</a> を参照してください。
                                </p>
                            </div>
                            <div id="rfc.section.4.4.1.p.2">
                                <p>この命令は <a href="#known-received-count" title="Known Received Count">セクション 2.1.4</a>
                                    および <a href="#state-synchronization" title="State Synchronization">セクション 2.2.2</a>
                                    に記載された用途で使用されます。</p>
                            </div>
                            <div id="fig-header-ack"></div>
                            <div id="rfc.figure.9">
                                <div>
                                    <pre>
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 1 |      Stream ID (7+)       |
+---+---------------------------+
</pre>
                                </div>
                            </div>
                            <p class="figure">図 9: セクション確認応答</p>
                            <div id="rfc.section.4.4.1.p.3">
                                <p>エンコーダが、すでに Required Insert Count
                                    が非ゼロのすべてのエンコード済みフィールドセクションが確認済みであるストリームを参照するセクション確認応答命令を受信した場合、これは
                                    QPACK_DECODER_STREAM_ERROR 型の接続エラーとして扱わなければなりません（<em class="bcp14">MUST</em>）。</p>
                            </div>
                            <div id="rfc.section.4.4.1.p.4">
                                <p>セクション確認応答命令は Known Received Count を増加させることがあります。詳細は <a href="#known-received-count"
                                        title="Known Received Count">セクション 2.1.4</a> を参照してください。</p>
                            </div>
                        </section>
                        <section id="stream-cancellation">
                            <h4 id="rfc.section.4.4.2"><a href="#rfc.section.4.4.2">4.4.2.</a>&nbsp;<a
                                    href="#stream-cancellation">ストリームキャンセル</a></h4>
                            <div id="rfc.section.4.4.2.p.1">
                                <p>ストリームがリセットされたり読み取りが放棄されたとき、デコーダはストリームキャンセル命令を発行します。命令は '01' の 2
                                    ビットパターンで始まり、続いて影響を受けるストリームのストリーム ID を 6 ビットプレフィックス整数でエンコードした値が続きます。</p>
                            </div>
                            <div id="rfc.section.4.4.2.p.2">
                                <p>この命令は <a href="#state-synchronization" title="State Synchronization">セクション 2.2.2</a>
                                    に記載された用途で使用されます。</p>
                            </div>
                            <div id="fig-stream-cancel"></div>
                            <div id="rfc.figure.10">
                                <div>
                                    <pre>
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 1 |     Stream ID (6+)    |
+---+---+-----------------------+
</pre>
                                </div>
                            </div>
                            <p class="figure">図 10: ストリームキャンセル</p>
                        </section>
                        <section id="insert-count-increment">
                            <h4 id="rfc.section.4.4.3"><a href="#rfc.section.4.4.3">4.4.3.</a>&nbsp;<a
                                    href="#insert-count-increment">挿入カウント増分</a></h4>
                            <div id="rfc.section.4.4.3.p.1">
                                <p>Insert Count Increment 命令は '00' の 2 ビットパターンで始まり、続いて Increment を 6
                                    ビットプレフィックス整数としてエンコードした値が続きます。この命令は Known Received Count（<a
                                        href="#known-received-count" title="Known Received Count">セクション 2.1.4</a>）を
                                    Increment の値だけ増加させます。デコーダは、Known Received Count をこれまで処理された動的テーブルの挿入と複製の総数に更新するような
                                    Increment 値を送信するべきです。</p>
                            </div>
                            <div id="fig-size-sync"></div>
                            <div id="rfc.figure.11">
                                <div>
                                    <pre>
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 |     Increment (6+)    |
+---+---+-----------------------+
</pre>
                                </div>
                            </div>
                            <p class="figure">図 11: Insert Count Increment</p>
                            <div id="rfc.section.4.4.3.p.2">
                                <p>受信した Increment フィールドがゼロである場合、または Known Received Count
                                    をエンコーダが送信した合計よりも増加させる場合、エンコーダはこれを QPACK_DECODER_STREAM_ERROR
                                    型の接続エラーとして扱わなければなりません（<em class="bcp14">MUST</em>）。</p>
                            </div>
                        </section>
                    </section>
                    <section id="field-line-representations">
                        <h3 id="rfc.section.4.5"><a href="#rfc.section.4.5">4.5.</a>&nbsp;<a
                                href="#field-line-representations">フィールド行の表現</a></h3>
                        <div id="rfc.section.4.5.p.1">
                            <p>エンコードされたフィールドセクションは、プレフィックスと本節で定義された（空であってもよい）一連の表現で構成されます。各表現は単一のフィールド行に対応します。これらの表現は特定の状態にある静的テーブルまたは動的テーブルを参照しますが、それらの状態を変更するものではありません。
                            </p>
                        </div>
                        <div id="rfc.section.4.5.p.2">
                            <p>エンコードされたフィールドセクションは、囲むプロトコルで定義されたストリーム上のフレームで運ばれます。</p>
                        </div>
                        <section id="header-prefix">
                            <h4 id="rfc.section.4.5.1"><a href="#rfc.section.4.5.1">4.5.1.</a>&nbsp;<a
                                    href="#header-prefix">エンコードされたフィールドセクション接頭辞</a></h4>
                            <div id="rfc.section.4.5.1.p.1">
                                <p>各エンコードされたフィールドセクションは二つの整数で始まります。Required Insert Count は 8 ビットプレフィックスの整数としてエンコードされ、詳細は
                                    <a href="#ric" title="Required Insert Count">セクション 4.5.1.1</a> を参照してください。Base
                                    は符号ビット（'S'）と 7 ビットプレフィックスの Delta Base 値としてエンコードされます（<a href="#base"
                                        title="Base">セクション 4.5.1.2</a> を参照）。
                                </p>
                            </div>
                            <div id="fig-base-index"></div>
                            <div id="rfc.figure.12">
                                <div>
                                    <pre>
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
|   Required Insert Count (8+)  |
+---+---------------------------+
| S |      Delta Base (7+)      |
+---+---------------------------+
|      Encoded Field Lines    ...
+-------------------------------+
</pre>
                                </div>
                            </div>
                            <p class="figure">図 12: エンコードされたフィールドセクション</p>
                            <section id="ric">
                                <h5 id="rfc.section.4.5.1.1"><a href="#rfc.section.4.5.1.1">4.5.1.1.</a>&nbsp;<a
                                        href="#ric">Required Insert Count</a></h5>
                                <div id="rfc.section.4.5.1.1.p.1">
                                    <p>Required Insert Count
                                        は、エンコードされたフィールドセクションを処理するために必要な動的テーブルの状態を識別します。ブロッキングするデコーダは、残りのフィールドセクションを処理しても安全かどうかを判断するために
                                        Required Insert Count を使用します。</p>
                                </div>
                                <div id="rfc.section.4.5.1.1.p.2" class="avoidbreakafter">
                                    <p>エンコーダはエンコード前に Required Insert Count を次のように変換します：</p>
                                </div>
                                <div id="rfc.section.4.5.1.1.p.3">
                                    <pre class="text">
   if ReqInsertCount == 0:
      EncInsertCount = 0
   else:
      EncInsertCount = (ReqInsertCount mod (2 * MaxEntries)) + 1
</pre>
                                </div>
                                <div id="rfc.section.4.5.1.1.p.4" class="avoidbreakafter">
                                    <p>ここで <span class="tt">MaxEntries</span>
                                        は動的テーブルが持ち得る最大エントリ数です。最小のエントリは名前と値の文字列が空で、そのサイズは 32 です。したがって、<span
                                            class="tt">MaxEntries</span> は次のように計算されます：</p>
                                </div>
                                <div id="rfc.section.4.5.1.1.p.5">
                                    <pre class="text">
   MaxEntries = floor( MaxTableCapacity / 32 )
</pre>
                                </div>
                                <div id="rfc.section.4.5.1.1.p.6">
                                    <p><span class="tt">MaxTableCapacity</span> はデコーダが指定した動的テーブルの最大容量です。詳細は <a
                                            href="#maximum-dynamic-table-capacity"
                                            title="Maximum Dynamic Table Capacity">セクション 3.2.3</a> を参照してください。</p>
                                </div>
                                <div id="rfc.section.4.5.1.1.p.7">
                                    <p>このエンコードは長期接続におけるプレフィックス長を制限します。</p>
                                </div>
                                <div id="rfc.section.4.5.1.1.p.8">
                                    <p>デコーダは次のようなアルゴリズムで Required Insert Count を再構築できます。もしデコーダが EncodedInsertCount
                                        の値が準拠するエンコーダによって生成され得ないと判断した場合、それを QPACK_DECOMPRESSION_FAILED
                                        型の接続エラーとして扱わなければなりません（<em class="bcp14">MUST</em>）。</p>
                                </div>
                                <div id="rfc.section.4.5.1.1.p.9">
                                    <p><span class="tt">TotalNumberOfInserts</span> はデコーダの動的テーブルへの挿入の総数です。</p>
                                </div>
                                <div id="rfc.section.4.5.1.1.p.10">
                                    <pre class="text">
   FullRange = 2 * MaxEntries
   if EncodedInsertCount == 0:
      ReqInsertCount = 0
   else:
      if EncodedInsertCount &gt; FullRange:
         Error
      MaxValue = TotalNumberOfInserts + MaxEntries

      # MaxWrapped is the largest possible value of
      # ReqInsertCount that is 0 mod 2 * MaxEntries
      MaxWrapped = floor(MaxValue / FullRange) * FullRange
      ReqInsertCount = MaxWrapped + EncodedInsertCount - 1

      # If ReqInsertCount exceeds MaxValue, the Encoder's value
      # must have wrapped one fewer time
      if ReqInsertCount &gt; MaxValue:
         if ReqInsertCount &lt;= FullRange:
            Error
         ReqInsertCount -= FullRange

      # Value of 0 must be encoded as 0.
      if ReqInsertCount == 0:
         Error
</pre>
                                </div>
                                <div id="rfc.section.4.5.1.1.p.11">
                                    <p>例えば、動的テーブルが 100 バイトの場合、Required Insert Count は 6 を法としてエンコードされます。もしデコーダが 10
                                        回の挿入を受け取っているなら、エンコード値 4 はそのフィールドセクションの Required Insert Count が 9 であることを示します。</p>
                                </div>
                            </section>
                            <section id="base">
                                <h5 id="rfc.section.4.5.1.2"><a href="#rfc.section.4.5.1.2">4.5.1.2.</a>&nbsp;<a
                                        href="#base">Base</a></h5>
                                <div id="rfc.section.4.5.1.2.p.1">
                                    <p>Base は動的テーブル内の参照を解決するために使用されます。詳細は <a href="#relative-indexing"
                                            title="Relative Indexing">セクション 3.2.5</a> を参照してください。</p>
                                </div>
                                <div id="rfc.section.4.5.1.2.p.2" class="avoidbreakafter">
                                    <p>スペースを節約するため、Base は Required Insert Count に対して 1 ビットの符号（<a href="#fig-base-index"
                                            title="Encoded Field Section">図 12</a> 中の 'S'）と Delta Base
                                        値として相対的にエンコードされます。符号ビットが 0 の場合、Base は Required Insert Count 以上であり、デコーダは Delta
                                        Base の値を Required Insert Count に加えて Base の値を決定します。符号ビットが 1 の場合、Base は Required
                                        Insert Count より小さく、デコーダは Delta Base を Required Insert Count から引き、その結果からさらに 1
                                        を引いて Base の値を決定します。すなわち次のようになります：</p>
                                </div>
                                <div id="rfc.section.4.5.1.2.p.3">
                                    <pre class="text">
   if Sign == 0:
      Base = ReqInsertCount + DeltaBase
   else:
      Base = ReqInsertCount - DeltaBase - 1
</pre>
                                </div>
                                <div id="rfc.section.4.5.1.2.p.4">
                                    <p>単一パスのエンコーダはフィールドセクションをエンコードする前に Base
                                        を決定します。もしエンコーダがフィールドセクションのエンコード中に動的テーブルにエントリを挿入し、それらを参照している場合、Required Insert
                                        Count は Base より大きくなり、したがってエンコードされた差は負になり符号ビットは 1
                                        に設定されます。フィールドセクションがテーブル内の最新エントリを参照する表現を使っていなかったり新しいエントリを挿入していなかった場合、Base は
                                        Required Insert Count より大きくなり、差は正となって符号ビットは 0 に設定されます。</p>
                                </div>
                                <div id="rfc.section.4.5.1.2.p.5">
                                    <p>Base の値は負にしてはなりません（<em class="bcp14">MUST NOT</em>）。プロトコルはポストベースインデックスを使う場合に負の
                                        Base でも動作する可能性がありますが、それは不要かつ非効率です。Required Insert Count が Delta Base
                                        以下の場合に符号ビットが 1 のフィールドブロックを生成するエンコーダは無効と見なされなければなりません（<em
                                            class="bcp14">MUST</em>）。</p>
                                </div>
                                <div id="rfc.section.4.5.1.2.p.6">
                                    <p>フィールドセクションをエンコードする前にテーブル更新を生成するエンコーダは、Base を Required Insert Count
                                        の値に設定することがあります。その場合、符号ビットと Delta Base はともにゼロになります。</p>
                                </div>
                                <div id="rfc.section.4.5.1.2.p.7">
                                    <p>動的テーブルへの参照を使わずにエンコードされたフィールドセクションは任意の Base を使えますが、Delta Base
                                        をゼロにするのが最も効率的なエンコードの一つです。</p>
                                </div>
                                <div id="rfc.section.4.5.1.2.p.8">
                                    <p>例えば、Required Insert Count が 9 の場合にデコーダが符号ビット 1 と Delta Base 2 を受け取ると、Base は 6
                                        になり、3 個のエントリに対してポストベースインデックスが有効になります。この例では相対インデックス 1 はテーブルに追加された 5
                                        番目のエントリを指し、ポストベースインデックス 1 は 8 番目のエントリを指します。</p>
                                </div>
                            </section>
                        </section>
                        <section id="indexed-field-line">
                            <h4 id="rfc.section.4.5.2"><a href="#rfc.section.4.5.2">4.5.2.</a>&nbsp;<a
                                    href="#indexed-field-line">インデックス付きフィールド行</a></h4>
                            <div id="rfc.section.4.5.2.p.1">
                                <p>インデックス付きフィールド行表現は、静的テーブル内のエントリ、または Base 未満の絶対インデックスを持つ動的テーブル内のエントリを識別します。</p>
                            </div>
                            <div id="rfc.figure.13">
                                <div>
                                    <pre>
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 1 | T |      Index (6+)       |
+---+---+-----------------------+
</pre>
                                </div>
                            </div>
                            <p class="figure">図 13: インデックス付きフィールド行</p>
                            <div id="rfc.section.4.5.2.p.2">
                                <p>この表現は '1' の 1 ビットパターンで始まり、続いて参照が静的テーブルか動的テーブルかを示す 'T' ビットが続きます。続く 6 ビットプレフィックス整数（<a
                                        href="#prefixed-integers" title="Prefixed Integers">セクション
                                        4.1.1</a>）はフィールド行のテーブルエントリを特定するために使われます。T=1 の場合、その数値は静的テーブルインデックスを表し、T=0
                                    の場合は動的テーブル内の相対インデックスを表します。</p>
                            </div>
                        </section>
                        <section id="indexed-field-line-with-post-base-index">
                            <h4 id="rfc.section.4.5.3"><a href="#rfc.section.4.5.3">4.5.3.</a>&nbsp;<a
                                    href="#indexed-field-line-with-post-base-index">ポストベースインデックスを用いたインデックス付きフィールド行</a>
                            </h4>
                            <div id="rfc.section.4.5.3.p.1">
                                <p>ポストベースインデックスを用いたインデックス付きフィールド行表現は、Base 以上の絶対インデックスを持つ動的テーブル内のエントリを識別します。</p>
                            </div>
                            <div id="rfc.figure.14">
                                <div>
                                    <pre>
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 0 | 1 |  Index (4+)   |
+---+---+---+---+---------------+
</pre>
                                </div>
                            </div>
                            <p class="figure">図 14: ポストベースインデックスを用いたインデックス付きフィールド行</p>
                            <div id="rfc.section.4.5.3.p.2">
                                <p>この表現は '0001' の 4 ビットパターンで始まります。これに続いて、対応するフィールド行のポストベースインデックス（<a href="#post-base"
                                        title="Post-Base Indexing">セクション 3.2.6</a>）が 4 ビットプレフィックスの整数として続きます。詳細は <a
                                        href="#prefixed-integers" title="Prefixed Integers">セクション 4.1.1</a> を参照してください。
                                </p>
                            </div>
                        </section>
                        <section id="literal-name-reference">
                            <h4 id="rfc.section.4.5.4"><a href="#rfc.section.4.5.4">4.5.4.</a>&nbsp;<a
                                    href="#literal-name-reference">名前参照を用いたリテラルフィールド行</a></h4>
                            <div id="rfc.section.4.5.4.p.1">
                                <p>名前参照を用いたリテラルフィールド行表現は、フィールド名が静的テーブルのエントリのフィールド名、または Base
                                    未満の絶対インデックスを持つ動的テーブルのエントリのフィールド名と一致するフィールド行をエンコードします。</p>
                            </div>
                            <div id="rfc.figure.15">
                                <div>
                                    <pre>
     0   1   2   3   4   5   6   7
   +---+---+---+---+---+---+---+---+
   | 0 | 1 | N | T |Name Index (4+)|
   +---+---+---+---+---------------+
   | H |     Value Length (7+)     |
   +---+---------------------------+
   |  Value String (Length bytes)  |
   +-------------------------------+
</pre>
                                </div>
                            </div>
                            <p class="figure">図 15: 名前参照を用いたリテラルフィールド行</p>
                            <div id="rfc.section.4.5.4.p.2">
                                <p>この表現は '01' の 2 ビットパターンで始まります。続くビット 'N'
                                    は、仲介者が後続のホップでこのフィールド行を動的テーブルに追加してよいかどうかを示します。'N'
                                    ビットがセットされている場合、エンコードされたフィールド行は常にリテラル表現でエンコードされなければなりません（<em
                                        class="bcp14">MUST</em>）。特に、ピアが 'N'
                                    ビットがセットされたリテラル表現として受信したフィールド行を送信する場合、それを転送する際にはリテラル表現を使わなければなりません（<em
                                        class="bcp14">MUST</em>）。このビットは、圧縮によって危険にさらすべきでないフィールド値を保護する目的で用いられます。詳細は <a
                                        href="#probing-dynamic-table-state" title="Probing Dynamic Table State">セクション
                                        7.1</a> を参照してください。</p>
                            </div>
                            <div id="rfc.section.4.5.4.p.3">
                                <p>4 番目のビット 'T' は参照が静的テーブルか動的テーブルかを示します。続く 4 ビットプレフィックス整数（<a href="#prefixed-integers"
                                        title="Prefixed Integers">セクション 4.1.1</a>）はフィールド名のテーブルエントリを特定するために使われます。T=1
                                    の場合は静的テーブルインデックス、T=0 の場合は動的テーブル内の相対インデックスを表します。</p>
                            </div>
                            <div id="rfc.section.4.5.4.p.4">
                                <p>動的テーブルエントリから取り出されるのはフィールド名のみであり、フィールド値は 8 ビットプレフィックスの文字列リテラルとしてエンコードされます。詳細は <a
                                        href="#string-literals" title="String Literals">セクション 4.1.2</a> を参照してください。</p>
                            </div>
                        </section>
                        <section id="literal-field-line-with-post-base-name-reference">
                            <h4 id="rfc.section.4.5.5"><a href="#rfc.section.4.5.5">4.5.5.</a>&nbsp;<a
                                    href="#literal-field-line-with-post-base-name-reference">ポストベース名前参照を用いたリテラルフィールド行</a>
                            </h4>
                            <div id="rfc.section.4.5.5.p.1">
                                <p>ポストベース名前参照を用いたリテラルフィールド行表現は、フィールド名が Base
                                    以上の絶対インデックスを持つ動的テーブルエントリのフィールド名と一致するフィールド行をエンコードします。</p>
                            </div>
                            <div id="rfc.figure.16">
                                <div>
                                    <pre>
     0   1   2   3   4   5   6   7
   +---+---+---+---+---+---+---+---+
   | 0 | 0 | 0 | 0 | N |NameIdx(3+)|
   +---+---+---+---+---+-----------+
   | H |     Value Length (7+)     |
   +---+---------------------------+
   |  Value String (Length bytes)  |
   +-------------------------------+
</pre>
                                </div>
                            </div>
                            <p class="figure">図 16: ポストベース名前参照を用いたリテラルフィールド行</p>
                            <div id="rfc.section.4.5.5.p.2">
                                <p>この表現は '0000' の 4 ビットパターンで始まります。5 ビット目は <a href="#literal-name-reference"
                                        title="Literal Field Line with Name Reference">セクション 4.5.4</a> で説明された 'N'
                                    ビットです。これに続いて、ポストベースインデックス（<a href="#post-base" title="Post-Base Indexing">セクション
                                        3.2.6</a>）が 3 ビットプレフィックスの整数としてエンコードされます。詳細は <a href="#prefixed-integers"
                                        title="Prefixed Integers">セクション 4.1.1</a> を参照してください。</p>
                            </div>
                            <div id="rfc.section.4.5.5.p.3">
                                <p>動的テーブルエントリから取り出されるのはフィールド名のみであり、フィールド値は 8 ビットプレフィックスの文字列リテラルとしてエンコードされます。詳細は <a
                                        href="#string-literals" title="String Literals">セクション 4.1.2</a> を参照してください。</p>
                            </div>
                        </section>
                        <section id="literal-field-line-with-literal-name">
                            <h4 id="rfc.section.4.5.6"><a href="#rfc.section.4.5.6">4.5.6.</a>&nbsp;<a
                                    href="#literal-field-line-with-literal-name">リテラル名を用いたリテラルフィールド行</a></h4>
                            <div id="rfc.section.4.5.6.p.1">
                                <p>リテラル名を用いたリテラルフィールド行表現は、フィールド名とフィールド値の両方を文字列リテラルとしてエンコードします。</p>
                            </div>
                            <div id="rfc.figure.17">
                                <div>
                                    <pre>
     0   1   2   3   4   5   6   7
   +---+---+---+---+---+---+---+---+
   | 0 | 0 | 1 | N | H |NameLen(3+)|
   +---+---+---+---+---+-----------+
   |  Name String (Length bytes)   |
   +---+---------------------------+
   | H |     Value Length (7+)     |
   +---+---------------------------+
   |  Value String (Length bytes)  |
   +-------------------------------+
</pre>
                                </div>
                            </div>
                            <p class="figure">図 17: リテラル名を用いたリテラルフィールド行</p>
                            <div id="rfc.section.4.5.6.p.2">
                                <p>この表現は '001' の 3 ビットパターンで始まります。4 ビット目は <a href="#literal-name-reference"
                                        title="Literal Field Line with Name Reference">セクション 4.5.4</a> で説明された 'N'
                                    ビットです。名前は 4 ビットプレフィックスの文字列リテラルとして続き、その後に値が 8 ビットプレフィックスの文字列リテラルとして続きます。詳細は <a
                                        href="#string-literals" title="String Literals">セクション 4.1.2</a> を参照してください。</p>
                            </div>
                        </section>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="configuration">
                    <h2 id="rfc.section.5" class="np"><a href="#rfc.section.5">5.</a>&nbsp;<a
                            href="#configuration">設定</a></h2>
                    <div id="rfc.section.5.p.1" class="avoidbreakafter">
                        <p>QPACK は HTTP/3 の SETTINGS フレーム向けに 2 つの設定を定義します：</p>
                    </div>
                    <div id="rfc.section.5.p.2">
                        <dl>
                            <dt>SETTINGS_QPACK_MAX_TABLE_CAPACITY (0x01):</dt>
                            <dd style="margin-left: 1.5em">
                                <div>デフォルト値は 0 です。使用法は <a href="#header-table-dynamic" title="Dynamic Table">セクション
                                        3.2</a> を参照してください。これは HTTP/2 の SETTINGS_HEADER_TABLE_SIZE に相当します。</div>
                            </dd>
                            <dt>SETTINGS_QPACK_BLOCKED_STREAMS (0x07):</dt>
                            <dd style="margin-left: 1.5em">
                                <div>デフォルト値は 0 です。詳細は <a href="#blocked-streams" title="Blocked Streams">セクション 2.1.2</a>
                                    を参照してください。</div>
                            </dd>
                        </dl>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="error-handling">
                    <h2 id="rfc.section.6" class="np"><a href="#rfc.section.6">6.</a>&nbsp;<a
                            href="#error-handling">エラー処理</a></h2>
                    <div id="rfc.section.6.p.1" class="avoidbreakafter">
                        <p>以下のエラーコードは、ストリームまたは接続の継続を妨げる QPACK の失敗を示すために HTTP/3 用として定義されています：</p>
                    </div>
                    <div id="rfc.section.6.p.2">
                        <dl>
                            <dt>QPACK_DECOMPRESSION_FAILED (0x0200):</dt>
                            <dd style="margin-left: 1.5em">
                                <div>デコーダがエンコードされたフィールドセクションの解釈に失敗し、そのフィールドセクションのデコードを続行できないことを示します。</div>
                            </dd>
                            <dt>QPACK_ENCODER_STREAM_ERROR (0x0201):</dt>
                            <dd style="margin-left: 1.5em">
                                <div>デコーダがエンコーダストリーム上で受信したエンコーダ命令の解釈に失敗したことを示します。</div>
                            </dd>
                            <dt>QPACK_DECODER_STREAM_ERROR (0x0202):</dt>
                            <dd style="margin-left: 1.5em">
                                <div>エンコーダがデコーダストリーム上で受信したデコーダ命令の解釈に失敗したことを示します。</div>
                            </dd>
                        </dl>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="security-considerations">
                    <h2 id="rfc.section.7" class="np"><a href="#rfc.section.7">7.</a>&nbsp;<a
                            href="#security-considerations">セキュリティに関する考慮事項</a></h2>
                    <div id="rfc.section.7.p.1" class="avoidbreakafter">
                        <p>この節では QPACK に関する潜在的なセキュリティ上の懸念点を説明します：</p>
                    </div>
                    <div id="rfc.section.7.p.2">
                        <ul>
                            <li>共有された圧縮コンテキストに圧縮される機密についての推測を、長さを手がかりに検証するためのオラクルとして圧縮を利用すること。</li>
                            <li>デコーダ側で処理能力やメモリ容量を枯渇させることによるサービス拒否（DoS）。</li>
                        </ul>
                    </div>
                    <section id="probing-dynamic-table-state">
                        <h3 id="rfc.section.7.1"><a href="#rfc.section.7.1">7.1.</a>&nbsp;<a
                                href="#probing-dynamic-table-state">動的テーブル状態のプロービング</a></h3>
                        <div id="rfc.section.7.1.p.1">
                            <p>QPACK は HTTP のようなプロトコルに内在する冗長性を利用してフィールドセクションのエンコードサイズを削減します。その究極的な目的は、HTTP
                                リクエストやレスポンスの送信に必要なデータ量を削減することです。</p>
                        </div>
                        <div id="rfc.section.7.1.p.2">
                            <p>ヘッダやトレーラフィールドをエンコードするために使用される圧縮コンテキストは、エンコードされ送信されるフィールドを定義し、それらのエンコード後の長さを観測できる攻撃者によってプローブされ得ます。攻撃者が両方を行える場合、動的テーブルの状態についての推測を確認するためにリクエストを適応的に変更できます。推測がより短く圧縮されれば、攻撃者はエンコード長を観測してその推測が正しかったと推論できます。
                            </p>
                        </div>
                        <div id="rfc.section.7.1.p.3">
                            <p>これは、TLS（<a href="#TLS"><cite
                                        title="The Transport Layer Security (TLS) Protocol Version 1.3">[TLS]</cite></a>）や
                                QUIC トランスポート（<a href="#QUIC-TRANSPORT"><cite
                                        title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>）を介しても可能です。TLS
                                と QUIC は内容の機密性を保護する一方で、コンテンツの長さに対する保護は限定的だからです。</p>
                        </div>
                        <div id="rfc.section.7.1.p.4">
                            <aside>
                                <div id="rfc.section.7.1.p.4.1">
                                    <p>注：パディング方式は、この能力を持つ攻撃者に対して限定的な保護しか提供しないことがあり、与えられた推測に対応する長さを学習するために必要な試行回数を増やすにとどまる可能性があります。パディング方式はまた、送信されるビット数を増やすことで圧縮効率に直接影響します。
                                    </p>
                                </div>
                            </aside>
                        </div>
                        <div id="rfc.section.7.1.p.5">
                            <p>CRIME（<a href="#CRIME"><cite
                                        title="CRIME">[CRIME]</cite></a>）のような攻撃は、この種の攻撃能力の存在を実証しました。特定の攻撃は DEFLATE（<a
                                    href="#RFC1951"><cite
                                        title="DEFLATE Compressed Data Format Specification version 1.3">[RFC1951]</cite></a>）がプレフィックス一致に基づく冗長性を除去する点を突いたものでした。これにより攻撃者は
                                1 文字ずつ推測を確認できるようになり、指数時間の攻撃を線形時間にまで短縮しました。</p>
                        </div>
                        <section id="applicability-to-qpack-and-http">
                            <h4 id="rfc.section.7.1.1"><a href="#rfc.section.7.1.1">7.1.1.</a>&nbsp;<a
                                    href="#applicability-to-qpack-and-http">QPACK と HTTP への適用性</a></h4>
                            <div id="rfc.section.7.1.1.p.1">
                                <p>QPACK は CRIME に基づく攻撃モデルを緩和しますが完全には防止しません。QPACK
                                    は推測を個々の文字ではなくフィールド行全体に一致させることを要求するため、攻撃者は推測が正しいかどうかのみを学習することになり、フィールド値に対して総当たりの推測を行うしかなくなります。
                                </p>
                            </div>
                            <div id="rfc.section.7.1.1.p.2">
                                <p>したがって、特定のフィールド値を回復できるかは値のエントロピーに依存します。エントロピーの高い値は回復されにくく、エントロピーの低い値は依然として脆弱です。</p>
                            </div>
                            <div id="rfc.section.7.1.1.p.3">
                                <p>この種の攻撃は、2 つの相互に不信なエンティティが単一の HTTP/3 接続に置かれ、それぞれが送信されるリクエストやレスポンスを制御できる場合に常に可能です。共有
                                    QPACK
                                    圧縮器があるエンティティに動的テーブルへのエントリ追加を許し、別のエンティティがそれらのエントリを参照して選択的にフィールド行をエンコードできる場合、攻撃者（後者のエンティティ）はエンコード出力の長さを観測してテーブルの状態を学習できます。
                                </p>
                            </div>
                            <div id="rfc.section.7.1.1.p.4" class="avoidbreakafter">
                                <p>例えば、相互に不信なエンティティからのリクエストやレスポンスは、仲介者が次のいずれかを行う場合に発生します：</p>
                            </div>
                            <div id="rfc.section.7.1.1.p.5">
                                <ul>
                                    <li>複数のクライアントからのリクエストを単一接続でオリジンへ送信する、あるいは</li>
                                    <li>複数のオリジンサーバからのレスポンスをまとめてクライアントへの単一接続に置く。</li>
                                </ul>
                            </div>
                            <div id="rfc.section.7.1.1.p.6">
                                <p>ウェブブラウザは、同一接続上で異なるウェブオリジン（<a href="#RFC6454"><cite
                                            title="The Web Origin Concept">[RFC6454]</cite></a>）が行うリクエストは相互に不信なエンティティによる可能性があると想定する必要があります。他の相互に不信なエンティティを含むシナリオも考えられます。
                                </p>
                            </div>
                        </section>
                        <section id="mitigation">
                            <h4 id="rfc.section.7.1.2"><a href="#rfc.section.7.1.2">7.1.2.</a>&nbsp;<a
                                    href="#mitigation">緩和策</a></h4>
                            <div id="rfc.section.7.1.2.p.1">
                                <p>ヘッダやトレーラフィールドの機密性を必要とする HTTP
                                    利用者は、推測を事実上不可能にする十分なエントロピーを持つ値を使用することができます。しかしこれは一般的な解決策としては現実的でなく、すべての HTTP
                                    利用者に対して対策を強いることになり、新たな制約を課すことになります。</p>
                            </div>
                            <div id="rfc.section.7.1.2.p.2">
                                <p>HTTP 利用者への制約を課す代わりに、QPACK の実装は動的テーブルのプロービングの可能性を制限するように圧縮の適用方法を制約することができます。</p>
                            </div>
                            <div id="rfc.section.7.1.2.p.3">
                                <p>理想的な解は、メッセージを構築するエンティティごとに動的テーブルへのアクセスを分離することです。テーブルに追加されるフィールド値はあるエンティティに帰属させられ、その値を作成したエンティティのみがその値を抽出できるようにします。
                                </p>
                            </div>
                            <div id="rfc.section.7.1.2.p.4">
                                <p>このオプションの圧縮性能を改善するために、特定のエントリを公開としてタグ付けすることが考えられます。例えば、ウェブブラウザは Accept-Encoding
                                    ヘッダの値をすべてのリクエストで利用可能にするかもしれません。</p>
                            </div>
                            <div id="rfc.section.7.1.2.p.5">
                                <p>フィールド値の由来を十分に把握していないエンコーダは、同じフィールド名で多数の異なる値がある場合にペナルティを導入することができます。このペナルティにより、多数の推測試行が行われると、そのフィールドは将来のメッセージで動的テーブルのエントリと比較されなくなり、実質的にさらなる推測を防ぐことができます。
                                </p>
                            </div>
                            <div id="rfc.section.7.1.2.p.6">
                                <p>この応答はフィールド値の長さに反比例して行われることがあります。動的テーブルへのアクセスを無効にする対応は、より短い値に対してより早く、または高い確率で発生するようにできます。
                                </p>
                            </div>
                            <div id="rfc.section.7.1.2.p.7">
                                <p>この緩和策は二つのエンドポイント間で最も効果的です。仲介者が元のエンコーダが分離していた圧縮コンテキストを意図せずに結合してしまうような場合、元のエンコーダが分離していた状態を仲介者が知らないために効果が薄れる可能性があります。
                                </p>
                            </div>
                            <div id="rfc.section.7.1.2.p.8">
                                <aside>
                                    <div id="rfc.section.7.1.2.p.8.1">
                                        <p>注：該当フィールドに対応するエントリを単に動的テーブルから削除するだけでは、攻撃者が値を再インストールさせる信頼できる方法を持っている場合には効果が薄いことがあります。例えば、ウェブブラウザで画像を読み込むリクエストには通常
                                            Cookie ヘッダが含まれ、ウェブサイトは簡単に画像を読み込ませることで動的テーブル内のエントリを更新できます。</p>
                                    </div>
                                </aside>
                            </div>
                        </section>
                        <section id="never-indexed-literals">
                            <h4 id="rfc.section.7.1.3"><a href="#rfc.section.7.1.3">7.1.3.</a>&nbsp;<a
                                    href="#never-indexed-literals">決してインデックスされないリテラル</a></h4>
                            <div id="rfc.section.7.1.3.p.1">
                                <p>実装は機微なフィールドを保護するためにそれらを圧縮せずに値をリテラルとしてエンコードすることを選択できます。</p>
                            </div>
                            <div id="rfc.section.7.1.3.p.2">
                                <p>フィールド行を動的テーブルに挿入しないことは、経路上のすべてのホップで回避される場合にのみ効果的です。never-indexed literal ビット（<a
                                        href="#literal-name-reference"
                                        title="Literal Field Line with Name Reference">セクション
                                        4.5.4</a>参照）は、特定の値が意図的にリテラルとして送信されたことを仲介者に通知するために使用できます。</p>
                            </div>
                            <div id="rfc.section.7.1.3.p.3">
                                <p>仲介者は、'N' ビットがセットされたリテラル表現を、インデックスする表現に再エンコードしてはなりません（<em class="bcp14">MUST
                                        NOT</em>）。QPACK を再エンコードに使用する場合、'N' ビットがセットされたリテラル表現を使用しなければなりません（<em
                                        class="bcp14">MUST</em>）。HPACK を使用する場合は、never-indexed literal 表現（<a
                                        href="https://www.rfc-editor.org/rfc/rfc7541.html#section-6.2.3">RFC 7541 セクション
                                        6.2.3</a>）を使用しなければなりません（<em class="bcp14">MUST</em>）。</p>
                            </div>
                            <div id="rfc.section.7.1.3.p.4">
                                <p>フィールド値を決してインデックスしないとマークするか否かの選択は複数の要因に依存します。QPACK
                                    はフィールド値全体の推測に対して保護を提供しないため、短いか低エントロピーの値は攻撃者により容易に回復され得ます。したがって、エンコーダは低エントロピーの値をインデックスしないことを選ぶかもしれません。
                                </p>
                            </div>
                            <div id="rfc.section.7.1.3.p.5">
                                <p>エンコーダは Cookie や Authorization のように回復されると非常に価値のあるフィールドについては値をインデックスしないことを選ぶかもしれません。
                                </p>
                            </div>
                            <div id="rfc.section.7.1.3.p.6">
                                <p>逆に、エンコーダは露見してもほとんど価値のないフィールドについてはインデックスすることを好むかもしれません。例えば User-Agent
                                    ヘッダはリクエスト間で大きく変化せず任意のサーバへ送信されるため、その値が使われていることを確認できてもほとんど価値がありません。</p>
                            </div>
                            <div id="rfc.section.7.1.3.p.7">
                                <p>これらの決定基準は新しい攻撃が発見されるにつれて進化することに注意してください。</p>
                            </div>
                        </section>
                    </section>
                    <section id="static-huffman-encoding">
                        <h3 id="rfc.section.7.2"><a href="#rfc.section.7.2">7.2.</a>&nbsp;<a
                                href="#static-huffman-encoding">静的ハフマン符号化</a></h3>
                        <div id="rfc.section.7.2.p.1">
                            <p>現時点で静的ハフマン符号化に対する既知の攻撃はありません。ある研究では静的ハフマン符号表の使用が情報漏えいを生むことが示されましたが、その研究は攻撃者がその情報漏えいを利用して有意義な情報を回復できるとは結論していません（<a
                                    href="#PETAL"><cite
                                        title="PETAL: Preset Encoding Table Information Leakage">[PETAL]</cite></a>参照）。
                            </p>
                        </div>
                    </section>
                    <section id="memory-consumption">
                        <h3 id="rfc.section.7.3"><a href="#rfc.section.7.3">7.3.</a>&nbsp;<a
                                href="#memory-consumption">メモリ消費</a></h3>
                        <div id="rfc.section.7.3.p.1">
                            <p>攻撃者はエンドポイントのメモリを枯渇させようと試みる可能性があります。QPACK
                                はエンドポイントによって割り当てられるピークおよび安定したメモリ量の両方を制限するよう設計されています。</p>
                        </div>
                        <div id="rfc.section.7.3.p.2">
                            <p>QPACK は動的テーブルの最大サイズの定義とブロックされるストリームの最大数を利用して、エンコーダがデコーダに消費させ得るメモリ量を制限します。HTTP/3
                                では、これらの値はデコーダが設定パラメータ SETTINGS_QPACK_MAX_TABLE_CAPACITY と SETTINGS_QPACK_BLOCKED_STREAMS
                                によって制御します（<a href="#maximum-dynamic-table-capacity"
                                    title="Maximum Dynamic Table Capacity">セクション 3.2.3</a> および <a
                                    href="#blocked-streams" title="Blocked Streams">セクション
                                    2.1.2</a>参照）。動的テーブルのサイズ制限は動的テーブルに格納されるデータのサイズに、若干のオーバーヘッドを加えたものを考慮します。ブロックされるストリーム数の制限はデコーダが必要とする最大メモリ量の単なる代理にすぎません。実際の最大メモリ量はデコーダが各ブロックされたストリームを追跡するために使用するメモリ量に依存します。
                            </p>
                        </div>
                        <div id="rfc.section.7.3.p.3">
                            <p>デコーダは動的テーブルの最大サイズに適切な値を設定することで動的テーブルに使われる状態メモリ量を制限できます。HTTP/3 ではこれは
                                SETTINGS_QPACK_MAX_TABLE_CAPACITY
                                パラメータの適切な値を設定することで実現されます。エンコーダはデコーダが許すより小さい動的テーブルサイズを選択してデコーダにシグナルすることで自らが使用する状態メモリ量を制限できます（<a
                                    href="#set-dynamic-capacity" title="Set Dynamic Table Capacity">セクション 4.3.1</a>参照）。
                            </p>
                        </div>
                        <div id="rfc.section.7.3.p.4">
                            <p>デコーダはブロックされたストリームに対して使用する状態メモリ量を、ブロックされ得るストリームの最大数の適切な値を設定することで制限できます。HTTP/3 ではこれは
                                SETTINGS_QPACK_BLOCKED_STREAMS
                                パラメータの適切な値を設定することで実現されます。ブロックされるリスクのあるストリームはエンコーダ側で追加の状態メモリを消費しません。</p>
                        </div>
                        <div id="rfc.section.7.3.p.5">
                            <p>エンコーダは未確認のフィールドセクション内の全ての動的テーブル参照を追跡するためのメモリを割り当てます。実装は追跡する参照の数を制限することで直接的に状態メモリの量を制限できます。デコーダへのシグナリングは不要です。ただし、動的テーブル参照を制限すると圧縮効果が低下します。
                            </p>
                        </div>
                        <div id="rfc.section.7.3.p.6">
                            <p>エンコーダまたはデコーダが消費する一時的なメモリ量は、フィールド行を逐次処理することで制限できます。デコーダ実装はフィールドセクションをデコードする際にフィールド行の完全な一覧を保持する必要はありません。エンコーダ実装はシングルパスアルゴリズムを使用している場合、フィールドセクションをエンコードする間に完全なフィールド行一覧を保持する必要はありません。アプリケーションが他の理由で完全な一覧を保持する必要がある場合がある点に注意してください。
                            </p>
                        </div>
                        <div id="rfc.section.7.3.p.7">
                            <p>交渉された動的テーブルサイズの上限は QPACK
                                実装によって消費され得るメモリの多くを説明しますが、フロー制御により直ちに送信できないデータはこの制限の影響を受けません。実装は未送信データのサイズを制限すべきです。特にデコーダストリーム上では送信する内容を選べる柔軟性が限られているため注意が必要です。未送信データが過剰になった場合の対応としては、ピアが新しいストリームを開ける能力を制限する、エンコーダストリームからのみ読み取る、あるいは接続を閉じるなどが考えられます。
                            </p>
                        </div>
                    </section>
                    <section id="implementation-limits">
                        <h3 id="rfc.section.7.4"><a href="#rfc.section.7.4">7.4.</a>&nbsp;<a
                                href="#implementation-limits">実装上の制限</a></h3>
                        <div id="rfc.section.7.4.p.1">
                            <p>QPACK の実装は、大きな整数値、長い整数エンコーディング、または長い文字列リテラルがセキュリティ上の弱点を生じさせないことを保証する必要があります。</p>
                        </div>
                        <div id="rfc.section.7.4.p.2">
                            <p>実装は受け入れる整数の値やエンコード長、および文字列リテラルの長さに対して上限を設定する必要があります（<a href="#prefixed-integers"
                                    title="Prefixed Integers">セクション 4.1.1</a>、および <a href="#string-literals"
                                    title="String Literals">セクション 4.1.2</a>参照）。これらの上限は、HTTP
                                実装が処理可能に構成できる最大の個々のフィールドを処理できるだけ十分大きくあるべきです（<em class="bcp14">SHOULD</em>）。</p>
                        </div>
                        <div id="rfc.section.7.4.p.3">
                            <p>実装がデコードできないより大きな値に遭遇した場合、要求ストリーム上であればこれは QPACK_DECOMPRESSION_FAILED
                                型のストリームエラーとして扱われなければならず、エンコーダやデコーダストリーム上であれば適切な種類の接続エラーとして扱われなければなりません（<em
                                    class="bcp14">MUST</em>）。</p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="iana-considerations">
                    <h2 id="rfc.section.8" class="np"><a href="#rfc.section.8">8.</a>&nbsp;<a
                            href="#iana-considerations">IANA に関する考慮事項</a></h2>
                    <div id="rfc.section.8.p.1">
                        <p>この文書は <a href="#HTTP3"><cite title="HTTP/3">[HTTP/3]</cite></a>
                            によって定義されたレジストリへ複数の登録を行います。本文書による割り当てはすべて永久的なステータスに割り当てられ、変更管理者は IETF、連絡先は HTTP 作業部会
                            (ietf-http-wg@w3.org) としています。</p>
                    </div>
                    <section id="settings-registration">
                        <h3 id="rfc.section.8.1"><a href="#rfc.section.8.1">8.1.</a>&nbsp;<a
                                href="#settings-registration">設定の登録</a></h3>
                        <div id="rfc.section.8.1.p.1">
                            <p>本文書は二つの設定を指定します。以下の表のエントリは <a href="#HTTP3"><cite title="HTTP/3">[HTTP/3]</cite></a>
                                によって確立された「HTTP/3 Settings」レジストリに登録されます。</p>
                        </div>
                        <div class="table table-condensed table-striped">
                            <table class="v3 text-center">
                                <caption>表 1: HTTP/3 Settings レジストリへの追加</caption>
                                <thead>
                                    <tr>
                                        <th class="text-left" colspan="1" rowspan="1">設定名</th>
                                        <th class="center" colspan="1" rowspan="1">コード</th>
                                        <th class="text-left" colspan="1" rowspan="1">仕様</th>
                                        <th class="text-left" colspan="1" rowspan="1">デフォルト</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="text-left" colspan="1" rowspan="1">QPACK_MAX_TABLE_CAPACITY</td>
                                        <td class="center" colspan="1" rowspan="1">0x01</td>
                                        <td class="text-left" colspan="1" rowspan="1"><a href="#configuration"
                                                title="Configuration">セクション 5</a></td>
                                        <td class="text-left" colspan="1" rowspan="1">0</td>
                                    </tr>
                                    <tr>
                                        <td class="text-left" colspan="1" rowspan="1">QPACK_BLOCKED_STREAMS</td>
                                        <td class="center" colspan="1" rowspan="1">0x07</td>
                                        <td class="text-left" colspan="1" rowspan="1"><a href="#configuration"
                                                title="Configuration">セクション 5</a></td>
                                        <td class="text-left" colspan="1" rowspan="1">0</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div id="rfc.section.8.1.p.2">
                            <p>書式上の理由から、ここでの設定名は 'SETTINGS_' プレフィックスを取り除いて短縮されています。</p>
                        </div>
                    </section>
                    <section id="stream-type-registration">
                        <h3 id="rfc.section.8.2"><a href="#rfc.section.8.2">8.2.</a>&nbsp;<a
                                href="#stream-type-registration">ストリームタイプの登録</a></h3>
                        <div id="rfc.section.8.2.p.1">
                            <p>本文書は二つのストリームタイプを指定します。以下の表のエントリは <a href="#HTTP3"><cite
                                        title="HTTP/3">[HTTP/3]</cite></a> によって確立された「HTTP/3 Stream Types」レジストリに登録されます。
                            </p>
                        </div>
                        <div class="table table-condensed table-striped">
                            <table class="v3 text-center">
                                <caption>表 2: HTTP/3 Stream Types レジストリへの追加</caption>
                                <thead>
                                    <tr>
                                        <th class="text-left" colspan="1" rowspan="1">ストリームタイプ</th>
                                        <th class="center" colspan="1" rowspan="1">コード</th>
                                        <th class="text-left" colspan="1" rowspan="1">仕様</th>
                                        <th class="text-left" colspan="1" rowspan="1">送信者</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="text-left" colspan="1" rowspan="1">QPACK Encoder Stream</td>
                                        <td class="center" colspan="1" rowspan="1">0x02</td>
                                        <td class="text-left" colspan="1" rowspan="1"><a href="#enc-dec-stream-def"
                                                title="Encoder and Decoder Streams">セクション 4.2</a></td>
                                        <td class="text-left" colspan="1" rowspan="1">両者</td>
                                    </tr>
                                    <tr>
                                        <td class="text-left" colspan="1" rowspan="1">QPACK Decoder Stream</td>
                                        <td class="center" colspan="1" rowspan="1">0x03</td>
                                        <td class="text-left" colspan="1" rowspan="1"><a href="#enc-dec-stream-def"
                                                title="Encoder and Decoder Streams">セクション 4.2</a></td>
                                        <td class="text-left" colspan="1" rowspan="1">両者</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </section>
                    <section id="error-code-registration">
                        <h3 id="rfc.section.8.3"><a href="#rfc.section.8.3">8.3.</a>&nbsp;<a
                                href="#error-code-registration">エラーコードの登録</a></h3>
                        <div id="rfc.section.8.3.p.1">
                            <p>本文書は三つのエラーコードを指定します。以下の表のエントリは <a href="#HTTP3"><cite title="HTTP/3">[HTTP/3]</cite></a>
                                によって確立された「HTTP/3 Error Codes」レジストリに登録されます。</p>
                        </div>
                        <div class="table table-condensed table-striped">
                            <table class="v3 text-center">
                                <caption>表 3: HTTP/3 Error Codes レジストリへの追加</caption>
                                <thead>
                                    <tr>
                                        <th class="text-left" colspan="1" rowspan="1">名前</th>
                                        <th class="text-left" colspan="1" rowspan="1">コード</th>
                                        <th class="text-left" colspan="1" rowspan="1">説明</th>
                                        <th class="text-left" colspan="1" rowspan="1">仕様</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="text-left" colspan="1" rowspan="1">QPACK_DECOMPRESSION_FAILED</td>
                                        <td class="text-left" colspan="1" rowspan="1">0x0200</td>
                                        <td class="text-left" colspan="1" rowspan="1">フィールドセクションのデコードに失敗</td>
                                        <td class="text-left" colspan="1" rowspan="1"><a href="#error-handling"
                                                title="Error Handling">セクション 6</a></td>
                                    </tr>
                                    <tr>
                                        <td class="text-left" colspan="1" rowspan="1">QPACK_ENCODER_STREAM_ERROR</td>
                                        <td class="text-left" colspan="1" rowspan="1">0x0201</td>
                                        <td class="text-left" colspan="1" rowspan="1">エンコーダストリーム上のエラー</td>
                                        <td class="text-left" colspan="1" rowspan="1"><a href="#error-handling"
                                                title="Error Handling">セクション 6</a></td>
                                    </tr>
                                    <tr>
                                        <td class="text-left" colspan="1" rowspan="1">QPACK_DECODER_STREAM_ERROR</td>
                                        <td class="text-left" colspan="1" rowspan="1">0x0202</td>
                                        <td class="text-left" colspan="1" rowspan="1">デコーダストリーム上のエラー</td>
                                        <td class="text-left" colspan="1" rowspan="1"><a href="#error-handling"
                                                title="Error Handling">セクション 6</a></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </section>
                </section>
                <section class="np">
                    <div id="rfc.references">
                        <h2 id="rfc.section.9"><a href="#rfc.section.9">9.</a> 参考文献</h2>
                        <section>
                            <div id="rfc.references.2">
                                <h3 id="rfc.section.9.1"><a href="#rfc.section.9.1">9.1.</a> 規範的参考文献</h3>
                                <dl class="dl-horizontal">
                                    <dt id="HTTP">[<a href="#HTTP" class="smpl">HTTP</a>]</dt>
                                    <dd>Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9110.html">HTTP セマンティクス</a>”, <a
                                            href="https://www.rfc-editor.org/info/std97">STD 97</a>, RFC 9110, <a
                                            href="https://dx.doi.org/10.17487/RFC9110">DOI 10.17487/RFC9110</a>,
                                        2022年6月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9110">https://www.rfc-editor.org/info/rfc9110</a>&gt;.
                                    </dd>
                                    <dt id="HTTP3">[<a href="#HTTP3" class="smpl">HTTP/3</a>]</dt>
                                    <dd>Bishop, M., Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9114.html">HTTP/3</a>”, RFC 9114, <a
                                            href="https://dx.doi.org/10.17487/RFC9114">DOI 10.17487/RFC9114</a>,
                                        2022年6月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9114">https://www.rfc-editor.org/info/rfc9114</a>&gt;.
                                    </dd>
                                    <dt id="QUIC-TRANSPORT">[<a href="#QUIC-TRANSPORT" class="smpl">QUIC-TRANSPORT</a>]
                                    </dt>
                                    <dd>Iyengar, J., Ed. and M. Thomson, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9000.html">QUIC: A UDP-Based
                                            Multiplexed and Secure Transport</a>”, RFC 9000, <a
                                            href="https://dx.doi.org/10.17487/RFC9000">DOI 10.17487/RFC9000</a>,
                                        2021年5月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9000">https://www.rfc-editor.org/info/rfc9000</a>&gt;.
                                    </dd>
                                    <dt id="RFC2119">[<a href="#RFC2119" class="smpl">RFC2119</a>]</dt>
                                    <dd>Bradner, S., “<a href="https://www.rfc-editor.org/rfc/rfc2119.html">RFC
                                            における要求レベルを示すキーワード</a>”, <a href="https://www.rfc-editor.org/info/bcp14">BCP
                                            14</a>, RFC 2119, <a href="https://dx.doi.org/10.17487/RFC2119">DOI
                                            10.17487/RFC2119</a>, 1997年3月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;.
                                    </dd>
                                    <dt id="RFC2360">[<a href="#RFC2360" class="smpl">RFC2360</a>]</dt>
                                    <dd>Scott, G., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc2360.html">インターネット標準作成者のためのガイド</a>”,
                                        <a href="https://www.rfc-editor.org/info/bcp22">BCP 22</a>, RFC 2360, <a
                                            href="https://dx.doi.org/10.17487/RFC2360">DOI 10.17487/RFC2360</a>,
                                        1998年6月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc2360">https://www.rfc-editor.org/info/rfc2360</a>&gt;.
                                    </dd>
                                    <dt id="RFC7541">[<a href="#RFC7541" class="smpl">RFC7541</a>]</dt>
                                    <dd>Peon, R. and H. Ruellan, “<a
                                            href="https://www.rfc-editor.org/rfc/rfc7541.html">HPACK: Header Compression
                                            for HTTP/2</a>”, RFC 7541, <a href="https://dx.doi.org/10.17487/RFC7541">DOI
                                            10.17487/RFC7541</a>, 2015年5月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc7541">https://www.rfc-editor.org/info/rfc7541</a>&gt;.
                                    </dd>
                                    <dt id="RFC8174">[<a href="#RFC8174" class="smpl">RFC8174</a>]</dt>
                                    <dd>Leiba, B., “<a href="https://www.rfc-editor.org/rfc/rfc8174.html">RFC 2119
                                            のキーワードにおける大文字と小文字の曖昧さ</a>”, <a
                                            href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>, RFC 8174, <a
                                            href="https://dx.doi.org/10.17487/RFC8174">DOI 10.17487/RFC8174</a>,
                                        2017年5月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.
                                    </dd>
                                </dl>
                            </div>
                        </section>
                        <section>
                            <div id="rfc.references.3">
                                <h3 id="rfc.section.9.2"><a href="#rfc.section.9.2">9.2.</a> 情報的参考文献</h3>
                                <dl class="dl-horizontal">
                                    <dt id="CRIME">[<a href="#CRIME" class="smpl">CRIME</a>]</dt>
                                    <dd>Wikipedia, “<a
                                            href="http://en.wikipedia.org/w/index.php?title=CRIME&amp;oldid=660948120">CRIME</a>”,
                                        2015年5月, &lt;<a
                                            href="http://en.wikipedia.org/w/index.php?title=CRIME&amp;oldid=660948120">http://en.wikipedia.org/w/index.php?title=CRIME&amp;oldid=660948120</a>&gt;.
                                    </dd>
                                    <dt id="HTTP2">[<a href="#HTTP2" class="smpl">HTTP/2</a>]</dt>
                                    <dd>Thomson, M., Ed. and C. Benfield, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9113.html">HTTP/2</a>”, RFC 9113, <a
                                            href="https://dx.doi.org/10.17487/RFC9113">DOI 10.17487/RFC9113</a>,
                                        2022年6月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9113">https://www.rfc-editor.org/info/rfc9113</a>&gt;.
                                    </dd>
                                    <dt id="PETAL">[<a href="#PETAL" class="smpl">PETAL</a>]</dt>
                                    <dd>Tan, J. and J. Nahata, “<a
                                            href="http://www.pdl.cmu.edu/PDL-FTP/associated/CMU-PDL-13-106.pdf">PETAL:
                                            Preset Encoding Table Information Leakage</a>”, 2013年4月, &lt;<a
                                            href="http://www.pdl.cmu.edu/PDL-FTP/associated/CMU-PDL-13-106.pdf">http://www.pdl.cmu.edu/PDL-FTP/associated/CMU-PDL-13-106.pdf</a>&gt;.
                                    </dd>
                                    <dt id="RFC1951">[<a href="#RFC1951" class="smpl">RFC1951</a>]</dt>
                                    <dd>Deutsch, P., “<a href="https://www.rfc-editor.org/rfc/rfc1951.html">DEFLATE
                                            圧縮データ形式仕様 バージョン 1.3</a>”, RFC 1951, <a
                                            href="https://dx.doi.org/10.17487/RFC1951">DOI 10.17487/RFC1951</a>,
                                        1996年5月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc1951">https://www.rfc-editor.org/info/rfc1951</a>&gt;.
                                    </dd>
                                    <dt id="RFC6454">[<a href="#RFC6454" class="smpl">RFC6454</a>]</dt>
                                    <dd>Barth, A., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc6454.html">ウェブオリジンの概念</a>”, RFC
                                        6454, <a href="https://dx.doi.org/10.17487/RFC6454">DOI
                                            10.17487/RFC6454</a>, 2011年12月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc6454">https://www.rfc-editor.org/info/rfc6454</a>&gt;.
                                    </dd>
                                    <dt id="TLS">[<a href="#TLS" class="smpl">TLS</a>]</dt>
                                    <dd>Rescorla, E., “<a href="https://www.rfc-editor.org/rfc/rfc8446.html">Transport
                                            Layer Security (TLS) プロトコル バージョン 1.3</a>”, RFC 8446, <a
                                            href="https://dx.doi.org/10.17487/RFC8446">DOI 10.17487/RFC8446</a>,
                                        2018年8月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc8446">https://www.rfc-editor.org/info/rfc8446</a>&gt;.
                                    </dd>
                                </dl>
                            </div>
                        </section>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="static-table">
                    <h2 id="rfc.section.A" class="np"><a href="#rfc.section.A">Appendix A.</a>&nbsp;<a
                            href="#static-table">静的テーブル</a></h2>
                    <div id="rfc.section.A.p.1">
                        <p>この表は 2018
                            年の実際のインターネットトラフィックを分析して作成され、非対応または非標準の値を除外した上で最も一般的なヘッダフィールドを含めています。この手法のため、一部のエントリは一貫性に欠けたり、類似するが完全には同一でない値で複数回現れることがあります。エントリの順序は、最も一般的なヘッダフィールドを最小のバイト数で符号化するよう最適化されています。
                        </p>
                    </div>
                    <div class="table table-condensed table-striped">
                        <table class="v3 text-center">
                            <caption>表 4: 静的テーブル</caption>
                            <thead>
                                <tr>
                                    <th class="text-left" colspan="1" rowspan="1">インデックス</th>
                                    <th class="text-left" colspan="1" rowspan="1">名前</th>
                                    <th class="text-left" colspan="1" rowspan="1">値</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">0</td>
                                    <td class="text-left" colspan="1" rowspan="1">:authority</td>
                                    <td class="text-left" colspan="1" rowspan="1"></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">1</td>
                                    <td class="text-left" colspan="1" rowspan="1">:path</td>
                                    <td class="text-left" colspan="1" rowspan="1">/</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">2</td>
                                    <td class="text-left" colspan="1" rowspan="1">age</td>
                                    <td class="text-left" colspan="1" rowspan="1">0</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">3</td>
                                    <td class="text-left" colspan="1" rowspan="1">content-disposition</td>
                                    <td class="text-left" colspan="1" rowspan="1"></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">4</td>
                                    <td class="text-left" colspan="1" rowspan="1">content-length</td>
                                    <td class="text-left" colspan="1" rowspan="1">0</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">5</td>
                                    <td class="text-left" colspan="1" rowspan="1">cookie</td>
                                    <td class="text-left" colspan="1" rowspan="1"></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">6</td>
                                    <td class="text-left" colspan="1" rowspan="1">date</td>
                                    <td class="text-left" colspan="1" rowspan="1"></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">7</td>
                                    <td class="text-left" colspan="1" rowspan="1">etag</td>
                                    <td class="text-left" colspan="1" rowspan="1"></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">8</td>
                                    <td class="text-left" colspan="1" rowspan="1">if-modified-since</td>
                                    <td class="text-left" colspan="1" rowspan="1"></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">9</td>
                                    <td class="text-left" colspan="1" rowspan="1">if-none-match</td>
                                    <td class="text-left" colspan="1" rowspan="1"></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">10</td>
                                    <td class="text-left" colspan="1" rowspan="1">last-modified</td>
                                    <td class="text-left" colspan="1" rowspan="1"></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">11</td>
                                    <td class="text-left" colspan="1" rowspan="1">link</td>
                                    <td class="text-left" colspan="1" rowspan="1"></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">12</td>
                                    <td class="text-left" colspan="1" rowspan="1">location</td>
                                    <td class="text-left" colspan="1" rowspan="1"></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">13</td>
                                    <td class="text-left" colspan="1" rowspan="1">referer</td>
                                    <td class="text-left" colspan="1" rowspan="1"></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">14</td>
                                    <td class="text-left" colspan="1" rowspan="1">set-cookie</td>
                                    <td class="text-left" colspan="1" rowspan="1"></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">15</td>
                                    <td class="text-left" colspan="1" rowspan="1">:method</td>
                                    <td class="text-left" colspan="1" rowspan="1">CONNECT</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">16</td>
                                    <td class="text-left" colspan="1" rowspan="1">:method</td>
                                    <td class="text-left" colspan="1" rowspan="1">DELETE</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">17</td>
                                    <td class="text-left" colspan="1" rowspan="1">:method</td>
                                    <td class="text-left" colspan="1" rowspan="1">GET</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">18</td>
                                    <td class="text-left" colspan="1" rowspan="1">:method</td>
                                    <td class="text-left" colspan="1" rowspan="1">HEAD</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">19</td>
                                    <td class="text-left" colspan="1" rowspan="1">:method</td>
                                    <td class="text-left" colspan="1" rowspan="1">OPTIONS</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">20</td>
                                    <td class="text-left" colspan="1" rowspan="1">:method</td>
                                    <td class="text-left" colspan="1" rowspan="1">POST</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">21</td>
                                    <td class="text-left" colspan="1" rowspan="1">:method</td>
                                    <td class="text-left" colspan="1" rowspan="1">PUT</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">22</td>
                                    <td class="text-left" colspan="1" rowspan="1">:scheme</td>
                                    <td class="text-left" colspan="1" rowspan="1">http</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">23</td>
                                    <td class="text-left" colspan="1" rowspan="1">:scheme</td>
                                    <td class="text-left" colspan="1" rowspan="1">https</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">24</td>
                                    <td class="text-left" colspan="1" rowspan="1">:status</td>
                                    <td class="text-left" colspan="1" rowspan="1">103</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">25</td>
                                    <td class="text-left" colspan="1" rowspan="1">:status</td>
                                    <td class="text-left" colspan="1" rowspan="1">200</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">26</td>
                                    <td class="text-left" colspan="1" rowspan="1">:status</td>
                                    <td class="text-left" colspan="1" rowspan="1">304</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">27</td>
                                    <td class="text-left" colspan="1" rowspan="1">:status</td>
                                    <td class="text-left" colspan="1" rowspan="1">404</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">28</td>
                                    <td class="text-left" colspan="1" rowspan="1">:status</td>
                                    <td class="text-left" colspan="1" rowspan="1">503</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">29</td>
                                    <td class="text-left" colspan="1" rowspan="1">accept</td>
                                    <td class="text-left" colspan="1" rowspan="1">*/*</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">30</td>
                                    <td class="text-left" colspan="1" rowspan="1">accept</td>
                                    <td class="text-left" colspan="1" rowspan="1">application/dns-message</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">31</td>
                                    <td class="text-left" colspan="1" rowspan="1">accept-encoding</td>
                                    <td class="text-left" colspan="1" rowspan="1">gzip, deflate, br</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">32</td>
                                    <td class="text-left" colspan="1" rowspan="1">accept-ranges</td>
                                    <td class="text-left" colspan="1" rowspan="1">bytes</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">33</td>
                                    <td class="text-left" colspan="1" rowspan="1">access-control-allow-headers</td>
                                    <td class="text-left" colspan="1" rowspan="1">cache-control</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">34</td>
                                    <td class="text-left" colspan="1" rowspan="1">access-control-allow-headers</td>
                                    <td class="text-left" colspan="1" rowspan="1">content-type</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">35</td>
                                    <td class="text-left" colspan="1" rowspan="1">access-control-allow-origin</td>
                                    <td class="text-left" colspan="1" rowspan="1">*</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">36</td>
                                    <td class="text-left" colspan="1" rowspan="1">cache-control</td>
                                    <td class="text-left" colspan="1" rowspan="1">max-age=0</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">37</td>
                                    <td class="text-left" colspan="1" rowspan="1">cache-control</td>
                                    <td class="text-left" colspan="1" rowspan="1">max-age=2592000</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">38</td>
                                    <td class="text-left" colspan="1" rowspan="1">cache-control</td>
                                    <td class="text-left" colspan="1" rowspan="1">max-age=604800</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">39</td>
                                    <td class="text-left" colspan="1" rowspan="1">cache-control</td>
                                    <td class="text-left" colspan="1" rowspan="1">no-cache</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">40</td>
                                    <td class="text-left" colspan="1" rowspan="1">cache-control</td>
                                    <td class="text-left" colspan="1" rowspan="1">no-store</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">41</td>
                                    <td class="text-left" colspan="1" rowspan="1">cache-control</td>
                                    <td class="text-left" colspan="1" rowspan="1">public, max-age=31536000</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">42</td>
                                    <td class="text-left" colspan="1" rowspan="1">content-encoding</td>
                                    <td class="text-left" colspan="1" rowspan="1">br</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">43</td>
                                    <td class="text-left" colspan="1" rowspan="1">content-encoding</td>
                                    <td class="text-left" colspan="1" rowspan="1">gzip</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">44</td>
                                    <td class="text-left" colspan="1" rowspan="1">content-type</td>
                                    <td class="text-left" colspan="1" rowspan="1">application/dns-message</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">45</td>
                                    <td class="text-left" colspan="1" rowspan="1">content-type</td>
                                    <td class="text-left" colspan="1" rowspan="1">application/javascript</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">46</td>
                                    <td class="text-left" colspan="1" rowspan="1">content-type</td>
                                    <td class="text-left" colspan="1" rowspan="1">application/json</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">47</td>
                                    <td class="text-left" colspan="1" rowspan="1">content-type</td>
                                    <td class="text-left" colspan="1" rowspan="1">application/x-www-form-urlencoded</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">48</td>
                                    <td class="text-left" colspan="1" rowspan="1">content-type</td>
                                    <td class="text-left" colspan="1" rowspan="1">image/gif</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">49</td>
                                    <td class="text-left" colspan="1" rowspan="1">content-type</td>
                                    <td class="text-left" colspan="1" rowspan="1">image/jpeg</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">50</td>
                                    <td class="text-left" colspan="1" rowspan="1">content-type</td>
                                    <td class="text-left" colspan="1" rowspan="1">image/png</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">51</td>
                                    <td class="text-left" colspan="1" rowspan="1">content-type</td>
                                    <td class="text-left" colspan="1" rowspan="1">text/css</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">52</td>
                                    <td class="text-left" colspan="1" rowspan="1">content-type</td>
                                    <td class="text-left" colspan="1" rowspan="1">text/html; charset=utf-8</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">53</td>
                                    <td class="text-left" colspan="1" rowspan="1">content-type</td>
                                    <td class="text-left" colspan="1" rowspan="1">text/plain</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">54</td>
                                    <td class="text-left" colspan="1" rowspan="1">content-type</td>
                                    <td class="text-left" colspan="1" rowspan="1">text/plain;charset=utf-8</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">55</td>
                                    <td class="text-left" colspan="1" rowspan="1">range</td>
                                    <td class="text-left" colspan="1" rowspan="1">bytes=0-</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">56</td>
                                    <td class="text-left" colspan="1" rowspan="1">strict-transport-security</td>
                                    <td class="text-left" colspan="1" rowspan="1">max-age=31536000</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">57</td>
                                    <td class="text-left" colspan="1" rowspan="1">strict-transport-security</td>
                                    <td class="text-left" colspan="1" rowspan="1">max-age=31536000; includesubdomains
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">58</td>
                                    <td class="text-left" colspan="1" rowspan="1">strict-transport-security</td>
                                    <td class="text-left" colspan="1" rowspan="1">max-age=31536000; includesubdomains;
                                        preload</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">59</td>
                                    <td class="text-left" colspan="1" rowspan="1">vary</td>
                                    <td class="text-left" colspan="1" rowspan="1">accept-encoding</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">60</td>
                                    <td class="text-left" colspan="1" rowspan="1">vary</td>
                                    <td class="text-left" colspan="1" rowspan="1">origin</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">61</td>
                                    <td class="text-left" colspan="1" rowspan="1">x-content-type-options</td>
                                    <td class="text-left" colspan="1" rowspan="1">nosniff</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">62</td>
                                    <td class="text-left" colspan="1" rowspan="1">x-xss-protection</td>
                                    <td class="text-left" colspan="1" rowspan="1">1; mode=block</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">63</td>
                                    <td class="text-left" colspan="1" rowspan="1">:status</td>
                                    <td class="text-left" colspan="1" rowspan="1">100</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">64</td>
                                    <td class="text-left" colspan="1" rowspan="1">:status</td>
                                    <td class="text-left" colspan="1" rowspan="1">204</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">65</td>
                                    <td class="text-left" colspan="1" rowspan="1">:status</td>
                                    <td class="text-left" colspan="1" rowspan="1">206</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">66</td>
                                    <td class="text-left" colspan="1" rowspan="1">:status</td>
                                    <td class="text-left" colspan="1" rowspan="1">302</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">67</td>
                                    <td class="text-left" colspan="1" rowspan="1">:status</td>
                                    <td class="text-left" colspan="1" rowspan="1">400</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">68</td>
                                    <td class="text-left" colspan="1" rowspan="1">:status</td>
                                    <td class="text-left" colspan="1" rowspan="1">403</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">69</td>
                                    <td class="text-left" colspan="1" rowspan="1">:status</td>
                                    <td class="text-left" colspan="1" rowspan="1">421</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">70</td>
                                    <td class="text-left" colspan="1" rowspan="1">:status</td>
                                    <td class="text-left" colspan="1" rowspan="1">425</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">71</td>
                                    <td class="text-left" colspan="1" rowspan="1">:status</td>
                                    <td class="text-left" colspan="1" rowspan="1">500</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">72</td>
                                    <td class="text-left" colspan="1" rowspan="1">accept-language</td>
                                    <td class="text-left" colspan="1" rowspan="1"></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">73</td>
                                    <td class="text-left" colspan="1" rowspan="1">access-control-allow-credentials</td>
                                    <td class="text-left" colspan="1" rowspan="1">FALSE</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">74</td>
                                    <td class="text-left" colspan="1" rowspan="1">access-control-allow-credentials</td>
                                    <td class="text-left" colspan="1" rowspan="1">TRUE</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">75</td>
                                    <td class="text-left" colspan="1" rowspan="1">access-control-allow-headers</td>
                                    <td class="text-left" colspan="1" rowspan="1">*</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">76</td>
                                    <td class="text-left" colspan="1" rowspan="1">access-control-allow-methods</td>
                                    <td class="text-left" colspan="1" rowspan="1">get</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">77</td>
                                    <td class="text-left" colspan="1" rowspan="1">access-control-allow-methods</td>
                                    <td class="text-left" colspan="1" rowspan="1">get, post, options</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">78</td>
                                    <td class="text-left" colspan="1" rowspan="1">access-control-allow-methods</td>
                                    <td class="text-left" colspan="1" rowspan="1">options</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">79</td>
                                    <td class="text-left" colspan="1" rowspan="1">access-control-expose-headers</td>
                                    <td class="text-left" colspan="1" rowspan="1">content-length</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">80</td>
                                    <td class="text-left" colspan="1" rowspan="1">access-control-request-headers</td>
                                    <td class="text-left" colspan="1" rowspan="1">content-type</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">81</td>
                                    <td class="text-left" colspan="1" rowspan="1">access-control-request-method</td>
                                    <td class="text-left" colspan="1" rowspan="1">get</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">82</td>
                                    <td class="text-left" colspan="1" rowspan="1">access-control-request-method</td>
                                    <td class="text-left" colspan="1" rowspan="1">post</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">83</td>
                                    <td class="text-left" colspan="1" rowspan="1">alt-svc</td>
                                    <td class="text-left" colspan="1" rowspan="1">clear</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">84</td>
                                    <td class="text-left" colspan="1" rowspan="1">authorization</td>
                                    <td class="text-left" colspan="1" rowspan="1"></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">85</td>
                                    <td class="text-left" colspan="1" rowspan="1">content-security-policy</td>
                                    <td class="text-left" colspan="1" rowspan="1">script-src 'none'; object-src 'none';
                                        base-uri 'none'</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">86</td>
                                    <td class="text-left" colspan="1" rowspan="1">early-data</td>
                                    <td class="text-left" colspan="1" rowspan="1">1</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">87</td>
                                    <td class="text-left" colspan="1" rowspan="1">expect-ct</td>
                                    <td class="text-left" colspan="1" rowspan="1"></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">88</td>
                                    <td class="text-left" colspan="1" rowspan="1">forwarded</td>
                                    <td class="text-left" colspan="1" rowspan="1"></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">89</td>
                                    <td class="text-left" colspan="1" rowspan="1">if-range</td>
                                    <td class="text-left" colspan="1" rowspan="1"></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">90</td>
                                    <td class="text-left" colspan="1" rowspan="1">origin</td>
                                    <td class="text-left" colspan="1" rowspan="1"></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">91</td>
                                    <td class="text-left" colspan="1" rowspan="1">purpose</td>
                                    <td class="text-left" colspan="1" rowspan="1">prefetch</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">92</td>
                                    <td class="text-left" colspan="1" rowspan="1">server</td>
                                    <td class="text-left" colspan="1" rowspan="1"></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">93</td>
                                    <td class="text-left" colspan="1" rowspan="1">timing-allow-origin</td>
                                    <td class="text-left" colspan="1" rowspan="1">*</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">94</td>
                                    <td class="text-left" colspan="1" rowspan="1">upgrade-insecure-requests</td>
                                    <td class="text-left" colspan="1" rowspan="1">1</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">95</td>
                                    <td class="text-left" colspan="1" rowspan="1">user-agent</td>
                                    <td class="text-left" colspan="1" rowspan="1"></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">96</td>
                                    <td class="text-left" colspan="1" rowspan="1">x-forwarded-for</td>
                                    <td class="text-left" colspan="1" rowspan="1"></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">97</td>
                                    <td class="text-left" colspan="1" rowspan="1">x-frame-options</td>
                                    <td class="text-left" colspan="1" rowspan="1">deny</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">98</td>
                                    <td class="text-left" colspan="1" rowspan="1">x-frame-options</td>
                                    <td class="text-left" colspan="1" rowspan="1">sameorigin</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="rfc.section.A.p.2">
                        <p>フィールド名や値内に現れる改行はフォーマット上の都合によるものです。</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="encoding-and-decoding-examples">
                    <h2 id="rfc.section.B" class="np"><a href="#rfc.section.B">付録 B.</a>&nbsp;<a
                            href="#encoding-and-decoding-examples">エンコード／デコードの例</a></h2>
                    <div id="rfc.section.B.p.1">
                        <p>以下の例は、エンコーダとデコーダの間での一連のやり取りを表します。これらのやり取りは、QPACK
                            のほとんどの命令を動作させ、動的テーブルの状態に対する一般的なパターンとその影響を示すことを目的としています。エンコーダは各々 1 行のフィールドを含む 3
                            つのエンコード済みフィールドセクションと、参照されない 2 つの投機的挿入を送信します。</p>
                    </div>
                    <div id="rfc.section.B.p.2">
                        <p>エンコーダ側の動的テーブルの状態が、その現在のサイズとともに示されています。各エントリはエントリの絶対インデックス（Abs）、そのエントリへの未確定参照数（Ref）、および名前と値で示されます。'acknowledged'
                            ラインより上のエントリはデコーダにより確認されています。</p>
                    </div>
                    <section id="literal-field-line-with-name-reference">
                        <h3 id="rfc.section.B.1"><a href="#rfc.section.B.1">B.1.</a>&nbsp;<a
                                href="#literal-field-line-with-name-reference">名前参照を用いたリテラルフィールド行</a></h3>
                        <div id="rfc.section.B.1.p.1">
                            <p>エンコーダは静的な名前参照を持つフィールドのリテラル表現を含むエンコード済みフィールドセクションを送信します。</p>
                        </div>
                        <div id="rfc.section.B.1.p.2">
                            <pre>
データ                | 解釈
                             | エンコーダの動的テーブル

Stream: 0
0000                | Required Insert Count = 0, Base = 0
510b 2f69 6e64 6578 | Literal Field Line with Name Reference
2e68 746d 6c        |  Static Table, Index=1
                    |  (:path=/index.html)

                              Abs Ref Name        Value
                              ^-- acknowledged --^
                              Size=0
</pre>
                        </div>
                    </section>
                    <section id="dynamic-table">
                        <h3 id="rfc.section.B.2"><a href="#rfc.section.B.2">B.2.</a>&nbsp;<a
                                href="#dynamic-table">動的テーブル</a></h3>
                        <div id="rfc.section.B.2.p.1">
                            <p>エンコーダは動的テーブルの容量を設定し、動的な名前参照を使ってヘッダを挿入してから、この新しいエントリを参照する可能性のあるブロッキングするエンコード済みフィールドセクションを送信します。デコーダはエンコード済みフィールドセクションの処理を確認し、これにより
                                Required Insert Count までのすべての動的テーブル挿入が暗黙に確認されます。</p>
                        </div>
                        <div id="rfc.section.B.2.p.2">
                            <pre>
Stream: Encoder
3fbd01              | Set Dynamic Table Capacity=220
c00f 7777 772e 6578 | Insert With Name Reference
616d 706c 652e 636f | Static Table, Index=0
6d                  |  (:authority=www.example.com)
c10c 2f73 616d 706c | Insert With Name Reference
652f 7061 7468      |  Static Table, Index=1
                    |  (:path=/sample/path)

                              Abs Ref Name        Value
                              ^-- acknowledged --^
                               0   0  :authority  www.example.com
                               1   0  :path       /sample/path
                              Size=106

Stream: 4
0381                | Required Insert Count = 2, Base = 0
10                  | Indexed Field Line With Post-Base Index
                    |  Absolute Index = Base(0) + Index(0) = 0
                    |  (:authority=www.example.com)
11                  | Indexed Field Line With Post-Base Index
                    |  Absolute Index = Base(0) + Index(1) = 1
                    |  (:path=/sample/path)

                              Abs Ref Name        Value
                              ^-- acknowledged --^
                               0   1  :authority  www.example.com
                               1   1  :path       /sample/path
                              Size=106

Stream: Decoder
84                  | Section Acknowledgment (stream=4)

                              Abs Ref Name        Value
                               0   0  :authority  www.example.com
                               1   0  :path       /sample/path
                              ^-- acknowledged --^
                              Size=106
</pre>
                        </div>
                    </section>
                    <section id="speculative-insert">
                        <h3 id="rfc.section.B.3"><a href="#rfc.section.B.3">B.3.</a>&nbsp;<a
                                href="#speculative-insert">投機的挿入</a></h3>
                        <div id="rfc.section.B.3.p.1">
                            <p>エンコーダは文字列名で動的テーブルにヘッダを挿入します。デコーダはそのエントリの受信を確認します。エンコーダはエンコード済みフィールドセクションを送信しません。</p>
                        </div>
                        <div id="rfc.section.B.3.p.2">
                            <pre>
Stream: Encoder
4a63 7573 746f 6d2d | Insert With Literal Name
6b65 790c 6375 7374 |  (custom-key=custom-value)
6f6d 2d76 616c 7565 |

                              Abs Ref Name        Value
                               0   0  :authority  www.example.com
                               1   0  :path       /sample/path
                              ^-- acknowledged --^
                               2   0  custom-key  custom-value
                              Size=160

Stream: Decoder
01                  | Insert Count Increment (1)

                              Abs Ref Name        Value
                               0   0  :authority  www.example.com
                               1   0  :path       /sample/path
                               2   0  custom-key  custom-value
                              ^-- acknowledged --^
                              Size=160

</pre>
                        </div>
                    </section>
                    <section id="duplicate-instruction-stream-cancellation">
                        <h3 id="rfc.section.B.4"><a href="#rfc.section.B.4">B.4.</a>&nbsp;<a
                                href="#duplicate-instruction-stream-cancellation">Duplicate 命令、ストリームキャンセル</a></h3>
                        <div id="rfc.section.B.4.p.1">
                            <p>エンコーダは動的テーブル内の既存エントリを複製し、その複製エントリを含む動的テーブルエントリを参照するエンコード済みフィールドセクションを送信します。エンコーダストリームのデータを含むパケットが遅延します。パケット到着の前にデコーダがストリームをキャンセルし、エンコーダに対してそのエンコード済みフィールドセクションが処理されなかったことを通知します。
                            </p>
                        </div>
                        <div id="rfc.section.B.4.p.2">
                            <pre>
Stream: Encoder
02                  | Duplicate (Relative Index = 2)
                    |  Absolute Index =
                    |   Insert Count(3) - Index(2) - 1 = 0

                              Abs Ref Name        Value
                               0   0  :authority  www.example.com
                               1   0  :path       /sample/path
                               2   0  custom-key  custom-value
                              ^-- acknowledged --^
                               3   0  :authority  www.example.com
                              Size=217

Stream: 8
0500                | Required Insert Count = 4, Base = 4
80                  | Indexed Field Line, Dynamic Table
                    |  Absolute Index = Base(4) - Index(0) - 1 = 3
                    |  (:authority=www.example.com)
c1                  | Indexed Field Line, Static Table Index = 1
                    |  (:path=/)
81                  | Indexed Field Line, Dynamic Table
                    |  Absolute Index = Base(4) - Index(1) - 1 = 2
                    |  (custom-key=custom-value)

                              Abs Ref Name        Value
                               0   0  :authority  www.example.com
                               1   0  :path       /sample/path
                               2   1  custom-key  custom-value
                              ^-- acknowledged --^
                               3   1  :authority  www.example.com
                              Size=217

Stream: Decoder
48                  | Stream Cancellation (Stream=8)

                              Abs Ref Name        Value
                               0   0  :authority  www.example.com
                               1   0  :path       /sample/path
                               2   0  custom-key  custom-value
                              ^-- acknowledged --^
                               3   0  :authority  www.example.com
                              Size=217
</pre>
                        </div>
                    </section>
                    <section id="dynamic-table-insert-eviction">
                        <h3 id="rfc.section.B.5"><a href="#rfc.section.B.5">B.5.</a>&nbsp;<a
                                href="#dynamic-table-insert-eviction">動的テーブルの挿入と追い出し</a></h3>
                        <div id="rfc.section.B.5.p.1">
                            <p>エンコーダは別のヘッダを動的テーブルに挿入し、これにより最も古いエントリが追い出されます。エンコーダはエンコード済みフィールドセクションを送信しません。</p>
                        </div>
                        <div id="rfc.section.B.5.p.2">
                            <pre>
Stream: Encoder
810d 6375 7374 6f6d | Insert With Name Reference
2d76 616c 7565 32   |  Dynamic Table, Relative Index = 1
                    |  Absolute Index =
                    |   Insert Count(4) - Index(1) - 1 = 2
                    |  (custom-key=custom-value2)

                              Abs Ref Name        Value
                               1   0  :path       /sample/path
                               2   0  custom-key  custom-value
                              ^-- acknowledged --^
                               3   0  :authority  www.example.com
                               4   0  custom-key  custom-value2
                              Size=215
</pre>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="sample-single-pass-encoding-algorithm">
                    <h2 id="rfc.section.C" class="np"><a href="#rfc.section.C">付録 C.</a>&nbsp;<a
                            href="#sample-single-pass-encoding-algorithm">単一パスエンコーディングアルゴリズムの例</a></h2>
                    <div id="rfc.section.C.p.1">
                        <p>重複処理、非ブロッキングモード、利用可能なエンコーダストリームのフロー制御、および参照追跡の処理を除外した単一パスエンコーディングの疑似コードです。</p>
                    </div>
                    <div id="rfc.section.C.p.2">
                        <pre class="text">
# Helper functions:
# ====
# Encode an integer with the specified prefix and length
encodeInteger(buffer, prefix, value, prefixLength)

# Encode a dynamic table insert instruction with optional static
# or dynamic name index (but not both)
encodeInsert(buffer, staticNameIndex, dynamicNameIndex, fieldLine)

# Encode a static index reference
encodeStaticIndexReference(buffer, staticIndex)

# Encode a dynamic index reference relative to Base
encodeDynamicIndexReference(buffer, dynamicIndex, base)

# Encode a literal with an optional static name index
encodeLiteral(buffer, staticNameIndex, fieldLine)

# Encode a literal with a dynamic name index relative to Base
encodeDynamicLiteral(buffer, dynamicNameIndex, base, fieldLine)

# Encoding Algorithm
# ====
base = dynamicTable.getInsertCount()
requiredInsertCount = 0
for line in fieldLines:
  staticIndex = staticTable.findIndex(line)
  if staticIndex is not None:
    encodeStaticIndexReference(streamBuffer, staticIndex)
    continue

  dynamicIndex = dynamicTable.findIndex(line)
  if dynamicIndex is None:
    # No matching entry.  Either insert+index or encode literal
    staticNameIndex = staticTable.findName(line.name)
    if staticNameIndex is None:
       dynamicNameIndex = dynamicTable.findName(line.name)

    if shouldIndex(line) and dynamicTable.canIndex(line):
      encodeInsert(encoderBuffer, staticNameIndex,
                   dynamicNameIndex, line)
      dynamicIndex = dynamicTable.add(line)

  if dynamicIndex is None:
    # Could not index it, literal
    if dynamicNameIndex is not None:
      # Encode literal with dynamic name, possibly above Base
      encodeDynamicLiteral(streamBuffer, dynamicNameIndex,
                           base, line)
      requiredInsertCount = max(requiredInsertCount,
                                dynamicNameIndex)
    else:
      # Encodes a literal with a static name or literal name
      encodeLiteral(streamBuffer, staticNameIndex, line)
  else:
    # Dynamic index reference
    assert(dynamicIndex is not None)
    requiredInsertCount = max(requiredInsertCount, dynamicIndex)
    # Encode dynamicIndex, possibly above Base
    encodeDynamicIndexReference(streamBuffer, dynamicIndex, base)

# encode the prefix
if requiredInsertCount == 0:
  encodeInteger(prefixBuffer, 0x00, 0, 8)
  encodeInteger(prefixBuffer, 0x00, 0, 7)
else:
  wireRIC = (
    requiredInsertCount
    % (2 * getMaxEntries(maxTableCapacity))
  ) + 1;
  encodeInteger(prefixBuffer, 0x00, wireRIC, 8)
  if base &gt;= requiredInsertCount:
    encodeInteger(prefixBuffer, 0x00,
                  base - requiredInsertCount, 7)
  else:
    encodeInteger(prefixBuffer, 0x80,
                  requiredInsertCount - base - 1, 7)

return encoderBuffer, prefixBuffer + streamBuffer
</pre>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="acknowledgments">
                    <h2 id="rfc.section.unnumbered-4" class="np"><a href="#acknowledgments">謝辞</a></h2>
                    <div id="rfc.section.unnumbered-4.p.1">
                        <p>IETF QUIC ワーキンググループは多くの方々から多大な支援を受けました。</p>
                    </div>
                    <div id="rfc.section.unnumbered-4.p.2">
                        <p>圧縮設計チームは問題領域の検討と本文書の初期草案版への影響に関して大きな作業を行いました。設計チームメンバーの Roberto Peon、Martin Thomson、および
                            Dmitri Tikhonov の貢献に感謝します。</p>
                    </div>
                    <div id="rfc.section.unnumbered-4.p.3" class="avoidbreakafter">
                        <p>以下の人々も本書に対して多大な貢献をしました：</p>
                    </div>
                    <div id="rfc.section.unnumbered-4.p.4">
                        <ul>
                            <li>
                                <div>
                                    <p>Bence Beky</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Alessandro Ghedini</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Ryan Hamilton</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Robin Marx</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Patrick McManus</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>奥 一穂 (Kazuho Oku)</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Lucas Pardue</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Biren Roy</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Ian Swett</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div id="rfc.section.unnumbered-4.p.5">
                        <p>この文書は <a href="#RFC7541"><cite
                                    title="HPACK: Header Compression for HTTP/2">[RFC7541]</cite></a>
                            の本文に大きく依拠しています。これらの著者による間接的なインプットにも感謝します。</p>
                    </div>
                    <div id="rfc.section.unnumbered-4.p.6">
                        <p>Buck Krasic の貢献は、彼が Google に在職していた間に Google によって支援されました。</p>
                    </div>
                    <div id="rfc.section.unnumbered-4.p.7">
                        <p>Mike Bishop の貢献の一部は、彼が Microsoft に在職していた間に同社によって支援されました。</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="rfc.authors" class="np">
                    <h2><a href="#rfc.authors">著者の連絡先</a></h2>
                    <address><b>Charles 'Buck' Krasic</b><br>EMail: <a href="mailto:krasic@acm.org">krasic@acm.org</a>
                    </address>
                    <address><b>Mike Bishop</b><br>Akamai Technologies<br>EMail: <a
                            href="mailto:mbishop@evequefou.be">mbishop@evequefou.be</a></address>
                    <address><b>Alan Frindell</b> (editor)<br>Facebook<br>EMail: <a
                            href="mailto:afrind@fb.com">afrind@fb.com</a></address>
                </section>
            </div>
        </div>
    </div>
    <script src="https://httpwg.org/assets/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="https://httpwg.org/assets/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
</body>

</html>