<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta name="generator" content="ReSpec 33.0.1">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        span.example-title {
            text-transform: none
        }

        :is(aside, div).example,
        div.illegal-example {
            padding: .5em;
            margin: 1em 0;
            position: relative;
            clear: both
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: #000
        }

        :is(aside, div).example {
            border-left-width: .5em;
            border-left-style: solid;
            border-color: #e0cb52;
            background: #fcfaee
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff
        }

        .example pre {
            background-color: rgba(0, 0, 0, .03)
        }
    </style>
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9
        }

        .warning-title:before {
            content: "⚠";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        pre.idl {
            padding: 1em;
            position: relative
        }

        pre.idl>code {
            color: #000
        }

        @media print {
            pre.idl {
                white-space: pre-wrap
            }
        }

        .idlHeader {
            display: block;
            width: 150px;
            background: #8ccbf2;
            color: #fff;
            font-family: sans-serif;
            font-weight: 700;
            margin: -1em 0 1em -1em;
            height: 28px;
            line-height: 28px
        }

        .idlHeader a.self-link {
            margin-left: .3cm;
            text-decoration: none;
            border-bottom: none
        }

        .idlID {
            font-weight: 700;
            color: #005a9c
        }

        .idlType {
            color: #005a9c
        }

        .idlName {
            color: #ff4500
        }

        .idlName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none
        }

        a.idlEnumItem {
            color: #000;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        .idlSuperclass {
            font-style: italic;
            color: #005a9c
        }

        .idlDefaultValue,
        .idlParamName {
            font-style: italic
        }

        .extAttr {
            color: #666
        }

        .idlSectionComment {
            color: gray
        }

        .idlIncludes a {
            font-weight: 700
        }

        .respec-button-copy-paste:focus {
            text-decoration: none;
            border-color: #51a7e8;
            outline: 0;
            box-shadow: 0 0 5px rgba(81, 167, 232, .5)
        }

        .respec-button-copy-paste:is(:focus:hover, .selected:focus) {
            border-color: #51a7e8
        }

        .respec-button-copy-paste:is(:hover, :active, .zeroclipboard-is-hover, .zeroclipboard-is-active) {
            text-decoration: none;
            background-color: #ddd;
            background-image: linear-gradient(#eee, #ddd);
            border-color: #ccc
        }

        .respec-button-copy-paste:is(:active, .selected, .zeroclipboard-is-active) {
            background-color: #dcdcdc;
            background-image: none;
            border-color: #b5b5b5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, .15)
        }

        .respec-button-copy-paste.selected:hover {
            background-color: #cfcfcf
        }

        .respec-button-copy-paste:is(:disabled, :disabled:hover, .disabled, .disabled:hover) {
            color: rgba(102, 102, 102, .5);
            cursor: default;
            background-color: rgba(229, 229, 229, .5);
            background-image: none;
            border-color: rgba(197, 197, 197, .5);
            box-shadow: none
        }

        @media print {
            .respec-button-copy-paste {
                visibility: hidden
            }
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            color: #000;
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>

    <title>Server Timing</title>




    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        :is(h1, h2, h3, h4, h5, h6, a) abbr {
            border: none
        }

        dfn {
            font-weight: 700
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: normal
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        .toc a,
        .tof a {
            text-decoration: none
        }

        a .figno,
        a .secno {
            color: #000
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        table.simple {
            border-spacing: 0;
            border-collapse: collapse;
            border-bottom: 3px solid #005a9c
        }

        .simple th {
            background: #005a9c;
            color: #fff;
            padding: 3px 5px;
            text-align: left
        }

        .simple th a {
            color: #fff;
            padding: 3px 5px;
            text-align: left
        }

        .simple th[scope=row] {
            background: inherit;
            color: inherit;
            border-top: 1px solid #ddd
        }

        .simple td {
            padding: 3px 10px;
            border-top: 1px solid #ddd
        }

        .simple tr:nth-child(even) {
            background: #f0f6ff
        }

        .section dd>p:first-child {
            margin-top: 0
        }

        .section dd>p:last-child {
            margin-bottom: 0
        }

        .section dd {
            margin-bottom: 1em
        }

        .section dl.attrs dd,
        .section dl.eldef dd {
            margin-bottom: 0
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>
    <meta name="description"
        content="This specification enables a server to communicate performance metrics about the request-response cycle to the user agent. It also standardizes a JavaScript interface to enable applications to collect, process, and act on these metrics to optimize application delivery.">
    <link rel="canonical" href="https://www.w3.org/TR/server-timing/">
    <style>
        .hljs {
            display: block;
            overflow-x: auto;
            padding: .5em;
            color: #383a42;
            background: #fafafa
        }

        .hljs-comment,
        .hljs-quote {
            color: #717277;
            font-style: italic
        }

        .hljs-doctag,
        .hljs-formula,
        .hljs-keyword {
            color: #a626a4
        }

        .hljs-deletion,
        .hljs-name,
        .hljs-section,
        .hljs-selector-tag,
        .hljs-subst {
            color: #ca4706;
            font-weight: 700
        }

        .hljs-literal {
            color: #0b76c5
        }

        .hljs-addition,
        .hljs-attribute,
        .hljs-meta-string,
        .hljs-regexp,
        .hljs-string {
            color: #42803c
        }

        .hljs-built_in,
        .hljs-class .hljs-title {
            color: #9a6a01
        }

        .hljs-attr,
        .hljs-number,
        .hljs-selector-attr,
        .hljs-selector-class,
        .hljs-selector-pseudo,
        .hljs-template-variable,
        .hljs-type,
        .hljs-variable {
            color: #986801
        }

        .hljs-bullet,
        .hljs-link,
        .hljs-meta,
        .hljs-selector-id,
        .hljs-symbol,
        .hljs-title {
            color: #336ae3
        }

        .hljs-emphasis {
            font-style: italic
        }

        .hljs-strong {
            font-weight: 700
        }

        .hljs-link {
            text-decoration: underline
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #000
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #000;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "shortName": "server-timing",
  "specStatus": "WD",
  "edDraftURI": "https://w3c.github.io/server-timing/",
  "editors": [
    {
      "name": "Charles Vazac",
      "mailto": "cvazac@gmail.com",
      "company": "Akamai",
      "companyURL": "https://www.akamai.com/",
      "w3cid": "77116",
      "url": "mailto:cvazac@gmail.com"
    },
    {
      "name": "Ilya Grigorik",
      "url": "https://www.igvita.com/",
      "company": "Google",
      "companyURL": "https://www.google.com/",
      "w3cid": "56102"
    }
  ],
  "group": "webperf",
  "wg": "Web Performance Working Group",
  "wgURI": "https://www.w3.org/webperf/",
  "wgPublicList": "public-web-perf",
  "subjectPrefix": "[server-timing]",
  "license": "w3c-software-doc",
  "format": "markdown",
  "xref": [
    "webidl",
    "fetch",
    "secure-contexts",
    "html",
    "hr-time",
    "infra"
  ],
  "github": "https://github.com/w3c/server-timing/",
  "otherLinks": [
    {
      "key": "Mailing list",
      "data": [
        {
          "value": "public-web-perf@w3.org",
          "href": "https://lists.w3.org/Archives/Public/public-web-perf/"
        }
      ]
    },
    {
      "key": "Implementation",
      "data": [
        {
          "value": "Test Suite",
          "href": "http://w3c-test.org/server-timing/"
        },
        {
          "value": "Test Suite repository",
          "href": "https://github.com/web-platform-tests/wpt/tree/master/server-timing"
        }
      ]
    }
  ],
  "wgPatentURI": "https://www.w3.org/2004/01/pp-impl/45211/status",
  "publishDate": "2023-04-11",
  "previousMaturity": "WD",
  "previousPublishDate": "2023-03-17",
  "publishISODate": "2023-04-11T00:00:00.000Z",
  "generatedSubtitle": "W3C Working Draft 11 April 2023"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD">
</head>

<body class="h-entry" data-cite="WEBIDL webidl fetch secure-contexts html hr-time infra">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.w3.org/"><img crossorigin="" alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a></p>
        <h1 id="title" class="title">Server Timing</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C Working Draft</a> <time
                class="dt-published" datetime="2023-04-11">11 April 2023</time></p>
        <details open="">
            <summary>More details about this document</summary>
            <dl>
                <dt>This version:</dt>
                <dd>
                    <a class="u-url"
                        href="https://www.w3.org/TR/2023/WD-server-timing-20230411/">https://www.w3.org/TR/2023/WD-server-timing-20230411/</a>
                </dd>
                <dt>Latest published version:</dt>
                <dd>
                    <a href="https://www.w3.org/TR/server-timing/">https://www.w3.org/TR/server-timing/</a>
                </dd>
                <dt>Latest editor's draft:</dt>
                <dd><a href="https://w3c.github.io/server-timing/">https://w3c.github.io/server-timing/</a></dd>
                <dt>History:</dt>
                <dd>
                    <a
                        href="https://www.w3.org/standards/history/server-timing">https://www.w3.org/standards/history/server-timing</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/server-timing/commits/">Commit history</a>
                </dd>





                <dt>Editors:</dt>
                <dd class="editor p-author h-card vcard" data-editor-id="77116">
                    <a class="ed_mailto u-email email p-name" href="mailto:cvazac@gmail.com">Charles Vazac</a> (<a
                        class="p-org org h-org" href="https://www.akamai.com/">Akamai</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="56102">
                    <a class="u-url url p-name fn" href="https://www.igvita.com/">Ilya Grigorik</a> (<a
                        class="p-org org h-org" href="https://www.google.com/">Google</a>)
                </dd>


                <dt>Feedback:</dt>
                <dd>
                    <a href="https://github.com/w3c/server-timing/">GitHub w3c/server-timing</a>
                    (<a href="https://github.com/w3c/server-timing/pulls/">pull requests</a>,
                    <a href="https://github.com/w3c/server-timing/issues/new/choose">new issue</a>,
                    <a href="https://github.com/w3c/server-timing/issues/">open issues</a>)
                </dd>
                <dd><a href="mailto:public-web-perf@w3.org?subject=%5Bserver-timing%5D">public-web-perf@w3.org</a> with
                    subject line <kbd>[server-timing]</kbd> (<a rel="discussion"
                        href="https://lists.w3.org/Archives/Public/public-web-perf">archives</a>)</dd>

                <dt>Mailing list</dt>
                <dd>
                    <a href="https://lists.w3.org/Archives/Public/public-web-perf/">public-web-perf@w3.org</a>
                </dd>
                <dt>Implementation</dt>
                <dd>
                    <a href="http://w3c-test.org/server-timing/">Test Suite</a>
                </dd>
                <dd>
                    <a href="https://github.com/web-platform-tests/wpt/tree/master/server-timing">Test Suite
                        repository</a>
                </dd>
            </dl>
        </details>


        <p class="copyright">
            <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
            ©
            2023

            <a href="https://www.w3.org/">World Wide Web Consortium</a>.
            <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
            <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
            <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document"
                title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>Abstract</h2>


        <p> This specification enables a server to communicate performance metrics about the request-response cycle to
            the user agent. It also standardizes a JavaScript interface to enable applications to collect, process, and
            act on these metrics to optimize application delivery.</p>
    </section>

    <section id="sotd" class="introductory">
        <h2>Status of This Document</h2>
        <p><em>This section describes the status of this
                document at the time of its publication. A list of current <abbr
                    title="World Wide Web Consortium">W3C</abbr>
                publications and the latest revision of this technical report can be found
                in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical
                    reports index</a> at
                https://www.w3.org/TR/.</em></p>
        <p>
            This document was published by the <a href="https://www.w3.org/groups/wg/webperf">Web Performance Working
                Group</a> as
            a Working Draft using the
            <a href="https://www.w3.org/2021/Process-20211102/#recs-and-notes">Recommendation track</a>.
        </p>
        <p>Publication as a Working Draft does not
            imply endorsement by <abbr title="World Wide Web Consortium">W3C</abbr> and its Members. </p>
        <p>
            This is a draft document and may be updated, replaced or obsoleted by other
            documents at any time. It is inappropriate to cite this document as other
            than work in progress.

        </p>
        <p>

            This document was produced by a group
            operating under the
            <a href="https://www.w3.org/Consortium/Patent-Policy/"><abbr title="World Wide Web Consortium">W3C</abbr>
                Patent
                Policy</a>.


            <abbr title="World Wide Web Consortium">W3C</abbr> maintains a
            <a rel="disclosure" href="https://www.w3.org/groups/wg/webperf/ipr">public list of any patent
                disclosures</a>
            made in connection with the deliverables of
            the group; that page also includes
            instructions for disclosing a patent. An individual who has actual
            knowledge of a patent which the individual believes contains
            <a href="https://www.w3.org/Consortium/Patent-Policy/#def-essential">Essential Claim(s)</a>
            must disclose the information in accordance with
            <a href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">section 6 of the <abbr
                    title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.

        </p>
        <p>
            This document is governed by the
            <a id="w3c_process_revision" href="https://www.w3.org/2021/Process-20211102/">2 November 2021 <abbr
                    title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">Table of Contents</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a>
            </li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">2. </bdi>Conformance</a></li>
            <li class="tocline"><a class="tocxref" href="#the-server-timing-header-field"><bdi class="secno">3.
                    </bdi>The <code>Server-Timing</code> Header Field</a></li>
            <li class="tocline"><a class="tocxref" href="#the-performanceservertiming-interface"><bdi class="secno">4.
                    </bdi>The <span data-export="" data-dfn-type="interface" data-idl="interface"
                        data-title="PerformanceServerTiming" data-dfn-for=""><code>PerformanceServerTiming</code></span>
                    Interface</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#name-attribute"><bdi class="secno">4.1 </bdi><span
                                data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="name"
                                data-dfn-for="PerformanceServerTiming" data-type="DOMString" data-lt="name"
                                data-local-lt="PerformanceServerTiming.name"><code>name</code></span> attribute</a></li>
                    <li class="tocline"><a class="tocxref" href="#duration-attribute"><bdi class="secno">4.2 </bdi><span
                                data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="duration"
                                data-dfn-for="PerformanceServerTiming" data-type="DOMHighResTimeStamp"
                                data-lt="duration"
                                data-local-lt="PerformanceServerTiming.duration"><code>duration</code></span>
                            attribute</a></li>
                    <li class="tocline"><a class="tocxref" href="#description-attribute"><bdi class="secno">4.3
                            </bdi><span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                data-title="description" data-dfn-for="PerformanceServerTiming" data-type="DOMString"
                                data-lt="description"
                                data-local-lt="PerformanceServerTiming.description"><code>description</code></span>
                            attribute</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#extension-to-the-performanceresourcetiming-interface"><bdi
                        class="secno">5. </bdi>Extension to the <span data-xref-type="_IDL_" data-link-type="idl"
                        data-lt="PerformanceResourceTiming" data-cite="RESOURCE-TIMING#performanceresourcetiming"
                        class="formerLink"><code>PerformanceResourceTiming</code></span> interface</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#servertiming-attribute"><bdi class="secno">5.1
                            </bdi><code>serverTiming</code> attribute</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#privacy-and-security"><bdi class="secno">6. </bdi>Privacy and
                    Security</a></li>
            <li class="tocline"><a class="tocxref" href="#iana-considerations"><bdi class="secno">7. </bdi>IANA
                    Considerations</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#server-timing-header-field"><bdi class="secno">7.1
                            </bdi>Server-Timing Header Field</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#examples"><bdi class="secno">A. </bdi>Examples</a></li>
            <li class="tocline"><a class="tocxref" href="#use-cases"><bdi class="secno">B. </bdi>Use cases</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#server-timing-in-developer-tools"><bdi
                                class="secno">B.1 </bdi>Server timing in developer tools</a></li>
                    <li class="tocline"><a class="tocxref" href="#server-timing-for-automated-analytics"><bdi
                                class="secno">B.2 </bdi>Server timing for automated analytics</a></li>
                    <li class="tocline"><a class="tocxref" href="#measuring-request-routing-performance"><bdi
                                class="secno">B.3 </bdi>Measuring request routing performance</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#acknowledgments"><bdi class="secno">C.
                    </bdi>Acknowledgments</a></li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">D. </bdi>References</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">D.1
                            </bdi>Normative references</a></li>
                    <li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">D.2
                            </bdi>Informative references</a></li>
                </ol>
            </li>
        </ol>
    </nav>

    <section class="informative" id="introduction">
        <div class="header-wrapper">
            <h2 id="x1-introduction"><bdi class="secno">1. </bdi>Introduction</h2><a class="self-link"
                href="#introduction" aria-label="Permalink for Section 1."></a>
        </div>
        <p><em>This section is non-normative.</em></p>



        <p>Accurately measuring performance characteristics of web applications is an important aspect of making web
            applications faster. [<cite><a class="bibref" data-link-type="biblio" href="#bib-navigation-timing"
                    title="Navigation Timing">NAVIGATION-TIMING</a></cite>] and [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-resource-timing"
                    title="Resource Timing">RESOURCE-TIMING</a></cite>] provide detailed request timing information for
            the document and its resources, which include time when the request was initiated, and various milestones to
            negotiate the connection and receive the response. However, while the user agent can observe the timing data
            of the request it has no insight into how or why certain stages of the request-response cycle have taken as
            much time as they have - e.g., how the request was routed, where the time was spent on the server, and so
            on.</p>
        <p>This specification introduces <a data-link-type="idl" data-lt="PerformanceServerTiming"
                href="#dom-performanceservertiming" class="internalDFN"
                id="ref-for-dom-performanceservertiming-1"><code>PerformanceServerTiming</code></a> interface, which
            enables the server to communicate performance metrics about the request-response cycle to the user agent,
            and a JavaScript interface to enable applications to collect, process, and act on these metrics to optimize
            application delivery.</p>
    </section>

    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x2-conformance"><bdi class="secno">2. </bdi>Conformance</h2><a class="self-link" href="#conformance"
                aria-label="Permalink for Section 2."></a>
        </div>
        <p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this
            specification are non-normative. Everything else in this specification is normative.</p>
        <p>
            The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST</em>, and <em class="rfc2119">SHOULD
                NOT</em> in this document
            are to be interpreted as described in
            <a href="https://datatracker.ietf.org/doc/html/bcp14">BCP 14</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119"
                    title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc8174"
                    title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
            when, and only when, they appear in all capitals, as shown here.
        </p>
    </section>

    <section id="the-server-timing-header-field">
        <div class="header-wrapper">
            <h2 id="x3-the-server-timing-header-field"><bdi class="secno">3. </bdi>The <code>Server-Timing</code> Header
                Field</h2><a class="self-link" href="#the-server-timing-header-field"
                aria-label="Permalink for Section 3."></a>
        </div>



        <p>The <dfn id="dfn-server-timing-header-field" tabindex="0" aria-haspopup="dialog"
                data-dfn-type="dfn">Server-Timing header field</dfn> is used to communicate one or more metrics and
            descriptions for the given request-response cycle. The ABNF (Augmented Backus-Naur Form) [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc5234"
                    title="Augmented BNF for Syntax Specifications: ABNF">RFC5234</a></cite>] syntax for the <a
                data-link-type="dfn" href="#dfn-server-timing-header-field" class="internalDFN"
                id="ref-for-dfn-server-timing-header-field-1">Server-Timing header field</a> is as follows:</p>
        <pre><code class="ABNF hljs" aria-busy="false">  Server-Timing             = #server-timing-metric
  server-timing-metric      = metric-name *( OWS ";" OWS server-timing-param )
  metric-name               = token
  server-timing-param       = server-timing-param-name OWS "=" OWS server-timing-param-value
  server-timing-param-name  = token
  server-timing-param-value = token / quoted-string
</code></pre>
        <p>See [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc7230"
                    title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">RFC7230</a></cite>] for
            definitions of <code>#</code>, <code>*</code>, <code>OWS</code>, <code>token</code>, and
            <code>quoted-string</code>.
        </p>
        <p>A response <em class="rfc2119">MAY</em> have multiple server-timing-metric entries with the same metric-name,
            and the user agent <em class="rfc2119">MUST</em> process and expose all such entries.</p>
        <p>The user agent <em class="rfc2119">MAY</em> surface provided metrics in any order - i.e. the order of metrics
            in the HTTP header field is not significant.</p>
        <p>This header field is defined with an extensible syntax to allow for future parameters. A user agent that does
            not recognize particular server-timing-param-name in the Server-Timing header field of a response <em
                class="rfc2119">MUST</em> ignore those tokens and continue processing instead of signaling an error.</p>
        <p>To avoid any possible ambiguity, individual <code>server-timing-param-name</code>s <em class="rfc2119">SHOULD
                NOT</em> appear multiple times within a <code>server-timing-metric</code>. If any
            <code>server-timing-param-name</code> is specified more than once, only the first instance is to be
            considered, even if the <code>server-timing-param</code> is incomplete or invalid. All subsequent
            occurrences <em class="rfc2119">MUST</em> be ignored without signaling an error or otherwise altering the
            processing of the <code>server-timing-metric</code>. This is the only case in which the ordering of
            parameters within a <code>server-timing-metric</code> is considered to be significant.
        </p>
        <p>User agents <em class="rfc2119">MUST</em> ignore extraneous characters found after a
            <code>server-timing-param-value</code> but before the next <code>server-timing-param</code> and before the
            end of the current <code>server-timing-metric</code>.
        </p>
        <p>User agents <em class="rfc2119">MUST</em> ignore extraneous characters found after a <code>metric-name</code>
            but before the first <code>server-timing-param</code> and before the next <code>server-timing-metric</code>.
        </p>
        <p data-link-for="PerformanceServerTiming">
            This specification establishes the server-timing-params for server-timing-param-names "dur" for <a
                data-link-type="idl" data-lt="duration" href="#dom-performanceservertiming-duration" class="internalDFN"
                id="ref-for-dom-performanceservertiming-duration-1"><code>duration</code></a> and "desc" for <a
                data-link-type="idl" data-lt="description" href="#dom-performanceservertiming-description"
                class="internalDFN" id="ref-for-dom-performanceservertiming-description-1"><code>description</code></a>,
            both optional.
        </p>

        <div class="note" role="note" id="issue-container-generatedID">
            <div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>Note</span></div>
            <div class="">


                <ul>
                    <li>
                        <p>To minimize the HTTP overhead the provided names and descriptions should be kept as short as
                            possible - e.g. use abbreviations and omit optional values where possible.</p>
                    </li>
                    <li>
                        <p>Because there can be no guarantee of clock synchronization between client, server, and
                            intermediaries, it is impossible to map a meaningful <code>startTime</code> onto the clients
                            timeline. For that reason, any <code>startTime</code> attribution is purposely omitted from
                            this specification. If the developers want to establish a relationship between multiple
                            entries, they can do so by communicating custom data via metric names and/or descriptions.
                        </p>
                    </li>
                    <li>
                        <p>The server and/or any relevant intermediaries are in full control of which metrics are
                            communicated to the user agent and when. For example, access to some metrics may be
                            restricted due to privacy or security reasons - see <a href="#privacy-and-security"
                                class="sec-ref"><bdi class="secno">6. </bdi>Privacy and Security</a> section.</p>
                    </li>
                </ul>
            </div>
        </div>

        <p>To <dfn id="dfn-parse-a-server-timing-header-field" tabindex="0" aria-haspopup="dialog"
                data-dfn-type="dfn">parse a server-timing header field</dfn> given a string <var>field</var>:</p>
        <ol>
            <li>
                <p>Let <var>position</var> be a <a data-link-type="dfn" data-type="dfn"
                        href="https://infra.spec.whatwg.org/#string-position-variable">position variable</a>, initially
                    pointing at the start of <var>field</var>.</p>
            </li>
            <li>
                <p>Let <var>name</var> be the result of <a data-link-type="dfn" data-type="dfn"
                        href="https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points">collecting a sequence of
                        code points</a> from <var>field</var> that are not equal to U+003B (;), given
                    <var>position</var>.
                </p>
            </li>
            <li>
                <p><a data-link-type="dfn" data-type="dfn"
                        href="https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace">Strip leading
                        and trailing ASCII whitespace</a> from <var>name</var>.</p>
            </li>
            <li>
                <p>If <var>name</var> is an empty string, return null.</p>
            </li>
            <li>
                <p>Let <var>metric</var> be a new <a data-link-type="idl" data-lt="PerformanceServerTiming"
                        href="#dom-performanceservertiming" class="internalDFN"
                        id="ref-for-dom-performanceservertiming-2"><code>PerformanceServerTiming</code></a> whose <a
                        data-for="PerformanceServerTiming" href="#dfn-metric-name" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-metric-name-1">metric name</a> is <var>name</var>.</p>
            </li>
            <li>
                <p>Let <var>params</var> be an empty <a data-type="dfn"
                        href="https://infra.spec.whatwg.org/#ordered-map">ordered map</a>.</p>
            </li>
            <li>
                <p>While <var>position</var> is not at the end of <var>field</var>:</p>
                <ol>
                    <li>
                        <p>Advance <var>position</var> by 1.</p>
                    </li>
                    <li>
                        <p>Let <var>paramName</var> be the result of <a data-link-type="dfn" data-type="dfn"
                                href="https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points">collecting a
                                sequence of code points</a> from <var>field</var> that are not equal to U+003D (=),
                            given <var>position</var>.</p>
                    </li>
                    <li>
                        <p><a data-link-type="dfn" data-type="dfn"
                                href="https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace">Strip
                                leading and trailing ASCII whitespace</a> from <var>paramName</var>.</p>
                    </li>
                    <li>
                        <p>If <var>paramName</var> is an empty string or <var>params</var>[<var>paramName</var>] <a
                                data-link-type="dfn" data-type="dfn"
                                href="https://infra.spec.whatwg.org/#map-exists">exists</a>, <a data-link-type="dfn"
                                data-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue">continue</a>.
                        </p>
                    </li>
                    <li>
                        <p>Advance <var>position</var> by 1.</p>
                    </li>
                    <li>
                        <p>Let <var>paramValue</var> be an empty string.</p>
                    </li>
                    <li>
                        <p><a data-link-type="dfn" data-type="dfn"
                                href="https://infra.spec.whatwg.org/#skip-ascii-whitespace">Skip ASCII whitespace</a>
                            within <var>field</var> given <var>position</var>.</p>
                    </li>
                    <li>
                        <p>If the <a data-link-type="dfn" data-type="dfn"
                                href="https://infra.spec.whatwg.org/#code-point">code point</a> at <var>position</var>
                            within <var>field</var> is U+0022 ("), then:</p>
                        <ol>
                            <li>
                                <p>Set <var>paramValue</var> to the result of <a data-link-type="dfn" data-type="dfn"
                                        href="https://fetch.spec.whatwg.org/#collect-an-http-quoted-string">collecting
                                        an HTTP quoted string</a> from <var>field</var> given <var>position</var> with
                                    the <i>extract-value flag</i> set.</p>
                            </li>
                            <li>
                                <p><a data-link-type="dfn" data-type="dfn"
                                        href="https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points">Collect
                                        a sequence of code points</a> from <var>field</var> that are not equal to U+003B
                                    (;), given <var>position</var>. The result is not used.</p>
                            </li>
                        </ol>
                    </li>
                    <li>
                        <p>Otherwise:</p>
                        <ol>
                            <li>
                                <p>Let <var>rawParamValue</var> be the result of <a data-link-type="dfn" data-type="dfn"
                                        href="https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points">collecting
                                        a sequence of code points</a> from <var>field</var> that are not equal to U+003B
                                    (;), given <var>position</var>.</p>
                            </li>
                            <li>
                                <p>Let <var>paramValue</var> be the result of <a data-link-type="dfn"
                                        data-lt="strip leading and trailing ASCII whitespace" data-type="dfn"
                                        href="https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace">stripping</a>
                                    <var>rawParamValue</var>.
                                </p>
                            </li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li>
                <p><a data-link-type="dfn" data-lt="set" data-type="dfn"
                        href="https://infra.spec.whatwg.org/#map-set">Set</a> <var>metric</var>'s <a
                        data-for="PerformanceServerTiming" href="#dfn-params" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-params-1">params</a> to <var>params</var>.</p>
            </li>
            <li>
                <p>Return <var>metric</var>.</p>
            </li>
        </ol>
    </section>

    <section data-dfn-for="PerformanceServerTiming" data-link-for="PerformanceServerTiming"
        id="the-performanceservertiming-interface">
        <div class="header-wrapper">
            <h2 id="x4-the-performanceservertiming-interface"><bdi class="secno">4. </bdi>The <dfn data-export=""
                    data-dfn-type="interface" id="dom-performanceservertiming" data-idl="interface"
                    data-title="PerformanceServerTiming" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>PerformanceServerTiming</code></dfn> Interface</h2><a class="self-link"
                href="#the-performanceservertiming-interface" aria-label="Permalink for Section 4."></a>
        </div>



        <pre class="idl def" id="webidl-1854882554"><span class="idlHeader"><a class="self-link" href="#webidl-1854882554">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-performanceservertiming" data-title="PerformanceServerTiming">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-performanceservertiming" id="ref-for-dom-performanceservertiming-3"><code>PerformanceServerTiming</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-performanceservertiming-name" data-title="name" data-dfn-for="PerformanceServerTiming">
  readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-performanceservertiming-name" id="ref-for-dom-performanceservertiming-name-1"><code>name</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-performanceservertiming-duration" data-title="duration" data-dfn-for="PerformanceServerTiming">
  readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="typedef" href="https://www.w3.org/TR/hr-time-3/#dom-domhighrestimestamp">DOMHighResTimeStamp</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-performanceservertiming-duration" id="ref-for-dom-performanceservertiming-duration-2"><code>duration</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-performanceservertiming-description" data-title="description" data-dfn-for="PerformanceServerTiming">
  readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-performanceservertiming-description" id="ref-for-dom-performanceservertiming-description-2"><code>description</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-performanceservertiming-tojson" data-title="toJSON" data-dfn-for="PerformanceServerTiming">
  [<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Default">Default</a></span>]<span class="idlType"> <a data-link-type="interface" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-performanceservertiming-tojson" id="ref-for-dom-performanceservertiming-tojson-1"><code>toJSON</code></a>();</span>
};</span></code></pre>
        <p> When <dfn class="export" data-dfn-for="PerformanceServerTiming" data-export="" data-dfn-type="method"
                id="dom-performanceservertiming-tojson" data-idl="operation" data-title="toJSON" data-type="object"
                data-lt="toJSON()"
                data-local-lt="PerformanceServerTiming.toJSON|PerformanceServerTiming.toJSON()|toJSON" tabindex="0"
                aria-haspopup="dialog"><code>toJSON</code></dfn> is called, run [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-webidl" title="Web IDL Standard">WEBIDL</a></cite>]'s <a
                data-link-type="dfn" data-type="dfn" href="https://webidl.spec.whatwg.org/#default-tojson-steps">default
                toJSON steps</a>.</p>
        <section id="name-attribute">
            <div class="header-wrapper">
                <h3 id="x4-1-name-attribute"><bdi class="secno">4.1 </bdi><dfn data-export="" data-dfn-type="attribute"
                        id="dom-performanceservertiming-name" data-idl="attribute" data-title="name"
                        data-dfn-for="PerformanceServerTiming" data-type="DOMString" data-lt="name"
                        data-local-lt="PerformanceServerTiming.name" tabindex="0"
                        aria-haspopup="dialog"><code>name</code></dfn> attribute</h3><a class="self-link"
                    href="#name-attribute" aria-label="Permalink for Section 4.1"></a>
            </div>
            <p> The <a href="#dom-performanceservertiming-name" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-performanceservertiming-name-2"><code>name</code></a> getter steps are to return <a
                    data-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>'s <a
                    data-for="PerformanceServerTiming" href="#dfn-metric-name" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-metric-name-2">metric name</a>.</p>
        </section>
        <section id="duration-attribute">
            <div class="header-wrapper">
                <h3 id="x4-2-duration-attribute"><bdi class="secno">4.2 </bdi><dfn data-export=""
                        data-dfn-type="attribute" id="dom-performanceservertiming-duration" data-idl="attribute"
                        data-title="duration" data-dfn-for="PerformanceServerTiming" data-type="DOMHighResTimeStamp"
                        data-lt="duration" data-local-lt="PerformanceServerTiming.duration" tabindex="0"
                        aria-haspopup="dialog"><code>duration</code></dfn> attribute</h3><a class="self-link"
                    href="#duration-attribute" aria-label="Permalink for Section 4.2"></a>
            </div>
            <p> The <a href="#dom-performanceservertiming-duration" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-performanceservertiming-duration-3"><code>duration</code></a> getter steps are to do
                the following:</p>
            <ol>
                <li>
                    <p>If <a data-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>'s <a
                            data-for="PerformanceServerTiming" href="#dfn-params" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-params-2">params</a>[<code>"dur"</code>] does not <a
                            data-link-type="dfn" data-lt="exists" data-type="dfn"
                            href="https://infra.spec.whatwg.org/#map-exists">exist</a>, return 0.</p>
                </li>
                <li>
                    <p>Let <var>dur</var> be the result of parsing <a data-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this">this</a>'s <a data-for="PerformanceServerTiming"
                            href="#dfn-params" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-params-3">params</a>[<code>"dur"</code>] using the <a data-link-type="dfn"
                            data-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#rules-for-parsing-floating-point-number-values">rules
                            for parsing floating-point number values</a>.</p>
                </li>
                <li>
                    <p>If <var>dur</var> is an error, return 0; Otherwise return <var>dur</var>.</p>
                </li>
            </ol>
            <div class="note" role="note" id="issue-container-generatedID-0">
                <div role="heading" class="note-title marker" id="h-note-0" aria-level="3"><span>Note</span></div>
                <p class="">
                    Since <a href="#dom-performanceservertiming-duration" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-performanceservertiming-duration-4"><code>duration</code></a> is a <a
                        data-link-type="idl" data-lt="DOMHighResTimeStamp" data-type="typedef"
                        href="https://www.w3.org/TR/hr-time-3/#dom-domhighrestimestamp"><code>DOMHighResTimeStamp</code></a>,
                    it usually represents a <a data-link-type="dfn" data-type="dfn"
                        href="https://www.w3.org/TR/hr-time-3/#dfn-duration">duration</a> in
                    milliseconds. Since this is not enforcable in practice, <a
                        href="#dom-performanceservertiming-duration" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-performanceservertiming-duration-5"><code>duration</code></a> can represent any
                    unit
                    of time, and having it represent a <a data-link-type="dfn" data-type="dfn"
                        href="https://www.w3.org/TR/hr-time-3/#dfn-duration">duration</a> in milliseconds is a
                    recommendation.
                </p>
            </div>

        </section>
        <section id="description-attribute">
            <div class="header-wrapper">
                <h3 id="x4-3-description-attribute"><bdi class="secno">4.3 </bdi><dfn data-export=""
                        data-dfn-type="attribute" id="dom-performanceservertiming-description" data-idl="attribute"
                        data-title="description" data-dfn-for="PerformanceServerTiming" data-type="DOMString"
                        data-lt="description" data-local-lt="PerformanceServerTiming.description" tabindex="0"
                        aria-haspopup="dialog"><code>description</code></dfn> attribute</h3><a class="self-link"
                    href="#description-attribute" aria-label="Permalink for Section 4.3"></a>
            </div>
            <p> The <a href="#dom-performanceservertiming-description" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-performanceservertiming-description-3"><code>description</code></a> getter steps are
                to return <a data-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>'s <a
                    data-for="PerformanceServerTiming" href="#dfn-params" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-params-4">params</a>[<code>"desc"</code>] if it <a data-link-type="dfn"
                    data-type="dfn" href="https://infra.spec.whatwg.org/#map-exists">exists</a>, otherwise the empty
                string.</p>
            <p> A <a data-link-type="idl" data-lt="PerformanceServerTiming" href="#dom-performanceservertiming"
                    class="internalDFN"
                    id="ref-for-dom-performanceservertiming-4"><code>PerformanceServerTiming</code></a> has an
                associated string <dfn id="dfn-metric-name" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">metric name</dfn>, initially set to the empty string.</p>
            <p> A <a data-link-type="idl" data-lt="PerformanceServerTiming" href="#dom-performanceservertiming"
                    class="internalDFN"
                    id="ref-for-dom-performanceservertiming-5"><code>PerformanceServerTiming</code></a> has an
                associated <a data-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">ordered map</a> <dfn
                    id="dfn-params" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">params</dfn>, initially
                empty.</p>
        </section>
    </section>


    <section data-dfn-for="PerformanceResourceTiming" data-link-for="PerformanceResourceTiming"
        id="extension-to-the-performanceresourcetiming-interface">
        <div class="header-wrapper">
            <h2 id="x5-extension-to-the-performanceresourcetiming-interface"><bdi class="secno">5. </bdi>Extension to
                the <a data-link-type="idl" data-lt="PerformanceResourceTiming"
                    href="https://www.w3.org/TR/resource-timing-2/#performanceresourcetiming"><code>PerformanceResourceTiming</code></a>
                interface</h2><a class="self-link" href="#extension-to-the-performanceresourcetiming-interface"
                aria-label="Permalink for Section 5."></a>
        </div>



        <p> The <dfn id="dom-performanceresourcetiming" data-idl="interface" data-title="PerformanceResourceTiming"
                data-dfn-for="" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                    href="https://www.w3.org/TR/resource-timing-2/#performanceresourcetiming"><code>PerformanceResourceTiming</code></a></dfn>
            interface, which this specification partially extends, is defined in [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-resource-timing"
                    title="Resource Timing">RESOURCE-TIMING</a></cite>].</p>
        <pre class="idl def" id="webidl-1421620017"><span class="idlHeader"><a class="self-link" href="#webidl-1421620017">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-performanceresourcetiming-partial-1" data-title="PerformanceResourceTiming">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
partial interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-performanceresourcetiming"><code>PerformanceResourceTiming</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-performanceresourcetiming-servertiming" data-title="serverTiming" data-dfn-for="PerformanceResourceTiming">
  readonly attribute<span class="idlType"> <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array">FrozenArray</a>&lt;<a data-link-type="idl" href="#dom-performanceservertiming" class="internalDFN" id="ref-for-dom-performanceservertiming-6"><code>PerformanceServerTiming</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-performanceresourcetiming-servertiming" id="ref-for-dom-performanceresourcetiming-servertiming-1"><code>serverTiming</code></a>;</span>
};</span></code></pre>
        <section id="servertiming-attribute">
            <div class="header-wrapper">
                <h3 id="x5-1-servertiming-attribute"><bdi class="secno">5.1 </bdi><code>serverTiming</code> attribute
                </h3><a class="self-link" href="#servertiming-attribute" aria-label="Permalink for Section 5.1"></a>
            </div>
            <p> The <dfn data-export="" data-dfn-type="attribute" id="dom-performanceresourcetiming-servertiming"
                    data-idl="attribute" data-title="serverTiming" data-dfn-for="PerformanceResourceTiming"
                    data-type="FrozenArray" data-lt="serverTiming"
                    data-local-lt="PerformanceResourceTiming.serverTiming" tabindex="0"
                    aria-haspopup="dialog"><code>serverTiming</code></dfn> getter steps are the following:</p>
            <ol>
                <li>
                    <p>Let <var>entries</var> be a new <a data-link-type="dfn" data-type="dfn"
                            href="https://infra.spec.whatwg.org/#list">list</a>.</p>
                </li>
                <li>
                    <p><a data-link-type="dfn" data-lt="iterate" data-type="dfn"
                            href="https://infra.spec.whatwg.org/#list-iterate">For each</a> <var>field</var> in <a
                            data-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>'s <a
                            href="https://www.w3.org/TR/resource-timing-2/#dfn-timing-info">timing info</a>'s <a
                            data-link-type="dfn" data-type="dfn"
                            href="https://fetch.spec.whatwg.org/#fetch-timing-info-server-timing-headers">server-timing
                            headers</a>:</p>
                    <ol>
                        <li>
                            <p>Let <var>metric</var> be the result of <a data-link-type="dfn"
                                    data-lt="parse a server-timing header field"
                                    href="#dfn-parse-a-server-timing-header-field" class="internalDFN"
                                    id="ref-for-dfn-parse-a-server-timing-header-field-1">parsing</a> <var>field</var>.
                            </p>
                        </li>
                        <li>
                            <p>If <var>metric</var> is not null, <a data-link-type="dfn" data-type="dfn"
                                    href="https://infra.spec.whatwg.org/#list-append">append</a> <var>metric</var> to
                                <var>entries</var>.
                            </p>
                        </li>
                    </ol>
                </li>
                <li>
                    <p>Return <var>entries</var>.</p>
                </li>
            </ol>
        </section>
    </section>

    <section class="informative" id="privacy-and-security">
        <div class="header-wrapper">
            <h2 id="x6-privacy-and-security"><bdi class="secno">6. </bdi>Privacy and Security</h2><a class="self-link"
                href="#privacy-and-security" aria-label="Permalink for Section 6."></a>
        </div>
        <p><em>This section is non-normative.</em></p>



        <p> The interfaces defined in this specification expose potentially sensitive application and infrastructure
            information to any web page that has included a resource that advertises server timing metrics. For this
            reason the access to <code>PerformanceServerTiming</code> interface is restricted by the <a
                data-link-type="dfn" data-type="dfn"
                href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin">same origin</a> policy by
            default. Resource providers can explicitly allow server timing information to be available by adding the
            <code>Timing-Allow-Origin</code> HTTP response header, as defined in [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-resource-timing"
                    title="Resource Timing">RESOURCE-TIMING</a></cite>], that specifies the domains that may be allowed
            to access the server metrics, but the user agent <em class="rfc2119">MAY</em> keep the <a
                data-link-type="dfn" data-type="dfn"
                href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin">same origin</a> policy
            restriction.
        </p>
        <p> In addition to using the <code>Timing-Allow-Origin</code> HTTP response header, the server can also use
            relevant logic to control which metrics are returned, when, and to whom - e.g. the server may only provide
            certain metrics to correctly authenticated users and nothing at all to all others.</p>
    </section>

    <section id="iana-considerations">
        <div class="header-wrapper">
            <h2 id="x7-iana-considerations"><bdi class="secno">7. </bdi>IANA Considerations</h2><a class="self-link"
                href="#iana-considerations" aria-label="Permalink for Section 7."></a>
        </div>



        <p> The permanent message header field registry should be updated with the following registrations ([<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc3864"
                    title="Registration Procedures for Message Header Fields">RFC3864</a></cite>]):</p>
        <section id="server-timing-header-field">
            <div class="header-wrapper">
                <h3 id="x7-1-server-timing-header-field"><bdi class="secno">7.1 </bdi>Server-Timing Header Field</h3><a
                    class="self-link" href="#server-timing-header-field" aria-label="Permalink for Section 7.1"></a>
            </div>
            <dl>
                <dt>Header field name</dt>
                <dd>Server-Timing</dd>
                <dt>Applicable protocol</dt>
                <dd>http</dd>
                <dt>Status</dt>
                <dd>standard</dd>
                <dt>Author/Change controller</dt>
                <dd><abbr title="World Wide Web Consortium">W3C</abbr></dd>
                <dt>Specification document</dt>
                <dd>This specification (See <a data-link-type="dfn" href="#dfn-server-timing-header-field"
                        class="internalDFN" id="ref-for-dfn-server-timing-header-field-2">Server-Timing Header
                        Field</a>)</dd>
            </dl>


        </section>
    </section>

    <section class="appendix informative" id="examples">
        <div class="header-wrapper">
            <h2 id="a-examples"><bdi class="secno">A. </bdi>Examples</h2><a class="self-link" href="#examples"
                aria-label="Permalink for Appendix A."></a>
        </div>
        <p><em>This section is non-normative.</em></p>



        <div class="example" id="example-1">
            <div class="marker">
                <a class="self-link" href="#example-1">Example<bdi> 1</bdi></a>
            </div>
            <pre class="http" aria-busy="false"><code class="hljs">&gt; GET /resource HTTP/1.1
&gt; Host: example.com


&lt; HTTP/1.1 200 OK
&lt; Server-Timing: miss, db;dur=53, app;dur=47.2
&lt; Server-Timing: customView, dc;desc=atl
&lt; Server-Timing: cache;desc="Cache Read";dur=23.2
&lt; Trailer: Server-Timing
&lt; (... snip response body ...)
&lt; Server-Timing: total;dur=123.4</code></pre>
        </div>

        <table class="parameters">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Duration</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>miss</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>db</td>
                    <td>53</td>
                    <td></td>
                </tr>
                <tr>
                    <td>app</td>
                    <td>47.2</td>
                    <td></td>
                </tr>
                <tr>
                    <td>customView</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>dc</td>
                    <td></td>
                    <td>atl</td>
                </tr>
                <tr>
                    <td>cache</td>
                    <td>23.2</td>
                    <td>Cache Read</td>
                </tr>
                <tr>
                    <td>total</td>
                    <td>123.4</td>
                    <td></td>
                </tr>
            </tbody>
        </table>

        <p>The above header fields communicate six distinct metrics that illustrate all the possible ways for the server
            to communicate data to the user agent: metric name only, metric with value, metric with value and
            description, and metric with description. For example, the above metrics may indicate that for
            <code>example.com/resource.jpg</code> fetch:
        </p>

        <ol>
            <li>There was a cache miss.</li>
            <li>The request was routed through the "atl" datacenter ("dc").</li>
            <li>The database ("db") time was 53 ms.</li>
            <li>A cache read took 23.2 ms.</li>
            <li>The application server ("app") took 47.2ms to process "customView" template or function.</li>
            <li>The total time for the request-response cycle on the server was 123.4ms, which is recorded at the end of
                the response and delivered via a trailer field.</li>
        </ol>

        <p>The application can collect, process, and act on the provided metrics via the provided JavaScript interface:
        </p>

        <div class="example" id="example-2">
            <div class="marker">
                <a class="self-link" href="#example-2">Example<bdi> 2</bdi></a>
            </div>
            <pre aria-busy="false"><code class="hljs js"><span class="hljs-comment">// serverTiming entries can live on 'navigation' and 'resource' entries</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entryType <span class="hljs-keyword">of</span> [<span class="hljs-string">'navigation'</span>, <span class="hljs-string">'resource'</span>]) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> {<span class="hljs-attr">name</span>: url, serverTiming} <span class="hljs-keyword">of</span> performance.getEntriesByType(entryType)) {
    <span class="hljs-comment">// iterate over the serverTiming array</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> {name, duration, description} <span class="hljs-keyword">of</span> serverTiming) {
      <span class="hljs-comment">// we only care about "slow" ones</span>
      <span class="hljs-keyword">if</span> (duration &gt; <span class="hljs-number">200</span>) {
        <span class="hljs-built_in">console</span>.info(<span class="hljs-string">'Slow server-timing entry ='</span>,
          <span class="hljs-built_in">JSON</span>.stringify({url, entryType, name, duration, description}, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>))
      }
    }
  }
}</code></pre>
        </div>


    </section>
    <section class="appendix informative" id="use-cases">
        <div class="header-wrapper">
            <h2 id="b-use-cases"><bdi class="secno">B. </bdi>Use cases</h2><a class="self-link" href="#use-cases"
                aria-label="Permalink for Appendix B."></a>
        </div>
        <p><em>This section is non-normative.</em></p>



        <section id="server-timing-in-developer-tools">
            <div class="header-wrapper">
                <h3 id="b-1-server-timing-in-developer-tools"><bdi class="secno">B.1 </bdi>Server timing in developer
                    tools</h3><a class="self-link" href="#server-timing-in-developer-tools"
                    aria-label="Permalink for Appendix B.1"></a>
            </div>
            <p> Server processing time can be a significant fraction of the total request time. For example, a dynamic
                response may require one or more database queries, cache lookups, API calls, time to process relevant
                data and render the response, and so on. Similarly, even a static response can be delayed due to
                overloaded servers, slow caches, or other reasons.</p>
            <p> Today, the user agent developer tools are able to show when the request was initiated, and when the
                first and last bytes of the response were received. However, there is no visibility into where or how
                the time was spent on the server, which means that the developer is unable to quickly diagnose if there
                is a performance bottleneck on the server, and if so, in which component. Today, to answer this
                question, the developer is required to use different techniques: check the server logs, embed
                performance data within the response (if possible), use external tools, and so on. This makes
                identifying and diagnosing performance bottlenecks hard, and in many cases impractical.</p>
            <p> Server Timing defines a standard mechanism that enables the server to communicate relevant performance
                metrics to the client and allows the client to surface them directly in the developer tools - e.g. the
                requests can be annotated with server sent metrics to provide insight into where or how the time was
                spent while generating the response.</p>
        </section>
        <section id="server-timing-for-automated-analytics">
            <div class="header-wrapper">
                <h3 id="b-2-server-timing-for-automated-analytics"><bdi class="secno">B.2 </bdi>Server timing for
                    automated analytics</h3><a class="self-link" href="#server-timing-for-automated-analytics"
                    aria-label="Permalink for Appendix B.2"></a>
            </div>
            <p> In addition to surfacing server sent performance metrics in the developer tools, a standard JavaScript
                interface enables analytics tools to automatically collect, process, beacon, and aggregate these metrics
                for operational and performance analysis.</p>
        </section>
        <section id="measuring-request-routing-performance">
            <div class="header-wrapper">
                <h3 id="b-3-measuring-request-routing-performance"><bdi class="secno">B.3 </bdi>Measuring request
                    routing performance</h3><a class="self-link" href="#measuring-request-routing-performance"
                    aria-label="Permalink for Appendix B.3"></a>
            </div>
            <p> Server Timing enables origin servers to communicate performance metrics about where or how time is spent
                while processing the request. However, the same request and response may also be routed through one or
                more multiple proxies (e.g. cache servers, load balancers, and so on), each of which may introduce own
                delays and may want to provide performance metrics into where or how the time is spent.</p>
            <p> For example, a CDN edge node may want to report which data center was being used, if the resource was
                available in cache, and how long it took to retrieve the response from cache or from the origin server.
                Further, the same process may be repeated by other proxies, thus allowing full end-to-end visibility
                into how the request was routed and where the time was spent.</p>
            <p> Similarly, when a Service Worker is active, some or all of the navigation and resource requests may be
                routed through it. Effectively, an active Service Worker is a local proxy that is able to reroute
                requests, serve cached responses, synthesize responses, and more. As a result, Server Timing enables
                Service Worker to report custom performance metrics about how the request was processed: whether it was
                fetched from a server or served from local cache, duration of relevant the processing steps, and so on.
            </p>
        </section>
    </section>

    <section class="appendix informative" id="acknowledgments">
        <div class="header-wrapper">
            <h2 id="c-acknowledgments"><bdi class="secno">C. </bdi>Acknowledgments</h2><a class="self-link"
                href="#acknowledgments" aria-label="Permalink for Appendix C."></a>
        </div>
        <p><em>This section is non-normative.</em></p>



        <p> This document reuses text from the [<cite><a class="bibref" data-link-type="biblio"
                    href="#bib-navigation-timing" title="Navigation Timing">NAVIGATION-TIMING</a></cite>], [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-resource-timing"
                    title="Resource Timing">RESOURCE-TIMING</a></cite>], [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-performance-timeline-2"
                    title="Performance Timeline">PERFORMANCE-TIMELINE-2</a></cite>], and [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-rfc6797"
                    title="HTTP Strict Transport Security (HSTS)">RFC6797</a></cite>] specifications as permitted by the
            licenses of those specifications.</p>
    </section>
    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="d-references"><bdi class="secno">D. </bdi>References</h2><a class="self-link" href="#references"
                aria-label="Permalink for Appendix D."></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="d-1-normative-references"><bdi class="secno">D.1 </bdi>Normative references</h3><a
                    class="self-link" href="#normative-references" aria-label="Permalink for Appendix D.1"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-fetch">[fetch]</dt>
                <dd>
                    <a href="https://fetch.spec.whatwg.org/"><cite>Fetch Standard</cite></a>. Anne van Kesteren. WHATWG.
                    Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-hr-time">[hr-time]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/hr-time-3/"><cite>High Resolution Time</cite></a>. Yoav Weiss. W3C.
                    22 March 2023. W3C Working Draft. URL: <a
                        href="https://www.w3.org/TR/hr-time-3/">https://www.w3.org/TR/hr-time-3/</a>
                </dd>
                <dt id="bib-html">[html]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren;
                    Domenic Denicola; Ian Hickson; Philip Jägenstedt; Simon Pieters. WHATWG. Living Standard. URL: <a
                        href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-infra">[infra]</dt>
                <dd>
                    <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Anne van Kesteren; Domenic
                    Denicola. WHATWG. Living Standard. URL: <a
                        href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-resource-timing">[RESOURCE-TIMING]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/resource-timing-2/"><cite>Resource Timing</cite></a>. Yoav Weiss;
                    Noam Rosenthal. W3C. 4 October 2022. W3C Candidate Recommendation. URL: <a
                        href="https://www.w3.org/TR/resource-timing-2/">https://www.w3.org/TR/resource-timing-2/</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate
                            Requirement Levels</cite></a>. S. Bradner. IETF. March 1997. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
                </dd>
                <dt id="bib-rfc3864">[RFC3864]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc3864"><cite>Registration Procedures for Message Header
                            Fields</cite></a>. G. Klyne; M. Nottingham; J. Mogul. IETF. September 2004. Best Current
                    Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc3864">https://www.rfc-editor.org/rfc/rfc3864</a>
                </dd>
                <dt id="bib-rfc5234">[RFC5234]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc5234"><cite>Augmented BNF for Syntax Specifications:
                            ABNF</cite></a>. D. Crocker, Ed.; P. Overell. IETF. January 2008. Internet Standard. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc5234">https://www.rfc-editor.org/rfc/rfc5234</a>
                </dd>
                <dt id="bib-rfc7230">[RFC7230]</dt>
                <dd>
                    <a href="https://httpwg.org/specs/rfc7230.html"><cite>Hypertext Transfer Protocol (HTTP/1.1):
                            Message Syntax and Routing</cite></a>. R. Fielding, Ed.; J. Reschke, Ed.. IETF. June 2014.
                    Proposed Standard. URL: <a
                        href="https://httpwg.org/specs/rfc7230.html">https://httpwg.org/specs/rfc7230.html</a>
                </dd>
                <dt id="bib-rfc8174">[RFC8174]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC
                            2119 Key Words</cite></a>. B. Leiba. IETF. May 2017. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
                </dd>
                <dt id="bib-webidl">[WEBIDL]</dt>
                <dd>
                    <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Edgar Chen; Timothy Gu.
                    WHATWG. Living Standard. URL: <a
                        href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
        <section id="informative-references">
            <div class="header-wrapper">
                <h3 id="d-2-informative-references"><bdi class="secno">D.2 </bdi>Informative references</h3><a
                    class="self-link" href="#informative-references" aria-label="Permalink for Appendix D.2"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-navigation-timing">[NAVIGATION-TIMING]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/navigation-timing/"><cite>Navigation Timing</cite></a>. Zhiheng Wang.
                    W3C. 17 December 2012. W3C Recommendation. URL: <a
                        href="https://www.w3.org/TR/navigation-timing/">https://www.w3.org/TR/navigation-timing/</a>
                </dd>
                <dt id="bib-performance-timeline-2">[PERFORMANCE-TIMELINE-2]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/performance-timeline/"><cite>Performance Timeline</cite></a>. Nicolas
                    Pena Moreno. W3C. 15 November 2022. W3C Candidate Recommendation. URL: <a
                        href="https://www.w3.org/TR/performance-timeline/">https://www.w3.org/TR/performance-timeline/</a>
                </dd>
                <dt id="bib-rfc6797">[RFC6797]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc6797"><cite>HTTP Strict Transport Security
                            (HSTS)</cite></a>. J. Hodges; C. Jackson; A. Barth. IETF. November 2012. Proposed Standard.
                    URL: <a href="https://www.rfc-editor.org/rfc/rfc6797">https://www.rfc-editor.org/rfc/rfc6797</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="Back to Top">↑</abbr></a>
    </p>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-server-timing-header-field"
        aria-label="Links in this document to definition: Server-Timing header field">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-server-timing-header-field"
                aria-label="Permalink for definition: Server-Timing header field. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-server-timing-header-field-1" title="§ 3. The Server-Timing Header Field">§ 3. The
                    Server-Timing Header Field</a>
            </li>
            <li>
                <a href="#ref-for-dfn-server-timing-header-field-2" title="§ 7.1 Server-Timing Header Field">§ 7.1
                    Server-Timing Header Field</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-parse-a-server-timing-header-field"
        aria-label="Links in this document to definition: parse a server-timing header field">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-parse-a-server-timing-header-field"
                aria-label="Permalink for definition: parse a server-timing header field. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-parse-a-server-timing-header-field-1" title="§ 5.1 serverTiming attribute">§ 5.1
                    serverTiming attribute</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-performanceservertiming"
        aria-label="Links in this document to definition: PerformanceServerTiming">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-performanceservertiming"
                aria-label="Permalink for definition: PerformanceServerTiming. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1854882554">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-performanceservertiming-1" title="§ 1. Introduction">§ 1. Introduction</a>
            </li>
            <li>
                <a href="#ref-for-dom-performanceservertiming-2" title="§ 3. The Server-Timing Header Field">§ 3. The
                    Server-Timing Header Field</a>
            </li>
            <li>
                <a href="#ref-for-dom-performanceservertiming-3" title="§ 4. The PerformanceServerTiming Interface">§ 4.
                    The PerformanceServerTiming Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-performanceservertiming-4" title="§ 4.3 description attribute">§ 4.3 description
                    attribute</a> <a href="#ref-for-dom-performanceservertiming-5" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-performanceservertiming-6"
                    title="§ 5. Extension to the PerformanceResourceTiming interface">§ 5. Extension to the
                    PerformanceResourceTiming interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-performanceservertiming-tojson" aria-label="Links in this document to definition: toJSON">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-performanceservertiming-tojson"
                aria-label="Permalink for definition: toJSON. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1854882554">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-performanceservertiming-tojson-1"
                    title="§ 4. The PerformanceServerTiming Interface">§ 4. The PerformanceServerTiming Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-performanceservertiming-name"
        aria-label="Links in this document to definition: name">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-performanceservertiming-name"
                aria-label="Permalink for definition: name. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1854882554">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-performanceservertiming-name-1"
                    title="§ 4. The PerformanceServerTiming Interface">§ 4. The PerformanceServerTiming Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-performanceservertiming-name-2" title="§ 4.1 name attribute">§ 4.1 name
                    attribute</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-performanceservertiming-duration"
        aria-label="Links in this document to definition: duration">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-performanceservertiming-duration"
                aria-label="Permalink for definition: duration. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1854882554">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-performanceservertiming-duration-1" title="§ 3. The Server-Timing Header Field">§
                    3. The Server-Timing Header Field</a>
            </li>
            <li>
                <a href="#ref-for-dom-performanceservertiming-duration-2"
                    title="§ 4. The PerformanceServerTiming Interface">§ 4. The PerformanceServerTiming Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-performanceservertiming-duration-3" title="§ 4.2 duration attribute">§ 4.2
                    duration attribute</a> <a href="#ref-for-dom-performanceservertiming-duration-4"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-performanceservertiming-duration-5"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-performanceservertiming-description"
        aria-label="Links in this document to definition: description">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-performanceservertiming-description"
                aria-label="Permalink for definition: description. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1854882554">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-performanceservertiming-description-1"
                    title="§ 3. The Server-Timing Header Field">§ 3. The Server-Timing Header Field</a>
            </li>
            <li>
                <a href="#ref-for-dom-performanceservertiming-description-2"
                    title="§ 4. The PerformanceServerTiming Interface">§ 4. The PerformanceServerTiming Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-performanceservertiming-description-3" title="§ 4.3 description attribute">§ 4.3
                    description attribute</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-metric-name"
        aria-label="Links in this document to definition: metric name">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-metric-name"
                aria-label="Permalink for definition: metric name. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-metric-name-1" title="§ 3. The Server-Timing Header Field">§ 3. The Server-Timing
                    Header Field</a>
            </li>
            <li>
                <a href="#ref-for-dfn-metric-name-2" title="§ 4.1 name attribute">§ 4.1 name attribute</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-params"
        aria-label="Links in this document to definition: params">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-params"
                aria-label="Permalink for definition: params. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-params-1" title="§ 3. The Server-Timing Header Field">§ 3. The Server-Timing
                    Header Field</a>
            </li>
            <li>
                <a href="#ref-for-dfn-params-2" title="§ 4.2 duration attribute">§ 4.2 duration attribute</a> <a
                    href="#ref-for-dfn-params-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-params-4" title="§ 4.3 description attribute">§ 4.3 description attribute</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-performanceresourcetiming-servertiming"
        aria-label="Links in this document to definition: serverTiming">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-performanceresourcetiming-servertiming"
                aria-label="Permalink for definition: serverTiming. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1421620017">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-performanceresourcetiming-servertiming-1"
                    title="§ 5. Extension to the PerformanceResourceTiming interface">§ 5. Extension to the
                    PerformanceResourceTiming interface</a>
            </li>
        </ul>
    </div>
    <script id="respec-dfn-panel">(() => {
            // @ts-check
            if (document.respec) {
                document.respec.ready.then(setupPanel);
            } else {
                setupPanel();
            }

            function setupPanel() {
                const listener = panelListener();
                document.body.addEventListener("keydown", listener);
                document.body.addEventListener("click", listener);
            }

            function panelListener() {
                /** @type {HTMLElement} */
                let panel = null;
                return event => {
                    const { target, type } = event;

                    if (!(target instanceof HTMLElement)) return;

                    // For keys, we only care about Enter key to activate the panel
                    // otherwise it's activated via a click.
                    if (type === "keydown" && event.key !== "Enter") return;

                    const action = deriveAction(event);

                    switch (action) {
                        case "show": {
                            hidePanel(panel);
                            /** @type {HTMLElement} */
                            const dfn = target.closest("dfn, .index-term");
                            panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                            const coords = deriveCoordinates(event);
                            displayPanel(dfn, panel, coords);
                            break;
                        }
                        case "dock": {
                            panel.style.left = null;
                            panel.style.top = null;
                            panel.classList.add("docked");
                            break;
                        }
                        case "hide": {
                            hidePanel(panel);
                            panel = null;
                            break;
                        }
                    }
                };
            }

            /**
             * @param {MouseEvent|KeyboardEvent} event
             */
            function deriveCoordinates(event) {
                const target = /** @type HTMLElement */ (event.target);

                // We prevent synthetic AT clicks from putting
                // the dialog in a weird place. The AT events sometimes
                // lack coordinates, so they have clientX/Y = 0
                const rect = target.getBoundingClientRect();
                if (
                    event instanceof MouseEvent &&
                    event.clientX >= rect.left &&
                    event.clientY >= rect.top
                ) {
                    // The event probably happened inside the bounding rect...
                    return { x: event.clientX, y: event.clientY };
                }

                // Offset to the middle of the element
                const x = rect.x + rect.width / 2;
                // Placed at the bottom of the element
                const y = rect.y + rect.height;
                return { x, y };
            }

            /**
             * @param {Event} event
             */
            function deriveAction(event) {
                const target = /** @type {HTMLElement} */ (event.target);
                const hitALink = !!target.closest("a");
                if (target.closest("dfn:not([data-cite]), .index-term")) {
                    return hitALink ? "none" : "show";
                }
                if (target.closest(".dfn-panel")) {
                    if (hitALink) {
                        return target.classList.contains("self-link") ? "hide" : "dock";
                    }
                    const panel = target.closest(".dfn-panel");
                    return panel.classList.contains("docked") ? "hide" : "none";
                }
                if (document.querySelector(".dfn-panel:not([hidden])")) {
                    return "hide";
                }
                return "none";
            }

            /**
             * @param {HTMLElement} dfn
             * @param {HTMLElement} panel
             * @param {{ x: number, y: number }} clickPosition
             */
            function displayPanel(dfn, panel, { x, y }) {
                panel.hidden = false;
                // distance (px) between edge of panel and the pointing triangle (caret)
                const MARGIN = 20;

                const dfnRects = dfn.getClientRects();
                // Find the `top` offset when the `dfn` can be spread across multiple lines
                let closestTop = 0;
                let minDiff = Infinity;
                for (const rect of dfnRects) {
                    const { top, bottom } = rect;
                    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                    if (diffFromClickY < minDiff) {
                        minDiff = diffFromClickY;
                        closestTop = top;
                    }
                }

                const top = window.scrollY + closestTop + dfnRects[0].height;
                const left = x - MARGIN;
                panel.style.left = `${left}px`;
                panel.style.top = `${top}px`;

                // Find if the panel is flowing out of the window
                const panelRect = panel.getBoundingClientRect();
                const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                if (panelRect.right > SCREEN_WIDTH) {
                    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                    const newCaretOffset = left - newLeft;
                    panel.style.left = `${newLeft}px`;
                    /** @type {HTMLElement} */
                    const caret = panel.querySelector(".caret");
                    caret.style.left = `${newCaretOffset}px`;
                }

                // As it's a dialog, we trap focus.
                // TODO: when <dialog> becomes a implemented, we should really
                // use that.
                trapFocus(panel, dfn);
            }

            /**
             * @param {HTMLElement} panel
             * @param {HTMLElement} dfn
             * @returns
             */
            function trapFocus(panel, dfn) {
                /** @type NodeListOf<HTMLAnchorElement> elements */
                const anchors = panel.querySelectorAll("a[href]");
                // No need to trap focus
                if (!anchors.length) return;

                // Move focus to first anchor element
                const first = anchors.item(0);
                first.focus();

                const trapListener = createTrapListener(anchors, panel, dfn);
                panel.addEventListener("keydown", trapListener);

                // Hiding the panel releases the trap
                const mo = new MutationObserver(records => {
                    const [record] = records;
                    const target = /** @type HTMLElement */ (record.target);
                    if (target.hidden) {
                        panel.removeEventListener("keydown", trapListener);
                        mo.disconnect();
                    }
                });
                mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
            }

            /**
             *
             * @param {NodeListOf<HTMLAnchorElement>} anchors
             * @param {HTMLElement} panel
             * @param {HTMLElement} dfn
             * @returns
             */
            function createTrapListener(anchors, panel, dfn) {
                const lastIndex = anchors.length - 1;
                let currentIndex = 0;
                return event => {
                    switch (event.key) {
                        // Hitting "Tab" traps us in a nice loop around elements.
                        case "Tab": {
                            event.preventDefault();
                            currentIndex += event.shiftKey ? -1 : +1;
                            if (currentIndex < 0) {
                                currentIndex = lastIndex;
                            } else if (currentIndex > lastIndex) {
                                currentIndex = 0;
                            }
                            anchors.item(currentIndex).focus();
                            break;
                        }

                        // Hitting "Enter" on an anchor releases the trap.
                        case "Enter":
                            hidePanel(panel);
                            break;

                        // Hitting "Escape" returns focus to dfn.
                        case "Escape":
                            hidePanel(panel);
                            dfn.focus();
                            return;
                    }
                };
            }

            /** @param {HTMLElement} panel */
            function hidePanel(panel) {
                if (!panel) return;
                panel.hidden = true;
                panel.classList.remove("docked");
            }
        })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
</body>

</html>