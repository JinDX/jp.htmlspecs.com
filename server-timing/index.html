<!DOCTYPE html>
<html lang="ja-JP" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta name="generator" content="ReSpec 33.0.1">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        span.example-title {
            text-transform: none
        }

        :is(aside, div).example,
        div.illegal-example {
            padding: .5em;
            margin: 1em 0;
            position: relative;
            clear: both
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: #000
        }

        :is(aside, div).example {
            border-left-width: .5em;
            border-left-style: solid;
            border-color: #e0cb52;
            background: #fcfaee
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff
        }

        .example pre {
            background-color: rgba(0, 0, 0, .03)
        }
    </style>
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9
        }

        .warning-title:before {
            content: "⚠";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        pre.idl {
            padding: 1em;
            position: relative
        }

        pre.idl>code {
            color: #000
        }

        @media print {
            pre.idl {
                white-space: pre-wrap
            }
        }

        .idlHeader {
            display: block;
            width: 150px;
            background: #8ccbf2;
            color: #fff;
            font-family: sans-serif;
            font-weight: 700;
            margin: -1em 0 1em -1em;
            height: 28px;
            line-height: 28px
        }

        .idlHeader a.self-link {
            margin-left: .3cm;
            text-decoration: none;
            border-bottom: none
        }

        .idlID {
            font-weight: 700;
            color: #005a9c
        }

        .idlType {
            color: #005a9c
        }

        .idlName {
            color: #ff4500
        }

        .idlName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none
        }

        a.idlEnumItem {
            color: #000;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        .idlSuperclass {
            font-style: italic;
            color: #005a9c
        }

        .idlDefaultValue,
        .idlParamName {
            font-style: italic
        }

        .extAttr {
            color: #666
        }

        .idlSectionComment {
            color: gray
        }

        .idlIncludes a {
            font-weight: 700
        }

        .respec-button-copy-paste:focus {
            text-decoration: none;
            border-color: #51a7e8;
            outline: 0;
            box-shadow: 0 0 5px rgba(81, 167, 232, .5)
        }

        .respec-button-copy-paste:is(:focus:hover, .selected:focus) {
            border-color: #51a7e8
        }

        .respec-button-copy-paste:is(:hover, :active, .zeroclipboard-is-hover, .zeroclipboard-is-active) {
            text-decoration: none;
            background-color: #ddd;
            background-image: linear-gradient(#eee, #ddd);
            border-color: #ccc
        }

        .respec-button-copy-paste:is(:active, .selected, .zeroclipboard-is-active) {
            background-color: #dcdcdc;
            background-image: none;
            border-color: #b5b5b5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, .15)
        }

        .respec-button-copy-paste.selected:hover {
            background-color: #cfcfcf
        }

        .respec-button-copy-paste:is(:disabled, :disabled:hover, .disabled, .disabled:hover) {
            color: rgba(102, 102, 102, .5);
            cursor: default;
            background-color: rgba(229, 229, 229, .5);
            background-image: none;
            border-color: rgba(197, 197, 197, .5);
            box-shadow: none
        }

        @media print {
            .respec-button-copy-paste {
                visibility: hidden
            }
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            color: #000;
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>

    <title>サーバータイミング</title>




    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        :is(h1, h2, h3, h4, h5, h6, a) abbr {
            border: none
        }

        dfn {
            font-weight: 700
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: normal
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        .toc a,
        .tof a {
            text-decoration: none
        }

        a .figno,
        a .secno {
            color: #000
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        table.simple {
            border-spacing: 0;
            border-collapse: collapse;
            border-bottom: 3px solid #005a9c
        }

        .simple th {
            background: #005a9c;
            color: #fff;
            padding: 3px 5px;
            text-align: left
        }

        .simple th a {
            color: #fff;
            padding: 3px 5px;
            text-align: left
        }

        .simple th[scope=row] {
            background: inherit;
            color: inherit;
            border-top: 1px solid #ddd
        }

        .simple td {
            padding: 3px 10px;
            border-top: 1px solid #ddd
        }

        .simple tr:nth-child(even) {
            background: #f0f6ff
        }

        .section dd>p:first-child {
            margin-top: 0
        }

        .section dd>p:last-child {
            margin-bottom: 0
        }

        .section dd {
            margin-bottom: 1em
        }

        .section dl.attrs dd,
        .section dl.eldef dd {
            margin-bottom: 0
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>
    <meta name="description"
        content="この仕様は、サーバーがリクエスト-レスポンスサイクルに関するパフォーマンス指標をユーザーエージェントに通知できるようにします。また、アプリケーションがこれらの指標を収集・処理・活用して、アプリケーションの配信を最適化できるようにするJavaScriptインターフェースも標準化します。">
    <link rel="canonical" href="https://www.w3.org/TR/server-timing/">
    <style>
        .hljs {
            display: block;
            overflow-x: auto;
            padding: .5em;
            color: #383a42;
            background: #fafafa
        }

        .hljs-comment,
        .hljs-quote {
            color: #717277;
            font-style: italic
        }

        .hljs-doctag,
        .hljs-formula,
        .hljs-keyword {
            color: #a626a4
        }

        .hljs-deletion,
        .hljs-name,
        .hljs-section,
        .hljs-selector-tag,
        .hljs-subst {
            color: #ca4706;
            font-weight: 700
        }

        .hljs-literal {
            color: #0b76c5
        }

        .hljs-addition,
        .hljs-attribute,
        .hljs-meta-string,
        .hljs-regexp,
        .hljs-string {
            color: #42803c
        }

        .hljs-built_in,
        .hljs-class .hljs-title {
            color: #9a6a01
        }

        .hljs-attr,
        .hljs-number,
        .hljs-selector-attr,
        .hljs-selector-class,
        .hljs-selector-pseudo,
        .hljs-template-variable,
        .hljs-type,
        .hljs-variable {
            color: #986801
        }

        .hljs-bullet,
        .hljs-link,
        .hljs-meta,
        .hljs-selector-id,
        .hljs-symbol,
        .hljs-title {
            color: #336ae3
        }

        .hljs-emphasis {
            font-style: italic
        }

        .hljs-strong {
            font-weight: 700
        }

        .hljs-link {
            text-decoration: underline
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #000
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #000;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "shortName": "server-timing",
  "specStatus": "WD",
  "edDraftURI": "https://w3c.github.io/server-timing/",
  "editors": [
    {
      "name": "Charles Vazac",
      "mailto": "cvazac@gmail.com",
      "company": "Akamai",
      "companyURL": "https://www.akamai.com/",
      "w3cid": "77116",
      "url": "mailto:cvazac@gmail.com"
    },
    {
      "name": "Ilya Grigorik",
      "url": "https://www.igvita.com/",
      "company": "Google",
      "companyURL": "https://www.google.com/",
      "w3cid": "56102"
    }
  ],
  "group": "webperf",
  "wg": "Web Performance Working Group",
  "wgURI": "https://www.w3.org/webperf/",
  "wgPublicList": "public-web-perf",
  "subjectPrefix": "[server-timing]",
  "license": "w3c-software-doc",
  "format": "markdown",
  "xref": [
    "webidl",
    "fetch",
    "secure-contexts",
    "html",
    "hr-time",
    "infra"
  ],
  "github": "https://github.com/w3c/server-timing/",
  "otherLinks": [
    {
      "key": "Mailing list",
      "data": [
        {
          "value": "public-web-perf@w3.org",
          "href": "https://lists.w3.org/Archives/Public/public-web-perf/"
        }
      ]
    },
    {
      "key": "Implementation",
      "data": [
        {
          "value": "Test Suite",
          "href": "http://w3c-test.org/server-timing/"
        },
        {
          "value": "Test Suite repository",
          "href": "https://github.com/web-platform-tests/wpt/tree/master/server-timing"
        }
      ]
    }
  ],
  "wgPatentURI": "https://www.w3.org/2004/01/pp-impl/45211/status",
  "publishDate": "2023-04-11",
  "previousMaturity": "WD",
  "previousPublishDate": "2023-03-17",
  "publishISODate": "2023-04-11T00:00:00.000Z",
  "generatedSubtitle": "W3C Working Draft 11 April 2023"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD">
</head>

<body class="h-entry" data-cite="WEBIDL webidl fetch secure-contexts html hr-time infra">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.w3.org/"><img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a></p>
        <h1 id="title" class="title">サーバータイミング</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C作業草案</a> <time class="dt-published"
                datetime="2023-04-11">2023年4月11日</time></p>
        <details open="">
            <summary>この文書の詳細情報</summary>
            <dl>
                <dt>このバージョン:</dt>
                <dd>
                    <a class="u-url"
                        href="https://www.w3.org/TR/2023/WD-server-timing-20230411/">https://www.w3.org/TR/2023/WD-server-timing-20230411/</a>
                </dd>
                <dt>最新公開バージョン:</dt>
                <dd>
                    <a href="https://www.w3.org/TR/server-timing/">https://www.w3.org/TR/server-timing/</a>
                </dd>
                <dt>最新編集者ドラフト:</dt>
                <dd><a href="https://w3c.github.io/server-timing/">https://w3c.github.io/server-timing/</a></dd>
                <dt>履歴:</dt>
                <dd>
                    <a
                        href="https://www.w3.org/standards/history/server-timing">https://www.w3.org/standards/history/server-timing</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/server-timing/commits/">コミット履歴</a>
                </dd>
                <dt>編集者:</dt>
                <dd class="editor p-author h-card vcard" data-editor-id="77116">
                    <a class="ed_mailto u-email email p-name" href="mailto:cvazac@gmail.com">Charles Vazac</a> (<a
                        class="p-org org h-org" href="https://www.akamai.com/">Akamai</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="56102">
                    <a class="u-url url p-name fn" href="https://www.igvita.com/">Ilya Grigorik</a> (<a
                        class="p-org org h-org" href="https://www.google.com/">Google</a>)
                </dd>
                <dt>フィードバック:</dt>
                <dd>
                    <a href="https://github.com/w3c/server-timing/">GitHub w3c/server-timing</a>
                    (<a href="https://github.com/w3c/server-timing/pulls/">プルリクエスト</a>,
                    <a href="https://github.com/w3c/server-timing/issues/new/choose">新規イシュー</a>,
                    <a href="https://github.com/w3c/server-timing/issues/">オープンイシュー</a>)
                </dd>
                <dd><a href="mailto:public-web-perf@w3.org?subject=%5Bserver-timing%5D">public-web-perf@w3.org</a> 件名
                    <kbd>[server-timing]</kbd> (<a rel="discussion"
                        href="https://lists.w3.org/Archives/Public/public-web-perf">アーカイブ</a>)
                </dd>
                <dt>メーリングリスト</dt>
                <dd>
                    <a href="https://lists.w3.org/Archives/Public/public-web-perf/">public-web-perf@w3.org</a>
                </dd>
                <dt>実装</dt>
                <dd>
                    <a href="http://w3c-test.org/server-timing/">テストスイート</a>
                </dd>
                <dd>
                    <a href="https://github.com/web-platform-tests/wpt/tree/master/server-timing">テストスイートリポジトリ</a>
                </dd>
            </dl>
        </details>


        <p class="copyright">
            <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
            ©
            2023

            <a href="https://www.w3.org/">World Wide Web Consortium</a>.
            <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
            <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
            <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document"
                title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>概要</h2>

        <p>この仕様は、サーバーがリクエスト-レスポンスサイクルに関するパフォーマンス指標をユーザーエージェントに通知できるようにします。また、アプリケーションがこれらの指標を収集・処理・活用して、アプリケーションの配信を最適化できるようにするJavaScriptインターフェースも標準化します。
        </p>
    </section>

    <section id="sotd" class="introductory">
        <h2>この文書のステータス</h2>
        <p><em>このセクションは、公開時点での
                文書のステータスを説明しています。現行の<abbr title="World Wide Web Consortium">W3C</abbr>
                公開物と技術レポートの最新版は、
                <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr>
                    技術レポート一覧</a>（https://www.w3.org/TR/）で参照できます。</em></p>
        <p>
            この文書は、<a href="https://www.w3.org/groups/wg/webperf">Webパフォーマンス作業グループ</a>によって
            <a href="https://www.w3.org/2021/Process-20211102/#recs-and-notes">勧告トラック</a>を利用して作業草案として公開されました。
        </p>
        <p>作業草案としての公開は、<abbr title="World Wide Web Consortium">W3C</abbr>およびそのメンバーによる承認を意味するものではありません。</p>
        <p>
            この文書はドラフトであり、いつでも更新・置換または廃止される可能性があります。他の文書として引用するのは不適切です。進行中の作業としてのみ引用してください。
        </p>
        <p>
            この文書は、
            <a href="https://www.w3.org/Consortium/Patent-Policy/"><abbr title="World Wide Web Consortium">W3C</abbr>
                特許ポリシー</a>の下で活動するグループによって作成されました。

            <abbr title="World Wide Web Consortium">W3C</abbr>は、
            <a rel="disclosure" href="https://www.w3.org/groups/wg/webperf/ipr">関連する特許開示の公開リスト</a>を
            管理しています。グループの成果物に関連する特許開示は、そのページで確認でき、特許開示の手順も記載されています。個人が、本質的なクレームを含む特許について実際に知識がある場合は、
            <a href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">W3C特許ポリシー第6節</a>に従って情報を開示しなければなりません。
        </p>
        <p>
            この文書は、
            <a id="w3c_process_revision" href="https://www.w3.org/2021/Process-20211102/">2021年11月2日版 <abbr
                    title="World Wide Web Consortium">W3C</abbr>プロセス文書</a>に従って管理されています。
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">目次</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">概要</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">この文書のステータス</a></li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>はじめに</a>
            </li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">2. </bdi>適合性</a></li>
            <li class="tocline"><a class="tocxref" href="#the-server-timing-header-field"><bdi class="secno">3.
                    </bdi><code>Server-Timing</code>ヘッダーフィールド</a></li>
            <li class="tocline"><a class="tocxref" href="#the-performanceservertiming-interface"><bdi class="secno">4.
                    </bdi><span data-export="" data-dfn-type="interface" data-idl="interface"
                        data-title="PerformanceServerTiming" data-dfn-for=""><code>PerformanceServerTiming</code></span>
                    インターフェース</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#name-attribute"><bdi class="secno">4.1 </bdi><span
                                data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="name"
                                data-dfn-for="PerformanceServerTiming" data-type="DOMString" data-lt="name"
                                data-local-lt="PerformanceServerTiming.name"><code>name</code></span>属性</a></li>
                    <li class="tocline"><a class="tocxref" href="#duration-attribute"><bdi class="secno">4.2 </bdi><span
                                data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="duration"
                                data-dfn-for="PerformanceServerTiming" data-type="DOMHighResTimeStamp"
                                data-lt="duration"
                                data-local-lt="PerformanceServerTiming.duration"><code>duration</code></span>
                            属性</a></li>
                    <li class="tocline"><a class="tocxref" href="#description-attribute"><bdi class="secno">4.3
                            </bdi><span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                data-title="description" data-dfn-for="PerformanceServerTiming" data-type="DOMString"
                                data-lt="description"
                                data-local-lt="PerformanceServerTiming.description"><code>description</code></span>
                            属性</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#extension-to-the-performanceresourcetiming-interface"><bdi
                        class="secno">5. </bdi><span data-xref-type="_IDL_" data-link-type="idl"
                        data-lt="PerformanceResourceTiming" data-cite="RESOURCE-TIMING#performanceresourcetiming"
                        class="formerLink"><code>PerformanceResourceTiming</code></span>インターフェースへの拡張</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#servertiming-attribute"><bdi class="secno">5.1
                            </bdi><code>serverTiming</code>属性</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#privacy-and-security"><bdi class="secno">6.
                    </bdi>プライバシーとセキュリティ</a></li>
            <li class="tocline"><a class="tocxref" href="#iana-considerations"><bdi class="secno">7.
                    </bdi>IANAに関する考慮事項</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#server-timing-header-field"><bdi class="secno">7.1
                            </bdi>Server-Timingヘッダーフィールド</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#examples"><bdi class="secno">A. </bdi>例</a></li>
            <li class="tocline"><a class="tocxref" href="#use-cases"><bdi class="secno">B. </bdi>ユースケース</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#server-timing-in-developer-tools"><bdi
                                class="secno">B.1 </bdi>開発者ツールにおけるサーバータイミング</a></li>
                    <li class="tocline"><a class="tocxref" href="#server-timing-for-automated-analytics"><bdi
                                class="secno">B.2 </bdi>自動分析のためのサーバータイミング</a></li>
                    <li class="tocline"><a class="tocxref" href="#measuring-request-routing-performance"><bdi
                                class="secno">B.3 </bdi>リクエストルーティングパフォーマンスの測定</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#acknowledgments"><bdi class="secno">C.
                    </bdi>謝辞</a></li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">D. </bdi>参考文献</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">D.1
                            </bdi>規定参照</a></li>
                    <li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">D.2
                            </bdi>参考参照</a></li>
                </ol>
            </li>
        </ol>
    </nav>

    <section class="informative" id="introduction">
        <div class="header-wrapper">
            <h2 id="x1-introduction"><bdi class="secno">1. </bdi>はじめに</h2><a class="self-link" href="#introduction"
                aria-label="Permalink for Section 1."></a>
        </div>
        <p><em>このセクションは非規定（参考）です。</em></p>

        <p>Webアプリケーションのパフォーマンス特性を正確に測定することは、Webアプリケーションを高速化するための重要な側面です。 [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-navigation-timing"
                    title="Navigation Timing">NAVIGATION-TIMING</a></cite>] および [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-resource-timing"
                    title="Resource Timing">RESOURCE-TIMING</a></cite>]
            は、ドキュメントとそのリソースに対する詳細なリクエストタイミング情報を提供します。これにはリクエストが開始された時刻や、接続のネゴシエーションやレスポンスの受信などの様々なマイルストーンが含まれます。しかし、ユーザーエージェントはリクエストのタイミングデータを観測できるものの、リクエスト-レスポンスサイクルの特定の段階がなぜ、あるいはどのようにしてそれだけの時間がかかったのかについては把握できません。例えば、リクエストがどのようにルーティングされたか、サーバー側でどこに時間が費やされたかなどです。
        </p>
        <p>この仕様では、<a data-link-type="idl" data-lt="PerformanceServerTiming" href="#dom-performanceservertiming"
                class="internalDFN"
                id="ref-for-dom-performanceservertiming-1"><code>PerformanceServerTiming</code></a>インターフェースを導入します。これにより、サーバーはリクエスト-レスポンスサイクルに関するパフォーマンス指標をユーザーエージェントに通知でき、アプリケーションがこれらの指標を収集、処理、活用してアプリケーションの配信を最適化できるJavaScriptインターフェースも提供します。
        </p>
    </section>

    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x2-conformance"><bdi class="secno">2. </bdi>適合性</h2><a class="self-link" href="#conformance"
                aria-label="Permalink for Section 2."></a>
        </div>
        <p>非規定と記載されているセクションだけでなく、この仕様書内のすべての作成ガイドライン、図、例、および注記は非規定です。それ以外の内容はすべて規定です。</p>
        <p>
            この文書におけるキーワード <em class="rfc2119">MAY</em>、<em class="rfc2119">MUST</em>、<em class="rfc2119">SHOULD NOT</em>
            は、
            <a href="https://datatracker.ietf.org/doc/html/bcp14">BCP 14</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119"
                    title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc8174"
                    title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
            に記載されている通り、全て大文字で現れる場合のみ、その意味で解釈されます。
        </p>
    </section>

    <section id="the-server-timing-header-field">
        <div class="header-wrapper">
            <h2 id="x3-the-server-timing-header-field"><bdi class="secno">3. </bdi><code>Server-Timing</code>ヘッダーフィールド
            </h2><a class="self-link" href="#the-server-timing-header-field" aria-label="Permalink for Section 3."></a>
        </div>

        <p><dfn id="dfn-server-timing-header-field" tabindex="0" aria-haspopup="dialog"
                data-dfn-type="dfn">Server-Timing ヘッダーフィールド</dfn>は、与えられたリクエスト-レスポンスサイクルに対して、1つ以上の指標と説明を通知するために使用されます。<a
                class="bibref" data-link-type="biblio" href="#bib-rfc5234"
                title="Augmented BNF for Syntax Specifications: ABNF">RFC5234</a> に基づくABNF（拡張Backus-Naur形式）の <a
                data-link-type="dfn" href="#dfn-server-timing-header-field" class="internalDFN"
                id="ref-for-dfn-server-timing-header-field-1">Server-Timing ヘッダーフィールド</a> の構文は以下の通りです：</p>
        <pre><code class="ABNF hljs" aria-busy="false">  Server-Timing             = #server-timing-metric
  server-timing-metric      = metric-name *( OWS ";" OWS server-timing-param )
  metric-name               = token
  server-timing-param       = server-timing-param-name OWS "=" OWS server-timing-param-value
  server-timing-param-name  = token
  server-timing-param-value = token / quoted-string
</code></pre>
        <p><a class="bibref" data-link-type="biblio" href="#bib-rfc7230"
                title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">RFC7230</a>
            を参照し、<code>#</code>、<code>*</code>、<code>OWS</code>、<code>token</code>、<code>quoted-string</code>の定義を確認してください。
        </p>
        <p>レスポンスには同じ metric-name を持つ server-timing-metric エントリが複数存在する場合があり、ユーザーエージェントはこれらすべてのエントリを処理し、公開しなければ<em
                class="rfc2119">なりません（MUST）</em>。</p>
        <p>ユーザーエージェントは、提供された指標をどの順序でも表示して<em class="rfc2119">構いません（MAY）</em>。つまり、HTTPヘッダーフィールド内の指標の順序は重要ではありません。</p>
        <p>このヘッダーフィールドは将来のパラメータ追加に対応できる拡張可能な構文で定義されています。レスポンスの Server-Timing ヘッダーフィールド内の特定の server-timing-param-name
            を認識しないユーザーエージェントは、そのトークンを無視し、エラーを通知せずに処理を継続<em class="rfc2119">しなければなりません（MUST）</em>。</p>
        <p>あいまいさを避けるため、1つの<code>server-timing-metric</code>内で<code>server-timing-param-name</code>は複数回現れる<em
                class="rfc2119">べきではありません（SHOULD
                NOT）</em>。もし同じ<code>server-timing-param-name</code>が複数回指定された場合、最初のインスタンスのみを考慮し、たとえ<code>server-timing-param</code>が不完全または無効であっても、以降のすべての出現はエラー通知などをせずに無視<em
                class="rfc2119">しなければなりません（MUST）</em>。これは<code>server-timing-metric</code>内のパラメータ順が重要になる唯一のケースです。
        </p>
        <p>ユーザーエージェントは、<code>server-timing-param-value</code>の後、次の<code>server-timing-param</code>や現在の<code>server-timing-metric</code>の終了までの間に発見された余分な文字を無視<em
                class="rfc2119">しなければなりません（MUST）</em>。
        </p>
        <p>ユーザーエージェントは、<code>metric-name</code>の後、最初の<code>server-timing-param</code>や次の<code>server-timing-metric</code>までの間に発見された余分な文字を無視<em
                class="rfc2119">しなければなりません（MUST）</em>。
        </p>
        <p data-link-for="PerformanceServerTiming">
            この仕様では、server-timing-param-namesとして "dur"（<a data-link-type="idl" data-lt="duration"
                href="#dom-performanceservertiming-duration" class="internalDFN"
                id="ref-for-dom-performanceservertiming-duration-1"><code>duration</code></a>）および "desc"（<a
                data-link-type="idl" data-lt="description" href="#dom-performanceservertiming-description"
                class="internalDFN"
                id="ref-for-dom-performanceservertiming-description-1"><code>description</code></a>）を定義します。いずれも任意です。
        </p>

        <div class="note" role="note" id="issue-container-generatedID">
            <div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>注記</span></div>
            <div class="">
                <ul>
                    <li>
                        <p>HTTPオーバーヘッドを最小化するため、提供される名前や説明はできるだけ短く保つべきです。例：省略形を使用したり、任意値を可能な限り省略する。</p>
                    </li>
                    <li>
                        <p>クライアント・サーバー・中継機関間で時計同期が保証できないため、クライアントのタイムライン上で意味のある<code>startTime</code>を割り当てることは不可能です。そのため、本仕様では<code>startTime</code>属性は意図的に省略されています。複数エントリ間の関係性を確立したい場合は、指標名や説明を使って独自データを通信することができます。
                        </p>
                    </li>
                    <li>
                        <p>サーバーや関連する中継機関は、どの指標をいつユーザーエージェントに通知するかを完全に制御できます。例えば、プライバシーやセキュリティ上の理由で一部の指標へのアクセスが制限される場合があります。詳細は
                            <a href="#privacy-and-security" class="sec-ref"><bdi class="secno">6.
                                </bdi>プライバシーとセキュリティ</a> セクションを参照してください。
                        </p>
                    </li>
                </ul>
            </div>
        </div>

        <p><dfn id="dfn-parse-a-server-timing-header-field" tabindex="0" aria-haspopup="dialog"
                data-dfn-type="dfn">Server-Timingヘッダーフィールドをパースする</dfn>には、文字列<var>field</var>を与えて、以下の手順に従います：</p>
        <ol>
            <li>
                <p><var>position</var>を<a data-link-type="dfn" data-type="dfn"
                        href="https://infra.spec.whatwg.org/#string-position-variable">位置変数</a>として、最初は<var>field</var>の先頭を指す。
                </p>
            </li>
            <li>
                <p><var>name</var>を、<a data-link-type="dfn" data-type="dfn"
                        href="https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points">コードポイントの並びを収集する</a>ことで、<var>field</var>からU+003B(;)に等しくないものを、<var>position</var>を基準に収集した結果とする。
                </p>
            </li>
            <li>
                <p><a data-link-type="dfn" data-type="dfn"
                        href="https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace">先頭と末尾のASCII空白を除去する</a>を<var>name</var>に適用する。
                </p>
            </li>
            <li>
                <p><var>name</var>が空文字列の場合、nullを返す。</p>
            </li>
            <li>
                <p><var>metric</var>を新しい<a data-link-type="idl" data-lt="PerformanceServerTiming"
                        href="#dom-performanceservertiming" class="internalDFN"
                        id="ref-for-dom-performanceservertiming-2"><code>PerformanceServerTiming</code></a>として生成し、その<a
                        data-for="PerformanceServerTiming" href="#dfn-metric-name" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-metric-name-1">metric name</a>に<var>name</var>を設定する。</p>
            </li>
            <li>
                <p><var>params</var>を空の<a data-type="dfn"
                        href="https://infra.spec.whatwg.org/#ordered-map">順序付きマップ</a>とする。</p>
            </li>
            <li>
                <p><var>position</var>が<var>field</var>の末尾でない間、以下を繰り返す：</p>
                <ol>
                    <li>
                        <p><var>position</var>を1進める。</p>
                    </li>
                    <li>
                        <p><var>paramName</var>を、<a data-link-type="dfn" data-type="dfn"
                                href="https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points">コードポイントの並びを収集する</a>ことで<var>field</var>からU+003D(=)に等しくないものを、<var>position</var>を基準に収集した結果とする。
                        </p>
                    </li>
                    <li>
                        <p><a data-link-type="dfn" data-type="dfn"
                                href="https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace">先頭と末尾のASCII空白を除去する</a>を<var>paramName</var>に適用する。
                        </p>
                    </li>
                    <li>
                        <p><var>paramName</var>が空文字列であるか、<var>params</var>[<var>paramName</var>]が<a data-link-type="dfn"
                                data-type="dfn" href="https://infra.spec.whatwg.org/#map-exists">存在する</a>場合、<a
                                data-link-type="dfn" data-type="dfn"
                                href="https://infra.spec.whatwg.org/#iteration-continue">次へ</a>。</p>
                    </li>
                    <li>
                        <p><var>position</var>を1進める。</p>
                    </li>
                    <li>
                        <p><var>paramValue</var>を空文字列とする。</p>
                    </li>
                    <li>
                        <p><a data-link-type="dfn" data-type="dfn"
                                href="https://infra.spec.whatwg.org/#skip-ascii-whitespace">ASCII空白をスキップする</a>を<var>field</var>と<var>position</var>で適用する。
                        </p>
                    </li>
                    <li>
                        <p><var>position</var>の<var>field</var>のコードポイントがU+0022（"）であれば：</p>
                        <ol>
                            <li>
                                <p><var>paramValue</var>に、<a data-link-type="dfn" data-type="dfn"
                                        href="https://fetch.spec.whatwg.org/#collect-an-http-quoted-string">HTTP引用文字列を収集する</a>の結果（<i>extract-value
                                        flag</i>をセットした状態）を<var>field</var>と<var>position</var>で適用し、設定する。</p>
                            </li>
                            <li>
                                <p><a data-link-type="dfn" data-type="dfn"
                                        href="https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points">コードポイントの並びを収集する</a>で、<var>field</var>からU+003B(;)に等しくないものを<var>position</var>を基準に収集する。結果は使用しない。
                                </p>
                            </li>
                        </ol>
                    </li>
                    <li>
                        <p>それ以外の場合：</p>
                        <ol>
                            <li>
                                <p><var>rawParamValue</var>を、<a data-link-type="dfn" data-type="dfn"
                                        href="https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points">コードポイントの並びを収集する</a>ことで<var>field</var>からU+003B(;)に等しくないものを<var>position</var>を基準に収集した結果とする。
                                </p>
                            </li>
                            <li>
                                <p><var>paramValue</var>を、<a data-link-type="dfn"
                                        data-lt="strip leading and trailing ASCII whitespace" data-type="dfn"
                                        href="https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace">rawParamValueの先頭と末尾のASCII空白を除去した結果</a>とする。
                                </p>
                            </li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li>
                <p><a data-link-type="dfn" data-lt="set" data-type="dfn"
                        href="https://infra.spec.whatwg.org/#map-set">設定する</a>で、<var>metric</var>の<a
                        data-for="PerformanceServerTiming" href="#dfn-params" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-params-1">params</a>に<var>params</var>を設定する。</p>
            </li>
            <li>
                <p><var>metric</var>を返す。</p>
            </li>
        </ol>
    </section>

    <section data-dfn-for="PerformanceServerTiming" data-link-for="PerformanceServerTiming"
        id="the-performanceservertiming-interface">
        <div class="header-wrapper">
            <h2 id="x4-the-performanceservertiming-interface"><bdi class="secno">4. </bdi><dfn data-export=""
                    data-dfn-type="interface" id="dom-performanceservertiming" data-idl="interface"
                    data-title="PerformanceServerTiming" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>PerformanceServerTiming</code></dfn> インターフェース</h2><a class="self-link"
                href="#the-performanceservertiming-interface" aria-label="Permalink for Section 4."></a>
        </div>



        <pre class="idl def" id="webidl-1854882554"><span class="idlHeader"><a class="self-link" href="#webidl-1854882554">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-performanceservertiming" data-title="PerformanceServerTiming">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-performanceservertiming" id="ref-for-dom-performanceservertiming-3"><code>PerformanceServerTiming</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-performanceservertiming-name" data-title="name" data-dfn-for="PerformanceServerTiming">
  readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-performanceservertiming-name" id="ref-for-dom-performanceservertiming-name-1"><code>name</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-performanceservertiming-duration" data-title="duration" data-dfn-for="PerformanceServerTiming">
  readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="typedef" href="https://www.w3.org/TR/hr-time-3/#dom-domhighrestimestamp">DOMHighResTimeStamp</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-performanceservertiming-duration" id="ref-for-dom-performanceservertiming-duration-2"><code>duration</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-performanceservertiming-description" data-title="description" data-dfn-for="PerformanceServerTiming">
  readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-performanceservertiming-description" id="ref-for-dom-performanceservertiming-description-2"><code>description</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-performanceservertiming-tojson" data-title="toJSON" data-dfn-for="PerformanceServerTiming">
  [<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Default">Default</a></span>]<span class="idlType"> <a data-link-type="interface" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-performanceservertiming-tojson" id="ref-for-dom-performanceservertiming-tojson-1"><code>toJSON</code></a>();</span>
};</span></code></pre>
        <p> <dfn class="export" data-dfn-for="PerformanceServerTiming" data-export="" data-dfn-type="method"
                id="dom-performanceservertiming-tojson" data-idl="operation" data-title="toJSON" data-type="object"
                data-lt="toJSON()"
                data-local-lt="PerformanceServerTiming.toJSON|PerformanceServerTiming.toJSON()|toJSON" tabindex="0"
                aria-haspopup="dialog"><code>toJSON</code></dfn> が呼び出された場合、[<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-webidl" title="Web IDL Standard">WEBIDL</a></cite>]の <a
                data-link-type="dfn" data-type="dfn" href="https://webidl.spec.whatwg.org/#default-tojson-steps">default
                toJSON steps</a> を実行する。</p>
        <section id="name-attribute">
            <div class="header-wrapper">
                <h3 id="x4-1-name-attribute"><bdi class="secno">4.1 </bdi><dfn data-export="" data-dfn-type="attribute"
                        id="dom-performanceservertiming-name" data-idl="attribute" data-title="name"
                        data-dfn-for="PerformanceServerTiming" data-type="DOMString" data-lt="name"
                        data-local-lt="PerformanceServerTiming.name" tabindex="0"
                        aria-haspopup="dialog"><code>name</code></dfn> 属性</h3><a class="self-link"
                    href="#name-attribute" aria-label="Permalink for Section 4.1"></a>
            </div>
            <p> <a href="#dom-performanceservertiming-name" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-performanceservertiming-name-2"><code>name</code></a> のgetter手順は、<a data-type="dfn"
                    href="https://webidl.spec.whatwg.org/#this">this</a>の <a data-for="PerformanceServerTiming"
                    href="#dfn-metric-name" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-metric-name-2">metric name</a> を返すこと。</p>
        </section>
        <section id="duration-attribute">
            <div class="header-wrapper">
                <h3 id="x4-2-duration-attribute"><bdi class="secno">4.2 </bdi><dfn data-export=""
                        data-dfn-type="attribute" id="dom-performanceservertiming-duration" data-idl="attribute"
                        data-title="duration" data-dfn-for="PerformanceServerTiming" data-type="DOMHighResTimeStamp"
                        data-lt="duration" data-local-lt="PerformanceServerTiming.duration" tabindex="0"
                        aria-haspopup="dialog"><code>duration</code></dfn> 属性</h3><a class="self-link"
                    href="#duration-attribute" aria-label="Permalink for Section 4.2"></a>
            </div>
            <p> <a href="#dom-performanceservertiming-duration" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-performanceservertiming-duration-3"><code>duration</code></a> のgetter手順は以下の通り：</p>
            <ol>
                <li>
                    <p><a data-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>の <a
                            data-for="PerformanceServerTiming" href="#dfn-params" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-params-2">params</a>[<code>"dur"</code>] が <a
                            data-link-type="dfn" data-lt="exists" data-type="dfn"
                            href="https://infra.spec.whatwg.org/#map-exists">存在しない場合</a>、0を返す。</p>
                </li>
                <li>
                    <p><var>dur</var> を <a data-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>の <a
                            data-for="PerformanceServerTiming" href="#dfn-params" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-params-3">params</a>[<code>"dur"</code>] を <a
                            data-link-type="dfn" data-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#rules-for-parsing-floating-point-number-values">浮動小数点数値のパース規則</a>でパースした結果とする。
                    </p>
                </li>
                <li>
                    <p><var>dur</var> がエラーの場合は0を返す。そうでなければ<var>dur</var>を返す。</p>
                </li>
            </ol>
            <div class="note" role="note" id="issue-container-generatedID-0">
                <div role="heading" class="note-title marker" id="h-note-0" aria-level="3"><span>注記</span></div>
                <p class="">
                    <a href="#dom-performanceservertiming-duration" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-performanceservertiming-duration-4"><code>duration</code></a> は <a
                        data-link-type="idl" data-lt="DOMHighResTimeStamp" data-type="typedef"
                        href="https://www.w3.org/TR/hr-time-3/#dom-domhighrestimestamp"><code>DOMHighResTimeStamp</code></a>
                    であり、通常はミリ秒単位の <a data-link-type="dfn" data-type="dfn"
                        href="https://www.w3.org/TR/hr-time-3/#dfn-duration">継続時間</a> を表します。実際には強制できないため、<a
                        href="#dom-performanceservertiming-duration" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-performanceservertiming-duration-5"><code>duration</code></a>
                    は任意の時間単位を表すことができ、ミリ秒単位で <a data-link-type="dfn" data-type="dfn"
                        href="https://www.w3.org/TR/hr-time-3/#dfn-duration">継続時間</a> を表すことが推奨されます。
                </p>
            </div>

        </section>
        <section id="description-attribute">
            <div class="header-wrapper">
                <h3 id="x4-3-description-attribute"><bdi class="secno">4.3 </bdi><dfn data-export=""
                        data-dfn-type="attribute" id="dom-performanceservertiming-description" data-idl="attribute"
                        data-title="description" data-dfn-for="PerformanceServerTiming" data-type="DOMString"
                        data-lt="description" data-local-lt="PerformanceServerTiming.description" tabindex="0"
                        aria-haspopup="dialog"><code>description</code></dfn> 属性</h3><a class="self-link"
                    href="#description-attribute" aria-label="Permalink for Section 4.3"></a>
            </div>
            <p> <a href="#dom-performanceservertiming-description" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-performanceservertiming-description-3"><code>description</code></a> のgetter手順は、<a
                    data-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>の <a
                    data-for="PerformanceServerTiming" href="#dfn-params" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-params-4">params</a>[<code>"desc"</code>] が <a data-link-type="dfn" data-type="dfn"
                    href="https://infra.spec.whatwg.org/#map-exists">存在する場合</a>はそれを返し、そうでなければ空文字列を返す。</p>
            <p> <a data-link-type="idl" data-lt="PerformanceServerTiming" href="#dom-performanceservertiming"
                    class="internalDFN"
                    id="ref-for-dom-performanceservertiming-4"><code>PerformanceServerTiming</code></a> は関連付けられた文字列 <dfn
                    id="dfn-metric-name" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">metric name</dfn>
                を持ち、初期値は空文字列である。</p>
            <p> <a data-link-type="idl" data-lt="PerformanceServerTiming" href="#dom-performanceservertiming"
                    class="internalDFN"
                    id="ref-for-dom-performanceservertiming-5"><code>PerformanceServerTiming</code></a> は関連付けられた <a
                    data-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">順序付きマップ</a> <dfn id="dfn-params"
                    tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">params</dfn> を持ち、初期値は空である。</p>
        </section>
    </section>


    <section data-dfn-for="PerformanceResourceTiming" data-link-for="PerformanceResourceTiming"
        id="extension-to-the-performanceresourcetiming-interface">
        <div class="header-wrapper">
            <h2 id="x5-extension-to-the-performanceresourcetiming-interface"><bdi class="secno">5. </bdi><a
                    data-link-type="idl" data-lt="PerformanceResourceTiming"
                    href="https://www.w3.org/TR/resource-timing-2/#performanceresourcetiming"><code>PerformanceResourceTiming</code></a>
                インターフェースへの拡張</h2><a class="self-link" href="#extension-to-the-performanceresourcetiming-interface"
                aria-label="Permalink for Section 5."></a>
        </div>



        <p> この仕様で部分的に拡張される <dfn id="dom-performanceresourcetiming" data-idl="interface"
                data-title="PerformanceResourceTiming" data-dfn-for="" class="externalDFN" data-no-export=""
                data-dfn-type="dfn"><a
                    href="https://www.w3.org/TR/resource-timing-2/#performanceresourcetiming"><code>PerformanceResourceTiming</code></a></dfn>
            インターフェースは [<cite><a class="bibref" data-link-type="biblio" href="#bib-resource-timing"
                    title="Resource Timing">RESOURCE-TIMING</a></cite>] で定義されています。</p>
        <pre class="idl def" id="webidl-1421620017"><span class="idlHeader"><a class="self-link" href="#webidl-1421620017">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-performanceresourcetiming-partial-1" data-title="PerformanceResourceTiming">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
partial interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-performanceresourcetiming"><code>PerformanceResourceTiming</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-performanceresourcetiming-servertiming" data-title="serverTiming" data-dfn-for="PerformanceResourceTiming">
  readonly attribute<span class="idlType"> <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array">FrozenArray</a>&lt;<a data-link-type="idl" href="#dom-performanceservertiming" class="internalDFN" id="ref-for-dom-performanceservertiming-6"><code>PerformanceServerTiming</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-performanceresourcetiming-servertiming" id="ref-for-dom-performanceresourcetiming-servertiming-1"><code>serverTiming</code></a>;</span>
};</span></code></pre>
        <section id="servertiming-attribute">
            <div class="header-wrapper">
                <h3 id="x5-1-servertiming-attribute"><bdi class="secno">5.1 </bdi><code>serverTiming</code> 属性
                </h3><a class="self-link" href="#servertiming-attribute" aria-label="Permalink for Section 5.1"></a>
            </div>
            <p> <dfn data-export="" data-dfn-type="attribute" id="dom-performanceresourcetiming-servertiming"
                    data-idl="attribute" data-title="serverTiming" data-dfn-for="PerformanceResourceTiming"
                    data-type="FrozenArray" data-lt="serverTiming"
                    data-local-lt="PerformanceResourceTiming.serverTiming" tabindex="0"
                    aria-haspopup="dialog"><code>serverTiming</code></dfn> のgetter手順は以下の通り：</p>
            <ol>
                <li>
                    <p><var>entries</var>を新しい<a data-link-type="dfn" data-type="dfn"
                            href="https://infra.spec.whatwg.org/#list">リスト</a>とする。</p>
                </li>
                <li>
                    <p><a data-link-type="dfn" data-lt="iterate" data-type="dfn"
                            href="https://infra.spec.whatwg.org/#list-iterate">各</a><var>field</var>について、<a
                            data-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>の<a
                            href="https://www.w3.org/TR/resource-timing-2/#dfn-timing-info">timing info</a>の<a
                            data-link-type="dfn" data-type="dfn"
                            href="https://fetch.spec.whatwg.org/#fetch-timing-info-server-timing-headers">server-timing
                            headers</a>内：</p>
                    <ol>
                        <li>
                            <p><var>metric</var>を、<a data-link-type="dfn" data-lt="parse a server-timing header field"
                                    href="#dfn-parse-a-server-timing-header-field" class="internalDFN"
                                    id="ref-for-dfn-parse-a-server-timing-header-field-1">Server-Timingヘッダーフィールドをパースする</a>を<var>field</var>に適用した結果とする。
                            </p>
                        </li>
                        <li>
                            <p><var>metric</var>がnullでなければ、<a data-link-type="dfn" data-type="dfn"
                                    href="https://infra.spec.whatwg.org/#list-append">append</a>で<var>metric</var>を<var>entries</var>に追加する。
                            </p>
                        </li>
                    </ol>
                </li>
                <li>
                    <p><var>entries</var>を返す。</p>
                </li>
            </ol>
        </section>
    </section>

    <section class="informative" id="privacy-and-security">
        <div class="header-wrapper">
            <h2 id="x6-privacy-and-security"><bdi class="secno">6. </bdi>プライバシーとセキュリティ</h2><a class="self-link"
                href="#privacy-and-security" aria-label="Permalink for Section 6."></a>
        </div>
        <p><em>このセクションは非規定（参考）です。</em></p>



        <p> この仕様で定義されるインターフェースは、サーバータイミング指標を通知するリソースを含む任意のウェブページに対して、潜在的に機微なアプリケーションおよびインフラ情報を公開します。このため、<code>PerformanceServerTiming</code>インターフェースへのアクセスはデフォルトで<a
                data-link-type="dfn" data-type="dfn"
                href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin">同一オリジン</a>ポリシーによって制限されています。リソース提供者は、[<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-resource-timing"
                    title="Resource Timing">RESOURCE-TIMING</a></cite>]にて定義される<code>Timing-Allow-Origin</code>
            HTTPレスポンスヘッダーを追加し、サーバー指標へのアクセスを許可するドメインを明示的に指定できますが、ユーザーエージェントは <em class="rfc2119">同一オリジン</em>
            ポリシーの制限を維持<em class="rfc2119">してもよい（MAY）</em>です。
        </p>
        <p> <code>Timing-Allow-Origin</code>
            HTTPレスポンスヘッダーの利用に加え、サーバーはどの指標をいつ誰に返すかを制御するためのロジックも利用できます。例えば、サーバーは認証済みの正しいユーザーにのみ特定の指標を提供し、それ以外のユーザーには何も提供しない場合があります。
        </p>
    </section>

    <section id="iana-considerations">
        <div class="header-wrapper">
            <h2 id="x7-iana-considerations"><bdi class="secno">7. </bdi>IANAに関する考慮事項</h2><a class="self-link"
                href="#iana-considerations" aria-label="Permalink for Section 7."></a>
        </div>



        <p> 永続メッセージヘッダーフィールド登録簿は、以下の登録内容で更新されるべきです（[<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc3864"
                    title="Registration Procedures for Message Header Fields">RFC3864</a></cite>]参照）：</p>
        <section id="server-timing-header-field">
            <div class="header-wrapper">
                <h3 id="x7-1-server-timing-header-field"><bdi class="secno">7.1 </bdi>Server-Timingヘッダーフィールド</h3><a
                    class="self-link" href="#server-timing-header-field" aria-label="Permalink for Section 7.1"></a>
            </div>
            <dl>
                <dt>ヘッダーフィールド名</dt>
                <dd>Server-Timing</dd>
                <dt>適用プロトコル</dt>
                <dd>http</dd>
                <dt>ステータス</dt>
                <dd>標準</dd>
                <dt>著者／変更管理者</dt>
                <dd><abbr title="World Wide Web Consortium">W3C</abbr></dd>
                <dt>仕様書</dt>
                <dd>この仕様（<a data-link-type="dfn" href="#dfn-server-timing-header-field" class="internalDFN"
                        id="ref-for-dfn-server-timing-header-field-2">Server-Timingヘッダーフィールド</a>参照）</dd>
            </dl>


        </section>
    </section>

    <section class="appendix informative" id="examples">
        <div class="header-wrapper">
            <h2 id="a-examples"><bdi class="secno">A. </bdi>例</h2><a class="self-link" href="#examples"
                aria-label="Permalink for Appendix A."></a>
        </div>
        <p><em>このセクションは非規定（参考）です。</em></p>



        <div class="example" id="example-1">
            <div class="marker">
                <a class="self-link" href="#example-1">例<bdi> 1</bdi></a>
            </div>
            <pre class="http" aria-busy="false"><code class="hljs">&gt; GET /resource HTTP/1.1
&gt; Host: example.com


&lt; HTTP/1.1 200 OK
&lt; Server-Timing: miss, db;dur=53, app;dur=47.2
&lt; Server-Timing: customView, dc;desc=atl
&lt; Server-Timing: cache;desc="Cache Read";dur=23.2
&lt; Trailer: Server-Timing
&lt; (... snip response body ...)
&lt; Server-Timing: total;dur=123.4</code></pre>
        </div>

        <table class="parameters">
            <thead>
                <tr>
                    <th>名前</th>
                    <th>継続時間</th>
                    <th>説明</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>miss</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>db</td>
                    <td>53</td>
                    <td></td>
                </tr>
                <tr>
                    <td>app</td>
                    <td>47.2</td>
                    <td></td>
                </tr>
                <tr>
                    <td>customView</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>dc</td>
                    <td></td>
                    <td>atl</td>
                </tr>
                <tr>
                    <td>cache</td>
                    <td>23.2</td>
                    <td>Cache Read</td>
                </tr>
                <tr>
                    <td>total</td>
                    <td>123.4</td>
                    <td></td>
                </tr>
            </tbody>
        </table>

        <p>上記のヘッダーフィールドは、サーバーがユーザーエージェントにデータを通知するためのあらゆる方法を示す6つの異なる指標を伝えています：指標名のみ、値付き指標、値・説明付き指標、説明付き指標など。例えば、上記の指標は<code>example.com/resource.jpg</code>の取得について次のように示すかもしれません。
        </p>

        <ol>
            <li>キャッシュミスが発生した。</li>
            <li>リクエストは「atl」データセンター（"dc"）を経由した。</li>
            <li>データベース（"db"）の時間は53msだった。</li>
            <li>キャッシュの読み取りは23.2msかかった。</li>
            <li>アプリケーションサーバー（"app"）は"customView"テンプレートや関数の処理に47.2msかかった。</li>
            <li>サーバー上でのリクエスト-レスポンスサイクルの総時間は123.4msであり、これはレスポンス末尾に記録され、トレーラーフィールド経由で通知された。</li>
        </ol>

        <p>アプリケーションは、提供されたJavaScriptインターフェースを使って、これらの指標を収集・処理・活用できます：</p>

        <div class="example" id="example-2">
            <div class="marker">
                <a class="self-link" href="#example-2">例<bdi> 2</bdi></a>
            </div>
            <pre aria-busy="false"><code class="hljs js"><span class="hljs-comment">// serverTiming entriesは'navigation'および'resource'エントリに存在可能</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entryType <span class="hljs-keyword">of</span> [<span class="hljs-string">'navigation'</span>, <span class="hljs-string">'resource'</span>]) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> {<span class="hljs-attr">name</span>: url, serverTiming} <span class="hljs-keyword">of</span> performance.getEntriesByType(entryType)) {
    <span class="hljs-comment">// serverTiming配列を反復</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> {name, duration, description} <span class="hljs-keyword">of</span> serverTiming) {
      <span class="hljs-comment">// "遅い"ものだけ処理</span>
      <span class="hljs-keyword">if</span> (duration &gt; <span class="hljs-number">200</span>) {
        <span class="hljs-built_in">console</span>.info(<span class="hljs-string">'遅い server-timing エントリ ='</span>,
          <span class="hljs-built_in">JSON</span>.stringify({url, entryType, name, duration, description}, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>))
      }
    }
  }
}</code></pre>
        </div>


    </section>
    <section class="appendix informative" id="use-cases">
        <div class="header-wrapper">
            <h2 id="b-use-cases"><bdi class="secno">B. </bdi>ユースケース</h2><a class="self-link" href="#use-cases"
                aria-label="Permalink for Appendix B."></a>
        </div>
        <p><em>このセクションは非規定（参考）です。</em></p>



        <section id="server-timing-in-developer-tools">
            <div class="header-wrapper">
                <h3 id="b-1-server-timing-in-developer-tools"><bdi class="secno">B.1 </bdi>開発者ツールにおけるサーバータイミング</h3><a
                    class="self-link" href="#server-timing-in-developer-tools"
                    aria-label="Permalink for Appendix B.1"></a>
            </div>
            <p> サーバー処理時間はリクエスト全体の時間の大きな割合を占めることがあります。例えば、動的レスポンスは複数のデータベースクエリやキャッシュ参照、API呼び出し、関連データの処理とレンダリングなどを必要とする場合があります。同様に、静的レスポンスでもサーバーの過負荷やキャッシュの遅延などで遅延することがあります。
            </p>
            <p> 現在、ユーザーエージェントの開発者ツールではリクエストの開始時刻やレスポンスの最初と最後のバイトの受信時刻は表示できますが、サーバー上でどこやどのように時間が使われたかは見えません。つまり、開発者はサーバーにパフォーマンスのボトルネックがあるかどうか、その場合どのコンポーネントかを迅速に診断できません。現状、この問いに答えるには、開発者はサーバーログを確認したり、レスポンス内にパフォーマンスデータを埋め込んだり、外部ツールを使ったりしなければなりません。これではボトルネックの特定や診断が困難、場合によっては非現実的です。
            </p>
            <p> Server
                Timingは、サーバーが関連するパフォーマンス指標をクライアントに通知し、クライアント側で開発者ツールに直接表示できる標準的な仕組みを定義します。例えば、リクエストにサーバー送信の指標を付与し、レスポンス生成時のどこ／どう時間が使われたかを可視化できます。
            </p>
        </section>
        <section id="server-timing-for-automated-analytics">
            <div class="header-wrapper">
                <h3 id="b-2-server-timing-for-automated-analytics"><bdi class="secno">B.2 </bdi>自動分析のためのサーバータイミング</h3><a
                    class="self-link" href="#server-timing-for-automated-analytics"
                    aria-label="Permalink for Appendix B.2"></a>
            </div>
            <p> 開発者ツールでサーバー送信のパフォーマンス指標を表示するだけでなく、標準のJavaScriptインターフェースによって、分析ツールがこれらの指標を自動的に収集・処理・ビーコン送信・集計し、運用分析やパフォーマンス分析に活用できます。
            </p>
        </section>
        <section id="measuring-request-routing-performance">
            <div class="header-wrapper">
                <h3 id="b-3-measuring-request-routing-performance"><bdi class="secno">B.3 </bdi>リクエストルーティングパフォーマンスの測定
                </h3><a class="self-link" href="#measuring-request-routing-performance"
                    aria-label="Permalink for Appendix B.3"></a>
            </div>
            <p> Server
                Timingにより、オリジンサーバーはリクエスト処理中のどこやどのように時間が使われているかのパフォーマンス指標を通知できます。しかし、同じリクエストとレスポンスが複数のプロキシ（例：キャッシュサーバー、ロードバランサー等）を経由する場合もあり、それぞれが独自の遅延や指標を加えたい場合があります。
            </p>
            <p> 例えば、CDNエッジノードは、どのデータセンターが使われたか、リソースがキャッシュにあったか、キャッシュやオリジンサーバーからレスポンス取得にどれだけ時間がかかったかなどを報告できます。また、他のプロキシでも同様の処理が繰り返され、リクエストがどのようにルーティングされ、どこで時間を使ったかの全体像が把握できます。
            </p>
            <p> 同様に、Service Workerが有効な場合、一部またはすべてのナビゲーションやリソースリクエストがService Worker経由でルーティングされます。実質的にService
                Workerはローカルプロキシとして、リクエストの再ルーティングやキャッシュレスポンスの提供、レスポンスの生成などを行えます。その結果、Server TimingはService
                Workerがリクエスト処理の方法（サーバー取得かローカルキャッシュか、各処理ステップの継続時間など）についてカスタム指標を報告できるようにします。
            </p>
        </section>
    </section>

    <section class="appendix informative" id="acknowledgments">
        <div class="header-wrapper">
            <h2 id="c-acknowledgments"><bdi class="secno">C. </bdi>謝辞</h2><a class="self-link" href="#acknowledgments"
                aria-label="Permalink for Appendix C."></a>
        </div>
        <p><em>このセクションは非規定（参考）です。</em></p>



        <p> 本書は、[<cite><a class="bibref" data-link-type="biblio" href="#bib-navigation-timing"
                    title="Navigation Timing">NAVIGATION-TIMING</a></cite>]、[<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-resource-timing"
                    title="Resource Timing">RESOURCE-TIMING</a></cite>]、[<cite><a class="bibref" data-link-type="biblio"
                    href="#bib-performance-timeline-2"
                    title="Performance Timeline">PERFORMANCE-TIMELINE-2</a></cite>]、[<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-rfc6797"
                    title="HTTP Strict Transport Security (HSTS)">RFC6797</a></cite>]仕様のライセンスにより許可された部分を再利用しています。</p>
    </section>
    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="d-references"><bdi class="secno">D. </bdi>参考文献</h2><a class="self-link" href="#references"
                aria-label="Permalink for Appendix D."></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="d-1-normative-references"><bdi class="secno">D.1 </bdi>規定参照</h3><a class="self-link"
                    href="#normative-references" aria-label="Permalink for Appendix D.1"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-fetch">[fetch]</dt>
                <dd>
                    <a href="https://fetch.spec.whatwg.org/"><cite>Fetch Standard</cite></a>. Anne van Kesteren. WHATWG.
                    現行標準. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-hr-time">[hr-time]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/hr-time-3/"><cite>High Resolution Time</cite></a>. Yoav Weiss. W3C.
                    2023年3月22日. W3C作業草案. URL: <a
                        href="https://www.w3.org/TR/hr-time-3/">https://www.w3.org/TR/hr-time-3/</a>
                </dd>
                <dt id="bib-html">[html]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML標準</cite></a>. Anne van Kesteren;
                    Domenic Denicola; Ian Hickson; Philip Jägenstedt; Simon Pieters. WHATWG. 現行標準. URL: <a
                        href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-infra">[infra]</dt>
                <dd>
                    <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Anne van Kesteren; Domenic
                    Denicola. WHATWG. 現行標準. URL: <a
                        href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-resource-timing">[RESOURCE-TIMING]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/resource-timing-2/"><cite>Resource Timing</cite></a>. Yoav Weiss;
                    Noam Rosenthal. W3C. 2022年10月4日. W3C勧告候補. URL: <a
                        href="https://www.w3.org/TR/resource-timing-2/">https://www.w3.org/TR/resource-timing-2/</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate
                            Requirement Levels</cite></a>. S. Bradner. IETF. 1997年3月. 現行のベストプラクティス. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
                </dd>
                <dt id="bib-rfc3864">[RFC3864]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc3864"><cite>Registration Procedures for Message Header
                            Fields</cite></a>. G. Klyne; M. Nottingham; J. Mogul. IETF. 2004年9月. 現行のベストプラクティス. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc3864">https://www.rfc-editor.org/rfc/rfc3864</a>
                </dd>
                <dt id="bib-rfc5234">[RFC5234]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc5234"><cite>Augmented BNF for Syntax Specifications:
                            ABNF</cite></a>. D. Crocker, Ed.; P. Overell. IETF. 2008年1月. インターネット標準. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc5234">https://www.rfc-editor.org/rfc/rfc5234</a>
                </dd>
                <dt id="bib-rfc7230">[RFC7230]</dt>
                <dd>
                    <a href="https://httpwg.org/specs/rfc7230.html"><cite>Hypertext Transfer Protocol (HTTP/1.1):
                            Message Syntax and Routing</cite></a>. R. Fielding, Ed.; J. Reschke, Ed.. IETF. 2014年6月.
                    提案標準. URL: <a href="https://httpwg.org/specs/rfc7230.html">https://httpwg.org/specs/rfc7230.html</a>
                </dd>
                <dt id="bib-rfc8174">[RFC8174]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC
                            2119 Key Words</cite></a>. B. Leiba. IETF. 2017年5月. 現行のベストプラクティス. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
                </dd>
                <dt id="bib-webidl">[WEBIDL]</dt>
                <dd>
                    <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL標準</cite></a>. Edgar Chen; Timothy Gu.
                    WHATWG. 現行標準. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
        <section id="informative-references">
            <div class="header-wrapper">
                <h3 id="d-2-informative-references"><bdi class="secno">D.2 </bdi>参考参照</h3><a class="self-link"
                    href="#informative-references" aria-label="Permalink for Appendix D.2"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-navigation-timing">[NAVIGATION-TIMING]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/navigation-timing/"><cite>Navigation Timing</cite></a>. Zhiheng Wang.
                    W3C. 2012年12月17日. W3C勧告. URL: <a
                        href="https://www.w3.org/TR/navigation-timing/">https://www.w3.org/TR/navigation-timing/</a>
                </dd>
                <dt id="bib-performance-timeline-2">[PERFORMANCE-TIMELINE-2]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/performance-timeline/"><cite>Performance Timeline</cite></a>. Nicolas
                    Pena Moreno. W3C. 2022年11月15日. W3C勧告候補. URL: <a
                        href="https://www.w3.org/TR/performance-timeline/">https://www.w3.org/TR/performance-timeline/</a>
                </dd>
                <dt id="bib-rfc6797">[RFC6797]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc6797"><cite>HTTP Strict Transport Security
                            (HSTS)</cite></a>. J. Hodges; C. Jackson; A. Barth. IETF. 2012年11月. 提案標準. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc6797">https://www.rfc-editor.org/rfc/rfc6797</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="トップに戻る">↑</abbr></a>
    </p>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-server-timing-header-field"
        aria-label="Links in this document to definition: Server-Timing header field">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-server-timing-header-field"
                aria-label="Permalink for definition: Server-Timing header field. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-server-timing-header-field-1" title="§ 3. The Server-Timing Header Field">§ 3. The
                    Server-Timing Header Field</a>
            </li>
            <li>
                <a href="#ref-for-dfn-server-timing-header-field-2" title="§ 7.1 Server-Timing Header Field">§ 7.1
                    Server-Timing Header Field</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-parse-a-server-timing-header-field"
        aria-label="Links in this document to definition: parse a server-timing header field">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-parse-a-server-timing-header-field"
                aria-label="Permalink for definition: parse a server-timing header field. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-parse-a-server-timing-header-field-1" title="§ 5.1 serverTiming attribute">§ 5.1
                    serverTiming attribute</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-performanceservertiming"
        aria-label="Links in this document to definition: PerformanceServerTiming">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-performanceservertiming"
                aria-label="Permalink for definition: PerformanceServerTiming. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1854882554">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-performanceservertiming-1" title="§ 1. Introduction">§ 1. Introduction</a>
            </li>
            <li>
                <a href="#ref-for-dom-performanceservertiming-2" title="§ 3. The Server-Timing Header Field">§ 3. The
                    Server-Timing Header Field</a>
            </li>
            <li>
                <a href="#ref-for-dom-performanceservertiming-3" title="§ 4. The PerformanceServerTiming Interface">§ 4.
                    The PerformanceServerTiming Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-performanceservertiming-4" title="§ 4.3 description attribute">§ 4.3 description
                    attribute</a> <a href="#ref-for-dom-performanceservertiming-5" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-performanceservertiming-6"
                    title="§ 5. Extension to the PerformanceResourceTiming interface">§ 5. Extension to the
                    PerformanceResourceTiming interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-performanceservertiming-tojson" aria-label="Links in this document to definition: toJSON">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-performanceservertiming-tojson"
                aria-label="Permalink for definition: toJSON. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1854882554">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-performanceservertiming-tojson-1"
                    title="§ 4. The PerformanceServerTiming Interface">§ 4. The PerformanceServerTiming Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-performanceservertiming-name"
        aria-label="Links in this document to definition: name">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-performanceservertiming-name"
                aria-label="Permalink for definition: name. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1854882554">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-performanceservertiming-name-1"
                    title="§ 4. The PerformanceServerTiming Interface">§ 4. The PerformanceServerTiming Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-performanceservertiming-name-2" title="§ 4.1 name attribute">§ 4.1 name
                    attribute</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-performanceservertiming-duration"
        aria-label="Links in this document to definition: duration">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-performanceservertiming-duration"
                aria-label="Permalink for definition: duration. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1854882554">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-performanceservertiming-duration-1" title="§ 3. The Server-Timing Header Field">§
                    3. The Server-Timing Header Field</a>
            </li>
            <li>
                <a href="#ref-for-dom-performanceservertiming-duration-2"
                    title="§ 4. The PerformanceServerTiming Interface">§ 4. The PerformanceServerTiming Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-performanceservertiming-duration-3" title="§ 4.2 duration attribute">§ 4.2
                    duration attribute</a> <a href="#ref-for-dom-performanceservertiming-duration-4"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-performanceservertiming-duration-5"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-performanceservertiming-description"
        aria-label="Links in this document to definition: description">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-performanceservertiming-description"
                aria-label="Permalink for definition: description. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1854882554">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-performanceservertiming-description-1"
                    title="§ 3. The Server-Timing Header Field">§ 3. The Server-Timing Header Field</a>
            </li>
            <li>
                <a href="#ref-for-dom-performanceservertiming-description-2"
                    title="§ 4. The PerformanceServerTiming Interface">§ 4. The PerformanceServerTiming Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-performanceservertiming-description-3" title="§ 4.3 description attribute">§ 4.3
                    description attribute</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-metric-name"
        aria-label="Links in this document to definition: metric name">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-metric-name"
                aria-label="Permalink for definition: metric name. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-metric-name-1" title="§ 3. The Server-Timing Header Field">§ 3. The Server-Timing
                    Header Field</a>
            </li>
            <li>
                <a href="#ref-for-dfn-metric-name-2" title="§ 4.1 name attribute">§ 4.1 name attribute</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-params"
        aria-label="Links in this document to definition: params">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-params"
                aria-label="Permalink for definition: params. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-params-1" title="§ 3. The Server-Timing Header Field">§ 3. The Server-Timing
                    Header Field</a>
            </li>
            <li>
                <a href="#ref-for-dfn-params-2" title="§ 4.2 duration attribute">§ 4.2 duration attribute</a> <a
                    href="#ref-for-dfn-params-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-params-4" title="§ 4.3 description attribute">§ 4.3 description attribute</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-performanceresourcetiming-servertiming"
        aria-label="Links in this document to definition: serverTiming">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-performanceresourcetiming-servertiming"
                aria-label="Permalink for definition: serverTiming. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1421620017">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-performanceresourcetiming-servertiming-1"
                    title="§ 5. Extension to the PerformanceResourceTiming interface">§ 5. Extension to the
                    PerformanceResourceTiming interface</a>
            </li>
        </ul>
    </div>
    <script id="respec-dfn-panel">(() => {
            // @ts-check
            if (document.respec) {
                document.respec.ready.then(setupPanel);
            } else {
                setupPanel();
            }

            function setupPanel() {
                const listener = panelListener();
                document.body.addEventListener("keydown", listener);
                document.body.addEventListener("click", listener);
            }

            function panelListener() {
                /** @type {HTMLElement} */
                let panel = null;
                return event => {
                    const { target, type } = event;

                    if (!(target instanceof HTMLElement)) return;

                    // For keys, we only care about Enter key to activate the panel
                    // otherwise it's activated via a click.
                    if (type === "keydown" && event.key !== "Enter") return;

                    const action = deriveAction(event);

                    switch (action) {
                        case "show": {
                            hidePanel(panel);
                            /** @type {HTMLElement} */
                            const dfn = target.closest("dfn, .index-term");
                            panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                            const coords = deriveCoordinates(event);
                            displayPanel(dfn, panel, coords);
                            break;
                        }
                        case "dock": {
                            panel.style.left = null;
                            panel.style.top = null;
                            panel.classList.add("docked");
                            break;
                        }
                        case "hide": {
                            hidePanel(panel);
                            panel = null;
                            break;
                        }
                    }
                };
            }

            /**
             * @param {MouseEvent|KeyboardEvent} event
             */
            function deriveCoordinates(event) {
                const target = /** @type HTMLElement */ (event.target);

                // We prevent synthetic AT clicks from putting
                // the dialog in a weird place. The AT events sometimes
                // lack coordinates, so they have clientX/Y = 0
                const rect = target.getBoundingClientRect();
                if (
                    event instanceof MouseEvent &&
                    event.clientX >= rect.left &&
                    event.clientY >= rect.top
                ) {
                    // The event probably happened inside the bounding rect...
                    return { x: event.clientX, y: event.clientY };
                }

                // Offset to the middle of the element
                const x = rect.x + rect.width / 2;
                // Placed at the bottom of the element
                const y = rect.y + rect.height;
                return { x, y };
            }

            /**
             * @param {Event} event
             */
            function deriveAction(event) {
                const target = /** @type {HTMLElement} */ (event.target);
                const hitALink = !!target.closest("a");
                if (target.closest("dfn:not([data-cite]), .index-term")) {
                    return hitALink ? "none" : "show";
                }
                if (target.closest(".dfn-panel")) {
                    if (hitALink) {
                        return target.classList.contains("self-link") ? "hide" : "dock";
                    }
                    const panel = target.closest(".dfn-panel");
                    return panel.classList.contains("docked") ? "hide" : "none";
                }
                if (document.querySelector(".dfn-panel:not([hidden])")) {
                    return "hide";
                }
                return "none";
            }

            /**
             * @param {HTMLElement} dfn
             * @param {HTMLElement} panel
             * @param {{ x: number, y: number }} clickPosition
             */
            function displayPanel(dfn, panel, { x, y }) {
                panel.hidden = false;
                // distance (px) between edge of panel and the pointing triangle (caret)
                const MARGIN = 20;

                const dfnRects = dfn.getClientRects();
                // Find the `top` offset when the `dfn` can be spread across multiple lines
                let closestTop = 0;
                let minDiff = Infinity;
                for (const rect of dfnRects) {
                    const { top, bottom } = rect;
                    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                    if (diffFromClickY < minDiff) {
                        minDiff = diffFromClickY;
                        closestTop = top;
                    }
                }

                const top = window.scrollY + closestTop + dfnRects[0].height;
                const left = x - MARGIN;
                panel.style.left = `${left}px`;
                panel.style.top = `${top}px`;

                // Find if the panel is flowing out of the window
                const panelRect = panel.getBoundingClientRect();
                const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                if (panelRect.right > SCREEN_WIDTH) {
                    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                    const newCaretOffset = left - newLeft;
                    panel.style.left = `${newLeft}px`;
                    /** @type {HTMLElement} */
                    const caret = panel.querySelector(".caret");
                    caret.style.left = `${newCaretOffset}px`;
                }

                // As it's a dialog, we trap focus.
                // TODO: when <dialog> becomes a implemented, we should really
                // use that.
                trapFocus(panel, dfn);
            }

            /**
             * @param {HTMLElement} panel
             * @param {HTMLElement} dfn
             * @returns
             */
            function trapFocus(panel, dfn) {
                /** @type NodeListOf<HTMLAnchorElement> elements */
                const anchors = panel.querySelectorAll("a[href]");
                // No need to trap focus
                if (!anchors.length) return;

                // Move focus to first anchor element
                const first = anchors.item(0);
                first.focus();

                const trapListener = createTrapListener(anchors, panel, dfn);
                panel.addEventListener("keydown", trapListener);

                // Hiding the panel releases the trap
                const mo = new MutationObserver(records => {
                    const [record] = records;
                    const target = /** @type HTMLElement */ (record.target);
                    if (target.hidden) {
                        panel.removeEventListener("keydown", trapListener);
                        mo.disconnect();
                    }
                });
                mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
            }

            /**
             *
             * @param {NodeListOf<HTMLAnchorElement>} anchors
             * @param {HTMLElement} panel
             * @param {HTMLElement} dfn
             * @returns
             */
            function createTrapListener(anchors, panel, dfn) {
                const lastIndex = anchors.length - 1;
                let currentIndex = 0;
                return event => {
                    switch (event.key) {
                        // Hitting "Tab" traps us in a nice loop around elements.
                        case "Tab": {
                            event.preventDefault();
                            currentIndex += event.shiftKey ? -1 : +1;
                            if (currentIndex < 0) {
                                currentIndex = lastIndex;
                            } else if (currentIndex > lastIndex) {
                                currentIndex = 0;
                            }
                            anchors.item(currentIndex).focus();
                            break;
                        }

                        // Hitting "Enter" on an anchor releases the trap.
                        case "Enter":
                            hidePanel(panel);
                            break;

                        // Hitting "Escape" returns focus to dfn.
                        case "Escape":
                            hidePanel(panel);
                            dfn.focus();
                            return;
                    }
                };
            }

            /** @param {HTMLElement} panel */
            function hidePanel(panel) {
                if (!panel) return;
                panel.hidden = true;
                panel.classList.remove("docked");
            }
        })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
</body>

</html>