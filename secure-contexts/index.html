<!doctype html>
<html lang="ja-JP">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>セキュアコンテキスト</title>
    <meta content="CRD" name="w3c-status">
    <meta content="Bikeshed version 82ce88815, updated Thu Sep 7 16:33:55 2023 -0700" name="generator">
    <link href="https://www.w3.org/TR/secure-contexts/" rel="canonical">
    <meta content="68191bb08a685c1e2d2270e72d2b14b36ba96f42" name="document-revision">
    <style>
        .secure {
            fill: #8F8;
        }

        .non-secure {
            fill: #F88;
            stroke-dasharray: 5, 5;
        }

        rect,
        circle {
            stroke-width: 2;
            stroke: black;
            fill-opacity: 0.75;
        }

        text {
            font-family: monospace;
        }

        text.rejection {
            fill: #F00;
            font-weight: 700;
            font-size: 2em;
        }

        g path {
            stroke-width: 2px;
            stroke: #666;
            fill-opacity: 0;
            stroke-dasharray: 5px, 5px;
        }
    </style>
    <style>
        /* Boilerplate: style-autolinks */
        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --selflink-text: black;
                --selflink-bg: silver;
                --selflink-hover-text: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-colors */

        /* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
        :root {
            color-scheme: light dark;

            --text: black;
            --bg: white;

            --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

            --logo-bg: #1a5e9a;
            --logo-active-bg: #c00;
            --logo-text: white;

            --tocnav-normal-text: #707070;
            --tocnav-normal-bg: var(--bg);
            --tocnav-hover-text: var(--tocnav-normal-text);
            --tocnav-hover-bg: #f8f8f8;
            --tocnav-active-text: #c00;
            --tocnav-active-bg: var(--tocnav-normal-bg);

            --tocsidebar-text: var(--text);
            --tocsidebar-bg: #f7f8f9;
            --tocsidebar-shadow: rgba(0, 0, 0, .1);
            --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

            --toclink-text: var(--text);
            --toclink-underline: #3980b5;
            --toclink-visited-text: var(--toclink-text);
            --toclink-visited-underline: #054572;

            --heading-text: #005a9c;

            --hr-text: var(--text);

            --algo-border: #def;

            --del-text: red;
            --del-bg: transparent;
            --ins-text: #080;
            --ins-bg: transparent;

            --a-normal-text: #034575;
            --a-normal-underline: #bbb;
            --a-visited-text: var(--a-normal-text);
            --a-visited-underline: #707070;
            --a-hover-bg: rgba(75%, 75%, 75%, .25);
            --a-active-text: #c00;
            --a-active-underline: #c00;

            --blockquote-border: silver;
            --blockquote-bg: transparent;
            --blockquote-text: currentcolor;

            --issue-border: #e05252;
            --issue-bg: #fbe9e9;
            --issue-text: var(--text);
            --issueheading-text: #831616;

            --example-border: #e0cb52;
            --example-bg: #fcfaee;
            --example-text: var(--text);
            --exampleheading-text: #574b0f;

            --note-border: #52e052;
            --note-bg: #e9fbe9;
            --note-text: var(--text);
            --noteheading-text: hsl(120, 70%, 30%);
            --notesummary-underline: silver;

            --assertion-border: #aaa;
            --assertion-bg: #eee;
            --assertion-text: black;

            --advisement-border: orange;
            --advisement-bg: #fec;
            --advisement-text: var(--text);
            --advisementheading-text: #b35f00;

            --warning-border: red;
            --warning-bg: hsla(40, 100%, 50%, 0.95);
            --warning-text: var(--text);

            --amendment-border: #330099;
            --amendment-bg: #F5F0FF;
            --amendment-text: var(--text);
            --amendmentheading-text: #220066;

            --def-border: #8ccbf2;
            --def-bg: #def;
            --def-text: var(--text);
            --defrow-border: #bbd7e9;

            --datacell-border: silver;

            --indexinfo-text: #707070;

            --indextable-hover-text: black;
            --indextable-hover-bg: #f7f8f9;

            --outdatedspec-bg: rgba(0, 0, 0, .5);
            --outdatedspec-text: black;
            --outdated-bg: maroon;
            --outdated-text: white;
            --outdated-shadow: red;

            --editedrec-bg: darkorange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --text: #ddd;
                --bg: black;

                --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

                --logo-bg: #1a5e9a;
                --logo-active-bg: #c00;
                --logo-text: white;

                --tocnav-normal-text: #999;
                --tocnav-normal-bg: var(--bg);
                --tocnav-hover-text: var(--tocnav-normal-text);
                --tocnav-hover-bg: #080808;
                --tocnav-active-text: #f44;
                --tocnav-active-bg: var(--tocnav-normal-bg);

                --tocsidebar-text: var(--text);
                --tocsidebar-bg: #080808;
                --tocsidebar-shadow: rgba(255, 255, 255, .1);
                --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

                --toclink-text: var(--text);
                --toclink-underline: #6af;
                --toclink-visited-text: var(--toclink-text);
                --toclink-visited-underline: #054572;

                --heading-text: #8af;

                --hr-text: var(--text);

                --algo-border: #456;

                --del-text: #f44;
                --del-bg: transparent;
                --ins-text: #4a4;
                --ins-bg: transparent;

                --a-normal-text: #6af;
                --a-normal-underline: #555;
                --a-visited-text: var(--a-normal-text);
                --a-visited-underline: var(--a-normal-underline);
                --a-hover-bg: rgba(25%, 25%, 25%, .2);
                --a-active-text: #f44;
                --a-active-underline: var(--a-active-text);

                --borderedblock-bg: rgba(255, 255, 255, .05);

                --blockquote-border: silver;
                --blockquote-bg: var(--borderedblock-bg);
                --blockquote-text: currentcolor;

                --issue-border: #e05252;
                --issue-bg: var(--borderedblock-bg);
                --issue-text: var(--text);
                --issueheading-text: hsl(0deg, 70%, 70%);

                --example-border: hsl(50deg, 90%, 60%);
                --example-bg: var(--borderedblock-bg);
                --example-text: var(--text);
                --exampleheading-text: hsl(50deg, 70%, 70%);

                --note-border: hsl(120deg, 100%, 35%);
                --note-bg: var(--borderedblock-bg);
                --note-text: var(--text);
                --noteheading-text: hsl(120, 70%, 70%);
                --notesummary-underline: silver;

                --assertion-border: #444;
                --assertion-bg: var(--borderedblock-bg);
                --assertion-text: var(--text);

                --advisement-border: orange;
                --advisement-bg: #222218;
                --advisement-text: var(--text);
                --advisementheading-text: #f84;

                --warning-border: red;
                --warning-bg: hsla(40, 100%, 20%, 0.95);
                --warning-text: var(--text);

                --amendment-border: #330099;
                --amendment-bg: #080010;
                --amendment-text: var(--text);
                --amendmentheading-text: #cc00ff;

                --def-border: #8ccbf2;
                --def-bg: #080818;
                --def-text: var(--text);
                --defrow-border: #136;

                --datacell-border: silver;

                --indexinfo-text: #aaa;

                --indextable-hover-text: var(--text);
                --indextable-hover-bg: #181818;

                --outdatedspec-bg: rgba(255, 255, 255, .5);
                --outdatedspec-text: black;
                --outdated-bg: maroon;
                --outdated-text: white;
                --outdated-shadow: red;

                --editedrec-bg: darkorange;
            }

            /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
            img {
                background: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-counters */
        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* Boilerplate: style-dfn-panel */
        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dfnpanel-bg: #222;
                --dfnpanel-text: var(--text);
            }
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0 0 0 1em;
            list-style: none;
        }

        .dfn-panel li a {
            white-space: pre;
            display: inline-block;
            max-width: calc(300px - 1.5em - 1em);
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled[role="button"] {
            cursor: pointer;
        }
    </style>
    <style>
        /* Boilerplate: style-dfn-panel */
        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dfnpanel-bg: #222;
                --dfnpanel-text: var(--text);
            }
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0 0 0 1em;
            list-style: none;
        }

        .dfn-panel li a {
            white-space: pre;
            display: inline-block;
            max-width: calc(300px - 1.5em - 1em);
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled[role="button"] {
            cursor: pointer;
        }
    </style>
    <style>
        /* Boilerplate: style-issues */
        a[href].issue-return {
            float: right;
            float: inline-end;
            color: var(--issueheading-text);
            font-weight: bold;
            text-decoration: none;
        }
    </style>
    <style>
        /* Boilerplate: style-md-lists */
        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* Boilerplate: style-selflinks */

        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        .example>a.self-link,
        .note>a.self-link,
        .issue>a.self-link {
            /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
            left: auto;
            right: 0;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* Boilerplate: style-syntax-highlighting */

        pre.idl.highlight {
            background: var(--borderedblock-bg, var(--def-bg));
        }
    </style>
    <style>
        /* Boilerplate: style-syntax-highlighting */

        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        .highlight:not(.idl) {
            background: rgba(0, 0, 0, .03);
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */


        @media (prefers-color-scheme: dark) {
            .highlight:not(.idl) {
                background: rgba(255, 255, 255, .05);
            }

            c-[a] {
                color: #d33682
            }

            /* Keyword.Declaration */
            c-[b] {
                color: #d33682
            }

            /* Keyword.Type */
            c-[c] {
                color: #2aa198
            }

            /* Comment */
            c-[d] {
                color: #2aa198
            }

            /* Comment.Multiline */
            c-[e] {
                color: #268bd2
            }

            /* Name.Attribute */
            c-[f] {
                color: #b58900
            }

            /* Name.Tag */
            c-[g] {
                color: #cb4b16
            }

            /* Name.Variable */
            c-[k] {
                color: #d33682
            }

            /* Keyword */
            c-[l] {
                color: #657b83
            }

            /* Literal */
            c-[m] {
                color: #657b83
            }

            /* Literal.Number */
            c-[n] {
                color: #268bd2
            }

            /* Name */
            c-[o] {
                color: #657b83
            }

            /* Operator */
            c-[p] {
                color: #657b83
            }

            /* Punctuation */
            c-[s] {
                color: #6c71c4
            }

            /* Literal.String */
            c-[t] {
                color: #6c71c4
            }

            /* Literal.String.Single */
            c-[u] {
                color: #6c71c4
            }

            /* Literal.String.Double */
            c-[ch] {
                color: #2aa198
            }

            /* Comment.Hashbang */
            c-[cp] {
                color: #2aa198
            }

            /* Comment.Preproc */
            c-[cpf] {
                color: #2aa198
            }

            /* Comment.PreprocFile */
            c-[c1] {
                color: #2aa198
            }

            /* Comment.Single */
            c-[cs] {
                color: #2aa198
            }

            /* Comment.Special */
            c-[kc] {
                color: #d33682
            }

            /* Keyword.Constant */
            c-[kn] {
                color: #d33682
            }

            /* Keyword.Namespace */
            c-[kp] {
                color: #d33682
            }

            /* Keyword.Pseudo */
            c-[kr] {
                color: #d33682
            }

            /* Keyword.Reserved */
            c-[ld] {
                color: #657b83
            }

            /* Literal.Date */
            c-[nc] {
                color: #268bd2
            }

            /* Name.Class */
            c-[no] {
                color: #268bd2
            }

            /* Name.Constant */
            c-[nd] {
                color: #268bd2
            }

            /* Name.Decorator */
            c-[ni] {
                color: #268bd2
            }

            /* Name.Entity */
            c-[ne] {
                color: #268bd2
            }

            /* Name.Exception */
            c-[nf] {
                color: #268bd2
            }

            /* Name.Function */
            c-[nl] {
                color: #268bd2
            }

            /* Name.Label */
            c-[nn] {
                color: #268bd2
            }

            /* Name.Namespace */
            c-[py] {
                color: #268bd2
            }

            /* Name.Property */
            c-[ow] {
                color: #657b83
            }

            /* Operator.Word */
            c-[mb] {
                color: #657b83
            }

            /* Literal.Number.Bin */
            c-[mf] {
                color: #657b83
            }

            /* Literal.Number.Float */
            c-[mh] {
                color: #657b83
            }

            /* Literal.Number.Hex */
            c-[mi] {
                color: #657b83
            }

            /* Literal.Number.Integer */
            c-[mo] {
                color: #657b83
            }

            /* Literal.Number.Oct */
            c-[sa] {
                color: #6c71c4
            }

            /* Literal.String.Affix */
            c-[sb] {
                color: #6c71c4
            }

            /* Literal.String.Backtick */
            c-[sc] {
                color: #6c71c4
            }

            /* Literal.String.Char */
            c-[dl] {
                color: #6c71c4
            }

            /* Literal.String.Delimiter */
            c-[sd] {
                color: #6c71c4
            }

            /* Literal.String.Doc */
            c-[se] {
                color: #6c71c4
            }

            /* Literal.String.Escape */
            c-[sh] {
                color: #6c71c4
            }

            /* Literal.String.Heredoc */
            c-[si] {
                color: #6c71c4
            }

            /* Literal.String.Interpol */
            c-[sx] {
                color: #6c71c4
            }

            /* Literal.String.Other */
            c-[sr] {
                color: #6c71c4
            }

            /* Literal.String.Regex */
            c-[ss] {
                color: #6c71c4
            }

            /* Literal.String.Symbol */
            c-[fm] {
                color: #268bd2
            }

            /* Name.Function.Magic */
            c-[vc] {
                color: #cb4b16
            }

            /* Name.Variable.Class */
            c-[vg] {
                color: #cb4b16
            }

            /* Name.Variable.Global */
            c-[vi] {
                color: #cb4b16
            }

            /* Name.Variable.Instance */
            c-[vm] {
                color: #cb4b16
            }

            /* Name.Variable.Magic */
            c-[il] {
                color: #657b83
            }

            /* Literal.Number.Integer.Long */
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-CRD" rel="stylesheet">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
        <h1>セキュアコンテキスト</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#CRD">W3C 勧告候補草案</a>, <time class="dt-updated"
                datetime="2023-11-10">2023年11月10日</time></p>
        <details open>
            <summary>この文書の詳細</summary>
            <div data-fill-with="spec-metadata">
                <dl>
                    <dt>このバージョン:
                    <dd><a class="u-url"
                            href="https://www.w3.org/TR/2023/CRD-secure-contexts-20231110/">https://www.w3.org/TR/2023/CRD-secure-contexts-20231110/</a>
                    <dt>最新公開バージョン:
                    <dd><a href="https://www.w3.org/TR/secure-contexts/">https://www.w3.org/TR/secure-contexts/</a>
                    <dt>編集者草案:
                    <dd><a
                            href="https://w3c.github.io/webappsec-secure-contexts/">https://w3c.github.io/webappsec-secure-contexts/</a>
                    <dt>以前のバージョン:
                    <dd><a href="https://www.w3.org/TR/2021/CRD-secure-contexts-20210918/"
                            rel="prev">https://www.w3.org/TR/2021/CRD-secure-contexts-20210918/</a>
                    <dt>履歴:
                    <dd><a class="u-url"
                            href="https://www.w3.org/standards/history/secure-contexts/">https://www.w3.org/standards/history/secure-contexts/</a>
                    <dt>フィードバック:
                    <dd><span><a
                                href="mailto:public-webappsec@w3.org?subject=%5Bsecure-contexts%5D%20YOUR%20TOPIC%20HERE">public-webappsec@w3.org</a>
                            件名 “<kbd>[secure-contexts] <i data-lt>… メッセージのトピック …</i></kbd>” (<a
                                href="https://lists.w3.org/Archives/Public/public-webappsec/"
                                rel="discussion">アーカイブ</a>)</span>
                    <dd><a href="https://github.com/w3c/webappsec-secure-contexts/issues">GitHub</a>
                    <dt>実装レポート:
                    <dd><a href="https://wpt.fyi/results/secure-contexts">https://wpt.fyi/results/secure-contexts</a>
                    <dt class="editor">編集者:
                    <dd class="editor p-author h-card vcard" data-editor-id="56384"><a class="p-name fn u-email email"
                            href="mailto:mkwst@google.com">Mike West</a> (<span class="p-org org">Google Inc.</span>)
                    <dt class="editor">前編集者:
                    <dd class="editor p-author h-card vcard"><span class="p-name fn">Yan Zhu</span> (<span
                            class="p-org org">Brave</span>)
                    <dt>参加:
                    <dd><a href="https://github.com/w3c/webappsec-secure-contexts/issues/new">問題を報告</a> (<a
                            href="https://github.com/w3c/webappsec-secure-contexts/issues">オープンな問題</a>)
                </dl>
            </div>
        </details>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> ©
            2023 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr
                title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a
                href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/copyright/software-license/" rel="license"
                title="W3C Software and Document License">permissive document license</a> rules apply. </p>
        <hr title="Separator for header">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">概要</span></h2>
        <p>この仕様書は「セキュアコンテキスト」を定義し、それによってユーザーエージェントの実装者や仕様書の著者が、認証と機密性の最低基準を満たした場合にのみ特定の機能を有効にすることを可能にします。</p>
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">この文書の状態</span></h2>
    <div data-fill-with="status">
        <p> <em>このセクションでは、この文書が公開された時点での状態について説明します。
                W3C の現在の公開物およびこの技術報告書の最新改訂版の一覧については、<a href="https://www.w3.org/TR/">W3C 技術報告書インデックス
                    https://www.w3.org/TR/ を参照してください。</a></em> </p>
        <p> この文書は、<a href="https://www.w3.org/groups/wg/webappsec">Web Application Security ワーキンググループ</a>によって、<a
                href="https://www.w3.org/2023/Process-20231103/#recs-and-notes">勧告トラック</a>を使用して勧告候補草案として公開されました。この文書は
            W3C 勧告になることを意図しています。 </p>
        <p> (<a href="https://lists.w3.org/Archives/Public/public-webappsec/">アーカイブ</a>) 公開メーリングリスト <a
                href="mailto:public-webappsec@w3.org?Subject=%5Bsecure-contexts%5D%20PUT%20SUBJECT%20HERE">public-webappsec@w3.org</a>
            (参照 <a href="https://www.w3.org/Mail/Request">手順</a>)
            は、この仕様書の議論のための優先的な手段です。
            メールを送信する際は、
            件名に「secure-contexts」という文字列を含めてください。
            できれば以下のようにしてください:
            「[secure-contexts] <em>…コメントの概要…</em>」 </p>
        <p> 勧告候補としての公開は、<abbr title="World Wide Web Consortium">W3C</abbr>
            およびそのメンバーによる承認を意味するものではありません。勧告候補草案は、ワーキンググループが次の勧告候補スナップショットに含める予定の、前回の勧告候補からの変更を統合したものです。これは草案文書であり、いつでも更新、置き換え、または廃止される可能性があります。この文書を進行中の作業以外のものとして引用することは適切ではありません。
        </p>
        <p> この文書が提案勧告段階に進むための基準は、この仕様書のすべての機能を実装した、少なくとも 2
            つの独立した相互運用可能なユーザーエージェントを持つことです。これは、ワーキンググループが開発したテストスイートで定義されたユーザーエージェントテストを通過することで判断されます。ワーキンググループは進捗を追跡するための実装報告書を準備します。
        </p>
        <p> この文書は、<a href="https://www.w3.org/Consortium/Patent-Policy/">W3C 特許ポリシー</a>の下で運営されるグループによって作成されました。
            W3C は、グループの成果物に関連する特許の開示の<a href="https://www.w3.org/groups/wg/webappsec/ipr"
                rel="disclosure">公開リスト</a>を維持しています;
            そのページには特許を開示するための手順も含まれています。
            特許に関して実際の知識を持つ個人は、その特許が<a
                href="https://www.w3.org/Consortium/Patent-Policy/#def-essential">必須クレーム</a>を含むと信じる場合、<a
                href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">W3C
                特許ポリシー第6節</a>に基づいて情報を開示しなければなりません。 </p>
        <p> この文書は、<a href="https://www.w3.org/2023/Process-20231103/"
                id="w3c_process_revision">2023年11月03日W3Cプロセス文書</a>の下で管理されています。 </p>
        <p></p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目次</h2>
        <ol class="toc" role="directory">
            <li>
                <a href="#intro"><span class="secno">1</span> <span class="content">導入</span></a>
                <ol class="toc">
                    <li><a href="#examples-top-level"><span class="secno">1.1</span> <span
                                class="content">トップレベルドキュメント</span></a>
                    <li><a href="#examples-framed"><span class="secno">1.2</span> <span
                                class="content">フレームドドキュメント</span></a>
                    <li><a href="#examples-workers"><span class="secno">1.3</span> <span
                                class="content">ウェブワーカー</span></a>
                    <li><a href="#examples-shared-workers"><span class="secno">1.4</span> <span
                                class="content">共有ワーカー</span></a>
                    <li><a href="#examples-service-workers"><span class="secno">1.5</span> <span
                                class="content">サービスワーカー</span></a>
                </ol>
            <li>
                <a href="#framework"><span class="secno">2</span> <span class="content">フレームワーク</span></a>
                <ol class="toc">
                    <li><a href="#integration-idl"><span class="secno">2.1</span> <span
                                class="content">WebIDLとの統合</span></a>
                    <li>
                        <a href="#monkey-patching-html"><span class="secno">2.2</span> <span
                                class="content">HTMLとの統合</span></a>
                        <ol class="toc">
                            <li><a href="#shared-workers"><span class="secno">2.2.1</span> <span
                                        class="content">共有ワーカー</span></a>
                            <li><a href="#monkey-patching-global-object"><span class="secno">2.2.2</span> <span
                                        class="content">機能検出</span></a>
                            <li><a href="#is-settings-object-contextually-secure"><span class="secno">2.2.3</span> <span
                                        class="content">セキュア・非セキュアコンテキスト</span></a>
                        </ol>
                </ol>
            <li>
                <a href="#algorithms"><span class="secno">3</span> <span class="content">アルゴリズム</span></a>
                <ol class="toc">
                    <li><a href="#is-origin-trustworthy"><span class="secno">3.1</span> <span class="content">
                                <var>origin</var>は潜在的に信頼できるか？</span></a>
                    <li><a href="#is-url-trustworthy"><span class="secno">3.2</span> <span class="content">
                                <var>url</var>は潜在的に信頼できるか？</span></a>
                </ol>
            <li>
                <a href="#threat-models-risks"><span class="secno">4</span> <span class="content"> 脅威モデルとリスク </span></a>
                <ol class="toc">
                    <li>
                        <a href="#threat-models"><span class="secno">4.1</span> <span class="content">脅威モデル</span></a>
                        <ol class="toc">
                            <li><a href="#threat-passive"><span class="secno">4.1.1</span> <span
                                        class="content">パッシブネットワーク攻撃者</span></a>
                            <li><a href="#threat-active"><span class="secno">4.1.2</span> <span
                                        class="content">アクティブネットワーク攻撃者</span></a>
                        </ol>
                    <li><a href="#ancestors"><span class="secno">4.2</span> <span class="content">祖先リスク</span></a>
                    <li><a href="#threat-risks"><span class="secno">4.3</span> <span
                                class="content">非セキュアコンテキストに関連するリスク</span></a>
                </ol>
            <li>
                <a href="#security-considerations"><span class="secno">5</span> <span
                        class="content">セキュリティに関する考慮事項</span></a>
                <ol class="toc">
                    <li><a href="#isolation"><span class="secno">5.1</span> <span class="content">不完全な隔離</span></a>
                    <li><a href="#localhost"><span class="secno">5.2</span> <span
                                class="content"><code>localhost</code></span></a>
                </ol>
            <li><a href="#privacy-considerations"><span class="secno">6</span> <span
                        class="content">プライバシーに関する考慮事項</span></a>
            <li>
                <a href="#implementation-considerations"><span class="secno">7</span> <span
                        class="content">実装に関する考慮事項</span></a>
                <ol class="toc">
                    <li><a href="#packaged-applications"><span class="secno">7.1</span> <span
                                class="content">パッケージアプリケーション</span></a>
                    <li><a href="#development-environments"><span class="secno">7.2</span> <span
                                class="content">開発環境</span></a>
                    <li><a href="#new"><span class="secno">7.3</span> <span class="content">新機能の制限</span></a>
                    <li>
                        <a href="#legacy"><span class="secno">7.4</span> <span class="content">レガシー機能の制限</span></a>
                        <ol class="toc">
                            <li><a href="#legacy-example"><span class="secno">7.4.1</span> <span
                                        class="content">例：Geolocation</span></a>
                        </ol>
                </ol>
            <li><a href="#acknowledgements"><span class="secno">8</span> <span class="content">謝辞</span></a>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">この仕様で定義されている用語</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">参照により定義されている用語</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">規範的な参考文献</span></a>
                    <li><a href="#informative"><span class="secno"></span> <span class="content">参考情報</span></a>
                </ol>
        </ol>
    </nav>
    <main>
        <section>
            <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span
                    class="content">導入</span><a class="self-link" href="#intro"></a></h2>
            <p><em>このセクションは規範的ではありません。</em></p>
            <p>ウェブプラットフォームがより有用で強力なアプリケーションを可能にするよう拡張されるにつれて、それらのアプリケーションを可能にする機能が、最低限のセキュリティレベルを満たすコンテキストのみで有効化されることがますます重要になります。TAGによる
                <a data-link-type="biblio" href="#biblio-securing-web" title="Securing the Web">[SECURING-WEB]</a>
                の勧告の拡張として、本書ではウェブ上での機能悪用の脅威モデル（<a href="#threat-models">§ 4.1 脅威モデル</a>
                参照）を説明し、新しい機能を仕様化する文書に組み込むべき規範的な要件の概要を示します（<a href="#implementation-considerations">§ 7 実装上の考慮事項</a>
                参照）。
            </p>
            <p>ここで議論される最も明白な要件は、機密性や個人データへのアクセス権を持つアプリケーションコードが、データの完全性を保証する認証済みチャネルを通じて機密裏に配信されるべきというものです。コードを安全に配信することは、アプリケーションが常にユーザーのセキュリティやプライバシー要件を満たすことを保証するものではありませんが、必要不可欠な前提条件です。
            </p>
            <p>それほど明白でない点としては、認証済みかつ機密性のあるチャネルを通じて配信されるアプリケーションコードだけでは、非セキュアなコンテキストによる強力な機能の利用を制限するには不十分です。<a
                    href="#ancestors">§ 4.2 祖先リスク</a>
                で説明されているように、協力的なフレームは機能に対する、元々堅固であるはずの制限を回避するために悪用される可能性があります。以下に定義されたアルゴリズムは、これらの回避策が困難かつユーザーに明確に認識されるようにします。
            </p>
            <p>以下の例は、続く規範的な本文の要点をまとめたものです：</p>
            <h3 class="heading settled" data-level="1.1" id="examples-top-level"><span class="secno">1.1. </span><span
                    class="content">トップレベルドキュメント</span><a class="self-link" href="#examples-top-level"></a></h3>
            <div class="example" id="example-c84aa709">
                <a class="self-link" href="#example-c84aa709"></a>
                <p><code>http://example.com/</code> が <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context"
                        id="ref-for-top-level-browsing-context">トップレベル閲覧コンテキスト</a>
                    で開かれた場合、認証済みかつ暗号化されたチャネルで配信されていないため、<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                        id="ref-for-secure-context">セキュアコンテキスト</a> ではありません。</p>
                <svg height="200" width="400">
                    <g transform="translate(10,10)">
                        <rect class="non-secure" height="175" width="297" x="0" y="0"></rect>
                        <text transform="translate(10, 20)">http://example.com/</text>
                    </g>
                </svg>
            </div>
            <div class="example" id="example-13e52697">
                <a class="self-link" href="#example-13e52697"></a>
                <p><code>https://example.com/</code> が <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context"
                        id="ref-for-top-level-browsing-context①">トップレベル閲覧コンテキスト</a>
                    で開かれた場合、認証済みかつ暗号化されたチャネルで配信されているため、<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                        id="ref-for-secure-context①">セキュアコンテキスト</a> です。</p>
                <svg height="200" width="400">
                    <g transform="translate(10,10)">
                        <rect class="secure" height="175" width="297" x="0" y="0"></rect>
                        <text transform="translate(10, 20)">https://example.com/</text>
                    </g>
                </svg>
            </div>
            <div class="example" id="example-7e6c3525">
                <a class="self-link" href="#example-7e6c3525"></a>
                <p>セキュアコンテキストが新しいウィンドウで <code>https://example.com/</code> を開いた場合、その新しいウィンドウも自身でセキュアであるためセキュアコンテキストとなります：
                </p>
                <svg height="400" width="400">
                    <g transform="translate(10,10)">
                        <rect class="secure" height="175" width="297" x="0" y="0"></rect>
                        <text transform="translate(10, 20)">https://secure.example.com/</text>
                    </g>
                    <g transform="translate(10,210)">
                        <rect class="secure" height="175" width="297" x="0" y="0"></rect>
                        <text transform="translate(10, 20)">https://another.example.com/</text>
                    </g>
                    <g>
                        <path d="M150, 87 C 200 75, 350 75, 150 287"></path>
                    </g>
                </svg>
            </div>
            <div class="example" id="example-4ec7a126">
                <a class="self-link" href="#example-4ec7a126"></a>
                <p>同様に、非セキュアコンテキストが新しいウィンドウで <code>https://example.com/</code>
                    を開いた場合でも、その新しいウィンドウはセキュアコンテキストとなります（オープナーが非セキュアであっても）：</p>
                <svg height="400" width="400">
                    <g transform="translate(10,10)">
                        <rect class="non-secure" height="175" width="297" x="0" y="0"></rect>
                        <text transform="translate(10, 20)">http://non-secure.example.com/</text>
                    </g>
                    <g transform="translate(10,210)">
                        <rect class="secure" height="175" width="297" x="0" y="0"></rect>
                        <text transform="translate(10, 20)">https://another.example.com/</text>
                    </g>
                    <g>
                        <path d="M150, 87 C 200 75, 350 75, 150 287"></path>
                    </g>
                </svg>
            </div>
            <h3 class="heading settled" data-level="1.2" id="examples-framed"><span class="secno">1.2. </span><span
                    class="content">フレームドドキュメント</span><a class="self-link" href="#examples-framed"></a></h3>
            <p>フレーム化されたドキュメントは、<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                    id="ref-for-secure-context②">セキュアコンテキスト</a>となる場合があります。これは、<a data-link-type="dfn"
                    href="#potentially-trustworthy-origin" id="ref-for-potentially-trustworthy-origin">潜在的に信頼できるオリジン</a>
                から配信され、<em>かつ</em> セキュアコンテキスト内に埋め込まれている場合です。つまり：</p>
            <div class="example" id="example-d781493f">
                <a class="self-link" href="#example-d781493f"></a> <code>https://example.com/</code> が <a
                    data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context"
                    id="ref-for-top-level-browsing-context②">トップレベル閲覧コンテキスト</a> で開かれ、同じく
                <code>https://sub.example.com/</code> をフレームで開いた場合、両方とも認証済みかつ暗号化されたチャネルで配信されているため、<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                    id="ref-for-secure-context④">セキュアコンテキスト</a> です。
                <p></p>
                <svg height="200" width="400">
                    <g transform="translate(10,10)">
                        <rect class="secure" height="175" width="300" x="0" y="0"></rect>
                        <text transform="translate(10, 20)">https://example.com/</text>
                        <g transform="translate(20, 50)">
                            <rect class="secure" height="105" width="250" x="0" y="0"></rect>
                            <text transform="translate(10, 20)">https://sub.example.com/</text>
                        </g>
                    </g>
                </svg>
            </div>
            <div class="example" id="example-824d8fc5">
                <a class="self-link" href="#example-824d8fc5"></a>
                <p>もし <code>https://example.com/</code> が何らかの方法で <code>http://non-secure.example.com/</code>
                    をフレーム化できた場合（例えばユーザーが混在コンテンツのチェックを無効化した場合）、トップレベルのフレームはセキュアのままですが、フレーム内のコンテンツはセキュアコンテキストではありません。
                </p>
                <svg height="200" width="400">
                    <g transform="translate(10,10)">
                        <rect class="secure" height="175" width="300" x="0" y="0"></rect>
                        <text transform="translate(10, 20)">https://example.com/</text>
                        <g transform="translate(20, 50)">
                            <rect class="non-secure" height="105" width="250" x="0" y="0"></rect>
                            <text transform="translate(10, 20)">http://non-secure.example.com/</text>
                        </g>
                    </g>
                </svg>
            </div>
            <div class="example" id="example-ca732a99">
                <a class="self-link" href="#example-ca732a99"></a>
                <p>逆に <code>https://example.com/</code> が <code>http://non-secure.example.com/</code>
                    内でフレーム化されている場合、これはセキュアコンテキスト <em>ではありません</em>。なぜなら、その祖先が認証済みかつ暗号化されたチャネルで配信されていないためです。</p>
                <svg height="200" width="400">
                    <g transform="translate(10,10)">
                        <rect class="non-secure" height="175" width="300" x="0" y="0"></rect>
                        <text transform="translate(10, 20)">http://non-secure.example.com/</text>
                        <g transform="translate(20, 50)">
                            <rect class="non-secure" height="105" width="250" x="0" y="0"></rect>
                            <text transform="translate(10, 20)">https://example.com/</text>
                        </g>
                    </g>
                </svg>
            </div>
            <h3 class="heading settled" data-level="1.3" id="examples-workers"><span class="secno">1.3. </span><span
                    class="content">ウェブワーカー</span><a class="self-link" href="#examples-workers"></a></h3>
            <p>Dedicated Workerはフレーム化されたドキュメントと類似しています。<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                    id="ref-for-secure-context⑤">セキュアコンテキスト</a>となるのは、<a data-link-type="dfn"
                    href="#potentially-trustworthy-origin"
                    id="ref-for-potentially-trustworthy-origin①">潜在的に信頼できるオリジン</a>から配信され、かつ所有者がセキュアコンテキストである場合のみです：</p>
            <div class="example" id="example-81f4526b">
                <a class="self-link" href="#example-81f4526b"></a>
                <p><code>https://example.com/</code> が <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context"
                        id="ref-for-top-level-browsing-context③">トップレベル閲覧コンテキスト</a>
                    で開かれ、<code>https://example.com/worker.js</code> を実行した場合、ドキュメントもワーカーも <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                        id="ref-for-secure-context⑦">セキュアコンテキスト</a> です。</p>
                <svg height="200" width="600">
                    <g transform="translate(10,10)">
                        <rect class="secure" height="175" width="300" x="0" y="0"></rect>
                        <text transform="translate(10, 20)">https://example.com/</text>
                        <g transform="translate(400, 110)">
                            <circle class="secure" r="50"></circle>
                            <text transform="translate(-75, -55)">https://example.com/worker.js</text>
                        </g>
                        <g>
                            <path d="M150, 87 C 200 75, 350 75, 405 110"></path>
                        </g>
                    </g>
                </svg>
            </div>
            <div class="example" id="example-3fea90e7">
                <a class="self-link" href="#example-3fea90e7"></a>
                <p><code>http://non-secure.example.com/</code> が <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context"
                        id="ref-for-top-level-browsing-context④">トップレベル閲覧コンテキスト</a> でフレーム化した
                    <code>https://example.com/</code> が <code>https://example.com/worker.js</code>
                    を実行した場合、フレーム内のドキュメントもワーカーも <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                        id="ref-for-secure-context⑧">セキュアコンテキスト</a> ではありません。
                </p>
                <svg height="200" width="600">
                    <g transform="translate(10,10)">
                        <rect class="non-secure" height="175" width="297" x="0" y="0"></rect>
                        <text transform="translate(10, 20)">http://non-secure.example.com/</text>
                        <g transform="translate(20, 50)">
                            <rect class="non-secure" height="105" width="250" x="0" y="0"></rect>
                            <text transform="translate(10, 20)">https://example.com/</text>
                        </g>
                        <g transform="translate(400, 110)">
                            <circle class="non-secure" r="50"></circle>
                            <text transform="translate(-75, -55)">https://example.com/worker.js</text>
                        </g>
                        <g>
                            <path d="M150, 87 C 200 75, 350 75, 405 110"></path>
                        </g>
                    </g>
                </svg>
            </div>
            <h3 class="heading settled" data-level="1.4" id="examples-shared-workers"><span class="secno">1.4.
                </span><span class="content">共有ワーカー</span><a class="self-link" href="#examples-shared-workers"></a></h3>
            <p>複数のコンテキストが共有ワーカーに接続できます。<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                    id="ref-for-secure-context⑨">セキュアコンテキスト</a>が共有ワーカーを作成した場合、それは <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                    id="ref-for-secure-context①⓪">セキュアコンテキスト</a>となり、他の <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                    id="ref-for-secure-context①①">セキュアコンテキスト</a> のみが接続可能です。非セキュアコンテキストが共有ワーカーを作成した場合、それは
                <em>セキュアコンテキストではありません</em> となり、他の非セキュアコンテキストのみが接続可能です。
            </p>
            <div class="example" id="example-0fa14bd0">
                <a class="self-link" href="#example-0fa14bd0"></a>
                <p><code>https://example.com/</code> が <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context"
                        id="ref-for-top-level-browsing-context⑤">トップレベル閲覧コンテキスト</a> で
                    <code>https://example.com/worker.js</code> を共有ワーカーとして実行した場合、ドキュメントもワーカーもセキュアコンテキストとして扱われます。
                </p>
                <svg height="200" width="600">
                    <g transform="translate(10,10)">
                        <rect class="secure" height="175" width="300" x="0" y="0"></rect>
                        <text transform="translate(10, 20)">https://example.com/</text>
                        <g transform="translate(400, 110)">
                            <circle class="secure" r="50"></circle>
                            <text transform="translate(-75, -55)">https://example.com/worker.js</text>
                        </g>
                        <g>
                            <path d="M150, 87 C 200 75, 350 75, 405 110"></path>
                        </g>
                    </g>
                </svg>
            </div>
            <div class="example" id="example-5d65c447">
                <a class="self-link" href="#example-5d65c447"></a>
                <p>別の <code>https://example.com/</code>（例えば新しいウィンドウ内）が <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context"
                        id="ref-for-top-level-browsing-context⑥">トップレベル閲覧コンテキスト</a>
                    で開かれた場合もセキュアコンテキストなので、セキュアな共有ワーカーへアクセスできます：</p>
                <svg height="400" width="600">
                    <g transform="translate(10,10)">
                        <rect class="secure" height="175" width="300" x="0" y="0"></rect>
                        <text transform="translate(10, 20)">https://example.com/</text>
                        <g transform="translate(400, 110)">
                            <circle class="secure" r="50"></circle>
                            <text transform="translate(-75, -55)">https://example.com/worker.js</text>
                        </g>
                        <g>
                            <path d="M150, 87 C 200 75, 350 75, 405 110"></path>
                        </g>
                    </g>
                    <g transform="translate(10,200)">
                        <rect class="secure" height="175" width="300" x="0" y="0"></rect>
                        <text transform="translate(10, 20)">https://example.com/</text>
                        <g>
                            <path d="M150, 87 C 200 75, 350 75, 405 -80"></path>
                        </g>
                    </g>
                </svg>
            </div>
            <div class="example" id="example-91d60405">
                <a class="self-link" href="#example-91d60405"></a>
                <p><code>https://example.com/</code> が <code>http://non-secure.example.com/</code>
                    内でネストされている場合、セキュアなワーカーには接続できません。なぜならセキュアコンテキストではないからです。</p>
                <svg height="400" width="600">
                    <g transform="translate(10,10)">
                        <rect class="secure" height="175" width="300" x="0" y="0"></rect>
                        <text transform="translate(10, 20)">https://example.com/</text>
                        <g transform="translate(400, 110)">
                            <circle class="secure" r="50"></circle>
                            <text transform="translate(-75, -55)">https://example.com/worker.js</text>
                        </g>
                        <g>
                            <path d="M150, 87 C 200 75, 350 75, 405 110"></path>
                        </g>
                    </g>
                    <g transform="translate(10,200)">
                        <rect class="non-secure" height="175" width="300" x="0" y="0"></rect>
                        <text transform="translate(10, 20)">http://non-secure.example.com/</text>
                        <g transform="translate(20, 50)">
                            <rect class="non-secure" height="105" width="250" x="0" y="0"></rect>
                            <text transform="translate(10, 20)">https://example.com/</text>
                        </g>
                        <g>
                            <path d="M150, 87 C 200 75, 350 75, 405 20"></path>
                            <text class="rejection" transform="translate(405, 20)">X</text>
                        </g>
                    </g>
                </svg>
            </div>
            <div class="example" id="example-7ee428de">
                <a class="self-link" href="#example-7ee428de"></a>
                <p>同様に、<code>https://example.com/</code> が <code>http://non-secure.example.com/</code> 内でネストされている状態で
                    <code>https://example.com/worker.js</code> を共有ワーカーとして実行した場合、ドキュメントもワーカーも非セキュアとして扱われます。
                </p>
                <svg height="400" width="600">
                    <g transform="translate(10,10)">
                        <rect class="non-secure" height="175" width="300" x="0" y="0"></rect>
                        <text transform="translate(10, 20)">http://non-secure.example.com/</text>
                        <g transform="translate(20, 50)">
                            <rect class="non-secure" height="105" width="250" x="0" y="0"></rect>
                            <text transform="translate(10, 20)">https://example.com/</text>
                        </g>
                        <g transform="translate(400, 110)">
                            <circle class="non-secure" r="50"></circle>
                            <text transform="translate(-75, -55)">https://example.com/worker.js</text>
                        </g>
                        <g>
                            <path d="M150, 87 C 200 75, 350 75, 405 110"></path>
                        </g>
                    </g>
                    <g transform="translate(10,200)">
                        <rect class="secure" height="175" width="300" x="0" y="0"></rect>
                        <text transform="translate(10, 20)">https://example.com/</text>
                        <g>
                            <path d="M150, 87 C 200 75, 350 75, 405 20"></path>
                            <text class="rejection" transform="translate(405, 20)">X</text>
                        </g>
                    </g>
                </svg>
            </div>
            <h3 class="heading settled" data-level="1.5" id="examples-service-workers"><span class="secno">1.5.
                </span><span class="content">サービスワーカー</span><a class="self-link" href="#examples-service-workers"></a>
            </h3>
            <p>サービスワーカーは常に <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                    id="ref-for-secure-context①③">セキュアコンテキスト</a> です。<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                    id="ref-for-secure-context①④">セキュアコンテキスト</a> のみが登録でき、クライアントも <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                    id="ref-for-secure-context①⑤">セキュアコンテキスト</a> のみとなります。</p>
            <div class="example" id="example-7c2324e2">
                <a class="self-link" href="#example-7c2324e2"></a>
                <p><code>https://example.com/</code> が <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context"
                        id="ref-for-top-level-browsing-context⑦">トップレベル閲覧コンテキスト</a> で
                    <code>https://example.com/service.js</code> を登録した場合、ドキュメントもサービスワーカーもセキュアコンテキストとして扱われます。
                </p>
                <svg height="200" width="600">
                    <g transform="translate(10,10)">
                        <rect class="secure" height="175" width="300" x="0" y="0"></rect>
                        <text transform="translate(10, 20)">https://example.com/</text>
                        <g transform="translate(400, 110)">
                            <circle class="secure" r="50"></circle>
                            <text transform="translate(-75, -55)">https://example.com/service.js</text>
                        </g>
                        <g>
                            <path d="M150, 87 C 200 75, 350 75, 405 110"></path>
                        </g>
                    </g>
                </svg>
            </div>
        </section>
        <section class="non-normative">
            <h2 class="heading settled" data-level="2" id="framework"><span class="secno">2. </span><span
                    class="content">フレームワーク</span><a class="self-link" href="#framework"></a></h2>
            <p><em>このセクションは規範的ではありません。</em></p>
            <h3 class="heading settled" data-level="2.1" id="integration-idl"><span class="secno">2.1. </span><span
                    class="content">WebIDLとの統合</span><a class="self-link" href="#integration-idl"></a></h3>
            <p>新しい [<code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext">SecureContext</a></code>]
                属性がオペレーターに利用可能となっており、
                これにより、それらが<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-exposed"
                    id="ref-for-dfn-exposed">セキュアコンテキスト</a>のみに
                <span class="content">公開</span>されることが保証されます。
                以下の例が参考になります：
            </p>
            <div class="example" id="example-5703efea">
                <a class="self-link" href="#example-5703efea"></a>
                <pre class="idl highlight def"><c- b>interface</c-> <c- g>ExampleFeature</c-> {
  // この呼び出しはすべてのコンテキストで成功します。
  <c- b>Promise</c-> &lt;<c- b>double</c->> <c- g>calculateNotSoSecretResult</c->();

  // この操作は非セキュアコンテキストでは公開されません。
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext①"><c- g>SecureContext</c-></a>] <c- b>Promise</c->&lt;<c- b>double</c->> <c- g>calculateSecretResult</c->();

  // ここでも同じです：この操作は非セキュアコンテキストでは公開されません。
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext②"><c- g>SecureContext</c-></a>] <c- b>boolean</c-> <c- g>getSecretBoolean</c->();
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext③"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <c- g>SecureFeature</c-> {
  // このインターフェースは非セキュアコンテキストでは公開されません。
  <c- b>Promise</c->&lt;<c- b>any</c->> <c- g>doAmazingThing</c->();
};
</pre>
            </div>
            <p>仕様策定者は新しい機能を定義する際にこの属性の利用を推奨します。</p>
            <h3 class="heading settled" data-level="2.2" id="monkey-patching-html"><span class="secno">2.2. </span><span
                    class="content">HTMLとの統合</span><a class="self-link" href="#monkey-patching-html"></a>
            </h3>
            <h4 class="non-normative heading settled" data-level="2.2.1" id="shared-workers"><span class="secno">2.2.1.
                </span><span class="content">共有ワーカー</span><a class="self-link" href="#shared-workers"></a></h4>
            <p><code
                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/workers.html#sharedworker" id="ref-for-sharedworker">SharedWorker</a></code>
                コンストラクターは、<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                    id="ref-for-secure-context①⑥">セキュアコンテキスト</a>が
                セキュアではないワーカーに接続しようとした場合、または
                非セキュアコンテキストがセキュアなワーカーに接続しようとした場合、"<code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#securityerror" id="ref-for-securityerror">SecurityError</a></code>"
                <code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code>
                例外をスローします。
            </p>
            <h4 class="heading settled" data-level="2.2.2" id="monkey-patching-global-object"><span class="secno">2.2.2.
                </span><span class="content">機能検出</span><a class="self-link" href="#monkey-patching-global-object"></a>
            </h4>
            <p>アプリケーションは、<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                    id="ref-for-secure-context①⑨">セキュアコンテキスト</a>で実行されているかどうかを、<code
                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-issecurecontext" id="ref-for-dom-issecurecontext">isSecureContext</a></code>
                ブール値（<code
                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope" id="ref-for-windoworworkerglobalscope">WindowOrWorkerGlobalScope</a></code>
                上で定義）を確認することで判定できます。
            </p>
            <h4 class="heading settled" data-level="2.2.3" id="is-settings-object-contextually-secure"><span
                    class="secno">2.2.3. </span><span class="content">セキュア・非セキュアコンテキスト</span><a class="self-link"
                    href="#is-settings-object-contextually-secure"></a></h4>
            <p>HTML現行標準は<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/semantics.html#link-options-environment"
                    id="ref-for-link-options-environment">環境</a>が<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                    id="ref-for-secure-context②⓪">セキュアコンテキスト</a>か<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#non-secure-context"
                    id="ref-for-non-secure-context">非セキュアコンテキスト</a>かを定義しています。これは他の仕様で利用される主要な仕組みです。</p>
            <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#global-object"
                    id="ref-for-global-object">グローバルオブジェクト</a>が与えられた場合、仕様はその<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object"
                    id="ref-for-relevant-settings-object">関連設定オブジェクト</a>（これは<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/semantics.html#link-options-environment"
                    id="ref-for-link-options-environment①">環境</a>である） が<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                    id="ref-for-secure-context②①">セキュアコンテキスト</a>かどうかを確認できます。</p>
        </section>
        <section>
            <h2 class="heading settled" data-level="3" id="algorithms"><span class="secno">3. </span><span
                    class="content">アルゴリズム</span><a class="self-link" href="#algorithms"></a></h2>
            <h3 class="heading settled dfn-paneled" data-dfn-type="abstract-op" data-export data-level="3.1"
                data-lt="Is origin potentially trustworthy?" id="is-origin-trustworthy"><span class="secno">3.1.
                </span><span class="content"> <var>origin</var> は潜在的に信頼できるか？ </span><a class="self-link"
                    href="#is-origin-trustworthy" id="ref-for-is-origin-trustworthy"></a></h3>
            <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export
                    id="potentially-trustworthy-origin">潜在的に信頼できるオリジン</dfn>とは、ユーザーエージェントが一般的に安全にデータを配信していると信頼できるオリジンのことです。
            </p>
            <p>このアルゴリズムは、従来の意味で認証・暗号化されていなくても、特定のホストやスキーム、オリジンを潜在的に信頼できるものとして扱います。特に、ユーザーエージェントは <code>file</code>
                URLを潜在的に信頼できるものとして扱うべきです。原則としてユーザーエージェントはローカルファイルを信頼できないものとして扱うこともできますが、<em>実行時にユーザーエージェントが利用できる情報に鑑みると</em>、リソースは安全にディスクからユーザーエージェントへ転送されているように見えます。また、開発者がアプリケーションを公開前に作成する際にも、こうしたリソースを信頼できるものとして扱うことは利便性があります。
            </p>
            <p>ただし、この開発者寄りの利便性にはリスクが伴います。セキュリティを重視するユーザーエージェントは、<code>file</code> を除外するようより厳密な信頼判定を行うこともあります。</p>
            <p>逆に、ユーザーエージェントは <code>app:</code> や <code>chrome-extension:</code>
                など、あらかじめ信頼できると判断できるベンダー固有のURLスキームにもこの信頼を拡張することができます（詳細は <a href="#packaged-applications">§ 7.1
                    パッケージアプリケーション</a> を参照）。</p>
            <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"
                    id="ref-for-concept-origin">origin</a>（<var>origin</var>）が与えられた場合、以下のアルゴリズムは適切に
                "<code>Potentially Trustworthy</code>" または "<code>Not Trustworthy</code>" を返します。</p>
            <ol>
                <li data-md>
                    <p>もし <var>origin</var> が <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque"
                            id="ref-for-concept-origin-opaque">不透明オリジン</a>であれば、"<code>Not Trustworthy</code>" を返す。
                    </p>
                <li data-md>
                    <p class="assertion">アサート: <var>origin</var> は <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-tuple"
                            id="ref-for-concept-origin-tuple">タプルオリジン</a>である。</p>
                <li data-md>
                    <p>もし <var>origin</var> の <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-scheme"
                            id="ref-for-concept-origin-scheme">スキーム</a>が "<code>https</code>" または
                        "<code>wss</code>" なら、"<code>Potentially Trustworthy</code>" を返す。</p>
                    <p class="note" role="note"><span class="marker">注:</span> これは <a data-link-type="dfn"
                            href="https://www.w3.org/TR/mixed-content/#a-priori-authenticated-url"
                            id="ref-for-a-priori-authenticated-url"><i lang="la">a priori</i> 認証済みURL</a>
                        の概念と類似しています（<a data-link-type="biblio" href="#biblio-mix" title="Mixed Content">[MIX]</a> 参照）。
                    </p>
                <li data-md>
                    <p>もし <var>origin</var> の <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-host"
                            id="ref-for-concept-origin-host">ホスト</a>が CIDR表記 <code>127.0.0.0/8</code> または
                        <code>::1/128</code> に一致する場合、"<code>Potentially Trustworthy</code>" を返す。
                    </p>
                <li data-md>
                    <p>ユーザーエージェントが <a data-link-type="biblio" href="#biblio-let-localhost-be-localhost"
                            title="Let &apos;localhost&apos; be localhost.">[let-localhost-be-localhost]</a>
                        の名前解決規則に準拠していて、以下のいずれかが真の場合：</p>
                    <ul>
                        <li data-md>
                            <p><var>origin</var> の <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-host"
                                    id="ref-for-concept-origin-host①">ホスト</a>が "<code>localhost</code>" または
                                "<code>localhost.</code>" である</p>
                        <li data-md>
                            <p><var>origin</var> の <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-host"
                                    id="ref-for-concept-origin-host②">ホスト</a>が "<code>.localhost</code>" または
                                "<code>.localhost.</code>" で終わる</p>
                    </ul>
                    <p>この場合、"<code>Potentially Trustworthy</code>" を返す。</p>
                    <p class="note" role="note"><span class="marker">注:</span> 詳細は <a href="#localhost">§ 5.2
                            localhost</a> を参照してください。</p>
                <li data-md>
                    <p>もし <var>origin</var> の <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-scheme"
                            id="ref-for-concept-origin-scheme①">スキーム</a>が "<code>file</code>"
                        なら、"<code>Potentially Trustworthy</code>" を返す。</p>
                <li data-md>
                    <p>もし <var>origin</var> の <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-scheme"
                            id="ref-for-concept-origin-scheme②">スキーム</a>がユーザーエージェントが認証済みと判断するものであれば、"<code>Potentially Trustworthy</code>"
                        を返す。</p>
                    <p class="note" role="note"><span class="marker">注:</span> 詳細は <a
                            href="#packaged-applications">§ 7.1 パッケージアプリケーション</a> を参照してください。</p>
                <li data-md>
                    <p>もし <var>origin</var> が信頼できるオリジンとして設定されていれば、"<code>Potentially Trustworthy</code>" を返す。</p>
                    <p class="note" role="note"><span class="marker">注:</span> 詳細は <a
                            href="#development-environments">§ 7.2 開発環境</a> を参照してください。</p>
                <li data-md>
                    <p>"<code>Not Trustworthy</code>" を返す。</p>
            </ol>
            <p class="note" role="note"><span class="marker">注:</span> <var>origin</var> の <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-domain"
                    id="ref-for-concept-origin-domain">ドメイン</a>や <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-port"
                    id="ref-for-concept-origin-port">ポート</a>は、<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                    id="ref-for-secure-context②②">セキュアコンテキスト</a>かどうかの判定には影響しません。
            </p>
            <h3 class="heading settled" data-level="3.2" id="is-url-trustworthy"><span class="secno">3.2. </span><span
                    class="content"> <var>url</var> は潜在的に信頼できるか？ </span><a class="self-link"
                    href="#is-url-trustworthy"></a></h3>
            <p><dfn data-dfn-type="dfn" data-export id="potentially-trustworthy-url">潜在的に信頼できるURL<a class="self-link"
                        href="#potentially-trustworthy-url"></a></dfn>とは、作成者からコンテキストを継承するもの（<code>about:blank</code>、<code>about:srcdoc</code>、<code>data</code>）、またはその<a
                    data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin"
                    id="ref-for-concept-url-origin">オリジン</a>が<a data-link-type="dfn"
                    href="#potentially-trustworthy-origin"
                    id="ref-for-potentially-trustworthy-origin②">潜在的に信頼できるオリジン</a>であるものです。
                <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url"
                    id="ref-for-concept-url">URLレコード</a>（<var>url</var>）が与えられた場合、以下のアルゴリズムは適切に"<code>Potentially   Trustworthy</code>"または"<code>Not Trustworthy</code>"を返します：
            </p>
            <ol>
                <li data-md>
                    <p>もし <var>url</var> が "<code>about:blank</code>" または "<code>about:srcdoc</code>"
                        なら、"<code>Potentially       Trustworthy</code>" を返す。</p>
                <li data-md>
                    <p>もし <var>url</var> の <a data-link-type="dfn"
                            href="https://url.spec.whatwg.org/#concept-url-scheme"
                            id="ref-for-concept-url-scheme">スキーム</a>が "<code>data</code>"
                        なら、"<code>Potentially       Trustworthy</code>" を返す。</p>
                <li data-md>
                    <p><a href="#is-origin-trustworthy" id="ref-for-is-origin-trustworthy①">§ 3.1 <var>origin</var>
                            は潜在的に信頼できるか？</a> を <var>url</var> の <a data-link-type="dfn"
                            href="https://url.spec.whatwg.org/#concept-url-origin"
                            id="ref-for-concept-url-origin①">オリジン</a>に対して実行した結果を返す。
                    </p>
                    <p class="note" role="note"><span class="marker">注:</span> <code>blob:</code>
                        URLのオリジンは、それが作成されたコンテキストのオリジンです。したがって、信頼できるオリジンで作成されたblobは自身も潜在的に信頼できます。</p>
            </ol>
        </section>
        <section>
            <h2 class="heading settled" data-level="4" id="threat-models-risks"><span class="secno">4. </span><span
                    class="content"> 脅威モデルとリスク </span><a class="self-link" href="#threat-models-risks"></a></h2>
            <p><em>このセクションは規範的ではありません。</em></p>
            <h3 class="heading settled" data-level="4.1" id="threat-models"><span class="secno">4.1. </span><span
                    class="content">脅威モデル</span><a class="self-link" href="#threat-models"></a></h3>
            <p>認証されていないオリジンに権限を付与することは、ネットワーク攻撃者が存在する場合、実質的にあらゆるオリジンに権限を付与することと同等です。インターネットの現状では、ネットワーク攻撃者が存在すると仮定する必要があります。一般的に、ネットワーク攻撃者は2つのクラスに分類されます：パッシブ型とアクティブ型です。
            </p>
            <h4 class="heading settled" data-level="4.1.1" id="threat-passive"><span class="secno">4.1.1. </span><span
                    class="content">パッシブネットワーク攻撃者</span><a class="self-link" href="#threat-passive"></a></h4>
            <p>「パッシブネットワーク攻撃者」とは、通信の流れを監視できるが、この仕様が対象とするレイヤーで通信内容を改変する能力がない、または改変しないことを選択する当事者を指します。</p>
            <p>このようなネットワークの監視は「通信者の意図を、当事者の同意なしに覆す」ものであり、「最も悪意ある行為者への防御を行うならば、善意とみなされる行為者による監視も許してはならない」ものです。 <a
                    data-link-type="biblio" href="#biblio-rfc7258"
                    title="Pervasive Monitoring Is an Attack">[RFC7258]</a>
                したがって、この文書で定義されるアルゴリズムは、アプリケーション層でのデータのプライバシーを守る仕組みを必要とし、単なる完全性のみでは不十分です。</p>
            <h4 class="heading settled" data-level="4.1.2" id="threat-active"><span class="secno">4.1.2. </span><span
                    class="content">アクティブネットワーク攻撃者</span><a class="self-link" href="#threat-active"></a></h4>
            <p>「アクティブネットワーク攻撃者」は「パッシブネットワーク攻撃者」としての全ての能力に加え、ネットワークを通過するデータを改変・遮断・再送できる能力を持ちます。こうした能力は、公共の無線ネットワークに参加する、または提供するデバイスの侵害から、金融目的でトラフィック操作を行うインターネットサービスプロバイダー（<a
                    data-link-type="biblio" href="#biblio-verizon"
                    title="Verizon looks to target its mobile subscribers with ads">[VERIZON]</a> や <a
                    data-link-type="biblio" href="#biblio-comcast"
                    title="Comcast Wi-Fi serving self-promotional ads via JavaScript injection">[COMCAST]</a>
                などの最近の例）、個人・組織・全人口を標的とする直接的なセキュリティ・プライバシー侵害の意図を持つ者まで、様々なレベルの潜在的な敵対者に利用可能です。</p>
            <h3 class="heading settled" data-level="4.2" id="ancestors"><span class="secno">4.2. </span><span
                    class="content">祖先リスク</span><a class="self-link" href="#ancestors"></a></h3>
            <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                    id="ref-for-secure-context②③">secure context</a>
                アルゴリズムは、あるコンテキストが安全かどうかを判断するために、その全ての祖先を辿ります。では、<code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element">iframe</a></code>
                内に安全に配信されたドキュメントを、それ自体安全とみなさないのはなぜでしょうか？</p>
            <p>簡単に言えば、このモデルは悪用を可能にしてしまうからです。Chrome の <a data-link-type="biblio" href="#biblio-webcryptoapi"
                    title="Web Cryptography API">[WEBCRYPTOAPI]</a> 実装は、API
                を安全なコンテキストに限定する初期の試みでしたが、コンテキストの祖先を確認しませんでした。API を安全に配信されたリソースにロックするだけで十分と考えられていました。しかし、Netflix のような事業者が
                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element①">iframe</a></code>
                や <code>postMessage()</code> を用いたシムを構築し、API
                を非セキュアなコンテキストに公開しました。この制限は、非セキュアなアクセスを少し遅らせただけで、アクセス自体は完全に防げませんでした。
            </p>
            <p>この文書のアルゴリズムは、<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                    id="ref-for-secure-context②④">secure context</a> から非セキュアなコンテキストを完全に隔離するものではありません（<a
                    href="#isolation">§ 5.1 不完全な隔離</a> で議論）。しかし、祖先チェックは、認証・機密性・完全性の保証に対して、かなり堅牢な保護を提供します。</p>
            <h3 class="heading settled" data-level="4.3" id="threat-risks"><span class="secno">4.3. </span><span
                    class="content">非セキュアコンテキストに関連するリスク</span><a class="self-link" href="#threat-risks"></a></h3>
            <p>ユーザーのセキュリティやプライバシーに明確な影響を与えるウェブプラットフォームの機能は、上記の脅威に対抗するために <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                    id="ref-for-secure-context②⑤">secure
                    contexts</a> でのみ利用可能であるべきです。非セキュアコンテキストで利用可能な機能は、ネットワーク攻撃者にこれらの能力を公開するリスクがあります：</p>
            <ol>
                <li> 個人情報、認証情報、支払い手段などの機密データを読み書きできる能力。<a data-link-type="biblio" href="#biblio-credential-management-1"
                        title="Credential Management Level 1">[CREDENTIAL-MANAGEMENT-1]</a> は、機密データを扱う API の一例です。
                <li> ユーザーのデバイスのセンサーからの入力（カメラ、マイク、GPSなど特に重要ですが、加速度計のような一見危険ではないセンサーも含む）を読み書きできる能力。<a
                        data-link-type="biblio" href="#biblio-geolocation-api"
                        title="Geolocation API Specification 2nd Edition">[GEOLOCATION-API]</a> や <a
                        data-link-type="biblio" href="#biblio-mediacapture-streams"
                        title="Media Capture and Streams">[MEDIACAPTURE-STREAMS]</a> は、センサー入力を利用する機能の歴史的な例です。
                <li> ユーザーがアクセス可能な他のデバイスの情報にアクセスできる能力。<a data-link-type="biblio" href="#biblio-discovery-api"
                        title="Network Service Discovery">[DISCOVERY-API]</a> や <a data-link-type="biblio"
                        href="#biblio-web-bluetooth" title="Web Bluetooth">[WEB-BLUETOOTH]</a> が良い例です。
                <li> 一時的または永続的な識別子を利用してユーザーを追跡できる能力。識別子は一定期間後にリセットされるもの（例：<code>window.sessionStorage</code>）、ユーザーが手動でリセットできるもの（例：<a
                        data-link-type="biblio" href="#biblio-encrypted-media"
                        title="Encrypted Media Extensions">[ENCRYPTED-MEDIA]</a>、Cookie <a data-link-type="biblio"
                        href="#biblio-rfc6265" title="HTTP State Management Mechanism">[RFC6265]</a>、<a
                        data-link-type="biblio" href="#biblio-indexeddb"
                        title="Indexed Database API">[IndexedDB]</a>）、またユーザーが簡単にはリセットできないハードウェア特性を含みます。
                <li> オリジンにブラウジングセッションをまたいで持続する状態を導入できる能力。<a data-link-type="biblio" href="#biblio-service-workers"
                        title="Service Workers">[SERVICE-WORKERS]</a> が好例です。
                <li> ユーザーエージェントのネイティブ UI を操作し、ユーザーのコンテキスト認識に関わる情報を削除・隠蔽・改変できる能力。<a data-link-type="biblio"
                        href="#biblio-fullscreen" title="Fullscreen API Standard">[FULLSCREEN]</a> が良い例です。
                <li> ユーザーの許可が必要な機能を導入できる能力。
            </ol>
            <p>このリストは網羅的ではありませんが、仕様を書く・実装する際に考慮すべきリスクの種類を示しています。</p>
            <p class="note" role="note"><span class="marker">注:</span> 機能自体を <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                    id="ref-for-secure-context②⑥">secure contexts</a>
                に制限することは重要ですが、同様にネットワークデータにアクセスできる新しいネットワークアクセス機構や汎用的な関数など、そうした情報を扱う施設も同様に機微なものとして忘れてはなりません。</p>
        </section>
        <section>
            <h2 class="heading settled" data-level="5" id="security-considerations"><span class="secno">5. </span><span
                    class="content">セキュリティに関する考慮事項</span><a class="self-link" href="#security-considerations"></a></h2>
            <h3 class="heading settled" data-level="5.1" id="isolation"><span class="secno">5.1. </span><span
                    class="content">不完全な隔離</span><a class="self-link" href="#isolation"></a></h3>
            <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                    id="ref-for-secure-context②⑦">secure context</a>
                の定義は、同一オリジンの「セキュア」なビューと「非セキュア」なビューを完全に隔離するものではありません。<code>localStorage</code>/<code>sessionStorage</code>
                の内容、<code>storage</code> イベント、<code>BroadcastChannel</code> など、ますます特殊なメカニズムによる情報流出は依然として可能です。</p>
            <h3 class="heading settled" data-level="5.2" id="localhost"><span class="secno">5.2. </span><span
                    class="content"><code>localhost</code></span><a class="self-link" href="#localhost"></a></h3>
            <p><a data-link-type="biblio" href="#biblio-rfc6761" title="Special-Use Domain Names">[RFC6761]</a>
                のセクション6.3は、<code>localhost.</code> および <code>.localhost.</code>
                内の名前の解決を特別なものとし、ローカルリゾルバがそれらを特別に扱うべき/扱ってもよいことを示唆しています。良くも悪くも、リゾルバはこれらの提案を無視し、様々な状況で
                <code>localhost</code> をネットワークに送信することがあります。
            </p>
            <p>このような不確実性を踏まえ、ユーザーエージェントは、<a data-link-type="dfn" href="#potentially-trustworthy-origin"
                    id="ref-for-potentially-trustworthy-origin③">potentially
                    trustworthy origins</a> として localhost 名を扱ってもよいですが、その場合は <a data-link-type="biblio"
                    href="#biblio-let-localhost-be-localhost"
                    title="Let &apos;localhost&apos; be localhost.">[let-localhost-be-localhost]</a> で示された localhost
                名解決ルール（<code>localhost</code> が非ループバックアドレスに決して解決されないことの保証）にも準拠している必要があります。</p>
        </section>
        <section>
            <h2 class="heading settled" data-level="6" id="privacy-considerations"><span class="secno">6. </span><span
                    class="content">プライバシーに関する考慮事項</span><a class="self-link" href="#privacy-considerations"></a></h2>
            <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                    id="ref-for-secure-context②⑧">secure context</a>
                の定義自体はプライバシーへの影響を持ちません。しかし、他のプライバシーに重要な影響を持つ機能が、完全性・認証性・機密性に関する特定の保証を可能にするコンテキストへと自らをロックする仕組みを提供します。</p>
            <p>プライバシーの観点から、仕様作成者は定義する機能に対して secure contexts を要求することを推奨します。</p>
        </section>
        <section>
            <h2 class="heading settled" data-level="7" id="implementation-considerations"><span class="secno">7.
                </span><span class="content">実装に関する考慮事項</span><a class="self-link"
                    href="#implementation-considerations"></a></h2>
            <h3 class="heading settled" data-level="7.1" id="packaged-applications"><span class="secno">7.1.
                </span><span class="content">パッケージアプリケーション</span><a class="self-link" href="#packaged-applications"></a>
            </h3>
            <p>パッケージアプリケーションをサポートするユーザーエージェントは、ユーザーエージェントによって認証された内容を持つ特定のURLスキームを「セキュア」とみなしてもよいです。例えば、FirefoxOSのアプリケーションリソースは
                <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-scheme"
                    id="ref-for-concept-url-scheme①">scheme</a> コンポーネントが <code>app:</code> のURLで参照されます。同様に、Chrome
                の拡張機能やアプリは <code>chrome-extension:</code> スキームで動作します。これらは信頼できるオリジンと合理的に見なすことができます。
            </p>
            <h3 class="heading settled" data-level="7.2" id="development-environments"><span class="secno">7.2.
                </span><span class="content">開発環境</span><a class="self-link" href="#development-environments"></a></h3>
            <p>ループバック以外のホストでステージングサーバーを実行する開発者をサポートするために、ユーザーエージェントは <a href="#is-origin-trustworthy"
                    id="ref-for-is-origin-trustworthy②">§ 3.1 オリジンは信頼できるか？</a> が通常 "<code>Not Trustworthy</code>"
                を返す場合でも、ユーザーが特定のオリジンのセットを信頼できるものとして設定できるようにしてもよいです。</p>
            <h3 class="heading settled" data-level="7.3" id="new"><span class="secno">7.3. </span><span
                    class="content">新機能の制限</span><a class="self-link" href="#new"></a></h3>
            <p><em>このセクションは規範的ではありません。</em></p>
            <p>新しい機能の仕様を書く際には、著者や編集者は <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                    id="ref-for-secure-context②⑨">secure contexts</a> へのチェックで機微なAPIを保護することを推奨します。
                例えば、以下のような記述が良いアプローチとなるでしょう：</p>
            <div class="example" id="example-0fe6ea9a">
                <a class="self-link" href="#example-0fe6ea9a"></a>
                <ol>
                    <li>
                        <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object"
                            id="ref-for-current-settings-object">current settings object</a> が <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                            id="ref-for-secure-context③⓪">secure
                            context</a> で <em>ない</em>場合：
                        <ol>
                            <li> [<i>ここに適切な処理を挿入：Promise を <code>SecurityError</code> で reject
                                    する、エラーコールバックを呼ぶ、許可リクエストを拒否する等</i>]
                        </ol>
                </ol>
            </div>
            <p>また、敏感なAPIを [<code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext④">SecureContext</a></code>]
                属性でガードし、secure contexts にのみ公開することもできます。</p>
            <div class="example" id="example-2aa4b56a">
                <a class="self-link" href="#example-2aa4b56a"></a>
                <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext⑤"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <c- g>SensitiveFeature</c-> {
  <c- b>Promise</c->&lt;<c- b>double</c->> <c- g>getTheSecretDouble</c->();
};

// Or:

<c- b>interface</c-> <c- g>AnotherSensitiveFeature</c-> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext⑥"><c- g>SecureContext</c-></a>] <c- n>void</c-> <c- g>doThatPowerfulThing</c->();
};
</pre>
            </div>
            <section class="non-normative">
                <h3 class="heading settled" data-level="7.4" id="legacy"><span class="secno">7.4. </span><span
                        class="content">レガシー機能の制限</span><a class="self-link" href="#legacy"></a></h3>
                <p><em>このセクションは規範的ではありません。</em></p>
                <p>上記のリストには、現在非セキュアチャネルでウェブに提供されている既存の機能も含まれています。こうしたレガシー機能もできるだけ速やかに <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                        id="ref-for-secure-context③②">secure context</a> を要求するよう修正することを推奨します。<a data-link-type="biblio"
                        href="#biblio-w3c-process" title="W3C Process Document">[W3C-PROCESS]</a></p>
                <ol>
                    <li data-md>
                        <p>その機能が広く実装されていない場合は、仕様を即座に <a data-link-type="dfn"
                                href="https://www.w3.org/2023/Process-20231103/#revising-rec"
                                id="ref-for-revising-rec">修正</a> し、<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                                id="ref-for-secure-context③③">secure contexts</a> の制限を含めることを推奨します。</p>
                    <li data-md>
                        <p>その機能が広く実装されているが、まだ広く利用されていない場合は、既存の実装に <a href="#new">§ 7.3 新機能の制限</a> で述べたようなチェックを追加し、仕様も <a
                                data-link-type="dfn" href="https://www.w3.org/2023/Process-20231103/#revising-rec"
                                id="ref-for-revising-rec①">修正</a> することで、速やかに secure contexts への制限を推奨します。</p>
                    <li data-md>
                        <p>その機能が広く利用されている場合は、既存機能を廃止することを推奨します。仕様には本書の制限に準拠しないことを明記し、準拠した新バージョンの提供と既存利用者の移行計画を策定するべきです。
                        </p>
                </ol>
                <h4 class="heading settled" data-level="7.4.1" id="legacy-example"><span class="secno">7.4.1.
                    </span><span class="content">例：Geolocation</span><a class="self-link" href="#legacy-example"></a>
                </h4>
                <p><a data-link-type="biblio" href="#biblio-geolocation-api"
                        title="Geolocation API Specification 2nd Edition">[GEOLOCATION-API]</a>
                    は、非セキュアなサイトで広く実装・利用されている具体例です。合理的な移行案は次のようになるでしょう：</p>
                <ol>
                    <li data-md>
                        <p><a data-link-type="dfn" href="https://www.w3.org/2023/Process-20231103/#revising-rec"
                                id="ref-for-revising-rec③">仕様の修正</a>により、<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                                id="ref-for-secure-context③⑤">secure context</a> であることを <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/geolocation/#dom-geolocation-getcurrentposition" id="ref-for-dom-geolocation-getcurrentposition">getCurrentPosition()</a></code>
                            および <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/geolocation/#dom-geolocation-watchposition" id="ref-for-dom-geolocation-watchposition">watchPosition()</a></code>
                            のアルゴリズム実行前にチェックするようにします。
                        </p>
                        <p><a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object"
                                id="ref-for-current-settings-object①">current settings object</a> が secure context
                            でない場合はアルゴリズムを中断し、<code>errorCallback</code> に <code>PERMISSION_DENIED</code> の
                            <code>code</code> を渡して呼び出します。
                        </p>
                    <li data-md>
                        <p>ユーザーエージェントは、非セキュアコンテキストでAPIを無効にする明確な意図を特定日に発表し、開発者に警告する（例：コンソールメッセージなど）べきです。</p>
                    <li data-md>
                        <p>「旗日」に向けて、ユーザーエージェントは段階的な廃止計画を発表し、サイト作者がコード修正の必要性を認識できるようにし、ユーザーの安全も確保します。計画には以下のいずれかまたは全てを含めてもよいでしょう：
                        </p>
                        <ol>
                            <li data-md>
                                <p>非セキュアオリジンへの持続的な許可付与の禁止</p>
                            <li data-md>
                                <p>非セキュアオリジンへのAPI精度の低下（例：常に都市レベルのデータのみ返す）</p>
                                <ol start="3">
                                    <li data-md>
                                        <p>リスクをユーザー・サイト作者に通知するUI変更</p>
                                </ol>
                        </ol>
                </ol>
            </section>
        </section>
        <section>
            <h2 class="heading settled" data-level="8" id="acknowledgements"><span class="secno">8. </span><span
                    class="content">謝辞</span><a class="self-link" href="#acknowledgements"></a></h2>
            <p>この文書は主に Chrome セキュリティチームの <a data-link-type="biblio" href="#biblio-powerful-new-features"
                    title="Prefer Secure Origins For Powerful New Features">[POWERFUL-NEW-FEATURES]</a>
                に関する作業を基にしています。Chris Palmer、Ryan Sleevi、David Dorwin は特に積極的に関与しました。また、Anne van Kesteren、Jonathan
                Watt、Boris Zbarsky、Henri Sivonen からも非常に有益なフィードバックをいただきました。</p>
        </section>
    </main>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">この仕様で定義されている用語</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#is-origin-trustworthy">オリジンは潜在的に信頼できるか？</a><span>, § 3</span>
        <li><a href="#potentially-trustworthy-origin">潜在的に信頼できるオリジン</a><span>, § 3.1</span>
        <li><a href="#potentially-trustworthy-url">潜在的に信頼できるURL</a><span>, § 3.2</span>
    </ul>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">参照により定義されている用語</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[GEOLOCATION]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="5e67384e">getCurrentPosition()</span>
                <li><span class="dfn-paneled" id="38485211">watchPosition()</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="a13a702f">SharedWorker</span>
                <li><span class="dfn-paneled" id="5f6d392d">WindowOrWorkerGlobalScope</span>
                <li><span class="dfn-paneled" id="12b8dfc0">current settings object</span>
                <li><span class="dfn-paneled" id="2672c7bc">domain</span>
                <li><span class="dfn-paneled" id="a746ba16">environment</span>
                <li><span class="dfn-paneled" id="4b6086d7">global object</span>
                <li><span class="dfn-paneled" id="77a2ee6e">host</span>
                <li><span class="dfn-paneled" id="87fcd40c">iframe</span>
                <li><span class="dfn-paneled" id="db3b2dfc">isSecureContext</span>
                <li><span class="dfn-paneled" id="5155c2d3">non-secure context</span>
                <li><span class="dfn-paneled" id="b01b1359">opaque origin</span>
                <li><span class="dfn-paneled" id="086e3aff">origin</span>
                <li><span class="dfn-paneled" id="98e31e77">port</span>
                <li><span class="dfn-paneled" id="9c4c1e66">relevant settings object</span>
                <li><span class="dfn-paneled" id="a23d12a9">scheme</span>
                <li><span class="dfn-paneled" id="65181da8">secure context</span>
                <li><span class="dfn-paneled" id="ae2a6342">top-level browsing context</span>
                <li><span class="dfn-paneled" id="1d2aa117">tuple origin</span>
            </ul>
        <li>
            <a data-link-type="biblio">[MIX]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="fab13602">a priori authenticated url</span>
            </ul>
        <li>
            <a data-link-type="biblio">[URL]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="959ad97b">origin</span>
                <li><span class="dfn-paneled" id="3a711be7">scheme</span>
                <li><span class="dfn-paneled" id="a8c7461b">url record</span>
            </ul>
        <li>
            <a data-link-type="biblio">[W3C-PROCESS]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="a8e1631c">仕様の修正</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEBIDL]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="dca2de17">DOMException</span>
                <li><span class="dfn-paneled" id="b75bb3bd">SecureContext</span>
                <li><span class="dfn-paneled" id="c3e881ef">SecurityError</span>
                <li><span class="dfn-paneled" id="25c36209">exposed</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">規範的な参考文献</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren; et al. <a
                href="https://html.spec.whatwg.org/multipage/"><cite>HTML標準</cite></a>．現行標準．URL: <a
                href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-let-localhost-be-localhost">[LET-LOCALHOST-BE-LOCALHOST]
        <dd>Mike West. <a
                href="https://datatracker.ietf.org/doc/html/draft-ietf-dnsop-let-localhost-be-localhost"><cite>Let
                    'localhost' be localhost.</cite></a>．URL: <a
                href="https://datatracker.ietf.org/doc/html/draft-ietf-dnsop-let-localhost-be-localhost">https://datatracker.ietf.org/doc/html/draft-ietf-dnsop-let-localhost-be-localhost</a>
        <dt id="biblio-rfc4632">[RFC4632]
        <dd>V. Fuller; T. Li. <a href="https://www.rfc-editor.org/rfc/rfc4632"><cite>Classless Inter-domain Routing
                    (CIDR): The Internet Address Assignment and Aggregation Plan</cite></a>．2006年8月．Best Current
            Practice．URL: <a href="https://www.rfc-editor.org/rfc/rfc4632">https://www.rfc-editor.org/rfc/rfc4632</a>
        <dt id="biblio-url">[URL]
        <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/"><cite>URL標準</cite></a>．現行標準．URL: <a
                href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
        <dt id="biblio-w3c-process">[W3C-PROCESS]
        <dd>Elika J. Etemad (fantasai); Florian Rivoal. <a href="https://www.w3.org/Consortium/Process/"><cite>W3C
                    プロセス文書</cite></a>．2021年11月2日．URL: <a
                href="https://www.w3.org/Consortium/Process/">https://www.w3.org/Consortium/Process/</a>
        <dt id="biblio-webidl">[WEBIDL]
        <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL標準</cite></a>．現行標準．URL: <a
                href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
    </dl>
    <h3 class="no-num no-ref heading settled" id="informative"><span class="content">参考情報</span><a class="self-link"
            href="#informative"></a></h3>
    <dl>
        <dt id="biblio-comcast">[COMCAST]
        <dd>David Kravets. <a
                href="https://arstechnica.com/tech-policy/2014/09/why-comcasts-javascript-ad-injections-threaten-security-net-neutrality/"><cite>Comcast
                    Wi-FiがJavaScriptインジェクションによる自己宣伝広告を配信</cite></a>．URL: <a
                href="https://arstechnica.com/tech-policy/2014/09/why-comcasts-javascript-ad-injections-threaten-security-net-neutrality/">https://arstechnica.com/tech-policy/2014/09/why-comcasts-javascript-ad-injections-threaten-security-net-neutrality/</a>
        <dt id="biblio-credential-management-1">[CREDENTIAL-MANAGEMENT-1]
        <dd>Mike West. <a href="https://www.w3.org/TR/credential-management-1/"><cite>Credential Management Level
                    1</cite></a>．2019年1月17日．WD．URL: <a
                href="https://www.w3.org/TR/credential-management-1/">https://www.w3.org/TR/credential-management-1/</a>
        <dt id="biblio-discovery-api">[DISCOVERY-API]
        <dd>Rich Tibbett. <a href="https://www.w3.org/TR/discovery-api/"><cite>Network Service
                    Discovery</cite></a>．2017年1月12日．NOTE．URL: <a
                href="https://www.w3.org/TR/discovery-api/">https://www.w3.org/TR/discovery-api/</a>
        <dt id="biblio-encrypted-media">[ENCRYPTED-MEDIA]
        <dd>David Dorwin; et al. <a href="https://www.w3.org/TR/encrypted-media/"><cite>Encrypted Media
                    Extensions</cite></a>．2017年9月18日．REC．URL: <a
                href="https://www.w3.org/TR/encrypted-media/">https://www.w3.org/TR/encrypted-media/</a>
        <dt id="biblio-fullscreen">[FULLSCREEN]
        <dd>Philip Jägenstedt. <a href="https://fullscreen.spec.whatwg.org/"><cite>Fullscreen API標準</cite></a>．現行標準．URL:
            <a href="https://fullscreen.spec.whatwg.org/">https://fullscreen.spec.whatwg.org/</a>
        <dt id="biblio-geolocation">[GEOLOCATION]
        <dd>Marcos Caceres; Reilly Grant. <a href="https://www.w3.org/TR/geolocation/"><cite>Geolocation
                    API</cite></a>．2022年9月1日．REC．URL: <a
                href="https://www.w3.org/TR/geolocation/">https://www.w3.org/TR/geolocation/</a>
        <dt id="biblio-geolocation-api">[GEOLOCATION-API]
        <dd>Andrei Popescu. <a href="https://www.w3.org/TR/geolocation-API/"><cite>Geolocation
                    API仕様第2版</cite></a>．2016年11月8日．REC．URL: <a
                href="https://www.w3.org/TR/geolocation-API/">https://www.w3.org/TR/geolocation-API/</a>
        <dt id="biblio-indexeddb">[IndexedDB]
        <dd>Nikunj Mehta; et al. <a href="https://www.w3.org/TR/IndexedDB/"><cite>Indexed Database
                    API</cite></a>．2015年1月8日．REC．URL: <a
                href="https://www.w3.org/TR/IndexedDB/">https://www.w3.org/TR/IndexedDB/</a>
        <dt id="biblio-mediacapture-streams">[MEDIACAPTURE-STREAMS]
        <dd>Cullen Jennings; et al. <a href="https://www.w3.org/TR/mediacapture-streams/"><cite>Media Capture and
                    Streams</cite></a>．2023年9月21日．CR．URL: <a
                href="https://www.w3.org/TR/mediacapture-streams/">https://www.w3.org/TR/mediacapture-streams/</a>
        <dt id="biblio-mix">[MIX]
        <dd>Emily Stark; Mike West; Carlos IbarraLopez. <a href="https://www.w3.org/TR/mixed-content/"><cite>Mixed
                    Content</cite></a>．2023年2月23日．CR．URL: <a
                href="https://www.w3.org/TR/mixed-content/">https://www.w3.org/TR/mixed-content/</a>
        <dt id="biblio-powerful-new-features">[POWERFUL-NEW-FEATURES]
        <dd>Chrome Security Team. <a
                href="https://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features"><cite>強力な新機能のために安全なオリジンを推奨</cite></a>．URL:
            <a
                href="https://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features">https://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features</a>
        <dt id="biblio-rfc6265">[RFC6265]
        <dd>A. Barth. <a href="https://httpwg.org/specs/rfc6265.html"><cite>HTTP State Management
                    Mechanism</cite></a>．2011年4月．Proposed Standard．URL: <a
                href="https://httpwg.org/specs/rfc6265.html">https://httpwg.org/specs/rfc6265.html</a>
        <dt id="biblio-rfc6761">[RFC6761]
        <dd>S. Cheshire; M. Krochmal. <a
                href="https://www.rfc-editor.org/rfc/rfc6761"><cite>特殊用途ドメイン名</cite></a>．2013年2月．Proposed Standard．URL:
            <a href="https://www.rfc-editor.org/rfc/rfc6761">https://www.rfc-editor.org/rfc/rfc6761</a>
        <dt id="biblio-rfc7258">[RFC7258]
        <dd>S. Farrell; H. Tschofenig. <a
                href="https://www.rfc-editor.org/rfc/rfc7258"><cite>広範な監視は攻撃である</cite></a>．2014年5月．Best Current
            Practice．URL: <a href="https://www.rfc-editor.org/rfc/rfc7258">https://www.rfc-editor.org/rfc/rfc7258</a>
        <dt id="biblio-securing-web">[SECURING-WEB]
        <dd>Mark Nottingham. <a href="https://www.w3.org/2001/tag/doc/web-https"><cite>Webのセキュリティ確保</cite></a>．TAG
            Finding．URL: <a
                href="https://www.w3.org/2001/tag/doc/web-https">https://www.w3.org/2001/tag/doc/web-https</a>
        <dt id="biblio-service-workers">[SERVICE-WORKERS]
        <dd>Jake Archibald; Marijn Kruisselbrink. <a href="https://www.w3.org/TR/service-workers/"><cite>Service
                    Workers</cite></a>．2022年7月12日．CR．URL: <a
                href="https://www.w3.org/TR/service-workers/">https://www.w3.org/TR/service-workers/</a>
        <dt id="biblio-verizon">[VERIZON]
        <dd>Mark Bergen; Alex Kantrowitz. <a
                href="http://adage.com/article/digital/verizon-target-mobile-subscribers-ads/293356/"><cite>Verizonがモバイル加入者を広告でターゲットに</cite></a>．URL:
            <a
                href="http://adage.com/article/digital/verizon-target-mobile-subscribers-ads/293356/">http://adage.com/article/digital/verizon-target-mobile-subscribers-ads/293356/</a>
        <dt id="biblio-web-bluetooth">[WEB-BLUETOOTH]
        <dd>Jeffrey Yasskin. <a href="https://webbluetoothcg.github.io/web-bluetooth/"><cite>Web
                    Bluetooth</cite></a>．Draft Community Group Report．URL: <a
                href="https://webbluetoothcg.github.io/web-bluetooth/">https://webbluetoothcg.github.io/web-bluetooth/</a>
        <dt id="biblio-webcryptoapi">[WEBCRYPTOAPI]
        <dd>Mark Watson. <a href="https://www.w3.org/TR/WebCryptoAPI/"><cite>Web Cryptography
                    API</cite></a>．2017年1月26日．REC．URL: <a
                href="https://www.w3.org/TR/WebCryptoAPI/">https://www.w3.org/TR/WebCryptoAPI/</a>
    </dl>
    <script>/* Boilerplate: script-dfn-panel */
        "use strict";
        {
            const dfnsJson = window.dfnsJson || {};

            function genDfnPanel({ dfnID, url, dfnText, refSections, external }) {
                return mk.aside({
                    class: "dfn-panel",
                    id: `infopanel-for-${dfnID}`,
                    "data-for": dfnID,
                    "aria-labelled-by": `infopaneltitle-for-${dfnID}`,
                },
                    mk.span({ id: `infopaneltitle-for-${dfnID}`, style: "display:none" },
                        `Info about the '${dfnText}' ${external ? "external" : ""} reference.`),
                    mk.a({ href: url }, url),
                    mk.b({}, "Referenced in:"),
                    mk.ul({},
                        ...refSections.map(section =>
                            mk.li({},
                                ...section.refs.map((ref, refI) =>
                                    [
                                        mk.a({
                                            href: `#${ref.id}`
                                        },
                                            (refI == 0) ? section.title : `(${refI + 1})`
                                        ),
                                        " ",
                                    ]
                                ),
                            ),
                        ),
                    ),
                );
            }

            function genAllDfnPanels() {
                for (const panelData of Object.values(window.dfnpanelData)) {
                    const dfnID = panelData.dfnID;
                    const dfn = document.getElementById(dfnID);
                    if (!dfn) {
                        console.log(`Can't find dfn#${dfnID}.`, panelData);
                    } else {
                        const panel = genDfnPanel(panelData);
                        append(document.body, panel);
                        insertDfnPopupAction(dfn, panel)
                    }
                }
            }

            document.addEventListener("DOMContentLoaded", () => {
                genAllDfnPanels();

                // Add popup behavior to all dfns to show the corresponding dfn-panel.
                var dfns = queryAll('.dfn-paneled');
                for (let dfn of dfns) { ; }

                document.body.addEventListener("click", (e) => {
                    // If not handled already, just hide all dfn panels.
                    hideAllDfnPanels();
                });
            })


            function hideAllDfnPanels() {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el => hideDfnPanel(el));
            }

            function showDfnPanel(dfnPanel, dfn) {
                hideAllDfnPanels(); // Only display one at this time.
                dfn.setAttribute("aria-expanded", "true");
                dfnPanel.classList.add("on");
                dfnPanel.style.left = "5px";
                dfnPanel.style.top = "0px";
                const panelRect = dfnPanel.getBoundingClientRect();
                const panelWidth = panelRect.right - panelRect.left;
                if (panelRect.right > document.body.scrollWidth) {
                    // Panel's overflowing the screen.
                    // Just drop it below the dfn and flip it rightward instead.
                    // This still wont' fix things if the screen is *really* wide,
                    // but fixing that's a lot harder without 'anchor()'.
                    dfnPanel.style.top = "1.5em";
                    dfnPanel.style.left = "auto";
                    dfnPanel.style.right = "0px";
                }
            }

            function pinDfnPanel(dfnPanel) {
                // Switch it to "activated" state, which pins it.
                dfnPanel.classList.add("activated");
                dfnPanel.style.left = null;
                dfnPanel.style.top = null;
            }

            function hideDfnPanel(dfnPanel, dfn) {
                if (!dfn) {
                    dfn = document.getElementById(dfnPanel.getAttribute("data-for"));
                }
                dfn.setAttribute("aria-expanded", "false")
                dfnPanel.classList.remove("on");
                dfnPanel.classList.remove("activated");
            }

            function toggleDfnPanel(dfnPanel, dfn) {
                if (dfnPanel.classList.contains("on")) {
                    hideDfnPanel(dfnPanel, dfn);
                } else {
                    showDfnPanel(dfnPanel, dfn);
                }
            }

            function insertDfnPopupAction(dfn, dfnPanel) {
                // Find dfn panel
                const panelWrapper = document.createElement('span');
                panelWrapper.appendChild(dfnPanel);
                panelWrapper.style.position = "relative";
                panelWrapper.style.height = "0px";
                dfn.insertAdjacentElement("afterend", panelWrapper);
                dfn.setAttribute('role', 'button');
                dfn.setAttribute('aria-expanded', 'false')
                dfn.tabIndex = 0;
                dfn.classList.add('has-dfn-panel');
                dfn.addEventListener('click', (event) => {
                    showDfnPanel(dfnPanel, dfn);
                    event.stopPropagation();
                });
                dfn.addEventListener('keypress', (event) => {
                    const kc = event.keyCode;
                    // 32->Space, 13->Enter
                    if (kc == 32 || kc == 13) {
                        toggleDfnPanel(dfnPanel, dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });

                dfnPanel.addEventListener('click', (event) => {
                    if (event.target.nodeName == 'A') {
                        pinDfnPanel(dfnPanel);
                    }
                    event.stopPropagation();
                });

                dfnPanel.addEventListener('keydown', (event) => {
                    if (event.keyCode == 27) { // Escape key
                        hideDfnPanel(dfnPanel, dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                })
            }
        }
    </script>
    <script>/* Boilerplate: script-dfn-panel */
        "use strict";
        {
            const dfnsJson = window.dfnsJson || {};

            function genDfnPanel({ dfnID, url, dfnText, refSections, external }) {
                return mk.aside({
                    class: "dfn-panel",
                    id: `infopanel-for-${dfnID}`,
                    "data-for": dfnID,
                    "aria-labelled-by": `infopaneltitle-for-${dfnID}`,
                },
                    mk.span({ id: `infopaneltitle-for-${dfnID}`, style: "display:none" },
                        `Info about the '${dfnText}' ${external ? "external" : ""} reference.`),
                    mk.a({ href: url }, url),
                    mk.b({}, "Referenced in:"),
                    mk.ul({},
                        ...refSections.map(section =>
                            mk.li({},
                                ...section.refs.map((ref, refI) =>
                                    [
                                        mk.a({
                                            href: `#${ref.id}`
                                        },
                                            (refI == 0) ? section.title : `(${refI + 1})`
                                        ),
                                        " ",
                                    ]
                                ),
                            ),
                        ),
                    ),
                );
            }

            function genAllDfnPanels() {
                for (const panelData of Object.values(window.dfnpanelData)) {
                    const dfnID = panelData.dfnID;
                    const dfn = document.getElementById(dfnID);
                    if (!dfn) {
                        console.log(`Can't find dfn#${dfnID}.`, panelData);
                    } else {
                        const panel = genDfnPanel(panelData);
                        append(document.body, panel);
                        insertDfnPopupAction(dfn, panel)
                    }
                }
            }

            document.addEventListener("DOMContentLoaded", () => {
                genAllDfnPanels();

                // Add popup behavior to all dfns to show the corresponding dfn-panel.
                var dfns = queryAll('.dfn-paneled');
                for (let dfn of dfns) { ; }

                document.body.addEventListener("click", (e) => {
                    // If not handled already, just hide all dfn panels.
                    hideAllDfnPanels();
                });
            })


            function hideAllDfnPanels() {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el => hideDfnPanel(el));
            }

            function showDfnPanel(dfnPanel, dfn) {
                hideAllDfnPanels(); // Only display one at this time.
                dfn.setAttribute("aria-expanded", "true");
                dfnPanel.classList.add("on");
                dfnPanel.style.left = "5px";
                dfnPanel.style.top = "0px";
                const panelRect = dfnPanel.getBoundingClientRect();
                const panelWidth = panelRect.right - panelRect.left;
                if (panelRect.right > document.body.scrollWidth) {
                    // Panel's overflowing the screen.
                    // Just drop it below the dfn and flip it rightward instead.
                    // This still wont' fix things if the screen is *really* wide,
                    // but fixing that's a lot harder without 'anchor()'.
                    dfnPanel.style.top = "1.5em";
                    dfnPanel.style.left = "auto";
                    dfnPanel.style.right = "0px";
                }
            }

            function pinDfnPanel(dfnPanel) {
                // Switch it to "activated" state, which pins it.
                dfnPanel.classList.add("activated");
                dfnPanel.style.left = null;
                dfnPanel.style.top = null;
            }

            function hideDfnPanel(dfnPanel, dfn) {
                if (!dfn) {
                    dfn = document.getElementById(dfnPanel.getAttribute("data-for"));
                }
                dfn.setAttribute("aria-expanded", "false")
                dfnPanel.classList.remove("on");
                dfnPanel.classList.remove("activated");
            }

            function toggleDfnPanel(dfnPanel, dfn) {
                if (dfnPanel.classList.contains("on")) {
                    hideDfnPanel(dfnPanel, dfn);
                } else {
                    showDfnPanel(dfnPanel, dfn);
                }
            }

            function insertDfnPopupAction(dfn, dfnPanel) {
                // Find dfn panel
                const panelWrapper = document.createElement('span');
                panelWrapper.appendChild(dfnPanel);
                panelWrapper.style.position = "relative";
                panelWrapper.style.height = "0px";
                dfn.insertAdjacentElement("afterend", panelWrapper);
                dfn.setAttribute('role', 'button');
                dfn.setAttribute('aria-expanded', 'false')
                dfn.tabIndex = 0;
                dfn.classList.add('has-dfn-panel');
                dfn.addEventListener('click', (event) => {
                    showDfnPanel(dfnPanel, dfn);
                    event.stopPropagation();
                });
                dfn.addEventListener('keypress', (event) => {
                    const kc = event.keyCode;
                    // 32->Space, 13->Enter
                    if (kc == 32 || kc == 13) {
                        toggleDfnPanel(dfnPanel, dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });

                dfnPanel.addEventListener('click', (event) => {
                    if (event.target.nodeName == 'A') {
                        pinDfnPanel(dfnPanel);
                    }
                    event.stopPropagation();
                });

                dfnPanel.addEventListener('keydown', (event) => {
                    if (event.keyCode == 27) { // Escape key
                        hideDfnPanel(dfnPanel, dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                })
            }
        }
    </script>
    <script>/* Boilerplate: script-dfn-panel-json */
        window.dfnpanelData = {};
        window.dfnpanelData['5e67384e'] = { "dfnID": "5e67384e", "url": "https://www.w3.org/TR/geolocation/#dom-geolocation-getcurrentposition", "dfnText": "getCurrentPosition()", "refSections": [{ "refs": [{ "id": "ref-for-dom-geolocation-getcurrentposition" }], "title": "7.4.1. Example: Geolocation" }], "external": true };
        window.dfnpanelData['38485211'] = { "dfnID": "38485211", "url": "https://www.w3.org/TR/geolocation/#dom-geolocation-watchposition", "dfnText": "watchPosition()", "refSections": [{ "refs": [{ "id": "ref-for-dom-geolocation-watchposition" }], "title": "7.4.1. Example: Geolocation" }], "external": true };
        window.dfnpanelData['a13a702f'] = { "dfnID": "a13a702f", "url": "https://html.spec.whatwg.org/multipage/workers.html#sharedworker", "dfnText": "SharedWorker", "refSections": [{ "refs": [{ "id": "ref-for-sharedworker" }], "title": "2.2.1. Shared Workers" }], "external": true };
        window.dfnpanelData['5f6d392d'] = { "dfnID": "5f6d392d", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope", "dfnText": "WindowOrWorkerGlobalScope", "refSections": [{ "refs": [{ "id": "ref-for-windoworworkerglobalscope" }], "title": "2.2.2. Feature Detection" }], "external": true };
        window.dfnpanelData['12b8dfc0'] = { "dfnID": "12b8dfc0", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object", "dfnText": "current settings object", "refSections": [{ "refs": [{ "id": "ref-for-current-settings-object" }], "title": "7.3. Restricting New Features" }, { "refs": [{ "id": "ref-for-current-settings-object\u2460" }], "title": "7.4.1. Example: Geolocation" }], "external": true };
        window.dfnpanelData['2672c7bc'] = { "dfnID": "2672c7bc", "url": "https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-domain", "dfnText": "domain", "refSections": [{ "refs": [{ "id": "ref-for-concept-origin-domain" }], "title": "3.1. \n    Is origin potentially trustworthy?\n  " }], "external": true };
        window.dfnpanelData['a746ba16'] = { "dfnID": "a746ba16", "url": "https://html.spec.whatwg.org/multipage/semantics.html#link-options-environment", "dfnText": "environment", "refSections": [{ "refs": [{ "id": "ref-for-link-options-environment" }, { "id": "ref-for-link-options-environment\u2460" }], "title": "2.2.3. Secure and non-secure contexts" }], "external": true };
        window.dfnpanelData['4b6086d7'] = { "dfnID": "4b6086d7", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#global-object", "dfnText": "global object", "refSections": [{ "refs": [{ "id": "ref-for-global-object" }], "title": "2.2.3. Secure and non-secure contexts" }], "external": true };
        window.dfnpanelData['77a2ee6e'] = { "dfnID": "77a2ee6e", "url": "https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-host", "dfnText": "host", "refSections": [{ "refs": [{ "id": "ref-for-concept-origin-host" }, { "id": "ref-for-concept-origin-host\u2460" }, { "id": "ref-for-concept-origin-host\u2461" }], "title": "3.1. \n    Is origin potentially trustworthy?\n  " }], "external": true };
        window.dfnpanelData['87fcd40c'] = { "dfnID": "87fcd40c", "url": "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element", "dfnText": "iframe", "refSections": [{ "refs": [{ "id": "ref-for-the-iframe-element" }, { "id": "ref-for-the-iframe-element\u2460" }], "title": "4.2. Ancestral Risk" }], "external": true };
        window.dfnpanelData['db3b2dfc'] = { "dfnID": "db3b2dfc", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#dom-issecurecontext", "dfnText": "isSecureContext", "refSections": [{ "refs": [{ "id": "ref-for-dom-issecurecontext" }], "title": "2.2.2. Feature Detection" }], "external": true };
        window.dfnpanelData['5155c2d3'] = { "dfnID": "5155c2d3", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#non-secure-context", "dfnText": "non-secure context", "refSections": [{ "refs": [{ "id": "ref-for-non-secure-context" }], "title": "2.2.3. Secure and non-secure contexts" }], "external": true };
        window.dfnpanelData['b01b1359'] = { "dfnID": "b01b1359", "url": "https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque", "dfnText": "opaque origin", "refSections": [{ "refs": [{ "id": "ref-for-concept-origin-opaque" }], "title": "3.1. \n    Is origin potentially trustworthy?\n  " }], "external": true };
        window.dfnpanelData['086e3aff'] = { "dfnID": "086e3aff", "url": "https://html.spec.whatwg.org/multipage/browsers.html#concept-origin", "dfnText": "origin", "refSections": [{ "refs": [{ "id": "ref-for-concept-origin" }], "title": "3.1. \n    Is origin potentially trustworthy?\n  " }], "external": true };
        window.dfnpanelData['98e31e77'] = { "dfnID": "98e31e77", "url": "https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-port", "dfnText": "port", "refSections": [{ "refs": [{ "id": "ref-for-concept-origin-port" }], "title": "3.1. \n    Is origin potentially trustworthy?\n  " }], "external": true };
        window.dfnpanelData['9c4c1e66'] = { "dfnID": "9c4c1e66", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object", "dfnText": "relevant settings object", "refSections": [{ "refs": [{ "id": "ref-for-relevant-settings-object" }], "title": "2.2.3. Secure and non-secure contexts" }], "external": true };
        window.dfnpanelData['a23d12a9'] = { "dfnID": "a23d12a9", "url": "https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-scheme", "dfnText": "scheme", "refSections": [{ "refs": [{ "id": "ref-for-concept-origin-scheme" }, { "id": "ref-for-concept-origin-scheme\u2460" }, { "id": "ref-for-concept-origin-scheme\u2461" }], "title": "3.1. \n    Is origin potentially trustworthy?\n  " }], "external": true };
        window.dfnpanelData['65181da8'] = { "dfnID": "65181da8", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#secure-context", "dfnText": "secure context", "refSections": [{ "refs": [{ "id": "ref-for-secure-context" }, { "id": "ref-for-secure-context\u2460" }], "title": "1.1. Top-level Documents" }, { "refs": [{ "id": "ref-for-secure-context\u2461" }, { "id": "ref-for-secure-context\u2462" }, { "id": "ref-for-secure-context\u2463" }], "title": "1.2. Framed Documents" }, { "refs": [{ "id": "ref-for-secure-context\u2464" }, { "id": "ref-for-secure-context\u2465" }, { "id": "ref-for-secure-context\u2466" }, { "id": "ref-for-secure-context\u2467" }], "title": "1.3. Web Workers" }, { "refs": [{ "id": "ref-for-secure-context\u2468" }, { "id": "ref-for-secure-context\u2460\u24ea" }, { "id": "ref-for-secure-context\u2460\u2460" }, { "id": "ref-for-secure-context\u2460\u2461" }], "title": "1.4. Shared Workers" }, { "refs": [{ "id": "ref-for-secure-context\u2460\u2462" }, { "id": "ref-for-secure-context\u2460\u2463" }, { "id": "ref-for-secure-context\u2460\u2464" }], "title": "1.5. Service Workers" }, { "refs": [{ "id": "ref-for-secure-context\u2460\u2465" }, { "id": "ref-for-secure-context\u2460\u2466" }, { "id": "ref-for-secure-context\u2460\u2467" }], "title": "2.2.1. Shared Workers" }, { "refs": [{ "id": "ref-for-secure-context\u2460\u2468" }], "title": "2.2.2. Feature Detection" }, { "refs": [{ "id": "ref-for-secure-context\u2461\u24ea" }, { "id": "ref-for-secure-context\u2461\u2460" }], "title": "2.2.3. Secure and non-secure contexts" }, { "refs": [{ "id": "ref-for-secure-context\u2461\u2461" }], "title": "3.1. \n    Is origin potentially trustworthy?\n  " }, { "refs": [{ "id": "ref-for-secure-context\u2461\u2462" }, { "id": "ref-for-secure-context\u2461\u2463" }], "title": "4.2. Ancestral Risk" }, { "refs": [{ "id": "ref-for-secure-context\u2461\u2464" }, { "id": "ref-for-secure-context\u2461\u2465" }], "title": "4.3. Risks associated with non-secure contexts" }, { "refs": [{ "id": "ref-for-secure-context\u2461\u2466" }], "title": "5.1. Incomplete Isolation" }, { "refs": [{ "id": "ref-for-secure-context\u2461\u2467" }], "title": "6. Privacy Considerations" }, { "refs": [{ "id": "ref-for-secure-context\u2461\u2468" }, { "id": "ref-for-secure-context\u2462\u24ea" }, { "id": "ref-for-secure-context\u2462\u2460" }], "title": "7.3. Restricting New Features" }, { "refs": [{ "id": "ref-for-secure-context\u2462\u2461" }, { "id": "ref-for-secure-context\u2462\u2462" }, { "id": "ref-for-secure-context\u2462\u2463" }], "title": "7.4. Restricting Legacy Features" }, { "refs": [{ "id": "ref-for-secure-context\u2462\u2464" }, { "id": "ref-for-secure-context\u2462\u2465" }], "title": "7.4.1. Example: Geolocation" }], "external": true };
        window.dfnpanelData['ae2a6342'] = { "dfnID": "ae2a6342", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context", "dfnText": "top-level browsing context", "refSections": [{ "refs": [{ "id": "ref-for-top-level-browsing-context" }, { "id": "ref-for-top-level-browsing-context\u2460" }], "title": "1.1. Top-level Documents" }, { "refs": [{ "id": "ref-for-top-level-browsing-context\u2461" }], "title": "1.2. Framed Documents" }, { "refs": [{ "id": "ref-for-top-level-browsing-context\u2462" }, { "id": "ref-for-top-level-browsing-context\u2463" }], "title": "1.3. Web Workers" }, { "refs": [{ "id": "ref-for-top-level-browsing-context\u2464" }, { "id": "ref-for-top-level-browsing-context\u2465" }], "title": "1.4. Shared Workers" }, { "refs": [{ "id": "ref-for-top-level-browsing-context\u2466" }], "title": "1.5. Service Workers" }], "external": true };
        window.dfnpanelData['1d2aa117'] = { "dfnID": "1d2aa117", "url": "https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-tuple", "dfnText": "tuple origin", "refSections": [{ "refs": [{ "id": "ref-for-concept-origin-tuple" }], "title": "3.1. \n    Is origin potentially trustworthy?\n  " }], "external": true };
        window.dfnpanelData['fab13602'] = { "dfnID": "fab13602", "url": "https://www.w3.org/TR/mixed-content/#a-priori-authenticated-url", "dfnText": "a priori authenticated url", "refSections": [{ "refs": [{ "id": "ref-for-a-priori-authenticated-url" }], "title": "3.1. \n    Is origin potentially trustworthy?\n  " }], "external": true };
        window.dfnpanelData['959ad97b'] = { "dfnID": "959ad97b", "url": "https://url.spec.whatwg.org/#concept-url-origin", "dfnText": "origin", "refSections": [{ "refs": [{ "id": "ref-for-concept-url-origin" }, { "id": "ref-for-concept-url-origin\u2460" }], "title": "3.2. \n    Is url potentially trustworthy?\n  " }], "external": true };
        window.dfnpanelData['3a711be7'] = { "dfnID": "3a711be7", "url": "https://url.spec.whatwg.org/#concept-url-scheme", "dfnText": "scheme", "refSections": [{ "refs": [{ "id": "ref-for-concept-url-scheme" }], "title": "3.2. \n    Is url potentially trustworthy?\n  " }, { "refs": [{ "id": "ref-for-concept-url-scheme\u2460" }], "title": "7.1. Packaged Applications" }], "external": true };
        window.dfnpanelData['a8c7461b'] = { "dfnID": "a8c7461b", "url": "https://url.spec.whatwg.org/#concept-url", "dfnText": "url record", "refSections": [{ "refs": [{ "id": "ref-for-concept-url" }], "title": "3.2. \n    Is url potentially trustworthy?\n  " }], "external": true };
        window.dfnpanelData['a8e1631c'] = { "dfnID": "a8e1631c", "url": "https://www.w3.org/2023/Process-20231103/#revising-rec", "dfnText": "modify a specification", "refSections": [{ "refs": [{ "id": "ref-for-revising-rec" }, { "id": "ref-for-revising-rec\u2460" }, { "id": "ref-for-revising-rec\u2461" }], "title": "7.4. Restricting Legacy Features" }, { "refs": [{ "id": "ref-for-revising-rec\u2462" }], "title": "7.4.1. Example: Geolocation" }], "external": true };
        window.dfnpanelData['dca2de17'] = { "dfnID": "dca2de17", "url": "https://webidl.spec.whatwg.org/#idl-DOMException", "dfnText": "DOMException", "refSections": [{ "refs": [{ "id": "ref-for-idl-DOMException" }], "title": "2.2.1. Shared Workers" }], "external": true };
        window.dfnpanelData['b75bb3bd'] = { "dfnID": "b75bb3bd", "url": "https://webidl.spec.whatwg.org/#SecureContext", "dfnText": "SecureContext", "refSections": [{ "refs": [{ "id": "ref-for-SecureContext" }, { "id": "ref-for-SecureContext\u2460" }, { "id": "ref-for-SecureContext\u2461" }, { "id": "ref-for-SecureContext\u2462" }], "title": "2.1. Integration with WebIDL" }, { "refs": [{ "id": "ref-for-SecureContext\u2463" }, { "id": "ref-for-SecureContext\u2464" }, { "id": "ref-for-SecureContext\u2465" }], "title": "7.3. Restricting New Features" }], "external": true };
        window.dfnpanelData['c3e881ef'] = { "dfnID": "c3e881ef", "url": "https://webidl.spec.whatwg.org/#securityerror", "dfnText": "SecurityError", "refSections": [{ "refs": [{ "id": "ref-for-securityerror" }], "title": "2.2.1. Shared Workers" }], "external": true };
        window.dfnpanelData['25c36209'] = { "dfnID": "25c36209", "url": "https://webidl.spec.whatwg.org/#dfn-exposed", "dfnText": "exposed", "refSections": [{ "refs": [{ "id": "ref-for-dfn-exposed" }], "title": "2.1. Integration with WebIDL" }], "external": true };
        window.dfnpanelData['is-origin-trustworthy'] = { "dfnID": "is-origin-trustworthy", "url": "#is-origin-trustworthy", "dfnText": "3.1. \n    Is origin potentially trustworthy?\n  ", "refSections": [{ "refs": [{ "id": "ref-for-is-origin-trustworthy" }], "title": "3.1. \n    Is origin potentially trustworthy?\n  " }, { "refs": [{ "id": "ref-for-is-origin-trustworthy" }], "title": "3.2. \n    Is url potentially trustworthy?\n  " }, { "refs": [{ "id": "ref-for-is-origin-trustworthy" }], "title": "7.2. Development Environments" }], "external": false };
        window.dfnpanelData['potentially-trustworthy-origin'] = { "dfnID": "potentially-trustworthy-origin", "url": "#potentially-trustworthy-origin", "dfnText": "potentially trustworthy origin", "refSections": [{ "refs": [{ "id": "ref-for-potentially-trustworthy-origin" }], "title": "1.2. Framed Documents" }, { "refs": [{ "id": "ref-for-potentially-trustworthy-origin\u2460" }], "title": "1.3. Web Workers" }, { "refs": [{ "id": "ref-for-potentially-trustworthy-origin\u2461" }], "title": "3.2. \n    Is url potentially trustworthy?\n  " }, { "refs": [{ "id": "ref-for-potentially-trustworthy-origin\u2462" }], "title": "5.2. localhost" }], "external": false };
    </script>
    <script>/* Boilerplate: script-dom-helper */
        function query(sel) { return document.querySelector(sel); }

        function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

        function iter(obj) {
            if (!obj) return [];
            var it = obj[Symbol.iterator];
            if (it) return it;
            return Object.entries(obj);
        }

        function mk(tagname, attrs, ...children) {
            const el = document.createElement(tagname);
            for (const [k, v] of iter(attrs)) {
                if (k.slice(0, 3) == "_on") {
                    const eventName = k.slice(3);
                    el.addEventListener(eventName, v);
                } else if (k[0] == "_") {
                    // property, not attribute
                    el[k.slice(1)] = v;
                } else {
                    if (v === false || v == null) {
                        continue;
                    } else if (v === true) {
                        el.setAttribute(k, "");
                        continue;
                    } else {
                        el.setAttribute(k, v);
                    }
                }
            }
            append(el, children);
            return el;
        }

        /* Create shortcuts for every known HTML element */
        [
            "a",
            "abbr",
            "acronym",
            "address",
            "applet",
            "area",
            "article",
            "aside",
            "audio",
            "b",
            "base",
            "basefont",
            "bdo",
            "big",
            "blockquote",
            "body",
            "br",
            "button",
            "canvas",
            "caption",
            "center",
            "cite",
            "code",
            "col",
            "colgroup",
            "datalist",
            "dd",
            "del",
            "details",
            "dfn",
            "dialog",
            "div",
            "dl",
            "dt",
            "em",
            "embed",
            "fieldset",
            "figcaption",
            "figure",
            "font",
            "footer",
            "form",
            "frame",
            "frameset",
            "head",
            "header",
            "h1",
            "h2",
            "h3",
            "h4",
            "h5",
            "h6",
            "hr",
            "html",
            "i",
            "iframe",
            "img",
            "input",
            "ins",
            "kbd",
            "label",
            "legend",
            "li",
            "link",
            "main",
            "map",
            "mark",
            "meta",
            "meter",
            "nav",
            "nobr",
            "noscript",
            "object",
            "ol",
            "optgroup",
            "option",
            "output",
            "p",
            "param",
            "pre",
            "progress",
            "q",
            "s",
            "samp",
            "script",
            "section",
            "select",
            "small",
            "source",
            "span",
            "strike",
            "strong",
            "style",
            "sub",
            "summary",
            "sup",
            "table",
            "tbody",
            "td",
            "template",
            "textarea",
            "tfoot",
            "th",
            "thead",
            "time",
            "title",
            "tr",
            "u",
            "ul",
            "var",
            "video",
            "wbr",
            "xmp",
        ].forEach(tagname => {
            mk[tagname] = (...args) => mk(tagname, ...args);
        });

        function* nodesFromChildList(children) {
            for (const child of children.flat(Infinity)) {
                if (child instanceof Node) {
                    yield child;
                } else {
                    yield new Text(child);
                }
            }
        }
        function append(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                if (el instanceof Node) el.appendChild(child);
                else el.push(child);
            }
            return el;
        }

        function insertAfter(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                el.parentNode.insertBefore(child, el.nextSibling);
            }
            return el;
        }

        function clearContents(el) {
            el.innerHTML = "";
            return el;
        }

        function parseHTML(markup) {
            if (markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
                const doc = document.implementation.createHTMLDocument("");
                doc.documentElement.innerHTML = markup;
                return doc;
            } else {
                const el = mk.template({});
                el.innerHTML = markup;
                return el.content;
            }
        }
    </script>
    <script src="https://htmlspecs.com/dropdown.js"></script>