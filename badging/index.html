<!DOCTYPE html>
<html lang="ja-JP">

<head>
    <meta charset="utf-8">
    <meta name="generator" content="ReSpec 35.5.1">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        span.example-title {
            text-transform: none
        }

        :is(aside, div).example,
        div.illegal-example {
            padding: .5em;
            margin: 1em 0;
            position: relative;
            clear: both
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: #000
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff
        }
    </style>
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-color: var(--warning-border, #f11);
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
            background: var(--warning-bg, #fbe9e9);
            color: #000;
            color: var(--text, #000)
        }

        .warning-title:before {
            content: "⚠";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        pre.idl {
            padding: 1em;
            position: relative
        }

        pre.idl>code {
            color: #000;
            color: var(--text, #000)
        }

        @media print {
            pre.idl {
                white-space: pre-wrap
            }
        }

        .idlHeader {
            display: block;
            width: 150px;
            background: #8ccbf2;
            background: var(--def-border, #8ccbf2);
            color: #fff;
            color: var(--defrow-border, #fff);
            font-family: sans-serif;
            font-weight: 700;
            margin: -1em 0 1em -1em;
            height: 28px;
            line-height: 28px
        }

        .idlHeader a.self-link {
            margin-left: .3cm;
            text-decoration: none;
            border-bottom: none;
            color: inherit
        }

        .idlID {
            font-weight: 700;
            color: #005a9c
        }

        .idlType {
            color: #005a9c
        }

        .idlName {
            color: #ff4500
        }

        .idlName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none
        }

        a.idlEnumItem {
            color: #000;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        .idlSuperclass {
            font-style: italic;
            color: #005a9c
        }

        .idlDefaultValue,
        .idlParamName {
            font-style: italic
        }

        .extAttr {
            color: #666
        }

        .idlSectionComment {
            color: gray
        }

        .idlIncludes a {
            font-weight: 700
        }

        .respec-button-copy-paste:focus {
            text-decoration: none;
            border-color: #51a7e8;
            outline: 0;
            box-shadow: 0 0 5px rgba(81, 167, 232, .5)
        }

        .respec-button-copy-paste:is(:focus:hover, .selected:focus) {
            border-color: #51a7e8
        }

        .respec-button-copy-paste:is(:hover, :active, .zeroclipboard-is-hover, .zeroclipboard-is-active) {
            text-decoration: none;
            background-color: #ddd;
            background-image: linear-gradient(#eee, #ddd);
            border-color: #ccc
        }

        .respec-button-copy-paste:is(:active, .selected, .zeroclipboard-is-active) {
            background-color: #dcdcdc;
            background-image: none;
            border-color: #b5b5b5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, .15)
        }

        .respec-button-copy-paste.selected:hover {
            background-color: #cfcfcf
        }

        .respec-button-copy-paste:is(:disabled, :disabled:hover, .disabled, .disabled:hover) {
            color: rgba(102, 102, 102, .5);
            cursor: default;
            background-color: rgba(229, 229, 229, .5);
            background-image: none;
            border-color: rgba(197, 197, 197, .5);
            box-shadow: none
        }

        @media print {
            .respec-button-copy-paste {
                visibility: hidden
            }
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            background: var(--indextable-hover-bg, #fff);
            color: #000;
            color: var(--text, #000);
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 1em 3em -.4em var(--tocsidebar-shadow, rgba(0, 0, 0, .3)), 0 0 1px 1px var(--tocsidebar-shadow, rgba(0, 0, 0, .05));
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            border-bottom-color: var(--indextable-hover-bg, #fff);
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1;
            border-bottom-color: var(--indextable-hover-bg, #a2a9b1)
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            color: var(--text, #000);
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333;
            color: var(--text, #333)
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>


    <title>バッジAPI</title>

    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: italic
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>


    <meta name="color-scheme" content="light">
    <style>
        .mdn {
            font-size: .75em;
            position: absolute;
            right: .3em;
            min-width: 0;
            margin-top: 3rem
        }

        .mdn details {
            width: 100%;
            margin: 1px 0;
            position: relative;
            z-index: 10;
            box-sizing: border-box;
            padding: .4em;
            padding-top: 0
        }

        .mdn details[open] {
            min-width: 25ch;
            max-width: 32ch;
            background: #fff;
            background: var(--indextable-hover-bg, #fff);
            color: #000;
            color: var(--indextable-hover-text, #000);
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 1em 3em -.4em var(--tocsidebar-shadow, rgba(0, 0, 0, .3)), 0 0 1px 1px var(--tocsidebar-shadow, rgba(0, 0, 0, .05));
            border-radius: 2px;
            z-index: 11;
            margin-bottom: .4em
        }

        .mdn summary {
            text-align: right;
            cursor: default;
            margin-right: -.4em
        }

        .mdn summary span {
            font-family: zillaslab, Palatino, "Palatino Linotype", serif;
            color: #fff;
            color: var(--bg, #fff);
            background-color: #000;
            background-color: var(--text, #000);
            display: inline-block;
            padding: 3px
        }

        .mdn a {
            display: inline-block;
            word-break: break-all
        }

        .mdn p {
            margin: 0
        }

        .mdn .engines-all {
            color: #058b00
        }

        .mdn .engines-some {
            color: #b00
        }

        .mdn table {
            width: 100%;
            font-size: .9em
        }

        .mdn td {
            border: none
        }

        .mdn td:nth-child(2) {
            text-align: right
        }

        .mdn .nosupportdata {
            font-style: italic;
            margin: 0
        }

        .mdn tr::before {
            content: "";
            display: table-cell;
            width: 1.5em;
            height: 1.5em;
            background: no-repeat center center/contain;
            font-size: .75em
        }

        .mdn .no,
        .mdn .unknown {
            color: #ccc;
            filter: grayscale(100%)
        }

        .mdn .no::before,
        .mdn .unknown::before {
            opacity: .5
        }

        .mdn .chrome::before,
        .mdn .chrome_android::before {
            background-image: url(https://www.w3.org/assets/logos/browser-logos/chrome/chrome.svg)
        }

        .mdn .edge::before,
        .mdn .edge_mobile::before {
            background-image: url(https://www.w3.org/assets/logos/browser-logos/edge/edge.svg)
        }

        .mdn .firefox::before,
        .mdn .firefox_android::before {
            background-image: url(https://www.w3.org/assets/logos/browser-logos/firefox/firefox.svg)
        }

        .mdn .opera::before,
        .mdn .opera_android::before {
            background-image: url(https://www.w3.org/assets/logos/browser-logos/opera/opera.svg)
        }

        .mdn .safari::before {
            background-image: url(https://www.w3.org/assets/logos/browser-logos/safari/safari.svg)
        }

        .mdn .safari_ios::before {
            background-image: url(https://www.w3.org/assets/logos/browser-logos/safari-ios/safari-ios.svg)
        }

        .mdn .samsunginternet_android::before {
            background-image: url(https://www.w3.org/assets/logos/browser-logos/samsung-internet/samsung-internet.svg)
        }

        .mdn .webview_android::before {
            background-image: url(https://www.w3.org/assets/logos/browser-logos/android-webview/android-webview.png)
        }
    </style>
    <meta name="revision" content="3a87869f233821fd86cc370cc6f7744355553523">
    <meta name="description"
        content="この仕様は、インストール済みのウェブアプリケーションがアプリケーションバッジを設定できるAPIを定義します。アプリケーションバッジは通常、デバイスのホーム画面やアプリケーションドックでアプリのアイコンの横に表示されます。">
    <link rel="canonical" href="https://www.w3.org/TR/badging/">
    <style>
        .hljs {
            --base: #fafafa;
            --mono-1: #383a42;
            --mono-2: #686b77;
            --mono-3: #717277;
            --hue-1: #0b76c5;
            --hue-2: #336ae3;
            --hue-3: #a626a4;
            --hue-4: #42803c;
            --hue-5: #ca4706;
            --hue-5-2: #c91243;
            --hue-6: #986801;
            --hue-6-2: #9a6a01
        }

        @media (prefers-color-scheme:dark) {
            .hljs {
                --base: #282c34;
                --mono-1: #abb2bf;
                --mono-2: #818896;
                --mono-3: #5c6370;
                --hue-1: #56b6c2;
                --hue-2: #61aeee;
                --hue-3: #c678dd;
                --hue-4: #98c379;
                --hue-5: #e06c75;
                --hue-5-2: #be5046;
                --hue-6: #d19a66;
                --hue-6-2: #e6c07b
            }
        }

        .hljs {
            display: block;
            overflow-x: auto;
            padding: .5em;
            color: #383a42;
            color: var(--mono-1, #383a42);
            background: #fafafa;
            background: var(--base, #fafafa)
        }

        .hljs-comment,
        .hljs-quote {
            color: #717277;
            color: var(--mono-3, #717277);
            font-style: italic
        }

        .hljs-doctag,
        .hljs-formula,
        .hljs-keyword {
            color: #a626a4;
            color: var(--hue-3, #a626a4)
        }

        .hljs-deletion,
        .hljs-name,
        .hljs-section,
        .hljs-selector-tag,
        .hljs-subst {
            color: #ca4706;
            color: var(--hue-5, #ca4706);
            font-weight: 700
        }

        .hljs-literal {
            color: #0b76c5;
            color: var(--hue-1, #0b76c5)
        }

        .hljs-addition,
        .hljs-attribute,
        .hljs-meta-string,
        .hljs-regexp,
        .hljs-string {
            color: #42803c;
            color: var(--hue-4, #42803c)
        }

        .hljs-built_in,
        .hljs-class .hljs-title {
            color: #9a6a01;
            color: var(--hue-6-2, #9a6a01)
        }

        .hljs-attr,
        .hljs-number,
        .hljs-selector-attr,
        .hljs-selector-class,
        .hljs-selector-pseudo,
        .hljs-template-variable,
        .hljs-type,
        .hljs-variable {
            color: #986801;
            color: var(--hue-6, #986801)
        }

        .hljs-bullet,
        .hljs-link,
        .hljs-meta,
        .hljs-selector-id,
        .hljs-symbol,
        .hljs-title {
            color: #336ae3;
            color: var(--hue-2, #336ae3)
        }

        .hljs-emphasis {
            font-style: italic
        }

        .hljs-strong {
            font-weight: 700
        }

        .hljs-link {
            text-decoration: underline
        }
    </style>
    <style>
        var:hover {
            text-decoration: underline;
            cursor: pointer
        }

        var.respec-hl {
            color: var(--color, #000);
            background-color: var(--bg-color);
            box-shadow: 0 0 0 2px var(--bg-color)
        }

        @media (prefers-color-scheme:dark) {
            var.respec-hl {
                filter: saturate(.9) brightness(.9)
            }
        }

        var.respec-hl-c1 {
            --bg-color: #f4d200
        }

        var.respec-hl-c2 {
            --bg-color: #ff87a2
        }

        var.respec-hl-c3 {
            --bg-color: #96e885
        }

        var.respec-hl-c4 {
            --bg-color: #3eeed2
        }

        var.respec-hl-c5 {
            --bg-color: #eacfb6
        }

        var.respec-hl-c6 {
            --bg-color: #82ddff
        }

        var.respec-hl-c7 {
            --bg-color: #ffbcf2
        }

        @media print {
            var.respec-hl {
                background: 0 0;
                color: #000;
                box-shadow: unset
            }
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #222
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #222;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "specStatus": "WD",
  "previousPublishDate": "2023-05-03",
  "shortName": "badging",
  "prevVersion": "FPWD",
  "previousMaturity": "WD",
  "github": {
    "repoURL": "w3c/badging",
    "branch": "main"
  },
  "group": "webapps",
  "editors": [
    {
      "name": "Marcos Cáceres",
      "company": "Apple Inc.",
      "companyURL": "https://apple.com",
      "w3cid": 39125
    },
    {
      "name": "Diego González",
      "url": "https://twitter.com/diekus",
      "company": "Microsoft",
      "companyURL": "https://microsoft.com",
      "w3cid": 66757
    }
  ],
  "mdn": true,
  "xref": "web-platform",
  "gitRevision": "3a87869f233821fd86cc370cc6f7744355553523",
  "publishDate": "2025-09-03",
  "publishISODate": "2025-09-03T00:00:00.000Z",
  "generatedSubtitle": "W3C Working Draft 03 September 2025"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD">
</head>

<body data-cite="WEBIDL appmanifest HTML INFRA URL WEBIDL DOM FETCH" class="h-entry">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.w3.org/"><img crossorigin="" alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a></p>
        <h1 id="title" class="title">バッジ API</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C 作業草案</a> <time class="dt-published"
                datetime="2025-09-03">2025年9月3日</time></p>
        <details open="">
            <summary>この文書の詳細</summary>
            <dl>
                <dt>このバージョン:</dt>
                <dd>
                    <a class="u-url"
                        href="https://www.w3.org/TR/2025/WD-badging-20250903/">https://www.w3.org/TR/2025/WD-badging-20250903/</a>
                </dd>
                <dt>最新公開バージョン:</dt>
                <dd>
                    <a href="https://www.w3.org/TR/badging/">https://www.w3.org/TR/badging/</a>
                </dd>
                <dt>最新編集者草案:</dt>
                <dd><a href="https://w3c.github.io/badging/">https://w3c.github.io/badging/</a></dd>
                <dt>履歴:</dt>
                <dd>
                    <a
                        href="https://www.w3.org/standards/history/badging/">https://www.w3.org/standards/history/badging/</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/badging/commits/main">コミット履歴</a>
                </dd>
                <dt>編集者:</dt>
                <dd class="editor p-author h-card vcard" data-editor-id="39125">
                    <span class="p-name fn">Marcos Cáceres</span> (<a class="p-org org h-org"
                        href="https://apple.com">Apple Inc.</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="66757">
                    <a class="u-url url p-name fn" href="https://twitter.com/diekus">Diego González</a> (<a
                        class="p-org org h-org" href="https://microsoft.com">Microsoft</a>)
                </dd>
                <dt>
                    以前の編集者:
                </dt>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Matt Giuca</span> (<a class="p-org org h-org"
                        href="https://google.com">Google Inc.</a>) - 2022年12月21日まで <time
                        datetime="2022-12-21">2022年12月21日</time>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Jay Harris</span> (<a class="p-org org h-org"
                        href="https://google.com">Google Inc.</a>) - 2019年12月31日まで <time
                        datetime="2019-12-31">2019年12月31日</time>
                </dd>
                <dt>フィードバック:</dt>
                <dd>
                    <a href="https://github.com/w3c/badging/">GitHub w3c/badging</a>
                    (<a href="https://github.com/w3c/badging/pulls/">プルリクエスト</a>,
                    <a href="https://github.com/w3c/badging/issues/new/choose">新しい課題</a>,
                    <a href="https://github.com/w3c/badging/issues/">オープン課題</a>)
                </dd>
            </dl>
        </details>


        <p class="copyright">
            <a href="https://www.w3.org/policies/#copyright">Copyright</a>
            ©
            2025

            <a href="https://www.w3.org/">World Wide Web Consortium</a>.
            <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
            <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>,
            <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/copyright/software-license-2023/"
                title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>概要</h2>
        <p>
            この仕様は、<a data-link-type="dfn"
                href="https://www.w3.org/TR/appmanifest/#dfn-installed-web-application">インストール済みウェブアプリケーション</a>
            がアプリケーションバッジを設定できるAPIを定義します。アプリケーションバッジは通常、デバイスのホーム画面やアプリケーションドックでアプリのアイコンの隣に表示されます。
        </p>
    </section>
    <section id="sotd" class="introductory">
        <h2>この文書のステータス</h2>
        <p><em>このセクションは、本書が公開された時点でのステータスを示します。現在の <abbr title="World Wide Web Consortium">W3C</abbr>
                の出版物一覧や、この技術レポートの最新改訂版は
                <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr>
                    標準と草案のインデックス</a>でご覧いただけます。</em></p>
        <p>
            本仕様は作業途中です。
        </p>
        <p>
            この文書は、<a href="https://www.w3.org/groups/wg/webapps">Web Applications Working
                Group</a> によって
            <a href="https://www.w3.org/policies/process/20250818/#recs-and-notes">勧告トラック</a>を利用して作業草案として公開されました。
        </p>
        <p>作業草案として公開されたことは、<abbr title="World Wide Web Consortium">W3C</abbr> およびその会員による支持を意味するものではありません。</p>
        <p>
            この文書はドラフトであり、今後随時更新、差し替え、または廃止される可能性があります。進行中の作業以外として引用することは不適切です。
        </p>
        <p>
            この文書は、
            <a href="https://www.w3.org/policies/patent-policy/"><abbr title="World Wide Web Consortium">W3C</abbr>
                特許ポリシー</a>のもとで運営されるグループによって作成されました。
            <abbr title="World Wide Web Consortium">W3C</abbr> は
            <a rel="disclosure" href="https://www.w3.org/groups/wg/webapps/ipr">本グループによる特許開示の公開リスト</a>
            を管理しており、そのページには特許を開示するための指示も含まれています。ある個人が、<a
                href="https://www.w3.org/policies/patent-policy/#def-essential">必要クレーム</a>を含むと認識する特許について事実を知っている場合は、<a
                href="https://www.w3.org/policies/patent-policy/#sec-Disclosure">W3C 特許ポリシー第6節</a>に従い情報を開示しなければなりません。
        </p>
        <p>
            この文書は
            <a id="w3c_process_revision" href="https://www.w3.org/policies/process/20250818/">2025年8月18日 <abbr
                    title="World Wide Web Consortium">W3C</abbr> プロセス文書</a>に従って管理されています。
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">目次</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">概要</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">この文書のステータス</a></li>
            <li class="tocline"><a class="tocxref" href="#usage-examples"><bdi class="secno">1. </bdi>
                    利用例
                </a></li>
            <li class="tocline"><a class="tocxref" href="#model"><bdi class="secno">2. </bdi>
                    モデル
                </a></li>
            <li class="tocline"><a class="tocxref" href="#presentation"><bdi class="secno">3. </bdi>
                    バッジの表示
                </a></li>
            <li class="tocline"><a class="tocxref"
                    href="#extensions-to-the-navigator-and-workernavigator-interfaces"><bdi class="secno">4. </bdi>
                    <code>Navigator</code> と <code>WorkerNavigator</code> インターフェースの拡張
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#setappbadge-method"><bdi class="secno">4.1 </bdi>
                            <span data-export="" data-dfn-type="method" data-idl="operation" data-title="setAppBadge()"
                                data-dfn-for="NavigatorBadge" data-type="Promise"
                                data-lt="setAppBadge()|setAppBadge(contents)"
                                data-local-lt="NavigatorBadge.setAppBadge|NavigatorBadge.setAppBadge()|setAppBadge"><code>setAppBadge()</code></span>
                            メソッド
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#clearappbadge-method"><bdi class="secno">4.2 </bdi>
                            <span data-export="" data-dfn-type="method" data-idl="operation"
                                data-title="clearAppBadge()" data-dfn-for="NavigatorBadge" data-type="Promise"
                                data-lt="clearAppBadge()"
                                data-local-lt="NavigatorBadge.clearAppBadge|NavigatorBadge.clearAppBadge()|clearAppBadge"><code>clearAppBadge()</code></span>
                            メソッド
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#setting-the-application-badge"><bdi class="secno">5. </bdi>
                    アプリケーションバッジの設定
                </a></li>
            <li class="tocline"><a class="tocxref" href="#privacy-considerations"><bdi class="secno">6. </bdi>
                    プライバシーに関する考慮事項
                </a></li>
            <li class="tocline"><a class="tocxref" href="#security-considerations"><bdi class="secno">7. </bdi>
                    セキュリティに関する考慮事項
                </a></li>
            <li class="tocline"><a class="tocxref" href="#accessibility-considerations"><bdi class="secno">8. </bdi>
                    アクセシビリティに関する考慮事項
                </a></li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">9. </bdi>適合性</a></li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">A. </bdi>参考文献</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">A.1
                            </bdi>規定参照</a></li>
                </ol>
            </li>
        </ol>
    </nav>
    <section class="informative" id="usage-examples">
        <div class="header-wrapper">
            <h2 id="x1-usage-examples"><bdi class="secno">1. </bdi>
                利用例
            </h2><a class="self-link" href="#usage-examples" aria-label="Permalink for Section 1."></a>
        </div>
        <p><em>このセクションは規範的ではありません。</em></p>

        <div class="example" id="example-showing-unread-count-on-the-app-icon">
            <div class="marker">
                <a class="self-link" href="#example-showing-unread-count-on-the-app-icon">例<bdi> 1</bdi></a><span
                    class="example-title">: アプリのアイコンに未読数を表示する</span>
            </div>
            <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateMailBadge</span>(<span class="hljs-params"></span>) {
  <span class="hljs-comment">// APIがサポートされているか確認します。</span>
  <span class="hljs-keyword">if</span> (!navigator.<span class="hljs-property">setAppBadge</span>) <span class="hljs-keyword">return</span>;

  <span class="hljs-keyword">const</span> unreadCount = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUnreadMailCount</span>();

  <span class="hljs-comment">// アプリバッジの設定を試みます。</span>
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> navigator.<span class="hljs-title function_">setAppBadge</span>(unreadCount);
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-comment">// バッジがサポートされていない場合や、ユーザーがバッジ設定を拒否した場合</span>
  }
}</code></pre>
        </div>
        <p>
            バッジはオペレーティングシステム上のアプリケーションのアイコンに表示される場合があります。同じアプリケーション内で複数回APIを使ってバッジを<a data-link-type="dfn|abstract-op"
                href="#dfn-setting" class="internalDFN" id="ref-for-dfn-setting-1">設定</a>
            または<a data-link-type="dfn|abstract-op" href="#dfn-clear" class="internalDFN"
                id="ref-for-dfn-clear-1">クリア</a>した場合、最新のものが有効となり、アプリケーションが閉じられた後でも表示が継続することがあります。
        </p>
        <div class="example" id="example-showing-ready-status-on-the-app-icon">
            <div class="marker">
                <a class="self-link" href="#example-showing-ready-status-on-the-app-icon">例<bdi> 2</bdi></a><span
                    class="example-title">: アプリのアイコンに準備状態を表示する</span>
            </div>
            <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showPlayerTurn</span>(<span class="hljs-params">playerTurnId</span>) {
  <span class="hljs-keyword">if</span> (playerTurnId === localPlayerId)
    <span class="hljs-keyword">await</span> navigator.<span class="hljs-title function_">setAppBadge</span>();
  <span class="hljs-keyword">else</span>
    <span class="hljs-keyword">await</span> navigator.<span class="hljs-title function_">clearAppBadge</span>();
}</code></pre>
        </div>
        <p data-cite="notifications">
            一部のオペレーティングシステムでは、バッジを<a data-link-type="dfn|abstract-op" href="#dfn-setting" class="internalDFN"
                id="ref-for-dfn-setting-2">設定</a>するにはユーザーの許可が必要な場合があります。この場合、開発者は "<a data-link-type="permission"
                href="https://notifications.spec.whatwg.org/#permissiondef-notifications">notifications</a>"
            権限の状態を確認してからバッジを<a data-link-type="dfn|abstract-op" href="#dfn-setting" class="internalDFN"
                id="ref-for-dfn-setting-3">設定</a>する必要があります。許可が与えられていない場合、開発者は
            <a data-link-type="interface" data-lt="Notification"
                href="https://notifications.spec.whatwg.org/#notification"><code>Notification</code></a>.<a
                data-link-type="method" data-lt="requestPermission()"
                href="https://notifications.spec.whatwg.org/#dom-notification-requestpermission"><code>requestPermission</code></a><code>()</code>
            を使って許可を求める必要があります。
        </p>
        <div class="example" id="example-checking-for-permission">
            <div class="marker">
                <a class="self-link" href="#example-checking-for-permission">例<bdi> 3</bdi></a><span
                    class="example-title">: 権限の確認</span>
            </div>
            <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkPermission</span>(<span class="hljs-params"></span>) {
  permission = <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">permissions</span>.<span class="hljs-title function_">query</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"notifications"</span>,
  });
  <span class="hljs-keyword">const</span> button = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"permission-button"</span>);
  <span class="hljs-keyword">if</span> (permission.<span class="hljs-property">state</span> === <span class="hljs-string">"prompt"</span>) {
    <span class="hljs-comment">// ユーザーに許可を求めるダイアログを表示します。</span>
    button.<span class="hljs-property">hidden</span> = <span class="hljs-literal">false</span>;
    button.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"click"</span>, <span class="hljs-title function_">async</span> () =&gt; {
      <span class="hljs-keyword">await</span> <span class="hljs-title class_">Notification</span>.<span class="hljs-title function_">requestPermission</span>();
      <span class="hljs-title function_">checkPermission</span>();
    }, { <span class="hljs-attr">once</span>: <span class="hljs-literal">true</span> });
    <span class="hljs-keyword">return</span>;
  }
  button.<span class="hljs-property">hidden</span> = <span class="hljs-literal">true</span>;
}</code></pre>
        </div>
    </section>
    <section id="model">
        <div class="header-wrapper">
            <h2 id="x2-model"><bdi class="secno">2. </bdi>
                モデル
            </h2><a class="self-link" href="#model" aria-label="Permalink for Section 2."></a>
        </div>

        <p>
            <dfn id="dfn-badge" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">バッジ</dfn>は、
            <a data-link-type="dfn"
                href="https://www.w3.org/TR/appmanifest/#dfn-installed-web-application">インストール済みウェブアプリケーション</a>
            がユーザーに新しいアクティビティがあることを通知するため、または未読数など少量の情報を示すための仕組みとして意図されています。
        </p>
        <p>
            <a data-link-type="dfn|abstract-op" href="#dfn-badge" class="internalDFN"
                id="ref-for-dfn-badge-1">バッジ</a>は、以下の<dfn data-dfn-for="badge" data-plurals="value" id="dfn-values"
                tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">値</dfn>のいずれかを持つことができます。
        </p>
        <dl>
            <dt>
                特別な値 <dfn id="dfn-nothing" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">"nothing"</dfn>:
            </dt>
            <dd>
                現在バッジが<a data-link-type="dfn|abstract-op" href="#dfn-setting" class="internalDFN"
                    id="ref-for-dfn-setting-4">設定</a>されていないことを示します。
            </dd>
            <dt>
                特別な値 <dfn id="dfn-flag" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">"flag"</dfn>:
            </dt>
            <dd>
                バッジが<a data-link-type="dfn|abstract-op" href="#dfn-setting" class="internalDFN"
                    id="ref-for-dfn-setting-5">設定</a>されているが、特定の値を持たないことを示します。
            </dd>
            <dt>
                <dfn data-plurals="numbers" id="dfn-number" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">数値</dfn>の値:
            </dt>
            <dd>
                バッジが<a data-link-type="dfn|abstract-op" href="#dfn-setting" class="internalDFN"
                    id="ref-for-dfn-setting-6">設定</a>されており、その値が<code>0</code>より大きい数値であることを示します。
            </dd>
        </dl>
        <p>
            <a data-link-type="dfn"
                href="https://www.w3.org/TR/appmanifest/#dfn-installed-web-application">インストール済みウェブアプリケーション</a>には、関連付けられた
            <a data-link-type="dfn|abstract-op" href="#dfn-badge" class="internalDFN"
                id="ref-for-dfn-badge-2">バッジ</a>があり、初期値は
            <a data-link-type="dfn|abstract-op" href="#dfn-nothing" class="internalDFN"
                id="ref-for-dfn-nothing-1">"nothing"</a>です。
        </p>
        <p>
            ユーザーエージェントは<em class="rfc2119">任意で</em>（再）<a data-link-type="dfn"
                href="https://infra.spec.whatwg.org/#ordered-set">設定</a>されたアプリケーションのバッジを
            <a data-link-type="dfn|abstract-op" href="#dfn-nothing" class="internalDFN"
                id="ref-for-dfn-nothing-2">"nothing"</a>にすることがあります（例: システムの慣習に従う場合など）。
        </p>
    </section>
    <section id="presentation">
        <div class="header-wrapper">
            <h2 id="x3-displaying-a-badge"><bdi class="secno">3. </bdi>
                バッジの表示
            </h2><a class="self-link" href="#presentation" aria-label="Permalink for Section 3."></a>
        </div>

        <p>
            アプリケーションのバッジが<dfn data-dfn-for="badge" data-lt="setting|set" id="dfn-setting" tabindex="0"
                aria-haspopup="dialog" data-dfn-type="dfn">設定</dfn>されている場合、
            <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent">ユーザーエージェント</a>やオペレーティングシステムは<em
                class="rfc2119">推奨</em>
            で、アプリケーションの主要なアイコン表現の横に
            <a data-link-type="dfn|abstract-op" href="#dfn-badge" class="internalDFN"
                id="ref-for-dfn-badge-3">バッジ</a>を表示するべきです
            （例：デバイスのホーム画面上のアプリのアイコンに小さなオーバーレイとして表示）。
        </p>
        <p data-cite="permissions notifications">
            ユーザーエージェントは<em class="rfc2119">ユーザーの明示的な許可</em>を
            <a data-link-type="dfn" href="https://www.w3.org/TR/permissions/#dfn-express-permission">求める</a>ことがあり、
            バッジを<a data-link-type="dfn|abstract-op" href="#dfn-setting" class="internalDFN"
                id="ref-for-dfn-setting-7">設定</a>する際、その許可を
            "<a data-link-type="permission"
                href="https://notifications.spec.whatwg.org/#permissiondef-notifications">notifications</a>" 権限に結びつける<em
                class="rfc2119">推奨</em>です。
        </p>
        <p>
            <a data-link-type="dfn|abstract-op" href="#dfn-badge" class="internalDFN"
                id="ref-for-dfn-badge-4">バッジ</a>が<a data-link-type="dfn|abstract-op" href="#dfn-setting"
                class="internalDFN" id="ref-for-dfn-setting-8">"flag"</a>に設定された場合、
            <a data-link-type="dfn"
                href="https://infra.spec.whatwg.org/#user-agent">ユーザーエージェント</a>やオペレーティングシステムは特定のシンボル（例：色付きの円）でインジケーターを表示する<em
                class="rfc2119">推奨</em>です。
        </p>
        <p>
            <a data-link-type="dfn|abstract-op" href="#dfn-badge" class="internalDFN"
                id="ref-for-dfn-badge-5">バッジ</a>の値が<a data-link-type="dfn|abstract-op" href="#dfn-setting"
                class="internalDFN" id="ref-for-dfn-setting-9">"nothing"</a>に設定された場合、
            <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent">ユーザーエージェント</a>やオペレーティングシステムは
            <em class="rfc2119">推奨</em>で<dfn data-dfn-for="badge" data-local-lt="clearing|cleared" id="dfn-clear"
                tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">クリア</dfn>し、
            <a data-link-type="dfn|abstract-op" href="#dfn-badge" class="internalDFN"
                id="ref-for-dfn-badge-6">バッジ</a>の表示をやめるべきです。
        </p>
        <p>
            <a data-link-type="dfn|abstract-op" href="#dfn-badge" class="internalDFN"
                id="ref-for-dfn-badge-7">バッジ</a>が<a data-link-type="dfn|abstract-op" href="#dfn-setting"
                class="internalDFN" id="ref-for-dfn-setting-10">数値</a>に設定された場合、
            <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent">ユーザーエージェント</a>やオペレーティングシステムは次を行います：
        </p>
        <ul>
            <li><em class="rfc2119">推奨</em>で、ユーザーのフォントや書式設定の好みに従って数値をフォーマットし表示すべきです。例：デバイスのホーム画面上のアプリのアイコンに円内の数字として表示。
            </li>
            <li><em class="rfc2119">任意</em>で、バッジの<a data-link-type="dfn|abstract-op" href="#dfn-number"
                    class="internalDFN" id="ref-for-dfn-number-2">数値</a>
                <a data-link-type="dfn|abstract-op" href="#dfn-values" class="internalDFN"
                    id="ref-for-dfn-values-1">値</a>をプラットフォームの慣例に従い簡略化または変形して表示できます。例：値が '100' の場合 '99+' と表示するなど。
            </li>
            <li><em class="rfc2119">推奨</em>で、ユーザーのロケールに従って数値をローカライズすべきです。例：<a data-link-type="dfn|abstract-op"
                    href="#dfn-values" class="internalDFN" id="ref-for-dfn-values-2">値</a> '7' は 'en'（英語）では
                '7'、'ar'（アラビア語）では '٧'。
            </li>
            <li><em class="rfc2119">任意</em>で、プラットフォームがバッジ内の数値表示をサポートしない場合は
                <a data-link-type="dfn|abstract-op" href="#dfn-number" class="internalDFN"
                    id="ref-for-dfn-number-3">数値</a>
                <a data-link-type="dfn|abstract-op" href="#dfn-values" class="internalDFN"
                    id="ref-for-dfn-values-3">値</a>
                を<a data-link-type="dfn|abstract-op" href="#dfn-flag" class="internalDFN"
                    id="ref-for-dfn-flag-2">"flag"</a>やプラットフォームに最適な表現として扱うことができます。
            </li>
        </ul>
    </section>
    <section data-dfn-for="NavigatorBadge" id="extensions-to-the-navigator-and-workernavigator-interfaces">
        <div class="header-wrapper">
            <h2 id="x4-extensions-to-the-navigator-and-workernavigator-interfaces"><bdi class="secno">4. </bdi>
                <code>Navigator</code> と <code>WorkerNavigator</code> インターフェースの拡張
            </h2><a class="self-link" href="#extensions-to-the-navigator-and-workernavigator-interfaces"
                aria-label="Permalink for Section 4."></a>
        </div>

        <pre class="idl def"
            id="webidl-2010472476"><span class="idlHeader"><a class="self-link" href="#webidl-2010472476">WebIDL</a></span><code><span data-idl="" class="idlInterface mixin" id="idl-def-navigatorbadge" data-title="NavigatorBadge">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
interface mixin <dfn data-export="" data-dfn-type="interface" id="dom-navigatorbadge" data-idl="interface mixin" data-title="NavigatorBadge" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>NavigatorBadge</code></dfn> {<span data-idl="" class="idlMethod" id="idl-def-navigatorbadge-setappbadge-contents" data-title="setAppBadge" data-dfn-for="NavigatorBadge"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-navigatorbadge-setappbadge" id="ref-for-dom-navigatorbadge-setappbadge-1"><code>setAppBadge</code></a>(
    optional<span class="idlType"> [<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#EnforceRange">EnforceRange</a></span>] <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long">unsigned long long</a></span> <span class="idlParamName">contents</span>
  );</span><span data-idl="" class="idlMethod" id="idl-def-navigatorbadge-clearappbadge" data-title="clearAppBadge" data-dfn-for="NavigatorBadge"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-navigatorbadge-clearappbadge" id="ref-for-dom-navigatorbadge-clearappbadge-1"><code>clearAppBadge</code></a>();</span>
};</span><span class="idlIncludes">

<a data-link-type="interface" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator">Navigator</a> includes <a data-link-type="idl" href="#dom-navigatorbadge" class="internalDFN" id="ref-for-dom-navigatorbadge-1"><code>NavigatorBadge</code></a>;</span><span class="idlIncludes">
<a data-link-type="interface" href="https://html.spec.whatwg.org/multipage/workers.html#workernavigator">WorkerNavigator</a> includes <a data-link-type="idl" href="#dom-navigatorbadge" class="internalDFN" id="ref-for-dom-navigatorbadge-2"><code>NavigatorBadge</code></a>;</span></code></pre>
        <p>
            アプリケーションバッジを表示しないユーザーエージェントは<em class="rfc2119">含めるべきではありません</em>
            <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#include">include</a> <a data-link-type="idl"
                data-lt="NavigatorBadge" href="#dom-navigatorbadge" class="internalDFN"
                id="ref-for-dom-navigatorbadge-3"><code>NavigatorBadge</code></a>。
        </p>
        <aside class="mdn">
            <details>
                <summary aria-label="Expand MDN details for setAppBadge"><span>MDN</span><span
                        title="この機能は限定的なサポートです。">🚫</span></summary>
                <a title="Navigator インターフェースの setAppBadge() メソッドは、このアプリに関連付けられたアイコンにバッジを設定します。値を渡すと、その値がバッジとして表示されます。値を渡さなければ、バッジはドットやプラットフォームで定義された他の指標として表示されます。"
                    href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/setAppBadge">Navigator/setAppBadge</a>
                <p class="engines-some">この機能は限定的なサポートです。</p>
                <table>
                    <tr class="chrome yes">
                        <td>Chrome</td>
                        <td>81+</td>
                    </tr>
                    <tr class="chrome_android no">
                        <td>Chrome Android</td>
                        <td>No</td>
                    </tr>
                    <tr class="edge unknown">
                        <td>Edge</td>
                        <td>?</td>
                    </tr>
                    <tr class="edge_mobile unknown">
                        <td>Edge Mobile</td>
                        <td>?</td>
                    </tr>
                    <tr class="firefox no">
                        <td>Firefox</td>
                        <td>No</td>
                    </tr>
                    <tr class="firefox_android unknown">
                        <td>Firefox Android</td>
                        <td>?</td>
                    </tr>
                    <tr class="opera no">
                        <td>Opera</td>
                        <td>No</td>
                    </tr>
                    <tr class="opera_android unknown">
                        <td>Opera Android</td>
                        <td>?</td>
                    </tr>
                    <tr class="safari no">
                        <td>Safari</td>
                        <td>No</td>
                    </tr>
                    <tr class="safari_ios yes">
                        <td>Safari iOS</td>
                        <td>16.4+</td>
                    </tr>
                    <tr class="samsunginternet_android unknown">
                        <td>Samsung Internet</td>
                        <td>?</td>
                    </tr>
                    <tr class="webview_android unknown">
                        <td>WebView Android</td>
                        <td>?</td>
                    </tr>
                </table>
            </details>
        </aside>
        <section id="setappbadge-method">
            <div class="header-wrapper">
                <h3 id="x4-1-setappbadge-method"><bdi class="secno">4.1 </bdi>
                    <dfn data-export="" data-dfn-type="method" id="dom-navigatorbadge-setappbadge" data-idl="operation"
                        data-title="setAppBadge()" data-dfn-for="NavigatorBadge" data-type="Promise"
                        data-lt="setAppBadge()|setAppBadge(contents)"
                        data-local-lt="NavigatorBadge.setAppBadge|NavigatorBadge.setAppBadge()|setAppBadge" tabindex="0"
                        aria-haspopup="dialog"><code>setAppBadge()</code></dfn> メソッド
                </h3><a class="self-link" href="#setappbadge-method" aria-label="Permalink for Section 4.1"></a>
            </div>
            <p>
                <a data-link-type="idl" data-lt="setAppBadge()" href="#dom-navigatorbadge-setappbadge"
                    class="internalDFN"
                    id="ref-for-dom-navigatorbadge-setappbadge-2"><code>setAppBadge</code></a><code>()</code> メソッドが
                呼び出されたとき、ユーザーエージェントは<em class="rfc2119">必須</em>で
                <a data-link-type="dfn|abstract-op" href="#dfn-set-the-application-badge" class="internalDFN"
                    id="ref-for-dfn-set-the-application-badge-1">アプリケーションバッジを設定する</a>必要があります。
                <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> の <var
                    data-type="unsigned long long">contents</var> 引数の値に。
            </p>
        </section>
        <aside class="mdn">
            <details>
                <summary aria-label="Expand MDN details for clearAppBadge"><span>MDN</span><span> </span></summary>
                <a title="Navigator インターフェースの clearAppBadge() メソッドは、現在のアプリのアイコン上のバッジをクリアし、バッジが設定されていない状態にします。値が nothing になることで、バッジの状態がクリアされます。"
                    href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/clearAppBadge">Navigator/clearAppBadge</a>

                <table>
                    <tr class="chrome yes">
                        <td>Chrome</td>
                        <td>81+</td>
                    </tr>
                    <tr class="chrome_android yes">
                        <td>Chrome Android</td>
                        <td>81+</td>
                    </tr>
                    <tr class="edge unknown">
                        <td>Edge</td>
                        <td>?</td>
                    </tr>
                    <tr class="edge_mobile unknown">
                        <td>Edge Mobile</td>
                        <td>?</td>
                    </tr>
                    <tr class="firefox no">
                        <td>Firefox</td>
                        <td>No</td>
                    </tr>
                    <tr class="firefox_android unknown">
                        <td>Firefox Android</td>
                        <td>?</td>
                    </tr>
                    <tr class="opera no">
                        <td>Opera</td>
                        <td>No</td>
                    </tr>
                    <tr class="opera_android unknown">
                        <td>Opera Android</td>
                        <td>?</td>
                    </tr>
                    <tr class="safari no">
                        <td>Safari</td>
                        <td>No</td>
                    </tr>
                    <tr class="safari_ios yes">
                        <td>Safari iOS</td>
                        <td>16.4+</td>
                    </tr>
                    <tr class="samsunginternet_android unknown">
                        <td>Samsung Internet</td>
                        <td>?</td>
                    </tr>
                    <tr class="webview_android unknown">
                        <td>WebView Android</td>
                        <td>?</td>
                    </tr>
                </table>
            </details>
        </aside>
        <section id="clearappbadge-method">
            <div class="header-wrapper">
                <h3 id="x4-2-clearappbadge-method"><bdi class="secno">4.2 </bdi>
                    <dfn data-export="" data-dfn-type="method" id="dom-navigatorbadge-clearappbadge"
                        data-idl="operation" data-title="clearAppBadge()" data-dfn-for="NavigatorBadge"
                        data-type="Promise" data-lt="clearAppBadge()"
                        data-local-lt="NavigatorBadge.clearAppBadge|NavigatorBadge.clearAppBadge()|clearAppBadge"
                        tabindex="0" aria-haspopup="dialog"><code>clearAppBadge()</code></dfn> メソッド
                </h3><a class="self-link" href="#clearappbadge-method" aria-label="Permalink for Section 4.2"></a>
            </div>
            <p>
                <a data-link-type="idl" data-lt="clearAppBadge()" href="#dom-navigatorbadge-clearappbadge"
                    class="internalDFN"
                    id="ref-for-dom-navigatorbadge-clearappbadge-2"><code>clearAppBadge</code></a><code>()</code> メソッド
                が呼び出されたとき、ユーザーエージェントは<em class="rfc2119">必須</em>で
                <a data-link-type="dfn|abstract-op" href="#dfn-set-the-application-badge" class="internalDFN"
                    id="ref-for-dfn-set-the-application-badge-2">アプリケーションバッジを設定する</a>必要があります。
                <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> の値を 0 に。
            </p>
        </section>
    </section>
    <section data-cite="permissions notifications" id="setting-the-application-badge">
        <div class="header-wrapper">
            <h2 id="x5-setting-the-application-badge"><bdi class="secno">5. </bdi>
                アプリケーションバッジの設定
            </h2><a class="self-link" href="#setting-the-application-badge" aria-label="Permalink for Section 5."></a>
        </div>

        <p>
            プラットフォームオブジェクト <var data-type="platform object">context</var> のアプリケーションバッジを、オプションの <a
                data-link-type="interface" data-lt="unsigned long long"
                href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long"><code>unsigned long long</code></a>
            <var data-type="unsigned long long">contents</var> の値に<dfn id="dfn-set-the-application-badge" tabindex="0"
                aria-haspopup="dialog" data-dfn-type="dfn">設定する</dfn>には、次の手順を実行します。
        </p>
        <ol class="algorithm">
            <li><var>global</var> を <var data-type="platform object">context</var> の <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">関連グローバルオブジェクト</a>とする。
            </li>
            <li><var>global</var> が <a data-link-type="interface" data-lt="Window"
                    href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                オブジェクトの場合:
                <ol>
                    <li><var>document</var> を <var>global</var> の <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window">関連付けられた
                            <code>Document</code></a>とする。
                    </li>
                    <li><var>document</var> が <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active">完全にアクティブ</a>でない場合、<a
                            data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with">拒否された
                            promise</a> を "<a data-link-type="exception"
                            href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>"
                        <a data-link-type="interface" data-lt="DOMException"
                            href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a> で返す。
                    </li>
                    <li><var>document</var> の <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object">関連設定オブジェクト</a>
                        の <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">オリジン</a> が、<a
                            data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> の <a
                            data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object">関連設定オブジェクト</a>
                        の <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin">トップレベルオリジン</a>と
                        <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin-domain">同一オリジンドメイン</a>でない場合、<a
                            data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with">拒否された
                            promise</a> を "<a data-link-type="exception"
                            href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a>" <a
                            data-link-type="interface" data-lt="DOMException"
                            href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a> で返す。
                    </li>
                </ol>
            </li>
            <li><var>promise</var> を <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise">新しい
                    promise</a>とする。
            </li>
            <li><a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">並列で</a>:
                <ol>
                    <li><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent">ユーザーエージェント</a>が
                        <a data-link-type="dfn"
                            href="https://www.w3.org/TR/permissions/#dfn-express-permission">明示的な許可</a>を
                        アプリケーションバッジの<a data-link-type="dfn|abstract-op" href="#dfn-setting" class="internalDFN"
                            id="ref-for-dfn-setting-11">設定</a>に必要とする場合:
                        <ol>
                            <li><var>permissionState</var> を "<a data-link-type="permission"
                                    href="https://notifications.spec.whatwg.org/#permissiondef-notifications">notifications</a>"
                                で
                                <a data-link-type="dfn"
                                    href="https://www.w3.org/TR/permissions/#dfn-getting-the-current-permission-state">現在の権限状態を取得</a>した結果とする。
                            </li>
                            <li><var>permissionState</var> が "<a data-link-type="enum-value"
                                    href="https://www.w3.org/TR/permissions/#dom-permissionstate-granted"><code>granted</code></a>"
                                でない場合、
                                <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">グローバルタスクをキュー</a>し、
                                <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source">ユーザー操作タスクソース</a>
                                <var>global</var> で <a data-link-type="dfn"
                                    href="https://webidl.spec.whatwg.org/#reject">promiseを拒否</a>し、
                                <a data-link-type="exception" data-lt="NotAllowedError"
                                    href="https://webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a>
                                でこのアルゴリズムを終了する。
                            </li>
                        </ol>
                    </li>
                    <li><var data-type="unsigned long long">contents</var> に応じて分岐する:
                        <dl class="switch">
                            <dt>
                                <var data-type="unsigned long long">contents</var> が渡されなかった場合:
                            </dt>
                            <dd>
                                <a data-link-type="dfn|abstract-op" href="#dfn-setting" class="internalDFN"
                                    id="ref-for-dfn-setting-12">バッジ</a> を <a data-link-type="dfn|abstract-op"
                                    href="#dfn-flag" class="internalDFN" id="ref-for-dfn-flag-3">"flag"</a> に設定する。
                            </dd>
                            <dt>
                                <var data-type="unsigned long long">contents</var> が 0 の場合:
                            </dt>
                            <dd>
                                <a data-link-type="dfn|abstract-op" href="#dfn-setting" class="internalDFN"
                                    id="ref-for-dfn-setting-13">バッジ</a> を <a data-link-type="dfn|abstract-op"
                                    href="#dfn-nothing" class="internalDFN" id="ref-for-dfn-nothing-4">"nothing"</a>
                                に設定する。
                            </dd>
                            <dt>
                                <var data-type="unsigned long long">contents</var> の場合:
                            </dt>
                            <dd>
                                <a data-link-type="dfn|abstract-op" href="#dfn-setting" class="internalDFN"
                                    id="ref-for-dfn-setting-14">バッジ</a> を <var
                                    data-type="unsigned long long">contents</var> に設定する。
                            </dd>
                        </dl>
                    </li>
                    <li><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">グローバルタスクをキュー</a>し、
                        <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source">DOM操作タスクソース</a>
                        を <var>global</var> で <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#resolve">promiseを解決</a>し
                        <code>undefined</code> を返す。
                    </li>
                </ol>
            </li>
            <li><var>promise</var> を返す。
            </li>
        </ol>
    </section>
    <section id="privacy-considerations">
        <div class="header-wrapper">
            <h2 id="x6-privacy-considerations"><bdi class="secno">6. </bdi>
                プライバシーに関する考慮事項
            </h2><a class="self-link" href="#privacy-considerations" aria-label="Permalink for Section 6."></a>
        </div>

        <p>
            このAPIは設計上書き込み専用です。サイトが以前に設定したバッジの値を読み戻す方法はなく、アプリケーションバッジがストレージやフィンガープリント手段として利用されるのを防ぎます。
        </p>
    </section>
    <section id="security-considerations">
        <div class="header-wrapper">
            <h2 id="x7-security-considerations"><bdi class="secno">7. </bdi>
                セキュリティに関する考慮事項
            </h2><a class="self-link" href="#security-considerations" aria-label="Permalink for Section 7."></a>
        </div>

        <p>
            <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent">ユーザーエージェント</a>やオペレーティングシステムは<em
                class="rfc2119">任意で</em>
            <a data-link-type="dfn|abstract-op" href="#dfn-clear" class="internalDFN" id="ref-for-dfn-clear-2">バッジ</a>を
            <a data-link-type="dfn|abstract-op" href="#dfn-badge" class="internalDFN"
                id="ref-for-dfn-badge-9">クリア</a>することができ、
            システムの慣例（例：システムリセット時）に従って行うことがあります。
        </p>
        <div class="issue" id="issue-container-number-68">
            <div role="heading" class="issue-title marker" id="h-issue" aria-level="3"><a
                    href="https://github.com/w3c/badging/issues/68"><span class="issue-number">Issue 68</span></a><span
                    class="issue-label">: バッジ設定のレート制限</span></div>
            <p dir="auto">提案者: <a class="user-mention notranslate" data-hovercard-type="user"
                    data-hovercard-url="/users/grorg/hovercard" data-octo-click="hovercard-link-click"
                    data-octo-dimensions="link_type:self" href="https://github.com/grorg">@grorg</a>、<a
                    href="https://lists.webkit.org/pipermail/webkit-dev/2020-February/031058.html"
                    rel="nofollow">webkit-dev</a>より:</p>
            <blockquote>
                <p dir="auto">ブラウザが短時間に複数回set/clear操作（例：点滅バッジ）を無視する方法について仕様文を追加したいです。例えば、1分に1回だけバッジ操作を許可するなどの制限です。</p>
            </blockquote>
            <p dir="auto">この点はUIに関するため、要件ではなく推奨事項として扱うのが良いでしょう。</p>
            <p dir="auto">
                「最終的な一貫性」保証も必要です。つまり、バッジに書き込んだ最終値が必ずユーザーに表示されること。例えば「3」を設定し10秒後に「12」を設定しても、レート制限のため「12」が反映されず「3」のままになるのは避けるべきです。ルールは「UIがN秒以上更新されていなければ新しい値に更新、それ以外はタイマーでN-(前回更新からの経過秒数)後に新しい値に更新」などが望ましいです。
            </p>
        </div>
    </section>
    <section class="informative" id="accessibility-considerations">
        <div class="header-wrapper">
            <h2 id="x8-accessibility-considerations"><bdi class="secno">8. </bdi>
                アクセシビリティに関する考慮事項
            </h2><a class="self-link" href="#accessibility-considerations" aria-label="Permalink for Section 8."></a>
        </div>
        <p><em>このセクションは規範的ではありません。</em></p>

        <div class="issue" id="issue-container-number-24">
            <div role="heading" class="issue-title marker" id="h-issue-0" aria-level="3"><a
                    href="https://github.com/w3c/badging/issues/24"><span class="issue-number">Issue 24</span></a><span
                    class="issue-label">: アクセシビリティセクションの追加</span></div>
            <p dir="auto">バッジの表示をブラウザが管理する場合、アクセシビリティガイドラインの定義が可能だと思われます。</p>
        </div>
    </section>
    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x9-conformance"><bdi class="secno">9. </bdi>適合性</h2><a class="self-link" href="#conformance"
                aria-label="Permalink for Section 9."></a>
        </div>
        <p>非規範的と明記されたセクションだけでなく、本仕様中の著者ガイドライン、図、例、および注記もすべて非規範的です。その他の記述はすべて規範的です。</p>
        <p>
            この文書で使われている <em class="rfc2119">MAY</em>、<em class="rfc2119">MUST</em>、<em class="rfc2119">SHOULD</em>、
            <em class="rfc2119">SHOULD NOT</em> というキーワードは、
            <a href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119"
                    title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc8174"
                    title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
            に記載されている通り、本書で示すようにすべて大文字で記載されている場合にのみ、その意味として解釈されます。
        </p>
    </section>


    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="a-references"><bdi class="secno">A. </bdi>参考文献</h2><a class="self-link" href="#references"
                aria-label="Permalink for Appendix A."></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="a-1-normative-references"><bdi class="secno">A.1 </bdi>規定参照</h3><a class="self-link"
                    href="#normative-references" aria-label="Permalink for Appendix A.1"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-appmanifest">[appmanifest]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/appmanifest/"><cite>Web Application Manifest</cite></a>. Marcos
                    Caceres; Kenneth Christiansen; Diego Gonzalez-Zuniga; Daniel Murphy; Christian Liebel. W3C.
                    2025年5月5日. W3C 作業草案. URL: <a
                        href="https://www.w3.org/TR/appmanifest/">https://www.w3.org/TR/appmanifest/</a>
                </dd>
                <dt id="bib-html">[html]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren;
                    Domenic Denicola; Dominic Farolino; Ian Hickson; Philip Jägenstedt; Simon Pieters. WHATWG.
                    リビングスタンダード. URL: <a
                        href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-infra">[infra]</dt>
                <dd>
                    <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Anne van Kesteren; Domenic
                    Denicola. WHATWG. リビングスタンダード. URL: <a
                        href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-notifications">[notifications]</dt>
                <dd>
                    <a href="https://notifications.spec.whatwg.org/"><cite>Notifications API Standard</cite></a>. Anne
                    van Kesteren. WHATWG. リビングスタンダード. URL: <a
                        href="https://notifications.spec.whatwg.org/">https://notifications.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-permissions">[permissions]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/permissions/"><cite>Permissions</cite></a>. Marcos Caceres; Mike
                    Taylor. W3C. 2025年6月24日. W3C 作業草案. URL: <a
                        href="https://www.w3.org/TR/permissions/">https://www.w3.org/TR/permissions/</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate
                            Requirement Levels</cite></a>. S. Bradner. IETF. 1997年3月. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
                </dd>
                <dt id="bib-rfc8174">[RFC8174]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC
                            2119 Key Words</cite></a>. B. Leiba. IETF. 2017年5月. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
                </dd>
                <dt id="bib-webidl">[WEBIDL]</dt>
                <dd>
                    <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Edgar Chen; Timothy Gu.
                    WHATWG. リビングスタンダード. URL: <a
                        href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="Back to Top">↑</abbr></a>
    </p>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-badge"
        aria-label="Links in this document to definition: badge">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-badge"
                aria-label="Permalink for definition: badge. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-badge-1" title="§ 2. Model">§ 2. Model</a> <a href="#ref-for-dfn-badge-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-badge-3" title="§ 3. Displaying a badge">§ 3. Displaying a badge</a> <a
                    href="#ref-for-dfn-badge-4" title="Reference 2">(2)</a> <a href="#ref-for-dfn-badge-5"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-badge-6" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-badge-7" title="Reference 5">(5)</a> <a href="#ref-for-dfn-badge-8"
                    title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-badge-9" title="§ 7. Security considerations">§ 7. Security considerations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-values"
        aria-label="Links in this document to definition: values">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-values"
                aria-label="Permalink for definition: values. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-values-1" title="§ 3. Displaying a badge">§ 3. Displaying a badge</a> <a
                    href="#ref-for-dfn-values-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-values-3"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-nothing"
        aria-label="Links in this document to definition: &quot;nothing&quot;">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-nothing"
                aria-label="Permalink for definition: &quot;nothing&quot;. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-nothing-1" title="§ 2. Model">§ 2. Model</a> <a href="#ref-for-dfn-nothing-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nothing-3" title="§ 3. Displaying a badge">§ 3. Displaying a badge</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nothing-4" title="§ 5. Setting the application badge">§ 5. Setting the application
                    badge</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-flag"
        aria-label="Links in this document to definition: &quot;flag&quot;">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-flag"
                aria-label="Permalink for definition: &quot;flag&quot;. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-flag-1" title="§ 3. Displaying a badge">§ 3. Displaying a badge</a> <a
                    href="#ref-for-dfn-flag-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-flag-3" title="§ 5. Setting the application badge">§ 5. Setting the application
                    badge</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-number"
        aria-label="Links in this document to definition: number">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-number"
                aria-label="Permalink for definition: number. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-number-1" title="§ 3. Displaying a badge">§ 3. Displaying a badge</a> <a
                    href="#ref-for-dfn-number-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-number-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-number-4" title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-setting"
        aria-label="Links in this document to definition: set">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-setting"
                aria-label="Permalink for definition: set. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-setting-1" title="§ 1. Usage examples">§ 1. Usage examples</a> <a
                    href="#ref-for-dfn-setting-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-setting-3"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-setting-4" title="§ 2. Model">§ 2. Model</a> <a href="#ref-for-dfn-setting-5"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-setting-6" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-setting-7" title="§ 3. Displaying a badge">§ 3. Displaying a badge</a> <a
                    href="#ref-for-dfn-setting-8" title="Reference 2">(2)</a> <a href="#ref-for-dfn-setting-9"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-setting-10" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-setting-11" title="§ 5. Setting the application badge">§ 5. Setting the
                    application badge</a> <a href="#ref-for-dfn-setting-12" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-setting-13" title="Reference 3">(3)</a> <a href="#ref-for-dfn-setting-14"
                    title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-clear"
        aria-label="Links in this document to definition: clear">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-clear"
                aria-label="Permalink for definition: clear. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-clear-1" title="§ 1. Usage examples">§ 1. Usage examples</a>
            </li>
            <li>
                <a href="#ref-for-dfn-clear-2" title="§ 7. Security considerations">§ 7. Security considerations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-navigatorbadge"
        aria-label="Links in this document to definition: NavigatorBadge">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-navigatorbadge"
                aria-label="Permalink for definition: NavigatorBadge. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-navigatorbadge-1"
                    title="§ 4. Extensions to the Navigator and WorkerNavigator interfaces">§ 4. Extensions to the
                    Navigator and WorkerNavigator interfaces</a> <a href="#ref-for-dom-navigatorbadge-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-navigatorbadge-3" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-navigatorbadge-setappbadge"
        aria-label="Links in this document to definition: setAppBadge()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-navigatorbadge-setappbadge"
                aria-label="Permalink for definition: setAppBadge(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2010472476">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-navigatorbadge-setappbadge-1"
                    title="§ 4. Extensions to the Navigator and WorkerNavigator interfaces">§ 4. Extensions to the
                    Navigator and WorkerNavigator interfaces</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigatorbadge-setappbadge-2" title="§ 4.1 setAppBadge() method">§ 4.1
                    setAppBadge() method</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-navigatorbadge-clearappbadge"
        aria-label="Links in this document to definition: clearAppBadge()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-navigatorbadge-clearappbadge"
                aria-label="Permalink for definition: clearAppBadge(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2010472476">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-navigatorbadge-clearappbadge-1"
                    title="§ 4. Extensions to the Navigator and WorkerNavigator interfaces">§ 4. Extensions to the
                    Navigator and WorkerNavigator interfaces</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigatorbadge-clearappbadge-2" title="§ 4.2 clearAppBadge() method">§ 4.2
                    clearAppBadge() method</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-set-the-application-badge"
        aria-label="Links in this document to definition: set the application badge">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-set-the-application-badge"
                aria-label="Permalink for definition: set the application badge. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-set-the-application-badge-1" title="§ 4.1 setAppBadge() method">§ 4.1
                    setAppBadge() method</a>
            </li>
            <li>
                <a href="#ref-for-dfn-set-the-application-badge-2" title="§ 4.2 clearAppBadge() method">§ 4.2
                    clearAppBadge() method</a>
            </li>
        </ul>
    </div>
    <script id="respec-highlight-vars">(() => {
            // @ts-check

            if (document.respec) {
                document.respec.ready.then(setupVarHighlighter);
            } else {
                setupVarHighlighter();
            }

            function setupVarHighlighter() {
                document
                    .querySelectorAll("var")
                    .forEach(varElem => varElem.addEventListener("click", highlightListener));
            }

            function highlightListener(ev) {
                ev.stopPropagation();
                const { target: varElem } = ev;
                const hightligtedElems = highlightVars(varElem);
                const resetListener = () => {
                    const hlColor = getHighlightColor(varElem);
                    hightligtedElems.forEach(el => removeHighlight(el, hlColor));
                    [...HL_COLORS.keys()].forEach(key => HL_COLORS.set(key, true));
                };
                if (hightligtedElems.length) {
                    document.body.addEventListener("click", resetListener, { once: true });
                }
            }

            // availability of highlight colors. colors from var.css
            const HL_COLORS = new Map([
                ["respec-hl-c1", true],
                ["respec-hl-c2", true],
                ["respec-hl-c3", true],
                ["respec-hl-c4", true],
                ["respec-hl-c5", true],
                ["respec-hl-c6", true],
                ["respec-hl-c7", true],
            ]);

            function getHighlightColor(target) {
                // return current colors if applicable
                const { value } = target.classList;
                const re = /respec-hl-\w+/;
                const activeClass = re.test(value) && value.match(re);
                if (activeClass) return activeClass[0];

                // first color preference
                if (HL_COLORS.get("respec-hl-c1") === true) return "respec-hl-c1";

                // otherwise get some other available color
                return [...HL_COLORS.keys()].find(c => HL_COLORS.get(c)) || "respec-hl-c1";
            }

            function highlightVars(varElem) {
                const textContent = norm(varElem.textContent);
                const parent = varElem.closest(".algorithm, section");
                const highlightColor = getHighlightColor(varElem);

                const varsToHighlight = [...parent.querySelectorAll("var")].filter(
                    el =>
                        norm(el.textContent) === textContent &&
                        el.closest(".algorithm, section") === parent
                );

                // update availability of highlight color
                const colorStatus = varsToHighlight[0].classList.contains("respec-hl");
                HL_COLORS.set(highlightColor, colorStatus);

                // highlight vars
                if (colorStatus) {
                    varsToHighlight.forEach(el => removeHighlight(el, highlightColor));
                    return [];
                } else {
                    varsToHighlight.forEach(el => addHighlight(el, highlightColor));
                }
                return varsToHighlight;
            }

            function removeHighlight(el, highlightColor) {
                el.classList.remove("respec-hl", highlightColor);
                // clean up empty class attributes so they don't come in export
                if (!el.classList.length) el.removeAttribute("class");
            }

            function addHighlight(elem, highlightColor) {
                elem.classList.add("respec-hl", highlightColor);
            }

            /**
             * Same as `norm` from src/core/utils, but our build process doesn't allow
             * imports in runtime scripts, so duplicated here.
             * @param {string} str
             */
            function norm(str) {
                return str.trim().replace(/\s+/g, " ");
            }
        })()</script>
    <script id="respec-dfn-panel">(() => {
                                               // @ts-check
                                               if (document.respec) {
                                                   document.respec.ready.then(setupPanel);
                                               } else {
                                                   setupPanel();
                                               }

                                               function setupPanel() {
                                                   const listener = panelListener();
                                                   document.body.addEventListener("keydown", listener);
                                                   document.body.addEventListener("click", listener);
                                               }

                                               function panelListener() {
                                                   /** @type {HTMLElement} */
                                                   let panel = null;
                                                   return event => {
                                                       const { target, type } = event;

                                                       if (!(target instanceof HTMLElement)) return;

                                                       // For keys, we only care about Enter key to activate the panel
                                                       // otherwise it's activated via a click.
                                                       if (type === "keydown" && event.key !== "Enter") return;

                                                       const action = deriveAction(event);

                                                       switch (action) {
                                                           case "show": {
                                                               hidePanel(panel);
                                                               /** @type {HTMLElement} */
                                                               const dfn = target.closest("dfn, .index-term");
                                                               panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                                                               const coords = deriveCoordinates(event);
                                                               displayPanel(dfn, panel, coords);
                                                               break;
                                                           }
                                                           case "dock": {
                                                               panel.style.left = null;
                                                               panel.style.top = null;
                                                               panel.classList.add("docked");
                                                               break;
                                                           }
                                                           case "hide": {
                                                               hidePanel(panel);
                                                               panel = null;
                                                               break;
                                                           }
                                                       }
                                                   };
                                               }

                                               /**
                                                * @param {MouseEvent|KeyboardEvent} event
                                                */
                                               function deriveCoordinates(event) {
                                                   const target = /** @type HTMLElement */ (event.target);

                                                   // We prevent synthetic AT clicks from putting
                                                   // the dialog in a weird place. The AT events sometimes
                                                   // lack coordinates, so they have clientX/Y = 0
                                                   const rect = target.getBoundingClientRect();
                                                   if (
                                                       event instanceof MouseEvent &&
                                                       event.clientX >= rect.left &&
                                                       event.clientY >= rect.top
                                                   ) {
                                                       // The event probably happened inside the bounding rect...
                                                       return { x: event.clientX, y: event.clientY };
                                                   }

                                                   // Offset to the middle of the element
                                                   const x = rect.x + rect.width / 2;
                                                   // Placed at the bottom of the element
                                                   const y = rect.y + rect.height;
                                                   return { x, y };
                                               }

                                               /**
                                                * @param {Event} event
                                                */
                                               function deriveAction(event) {
                                                   const target = /** @type {HTMLElement} */ (event.target);
                                                   const hitALink = !!target.closest("a");
                                                   if (target.closest("dfn:not([data-cite]), .index-term")) {
                                                       return hitALink ? "none" : "show";
                                                   }
                                                   if (target.closest(".dfn-panel")) {
                                                       if (hitALink) {
                                                           return target.classList.contains("self-link") ? "hide" : "dock";
                                                       }
                                                       const panel = target.closest(".dfn-panel");
                                                       return panel.classList.contains("docked") ? "hide" : "none";
                                                   }
                                                   if (document.querySelector(".dfn-panel:not([hidden])")) {
                                                       return "hide";
                                                   }
                                                   return "none";
                                               }

                                               /**
                                                * @param {HTMLElement} dfn
                                                * @param {HTMLElement} panel
                                                * @param {{ x: number, y: number }} clickPosition
                                                */
                                               function displayPanel(dfn, panel, { x, y }) {
                                                   panel.hidden = false;
                                                   // distance (px) between edge of panel and the pointing triangle (caret)
                                                   const MARGIN = 20;

                                                   const dfnRects = dfn.getClientRects();
                                                   // Find the `top` offset when the `dfn` can be spread across multiple lines
                                                   let closestTop = 0;
                                                   let minDiff = Infinity;
                                                   for (const rect of dfnRects) {
                                                       const { top, bottom } = rect;
                                                       const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                                                       if (diffFromClickY < minDiff) {
                                                           minDiff = diffFromClickY;
                                                           closestTop = top;
                                                       }
                                                   }

                                                   const top = window.scrollY + closestTop + dfnRects[0].height;
                                                   const left = x - MARGIN;
                                                   panel.style.left = `${left}px`;
                                                   panel.style.top = `${top}px`;

                                                   // Find if the panel is flowing out of the window
                                                   const panelRect = panel.getBoundingClientRect();
                                                   const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                                                   if (panelRect.right > SCREEN_WIDTH) {
                                                       const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                                                       const newCaretOffset = left - newLeft;
                                                       panel.style.left = `${newLeft}px`;
                                                       /** @type {HTMLElement} */
                                                       const caret = panel.querySelector(".caret");
                                                       caret.style.left = `${newCaretOffset}px`;
                                                   }

                                                   // As it's a dialog, we trap focus.
                                                   // TODO: when <dialog> becomes a implemented, we should really
                                                   // use that.
                                                   trapFocus(panel, dfn);
                                               }

                                               /**
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function trapFocus(panel, dfn) {
                                                   /** @type NodeListOf<HTMLAnchorElement> elements */
                                                   const anchors = panel.querySelectorAll("a[href]");
                                                   // No need to trap focus
                                                   if (!anchors.length) return;

                                                   // Move focus to first anchor element
                                                   const first = anchors.item(0);
                                                   first.focus();

                                                   const trapListener = createTrapListener(anchors, panel, dfn);
                                                   panel.addEventListener("keydown", trapListener);

                                                   // Hiding the panel releases the trap
                                                   const mo = new MutationObserver(records => {
                                                       const [record] = records;
                                                       const target = /** @type HTMLElement */ (record.target);
                                                       if (target.hidden) {
                                                           panel.removeEventListener("keydown", trapListener);
                                                           mo.disconnect();
                                                       }
                                                   });
                                                   mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
                                               }

                                               /**
                                                *
                                                * @param {NodeListOf<HTMLAnchorElement>} anchors
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function createTrapListener(anchors, panel, dfn) {
                                                   const lastIndex = anchors.length - 1;
                                                   let currentIndex = 0;
                                                   return event => {
                                                       switch (event.key) {
                                                           // Hitting "Tab" traps us in a nice loop around elements.
                                                           case "Tab": {
                                                               event.preventDefault();
                                                               currentIndex += event.shiftKey ? -1 : +1;
                                                               if (currentIndex < 0) {
                                                                   currentIndex = lastIndex;
                                                               } else if (currentIndex > lastIndex) {
                                                                   currentIndex = 0;
                                                               }
                                                               anchors.item(currentIndex).focus();
                                                               break;
                                                           }

                                                           // Hitting "Enter" on an anchor releases the trap.
                                                           case "Enter":
                                                               hidePanel(panel);
                                                               break;

                                                           // Hitting "Escape" returns focus to dfn.
                                                           case "Escape":
                                                               hidePanel(panel);
                                                               dfn.focus();
                                                               return;
                                                       }
                                                   };
                                               }

                                               /** @param {HTMLElement} panel */
                                               function hidePanel(panel) {
                                                   if (!panel) return;
                                                   panel.hidden = true;
                                                   panel.classList.remove("docked");
                                               }
                                           })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
</body>

</html>