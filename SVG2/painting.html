<!DOCTYPE html>

<!--
  Scalable Vector Graphics (SVG) 2
  Chapter 13: Painting: Filling, Stroking and Marker Symbols

  Note: This document is generated from ../master/painting.html.
  Run "make" from the root of the repository to regenerate it.
  -->

<html lang="ja-JP" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8" />
    <title>描画：塗りつぶし、ストローク、マーカーシンボル — SVG 2</title>

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- Style sheets for local dev. Will be standardized in processing.
  Add attribute data-keep="" to any extra stylesheet link you do not want removed
  (or use <style>), and include it before here. -->


    <link rel="stylesheet" title="Default" href="https://www.w3.org/TR/SVG2/style/svg.css" type="text/css"
        media="screen" />
    <link rel="alternate stylesheet" title="Only annotations for publication"
        href="https://www.w3.org/TR/SVG2/style/default_no_maturity.css" type="text/css" media="screen" />
    <link rel="alternate stylesheet" title="No issues/annotations"
        href="https://www.w3.org/TR/SVG2/style/default_no_issues.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-ED" type="text/css" media="screen" />
    <script src="https://www.w3.org/TR/SVG2/style/link-fixup.js"></script>
    <script data-script-mathjax="" async=""
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_SVG"></script>
</head>

<body class="chapter-painting">

    <h1>第13章：描画：塗りつぶし、ストローク、マーカーシンボル</h1>
    <nav id="toc">
        <div class="header top"><a href="index.html">概要</a> . <a href="embedded.html">前へ</a> . <a
                href="pservers.html">次へ</a> . <a href="eltindex.html">要素一覧</a> . <a href="attindex.html">属性一覧</a> . <a
                href="propidx.html">プロパティ一覧</a></div>
        <h2 id="Contents" class="contents">目次</h2>
        <ol class="toc">
            <li>
                <ol class="toc">
                    <li><a href="painting.html#Introduction"><span class="secno">13.1.</span> はじめに</a>
                        <ol class="toc">
                            <li><a href="painting.html#Definitions"><span class="secno">13.1.1.</span> 用語定義</a>
                            </li>
                        </ol>
                    </li>
                    <li><a href="painting.html#SpecifyingPaint"><span class="secno">13.2.</span> ペイントの指定</a>
                    </li>
                    <li><a href="painting.html#ColorProperty"><span class="secno">13.3.</span> ‘<span
                                class="property">color</span>’ プロパティの効果</a></li>
                    <li><a href="painting.html#FillProperties"><span class="secno">13.4.</span> 塗りプロパティ</a>
                        <ol class="toc">
                            <li><a href="painting.html#SpecifyingFillPaint"><span class="secno">13.4.1.</span>
                                    塗りペイントの指定：‘<span class="property">fill</span>’ プロパティ</a></li>
                            <li><a href="painting.html#WindingRule"><span class="secno">13.4.2.</span> ワインディングルール：‘<span
                                        class="property">fill-rule</span>’
                                    プロパティ</a></li>
                            <li><a href="painting.html#FillOpacity"><span class="secno">13.4.3.</span>
                                    塗りペイントの不透明度：‘<span class="property">fill-opacity</span>’
                                    プロパティ</a></li>
                        </ol>
                    </li>
                    <li><a href="painting.html#StrokeProperties"><span class="secno">13.5.</span> ストロークプロパティ</a>
                        <ol class="toc">
                            <li><a href="painting.html#SpecifyingStrokePaint"><span class="secno">13.5.1.</span>
                                    ストロークペイントの指定：‘<span class="property">stroke</span>’
                                    プロパティ</a></li>
                            <li><a href="painting.html#StrokeOpacity"><span class="secno">13.5.2.</span>
                                    ストロークペイントの不透明度：‘<span class="property">stroke-opacity</span>’
                                    プロパティ</a></li>
                            <li><a href="painting.html#StrokeWidth"><span class="secno">13.5.3.</span> ストローク幅：‘<span
                                        class="property">stroke-width</span>’
                                    プロパティ</a></li>
                            <li><a href="painting.html#LineCaps"><span class="secno">13.5.4.</span> ストローク端のキャップ描画：‘<span
                                        class="property">stroke-linecap</span>’
                                    プロパティ</a></li>
                            <li><a href="painting.html#LineJoin"><span class="secno">13.5.5.</span> 線の結合制御：‘<span
                                        class="property">stroke-linejoin</span>’
                                    および ‘<span class="property">stroke-miterlimit</span>’ プロパティ</a></li>
                            <li><a href="painting.html#StrokeDashing"><span class="secno">13.5.6.</span> 破線ストローク：‘<span
                                        class="property">stroke-dasharray</span>’ および
                                    ‘<span class="property">stroke-dashoffset</span>’ プロパティ</a></li>
                            <li><a href="painting.html#StrokeShape"><span class="secno">13.5.7.</span> ストロークの形状計算</a>
                            </li>
                            <li><a href="painting.html#CurvatureCalculation"><span class="secno">13.5.8.</span>
                                    <span class="prop-value">arcs</span> ‘stroke-linejoin’ 用円の計算</a></li>
                            <li><a href="painting.html#ArcsLinejoinFallback"><span class="secno">13.5.9.</span>
                                    初期円が交差しない場合の <span class="prop-value">arcs</span> ‘stroke-linejoin’ の円調整</a></li>
                        </ol>
                    </li>
                    <li><a href="painting.html#PaintingVectorEffects"><span class="secno">13.6.</span> ベクター効果</a></li>
                    <li><a href="painting.html#Markers"><span class="secno">13.7.</span> マーカー</a>
                        <ol class="toc">
                            <li><a href="painting.html#MarkerElement"><span class="secno">13.7.1.</span> <span
                                        class="element-name">‘marker’</span> 要素</a></li>
                            <li><a href="painting.html#VertexMarkerProperties"><span class="secno">13.7.2.</span>
                                    頂点マーカー：‘<span class="property">marker-start</span>’、
                                    ‘<span class="property">marker-mid</span>’、‘<span
                                        class="property">marker-end</span>’
                                    プロパティ</a></li>
                            <li><a href="painting.html#MarkerShorthand"><span class="secno">13.7.3.</span>
                                    マーカーのショートハンド：‘<span class="property">marker</span>’
                                    プロパティ</a></li>
                            <li><a href="painting.html#RenderingMarkers"><span class="secno">13.7.4.</span>
                                    マーカーの描画</a></li>
                        </ol>
                    </li>
                    <li><a href="painting.html#PaintOrder"><span class="secno">13.8.</span> 塗装操作順序の制御：
                            ‘<span class="property">paint-order</span>’ プロパティ</a></li>
                    <li><a href="painting.html#ColorInterpolation"><span class="secno">13.9.</span> 補間の色空間：
                            ‘<span class="property">color-interpolation</span>’ プロパティ</a></li>
                    <li><a href="painting.html#RenderingHints"><span class="secno">13.10.</span> レンダリングヒント</a>
                        <ol class="toc">
                            <li><a href="painting.html#ColorRendering"><span class="secno">13.10.1.</span> ‘<span
                                        class="property">color-rendering</span>’ プロパティ</a></li>
                            <li><a href="painting.html#ShapeRendering"><span class="secno">13.10.2.</span> ‘<span
                                        class="property">shape-rendering</span>’ プロパティ</a></li>
                            <li><a href="painting.html#TextRendering"><span class="secno">13.10.3.</span> ‘<span
                                        class="property">text-rendering</span>’ プロパティ</a></li>
                            <li><a href="painting.html#ImageRendering"><span class="secno">13.10.4.</span> ‘<span
                                        class="property">image-rendering</span>’ プロパティ</a></li>
                        </ol>
                    </li>
                    <li><a href="painting.html#WillChange"><span class="secno">13.11.</span> ‘<span
                                class="property">will-change</span>’ プロパティの効果</a></li>
                    <li><a href="painting.html#DOMInterfaces"><span class="secno">13.12.</span> DOM インターフェース</a>
                        <ol class="toc">
                            <li><a href="painting.html#InterfaceSVGMarkerElement"><span class="secno">13.12.1.</span>
                                    SVGMarkerElement インターフェース</a></li>
                        </ol>
                    </li>
                </ol>
            </li>
        </ol>
    </nav>

    <div class="ready-for-wider-review">
        <h2 id="Introduction" class="heading">13.1. はじめに<a class="self-link" href="#Introduction"></a></h2>

        <h3 id="Definitions" class="heading">13.1.1. 用語定義<a class="self-link" href="#Definitions"></a></h3>
        <dl class="definitions">

            <dt><dfn id="TermFill" data-dfn-type="dfn" data-export="">fill</dfn></dt>
            <dd><a href="painting.html#TermPaint">塗り</a>の操作は、<a
                    href="shapes.html#TermShapeElement">図形</a>の内部やテキスト文字列の文字グリフの内部を描画することです。</dd>

            <dt><dfn id="TermStroke" data-dfn-type="dfn" data-export="">stroke</dfn></dt>
            <dd><a href="painting.html#TermPaint">塗り</a>の操作は、<a
                    href="shapes.html#TermShapeElement">図形</a>の輪郭やテキスト文字列の文字グリフの輪郭を描画することです。</dd>

        </dl>

        <p>図形を定義するグラフィカル要素（<span class="element-name">‘<a
                    href="paths.html#PathElement"><span>path</span></a>’</span>要素、<a
                href="shapes.html#TermBasicShapeElement">基本図形</a>、<a
                href="text.html#TermTextContentElement">テキストコンテンツ要素</a>）は、オブジェクトの内部を<strong>塗りつぶし</strong>（fill）し、オブジェクトの輪郭に沿って<strong>ストローク</strong>（stroke）してレンダリングされます。塗りつぶしとストロークはどちらも<strong>塗装</strong>操作です。SVG
            2 ではグラフィカル要素の塗りやストロークに利用できる様々なペイントをサポートしています：</p>

        <ul>
            <li>単色</li>
            <li>グラデーション（線形または放射状）</li>
            <li>パターン（ベクターまたはラスタ、タイル化も可能）</li>
            <li>CSS Image Value 構文 [<a href="refs.html#ref-css-images-3">css-images-3</a>] で指定された他の画像</li>
        </ul>

        <p>要素の塗りつぶしやストロークに使用するペイントは、<a class="property" href="painting.html#FillProperty">fill</a> および <a
                class="property" href="painting.html#StrokeProperty">stroke</a>
            プロパティで指定します。次のセクションでは、これらのプロパティで使用できる値について説明します。</p>

        <p>他にも <a class="property" href="painting.html#FillOpacityProperty">fill-opacity</a> や <a class="property"
                href="painting.html#StrokeWidthProperty">stroke-width</a> などのプロパティが、塗りやストロークペイントのキャンバスへの適用方法に影響します。下記の
            <a href="#FillProperties">塗りプロパティ</a> や <a href="#StrokeProperties">ストロークプロパティ</a>
            のセクションでこれらのプロパティについて説明します。
        </p>

        <p>一部のグラフィック要素（<span class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span>要素や<a
                href="shapes.html#TermBasicShapeElement">基本図形</a>）は、頂点や経路上のその他の位置に<strong>マーカーシンボル</strong>を描画することができます。下記の
            <a href="#Markers">マーカー</a> セクションでは、マーカーの定義と使用方法について説明します。
        </p>

        <p class="annotation">SVG 2 は図形へのマーカーを追加しました。<a
                href="https://www.w3.org/2013/06/03-svg-minutes.html#item03">東京F2F</a>で決定。</p>

        <h2 id="SpecifyingPaint" class="heading">13.2. ペイントの指定<a class="self-link" href="#SpecifyingPaint"></a>
        </h2>

        <div class="annotation svg2-requirement">
            <table>
                <tr>
                    <th>SVG 2 要件：</th>
                    <td>現在の塗りペイントやストロークペイントなどを参照する新しいペイント値を追加。</td>
                </tr>
                <tr>
                    <th>決定：</th>
                    <td><a href="https://www.w3.org/2011/07/29-svg-minutes.html#item02">SVG 2 に currentFillPaint,
                            currentStrokePaint など新しいペイント値を追加します。</a></td>
                </tr>
                <tr>
                    <th>目的：</th>
                    <td>主に、マーカーの色をストロークの色に簡単に合わせる方法を提供するため。</td>
                </tr>
                <tr>
                    <th>担当者：</th>
                    <td>Chris (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3094">ACTION-3094</a>)</td>
                </tr>
            </table>
        </div>

        <div class="annotation svg2-requirement">
            <table>
                <tr>
                    <th>SVG 2 追加：</th>
                    <td>fill や stroke に複数のペイントを許可。</td>
                </tr>
                <tr>
                    <th>決定：</th>
                    <td><a href="https://www.w3.org/2013/06/03-svg-minutes.html#item10">SVG 2 では fill および stroke
                            プロパティに複数のペイントを許可します。</a></td>
                </tr>
                <tr>
                    <th>目的：</th>
                    <td>クロスハッチング（斜線処理）や、半透明パターンを実線塗りの上に重ねるなどに有用。</td>
                </tr>
                <tr>
                    <th>担当者：</th>
                    <td>Tav (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3500">ACTION-3500</a>)</td>
                </tr>
                <tr>
                    <th>延期：</th>
                    <td>これは SVG 2 では見送られましたが、<a href="https://drafts.fxtf.org/paint/">CSS Fill and Stroke Level 3</a>
                        に合わせて後で追加されます。</td>
                </tr>
            </table>
        </div>

        <p>下記で定義されている <a class="property" href="painting.html#FillProperty">fill</a> および <a class="property"
                href="painting.html#StrokeProperty">stroke</a> プロパティは、図形やテキストの内部や輪郭を描画するために使われる <dfn id="TermPaint"
                data-dfn-type="dfn"
                data-export="">paint</dfn>（ペイント）を指定します。ペイント仕様はキャンバス上に色を付ける方法を記述し、1つ以上のペイントレイヤーで構成されます。これらのペイントレイヤー内でサポートされるペイントタイプは4種類あり、<a
                href="https://www.w3.org/TR/css3-values/#colors">単色</a>、<a href="pservers.html#Gradients">グラデーション</a>、<a
                href="pservers.html#Patterns">パターン</a>です。</p>

        <p><a href="painting.html#SpecifyingPaint">&lt;paint></a>値は以下のように定義されます：</p>
        <p class="definition prod">
            <dfn id="DataTypePaint" data-dfn-type="type" data-export="">&lt;paint></dfn>
            = none
            | <a href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a>
            | <a href="https://www.w3.org/TR/css3-values/#url-value">&lt;url></a> [none | <a
                href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a>]?
            | context-fill | context-stroke
        </p>

        <p>値の種類：</p>
        <dl>
            <dt>none</dt>
            <dd>このレイヤーにはペイントが適用されません。</dd>

            <dt><a href="https://www.w3.org/TR/css3-values/#url-value">&lt;url></a> [none | <a
                    href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a>]?</dt>
            <dd><dfn id="TermPaintServerElement" data-dfn-type="dfn" data-export="">paint server 要素</dfn>へのURL参照です。paint
                server要素は<a href="pservers.html">paint server</a>を定義する要素で、<span class="element-name">‘<a
                        href="pservers.html#LinearGradientElement"><span>linearGradient</span></a>’</span>、<span
                    class="element-name">‘<a href="pservers.html#PatternElement"><span>pattern</span></a>’</span>、<span
                    class="element-name">‘<a
                        href="pservers.html#RadialGradientElement"><span>radialGradient</span></a>’</span>があります。paint
                server参照が解決できない場合に使用されるフォールバック値（noneまたは色）を後ろに指定できます。</dd>

            <dt><a href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a></dt>
            <dd>単色ペイントです。</dd>

            <dt>context-fill</dt>
            <dd><a class="property" href="painting.html#FillProperty">fill</a> のペイント値を <a
                    href="painting.html#TermContextElement">context element</a> から取得します。</dd>

            <dt>context-stroke</dt>
            <dd><a class="property" href="painting.html#StrokeProperty">stroke</a> のペイント値を <a
                    href="painting.html#TermContextElement">context element</a> から取得します。</dd>
        </dl>

        <p><a href="painting.html#SpecifyingPaint">&lt;paint></a> では paint server参照の後に、<a
                href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a> またはキーワード <span
                class="prop-value">none</span> を任意で指定できます。これらの値が指定された場合、<a
                href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a> や <span class="prop-value">none</span>
            は、そのレイヤーの paint server参照が無効（要素が存在しない、または有効なpaint serverでない場合）な場合に使われるフォールバック値です。</p>

        <p class="note">CSSのbackground構文とは少し異なり、<a class="property"
                href="https://drafts.csswg.org/css-backgrounds-3/#background">background</a>値の最終レイヤーで画像と色を指定した場合は、画像と色の両方が描画されます。
        </p>

        <p><a href="painting.html#SpecifyingPaint">&lt;paint></a>でのpaint
            server参照が無効で、フォールバック値が指定されていない場合、そのレイヤーにはペイントが描画されません。</p>

        <p class="annotation">SVG 1.1の挙動から変更されており、paint server参照が無効かつフォールバック色が指定されていない場合、ドキュメントはエラーになっていました。</p>

        <div class="example">
            <pre>
&lt;rect width="100" height="100" fill="url(#MyHatch) powderblue">
  </pre>
            <div class="figure">
                <img alt="フォールバックの単色ペイント塗りの例。" src="https://www.w3.org/TR/SVG2/images/painting/fallback_paint.svg" />
                <p class="caption">左の矩形は MyHatch が定義されている場合の塗り。右の矩形は MyHatch が存在しない場合の塗り。</p>
            </div>
        </div>

        <p>どの <a href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a> 値でも、<a
                href="https://www.w3.org/TR/css-color-3/#colorunits">CSS Color Module Level 3</a> で定義されたすべての色構文（<span
                class="prop-value">rgb()</span>、<span class="prop-value">rgba()</span>、<span
                class="prop-value">hsl()</span>、<span class="prop-value">hsla()</span>、<a
                href="https://www.w3.org/TR/css-color-3/#svg-color">拡張カラーキーワード</a>、<span
                class="prop-value">currentColor</span>値など）がサポートされなければなりません。</p>

        <p id="context-paint"><span class="prop-value">context-fill</span> および <span
                class="prop-value">context-stroke</span>値は、それぞれ <a class="property"
                href="painting.html#FillProperty">fill</a> や <a class="property"
                href="painting.html#StrokeProperty">stroke</a> プロパティによって生成されるペイントレイヤーを参照します。これは描画対象要素の <dfn
                id="TermContextElement" data-dfn-type="dfn" data-export="">context element</dfn> のものです。context element
            の定義は以下の通りです：</p>

        <ul>
            <li>要素が <span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span>
                の内部にあり、<a href="painting.html#TermMarkerProperties">marker property</a>経由でそのマーカーの一部として描画される場合、context
                element はその <span class="element-name">‘<a
                        href="painting.html#MarkerElement"><span>marker</span></a>’</span> を参照している要素です。</li>
            <li>要素が <span class="element-name">‘<a href="struct.html#UseElement"><span>use</span></a>’</span>
                要素でインスタンス化されたサブツリー内にある場合、context element はその <span class="element-name">‘<a
                        href="struct.html#UseElement"><span>use</span></a>’</span> 要素です。</li>
            <li>それ以外の場合、context element はありません。</li>
        </ul>

        <p>context element がなく、これらのキーワードが使われた場合、ペイントは適用されません。</p>
        <p>
            context paintレイヤーがpaint server参照を含む場合、paint server要素やコンテンツのスケールに使われる座標空間やバウンディングボックスは <a
                href="painting.html#TermContextElement">context element</a>
            のものです。つまり、これらのキーワードで参照されるグラデーションやパターンは、メインの形状からマーカーへ、または <a
                href="struct.html#TermUseElementShadowTree">use要素シャドウツリー</a>内の要素間で連続性があるべきです。
        </p>

        <p>参照先 <a class="property" href="painting.html#FillProperty">fill</a> や <a class="property"
                href="painting.html#StrokeProperty">stroke</a> の値が <span class="prop-value">context-fill</span> や <span
                class="prop-value">context-stroke</span> の場合、そのコンテキスト参照は再帰的です。</p>

        <div class="example">
            <pre>&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  &lt;style>
    path {
      fill: none;
      stroke-width: 4px;
      marker: url(#diamond);
    }
  &lt;/style>
  &lt;path d="M 10,50 v -20 h 40 v -20" stroke="red"/>
  &lt;path d="M 30,70 v -20 h 40 v -20" stroke="green"/>
  &lt;path d="M 50,90 v -20 h 40 v -20" stroke="blue"/>
  &lt;marker id="diamond" markerWidth="12" markerHeight="12" refX="6" refY="6"
          markerUnits="userSpaceOnUse">
    &lt;circle cx="6" cy="6" r="3"
            fill="white" stroke="context-stroke" stroke-width="2"/>
  &lt;/marker>
&lt;/svg></pre>
            <div class="figure">
                <img alt="マーカー内で content-stroke キーワードを利用した例"
                    src="https://www.w3.org/TR/SVG2/images/painting/marker-context.svg11.svg" height="200" />
                <p class="caption">マーカーは <a class="property" href="painting.html#StrokeProperty">stroke</a> に <span
                        class="prop-value">context-stroke</span> を指定した形状で定義されています。これにより、マーカーはそれぞれの <span
                        class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span>
                    要素のストローク色を引き継ぎます。</p>
            </div>
        </div>


        <h2 id="ColorProperty" class="heading">13.3. ‘<span class="property">color</span>’ プロパティの効果<a class="self-link"
                href="#ColorProperty"></a></h2>

        <p class="note"> <a class="property" href="painting.html#ColorProperty">color</a> の定義については CSS Color Module
            Level 3 仕様を参照してください。
            [<a href="refs.html#ref-css-color-3">css-color-3</a>]</p>

        <p><a class="property" href="painting.html#ColorProperty">color</a> プロパティは、<span
                class="prop-value">currentColor</span> のような間接値として、
            <a class="property" href="painting.html#FillProperty">fill</a>、
            <a class="property" href="painting.html#StrokeProperty">stroke</a>、<a class="property"
                href="pservers.html#StopColorProperty">stop-color</a>、<a class="property"
                href="https://drafts.fxtf.org/filter-effects/#FloodColorProperty">flood-color</a>、
            <a class="property" href="https://drafts.fxtf.org/filter-effects/#LightingColorProperty">lighting-color</a>
            プロパティの値として利用されます。このプロパティは SVG 要素に他の影響はありません。
        </p>

        <div class="example">
            <p>次の例は、HTML ドキュメントから継承された <a class="property" href="painting.html#ColorProperty">color</a> プロパティの値が、
                インライン SVG フラグメント内の SVG テキストの色設定にどのように使われるかを示しています。
            </p>

            <pre>
&lt;!DOCTYPE html>
&lt;style>
body { color: #468; font: 16px sans-serif }
svg { border: 1px solid #888; background-color: #eee }
&lt;/style>
&lt;p>Please see the diagram below:&lt;/p>
&lt;svg width="200" height="100">
  &lt;g fill="currentColor">
    &lt;text x="70" y="55" text-anchor="end">START&lt;/text>
    &lt;text x="130" y="55">STOP&lt;/text>
    &lt;path d="M 85,45 h 25 v -5 l 10,10 -10,10 v -5 h -25 z"/>
  &lt;/g>
&lt;/svg>
</pre>

            <div class="figure">
                <div class="bordered"
                    style="color: #468; font: 16px sans-serif; display: inline-block; text-align: left; padding: 32px 128px 32px 32px">
                    <p style="margin-top: 0; margin-bottom: 1em">Please see the diagram below:</p>
                    <svg xmlns="http://www.w3.org/2000/svg" width="200" height="100"
                        style="border: 1px solid #888; background-color: #eee">
                        <g fill="currentColor">
                            <text x="70" y="55" text-anchor="end">START</text>
                            <text x="130" y="55">STOP</text>
                            <path d="M 85,45 h 25 v -5 l 10,10 -10,10 v -5 h -25 z" />
                        </g>
                    </svg>
                </div>
                <p class="caption">SVG フラグメント内のテキストと矢印は、継承された <a class="property"
                        href="painting.html#ColorProperty">color</a> プロパティと同じ色で塗りつぶされています。</p>
            </div>
        </div>

        <h2 id="FillProperties" class="heading">13.4. 塗りプロパティ<a class="self-link" href="#FillProperties"></a>
        </h2>

        <h3 id="SpecifyingFillPaint" class="heading">13.4.1. 塗りペイントの指定：‘<span class="property">fill</span>’ プロパティ<a
                class="self-link" href="#SpecifyingFillPaint"></a></h3>

        <table class="propdef def">
            <tr>
                <th>名前：</th>
                <td><dfn id="FillProperty" data-dfn-type="property" data-export="">fill</dfn></td>
            </tr>
            <tr>
                <th>値：</th>
                <td><a href="painting.html#SpecifyingPaint">&lt;paint></a></td>
            </tr>
            <tr>
                <th>初期値：</th>
                <td>black</td>
            </tr>
            <tr>
                <th>適用対象：</th>
                <td><a href="shapes.html#TermShapeElement">図形</a>および <a
                        href="text.html#TermTextContentElement">テキストコンテンツ要素</a></td>
            </tr>
            <tr>
                <th>継承：</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>パーセンテージ：</th>
                <td>N/A</td>
            </tr>
            <tr>
                <th>メディア：</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>算出値：</th>
                <td>指定通り。ただし <a href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a> の値は計算され、
                    <a href="https://www.w3.org/TR/css3-values/#url-value">&lt;url></a> の値は絶対化される
                </td>
            </tr>
            <tr>
                <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>：</th>
                <td>はい</td>
            </tr>
        </table>

        <p><a class="property" href="painting.html#FillProperty">fill</a> プロパティは、指定されたグラフィカル要素の内部を塗りつぶします。
            塗りつぶす領域は図形の輪郭内側のすべての領域です。内部領域の決定にはすべてのサブパスを考慮し、<a class="property"
                href="painting.html#FillRuleProperty">fill-rule</a> プロパティの現在値に関連するルールに従って内側が決定されます。
            図形のゼロ幅の幾何学的輪郭も塗り領域に含まれます。</p>

        <p>塗り操作は、<a href="paths.html#TermClosedSubpath">オープンサブパス</a>に対して、サブパスの最後の点と最初の点を結ぶ追加の "closepath"
            コマンドが加えられたかのように塗り操作を実行します。
            したがって、塗り操作は <a href="paths.html#TermClosedSubpath">オープンサブパス</a>（closepath コマンドのないものを含む）や
            <span class="element-name">‘<a href="shapes.html#PolylineElement"><span>polyline</span></a>’</span>
            要素にも適用されます。
        </p>

        <h3 id="WindingRule" class="heading">13.4.2. ワインディングルール：‘<span class="property">fill-rule</span>’
            プロパティ<a class="self-link" href="#WindingRule"></a></h3>

        <table class="propdef def">
            <tr>
                <th>名前：</th>
                <td><dfn id="FillRuleProperty" data-dfn-type="property" data-export="">fill-rule</dfn></td>
            </tr>
            <tr>
                <th>値：</th>
                <td>nonzero | evenodd</td>
            </tr>
            <tr>
                <th>初期値：</th>
                <td>nonzero</td>
            </tr>
            <tr>
                <th>適用対象：</th>
                <td><a href="shapes.html#TermShapeElement">図形</a>および <a
                        href="text.html#TermTextContentElement">テキストコンテンツ要素</a></td>
            </tr>
            <tr>
                <th>継承：</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>パーセンテージ：</th>
                <td>N/A</td>
            </tr>
            <tr>
                <th>メディア：</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>算出値：</th>
                <td>指定通り</td>
            </tr>
            <tr>
                <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>：</th>
                <td>はい</td>
            </tr>
        </table>

        <p><a class="property" href="painting.html#FillRuleProperty">fill-rule</a>
            プロパティは、図形の内側領域を決定するためのアルゴリズム（<em>ワインディングルール</em>）を指定します。
            単純な交差のないパスの場合は「内側」領域は直感的に分かりますが、複雑な自己交差するパスや一方のサブパスが他方を囲むような場合は「内側」の解釈が明確でない場合があります。
        </p>

        <p><a class="property" href="painting.html#FillRuleProperty">fill-rule</a>
            プロパティは、図形の内側をどのように決定するかについて2つの選択肢を提供します：</p>

        <dl>
            <dt><span class="prop-value">nonzero</span></dt>
            <dd>
                <p>このルールは、キャンバス上の点から任意の方向に無限遠まで光線（レイ）を引き、その光線と図形のセグメントが交差する場所を調べることで「内側」判定を行います。
                    初期値をゼロとして、パスセグメントが左から右へ光線を横切るたびに1を加算し、右から左へ横切るたびに1を減算します。交差数の合計がゼロならその点は<em>外側</em>、ゼロ以外なら<em>内側</em>です。下図は
                    <span class="prop-value">nonzero</span> ルールの効果を示しています：
                </p>

                <div class="figure">
                    <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/fillrule-nonzero.svg"
                        alt="nonzero fill rule の画像" />
                    <p class="caption">自己交差や囲まれたサブパスを持つパスに対する nonzero fill rule の効果。</p>
                </div>
            </dd>

            <dt><span class="prop-value">evenodd</span></dt>
            <dd>
                <p>このルールは、キャンバス上の点から任意の方向に無限遠まで光線を引き、その光線が図形のパスセグメントと交差する回数を数えることで「内側」判定を行います。交差数が奇数なら点は内側、偶数なら外側です。下図は
                    <span class="prop-value">evenodd</span> ルールの効果を示しています：
                </p>

                <div class="figure">
                    <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/fillrule-evenodd.svg"
                        alt="evenodd fill rule の画像" />
                    <p class="caption">自己交差や囲まれたサブパスを持つパスに対する evenodd fill rule の効果。</p>
                </div>
            </dd>
        </dl>

        <p class="note">上記の説明は、パスセグメントが光線と一致したり接する場合の扱いを規定していません。任意の光線を選べるので、そのような問題が起こらない光線を選べばよいです。</p>

        <h3 id="FillOpacity" class="heading">13.4.3. 塗りペイントの不透明度：‘<span class="property">fill-opacity</span>’
            プロパティ<a class="self-link" href="#FillOpacity"></a></h3>

        <table class="propdef def">
            <tr>
                <th>名前：</th>
                <td><dfn id="FillOpacityProperty" data-dfn-type="property" data-export="">fill-opacity</dfn></td>
            </tr>
            <tr>
                <th>値：</th>
                <td><a href="https://www.w3.org/TR/css-color/#typedef-alpha-value">&lt;alpha-value></a></td>
            </tr>
            <tr>
                <th>初期値：</th>
                <td>1</td>
            </tr>
            <tr>
                <th>適用対象：</th>
                <td><a href="shapes.html#TermShapeElement">図形</a>および <a
                        href="text.html#TermTextContentElement">テキストコンテンツ要素</a></td>
            </tr>
            <tr>
                <th>継承：</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>パーセンテージ：</th>
                <td>N/A</td>
            </tr>
            <tr>
                <th>メディア：</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>算出値：</th>
                <td>指定された値を数値に変換し、範囲 [0,1] に制限されたもの</td>
            </tr>
            <tr>
                <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>：</th>
                <td>はい</td>
            </tr>
        </table>

        <p><a class="property" href="painting.html#FillOpacityProperty">fill-opacity</a>
            は、現在のオブジェクトの塗りを描画する際の不透明度を指定します。（<a href="render.html#PaintingShapesAndText">図形とテキストの描画</a>を参照）。
        </p>

        <dl>
            <dt><span class="prop-value">&lt;number></span></dt>
            <dd>
                塗りの不透明度。0（完全に透明）から1（完全に不透明）以外の値はこの範囲に制限されます。
            </dd>
            <dt><span class="prop-value">&lt;percentage></span></dt>
            <dd>
                塗りの不透明度を 0 から 1 の範囲のパーセンテージで表現します。
            </dd>
        </dl>

        <p class="note">グループ全体の不透明度を指定する <a class="property"
                href="render.html#ObjectAndGroupOpacityProperties">opacity</a> プロパティも参照してください。</p>

        <h2 id="StrokeProperties" class="heading">13.5. ストロークプロパティ<a class="self-link" href="#StrokeProperties"></a>
        </h2>

        <div class="annotation svg2-requirement">
            <table>
                <tr>
                    <th>SVG 2 要件：</th>
                    <td>非スケーリングストロークをサポートする。</td>
                </tr>
                <tr>
                    <th>決議：</th>
                    <td><a href="https://www.w3.org/2011/10/28-svg-irc#T17-46-34">SVG 2 に非スケーリングストロークを含める。</a><br />
                        <a href="https://www.w3.org/2012/02/02-svg-minutes.html#item05">SVG 2 に ‘<span
                                class="property">vector-effect</span>’ プロパティを追加する。</a>
                    </td>
                </tr>
                <tr>
                    <th>目的：</th>
                    <td>地図などで一般的な、ページをズームしても線幅が変わらないストロークをサポートするため。</td>
                </tr>
                <tr>
                    <th>担当：</th>
                    <td>Chris または Erik（アクションなし）</td>
                </tr>
                <tr>
                    <th>備考：</th>
                    <td>より汎用的な非スケーリング機能の一部になる可能性があります。</td>
                </tr>
            </table>
        </div>

        <p>本節では、作者がストロークのペイント、太さ、破線の利用、パスセグメントの結合やキャップなど、ストロークのさまざまな要素を制御できるプロパティを定義します。</p>

        <p>全ての場合において、ダッシュパターンなど方向性に影響されるストロークプロパティは、グラフィック要素の開始点からストローク操作が始まるように描画されなければなりません。特に、<span
                class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span> 要素の場合、パスの開始点は最初の
            "moveto" コマンドの点です。</p>

        <p>破線パターンなど、アウトラインの進行に依存する計算を行うストロークプロパティでは、距離計算は SVG ユーザーエージェントの標準的な <a
                href="paths.html#DistanceAlongAPath">パス上の距離</a>アルゴリズムを使う必要があります。</p>

        <p>グラデーションやパターンなど複雑なペイントサーバーでストロークを行う場合、ストローク操作は、現在のグラフィック要素の幾何形状と関連するストロークプロパティで定義される図形を等価な <span
                class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span>
            要素に変換し、指定されたペイントサーバーで塗りつぶした場合と同一の結果になる必要があります。</p>

        <h3 id="SpecifyingStrokePaint" class="heading">13.5.1. ストロークペイントの指定：‘<span class="property">stroke</span>’
            プロパティ<a class="self-link" href="#SpecifyingStrokePaint"></a></h3>

        <table class="propdef def">
            <tr>
                <th>名前：</th>
                <td><dfn id="StrokeProperty" data-dfn-type="property" data-export="">stroke</dfn></td>
            </tr>
            <tr>
                <th>値：</th>
                <td><a href="painting.html#SpecifyingPaint">&lt;paint></a></td>
            </tr>
            <tr>
                <th>初期値：</th>
                <td>none</td>
            </tr>
            <tr>
                <th>適用対象：</th>
                <td><a href="shapes.html#TermShapeElement">図形</a>および <a
                        href="text.html#TermTextContentElement">テキストコンテンツ要素</a></td>
            </tr>
            <tr>
                <th>継承：</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>パーセンテージ：</th>
                <td>N/A</td>
            </tr>
            <tr>
                <th>メディア：</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>算出値：</th>
                <td>指定通り。ただし <a href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a> の値は計算され、
                    <a href="https://www.w3.org/TR/css3-values/#url-value">&lt;url></a> の値は絶対化される
                </td>
            </tr>
            <tr>
                <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>：</th>
                <td>はい</td>
            </tr>
        </table>

        <p><a class="property" href="painting.html#StrokeProperty">stroke</a> プロパティは、指定されたグラフィカル要素の輪郭に沿って描画します。</p>

        <p class="note"> <span class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span>
            要素のストローク時、<a href="paths.html#PathDataMovetoCommands">moveto</a> のみで線描画コマンドがないサブパスはストロークされません。
            <span class="attr-value">'M 10,10 L 10,10'</span> や <span class="attr-value">'M 30,30 Z'</span>
            のような他の種類のゼロ長サブパスも、<a class="property" href="painting.html#StrokeLinecapProperty">stroke-linecap</a> プロパティの値が
            <span class="prop-value">butt</span> の場合ストロークされません。パスのストローク形状計算の詳細は下記 <a
                href="painting.html#TermStrokeShape">stroke shape</a> の定義を参照してください。
        </p>

        <div class="annotation svg2-requirement">
            <table>
                <tr>
                    <th>SVG 2 要件：</th>
                    <td>ストローク位置を指定する方法を含める。</td>
                </tr>
                <tr>
                    <th>決議：</th>
                    <td><a href="https://www.w3.org/2011/10/28-svg-irc#T18-09-48">SVG 2 ではストローク位置を指定する方法を含める。</a></td>
                </tr>
                <tr>
                    <th>目的：</th>
                    <td>ストロークをパスの内側や外側に配置できるようにするため。</td>
                </tr>
                <tr>
                    <th>担当：</th>
                    <td>Cameron (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3162">ACTION-3162</a>)</td>
                </tr>
                <tr>
                    <th>備考：</th>
                    <td><a href="https://www.w3.org/Graphics/SVG/WG/wiki/Proposals/Stroke_position">提案ページ</a>参照。</td>
                </tr>
            </table>
        </div>

        <h3 id="StrokeOpacity" class="heading">13.5.2. ストロークペイントの不透明度：‘<span class="property">stroke-opacity</span>’
            プロパティ<a class="self-link" href="#StrokeOpacity"></a></h3>

        <table class="propdef def">
            <tr>
                <th>名前：</th>
                <td><dfn id="StrokeOpacityProperty" data-dfn-type="property" data-export="">stroke-opacity</dfn></td>
            </tr>
            <tr>
                <th>値：</th>
                <td><a href="https://www.w3.org/TR/css-color/#typedef-alpha-value">&lt;alpha-value></a></td>
            </tr>
            <tr>
                <th>初期値：</th>
                <td>1</td>
            </tr>
            <tr>
                <th>適用対象：</th>
                <td><a href="shapes.html#TermShapeElement">図形</a>および <a
                        href="text.html#TermTextContentElement">テキストコンテンツ要素</a></td>
            </tr>
            <tr>
                <th>継承：</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>パーセンテージ：</th>
                <td>N/A</td>
            </tr>
            <tr>
                <th>メディア：</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>算出値：</th>
                <td>指定された値を数値に変換し、範囲 [0,1] に制限されたもの</td>
            </tr>
            <tr>
                <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>：</th>
                <td>はい</td>
            </tr>
        </table>

        <p><a class="property" href="painting.html#StrokeOpacityProperty">stroke-opacity</a>
            プロパティは、現在のオブジェクトをストロークする際の塗装操作の不透明度を指定します。（<a href="render.html#PaintingShapesAndText">図形とテキストの描画</a>を参照）。<a
                class="property" href="painting.html#FillOpacityProperty">fill-opacity</a> と同様です。
        </p>

        <dl>
            <dt><span class="prop-value">&lt;number></span></dt>
            <dd>
                ストロークの不透明度。0（完全透明）から1（完全不透明）以外の値はこの範囲に制限されます。
            </dd>
            <dt><span class="prop-value">&lt;percentage></span></dt>
            <dd>
                ストロークの不透明度を 0 から 1 の範囲のパーセンテージで表現します。
            </dd>
        </dl>

        <p class="note">グループ全体の不透明度を指定する <a class="property"
                href="render.html#ObjectAndGroupOpacityProperties">opacity</a> プロパティも参照してください。</p>

        <h3 id="StrokeWidth" class="heading">13.5.3. ストローク幅：‘<span class="property">stroke-width</span>’
            プロパティ<a class="self-link" href="#StrokeWidth"></a></h3>

        <table class="propdef def">
            <tr>
                <th>名前：</th>
                <td><dfn id="StrokeWidthProperty" data-dfn-type="property" data-export="">stroke-width</dfn></td>
            </tr>
            <tr>
                <th>値：</th>
                <td><a href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a>
                </td>
            </tr>
            <tr>
                <th>初期値：</th>
                <td>1</td>
            </tr>
            <tr>
                <th>適用対象：</th>
                <td><a href="shapes.html#TermShapeElement">図形</a>および <a
                        href="text.html#TermTextContentElement">テキストコンテンツ要素</a></td>
            </tr>
            <tr>
                <th>継承：</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>パーセンテージ：</th>
                <td>現在の SVG ビューポートのサイズを参照（<a href="coords.html#Units">単位</a>参照）</td>
            </tr>
            <tr>
                <th>メディア：</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>算出値：</th>
                <td>絶対長またはパーセンテージ</td>
            </tr>
            <tr>
                <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>：</th>
                <td>はい</td>
            </tr>
        </table>

        <p>このプロパティは、現在のオブジェクトのストローク幅を指定します。値がゼロの場合、ストロークは描画されません。負の値は<a href="types.html#TermInvalidValue">無効</a>です。</p>

        <h3 id="LineCaps" class="heading">13.5.4. ストローク端のキャップ描画：‘<span class="property">stroke-linecap</span>’
            プロパティ<a class="self-link" href="#LineCaps"></a></h3>

        <table class="propdef def">
            <tr>
                <th>名前：</th>
                <td><dfn id="StrokeLinecapProperty" data-dfn-type="property" data-export="">stroke-linecap</dfn></td>
            </tr>
            <tr>
                <th>値：</th>
                <td>butt | round | square</td>
            </tr>
            <tr>
                <th>初期値：</th>
                <td>butt</td>
            </tr>
            <tr>
                <th>適用対象：</th>
                <td><a href="shapes.html#TermShapeElement">図形</a>および <a
                        href="text.html#TermTextContentElement">テキストコンテンツ要素</a></td>
            </tr>
            <tr>
                <th>継承：</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>パーセンテージ：</th>
                <td>N/A</td>
            </tr>
            <tr>
                <th>メディア：</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>算出値：</th>
                <td>指定通り</td>
            </tr>
            <tr>
                <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>：</th>
                <td>はい</td>
            </tr>
        </table>

        <p><a class="property" href="painting.html#StrokeLinecapProperty">stroke-linecap</a> は、<a
                href="paths.html#TermClosedSubpath">オープンサブパス</a>をストロークする際の端部の形状や、<span
                class="ready-for-wider-review">ゼロ長サブパス（オープン・クローズどちらも）</span>の描画形状を指定します。指定可能な値は：</p>

        <dl>
            <dt><span class="prop-value">butt</span></dt>
            <dd>各サブパスのストロークはその両端を超えて延長されません。ゼロ長サブパスにはストロークが描画されません。</dd>

            <dt><span class="prop-value">round</span></dt>
            <dd>
                <p>各サブパスの両端で、ストローク形状はストローク幅と同じ直径の半円で延長されます。サブパスがゼロ長の場合（オープン・クローズどちらでも）、そのサブパスのストロークは中心点に完全な円のみが描画されます。
                </p>
            </dd>

            <dt><span class="prop-value">square</span></dt>
            <dd>
                <p>各サブパスの両端で、ストローク形状はストローク幅と同じ幅、長さがストローク幅の半分の矩形で延長されます。サブパスがゼロ長の場合（オープン・クローズどちらでも）、そのサブパスのストロークは中心点にストローク幅と同じ辺の長さの正方形が描画され、2辺はその点の接線に平行になります。ゼロ長サブパスの接線の決定方法については
                    <a href="paths.html#PathElementImplementationNotes"><span class="element-name">‘path’</span>
                        要素実装ノート</a> を参照してください。
                </p>
            </dd>
        </dl>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/linecap.svg" alt="3種類のラインキャップの例" />
            <p class="caption">ラインキャップの3種類。</p>
        </div>

        <p>ラインキャップの形状の詳細については、下記 <a href="painting.html#TermCapShape">cap shape</a> の定義を参照してください。</p>

        <h3 id="LineJoin" class="heading">13.5.5. 線の結合制御：‘<span class="property">stroke-linejoin</span>’
            および ‘<span class="property">stroke-miterlimit</span>’ プロパティ<a class="self-link" href="#LineJoin"></a>
        </h3>

        <table class="propdef def">
            <tr>
                <th>名前：</th>
                <td><dfn id="StrokeLinejoinProperty" data-dfn-type="property" data-export="">stroke-linejoin</dfn></td>
            </tr>
            <tr>
                <th>値：</th>
                <td>miter | miter-clip | round | bevel | arcs </td>
            </tr>
            <tr>
                <th>初期値：</th>
                <td>miter</td>
            </tr>
            <tr>
                <th>適用対象：</th>
                <td><a href="shapes.html#TermShapeElement">図形</a>および <a
                        href="text.html#TermTextContentElement">テキストコンテンツ要素</a></td>
            </tr>
            <tr>
                <th>継承：</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>パーセンテージ：</th>
                <td>N/A</td>
            </tr>
            <tr>
                <th>メディア：</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>算出値：</th>
                <td>指定通り</td>
            </tr>
            <tr>
                <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>：</th>
                <td>はい</td>
            </tr>
        </table>

        <p><a class="property" href="painting.html#StrokeLinejoinProperty">stroke-linejoin</a>
            は、パスや基本図形をストロークする際に、コーナー部分に使われる形状を指定します。詳細は <a href="paths.html#PathElementImplementationNotes">path
                実装ノート</a>を参照してください。</p>

        <dl>
            <dt><span class="prop-value">miter</span></dt>
            <dd>この値は、パスセグメントの接合部に鋭角なコーナー（隅）を使うことを示します。コーナーはパスセグメントの接線方向にストロークの外側エッジを延長し、交点ができるまで延長して形成されます。<a
                    class="property" href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a> を超える場合は、ライン結合は
                <span class="prop-value">bevel</span> にフォールバックします（下記参照）。
            </dd>

            <dt><span class="prop-value">miter-clip</span></dt>
            <dd>この値は <span class="prop-value">miter</span> と同じですが、<a class="property"
                    href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a> を超える場合は、パスセグメントの交点からストローク幅に <a
                    class="property" href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a>
                の半分を掛けた距離でミター（隅）がクリップされます（下記参照）。</dd>

            <dt><span class="prop-value">round</span></dt>
            <dd>この値は、パスセグメントの接合部に丸いコーナーを使うことを示します。コーナーは接合点を中心とした円弧（扇形）です。</dd>

            <dt><span class="prop-value">bevel</span></dt>
            <dd>この値は、パスセグメントの接合部にベベル（斜角）コーナーを使うことを示します。ベベル形状は2つのストロークセグメント間の領域を三角形で埋める形です。</dd>

            <dt><span class="prop-value">arcs</span></dt>
            <dd>この値は、パスセグメントの接合部にアーク（円弧）コーナーを使うことを示します。アーク形状は、接合点でストロークの外側エッジを、同じ曲率を持つ円弧で延長して形成されます。</dd>
        </dl>

        <p class="note">
            <span class="prop-value">miter-clip</span> と <span class="prop-value">arcs</span> の値は SVG 2 で新しく追加されました。
            <span class="prop-value">miter-clip</span> は、複数の結合部を持つパスやアニメーション時に一貫した表示を提供します。
            <span class="prop-value">arcs</span> は、接合部のパスセグメントが曲線の場合に、より美しい結合を実現します。
        </p>

        <p class="annotation">
            'arcs' ライン結合の追加は
            <a href="https://www.w3.org/2012/09/19-svg-minutes.html#item08">Rigi Kaltbad グループミーティング</a>で決定されました。
        </p>

        <p class="annotation">
            'miter-clip' ライン結合の追加は
            <a href="https://www.w3.org/2015/02/12-svg-minutes.html#item03">シドニー（2015）グループミーティング</a>で決定されました。
        </p>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/linejoin-four.svg"
                alt="4種類のライン結合の画像。" />
            <p class="caption">4種類のライン結合。</p>
        </div>

        <table class="propdef def">
            <tr>
                <th>名前：</th>
                <td><dfn id="StrokeMiterlimitProperty" data-dfn-type="property" data-export="">stroke-miterlimit</dfn>
                </td>
            </tr>
            <tr>
                <th>値：</th>
                <td><a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a></td>
            </tr>
            <tr>
                <th>初期値：</th>
                <td>4</td>
            </tr>
            <tr>
                <th>適用対象：</th>
                <td><a href="shapes.html#TermShapeElement">図形</a>および <a
                        href="text.html#TermTextContentElement">テキストコンテンツ要素</a></td>
            </tr>
            <tr>
                <th>継承：</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>パーセンテージ：</th>
                <td>N/A</td>
            </tr>
            <tr>
                <th>メディア：</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>算出値：</th>
                <td>指定通り</td>
            </tr>
            <tr>
                <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>：</th>
                <td>はい</td>
            </tr>
        </table>

        <p>
            2本の線分が鋭角で交わる場合、<span class="prop-value">miter</span>、
            <span class="prop-value">miter-clip</span>、または
            <span class="prop-value">arcs</span> の値が <a class="property"
                href="painting.html#StrokeLinejoinProperty">stroke-linejoin</a>
            に指定されている場合、結合部がパスのストローク幅よりも大きく延長される可能性があります���
            <a class="property" href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a> は、ライン結合の延長範囲を制限します。
        </p>

        <dl>
            <dt><span class="prop-value">&lt;number></span></dt>
            <dd>
                <span class="prop-value">miter</span>、
                <span class="prop-value">miter-clip</span>、または
                <span class="prop-value">arcs</span> ライン結合の制限値。<a class="property"
                    href="painting.html#StrokeWidthProperty">stroke-width</a> の倍数として指定します。
                <a class="property" href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a> に負の値を指定した場合は <a
                    href="https://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#illegalvalues">不正な値</a>として扱われます。
            </dd>
        </dl>

        <p class="note">
            従来のSVG仕様では0〜1の値もエラーとされていましたが、ユーザーエージェントのCSSパーサーでは正しく実装されていませんでした。実際には、どのミター結合も0〜1のミターリミットを超えます。
        </p>

        <p>
            <span class="prop-value">miter</span> または <span class="prop-value">miter-clip</span> の値の場合、ユーザー座標系でセグメント間の角度
            <var>θ</var> が与えられるとき、ミター長は次式で求められます：
        </p>

        <div role="math" aria-describedby="math-miter-length">
            <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                <mrow>
                    <mi>miter length</mi>
                    <mo>=</mo>
                    <mfrac>
                        <mi style="font-family: sans-serif">‘stroke-width’</mi>
                        <mrow>
                            <mi>sin</mi>
                            <mo>⁡</mo>
                            <mfrac>
                                <mi>θ</mi>
                                <mn>2</mn>
                            </mfrac>
                        </mrow>
                    </mfrac>
                </mrow>
            </math>
            <pre id="math-miter-length">miter length = stroke-width / sin(theta / 2)</pre>
        </div>

        <div class="note">
            <p>
                歴史的には、ミター長は交差するパスセグメントの内側ストロークエッジからミターの先端までの距離と定義されていました。実際にはこれは直線パスセグメントのみで使われています。上記の角度に基づく定義は、接合部の接線だけに依存し、パスセグメントの曲率に関係なく一貫した結果を得られます。この定義と一貫性を持たせるため、<span
                    class="prop-value">miter-clip</span> や <span class="prop-value">arcs</span>
                のクリッピング位置は、パスセグメントの接合点からストローク幅×<a class="property"
                    href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a> の半分の距離または円弧長になります。
            </p>
            <div class="figure">
                <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/miter-limit-def.svg"
                    alt="ストロークミター長の定義と異なる形状のパス間でのクリッピング一貫性の画像。" />
                <p class="caption">
                    左：歴史的なミター長の定義。
                    右：結合点で同じ接線を持つ2つの異なるパス。ミター結合（ベベルへのフォールバックやクリップ位置）の挙動は両方のパスで同じ。内側ストロークエッジの交点位置には依存しません。
                </p>
            </div>
        </div>

        <p>
            ミター長÷ストローク幅が <a class="property" href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a>
            を超える場合、次のように処理されます：
        </p>
        <dl>
            <dt><span class="prop-value">miter</span></dt>
            <dd>
                結合はベベルに変換されます。
            </dd>
            <dt><span class="prop-value">miter-clip</span></dt>
            <dd>
                ミターは2つのパスセグメントの角度の二等分線に垂直な線でクリップされます。クリップ位置はミター長の半分の距離です。
            </dd>
        </dl>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/miter-limit.svg"
                alt="stroke-miterlimit を超えたときのライン結合の効果" />
            <p class="caption">
                <a class="property" href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a>
                を超えた場合のライン結合の効果。オリーブ色の破線が <a class="property"
                    href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a> 値 3
                の位置を示す。灰色部分はミターリミットがなかった場合の結合形状。
            </p>
        </div>

        <p>
            <span class="prop-value">arcs</span>
            の場合、<em>ミター長</em>は2セグメントの交点で角度の二等分線に接する円弧上で計算され、その円弧が結合部の端点を通ります。必要に応じて、この円弧に垂直な線で、交点からストローク幅×<a
                class="property" href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a> の半分の円弧長でクリップされます。
        </p>

        <p class="annotation">
            'arcs' ライン結合への 'stroke-miterlimit' の効果は
            <a href="https://www.w3.org/2015/02/12-svg-minutes.html#item12">シドニー（2015）グループミーティング</a>で決定されました。
        </p>

        <p>
            ライン結合形状の詳細については、下記 <a href="painting.html#TermLineJoinShape">line join shape</a> の定義を参照してください。
        </p>

        <h3 id="StrokeDashing" class="heading">13.5.6. 破線ストローク：‘<span class="property">stroke-dasharray</span>’ および
            ‘<span class="property">stroke-dashoffset</span>’ プロパティ<a class="self-link" href="#StrokeDashing"></a>
        </h3>

        <table class="propdef def">
            <tr>
                <th>名前：</th>
                <td><dfn id="StrokeDasharrayProperty" data-dfn-type="property" data-export="">stroke-dasharray</dfn>
                </td>
            </tr>
            <tr>
                <th>値：</th>
                <td>none | <a href="painting.html#DataTypeDasharray">&lt;dasharray></a></td>
            </tr>
            <tr>
                <th>初期値：</th>
                <td>none</td>
            </tr>
            <tr>
                <th>適用対象：</th>
                <td><a href="shapes.html#TermShapeElement">図形</a>および <a
                        href="text.html#TermTextContentElement">テキストコンテンツ要素</a></td>
            </tr>
            <tr>
                <th>継承：</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>パーセンテージ：</th>
                <td>現在のSVGビューポートのサイズを参照（<a href="coords.html#Units">単位</a>参照）</td>
            </tr>
            <tr>
                <th>メディア：</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>算出値：</th>
                <td>&lt;dasharray>は絶対長またはパーセンテージ、または指定されたキーワード</td>
            </tr>
            <tr>
                <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>：</th>
                <td>はい（<a href="https://svgwg.org/specs/animations/#AdditionAttributes">非加算</a>）</td>
            </tr>
        </table>

        <p>where:</p>

        <p class="definition prod"><dfn id="DataTypeDasharray" data-dfn-type="type" data-export="">&lt;dasharray></dfn>
            =
            [ <a href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a> | <a
                href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a> ]#*</p>

        <p><a class="property" href="painting.html#StrokeDasharrayProperty">stroke-dasharray</a>
            プロパティは、パスのストローク形状に使われる破線と隙間のパターンを制御します。</p>

        <dl>
            <dt><span class="prop-value">none</span></dt>
            <dd>破線は使用されません。</dd>

            <dt><span class="prop-value">&lt;dasharray></span></dt>
            <dd>
                <p>使用する破線パターンを指定します。<a href="painting.html#DataTypeDasharray">&lt;dasharray></a>
                    はカンマまたは空白区切りの長さまたはパーセンテージのリストです。
                    各値はパス上でストロークを描画する長さ（<em>dash</em>）と、描画しない長さ（<em>gap</em>）を指定します。
                    リストの最初と以降2つごとにダッシュ長、その他は隙間長を指定します。値が奇数個の場合は偶数個になるまで繰り返します（例：<span
                        class="prop-value">stroke-dasharray: 5,3,2</span>は<span class="prop-value">stroke-dasharray:
                        5,3,2,5,3,2</span>と同じ動作）。
                </p>
                <p>偶数長の破線パターンが各サブパス上で繰り返されます。破線パターンは各サブパスの開始位置でリセットされます。</p>
                <p>リスト内に負の値がある場合、<a href="painting.html#DataTypeDasharray">&lt;dasharray></a>値は<a
                        href="types.html#TermInvalidValue">無効</a>です。値が全てゼロの場合、ストロークは実線として描画されます。</p>
            </dd>
        </dl>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/dashes.svg" alt="太い破線ストロークの画像。" />
            <p class="caption">破線ストローク。パターンは <span class="prop-value">20,10</span>。赤い線は実際にストロークされたパス。</p>
        </div>

        <p><span class="attr-name">‘<a href="paths.html#PathLengthAttribute"><span>pathLength</span></a>’</span>
            属性（<span class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span>要素）は
            <a class="property" href="painting.html#StrokeDasharrayProperty">stroke-dasharray</a>
            に影響します：各ダッシュ・ギャップ長は著者が指定した <span class="attr-name">‘<a
                    href="paths.html#PathLengthAttribute"><span>pathLength</span></a>’</span> に対して解釈されます。
        </p>

        <table class="propdef def">
            <tr>
                <th>名前：</th>
                <td><dfn id="StrokeDashoffsetProperty" data-dfn-type="property" data-export="">stroke-dashoffset</dfn>
                </td>
            </tr>
            <tr>
                <th>値：</th>
                <td><a href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a>
                </td>
            </tr>
            <tr>
                <th>初期値：</th>
                <td>0</td>
            </tr>
            <tr>
                <th>適用対象：</th>
                <td><a href="shapes.html#TermShapeElement">図形</a>および <a
                        href="text.html#TermTextContentElement">テキストコンテンツ要素</a></td>
            </tr>
            <tr>
                <th>継承：</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>パーセンテージ：</th>
                <td>現在のSVGビューポートのサイズを参照（<a href="coords.html#Units">単位</a>参照）</td>
            </tr>
            <tr>
                <th>メディア：</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>算出値：</th>
                <td>絶対長またはパーセンテージ</td>
            </tr>
            <tr>
                <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>：</th>
                <td>はい</td>
            </tr>
        </table>

        <p><a class="property" href="painting.html#StrokeDashoffsetProperty">stroke-dashoffset</a>
            プロパティは、繰り返し破線パターンの開始点をパスの最初からどれだけ距離を取るかを指定します。負の値の場合、dash offset <var>d</var> として次式と同じ効果になります：</p>

        <div role="math" aria-describedby="math-dashoffset">
            <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                <mrow>
                    <mi>d</mi>
                    <mo>=</mo>
                    <mi>s</mi>
                    <mo>-</mo>
                    <mfenced open="|" close="|">
                        <mi style="font-family: sans-serif">‘stroke-dashoffset’</mi>
                    </mfenced>
                    <mo>mod</mo>
                    <mi>s</mi>
                </mrow>
            </math>
            <pre id="math-dashoffset">d = s - (abs(stroke-dashoffset) mod s)</pre>
        </div>

        <p>ここで <var>s</var> は dash array の値の合計です。</p>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/dashoffset.svg"
                alt="非ゼロの dash offset を持つ太い破線ストロークの画像。" />
            <p class="caption">非ゼロ dash offset の破線ストローク。パターンは <span class="prop-value">20,10</span>、dash offset は <span
                    class="prop-value">15</span>。赤線はストロークされた実際のパス。</p>
        </div>

        <p><a class="property" href="painting.html#StrokeDasharrayProperty">stroke-dasharray</a> と同様に、<a
                class="property" href="painting.html#StrokeDashoffsetProperty">stroke-dashoffset</a> も <span
                class="attr-name">‘<a href="paths.html#PathLengthAttribute"><span>pathLength</span></a>’</span>
            属性で指定された著者のパス長に対して解釈されます。</p>

        <div class="example">
            <p>下記の例は、実際のパス長と大きく異なる <span class="attr-name">‘<a
                        href="paths.html#PathLengthAttribute"><span>pathLength</span></a>’</span>
                を使うことで、ストローク破線を簡単に制御できることを示しています。</p>

            <pre>&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
     width="300" height="150">
  &lt;defs>
    &lt;path id="p" d="M -50,0 A 50,50 0 0 0 50,0 A 50,50 0 0 0 -50,0 z"
          pathLength="80"/>
    &lt;g id="chip" stroke-width="10">
      &lt;circle cy="5" r="55" fill="#000" fill-opacity="0.15" stroke="none"/>
      &lt;use xlink:href="#p"/>
      &lt;use xlink:href="#p" fill="none" stroke="#eee" stroke-width="10"
           stroke-dasharray="10 10" stroke-dashoffset="5"/>
      &lt;g fill="none" stroke-width="5" stroke-dasharray="0 20" stroke-linecap="round">
        &lt;use xlink:href="#p" stroke="#eee" stroke-dashoffset="10"/>
        &lt;use xlink:href="#p" stroke-dashoffset="0"/>
      &lt;/g>
      &lt;circle r="40" fill="#000" fill-opacity="0.15"
              stroke-width="2" stroke="white"/>
    &lt;/g>
  &lt;/defs>
  &lt;rect width="100%" height="100%" fill="#063"/>
  &lt;use xlink:href="#chip" x="140" y="75" fill="#00c" stroke="#00c"/>
  &lt;use xlink:href="#chip" x="160" y="85" fill="#000" stroke="#000"/>
  &lt;use xlink:href="#chip" x="170" y="65" fill="#c00" stroke="#c00"/>
&lt;/svg></pre>

            <div class="figure">
                <img src="https://www.w3.org/TR/SVG2/images/painting/dash-pathlength.svg"
                    alt="カジノチップ3つの画像。各チップの縁取りはストロークの破線で作成。" />
                <p class="caption">各チップ周囲の太い白い破線と小さな円状の破線は、著者指定 <span class="attr-name">‘<a
                            href="paths.html#PathLengthAttribute"><span>pathLength</span></a>’</span> <span
                        class="attr-value">'80'</span> を基準として配置されているため、
                    <a class="property" href="painting.html#StrokeDasharrayProperty">stroke-dasharray</a> や <a
                        class="property" href="painting.html#StrokeDashoffsetProperty">stroke-dashoffset</a> の値の計算が容易です。
                </p>
            </div>
        </div>

        <p>パス上の破線の配置位置の詳細については、下記 <a href="painting.html#TermDashPositions">dash positions</a> の定義を参照してください。</p>
    </div>

    <div class="ready-for-wider-review">
        <h3 id="StrokeShape" class="heading">13.5.7. ストローク形状の計算<a class="self-link" href="#StrokeShape"></a></h3>

        <div class="annotation svg2-requirement">
            <table>
                <tr>
                    <th>SVG 2 要件：</th>
                    <td>ストロークの破線指定をより厳密に。</td>
                </tr>
                <tr>
                    <th>決議：</th>
                    <td><a href="https://www.w3.org/2011/10/28-svg-irc#T18-14-14">SVG 2 ではストロークの破線指定をより厳密に規定する。</a></td>
                </tr>
                <tr>
                    <th>目的：</th>
                    <td>基本図形やパスセグメントでの破線開始点を定義するため。</td>
                </tr>
                <tr>
                    <th>担当：</th>
                    <td>Cameron（アクションなし）</td>
                </tr>
            </table>
        </div>

        <div class="ready-for-wider-review">
            <p>要素の <dfn id="TermStrokeShape" data-dfn-type="dfn" data-export="">ストローク形状</dfn> とは、<a class="property"
                    href="painting.html#StrokeProperty">stroke</a> プロパティで塗りつぶされる形状です。
                <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
                要素は複数のチャンクで描画される場合があるため、各チャンクは独自の
                <a href="painting.html#TermStrokeShape">ストローク形状</a>を持ちます。以下のアルゴリズムは、<span class="element-name">‘<a
                        href="paths.html#PathElement"><span>path</span></a>’</span>、
                <a href="shapes.html#TermBasicShapeElement">基本図形</a>、または個々の <span class="element-name">‘<a
                        href="text.html#TextElement"><span>text</span></a>’</span>チャンクの理想的なストローク形状を、上記のストローク関連プロパティを考慮して説明します。ここで説明する理想的なストローク形状はベストケースの実装を定義しますが、パフォーマンス上の理由により実装には多少の裁量が許されます。
            </p>

            <div class="note">
                作者は、ストローク形状が非常に急な曲線などのケースでプラットフォームごとに異なる場合があることに注意すべきです。
                <div class="figure">
                    <img class="bordered"
                        src="https://www.w3.org/TR/SVG2/images/painting/stroke-tight-corner-render-examples.png"
                        alt="ストローク形状がプラットフォームごとに異なる例。" />
                    <p class="caption">ストローク描画形状がプラットフォームごとに異なる例。</p>
                </div>
                上記の例は、次の2つのSVGパスに対して得られる描画結果の一例を示しています：
                <pre>&lt;svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M 1,3 C 8,2 8,6 7,6" stroke-width="4" fill="none" stroke="skyblue"/>
&lt;path d="M 1,3 C 8,2 8,6 7,6" stroke-width="0.075" fill="none" stroke="black"/>
&lt;/svg></pre>
            </div>
        </div>

        理想的なストローク形状は以下のように決定されます：

        <ol class="algorithm">
            <li><var>shape</var> を空の形状とする。</li>
            <li class="ready-for-wider-review"><a class="property"
                    href="painting.html#StrokeWidthProperty">stroke-width</a> > 0 の場合：
                <ol>
                    <li>ダッシュパターンのスケール係数 <var>scale</var> を決定する。<span class="element-name">‘<a
                                href="text.html#TextElement"><span>text</span></a>’</span> チャンクのストローク形状を計算する場合、
                        または <span class="attr-name">‘<a
                                href="paths.html#PathLengthAttribute"><span>pathLength</span></a>’</span> 属性が要素に存在しない場合は
                        <var>scale</var> = 1。それ以外は以下のように決定：
                        <ol>
                            <li><var>length</var> をユーザーエージェントが計算した <span class="element-name">‘<a
                                        href="paths.html#PathElement"><span>path</span></a>’</span> または <a
                                    href="paths.html#TermEquivalentPath">等価なパス</a>（<a
                                    href="shapes.html#TermBasicShapeElement">基本図形</a>の場合） の長さとする。
                            </li>
                            <li><var>authorlength</var> を <a href="shapes.html#TermShapeElement">図形</a> の <span
                                    class="attr-name">‘<a
                                        href="paths.html#PathLengthAttribute"><span>pathLength</span></a>’</span>
                                属性値とする。</li>
                            <li><var>scale</var> = <var>authorlength</var> / <var>length</var>。</li>
                        </ol>
                    </li>
                    <li><var>path</var> を要素の <a href="paths.html#TermEquivalentPath">等価なパス</a>（または <span
                            class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
                        の個々のチャンク）とする。</li>
                    <li><var>path</var> の各サブパスについて：
                        <ol>
                            <li><var>positions</var> をサブパスの <a href="painting.html#TermDashPositions">破線位置</a> とする。</li>
                            <li><var>positions</var> 内の各ペア &lt;<var>start</var>, <var>end</var>> について：
                                <ol>
                                    <li><var>start</var> と <var>end</var> を <var>scale</var> でスケールする。</li>

                                    <li>サブパス上の <var>start</var> から <var>end</var> までの距離間において、サブパス上の各点でその点に垂直な直線上で
                                        <a class="property" href="painting.html#StrokeWidthProperty">stroke-width</a>
                                        の範囲内にある点全てを含む形状を <var>dash</var> とする。
                                    </li>

                                    <li><var>dash</var> を、サブパスの <var>start</var> 位置での始端 <a
                                            href="painting.html#TermCapShape">キャップ形状</a> と和集合にする。</li>

                                    <li><var>dash</var> を、サブパスの <var>end</var> 位置での終端 <a
                                            href="painting.html#TermCapShape">キャップ形状</a> と和集合にする。</li>

                                    <li>
                                        <var>index</var> および <var>last</var> を、サブパス上の <var>start</var> および
                                        <var>end</var> の距離位置にある
                                        パスセグメントのインデックスとする。

                                        <p class="note">ゼロ長セグメントが含まれても <var>index</var> と <var>last</var> の選択には影響しません。
                                        </p>
                                    </li>

                                    <li><var>index</var> &lt; <var>last</var> の間：
                                        <ol>
                                            <li><var>dash</var> を、サブパス上 <var>index</var> の <a
                                                    href="painting.html#TermLineJoinShape">ライン結合形状</a> と和集合にする。</li>
                                            <li><var>index</var> = <var>index</var> + 1。</li>
                                        </ol>
                                    </li>

                                    <li><var>shape</var> を、<var>shape</var> と <var>stroke</var> の和集合にする。</li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li><var>shape</var> を返す。</li>
        </ol>

        <p>ある <span class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span> や <a
                href="shapes.html#TermBasicShapeElement">基本図形</a> の <a href="paths.html#TermEquivalentPath">等価なパス</a> の
            サブパスにおける <dfn id="TermDashPositions" data-dfn-type="dfn" data-export="">破線位置</dfn> は、
            サブパスのストロークを構成する破線の開始・終了距離のペアの並びであり、以下のように決定されます：</p>

        <ol class="algorithm">
            <li><var>pathlength</var> をサブパスの長さとする。</li>

            <li><var>dashes</var> を要素の <a class="property"
                    href="painting.html#StrokeDasharrayProperty">stroke-dasharray</a>
                の値（ユーザー単位に変換）、偶数個になるまで繰り返したリストとする。プロパティ値が
                <span class="prop-value">none</span> の場合、リストは値 0 のみ。
            </li>

            <li><var>count</var> を <var>dashes</var> の要素数とする。</li>
            <li><var>sum</var> を <var>dashes</var> の合計値とする。</li>

            <li><var>sum</var> = 0 の場合、&lt;0, <var>pathlength</var>> のペアのみの並びを返す。</li>

            <li><var>positions</var> を空の並びとする。</li>

            <li><var>offset</var> を要素の <a class="property"
                    href="painting.html#StrokeDashoffsetProperty">stroke-dashoffset</a> プロパティ値とする。</li>

            <li><var>offset</var> が負の場合、<var>offset</var> = <var>sum</var> − abs(<var>offset</var>)。</li>

            <li><var>offset</var> = <var>offset</var> mod <var>sum</var>。</li>

            <li><var>index</var> を sum(<var>dashes<sub>i</sub></var>, 0 ≤ <var>i</var> ≤ <var>index</var>) ≥
                <var>offset</var> となる最小整数とする。
            </li>

            <li><var>dashlength</var> = min(sum(<var>dashes<sub>i</sub></var>, 0 ≤ <var>i</var> ≤ <var>index</var>) −
                <var>offset</var>,
                <var>pathlength</var>)。
            </li>

            <li>index mod 2 = 0 の場合、<var>positions</var> に &lt;0, <var>dashlength</var>> を追加。</li>

            <li><var>position</var> = <var>dashlength</var>。</li>

            <li><var>position</var> &lt; <var>pathlength</var> の間： <ol>
                    <li><var>index</var> = (<var>index</var> + 1) mod <var>count</var>。</li>
                    <li><var>dashlength</var> = min(<var>dashes</var><sub><var>index</var></sub>, <var>pathlength</var>
                        −
                        <var>position</var>)。
                    </li>
                    <li>index mod 2 = 0 の場合、<var>positions</var> に &lt;<var>position</var>, <var>position</var> +
                        <var>dashlength</var>> を追加。
                    </li>
                    <li><var>position</var> = <var>position</var> + <var>dashlength</var>。</li>
                </ol>
            </li>

            <li><var>positions</var> を返す。</li>
        </ol>

        <p>サブパス上のある <var>position</var> における始端・終端 <dfn id="TermCapShape" data-dfn-type="dfn" data-export="">キャップ形状</dfn>
            は以下のように決定されます：
        </p>

        <ol class="algorithm">
            <li><a class="property" href="painting.html#StrokeLinecapProperty">stroke-linecap</a> が <span
                    class="prop-value">butt</span> の場合、空の形状を返す。</li>

            <li>それ以外で <a class="property" href="painting.html#StrokeLinecapProperty">stroke-linecap</a> が <span
                    class="prop-value">round</span> の場合：
                <ol>
                    <li>始端キャップの場合、直径 <a class="property" href="painting.html#StrokeWidthProperty">stroke-width</a>
                        の半円を返す。配置条件：
                        <ul>
                            <li class="ready-for-wider-review">半円が基準とするサブパスは <var>position</var> から始まる。</li>
                            <li>直線エッジはサブパス上 <var>position</var> の点に垂直な線に平行。</li>
                            <li>直線エッジの中点はサブパス上 <var>position</var> の点。</li>
                            <li>円弧の中点から直線エッジの中点への方向はサブパスの <var>position</var> の方向と同じ。</li>
                        </ul>
                    </li>
                    <li>終端キャップの場合、直径 <a class="property" href="painting.html#StrokeWidthProperty">stroke-width</a>
                        の半円を返す。配置条件：
                        <ul>
                            <li class="ready-for-wider-review">半円が基準とするサブパスは <var>position</var> で終わる。</li>
                            <li>直線エッジはサブパス上 <var>position</var> の点に垂直な線に平行。</li>
                            <li>直線エッジの中点はサブパス上 <var>position</var> の点。</li>
                            <li>直線エッジの中点から円弧の中点への方向はサブパスの方向と同じ。</li>
                        </ul>
                    </li>
                </ol>
            </li>

            <li>それ以外の場合、<a class="property" href="painting.html#StrokeLinecapProperty">stroke-linecap</a> が <span
                    class="prop-value">square</span> の場合：
                <ol>
                    <li>始端キャップの場合、辺の長さ <a class="property" href="painting.html#StrokeWidthProperty">stroke-width</a> と
                        <a class="property" href="painting.html#StrokeWidthProperty">stroke-width</a> / 2 の矩形を返す。配置条件：
                        <ul>
                            <li>長辺 <var>A</var> と <var>B</var> はサブパス上 <var>position</var> の点に垂直な線に平行。</li>
                            <li><var>A</var> の中点は <var>start</var>。</li>
                            <li><var>B</var> の中点から <var>A</var> の中点への方向はサブパス上 <var>position</var> の方向と同じ。</li>
                        </ul>
                    </li>
                    <li>終端キャップの場合、辺の長さ <a class="property" href="painting.html#StrokeWidthProperty">stroke-width</a> と
                        <a class="property" href="painting.html#StrokeWidthProperty">stroke-width</a> / 2 の矩形を返す。配置条件：
                        <ul>
                            <li>長辺 <var>A</var> と <var>B</var> はサブパス上 <var>position</var> の点に垂直な線に平行。</li>
                            <li><var>A</var> の中点は <var>end</var>。</li>
                            <li><var>A</var> の中点から <var>B</var> の中点への方向はサブパス上 <var>position</var> の方向と同じ。</li>
                        </ul>
                    </li>
                </ol>
            </li>
        </ol>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/linecap-construction.svg"
                alt="3種類のラインキャップの構成例" />
            <p class="caption">単一・非ゼロ長のサブパスで用いる3種類の <a class="property"
                    href="painting.html#StrokeLinecapProperty">stroke-linecap</a>
                の例。白線はパス本体、太い灰色部分がストローク。上段の緑線はパス端点の接線に垂直な線で、ピンク部分がキャップ。下段は垂直線とキャップの強調なしのストローク。</p>
        </div>

        <p>サブパスのあるセグメントに対する <dfn id="TermLineJoinShape" data-dfn-type="dfn" data-export="">ライン結合形状</dfn> は以下のように決定されます：
        </p>

        <ol class="algorithm">
            <li>セグメント終端点 <var>P</var> を取る。</li>

            <li>セグメント終端の単位接線ベクトルと次セグメント始端の単位接線ベクトルが等しければ空の形状を返す。
                <p class="note">例えば <span class="attr-value">'M 100,100 h 100 h 100'</span> は2つの直線間で結合形状を生じないが、
                    <span class="attr-value">'M 100,100 h 100 h -100'</span> なら生じる。
                </p>
            </li>

            <li>終端接線に平行な線 <var>A</var> を取る。</li>
            <li>次セグメント始端接線に平行な線 <var>B</var> を取る。</li>

            <li><var>A<sub>left</sub></var>、<var>A<sub>right</sub></var> を <var>A</var> の左・右に <a class="property"
                    href="painting.html#StrokeWidthProperty">stroke-width</a> / 2 離した線（サブパス方向基準）とする。</li>

            <li><var>B<sub>left</sub></var>、<var>B<sub>right</sub></var> を <var>B</var> の左・右に <a class="property"
                    href="painting.html#StrokeWidthProperty">stroke-width</a> / 2 離した線（サブパス方向基準）とする。</li>

            <li>
                <var>P</var><sub>1</sub>、<var>P</var><sub>2</sub>、<var>P</var><sub>3</sub> を以下で決定：
                <ol>
                    <li>小さい角度が右側の場合、<var>P</var><sub>1</sub>・<var>P</var><sub>2</sub>は
                        <var>A<sub>left</sub></var>・<var>B<sub>left</sub></var>上の
                        <var>P</var>に最も近い点、<var>P</var><sub>3</sub>はそれらの交点。
                    </li>
                    <li>それ以外は <var>A<sub>right</sub></var>・<var>B<sub>right</sub></var>上の最近点と交点。</li>
                </ol>
            </li>

            <li><var>P</var>・<var>P</var><sub>1</sub>・<var>P</var><sub>2</sub> で三角形 <var>bevel</var> を形成。</li>

            <li><a class="property" href="painting.html#StrokeLinejoinProperty">stroke-linejoin</a> が <span
                    class="prop-value">round</span> の場合、<var>bevel</var> と、中心 <var>P</var>・直径 <a class="property"
                    href="painting.html#StrokeWidthProperty">stroke-width</a> の扇形（円弧端点
                <var>P</var><sub>1</sub>・<var>P</var><sub>2</sub>）の和集合を返す。
            </li>

            <li><a class="property" href="painting.html#StrokeLinejoinProperty">stroke-linejoin</a> が <span
                    class="prop-value">arcs</span> の場合、結合点 <var>P</var><sub>1</sub>・<var>P</var><sub>2</sub> のストローク端で
                曲率が同じ円を探す（下記参照）。両曲率ゼロなら <span class="prop-value">miter-clip</span>。いずれかが 2/(stroke width) より大きければ <span
                    class="prop-value">round</span> にフォールバック。
                これらの円（または直線）でストローク端を延長。
                円が交差しなければ、両円の半径を等しく調整（もしくは一方のみ）し交差するまで調整（下記参照）。
                結合領域は <var>P</var>と <var>P</var><sub>1</sub>・<var>P</var><sub>2</sub>を結ぶ直線と、交点から各点までの円弧（または円弧＋線）で定義。
                次に <a class="property" href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a>
                で定義されるミターリミットを計算し、それを超える部分をクリップ。結果領域を返す。
                曲率は変形前のユーザー空間で計算。
            </li>

            <li>
                <a class="property" href="painting.html#StrokeLinejoinProperty">stroke-linejoin</a> が <span
                    class="prop-value">miter</span> または
                <span class="prop-value">miter-clip</span> の場合、結合領域は <var>bevel</var> と
                <var>P</var><sub>1</sub>・<var>P</var><sub>2</sub>・<var>P</var><sub>3</sub> の三角形の和集合。
            </li>

            <li>
                <var>θ</var> を <var>A</var>・<var>B</var> の角度とする。1 / sin(<var>θ</var> / 2) ≤ <a class="property"
                    href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a> なら結合領域を返す。
            </li>

            <li>
                <a class="property" href="painting.html#StrokeLinejoinProperty">stroke-linejoin</a> が <span
                    class="prop-value">miter-clip</span> の場合、ミターリミットを超えた部分をクリップして返す。
            </li>

            <li><var>bevel</var> を返す。</li>
        </ol>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/linejoin-construction.svg"
                alt="ラウンドライン結合形状の構成例" />
            <p class="caption">ラウンドライン結合形状（ピンク）。白線が元のパス、2セグメントが点で交わり、灰色部分がストローク。</p>
        </div>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/linejoin-construction-arcs.svg"
                alt="アークライン結合形状の構成例" />
            <p class="caption">アークライン結合形状（ピンク）。白線が元のパス、2セグメントが点で交わり、濃灰色部分がストローク。破線は結合点の曲率円。オリーブ色の円が結合形状定義。</p>
        </div>

        <h3 id="CurvatureCalculation" class="heading">13.5.8. <span class="prop-value">arcs</span>
            'stroke-linejoin' 用円の計算<a class="self-link" href="#CurvatureCalculation"></a></h3>

        <p><span class="prop-value">arcs</span> <a class="property"
                href="painting.html#StrokeLinejoinProperty">stroke-linejoin</a>
            では、パスセグメント端の外側ストロークエッジに接し、同じ曲率を持つ円を求める必要があります。円を求めるにはまず端点での曲率 <var>κ</var> を計算（下記参照）。円の半径 <var>r</var> =
            1/<var>κ</var>。ストローク分の半径補正：<var>r<sub>c</sub></var> = <var>r</var> ± ½ stroke-width。円中心はパス端で法線上
            <var>r<sub>c</sub></var> 離れた位置。
        </p>

        <p>直線の場合：曲率はゼロ。外側ストロークエッジも直線で延長。</p>

        <p>楕円弧の場合：</p>

        <div role="math" aria-describedby="math-curvature-of-ellipse">
            <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                <mi>κ</mi>
                <mo stretchy="false">(</mo>
                <mi>t</mi>
                <mo stretchy="false">)</mo>
                <mo>=</mo>
                <mrow class="MJX-TeXAtom-ORD">
                    <mfrac>
                        <mrow class="MJX-TeXAtom-ORD">
                            <msub>
                                <mi>r</mi>
                                <mi>x</mi>
                            </msub>
                            <msub>
                                <mi>r</mi>
                                <mi>y</mi>
                            </msub>
                        </mrow>
                        <mrow class="MJX-TeXAtom-ORD">
                            <mo stretchy="false">(</mo>
                            <msubsup>
                                <mi>r</mi>
                                <mi>x</mi>
                                <mn>2</mn>
                            </msubsup>
                            <msup>
                                <mi>sin</mi>
                                <mn>2</mn>
                            </msup>
                            <mo>⁡</mo>
                            <mi>t</mi>
                            <mo>+</mo>
                            <msubsup>
                                <mi>r</mi>
                                <mi>y</mi>
                                <mn>2</mn>
                            </msubsup>
                            <msup>
                                <mi>cos</mi>
                                <mn>2</mn>
                            </msup>
                            <mo>⁡</mo>
                            <mi>t</mi>
                            <msup>
                                <mo stretchy="false">)</mo>
                                <mrow class="MJX-TeXAtom-ORD">
                                    <mn>3</mn>
                                    <mrow class="MJX-TeXAtom-ORD">
                                        <mo>/</mo>
                                    </mrow>
                                    <mn>2</mn>
                                </mrow>
                            </msup>
                        </mrow>
                    </mfrac>
                </mrow>
            </math>
            <pre
                id="math-curvature-of-ellipse">$$\kappa(t) = {{r_x r_y}\over{(r_x^2 \sin^2 t + r_y^2 \cos^2 t)^{3/2}}}$$</pre>
        </div>

        <p>ここで：</p>

        <div role="math" aria-describedby="math-curvature-t">
            <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                <mi>t</mi>
                <mo>=</mo>
                <mi>arctan</mi>
                <mo>⁡</mo>
                <mrow>
                    <mo>(</mo>
                    <mrow>
                        <mrow class="MJX-TeXAtom-ORD">
                            <mfrac>
                                <msub>
                                    <mi>r</mi>
                                    <mi>y</mi>
                                </msub>
                                <msub>
                                    <mi>r</mi>
                                    <mi>x</mi>
                                </msub>
                            </mfrac>
                        </mrow>
                        <mi>tan</mi>
                        <mo>⁡</mo>
                        <mi>θ</mi>
                    </mrow>
                    <mo>)</mo>
                </mrow>
            </math>
            <pre id="math-curvature-t">$$t = \arctan \left( {r_y \over r_x} \tan \theta \right)$$</pre>
        </div>

        <p>始端・終端のパラメータ <var>θ</var> は <a href="implnote.html#ArcImplementationNotes">楕円弧実装ノート</a>
            の公式で求める（レンダラによっては楕円弧をキュービックベジエに変換するため不要の場合あり）。</p>

        <p>2次ベジエの場合：</p>

        <div role="math" aria-describedby="math-quadratic-start">
            <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                <mi>κ</mi>
                <mo stretchy="false">(</mo>
                <mn>0</mn>
                <mo stretchy="false">)</mo>
                <mo>=</mo>
                <mrow class="MJX-TeXAtom-ORD">
                    <mfrac>
                        <mn>1</mn>
                        <mn>2</mn>
                    </mfrac>
                </mrow>
                <mrow class="MJX-TeXAtom-ORD">
                    <mfrac>
                        <mrow>
                            <mo stretchy="false">(</mo>
                            <msub>
                                <mi>P</mi>
                                <mn>1</mn>
                            </msub>
                            <mo>−</mo>
                            <msub>
                                <mi>P</mi>
                                <mn>0</mn>
                            </msub>
                            <mo stretchy="false">)</mo>
                            <mo>×</mo>
                            <mo stretchy="false">(</mo>
                            <msub>
                                <mi>P</mi>
                                <mn>2</mn>
                            </msub>
                            <mo>−</mo>
                            <msub>
                                <mi>P</mi>
                                <mn>1</mn>
                            </msub>
                            <mo stretchy="false">)</mo>
                        </mrow>
                        <mrow>
                            <mrow class="MJX-TeXAtom-ORD">
                                <mo stretchy="false">|</mo>
                            </mrow>
                            <msub>
                                <mi>P</mi>
                                <mn>1</mn>
                            </msub>
                            <mo>−</mo>
                            <msub>
                                <mi>P</mi>
                                <mn>0</mn>
                            </msub>
                            <msup>
                                <mrow class="MJX-TeXAtom-ORD">
                                    <mo stretchy="false">|</mo>
                                </mrow>
                                <mn>3</mn>
                            </msup>
                        </mrow>
                    </mfrac>
                </mrow>
            </math>
            <pre
                id="math-quadratic-start">$$\kappa(0) = {2\over3}{(P_1-P_0)\times((P_0-P_1)+(P_2-P_1))\over|P_1-P_0|^3}$$</pre>
        </div>

        <div role="math" aria-describedby="math-quadratic-end">
            <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                <mi>κ</mi>
                <mo stretchy="false">(</mo>
                <mn>1</mn>
                <mo stretchy="false">)</mo>
                <mo>=</mo>
                <mrow class="MJX-TeXAtom-ORD">
                    <mfrac>
                        <mn>1</mn>
                        <mn>2</mn>
                    </mfrac>
                </mrow>
                <mrow class="MJX-TeXAtom-ORD">
                    <mfrac>
                        <mrow>
                            <mo stretchy="false">(</mo>
                            <msub>
                                <mi>P</mi>
                                <mn>2</mn>
                            </msub>
                            <mo>−</mo>
                            <msub>
                                <mi>P</mi>
                                <mn>1</mn>
                            </msub>
                            <mo stretchy="false">)</mo>
                            <mo>×</mo>
                            <mo stretchy="false">(</mo>
                            <msub>
                                <mi>P</mi>
                                <mn>0</mn>
                            </msub>
                            <mo>−</mo>
                            <msub>
                                <mi>P</mi>
                                <mn>1</mn>
                            </msub>
                            <mo stretchy="false">)</mo>
                        </mrow>
                        <mrow>
                            <mrow class="MJX-TeXAtom-ORD">
                                <mo stretchy="false">|</mo>
                            </mrow>
                            <msub>
                                <mi>P</mi>
                                <mn>2</mn>
                            </msub>
                            <mo>−</mo>
                            <msub>
                                <mi>P</mi>
                                <mn>1</mn>
                            </msub>
                            <msup>
                                <mrow class="MJX-TeXAtom-ORD">
                                    <mo stretchy="false">|</mo>
                                </mrow>
                                <mn>3</mn>
                            </msup>
                        </mrow>
                    </mfrac>
                </mrow>
            </math>
            <pre
                id="math-quadratic-end">$$\kappa(0) = {2\over3}{(P_1-P_0)\times((P_0-P_1)+(P_2-P_1))\over|P_1-P_0|^3}$$</pre>
        </div>

        <p><var>κ(0)</var>・<var>κ(1)</var> はパスセグメント始端・終端での符号付き曲率、<var>P</var> は2次ベジエを定義する3点。</p>

        <p>3次ベジエの場合：</p>

        <div role="math" aria-describedby="math-cubic-start">
            <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                <mi>κ</mi>
                <mo stretchy="false">(</mo>
                <mn>0</mn>
                <mo stretchy="false">)</mo>
                <mo>=</mo>
                <mrow class="MJX-TeXAtom-ORD">
                    <mfrac>
                        <mn>2</mn>
                        <mn>3</mn>
                    </mfrac>
                </mrow>
                <mrow class="MJX-TeXAtom-ORD">
                    <mfrac>
                        <mrow>
                            <mo stretchy="false">(</mo>
                            <msub>
                                <mi>P</mi>
                                <mn>1</mn>
                            </msub>
                            <mo>−</mo>
                            <msub>
                                <mi>P</mi>
                                <mn>0</mn>
                            </msub>
                            <mo stretchy="false">)</mo>
                            <mo>×</mo>
                            <mo stretchy="false">(</mo>
                            <msub>
                                <mi>P</mi>
                                <mn>2</mn>
                            </msub>
                            <mo>−</mo>
                            <msub>
                                <mi>P</mi>
                                <mn>1</mn>
                            </msub>
                            <mo stretchy="false">)</mo>
                        </mrow>
                        <mrow>
                            <mrow class="MJX-TeXAtom-ORD">
                                <mo stretchy="false">|</mo>
                            </mrow>
                            <msub>
                                <mi>P</mi>
                                <mn>1</mn>
                            </msub>
                            <mo>−</mo>
                            <msub>
                                <mi>P</mi>
                                <mn>0</mn>
                            </msub>
                            <msup>
                                <mrow class="MJX-TeXAtom-ORD">
                                    <mo stretchy="false">|</mo>
                                </mrow>
                                <mn>3</mn>
                            </msup>
                        </mrow>
                    </mfrac>
                </mrow>
            </math>
            <pre
                id="math-cubic-start">$$\kappa(0) = {2\over3}{(P_1-P_0)\times((P_0-P_1)+(P_2-P_1))\over|P_1-P_0|^3}$$</pre>
        </div>

        <div role="math" aria-describedby="math-cubic-end">
            <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                <mi>κ</mi>
                <mo stretchy="false">(</mo>
                <mn>1</mn>
                <mo stretchy="false">)</mo>
                <mo>=</mo>
                <mrow class="MJX-TeXAtom-ORD">
                    <mfrac>
                        <mn>2</mn>
                        <mn>3</mn>
                    </mfrac>
                </mrow>
                <mrow class="MJX-TeXAtom-ORD">
                    <mfrac>
                        <mrow>
                            <mo stretchy="false">(</mo>
                            <msub>
                                <mi>P</mi>
                                <mn>3</mn>
                            </msub>
                            <mo>−</mo>
                            <msub>
                                <mi>P</mi>
                                <mn>2</mn>
                            </msub>
                            <mo stretchy="false">)</mo>
                            <mo>×</mo>
                            <mo stretchy="false">(</mo>
                            <msub>
                                <mi>P</mi>
                                <mn>1</mn>
                            </msub>
                            <mo>−</mo>
                            <msub>
                                <mi>P</mi>
                                <mn>2</mn>
                            </msub>
                            <mo stretchy="false">)</mo>
                        </mrow>
                        <mrow>
                            <mrow class="MJX-TeXAtom-ORD">
                                <mo stretchy="false">|</mo>
                            </mrow>
                            <msub>
                                <mi>P</mi>
                                <mn>3</mn>
                            </msub>
                            <mo>−</mo>
                            <msub>
                                <mi>P</mi>
                                <mn>2</mn>
                            </msub>
                            <msup>
                                <mrow class="MJX-TeXAtom-ORD">
                                    <mo stretchy="false">|</mo>
                                </mrow>
                                <mn>3</mn>
                            </msup>
                        </mrow>
                    </mfrac>
                </mrow>
            </math>
            <pre
                id="math-cubic-end">$$\kappa(1) = {2\over3}{(P_3-P_2)\times((P_1-P_2)+(P_3-P_2))\over|P_3-P_2|^3}$$</pre>
        </div>

        <p><var>κ(0)</var>・<var>κ(1)</var> はパスセグメント始端・終端での符号付き曲率、<var>P</var>
            は3次ベジエを定義する4点。<var>P<sub>0</sub></var>・<var>P<sub>1</sub></var>、または
            <var>P<sub>2</sub></var>・<var>P<sub>3</sub></var> が退化している場合、曲率は無限大となるため結合形状には直線を用いる。
        </p>

        <h3 id="ArcsLinejoinFallback" class="heading">13.5.9. 初期円が交差しない場合の <span class="prop-value">arcs</span>
            'stroke-linejoin' の円調整<a class="self-link" href="#ArcsLinejoinFallback"></a></h3>

        <p class="annotation">
            フォールバック動作は<a href="https://www.w3.org/2016/02/03-svg-minutes.html#item02">シドニー 2016
                F2F</a>で決定。フォールバックと非フォールバック状態の間の滑らかな遷移を提供します。
        </p>

        <p>
            <span class="prop-value">arcs</span> <a class="property"
                href="painting.html#StrokeLinejoinProperty">stroke-linejoin</a>
            用の初期円が交差しない場合、両方の円の半径を同じ量だけ変更（円中心はオフセットパスの接線を保つよう移動）し、円がちょうど接するまで調整します。2つのケースがあります。1つ目は一方の円が他方を内包する場合。この場合は大きい円を縮小し、小さい円を拡大します：
        </p>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/linejoin-construction-fallback.svg"
                alt="初期円が交差しない場合のアークライン結合形状構成例。" />
            <p class="caption">
                アークライン結合形状（ピンク）。白線が元のパス、濃灰色がストローク。破線は結合点の曲率円。円が交差しない場合、2つの円の半径を同じ量だけ調整し、オリーブ色の円がちょうど接するまで調整。これらの円が結合形状を定義。
            </p>
        </div>

        <p>
            2つめは円同士が重ならない場合。この場合は両円の半径を同じ量だけ増加させます：
        </p>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/linejoin-construction-fallback2.svg"
                alt="初期円が交差しない場合のアークライン結合形状構成例。" />
            <p class="caption">
                アークライン結合形状（ピンク）。白線が元のパス、濃灰色がストローク。破線は結合点の曲率円。円が交差しない場合、オリーブ色の円がちょうど接するまで両円の半径を等しく増加。新円が結合形状を定義。</p>
        </div>

        <p>
            この2つめのケースで、ライン結合点のオフセットパスの接線が平行な場合は、円は接するように調整できません。その場合、結合形状はストローク幅の矩形で、長さはストローク幅×ミターリミットの半分になります：
        </p>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/linejoin-construction-fallback3.svg"
                alt="初期円が交差しない場合のアークライン結合形状構成例。" />
            <p class="caption">
                アークライン結合形状（ピンク）。白線が元のパス、濃灰色がストローク。破線は結合点の曲率円。円の半径を無限大にしても交差しない場合は、結合形状はミターリミットで定まる矩形（縦破線）。</p>
        </div>

        <p class="note">
            フォールバックアルゴリズムの実装方法は複数あります。1つは半径変更量の試行錯誤による再帰的探索。もう1つは接円条件と円中心がパスセグメントの法線上にあるという制約を使った厳密計算。これは2次方程式となり、解の1つが必要な半径変更量となります。
        </p>
    </div>

    <h2 id="PaintingVectorEffects" class="heading">13.6. ベクター効果<a class="self-link" href="#PaintingVectorEffects"></a>
    </h2>

    <p>この章では描画に関連する <a class="property" href="coords.html#VectorEffectProperty">vector-effect</a> について説明します。<a
            href="coords.html#VectorEffects">こちら</a>で <a class="property"
            href="coords.html#VectorEffectProperty">vector-effect</a> の観点も参照してください。</p>

    <dl>
        <dt class="prop-value" id="non-scaling-stroke">non-scaling-stroke</dt>
        <dd>オブジェクトのストローク方法を変更します。通常、ストロークは図形のパスのストロークアウトラインを現行標準の <a
                href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">ユーザー座標系</a>で計算し、そのアウトラインをストロークペイント（色やグラデーション）で塗りつぶします。non-scaling-stroke
            ベクター効果では、ストロークアウトラインは <a
                href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">ユーザー座標系</a>ではなく「ホスト」座標空間で計算されます。より厳密には、ユーザーエージェントはホスト座標空間を確立し、SVG
            Tiny 1.2 では常に「画面座標空間」と同一です。最初に図形のパスをホスト座標空間に変換し、ストロークアウトラインをホスト座標空間で計算します。その結果のアウトラインを再び <a
                href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">ユーザー座標系</a>に戻します。（ストロークアウトラインは常に現行標準のユーザー座標系でストロークペイントで塗りつぶされます。）この変更による視覚効果は、ストローク幅が要素の変形（非一様な拡縮やせん断変形を含む）やズームレベルに依存しなくなることです。
        </dd>
    </dl>




    <div class="ready-for-wider-review">
        <h2 id="Markers" class="heading">13.7. マーカー<a class="self-link" href="#Markers"></a></h2>

        <div class="annotation svg2-requirement">
            <table>
                <tr>
                    <th>SVG 2 要件:</th>
                    <td>マーカーの改良。</td>
                </tr>
                <tr>
                    <th>決定:</th>
                    <td><a href="https://www.w3.org/2011/10/27-svg-irc#T18-12-30">SVG 2 でマーカーを改良します。</a>
                    </td>
                </tr>
                <tr>
                    <th>目的:</th>
                    <td>SVGマーカーに関する著者の一般的な問題を解決するため。</td>
                </tr>
                <tr>
                    <th>担当者:</th>
                    <td>Cameron (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3286">ACTION-3286</a>)</td>
                </tr>
            </table>
        </div>

        <p>マーカーは、任意の <a href="shapes.html#TermShapeElement">図形</a>要素の特定の位置に描画されるグラフィカルオブジェクトです。</p>

        <p><a class="property" href="painting.html#MarkerStartProperty">marker-start</a> および <a class="property"
                href="painting.html#MarkerEndProperty">marker-end</a> プロパティは、
            <a href="shapes.html#TermShapeElement">図形</a>の最初と最後の頂点にマーカーを配置するために使用でき、<a class="property"
                href="painting.html#MarkerMidProperty">marker-mid</a> プロパティはそれ以外の頂点（最初と最後以外）にマーカーを配置できます。
            <a class="property" href="painting.html#MarkerStartProperty">marker-start</a> および <a class="property"
                href="painting.html#MarkerEndProperty">marker-end</a> は、例えばパスに矢印の先端を追加するのに使えます。これらのプロパティで配置されたマーカーは
            <dfn id="TermVertexMarker" data-dfn-type="dfn" data-export="">頂点マーカー</dfn>と呼ばれます。
        </p>

        <p class="note">SVG 2 では頂点マーカーのみが利用可能なマーカー種類です。他の仕様で新しいタイプのマーカーが追加されます。</p>

        <p>マーカーのグラフィックスは <span class="element-name">‘<a
                    href="painting.html#MarkerElement"><span>marker</span></a>’</span> 要素で定義されます。
            <a class="property" href="painting.html#MarkerStartProperty">marker-start</a>、<a class="property"
                href="painting.html#MarkerEndProperty">marker-end</a>、<a class="property"
                href="painting.html#MarkerMidProperty">marker-mid</a> プロパティをまとめて <dfn id="TermMarkerProperties"
                data-dfn-type="dfn" data-export="">markerプロパティ</dfn>と呼び、
            <span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span> 要素を参照します。
        </p>

        <p>マーカーはアニメーション可能で、<span class="element-name">‘<a href="struct.html#UseElement"><span>use</span></a>’</span>
            要素と同様、ドキュメント内の全てのマーカー使用箇所でアニメーション効果が反映されます。</p>

        <p>指定要素上のマーカーは、下記の順で下から上へ描画されます：</p>

        <ul>
            <li><a class="property" href="painting.html#MarkerStartProperty">marker-start</a> で指定されたマーカー</li>
            <li>経路上の順で <a class="property" href="painting.html#MarkerMidProperty">marker-mid</a> マーカー</li>
            <li><a class="property" href="painting.html#MarkerEndProperty">marker-end</a> で指定されたマーカー</li>
        </ul>


        <h3 id="MarkerElement" class="heading">13.7.1. <span class="element-name">‘marker’</span> 要素<a class="self-link"
                href="#MarkerElement"></a></h3>

        <div class="element-summary">
            <div class="element-summary-name"><span class="element-name">‘<dfn data-dfn-type="element" data-export=""
                        id="elementdef-marker">marker</dfn>’</span></div>
            <dl>
                <dt>カテゴリ:</dt>
                <dd><a href="struct.html#TermContainerElement">コンテナ要素</a>, <a
                        href="render.html#TermNeverRenderedElement">非表示要素</a></dd>
                <dt>内容モデル:</dt>
                <dd>以下の要素を任意の順・任意の数で含むことができます:<ul class="no-bullets">
                        <li><a href="https://svgwg.org/specs/animations/#TermAnimationElement">アニメーション要素</a><span
                                class="expanding"> — <span class="element-name">‘<a
                                        href="https://svgwg.org/specs/animations/#AnimateElement"><span>animate</span></a>’</span>,
                                <span class="element-name">‘<a
                                        href="https://svgwg.org/specs/animations/#AnimateMotionElement"><span>animateMotion</span></a>’</span>,
                                <span class="element-name">‘<a
                                        href="https://svgwg.org/specs/animations/#AnimateTransformElement"><span>animateTransform</span></a>’</span>,
                                <span class="element-name">‘<a
                                        href="https://svgwg.org/specs/animations/#DiscardElement"><span>discard</span></a>’</span>,
                                <span class="element-name">‘<a
                                        href="https://svgwg.org/specs/animations/#SetElement"><span>set</span></a>’</span></span>
                        </li>
                        <li><a href="struct.html#TermDescriptiveElement">記述要素</a><span class="expanding"> — <span
                                    class="element-name">‘<a
                                        href="struct.html#DescElement"><span>desc</span></a>’</span>, <span
                                    class="element-name">‘<a
                                        href="struct.html#TitleElement"><span>title</span></a>’</span>, <span
                                    class="element-name">‘<a
                                        href="struct.html#MetadataElement"><span>metadata</span></a>’</span></span></li>
                        <li><a href="painting.html#TermPaintServerElement">ペイントサーバー要素</a><span class="expanding"> —
                                <span class="element-name">‘<a
                                        href="pservers.html#LinearGradientElement"><span>linearGradient</span></a>’</span>,
                                <span class="element-name">‘<a
                                        href="pservers.html#RadialGradientElement"><span>radialGradient</span></a>’</span>,
                                <span class="element-name">‘<a
                                        href="pservers.html#PatternElement"><span>pattern</span></a>’</span></span></li>
                        <li><a href="shapes.html#TermShapeElement">図形要素</a><span class="expanding"> — <span
                                    class="element-name">‘<a
                                        href="shapes.html#CircleElement"><span>circle</span></a>’</span>, <span
                                    class="element-name">‘<a
                                        href="shapes.html#EllipseElement"><span>ellipse</span></a>’</span>, <span
                                    class="element-name">‘<a
                                        href="shapes.html#LineElement"><span>line</span></a>’</span>, <span
                                    class="element-name">‘<a
                                        href="paths.html#PathElement"><span>path</span></a>’</span>, <span
                                    class="element-name">‘<a
                                        href="shapes.html#PolygonElement"><span>polygon</span></a>’</span>, <span
                                    class="element-name">‘<a
                                        href="shapes.html#PolylineElement"><span>polyline</span></a>’</span>, <span
                                    class="element-name">‘<a
                                        href="shapes.html#RectElement"><span>rect</span></a>’</span></span></li>
                        <li><a href="struct.html#TermStructuralElement">構造要素</a><span class="expanding">
                                — <span class="element-name">‘<a
                                        href="struct.html#DefsElement"><span>defs</span></a>’</span>, <span
                                    class="element-name">‘<a href="struct.html#GElement"><span>g</span></a>’</span>,
                                <span class="element-name">‘<a
                                        href="struct.html#SVGElement"><span>svg</span></a>’</span>, <span
                                    class="element-name">‘<a
                                        href="struct.html#SymbolElement"><span>symbol</span></a>’</span>, <span
                                    class="element-name">‘<a
                                        href="struct.html#UseElement"><span>use</span></a>’</span></span></li>
                    </ul><span class="element-name"><a href="linking.html#AElement"><span>a</span></a></span>, <span
                        class="element-name"><a href="embedded.html#HTMLElements"><span>audio</span></a></span>, <span
                        class="element-name"><a href="embedded.html#HTMLElements"><span>canvas</span></a></span>, <span
                        class="element-name"><a
                            href="https://drafts.fxtf.org/css-masking-1/#ClipPathElement"><span>clipPath</span></a></span>,
                    <span class="element-name"><a
                            href="https://drafts.fxtf.org/filter-effects/#FilterElement"><span>filter</span></a></span>,
                    <span class="element-name"><a
                            href="embedded.html#ForeignObjectElement"><span>foreignObject</span></a></span>, <span
                        class="element-name"><a href="embedded.html#HTMLElements"><span>iframe</span></a></span>, <span
                        class="element-name"><a href="embedded.html#ImageElement"><span>image</span></a></span>, <span
                        class="element-name"><a href="painting.html#MarkerElement"><span>marker</span></a></span>, <span
                        class="element-name"><a
                            href="https://drafts.fxtf.org/css-masking-1/#MaskElement"><span>mask</span></a></span>,
                    <span class="element-name"><a href="interact.html#ScriptElement"><span>script</span></a></span>,
                    <span class="element-name"><a href="styling.html#StyleElement"><span>style</span></a></span>, <span
                        class="element-name"><a href="struct.html#SwitchElement"><span>switch</span></a></span>, <span
                        class="element-name"><a href="text.html#TextElement"><span>text</span></a></span>, <span
                        class="element-name"><a href="embedded.html#HTMLElements"><span>video</span></a></span>, <span
                        class="element-name"><a href="linking.html#ViewElement"><span>view</span></a></span>
                </dd>
                <dt>属性:</dt>
                <dd>
                    <ul class="no-bullets">
                        <li><a href="struct.html#TermCoreAttribute">コア属性</a><span class="expanding"> — <span
                                    class="attr-name">‘<a href="struct.html#IDAttribute"><span>id</span></a>’</span>,
                                <span class="attr-name">‘<a
                                        href="struct.html#SVGElementTabindexAttribute"><span>tabindex</span></a>’</span>,
                                <span class="attr-name">‘<a
                                        href="struct.html#LangAttribute"><span>lang</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="styling.html#ClassAttribute"><span>class</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="styling.html#StyleAttribute"><span>style</span></a>’</span></span></li>
                        <li><a
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers">グローバルイベント属性</a><span
                                class="expanding"> — <span class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>oncancel</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>oncanplay</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>oncanplaythrough</span></a>’</span>,
                                <span class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onchange</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onclick</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onclose</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>oncuechange</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>ondblclick</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>ondrag</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>ondragend</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>ondragenter</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>ondragexit</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>ondragleave</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>ondragover</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>ondragstart</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>ondrop</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>ondurationchange</span></a>’</span>,
                                <span class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onemptied</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onended</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onerror</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onfocus</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>oninput</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>oninvalid</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onkeydown</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onkeypress</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onkeyup</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onload</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onloadeddata</span></a>’</span>,
                                <span class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onloadedmetadata</span></a>’</span>,
                                <span class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onloadstart</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onmousedown</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onmouseenter</span></a>’</span>,
                                <span class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onmouseleave</span></a>’</span>,
                                <span class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onmousemove</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onmouseout</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onmouseover</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onmouseup</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onmousewheel</span></a>’</span>,
                                <span class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onpause</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onplay</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onplaying</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onprogress</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onratechange</span></a>’</span>,
                                <span class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onreset</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onresize</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onscroll</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onseeked</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onseeking</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onselect</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onshow</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onstalled</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onsubmit</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onsuspend</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>ontimeupdate</span></a>’</span>,
                                <span class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>ontoggle</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onvolumechange</span></a>’</span>,
                                <span class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onwaiting</span></a>’</span></span>
                        </li>
                        <li><a
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#documentandelementeventhandlers">ドキュメント要素イベント属性</a><span
                                class="expanding"> — <span class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>oncopy</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>oncut</span></a>’</span>, <span
                                    class="attr-name">‘<a
                                        href="interact.html#EventAttributes"><span>onpaste</span></a>’</span></span>
                        </li>
                        <li><a href="styling.html#TermPresentationAttribute">表示属性</a><span class="expanding"> — </span>
                        </li>
                        <li><span class="attr-name">‘<a
                                    href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span></li>
                        <li><span class="attr-name">‘<a
                                    href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>
                        </li>
                        <li><span class="attr-name">‘<a
                                    href="painting.html#MarkerElementRefXAttribute"><span>refX</span></a>’</span></li>
                        <li><span class="attr-name">‘<a
                                    href="painting.html#MarkerElementRefYAttribute"><span>refY</span></a>’</span></li>
                        <li><span class="attr-name">‘<a
                                    href="painting.html#MarkerUnitsAttribute"><span>markerUnits</span></a>’</span></li>
                        <li><span class="attr-name">‘<a
                                    href="painting.html#MarkerWidthAttribute"><span>markerWidth</span></a>’</span></li>
                        <li><span class="attr-name">‘<a
                                    href="painting.html#MarkerHeightAttribute"><span>markerHeight</span></a>’</span>
                        </li>
                        <li><span class="attr-name">‘<a
                                    href="painting.html#OrientAttribute"><span>orient</span></a>’</span></li>
                    </ul>
                </dd>
                <dt>DOM インターフェース:</dt>
                <dd>
                    <ul class="no-bullets">
                        <li><a class="idlinterface" href="painting.html#InterfaceSVGMarkerElement">SVGMarkerElement</a>
                        </li>
                    </ul>
                </dd>
            </dl>
        </div>

        <p><span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span> 要素は、
            <a href="shapes.html#TermShapeElement">図形</a>上のマーカー描画に使うグラフィックスを定義します。
        </p>

        <p id="MarkerAttributes"><em>属性定義:</em></p>

        <dl class="attrdef-list">
            <dt>

                <table class="attrdef def">
                    <tr>
                        <th>名前</th>
                        <th>値</th>
                        <th>初期値</th>
                        <th>アニメーション可能</th>
                    </tr>
                    <tr>
                        <td><dfn id="MarkerUnitsAttribute" data-dfn-type="element-attr" data-dfn-for="marker"
                                data-export="">markerUnits</dfn></td>
                        <td>strokeWidth | userSpaceOnUse</td>
                        <td>strokeWidth</td>
                        <td>はい</td>
                    </tr>
                </table>

            </dt>
            <dd>

                <p><span class="attr-name">‘<a
                            href="painting.html#MarkerUnitsAttribute"><span>markerUnits</span></a>’</span> 属性は、
                    <span class="attr-name">‘<a
                            href="painting.html#MarkerWidthAttribute"><span>markerWidth</span></a>’</span>、<span
                        class="attr-name">‘<a
                            href="painting.html#MarkerHeightAttribute"><span>markerHeight</span></a>’</span> および
                    <span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span>
                    の内容の座標系を定義します。値の意味：
                </p>

                <dl>
                    <dt><span class="attr-value">strokeWidth</span></dt>
                    <dd><span class="attr-name">‘<a
                                href="painting.html#MarkerWidthAttribute"><span>markerWidth</span></a>’</span>、<span
                            class="attr-name">‘<a
                                href="painting.html#MarkerHeightAttribute"><span>markerHeight</span></a>’</span> および
                        <span class="element-name">‘<a
                                href="painting.html#MarkerElement"><span>marker</span></a>’</span> の内容は、
                        マーカーを参照する要素の描画ストローク幅（ユーザー単位）のサイズを1単位とする座標系で指定。
                    </dd>

                    <dt><span class="attr-value">userSpaceOnUse</span></dt>
                    <dd><span class="attr-name">‘<a
                                href="painting.html#MarkerWidthAttribute"><span>markerWidth</span></a>’</span>、<span
                            class="attr-name">‘<a
                                href="painting.html#MarkerHeightAttribute"><span>markerHeight</span></a>’</span> および
                        <span class="element-name">‘<a
                                href="painting.html#MarkerElement"><span>marker</span></a>’</span> の内容は、
                        マーカー参照要素の現行ユーザー座標系で指定。
                    </dd>
                </dl>

            </dd>
            <dt>

                <p class="note">
                    <span class="attr-name">‘<a
                            href="painting.html#MarkerUnitsAttribute"><span>markerUnits</span></a>’</span> が <span
                        class="attr-value">strokeWidth</span> の場合、
                    マーカーのサイズは <a class="property" href="painting.html#StrokeWidthProperty">stroke-width</a> に対し
                    <a
                        href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">ユーザー座標系</a>で変形が適用された後の幅に依存します。つまり
                    <a class="property" href="coords.html#VectorEffectProperty">vector-effect</a> 属性が
                    <span class="attr-value">non-scaling-stroke</span> であるとマーカーもスケーリングされなくなります。
                </p>

                <table class="attrdef def">
                    <tr>
                        <th>名前</th>
                        <th>値</th>
                        <th>初期値</th>
                        <th>アニメーション可能</th>
                    </tr>
                    <tr>
                        <td><dfn id="MarkerWidthAttribute" data-dfn-type="element-attr" data-dfn-for="marker"
                                data-export="">markerWidth</dfn>,
                            <dfn id="MarkerHeightAttribute" data-dfn-type="element-attr" data-dfn-for="marker"
                                data-export="">markerHeight</dfn>
                        </td>
                        <td><a
                                href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a>
                            | <a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a></td>
                        <td>3</td>
                        <td>はい</td>
                    </tr>
                </table>

            </dt>
            <dd>

                <p><span class="attr-name">‘<a
                            href="painting.html#MarkerWidthAttribute"><span>markerWidth</span></a>’</span> および <span
                        class="attr-name">‘<a
                            href="painting.html#MarkerHeightAttribute"><span>markerHeight</span></a>’</span> 属性は、
                    マーカーを <span class="attr-name">‘<a
                            href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span> および <span
                        class="attr-name">‘<a
                            href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>
                    属性でフィッティングする SVG ビューポートのサイズを表します。どちらかの値がゼロの場合、マーカーは描画されません。どちらかの値が負の場合はエラーです（<a
                        href="conform.html#ErrorProcessing">エラー処理</a>参照）。
                </p>

            </dd>
            <dt>

                <table class="attrdef def">
                    <tr>
                        <th>名前</th>
                        <th>値</th>
                        <th>初期値</th>
                        <th>アニメーション可能</th>
                    </tr>
                    <tr>
                        <td><dfn id="MarkerElementRefXAttribute" data-dfn-type="element-attr" data-dfn-for="marker"
                                data-export="">refX</dfn></td>
                        <td><a
                                href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a>
                            | <a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a> | left | center |
                            right</td>
                        <td>0</td>
                        <td>はい</td>
                    </tr>
                    <tr>
                        <td><dfn id="MarkerElementRefYAttribute" data-dfn-type="element-attr" data-dfn-for="marker"
                                data-export="">refY</dfn></td>
                        <td><a
                                href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a>
                            | <a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a> | top | center |
                            bottom</td>
                        <td>0</td>
                        <td>はい</td>
                    </tr>
                </table>

            </dt>
            <dd>

                <p class="note">
                    SVG 2 で新規追加: 幾何学キーワード（<span class="element-name">‘<a
                            href="struct.html#SymbolElement"><span>symbol</span></a>’</span> と同様）。
                </p>
                <p class="annotation">
                    marker/symbol の refX/refY に top/center/bottom, left/center/right キーワードを追加します。<a
                        href="https://www.w3.org/2014/08/26-svg-minutes.html#item07">ロンドンF2F</a>で決定。値は <a
                        href="https://www.w3.org/TR/css3-background/#the-background-position">'background-position'</a>
                    に着想。
                </p>

                <p><span class="attr-name">‘<a
                            href="painting.html#MarkerElementRefXAttribute"><span>refX</span></a>’</span> および <span
                        class="attr-name">‘<a
                            href="painting.html#MarkerElementRefYAttribute"><span>refY</span></a>’</span> 属性は、
                    マーカーの基準点を定義し、図形上のマーカー位置に正確に配置されます。長さや数値は <span class="attr-name">‘<a
                            href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span> および <span
                        class="attr-name">‘<a
                            href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>
                    の適用後のマーカー内容座標系で解釈されます。パーセント値は <span class="attr-name">‘<a
                            href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span> の幅に対する <span
                        class="attr-name">‘<a
                            href="painting.html#MarkerElementRefXAttribute"><span>refX</span></a>’</span>、高さに対する <span
                        class="attr-name">‘<a
                            href="painting.html#MarkerElementRefYAttribute"><span>refY</span></a>’</span> の割合です。
                </p>
                <p>キーワード値は次のパーセンテージに評価されます：</p>
                <table class="data compact">
                    <caption>refX/refY キーワードとパーセンテージの対応表</caption>
                    <thead>
                        <tr>
                            <th>キーワード</th>
                            <th>対応パーセンテージ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>left</td>
                            <td>0%</td>
                        </tr>
                        <tr>
                            <td>center</td>
                            <td>50%</td>
                        </tr>
                        <tr>
                            <td>right</td>
                            <td>100%</td>
                        </tr>
                        <tr>
                            <td>top</td>
                            <td>0%</td>
                        </tr>
                        <tr>
                            <td>bottom</td>
                            <td>100%</td>
                        </tr>
                    </tbody>
                </table>

            </dd>
            <dt>

                <table class="attrdef def">
                    <tr>
                        <th>名前</th>
                        <th>値</th>
                        <th>初期値</th>
                        <th>アニメーション可能</th>
                    </tr>
                    <tr>
                        <td><dfn id="OrientAttribute" data-dfn-type="element-attr" data-dfn-for="marker"
                                data-export="">orient</dfn></td>
                        <td>auto | auto-start-reverse | <a
                                href="https://www.w3.org/TR/2012/WD-css3-values-20120308/#angles">&lt;angle></a> | <a
                                href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a></td>
                        <td>0</td>
                        <td>はい（非加算）</td>
                    </tr>
                </table>

            </dt>
            <dd>

                <p><span class="attr-name">‘<a href="painting.html#OrientAttribute"><span>orient</span></a>’</span>
                    属性は、マーカーが <a href="shapes.html#TermShapeElement">図形</a>上の位置に配置される際の回転方法を示します。値の意味：</p>

                <dl>
                    <dt><span class="attr-value">'auto'</span></dt>
                    <dd>
                        <p>マーカーの正のx軸が、マーカーが配置されるパス位置の方向に向くように配置されます（<a href="#RenderingMarkers">マーカーの描画</a>参照）。
                        </p>
                    </dd>
                </dl>

                <dl class="ready-for-wider-review">
                    <dt><span class="attr-value">'auto-start-reverse'</span></dt>
                    <dd>
                        <p><a class="property" href="painting.html#MarkerStartProperty">marker-start</a> で配置された場合、
                            <span class="attr-value">'auto'</span>指定時の向きから180°反対方向に配置されます。他のマーカーでは <span
                                class="attr-value">'auto-start-reverse'</span> は <span class="attr-value">'auto'</span>
                            と同じ意味です。
                        </p>

                        <p class="note">これにより、始点・終点両方で使える単一矢印マーカーを定義でき、両端で外向きに描画できます。</p>
                    </dd>
                </dl>

                <dl>
                    <dt><span class="attr-value"><a
                                href="https://www.w3.org/TR/2012/WD-css3-values-20120308/#angles">&lt;angle></a></span>
                    </dt>
                    <dt><span class="attr-value"><a
                                href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a></span></dt>
                    <dd>
                        <p>マーカーの正のx軸が、指定角度だけ <a href="shapes.html#TermShapeElement">図形</a>の正のx軸から回転した向きとなるよう配置されます。<a
                                href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a>値は度数角度を指定します。</p>
                        <p class="note">例えば <span class="attr-value">'45'</span> の場合、マーカーの正のx軸は図形座標系で右下方向に向きます。</p>
                    </dd>
                </dl>

            </dd>

        </dl>



        <h3 id="VertexMarkerProperties" class="heading">13.7.2. 頂点マーカー：‘<span class="property">marker-start</span>’、
            ‘<span class="property">marker-mid</span>’、‘<span class="property">marker-end</span>’
            プロパティ<a class="self-link" href="#VertexMarkerProperties"></a></h3>

        <table class="propdef def">
            <tr>
                <th>名前：</th>
                <td><dfn id="MarkerStartProperty" data-dfn-type="property" data-export="">marker-start</dfn>,
                    <dfn id="MarkerMidProperty" data-dfn-type="property" data-export="">marker-mid</dfn>,
                    <dfn id="MarkerEndProperty" data-dfn-type="property" data-export="">marker-end</dfn>
                </td>
            </tr>
            <tr>
                <th>値：</th>
                <td>none | <a href="painting.html#DataTypeMarkerRef">&lt;marker-ref></a></td>
            </tr>
            <tr>
                <th>初期値：</th>
                <td>none</td>
            </tr>
            <tr>
                <th>適用対象：</th>
                <td><a href="shapes.html#TermShapeElement">図形</a></td>
            </tr>
            <tr>
                <th>継承：</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>パーセンテージ：</th>
                <td>N/A</td>
            </tr>
            <tr>
                <th>メディア：</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>算出値：</th>
                <td>指定通り。ただし <a href="https://www.w3.org/TR/css3-values/#url-value">&lt;url></a> の値
                    （<a href="painting.html#DataTypeMarkerRef">&lt;marker-ref></a> の一部となるもの）は絶対化される</td>
            </tr>
            <tr>
                <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>：</th>
                <td>はい</td>
            </tr>
        </table>

        <p>where:</p>

        <p class="definition prod"><dfn id="DataTypeMarkerRef" data-dfn-type="type" data-export="">&lt;marker-ref></dfn>
            = <a href="https://www.w3.org/TR/css3-values/#url-value">&lt;url></a></p>

        <p><a class="property" href="painting.html#MarkerStartProperty">marker-start</a> および <a class="property"
                href="painting.html#MarkerEndProperty">marker-end</a> プロパティは、
            指定した <a href="shapes.html#TermShapeElement">図形</a> の最初と最後の頂点に描画されるマーカーを指定します。
            <a class="property" href="painting.html#MarkerMidProperty">marker-mid</a>
            は、他のすべての頂点（最初と最後以外）に描画するマーカーを指定します。
            <a class="property" href="painting.html#MarkerStartProperty">marker-start</a>、
            <a class="property" href="painting.html#MarkerMidProperty">marker-mid</a>、
            <a class="property" href="painting.html#MarkerEndProperty">marker-end</a> の値は以下の通りです：
        </p>

        <dl>
            <dt><span class="prop-value">none</span></dt>
            <dd>指定した頂点にマーカーシンボルは描画されません。</dd>

            <dt><span class="prop-value">&lt;marker-ref></span></dt>
            <dd><span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span> 要素を
                <a href="painting.html#DataTypeMarkerRef">&lt;marker-ref></a> の値で参照し、指定頂点に描画します。
                参照が無効な場合、指定頂点にマーカーは描画されません。
            </dd>
        </dl>

        <p>すべての <a href="shapes.html#TermShapeElement">図形</a> について、マーカー位置の計算に使うパスは <a
                href="paths.html#TermEquivalentPath">等価なパス</a> です。</p>

        <div class="ready-for-wider-review">
            <p>すべての <a href="shapes.html#TermShapeElement">図形</a> 要素（ただし <span class="element-name">‘<a
                        href="shapes.html#PolylineElement"><span>polyline</span></a>’</span>、<span
                    class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span> を除く）では、
                最後の頂点は最初の頂点と同じです。この場合、<a class="property" href="painting.html#MarkerStartProperty">marker-start</a> と <a
                    class="property" href="painting.html#MarkerEndProperty">marker-end</a> の値がどちらも <span
                    class="prop-value">none</span> でない場合、
                その最終頂点に2つのマーカーが描画されます。
                <span class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span> 要素では、
                各 <a href="paths.html#TermOpenSubpath">閉じたサブパス</a>の最後の頂点は最初の頂点と同じです。
                <a class="property" href="painting.html#MarkerStartProperty">marker-start</a> は <a
                    href="paths.html#PathData">path data</a> の最初の頂点のみに描画されます。
                <a class="property" href="painting.html#MarkerEndProperty">marker-end</a> は <a
                    href="paths.html#PathData">path data</a> の最後の頂点のみに描画されます。
                <a class="property" href="painting.html#MarkerMidProperty">marker-mid</a> は <a
                    href="paths.html#PathData">path data</a> の最初と最後以外の
                すべての頂点に描画されます。
            </p>
            <div class="example">
                <pre>&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 30">
  &lt;defs>
    &lt;marker id="m1" viewBox="0 0 10 10" refX="5" refY="5"
     markerWidth="8" markerHeight="8">
      &lt;circle cx="5" cy="5" r="5" fill="green"/>
    &lt;/marker>
    &lt;marker id="m2" viewBox="0 0 10 10" refX="5" refY="5"
     markerWidth="6.5" markerHeight="6.5">
      &lt;circle cx="5" cy="5" r="5" fill="skyblue" opacity="0.9"/>
    &lt;/marker>
    &lt;marker id="m3" viewBox="0 0 10 10" refX="5" refY="5"
     markerWidth="5" markerHeight="5">
      &lt;circle cx="5" cy="5" r="5" fill="maroon" opacity="0.85"/>
    &lt;/marker>    
  &lt;/defs>
  
  &lt;path d="M10,10 h10 v10 z m20,0 h10 v10 z m20,0 h10 v10 z"
  fill="none" stroke="black"
  marker-start="url(#m1)"  
  marker-mid="url(#m2)"
  marker-end="url(#m3)"  
  />
&lt;/svg></pre>

                <div class="figure">
                    <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/marker-doubled.svg"
                        alt="閉じたサブパスの開始点で2つのマーカーが描画される例。" />
                    <p class="caption"><a href="paths.html#PathData">path data</a> に <a
                            href="paths.html#TermOpenSubpath">閉じたサブパス</a>が含まれる場合、
                        各 <a href="paths.html#TermOpenSubpath">閉じたサブパス</a> の最初/最後の頂点に2つのマーカーが描画されます。
                        左端の <a href="paths.html#TermOpenSubpath">閉じたサブパス</a> では <a class="property"
                            href="painting.html#MarkerMidProperty">marker-mid</a> が <a class="property"
                            href="painting.html#MarkerStartProperty">marker-start</a> の上に描画されます。
                        真ん中の <a href="paths.html#TermOpenSubpath">閉じたサブパス</a> では2つの <a class="property"
                            href="painting.html#MarkerMidProperty">marker-mid</a> が重なって描画されます。
                        右端の <a href="paths.html#TermOpenSubpath">閉じたサブパス</a> では <a class="property"
                            href="painting.html#MarkerEndProperty">marker-end</a> が <a class="property"
                            href="painting.html#MarkerMidProperty">marker-mid</a> の上に描画されます。
                    </p>
                </div>
            </div>
        </div>

        <p class="note"><a class="property" href="painting.html#MarkerStartProperty">marker-start</a> と <a
                class="property" href="painting.html#MarkerEndProperty">marker-end</a> は、
            サブパスごとではなく全体のパスの最初と最後の頂点を指します。</p>

        <div class="ready-for-wider-review">
            <div class="example">
                <p>次の例は三角形マーカーシンボルを <a href="painting.html#TermVertexMarker">頂点マーカー</a>として使い、
                    2つのパス終端に矢印を形成しています。</p>

                <pre>&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="275" height="200" viewBox="0 0 275 200">
  &lt;defs>
    &lt;marker id="Triangle" viewBox="0 0 10 10" refX="1" refY="5" 
            markerUnits="strokeWidth" markerWidth="4" markerHeight="3"
            orient="auto">
      &lt;path d="M 0 0 L 10 5 L 0 10 z" fill="context-stroke"/>
    &lt;/marker>
  &lt;/defs>

  &lt;g fill="none" stroke-width="10" marker-end="url(#Triangle)">
    &lt;path stroke="crimson" d="M 100,75 C 125,50 150,50 175,75"/>
    &lt;path stroke="olivedrab" d="M 175,125 C 150,150 125,150 100,125"/>
  &lt;/g>
&lt;/svg></pre>

                <div class="figure">
                    <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/marker-rendering.svg"
                        alt="自動方向指定マーカーの使用例。" />
                    <p class="caption">三角形はパス終端に配置され、自動的に正しい方向に向きます。
                        <span class="prop-value">context-stroke</span> の利用で三角形の塗りが各 <span class="element-name">‘<a
                                href="paths.html#PathElement"><span>path</span></a>’</span> のストローク色と一致します。
                    </p>
                </div>
            </div>
        </div>

        <h3 id="MarkerShorthand" class="heading">13.7.3. マーカーのショートハンド：‘<span class="property">marker</span>’
            プロパティ<a class="self-link" href="#MarkerShorthand"></a></h3>

        <table class="propdef def">
            <tr>
                <th>名前：</th>
                <td><dfn id="MarkerProperty" data-dfn-type="property" data-export="">marker</dfn></td>
            </tr>
            <tr>
                <th>値：</th>
                <td>none | <a href="painting.html#DataTypeMarkerRef">&lt;marker-ref></a></td>
            </tr>
            <tr>
                <th>初期値：</th>
                <td>ショートハンドプロパティには定義されていません</td>
            </tr>
            <tr>
                <th>適用対象：</th>
                <td><a href="shapes.html#TermShapeElement">図形</a></td>
            </tr>
            <tr>
                <th>継承：</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>パーセンテージ：</th>
                <td>N/A</td>
            </tr>
            <tr>
                <th>メディア：</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>算出値：</th>
                <td>個別プロパティを参照</td>
            </tr>
            <tr>
                <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>：</th>
                <td>はい</td>
            </tr>
        </table>

        <p><a class="property" href="painting.html#MarkerProperty">marker</a> プロパティは
            <a class="property" href="painting.html#MarkerStartProperty">marker-start</a>、<a class="property"
                href="painting.html#MarkerMidProperty">marker-mid</a>、<a class="property"
                href="painting.html#MarkerEndProperty">marker-end</a>
            の値をまとめて設定します。<a class="property" href="painting.html#MarkerProperty">marker</a> の値が3つの個別プロパティにそのまま使われます。
        </p>


        <h3 id="RenderingMarkers" class="heading">13.7.4. マーカーの描画<a class="self-link" href="#RenderingMarkers"></a></h3>

        <p>マーカーの方位指定 <span class="attr-name">‘<a href="painting.html#OrientAttribute"><span>orient</span></a>’</span>
            を <span class="attr-value">'auto'</span> にした場合、以下のルールが適用されます：</p>

        <ul>
            <li>頂点が <a href="paths.html#TermClosedSubpath">オープンサブパス</a> の開始点または終端の場合、
                マーカーは <a href="paths.html#TermPathDirection">パス方向</a> に合わせて方位指定されます。</li>

            <li>それ以外の場合は、マーカーは
                <a href="paths.html#TermPathSegmentEndDirection">直前セグメント終端方向</a>と
                <a href="paths.html#TermPathSegmentStartDirection">次セグメント始端方向</a>
                の中間方向に方位指定されます。
            </li>
        </ul>

        <p>各マーカー描画時、マーカーの配置とサイズを正しくするために、一時的な新しいユーザー座標系が確立されます：</p>

        <ul>
            <li>一時的な新しいユーザー座標系の軸は
                <span class="attr-name">‘<a href="painting.html#OrientAttribute"><span>orient</span></a>’</span> 属性に従って
                <span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span>
                要素上で整列されます。
            </li>

            <li><span class="attr-name">‘<a
                        href="painting.html#MarkerUnitsAttribute"><span>markerUnits</span></a>’</span>
                属性でさらに一時座標系が設定されます。
                <span class="attr-name">‘<a
                        href="painting.html#MarkerUnitsAttribute"><span>markerUnits</span></a>’</span>
                が <span class="attr-value">'strokeWidth'</span> なら、現行ユーザー座標系を <a class="property"
                    href="painting.html#StrokeWidthProperty">stroke-width</a> でスケール。
                <span class="attr-name">‘<a
                        href="painting.html#MarkerUnitsAttribute"><span>markerUnits</span></a>’</span>
                が <span class="attr-value">'userSpaceOnUse'</span> なら追加スケールはなし。
            </li>

            <li>さらに <span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span>
                要素に <span class="attr-name">‘<a href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>
                属性があれば、
                <span class="attr-name">‘<a href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span> と
                <span class="attr-name">‘<a
                        href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>
                属性による追加変形が行われます。
            </li>

            <li><a class="property" href="render.html#OverflowAndClipProperties">overflow</a> プロパティが
                <span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span>
                要素上でマーカーを SVG ビューポートにクリップする必要がある場合、SVG ビューポートの境界で暗黙のクリッピングパスが確立されます。
            </li>
        </ul>

        <p class="note"><a href="styling.html#UAStyleSheet">ユーザーエージェントスタイルシート</a>は
            <span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span> 要素の
            <a class="property" href="render.html#OverflowAndClipProperties">overflow</a> プロパティを
            <span class="prop-value">hidden</span>に設定し、デフォルトでマーカーのSVGビューポート境界で矩形クリッピングパスが作られます。
        </p>

        <p>プロパティは、マーカーを参照する要素からマーカー内容には継承されませんが、
            <a class="property" href="painting.html#FillProperty">fill</a> や
            <a class="property" href="painting.html#StrokeProperty">stroke</a> に <span
                class="prop-value">context-stroke</span> を使うことで、
            マーカー内容のスタイルを参照要素に合わせることができます。
        </p>

        <p>マーカーは操作できません。クリックやマウスオーバー等のイベントは
            <span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span>
            やその子要素に対して発火しません。
        </p>

        <p>マーカーは直接描画されず、
            <a href="painting.html#TermMarkerProperties">markerプロパティ</a>で参照された場合のみ描画されます。
            <span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span> 要素の
            <a class="property" href="render.html#VisibilityControl">display</a> 値は常に
            <span class="prop-value">none</span> に
            <a href="styling.html#UAStyleSheet">ユーザーエージェントスタイルシート</a>で設定され、他のCSSルールや表示属性よりも優先されます。
            <span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span> 要素は
            <a class="property" href="render.html#VisibilityControl">display</a> が <span class="prop-value">none</span>
            でも参照可能です。
        </p>

        <p>マーカーの描画効果は、参照された <span class="element-name">‘<a
                    href="painting.html#MarkerElement"><span>marker</span></a>’</span> 要素の内容が
            各マーカーインスタンスごとに非公開DOMツリーとして深くクローンされるかのような動作になります。
            クローンされたDOMツリーは公開されないため、SVG DOMにはマーカーのクローンインスタンスは表示されません。</p>

        <p>概念的な深いクローンには、
            <span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span> 要素およびその内容に
            <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/cascade.html">CSSカスケード</a>
            （[<a href="refs.html#ref-css2">CSS2</a>] 第6章）とプロパティ継承の結果がコピーされます。
            CSSセレクタは元の（参照される）要素には適用できますが、
            クローンDOMツリーには適用できません（文書構造外のため）。
        </p>

        <div class="example">
            <p>説明のため、先ほどのマーカー例を再掲します：</p>

            <pre>
&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="4in" height="2in"
     viewBox="0 0 4000 2000"
     xmlns="http://www.w3.org/2000/svg">
  &lt;defs>
    &lt;marker id="Triangle"
      viewBox="0 0 10 10" refX="0" refY="5"
      markerUnits="strokeWidth"
      markerWidth="4" markerHeight="3"
      orient="auto">
      &lt;path d="M 0 0 L 10 5 L 0 10 z" />
    &lt;/marker>
  &lt;/defs>
  &lt;rect x="10" y="10" width="3980" height="1980"
       fill="none" stroke="blue" stroke-width="10" />
  &lt;desc>Placing an arrowhead at the end of a path.
  &lt;/desc>
  &lt;path d="M 1000 750 L 2000 750 L 2500 1250"
        fill="none" stroke="black" stroke-width="100"
        marker-end="url(#Triangle)"  />
&lt;/svg>
</pre>

            <p>上記ファイルの描画効果は、下記と視覚的に同一です：</p>

            <pre>
&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="4in" height="2in"
     viewBox="0 0 4000 2000"
     xmlns="http://www.w3.org/2000/svg">
  &lt;desc>File which produces the same effect
      as the marker example file, but without
      using markers.
  &lt;/desc>
  &lt;rect x="10" y="10" width="3980" height="1980"
       fill="none" stroke="blue" stroke-width="10" />
  &lt;!-- The path draws as before, but without the marker properties -->
  &lt;path d="M 1000 750 L 2000 750 L 2500 1250"
        fill="none" stroke="black" stroke-width="100"  />
  &lt;!-- The following logic simulates drawing a marker
       at final vertex of the path. -->
  &lt;!-- First off, move the origin of the user coordinate system
       so that the origin is now aligned with the end point of the path. -->
  <strong>&lt;g transform="translate(2500,1250)" ></strong>
    &lt;!-- Rotate the coordinate system 45 degrees because
         the marker specified orient="auto" and the final segment
         of the path is going in the direction of 45 degrees. -->
    <strong>&lt;g transform="rotate(45)" ></strong>
      &lt;!-- Scale the coordinate system to match the coordinate system
           indicated by the 'markerUnits' attributes, which in this case has
           a value of 'strokeWidth'. Therefore, scale the coordinate system
           by the current value of the 'stroke-width' property, which is 100. -->
      <strong>&lt;g transform="scale(100)" ></strong>
        &lt;!-- Translate the coordinate system by
             (-refX*viewBoxToMarkerUnitsScaleX, -refY*viewBoxToMarkerUnitsScaleY)
             in order that (refX,refY) within the marker will align with the vertex.
             In this case, we use the default value for preserveAspectRatio
             ('xMidYMid meet'), which means find a uniform scale factor
             (i.e., viewBoxToMarkerUnitsScaleX=viewBoxToMarkerUnitsScaleY)
             such that the viewBox fits entirely within the SVG viewport ('meet') and
             is center-aligned ('xMidYMid'). In this case, the uniform scale factor
             is markerHeight/viewBoxHeight=3/10=.3. Therefore, translate by
             (-refX*.3,-refY*.3)=(0*.3,-5*.3)=(0,-1.5). -->
        <strong>&lt;g transform="translate(0,-1.5)" ></strong>
          &lt;!-- There is an implicit clipping path because the user agent style
               sheet says that the 'overflow' property for markers has the value
               'hidden'. To achieve this, create a clipping path at the bounds
               of the SVG viewport. Note that in this case the SVG viewport extends
               0.5 units to the left and right of the viewBox due to
               a uniform scale factor, different ratios for markerWidth/viewBoxWidth
               and markerHeight/viewBoxHeight, and 'xMidYMid' alignment -->
          <strong>&lt;clipPath id="cp1" >
            &lt;rect x="-0.5" y="0" width="4" height="3" />
          &lt;/clipPath></strong>
          <strong>&lt;g clip-path="url(#cp1)" ></strong>
            &lt;!-- Scale the coordinate system by the uniform scale factor
                 markerHeight/viewBoxHeight=3/10=.3 to set the coordinate
                 system to viewBox units. -->
            <strong>&lt;g transform="scale(.3)" ></strong>
              &lt;!-- This 'g' element carries all property values that result from
                   cascading and inheritance of properties on the original 'marker' element.
                   In this example, neither fill nor stroke was specified on the 'marker'
                   element or any ancestors of the 'marker', so the initial values of
                   "black" and "none" are used, respectively. -->
             <strong>&lt;g fill="black" stroke="none" ></strong>
                &lt;!-- Expand out the contents of the 'marker' element. -->
                <strong>&lt;path d="M 0 0 L 10 5 L 0 10 z" /></strong>
              <strong>&lt;/g></strong>
            <strong>&lt;/g></strong>
          <strong>&lt;/g></strong>
        <strong>&lt;/g></strong>
      <strong>&lt;/g></strong>
    <strong>&lt;/g></strong>
  <strong>&lt;/g></strong>
&lt;/svg>
</pre>
            <p class="view-as-svg"><a
                    href="https://www.w3.org/TR/SVG2/images/painting/marker-simulated.svg">この例をSVGとして表示（SVG対応ブラウザのみ）</a>
            </p>
        </div>

    </div>



    <div class="ready-for-wider-review">
        <h2 id="PaintOrder" class="heading">13.8. 塗装操作順序の制御：‘<span class="property">paint-order</span>’ プロパティ<a
                class="self-link" href="#PaintOrder"></a></h2>

        <div class="annotation svg2-requirement">
            <table>
                <tr>
                    <th>SVG 2 要件：</th>
                    <td>図形の塗り、ストローク、マーカーの描画順序制御をサポート。</td>
                </tr>
                <tr>
                    <th>決定：</th>
                    <td><a href="https://www.w3.org/2012/05/07-svg-minutes#item03">SVG 2 で ‘<span
                                class="property">paint-order</span>’ プロパティ案を採用。ただし名前変更の可能性あり。</a>
                        現在プロパティ名は決定済み、<a
                            href="https://www.w3.org/2013/11/15-svg-minutes.html#item12">2013年11月15日議事録</a>参照。</td>
                </tr>
                <tr>
                    <th>目的：</th>
                    <td>要素を複製せずにストロークを塗りの下に描画したいという一般的な要望に対応するため。</td>
                </tr>
                <tr>
                    <th>担当：</th>
                    <td>Cameron (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3285">ACTION-3285</a>)</td>
                </tr>
            </table>
        </div>

        <table class="propdef def">
            <tr>
                <th>名前：</th>
                <td><dfn id="PaintOrderProperty" data-dfn-type="property" data-export="">paint-order</dfn></td>
            </tr>
            <tr>
                <th>値：</th>
                <td>normal | [ fill || stroke || markers ]</td>
            </tr>
            <tr>
                <th>初期値：</th>
                <td>normal</td>
            </tr>
            <tr>
                <th>適用対象：</th>
                <td><a href="shapes.html#TermShapeElement">図形</a>および <a
                        href="text.html#TermTextContentElement">テキストコンテンツ要素</a></td>
            </tr>
            <tr>
                <th>継承：</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>パーセンテージ：</th>
                <td>N/A</td>
            </tr>
            <tr>
                <th>メディア：</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>算出値：</th>
                <td>指定通り</td>
            </tr>
            <tr>
                <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>：</th>
                <td>はい</td>
            </tr>
        </table>

        <p class="note">SVG 2 で新規追加。主に <span class="element-name">‘<a
                    href="text.html#TextElement"><span>text</span></a>’</span> 要素のストロークを塗りの下に描画するために、要素複製不要で実現するため。</p>

        <p><a class="property" href="painting.html#PaintOrderProperty">paint-order</a> プロパティは
            <a href="shapes.html#TermShapeElement">図形</a>およびテキストの3つの描画操作順（塗り、ストローク、マーカー）を制御します。
        </p>

        <p>このプロパティ値が <span class="prop-value">normal</span> の場合、標準の描画順で要素が描画されます：
            まず塗り、次にストローク、最後にマーカー。</p>

        <p>他のキーワードを使う場合、指定順（左から右）で描画操作が行われます。3つのキーワードを省略した場合、それらは <span class="prop-value">paint-order: normal</span>
            の順で最後に描画されます。</p>

        <p class="note">例えば <span class="prop-value">paint-order: stroke</span> は
            <span class="prop-value">paint-order: stroke fill markers</span> と同じ描画結果になります。
        </p>

        <div class="example">
            <p>次の例は <a class="property" href="painting.html#PaintOrderProperty">paint-order</a>
                プロパティでストローク付きテキストをより美しく描画する方法を示しています。</p>

            <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="600" height="150" viewBox="0 0 600 150">

  &lt;style>
    text {
      font: 80px bold sans-serif; stroke-linejoin: round;
      text-anchor: middle; fill: peachpuff; stroke: crimson;
    }
  &lt;/style>

  &lt;text x="150" y="100" style="stroke-width: 6px;">pizazz&lt;/text>
  &lt;text x="450" y="100" style="stroke-width: 12px; paint-order: stroke;">pizazz&lt;/text>
&lt;/svg>
</pre>

            <div class="figure">
                <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/paintorder.svg"
                    alt="paint-order の効果例。" />
                <p class="caption">ストロークが塗りの下に描画されたテキスト。</p>
            </div>
        </div>
    </div>

    <div class="ready-for-wider-review">
        <h2 id="ColorInterpolation" class="heading">13.9. 補間の色空間：‘<span class="property">color-interpolation</span>’
            プロパティ<a class="self-link" href="#ColorInterpolation"></a></h2>

        <table class="propdef def">
            <tr>
                <th>名前：</th>
                <td><dfn id="ColorInterpolationProperty" data-dfn-type="property"
                        data-export="">color-interpolation</dfn></td>
            </tr>
            <tr>
                <th>値：</th>
                <td>auto | sRGB | linearRGB</td>
            </tr>
            <tr>
                <th>初期値：</th>
                <td>sRGB</td>
            </tr>
            <tr>
                <th>適用対象：</th>
                <td><a href="struct.html#TermContainerElement">コンテナ要素</a>, <a
                        href="struct.html#TermGraphicsElement">グラフィック要素</a>,
                    <a href="pservers.html#TermGradientElement">グラデーション要素</a>, <span class="element-name">‘<a
                            href="struct.html#UseElement"><span>use</span></a>’</span>, <span class="element-name">‘<a
                            href="https://svgwg.org/specs/animations/#AnimateElement"><span>animate</span></a>’</span>
                </td>
            </tr>
            <tr>
                <th>継承：</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>パーセンテージ：</th>
                <td>N/A</td>
            </tr>
            <tr>
                <th>メディア：</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>算出値：</th>
                <td>指定通り</td>
            </tr>
            <tr>
                <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>：</th>
                <td>はい</td>
            </tr>
        </table>

        <p>SVGユーザーエージェントはSVGコンテンツの処理過程で様々なタイミングで色の補間や合成を行います。<a class="property"
                href="painting.html#ColorInterpolationProperty">color-interpolation</a>
            プロパティは、以下のグラフィック操作で使用する色空間を制御します：</p>

        <ul>
            <li><a href="pservers.html#Gradients">グラデーション</a>ストップ間の補間</li>
            <li><span class="element-name">‘<a
                        href="https://svgwg.org/specs/animations/#AnimateElement"><span>animate</span></a>’</span>
                による色アニメーション時の色補間</li>
            <li><a href="render.html#PaintersModel">グラフィック要素</a>を現行背景に合成・ブレンドする際の処理</li>
        </ul>

        <p class="note"> <a href="https://www.w3.org/TR/filter-effects/">フィルター効果</a>では、
            <a class="property"
                href="https://drafts.fxtf.org/filter-effects/#ColorInterpolationFiltersProperty">color-interpolation-filters</a>
            プロパティが色空間指定を制御します。
            [<a href="refs.html#ref-filter-effects-1">filter-effects-1</a>]
        </p>
    </div>

    <div class="ready-for-wider-review">
        <p><a class="property" href="painting.html#ColorInterpolationProperty">color-interpolation</a> プロパティは、色操作を sRGB
            色空間または（光エネルギー直線）線形RGB色空間で行うかを選択します。適切な色空間を選択した後、各成分ごとに線形補間を行います。値の意味：</p>

        <dl>
            <dt><span class="prop-value">auto</span></dt>
            <dd>ユーザーエージェントが <span class="prop-value">sRGB</span> または <span class="prop-value">linearRGB</span>
                のどちらかで色補間を選べることを示します。著者が特定の色空間での色補間を要求しないという意味です。</dd>

            <dt><span class="prop-value">sRGB</span></dt>
            <dd>色補間がsRGB色空間で行われることを示します。</dd>

            <dt><span class="prop-value">linearRGB</span></dt>
            <dd>色補間が以下で説明する線形RGB色空間で行われることを示します。</dd>
        </dl>

        <p id="sRGBlinearRGBConversionFormulas">sRGB色空間（非線形・2.2ガンマカーブ）と線形RGB色空間（ガンマカーブなしのsRGB三刺激値）の変換式は、<a
                href="https://webstore.iec.ch/publication/6168">sRGB仕様</a>[<a
                href="refs.html#ref-srgb">SRGB</a>]に記載されています。
            参考までに、以下はsRGBから線形RGBへの変換式です。<var>C<sub>srgb</sub></var>はsRGBの各色成分、<var>C<sub>linear</sub></var>は対応する線形RGB成分で、全ての値は0～1の範囲：
        </p>

        <div role="math" aria-describedby="math-linearRGB">
            <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                <mrow>
                    <msub>
                        <mi>C</mi>
                        <mi>linear</mi>
                    </msub>
                    <mo>=</mo>
                    <mo>{</mo>
                    <mtable columnalign="left">
                        <mtr>
                            <mtd>
                                <mfrac>
                                    <msub>
                                        <mi>C</mi>
                                        <mi>srgb</mi>
                                    </msub>
                                    <mn>12.92</mn>
                                </mfrac>
                            </mtd>
                            <mtd>
                                <mtext>if </mtext>
                                <msub>
                                    <mi>C</mi>
                                    <mi>srgb</mi>
                                </msub>
                                <mo>≤</mo>
                                <mn>0.04045</mn>
                            </mtd>
                        </mtr>
                        <mtr>
                            <mtd>
                                <msup>
                                    <mfenced>
                                        <mfrac>
                                            <mrow>
                                                <msub>
                                                    <mi>C</mi>
                                                    <mi>srgb</mi>
                                                </msub>
                                                <mo>+</mo>
                                                <mn>0.055</mn>
                                            </mrow>
                                            <mn>1.055</mn>
                                        </mfrac>
                                    </mfenced>
                                    <mn>2.4</mn>
                                </msup>
                            </mtd>
                            <mtd>
                                <mtext>if </mtext>
                                <msub>
                                    <mi>C</mi>
                                    <mi>srgb</mi>
                                </msub>
                                <mo>></mo>
                                <mn>0.04045</mn>
                            </mtd>
                        </mtr>
                    </mtable>
                </mrow>
            </math>
            <pre id="math-linearRGB">
if C_srgb &lt;= 0.04045
  C_linear = C_srgb / 12.92
else if c_srgb > 0.04045
  C_linear = ((C_srgb + 0.055) / 1.055) ^ 2.4
</pre>
        </div>

        <p>範囲外の色値もユーザーエージェントがサポートする場合は上記式で変換されます。</p>

        <p>子要素が背景にブレンドされる場合、子要素の <a class="property"
                href="painting.html#ColorInterpolationProperty">color-interpolation</a> プロパティ値が合成種類を決定し、親要素の値は使われません。<a
                href="pservers.html#Gradients">グラデーション</a>が <span class="attr-name">‘href’</span>
            属性で他のグラデーションを参照する場合、fillやstrokeプロパティで直接参照されているグラデーション要素の <a class="property"
                href="painting.html#ColorInterpolationProperty">color-interpolation</a>
            プロパティ値が使われます。色アニメーション時は、アニメートされる要素の <a class="property"
                href="painting.html#ColorInterpolationProperty">color-interpolation</a> プロパティ値に従って色補間が行われます。
        </p>


        <h2 id="RenderingHints" class="heading">13.10. レンダリングヒント<a class="self-link" href="#RenderingHints"></a>
        </h2>

        <h3 id="ColorRendering" class="heading">13.10.1. ‘<span class="property">color-rendering</span>’ プロパティ<a
                class="self-link" href="#ColorRendering"></a></h3>

        <table class="propdef def">
            <tr>
                <th>名前：</th>
                <td><dfn id="ColorRenderingProperty" data-dfn-type="property" data-export="">color-rendering</dfn></td>
            </tr>
            <tr>
                <th>値：</th>
                <td>auto | optimizeSpeed | optimizeQuality</td>
            </tr>
            <tr>
                <th>初期値：</th>
                <td>auto</td>
            </tr>
            <tr>
                <th>適用対象：</th>
                <td><a href="struct.html#TermContainerElement">コンテナ要素</a>, <a
                        href="struct.html#TermGraphicsElement">グラフィック要素</a>,
                    <a href="pservers.html#TermGradientElement">グラデーション要素</a>, <span class="element-name">‘<a
                            href="struct.html#UseElement"><span>use</span></a>’</span>, <span class="element-name">‘<a
                            href="https://svgwg.org/specs/animations/#AnimateElement"><span>animate</span></a>’</span>
                </td>
            </tr>
            <tr>
                <th>継承：</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>パーセンテージ：</th>
                <td>N/A</td>
            </tr>
            <tr>
                <th>メディア：</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>算出値：</th>
                <td>指定通り</td>
            </tr>
            <tr>
                <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>：</th>
                <td>はい</td>
            </tr>
        </table>

        <p><a class="property" href="painting.html#ColorRenderingProperty">color-rendering</a>
            プロパティは、SVGユーザーエージェントに対して色補間や合成操作の最適化方法についてヒントを与えます。値の意味：</p>

        <dl>
            <dt><span class="prop-value">auto</span></dt>
            <dd>ユーザーエージェントは速度と品質のバランスを適切に取りますが、品質が速度より重視されます。</dd>

            <dt><span class="prop-value">optimizeSpeed</span></dt>
            <dd>ユーザーエージェントは品質より描画速度を重視します。RGB表示機器では、色補間や合成をデバイスRGB色空間で行う場合があります。</dd>

            <dt><span class="prop-value">optimizeQuality</span></dt>
            <dd>ユーザーエージェントは描画速度より品質を重視します。</dd>
        </dl>

        <p><a class="property" href="painting.html#ColorRenderingProperty">color-rendering</a> は
            <a class="property"
                href="https://drafts.fxtf.org/filter-effects/#ColorInterpolationFiltersProperty">color-interpolation-filters</a>
            より優先されます。例えば
            <span class="prop-value">color-rendering: optimizeSpeed</span> および
            <span class="prop-value">color-interpolation-filters: linearRGB</span> の場合、
            SVGユーザーエージェントは性能最適化を優先し、<span class="prop-value">color-interpolation-filters: linearRGB</span>
            で指定された色補間精度を犠牲にすることがあります。
        </p>

        <h3 id="ShapeRendering" class="heading">13.10.2. ‘<span class="property">shape-rendering</span>’ プロパティ<a
                class="self-link" href="#ShapeRendering"></a></h3>

        <table class="propdef def">
            <tr>
                <th>名前：</th>
                <td><dfn id="ShapeRenderingProperty" data-dfn-type="property" data-export="">shape-rendering</dfn></td>
            </tr>
            <tr>
                <th>値：</th>
                <td>auto | optimizeSpeed | crispEdges | geometricPrecision</td>
            </tr>
            <tr>
                <th>初期値：</th>
                <td>auto</td>
            </tr>
            <tr>
                <th>適用対象：</th>
                <td><a href="shapes.html#TermShapeElement">図形</a></td>
            </tr>
            <tr>
                <th>継承：</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>パーセンテージ：</th>
                <td>N/A</td>
            </tr>
            <tr>
                <th>メディア：</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>算出値：</th>
                <td>指定通り</td>
            </tr>
            <tr>
                <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>：</th>
                <td>はい</td>
            </tr>
        </table>

        <p><a class="property" href="painting.html#ShapeRenderingProperty">shape-rendering</a> プロパティは、
            <span class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span> 要素や <a
                href="shapes.html">基本図形</a>（円や矩形など）などベクターグラフィック要素の描画時に、実装がどんなトレードオフをするべきかについてヒントを与えます。値の意味：
        </p>

        <dl>
            <dt><span class="prop-value">auto</span></dt>
            <dd>ユーザーエージェントは速度・エッジの鮮明さ・幾何学的精度のバランスを適切に取りますが、幾何学的精度が速度やエッジの鮮明さより重視されます。</dd>

            <dt><span class="prop-value">optimizeSpeed</span></dt>
            <dd>ユーザーエージェントは幾何学的精度やエッジの鮮明さより描画速度を重視します。このオプションではユーザーエージェントが図形のアンチエイリアスを無効にすることがあります。</dd>

            <dt><span class="prop-value">crispEdges</span></dt>
            <dd>ユーザーエージェントは描画速度や幾何学的精度より、アートワークのエッジのコントラストを強調しようとします。鮮明なエッジを得るため、すべての線や曲線、またはほぼ垂直・水平な直線のみでアンチエイリアスを無効にする場合があります。また、エッジをデバイスピクセルに合わせるため線位置・幅を調整する場合もあります。
            </dd>

            <dt><span class="prop-value">geometricPrecision</span></dt>
            <dd>ユーザーエージェントは描画速度やエッジの鮮明さより幾何学的精度を重視します。</dd>
        </dl>

        <h3 id="TextRendering" class="heading">13.10.3. ‘<span class="property">text-rendering</span>’ プロパティ<a
                class="self-link" href="#TextRendering"></a></h3>

        <table class="propdef def">
            <tr>
                <th>名前：</th>
                <td><dfn id="TextRenderingProperty" data-dfn-type="property" data-export="">text-rendering</dfn></td>
            </tr>
            <tr>
                <th>値：</th>
                <td>auto | optimizeSpeed | optimizeLegibility | geometricPrecision</td>
            </tr>
            <tr>
                <th>初期値：</th>
                <td>auto</td>
            </tr>
            <tr>
                <th>適用対象：</th>
                <td><span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span></td>
            </tr>
            <tr>
                <th>継承：</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>パーセンテージ：</th>
                <td>N/A</td>
            </tr>
            <tr>
                <th>メディア：</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>算出値：</th>
                <td>指定通り</td>
            </tr>
            <tr>
                <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>：</th>
                <td>はい</td>
            </tr>
        </table>

        <p><a class="property" href="painting.html#TextRenderingProperty">text-rendering</a>
            プロパティは、テキスト描画時にどのようなトレードオフを行うかのヒントを実装に与えます。値の意味：</p>

        <dl>
            <dt><span class="prop-value">auto</span></dt>
            <dd>ユーザーエージェントは速度、可読性、幾何学的精度のバランスを適切に取りますが、可読性を速度や精度より重視します。</dd>

            <dt><span class="prop-value">optimizeSpeed</span></dt>
            <dd>ユーザーエージェントは可読性や幾何学的精度より描画速度を重視します。このオプションではテキストのアンチエイリアスが無効になる場合があります。</dd>

            <dt><span class="prop-value">optimizeLegibility</span></dt>
            <dd>ユーザーエージェントは描画速度や幾何学的精度より可読性を重視します。アンチエイリアス技法やフォントヒンティング、またはその両方を適用し最も可読性の高いテキストにします。</dd>

            <dt><span class="prop-value">geometricPrecision</span></dt>
            <dd>ユーザーエージェントは可読性や描画速度より幾何学的精度を重視します。このオプションではヒンティングを停止し、グリフアウトラインがパスデータ描画の精度に近くなります。</dd>
        </dl>

        <h3 id="ImageRendering" class="heading">13.10.4. ‘<span class="property">image-rendering</span>’ プロパティ<a
                class="self-link" href="#ImageRendering"></a></h3>

        <table class="propdef def">
            <tr>
                <th>名前：</th>
                <td><dfn id="ImageRenderingProperty" data-dfn-type="property" data-export="">image-rendering</dfn></td>
            </tr>
            <tr>
                <th>値：</th>
                <td>auto | optimizeQuality | optimizeSpeed</td>
            </tr>
            <tr>
                <th>初期値：</th>
                <td>auto</td>
            </tr>
            <tr>
                <th>適用対象：</th>
                <td>画像</td>
            </tr>
            <tr>
                <th>継承：</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>パーセンテージ：</th>
                <td>N/A</td>
            </tr>
            <tr>
                <th>メディア：</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>算出値：</th>
                <td>指定通り</td>
            </tr>
            <tr>
                <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>：</th>
                <td>はい</td>
            </tr>
        </table>

        <p class="note"><a href="http://dev.w3.org/csswg/css-images/#the-image-rendering">CSS Image Values and
                Replacement Content Module Level 4</a> は今後このプロパティを再定義する可能性があります。特にアップスケール時の滑らかさとピクセル化維持の選択が可能になるはずです。
        </p>

        <p><a class="property" href="painting.html#ImageRenderingProperty">image-rendering</a>
            プロパティは、画像処理時の速度と品質のトレードオフ方法について実装にヒントを与えます。値の意味：</p>

        <dl>
            <dt><span class="prop-value">auto</span></dt>
            <dd>ユーザーエージェントは速度と品質のバランスを適切に取りますが、品質が速度より重視されます。リサンプリングアルゴリズムは最低でも最近傍法(nearest
                neighbor)と同等以上で、バイリニア法(bilinear)が強く推奨されます。<a
                    href="conform.html#ConformingSVGViewers">現行標準の高品質SVGビューア</a>では最低でもバイリニアリサンプリングが使われます。</dd>

            <dt><span class="prop-value">optimizeQuality</span></dt>
            <dd>ユーザーエージェントは描画速度より品質を重視します。最低でもバイリニアリサンプリングと同等以上のリサンプリングアルゴリズムを使います。</dd>

            <dt><span class="prop-value">optimizeSpeed</span></dt>
            <dd>ユーザーエージェントは品質より描画速度を重視します。高速描画が目的のリサンプリングアルゴリズムを使い、最低でも最近傍法(nearest
                neighbor)は超える必要があります。より高品質なアルゴリズムでも性能が達成できる場合は、最近傍法より高品質なアルゴリズムを使うべきです。</dd>
        </dl>

        <p>全ての場合、リサンプリングは元データやターゲットデバイスがインデックスカラーでも、必ずトゥルーカラー（例：24ビット）色空間で行う必要があります。高品質SVGビューアは線形色空間で画像リサンプリングを行うべきです。
        </p>


        <h2 id="WillChange" class="heading">13.11. ‘<span class="property">will-change</span>’ プロパティの効果<a
                class="self-link" href="#WillChange"></a></h2>

        <p class="note"><a href="https://drafts.csswg.org/css-will-change/#will-change">CSS Will Change Module Level
                1</a> 仕様で <a class="property"
                href="https://drafts.csswg.org/css-will-change/#will-change">will-change</a> の定義を参照してください。</p>

        <p><a class="property" href="https://drafts.csswg.org/css-will-change/#will-change">will-change</a>
            プロパティは、コンテンツにどんな種類の変更が行われるかをユーザーエージェントに事前にヒントとして与え、要素のレンダリング最適化を行いやすくします。</p>

        <p><a class="property" href="https://drafts.csswg.org/css-will-change/#will-change">will-change</a>
            プロパティは、全てのSVG <a href="struct.html#TermGraphicsElement">グラフィック要素</a>に適用されます。ただしSVG要素はスクロールをサポートしないため、<span
                class="prop-value">scroll-position</span>値はSVG要素では効果がありません。</p>

        <div class="example">
            <p>次の例は、<a class="property" href="https://drafts.csswg.org/css-will-change/#will-change">will-change</a> を使い
                要素の <a class="property" href="coords.html#TransformProperty">transform</a>
                プロパティが変更されることを事前通知し、ユーザーエージェントが要素をGPUレイヤーにレンダリングして <a class="property"
                    href="coords.html#TransformProperty">transform</a> のスクリプト変更が滑らかに見える可能性を示します。</p>

            <pre>&lt;svg xmlns="http://www.w3.org/2000/svg">
  &lt;style>
    #background { fill: lemonchiffon; }
    #star {
      fill: cornflowerblue;
      stroke: navy; stroke-width: 5px; stroke-linejoin: round;
      paint-order: stroke fill;
      will-change: transform;
    }
    text { font: 24px sans-serif; user-select: none; }
  &lt;/style>
  &lt;g onmousemove="drag(evt.clientX, evt.clientY);"
     onmouseup="dragging = false;">
    &lt;rect id="background" width="100%" height="100%"/>
    &lt;text x="10" y="30">Drag the star!&lt;/text>
    &lt;path id="star" transform="translate(200,150)"
          d="M 0.00,-40.00 -11.76,-16.18 -38.04,-12.36 -19.02,6.18 -23.51,32.36
               0.00,20.00 23.51,32.36 19.02,6.18 38.04,-12.36 11.76,-16.18 z"
          onmousedown="dragging = true;"/>
  &lt;/g>
  &lt;script>
    var dragging = false;
    var star = document.getElementById("star");
    function drag(x, y) {
      if (dragging) {
        star.setAttribute("transform", "translate(" + x + "," + y + ")");
      }
    }
  &lt;/script>
&lt;/svg></pre>

            <div class="figure">
                <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/will-change-image.svg" width="200"
                    height="150" alt="A blue star with the text &quot;Drag the star!&quot; above." />
                <p class="caption">SVG要素で <a class="property"
                        href="https://drafts.csswg.org/css-will-change/#will-change">will-change</a>
                    がサポートされているユーザーエージェントでは、星がレイヤーにレンダリングされ、キャンバス上でドラッグ時に高速合成できる可能性があります。
                    <a href="https://www.w3.org/TR/SVG2/images/painting/will-change.svg">インタラクティブSVGドキュメントを表示</a>
                </p>
            </div>
        </div>

        <p class="note"><a class="property" href="https://drafts.csswg.org/css-will-change/#will-change">will-change</a>
            プロパティは
            SVG Tiny 1.2で定義されていた ‘<span class="property">buffered-rendering</span>’ プロパティを置き換えます。</p>
    </div>


    <div class="ready-for-wider-review">
        <h2 id="DOMInterfaces" class="heading">13.12. DOMインターフェース<a class="self-link" href="#DOMInterfaces"></a></h2>

        <h3 id="InterfaceSVGMarkerElement" class="heading">13.12.1. SVGMarkerElement インターフェース <a class="self-link"
                href="#InterfaceSVGMarkerElement"></a></h3>



        <p><a class="idlinterface" href="painting.html#InterfaceSVGMarkerElement">SVGMarkerElement</a> オブジェクトは、DOM内の
            <span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span>
            要素を表します。
        </p>

        <pre
            class="idl">[Exposed=Window]
interface <b>SVGMarkerElement</b> : <a class="idlinterface" href="types.html#InterfaceSVGElement">SVGElement</a> {

  // Marker Unit Types
  const unsigned short <a href="painting.html#__svg__SVGMarkerElement__SVG_MARKERUNITS_UNKNOWN">SVG_MARKERUNITS_UNKNOWN</a> = 0;
  const unsigned short <a href="painting.html#__svg__SVGMarkerElement__SVG_MARKERUNITS_USERSPACEONUSE">SVG_MARKERUNITS_USERSPACEONUSE</a> = 1;
  const unsigned short <a href="painting.html#__svg__SVGMarkerElement__SVG_MARKERUNITS_STROKEWIDTH">SVG_MARKERUNITS_STROKEWIDTH</a> = 2;

  // Marker Orientation Types
  const unsigned short <a href="painting.html#__svg__SVGMarkerElement__SVG_MARKER_ORIENT_UNKNOWN">SVG_MARKER_ORIENT_UNKNOWN</a> = 0;
  const unsigned short <a href="painting.html#__svg__SVGMarkerElement__SVG_MARKER_ORIENT_AUTO">SVG_MARKER_ORIENT_AUTO</a> = 1;
  const unsigned short <a href="painting.html#__svg__SVGMarkerElement__SVG_MARKER_ORIENT_ANGLE">SVG_MARKER_ORIENT_ANGLE</a> = 2;

  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLength">SVGAnimatedLength</a> <a href="painting.html#__svg__SVGMarkerElement__refX">refX</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLength">SVGAnimatedLength</a> <a href="painting.html#__svg__SVGMarkerElement__refY">refY</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedEnumeration">SVGAnimatedEnumeration</a> <a href="painting.html#__svg__SVGMarkerElement__markerUnits">markerUnits</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLength">SVGAnimatedLength</a> <a href="painting.html#__svg__SVGMarkerElement__markerWidth">markerWidth</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLength">SVGAnimatedLength</a> <a href="painting.html#__svg__SVGMarkerElement__markerHeight">markerHeight</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedEnumeration">SVGAnimatedEnumeration</a> <a href="painting.html#__svg__SVGMarkerElement__orientType">orientType</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedAngle">SVGAnimatedAngle</a> <a href="painting.html#__svg__SVGMarkerElement__orientAngle">orientAngle</a>;
  attribute DOMString <a href="painting.html#__svg__SVGMarkerElement__orient">orient</a>;

  void <a href="painting.html#__svg__SVGMarkerElement__setOrientToAuto">setOrientToAuto</a>();
  void <a href="painting.html#__svg__SVGMarkerElement__setOrientToAngle">setOrientToAngle</a>(<a class="idlinterface" href="types.html#InterfaceSVGAngle">SVGAngle</a> angle);
};

<a class="idlinterface" href="painting.html#InterfaceSVGMarkerElement">SVGMarkerElement</a> includes <a class="idlinterface" href="types.html#InterfaceSVGFitToViewBox">SVGFitToViewBox</a>;</pre>

        <p><a class="idlinterface" href="painting.html#InterfaceSVGMarkerElement">SVGMarkerElement</a>
            に定義された数値型マーカー単位定数は、<span class="attr-name">‘<a
                    href="painting.html#MarkerUnitsAttribute"><span>markerUnits</span></a>’</span>
            属性が取るキーワード値を表します。それぞれの意味は以下の通りです：</p>

        <table class="vert">
            <tr>
                <th>定数</th>
                <th>意味</th>
            </tr>
            <tr>
                <td><b id="__svg__SVGMarkerElement__SVG_MARKERUNITS_USERSPACEONUSE">SVG_MARKERUNITS_USERSPACEONUSE</b>
                </td>
                <td><span class="attr-value">userSpaceOnUse</span> キーワード。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGMarkerElement__SVG_MARKERUNITS_STROKEWIDTH">SVG_MARKERUNITS_STROKEWIDTH</b></td>
                <td><span class="attr-value">strokeWidth</span> キーワード。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGMarkerElement__SVG_MARKERUNITS_UNKNOWN">SVG_MARKERUNITS_UNKNOWN</b></td>
                <td>他の値。</td>
            </tr>
        </table>

        <p><a class="idlinterface" href="painting.html#InterfaceSVGMarkerElement">SVGMarkerElement</a>
            に定義された数値型マーカー方位定数は、<span class="attr-name">‘<a
                    href="painting.html#OrientAttribute"><span>orient</span></a>’</span>
            属性が取る値のタイプを表します。それぞれの意味は以下の通りです：</p>

        <table class="vert">
            <tr>
                <th>定数</th>
                <th>意味</th>
            </tr>
            <tr>
                <td><b id="__svg__SVGMarkerElement__SVG_MARKER_ORIENT_AUTO">SVG_MARKER_ORIENT_AUTO</b></td>
                <td><span class="attr-value">auto</span> キーワード。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGMarkerElement__SVG_MARKER_ORIENT_ANGLE">SVG_MARKER_ORIENT_ANGLE</b></td>
                <td><a href="https://www.w3.org/TR/2012/WD-css3-values-20120308/#angles">&lt;angle></a> または <a
                        href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a> 値で方位角を指定。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGMarkerElement__SVG_MARKER_ORIENT_UNKNOWN">SVG_MARKER_ORIENT_UNKNOWN</b></td>
                <td>他の値。</td>
            </tr>
        </table>

        <p><b id="__svg__SVGMarkerElement__markerUnits">markerUnits</b> IDL属性は
            <a href="types.html#TermReflect">reflects</a> <span class="attr-name">‘<a
                    href="painting.html#MarkerUnitsAttribute"><span>markerUnits</span></a>’</span> 内容属性を反映します。
            <a href="types.html#TermNumericTypeValue">数値型値</a>は上記表で定義されています。
        </p>

        <p><b id="__svg__SVGMarkerElement__orientType">orientType</b>、
            <b id="__svg__SVGMarkerElement__orientAngle">orientAngle</b>、
            <b id="__svg__SVGMarkerElement__orient">orient</b> の各IDL属性は
            <span class="attr-name">‘<a href="painting.html#OrientAttribute"><span>orient</span></a>’</span> 内容属性を反映します。
            <a href="types.html#TermNumericTypeValue">数値型値</a>は以下の通りです：
        </p>

        <table class="vert">
            <tr>
                <th>値</th>
                <th>数値型値</th>
            </tr>
            <tr>
                <td><span class="attr-value">auto</span></td>
                <td><a href="painting.html#__svg__SVGMarkerElement__SVG_MARKER_ORIENT_AUTO">SVG_MARKER_ORIENT_AUTO</a>
                </td>
            </tr>
            <tr>
                <td><span class="attr-value">auto-start-reverse</span></td>
                <td><a
                        href="painting.html#__svg__SVGMarkerElement__SVG_MARKER_ORIENT_UNKNOWN">SVG_MARKER_ORIENT_UNKNOWN</a>
                </td>
            </tr>
            <tr>
                <td><a href="https://www.w3.org/TR/2012/WD-css3-values-20120308/#angles">&lt;angle></a> | <a
                        href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a></td>
                <td><a href="painting.html#__svg__SVGMarkerElement__SVG_MARKER_ORIENT_ANGLE">SVG_MARKER_ORIENT_ANGLE</a>
                </td>
            </tr>
        </table>

        <p><b id="__svg__SVGMarkerElement__refX">refX</b>、
            <b id="__svg__SVGMarkerElement__refY">refY</b>、
            <b id="__svg__SVGMarkerElement__markerWidth">markerWidth</b>、
            <b id="__svg__SVGMarkerElement__markerHeight">markerHeight</b> の各IDL属性は
            <span class="attr-name">‘<a href="painting.html#MarkerElementRefXAttribute"><span>refX</span></a>’</span>、
            <span class="attr-name">‘<a href="painting.html#MarkerElementRefYAttribute"><span>refY</span></a>’</span>、
            <span class="attr-name">‘<a href="painting.html#MarkerWidthAttribute"><span>markerWidth</span></a>’</span>、
            <span class="attr-name">‘<a href="painting.html#MarkerHeightAttribute"><span>markerHeight</span></a>’</span>
            の内容属性を反映します。
        </p>

        <p><b id="__svg__SVGMarkerElement__setOrientToAuto">setOrientToAuto</b>
            メソッドは <span class="attr-name">‘<a href="painting.html#OrientAttribute"><span>orient</span></a>’</span> 属性値を
            <span class="attr-value">'auto'</span> に設定します。setOrientToAuto() を呼び出すと、<span class="attr-name">‘<a
                    href="painting.html#OrientAttribute"><span>orient</span></a>’</span> 属性が単純に <span
                class="attr-value">'auto'</span> になります。
        </p>

        <p><b id="__svg__SVGMarkerElement__setOrientToAngle">setOrientToAngle</b>
            メソッドは <span class="attr-name">‘<a href="painting.html#OrientAttribute"><span>orient</span></a>’</span>
            属性値を特定の角度値に設定します。setOrientToAngle(<var>angle</var>) を呼び出すと、<span class="attr-name">‘<a
                    href="painting.html#OrientAttribute"><span>orient</span></a>’</span> 属性は
            <a href="types.html#TermReserialize">再シリアライズ</a>され、値は <var>angle</var> になります。
        </p>


    </div>

    <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
    <script src="https://www.w3.org/TR/SVG2/images/style/expanders.js" type="text/javascript"></script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
</body>

</html>