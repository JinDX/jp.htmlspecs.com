<!DOCTYPE html>

<!--
  Scalable Vector Graphics (SVG) 2
  Chapter 2: Conformance Criteria

  Note: This document is generated from ../master/conform.html.
  Run "make" from the root of the repository to regenerate it.
  -->

<html lang="ja-JP" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8" />
    <title>適合性基準 — SVG 2</title>

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <style>
        .feature {
            text-align: right;
        }

        .embedcontext {
            width: 120px;
            height: 120px;
        }

        table.ref_modes td {
            width: 120px;
            border: gainsboro 1px solid;
        }

        table.ref_modes th {
            padding: 0.5em 0;
            background-color: gainsboro;
        }

        th,
        td {
            text-align: center;
        }

        .bg {
            background-image: url(https://www.w3.org/TR/SVG2/images/conform/smiley.svg);
            width: 120px;
            height: 120px;
        }

        table.features {
            border: gray 1px solid;
            margin-top: 1em;
        }

        table.features th,
        table.features td {
            text-align: left;
            background-color: gainsboro !important;
            color: black !important;
            padding: 0.5em !important;
        }

        table.features thead th {
            text-align: center;
            background-color: gray !important;
            color: white !important;
            font-weight: normal;
        }
    </style>
    <!-- Style sheets for local dev. Will be standardized in processing.
  Add attribute data-keep="" to any extra stylesheet link you do not want removed
  (or use <style>), and include it before here. -->


    <link rel="stylesheet" title="Default" href="https://www.w3.org/TR/SVG2/style/svg.css" type="text/css"
        media="screen" />
    <link rel="alternate stylesheet" title="Only annotations for publication"
        href="https://www.w3.org/TR/SVG2/style/default_no_maturity.css" type="text/css" media="screen" />
    <link rel="alternate stylesheet" title="No issues/annotations"
        href="https://www.w3.org/TR/SVG2/style/default_no_issues.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-ED" type="text/css" media="screen" />
    <script src="https://www.w3.org/TR/SVG2/style/link-fixup.js"></script>
    <script data-script-mathjax="" async=""
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_SVG"></script>
</head>

<body class="chapter-conform">

    <h1>第2章: 適合性基準</h1>
    <nav id="toc">
        <div class="header top"><a href="index.html">概要</a> . <a href="intro.html">前へ</a> . <a href="render.html">次へ</a>
            . <a href="eltindex.html">要素一覧</a> . <a href="attindex.html">属性一覧</a> . <a href="propidx.html">プロパティ一覧</a>
        </div>
        <h2 id="Contents" class="contents">目次</h2>
        <ol class="toc">
            <li>
                <ol class="toc">
                    <li><a href="conform.html#conformance-overview"><span class="secno">2.1.</span> 概要</a></li>
                    <li><a href="conform.html#processing-modes"><span class="secno">2.2.</span> 処理モード</a>
                        <ol class="toc">
                            <li><a href="conform.html#features"><span class="secno">2.2.1.</span> 機能</a></li>
                            <li><a href="conform.html#dynamic-interactive-mode"><span class="secno">2.2.2.</span>
                                    動的インタラクティブモード</a></li>
                            <li><a href="conform.html#animated-mode"><span class="secno">2.2.3.</span> アニメーションモード</a>
                            </li>
                            <li><a href="conform.html#secure-animated-mode"><span class="secno">2.2.4.</span>
                                    セキュアアニメーションモード</a></li>
                            <li><a href="conform.html#static-mode"><span class="secno">2.2.5.</span> 静的モード</a>
                            </li>
                            <li><a href="conform.html#secure-static-mode"><span class="secno">2.2.6.</span>
                                    セキュア静的モード</a></li>
                        </ol>
                    </li>
                    <li><a href="conform.html#referencing-modes"><span class="secno">2.3.</span> SVGサブリソース文書の処理モード</a>
                        <ol class="toc">
                            <li><a href="conform.html#examples"><span class="secno">2.3.1.</span> 例</a></li>
                        </ol>
                    </li>
                    <li><a href="conform.html#DocumentConformanceClasses"><span class="secno">2.4.</span> 文書適合性クラス</a>
                        <ol class="toc">
                            <li><a href="conform.html#ConformingSVGDOMSubtrees"><span class="secno">2.4.1.</span>
                                    適合SVG DOM部分木</a></li>
                            <li><a href="conform.html#ConformingSVGFragments"><span class="secno">2.4.2.</span>
                                    適合SVGマークアップ断片</a></li>
                            <li><a href="conform.html#ConformingSVGXMLFragments"><span class="secno">2.4.3.</span>
                                    適合XML互換SVGマークアップ断片</a></li>
                            <li><a href="conform.html#ConformingSVGXMLDOMSubtrees"><span class="secno">2.4.4.</span>
                                    適合XML互換SVG DOM部分木</a></li>
                            <li><a href="conform.html#ConformingSVGStandAloneFiles"><span class="secno">2.4.5.</span>
                                    適合SVGスタンドアロンファイル</a></li>
                            <li><a href="conform.html#ErrorProcessing"><span class="secno">2.4.6.</span> エラー処理</a></li>
                        </ol>
                    </li>
                    <li><a href="conform.html#SoftwareConformanceClasses"><span class="secno">2.5.</span>
                            ソフトウェア適合性クラス</a>
                        <ol class="toc">
                            <li><a href="conform.html#ConformingSVGGenerators"><span class="secno">2.5.1.</span>
                                    適合SVGジェネレータ</a></li>
                            <li><a href="conform.html#ConformingSVGAuthoringTools"><span class="secno">2.5.2.</span>
                                    適合SVGオーサリングツール</a></li>
                            <li><a href="conform.html#ConformingSVGServers"><span class="secno">2.5.3.</span>
                                    適合SVGサーバ</a></li>
                            <li><a href="conform.html#ConformingSVGInterpreters"><span class="secno">2.5.4.</span>
                                    適合SVGインタープリタ</a></li>
                            <li><a href="conform.html#ConformingSVGViewers"><span class="secno">2.5.5.</span>
                                    適合SVGビューア</a>
                                <ol class="toc">
                                    <li><a href="conform.html#PrintingImplementationNotes"><span
                                                class="secno">2.5.5.1.</span> 印刷実装ノート</a></li>
                                </ol>
                            </li>
                            <li><a href="conform.html#ConformingHighQualitySVGViewers"><span class="secno">2.5.6.</span>
                                    高品質SVGビューア適合</a></li>
                        </ol>
                    </li>
                </ol>
            </li>
        </ol>
    </nav>

    <h2 id="conformance-overview" class="heading">2.1. 概要<a class="self-link" href="#conformance-overview"></a>
    </h2>

    <p>SVGで定義されたグラフィックスは様々な用途に利用できます。
        そのため、SVGを利用するソフトウェアが全て同じ機能を持つわけではありません。
        SVG仕様への適合性は単純な二元論ではなく、
        ソフトウェアは限定された機能セット内で適合している場合もあります。
    </p>

    <p>
        また、SVGは他の種類の文書に統合されることを前提に設計されています。
        統合方法によっては、限定的な機能セットのみが適切な場合もあります。
        SVG文書フラグメントは、他の文書から参照されたり、組み込まれたりして
        ユーザーエージェントによって処理される場合があります。SVG文書は
        主文書として直接表示されることもできます。
        SVG文書フラグメントの利用方法ごとに、その処理方法に関する要求事項が異なります。</p>

    <p>この章では、文書内で有効・無効となる機能の組み合わせを包括する
        <dfn id="processing-mode">処理モード</dfn>
        をいくつか定義します。
        さらに、SVG文書が他のSVG文書を参照・埋め込む際に、どの処理モードを使うべきか
        という規範的な要求事項を定めます。
        他の仕様でもSVG文書の処理方法を説明するために、同じ処理モードを参照できるようになっています。
    </p>

    <p class="note">この文書は、HTMLや各種CSS仕様など、SVG文書を参照または包含できる
        他仕様に対して規範的な要求事項を課すものではありません。意図としては、
        これら他仕様が本書の適切な処理モードを規範的に指示することです。</p>

    <p>この章ではまた、
        <a href="#DocumentConformanceClasses">様々な種類のSVGコンテンツ</a>や、
        <a href="#SoftwareConformanceClasses">SVGを利用または生成する様々なソフトウェアクラス</a>
        に対する具体的な適合要件も概説します。
    </p>

    <h2 id="processing-modes" class="heading">2.2. 処理モード<a class="self-link" href="#processing-modes"></a>
    </h2>

    <p>この節ではSVG文書用の標準的な<a href="conform.html#processing-modes">処理モード</a>セットを定義します。
        各処理モードは、特定の高レベルSVG機能が有効かどうかを指定します。</p>

    <h3 id="features" class="heading">2.2.1. 機能<a class="self-link" href="#features"></a></h3>

    <p>処理モードにより有効・無効となる可能性のある機能は以下の通りです：</p>

    <dl>
        <dt>宣言的アニメーション</dt>
        <dd>
            <p>宣言的アニメーションには、SVG内のアニメーション要素 —
                <span class="element-name">‘<a
                        href="https://svgwg.org/specs/animations/#AnimateElement"><span>animate</span></a>’</span>、
                <span class="element-name">‘<a
                        href="https://svgwg.org/specs/animations/#AnimateMotionElement"><span>animateMotion</span></a>’</span>、
                <span class="element-name">‘<a
                        href="https://svgwg.org/specs/animations/#AnimateTransformElement"><span>animateTransform</span></a>’</span>
                および<span class="element-name">‘<a
                        href="https://svgwg.org/specs/animations/#SetElement"><span>set</span></a>’</span>、さらにCSS
                トランジションやアニメーション
                （詳細は<a href="animate.html">アニメーション付録</a>参照）を含みます。
                SVG文書で宣言的アニメーションが無効の場合、アニメーション要素やCSSトランジション／アニメーションは適用・実行されません。
            </p>
            <p class="note">これは、文書のアニメーション状態を0秒で一時停止することとは異なり、
                アニメーションが0秒で開始するよう定義されていても、適用されません。</p>
        </dd>

        <dt>外部リソースへの参照</dt>
        <dd>
            <p><a href="linking.html#TermExternalReference">外部リソース</a>への参照とは、
                URL参照やネットワークアクセス要求であり、
                文書内で使用されるマークアップ、スタイルプロパティ、スクリプト、その他Webプラットフォーム機能によるものです。ただし以下は除きます：
            </p>
            <ul>
                <li><a href="linking.html#TermSameDocumentURL">同一文書URL参照</a>（<a href="linking.html">リンク章</a>で定義）</li>
                <li><a href="linking.html#TermDataURL">data URL参照</a>（<a
                        href="http://www.ietf.org/rfc/rfc2397.txt">"data" URLスキーム</a>
                    [<a href="refs.html#ref-rfc2397">rfc2397</a>]で定義）</li>
            </ul>
            <p>SVG文書で外部参照が無効の場合、外部参照による文書取得は
                ネットワークエラーが発生しデータが受信されなかったものとして扱います。</p>
            <p>外部参照が有効な場合、
                インターネットからの外部ファイル要求をサポートするユーザーエージェントは、
                <a href="linking.html#processingURL-fetch">リンク章</a>で説明される
                クロスオリジンリソース取得の制約を遵守しなければなりません。
            </p>
        </dd>

        <dt>スクリプトの実行</dt>
        <dd>
            <p>スクリプトの実行とは、SVGの<span class="element-name">‘<a
                        href="interact.html#ScriptElement"><span>script</span></a>’</span>要素、
                <a href="interact.html#TermEventAttribute">イベント属性</a>（例：SVG要素上の<span class="attr-name">‘<a
                        href="interact.html#EventAttributes"><span>onclick</span></a>’</span>）、
                文書で使用されるその他Webプラットフォーム機能によるスクリプト（HTMLの<span class="element-name">‘<a
                        href="interact.html#ScriptElement"><span>script</span></a>’</span>要素など）を実行することです。
                SVG文書でスクリプト実行が無効の場合、文書内のいかなるスクリプトも実行されません。
            </p>
        </dd>

        <dt>インタラクション</dt>
        <dd>
            <p>インタラクションとは、DOMイベントの配信や
                テキスト選択・フォーカス変更・リンク遷移・アニメーション／トランジションの
                トリガーなど、ユーザー入力（マウスやキーボード操作）に反応して
                ユーザーエージェント特有のUI動作を呼び出すことです。SVG文書で
                インタラクションが無効の場合、文書やその要素に対するユーザー入力イベントは
                何も影響を及ぼしません。</p>
        </dd>
    </dl>

    <h3 id="dynamic-interactive-mode" class="heading">2.2.2. 動的インタラクティブモード<a class="self-link"
            href="#dynamic-interactive-mode"></a></h3>

    <p>この<a href="conform.html#processing-modes">処理モード</a>ではSVG言語のいかなる機能にも制限を課しません。</p>

    <table class="features">
        <thead>
            <tr>
                <th colspan="2">動的インタラクティブ機能</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th>スクリプト実行</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>外部参照</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>宣言的アニメーション</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>インタラクション</th>
                <td>はい</td>
            </tr>
        </tbody>
    </table>


    <h3 id="animated-mode" class="heading">2.2.3. アニメーションモード<a class="self-link" href="#animated-mode"></a></h3>

    <p>この<a href="conform.html#processing-modes">処理モード</a>は、SVG文書が外部参照の解決を許可される
        アニメーション画像として利用されるが、インタラクティブな文書として利用されない
        状況を想定しています。</p>

    <table class="features">
        <thead>
            <tr>
                <th colspan="2">アニメーション機能</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th>スクリプト実行</th>
                <td>いいえ</td>
            </tr>
            <tr>
                <th>外部参照</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>宣言的アニメーション</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>インタラクション</th>
                <td>いいえ</td>
            </tr>
        </tbody>
    </table>

    <h3 id="secure-animated-mode" class="heading">2.2.4. セキュアアニメーションモード<a class="self-link"
            href="#secure-animated-mode"></a></h3>

    <p>この<a href="conform.html#processing-modes">処理モード</a>は、SVG文書が外部参照の解決を許可しない
        アニメーション画像として利用され、かつインタラクティブな文書として利用されない
        状況を想定しています。画像サポートが従来ラスター画像（JPEG, PNG, GIF等）に
        限定されていた場面などで利用される場合があります。</p>

    <table class="features">
        <thead>
            <tr>
                <th colspan="2">セキュアアニメーション機能</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th>スクリプト実行</th>
                <td>いいえ</td>
            </tr>
            <tr>
                <th>外部参照</th>
                <td>いいえ</td>
            </tr>
            <tr>
                <th>宣言的アニメーション</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>インタラクション</th>
                <td>いいえ</td>
            </tr>
        </tbody>
    </table>

    <h3 id="static-mode" class="heading">2.2.5. 静的モード<a class="self-link" href="#static-mode"></a></h3>

    <p>この<a href="conform.html#processing-modes">処理モード</a>は、SVG文書が外部参照の解決を許可される
        非アニメーション画像として利用されるが、インタラクティブな文書として利用されない
        状況を想定しています。
        例えば、SVGビューアが印刷文書に組み込むグラフィックスを処理する場合などは
        静的モードを用いるでしょう。
    </p>

    <table class="features">
        <thead>
            <tr>
                <th colspan="2">静的機能</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th>スクリプト実行</th>
                <td>いいえ</td>
            </tr>
            <tr>
                <th>外部参照</th>
                <td>はい</td>
            </tr>
            <tr>
                <th>宣言的アニメーション</th>
                <td>いいえ</td>
            </tr>
            <tr>
                <th>インタラクション</th>
                <td>いいえ</td>
            </tr>
        </tbody>
    </table>


    <h3 id="secure-static-mode" class="heading">2.2.6. セキュア静的モード<a class="self-link" href="#secure-static-mode"></a>
    </h3>

    <p>この<a
            href="conform.html#processing-modes">処理モード</a>は、SVG文書が非アニメーション画像として利用され、外部参照の解決が許可されず、インタラクティブな文書として利用されない状況を想定しています。このモードは、画像サポートが従来非アニメーションラスター画像（JPEGやPNGなど）に限定されていた場合などで利用されることがあります。
    </p>

    <table class="features">
        <thead>
            <tr>
                <th colspan="2">セキュア静的機能</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th>スクリプト実行</th>
                <td>いいえ</td>
            </tr>
            <tr>
                <th>外部参照</th>
                <td>いいえ</td>
            </tr>
            <tr>
                <th>宣言的アニメーション</th>
                <td>いいえ</td>
            </tr>
            <tr>
                <th>インタラクション</th>
                <td>いいえ</td>
            </tr>
        </tbody>
    </table>

    <h2 id="referencing-modes" class="heading">2.3. SVGサブリソース文書の処理モード<a class="self-link" href="#referencing-modes"></a>
    </h2>

    <p>
        SVG文書を直接閲覧する場合、
        ユーザーエージェントがサポートする最も包括的な
        <a href="conform.html#processing-modes">処理モード</a>で表示されることが期待されます。
        しかし、SVGがサブリソースや埋め込み文書として処理される場合は、
        以下の制限が適用されます。
    </p>

    <dl>
        <dt id="image-document-mode"><span class="element-name">‘<a
                    href="embedded.html#ImageElement"><span>image</span></a>’</span>参照</dt>
        <dd>
            <p>SVGが<span class="element-name">‘<a
                        href="embedded.html#ImageElement"><span>image</span></a>’</span>要素内に埋め込まれる場合、
                埋め込み文書が<a href="conform.html#processing-modes">宣言的アニメーション</a>をサポートしていれば<a
                    href="conform.html#secure-animated-mode">セキュアアニメーションモード</a>で、
                そうでなければ<a href="conform.html#secure-static-mode">セキュア静的モード</a>で処理されなければなりません。
            </p>

            <p class="note">同じ処理モードは、SVGがラスター画像の代わりとして利用される他のケース
                （HTML<span class="element-name">‘img’</span>要素や、<a
                    href="https://www.w3.org/TR/css3-values/#images">&lt;image></a>データ型を取るCSSプロパティ等）でも使われることが期待されます。
                これは、画像ソースが
                「非インタラクティブかつオプションでアニメーション可能な、ページ分割もスクリプトもされない画像リソース」
                でなければならないという
                <a href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element">HTMLの要件</a>
                [<a href="refs.html#ref-html">HTML</a>]
                と一貫しています。
            </p>
        </dd>

        <dt id="embedded-document-mode"><span class="element-name">‘<a
                    href="embedded.html#HTMLElements"><span>iframe</span></a>’</span>参照</dt>
        <dd>
            <p>SVG文書がSVG文書内のHTML<span class="element-name">‘<a
                        href="embedded.html#HTMLElements"><span>iframe</span></a>’</span>要素によって参照される場合、埋め込み側文書と同じ処理モードを使用しなければなりません。ただし、埋め込み<span
                    class="element-name">‘<a href="embedded.html#HTMLElements"><span>iframe</span></a>’</span>要素の<a
                    href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-sandbox"><span
                        class="attr-name">sandbox</span>属性</a>で定められる制限が適用されます。
            </p>

            <p class="note">同じ処理規則は、SVG文書がHTMLの
                <span class="element-name">‘embed’</span>、
                <span class="element-name">‘iframe’</span>、
                <span class="element-name">‘object’</span>要素でロードされる場合にも適用されます
                <a href="refs.html#ref-html">[HTML]</a>。
                インタラクティブなウェブブラウザで
                <a
                    href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context">トップレベル閲覧コンテキスト</a>となるHTML文書はSVGの
                <a href="conform.html#dynamic-interactive-mode">動的インタラクティブ処理モード</a>と同等です。
            </p>
        </dd>

        <dt id="template-document-mode"><span class="element-name">‘<a
                    href="struct.html#UseElement"><span>use</span></a>’</span>要素およびその他<span class="attr-name">‘<a
                    href="https://svgwg.org/specs/animations/#HrefAttribute"><span>href</span></a>’</span>参照
        </dt>
        <dd>
            <p>SVG文書が<span class="element-name">‘<a href="struct.html#UseElement"><span>use</span></a>’</span>要素参照や<a
                    href="painting.html#TermPaintServerElement">ペイントサーバ要素</a>クロスリファレンス経由でロードされた場合、<a
                    href="conform.html#secure-static-mode">セキュア静的モード</a>で処理されなければなりません。
            </p>

            <p class="note">
                サブリソース文書の処理中は、パフォーマンス面と、リソース文書がタイムライン参照するための文脈が定義されていないため、アニメーションは実行されません。
                ただし、<span class="element-name">‘<a
                        href="struct.html#UseElement"><span>use</span></a>’</span>要素参照やペイントサーバクロスリファレンスによってサブリソース文書の要素が現在の文書へクローンされる場合は、クローンされた<a
                    href="struct.html#TermElementInstance">要素インスタンス</a>は現在の文書のタイムラインでアニメーションでき、
                <a href="struct.html#UseAnimations">use要素シャドウツリーのアニメーション</a>で説明されるように、追加のサブリソースファイルの読み込みもトリガーされる場合があります。
            </p>
        </dd>

        <dt id="resource-document-mode">グラフィック効果参照</dt>
        <dd>
            <p>SVG文書が、文書内の特定要素をターゲットとするスタイルプロパティ参照（SVGを画像形式としてではなく）経由でロードされる場合、<a
                    href="conform.html#secure-static-mode">セキュア静的モード</a>で処理されなければなりません。
            </p>

            <p class="note">サブリソース文書では、パフォーマンス面とタイムライン参照文脈が定義されていないため、アニメーションは実行されません。
            </p>

            <p>一部のスタイルプロパティは、特定要素または画像ファイル全体のいずれかを参照する場合があり、前者の方がより制限された処理モードとなります。
                例えば、SVG<span class="element-name">‘<a
                        href="https://drafts.fxtf.org/css-masking-1/#MaskElement"><span>mask</span></a>’</span>要素への参照はアニメーションされませんが、画像マスクとして使われるSVGファイル全体はアニメーション可能です。
            </p>
        </dd>

        <dt id="font-document-mode">フォント内SVG</dt>
        <dd>
            <p>SVGファイルがフォント参照の一部として処理される場合、
                アニメーション付きグリフがサポートされていれば<a href="conform.html#secure-animated-mode">セキュアアニメーションモード</a>で、
                そうでなければ<a href="conform.html#secure-static-mode">セキュア静的モード</a>で処理されなければなりません。
            </p>

            <p class="note">これらの制約は、"SVG"テーブルから文書を処理する際のOpenType仕様にも含まれています。
                OpenTypeはさらに、テキストやforeignObjectのレンダリングを防ぐ<a
                    href="styling.html#UAStyleSheet">ユーザーエージェントスタイルシート</a>の形で追加制約を適用します
                [<a href="refs.html#ref-opentype">OPENTYPE</a>]。</p>
        </dd>
    </dl>

    <p>ホスト文書にインラインで含まれるSVG文書フラグメントは、ホスト文書の<a href="conform.html#processing-modes">処理モード</a>と一致する処理モードを使用しなければなりません。
        SVG<span class="element-name">‘<a
                href="embedded.html#ForeignObjectElement"><span>foreignObject</span></a>’</span>要素の子として含まれるSVG文書フラグメントは、周囲のSVG文書の<a
            href="conform.html#processing-modes">処理モード</a>を使用しなければなりません。非SVGの外部コンテンツも同等の制約で処理される必要があります。
    </p>

    <p class="note">
        例えば、SVG文書がHTML<span class="element-name">‘img’</span>やSVG<span class="element-name">‘<a
                href="embedded.html#ImageElement"><span>image</span></a>’</span>要素による参照で<a
            href="conform.html#secure-animated-mode">セキュアアニメーションモード</a>で利用されている場合、
        <span class="element-name">‘<a
                href="embedded.html#ForeignObjectElement"><span>foreignObject</span></a>’</span>要素内のコンテンツはスクリプト・インタラクション・外部ファイル参照を無効化しなければなりませんが、宣言的アニメーションは有効にするべきです。
    </p>



    <h3 id="examples" class="heading">2.3.1. 例<a class="self-link" href="#examples"></a></h3>

    <div class="example">
        <p>以下は、参照によってHTMLページにSVGを埋め込む様々な方法と、それぞれに期待される処理モードと許可される機能です。
        </p>
        <p>
            "Live Example"行の各セルには黄色いスマイリーフェイスが表示されるはずです。
            下記各例では、目をクリックするとリンク遷移のテストになり、
            顔をクリックすると宣言的インタラクションとスクリプト実行のテストになります。
            リンクは画像を青い四角に置き換え（再クリックで元画像に戻ります）。
            宣言的インタラクションは、<span class="element-name">‘<a
                    href="https://svgwg.org/specs/animations/#SetElement"><span>set</span></a>’</span>要素で顔の色を黄色系から緑系に変化させ、
            CSS疑似クラスでインタラクティブ要素にストロークを追加しています。
            スクリプトはスマイルを描画します。
            時間ベースの宣言的アニメーション（インタラクションベースではなく）は、左目がウィンクしている（<span class="element-name">‘<a
                    href="https://svgwg.org/specs/animations/#AnimateElement"><span>animate</span></a>’</span>要素使用）、または目が濃青から定期的に水色に変わる（CSSキーフレームアニメーション使用）場合にサポートされていることを示します。
        </p>

        <p class="note">
            ここで示される期待される処理モードや機能は、対応するHTMLやCSS仕様の今後の変更によって変わる可能性があります。
        </p>

        <table class="ref_modes">
            <tbody>
                <tr>
                    <th scope="row">埋め込み方法</th>
                    <th>object（サンドボックスなし）</th>
                    <th>iframe（<code>sandbox=""</code>付き）</th>
                    <th>img</th>
                    <th>CSS背景</th>
                </tr>
                <tr>
                    <th scope="row">期待される処理モード</th>
                    <td>動的インタラクティブ</td>
                    <td>動的インタラクティブ（制限あり）</td>
                    <td>セキュアアニメーション</td>
                    <td>セキュアアニメーション</td>
                </tr>
                <tr>
                    <th scope="row">宣言的・時間ベースのアニメーション<br />（左目ウィンク、両目の色変化）</th>
                    <td>許可</td>
                    <td>許可</td>
                    <td>許可</td>
                    <td>許可</td>
                </tr>
                <tr>
                    <th scope="row">宣言的・インタラクティブなアニメーションとスタイル変化<br />（クリックで顔色変更、ホバーやフォーカスで顔/目に枠線追加）</th>
                    <td>許可</td>
                    <td>許可</td>
                    <td>無効</td>
                    <td>無効</td>
                </tr>
                <tr>
                    <th scope="row">同一閲覧コンテキスト内でのリンク遷移（同一ドメイン）<br />（目クリックで画像変化）</th>
                    <td>許可</td>
                    <td>許可</td>
                    <td>無効</td>
                    <td>無効</td>
                </tr>
                <tr>
                    <th scope="row">スクリプトによるインタラクション<br />（顔クリックでスマイルが広がる）</th>
                    <td>許可</td>
                    <td>無効（サンドボックスのため）</td>
                    <td>無効</td>
                    <td>無効</td>
                </tr>
                <tr>
                    <th scope="row">Live Example</th>
                    <td>
                        <object class="embedcontext" type="image/svg+xml"
                            data="https://www.w3.org/TR/SVG2/images/conform/smiley.svg"
                            aria-label="smiley face, as an object">このブラウザは埋め込みSVG画像をサポートしていません。</object>
                    </td>
                    <td>
                        <iframe sandbox="" class="embedcontext"
                            src="https://www.w3.org/TR/SVG2/images/conform/smiley.svg" style="border: 0"
                            aria-label="smiley face, as an iframe">このブラウザは埋め込みSVG画像をサポートしていません。</iframe>
                    </td>
                    <td>
                        <img id="js-embed-img" class="embedcontext" alt="smiley face, as an image"
                            src="https://www.w3.org/TR/SVG2/images/conform/smiley.svg" />
                    </td>
                    <td>
                        <div class="embedcontext"
                            style="background-image: url(https://www.w3.org/TR/SVG2/images/conform/smiley.svg);"
                            aria-label="smiley face, as a background image"> </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <h2 id="DocumentConformanceClasses" class="heading">2.4. 文書適合性クラス <a class="self-link"
            href="#DocumentConformanceClasses"></a></h2>

    <p>SVGは特定のファイル形式や文書型ではなく、文書オブジェクトモデル（DOM）によって定義されています。
        したがってSVGコンテンツの適合性は、その内容が適合するDOMであるか、または適合するDOMを生成できるかどうかによって定義されます。
        追加の適合性クラスは、内容が有効かつ整形式なXMLであるかどうかにも依存します（[<a href="refs.html#ref-xml">xml</a>]）。
    </p>

    <h3 id="ConformingSVGDOMSubtrees" class="heading">2.4.1. 適合SVG DOM部分木<a class="self-link"
            href="#ConformingSVGDOMSubtrees"></a></h3>

    <p>指定した要素を根とするDOMノードツリーまたは部分木が
        <dfn>適合SVG DOM部分木</dfn>であるためには、
        それが<a href="struct.html#TermSVGDocumentFragment">SVG文書断片</a>を形成し、本書（<a href="index.html">Scalable Vector
            Graphics (SVG) Specification</a>）で記載された仕様に従う必要があります。
        具体的には次を満たします：
    </p>
    <ul>
        <li><a href="struct.html#Namespace">SVG名前空間</a>内の<span class="element-name">‘<a
                    href="struct.html#SVGElement"><span>svg</span></a>’</span>要素を根とすること</li>

        <li>本書（<a href="index.html">Scalable Vector Graphics (SVG) Specification</a>）で定義された要素のコンテンツモデルや属性規則に適合していること
        </li>

        <li>SVG名前空間内で他仕様によって定義された全ての要素について、その仕様で定義されたコンテンツモデル・属性規則に適合していること
            （例：
            [<a href="refs.html#ref-filter-effects-1">filter-effects-1</a>]、
            [<a href="refs.html#ref-css-masking-1">css-masking-1</a>]、
            [<a href="refs.html#ref-svg-animation">svg-animation</a>]など）。
        </li>

    </ul>


    <p>SVG文書断片は、<a href="https://www.w3.org/TR/xml-names">Namespaces in XML</a>（[<a
            href="refs.html#ref-xml-names">xml-names</a>]）で説明されるXML名前空間機能を使って親XML文書内に含めることができます。
        ただし、適合SVG DOM部分木は<span class="element-name">‘<a
                href="struct.html#SVGElement"><span>svg</span></a>’</span>要素を根にもつ必要があるため、
        SVG名前空間から個々の<span class="element-name">‘<a
                href="struct.html#SVGElement"><span>svg</span></a>’</span>以外の要素を使うことは許可されません。つまり、以下の文書のSVG部分は適合して<em>いません</em>：
    </p>

    <pre>&lt;?xml version="1.0" standalone="no"?>
&lt;!DOCTYPE SomeParentXMLGrammar PUBLIC "-//SomeParent" "http://SomeParentXMLGrammar.dtd">
&lt;ParentXML>
  &lt;!-- Elements from ParentXML go here -->
  &lt;!-- The following is <strong>not</strong> conforming -->
  &lt;z:rect xmlns:z="http://www.w3.org/2000/svg"
          x="0" y="0" width="10" height="10" />
  &lt;!-- More elements from ParentXML go here -->
&lt;/ParentXML></pre>

    <p>代わりに、SVG部分が<a href="conform.html#ConformingSVGDOMSubtrees">適合SVG DOM部分木</a>となるよう修正するには、次のようにします：</p>

    <pre>
&lt;?xml version="1.0" standalone="no"?>
&lt;!DOCTYPE SomeParentXMLGrammar PUBLIC "-//SomeParent" "http://SomeParentXMLGrammar.dtd">
&lt;ParentXML>
  &lt;!-- Elements from ParentXML go here -->
  &lt;!-- The following is conforming -->
  &lt;z:svg xmlns:z="http://www.w3.org/2000/svg"
         width="100px" height="100px">
    &lt;z:rect x="0" y="0" width="10" height="10"/>
  &lt;/z:svg>
  &lt;!-- More elements from ParentXML go here -->
&lt;/ParentXML>
</pre>

    <p>SVG言語およびこれらの適合基準は、SVGコンテンツのいかなる側面にもサイズ制限を設けません。
        要素数、文字データ量、属性値の文字数の最大値などはありません。</p>


    <h3 id="ConformingSVGFragments" class="heading">2.4.2. 適合SVGマークアップ断片<a class="self-link"
            href="#ConformingSVGFragments"></a></h3>

    <p>文書またはその一部が<dfn>適合SVGマークアップ断片</dfn>であるためには、
        適切な文書MIME型のパーサによって（ネットワークエラー以外の）エラーなく解析でき、
        <a href="conform.html#ConformingSVGDOMSubtrees">適合SVG DOM部分木</a>を形成できることに加え、次も満たす必要があります：
    </p>
    <ul>
        <li>文書に含まれるCSSスタイルシートは
            <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/"><cite>Cascading Style Sheets, level 2 revision
                    1</cite></a>
            [<a href="refs.html#ref-css2">CSS2</a>]のコア文法に適合していること
        </li>
    </ul>

    <h3 id="ConformingSVGXMLFragments" class="heading">2.4.3. 適合XML互換SVGマークアップ断片<a class="self-link"
            href="#ConformingSVGXMLFragments"></a></h3>

    <p><a href="conform.html#ConformingSVGFragments">適合SVGマークアップ断片</a>は、次を満たす場合
        <dfn>適合XML互換SVGマークアップ断片</dfn>でもあります：
    </p>

    <ul>
        <li><a href="https://www.w3.org/TR/2008/REC-xml-20081126/#sec-well-formed">XMLの整形式制約</a>
            （[<a href="refs.html#ref-xml">xml</a>]）を満たすこと</li>

        <li><a href="https://www.w3.org/TR/xml-names"><cite>Namespaces in XML</cite></a>
            仕様（[<a href="refs.html#ref-xml-names">xml-names</a>]）に適合していること</li>

        <li>全ての<span class="attr-name">‘<a href="struct.html#IDAttribute"><span>id</span></a>’</span>属性が<a
                href="https://www.w3.org/TR/xml/#sec-attribute-types">有効なXML ID</a>
            （[<a href="refs.html#ref-xml">xml</a>]、section 3.3.1）であること</li>

        <li><code>&lt;?xml-stylesheet?></code>処理命令が
            <a href="https://www.w3.org/TR/xml-stylesheet"><cite>XML文書へのスタイルシート関連付け</cite></a>
            [<a href="refs.html#ref-xml-stylesheet">xml-stylesheet</a>]に適合していること
        </li>
    </ul>

    <h3 id="ConformingSVGXMLDOMSubtrees" class="heading">2.4.4. 適合XML互換SVG DOM部分木<a class="self-link"
            href="#ConformingSVGXMLDOMSubtrees"></a></h3>

    <p>指定した要素を根とするDOMノードツリーまたは部分木が
        <dfn>適合XML互換SVG DOM部分木</dfn>であるためには、XMLにシリアライズした際に
        <a href="conform.html#ConformingSVGXMLFragments">適合XML互換SVGマークアップ断片</a>を形成できることが必要です。
    </p>
    <p>
        DOM部分木が、変更なしで適合するXMLにシリアライズできない場合
        （例えば<span class="attr-name">‘<a href="struct.html#IDAttribute"><span>id</span></a>’</span>値が有効なXML名でない場合、
        <a class="idlinterface"
            href="https://dom.spec.whatwg.org/#interface-comment">Comment</a>ノードのデータに"--"が含まれる場合など）は、
        適合XML互換SVG DOM部分木とはなりません。
    </p>

    <h3 id="ConformingSVGStandAloneFiles" class="heading">2.4.5. 適合SVGスタンドアロンファイル<a class="self-link"
            href="#ConformingSVGStandAloneFiles"></a></h3>

    <p>文書が<dfn>適合SVGスタンドアロンファイル</dfn>であるためには：</p>

    <ul>
        <li>整形式なXML文書であること</li>
        <li>根要素が<span class="element-name">‘<a href="struct.html#SVGElement"><span>svg</span></a>’</span>要素であること</li>
        <li>文書要素を根とするSVG文書断片が<a href="conform.html#ConformingSVGXMLFragments">適合XML互換SVGマークアップ断片</a>であること</li>
        <li>文書内の他の<a href="struct.html#TermSVGDocumentFragment">SVG文書断片</a>
            （例：<span class="element-name">‘<a
                    href="embedded.html#ForeignObjectElement"><span>foreignObject</span></a>’</span>内など）も
            <a href="conform.html#ConformingSVGXMLFragments">適合XML互換SVGマークアップ断片</a>を形成すること
        </li>
    </ul>

    <h3 id="ErrorProcessing" class="heading">2.4.6. エラー処理<a class="self-link" href="#ErrorProcessing"></a>
    </h3>

    <p>SVG文書断片が技術的に<em>エラー</em>となる様々な状況があります：</p>

    <ul>
        <li>前項で説明した文書型に対して文書やDOM部分木が適合していない場合
        </li>

        <li>本仕様で<em>エラー</em>とされる他の状況（例：属性値が不正など）</li>
    </ul>

    <p>動的な文書では、時間経過でエラー状態になったり回復したりすることがあります。
        例えば、<a href="types.html#SVGDOMOverview">SVG DOM</a>や
        <a href="https://svgwg.org/specs/animations/">アニメーション</a>による文書変更で
        エラー状態になり、さらに変更で正しい状態に戻ることがあります。
    </p>

    <p>ユーザーエージェントは、文書がエラー状態の時は
        他の仕様でそのエラー種別の扱いについてより詳細な規則が定義されていない限り、
        以下のエラー処理規則を適用しなければなりません：
    </p>

    <ul>
        <li>
            エラーを持つ要素に遭遇した後も文書レンダリングは継続されます。エラー状態の要素またはその部分は描画されません。
        </li>

        <li>ユーザーエージェントがステータスバーやコンソールなどエラー報告機能を持つ場合、ユーザーや開発者が迅速にエラーの原因を特定できるよう、可能な限り詳細情報を提示することが推奨されます。例えば、エラー発生箇所の行番号や文字番号付きのエラーメッセージなど。
        </li>
    </ul>

    <p>スクリプトによる変更のまとまりによって、SVG文書断片がエラー状態になったり回復したりする場合があるため、
        ユーザーエージェントは文書の表示（例：ディスプレイへのレンダリング）が更新されるタイミングのみでエラー処理を適用するべきです。</p>

    <h2 id="SoftwareConformanceClasses" class="heading">2.5. ソフトウェア適合性クラス<a class="self-link"
            href="#SoftwareConformanceClasses"></a></h2>

    <p>ソフトウェアの場合、適合性の要件はプログラムのカテゴリによって異なります：
    </p>
    <dl>
        <dt id="TermSVGGenerator">SVGジェネレータ</dt>
        <dd>SVGコンテンツをマークアップまたはDOMとして生成または提供するすべてのソフトウェア
            （クライアントサイドJavaScriptライブラリなども含む）。
        </dd>
        <dt id="TermSVGAuthoringTool">SVGオーサリングツール</dt>
        <dd>人間のコンテンツ作成者がSVGを生成するためのグラフィックスやコードを操作できるインターフェースを提供するソフトウェア。
            SVGオーサリングツールは暗黙的に<a href="conform.html#TermSVGGenerator">SVGジェネレータ</a>でもあります。
        </dd>
        <dt id="TermSVGServer">SVGサーバ</dt>
        <dd>他ソフトウェアからの要求に応じてSVGコンテンツを提供するネットワーク／ファイルサーバ。
            SVGサーバは暗黙的に<a href="conform.html#TermSVGGenerator">SVGジェネレータ</a>でもあります。
        </dd>
        <dt id="TermSVGInterpreter">SVGインタープリタ</dt>
        <dd>SVG文書やマークアップ断片を解析・処理するすべてのソフトウェア。
            SVGインタープリタは、パースや処理手順に関する本仕様の節では<a href="conform.html#TermUserAgent">SVGユーザーエージェント</a>として扱われます。
        </dd>
        <dt id="TermSVGViewer">SVGビューア</dt>
        <dd>SVG文書やSVGマークアップ断片を解析・処理した後で、描画されたグラフィカル表現を生成するすべてのソフトウェア。
            SVGビューアは暗黙的に<a href="conform.html#TermSVGInterpreter">SVGインタープリタ</a>でもあります。
            SVGビューアは常に、本仕様の目的において<a href="conform.html#TermUserAgent">SVGユーザーエージェント</a>です。
        </dd>
        <dt id="TermSVGUserAgent">SVGユーザーエージェント</dt>
        <dd>SVGユーザーエージェントは、SVGコンテンツの取得と描画が可能な<a href="conform.html#TermUserAgent">ユーザーエージェント</a>です。</dd>
        <dt id="TermUserAgent">ユーザーエージェント</dt>
        <dd>
            <p>ユーザーエージェントの一般的な定義は、テキスト・グラフィックス・音声・動画・画像その他のWebコンテンツを取得・表示するアプリケーションです。
                一部のコンテンツ型を扱うため追加のユーザーエージェントが必要な場合もあります。
                例えば、ブラウザが音声や動画をレンダリングするため別プログラムやプラグインを起動する場合などです。
                ユーザーエージェントには、グラフィカルデスクトップブラウザ、マルチメディアプレーヤー、テキストブラウザ、音声ブラウザ、スクリーンリーダー・拡大鏡・音声合成・オンスクリーンキーボード・音声入力ソフトなどの支援技術も含まれます。
            </p>

            <p>一般的には、
                「ユーザーエージェント」がSVGコンテンツの取得・描画機能を持つとは限りませんが、
                文脈が別の解釈を要求しない限り、本仕様内で「ユーザーエージェント」と記載される場合は
                SVGコンテンツの取得・描画が可能な<a href="conform.html#TermUserAgent">SVGユーザーエージェント</a>を指すものとします。</p>
        </dd>
    </dl>

    <p>多くのプログラムが複数のソフトウェアクラスに該当します。
        例えば、SVGファイルのインポート・表示・編集・保存ができるグラフィカルエディタは、
        SVGインタープリタ、SVGビューア、SVGオーサリングツール、SVGジェネレータすべてに該当します。
    </p>

    <h3 id="ConformingSVGGenerators" class="heading">2.5.1. 適合SVGジェネレータ<a class="self-link"
            href="#ConformingSVGGenerators"></a></h3>

    <p><dfn>適合SVGジェネレータ</dfn>とは、
        <a href="conform.html#TermSVGGenerator">SVGジェネレータ</a>のうち以下を満たすものです：
    </p>

    <ul>
        <li>常に
            <a href="conform.html#ConformingSVGDOMSubtrees">適合SVG DOM部分木</a>、
            <a href="conform.html#ConformingSVGFragments">適合SVGマークアップ断片</a>、
            または<a href="conform.html#ConformingSVGStandAloneFiles">適合SVGスタンドアロンファイル</a>を生成すること
        </li>

        <li>非適合SVG文書断片を含む文書を生成しないこと</li>

        <li>SVG著者向けの規範的要件およびSVGジェネレータ向けの規範的要件をすべて満たすこと</li>
    </ul>

    <p>SVGジェネレータは、デフォルトでUnicode文字エンコーディングを使い、
        <a href="https://www.w3.org/TR/charmod/">Character Model for the World Wide Web</a>
        [<a href="refs.html#ref-unicode">UNICODE</a>]
        [<a href="refs.html#ref-charmod">charmod</a>]の他のガイドラインにも従うことが強く推奨されます。
    </p>

    <p class="note">高精度データを扱うSVGジェネレータは、
        <a href="implnote.html#NumericPrecisionImplementationNotes">高精度幾何生成に関するノート</a>のガイドラインに従うことが推奨されます。
    </p>

    <h3 id="ConformingSVGAuthoringTools" class="heading">2.5.2. 適合SVGオーサリングツール<a class="self-link"
            href="#ConformingSVGAuthoringTools"></a></h3>

    <p>
        <a href="https://www.w3.org/TR/ATAG20/#def-Authoring-Tool">オーサリングツール</a>
        （<a href="https://www.w3.org/TR/ATAG20"><cite>Authoring Tool Accessibility
                Guidelines 2.0</cite></a>で定義）は、
        <a href="conform.html#ConformingSVGGenerators">適合SVGジェネレータ</a>であり、
        かつ同文書の関連するLevel A要件すべてに適合している場合
        <dfn>適合SVGオーサリングツール</dfn>です
        [<a href="refs.html#ref-atag20">atag20</a>]。
        Level AAやLevel AAA要件は推奨されますが、適合には必須ではありません。
    </p>

    <h3 id="ConformingSVGServers" class="heading">2.5.3. 適合SVGサーバ<a class="self-link" href="#ConformingSVGServers"></a>
    </h3>

    <p><dfn>適合SVGサーバ</dfn>は、<a
            href="conform.html#ConformingSVGGenerators">適合SVGジェネレータ</a>のすべての要件を満たす必要があります。さらに、HTTPやインターネットメディア型を使う他プロトコルを用いる適合SVGサーバは、SVGスタンドアロンファイルをメディア型<code>"image/svg+xml"</code>で配信しなければなりません。
    </p>

    <p>また、SVGファイルをgzipやdeflateで圧縮する場合、プロトコルがサポートする適切なヘッダでこれを示す必要があります。具体的には、転送直前にサーバが圧縮したコンテンツには "Transfer-Encoding:
        gzip" や "Transfer-Encoding: deflate" ヘッダを、サーバ上で圧縮済み（例：拡張子"svgz"）のコンテンツには "Content-Encoding: gzip" や
        "Content-Encoding: deflate" ヘッダを使わなければなりません。</p>

    <p class="note">
        保管されている<em>コンテンツ</em>（HTTP用語でいう「エンティティ」）の圧縮と、
        HTTP/1.1 <a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.39">TE</a>/
        <a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.41">Transfer Encoding</a>
        ([<a href="refs.html#ref-rfc2616">rfc2616</a>]、14.39節・14.41節）で定義される
        <em>メッセージボディ</em>の自動圧縮は区別されます。
    </p>

    <h3 id="ConformingSVGInterpreters" class="heading">2.5.4. 適合SVGインタープリタ<a class="self-link"
            href="#ConformingSVGInterpreters"></a></h3>

    <p class="note"><a
            href="conform.html#TermSVGInterpreter">SVGインタープリタ</a>はSVG文書断片を解析・処理できるプログラムです。SVGインタープリタの例としては、サーバサイドのトランスコードツールや最適化ツール（例:
        SVGコンテンツを修正したSVGコンテンツに変換するツール）、分析ツール（例: SVGコンテンツからテキスト内容を抽出するツール、妥当性検査ツール）などがあります。SVGから別のグラフィック表現へのトランスコーダ（例:
        SVG→ラスター画像のトランスコーダ）はビューアに該当し、ビューアの適合基準も適用されます。
    </p>

    <p><dfn>適合SVGインタープリタ</dfn>は、<a href="https://www.w3.org/TR/2008/REC-xml-20081126/">XML 1.0</a>
        [<a href="refs.html#ref-xml">xml</a>] および
        <a href="https://www.w3.org/TR/2006/REC-xml-names-20060816/"><cite>Namespaces in XML</cite></a>
        [<a href="refs.html#ref-xml-names">xml-names</a>]で定義されるすべてのXML構文を解析・処理できなければなりません。
    </p>

    <p><a href="conform.html#ConformingSVGInterpreters">適合SVGインタープリタ</a>は、<a
            href="conform.html#ConformingSVGXMLFragments">適合XML互換SVGマークアップ断片</a>を解析し、内容のDOM構造（要素、属性、テキスト内容、コメント等）を正しく反映する方法で処理しなければなりません。インタープリタはすべての機能の意味論を正しく解釈する必要はありません。
    </p>

    <p>SVGインタープリタが非XML構文（HTMLなど）をサポートする場合、その構文での<a
            href="conform.html#ConformingSVGFragments">適合SVGマークアップ断片</a>も正しく解析できなければなりません。
    </p>

    <p>SVGインタープリタがSVGコンテンツ処理の結果としてスクリプトを実行したり外部リソースファイルを取得したりする場合、<a
            href="conform.html#TermUserAgent">ユーザーエージェント</a>向けの<a href="#referencing-modes">SVGサブリソース文書の処理モード</a>および<a
            href="linking.html">リンク章</a>で記載された制約に従わなければなりません。
    </p>

    <h3 id="ConformingSVGViewers" class="heading">2.5.5. 適合SVGビューア<a class="self-link" href="#ConformingSVGViewers"></a>
    </h3>

    <div class="annotation">
        <table>
            <tr>
                <th>Action:</th>
                <td><a
                        href="https://www.w3.org/2013/11/14-svg-minutes.html#action01">パフォーマンスクラス要件を確認し、要件を削除するか一般要件に移すか決定すること。</a>
                    (heycam)
                    <br />
                    <a href="https://www.w3.org/2014/10/31-svg-minutes.html#action02">CTMの計算は倍精度で行うべきと仕様化すること。</a>
                    (stakagi)
                </td>
            </tr>
            <tr>
                <th>Resolution:</th>
                <td><a href="https://www.w3.org/2013/11/14-svg-minutes.html#item01">SVG 2からパフォーマンスクラス要件を削除。</a> ( <a
                        href="conform.html#ConformingHighQualitySVGViewers">ConformingHighQualitySVGViewers</a> )</td>
            </tr>
            <tr>
                <th>Purpose:</th>
                <td>技術製図・地図等の用途での数値精度とユーザーエージェントのパフォーマンスのトレードオフ調整のため。</td>
            </tr>
            <tr>
                <th>Owner:</th>
                <td>heycam, stakagi</td>
            </tr>
        </table>
    </div>

    <p class="note">
        <a
            href="conform.html#TermSVGViewer">SVGビューア</a>はSVG文書断片を解析・処理し、その内容をディスプレイやプリンタ、彫刻機等のグラフィカル出力媒体に描画できるプログラムです。したがって、<a
            href="conform.html#TermSVGViewer">SVGビューア</a>は<a
            href="conform.html#TermSVGInterpreter">SVGインタープリタ</a>（SVG文書断片を解析・処理できる）でもありますが、正しく描画するという追加要件があります。
    </p>

    <p>
        <dfn>適合SVGビューア</dfn>は<a
            href="conform.html#ConformingSVGInterpreters">適合SVGインタープリタ</a>であり、本章で定義されたいずれかの処理モードで描画出力をサポートできなければなりません：
    </p>
    <ul>
        <li><a href="conform.html#dynamic-interactive-mode">動的インタラクティブモード</a></li>
        <li><a href="conform.html#animated-mode">アニメーションモード</a></li>
        <li><a href="conform.html#secure-animated-mode">セキュアアニメーションモード</a></li>
        <li><a href="conform.html#static-mode">静的モード</a></li>
        <li><a href="conform.html#secure-static-mode">セキュア静的モード</a></li>
    </ul>

    <p>適合SVGビューアは、サポートする処理モードすべてに関して、本仕様で<a href="conform.html#TermUserAgent">ユーザーエージェント</a>向けに示された規範的要件を満たさなければなりません。
    </p>

    <p>すべての<a href="conform.html#ConformingSVGViewers">適合SVGビューア</a>に適用される具体的基準：</p>

    <ul>

        <li>ビューアは<a href="https://www.w3.org/TR/CSS2/"><cite>Cascading Style Sheets, level 2 revision 1</cite></a>
            [<a href="refs.html#ref-css2">CSS2</a>]で定義されるすべてのCSS構文機能を解析でき、
            SVGコンテンツのCSSスタイリング（<a href="styling.html#RequiredProperties">必須プロパティ</a>や<a
                href="styling.html#RequiredCSSFeatures">必須機能</a>も含む）をサポートしなければなりません。
            他のCSS言語機能や対応仕様でSVG要素に適用されると定義される他のプロパティもサポート可能です。
            CSS 2.1のサポート対象機能は<a href="https://www.w3.org/TR/CSS2/conform.html#conformance">CSS 2.1仕様の適合定義</a>
            ([<a href="refs.html#ref-css2">CSS2</a>]、3.2節)に従って実装する必要があります。
        </li>

        <li>ビューアは<a
                href="styling.html#TermPresentationAttribute">プレゼンテーション属性</a>によるSVGコンテンツへのスタイリングプロパティの適用ができなければなりません。
        </li>

        <li>
            SVGコンテンツ画像の一部領域は不透明度100%未満でも良いです。
            ビューアはSVGコンテンツ画像のターゲットキャンバスへの合成時に、Compositing and Blending Specification
            [<a href="refs.html#ref-compositing-1">compositing-1</a>]で説明されるシンプルアルファ合成を最低限サポートしなければなりません。
        </li>

        <li>ビューアはbase64エンコードまたはURLエンコードされた<a href="linking.html#TermDataURL">data
                URL参照</a>をSVGコンテンツ内の他文書URI参照が許されるすべての場面でサポートしなければなりません。
            "data:" URLスキーム
            [<a href="refs.html#ref-rfc2397">rfc2397</a>]に準拠。
            エンコード文書のMIME型が<code>image/svg+xml</code>の場合、処理されるためには整形式かつ完全なSVG文書でなければなりません。
        </li>

        <li>ビューアはJPEGおよびPNG画像形式 [<a href="refs.html#ref-jpeg">JPEG</a>] [<a
                href="refs.html#ref-png">PNG</a>]をサポートしなければなりません。
            <p class="note">
                ビューアがセキュア処理モードしかサポートしない場合でも、<a href="linking.html#TermDataURL">data URL参照</a>を処理するためにこれら画像形式のサポートは必須です。
            </p>
        </li>

        <li>画像データのリサンプリングはプロパティ<a class="property"
                href="painting.html#ImageRenderingProperty">image-rendering</a>の仕様に従わなければなりません。</li>

        <li>親環境で可能な場合、ビューアは物理デバイス解像度や期待される閲覧条件の情報を使い、<a href="https://www.w3.org/TR/CSS2/syndata.html#length-units">CSS
                2.1で説明される規則</a>
            ([<a href="refs.html#ref-css2">CSS2</a>]、4.3.2節)に準拠して初期スケールを正確に決定すべきです。
            こうした情報の取得が不可能な場合は、ビューアや親環境が一般的なターゲットデバイスに対して合理的な近似値を使う必要があります。</li>

        <li>すべての視覚的レンダリングは、初期1:1ズーム比において数値的に正しい結果から1デバイスピクセルまたは1ポイント以内の精度で描画されなければなりません。ズーム時も高精度を保つことが推奨されます。
            <p class="note">
                低解像度表示デバイスではアンチエイリアス等による平滑化のサポートが強く推奨されます。
                <a href="conform.html#ConformingHighQualitySVGViewers">高品質SVGビューア</a>の必須要件です。
            </p>
        </li>

        <li>印刷デバイスがサポートされる場合、SVGコンテンツはプリンタ解像度で印刷でき、表示に必要なすべてのグラフィック機能が利用可能でなければなりません（例：指定色はカラープリンタで出力される必要あり）。</li>

        <li>システムが正確なsRGB
            [<a href="refs.html#ref-srgb">SRGB</a>]色をサポートする場合、すべてのsRGB色計算と結果色値はsRGB色成分値（0〜255）の範囲で1成分値以内の精度でなければなりません。
        </li>

        <li>SVG実装は<a href="http://www.ietf.org/rfc/rfc1952.txt">gzipエンコード</a>
            [<a href="refs.html#ref-rfc1952">rfc1952</a>]および
            <a href="http://www.ietf.org/rfc/rfc1951.txt">deflateエンコード</a>
            [<a href="refs.html#ref-rfc1951">rfc1951</a>]データストリームを、SVG・スクリプトファイル・画像などすべてのコンテンツ型で正しくサポートしなければなりません。
            HTTPをサポートするSVG実装は<a href="http://www.ietf.org/rfc/rfc2616.txt">HTTP 1.1</a>
            [<a href="refs.html#ref-rfc2616">rfc2616</a>]仕様に従ってこれらエンコーディングをサポートし、特にクライアントは"Accept-Encoding:"リクエストヘッダ
            [<a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.3">HTTP-ACCEPT-ENCODING</a>]
            で最低限gzipとdeflateを指定し、ダウンロードしたgzip・deflateエンコードのデータストリームを展開しなければなりません。SVGビューアがHTTP経由で圧縮コンテンツ（例
            .svgzファイル）を取得し、"Content-Encoding"や"Transfer-Encoding"レスポンスヘッダが欠落しているか圧縮方式と一致しない場合は、SVGビューアはそのコンテンツを描画せず、文書を<a
                href="#ErrorProcessing">エラー</a>として扱う必要があります。
        </li>

        <li>ビューアは座標変換数値演算の中間計算に少なくとも単精度浮動小数点を使わなければなりません。ただし座標変換の丸め誤差を防ぐため、<a
                href="https://www.w3.org/TR/css-transforms-1/#current-transformation-matrix">CTM</a>生成処理には少なくとも倍精度浮動小数点演算を使う必要があります。最低限の典型的な計算方法は下記数式で表されます。

            <div role="math" aria-describedby="ctm-matrix">
                <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                    <mo stretchy="false">(</mo>
                    <mi>single</mi>
                    <mo stretchy="false">)</mo>
                    <mrow class="MJX-TeXAtom-ORD">
                        <mstyle mathsize="1.2em">
                            <mi mathvariant="normal">CTM</mi>
                        </mstyle>
                    </mrow>
                    <mo>=</mo>
                    <mo stretchy="false">(</mo>
                    <mi>single</mi>
                    <mo stretchy="false">)</mo>
                    <mrow>
                        <mo>(</mo>
                        <mo stretchy="false">(</mo>
                        <mi>double</mi>
                        <mo stretchy="false">)</mo>
                        <mrow>
                            <mo>[</mo>
                            <mtable rowspacing="4pt" columnspacing="1em">
                                <mtr>
                                    <mtd>
                                        <msub>
                                            <mi>a</mi>
                                            <mn>1</mn>
                                        </msub>
                                    </mtd>
                                    <mtd>
                                        <msub>
                                            <mi>c</mi>
                                            <mn>1</mn>
                                        </msub>
                                    </mtd>
                                    <mtd>
                                        <msub>
                                            <mi>e</mi>
                                            <mn>1</mn>
                                        </msub>
                                    </mtd>
                                </mtr>
                                <mtr>
                                    <mtd>
                                        <msub>
                                            <mi>b</mi>
                                            <mn>1</mn>
                                        </msub>
                                    </mtd>
                                    <mtd>
                                        <msub>
                                            <mi>d</mi>
                                            <mn>1</mn>
                                        </msub>
                                    </mtd>
                                    <mtd>
                                        <msub>
                                            <mi>f</mi>
                                            <mn>1</mn>
                                        </msub>
                                    </mtd>
                                </mtr>
                                <mtr>
                                    <mtd>
                                        <mn>0</mn>
                                    </mtd>
                                    <mtd>
                                        <mn>0</mn>
                                    </mtd>
                                    <mtd>
                                        <mn>1</mn>
                                    </mtd>
                                </mtr>
                            </mtable>
                            <mo>]</mo>
                        </mrow>
                        <mo>⋅<!-- ⋅ --></mo>
                        <mo stretchy="false">(</mo>
                        <mi>double</mi>
                        <mo stretchy="false">)</mo>
                        <mrow>
                            <mo>[</mo>
                            <mtable rowspacing="4pt" columnspacing="1em">
                                <mtr>
                                    <mtd>
                                        <msub>
                                            <mi>a</mi>
                                            <mn>2</mn>
                                        </msub>
                                    </mtd>
                                    <mtd>
                                        <msub>
                                            <mi>c</mi>
                                            <mn>2</mn>
                                        </msub>
                                    </mtd>
                                    <mtd>
                                        <msub>
                                            <mi>e</mi>
                                            <mn>2</mn>
                                        </msub>
                                    </mtd>
                                </mtr>
                                <mtr>
                                    <mtd>
                                        <msub>
                                            <mi>b</mi>
                                            <mn>2</mn>
                                        </msub>
                                    </mtd>
                                    <mtd>
                                        <msub>
                                            <mi>d</mi>
                                            <mn>2</mn>
                                        </msub>
                                    </mtd>
                                    <mtd>
                                        <msub>
                                            <mi>f</mi>
                                            <mn>2</mn>
                                        </msub>
                                    </mtd>
                                </mtr>
                                <mtr>
                                    <mtd>
                                        <mn>0</mn>
                                    </mtd>
                                    <mtd>
                                        <mn>0</mn>
                                    </mtd>
                                    <mtd>
                                        <mn>1</mn>
                                    </mtd>
                                </mtr>
                            </mtable>
                            <mo>]</mo>
                        </mrow>
                        <mo>)</mo>
                    </mrow>
                </math>
                <pre id="ctm-matrix">

$$
(single)
{\large \rm CTM} =
(single)
\left(
  (double)
  \left[
    \begin{matrix}
       a_1 &amp; c_1 &amp; e_1 \\
       b_1 &amp; d_1 &amp; f_1 \\
       0 &amp;   0 &amp;   1
    \end{matrix}
  \right]
  \cdot
  (double)
  \left[
    \begin{matrix}
       a_2 &amp; c_2 &amp; e_2 \\
       b_2 &amp; d_2 &amp; f_2 \\
       0 &amp;   0 &amp;   1
    \end{matrix}
  \right]
\right)
$$

  </pre>
            </div>

            <div role="math" aria-describedby="ctm-matrix2">
                <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                    <mo stretchy="false">(</mo>
                    <mi>single</mi>
                    <mo stretchy="false">)</mo>
                    <mrow>
                        <mo>[</mo>
                        <mtable rowspacing="4pt" columnspacing="1em">
                            <mtr>
                                <mtd>
                                    <msub>
                                        <mi>x</mi>
                                        <mrow class="MJX-TeXAtom-ORD">
                                            <mi mathvariant="normal">viewport</mi>
                                        </mrow>
                                    </msub>
                                </mtd>
                            </mtr>
                            <mtr>
                                <mtd>
                                    <msub>
                                        <mi>y</mi>
                                        <mrow class="MJX-TeXAtom-ORD">
                                            <mi mathvariant="normal">viewport</mi>
                                        </mrow>
                                    </msub>
                                </mtd>
                            </mtr>
                            <mtr>
                                <mtd>
                                    <mn>1</mn>
                                </mtd>
                            </mtr>
                        </mtable>
                        <mo>]</mo>
                    </mrow>
                    <mo>=</mo>
                    <mrow class="MJX-TeXAtom-ORD">
                        <mstyle mathsize="1.2em">
                            <mi mathvariant="normal">CTM</mi>
                        </mstyle>
                    </mrow>
                    <mo>⋅<!-- ⋅ --></mo>
                    <mo stretchy="false">(</mo>
                    <mi>single</mi>
                    <mo stretchy="false">)</mo>
                    <mrow>
                        <mo>[</mo>
                        <mtable rowspacing="4pt" columnspacing="1em">
                            <mtr>
                                <mtd>
                                    <msub>
                                        <mi>x</mi>
                                        <mrow class="MJX-TeXAtom-ORD">
                                            <mi mathvariant="normal">userspace</mi>
                                        </mrow>
                                    </msub>
                                </mtd>
                            </mtr>
                            <mtr>
                                <mtd>
                                    <msub>
                                        <mi>y</mi>
                                        <mrow class="MJX-TeXAtom-ORD">
                                            <mi mathvariant="normal">userspace</mi>
                                        </mrow>
                                    </msub>
                                </mtd>
                            </mtr>
                            <mtr>
                                <mtd>
                                    <mn>1</mn>
                                </mtd>
                            </mtr>
                        </mtable>
                        <mo>]</mo>
                    </mrow>
                </math>
                <pre id="ctm-matrix2">
$$
(single)
\left[
\begin{matrix}
x_{\rm viewport} \\
y_{\rm viewport} \\
1
\end{matrix}
\right]
=
{\large \rm CTM} \cdot (single)
\left[
\begin{matrix}
x_{\rm userspace} \\
y_{\rm userspace} \\
1
\end{matrix}
\right]
$$
  </pre>
            </div>

            さらに、ビューポート座標系が入れ子の場合、ユーザー座標を出力デバイス座標に変換するための入れ子CTMで生成される<a
                href="types.html#__svg__SVGGraphicsElement__getScreenCTM">ScreenCTM</a>も倍精度浮動小数点演算で生成しなければなりません。
        </li>
    </ul>

    <p><a href="conform.html#ConformingSVGViewers">適合SVGビューア</a>が<a href="conform.html#processing-modes">処理モード</a>で
        <a href="conform.html#processing-modes">インタラクション</a>を含む場合、以下の追加機能もサポートしなければなりません：
    </p>
    <ul>

        <li>インタラクティブなユーザー環境では、スタンドアロンSVG文書や親XML文書内に埋め込まれたSVG文書断片のズーム・パン操作が可能でなければなりません。</li>

        <li>適切なユーザーインタラクション機能がある環境では、ビューアはハイパーリンクの活性化ができなければなりません。</li>

        <li>Webブラウザ環境では、ビューアはSVGコンテンツ内の文字列検索・選択ができなければなりません。</li>

        <li>表示デバイスがサポートされている場合、ビューアはSVGコンテンツからシステムクリップボードへのテキストコピーもできなければなりません。</li>

        <li>ビューアは<a href="https://www.w3.org/TR/UAAG20/"><cite>User Agent Accessibility Guidelines 2.0</cite></a>
            [<a href="refs.html#ref-uaag20">UAAG20</a>] の適用可能なLevel A要件をすべて満たさなければなりません。
            Level AAおよびAAA機能は推奨されますが必須ではありません。
        </li>
    </ul>

    <p><a href="conform.html#ConformingSVGViewers">適合SVGビューア</a>が<a href="conform.html#processing-modes">処理モード</a>で
        <a href="conform.html#processing-modes">スクリプト実行</a>を含む場合、以下の追加機能もサポートしなければなりません：
    </p>
    <ul>
        <li>ビューアは本仕様のすべてのIDL断片について
            <a
                href="https://www.w3.org/TR/2012/CR-WebIDL-20120419/#dfn-conforming-ecmascript-implementation">適合ECMAScript実装</a>
            でなければなりません。
            [<a href="refs.html#ref-webidl">WebIDL</a>]
        </li>
    </ul>

    <p>ユーザーエージェントがHTMLやXHTML閲覧機能を持つ場合、またはXML文書へのCSSスタイリングプロパティ適用ができる場合、<a
            href="conform.html#ConformingSVGViewers">適合SVGビューア</a>は、HTMLやXHTMLの<span
            class="element-name">‘img’</span>要素やCSSプロパティ（<span
            class="property">background-image</span>等）でラスター画像外部リソースが使える場所でMIMEタイプ"image/svg+xml"のリソースをサポートしなければなりません。
    </p>

    <h4 id="PrintingImplementationNotes" class="heading">2.5.5.1. 印刷実装ノート<a class="self-link"
            href="#PrintingImplementationNotes"></a></h4>

    <p>表示デバイスでのズームと印刷の両方をサポートするユーザーエージェントでは、デフォルトの印刷オプションは、表示デバイスでのSVG文書断片の現在のビュー（メディア固有スタイリングがない場合）を反映した印刷結果となることが推奨されます。ユーザーが行ったズーム・パン、アニメーションの現在状態、DOMやスクリプトによる文書変更も考慮されます。
    </p>

    <p>したがって、ユーザーが表示デバイスで地図の特定領域にズームし、ハードコピーを要求した場合、ハードコピーは表示デバイスで見えている地図ビューと同じ内容を表示するべきです。ユーザーがアニメーションを一時停止して印刷した場合、ハードコピーは現在表示されている静止画像と同じグラフィックを表示するべきです。スクリプトによって文書に要素が追加・削除された場合、ハードコピーも表示同様の変更を反映するべきです。
    </p>

    <p>SVG文書がアニメーションやスクリプト機能のない静的デバイス（プリンタ等）でレンダリングされる場合、ユーザーエージェントは文書内のアニメーションやスクリプト要素を無視し、残りのグラフィック要素を本仕様の規則に従って描画しなければなりません。
    </p>

    <h3 id="ConformingHighQualitySVGViewers" class="heading">2.5.6. 高品質SVGビューア適合<a class="self-link"
            href="#ConformingHighQualitySVGViewers"></a></h3>

    <p><a href="conform.html#ConformingSVGViewers">適合SVGビューア</a>が<dfn>高品質SVGビューア</dfn>と見なされるには、以下の追加機能をサポートしなければなりません：
    </p>

    <ul>
        <li>良好な処理・描画性能と滑らかでちらつきのないアニメーションを持つプロ品質の結果。</li>

        <li>150dpi以下の低解像度デバイス（表示デバイス等）では、線・曲線・テキストの滑らかなエッジ（多くの場合アンチエイリアス技術による）をサポート。</li>

        <li>ICCプロファイル対応によるカラーマネジメント
            [<a href="refs.html#ref-icc">ICC</a>]（ICCプロファイルで定義された色のサポート）
            [<a href="refs.html#ref-css-color-4">css-color-4</a>]</li>

        <li>画像データのリサンプリングは<a class="property"
                href="painting.html#ImageRenderingProperty">image-rendering</a>プロパティの高品質ビューア向け要件に準拠。</li>

        <li>座標系変換の数値演算に少なくとも倍精度浮動小数点演算を使用すること。</li>
    </ul>

    <p><a href="conform.html#ConformingSVGViewers">高品質SVGビューア</a>が<a href="conform.html#processing-modes">処理モード</a>で
        <a href="conform.html#processing-modes">スクリプト実行</a>、<a href="conform.html#processing-modes">宣言的アニメーション</a>、または<a
            href="conform.html#processing-modes">インタラクション</a>を含む場合、以下の追加機能もサポートしなければなりません：
    </p>
    <ul>
        <li>プログレッシブな描画・アニメーション効果（文書の先頭が表示され始め、アニメーションも文書の残り部分のダウンロードと並行して開始）。</li>

        <li>画面更新の制限（再描画イベントに応じて必要な領域だけ表示更新）。</li>
    </ul>

    <p><a href="conform.html#ConformingSVGViewers">高品質SVGビューア</a>が<a href="conform.html#processing-modes">処理モード</a>
        で<a href="conform.html#processing-modes">インタラクション</a>を含む場合、以下の追加機能もサポートしなければなりません：</p>
    <ul>
        <li>Webサーバから取得する画像やフォントのバックグラウンドダウンロードと、ダウンロード完了時の表示更新。</li>
    </ul>

    <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
</body>

</html>