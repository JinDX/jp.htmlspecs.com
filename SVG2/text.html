<!DOCTYPE html>

<!--
  Scalable Vector Graphics (SVG) 2
  Chapter 11: Text

  Note: This document is generated from ../master/text.html.
  Run "make" from the root of the repository to regenerate it.
  -->

<html lang="ja-JP" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8" />
    <title>テキスト — SVG 2</title>

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- Style sheets for local dev. Will be standardized in processing.
  Add attribute data-keep="" to any extra stylesheet link you do not want removed
  (or use <style>), and include it before here. -->


    <link rel="stylesheet" title="Default" href="https://www.w3.org/TR/SVG2/style/svg.css" type="text/css"
        media="screen" />
    <link rel="alternate stylesheet" title="Only annotations for publication"
        href="https://www.w3.org/TR/SVG2/style/default_no_maturity.css" type="text/css" media="screen" />
    <link rel="alternate stylesheet" title="No issues/annotations"
        href="https://www.w3.org/TR/SVG2/style/default_no_issues.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-ED" type="text/css" media="screen" />
    <script src="https://www.w3.org/TR/SVG2/style/link-fixup.js"></script>
</head>

<body class="chapter-text">

    <h1>第11章: テキスト</h1>
    <nav id="toc">
        <div class="header top"><a href="index.html">概要</a> . <a href="shapes.html">前へ</a> . <a
                href="embedded.html">次へ</a> . <a href="eltindex.html">要素一覧</a> . <a href="attindex.html">属性一覧</a> . <a
                href="propidx.html">プロパティ一覧</a></div>
        <h2 id="Contents" class="contents">目次</h2>
        <ol class="toc">
            <li>
                <ol class="toc">
                    <li><a href="text.html#Introduction"><span class="secno">11.1.</span> はじめに</a>
                        <ol class="toc">
                            <li><a href="text.html#Definitions"><span class="secno">11.1.1.</span> 定義</a></li>
                            <li><a href="text.html#FontsGlyphs"><span class="secno">11.1.2.</span> フォントとグリフ</a>
                            </li>
                            <li><a href="text.html#GlyphsMetrics"><span class="secno">11.1.3.</span> グリフのメトリクスとレイアウト</a>
                            </li>
                        </ol>
                    </li>
                    <li><a href="text.html#TextElement"><span class="secno">11.2.</span> <span
                                class="element-name">‘text’</span> および
                            <span class="element-name">‘tspan’</span> 要素</a>
                        <ol class="toc">
                            <li><a href="text.html#TSpanAttributes"><span class="secno">11.2.1.</span> 属性</a>
                            </li>
                            <li><a href="text.html#TSpanNotes"><span class="secno">11.2.2.</span> 'x', 'y', 'dx', 'dy'
                                    および 'rotate' に関する注意事項</a></li>
                        </ol>
                    </li>
                    <li><a href="text.html#TextLayout"><span class="secno">11.3.</span> テキストレイアウト ― はじめに</a>
                    </li>
                    <li><a href="text.html#TextLayoutContentArea"><span class="secno">11.4.</span> テキストレイアウト ―
                            コンテンツ領域</a>
                        <ol class="toc">
                            <li><a href="text.html#InlineSize"><span class="secno">11.4.1.</span> ‘<span
                                        class="property">inline-size</span>’ プロパティ</a></li>
                            <li><a href="text.html#TextShapeInside"><span class="secno">11.4.2.</span> ‘<span
                                        class="property">shape-inside</span>’ プロパティ</a></li>
                            <li><a href="text.html#TextShapeSubtract"><span class="secno">11.4.3.</span> ‘<span
                                        class="property">shape-subtract</span>’ プロパティ</a></li>
                            <li><a href="text.html#TextShapeImageThreshold"><span class="secno">11.4.4.</span> ‘<span
                                        class="property">shape-image-threshold</span>’ プロパティ</a></li>
                            <li><a href="text.html#TextShapeMargin"><span class="secno">11.4.5.</span> ‘<span
                                        class="property">shape-margin</span>’ プロパティ</a></li>
                            <li><a href="text.html#TextShapePadding"><span class="secno">11.4.6.</span> ‘<span
                                        class="property">shape-padding</span>’ プロパティ</a></li>
                        </ol>
                    </li>
                    <li><a href="text.html#TextLayoutAlgorithm"><span class="secno">11.5.</span> テキストレイアウト ― アルゴリズム</a>
                    </li>
                    <li><a href="text.html#TextLayoutPre"><span class="secno">11.6.</span> 整形済みテキスト</a>
                        <ol class="toc">
                            <li><a href="text.html#TextLayoutPreMultiline"><span class="secno">11.6.1.</span>
                                    'white-space'による複数行テキスト</a></li>
                            <li><a href="text.html#TextLayoutPreAdjustments"><span class="secno">11.6.2.</span>
                                    グリフの再配置</a></li>
                        </ol>
                    </li>
                    <li><a href="text.html#TextLayoutAuto"><span class="secno">11.7.</span> 自動改行テキスト</a>
                        <ol class="toc">
                            <li><a href="text.html#TextLayoutAutoNotes"><span class="secno">11.7.1.</span>
                                    テキスト折返しに関する注意事項</a>
                                <ol class="toc">
                                    <li><a href="text.html#TextLayoutAutoNotesStart"><span
                                                class="secno">11.7.1.1.</span> 最初の行の配置</a></li>
                                    <li><a href="text.html#TextLayoutAutoNotesBrokenLines"><span
                                                class="secno">11.7.1.2.</span> 改行された行</a></li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li><a href="text.html#TextLayoutPath"><span class="secno">11.8.</span> パス上のテキスト</a>
                        <ol class="toc">
                            <li><a href="text.html#TextPathElement"><span class="secno">11.8.1.</span> <span
                                        class="element-name">‘textPath’</span> 要素</a></li>
                            <li><a href="text.html#TextPathAttributes"><span class="secno">11.8.2.</span> 属性</a>
                            </li>
                            <li><a href="text.html#TextpathLayoutRules"><span class="secno">11.8.3.</span>
                                    パス上のテキストのレイアウト規則</a></li>
                        </ol>
                    </li>
                    <li><a href="text.html#TextRenderingOrder"><span class="secno">11.9.</span> テキスト描画順序</a>
                    </li>
                    <li><a href="text.html#TextProperties"><span class="secno">11.10.</span> プロパティと疑似要素</a>
                        <ol class="toc">
                            <li><a href="text.html#TextPropertiesSVG"><span class="secno">11.10.1.</span> SVGプロパティ</a>
                                <ol class="toc">
                                    <li><a href="text.html#TextAnchoringProperties"><span
                                                class="secno">11.10.1.1.</span> テキスト整列、‘<span
                                                class="property">text-anchor</span>’プロパティ</a></li>
                                    <li><a href="text.html#GlyphOrientationHorizontalProperty"><span
                                                class="secno">11.10.1.2.</span> ‘<span
                                                class="property">glyph-orientation-horizontal</span>’プロパティ</a></li>
                                    <li><a href="text.html#GlyphOrientationVerticalProperty"><span
                                                class="secno">11.10.1.3.</span> ‘<span
                                                class="property">glyph-orientation-vertical</span>’プロパティ</a></li>
                                    <li><a href="text.html#KerningProperty"><span class="secno">11.10.1.4.</span> ‘<span
                                                class="property">kerning</span>’プロパティ</a></li>
                                </ol>
                            </li>
                            <li><a href="text.html#TextPropertiesAdaptions"><span class="secno">11.10.2.</span>
                                    SVGの調整</a>
                                <ol class="toc">
                                    <li><a href="text.html#FontVariantProperty"><span class="secno">11.10.2.1.</span>
                                            ‘<span class="property">font-variant</span>’プロパティ</a></li>
                                    <li><a href="text.html#LineHeightProperty"><span class="secno">11.10.2.2.</span>
                                            ‘<span class="property">line-height</span>’プロパティ</a></li>
                                    <li><a href="text.html#WritingModeProperty"><span class="secno">11.10.2.3.</span>
                                            ‘<span class="property">writing-mode</span>’プロパティ</a></li>
                                    <li><a href="text.html#DirectionProperty"><span class="secno">11.10.2.4.</span>
                                            ‘<span class="property">direction</span>’プロパティ</a></li>
                                    <li><a href="text.html#DominantBaselineProperty"><span
                                                class="secno">11.10.2.5.</span> ‘<span
                                                class="property">dominant-baseline</span>’プロパティ</a></li>
                                    <li><a href="text.html#AlignmentBaselineProperty"><span
                                                class="secno">11.10.2.6.</span> ‘<span
                                                class="property">alignment-baseline</span>’プロパティ</a></li>
                                    <li><a href="text.html#BaselineShiftProperty"><span class="secno">11.10.2.7.</span>
                                            ‘<span class="property">baseline-shift</span>’プロパティ</a></li>
                                    <li><a href="text.html#LetterSpacingProperty"><span class="secno">11.10.2.8.</span>
                                            ‘<span class="property">letter-spacing</span>’プロパティ</a></li>
                                    <li><a href="text.html#WordSpacingProperty"><span class="secno">11.10.2.9.</span>
                                            ‘<span class="property">word-spacing</span>’プロパティ</a></li>
                                    <li><a href="text.html#TextOverflowProperty"><span class="secno">11.10.2.10.</span>
                                            ‘<span class="property">text-overflow</span>’プロパティ</a></li>
                                </ol>
                            </li>
                            <li><a href="text.html#WhiteSpace"><span class="secno">11.10.3.</span> 空白</a>
                                <ol class="toc">
                                    <li><a href="text.html#TextWhiteSpace"><span class="secno">11.10.3.1.</span> SVG
                                            2推奨の空白処理、‘<span class="property">white-space</span>’プロパティ</a></li>
                                    <li><a href="text.html#LegacyXMLSpace"><span class="secno">11.10.3.2.</span>
                                            従来の空白処理、‘<span class="property">xml:space</span>’プロパティ</a></li>
                                    <li><a href="text.html#DuplicateWhiteSpace"><span class="secno">11.10.3.3.</span>
                                            重複する空白指示</a></li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li><a href="text.html#TextDecorationProperties"><span class="secno">11.11.</span> テキスト装飾</a>
                        <ol class="toc">
                            <li><a href="text.html#TextDecorationFillStroke"><span class="secno">11.11.1.</span> ‘<span
                                        class="property">text-decoration-fill</span>’
                                    および ‘<span class="property">text-decoration-stroke</span>’ プロパティ</a></li>
                        </ol>
                    </li>
                    <li><a href="text.html#TextSelection"><span class="secno">11.12.</span> テキスト選択とクリップボード操作</a>
                        <ol class="toc">
                            <li><a href="text.html#TextSelectionImplementationNotes"><span class="secno">11.12.1.</span>
                                    テキスト選択実装上の注意</a></li>
                        </ol>
                    </li>
                    <li><a href="text.html#DOMInterfaces"><span class="secno">11.13.</span> DOMインターフェース</a>
                        <ol class="toc">
                            <li><a href="text.html#InterfaceSVGTextContentElement"><span class="secno">11.13.1.</span>
                                    SVGTextContentElementインターフェース</a></li>
                            <li><a href="text.html#InterfaceSVGTextPositioningElement"><span
                                        class="secno">11.13.2.</span> SVGTextPositioningElementインターフェース</a></li>
                            <li><a href="text.html#InterfaceSVGTextElement"><span class="secno">11.13.3.</span>
                                    SVGTextElementインターフェース</a></li>
                            <li><a href="text.html#InterfaceSVGTSpanElement"><span class="secno">11.13.4.</span>
                                    SVGTSpanElementインターフェース</a></li>
                            <li><a href="text.html#InterfaceSVGTextPathElement"><span class="secno">11.13.5.</span>
                                    SVGTextPathElementインターフェース</a></li>
                        </ol>
                    </li>
                </ol>
            </li>
        </ol>
    </nav>

    <h2 id="Introduction" class="heading">11.1. はじめに<a class="self-link" href="#Introduction"></a></h2>

    <p>
        SVG文書断片として描画されるテキストは、<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素を使って指定されます。
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素内のテキストは、以下のように描画できます：
    </p>
    <ul>
        <li>整形済み（行折返しは限定的）、</li>
        <li><a href="text.html#TermContentArea">コンテンツ領域</a>が与えられていれば自動折返し、</li>
        <li><span class="element-name">‘<a
                    href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素が与えられていればパス上に描画。</li>
    </ul>

    <p>
        <a href="text.html#TextLayout">テキストレイアウト</a>の章でテキストレイアウトの概要を説明します。
        その後、<a href="text.html#TextLayoutContentArea">コンテンツ領域</a>や
        <a href="text.html#TextLayoutAlgorithm">アルゴリズム</a>
        を使った<a href="text.html#TermContentArea">コンテンツ領域</a>内テキストのレイアウト方法を解説します。
        <a href="text.html#TextLayoutPre">整形済み</a>、
        <a href="text.html#TextLayoutAuto">自動折返し</a>、
        <a href="text.html#TextLayoutPath">パス上</a>といった特殊なレイアウト規則については、それぞれの章で扱います。
    </p>

    <p class="note">
        SVG 1.1におけるテキストレイアウトの規則は主にSVG 1.1仕様で定義されています。
        規則の多くはCSSに見られるものと類似しています。
        SVG 2ではCSSへの依存がより明確となっています。実際のレイアウト結果は同じです。
        CSS仕様に直接依存する変更により、SVG仕様が簡素化されるとともに、レンダリングエージェントがHTMLとSVGの両方のテキストを同じコードで描画できることが明示的になります。
        特に、SVG 2の自動折返しテキストはCSSテキストレイアウトに基づいています。
    </p>

    <p>
        SVGの<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素は他のグラフィックス要素同様に描画されます。
        したがって、<a href="coords.html">座標系変換</a>、<a href="painting.html">描画</a>、
        <a href="render.html#ClippingAndMasking">クリッピング</a>や
        <a href="render.html#ClippingAndMasking">マスキング</a>の機能は
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素にも
        <a href="shapes.html#TermShapeElement">図形</a>（<a href="paths.html">パス</a>や<a
            href="shapes.html#RectElement">長方形</a>など）と同様に適用されます。
    </p>

    <p>
        SVGテキストは高度な組版機能もサポートしています：
    </p>
    <ul>
        <li>書体の選択、</li>

        <li>任意・歴史的・スタイル的な合字の利用、</li>

        <li>テキスト装飾（下線、上線など）。</li>
    </ul>

    <p>
        SVGテキストは、国際的なテキスト処理のニーズにも対応しています：
    </p>
    <ul>
        <li>テキストの水平・垂直方向の配置、</li>

        <li>左右・双方向テキスト（例：アラビア語やヘブライ語など右から左・左から右が混在する言語）、</li>

        <li>
            複雑なテキストレイアウト（例：文字とグリフが常に1対1対応しない、位置に応じて形が変わる文字（例：アラビア語）、文脈によって順序や合成が変わる文字（例：デーヴァナーガリー）など）、
        </li>

        <li>
            異なるベースラインへのグリフ整列（西洋文字は<em>アルファベット</em>、北インド系文字は<em>ハンギング</em>、東アジア文字は<em>イデオグラフィック</em>）。
        </li>
    </ul>

    <p>
        <a href="struct.html#SwitchElement">ユーザーの言語選好に応じて異なる文字列を切り替える</a>ことで、多言語SVGコンテンツが可能になります。
    </p>

    <p>
        描画する文字は、<span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素内に
        <a href="https://www.w3.org/TR/2008/REC-xml-20081126/#syntax">文字データ</a>（[<a
            href="refs.html#ref-xml">xml</a>]第2.4節）として記述されます。結果として：
    </p>

    <ul>
        <li>
            SVGコンテンツ内のテキストデータは、視覚障害者にも容易にアクセスできます（<a href="access.html">アクセシビリティ支援</a>参照）。
        </li>

        <li>
            多くの閲覧環境で、ユーザーはテキスト検索や選択、選択したテキストのクリップボードへのコピーが可能です（<a
                href="text.html#TextSelection">テキスト選択とクリップボード操作</a>参照）。
        </li>

        <li>
            XML互換のウェブ検索エンジンは、SVGコンテンツ内のテキスト文字列も他のXML文書と同様、特別な対応なしで検索できます。
        </li>
    </ul>

    <p>
        アクセシビリティの観点から、文書内のテキストには、機能を示す適切なセマンティックマークアップを付与することが推奨されます。
        例えば、図の一部の可視ラベルとなるテキスト要素には、その<em>id</em>が
        対象のグループやパス要素の<span class="attr-name">‘<a
                href="https://www.w3.org/TR/wai-aria-1.1/#aria-labelledby"><span>aria-labelledby</span></a>’</span>属性で参照されるべきです。
        詳細は<a href="access.html">SVGアクセシビリティガイドライン</a>を参照してください。
    </p>

    <h3 id="Definitions" class="heading">11.1.1. 定義<a class="self-link" href="#Definitions"></a></h3>

    <dl class="definitions">

        <dt><dfn id="TermCharacter" data-dfn-type="dfn" data-export="">文字</dfn></dt>
        <dd>
            文字はXMLで定義されるテキストの最小単位です
            [<a href="https://www.w3.org/TR/2008/REC-xml-20081126/">XML</a>]。
            <p class="note">
                実質的にはUnicodeコードポイントです。
                文字は制御命令（タブ、改行、復帰など）、描画可能な記号（文字、数字、句読点など）、修飾記号（合成アクセントなど）を含みます。
            </p>
        </dd>

        <dt><dfn id="TermAddressableCharacter" data-dfn-type="dfn" data-export="">アドレス可能文字</dfn></dt>
        <dd>
            <a href="text.html#TermCharacter">文字</a>のうち、テキスト位置属性やSVG DOMのテキストメソッドでアドレス指定可能なもの。

            レイアウト時に破棄される文字（<a href="https://www.w3.org/TR/css-text-3/#white-space-phase-1">折り畳まれた空白文字</a>など）や
            <a class="property" href="render.html#VisibilityControl">display</a>プロパティの値が<span
                class="prop-value">none</span>の要素内の文字はアドレス可能ではありません。

            アドレス可能文字はUTF-16コード単位でインデックス指定されます（したがって、U+FFFFを超える単一Unicodeコードポイントは、UTF-16コード単位として2文字分になります）。

            インデックスは、<a class="property"
                href="https://www.w3.org/TR/CSS21/text.html#propdef-text-transform">text-transform</a>変換適用前に決定されます。
            詳細は<a class="idlinterface"
                href="text.html#InterfaceSVGTextContentElement">SVGTextContentElement</a>インターフェースのメソッド参照。

            <p class="note">
                将来CSS生成コンテンツテキストのサポートが導入された場合、アドレス可能文字配列にも含まれます。
            </p>
        </dd>

        <dt id="TermTypographicCharacterUnit">組版文字</dt>
        <dd>
            書記体系の単位（ラテン文字（ダイアクリティック含む）、ハングル音節、漢字、ミャンマー文字クラスタなど）であり、
            特定の組版処理（改行、先頭文字効果、トラッキング、均等割付、縦組み等）に関して不可分なものです。正式な定義やUnicodeグラフムクラスタとの関係は
            <a href="https://drafts.csswg.org/css-text-3/#typographic-character-unit">CSS Text Module Level 3</a>
            ([<a href="refs.html#ref-css-text-3">css-text-3</a>])参照。
        </dd>

        <dt id="TermFont">フォント</dt>
        <dd>
            フォントは、様々な<a href="text.html#TermGlyph">グリフ</a>表現が特定の外観やスタイルを共有するよう編成されたグリフ集です。
        </dd>

        <dt id="TermGlyph">グリフ</dt>
        <dd>
            グリフは、<a href="text.html#TermFont">フォント</a>内で描画される内容の単位を表します。
            多くの場合、描画すべき文字と対応するグリフは1対1ですが（例："A"は通常1つのグリフで描画）、
            複数グリフで1文字を描画する場合（例：アクセント付き文字）や、1グリフで複数文字を描画する場合（例：合字）もあります。
            通常グリフは、<a href="shapes.html#TermShapeElement">図形</a>（<a
                href="paths.html">パス</a>など）で定義され、場合によっては小サイズでも判読性を保つレンダリングヒントなどの追加情報を持ちます。
        </dd>

        <dt><dfn id="TermTextContentElement" data-dfn-type="dfn" data-export="">テキストコンテンツ要素</dfn></dt>
        <dd>
            テキストコンテンツ要素は、キャンバス上にテキスト文字列を描画するSVG要素です。
            SVGのテキストコンテンツ要素は：
            <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>、
            <span class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span>、
            <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>です。
        </dd>

        <dt id="TermTextContentChildElement">テキストコンテンツ子要素</dt>
        <dd>
            テキストコンテンツ子要素は、他の<a href="text.html#TermTextContentElement">テキストコンテンツ要素</a>の子孫として許可される
            <a href="text.html#TermTextContentElement">テキストコンテンツ要素</a>です。
            SVGにおけるテキストコンテンツ子要素は：
            <span class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span>、
            <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>です。
        </dd>

        <dt id="TermTextContentBlockElement">テキストコンテンツブロック要素</dt>
        <dd>
            テキストコンテンツブロック要素は、テキストの単位として独立した要素であり、
            必要に応じて特定の子<a href="text.html#TermTextContentElement">テキストコンテンツ要素</a>（例：<a href="text.html#TextElement"><span
                    class="element-name">‘tspan’</span></a>）を含むこともあります。
            SVG 2では、<span class="element-name">‘<a
                    href="text.html#TextElement"><span>text</span></a>’</span>のみがテキストコンテンツブロック要素です。
        </dd>

        <dt id="TermContentArea">コンテンツ領域</dt>
        <dd>
            テキストが通常レイアウトされる領域。これは
            <a href="https://www.w3.org/TR/css3-exclusions/#content-area">CSSコンテンツ領域</a>と同等です。
            実際のテキストレイアウト領域はパディングや除外領域によって小さくなる場合があります。
        </dd>

        <dt id="TermWrappingContext">折返しコンテキスト</dt>
        <dd>
            テキストレイアウト時にコンテンツ領域から除外する領域（図形）の集合。
            <a href="https://www.w3.org/TR/css3-exclusions/#wrapping-context">CSS折返しコンテキスト</a>と同等です。
        </dd>

        <dt id="TermWrappingArea">折返し領域</dt>
        <dd>
            テキストがレイアウトされる領域で、パディングや除外領域（<a href="text.html#TermWrappingContext">折返しコンテキスト</a>）を差し引いた後の領域。
            <a href="https://www.w3.org/TR/css3-exclusions/#wrapping-area">CSS折返し領域</a>と同等です。
        </dd>

        <dt id="TermLineBox">行ボックス</dt>
        <dd>
            単一行テキストのレイアウトに使われるすべての内容を含む矩形領域。
            <a href="https://www.w3.org/TR/CSS2/visuren.html#line-box">CSS行ボックス</a>と同等です。
            <p class="annotation">
                CSS 3系テキストレイアウト仕様で用語は使われていますが、現状正式な定義はありません。
                そのためリンク先はCSS 2.1であり、<a href="https://github.com/w3c/csswg-drafts/issues/363">CSS WGにissueが提出されています</a>。
            </p>
        </dd>

        <dt id="TermInlineBaseDirection">インライン基本方向</dt>
        <dd>
            行または行の一部の内容が並ぶ主要な方向。
            行または行の一部の「開始側」「終了側」を定義します（例：<a class="property"
                href="text.html#TextAnchorProperty">text-anchor</a>プロパティ適用時）。
            <a class="property" href="text.html#DirectionProperty">direction</a>プロパティで決定されます。
            （注意：行内の文字の並び順は主にUnicode双方向アルゴリズムで制御され、インライン基本方向だけではありません。）
        </dd>

        <dt id="TermBlockFlowDirection">ブロックフロー方向</dt>
        <dd>
            <a href="text.html#TermLineBox">行ボックス</a>が積み重なる方向。<a class="property"
                href="text.html#WritingModeProperty">writing-mode</a>プロパティで決定されます。
        </dd>

        <dt id="TermAlignmentPoint">整列ポイント</dt>
        <dd>
            次の組版文字を描画する際、<a href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>と整列すべき
            組版文字上の点。グリフセルのメトリクスで決定され、スクリプトや
            <a href="text.html#TermInlineBaseDirection">インライン基本方向</a>に依存する場合があります。
        </dd>

        <dt id="TermCurrentTextPosition">現在のテキスト位置</dt>
        <dd>
            現在のユーザー空間において、次に描画する組版文字の<a href="text.html#TermAlignmentPoint">整列ポイント</a>が配置されるべき点。
        </dd>

        <dt id="TermTextChunk">テキストチャンク</dt>
        <dd>
            すべての文字が一緒に配置される独立したテキストブロック。
            新たな絶対位置調整（<span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>や
            <span class="attr-name">‘<a
                    href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性、強制改行など）ごとに新しい<a
                href="text.html#TermTextChunk">テキストチャンク</a>が生成されます。
            合字置換や双方向並び替えは<a href="text.html#TermTextChunk">テキストチャンク</a>内のみで行われます。<a
                href="text.html#TermTextChunk">テキストチャンク</a>は整形済みテキスト時のみ関連します。
        </dd>

        <dt id="TermWhiteSpaceCharacter">空白文字</dt>
        <dd>以下の文字が空白文字とみなされます：
            U+0009 タブ、
            U+000C フォームフィード（FF）、
            U+000D キャリッジリターン（CR）、
            U+000A ラインフィード（LF）、
            U+0020 スペース。
        </dd>

    </dl>

    <h3 id="FontsGlyphs" class="heading">11.1.2. フォントとグリフ<a class="self-link" href="#FontsGlyphs"></a></h3>

    <p>
        フォントは、グリフの集合と、それらのグリフを視覚的メディア上で文字として表示するために必要なその他の情報（総称してフォントテーブル）で構成されます。
        グリフの集合とフォントテーブルの組み合わせは<em>フォントデータ</em>と呼ばれます。
    </p>

    <p>
        フォントは、グリフの並びを再配置・合成・配置して複合グリフを生成するためにフォーマッタ（テキストシェイパー）が利用できる、置換・配置テーブルを提供することがあります。
        合成は単純な合字の場合もあれば、複数の子音・母音グリフを順番入れ替えつつ合成するインド系音節のように複雑な場合もあります。
        テーブルは言語依存で、言語ごとに適切な文字形を使うことができます。
    </p>

    <p>
        グリフ（単純・複合を問わず）が組版上不可分単位を表す場合、それは<a href="text.html#TermTypographicCharacterUnit">組版文字</a>と呼ばれます。
    </p>

    <p>
        合字は高度なテキストレイアウトにおいて重要な機能です。一部の合字は任意ですが（discretionary）、他（例：アラビア語）は必須です。
        合字生成に関する明示的な規則は以下の通りです：
    </p>

    <ul>
        <li>
            <p>
                合字生成は、文字が異なるDOMテキストノードにある場合は有効にすべきではありません。
                つまり、マークアップで分離された文字には合字を使うべきではありません。
            </p>
        </li>
        <li>
            <p>
                合字生成は、文字が異なる<a href="text.html#TermTextChunk">テキストチャンク</a>にある場合は有効にすべきではありません。
            </p>
        </li>
        <li>
            <p>
                任意合字は、2文字間の間隔がデフォルトと異なる場合（例：<a class="property"
                    href="https://www.w3.org/TR/css-text-3/#letter-spacing-property">letter-spacing</a>がデフォルト値以外、または<a
                    class="property" href="https://www.w3.org/TR/css-text-3/#text-align-property">text-align</a>が<span
                    class="propvalue">justify</span>かつ<a class="property"
                    href="https://www.w3.org/TR/css-text-3/#text-justify-property">text-justify</a>が<span
                    class="propvalue">distribute</span>）
                の場合は使用すべきではありません。
                （詳細は<a href="https://www.w3.org/TR/css-text-3/#letter-spacing-property">CSS Text Module Level 3</a>、
                [<a href="refs.html#ref-css-text-3">css-text-3</a>]参照）。
            </p>
            <p>
                SVG属性（<span class="attr-name">‘<a
                        href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、<span class="attr-name">‘<a
                        href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>、
                <span class="attr-name">‘<a
                        href="text.html#TextPathElementSpacingAttribute"><span>spacing</span></a>’</span>（<span
                    class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span>内）などで
                <a href="text.html#TermTypographicCharacterUnit">組版文字</a>の位置を変更しても、任意合字は壊れません。
                合字を使いたくない場合は、<a class="property"
                    href="https://www.w3.org/TR/css-fonts-3/#font-variant-ligatures-prop">font-variant-ligatures</a>プロパティで無効化できます。
            </p>
            <p>
                OpenTypeフォントでは、任意合字はliga, clig, dlig, hlig, cala機能によって有効化されるものを含み、必須合字はrlig機能に含まれます。
            </p>
        </li>
    </ul>


    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2 要件:</th>
                <td>Web Open Font Format (WOFF)の明示的なサポートを含めること。</td>
            </tr>
            <tr>
                <th>決議:</th>
                <td><a href="https://www.w3.org/2011/03/01-svg-minutes.html#item03">SVG 2でWOFFサポートを義務化する。</a></td>
            </tr>
            <tr>
                <th>目的:</th>
                <td>国際化や高度な組版のため、OpenTypeの全機能へアクセス可能にする。</td>
            </tr>
            <tr>
                <th>担当者:</th>
                <td>Chris（アクションなし）</td>
            </tr>
            <tr>
                <th>ステータス:</th>
                <td>完了</td>
            </tr>
        </table>
    </div>

    <p>
        適切なテキスト描画には、制作時と同じフォントを使うことが重要です。
        このため、SVGでは<a href="https://www.w3.org/TR/css-fonts-3/#font-resources">Font
            Resources</a>章で定義されるダウンロード可能フォントのサポートが必須です。
        特に、Web Open Font Format（<a href="refs.html#ref-woff">WOFF</a>）のサポートが要求されます。
    </p>

    <p class="note">
        SVG 2の新機能として、WOFFにより著者が自身のコンテンツを適切に描画するためのフォントを提供できます。
        これには、OpenTypeテーブルによる複雑なスクリプト、任意合字、スウォッシュ、オールドスタイル数字等のサポートや、
        フォントの圧縮・サブセット化・ライセンス情報の付加が含まれます。
    </p>

    <h3 id="GlyphsMetrics" class="heading">11.1.3. グリフのメトリクスとレイアウト<a class="self-link" href="#GlyphsMetrics"></a></h3>

    <p>
        グリフの選択と配置は通常CSSの規則に従って処理されます。
        ただし、SVGでは最終的なテキストレイアウトに個々のグリフの幾何プロパティを知る必要がある場合があります。
    </p>

    <p>
        幾何学的なフォント特性はEMボックスを基準にした座標系で表現されます（EMはフォントのグリフの高さの相対単位です）。
        1EM×1EMのボックスを<em>デザイン空間</em>と呼び、この空間はEMを細分して<em>units per em</em>という単位で幾何座標が与えられます。
    </p>

    <p class="note">
        units per emはフォント特性で、典型的な値は1000や2048です。
    </p>

    <p>
        EMボックスの座標空間は<em>デザイン空間座標系</em>と呼ばれます。スケーラブルフォントでは、グリフを描画する曲線や線はこの座標系で表現されます。
    </p>

    <p class="note">
        この座標系の(0,0)点は通常EMボックスの左端に位置しますが、左下隅ではありません。
        ローマ字大文字の下端のY座標は通常0です。小文字ローマ字の下端（ディセンダー）は負の座標値を持ちます。
    </p>

    <div class="figure">
        <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/font_embox.svg"
            alt="EMボックス内の'M'の座標系、ベースライン、アセント、ディセント" />
        <p class="caption">
            EMボックス（青い四角）内の'M'。'M'はベースライン（青い線）に載っています。座標系の原点は黒丸で示されています。
        </p>
    </div>

    <p>
        SVGは、フォントのフォントデータに少なくとも3つの特性（アセント・ディセント・ベースラインテーブル）が含まれることを前提とします。
        アセントはフォントの(0,0)点からEMボックス上端までの距離、ディセントは同点から下端までの距離です。ベースラインテーブルについては後述します。
    </p>

    <p class="note">
        OpenTypeフォント（[<a
            href="refs.html#ref-opentype">OPENTYPE</a>]）では、横書きモードの場合、アセント・ディセントはOS/2テーブルのsTypoAscender・sTypoDescenderで与えられます。
        縦書きモードではディセント（この場合(0,0)点からグリフ左端までの距離）は通常0です（(0,0)が左端なので）。縦書きのアセントは1emか、OpenType Baseテーブルのideographic top
        baseline値で指定されます。
    </p>

    <p>
        グリフは各グリフの特定の点（<a href="text.html#TermAlignmentPoint">整列ポイント</a>）を基準に配置されます。
        横書きではグリフの<a href="text.html#TermAlignmentPoint">整列ポイント</a>が縦に揃い、縦書きでは横に揃います。
        <a href="text.html#TermAlignmentPoint">整列ポイント</a>の位置はスクリプトによって異なります。西洋グリフは大文字下端、北インド系グリフはほぼ上端の横線、
        東アジアグリフは下端または中心で揃います。
    </p>

    <p>
        同一フォントサイズ・同一スクリプト内のテキスト行では、整列ポイントの並びが<a href="text.html#TermInlineBaseDirection">インライン基本方向</a>で幾何学的な線＝<dfn
            id="TermBaseline" data-dfn-type="dfn" data-export="">ベースライン</dfn>を定義します。
        西洋や多くの音節文字は「アルファベット」ベースライン、北インド系は「ハンギング」、東アジアは「イデオグラフィック」ベースラインで揃います。
    </p>

    <div class="figure">
        <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/font_baseline.svg" alt="3種類のスクリプトのベースライン例" />
        <p class="caption">
            3種類のスクリプトのベースライン（赤線）例。左からアルファベット、ハンギング、イデオグラフィック。イデオグラフィックスクリプトのEMボックスは青色で表示。
        </p>
    </div>

    <p>
        グリフはベースラインに沿って順次配置され、各グリフの<a href="text.html#TermAlignmentPoint">整列ポイント</a>が通常<a
            href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>に配置されます（<a class="property"
            href="https://drafts.csswg.org/css-inline/#transverse-alignment">vertical-align</a>などのプロパティで位置が変わる場合あり）。
        配置後、<a href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>はグリフの<em>advance</em>値（通常は横書きなら幅、縦書きなら高さ）だけ進み、
        カーニングや他の間隔調整、新しい行（整形済み・自動折返しテキスト）にも対応します。
        初期・最終の現在テキスト位置は整列（例：<a class="property"
            href="text.html#TextAnchorProperty">text-anchor</a>値が'middle'や'end'の場合）に利用されます。
        グリフのadvance値はパス上のテキスト配置にも必要です。
    </p>

    <div class="figure">
        <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/font_metrics.svg"
            alt="3種類のスクリプトのフォントメトリクス例" />
        <p class="caption">
            フォントメトリクスの例。青いボックスは3つのグリフの幾何ボックス。ラベル付きの小さい円はグリフ配置前の<a
                href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>を示す。小さい四角は最後のグリフ配置後の<a
                href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>。
            'a'グリフの左端と'V'グリフの右端はカーニングにより揃っていない点に注意。
        </p>
    </div>

    <p>
        グリフが現在の向きに対応する明示的なadvance値を持たない場合は、適切な近似値を用いるべきです。縦書きテキストの場合、<em>em</em>サイズが推奨されます。
    </p>

    <p>
        初期の<a href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>は、整形済みテキストの場合は<span class="attr-name">‘<a
                href="text.html#TextElementXAttribute"><span>x</span></a>’</span>・<span class="attr-name">‘<a
                href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性（<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>または最初の<span class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span>）、自動折返しテキストで<a
            href="text.html#TermContentArea">コンテンツ領域</a>が<a class="property"
            href="text.html#InlineSizeProperty">inline-size</a>プロパティで決定される場合も同様です。
        その他の自動折返しテキストの場合、初期位置はCSSの行折返しアルゴリズム適用後の最初のグリフ位置で決まります。
    </p>

    <p>
        <dfn id="TermBaselineTable" data-dfn-type="dfn" data-export="">ベースラインテーブル</dfn>は、デザイン空間座標系で1つ以上のベースラインの位置を指定します。
        ベースラインテーブルの役割は、同一行に複数スクリプトを混在させる際の相互整列を容易にすることです。
        行（またはブロック）内で主となるスクリプトに応じて望ましい相対整列が変わるため、スクリプトごとに異なるベースラインテーブルを持つ場合があります。
        また、横書き・縦書きで整列位置が異なるため、フォントは複数のベースラインテーブル（横書き用複数、縦書き用0個以上）を持つ場合があります。
    </p>

    <p class="note">
        一部のフォントはベースラインテーブル値を持たない場合があります。その場合、<a href="https://www.w3.org/TR/css-inline-3/#baseline-synthesis-fonts">CSS
            Inline Layout Module Level 3</a> [css-inline-3]で推奨されるヒューリスティックで近似値を導出できます。
    </p>

    <p>
        テキスト途中で別のフォント（またはフォントサイズ変更）が指定された場合、<dfn id="TermDominantBaseline" data-dfn-type="dfn"
            data-export="">主ベースライン</dfn>が新しいフォント（サイズ）のグリフを前のフォントと揃える際に使われます。
        <a class="property" href="text.html#DominantBaselineProperty">dominant-baseline</a>プロパティで主ベースラインを設定します。
    </p>

    <p>
        オブジェクトの親との相対整列は<dfn id="TermAlignmentBaseline" data-dfn-type="dfn" data-export="">整列ベースライン</dfn>で決定されます。
        通常は主ベースラインと同じですが、ショートハンドプロパティ<a class="property"
            href="https://drafts.csswg.org/css-inline/#transverse-alignment">vertical-align</a>（推奨）やロングハンド<a
            class="property" href="text.html#AlignmentBaselineProperty">alignment-baseline</a>で別のベースラインを選択できます。
    </p>

    <p>
        主ベースラインは、ショートハンド<a class="property"
            href="https://drafts.csswg.org/css-inline/#transverse-alignment">vertical-align</a>（推奨）やロングハンド<a
            class="property" href="text.html#BaselineShiftProperty">baseline-shift</a>プロパティで一時的にシフト可能です（上付き・下付き文字など）。
        シフトは入れ子可能で、各シフトが前のシフトに加算されます。
    </p>

    <div class="figure">
        <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/vertical_align.svg"
            alt="vertical-alignプロパティの使用例。左は[z]の内側括弧が小さく、右はx2で2が上付き。" />
        <p class="caption">
            vertical-alignプロパティの使用例。

            左：'vertical-align:mathematical'（'alignment-baseline:mathematical'）が<span class="element-name">‘<a
                    href="text.html#TextElement"><span>tspan</span></a>’</span>要素（[z]）に適用。水色の線が数式ベースライン位置。
            右：'vertical-align:super'（'baseline-shift:super'）が<span class="element-name">‘<a
                    href="text.html#TextElement"><span>tspan</span></a>’</span>要素（2）に適用。水色の線がベースラインのシフトを示す。
        </p>
    </div>

    <p>
        SVGは、フォントデータ内の各グリフに対して、2つの幅・2つの整列ベースライン・2つの整列ポイント（横書き用と縦書き用）を持つことを前提とします。
        （幅といえども、縦書きでは縦方向に使われます。）整列ポイントのインライン基本方向位置はグリフの開始端にあります。
    </p>

    <p>
        ベースラインについての詳細は<a href="https://www.w3.org/TR/css-inline-3/#line-height">CSS Inline Layout Module Level 3</a>仕様
        [<a href="refs.html#ref-css-inline-3">css-inline-3</a>]や、<a
            href="https://www.w3.org/TR/css3-writing-modes/#intro-baselines">CSS Writing Modes Level 3</a>仕様
        [<a href="refs.html#ref-css-writing-modes-3">css-writing-modes-3</a>]を参照してください。
    </p>

    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2 要件:</th>
                <td>異なるベースラインへのテキスト整列をサポートすること。</td>
            </tr>
            <tr>
                <th>決議:</th>
                <td><a href="https://www.w3.org/2012/03/15-svg-irc#T21-07-21">SVG
                        2は既存または改善されたCSSプロパティでグリフの異なるベースライン整列をサポートする。</a></td>
            </tr>
            <tr>
                <th>目的:</th>
                <td>横書きテキストでスタイル効果のためグリフに異なる垂直整列を可能にする。</td>
            </tr>
            <tr>
                <th>担当者:</th>
                <td>Chris（アクションなし）</td>
            </tr>
            <tr>
                <th>ステータス:</th>
                <td>完了</td>
            </tr>
        </table>
    </div>

    <p>
        1行のテキストは<a href="text.html#TermLineBox">行ボックス</a>内にレイアウトされます。複数行テキストはこれらボックスを積み重ねて生成されます。
        <a href="text.html#TermLineBox">行ボックス</a>の高さは、<a class="property"
            href="text.html#LineHeightProperty">line-height</a>プロパティ適用後の
        行内すべてのグリフの最大アセント・最大ディセントで決まります。幅は通常テキストブロックの幅です。
        SVGでは、テキストブロックに固定幾何形状がない場合（整形済みテキストなど）、<a href="text.html#TermLineBox">行ボックス</a>はグリフボックスをぴったり包みます。
    </p>

    <div class="figure">
        <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/line_box.svg"
            alt="文'A big word.'の'big'が大きいフォントの例" />
        <p class="caption">
            <a href="text.html#TermLineBox">行ボックス</a>の高さ決定例。

            各グリフボックス（小さい水色のボックス）は<a class="property"
                href="text.html#LineHeightProperty">line-height</a>プロパティに応じて上下に拡張されます。
            この例では<a class="property" href="text.html#LineHeightProperty">line-height</a>は125%。大きいグリフの<a class="property"
                href="https://www.w3.org/TR/css-fonts-3/#font-size-prop">font-size</a>は96pxで、余分な高さは24px（96pxの25%）。
            余分な高さは上下均等に分配され、赤いボックスとなります（同じインライン要素のグリフはまとめて表示）。
            最終的な<a href="text.html#TermLineBox">行ボックス</a>（大きい水色ボックス）は、赤いボックスの最大上下範囲で決定します。
        </p>
    </div>

    <p>
        国際的な書記体系に対応するため、<a href="text.html#TermLineBox">行ボックス</a>は水平・垂直方向どちらでも配置可能です。
        縦向きの<a href="text.html#TermLineBox">行ボックス</a>内のテキストは上から下へ流れます。
        横向きの<a href="text.html#TermLineBox">行ボックス</a>内のテキストは左から右（現代ラテン文字など）、右から左（ヘブライ語・アラビア語など）、または混在（双方向テキスト）で流れます。
    </p>

    <p>
        双方向テキストの処理モデルは次の通りです：
    </p>
    <ul>
        <li>
            ユーザーエージェントは、<em>論理順</em>（原文書での出現順）で提供された文字を処理します。
        </li>
        <li>
            ユーザーエージェントは非描画要素と<a href="#WhiteSpace">空白文字の折り畳み</a>を除外します。
        </li>
        <li>
            ユーザーエージェントは、Unicode双方向アルゴリズムを適用すべき独立したブロックを決定します。
            <ul>
                <li>
                    各<a href="text.html#TermTextChunk">テキストチャンク</a>は独立したテキストブロックです。
                </li>
                <li>
                    <a class="property"
                        href="https://www.w3.org/TR/css3-writing-modes/#text-orientation">text-orientation</a>や
                    廃止された<a class="property"
                        href="text.html#GlyphOrientationVerticalProperty">glyph-orientation-vertical</a>プロパティで
                    グリフの向きが変わると、双方向処理上新しい独立ブロックとなります。
                </li>
            </ul>
        </li>
        <li>
            各独立テキストブロックでUnicode双方向アルゴリズムと<a class="property" href="text.html#DirectionProperty">direction</a>、<a
                class="property"
                href="https://www.w3.org/TR/css-writing-modes-3/#unicode-bidi">unicode-bidi</a>プロパティを処理すると、左から右の描画順となる可能性のある文字リストが得られます。
            同時に、<span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>、
            <span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>属性（<span
                class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>や<span
                class="element-name">‘<a
                    href="text.html#TextElement"><span>tspan</span></a>’</span>）も、文字と属性値の対応関係を保つため再並べ替えされます。
        </li>
    </ul>
    <p>
        カーニングや合字処理はフォント依存の場合もありますが、推奨モデルは、文字の並べ替え後に文字やグリフの組み合わせ間で処理することです。
    </p>

    <p>
        <a href="text.html#TermLineBox">行ボックス</a>の向きおよび積み重ね方向（<a
            href="text.html#TermBlockFlowDirection">ブロックフロー方向</a>）は<a class="property"
            href="text.html#WritingModeProperty">writing-mode</a>プロパティで決定されます。
        横書き（<a class="property" href="text.html#WritingModeProperty">writing-mode</a>値<span
            class="prop-value">horizontal-tb</span>）では行ボックスが上から下に積み重ねられます。
        縦書きでは右から左（<a class="property" href="text.html#WritingModeProperty">writing-mode</a>値<span
            class="prop-value">vertical-rl</span>）や左から右（<a class="property"
            href="text.html#WritingModeProperty">writing-mode</a>値<span class="prop-value">vertical-lr</span>）に積み重ねられます。
    </p>

    <h2 id="TextElement" class="heading">11.2. <span class="element-name">‘text’</span>要素と
        <span class="element-name">‘tspan’</span>要素<a class="self-link" href="#TextElement"></a>
    </h2>

    <p>
        <span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素は、テキストからなるグラフィックス要素を定義します。
        <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>要素は
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>や他の
        <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>要素の中に配置でき、
        スタイルを切り替えたり、親要素に対して描画テキストの位置を調整したりできます。
    </p>

    <p>
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>および<span
            class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span>要素内の文字データは、関連属性やプロパティ、フォント内の文字―グリフ対応表とともに、描画されるグリフを定義します。
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>や<span
            class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span>要素に指定する属性・プロパティは、書字方向、フォント指定、文字描画方法（塗り属性等）などを示します。
        この章の後半でテキスト固有の属性やプロパティについて説明します。
    </p>

    <p>
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>と<span
            class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span>要素は他のグラフィックス要素と同じ描画方式でレンダリングされるため、
        <a href="painting.html">塗り</a>機能は<a href="shapes.html#TermShapeElement">図形</a>（<a href="paths.html">パス</a>や<a
            href="shapes.html#RectElement">矩形</a>など）と同様に
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>や<span
            class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>要素にも適用されます（<a
            href="painting.html#Markers">マーカー</a>を除く）。
        さらに、<a href="coords.html">座標系変換</a>、<a href="render.html#ClippingAndMasking">クリッピング</a>、<a
            href="render.html#ClippingAndMasking">マスキング</a>も
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素全体に適用できます。
    </p>

    <p class="note">
        CSS的には、<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素はブロック要素として動作します。
        <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>、
        <span class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span>、
        <span class="element-name">‘<a href="linking.html#AElement"><span>a</span></a>’</span>要素は、<a
            href="text.html#TermTextContentElement">テキストコンテンツ要素</a>の子孫の場合インライン要素として動作します。
    </p>

    <p id="ObjectBoundingBoxUnitsTextObjects">
        テキストにもグラデーション、パターン、クリッピングパス、マスク、フィルタを適用できます。
        これらをテキストに適用し、キーワード<span class="attr-value">'objectBoundingBox'</span>を使って「object bounding
        box」基準でグラフィカル効果を指定した場合は、
        オブジェクトバウンディングボックス単位は常に<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素全体に対して計算されます。
        これは、同じ<span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素内で異なる<span
            class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>や<span
            class="element-name">‘<a
                href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素に異なる効果を適用した場合も同様です。
    </p>

    <p>
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素は、双方向処理後の最初のグリフを
        初期<a href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>（<a class="property"
            href="text.html#TextAnchorProperty">text-anchor</a>プロパティや<a class="property"
            href="https://www.w3.org/TR/css-text-3/#text-align-property">text-align</a>プロパティ値による調整あり）に描画します。
        整形済みテキストや<a class="property" href="text.html#InlineSizeProperty">inline-size</a>プロパティで<a
            href="text.html#TermContentArea">コンテンツ領域</a>が決まる自動折返しテキストの場合、
        初期<a href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>は、最初に描画される文字を含む
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>または<span
            class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>要素の
        <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>・<span
            class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>値で決まります。

        図形内の自動折返しテキストやパス上のテキストの場合は、
        <a href="text.html#TextLayoutAuto">自動折返しテキスト</a>や<a href="text.html#TextLayoutPath">パス上のテキスト</a>の章を参照して、
        初期<a href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>を確認してください。

        指定された文字に対応するグリフが描画された後、次の文字のために現在のテキスト位置が更新されます。
        最も単純な場合、新しい現在のテキスト位置は、前の位置＋グリフのadvance値（横書きなら横方向、縦書きなら縦方向）となります。
        グリフ配置とadvance値については<a href="text.html#TextLayoutAlgorithm">テキストレイアウト</a>章を参照してください。
    </p>

    <div class="example">
        <p>
            テキスト文字列<q>Hello, out there!</q>をVerdanaフォントで青色のグリフでキャンバスに描画する例です。
        </p>
        <pre>&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="10cm" height="3cm" viewBox="0 0 1000 300"
     xmlns="http://www.w3.org/2000/svg" version="1.1">

  &lt;text x="250" y="180"
        font-family="Verdana" font-size="64" fill="blue" >
    Hello, out there!
  &lt;/text>

&lt;/svg></pre>
        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text01.svg" alt="青色テキストの画像" />
        </div>
    </div>

    <div class="example">
        <p>
            <span class="element-name">‘<a
                    href="text.html#TextElement"><span>tspan</span></a>’</span>を使って、単語<q>not</q>のスタイルを変更しています。
        </p>
        <pre>&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="10cm" height="3cm" viewBox="0 0 1000 300"
     xmlns="http://www.w3.org/2000/svg" version="1.1">

  &lt;g font-family="Verdana" font-size="64" >
    &lt;text x="160" y="180" fill="blue" >
      You are
      &lt;tspan font-weight="bold" fill="red" >not&lt;/tspan>
      a banana.
    &lt;/text>
  &lt;/g>

&lt;/svg></pre>
        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/tspan01.svg" alt="青テキストで'not'のみ赤色" />
        </div>
    </div>

    <div class="example">
        <p>
            2つの<span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>要素の位置を
            <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>と<span
                class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性で
            水平方向・垂直方向に調整しています。
            すべてのテキストが1つの<span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素内なので、
            <a href="text.html#TextSelection">テキスト選択とクリップボード操作</a>に対応したユーザーエージェントでは全体を選択・コピーできます。
        </p>
        <pre>&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="10cm" height="3cm" viewBox="0 0 1000 300"
     xmlns="http://www.w3.org/2000/svg" version="1.1">

  &lt;g font-family="Verdana" font-size="64" >
    &lt;text x="100" y="180" fill="blue" >
      But you
      &lt;tspan dx="2em" dy="-50" font-weight="bold" fill="red" >
        are
      &lt;/tspan>
      &lt;tspan dy="100">
        a peach!
      &lt;/tspan>
    &lt;/text>
  &lt;/g>

&lt;/svg></pre>
        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/tspan02.svg" alt="位置がずれた単語のある文" />
        </div>
    </div>


    <div class="element-summary">
        <div class="element-summary-name"><span class="element-name">‘<dfn data-dfn-type="element" data-export=""
                    id="elementdef-text">text</dfn>’</span></div>
        <dl>
            <dt>カテゴリ:</dt>
            <dd><a href="struct.html#TermGraphicsElement">グラフィックス要素</a>, <a
                    href="render.html#TermRenderableElement">描画可能要素</a>, <a
                    href="text.html#TermTextContentElement">テキストコンテンツ要素</a></dd>
            <dt>内容モデル:</dt>
            <dd>以下の要素や文字データを任意個・任意順で含むことができます:<ul class="no-bullets">
                    <li><a href="https://svgwg.org/specs/animations/#TermAnimationElement">アニメーション要素</a><span
                            class="expanding"> — <span class="element-name">‘<a
                                    href="https://svgwg.org/specs/animations/#AnimateElement"><span>animate</span></a>’</span>,
                            <span class="element-name">‘<a
                                    href="https://svgwg.org/specs/animations/#AnimateMotionElement"><span>animateMotion</span></a>’</span>,
                            <span class="element-name">‘<a
                                    href="https://svgwg.org/specs/animations/#AnimateTransformElement"><span>animateTransform</span></a>’</span>,
                            <span class="element-name">‘<a
                                    href="https://svgwg.org/specs/animations/#DiscardElement"><span>discard</span></a>’</span>,
                            <span class="element-name">‘<a
                                    href="https://svgwg.org/specs/animations/#SetElement"><span>set</span></a>’</span></span>
                    </li>
                    <li><a href="struct.html#TermDescriptiveElement">記述要素</a><span class="expanding"> —
                            <span class="element-name">‘<a href="struct.html#DescElement"><span>desc</span></a>’</span>,
                            <span class="element-name">‘<a
                                    href="struct.html#TitleElement"><span>title</span></a>’</span>, <span
                                class="element-name">‘<a
                                    href="struct.html#MetadataElement"><span>metadata</span></a>’</span></span></li>
                    <li><a href="painting.html#TermPaintServerElement">ペイントサーバー要素</a><span class="expanding">
                            — <span class="element-name">‘<a
                                    href="pservers.html#LinearGradientElement"><span>linearGradient</span></a>’</span>,
                            <span class="element-name">‘<a
                                    href="pservers.html#RadialGradientElement"><span>radialGradient</span></a>’</span>,
                            <span class="element-name">‘<a
                                    href="pservers.html#PatternElement"><span>pattern</span></a>’</span></span></li>
                    <li><a href="text.html#TermTextContentChildElement">テキストコンテンツ子要素</a><span class="expanding"> — <span
                                class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>,
                            <span class="element-name">‘<a
                                    href="text.html#TextPathElement"><span>textPath</span></a>’</span></span></li>
                </ul><span class="element-name"><a href="linking.html#AElement"><span>a</span></a></span>, <span
                    class="element-name"><a
                        href="https://drafts.fxtf.org/css-masking-1/#ClipPathElement"><span>clipPath</span></a></span>,
                <span class="element-name"><a href="painting.html#MarkerElement"><span>marker</span></a></span>, <span
                    class="element-name"><a
                        href="https://drafts.fxtf.org/css-masking-1/#MaskElement"><span>mask</span></a></span>, <span
                    class="element-name"><a href="interact.html#ScriptElement"><span>script</span></a></span>, <span
                    class="element-name"><a href="styling.html#StyleElement"><span>style</span></a></span>
            </dd>
            <dt>属性:</dt>
            <dd>
                <ul class="no-bullets">
                    <li><a href="struct.html#TermARIAAttribute">ARIA属性</a><span class="expanding"> — <span
                                class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-activedescendant"><span>aria-activedescendant</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-atomic"><span>aria-atomic</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-autocomplete"><span>aria-autocomplete</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-busy"><span>aria-busy</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-checked"><span>aria-checked</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-colcount"><span>aria-colcount</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-colindex"><span>aria-colindex</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-colspan"><span>aria-colspan</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-controls"><span>aria-controls</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-current"><span>aria-current</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-describedby"><span>aria-describedby</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-details"><span>aria-details</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-disabled"><span>aria-disabled</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-dropeffect"><span>aria-dropeffect</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-errormessage"><span>aria-errormessage</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-expanded"><span>aria-expanded</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-flowto"><span>aria-flowto</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-grabbed"><span>aria-grabbed</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-haspopup"><span>aria-haspopup</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-hidden"><span>aria-hidden</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-invalid"><span>aria-invalid</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-keyshortcuts"><span>aria-keyshortcuts</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-label"><span>aria-label</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-labelledby"><span>aria-labelledby</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-level"><span>aria-level</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-live"><span>aria-live</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-modal"><span>aria-modal</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-multiline"><span>aria-multiline</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-multiselectable"><span>aria-multiselectable</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-orientation"><span>aria-orientation</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-owns"><span>aria-owns</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-placeholder"><span>aria-placeholder</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-posinset"><span>aria-posinset</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-pressed"><span>aria-pressed</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-readonly"><span>aria-readonly</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-relevant"><span>aria-relevant</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-required"><span>aria-required</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-roledescription"><span>aria-roledescription</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-rowcount"><span>aria-rowcount</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-rowindex"><span>aria-rowindex</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-rowspan"><span>aria-rowspan</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-selected"><span>aria-selected</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-setsize"><span>aria-setsize</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-sort"><span>aria-sort</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuemax"><span>aria-valuemax</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuemin"><span>aria-valuemin</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuenow"><span>aria-valuenow</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuetext"><span>aria-valuetext</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="struct.html#RoleAttribute"><span>role</span></a>’</span></span></li>
                    <li><a href="struct.html#TermConditionalProcessingAttribute">条件付き処理属性</a><span class="expanding"> —
                            <span class="attr-name">‘<a
                                    href="struct.html#RequiredExtensionsAttribute"><span>requiredExtensions</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="struct.html#SystemLanguageAttribute"><span>systemLanguage</span></a>’</span></span>
                    </li>
                    <li><a href="struct.html#TermCoreAttribute">コア属性</a><span class="expanding"> — <span
                                class="attr-name">‘<a href="struct.html#IDAttribute"><span>id</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="struct.html#SVGElementTabindexAttribute"><span>tabindex</span></a>’</span>,
                            <span class="attr-name">‘<a href="struct.html#LangAttribute"><span>lang</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>, <span
                                class="attr-name">‘<a href="styling.html#ClassAttribute"><span>class</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="styling.html#StyleAttribute"><span>style</span></a>’</span></span></li>
                    <li><a
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers">グローバルイベント属性</a><span
                            class="expanding"> — <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncancel</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncanplay</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncanplaythrough</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onchange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onclick</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onclose</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncuechange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondblclick</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondrag</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragend</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragenter</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragexit</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragleave</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragover</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragstart</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondrop</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondurationchange</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onemptied</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onended</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onerror</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onfocus</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oninput</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oninvalid</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onkeydown</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onkeypress</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onkeyup</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onload</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onloadeddata</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onloadedmetadata</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onloadstart</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmousedown</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseenter</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseleave</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmousemove</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseout</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseover</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseup</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmousewheel</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onpause</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onplay</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onplaying</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onprogress</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onratechange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onreset</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onresize</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onscroll</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onseeked</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onseeking</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onselect</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onshow</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onstalled</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onsubmit</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onsuspend</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ontimeupdate</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ontoggle</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onvolumechange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onwaiting</span></a>’</span></span></li>
                    <li><a
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#documentandelementeventhandlers">ドキュメント要素イベント属性</a><span
                            class="expanding"> — <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncopy</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncut</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onpaste</span></a>’</span></span></li>
                    <li><a href="interact.html#EventAttributes">グラフィックスイベント属性</a><span class="expanding"> —
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onfocusin</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onfocusout</span></a>’</span></span></li>
                    <li><a href="styling.html#TermPresentationAttribute">プレゼンテーション属性</a><span class="expanding"> —
                        </span></li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextElementLengthAdjustAttribute"><span>lengthAdjust</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span></li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span></li>
                </ul>
            </dd>
            <dt>DOMインターフェース:</dt>
            <dd>
                <ul class="no-bullets">
                    <li><a class="idlinterface" href="text.html#InterfaceSVGTextElement">SVGTextElement</a></li>
                </ul>
            </dd>
        </dl>
    </div>
    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2 要件:</th>
                <td><span class="element-name">‘<a
                            href="text.html#TextElement"><span>tspan</span></a>’</span>でtransformを許可する。</td>
            </tr>
            <tr>
                <th>決議:</th>
                <td><a href="https://www.w3.org/2011/12/01-svg-irc#T21-02-34">SVG 2では<span
                            class="element-name">‘tspan’</span>でtransformを許可する。</a></td>
            </tr>
            <tr>
                <th>目的:</th>
                <td>既にtransformが許可されている<span class="element-name">‘<a
                            href="linking.html#AElement"><span>a</span></a>’</span>など他の要素と揃えるため。</td>
            </tr>
            <tr>
                <th>担当者:</th>
                <td>Cameron（アクションなし）</td>
            </tr>
            <tr>
                <th>ステータス:</th>
                <td>完了</td>
            </tr>
        </table>
        <p>
            この決定は撤回されました。詳細は
            <a href="https://github.com/w3c/svgwg/issues/210">GitHub Issue 210</a>を参照。
            CSS/HTMLではインライン要素でtransformは許可されておらず、SVG・HTML両方でインライン状態の<span class="element-name">‘<a
                    href="linking.html#AElement"><span>a</span></a>’</span>要素にtransformをサポートするレンダラはありません。
        </p>
    </div>

    <div class="element-summary">
        <div class="element-summary-name"><span class="element-name">‘<dfn data-dfn-type="element" data-export=""
                    id="elementdef-tspan">tspan</dfn>’</span></div>
        <dl>
            <dt>カテゴリ:</dt>
            <dd><a href="struct.html#TermGraphicsElement">グラフィックス要素</a>, <a
                    href="render.html#TermRenderableElement">描画可能要素</a>, <a
                    href="text.html#TermTextContentElement">テキストコンテンツ要素</a>, <a
                    href="text.html#TermTextContentChildElement">テキストコンテンツ子要素</a></dd>
            <dt>内容モデル:</dt>
            <dd>以下の要素または文字データを任意個・任意順で含むことができます:<ul class="no-bullets">
                    <li><a href="struct.html#TermDescriptiveElement">記述要素</a><span class="expanding"> —
                            <span class="element-name">‘<a href="struct.html#DescElement"><span>desc</span></a>’</span>,
                            <span class="element-name">‘<a
                                    href="struct.html#TitleElement"><span>title</span></a>’</span>, <span
                                class="element-name">‘<a
                                    href="struct.html#MetadataElement"><span>metadata</span></a>’</span></span></li>
                    <li><a href="painting.html#TermPaintServerElement">ペイントサーバー要素</a><span class="expanding">
                            — <span class="element-name">‘<a
                                    href="pservers.html#LinearGradientElement"><span>linearGradient</span></a>’</span>,
                            <span class="element-name">‘<a
                                    href="pservers.html#RadialGradientElement"><span>radialGradient</span></a>’</span>,
                            <span class="element-name">‘<a
                                    href="pservers.html#PatternElement"><span>pattern</span></a>’</span></span></li>
                </ul><span class="element-name"><a href="linking.html#AElement"><span>a</span></a></span>, <span
                    class="element-name"><a
                        href="https://svgwg.org/specs/animations/#AnimateElement"><span>animate</span></a></span>, <span
                    class="element-name"><a href="interact.html#ScriptElement"><span>script</span></a></span>, <span
                    class="element-name"><a
                        href="https://svgwg.org/specs/animations/#SetElement"><span>set</span></a></span>, <span
                    class="element-name"><a href="styling.html#StyleElement"><span>style</span></a></span>, <span
                    class="element-name"><a href="text.html#TextElement"><span>tspan</span></a></span></dd>
            <dt>属性:</dt>
            <dd>
                <ul class="no-bullets">
                    <li><a href="struct.html#TermARIAAttribute">ARIA属性</a><span class="expanding"> — <span
                                class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-activedescendant"><span>aria-activedescendant</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-atomic"><span>aria-atomic</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-autocomplete"><span>aria-autocomplete</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-busy"><span>aria-busy</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-checked"><span>aria-checked</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-colcount"><span>aria-colcount</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-colindex"><span>aria-colindex</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-colspan"><span>aria-colspan</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-controls"><span>aria-controls</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-current"><span>aria-current</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-describedby"><span>aria-describedby</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-details"><span>aria-details</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-disabled"><span>aria-disabled</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-dropeffect"><span>aria-dropeffect</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-errormessage"><span>aria-errormessage</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-expanded"><span>aria-expanded</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-flowto"><span>aria-flowto</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-grabbed"><span>aria-grabbed</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-haspopup"><span>aria-haspopup</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-hidden"><span>aria-hidden</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-invalid"><span>aria-invalid</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-keyshortcuts"><span>aria-keyshortcuts</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-label"><span>aria-label</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-labelledby"><span>aria-labelledby</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-level"><span>aria-level</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-live"><span>aria-live</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-modal"><span>aria-modal</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-multiline"><span>aria-multiline</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-multiselectable"><span>aria-multiselectable</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-orientation"><span>aria-orientation</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-owns"><span>aria-owns</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-placeholder"><span>aria-placeholder</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-posinset"><span>aria-posinset</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-pressed"><span>aria-pressed</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-readonly"><span>aria-readonly</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-relevant"><span>aria-relevant</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-required"><span>aria-required</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-roledescription"><span>aria-roledescription</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-rowcount"><span>aria-rowcount</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-rowindex"><span>aria-rowindex</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-rowspan"><span>aria-rowspan</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-selected"><span>aria-selected</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-setsize"><span>aria-setsize</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-sort"><span>aria-sort</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuemax"><span>aria-valuemax</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuemin"><span>aria-valuemin</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuenow"><span>aria-valuenow</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuetext"><span>aria-valuetext</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="struct.html#RoleAttribute"><span>role</span></a>’</span></span></li>
                    <li><a href="struct.html#TermConditionalProcessingAttribute">条件付き処理属性</a><span class="expanding"> —
                            <span class="attr-name">‘<a
                                    href="struct.html#RequiredExtensionsAttribute"><span>requiredExtensions</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="struct.html#SystemLanguageAttribute"><span>systemLanguage</span></a>’</span></span>
                    </li>
                    <li><a href="struct.html#TermCoreAttribute">コア属性</a><span class="expanding"> — <span
                                class="attr-name">‘<a href="struct.html#IDAttribute"><span>id</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="struct.html#SVGElementTabindexAttribute"><span>tabindex</span></a>’</span>,
                            <span class="attr-name">‘<a href="struct.html#LangAttribute"><span>lang</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>, <span
                                class="attr-name">‘<a href="styling.html#ClassAttribute"><span>class</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="styling.html#StyleAttribute"><span>style</span></a>’</span></span></li>
                    <li><a
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers">グローバルイベント属性</a><span
                            class="expanding"> — <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncancel</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncanplay</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncanplaythrough</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onchange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onclick</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onclose</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncuechange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondblclick</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondrag</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragend</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragenter</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragexit</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragleave</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragover</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragstart</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondrop</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondurationchange</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onemptied</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onended</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onerror</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onfocus</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oninput</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oninvalid</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onkeydown</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onkeypress</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onkeyup</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onload</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onloadeddata</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onloadedmetadata</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onloadstart</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmousedown</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseenter</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseleave</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmousemove</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseout</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseover</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseup</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmousewheel</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onpause</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onplay</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onplaying</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onprogress</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onratechange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onreset</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onresize</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onscroll</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onseeked</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onseeking</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onselect</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onshow</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onstalled</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onsubmit</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onsuspend</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ontimeupdate</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ontoggle</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onvolumechange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onwaiting</span></a>’</span></span></li>
                    <li><a
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#documentandelementeventhandlers">ドキュメント要素イベント属性</a><span
                            class="expanding"> — <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncopy</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncut</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onpaste</span></a>’</span></span></li>
                    <li><a href="interact.html#EventAttributes">グラフィックスイベント属性</a><span class="expanding"> —
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onfocusin</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onfocusout</span></a>’</span></span></li>
                    <li><a href="styling.html#TermPresentationAttribute">プレゼンテーション属性</a><span class="expanding"> —
                        </span></li>
                    <li><span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span></li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span></li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextElementLengthAdjustAttribute"><span>lengthAdjust</span></a>’</span>
                    </li>
                </ul>
            </dd>
            <dt>DOMインターフェース:</dt>
            <dd>
                <ul class="no-bullets">
                    <li><a class="idlinterface" href="text.html#InterfaceSVGTSpanElement">SVGTSpanElement</a></li>
                </ul>
            </dd>
        </dl>
    </div>

    <h3 id="TSpanAttributes" class="heading">11.2.1. 属性<a class="self-link" href="#TSpanAttributes"></a></h3>

    <dl class="attrdef-list-svg2">

        <dt>
            <table class="attrdef def">
                <tr>
                    <th>名前</th>
                    <th>値</th>
                    <th>初期値</th>
                    <th>アニメーション可能</th>
                </tr>
                <tr>
                    <td><dfn id="TextElementXAttribute" data-dfn-type="element-attr" data-dfn-for="text"
                            data-export="">x</dfn>, <dfn id="TextElementYAttribute" data-dfn-type="element-attr"
                            data-dfn-for="text" data-export="">y</dfn></td>
                    <td>[ [ <a
                            href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a>
                        | <a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a> ]+ ]#</td>
                    <td><span class="element-name">‘<a
                                href="text.html#TextElement"><span>text</span></a>’</span>の場合は0;<br /> <span
                            class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>の場合は(なし)
                    </td>
                    <td>はい</td>
                </tr>
            </table>
        </dt>
        <dd>
            <p>
                単一の<a
                    href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a>が指定された場合、その値はこの要素またはその子孫内の最初の文字に対応するグリフを描画するための<a
                    href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>の新しい絶対X(Y)座標を表します。
            </p>
            <p>
                カンマまたは空白区切りの<var>n</var>個の<a
                    href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a>が指定された場合、それぞれの値はこの要素またはその子孫内の最初の<var>n</var>個の<a
                    href="text.html#TermAddressableCharacter">アドレス可能文字</a>に対応するグリフを描画するための<a
                    href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>の新しい絶対X(Y)座標を表します。
            </p>
            <p>
                文字数より多く<a href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a>が指定された場合、余分な<a
                    href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a>はグリフ位置決めに影響しません。
            </p>
            <p>
                文字数が<a href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a>より多い場合、または<span
                    class="element-name">‘<a
                        href="text.html#TextElement"><span>tspan</span></a>’</span>に属性が指定されていない場合、追加の文字については以下の通りです：
            </p>
            <ol style="list-style-type: lower-alpha">
                <li>祖先の<span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>または<span
                        class="element-name">‘<a
                            href="text.html#TextElement"><span>tspan</span></a>’</span>要素が、その文字に対して<span
                        class="attr-name">‘x’</span>（<span
                        class="attr-name">‘y’</span>）属性で絶対値を指定していれば（最も近い祖先が優先）、その絶対座標がその文字の開始座標として使われる。そうでなければ、</li>
                <li>
                    グリフ描画用の開始座標は、現在の<span class="element-name">‘<a
                            href="text.html#TextElement"><span>text</span></a>’</span>要素で直前に描画されたグリフの<a
                        href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>座標となる。
                </li>
            </ol>
            <p class="note">
                SVG 2では<span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>と<span
                    class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>の<span
                    class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>および<span
                    class="attr-name">‘<a
                        href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性はプレゼンテーション属性ではなく、CSSで設定できません。将来のSVGバージョンで変更される可能性があります。
            </p>
        </dd>

        <dt>
            <table class="attrdef def">
                <tr>
                    <th>名前</th>
                    <th>値</th>
                    <th>初期値</th>
                    <th>アニメーション可能</th>
                </tr>
                <tr>
                    <td><dfn id="TextElementDXAttribute" data-dfn-type="element-attr" data-dfn-for="text"
                            data-export="">dx</dfn>, <dfn id="TextElementDYAttribute" data-dfn-type="element-attr"
                            data-dfn-for="text" data-export="">dy</dfn></td>
                    <td>[ [ <a
                            href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a>
                        | <a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a> ]+ ]#</td>
                    <td>(なし)</td>
                    <td>はい</td>
                </tr>
            </table>
        </dt>
        <dd>
            <p>
                単一の<a
                    href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a>が指定された場合、この値はこの要素またはその子孫内の最初の文字に対応するグリフを描画するための<a
                    href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>の新しい相対X(Y)座標を表します。最初の文字グリフが描画される前に、<a
                    href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>が現在のユーザー座標系のx軸(y軸)方向に<a
                    href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a>だけシフトされます。
            </p>
            <p>
                カンマまたは空白区切りの<var>n</var>個の<a
                    href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a>が指定された場合、それぞれの値はこの要素またはその子孫内の最初の<var>n</var>個の<a
                    href="text.html#TermAddressableCharacter">アドレス可能文字</a>に対応するグリフ描画前の<a
                    href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>のx軸(y軸)方向への増分シフトを表します。つまり、各文字のグリフを描画する前に、直前の文字のグリフ描画による<a
                    href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>が<a
                    href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a>だけシフトします。
            </p>
            <p>
                文字数より多く<a href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a>が指定された場合、余分な値はグリフ位置決めに影響しません。
            </p>
            <p>
                文字数が<a
                    href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a>より多い場合、または属性が指定されていない場合、追加の文字については以下の通りです：
            </p>
            <ol style="list-style-type: lower-alpha">
                <li>
                    祖先の<span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>または<span
                        class="element-name">‘<a
                            href="text.html#TextElement"><span>tspan</span></a>’</span>要素がその文字に対して<span
                        class="attr-name">‘dx’</span>（<span class="attr-name">‘dy’</span>）属性で相対座標を指定していれば（最も近い祖先が優先）、<a
                        href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>がその分だけx軸(y軸)方向にシフトします。そうでなければ、
                </li>
                <li>
                    x軸(y軸)方向への追加シフトは行われません。
                </li>
            </ol>
        </dd>

        <dt>
            <table class="attrdef def">
                <tr>
                    <th>名前</th>
                    <th>値</th>
                    <th>初期値</th>
                    <th>アニメーション可能</th>
                </tr>
                <tr>
                    <td><dfn id="TextElementRotateAttribute" data-dfn-type="element-attr" data-dfn-for="text"
                            data-export="">rotate</dfn></td>
                    <td>[ <a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a>+ ]#</td>
                    <td>(なし)</td>
                    <td>はい（加算不可）</td>
                </tr>
            </table>
        </dt>
        <dd>
            <p>
                この要素内の各文字に対応するすべてのグリフに適用される、<a href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>を中心とした補足回転（度単位）です。
            </p>
            <p>
                カンマまたは空白区切りの<a
                    href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a>リストが指定された場合、最初の値は最初の文字に、2番目は2番目の文字に…と対応するグリフへの補足回転を表します。
            </p>
            <p>
                文字数より多く<a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a>が指定された場合、余分な値は無視されます。
            </p>
            <p>
                文字数が<a
                    href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a>より多い場合、追加の文字には最後の値で指定された回転を使わなければなりません。
            </p>
            <p>
                属性が指定されておらず、<span class="element-name">‘<a
                        href="text.html#TextElement"><span>tspan</span></a>’</span>要素の祖先が<span class="attr-name">‘<a
                        href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>属性で補足回転を指定していれば（最も近い祖先が優先）、指定された補足回転がその文字に適用されます。祖先属性でも文字数が指定値を超えた場合、追加文字には最後の値を使う必要があります。
            </p>
            <p>
                この補足回転は、グリフ描画時の<a href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>の変更規則には影響せず、<a
                    href="text.html#TextLayoutPath">パス上のテキスト</a>や、<a class="property"
                    href="https://www.w3.org/TR/css3-writing-modes/#text-orientation">text-orientation</a>、<a
                    class="property"
                    href="text.html#GlyphOrientationHorizontalProperty">glyph-orientation-horizontal</a>、<a
                    class="property"
                    href="text.html#GlyphOrientationVerticalProperty">glyph-orientation-vertical</a>による回転に追加されます。
            </p>
        </dd>

        <dt>
            <table class="attrdef def">
                <tr>
                    <th>名前</th>
                    <th>値</th>
                    <th>初期値</th>
                    <th>アニメーション可能</th>
                </tr>
                <tr>
                    <td><dfn id="TextElementTextLengthAttribute" data-dfn-type="element-attr" data-dfn-for="text"
                            data-export="">textLength</dfn></td>
                    <td><a href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a>
                        | <a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a></td>
                    <td>下記参照</td>
                    <td>はい</td>
                </tr>
            </table>
        </dt>
        <dd>
            <p>
                この要素内の文字データに対応するすべてのadvance値（グリフのadvance値（横・縦）、<a class="property"
                    href="https://www.w3.org/TR/css-text-3/#letter-spacing-property">letter-spacing</a>や<a
                    class="property"
                    href="https://www.w3.org/TR/css-text-3/#word-spacing-property">word-spacing</a>プロパティの効果、<span
                    class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>や<span
                    class="attr-name">‘<a
                        href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>属性による調整など）の合計を著者が計算値として指定します。この値はユーザーエージェントの計算値と著者の計算値を調整するために使われます。
            </p>
            <p>
                この属性の目的は、双方向並べ替え後の視覚的描画順で、最初と最後の描画グリフを厳密に揃えることです。最後の描画文字（双方向並べ替え後）は、通常グリフadvance以外の追加文字間スペースは無視され、<span
                    class="attr-name">‘<a
                        href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>の長さにフィットさせるためにテキスト文字列を拡張/圧縮する量をユーザーエージェントが決定します。
            </p>
            <p>
                属性<span class="attr-name">‘<a
                        href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>が要素とその祖先の両方に指定されている場合、この要素内の文字データの調整はこの要素でのみ制御され、他の同じ祖先内の内容とは調整比率が異なる場合があります。ユーザーエージェントは、他の祖先要素内の内容のadvance値合計を、祖先要素のadvance値とこの要素のadvance値の差分とみなします。
            </p>
            <p class="note">
                この属性はテキストの縮小や拡大などの効果を得るためのものではありません。
            </p>
            <p>
                負の値はエラーです（<a href="conform.html#ErrorProcessing">エラー処理</a>参照）。
            </p>
            <p>
                <span class="attr-name">‘<a
                        href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>属性は、<a
                    href="text.html#TermWrappingArea">折返し領域</a>が<a class="property"
                    href="text.html#TextShapeInside">shape-inside</a>や<a class="property"
                    href="text.html#InlineSizeProperty">inline-size</a>プロパティで定義されていない場合のみ適用されます。また、<a class="property"
                    href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>値が<span
                    class="prop-value">pre</span>または<span class="prop-value">pre-line</span>による強制改行がある<span
                    class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>や<span
                    class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>要素にも適用されません。
            </p>
            <p>
                <span class="element-name">‘<a
                        href="text.html#TextElement"><span>text</span></a>’</span>要素内で属性がどこにも指定されていない場合、著者の計算値がユーザーエージェントの計算値と一致したものとみなされ、advance調整は行われません。DOMへの<a
                    href="types.html#TermReflect">反映</a>のための初期値は、現在のユーザーエージェントが計算した長さ（暗黙の<a
                    href="coords.html#TermUserUnits">ユーザー単位</a>で表現）です。
            </p>
        </dd>

        <dt>
            <table class="attrdef def">
                <tr>
                    <th>名前</th>
                    <th>値</th>
                    <th>初期値</th>
                    <th>アニメーション可能</th>
                </tr>
                <tr>
                    <td><dfn id="TextElementLengthAdjustAttribute" data-dfn-type="element-attr" data-dfn-for="text"
                            data-export="">lengthAdjust</dfn></td>
                    <td>spacing | spacingAndGlyphs</td>
                    <td>spacing</td>
                    <td>はい</td>
                </tr>
            </table>
        </dt>
        <dd>
            <dl class="attrdef-values">

                <dt>spacing</dt>
                <dd>
                    advance値のみ調整します。グリフ自体は伸縮されません。
                </dd>

                <dt>spacingAndGlyphs</dt>
                <dd>
                    advance値を調整し、グリフ自体も1軸方向（<a href="text.html#TermInlineBaseDirection">インライン基本方向</a>に平行）に伸縮します。
                </dd>
            </dl>

            <p>
                ユーザーエージェントはテキストの開始・終了位置を正しく合わせる必要がありますが、中間グリフの位置は予測できません。ユーザーエージェントは最適な組版のために高度なアルゴリズムを使い、テキスト文字列の伸縮と開始・終了位置のバランスをとる場合があります。
            </p>
            <p>
                <var>n</var>文字のテキスト列の場合、advance値の調整は通常<var>n</var>−1文字にのみ行われ（<span class="attr-name">‘<a
                        href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>属性の説明参照）、グリフの伸縮は全<var>n</var>文字に適用されます。
            </p>
        </dd>

    </dl>

    <h3 id="TSpanNotes" class="heading">11.2.2. 'x'、'y'、'dx'、'dy'、'rotate'に関する注意事項<a class="self-link"
            href="#TSpanNotes"></a></h3>

    <p>
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素および<span
            class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>要素の<span
            class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、<span
            class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、<span
            class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、<span
            class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>、<span
            class="attr-name">‘<a
                href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>は、個々のグリフを精密に配置する必要がある高度な組版シナリオで有用です。これらの属性は、文字間の微細な位置調整や、テキストの一部を新しい行の視覚効果のために移動するなど（SVG
        1.1互換）、大きな位置調整にも役立ちます。なお、<span class="attr-name">‘<a
                href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、<span class="attr-name">‘<a
                href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、<span class="attr-name">‘<a
                href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、<span class="attr-name">‘<a
                href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>、<span class="attr-name">‘<a
                href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>属性は、自動折返しテキストの場合は無視されます（ただし<a
            class="property" href="text.html#InlineSizeProperty">inline-size</a>プロパティで<a
            href="text.html#TermContentArea">コンテンツ領域</a>が指定された場合の初期<a
            href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>は除く）。
    </p>

    <p class="annotation" data-issue="2" id="issue2"><a class="self-link" href="#issue2"></a>
        2015年シドニーF2Fで、自動折返しテキストでは'dx'、'dy'、'rotate'を無視することが決定されました。（技術的には適用は難しくありませんが、実用性が低いと判断されました。）
    </p>

    <p>
        組版の高度な制御で微細な位置調整が必要な場合、SVGコンテンツ制作者は文書閲覧者全員に必要なフォントが利用可能となるよう配慮する必要があります（例：SVGフォントや同じWebサイトに保存された代替WebFont形式として必要なフォントデータを用意するなど）。また、閲覧ソフトウェアが期待通りにフォントを処理することも重要です（システムごとに機能やレイアウト機構が大きく異なります）。SVGコンテンツが特定のフォントやビューア向けに<span
            class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、<span
            class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、<span
            class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、<span
            class="attr-name">‘<a
                href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>属性値を指定していて、これらの条件を満たさない場合、テキストの表示品質が低下することがあります。
    </p>
    <p>
        以下は、<span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、<span
            class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、<span
            class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、<span
            class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>、<span
            class="attr-name">‘<a
                href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>属性が数値リストを持つ場合の追加規則です：
    </p>

    <ul>
        <li>
            単一文字が単一グリフに対応する場合：この場合、<var>n</var>番目の値は<var>n</var>番目の文字に対応するグリフに<span class="attr-name">‘<a
                    href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、<span class="attr-name">‘<a
                    href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、<span class="attr-name">‘<a
                    href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、<span class="attr-name">‘<a
                    href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>、<span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>が適用されます。
        </li>

        <li>
            単一文字が複数グリフに対応する場合（例：アクセントグリフがベースグリフ上に配置される場合）：この場合、<var>n</var>番目の値は1つ目のグリフを描画する前に適用されます（<a
                href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>を調整）。回転変換は、<var>n</var>番目の<span
                class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>値がグリフ群と文字に対応するadvance値に対してグループ単位で適用されます（つまり、一時的に回転した座標系を作り、その座標系でグリフを描画）。
        </li>

        <li>
            複数文字が単一グリフに対応する場合（例：合字の場合）：<var>n</var>番目と(<var>n</var>+1)番目の文字が単一グリフに対応している場合、<var>n</var>番目の値はグリフ描画時に適用されます。(<var>n</var>+1)番目の値は<span
                class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、<span
                class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、<span
                class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>については無視されます（例外：リストの最終<span
                class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>値は後続文字にも適用）、<span
                class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>と<span
                class="attr-name">‘<a
                    href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>は後続文字（(<var>n</var>+2)番目）があれば、そのグリフ描画前に<a
                href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>を指定量だけ移動します。
        </li>

        <li>
            複数文字が複数グリフに対応する場合（例：3文字が2グリフに対応し、1つ目のグリフが1文字目と2文字目の半分、2つ目のグリフが2文字目残りと3文字目を表すような場合）：この場合、<var>n</var>番目の値は1つ目のグリフ描画前に適用されます（<a
                href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>を調整）。回転変換は<var>n</var>番目の<span
                class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>値が2つのグリフと1つ目のadvance値にグループ単位で適用されます。(<var>n</var>+1)番目、(<var>n</var>+2)番目の値は<span
                class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、<span
                class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、<span
                class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>については適用されません（例外：リスト最終の<span
                class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>値は後続文字にも適用）、(<var>n</var>+1)、(<var>n</var>+2)番目の<span
                class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、<span
                class="attr-name">‘<a
                    href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>は後続文字（(<var>n</var>+3)番目）があれば、そのグリフ描画前に<a
                href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>を指定量だけ移動します。
        </li>

        <li>
            双方向性との関係：
            テキストは二段階処理され、まず双方向テキストが左から右の文字列に再並べ替えされ、その後レイアウト処理されます。<span class="element-name">‘<a
                    href="text.html#TextElement"><span>tspan</span></a>’</span>要素内の文字データが並べ替えられる場合、<span
                class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、<span
                class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、<span
                class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、<span
                class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>、<span
                class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>の対応する要素も再並べ替えされ、対応関係を維持します。例えば、以下の<span
                class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>要素があるとします：
            <div style="margin-left: 2em">
                <code>&lt;tspan dx="11 12 13 14 15 0 21 22 23 0 31 32 33 34 35 36">Latin and Hebrew&lt;/tspan></code>
            </div>
            "Hebrew"が右から左で描画される場合、最初に文字データと<span class="attr-name">‘<a
                    href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>リストの値も再並べ替えされ、テキストは"Latin and
            werbeH"、dx値リストは"11 12 13 14 15 0 21 22 23 0 36 35 34 33 32 31"となります。この並べ替え後、標準の左から右レイアウト規則でグリフが配置されます。
        </li>
    </ul>

    <p>
        <span class="example-ref">例 tspan04</span>では、<span class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span>要素の<span class="attr-name">‘<a
                href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>属性を使ってグリフを回転させています。この例では、<span
            class="attr-name">‘<a
                href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>属性指定値より文字数が多い場合、最後のrotate値が残りの文字全てに適用されます。
    </p>

    <div class="example">
        <pre class="xml">﻿&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="10cm" height="3cm" viewBox="0 0 1000 300"
  xmlns="http://www.w3.org/2000/svg" version="1.1">
  &lt;desc>
    例 tspan04 - rotate値の数が文字列の文字数より少ない場合。
  &lt;/desc>
  &lt;text font-family="Verdana" font-size="55" fill="blue" >
    &lt;tspan x="250" y="150" rotate="-30,0,30">
      Hello, out there
    &lt;/tspan>
  &lt;/text>
  &lt;!-- 'rect'要素でビューポートのアウトラインを表示 -->
  &lt;rect x="1" y="1" width="998" height="298"
  fill="none" stroke="blue" stroke-width="2" />
&lt;/svg></pre>
        <div class="figure"><img alt="例 tspan04 — tspan要素内の文字の単純な回転"
                src="https://www.w3.org/TR/SVG2/images/text/tspan04.png" />
            <p class="caption">例 tspan04</p>
        </div>
        <p class="view-as-svg"><a href="https://www.w3.org/TR/SVG2/images/text/tspan04.svg">この例をSVGとして表示
                （SVG対応ブラウザのみ）</a></p>
    </div>

    <p>
        <span class="example-ref">例 tspan05</span>では、<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素およびほとんどの子<span class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span>要素に<span class="attr-name">‘<a
                href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>属性を指定し、グリフ回転を行います。この例はrotate属性の伝播を示します。
    </p>

    <div class="example">
        <pre class="xml">﻿&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="100%" height="100%" viewBox="0 0 500 120"
  xmlns="http://www.w3.org/2000/svg" version="1.1">
  &lt;desc>
    例 tspan05 - ネストしたtspan要素への回転値伝播。
  &lt;/desc>
  &lt;text id="parent" font-family="Arial, sans-serif" font-size="32" fill="red" x="40" y="40"
    rotate="5,15,25,35,45,55">
    Not

    &lt;tspan id="child1" rotate="-10,-20,-30,-40" fill="orange">
      all characters

      &lt;tspan id="child2" rotate="70,60,50,40,30,20,10" fill="yellow">
        in

        &lt;tspan id="child3">
          the
        &lt;/tspan>
      &lt;/tspan>

      &lt;tspan id="child4" fill="orange" x="40" y="90">
        text
      &lt;/tspan>

      have a
    &lt;/tspan>

    &lt;tspan id="child5" rotate="-10" fill="blue">
      specified
    &lt;/tspan>

    rotation
  &lt;/text>

  &lt;!-- 'rect'要素でビューポートのアウトラインを表示 -->
  &lt;rect x="1" y="1" width="498" height="118" fill="none"
        stroke="blue" stroke-width="2" />
&lt;/svg></pre>
        <div class="figure"><img alt="例 tspan05 — ネストしたtspan要素への回転値伝播"
                src="https://www.w3.org/TR/SVG2/images/text/tspan05.png" />
            <p class="caption">例 tspan05</p>
        </div>
        <p class="view-as-svg"><a href="https://www.w3.org/TR/SVG2/images/text/tspan05.svg">この例をSVGとして表示
                （SVG対応ブラウザのみ）</a></p>
    </div>

    <p>
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素内の赤色テキストの回転：
    </p>

    <ul>
        <li>
            <span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>値によりテキスト<em>"Not
                "</em>の各文字がそれぞれ5、15、25、35度回転します。
        </li>
        <li>
            <span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>値は、"Not"の後のスペース、"child1"と"child5"の間のスペース、および"rotation"の直前のスペースにも適用されます。
        </li>
        <li>
            次の<span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>値は45、その後55です。親<span
                class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素のrotate値は、子<span
                class="element-name">‘<a
                    href="text.html#TextElement"><span>tspan</span></a>’</span>のテキストが処理されるごとに増分されます。
        </li>
        <li>
            次の<span class="element-name">‘<a
                    href="text.html#TextElement"><span>tspan</span></a>’</span>要素はrotate値を指定しているため、親のrotate値はリストの次の値（使用はされない）が各文字処理ごとに更新されます。最後の値（55度）に到達するまで続きます。
        </li>
        <li>
            最後の<span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>値（55度）は、"rotation"の全文字に適用されます。
        </li>
    </ul>

    <p>
        "child1"の<span class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span>要素内のオレンジ色テキストの回転：
    </p>

    <ul>
        <li>
            <span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>値により、"all characters
            "の最初の4文字がそれぞれ-10、-20、-30、-40度回転します。
        </li>
        <li>
            最後の-40度が現在のrotate値となり、以降の文字や子<span class="element-name">‘<a
                    href="text.html#TextElement"><span>tspan</span></a>’</span>要素（rotate未指定）にも適用されます。
        </li>
        <li>
            "child4"の<span class="element-name">‘<a
                    href="text.html#TextElement"><span>tspan</span></a>’</span>要素はrotate値未指定のため、祖先（"child1"）の現在値（-40度）が適用され、"text"の全文字が-40度回転します。
        </li>
        <li>
            最後の-40度は、"have a"の全文字にも適用されます。
        </li>
        <li>
            "child2"と"child4"の間のスペース、および"have a"の直前のスペースにもrotate値が適用されます。
        </li>
    </ul>

    <p>
        "child2"の<span class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span>要素内の黄色テキストの回転：
    </p>

    <ul>
        <li>
            <span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>値により、黄色テキスト"in
            "の各文字がそれぞれ70、60、50度回転します。
        </li>
        <li>
            "in"の後のスペースにもrotate値が適用されます。
        </li>
        <li>
            文字数より多くrotate値が指定されているため、余分なrotate値はrotate未指定の"child3"要素に適用されます。
        </li>
        <li>
            "child3"内の"the"はそれぞれ40、30、20度回転します。
        </li>
    </ul>

    <p>青色テキスト（"child5"の<span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>要素）の回転：
    </p>

    <ul>
        <li>
            <span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>値により、"specified"の文字全てが-10度回転します。
        </li>
        <li>
            1つのrotate値のみ指定されているため、<span class="element-name">‘<a
                    href="text.html#TextElement"><span>tspan</span></a>’</span>要素の全文字に適用されます。
        </li>
    </ul>

    <p>
        下図は、<span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素にネストされた<span
            class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>要素への回転値伝播を示しています：
    </p>

    <img alt="回転値伝播の図" src="https://www.w3.org/TR/SVG2/images/text/tspan05-diagram.png" width="528" height="918" />



    <h2 id="TextLayout" class="heading">11.3. テキストレイアウト ― はじめに<a class="self-link" href="#TextLayout"></a>
    </h2>

    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2 要件:</th>
                <td>SVG Tiny 1.2からのテキストレイアウト改善点を含めること。</td>
            </tr>
            <tr>
                <th>決議:</th>
                <td><a href="https://www.w3.org/2012/02/02-svg-minutes.html#item10">SVG 2はSVG Tiny
                        1.2の文字・グリフ、テキストレイアウト、テキスト選択、テキスト検索の改善点を含める。</a></td>
            </tr>
            <tr>
                <th>目的:</th>
                <td>テキストレイアウトの説明をより明確にするため（機能変更なし）。</td>
            </tr>
            <tr>
                <th>担当者:</th>
                <td>Chris (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3236">ACTION-3236</a>)</td>
            </tr>
        </table>
    </div>

    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2 要件:</th>
                <td>図形内テキストのサポート。</td>
            </tr>
            <tr>
                <th>決議:</th>
                <td><a href="https://www.w3.org/2011/11/17-svg-irc#T22-04-11">SVG 2はCSS互換の自動テキスト折返しを要求する。</a></td>
            </tr>
            <tr>
                <th>目的:</th>
                <td>フローチャート等での図形内テキスト。</td>
            </tr>
            <tr>
                <th>担当者:</th>
                <td>Tav（アクションなし）</td>
            </tr>
        </table>
    </div>

    <p>
        このセクションではSVGテキストレイアウトの概要を簡単に説明します。詳細は後続の各章で扱います。
    </p>

    <p>
        SVGのテキストレイアウトは複数段階のプロセスで、<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素のサブツリーとそのプロパティ値を入力とし、各<a
            href="text.html#TermTextContentElement">テキストコンテンツ要素</a>の座標系に描画するグリフ列とその位置を生成します。
    </p>

    <p>
        まず、<span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素とその子孫は、CSSに従って<a
            href="text.html#TermContentArea">コンテンツ領域</a>または<a
            href="text.html#TermWrappingArea">折返し領域</a>内にレイアウトされます。このとき、<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>はブロック要素、<span class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span>、<span class="element-name">‘<a
                href="text.html#TextPathElement"><span>textPath</span></a>’</span>、<span class="element-name">‘<a
                href="linking.html#AElement"><span>a</span></a>’</span>はインライン要素として扱われます。このレイアウトは、本章で説明される段落レベルやフォント関連のCSSプロパティを考慮します。
    </p>

    <p>
        <a href="text.html#TermContentArea">コンテンツ領域</a>は、<a class="property"
            href="text.html#InlineSizeProperty">inline-size</a>プロパティを設定するか、SVG <a
            href="shapes.html#TermShapeElement">図形</a>を定義・参照する<a class="property"
            href="text.html#TextShapeInside">shape-inside</a>プロパティを設定することで明示的に宣言できます。宣言されていない場合は、幅・高さとも無限大の矩形がデフォルトになります。
    </p>

    <p>
        次に、<span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、<span
            class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、<span
            class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、<span
            class="attr-name">‘<a
                href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>属性による位置指定がCSSレイアウト処理後のグリフ位置に適用されます。

        どの変換が許可されるかは、<a
            href="text.html#TermContentArea">コンテンツ領域</a>が明示的に宣言されているか否かで異なります。宣言がなければ<em>整形済み</em>テキストのレイアウト規則、宣言があれば<em>自動折返し</em>テキストのレイアウト規則が適用されます。
    </p>

    <p>
        さらに、必要に応じて<a class="property" href="text.html#TextAnchorProperty">text-anchor</a>プロパティの効果が適用されます。
    </p>

    <p>
        最後に、<span class="element-name">‘<a
                href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素によるグリフのレイアウトが行われ、<em>整形済み</em>テキストは<em>パス上のテキスト</em>へ変換されます。
    </p>

    <p>
        各テキストレイアウト種類の例：
    </p>

    <dl>
        <dt>整形済み：</dt>
        <dd>短い文字列（ラベル等）やグリフの厳密な配置が必要な場合（手動カーニングのタイトル等）。

            <div class="example">
                <p>複数行の整形済みテキストの例。</p>

                <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="100" viewBox="0 0 300 100">

     &lt;text x="20" y="45" style="font: 24px sans-serif;">
       Example of multi-line,
       &lt;tspan x="20" y="75">pre-formatted text.&lt;/tspan>
     &lt;/text>

&lt;/svg>
</pre>

                <div class="figure">
                    <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-preformatted.svg"
                        alt="2行の整形済みテキスト画像。" />
                    <p class="caption">整形済みテキスト。<span class="element-name">‘<a
                                href="text.html#TextElement"><span>tspan</span></a>’</span>要素で複数行テキストを実現。</p>
                </div>
            </div>

        </dd>

        <dt>折返しテキスト：</dt>
        <dd>長い文字列で自動折返しが必要な場合。
            <div class="example">
                <p>自動折返しテキストの例。</p>

                <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="100" viewBox="0 0 300 100">

  &lt;text x="20" y="45" style="font: 24px sans-serif; inline-size: 250px;">
    Example of text auto-wrapped.&lt;/text>

&lt;/svg>
</pre>

                <div class="figure">
                    <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-wrapped.svg"
                        alt="2行に自動折返しされたテキスト画像。" />
                    <p class="caption">自動折返しテキスト。<a class="property" href="text.html#InlineSizeProperty">inline-size</a>
                        プロパティが高さ無限（薄青色で表示）の矩形コンテンツ領域を定義。</p>
                </div>
            </div>

        </dd>

        <dt>パス上のテキスト：</dt>
        <dd>指定したパスに沿ってテキストを配置する場合。
            <div class="example">
                <p>パス上のテキスト例。</p>

                <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="100" viewBox="0 0 300 100">

  &lt;path id="MyPath" stroke="lightblue" fill="none"
	d="M 50,50 C 100,0 200,100 250,50"/>

  &lt;text style="font: 24px sans-serif;">
    &lt;textPath href="#MyPath">Text on a path.&lt;/textPath>
  &lt;/text>

&lt;/svg>
</pre>

                <div class="figure">
                    <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-path.svg"
                        alt="パスに沿って配置されたテキスト画像。" />
                    <p class="caption">パス上のテキスト。<span class="element-name">‘<a
                                href="text.html#TextPathElement"><span>textPath</span></a>’</span>
                        要素が<span class="element-name">‘<a
                                href="paths.html#PathElement"><span>path</span></a>’</span>要素（薄青色）を参照。</p>
                </div>
            </div>

        </dd>
    </dl>

    <p class="note">
        SVG 2では、<a href="text.html#TermContentArea">コンテンツ領域</a>指定により、矩形や他の図形内で自動テキスト折返しが可能になりました。
        SVGの折返しテキスト設計は、CSSのテキスト折返しとの高い互換性を目指し、CSSテキスト折返しをサポートするレンダラがSVGテキスト折返しも容易に実装できるよう配慮されています（HTML非互換SVGレンダラにHTML実装を要求しない）。
        SVGとCSSの折返しにはいくつかの違いがあります。最も重要なのは、SVGでは<a
            href="text.html#TermContentArea">コンテンツ領域</a>を明示的に指定する必要があり、CSS（ボックスモデル）で提供される自動有限（または半有限）領域はありません。
        また、SVGには改行を生成する&lt;p>&lt;/p>や&lt;br/>要素がなく、代わりに<a class="property"
            href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>プロパティの<span
            class="prop-value">pre</span>や<span class="prop-value">pre-line</span>値が改行を提供します。
        SVG折返しテキストは、SVG 1.1レンダラが折返しテキストをサポートしない場合も自然なフォールバックが可能です（<span class="attr-name">‘<a
                href="text.html#TextElementXAttribute"><span>x</span></a>’</span>や<span class="attr-name">‘<a
                href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性を<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>や<span class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span>要素で使用し、SVG 2レンダラは自動折返しテキストの場合これら属性を無視）。
    </p>

    <p class="note">
        SVGのテキストレイアウト機能は、一般的な用途を広くカバーするよう設計されています。より複雑なレイアウト（箇条書きリスト、表など）が必要な場合は、<span class="element-name">‘<a
                href="embedded.html#ForeignObjectElement"><span>foreignObject</span></a>’</span>要素内でXHTML等の他のXML名前空間でテキストを描画できます。
    </p>

    <h2 id="TextLayoutContentArea" class="heading">11.4. テキストレイアウト ― コンテンツ領域<a class="self-link"
            href="#TextLayoutContentArea"></a></h2>

    <p>
        <dfn>コンテンツ領域</dfn>は、<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素で<a class="property"
            href="text.html#InlineSizeProperty">inline-size</a>プロパティ、
        またはSVG<a href="shapes.html#TermShapeElement">図形</a>を定義・参照する<a class="property"
            href="text.html#TextShapeInside">shape-inside</a>プロパティを指定することで定義されます。
        <a href="text.html#TermContentArea">コンテンツ領域</a>が与えられない場合、<a
            href="text.html#TermContentArea">コンテンツ領域</a>は幅・高さとも無限大の矩形がデフォルトとなります（<a
            href="text.html#TextLayoutPre">整形済みテキスト</a>参照）。
        <a class="property" href="text.html#InlineSizeProperty">inline-size</a>プロパティと値が'none'以外の<a class="property"
            href="text.html#TextShapeInside">shape-inside</a>プロパティが両方指定された場合は、<a class="property"
            href="text.html#TextShapeInside">shape-inside</a>プロパティが優先されます。
    </p>

    <p id="TextLayoutWrappingArea">
        折返しテキストは<dfn>折返し領域</dfn>内にレイアウトされます。<a href="text.html#TermWrappingArea">折返し領域</a>は通常<a
            href="text.html#TermContentArea">コンテンツ領域</a>と同じです。
        <a class="property" href="text.html#TextShapeInside">shape-inside</a>プロパティで<a
            href="text.html#TermContentArea">コンテンツ領域</a>が定義された場合、<a href="text.html#TermWrappingArea">折返し領域</a>は<a
            class="property" href="text.html#TextShapeSubtract">shape-subtract</a>プロパティや<a class="property"
            href="text.html#TextShapePadding">shape-padding</a>プロパティの影響で小さくなることがあります。
        <a class="property" href="text.html#TextShapeSubtract">shape-subtract</a>プロパティ（および<a class="property"
            href="text.html#TextShapeMargin">shape-margin</a>プロパティ）は<dfn>折返しコンテキスト</dfn>を定義します。
        <a href="text.html#TermWrappingArea">折返し領域</a>は、<a href="text.html#TermContentArea">コンテンツ領域</a>を<a
            class="property" href="text.html#TextShapePadding">shape-padding</a>の距離だけ内側に入れ、
        さらに<a href="text.html#TermWrappingContext">折返しコンテキスト</a>を差し引くことで求められます。
    </p>
    <p>
        <a href="text.html#TermWrappingArea">折返し領域</a>が定義されると、テキストはCSSの規則（このセクションの特別な規則を含む）に従い、その折返し領域内にレイアウトされます。
    </p>

    <div class="note">
        <p>
            SVGとHTMLで同等の折返し領域を構築すること。折返し領域内のテキストは両者で同じように描画されます。
        </p>
        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-layout-svg.svg"
                alt="円と２つの半円で砂時計形状を作成し、テキストが円内で折返される例。左右の半円が円の一部領域を除外する。" />
            <p class="caption">
                SVGで<a href="text.html#TermWrappingArea">折返し領域</a>を定義する例。

                <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素は<a
                    class="property" href="text.html#TextShapeInside">shape-inside</a>プロパティと<a class="property"
                    href="text.html#TextShapeSubtract">shape-subtract</a>プロパティの両方を持ちます。
                <a class="property" href="text.html#TextShapeInside">shape-inside</a>プロパティは円を参照して<a
                    href="text.html#TermContentArea">コンテンツ領域</a>（紫の点線）を定義します。
                <a class="property" href="text.html#TextShapeSubtract">shape-subtract</a>プロパティは２つの半円を参照し、<a
                    href="text.html#TermWrappingContext">折返しコンテキスト</a>（緑の点線）を定義します。
                これを<a href="text.html#TermContentArea">コンテンツ領域</a>から差し引くことで<a
                    href="text.html#TermWrappingArea">折返し領域</a>（水色の線）が得られます。
            </p>
        </div>
        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-layout-html.svg"
                alt="円と２つの半円で砂時計形状を作成し、テキストが円内で折返される例。左右の半円が円の一部領域を除外する。" />
            <p class="caption">
                HTMLで<a href="text.html#TermWrappingArea">折返し領域</a>を定義する例。

                <q>wrapper</q>&lt;div>内に２つの<q>float</q>&lt;div>が含まれます。wrapper &lt;div>は矩形領域（紫実線）を定義し、その<a
                    class="property" href="text.html#TextShapeInside">shape-inside</a>プロパティが&lt;div>内の<a
                    href="text.html#TermContentArea">コンテンツ領域</a>（紫点線）を定義します。
                他２つの&lt;div>は左（緑実線）と右（ピンク実線）にfloatし、矩形の形状です。各floatは<a class="property"
                    href="https://www.w3.org/TR/css-shapes/#shape-outside-property">shape-outside</a>プロパティを持ち、
                それぞれの<a href="text.html#TermWrappingContext">折返しコンテキスト</a>（緑・ピンク点線）を定義します。両方のコンテキストを合わせて<a
                    href="text.html#TermContentArea">コンテンツ領域</a>から差し引くことで<a
                    href="text.html#TermWrappingArea">折返し領域</a>（水色の線）が定義されます。
            </p>
        </div>

    </div>

    <h3 id="InlineSize" class="heading">11.4.1. ‘<span class="property">inline-size</span>’プロパティ<a class="self-link"
            href="#InlineSize"></a></h3>

    <p class="annotation">
        'extent'は<a href="https://www.w3.org/2015/02/12-svg-minutes.html#action17">2015年2月12日</a>の決議で追加。
        'extent'は'width'および'height'属性を置き換え、2013年6月27日決議で追加。
        2015年6月11日<a href="https://www.w3.org/2015/06/11-svg-minutes.html#item09">Linkoping F2F</a>で
        'inline-size'プレゼンテーション属性に置換。
    </p>

    <p>
        <a class="property" href="text.html#InlineSizeProperty">inline-size</a>プロパティは<a
            href="text.html#TermWrappingArea">折返し領域</a>を矩形形状に設定できます。
        プロパティの算出値は横書きテキストの場合矩形の幅、縦書きテキストの場合高さを設定します。
        もう一方の寸法（横書きの場合高さ、縦書きの場合幅）は無限長です。値が0の場合は<a href="text.html#TermWrappingArea">折返し領域</a>の生成を無効化します。
    </p>

    <p>
        初期の<a href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>は、<span class="attr-name">‘<a
                href="text.html#TextElementXAttribute"><span>x</span></a>’</span>および<span class="attr-name">‘<a
                href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性で決まります（<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素または属性がない場合は最初の子<span
            class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>要素）。

        左から右のテキストの場合、初期<a href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>は矩形の左端です。右から左の場合は右端になります。

        縦書きテキストの場合、初期<a href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>は矩形の上端です。
    </p>

    <p>
        矩形（<a href="text.html#TermWrappingArea">折返し領域</a>）は<a class="property"
            href="text.html#TextAnchorProperty">text-anchor</a>プロパティでアンカーされ、
        <a href="text.html#TermWrappingArea">折返し領域</a>の端を使って開始・中央・終了位置を決定します。
    </p>

    <p class="note">
        <a class="property" href="text.html#InlineSizeProperty">inline-size</a>プロパティによるテキスト折返しは、
        SVGの整形済みテキストに対する拡張で、著者がテキストブロックの幅または高さの制限を与えるだけです。
        そのため、<span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、<span
            class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性と<a
            class="property" href="text.html#DirectionProperty">direction</a>、<a class="property"
            href="text.html#TextAnchorProperty">text-anchor</a>プロパティで最初の行の位置を決めます。
        完全な両端揃えが必要な場合は、<a class="property" href="text.html#TextShapeInside">shape-inside</a>プロパティで<a
            href="text.html#TermWrappingArea">折返し領域</a>を作成してください。
    </p>

    <table class="propdef def">
        <tr>
            <th>名前:</th>
            <td><dfn id="InlineSizeProperty" data-dfn-type="property" data-export="">inline-size</dfn></td>
        </tr>
        <tr>
            <th>値:</th>
            <td><a href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a></td>
        </tr>
        <tr>
            <th>初期値:</th>
            <td>0</td>
        </tr>
        <tr>
            <th>適用対象:</th>
            <td><span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素</td>
        </tr>
        <tr>
            <th>継承:</th>
            <td>いいえ</td>
        </tr>
        <tr>
            <th>パーセンテージ:</th>
            <td>現在のSVGビューポートの幅（横書きテキストの場合）または高さ（縦書きテキストの場合）に対する割合（<a href="coords.html#Units">単位</a>参照）</td>
        </tr>
        <tr>
            <th>メディア:</th>
            <td>視覚</td>
        </tr>
        <tr>
            <th>算出値:</th>
            <td>絶対長さまたはパーセンテージ</td>
        </tr>
        <tr>
            <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>:</th>
            <td>はい</td>
        </tr>
    </table>

    <div class="example">
        <p><a class="property" href="text.html#InlineSizeProperty">inline-size</a>を使った横書きテキストの折返し例。</p>

        <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="100" viewBox="0 0 300 100">

  &lt;text x="50" y="30" style="font: 20px sans-serif; inline-size: 200px">
    This text wraps at 200 pixels.
  &lt;/text>

&lt;/svg>
</pre>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-wrap-horizontal.svg"
                alt="英語テキストが２行に折返された画像。" />
            <p class="caption">
                横書きテキストの折返し。水色の線が<a href="text.html#TermContentArea">コンテンツ領域</a>の限界を示します。コンテンツ領域の高さは無限です。赤い点は初期<a
                    href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>です。
            </p>
        </div>
    </div>

    <div class="example">
        <p><a class="property" href="text.html#InlineSizeProperty">inline-size</a>を使った右から左横書きテキストの折返し例。</p>

        <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="100" viewBox="0 0 300 100">

  &lt;text x="250" y="30"
	style="font: 20px PakType Naqsh; inline-size: 200px; direction: rtl;">
    هذا النص يلتف في 200 بكسل.&lt;/text>

&lt;/svg>
</pre>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-wrap-horizontal-rl.svg"
                alt="アラビア語テキストが２行に折返された画像。" />
            <p class="caption">
                右から左の横書きテキストの折返し。水色の線が<a href="text.html#TermContentArea">コンテンツ領域</a>の限界を示します。コンテンツ領域の高さは無限です。赤い点は初期<a
                    href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>です。
            </p>
        </div>
        <p class="annotation">一部ブラウザはこのSVG 1.1画像を正しく描画しない場合があります。BatikとFirefoxは正しく描画されます。Chromeにはバグ報告済み。</p>
    </div>

    <div class="example">
        <p><a class="property" href="text.html#InlineSizeProperty">inline-size</a>を使った縦書きテキストの折返し例。</p>

        <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="100" height="300" viewBox="0 0 100 300">

  &lt;text x="62.5" y="25" inline-size="200"
	style="font: 25px IPAMincho; inline-size: 200px; writing-mode: vertical-rl;">
    テキストは１０文字後に折り返されます。&lt;/text>

&lt;/svg>
</pre>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-wrap-vertical.svg"
                alt="縦書き日本語テキストが２列に折返された画像。" />
            <p class="caption">
                縦書きテキストの折返し。水色の線が<a href="text.html#TermContentArea">コンテンツ領域</a>の限界を示します。コンテンツ領域の幅は無限です。赤い点は初期<a
                    href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>です。
            </p>
        </div>
        <p class="annotation">このSVG
            1.1画像はFirefox（nightly含む）では動作しません。Firefoxは'writing-mode'プレゼンテーション属性をサポートしていません。バグ報告済み。</p>
    </div>


    <div class="example">
        <p><a class="property" href="text.html#InlineSizeProperty">inline-size</a>を使った横書きテキストの折返し（中央アンカー）例。</p>

        <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="100" viewBox="0 0 300 100">

  &lt;text x="50" y="30" style="font: 20px sans-serif; inline-size: 200px; text-anchor: middle">
    This text wraps at 200 pixels.
  &lt;/text>

&lt;/svg>
</pre>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-wrap-anchored.svg"
                alt="英語テキストが中央アンカーで２行に折返された画像。" />
            <p class="caption">
                横書きテキストの折返し。水色の線が<a href="text.html#TermContentArea">コンテンツ領域</a>の限界を示します。テキストは中央にアンカーされています。赤い点は初期<a
                    href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>です。
            </p>
        </div>
    </div>

    <h3 id="TextShapeInside" class="heading">11.4.2. ‘<span class="property">shape-inside</span>’プロパティ<a
            class="self-link" href="#TextShapeInside"></a></h3>

    <p>
        <a class="property" href="text.html#TextShapeInside">shape-inside</a>プロパティは、<a
            href="text.html#TermContentArea">コンテンツ領域</a>を<a
            href="http://dev.w3.org/csswg/css-shapes/#basic-shape-functions">CSS基本図形</a>または
        SVGの<a href="shapes.html#TermShapeElement">図形</a>に設定できます。
    </p>
    <p class="note">
        CSS/HTMLでは<a class="property" href="text.html#TextShapeInside">shape-inside</a>はブロックレベル要素に適用され、
        絶対値やパーセンテージ値はそのブロックレベル要素を基準に定義されます。

        SVGの場合、絶対値やパーセンテージ値は現在の<a href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">ユーザー座標系</a>と
        <span class="attr-name">‘<a href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>に基づいて定義されます。
    </p>

    <table class="propdef def">
        <tr>
            <th>名前:</th>
            <td><dfn id="ShapeInsideProperty" data-dfn-type="property" data-export="">shape-inside</dfn></td>
        </tr>
        <tr>
            <th>値:</th>
            <td>auto | [ &lt;basic-shape> | &lt;uri> ]+</td>
        </tr>
        <tr>
            <th>初期値:</th>
            <td>auto</td>
        </tr>
        <tr>
            <th>適用対象:</th>
            <td><span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素</td>
        </tr>
        <tr>
            <th>継承:</th>
            <td>いいえ</td>
        </tr>
        <tr>
            <th>パーセンテージ:</th>
            <td><span class="attr-name">‘<a href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>を基準</td>
        </tr>
        <tr>
            <th>メディア:</th>
            <td>視覚</td>
        </tr>
        <tr>
            <th>算出値:</th>
            <td>&lt;shape>の算出長、&lt;uri>は絶対URI、それ以外は指定値</td>
        </tr>
        <tr>
            <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>:</th>
            <td>はい、<a href="https://www.w3.org/TR/css-shapes/#basic-shape-interpolation">基本図形の補間</a>参照</td>
        </tr>
    </table>

    <dl>
        <dt><span class="attr-value">auto</span></dt>
        <dd>
            SVGにおいて'auto'値は、<a class="property"
                href="text.html#InlineSizeProperty">inline-size</a>プロパティまたは整形済みテキストとしてコンテンツ領域を定義することを示します。
        </dd>

        <dt><span class="attr-value">&lt;basic-shape></span></dt>
        <dd>
            形状は'circle()'、'ellipse()'、'polygon()'のいずれかの値で算出されます。CSS値の'inset()'はSVGでは無効です。

            <div class="example">
                <p>
                    CSS基本図形を使った横書きテキスト折返しの例。
                </p>

                <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="300" viewBox="0 0 300 300">

  &lt;text style="font: 20px/25px sans-serif;
               text-align: center;
               shape-inside: circle(120px at 150px 150px);">
    Lorem ipsum dolor sit amet, consec-tetuer adipiscing elit...&lt;/text>

&lt;/svg>
</pre>

                <div class="figure">
                    <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-wrap-circle.png"
                        alt="円内に折返されたテキスト画像。" />
                    <p class="caption">
                        CSSの円形図形内で横書きテキストを折返し。
                        水色の円が<a href="text.html#TermContentArea">コンテンツ領域</a>の限界を示します。
                    </p>
                </div>
            </div>

        </dd>

        <dt><span class="attr-value">&lt;uri></span></dt>
        <dd>
            &lt;uri>がSVGの<a href="shapes.html#TermShapeElement">図形</a>要素を参照していれば、その要素が図形を定義します。
            画像を参照している場合は、指定画像のアルファチャンネルを使い<a class="property"
                href="text.html#TextShapeImageThreshold">shape-image-threshold</a>で形状を抽出します。SVG図形要素や画像以外の場合は'auto'と同じ効果になります。

            <div class="example">
                <p>
                    SVGの<a href="shapes.html#TermShapeElement">図形</a>参照による横書きテキスト折返し例。
                </p>

                <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="100" viewBox="0 0 300 100">

  &lt;defs>
    &lt;rect id="wrap" x="50" y="10" width="200" height="80"/>
  &lt;/defs>

  &lt;text style="font: 20px sans-serif; shape-inside: url(#wrap);">
    This text wraps in a rectangle.&lt;/text>

&lt;/svg>
</pre>

                <div class="figure">
                    <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-wrap-rectangle.svg"
                        alt="矩形内に折返されたテキスト画像。" />
                    <p class="caption">
                        SVG矩形図形内で横書きテキストを折返し。
                        水色の線が<a href="text.html#TermContentArea">コンテンツ領域</a>の限界を示します。
                    </p>
                </div>
            </div>
        </dd>

    </dl>

    <p>
        CSS値の'outside-shape'、'shape-box'、'display'はSVGでは無効です。
    </p>

    <p>
        SVGでは<a class="property" href="text.html#TextShapeInside">shape-inside</a>プロパティに複数図形のリストを指定できます。各図形は独立した<a
            href="text.html#TermContentArea">コンテンツ領域</a>を定義します。
        テキストはまず最初の図形のコンテンツ領域内にレイアウトされ、あふれたテキストは次の図形に順次レイアウトされます。全テキストが配置されるか、図形がなくなるまで続きます。
    </p>
    <p class="note">
        効果はCSSのカラムと似ていますが、カラム形状は任意の形状が可能です。
    </p>
    <p>
        ユーザーがフォントサイズを大きくした場合など、全テキストのアクセシビリティを確保するために<q>overflow</q>用図形を用意することが推奨されます。
    </p>

    <p class="note">
        特記以外はCSS Shapes Module Level 2の<a
            href="http://dev.w3.org/csswg/css-shapes-2/#shape-inside-property">'shape-inside'</a>定義を参照。[<a
            href="refs.html#ref-css-shapes-2">css-shapes-2</a>]
    </p>

    <p class="annotation">
        'shape-inside'はCSS Exclusions and Shapes Module分割時に一度削除されましたが、東京SVG/CSS合同F2FでCSS Shapes Module Level
        2で復活することに合意しました。
    </p>

    <h3 id="TextShapeSubtract" class="heading">11.4.3. ‘<span class="property">shape-subtract</span>’プロパティ<a
            class="self-link" href="#TextShapeSubtract"></a></h3>

    <p>
        <a class="property" href="text.html#TextShapeSubtract">shape-subtract</a>プロパティは、<a
            href="text.html#TermContentArea">コンテンツ領域</a>の一部を<a href="text.html#TermWrappingArea">折返し領域</a>から除外できます。
        除外領域はCSS基本図形やSVG<a href="shapes.html#TermShapeElement">図形</a>のリストで定義される全領域の和です。
    </p>
    <p class="annotation">
        2016年シドニーF2Fで、'shape-subtract'を使うことが決定されました（'shape-outside'は除外領域面積を減らす動作のため挙動が異なる）。
    </p>

    <p class="note">
        絶対値やパーセンテージ値は現在の<a href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">ユーザー座標系</a>と
        <span class="attr-name">‘<a href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>に基づいて定義されます。
    </p>

    <table class="propdef def">
        <tr>
            <th>名前:</th>
            <td><dfn id="ShapesubtractProperty" data-dfn-type="property" data-export="">shape-subtract</dfn></td>
        </tr>
        <tr>
            <th>値:</th>
            <td>none | [ &lt;basic-shape>| &lt;uri> ]+</td>
        </tr>
        <tr>
            <th>初期値:</th>
            <td>none</td>
        </tr>
        <tr>
            <th>適用対象:</th>
            <td><span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素</td>
        </tr>
        <tr>
            <th>継承:</th>
            <td>いいえ</td>
        </tr>
        <tr>
            <th>パーセンテージ:</th>
            <td><span class="attr-name">‘<a href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>を基準</td>
        </tr>
        <tr>
            <th>メディア:</th>
            <td>視覚</td>
        </tr>
        <tr>
            <th>算出値:</th>
            <td>&lt;basic-shape>は算出長さ、&lt;uri>は絶対URI、それ以外は指定値</td>
        </tr>
        <tr>
            <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>:</th>
            <td>はい、<a href="https://www.w3.org/TR/css-shapes/#basic-shape-interpolation">基本図形の補間</a>参照</td>
        </tr>
    </table>

    <dl>
        <dt><span class="attr-value">&lt;basic-shape></span></dt>
        <dd>
            形状は'circle()'、'ellipse()'、'polygon()'のいずれかの値で算出されます。
        </dd>

        <dt><span class="attr-value">&lt;uri></span></dt>
        <dd>
            &lt;uri>がSVG<a href="shapes.html#TermShapeElement">図形</a>要素を参照する場合、その要素が寄与形状となり、<a class="property"
                href="text.html#TextShapeMargin">shape-margin</a>距離だけ拡張されます。
            画像参照の場合は、指定画像のアルファチャンネルを使い<a class="property"
                href="text.html#TextShapeImageThreshold">shape-image-threshold</a>で形状を抽出します。SVG図形要素や画像以外の参照は無視されます。
        </dd>

    </dl>

    <div class="example">
        <p>
            <a class="property" href="text.html#TextShapeSubtract">shape-subtract</a>の使用例。
        </p>.

        <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="450" height="300" viewBox="0 0 450 300">

  &lt;rect id="rect1" x="25"  y="25"  width="225" height="175" fill="white" stroke="black"/>
  &lt;rect id="rect2" x="200" y="125" width="225" height="150" fill="white" stroke="black"
        style="shape-margin:25px;"/>

  &lt;text style="shape-inside:url(#rect1);
	       shape-subtract:url(#rect2);
	       shape-padding:25px;
           font-family:DejaVu Sans;
	       font-size:12px;
	       text-align:justified;
	       line-height:110%">Lorem ipsum ...&lt;/text>
  &lt;text style="shape-inside:url(#rect2);
	       shape-padding:25px;
               font-family:DejaVu Sans;
	       font-size:12px;
	       text-align:justified;
	       line-height:110%">Lorem ipsum ...&lt;/text>
&lt;/svg>
</pre>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-wrap-complex.png"
                alt="２つの重なった矩形内で横書きテキストを折返した画像。" />
            <p class="caption">
                ２つの重なった矩形内で<a class="property" href="text.html#TextShapeSubtract">shape-subtract</a>と<a class="property"
                    href="text.html#TextShapeInside">shape-inside</a>、<a class="property"
                    href="text.html#TextShapePadding">shape-padding</a>、<a class="property"
                    href="text.html#TextShapeMargin">shape-margin</a>を使って横書きテキスト折返し。黒い矩形が<a
                    href="text.html#TermContentArea">コンテンツ領域</a>、内側の青い線が<a
                    href="text.html#TermWrappingArea">折返し領域</a>を示します。
            </p>
        </div>
    </div>

    <h3 id="TextShapeImageThreshold" class="heading">11.4.4. ‘<span class="property">shape-image-threshold</span>’
        プロパティ<a class="self-link" href="#TextShapeImageThreshold"></a></h3>

    <p>
        <a class="property"
            href="text.html#TextShapeImageThreshold">shape-image-threshold</a>は画像を使って形状を抽出する際、アルファチャンネルの閾値を定義します。値0.5は、50%以上不透明なピクセルをすべて囲む形状となります。
    </p>

    <p>
        SVGでは、このプロパティは<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素に適用されます。
    </p>

    <p class="note">
        特記以外はCSS Shapes Module Level 1の<a
            href="https://www.w3.org/TR/css-shapes/#shape-image-threshold-property">'shape-image-threshold'</a>定義を参照。[<a
            href="refs.html#ref-css-shapes-1">css-shapes-1</a>]
    </p>

    <h3 id="TextShapeMargin" class="heading">11.4.5. ‘<span class="property">shape-margin</span>’プロパティ<a
            class="self-link" href="#TextShapeMargin"></a></h3>

    <p>
        <a class="property" href="text.html#TextShapeMargin">shape-margin</a>プロパティは、<a class="property"
            href="text.html#TextShapeSubtract">shape-subtract</a>で参照された図形にマージンを追加します。
        このプロパティは元の図形から指定距離だけ離れた新しい図形を定義します。値は正のみ。
    </p>

    <table class="propdef def">
        <tr>
            <th>名前:</th>
            <td><dfn id="ShapeMarginProperty" data-dfn-type="property" data-export="">shape-margin</dfn></td>
        </tr>
        <tr>
            <th>値:</th>
            <td><a href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a></td>
        </tr>
        <tr>
            <th>初期値:</th>
            <td>0</td>
        </tr>
        <tr>
            <th>適用対象:</th>
            <td><span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素</td>
        </tr>
        <tr>
            <th>継承:</th>
            <td>いいえ</td>
        </tr>
        <tr>
            <th>パーセンテージ:</th>
            <td>該当なし</td>
        </tr>
        <tr>
            <th>メディア:</th>
            <td>視覚</td>
        </tr>
        <tr>
            <th>算出値:</th>
            <td>絶対長さ</td>
        </tr>
        <tr>
            <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>:</th>
            <td>はい</td>
        </tr>
    </table>

    <p class="note">
        特記以外はCSS Shapes Module Level 1の<a
            href="https://www.w3.org/TR/css-shapes/#shape-margin-property">'shape-margin'</a>定義を参照。[<a
            href="refs.html#ref-css-shapes-1">css-shapes-1</a>]
    </p>

    <h3 id="TextShapePadding" class="heading">11.4.6. ‘<span class="property">shape-padding</span>’プロパティ<a
            class="self-link" href="#TextShapePadding"></a></h3>

    <p>
        <a class="property" href="text.html#TextShapePadding">shape-padding</a>プロパティは、要素内側のインラインフローコンテンツ折返しをオフセットできます。
        'wrap-padding'プロパティで作られたオフセットは要素のコンテンツ領域からの距離です。値は正のみ。
    </p>

    <div class="example">
        <p><a class="property" href="text.html#TextShapePadding">shape-padding</a>使用例</p>。

        <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="300" viewBox="0 0 300 300">

  &lt;circle id="circle" cx="150" cy="150" r="125" fill="none" stroke="black"/>
  &lt;text style="shape-inside: url(#circle);
	       shape-padding: 25px;
	       font: 18px DejaVu Sans;
	       text-align: justified;
	       line-height: 110%;">This is an
  example of wrapped text in SVG 2! There should
  be 25 pixel padding around the text. The text is
  justified on both sides. It looks good!&lt;/text>

&lt;/svg>
</pre>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-shape-padding.png"
                alt="円内でパディングを持つ横書きテキスト折返し画像。" />
            <p class="caption">
                円内で<a class="property" href="text.html#TextShapePadding">shape-padding</a>を使った横書きテキスト折返し。外側の黒円が<a
                    href="text.html#TermContentArea">コンテンツ領域</a>、内側の青円が<a
                    href="text.html#TermWrappingArea">折返し領域</a>を示します。
            </p>
        </div>
        <p class="annotation">この画像はPNGです。良いSVGの作り方を検討してください。
            注：Chromeは'textLength'を'tspan'でサポートしますがFirefoxは非対応です。</p>
    </div>

    <p class="note">
        特記以外はCSS Shapes Module Level 2の<a
            href="http://dev.w3.org/csswg/css-shapes-2/#shape-padding-property">'shape-padding'</a>定義を参照。
    </p>

    <h2 id="TextLayoutAlgorithm" class="heading">11.5. テキストレイアウト ― アルゴリズム<a class="self-link"
            href="#TextLayoutAlgorithm"></a></h2>

    <div class="ready-for-wider-review">

        <p>
            テキストレイアウトは、<span class="element-name">‘<a
                    href="text.html#TextElement"><span>text</span></a>’</span>要素の内容（テキストデータ、スタイル情報、塗りつぶす図形の記述）をCSSベースのテキストレンダラーに渡すことから始まります。
            <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素はブロック要素として扱われ、
            その子孫の<span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>、
            <span class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span>、
            <span class="element-name">‘<a href="linking.html#AElement"><span>a</span></a>’</span>要素はインライン要素として扱われます。
            CSSレンダラーは、テキストを絶対位置でレイアウトしたかのような<span class="element-name">‘<a
                    href="text.html#TermTypographicCharacterUnit"><span>組版文字</span></a>’</span>とその位置のセットを返します。
        </p>
        <p class="note">
            <span class="element-name">‘<a
                    href="text.html#TermTypographicCharacterUnit"><span>組版文字</span></a>’</span>は複数の<span
                class="element-name">‘<a href="text.html#TermGlyph"><span>グリフ</span></a>’</span>を含む場合があります。
            ここでは、<span class="element-name">‘<a href="text.html#TermGlyph"><span>グリフ</span></a>’</span>の相対位置は<span
                class="element-name">‘<a
                    href="text.html#TermTypographicCharacterUnit"><span>組版文字</span></a>’</span>によりカプセル化され、ユーザーが制御できないものとします。
        </p>
        <p>
            <span class="element-name">‘<a
                    href="text.html#TermContentArea"><span>コンテンツ領域</span></a>’</span>が定義されたら、次のアルゴリズムに従って<span
                class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素の<span
                class="element-name">‘<a
                    href="text.html#TermTypographicCharacterUnit"><span>組版文字</span></a>’</span>とその位置を決定します：
        </p>

        <ul class="algorithm">
            <li>
                <a class="property" href="text.html#TextShapeInside">shape-inside</a>プロパティで<span
                    class="element-name">‘<a
                        href="text.html#TermContentArea"><span>コンテンツ領域</span></a>’</span>が定義されている場合、CSSの<a
                    href="text.html#TermWrappingArea">折返し領域</a>のテキストレイアウト規則に従い、1つ以上の領域にテキストをレイアウトします。

                <p class="note">
                    SVGでは<a class="property"
                        href="text.html#TextShapeInside">shape-inside</a>プロパティで複数の図形を参照可能です。各図形は順に埋められ、テキストまたは図形がなくなるまで繰り返します。
                </p>
            </li>
            <li>
                <a class="property" href="text.html#InlineSizeProperty">inline-size</a>プロパティで<span
                    class="element-name">‘<a
                        href="text.html#TermContentArea"><span>コンテンツ領域</span></a>’</span>が定義されている場合、CSSコンテンツボックスにテキストをレイアウトし、<a
                    href="http://dev.w3.org/csswg/css-writing-modes/#inline-size">inline-size</a>を<a class="property"
                    href="text.html#InlineSizeProperty">inline-size</a>値に設定し、<a
                    href="http://dev.w3.org/csswg/css-writing-modes/#block-size">block-size</a>は制約なしとします。

                <p class="note">
                    これは、<a class="property" href="text.html#WritingModeProperty">writing-mode</a>が<span
                        class="prop-value">horizontal-tb</span>ならボックス幅が<a class="property"
                        href="text.html#InlineSizeProperty">inline-size</a>値、その他ならボックス高さが<a class="property"
                        href="text.html#InlineSizeProperty">inline-size</a>値になることを意味します。
                </p>
            </li>
            <li>
                その他全てのテキスト（SVG 1.1互換テキストやSVG 1.1風の複数行テキスト）は、幅・高さ無制限のCSSコンテンツボックスにレイアウトします。
            </li>
        </ul>

        <p>
            以下のCSSプロパティはSVGテキストレイアウトにおいて効果がないか限定的です：
        </p>

        <ul>
            <li>
                <a href="text.html#TermTextContentElement">テキストコンテンツ要素</a>（およびその疑似要素）や、<span class="element-name">‘<a
                        href="linking.html#AElement"><span>a</span></a>’</span>要素が<a
                    href="text.html#TermTextContentBlockElement">テキストコンテンツブロック要素</a>内にある場合、以下のプロパティのused値は初期値でなければなりません：
                ‘<span class="property">border-style</span>’,
                ‘<span class="property">float</span>’,
                ‘<span class="property">margin</span>’,
                ‘<span class="property">padding</span>’,
                ‘<span class="property">position</span>’,
                ‘<span class="property">text-align</span>’。
            </li>

            <li>
                <a class="property" href="render.html#VisibilityControl">display</a>プロパティの算出値が、正しく親子関係を持つ<a
                    href="text.html#TermTextContentBlockElement">テキストコンテンツブロック要素</a>で<span
                    class="prop-value">none</span>以外の場合、used値は<span class="prop-value">block</span>でなければなりません。

                <p class="note">
                    これにより<span class="element-name">‘<a
                            href="text.html#TextElement"><span>text</span></a>’</span>要素がブロック要素として扱われます。
                </p>
            </li>

            <li>
                <a class="property" href="render.html#VisibilityControl">display</a>プロパティの算出値が、正しく親子関係を持つ<a
                    href="text.html#TermTextContentChildElement">テキストコンテンツ子要素</a>や<span class="element-name">‘<a
                        href="linking.html#AElement"><span>a</span></a>’</span>要素、または<a
                    href="struct.html#UnknownElement">未知の要素</a>で<span class="prop-value">none</span>以外の場合、used値は<span
                    class="prop-value">inline</span>でなければなりません。

                <p class="note">
                    これにより<span class="element-name">‘<a
                            href="text.html#TextElement"><span>tspan</span></a>’</span>、<span class="element-name">‘<a
                            href="text.html#TextPathElement"><span>textPath</span></a>’</span>、<span
                        class="element-name">‘<a
                            href="linking.html#AElement"><span>a</span></a>’</span>がインライン要素として扱われます。
                    注：<a class="property" href="coords.html#TransformProperty">transform</a>プロパティはインライン要素には効果がありません。
                </p>
            </li>

            <li>
                <a href="text.html#TermTextContentBlockElement">テキストコンテンツブロック要素</a>の子孫で、<a
                    href="struct.html#UnknownElement">未知の要素</a>や正しく親子関係を持つ<a
                    href="text.html#TermTextContentChildElement">テキストコンテンツ子要素</a>、<span class="element-name">‘<a
                        href="linking.html#AElement"><span>a</span></a>’</span>要素以外の要素のdisplayプロパティのused値は<span
                    class="prop-value">none</span>でなければなりません。

                <p class="note">
                    これにより、<span class="element-name">‘<a
                            href="text.html#TextElement"><span>text</span></a>’</span>要素内のグラフィックスやメタデータ要素は描画されません。
                </p>
            </li>
        </ul>

        <p>
            SVG属性やプロパティは、<a href="text.html#TermContentArea">コンテンツ領域</a>の定義方法に応じて<span class="element-name">‘<a
                    href="text.html#TermTypographicCharacterUnit"><span>組版文字</span></a>’</span>の位置を調整する場合があります：
        </p>

        <ul>
            <li>
                <a class="property" href="text.html#TextShapeInside">shape-inside</a>プロパティで<span
                    class="element-name">‘<a
                        href="text.html#TermContentArea"><span>コンテンツ領域</span></a>’</span>が定義されている場合、<span
                    class="element-name">‘<a
                        href="text.html#TermTypographicCharacterUnit"><span>組版文字</span></a>’</span>はCSSベーステキストレンダラーの返す位置で描画されます。
            </li>
            <li>
                <a class="property" href="text.html#InlineSizeProperty">inline-size</a>プロパティで<span
                    class="element-name">‘<a
                        href="text.html#TermContentArea"><span>コンテンツ領域</span></a>’</span>が定義されている場合、各<span
                    class="element-name">‘<a href="text.html#TermLineBox"><span>行ボックス</span></a>’</span>は<a
                    class="property" href="text.html#TextAnchorProperty">text-anchor</a>プロパティに従ってシフトされます。追加の後処理は行われません。
            </li>
            <li>
                その他全てのテキスト（SVG 1.1互換テキストやSVG 1.1風複数行テキスト）は、以下のアルゴリズムに従い<span class="element-name">‘<a
                        href="text.html#TermTypographicCharacterUnit"><span>組版文字</span></a>’</span>の位置が調整されます。
            </li>
        </ul>

        <p>
            以下のSVGテキストレイアウトアルゴリズムは、DOM内の各文字について<span class="element-name">‘<a
                    href="text.html#TextElement"><span>text</span></a>’</span>要素サブツリー内での情報を返します。情報には以下が含まれます：
        </p>

        <ul>
            <li>
                グローバルインデックス番号（<span class="element-name">‘<a
                        href="text.html#TextElement"><span>text</span></a>’</span>要素先頭からの文字のインデックス）
            </li>
            <li>
                (x, y)座標ペア（<span class="element-name">‘<a
                        href="text.html#TextElement"><span>text</span></a>’</span>要素の座標空間での位置）
            </li>
            <li>
                角度値（回転）
            </li>
            <li>
                "hidden"フラグ（<span class="element-name">‘<a
                        href="text.html#TextPathElement"><span>textPath</span></a>’</span>からはみ出して非表示になったかどうか）
            </li>
            <li>
                "addressable"フラグ（<a href="text.html#TermAddressableCharacter">アドレス可能文字</a>かどうか。テキスト位置属性やSVG
                DOMテキストメソッドでアドレス指定可能か）
            </li>
            <li>
                "middle"フラグ（<span class="element-name">‘<a
                        href="text.html#TermTypographicCharacterUnit"><span>組版文字</span></a>’</span>内の2文字目以降かどうか）
            </li>
            <li>
                "anchored chunk"フラグ（テキストアンカー可能な連続グリフの開始かどうか）
            </li>
        </ul>

        <p class="note">
            SVG属性<span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>、
            <span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>の配列は<a
                href="text.html#TermAddressableCharacter">アドレス可能文字</a>でインデックスされますが、
            実際の位置調整は<span class="element-name">‘<a
                    href="text.html#TermTypographicCharacterUnit"><span>組版文字</span></a>’</span>に対して行われます。
            例えば、<span class="element-name">‘<a
                    href="text.html#TermTypographicCharacterUnit"><span>組版文字</span></a>’</span>が複数文字（例：合字）に対応する場合、最初の文字の配列値のみがその<span
                class="element-name">‘<a
                    href="text.html#TermTypographicCharacterUnit"><span>組版文字</span></a>’</span>の位置決めに使われ、他の文字の配列値は（xとyの場合は）スキップ、（dxとdyの場合は）累積して次の<span
                class="element-name">‘<a
                    href="text.html#TermTypographicCharacterUnit"><span>組版文字</span></a>’</span>に適用、（rotateの場合は）配列の最後の値なら次の<span
                class="element-name">‘<a
                    href="text.html#TermTypographicCharacterUnit"><span>組版文字</span></a>’</span>に適用されます。
            これにより、フォントに特定の合字があるかないかに関わらず、属性値が同じ文字に適用されることが保証されます。
        </p>

        <p>
            SVG固有のテキストレイアウトアルゴリズムは以下の通りです：
        </p>

        <ol class="algorithm">
            <li>
                <b>セットアップ</b>
                <ol>
                    <li>
                        <var>root</var>を、<span class="element-name">‘<a
                                href="text.html#TextElement"><span>text</span></a>’</span>要素およびそのサブツリーに対して<a
                            href="text.html#TermTypographicCharacterUnit">組版文字</a>の位置を生成した結果とする。これは、絶対位置要素としてレイアウトされたものとする。
                        <p class="note">
                            <a class="property"
                                href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>プロパティによる改行がない限り、これは1行のテキストとなる。
                        </p>
                    </li>
                    <li>
                        <var>count</var>を、<span class="element-name">‘<a
                                href="text.html#TextElement"><span>text</span></a>’</span>要素サブツリー内のDOM <em>文字数</em>とする。
                    </li>
                    <li>
                        <var>result</var>を、長さ<var>count</var>の配列とし、各エントリには上記の各文字情報を格納する。各エントリの初期値は以下の通り：
                        <ul>
                            <li>グローバルインデックス番号は配列内の位置</li>
                            <li>"x"座標は"未指定"</li>
                            <li>"y"座標は"未指定"</li>
                            <li>"rotate"座標は"未指定"</li>
                            <li>"hidden"フラグはfalse</li>
                            <li>"addressable"フラグはtrue</li>
                            <li>"middle"フラグはfalse</li>
                            <li>"anchored chunk"フラグはfalse</li>
                        </ul>
                        <var>result</var>が空の場合は、<var>result</var>を返す。
                    </li>
                    <li>
                        <var>CSS_positions</var>を長さ<var>count</var>の配列として用意し、各エントリには対応する<a
                            href="text.html#TermTypographicCharacterUnit">組版文字</a>の<var>x</var>と<var>y</var>位置を格納する。初期値は(0,
                        0)。
                    </li>
                    <li>
                        "horizontal"フラグを、<span class="element-name">‘<a
                                href="text.html#TextElement"><span>text</span></a>’</span>の書字モードが横書きならtrue、そうでなければfalseとする。
                    </li>
                </ol>
            </li>
            <li>
                <b>フラグの設定と初期位置の割当</b>
                <p>
                    <var>result</var>のインデックス<var>i</var>ごとに：
                </p>
                <ol>
                    <li>
                        インデックス<var>i</var>の文字が以下の場合、<var>addressable</var>をfalseに設定：
                        <ul>
                            <li>
                                <a href="render.html#TermNonRenderedElement">非描画要素</a>のテキスト内容
                            </li>
                            <li>
                                レイアウト時に<a
                                    href="https://www.w3.org/TR/css-text-3/#white-space-phase-1">折り畳まれた空白文字</a>、ソフトハイフン文字、双方向制御文字として除去された場合
                            </li>
                            <li>
                                レイアウト時に<a
                                    href="https://www.w3.org/TR/css-text-3/#line-break-transform">折り畳まれた区切り文字</a>として除去された場合
                            </li>
                            <li>
                                行頭・行末で<a href="https://www.w3.org/TR/css-text-3/#white-space-phase-2">トリム</a>された場合
                            </li>
                        </ul>
                        <div class="note">
                            <p>
                                下記の<span class="element-name">‘<a
                                        href="text.html#TextElement"><span>text</span></a>’</span>要素（標準フォント使用）にはグリフ位置属性でアドレス可能でない折り畳み可能な空白が含まれるため、"B"グリフはx=300に配置される：
                            </p>
                            <pre>&lt;text x="100 200 300">
	      A
	      B
	      &lt;/text></pre>
                            <p>
                                "A"の前の空白、および"A"と"B"の間の空白のうち1文字を除き、空白は折り畳みまたはトリムされるためである。
                            </p>
                        </div>
                    </li>
                    <li>
                        インデックス<var>i</var>の文字が、同じ<a
                            href="text.html#TermTypographicCharacterUnit">組版文字</a>に対応する2文字目以降なら<var>middle</var>をtrueに設定。
                    </li>
                    <li>
                        インデックス<var>i</var>の文字が行頭の<a
                            href="text.html#TermTypographicCharacterUnit">組版文字</a>に対応する場合、<var>result</var>[<var>i</var>]の"anchored
                        chunk"フラグをtrueに設定。
                        <p class="note">
                            これにより<a class="property"
                                href="text.html#TextAnchorProperty">text-anchor</a>によるチャンクシフトが複数行にまたがることを防ぐ。
                        </p>
                    </li>
                    <li>
                        <var>addressable</var>がtrueかつ<var>middle</var>がfalseなら、
                        <var>CSS_positions</var>[<var>i</var>]にCSSレンダラーで決定された対応<a
                            href="text.html#TermTypographicCharacterUnit">組版文字</a>の位置をセット。そうでなく、<var>i</var> >
                        0なら<var>CSS_positions</var>[<var>i</var>] = <var>CSS_positions</var>[<var>i</var> − 1]。
                    </li>
                </ol>
            </li>
            <li>
                <b>文字位置決定</b>
                <p class="note">
                    ノードによって指定された位置調整（例：<span class="attr-name">‘<a
                            href="text.html#TextElementXAttribute"><span>x</span></a>’</span>属性）は、そのノード内および子孫の全ての文字に適用される。ただし、子孫ノードで指定された調整は祖先ノードの調整を上書きする。ここで各文字への調整値を解決し、<var>rotate</var>座標も直接設定する。
                </p>
                <ol>
                    <li>
                        セットアップ：
                        <ol>
                            <li>
                                <var>resolve_x</var>, <var>resolve_y</var>, <var>resolve_dx</var>,
                                <var>resolve_dy</var>を、長さ<var>count</var>で全て"未指定"で初期化。
                            </li>
                            <li>
                                "in_text_path"フラグをfalseにセット。
                                <p class="note">
                                    このフラグにより、<span class="element-name">‘<a
                                            href="text.html#TextPathElement"><span>textPath</span></a>’</span>内の横書き（縦書き）テキストに対し<span
                                        class="attr-name">‘<a
                                            href="text.html#TextElementYAttribute"><span>y</span></a>’</span>（<span
                                        class="attr-name">‘<a
                                            href="text.html#TextElementXAttribute"><span>x</span></a>’</span>）属性値を無視できる。
                                </p>
                            </li>
                            <li>
                                下記手順を<span class="element-name">‘<a
                                        href="text.html#TextElement"><span>text</span></a>’</span>ノードに対して呼び出す。
                            </li>
                        </ol>
                    </li>
                    <li>
                        手順：<b id="ResolveGlyphPositioning"><i>文字位置決定</i></b>
                        <p>
                            入力ノード<var>node</var>を取る再帰手順。処理内容は以下：
                        </p>
                        <ol>
                            <li>
                                <var>node</var>が<span class="element-name">‘<a
                                        href="text.html#TextElement"><span>text</span></a>’</span>または<span
                                    class="element-name">‘<a
                                        href="text.html#TextElement"><span>tspan</span></a>’</span>ノードの場合：
                                <ol>
                                    <li>
                                        <var>index</var>をノード内最初の文字のグローバルインデックスとする。
                                    </li>
                                    <li>
                                        <var>x</var>, <var>y</var>, <var>dx</var>, <var>dy</var>,
                                        <var>rotate</var>を、対応するノード属性値リスト（未指定または無効なら空リスト）とする。
                                    </li>
                                    <li>
                                        "in_text_path"フラグがfalseの場合：
                                        <ul>
                                            <li>
                                                <var>new_chunk_count</var> = max(<var>x</var>リスト長, <var>y</var>リスト長)。
                                            </li>
                                        </ul>
                                        そうでない場合：
                                        <ul>
                                            <li>
                                                "horizontal"フラグがtrueの場合：
                                                <ul>
                                                    <li>
                                                        <var>new_chunk_count</var> = <var>x</var>リスト長。
                                                    </li>
                                                </ul>
                                            </li>
                                            <li>
                                                それ以外の場合：
                                                <ul>
                                                    <li>
                                                        <var>new_chunk_count</var> = <var>y</var>リスト長。
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                    <li>
                                        <var>length</var>を<var>node</var>サブツリー内のDOM文字数とする。
                                    </li>
                                    <li>
                                        <var>i</var> = 0, <var>j</var> = 0 とする。
                                        <p class="note">
                                            <var>i</var>：ノード内<a
                                                href="text.html#TermAddressableCharacter">アドレス可能文字</a>のインデックス、
                                            <var>j</var>：ノード内全<a href="text.html#TermCharacter">文字</a>のインデックス。
                                        </p>
                                    </li>
                                    <li>
                                        <var>j</var> &lt; <var>length</var>の間ループ：
                                        <p class="note">
                                            このループで<var>node</var>内部に対し<span class="attr-name">‘<a
                                                    href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、
                                            <span class="attr-name">‘<a
                                                    href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、
                                            <span class="attr-name">‘<a
                                                    href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、
                                            <span class="attr-name">‘<a
                                                    href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>、
                                            <span class="attr-name">‘<a
                                                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
                                            属性値を適用。
                                        </p>
                                        <ol>
                                            <li>
                                                <var>result</var>[<var>index</var> +
                                                <var>j</var>]の"addressable"フラグがtrueなら：
                                                <ol>
                                                    <li>
                                                        <var>i</var> &lt; <var>new_check_count</var>なら
                                                        <var>result</var>[<var>index</var> + <var>j</var>]の"anchored
                                                        chunk"フラグをtrue、それ以外はfalse。
                                                        <p class="note">
                                                            falseにすると、<span class="attr-name">‘<a
                                                                    href="text.html#TextElementXAttribute"><span>x</span></a>’</span>や<span
                                                                class="attr-name">‘<a
                                                                    href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性が、<span
                                                                class="element-name">‘<a
                                                                    href="text.html#TextElement"><span>text</span></a>’</span>要素で設定された際、<span
                                                                class="element-name">‘<a
                                                                    href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素で不適切にanchored
                                                            chunkを作らないようにする。
                                                        </p>
                                                    </li>
                                                    <li>
                                                        <var>i</var> &lt;
                                                        <var>x</var>長なら<var>resolve_x</var>[<var>index</var> +
                                                        <var>j</var>] = <var>x</var>[<var>i</var>]。
                                                    </li>
                                                    <li>
                                                        "in_text_path"かつ"horizontal"がfalseなら<var>resolve_x</var>[<var>index</var>]を未設定にする。
                                                        <p class="note">
                                                            <span class="attr-name">‘<a
                                                                    href="text.html#TextElementXAttribute"><span>x</span></a>’</span>はパス上の縦書きテキストで無視される。
                                                        </p>
                                                    </li>
                                                    <li>
                                                        <var>i</var> &lt;
                                                        <var>y</var>長なら<var>resolve_y</var>[<var>index</var> +
                                                        <var>j</var>] = <var>y</var>[<var>i</var>]。
                                                    </li>
                                                    <li>
                                                        "in_text_path"かつ"horizontal"がtrueなら<var>resolve_y</var>[<var>index</var>]を未設定にする。
                                                        <p class="note">
                                                            <span class="attr-name">‘<a
                                                                    href="text.html#TextElementYAttribute"><span>y</span></a>’</span>はパス上の横書きテキストで無視される。
                                                        </p>
                                                    </li>
                                                    <li>
                                                        <var>i</var> &lt;
                                                        <var>dx</var>長なら<var>resolve_dx</var>[<var>index</var> +
                                                        <var>j</var>] = <var>dx</var>[<var>i</var>]。
                                                    </li>
                                                    <li>
                                                        <var>i</var> &lt;
                                                        <var>dy</var>長なら<var>resolve_dy</var>[<var>index</var> +
                                                        <var>j</var>] = <var>dy</var>[<var>i</var>]。
                                                    </li>
                                                    <li>
                                                        <var>i</var> &lt;
                                                        <var>rotate</var>長なら<var>result</var>[<var>index</var> +
                                                        <var>j</var>]のangle値を<var>rotate</var>[<var>i</var>]にセット。そうでなく<var>rotate</var>が空でなければ、<var>result</var>[<var>index</var>
                                                        + <var>j</var>] = <var>result</var>[<var>index</var> +
                                                        <var>j</var> − 1]。
                                                    </li>
                                                    <li>
                                                        <var>i</var> = <var>i</var> + 1。
                                                    </li>
                                                </ol>
                                            </li>
                                            <li>
                                                <var>j</var> = <var>j</var> + 1。
                                            </li>
                                        </ol>
                                    </li>
                                </ol>
                            </li>
                            <li>
                                <var>node</var>が<span class="element-name">‘<a
                                        href="text.html#TextPathElement"><span>textPath</span></a>’</span>ノードの場合：
                                <ol>
                                    <li>
                                        <var>index</var>をノード内（子孫含む）最初の文字のグローバルインデックスとする。
                                    </li>
                                    <li>
                                        <var>result</var>[<var>index</var>]の"anchored chunk"フラグをtrueにする。
                                        <p class="note">
                                            <span class="element-name">‘<a
                                                    href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素は必ずanchored
                                            chunkを作る。
                                        </p>
                                    </li>
                                    <li>
                                        <var>in_text_path</var>フラグをtrueにする。
                                    </li>
                                </ol>
                            </li>
                            <li>
                                <var>node</var>の各子ノード<var>child</var>に対し：
                                <ol>
                                    <li>
                                        <a href="#ResolveGlyphPositioning">グリフ位置決定</a>を<var>child</var>に適用。
                                    </li>
                                </ol>
                            </li>
                            <li>
                                <var>node</var>が<span class="element-name">‘<a
                                        href="text.html#TextPathElement"><span>textPath</span></a>’</span>ノードの場合：
                                <ol>
                                    <li>
                                        "in_text_path"フラグをfalseにする。
                                    </li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li>
                <b>位置調整: dx, dy</b>
                <p class="note">
                    <span class="attr-name">‘<a
                            href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、<span
                        class="attr-name">‘<a
                            href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>の調整は、<span
                        class="attr-name">‘<a
                            href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>属性による調整の前に適用され、<span
                        class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、<span
                        class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、<span
                        class="attr-name">‘<a
                            href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>の調整は後に適用される。
                </p>
                <ol>
                    <li>
                        <span class="attr-name">‘<a
                                href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、<span
                            class="attr-name">‘<a
                                href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性による累積シフト<var>shift</var>を(0,0)で初期化。
                    </li>
                    <li>
                        <var>result</var>のインデックス<var>i</var>ごとに：
                        <ol>
                            <li>
                                <var>resolve_x</var>[<var>i</var>]が未指定なら0にする。<var>resolve_y</var>[<var>i</var>]も同様。
                            </li>
                            <li>
                                <var>shift.x</var> = <var>shift.x</var> + <var>resolve_x</var>[<var>i</var>]、
                                <var>shift.y</var> = <var>shift.y</var> + <var>resolve_y</var>[<var>i</var>]。
                            </li>
                            <li>
                                <var>result</var>[<var>i</var>].x = CSS_positions[<var>i</var>].x + shift.x、
                                <var>result</var>[<var>i</var>].y = CSS_positions[<var>i</var>].y + shift.y。
                            </li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li>
                <b><span class="attr-name">‘<a
                            href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>属性の適用</b>
                <ol>
                    <li>
                        セットアップ：
                        <ol>
                            <li>
                                <dfn id="TermResolvedDescendantNode" data-dfn-type="dfn"
                                    data-export="">解決済み子孫ノード</dfn>を、<span class="attr-name">‘<a
                                        href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>属性が有効かつ、さらに有効な<code>textLength</code>属性を持つ子孫ノードの子孫でないノードとする。
                            </li>
                            <li>
                                下記手順を<span class="element-name">‘<a
                                        href="text.html#TextElement"><span>text</span></a>’</span>ノードに対して呼び出す。
                            </li>
                        </ol>
                    </li>
                    <li>
                        手順：<b id="ResolveTextLength"><i>textLength解決</i></b>
                        <p>
                            入力ノード<var>node</var>を取る再帰手順。処理内容は以下：
                        </p>
                        <ol>
                            <li>
                                各子ノード<var>child</var>に対し：
                                <ol>
                                    <li>
                                        <a href="#ResolveTextLength">textLength解決</a>を<var>child</var>に適用。
                                        <p class="note">
                                            子ノードの調整は親ノードより先に行う。
                                        </p>
                                    </li>
                                </ol>
                            </li>
                            <li>
                                <var>node</var>が<span class="element-name">‘<a
                                        href="text.html#TextElement"><span>text</span></a>’</span>または<span
                                    class="element-name">‘<a
                                        href="text.html#TextElement"><span>tspan</span></a>’</span>ノードで、かつ有効な<span
                                    class="attr-name">‘<a
                                        href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>属性値を持つ場合：
                                <ol>
                                    <li>
                                        <var>a</var> = +∞、<var>b</var> = −∞とする。
                                    </li>
                                    <li>
                                        <var>i</var>、<var>j</var>を<var>node</var>内の最初と最後の文字のグローバルインデックスとする。
                                    </li>
                                    <li>
                                        [<var>i</var>,
                                        <var>j</var>]範囲の各<var>k</var>で、<var>result</var>[<var>k</var>]の"addressable"フラグがtrueの場合：
                                        <p class="note">
                                            このループでノード内の<a
                                                href="text.html#TermTypographicCharacterUnit">組版文字</a>の左右（上下）端を探し、強制改行をチェックする。
                                        </p>
                                        <ol>
                                            <li>
                                                <var>k</var>の文字が改行（linefeedまたはcarriage
                                                return）の場合はreturn。強制改行があるノードにはtextLengthによる調整は行わない。
                                            </li>
                                            <li>
                                                <var>pos</var> =
                                                <var>result</var>[<var>k</var>]の位置のx座標（"horizontal"がtrueの場合）、そうでなければy座標。
                                            </li>
                                            <li>
                                                <var>advance</var> = <var>k</var>に対応する<a
                                                    href="text.html#TermTypographicCharacterUnit">組版文字</a>のadvance。（RTL横書きテキストはadvanceが負になる）
                                            </li>
                                            <li>
                                                <var>a</var> = min(<var>a</var>, <var>pos</var>, <var>pos</var> +
                                                <var>advance</var>)。
                                            </li>
                                            <li>
                                                <var>b</var> = max(<var>b</var>, <var>pos</var>, <var>pos</var> +
                                                <var>advance</var>)。
                                            </li>
                                        </ol>
                                    </li>
                                    <li>
                                        <var>a</var> ≠ +∞なら：
                                        <ol>
                                            <li>
                                                <var>delta</var> = <span class="attr-name">‘<a
                                                        href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>の算出値
                                                − (b − a)。
                                                <p class="note">
                                                    UAはノード内最後の<a
                                                        href="text.html#TermTypographicCharacterUnit">組版文字</a>を<var>delta</var>だけシフトする必要がある。横書きで"horizontal"かつ<a
                                                        class="property"
                                                        href="text.html#DirectionProperty">direction</a>が<span
                                                        class="prop-value">lrt</span>なら+x方向、<span
                                                        class="prop-value">rtl</span>なら−x方向、それ以外は+y方向。UAは中間<a
                                                        href="text.html#TermTypographicCharacterUnit">組版文字</a>の調整も許可される。以下は<span
                                                        class="attr-name">‘<a
                                                            href="text.html#TextElementLengthAdjustAttribute"><span>lengthAdjust</span></a>’</span>値が<span
                                                        class="prop-value">spacing</span>の場合の調整例。
                                                </p>
                                            </li>
                                            <li>
                                                <var>n</var> = このノード内の<a
                                                    href="text.html#TermTypographicCharacterUnit">組版文字</a>数（解決済み子孫ノードやその内部ノード除く）。
                                            </li>
                                            <li>
                                                <var>n</var> = <var>n</var> + 解決済み子孫ノード数 − 1。
                                                <p class="note">
                                                    各解決済み子孫ノードはこの文脈では1つの<a
                                                        href="text.html#TermTypographicCharacterUnit">組版文字</a>として扱う。
                                                </p>
                                            </li>
                                            <li>
                                                文字ごとの調整量<var>δ</var> = <var>delta</var>/<var>n</var>。
                                            </li>
                                            <li>
                                                <var>shift</var> = 0。
                                            </li>
                                            <li>
                                                [<var>i</var>,<var>j</var>]範囲の各<var>k</var>で：
                                                <ol>
                                                    <li>
                                                        <var>shift</var>を<var>result</var>[<var>k</var>]のx座標（"horizontal"なら）、そうでなければy座標に加算。
                                                    </li>
                                                    <li>
                                                        <var>result</var>[<var>k</var>]の"middle"フラグがfalse、かつ<var>k</var>が解決済み子孫ノードの2文字目以降でなければ<var>shift</var>
                                                        = <var>shift</var> + <var>δ</var>。
                                                    </li>
                                                </ol>
                                            </li>
                                        </ol>
                                    </li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li>
                <b>位置調整: x, y</b>
                <p class="note">
                    このループで<span class="attr-name">‘<a
                            href="text.html#TextElementXAttribute"><span>x</span></a>’</span>および<span
                        class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>値を適用し、<a
                        class="property" href="text.html#TextAnchorProperty">text-anchor</a>チャンクが<a
                        href="text.html#TermTypographicCharacterUnit">組版文字</a>の途中で始まらないことを保証する。
                </p>
                <ol>
                    <li>
                        <span class="attr-name">‘<a
                                href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、<span
                            class="attr-name">‘<a
                                href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性による現在の調整<var>shift</var>を(0,0)で初期化。
                    </li>
                    <li>
                        <var>index</var> = 1。
                    </li>
                    <li>
                        <var>index</var> &lt; <var>count</var>の間ループ：
                        <ol>
                            <li>
                                <var>resolved_x</var>[<var>index</var>]が設定されていれば
                                <var>shift.x</var> = <var>resolved_x</var>[<var>index</var>] −
                                <var>result.x</var>[<var>index</var>]。
                            </li>
                            <li>
                                <var>resolved_y</var>[<var>index</var>]が設定されていれば
                                <var>shift.y</var> = <var>resolved_y</var>[<var>index</var>] −
                                <var>result.y</var>[<var>index</var>]。
                            </li>
                            <li>
                                <var>result.x</var>[<var>index</var>] = <var>result.x</var>[<var>index</var>] + shift.x、
                                <var>result.y</var>[<var>index</var>] = <var>result.y</var>[<var>index</var>] + shift.y。
                            </li>
                            <li>
                                <var>result</var>[<var>index</var>]の"middle"・"anchored chunk"フラグ両方がtrueなら：
                                <ol>
                                    <li>
                                        <var>result</var>[<var>index</var>]の"anchored chunk"フラグをfalse。
                                    </li>
                                    <li>
                                        <var>index</var> + 1 &lt; <var>count</var>なら
                                        <var>result</var>[<var>index</var> + 1]の"anchored chunk"フラグをtrueに。
                                    </li>
                                </ol>
                            </li>
                            <li>
                                <var>index</var> = <var>index</var> + 1。
                            </li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li>
                <b>アンカリングの適用</b>
                <ol>
                    <li>
                        各スライス<var>result</var>[<var>i</var>..<var>j</var>]（<var>i</var>、<var>j</var>両端含む）で、以下を満たす場合：
                        <ul>
                            <li>
                                <var>result</var>[<var>i</var>]の"anchored chunk"フラグがtrue
                            </li>
                            <li>
                                <var>i</var> &lt; <var>k</var> ≤ <var>j</var>の<var>result</var>[<var>k</var>]の"anchored
                                chunk"フラグはfalse
                            </li>
                            <li>
                                <var>j</var> = <var>count</var> − 1 または<var>result</var>[<var>j</var> + 1]の"anchored
                                chunk"フラグがtrue
                            </li>
                        </ul>
                        実行：
                        <p class="note">
                            これは各anchored chunkに対するループ。
                        </p>
                        <ol>
                            <li>
                                <var>a</var> = +∞、<var>b</var> = −∞。
                            </li>
                            <li>
                                [<var>i</var>,
                                <var>j</var>]範囲の各<var>k</var>で<var>result</var>[<var>k</var>]の"addressable"フラグがtrueの場合：
                                <p class="note">
                                    このループでチャンク内<a href="text.html#TermTypographicCharacterUnit">組版文字</a>の左右（上下）端を探す。
                                </p>
                                <ol>
                                    <li>
                                        <var>pos</var> =
                                        <var>result</var>[<var>k</var>]の位置のx座標（"horizontal"なら）、そうでなければy座標。
                                    </li>
                                    <li>
                                        <var>advance</var> = <var>k</var>に対応する<a
                                            href="text.html#TermTypographicCharacterUnit">組版文字</a>のadvance。（RTL横書きテキストはadvanceが負になる）
                                    </li>
                                    <li>
                                        <var>a</var> = min(<var>a</var>, <var>pos</var>, <var>pos</var> +
                                        <var>advance</var>)。
                                    </li>
                                    <li>
                                        <var>b</var> = max(<var>b</var>, <var>pos</var>, <var>pos</var> +
                                        <var>advance</var>)。
                                    </li>
                                </ol>
                            </li>
                            <li>
                                <var>a</var> ≠ +∞なら：
                                <p class="note">
                                    ここでテキストアンカリングを行う。
                                </p>
                                <ol>
                                    <li>
                                        <var>shift</var>を、<var>result</var>[<var>i</var>]のx座標（"horizontal"なら）、そうでなければy座標とする。
                                    </li>
                                    <li>
                                        <var>result</var>[<var>i</var>]の要素の<a class="property"
                                            href="text.html#TextAnchorProperty">text-anchor</a>と<a class="property"
                                            href="text.html#DirectionProperty">direction</a>値に応じてshiftを調整：
                                        <dl class="switch">
                                            <dt>(start, ltr)または(end, rtl)</dt>
                                            <dd><var>shift</var> = <var>shift</var> − <var>a</var></dd>
                                            <dt>(start, rtl)または(end, ltr)</dt>
                                            <dd><var>shift</var> = <var>shift</var> − <var>b</var></dd>
                                            <dt>(middle, ltr)または(middle, rtl)</dt>
                                            <dd><var>shift</var> = <var>shift</var> − (<var>a</var> + <var>b</var>) / 2
                                            </dd>
                                        </dl>
                                    </li>
                                    <li>
                                        [<var>i</var>, <var>j</var>]範囲の各<var>k</var>で、
                                        <var>result</var>[<var>k</var>]のx座標（"horizontal"なら）、そうでなければy座標に<var>shift</var>を加算。
                                    </li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li>
                <b>パス上の位置決定</b>
                <ol>
                    <li>
                        <var>index</var> = 0。
                    </li>
                    <li>
                        "in path"フラグをfalseに。
                    </li>
                    <li>
                        "after path"フラグをfalseに。
                    </li>
                    <li>
                        <var>path_end</var>を、<span class="element-name">‘<a
                                href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素の後に続く文字のオフセットとし、(0,0)で初期化。
                    </li>
                    <li>
                        <var>index</var> &lt; <var>count</var>の間ループ：
                        <ol>
                            <li>
                                インデックス<var>i</var>の文字が<span class="element-name">‘<a
                                        href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素内で、かつ<a
                                    href="text.html#TermTypographicCharacterUnit">組版文字</a>に対応する場合：
                                <ol>
                                    <li>
                                        "in path"フラグをtrueに。
                                    </li>
                                    <li>
                                        <var>result</var>[<var>index</var>]の"middle"フラグがfalseなら：
                                        <p class="note">
                                            ここで<span class="element-name">‘<a
                                                    href="text.html#TextPathElement"><span>textPath</span></a>’</span>位置決めを適用。
                                        </p>
                                        <ol>
                                            <li>
                                                <var>path</var>を、<span class="element-name">‘<a
                                                        href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素が参照する<a
                                                    href="shapes.html#TermBasicShapeElement">基本図形</a>要素の<a
                                                    href="paths.html#TermEquivalentPath">同等パス</a>とする。参照が不正なら空パス。
                                            </li>
                                            <li>
                                                <span class="attr-name">‘<a
                                                        href="text.html#TextPathElementSideAttribute"><span>side</span></a>’</span>属性が<span
                                                    class="attr-value">'right'</span>なら<var>path</var>を反転。
                                            </li>
                                            <li>
                                                <var>length</var> = <var>path</var>の長さ。
                                            </li>
                                            <li>
                                                <var>offset</var> = <span class="element-name">‘<a
                                                        href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素の<span
                                                    class="attr-name">‘<a
                                                        href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>属性値、参照要素の<span
                                                    class="attr-name">‘<a
                                                        href="paths.html#PathLengthAttribute"><span>pathLength</span></a>’</span>属性値で調整。
                                            </li>
                                            <li>
                                                <var>advance</var> = <var>k</var>に対応する<a
                                                    href="text.html#TermTypographicCharacterUnit">組版文字</a>のadvance。（RTL横書きテキストではadvanceは負）
                                            </li>
                                            <li>
                                                <var>result</var>[<var>index</var>]の位置(<var>x</var>,
                                                <var>y</var>)と角度<var>angle</var>を取得。
                                            </li>
                                            <li>
                                                "horizontal"フラグの値に応じて<var>mid</var>を計算：
                                                <dl class="switch">
                                                    <dt>true</dt>
                                                    <dd><var>mid</var> = <var>x</var> + <var>advance</var> / 2 +
                                                        <var>offset</var>
                                                    </dd>
                                                    <dt>false</dt>
                                                    <dd><var>mid</var> = <var>y</var> + <var>advance</var> / 2 +
                                                        <var>offset</var>
                                                    </dd>
                                                </dl>
                                                <p class="note">
                                                    UAは、<span class="attr-name">‘<a
                                                            href="text.html#TextPathElementSpacingAttribute"><span>spacing</span></a>’</span>値が<span
                                                        class="attr-value">'auto'</span>や、<span class="attr-name">‘<a
                                                            href="text.html#TextPathElementMethodAttribute"><span>method</span></a>’</span>値が<span
                                                        class="attr-value">'stretch'</span>の場合、<var>mid</var>の調整も許される。
                                                </p>
                                            </li>
                                            <li>
                                                <var>path</var>が<a
                                                    href="paths.html#TermOpenSubpath">閉じていないサブパス</a>で、<var>mid</var>
                                                &lt; 0または<var>mid</var> >
                                                <var>length</var>なら、<var>result</var>[<var>index</var>]の"hidden"フラグをtrueに。
                                            </li>
                                            <li>
                                                <var>path</var>が<a
                                                    href="paths.html#TermOpenSubpath">閉じたサブパス</a>の場合、<span
                                                    class="element-name">‘<a
                                                        href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素の<a
                                                    class="property"
                                                    href="text.html#TextAnchorProperty">text-anchor</a>や<a
                                                    class="property"
                                                    href="text.html#DirectionProperty">direction</a>値に応じて：
                                                <p class="note">
                                                    単一<a href="paths.html#TermOpenSubpath">閉じたサブパス</a>用の特別な折返し条件。
                                                </p>
                                                <dl class="switch">
                                                    <dt>(start, ltr)または(end, rtl)</dt>
                                                    <dd>
                                                        <var>mid</var>−<var>offset</var> &lt; 0 または
                                                        <var>mid</var>−<var>offset</var> >
                                                        <var>length</var>なら"hidden"フラグtrue。
                                                    </dd>
                                                    <dt>(middle, ltr)または(middle, rtl)</dt>
                                                    <dd>
                                                        <var>mid</var>−<var>offset</var> &lt; −<var>length</var>/2 または
                                                        <var>mid</var>−<var>offset</var> >
                                                        <var>length</var>/2なら"hidden"フラグtrue。
                                                    </dd>
                                                    <dt>(start, rtl)または(end, ltr)</dt>
                                                    <dd>
                                                        <var>mid</var>−<var>offset</var> &lt; −<var>length</var> または
                                                        <var>mid</var>−<var>offset</var> > 0なら"hidden"フラグtrue。
                                                    </dd>
                                                </dl>
                                                <p>
                                                    <var>mid</var> = <var>mid</var> mod <var>length</var>とする。
                                                </p>
                                            </li>
                                            <li>hiddenフラグがfalseの場合：
                                                <ol>
                                                    <li>
                                                        <var>point</var> = mid距離だけ<var>path</var>上の位置、<var>t</var> =
                                                        その点での単位接ベクトル。
                                                    </li>
                                                    <li>
                                                        "horizontal"フラグに応じて
                                                        <dl class="switch">
                                                            <dt>true</dt>
                                                            <dd>
                                                                <ol>
                                                                    <li>
                                                                        <var>n</var> = <var>t</var> + 90°方向の法線単位ベクトル。
                                                                    </li>
                                                                    <li>
                                                                        <var>o</var> = グリフの垂直中心線からアラインメントポイントまでの水平距離。
                                                                    </li>
                                                                    <li>
                                                                        <var>result</var>[<var>index</var>]の位置 =
                                                                        <var>point</var> − <var>o</var>×<var>t</var> +
                                                                        <var>y</var>×<var>n</var>。
                                                                    </li>
                                                                    <li>
                                                                        <var>r</var> = 正のx軸から接ベクトルへの角度。
                                                                    </li>
                                                                    <li>
                                                                        <var>result</var>[<var>index</var>]のangle値 =
                                                                        <var>angle</var> + <var>r</var>。
                                                                    </li>
                                                                </ol>
                                                            </dd>
                                                            <dt>false</dt>
                                                            <dd>
                                                                <ol>
                                                                    <li>
                                                                        <var>n</var> = <var>t</var> − 90°方向の法線単位ベクトル。
                                                                    </li>
                                                                    <li>
                                                                        <var>o</var> = グリフの水平中心線からアラインメントポイントまでの垂直距離。
                                                                    </li>
                                                                    <li>
                                                                        <var>result</var>[<var>index</var>]の位置 =
                                                                        <var>point</var> − <var>o</var>×<var>t</var> +
                                                                        <var>x</var>×<var>n</var>。
                                                                    </li>
                                                                    <li>
                                                                        <var>r</var> = 正のy軸から接ベクトルへの角度。
                                                                    </li>
                                                                    <li>
                                                                        <var>result</var>[<var>index</var>]のangle値 =
                                                                        <var>angle</var> + <var>r</var>。
                                                                    </li>
                                                                </ol>
                                                            </dd>
                                                        </dl>
                                                    </li>
                                                </ol>
                                            </li>
                                        </ol>
                                    </li>
                                    <li>
                                        そうでなく、<var>result</var>[<var>index</var>]の"middle"フラグがtrueなら：
                                        <ol>
                                            <li>
                                                <var>result</var>[<var>index</var>]の位置とangle値を<var>result</var>[<var>index</var>
                                                − 1]のそれと同じにする。
                                            </li>
                                        </ol>
                                    </li>
                                </ol>
                            </li>
                            <li>
                                インデックス<var>i</var>の文字が<span class="element-name">‘<a
                                        href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素外で、かつ<a
                                    href="text.html#TermTypographicCharacterUnit">組版文字</a>に対応する場合：
                                <p class="note">
                                    <span class="element-name">‘<a
                                            href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素の後に続く文字の描画開始点をパス終端に設定。
                                </p>
                                <ol>
                                    <li>もし"in path"フラグがtrueなら：
                                        <ol>
                                            <li>
                                                "in path"フラグをfalseに。
                                            </li>
                                            <li>
                                                "after path"フラグをtrueに。
                                            </li>
                                            <li>
                                                <var>path_end</var> = <span class="element-name">‘<a
                                                        href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素が参照するパスの終端
                                                − <var>result</var>[<var>index</var>]の位置。
                                            </li>
                                        </ol>
                                    </li>
                                    <li>
                                        "after path"がtrueなら：
                                        <ol>
                                            <li>
                                                <var>result</var>[<var>index</var>]の"anchored chunk"がtrueなら"after
                                                path"フラグをfalseに。
                                            </li>
                                            <li>
                                                それ以外なら
                                                <var>result.x</var>[<var>index</var>] =
                                                <var>result.x</var>[<var>index</var>] + <var>path_end.x</var>、
                                                <var>result.y</var>[<var>index</var>] =
                                                <var>result.y</var>[<var>index</var>] + <var>path_end.y</var>。
                                            </li>
                                        </ol>
                                    </li>
                                </ol>
                            </li>
                            <li>
                                <var>index</var> = <var>index</var> + 1。
                            </li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li>
                <b><var>result</var>を返す</b>
            </li>
        </ol>

    </div>

    <hr />

    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2 要件:</th>
                <td>テキストレイアウト機能でCSSと整合。</td>
            </tr>
            <tr>
                <th>決議:</th>
                <td><a href="https://www.w3.org/2011/07/29-svg-minutes.html#item08">SVG
                        2はSVG固有でないテキストレイアウト（ホワイトスペース、双方向等）についてCSS3定義を使用する。</a></td>
            </tr>
            <tr>
                <th>目的:</th>
                <td>HTMLとSVGでテキストレイアウトの仕様・実装を共有できるようにするため。</td>
            </tr>
            <tr>
                <th>担当者:</th>
                <td>Cameron and Chris (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3004">ACTION-3004</a>,
                    <a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3005">ACTION-3005</a>)
                </td>
            </tr>
        </table>
    </div>

    <h2 id="TextLayoutPre" class="heading">11.6. 整形済みテキスト<a class="self-link" href="#TextLayoutPre"></a></h2>

    <p class="note">
        このオプションは基本的なSVG 1.1のテキストレイアウトに対応します。
    </p>

    <p>
        これはデフォルトのテキストレイアウト手法であり、明示的な<a
            href="text.html#TermContentArea">コンテンツ領域</a>が定義されていない場合に使われます。また、<em>パス上テキスト</em>のレイアウトの第一段階としても使用されます（ルールは若干変更されます）。このレイアウト方法では、自動的な改行やワードラップは行われません。名目上、テキストは無限の幅と高さを持つ矩形<a
            href="text.html#TermContentArea">コンテンツ領域</a>内で1行に描画されます。複数行のテキストを得るには、改行を事前計算して下記いずれかの方法を使います:
    </p>

    <ul>
        <li>
            <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素ひとつで<a
                class="property" href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>を<span
                class="prop-value">pre</span>
            または<span class="prop-value">pre-line</span>に設定。行間は<a class="property"
                href="text.html#LineHeightProperty">line-height</a>で指定。

            <p class="note">SVG 2で追加。</p>
        </li>

        <li>
            <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素ひとつで、複数の<span
                class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
            子要素を持ち、それぞれ<span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、
            <span class="attr-name">‘<a
                    href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>属性値で新しい行の開始位置を指定。
        </li>

        <li>
            複数の<span class="element-name">‘<a
                    href="text.html#TextElement"><span>text</span></a>’</span>要素を使い各行ごとに分割する（推奨されない。複数行選択できなくなる場合あり。<a
                href="text.html#TextSelection">テキスト選択とクリップボード操作</a>参照）。
        </li>
    </ul>

    <p class="note">
        以下のプロパティは<em>整形済み</em>テキストには適用されません:
        <a class="property" href="https://www.w3.org/TR/css-text-3/#text-align-property">text-align</a>, <a
            class="property" href="https://www.w3.org/TR/css-text-3/#text-align-last-property">text-align-last</a>, <a
            class="property" href="https://www.w3.org/TR/css-text-3/#line-break-property">line-break</a>,
        <a class="property" href="https://www.w3.org/TR/css-text-3/#word-break-property">word-break</a>, <a
            class="property" href="https://www.w3.org/TR/css-text-3/#hyphens-property">hyphens</a>, <a class="property"
            href="https://www.w3.org/TR/css-text-3/#overflow-wrap-property">word-wrap</a>,
        および<a class="property" href="https://www.w3.org/TR/css-text-3/#overflow-wrap-property">overflow-wrap</a>。
    </p>

    <h3 id="TextLayoutPreMultiline" class="heading">11.6.1. 'white-space'による複数行テキスト<a class="self-link"
            href="#TextLayoutPreMultiline"></a></h3>

    <p>
        <a class="property" href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>値<span
            class="prop-value">pre</span>
        または<span class="prop-value">pre-line</span>を使うことで複数行の整形済みテキストを作成できます。これらの場合、改行（line-feedまたはcarriage
        return）は強制改行として保持され、新しい<a href="text.html#TermLineBox">line box</a>を生成します。<a href="text.html#TermLineBox">line
            box</a>はCSSの規則に従って積み重ねられます。
    </p>

    <h3 id="TextLayoutPreAdjustments" class="heading">11.6.2. グリフの再配置<a class="self-link"
            href="#TextLayoutPreAdjustments"></a></h3>

    <p>
        テキストが基本的なCSSテキストレイアウト規則でレイアウトされた後、<a
            href="text.html#TermTypographicCharacterUnit">組版文字</a>はSVG独自のルールで再配置できます。絶対配置は<span class="attr-name">‘<a
                href="text.html#TextElementXAttribute"><span>x</span></a>’</span>や<span class="attr-name">‘<a
                href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性、または強制改行で指定でき、<a class="property"
            href="text.html#TextAnchorProperty">text-anchor</a>プロパティの影響を受ける場合があります。相対配置は<span class="attr-name">‘<a
                href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>や<span class="attr-name">‘<a
                href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>属性で指定できます。<a
            href="text.html#TermTypographicCharacterUnit">組版文字</a>は<span class="attr-name">‘<a
                href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>属性の値リストにより任意に回転できます。絶対配置（<a
            class="property" href="text.html#TextAnchorProperty">text-anchor</a>プロパティによる調整も含む）は、相対配置や回転より先に行われます。
    </p>

    <h2 id="TextLayoutAuto" class="heading">11.7. 自動折返しテキスト<a class="self-link" href="#TextLayoutAuto"></a></h2>

    <p>
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素で<a
            href="text.html#TermContentArea">コンテンツ領域</a>を指定するとテキストは自動的に折り返されます。<a
            href="text.html#TermContentArea">コンテンツ領域</a>はテキスト折返しの外側コンテナを定義します。<a
            href="text.html#TermWrappingContext">折返しコンテキスト</a>（除外領域群）が指定される場合もあります。実際の<a
            href="text.html#TermWrappingArea">折返し領域</a>は<a href="text.html#TermContentArea">コンテンツ領域</a>から<a
            href="text.html#TermWrappingContext">折返しコンテキスト</a>を差し引いて定義されます。さらに<a class="property"
            href="text.html#TextShapePadding">shape-padding</a>プロパティ値で折返しコンテキストが縮小される場合もあります。除外領域の有効面積は<a
            class="property" href="text.html#TextShapeMargin">shape-margin</a>プロパティ値で拡大できます。
    </p>

    <p>
        <a class="property" href="text.html#InlineSizeProperty">inline-size</a>プロパティで<a
            href="text.html#TermContentArea">コンテンツ領域</a>が定義されている場合、最初に描画される<a
            href="text.html#TermTypographicCharacterUnit">組版文字</a>に対応する<span class="attr-name">‘<a
                href="text.html#TextElementXAttribute"><span>x</span></a>’</span>および<span class="attr-name">‘<a
                href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性が初期<a
            href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>を定義します。コンテンツ領域が<a
            href="shapes.html#TermShapeElement">図形</a>内の場合、初期<a
            href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>は図形内の最初の行ボックスレイアウト後の最初の描画<a
            href="text.html#TermTypographicCharacterUnit">組版文字</a>の位置により決定されます。
    </p>

    <p>
        初期<a href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>を決定する場合を除き、自動折返しテキスト内の<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>や<span class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span>要素では<span class="attr-name">‘<a
                href="text.html#TextElementXAttribute"><span>x</span></a>’</span>や<span class="attr-name">‘<a
                href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性値は無視されます。
    </p>

    <p class="note">
        <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>と<span
            class="attr-name">‘<a
                href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性は、折返しテキストに対するSVG1.1レンダラ向けの自然なフォールバック機能を提供します。コンテンツ制作者は行ごとに<span
            class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>要素で区切り、各要素に<span
            class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>・<span
            class="attr-name">‘<a
                href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性を付与することで事前レイアウトできます。例えばフォールバックフォントでテキストを描画する場合、SVG2レンダラはこれら属性を無視し、フォールバックフォントのメトリクスでテキストを再フローします。SVG1.1レンダラは属性値を使用してテキストを描画し、形状と一致しなくても通常は可読となります。

        本節の多くの折返しテキスト例は、このメカニズムを利用して折返し未実装のブラウザでもテキストを描画しています。
    </p>

    <h3 id="TextLayoutAutoNotes" class="heading">11.7.1. テキスト折返しについての注意<a class="self-link"
            href="#TextLayoutAutoNotes"></a></h3>

    <p>
        以下の例は図形内テキストレイアウトに関するいくつかの課題を示します。
    </p>

    <h4 id="TextLayoutAutoNotesStart" class="heading">11.7.1.1. 最初の行の位置決め<a class="self-link"
            href="#TextLayoutAutoNotesStart"></a></h4>

    <p>
        任意形状の<a href="text.html#TermWrappingArea">折返し領域</a>の場合、最初の<a href="text.html#TermLineBox">line
            box</a>が必ずしも上端（縦書きの場合は側面）にぴったり収まるとは限りません。この場合、最初の<a href="text.html#TermLineBox">line box</a>は収まるまでシフトされます。
    </p>
    <p class="annotation">
        CSSでは、形状の端は1ピクセル×1ピクセルのフロート集として扱われます。
    </p>
    <p class="note">
        将来のCSS仕様で、複数の<a href="text.html#TermWrappingArea">折返し領域</a>間でテキストの整列を可能にする行グリッドが定義される可能性があります。
    </p>

    <div class="figure">
        <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-layout-firstline.svg"
            alt="最初の行が'The'、次の行が'first line'な2行テキスト画像。" />
        <p class="caption">
            上側の<a href="text.html#TermLineBox">line box</a>（薄青色の小さい矩形）は、最小限のテキストブロックで、<a
                href="text.html#TermWrappingArea">折返し領域</a>（薄青色のパス）内に収まるまで下方向に移動されます。<a
                href="text.html#TermLineBox">line box</a>には<a class="property"
                href="text.html#LineHeightProperty">line-height</a>プロパティ（ここでは1.25）の効果が含まれます。赤い矩形は各<a
                href="text.html#TermLineBox">line box</a>内のグリフを厳密に囲んでいます。
        </p>
    </div>

    <p class="annotation">
        これはSVG 1.2ドラフトとは異なり、折返し領域の上端が行グリッドの原点となっていました。最初の行はline-height分だけ下に移動し、形状内に収まっていました。
    </p>

    <h4 id="TextLayoutAutoNotesBrokenLines" class="heading">11.7.1.2. 行の分断<a class="self-link"
            href="#TextLayoutAutoNotesBrokenLines"></a></h4>

    <p>
        任意形状の<a href="text.html#TermWrappingArea">折返し領域</a>の場合、1行のテキストが複数部分に分断されることがあります。この場合、各部分に<a
            href="text.html#TermLineBox">line box</a>が生成されます。同じ行内の全<a href="text.html#TermLineBox">line
            box</a>の高さは同じでなければならず（すべて同じベースラインになるように）、この高さは行内すべてのグリフを見て計算されます。
    </p>
    <p class="annotation">
        このデフォルト動作は2016年シドニーCSS/SVG合同WG会議で合意されました。
    </p>
    <p class="note">
        将来のCSS仕様では、図形が複数部分に分かれた場合、どの部分を埋めるか（右端のみ、左端のみなど）を制御できるようになる可能性があります。
    </p>

    <div class="figure">
        <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-layout-brokenline.svg"
            alt="V字形内にレイアウトされたテキスト画像。" />
        <p class="caption">
            上段の行は2つの<a href="text.html#TermLineBox">line box</a>（薄青色の矩形）に分割され、各<a href="text.html#TermLineBox">line
                box</a>内のテキストは（'text-align:center'により）中央揃えされています。
        </p>
    </div>

    <h2 id="TextLayoutPath" class="heading">11.8. パス上のテキスト<a class="self-link" href="#TextLayoutPath"></a></h2>



    <p>
        SVGは、<span class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span>要素や<a
            href="shapes.html#TermBasicShapeElement">基本図形</a>のパス同等体で定義されたパスに沿ってテキストを配置できます。これは、<span
            class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素内にテキストを含め、<span
            class="attr-name">‘<a href="text.html#TextPathElementHrefAttribute"><span>href</span></a>’</span>属性で<a
            href="linking.html#TermURLReference">URL参照</a>として<span class="element-name">‘<a
                href="paths.html#PathElement"><span>path</span></a>’</span>要素または<a
            href="shapes.html#TermBasicShapeElement">基本図形</a>を指すか、<span class="attr-name">‘<a
                href="text.html#TextPathElementPathAttribute"><span>path</span></a>’</span>属性で直接パスデータを指定することで実現します。
    </p>

    <p class="note">
        基本図形に沿ってテキストを配置する機能はSVG 2で新規追加されました。
    </p>

    <p class="annotation">
        基本図形へのテキスト配置は
        <a href="https://www.w3.org/2015/02/12-svg-minutes.html#item05">2015年シドニー会議</a>で決議されました。
    </p>

    <p class="annotation">
        'd'属性によるパス直接指定はSVG 2で追加されました。'd'属性は、<a
            href="https://www.w3.org/2016/04/21-svg-minutes.html">2016年ロンドン編集会議</a>で決定され、同時に'd'はプレゼンテーション属性へ昇格し、'path'へ改名されました。
    </p>

    <p>
        パス上のテキストは概念的には、<a
            href="text.html#TextLayoutPre">整形済みテキスト</a>の1行と同様ですが、それをパスに沿わせて変形したものです。特記以外、整形済みテキストに適用されるすべてのプロパティはパス上のテキストにも適用されます。
    </p>

    <h3 id="TextPathElement" class="heading">11.8.1. <span class="element-name">‘textPath’</span>要素<a class="self-link"
            href="#TextPathElement"></a></h3>

    <div class="element-summary">
        <div class="element-summary-name"><span class="element-name">‘<dfn data-dfn-type="element" data-export=""
                    id="elementdef-textPath">textPath</dfn>’</span></div>
        <dl>
            <dt>カテゴリ:</dt>
            <dd><a href="struct.html#TermGraphicsElement">グラフィックス要素</a>, <a
                    href="render.html#TermRenderableElement">描画要素</a>, <a
                    href="text.html#TermTextContentElement">テキストコンテンツ要素</a>, <a
                    href="text.html#TermTextContentChildElement">テキストコンテンツ子要素</a></dd>
            <dt>内容モデル:</dt>
            <dd>以下の要素または文字データを任意個・任意順で含めることができます:<ul class="no-bullets">
                    <li><a href="struct.html#TermDescriptiveElement">記述要素</a><span class="expanding"> —
                            <span class="element-name">‘<a href="struct.html#DescElement"><span>desc</span></a>’</span>,
                            <span class="element-name">‘<a
                                    href="struct.html#TitleElement"><span>title</span></a>’</span>, <span
                                class="element-name">‘<a
                                    href="struct.html#MetadataElement"><span>metadata</span></a>’</span></span></li>
                    <li><a href="painting.html#TermPaintServerElement">ペイントサーバー要素</a><span class="expanding">
                            — <span class="element-name">‘<a
                                    href="pservers.html#LinearGradientElement"><span>linearGradient</span></a>’</span>,
                            <span class="element-name">‘<a
                                    href="pservers.html#RadialGradientElement"><span>radialGradient</span></a>’</span>,
                            <span class="element-name">‘<a
                                    href="pservers.html#PatternElement"><span>pattern</span></a>’</span></span></li>
                </ul><span class="element-name"><a href="linking.html#AElement"><span>a</span></a></span>, <span
                    class="element-name"><a
                        href="https://svgwg.org/specs/animations/#AnimateElement"><span>animate</span></a></span>, <span
                    class="element-name"><a
                        href="https://drafts.fxtf.org/css-masking-1/#ClipPathElement"><span>clipPath</span></a></span>,
                <span class="element-name"><a href="painting.html#MarkerElement"><span>marker</span></a></span>, <span
                    class="element-name"><a
                        href="https://drafts.fxtf.org/css-masking-1/#MaskElement"><span>mask</span></a></span>, <span
                    class="element-name"><a href="interact.html#ScriptElement"><span>script</span></a></span>, <span
                    class="element-name"><a
                        href="https://svgwg.org/specs/animations/#SetElement"><span>set</span></a></span>, <span
                    class="element-name"><a href="styling.html#StyleElement"><span>style</span></a></span>, <span
                    class="element-name"><a href="text.html#TextElement"><span>tspan</span></a></span>
            </dd>
            <dt>属性:</dt>
            <dd>
                <ul class="no-bullets">
                    <li><a href="struct.html#TermARIAAttribute">ARIA属性</a><span class="expanding"> — <span
                                class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-activedescendant"><span>aria-activedescendant</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-atomic"><span>aria-atomic</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-autocomplete"><span>aria-autocomplete</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-busy"><span>aria-busy</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-checked"><span>aria-checked</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-colcount"><span>aria-colcount</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-colindex"><span>aria-colindex</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-colspan"><span>aria-colspan</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-controls"><span>aria-controls</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-current"><span>aria-current</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-describedby"><span>aria-describedby</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-details"><span>aria-details</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-disabled"><span>aria-disabled</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-dropeffect"><span>aria-dropeffect</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-errormessage"><span>aria-errormessage</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-expanded"><span>aria-expanded</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-flowto"><span>aria-flowto</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-grabbed"><span>aria-grabbed</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-haspopup"><span>aria-haspopup</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-hidden"><span>aria-hidden</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-invalid"><span>aria-invalid</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-keyshortcuts"><span>aria-keyshortcuts</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-label"><span>aria-label</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-labelledby"><span>aria-labelledby</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-level"><span>aria-level</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-live"><span>aria-live</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-modal"><span>aria-modal</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-multiline"><span>aria-multiline</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-multiselectable"><span>aria-multiselectable</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-orientation"><span>aria-orientation</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-owns"><span>aria-owns</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-placeholder"><span>aria-placeholder</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-posinset"><span>aria-posinset</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-pressed"><span>aria-pressed</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-readonly"><span>aria-readonly</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-relevant"><span>aria-relevant</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-required"><span>aria-required</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-roledescription"><span>aria-roledescription</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-rowcount"><span>aria-rowcount</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-rowindex"><span>aria-rowindex</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-rowspan"><span>aria-rowspan</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-selected"><span>aria-selected</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-setsize"><span>aria-setsize</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-sort"><span>aria-sort</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuemax"><span>aria-valuemax</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuemin"><span>aria-valuemin</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuenow"><span>aria-valuenow</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuetext"><span>aria-valuetext</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="struct.html#RoleAttribute"><span>role</span></a>’</span></span></li>
                    <li><a href="struct.html#TermConditionalProcessingAttribute">条件付き処理属性</a><span class="expanding"> —
                            <span class="attr-name">‘<a
                                    href="struct.html#RequiredExtensionsAttribute"><span>requiredExtensions</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="struct.html#SystemLanguageAttribute"><span>systemLanguage</span></a>’</span></span>
                    </li>
                    <li><a href="struct.html#TermCoreAttribute">コア属性</a><span class="expanding"> — <span
                                class="attr-name">‘<a href="struct.html#IDAttribute"><span>id</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="struct.html#SVGElementTabindexAttribute"><span>tabindex</span></a>’</span>,
                            <span class="attr-name">‘<a href="struct.html#LangAttribute"><span>lang</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>, <span
                                class="attr-name">‘<a href="styling.html#ClassAttribute"><span>class</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="styling.html#StyleAttribute"><span>style</span></a>’</span></span></li>
                    <li><a
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers">グローバルイベント属性</a><span
                            class="expanding"> — <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncancel</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncanplay</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncanplaythrough</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onchange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onclick</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onclose</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncuechange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondblclick</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondrag</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragend</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragenter</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragexit</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragleave</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragover</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragstart</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondrop</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondurationchange</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onemptied</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onended</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onerror</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onfocus</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oninput</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oninvalid</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onkeydown</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onkeypress</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onkeyup</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onload</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onloadeddata</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onloadedmetadata</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onloadstart</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmousedown</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseenter</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseleave</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmousemove</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseout</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseover</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseup</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmousewheel</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onpause</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onplay</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onplaying</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onprogress</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onratechange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onreset</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onresize</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onscroll</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onseeked</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onseeking</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onselect</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onshow</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onstalled</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onsubmit</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onsuspend</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ontimeupdate</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ontoggle</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onvolumechange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onwaiting</span></a>’</span></span></li>
                    <li><a
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#documentandelementeventhandlers">ドキュメント要素イベント属性</a><span
                            class="expanding"> — <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncopy</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncut</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onpaste</span></a>’</span></span></li>
                    <li><a href="interact.html#EventAttributes">グラフィックスイベント属性</a><span class="expanding"> —
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onfocusin</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onfocusout</span></a>’</span></span></li>
                    <li><a href="styling.html#TermPresentationAttribute">プレゼンテーション属性</a><span class="expanding"> —
                        </span></li>
                    <li><a href="linking.html#XLinkRefAttrs">非推奨xlink属性</a><span class="expanding"> —
                            <span class="attr-name">‘<a
                                    href="linking.html#XLinkHrefAttribute"><span>xlink:href</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="linking.html#XLinkTitleAttribute"><span>xlink:title</span></a>’</span></span>
                    </li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextElementLengthAdjustAttribute"><span>lengthAdjust</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span></li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextPathElementPathAttribute"><span>path</span></a>’</span></li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextPathElementHrefAttribute"><span>href</span></a>’</span></li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextPathElementMethodAttribute"><span>method</span></a>’</span></li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextPathElementSpacingAttribute"><span>spacing</span></a>’</span></li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextPathElementSideAttribute"><span>side</span></a>’</span></li>
                </ul>
            </dd>
            <dt>DOMインターフェース:</dt>
            <dd>
                <ul class="no-bullets">
                    <li><a class="idlinterface" href="text.html#InterfaceSVGTextPathElement">SVGTextPathElement</a></li>
                </ul>
            </dd>
        </dl>
    </div>

    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2 要件:</th>
                <td>textPath stretch methodについてより正確な説明を持つこと。</td>
            </tr>
            <tr>
                <th>決議:</th>
                <td><a href="https://www.w3.org/2011/11/17-svg-irc#T22-23-10"><span
                            class="attr-value">method="stretch"</span>について<span
                            class="element-name">>'textPath'</span>要素で明確化する。</a></td>
            </tr>
            <tr>
                <th>目的:</th>
                <td>機能の相互運用性向上。</td>
            </tr>
            <tr>
                <th>担当者:</th>
                <td>Cameron（アクションなし）</td>
            </tr>
        </table>
    </div>

    <p>
        <span class="attr-name">‘<a href="text.html#TextPathElementPathAttribute"><span>path</span></a>’</span>属性と<span
            class="attr-name">‘<a href="text.html#TextPathElementHrefAttribute"><span>href</span></a>’</span>属性は、<a
            href="text.html#TermTypographicCharacterUnit">組版文字</a>を描画するパスを指定します。
    </p>
    <p>
        両方の属性が<span class="element-name">‘<a
                href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素に指定されている場合、使用されるパスは以下の優先順に従います:
    </p>
    <ol>
        <li><span class="attr-name">‘<a href="text.html#TextPathElementPathAttribute"><span>path</span></a>’</span>
            属性</li>
        <li><span class="attr-name">‘<a href="text.html#TextPathElementHrefAttribute"><span>href</span></a>’</span>
            属性</li>
        <li><span class="attr-name">‘<a href="linking.html#XLinkHrefAttribute"><span>xlink:href</span></a>’</span>
            属性</li>
    </ol>
    <p>
        <span class="attr-name">‘<a
                href="text.html#TextPathElementPathAttribute"><span>path</span></a>’</span>属性にエラーが含まれている場合は、
        <span class="attr-name">‘<a href="text.html#TextPathElementHrefAttribute"><span>href</span></a>’</span>
        属性を使用しなければなりません。
    </p>

    <h3 id="TextPathAttributes" class="heading">11.8.2. 属性<a class="self-link" href="#TextPathAttributes"></a>
    </h3>

    <dl class="attrdef-list-svg2">

        <dt id="TextPathElementStartOffsetAttribute"><span class="adef">startOffset</span></dt>
        <dd>
            <p>
                パスの開始点からのオフセットで、初期の現在のテキスト位置を表します。これはユーザーエージェントの<a
                    href="paths.html#DistanceAlongAPath">パス上の距離</a>アルゴリズムで計算され、パスが<span class="element-name">‘<a
                        href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素の座標系に変換された後に適用されます。
            </p>
            <p>
                パーセンテージ以外の<a href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a>が指定された場合、<span
                    class="attr-name">‘<a
                        href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>は、<span
                    class="element-name">‘<a
                        href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素の現在のユーザー座標系でパス上の距離を表します。
            </p>
            <p>パーセンテージが指定された場合、<span class="attr-name">‘<a
                        href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>はパス全体の距離の割合を表します。したがって、<span
                    class="attr-value">startOffset="0%"</span>はパスの開始点、<span
                    class="attr-value">startOffset="100%"</span>はパスの終点を示します。
            </p>

            <p class="note">
                負の値やパス長より大きい値（例：150%）も許可されます。
            </p>
            <p class="annotation">
                値を0%-100%に制限すると、テキストがパス上を移動するような効果を簡単に作成できなくなります。
            </p>

            <p>
                パス上にミッドポイントがない<a href="text.html#TermTypographicCharacterUnit">組版文字</a>は描画されません。
            </p>
            <div class="figure">
                <img alt="startOffsetの値によるクリッピング例"
                    src="https://www.w3.org/TR/SVG2/images/text/text-path-startoffset.svg" />
                <p class="caption">
                    <span class="attr-name">‘<a
                            href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>属性値ごとの描画例。上から下へ：デフォルト値、50%、-50%。
                </p>
                <p class="annotation">
                    最下段のパスは左側のみ「path.」が表示されるべきです。ChromeとSafariは0%〜100%外のoffsetに非対応。Chromeバグ：https://bugs.chromium.org/p/chromium/issues/detail?id=476554
                </p>
            </div>

            <p>
                単一の<a href="paths.html#TermOpenSubpath">閉じたサブパス</a>（<a
                    href="shapes.html#TermBasicShapeElement">基本図形</a>の同等パス含む）からなる場合、<a
                    href="text.html#TermTypographicCharacterUnit">組版文字</a>はパス上を一周して描画されます。テキストは<a class="property"
                    href="text.html#TextAnchorProperty">text-anchor</a>プロパティで決定される位置に、<span class="attr-name">‘<a
                        href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>属性で配置されます。<span
                    class="prop-value">start</span>（<span
                    class="prop-value">end</span>）値の場合、テキストはラインの開始（終了）から次に初期位置に戻るまで描画されます。<span
                    class="prop-value">middle</span>の場合は、中央から両方向に、初期位置から等距離の点まで描画されます。
            </p>

            <div class="figure">
                <img alt="円形パス上でstartOffset値による描画例"
                    src="https://www.w3.org/TR/SVG2/images/text/text-path-startoffset2.svg" />
                <p class="caption">
                    <span class="element-name">‘<a
                            href="shapes.html#CircleElement"><span>circle</span></a>’</span>参照のパス上テキストにおける<span
                        class="attr-name">‘<a
                            href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>値の描画例。左：0。右：75%または-25%。赤円はパスの開始点（円の正規分解後）を示す。
                </p>
            </div>

            <div class="figure">
                <img alt="text-anchor値による円形パス上テキスト描画例"
                    src="https://www.w3.org/TR/SVG2/images/text/text-path-startoffset3.svg" />
                <p class="caption">
                    <span class="element-name">‘<a
                            href="shapes.html#CircleElement"><span>circle</span></a>’</span>参照のパス上テキストにおける<a
                        class="property" href="text.html#TextAnchorProperty">text-anchor</a>属性値ごとの描画例。
                    左：'start'。中央：'middle'。右：'end'。
                    赤丸はパスの開始点（円の正規分解後）を、青四角は描画開始点（startOffset値75%でパス開始からシフト）を示す。灰色の矢印は<a
                        href="text.html#TermTypographicCharacterUnit">組版文字</a>配置の方向と停止点。<a class="property"
                        href="text.html#DirectionProperty">direction</a>が<span class="prop-value">rtl</span>なら矢印は逆向き。
                </p>
            </div>

            <p class="annotation">
                基本図形で全グリフを描画することは2015年シドニー会議で合意済（議事録には未記載）。単一閉じたサブパス・１周に限定し、'startOffset'属性で制御するのは2016年ロンドン編集会議で合意。
            </p>

            <dl class="attrdef-svg2">
                <dt>値</dt>
                <dd><a href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a> |
                    <a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a>
                </dd>
                <dt><a href="types.html#TermInitialValue">初期値</a></dt>
                <dd>0</dd>
                <dt><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a></dt>
                <dd>はい</dd>
            </dl>

        </dd>

        <dt id="TextPathElementMethodAttribute"><span class="adef">method</span></dt>
        <dd>
            <p>
                パス上でテキストを描画する方法を示します。
            </p>
            <p>
                <span class="attr-value">align</span>値の場合、<a
                    href="text.html#TermTypographicCharacterUnit">組版文字</a>は単純な2×3行列変換で描画され、<a
                    href="text.html#TermTypographicCharacterUnit">組版文字</a>の伸縮・歪みはありません。通常、各<a
                    href="text.html#TermTypographicCharacterUnit">組版文字</a>ごとに補助回転・スケーリング・移動変換が行われます。そのため、<span
                    class="attr-value">align</span>では、組版文字が接続されるよう設計されたフォント（筆記体など）の場合、パス上に描画すると接続が正しく揃わない場合があります。
            </p>
            <p>
                <span class="attr-value">stretch</span>値の場合、<a
                    href="text.html#TermTypographicCharacterUnit">組版文字</a>アウトラインがパスに変換され、全端点・制御点がパスの垂直ベクトル上に調整され、グリフが伸縮・歪みます。この方法では、筆記体のような接続された<a
                    href="text.html#TermTypographicCharacterUnit">組版文字</a>も接続を維持できます。（非垂直直線パス区間は、横方向直線パスがパス上に描画される<a
                    href="text.html#TermTypographicCharacterUnit">組版文字</a>とのオフセットが（概ね）一定となるよう、ベジエ曲線に変換されるべきです。）
            </p>

            <div class="figure">
                <img alt="円弧上の英語とアラビア語テキスト" src="https://www.w3.org/TR/SVG2/images/text/text-path-method.png" />
                <p class="caption">
                    <span class="attr-name">‘<a
                            href="text.html#TextPathElementMethodAttribute"><span>method</span></a>’</span>値ごとのパス上テキスト描画例：左：'align'。右：'stretch'。
                </p>
            </div>

            <dl class="attrdef-svg2">
                <dt>値</dt>
                <dd>align | stretch</dd>
                <dt><a href="types.html#TermInitialValue">初期値</a></dt>
                <dd>align</dd>
                <dt><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a></dt>
                <dd>はい</dd>
            </dl>
        </dd>

        <dt id="TextPathElementSpacingAttribute"><span class="adef">spacing</span></dt>
        <dd>
            <p>
                パス上に描画される<a href="text.html#TermTypographicCharacterUnit">組版文字</a>間のスペースをユーザーエージェントがどのように決定するかを示します。
            </p>
            <p>
                <span class="attr-value">exact</span>値の場合、<a href="text.html#TermTypographicCharacterUnit">組版文字</a>は<a
                    href="text.html#TextpathLayoutRules">パス上テキストのレイアウト規則</a>で指定されたスペーシングルールに厳密に従って描画されます。
            </p>
            <p>
                <span class="attr-value">auto</span>値の場合、ユーザーエージェントはパス上テキストレイアウトアルゴリズムを使い、視覚的に美しい結果となるようスペーシングを調整します。
            </p>

            <dl class="attrdef-svg2">
                <dt>値</dt>
                <dd>auto | exact</dd>
                <dt><a href="types.html#TermInitialValue">初期値</a></dt>
                <dd>exact</dd>
                <dt><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a></dt>
                <dd>はい</dd>
            </dl>
        </dd>

        <dt id="TextPathElementSideAttribute"><span class="adef">side</span></dt>
        <dd>
            <p>
                テキストをパスのどちら側（パス方向に対して）に配置するかを決定します。<span class="attr-value">right</span>値を指定するとパスが反転します。
            </p>
            <div class="figure">
                <img alt="side値による円形パス上グリフ描画（leftは外側、rightは内側）"
                    src="https://www.w3.org/TR/SVG2/images/text/text-path-side.svg" />
                <p class="caption">
                    <span class="element-name">‘<a
                            href="shapes.html#CircleElement"><span>circle</span></a>’</span>参照のパス上テキストにおける<span
                        class="attr-name">‘<a
                            href="text.html#TextPathElementSideAttribute"><span>side</span></a>’</span>属性値ごとの描画例。左：<span
                        class="attr-value">left</span>。右：<span class="attr-value">right</span>。
                </p>
            </div>

            <p class="note">
                SVG 2で追加。閉じたサブパスや基本図形（矩形、円、楕円等）で内側・外側どちらにもテキストを配置可能に。
            </p>
            <p class="annotation">
                'side'追加は2015年シドニー会議で決定。
            </p>

            <dl class="attrdef-svg2">
                <dt>値</dt>
                <dd>left | right</dd>
                <dt><a href="types.html#TermInitialValue">初期値</a></dt>
                <dd>left</dd>
                <dt><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a></dt>
                <dd>はい</dd>
            </dl>

        </dd>

        <dt id="TextPathElementPathAttribute"><span class="adef">path</span></dt>
        <dd>
            <p><a href="paths.html#PathDataBNF" class="syntax">パスデータ</a>文字列で、<a
                    href="text.html#TermTypographicCharacterUnit">組版文字</a>を描画するパスを記述します。
                空文字列の場合、その要素にはパスデータがありません。
                これは<span class="element-name">‘<a
                        href="text.html#TextPathElement"><span>textPath</span></a>’</span>内のテキストが描画されず、<span
                    class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素の<a
                    href="coords.html#TermBoundingBox">バウンディングボックス</a>にも寄与しません。
                属性が指定されていない場合は、<span class="attr-name">‘<a
                        href="text.html#TextPathElementHrefAttribute"><span>href</span></a>’</span>で指定されたパスが使用されます。
            </p>
            <dl class="attrdef-svg2">
                <dt>値</dt>
                <dd><a href="paths.html#PathDataBNF" class="syntax">パスデータ</a></dd>
                <dt><a href="types.html#TermInitialValue">初期値</a></dt>
                <dd>(なし)</dd>
                <dt><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a></dt>
                <dd>はい</dd>
            </dl>

        </dd>
        <dt id="TextPathElementHrefAttribute"><span class="adef">href</span></dt>
        <dd>
            <p>
                グリフを描画する<span class="element-name">‘<a
                        href="paths.html#PathElement"><span>path</span></a>’</span>要素または<a
                    href="shapes.html#TermBasicShapeElement">基本図形</a>要素への<a
                    href="linking.html#URLReference">URL参照</a>。<span class="attr-name">‘<a
                        href="text.html#TextPathElementPathAttribute"><span>path</span></a>’</span>属性がない場合に使用されます。
                この属性を使い、&lt;url>が無効（例：該当する要素が存在しない、参照先が<span class="element-name">‘<a
                        href="paths.html#PathElement"><span>path</span></a>’</span>要素や<a
                    href="shapes.html#TermBasicShapeElement">基本図形</a>でない等）の場合、<span class="element-name">‘<a
                        href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素はエラーとなり、内容全体が描画されません。
            </p>
            <p>
                <a href="linking.html#linkRefAttrs">URL参照属性</a>や<a
                    href="linking.html#XLinkRefAttrs">非推奨XLink属性</a>の共通処理を参照してください。
            </p>

            <dl class="attrdef-svg2">
                <dt>値</dt>
                <dd>URL <a href="types.html#attribute-url" class="syntax">[URL]</a></dd>
                <dt><a href="types.html#TermInitialValue">初期値</a></dt>
                <dd>上記参照</dd>
                <dt><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a></dt>
                <dd>はい</dd>
            </dl>

        </dd>

    </dl>

    <p>
        参照された<span class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span>要素や<a
            href="shapes.html#TermBasicShapeElement">基本図形</a>要素内のパスデータ座標は、現在の<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素の座標系と同じであるとみなされます（<span
            class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span>要素で定義された座標系でなく）。参照先<span
            class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span>要素や<a
            href="shapes.html#TermBasicShapeElement">基本図形</a>要素の<a class="property"
            href="coords.html#TransformProperty">transform</a>属性は、現在の<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素の現在のユーザー座標系に対する補助変換を表します（<span
            class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素の<a class="property"
            href="coords.html#TransformProperty">transform</a>プロパティによる調整も含む）。例：
    </p>

    <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg">
  &lt;g <span style="font-weight:bold; color:red">transform="translate(25,25)"</span>>
    &lt;defs>
      &lt;path id="path1" <span style="font-weight:bold; color:green">transform="scale(2)"</span> path="M0,10 L40,20 80,10" fill="none" stroke="red"/>
    &lt;/defs>
  &lt;/g>
  &lt;text <span style="font-weight:bold; color:blue">transform="rotate(45)"</span>>
    &lt;textPath href="#path1">Text on a path&lt;/textPath>
  &lt;/text>
&lt;/svg>
  </pre>

    <p>
        は次と同じ効果となるべきです：
    </p>

    <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg">
  &lt;g <span style="font-weight:bold; color:blue">transform="rotate(45)"</span>>
    &lt;defs>
      &lt;path id="path1" <span style="font-weight:bold; color:green">transform="scale(2)"</span> path="M0,10 L40,20 80,10" fill="none" stroke="red"/>
    &lt;/defs>
    &lt;text>
      &lt;textPath href="#path1">Text on a path&lt;/textPath>
    &lt;/text>
  &lt;/g>
&lt;/svg>
  </pre>

    <p>
        さらに、次とも等価です：
    </p>

    <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg">
  &lt;text <span style="font-weight:bold; color:blue">transform="rotate(45)"</span>>
    &lt;textPath <span style="font-weight:bold; color:green">path="M0,20 L80,40 160,20"</span>
            >Text on a path&lt;/textPath>
  &lt;/text>
&lt;/svg>
  </pre>

    <p>
        <code style="font-weight:bold; color:red">transform="translate(25,25)"</code>は<span class="element-name">‘<a
                href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素には効果がありませんが、<code
            style="font-weight:bold; color:blue">transform="rotate(45)"</code>は<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素と、パス上テキストの参照図形として使われる<span
            class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span>要素の両方に適用されます。また、<code
            style="font-weight:bold; color: green">transform="scale(2)"</code>はパスを拡大（単純な直線パスでは全座標を2倍）しますが、パス上のテキスト自体は拡大されません。
    </p>

    <p id="ExampleToap01">
        <span class="example-ref">例 toap01</span>は、パス上テキストの簡単な例です：
    </p>

    <div class="example">
        <pre class="xml">&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="12cm" height="3.6cm" viewBox="0 0 1000 300" version="1.1"
     xmlns="http://www.w3.org/2000/svg">
  &lt;defs>
    &lt;path id="MyPath"
          d="M 100 200
             C 200 100 300   0 400 100
             C 500 200 600 300 700 200
             C 800 100 900 100 900 100" />
  &lt;/defs>
  &lt;desc>例 toap01 - パス上の簡単なテキスト&lt;/desc>

  &lt;use href="#MyPath" fill="none" stroke="red"  />
  &lt;text font-family="Verdana" font-size="42.5" fill="blue" >
    &lt;textPath href="#MyPath">
      We go up, then we go down, then up again
    &lt;/textPath>
  &lt;/text>

  &lt;!-- 'rect'要素でビューポートのアウトラインを表示 -->
  &lt;rect x="1" y="1" width="998" height="298"
        fill="none" stroke="blue" stroke-width="2" />
&lt;/svg></pre>
        <div class="figure"><img alt="例 toap01 — パス上の簡単なテキスト" src="https://www.w3.org/TR/SVG2/images/text/toap01.png" />
            <p class="caption">例 toap01</p>
        </div>
        <p class="view-as-svg"><a href="https://www.w3.org/TR/SVG2/images/text/toap01.svg">この例をSVGとして表示
                （SVG対応ブラウザのみ）</a>
        </p>
    </div>

    <p id="ExampleToap02">
        <span class="example-ref">例 toap02</span>は、<span class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span>要素を<span class="element-name">‘<a
                href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素内で使い、スタイル属性や現在のテキスト位置を調整して特定のグリフ描画前に位置を変更する方法を示します。最初の"up"は赤色で塗りつぶされています。<span
            class="attr-name">‘<a
                href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>属性で"up"がベースラインから持ち上げられています。
    </p>

    <p class="note">
        <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、<span
            class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、<span
            class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、<span
            class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>、<span
            class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>属性は<span
            class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>および<span
            class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span>要素でのみ指定可能ですが、パス上テキストのグリフ描画にも影響する場合があります（<a
            href="text.html#TextpathLayoutRules">パス上テキストのレイアウト規則</a>参照）。
    </p>

    <div class="example">
        <pre class="xml">&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="12cm" height="3.6cm" viewBox="0 0 1000 300" version="1.1"
     xmlns="http://www.w3.org/2000/svg">
  &lt;defs>
    &lt;path id="MyPath"
          d="M 100 200
             C 200 100 300   0 400 100
             C 500 200 600 300 700 200
             C 800 100 900 100 900 100" />
  &lt;/defs>
  &lt;desc>例 toap02 - textPath内のtspan&lt;/desc>

  &lt;use href="#MyPath" fill="none" stroke="red"  />
  &lt;text font-family="Verdana" font-size="42.5" fill="blue" >
    &lt;textPath href="#MyPath">
      We go
      &lt;tspan dy="-30" fill="red" >
        up
      &lt;/tspan>
      &lt;tspan dy="30">
        ,
      &lt;/tspan>
      then we go down, then up again
    &lt;/textPath>
  &lt;/text>

  &lt;!-- 'rect'要素でビューポートのアウトラインを表示 -->
  &lt;rect x="1" y="1" width="998" height="298"
        fill="none" stroke="blue" stroke-width="2" />
&lt;/svg></pre>
        <div class="figure"><img alt="例 toap02 — textPath内のtspan"
                src="https://www.w3.org/TR/SVG2/images/text/toap02.png" />
            <p class="caption">例 toap02</p>
        </div>
        <p class="view-as-svg"><a href="https://www.w3.org/TR/SVG2/images/text/toap02.svg">この例をSVGとして表示
                （SVG対応ブラウザのみ）</a>
        </p>
    </div>

    <p id="ExampleToap03">
        <span class="example-ref">例 toap03</span>は、<span class="element-name">‘<a
                href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素で<span class="attr-name">‘<a
                href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>属性を使い、テキスト文字列の開始位置をパス上の特定位置に指定する例です。パスの終端からはみ出したグリフは描画されません（<a
            href="text.html#TextpathLayoutRules">パス上テキストのレイアウト規則</a>参照）。
    </p>

    <div class="example">
        <pre class="xml">&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="12cm" height="3.6cm" viewBox="0 0 1000 300" version="1.1"
     xmlns="http://www.w3.org/2000/svg">
  &lt;defs>
    &lt;path id="MyPath"
          d="M 100 200
             C 200 100 300   0 400 100
             C 500 200 600 300 700 200
             C 800 100 900 100 900 100" />
  &lt;/defs>
  &lt;desc>例 toap03 - startOffset属性付きパス上テキスト&lt;/desc>

  &lt;use href="#MyPath" fill="none" stroke="red"  />
  &lt;text font-family="Verdana" font-size="42.5" fill="blue" >
    &lt;textPath href="#MyPath" startOffset="80%">
      We go up, then we go down, then up again
    &lt;/textPath>
  &lt;/text>

  &lt;!-- 'rect'要素でビューポートのアウトラインを表示 -->
  &lt;rect x="1" y="1" width="998" height="298"
        fill="none" stroke="blue" stroke-width="2" />
&lt;/svg></pre>
        <div class="figure"><img alt="例 toap03 — startOffset属性付きパス上テキスト"
                src="https://www.w3.org/TR/SVG2/images/text/toap03.png" />
            <p class="caption">例 toap03</p>
        </div>
        <p class="view-as-svg"><a href="https://www.w3.org/TR/SVG2/images/text/toap03.svg">この例をSVGとして表示
                （SVG対応ブラウザのみ）</a>
        </p>
    </div>

    <h3 id="TextpathLayoutRules" class="heading">11.8.3. パス上テキストのレイアウト規則<a class="self-link"
            href="#TextpathLayoutRules"></a></h3>

    <p>
        概念的には、パス上テキストの場合、対象パスは水平方向または垂直方向の直線セグメントに引き伸ばされます。横書きテキストレイアウトフローの場合、パスは仮想的な水平直線セグメントに引き伸ばされ、パスの開始点が線分の左端にマッピングされます。縦書きテキストレイアウトフローの場合、パスは仮想的な垂直直線セグメントに引き伸ばされ、パスの開始点が線分の上端にマッピングされます。標準の<a
            href="text.html#TextLayoutAlgorithm">テキストレイアウト</a>規則が仮想直線セグメントに適用され、その結果が対象パスにマッピングされます。縦書きおよび双方向<a
            href="text.html#TextLayoutAlgorithm">テキストレイアウト</a>規則もパス上テキストに適用されます。
    </p>
    <p>
        パス上の各グリフの向きは個別に決定されます。横書きテキストレイアウトフローの場合、グリフのデフォルトの向き（「上」方向）は、グリフがパスに接続される交点から始まり、その交点での曲線の角度から90度反時計回り方向を指すベクトルに沿います。縦書きテキストレイアウトフローの場合、デフォルトの向きは、グリフがパスに接続される交点から始まり、その交点での曲線の角度から180度方向を指すベクトルに沿います。
    </p>

    <div class="figure">
        <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/glyph-textpath.svg"
            alt="左：パス上の横書き'A'。右：パス上の縦書き'字'。" />
        <p class="caption">
            パス上におけるデフォルトのグリフ向き。
            左：横書き。右：縦書き。
        </p>
    </div>

    <p id="ExampleToap04">
        <span class="example-ref">例 toap04</span>は、直線水平・垂直テキストの基本<a
            href="text.html#TextLayoutAlgorithm">テキストレイアウト</a>規則を補足する、パス上テキストの特有のレイアウト規則を説明するために使います。
    </p>

    <div class="example">
        <pre class="xml">&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="12cm" height="3.6cm" viewBox="0 0 1000 300" version="1.1"
     xmlns="http://www.w3.org/2000/svg">
  &lt;defs>
    &lt;path id="MyPath"
          d="M 100 125
             C 150 125 250 175 300 175
             C 350 175 450 125 500 125
             C 550 125 650 175 700 175
             C 750 175 850 125 900 125" />
  &lt;/defs>
  &lt;desc>例 toap04 - パス上テキストのレイアウト規則&lt;/desc>

  &lt;use href="#MyPath" fill="none" stroke="red"  />
  &lt;text font-family="Verdana" font-size="60" fill="blue" letter-spacing="2" >
    &lt;textPath href="#MyPath">
      Choose shame or get war
    &lt;/textPath>
  &lt;/text>

  &lt;!-- 'rect'要素でビューポートのアウトラインを表示 -->
  &lt;rect x="1" y="1" width="998" height="298"
        fill="none" stroke="blue" stroke-width="2" />
&lt;/svg></pre>
        <div class="figure"><img alt="例 toap04 — パス上テキストのレイアウト規則"
                src="https://www.w3.org/TR/SVG2/images/text/toap04.png" />
            <p class="caption">例 toap04</p>
        </div>
        <p class="view-as-svg"><a href="https://www.w3.org/TR/SVG2/images/text/toap04.svg">この例をSVGとして表示
                （SVG対応ブラウザのみ）</a>
        </p>
    </div>

    <p>
        次の図は、<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素内の最初のグリフを拡大表示したものです。
    </p>

    <img alt="パス上テキストの拡大図" src="https://www.w3.org/TR/SVG2/images/text/toap05.png" width="288" height="91" />

    <p>
        上部の小さな点はグリフがパスに接続される点です。グリフを囲むボックスは、グリフがパスの接点での曲線の接線に平行になるよう回転されていることを示します。またボックスはグリフの<dfn id="CharWidth"
            data-dfn-type="dfn" data-export="">charwidth</dfn>（横書きテキストレイアウトでグリフを描画するときに現在のテキスト位置が水平に進む量）も示します。
    </p>

    <p>
        次の図はさらに拡大して詳細なレイアウト規則を示します。
    </p>

    <img alt="パス上テキストの詳細レイアウト図" src="https://www.w3.org/TR/SVG2/images/text/toap06.png" width="288" height="176" />

    <p>
        左から右の横書きテキストをパス上にレイアウトする場合（グリフ向きが<a
            href="text.html#TermInlineBaseDirection">インライン基本方向</a>に垂直になる場合）、レイアウト規則は以下の通りです：
    </p>

    <ul>
        <li>
            最初のグリフ用の<dfn id="StartPointOnPath" data-dfn-type="dfn" data-export="">startpoint-on-the-path</dfn>を、属性<span
                class="attr-name">‘<a
                    href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>とプロパティ<a
                class="property" href="text.html#TextAnchorProperty">text-anchor</a>で決定します。<span
                class="prop-value">text-anchor:start</span>の場合、startpoint-on-the-pathはパス開始点から<span class="attr-name">‘<a
                    href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>距離だけ進んだ点（ユーザーエージェントの<a
                href="paths.html#DistanceAlongAPath">パス上の距離</a>アルゴリズム計算）。

            <span class="prop-value">text-anchor:middle</span>の場合、startpoint-on-the-pathはパス開始点から[<span
                class="attr-name">‘<a
                    href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>−全グリフadvance値合計/2]だけ進んだ点。

            <span class="prop-value">text-anchor:end</span>の場合、startpoint-on-the-pathはパス開始点から[<span
                class="attr-name">‘<a
                    href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>−全グリフadvance値合計]だけ進んだ点。最初のグリフ描画前に、startpoint-on-the-pathの水平成分は、<span
                class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>属性値（<span
                class="element-name">‘<a
                    href="text.html#TextElement"><span>tspan</span></a>’</span>等）のような各種水平方向整列テキスト属性によって補正されます。（上図ではstartpoint-on-the-pathは左端の点。）
        </li>

        <li>
            グリフのcharwidth（横書きテキストで描画時にテキスト位置が水平に進む量）を決定します。（上図ではcharwidthはボックスの両側の点間距離。）
        </li>

        <li>
            このグリフ用のstartpoint-on-the-pathからcharwidthだけパス上を進んだ点を決定します（ユーザーエージェントの<a
                href="paths.html#DistanceAlongAPath">パス上の距離</a>アルゴリズム）。この点がグリフの<dfn id="EndPointOnPath"
                data-dfn-type="dfn" data-export="">endpoint-on-the-path</dfn>です。（上図では右端の点。）
        </li>

        <li>
            <dfn id="MidPointOnPath" data-dfn-type="dfn"
                data-export="">midpoint-on-the-path</dfn>を決定します。これはstartpoint-on-the-pathとendpoint-on-the-pathの「中間」（距離計算またはパラメトリック計算どちらでも可）となるパス上の点です。（上図では白い点。）
        </li>

        <li>
            <dfn id="GlyphMidline" data-dfn-type="dfn"
                data-export="">glyph-midline</dfn>を決定します。これはグリフ座標系でグリフのx軸中央を通る垂直線です。（上図では破線で表示。）
        </li>

        <li>
            グリフを、glyph-midlineがmidpoint-on-the-pathを通過し、かつstartpoint-on-the-pathとendpoint-on-the-pathを結ぶ線に垂直となるよう配置します。
        </li>

        <li>
            <a class="property" href="text.html#AlignmentBaselineProperty">alignment-baseline</a>プロパティや、<span
                class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>要素の<span
                class="attr-name">‘<a
                    href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>属性値等に基づき、midpoint-on-the-pathに対してグリフを垂直方向に整列します。上記例では<a
                class="property" href="text.html#AlignmentBaselineProperty">alignment-baseline</a>は未指定なので初期値<span
                class="prop-value">alignment-baseline:baseline</span>が使用され、<span class="element-name">‘<a
                    href="text.html#TextElement"><span>tspan</span></a>’</span>要素はないのでグリフのベースラインがmidpoint-on-the-pathに整列します。
        </li>

        <li>
            以降の各グリフでは、前のendpoint-on-the-pathを新しいstartpoint-on-the-pathとし、フォントの水平方向カーニングテーブルや各種属性・プロパティ（スペーシングプロパティ（<a
                class="property" href="https://www.w3.org/TR/css-text-3/#letter-spacing-property">letter-spacing</a>や<a
                class="property" href="https://www.w3.org/TR/css-text-3/#word-spacing-property">word-spacing</a>）、<span
                class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>要素の<span
                class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>・<span
                class="attr-name">‘<a
                    href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>値等）を考慮して適切に補正します。全ての補正はパス上距離調整として計算されます（ユーザーエージェントの<a
                href="paths.html#DistanceAlongAPath">パス上の距離</a>アルゴリズム）。
        </li>

        <li>
            midpoint-on-the-pathがパス外のグリフは描画されません。
        </li>

        <li>
            グリフがなくなる（またはパス上にスペースがない）まで描画を続けます。
        </li>
    </ul>

    <p>
        パス上縦書き（グリフ向きが<a href="text.html#TermInlineBaseDirection">インライン基本方向</a>に平行）の場合、レイアウト規則は以下の通りです：
    </p>

    <ul>
        <li>
            startpoint-on-the-pathは横書きパス上レイアウトと同様の方法で決定しますが、最初のグリフ描画前にstartpoint-on-the-pathの水平成分は垂直整列テキスト属性（<span
                class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>要素の<span
                class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>値など）を考慮して補正します。
        </li>

        <li>
            グリフのcharheight（縦書き描画時にテキスト位置が垂直に進む量）を決定します。
        </li>

        <li>
            このグリフ用のstartpoint-on-the-pathからcharheightだけパス上を進んだ点を決定します（ユーザーエージェントの<a
                href="paths.html#DistanceAlongAPath">パス上の距離</a>アルゴリズム）。この点がendpoint-on-the-pathです。
        </li>

        <li>
            midpoint-on-the-pathを決定します（startpoint-on-the-pathとendpoint-on-the-pathの「中間」）。
        </li>

        <li>
            glyph-midlineを決定します。これはグリフ座標系でグリフのy軸中央を通る水平線です。
        </li>

        <li>
            グリフを、glyph-midlineがmidpoint-on-the-pathを通り、startpoint-on-the-pathとendpoint-on-the-pathを結ぶ線に垂直となるよう配置します。
        </li>

        <li>
            glyphの水平方向（グリフ座標系での水平）をmidpoint-on-the-pathに対して整列します（<a class="property"
                href="text.html#AlignmentBaselineProperty">alignment-baseline</a>プロパティや<span class="element-name">‘<a
                    href="text.html#TextElement"><span>tspan</span></a>’</span>要素の<span class="attr-name">‘<a
                    href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>値を考慮）。
        </li>

        <li>
            以降の各グリフでは、前のendpoint-on-the-pathを新しいstartpoint-on-the-pathとし、フォントの垂直カーニングテーブルや各種属性・プロパティ（スペーシングプロパティや<span
                class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>要素の<span
                class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>・<span
                class="attr-name">‘<a
                    href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>値等）を考慮して適切に補正します。全ての補正はパス上距離調整として計算されます（ユーザーエージェントの<a
                href="paths.html#DistanceAlongAPath">パス上の距離</a>アルゴリズム）。
        </li>

        <li>
            midpoint-on-the-pathが<a href="paths.html#TermClosedSubpath">開いたサブパス</a>の端を越えたグリフは描画されません。
        </li>

        <li>
            グリフがなくなるまで描画を続けます。
        </li>
    </ul>

    <p>
        上記計算で、startpoint-on-the-pathまたはendpoint-on-the-pathがパス端より外の場合は、パス端での接線に平行な直線でパスを延長し、midpoint-on-the-pathを計算できるようにします。
    </p>

    <p>
        <a href="text.html#TermInlineBaseDirection">インライン基本方向</a>が水平の場合、<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>や<span class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span>要素の<span
            class="attr-name">‘x’</span>属性はパス上の新しい絶対オフセット（明示的なstartpoint-on-the-path値）を表し、<span
            class="attr-name">‘y’</span>属性は無視されます。

        <a href="text.html#TermInlineBaseDirection">インライン基本方向</a>が垂直の場合、<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>や<span class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span>要素の<span
            class="attr-name">‘y’</span>属性がパス上の新しい絶対オフセット（明示的なstartpoint-on-the-path値）を表し、<span
            class="attr-name">‘x’</span>属性は無視されます。
    </p>

    <p>
        <span class="element-name">‘<a
                href="text.html#TextPathElement"><span>textPath</span></a>’</span>内のすべての文字を配置した後、<a
            href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>はパスの終端に設定されます（パスが単一閉ループの場合は<span class="attr-name">‘<a
                href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>で補正）。つまり、<span
            class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素の後（かつ<span
            class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素内）の明示的な位置指定（<span
            class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>・<span
            class="attr-name">‘<a
                href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性）がないテキストは、パスの終端から配置されます。
    </p>

    <div class="figure">
        <img alt="&lt;textPath>直後テキストの描画開始点（赤点）を示す図"
            src="https://www.w3.org/TR/SVG2/images/text/text-path-nonpath-text.svg" />
        <p class="caption">
            明示的な位置指定のない<span class="element-name">‘<a
                    href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素の後のテキストの開始点はパス終端（赤点）。
        </p>
    </div>


    <p class="annotation">
        パス終端を最後の文字位置ではなく選ぶのは、フォント等に依存せず著者にとって予測しやすいためです。2016年ロンドン編集会議で決定。<a
            href="https://github.com/w3c/svgwg/issues/104">GitHub Issue 84</a>も参照。
    </p>



    <h2 id="TextRenderingOrder" class="heading">11.9. テキストの描画順序<a class="self-link" href="#TextRenderingOrder"></a></h2>

    <p><span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素は1つ以上のチャンクに分けて描画されます。
        各チャンク（<a href="#TextLayoutAlgorithm">テキストレイアウトアルゴリズム</a>で生成）を文書順で順に描画します。
        描画される各チャンクは1つ以上のグリフからなり、1つのパスとして塗りつぶしとストロークが行われます。</p>

    <p>
        これは、チャンク内のすべてのグリフを塗りつぶしてから一度にストロークするか、または<a class="property"
            href="painting.html#PaintOrderProperty">paint-order</a>プロパティの値に従って逆の順で処理することを意味します。
    </p>

    <p>塗りつぶし処理上、<span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>は0個以上の<a
            href="paths.html#TermEquivalentPath">同等パス</a>（チャンクごとに1つ）を持ちます。各同等パスは、そのチャンク内のグリフごとに1つのサブパスを持ちます。
    </p>

    <p class="note"><a class="property" href="painting.html#FillRuleProperty">fill-rule</a>プロパティはSVGテキスト要素には適用されないため、
        <a href="paths.html#TermEquivalentPath">同等パス</a>内のサブパスの順序は特に重要ではありません。
    </p>

    <p>各サブパスの開始位置や、パスがグリフ形状の周囲を進む方向は定義されません。ただし、ユーザーエージェントは同じフォント・グリフについて一貫性を持つべきです。
    </p>

    <p class="note">これは、SVGテキストに対する破線ストロークが実装ごとに異なる位置にダッシュパターンを配置する場合があることを意味します。</p>


    <h2 id="TextProperties" class="heading">11.10. プロパティおよび疑似要素<a class="self-link" href="#TextProperties"></a></h2>

    <p>
        CSSにはテキストスタイル用の多数のプロパティがありますが、
        SVGに適用されるのは主に2系統：どのグリフを描画するかを決定するもの
        （<a class="property" href="https://www.w3.org/TR/css-fonts-3/#font-family-prop">font-family</a>, <a
            class="property" href="https://www.w3.org/TR/css-fonts-3/#font-style-prop">font-style</a>など）と、
        <em>段落</em>レベルで適用されるもの（<a class="property" href="text.html#DirectionProperty">direction</a>,
        <a class="property" href="text.html#WritingModeProperty">writing-mode</a>, <a class="property"
            href="text.html#LineHeightProperty">line-height</a>, <a class="property"
            href="https://www.w3.org/TR/css-text-3/#letter-spacing-property">letter-spacing</a>など）。
    </p>

    <p>
        SVGテキスト要素で必須サポートとなるCSSプロパティ一覧は
        <a href="styling.html#RequiredProperties">スタイリング</a>章に記載されています。
    </p>

    <ul>
        <li>
            整形済みテキストおよび<a class="property" href="text.html#InlineSizeProperty">inline-size</a>プロパティで<a
                href="text.html#TermWrappingArea">折返し領域</a>が定義される自動折返しテキストにのみ適用されるプロパティ：
            <p>
                <a class="property" href="text.html#TextAnchorProperty">text-anchor</a>
            </p>
        </li>
        <li>
            <a class="property" href="text.html#InlineSizeProperty">inline-size</a>プロパティで<a
                href="text.html#TermWrappingArea">折返し領域</a>が定義されるテキスト以外の自動折返しテキストにのみ適用されるプロパティ：
            <p>
                <a class="property" href="https://www.w3.org/TR/css-text-3/#text-align-property">text-align</a>,
                <a class="property"
                    href="https://www.w3.org/TR/css-text-3/#text-align-last-property">text-align-last</a>,
                <a class="property" href="https://www.w3.org/TR/css-text-3/#text-justify-property">text-justify</a>,
            </p>
        </li>
        <li>
            自動折返しテキストにのみ適用されるプロパティ：
            <p>
                <a class="property" href="https://www.w3.org/TR/css-text-3/#text-indent-property">text-indent</a>,
                <a class="property" href="https://www.w3.org/TR/css-text-3/#line-break-property">line-break</a>,
                <a class="property" href="https://www.w3.org/TR/css-text-3/#word-break-property">word-break</a>,
                <a class="property" href="https://www.w3.org/TR/css-text-3/#hyphens-property">hyphens</a>,
                <a class="property" href="https://www.w3.org/TR/css-text-3/#overflow-wrap-property">word-wrap</a>,
                <a class="property" href="https://www.w3.org/TR/css-text-3/#overflow-wrap-property">overflow-wrap</a>
            </p>
        </li>
    </ul>

    <p>
        さらに、フォント選択に@font-face規則がサポートされ、<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素上で::first-lineおよび::first-letter疑似要素もサポートされます。
        インタラクティブモードでは::selection疑似要素もサポートされるべきです。
    </p>

    <p>
        SVGユーザーエージェントが他のCSSプロパティ（テキストレイアウトや描画に影響するもの）をサポートする場合もあります。その効果はSVGテキストレイアウト全体のCSSテキストレイアウト段階で考慮されるべきです。
    </p>

    <p class="note">
        例えばSVG 2は<a class="property"
            href="https://www.w3.org/TR/css-writing-modes-3/#text-combine-upright">text-combine-upright</a>プロパティのサポートは必須ではありませんが、SVG文脈での挙動は自明です。
    </p>

    <p>
        一部CSSプロパティはSVGテキスト要素に影響してはなりません：
    </p>

    <ul>
        <li>
            ボーダープロパティ（例：<a class="property"
                href="https://www.w3.org/TR/CSS21/box.html#propdef-border-top-style">border-top-style</a>）。CSSレイアウトで生成されたボックスはボーダーがあるかのようにサイズ計算されてはなりません。SVGテキスト要素上の<a
                class="property"
                href="https://www.w3.org/TR/CSS21/box.html#propdef-border-style">border-style</a>各成分プロパティのused値は<span
                class="prop-value">none</span>です。
        </li>

        <li>
            <span class="prop-value">none</span>と<span
                class="prop-value">inline</span>以外のdisplay値。SVG要素全般と同様、SVGテキスト要素上の<a class="property"
                href="render.html#VisibilityControl">display</a>値が<span class="prop-value">none</span>以外の場合は<span
                class="prop-value">inline</span>として扱います。よって1つの<span class="element-name">‘<a
                    href="text.html#TextElement"><span>text</span></a>’</span>要素の子にブロック要素は持てません。
        </li>

        <li>
            <a class="property"
                href="https://www.w3.org/TR/CSS21/visuren.html#propdef-float">float</a>プロパティ。SVGテキスト要素上のused値は<span
                class="prop-value">none</span>です。
        </li>

        <li>
            <a class="property"
                href="https://www.w3.org/TR/CSS21/visuren.html#propdef-position">position</a>プロパティ。SVGテキスト要素上のused値は<span
                class="prop-value">static</span>です。
        </li>

        <li>
            マージンプロパティ（例：<a class="property"
                href="https://www.w3.org/TR/CSS21/box.html#propdef-margin-top">margin-top</a>）。SVGテキスト要素上のused値は<span
                class="prop-value">0</span>です。
        </li>

        <li>
            整形済みテキストの場合の<a class="property"
                href="https://www.w3.org/TR/css-text-3/#text-align-property">text-align</a>プロパティ。SVGテキスト要素上のused値は<span
                class="prop-value">start</span>です。
        </li>

        <li>
            <a class="property"
                href="https://www.w3.org/TR/CSS21/generate.html#propdef-content">content</a>プロパティ。SVGテキスト要素上のused値は<span
                class="prop-value">none</span>です。
        </li>
    </ul>

    <p>
        また、::beforeおよび::after生成コンテンツ疑似要素はSVGテキスト要素には適用されてはなりません。
    </p>

    <p class="note">
        将来の仕様で::beforeや::after生成コンテンツ疑似要素のサポートが追加される可能性があります。著者は無効化に依存しないでください。
    </p>

    <h3 id="TextPropertiesSVG" class="heading">11.10.1. SVGプロパティ<a class="self-link" href="#TextPropertiesSVG"></a></h3>

    <p>
        このセクションでは他で扱われていない、SVG固有のプロパティを説明します。
    </p>

    <h4 id="TextAnchoringProperties" class="heading">11.10.1.1. テキスト整列 ‘<span
            class="property">text-anchor</span>’プロパティ<a class="self-link" href="#TextAnchoringProperties"></a></h4>

    <p>
        <a class="property" href="text.html#TextAnchorProperty">text-anchor</a>プロパティは、<em>整形済み</em>テキストや<a
            class="property" href="text.html#InlineSizeProperty">inline-size</a>プロパティによる<a
            href="text.html#TermWrappingArea">折返し領域</a>で決定される<em>自動折返しテキスト</em>の文字列を、ある点基準で開始・中央・終了揃えするために使います。他の<em>自動折返しテキスト</em>には適用されません（<a
            class="property"
            href="https://www.w3.org/TR/css-text-3/#text-align-property">text-align</a>を参照）。複数行テキストの場合は各行ごとに整列されます。
    </p>

    <p>
        <a class="property" href="text.html#TextAnchorProperty">text-anchor</a>プロパティは、指定した<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素内の各<a
            href="text.html#TermTextChunk">テキストチャンク</a>に個別に適用されます。各テキストチャンクには初期<a
            href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>（ユーザー座標系上の点）があり、これは文脈に応じて<span class="attr-name">‘<a
                href="text.html#TextElementXAttribute"><span>x</span></a>’</span>・<span class="attr-name">‘<a
                href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性値、<span class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span>要素の最初の描画文字への<span class="attr-name">‘<a
                href="text.html#TextElementXAttribute"><span>x</span></a>’</span>・<span class="attr-name">‘<a
                href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性値、<span class="element-name">‘<a
                href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素の初期位置決定などによります。各テキストチャンクには最終<a
            href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>（最後のグリフ配置後）があり、これらはtext-anchorプロパティ適用前に決定されます。
    </p>

    <table class="propdef def">
        <tr>
            <th>名前:</th>
            <td><dfn id="TextAnchorProperty" data-dfn-type="property" data-export="">text-anchor</dfn></td>
        </tr>
        <tr>
            <th>値:</th>
            <td>start | middle | end</td>
        </tr>
        <tr>
            <th>初期値:</th>
            <td>start</td>
        </tr>
        <tr>
            <th>適用対象:</th>
            <td><a href="text.html#TermTextContentElement">テキストコンテンツ要素</a></td>
        </tr>
        <tr>
            <th>継承:</th>
            <td>はい</td>
        </tr>
        <tr>
            <th>パーセンテージ:</th>
            <td>該当なし</td>
        </tr>
        <tr>
            <th>メディア:</th>
            <td>視覚</td>
        </tr>
        <tr>
            <th>算出値:</th>
            <td>指定値</td>
        </tr>
        <tr>
            <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>:</th>
            <td>はい</td>
        </tr>
    </table>

    <p>
        値の意味は以下の通りです：
    </p>

    <dl>
        <dt><span class="attr-value">start</span></dt>
        <dd>
            描画された文字列の開始が初期の現在のテキスト位置に揃うように配置されます。<a class="property"
                href="text.html#DirectionProperty">direction</a>プロパティ値が<span
                class="prop-value">"ltr"</span>（多くの欧文言語）なら、テキストの左端が初期位置に揃います。<a class="property"
                href="text.html#DirectionProperty">direction</a>値が<span
                class="prop-value">"rtl"</span>（アラビア語・ヘブライ語等）なら右端が初期位置に揃います。縦書き主流の場合（多くのアジア言語）、上端が初期位置に揃います。
        </dd>

        <dt><span class="attr-value">middle</span></dt>
        <dd>
            描画された文字列の幾何学的中央（text-anchorプロパティ適用前の初期・最終<a
                href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>から決定）が初期の現在のテキスト位置に揃うようにシフトされます。
        </dd>

        <dt><span class="attr-value">end</span></dt>
        <dd>
            描画された文字列の終了（text-anchorプロパティ適用前の最終<a
                href="text.html#TermCurrentTextPosition">現在のテキスト位置</a>）が初期の現在のテキスト位置に揃うようにシフトされます。<a class="property"
                href="text.html#DirectionProperty">direction</a>プロパティ値が<span
                class="prop-value">"ltr"</span>（多くの欧文言語）なら右端が初期位置に揃います。<a class="property"
                href="text.html#DirectionProperty">direction</a>値が<span
                class="prop-value">"rtl"</span>（アラビア語・ヘブライ語等）なら左端が初期位置に揃います。縦書き主流の場合（多くのアジア言語）、下端が初期位置に揃います。
        </dd>
    </dl>

    <div class="example">
        <p><a class="property" href="text.html#TextAnchorProperty">text-anchor</a>を複数行テキストで使った例。</p>

        <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="100" viewBox="0 0 300 100">

  &lt;text x="150" y="30" style="font: 20px sans-serif; white-space: pre-line;
                              text-anchor: middle;">
    This multi-line text is
    anchored to the middle.&lt;/text>

&lt;/svg>
</pre>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-anchor-middle.svg"
                alt="text-anchorで中央揃えされた2行テキスト画像。" />
            <p class="caption">
                改行で2つの<a href="text.html#TermTextChunk">テキストチャンク</a>が生成され、それぞれ独立してアンカーされる。
            </p>
        </div>
    </div>

    <div class="example">
        <p><a class="property" href="text.html#TextAnchorProperty">text-anchor</a>を複数行テキストで使った別例。</p>

        <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="200" height="150" viewBox="0 0 200 150">
  &lt;path d="m 100,0 0,150" style="fill:none;stroke:#add8e6"/>
  &lt;text x="100 100 100" y="50 95 140"
	style="font-size: 42px; text-anchor: middle">I❤SVG&lt;/text>
&lt;/svg>
</pre>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-anchor-chunks.svg"
                alt="'I', '❤', 'SVG'の3行テキスト画像。" />
            <p class="caption">
                テキストは3つの<a href="text.html#TermTextChunk">テキストチャンク</a>（<span class="attr-name">‘<a
                        href="text.html#TextElementXAttribute"><span>x</span></a>’</span>・<span class="attr-name">‘<a
                        href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性値が3つあるため）に分割され、それぞれ独立してアンカーされる。
            </p>
        </div>
    </div>


    <h4 id="GlyphOrientationHorizontalProperty" class="heading">11.10.1.2. ‘<span
            class="property">glyph-orientation-horizontal</span>’プロパティ<a class="self-link"
            href="#GlyphOrientationHorizontalProperty"></a></h4>

    <p class="note">
        このプロパティはSVG 2で削除されました。
    </p>

    <h4 id="GlyphOrientationVerticalProperty" class="heading">11.10.1.3. ‘<span
            class="property">glyph-orientation-vertical</span>’プロパティ<a class="self-link"
            href="#GlyphOrientationVerticalProperty"></a></h4>

    <p>
        このプロパティは縦書きテキスト専用です。SVG 2では廃止され、部分的にCSS Writing Modes Level 3の<a class="property"
            href="https://www.w3.org/TR/css3-writing-modes/#text-orientation">text-orientation</a>プロパティに置き換えられました。以下のSVG
        1.1値は、プロパティを<a class="property"
            href="https://www.w3.org/TR/css3-writing-modes/#text-orientation">text-orientation</a>へのショートハンドとしてエイリアス処理でサポートされる必要があります：
    </p>
    <ul>
        <li>
            <span class="prop-value">'auto'</span> → <span class="prop-value">'mixed'</span>
        </li>
        <li>
            <span class="prop-value">'0deg'</span>、<span class="prop-value">'0'</span> → <span
                class="prop-value">'upright'</span>
        </li>
        <li>
            <span class="prop-value">'90deg'</span>、<span class="prop-value">'90'</span> → <span
                class="prop-value">'sideways'</span>
        </li>
    </ul>
    <p>
        その他の値はすべて無効値として扱う必要があります。
    </p>


    <h4 id="KerningProperty" class="heading">11.10.1.4. ‘<span class="property">kerning</span>’プロパティ<a class="self-link"
            href="#KerningProperty"></a></h4>

    <p class="note">
        ‘<span class="property">kerning</span>’プロパティはSVG 2で削除されました。
    </p>
    <p>
        SVG 1.1では'kerning'プロパティでフォントカーニングテーブルの使用やグリフ間のスペース調整（<span
            class="prop-value">&lt;length></span>値指定でletter-spacing補助）を制御します。このプロパティはSVG 2ではCSSの<a class="property"
            href="https://www.w3.org/TR/css-fonts-3/#font-kerning-prop">font-kerning</a>プロパティに置き換えられており、カーニングテーブルの使用有無のみ制御します。
    </p>
    <p class="annotation">
        ChromeのUseCounterデータによると2014年時点で使用率は0.01%でした。GitHub issue 80参照。
    </p>

    <h3 id="TextPropertiesAdaptions" class="heading">11.10.2. SVGへの適応<a class="self-link"
            href="#TextPropertiesAdaptions"></a></h3>

    <p>
        このセクションでは仕様中他で扱っていないCSSプロパティで、SVG固有の適応があるかSVG 1.1から大きく変更されたものを説明します。
    </p>

    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2 要件:</th>
                <td>CSS3 Fontsを参照すること。</td>
            </tr>
            <tr>
                <th>決議:</th>
                <td><a href="https://www.w3.org/2011/07/29-svg-minutes.html#item08">SVG 2はCSS3 Fontsに依存する。</a>
                </td>
            </tr>
            <tr>
                <th>目的:</th>
                <td>Webフォント機能のためCSS 2.1やCSS3との整合、フォントの高度組版機能へのアクセス提供。</td>
            </tr>
            <tr>
                <th>担当者:</th>
                <td>Chris (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3123">ACTION-3123</a>)</td>
            </tr>
        </table>
    </div>

    <h4 id="FontVariantProperty" class="heading">11.10.2.1. ‘<span class="property">font-variant</span>’プロパティ<a
            class="self-link" href="#FontVariantProperty"></a></h4>

    <p>
        CSS Font Module Level 3では、<a
            href="https://www.w3.org/TR/css-fonts-3/#propdef-font-variant">'font-variant'</a>プロパティの意味がCSS
        2.1時代から変更されました。これは再定義され（機能拡張も大きい）、単一フォント内のバリアント選択用のショートハンドとなりました。
    </p>
    <p class="note">
        SVG 2ではすべての<a class="property" href="text.html#FontVariantProperty">font-variant</a>サブプロパティ（例：<a
            class="property"
            href="https://www.w3.org/TR/css-fonts-3/#font-variant-ligatures-prop">font-variant-ligatures</a>）の実装が必須です。
    </p>

    <h4 id="LineHeightProperty" class="heading">11.10.2.2. ‘<span class="property">line-height</span>’プロパティ<a
            class="self-link" href="#LineHeightProperty"></a></h4>

    <p>
        SVGでは<a class="property"
            href="text.html#LineHeightProperty">line-height</a>プロパティで複数行テキスト（横書き・縦書き両方）の行間リードスペース量を決定します。パス上テキストには適用されません。
    </p>
    <p class="note">
        ここで追加情報を除けば<a href="https://www.w3.org/TR/CSS21/visudet.html#line-height">規範的定義</a>はCSS 2.1仕様（[<a
            href="refs.html#ref-css2">CSS2</a>]）にあります。
    </p>

    <p class="annotation">
        <a href="https://www.w3.org/TR/css-inline-3/">CSS Inline Module Level 3</a>で'line-height'定義が更新される可能性あり。
    </p>

    <h4 id="WritingModeProperty" class="heading">11.10.2.3. ‘<span class="property">writing-mode</span>’プロパティ<a
            class="self-link" href="#WritingModeProperty"></a></h4>

    <p>
        このプロパティは<a href="text.html#TermBlockFlowDirection">ブロックフロー方向</a>（テキスト行が積み重なる方向）を設定します。その結果、テキストが横向きか縦向きかも決まります。
    </p>
    <p>
        SVG 2では<a href="https://www.w3.org/TR/css-writing-modes-3">CSS Writing Modes Level 3</a>で<a
            href="https://www.w3.org/TR/css-writing-modes-3/#block-flow">'writing-mode'</a>プロパティの定義を参照します。この仕様で新しい値が追加されます。SVG
        1.1の値は廃止されましたが、以下のように算出値変換でサポートする必要があります：
    </p>
    <ul>
        <li>
            <span class="prop-value">'lr'</span>、
            <span class="prop-value">'lr-tb'</span>、
            <span class="prop-value">'rl'</span>、
            <span class="prop-value">'rl-tb'</span> → <span class="prop-value">'horizontal-tb'</span>
        </li>
        <li>
            <span class="prop-value">'tb'</span>、<span class="prop-value">'tb-rl'</span> → <span
                class="prop-value">'vertical-rl'</span>
        </li>
    </ul>
    <p class="note">
        SVG 1.0ではこのプロパティが<a href="text.html#TermInlineBaseDirection">インライン基本方向</a>も設定すると解釈でき、<a class="property"
            href="text.html#DirectionProperty">direction</a>プロパティとの関係に混乱がありました。SVG 1.1では<a class="property"
            href="text.html#DirectionProperty">direction</a>の役割（text-anchorプロパティの基準点など）がやや明確になりましたが、解釈の余地が残りました。SVG
        1.0・1.1で複数行テキストが許可されていなかったことも混乱要因でした。
    </p>
    <p class="note">
        ここで追加情報を除けば<a href="https://www.w3.org/TR/css-writing-modes-3/#block-flow">規範的定義</a>はCSS Writing Modes Level
        3（[<a href="refs.html#ref-css-writing-modes-3">css-writing-modes-3</a>]）にあります。
    </p>

    <h4 id="DirectionProperty" class="heading">11.10.2.4. ‘<span class="property">direction</span>’プロパティ<a
            class="self-link" href="#DirectionProperty"></a></h4>

    <p>
        このプロパティは<span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>や<span
            class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>要素の<a
            href="text.html#TermInlineBaseDirection">インライン基本方向</a>を指定します。これは<a class="property"
            href="text.html#TextAnchorProperty">text-anchor</a>や<a class="property"
            href="text.html#InlineSizeProperty">inline-size</a>プロパティで使われる行の<q>開始</q>・<q>終了</q>点を定義します。また、<a
            class="property" href="https://www.w3.org/TR/css-writing-modes-3/#unicode-bidi">unicode-bidi</a>プロパティ値が<span
            class="prop-value">embed</span>や<span class="prop-value">bidi-override</span>の場合、文字配置方向にも影響します。
    </p>
    <p>
        <a class="property" href="text.html#DirectionProperty">direction</a>プロパティは<a
            href="text.html#TermInlineBaseDirection">インライン基本方向</a>に垂直な向きのグリフ（通常の横書きラテン・アラビア文字や、縦書きで90度回転したラテン・アラビア文字など）にのみ適用されます。
    </p>
    <p class="issue" data-issue="54" id="issue54"><a class="self-link" href="#issue54"></a>
        レビュワーは、これがCSS3 Writing modesと一致しているか特に注意して確認してください。
    </p>

    <p class="note">
        ここで追加情報を除けば<a href="https://www.w3.org/TR/css-writing-modes-3/#direction">規範的定義</a>はCSS Writing Modes Level
        3（[<a href="refs.html#ref-css-writing-modes-3">css-writing-modes-3</a>]）にあります。
    </p>

    <p>
        多くの場合、Unicodeの双方向アルゴリズム（[<a
            href="refs.html#ref-unicode">UNICODE</a>]）で自動的に期待結果が得られ、著者はこれらプロパティを使う必要がありません。右から左言語の場合などは、<a
            class="property" href="text.html#DirectionProperty">direction</a>プロパティを<a
            href="struct.html#TermOutermostSVGElement">最外svg要素</a>に付与し、全テキスト要素に継承させるだけでも十分な場合があります。下記はテンプレート例です：
    </p>

    <div class="example">
        <pre class="xml">&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="100%" height="100%" viewBox="0 0 600 72"
     direction="rtl" xml:lang="fa">

  &lt;title direction="ltr" xml:lang="en">Right-to-left Text&lt;/title>
  &lt;desc direction="ltr" xml:lang="en">
    文書の主要言語が右から左の場合の'direction'プロパティ利用簡易例。
  &lt;/desc>

  &lt;text x="300" y="50" text-anchor="middle" font-size="36">داستان SVG 1.1 SE طولا ني است.&lt;/text>

&lt;/svg></pre>
        <div class="figure"><img alt="例 " src="https://www.w3.org/TR/SVG2/images/text/rtl-text.png" />
            <p class="caption">例 </p>
        </div>
        <p class="view-as-svg"><a href="https://www.w3.org/TR/SVG2/images/text/rtl-text.svg">この例をSVGとして表示
                （SVG対応ブラウザのみ）</a></p>
    </div>

    <p>
        下記は暗黙の双方向並び替えでは不十分な例です：
    </p>

    <div class="example">
        <pre class="xml">&lt;?xml version="1.0" encoding="utf-8"?>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="100%" height="100%" viewBox="0 0 600 72"
     direction="rtl" xml:lang="he">

  &lt;title direction="ltr" xml:lang="en">Right-to-left Text&lt;/title>
  &lt;desc direction="ltr" xml:lang="en">
    主要言語が右から左の場合の'direction'および'unicode-bidi'プロパティ利用例。
  &lt;/desc>

  &lt;text x="300" y="50" text-anchor="middle" font-size="36"> כתובת MAC:&amp;#x200F;
    &lt;tspan direction="ltr" unicode-bidi="embed">00-24-AF-2A-55-FC&lt;/tspan>
  &lt;/text>

&lt;/svg></pre>
        <div class="figure"><img alt="例 " src="https://www.w3.org/TR/SVG2/images/text/rtl-complex.png" />
            <p class="caption">例 </p>
        </div>
        <p class="view-as-svg"><a href="https://www.w3.org/TR/SVG2/images/text/rtl-complex.svg">この例をSVGとして表示
                （SVG対応ブラウザのみ）</a></p>
    </div>


    <h4 id="DominantBaselineProperty" class="heading">11.10.2.5. ‘<span class="property">dominant-baseline</span>’
        プロパティ<a class="self-link" href="#DominantBaselineProperty"></a></h4>

    <p class="note">
        このプロパティはCSS Line Layout Module 3仕様で定義されています。<a
            href="https://www.w3.org/TR/css-inline-3/#propdef-dominant-baseline">'dominant-baseline'</a>参照。
        [<a href="refs.html#ref-css-inline-3">css-inline-3</a>]
    </p>

    <p>
        SVG 2ではこのプロパティ定義にいくつか変更があります。特に：
    </p>
    <ul>
        <li>
            'reset-size'値はサポートされなくなりました。<a class="property"
                href="https://www.w3.org/TR/css-fonts-3/#font-size-prop">font-size</a>変更でベースラインテーブルがリセットされます。
        </li>
        <li>
            'use-script'および'no-change'値はサポートされなくなりました。
        </li>
        <li>
            このプロパティは継承されます（動作実質変更なし）。
        </li>
    </ul>

    <p class="note">
        SVGでは<a class="property" href="text.html#DominantBaselineProperty">dominant-baseline</a>プロパティ値でグリフの<span
            class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>・<span
            class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性への整列を制御します。<a
            class="property"
            href="https://www.w3.org/TR/css3-writing-modes/#text-orientation">text-orientation</a>値<span
            class="prop-value">sideways</span>の場合、<a class="property"
            href="text.html#DominantBaselineProperty">dominant-baseline</a>の<span class="prop-value">auto</span>値は<span
            class="prop-value">alphabetic</span>ですが、後方互換のためグリフは<span class="attr-name">‘<a
                href="text.html#TextElementXAttribute"><span>x</span></a>’</span>・<span class="attr-name">‘<a
                href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性に<span
            class="prop-value">central</span>で整列されるべきです。
    </p>

    <p class="issue" data-issue="56" id="issue56"><a class="self-link" href="#issue56"></a>
        旧動作を好む実例があればぜひ情報提供ください。
    </p>

    <!-- <p class="annotation">
    The SVG 1.1 definition of the <a>'dominant-baseline'</a> property
    was derived from the <a href="https://www.w3.org/TR/2006/REC-xsl11-20061205/">XSL</a>
    specification. (See
    <a href="https://www.w3.org/TR/2006/REC-xsl11-20061205/#dominant-baseline">XSL 'dominant-baseline'</a>.)
  </p> -->


    <h4 id="AlignmentBaselineProperty" class="heading">11.10.2.6. ‘<span
            class="property">alignment-baseline</span>’プロパティ<a class="self-link" href="#AlignmentBaselineProperty"></a>
    </h4>

    <p class="note">
        このプロパティはCSS Line Layout Module 3仕様で定義されています。<a
            href="https://www.w3.org/TR/css-inline-3/#propdef-alignment-baseline">'alignment-baseline'</a>参照。
        [<a href="refs.html#ref-css-inline-3">css-inline-3</a>]
    </p>

    <p class="note">
        新規コンテンツでは、<a class="property"
            href="https://drafts.csswg.org/css-inline/#transverse-alignment">vertical-align</a>プロパティのショートハンド利用が推奨されます。
    </p>

    <p>
        SVG
        2ではこのプロパティ定義にいくつか変更があります。特に：'auto'、'before-edge'、'after-edge'値は削除されました。後方互換のため、'text-before-edge'は'text-top'に、'text-after-edge'は'text-bottom'にマッピングしてください。'text-before-edge'や'text-after-edge'は<a
            class="property"
            href="https://drafts.csswg.org/css-inline/#transverse-alignment">vertical-align</a>プロパティでは使うべきではありません。
    </p>

    <h4 id="BaselineShiftProperty" class="heading">11.10.2.7. ‘<span class="property">baseline-shift</span>’プロパティ<a
            class="self-link" href="#BaselineShiftProperty"></a></h4>

    <p class="note">
        このプロパティはCSS Line Layout Module 3仕様で定義されています。<a
            href="https://www.w3.org/TR/css-inline-3/#propdef-baseline-shift">'baseline-shift'</a>参照。
        [<a href="refs.html#ref-css-inline-3">css-inline-3</a>]
    </p>

    <p class="note">
        新規コンテンツでは、<a class="property"
            href="https://drafts.csswg.org/css-inline/#transverse-alignment">vertical-align</a>プロパティのショートハンド利用が推奨されます。
    </p>

    <p>
        SVG 1.1の初期値'baseline'はSVG 2で削除されました。ユーザーエージェントは、レガシーSVGコンテンツ対応のため必要ならこの値を'0'として計算しても<em>構いません</em>。
    </p>

    <p class="annotation">
        'baseline'値は、'vertical-align'が'alignment-baseline'と'baseline-shift'のショートハンドとなった際に削除されました（'alignment-baseline'でも値となり、かつ'0'長と重複するため）。
    </p>

    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2要件:</th>
                <td>ベースライン整列機能でCSSと整合すること。</td>
            </tr>
            <tr>
                <th>決議:</th>
                <td><a href="https://www.w3.org/2012/01/13-svg-irc#T03-24-06">SVG 2は‘<span
                            class="property">baseline-shift</span>’を廃止し、代わりに‘<span
                            class="property">vertical-align</span>’を使用する。</a></td>
            </tr>
            <tr>
                <th>目的:</th>
                <td>CSSと整合するため。</td>
            </tr>
            <tr>
                <th>担当者:</th>
                <td>Cameron (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3281">ACTION-3281</a>)</td>
            </tr>
        </table>
    </div>

    <p class="annotation">
        <a
            href="https://www.w3.org/TR/css-inline-3/#propdef-baseline-shift">'baseline-shift'</a>は下付き・上付きの整列に重要です（Inkscapeはこの目的で依存）。CSS
        Inline Layout Module Level 3でも維持されています。
        <a
            href="https://www.w3.org/TR/css-inline-3/#propdef-vertical-align">'vertical-align'</a>は複数プロパティ一括変更のショートハンドで、'baseline-shift'も含みます。
    </p>

    <h4 id="LetterSpacingProperty" class="heading">11.10.2.8. ‘<span class="property">letter-spacing</span>’プロパティ<a
            class="self-link" href="#LetterSpacingProperty"></a></h4>

    <p>
        SVG 2では<a class="property"
            href="https://www.w3.org/TR/css-text-3/#letter-spacing-property">letter-spacing</a>プロパティのパーセンテージ値が削除されました。
    </p>
    <p class="note">
        特記以外はCSS Text Level 3で<a class="property"
            href="https://www.w3.org/TR/css-text-3/#letter-spacing-property">letter-spacing</a>の定義を参照。[<a
            href="refs.html#ref-css-text-3">css-text-3</a>]
    </p>
    <p class="annotation">
        SVGビューポート基準のパーセンテージ値は有用でないとされます。これによりCSSと'letter-spacing'定義が一致します。
    </p>

    <h4 id="WordSpacingProperty" class="heading">11.10.2.9. ‘<span class="property">word-spacing</span>’プロパティ<a
            class="self-link" href="#WordSpacingProperty"></a></h4>

    <p>
        SVG 2では<a class="property"
            href="https://www.w3.org/TR/css-text-3/#word-spacing-property">word-spacing</a>プロパティのパーセンテージ値の意味が変更されました。SVG
        1.1ではパーセンテージは<a href="coords.html#TermSVGViewport">SVGビューポート</a>サイズに対する追加スペースでしたが、SVG 2ではCSS Text Level
        3に従い、パーセンテージは影響を受ける文字の幅に対する割合となります。
    </p>
    <p class="note">
        特記以外はCSS Text Level 3で<a class="property"
            href="https://www.w3.org/TR/css-text-3/#word-spacing-property">word-spacing</a>定義を参照。[<a
            href="refs.html#ref-css-text-3">css-text-3</a>]
    </p>
    <p class="annotation">
        SVGビューポート基準のパーセンテージ値は有用でないとされます。これによりCSSと'word-spacing'定義が一致します。
    </p>

    <h4 id="TextOverflowProperty" class="heading">11.10.2.10. ‘<span class="property">text-overflow</span>’プロパティ<a
            class="self-link" href="#TextOverflowProperty"></a></h4>

    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2要件:</th>
                <td><a class="property" href="text.html#TextOverflowProperty">text-overflow</a>機能の追加。</td>
            </tr>
            <tr>
                <th>決議:</th>
                <td><a href="https://www.w3.org/2011/03/03-svg-minutes.html#item04">SVG 2でtext-overflowを追加する。</a></td>
            </tr>
            <tr>
                <th>目的:</th>
                <td>CSSと整合し、すべてのテキストが表示されない場合の表示を可能にするため。</td>
            </tr>
            <tr>
                <th>担当者:</th>
                <td>Erik (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3003">ACTION-3003</a>)</td>
            </tr>
        </table>
    </div>

    <p class="note">
        SVG 2で新規追加。

        定義済み折返し領域をはみ出すテキスト文字列をUAがより便利に処理できるように追加。SVGとHTML/CSSテキスト処理を整合。
    </p>

    <p class="note">
        <a href="https://www.w3.org/TR/2015/CR-css-ui-3-20150707/#text-overflow">'text-overflow'</a>の定義はCSS3 UI仕様参照。[<a
            href="refs.html#ref-css-ui-3">css-ui-3</a>]
    </p>

    <p>
        SVGでは<a class="property" href="text.html#TextOverflowProperty">text-overflow</a>プロパティで、<a
            href="text.html#TermLineBox">line box</a>をはみ出した場合（例：<a class="property"
            href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>プロパティ値が<span
            class="prop-value">nowrap</span>）、<a
            href="text.html#TermTextContentBlockElement">テキストコンテンツブロック要素</a>の描画方法を制御します。このプロパティは整形済みテキストやパス上テキストには適用されません。
    </p>

    <p>
        SVGで<a class="property" href="text.html#TextOverflowProperty">text-overflow</a>は、有効な<a
            href="text.html#TermWrappingArea">折返し領域</a>が指定されていれば、<a class="property"
            href="render.html#OverflowAndClipProperties">overflow</a>プロパティ値に関係なく効果があります。
    </p>

    <p>
        <a class="property" href="text.html#TextOverflowProperty">text-overflow</a>プロパティ値が<span
            class="prop-value">ellipsis</span>の場合、描画されるテキストが<a
            href="text.html#TermWrappingArea">折返し領域</a>をはみ出すと、領域内に収まるよう省略記号（…）が描画されます。描画上、省略記号はその挿入位置の文字を置き換えたものとして扱われます。
    </p>
    <!--テキスト位置属性
    (<a>'text/x'</a>, <a>'text/y'</a>, <a>'text/dx'</a>, <a>'text/dy'</a>, <a>'text/rotate'</a>)
    は省略記号にも、論理文書順で1文字・1グリフにマッピングされたものとして適用される。-->

    <p>
        <a class="property" href="text.html#TextOverflowProperty">text-overflow</a>プロパティ値が<span
            class="prop-value">clip</span>の場合、<a
            href="text.html#TermWrappingArea">折返し領域</a>をはみ出したテキストは切り取られます。文字は部分的に描画される場合もあります。
    </p>

    <p>
        <a class="property" href="text.html#TextOverflowProperty">text-overflow</a>に他の値を指定した場合、未指定と同じ扱いになります。
    </p>

    <p>
        <a class="property"
            href="text.html#TextOverflowProperty">text-overflow</a>の効果は純粋に視覚的なもので、省略記号自体はDOMには現れません。DOMメソッド上は、text-overflow未適用・折返し領域で制約されていない場合と同じ扱いです。
    </p>

    <div class="example">
        <p>
            下記は<a class="property" href="text.html#TextOverflowProperty">text-overflow</a>の使用例です。
            上段は通常の描画（<a class="property"
                href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>値<span
                class="prop-value">pre</span>でテキストがはみ出し、<a class="property"
                href="render.html#OverflowAndClipProperties">overflow</a>値<span class="prop-value">visible</span>で表示）。

            中段は<a class="property" href="text.html#TextOverflowProperty">text-overflow</a>値<span
                class="prop-value">clip</span>、

            下段は<a class="property" href="text.html#TextOverflowProperty">text-overflow</a>値<span
                class="prop-value">ellipsis</span>の例です。
        </p>

        <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="150" viewBox="0 0 300 150">
  &lt;style>
    text { font: 25px sans-serif; white-space: pre; }
    path { fill: none; stroke: #add8e6; }
  &lt;/style>

  &lt;path d="m  50,0 0,150"/>
  &lt;path d="m 200,0 0,150"/>

  &lt;text x="50" y="35"  inline-size="100" style="overflow:visible">SVG is awesome&lt;/text>
  &lt;text x="50" y="85"  inline-size="100" style="text-overflow:clip">SVG is awesome&lt;/text>
  &lt;text x="50" y="135" inline-size="100" style="text-overflow:ellipsis">SVG is awesome&lt;/text>

&lt;/svg>
</pre>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-overflow-ref.svg"
                alt="text-overflowプロパティ使用例画像。" />
            <p class="caption"><a class="property"
                    href="text.html#TextOverflowProperty">text-overflow</a>プロパティをテキスト要素で使用、下段は省略記号付き描画。</p>
        </div>
    </div>

    <p class="annotation">
        このプロパティは無意味だとの主張もあります。省略されたテキストを表示する仕組み（省略記号上でホバーするとツールチップ等）があればより有用でしょう。text-overflowプロパティは行末をはみ出したテキストにのみ作用し、折返し領域端をはみ出した場合には作用しません。
    </p>

    <h3 id="WhiteSpace" class="heading">11.10.3. 空白<a class="self-link" href="#WhiteSpace"></a></h3>

    <p class="note">
        SVG 2で新規追加。<a class="property"
            href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>を追加し、空白処理をより柔軟に制御可能に。SVGとHTML/CSSテキスト処理を整合。<span
            class="attr-name">‘<a
                href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>は新規コンテンツでは非推奨、後方互換のため維持。
    </p>

    <h4 id="TextWhiteSpace" class="heading">11.10.3.1. SVG 2推奨の空白処理‘<span class="property">white-space</span>’プロパティ<a
            class="self-link" href="#TextWhiteSpace"></a></h4>

    <p>
        SVG 2での空白レンダリングは<a class="property"
            href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>プロパティで制御します。これは以下2点を指定します：
    </p>
    <ul>
        <li>要素内の空白を折り畳むかどうか、またその方法</li>
        <li>強制されていないソフトラップ機会で行折返しが許可されるかどうか</li>
    </ul>

    <p class="note">
        値と意味は<a href="https://www.w3.org/TR/css-text-3/#white-space-property">CSS Text Module Level 3</a>で定義。[<a
            href="refs.html#ref-css-text-3">css-text-3</a>]
    </p>

    <div class="example">
        <p>
            <a class="property" href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>値<span
                class="prop-value">pre-line</span>の使用例。
        </p>

        <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg">
     width="200" height="200" viewBox="0 0 200 200">

     &lt;text x="150" y="30" style="font: 20px IPAMincho; writing-mode: vertical-rl;
	                         white-space: pre-line;">
       千利奴流乎和加
       餘多連曽津祢那
       良牟有為能於久
       耶万計不己衣天
       阿佐伎喩女美之
       恵比毛勢須&lt;/text>
&lt;/svg>
</pre>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-whitespace-vertical.svg"
                alt="日本語詩（各行七文字後で改行）例。" />
            <p class="caption">
                複数行縦書きテキストの改行例。詩は日本語「いろは歌」。行は伝統的な位置で改行されています。
            </p>
        </div>
    </div>


    <h4 id="LegacyXMLSpace" class="heading">11.10.3.2. レガシーの空白処理 ‘<span class="property">xml:space</span>’プロパティ<a
            class="self-link" href="#LegacyXMLSpace"></a></h4>

    <p id="XMLSpaceAttribute">
        互換性のため、SVG 2ではXML属性<span class="attr-name">‘<a
                href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>もサポートされており、<span
            class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素の文字データ内で空白文字の扱いを指定できます。新しいコンテンツでは<span
            class="attr-name">‘<a href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>は使用せず、代わりに<a
            class="property"
            href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>プロパティを使用してください。
    </p>

    <p class="annotation">
        このセクションはxml:spaceの説明を簡略化し、ユーザーエージェントのスタイルシートで<a class="property"
            href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>プロパティで定義すべきです。<a
            href="https://drafts.csswg.org/css-text-4/">CSS Text 4</a>仕様の<a class="property"
            href="https://drafts.csswg.org/css-text-4/#white-space-collapsing">'white-space-collapse'</a>プロパティの<span
            class="prop-value">preserve-spaces</span>値は、<span
            class="prop-value">xml:space=preserve</span>に対応することを意図しています。（<a
            href="https://log.csswg.org/irc.w3.org/css/2015-02-08/#e519951">fantasaiはSVG
            1.1の特殊なxml:space="preserve"挙動に合う値追加に合意</a>しています。）
    </p>

    <p>
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素の子要素にも<span
            class="attr-name">‘<a
                href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>属性を指定でき、その子要素のテキストコンテンツに適用されます。SVGユーザーエージェントはこの属性に特別な処理規則を持ちます（下記参照）。これはXMLのパース後やDOM構築後に発生する挙動です。
    </p>

    <p>
        <span class="attr-name">‘<a
                href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>は継承可能な属性で、値は2つあります:
    </p>

    <dl>
        <dt><span class="attr-value">'default'</span></dt>
        <dd>
            （<span class="attr-name">‘<a
                    href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>の初期値/デフォルト値）<span
                class="attr-value">xml:space="default"</span>時、SVGユーザーエージェントは元の文字データのコピーを使って以下を行います。最初に改行文字を全て削除。次にタブ文字をスペースに変換。その後、先頭と末尾のスペース文字を取り除く。さらに連続するスペース文字を1つにまとめます。
        </dd>

        <dt><span class="attr-value">'preserve'</span></dt>
        <dd>
            <span
                class="attr-value">xml:space="preserve"</span>時、SVGユーザーエージェントは元の文字データのコピーを使って、改行とタブ文字を全てスペース文字に変換します。その後、先頭・末尾・連続した複数スペースも含めて全て描画されます。つまり、<span
                class="attr-value">xml:space="preserve"</span>で描画すると、文字列<code>"a   b"</code>（"a"と"b"の間にスペース3つ）は<code>"a b"</code>（スペース1つ）よりも広い間隔になります。
        </dd>
    </dl>

    <p>
        下記の例は<span class="attr-value">xml:space="default"</span>時の行インデントの重要性を示します。2組の似た<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素の断片で、両方とも<span
            class="attr-value">xml:space="default"</span>を使用しています。この例では各行の末尾に余分な空白はありません（改行は最後の可視文字の直後）。
    </p>

    <pre>
[01]  &lt;text xml:space='default'>
[02]    WS example
[03]    indented lines
[04]  &lt;/text>
[05]  &lt;text xml:space='preserve'>WS example indented lines&lt;/text>
[06]
[07]  &lt;text xml:space='default'>
[08]WS example
[09]non-indented lines
[10]  &lt;/text>
[11]  &lt;text xml:space='preserve'>WS examplenon-indented lines&lt;/text>
  </pre>

    <p>
        上の最初の<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素のペアは、インデントされた文字データの効果を示します。1つ目の<span
            class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素の<span
            class="attr-value">xml:space="default"</span>属性はユーザーエージェントに以下を指示します:
    </p>

    <ul>
        <li>タブ（あれば）をスペースに変換</li>
        <li>全行の改行を除去（[01]、[02]、[03]の行末改行を除去）</li>
        <li>先頭のスペースを除去（[02]の"WS example"前スペースを除去）</li>
        <li>末尾のスペースを除去（[04]の"&lt;/text>"前スペースを除去）</li>
        <li>中間の連続スペースを1つにまとめる（[03]の"indented lines"前スペースを1つに）</li>
    </ul>

    <p>
        2組目の<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素は、非インデント文字データの効果を示します。3つ目の<span
            class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>要素の<span
            class="attr-value">xml:space="default"</span>属性はユーザーエージェントに以下を指示します:
    </p>

    <ul>
        <li>タブ（あれば）をスペースに変換</li>
        <li>全行の改行を除去（[07]、[08]、[09]の行末改行を除去）</li>
        <li>先頭スペース除去（この例では先頭スペースなし）</li>
        <li>末尾スペース除去（[10]の"&lt;/text>"前スペースを除去）</li>
        <li>中間の連続スペースは1つに（この例では中間スペースなし）</li>
    </ul>

    <p>
        XMLパーサは標準的な改行表現（例："U+000D U+000A"、CR
        LFや単独のU+000DまたはU+000A）をU+000Aに変換してからアプリケーションに文字データを渡す必要があります。よってSVG内の改行は元リソースでどんな表記でもU+000A1文字で表されます。（<a
            href="https://www.w3.org/TR/2008/REC-xml-20081126/#sec-line-ends">XML改行処理</a>参照。）
    </p>

    <p>
        SVG言語やSVG DOMで文字位置番号に基づく機能（<span class="attr-name">‘<a
                href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、<span class="attr-name">‘<a
                href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、<span class="attr-name">‘<a
                href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、<span class="attr-name">‘<a
                href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>、<span class="attr-name">‘<a
                href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>属性など）は、ここで説明した空白処理規則適用後の文字位置で決まります。特に<span
            class="attr-value">xml:space="default"</span>の場合、空白文字が処理過程で除去される事が多いです。文字位置番号はこのセクションの規則で空白文字除去後のテキスト文字列をインデックスします。
    </p>

    <p>
        空白文字に対応するグリフは、グリフ自体が非空でも可視な空白として表示されるべきです。<a href="http://www.unicode.org/faq/unsup_char.html">非対応文字の表示</a>参照
        [<a href="refs.html#ref-unicode">UNICODE</a>]。
    </p>

    <p>
        <span class="attr-name">‘<a href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>属性は：
    </p>
    <p>
        <span class="anim-target"><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>:
            いいえ。</span>
    </p>

    <h4 id="DuplicateWhiteSpace" class="heading">11.10.3.3. 空白指示子の重複<a class="self-link"
            href="#DuplicateWhiteSpace"></a></h4>

    <p>
        古いSVG 1.1コンテンツでは<span class="attr-name">‘<a
                href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>を使用します。新しいコンテンツや再構成された古いコンテンツでは<a
            class="property" href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>を使い、既存の<span
            class="attr-name">‘<a
                href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>は削除します。ただし、ユーザーエージェントは両方を同じ要素に使っているコンテンツに遭遇する場合があります。要素に<a
            class="property"
            href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>プロパティが設定されていれば、<span
            class="attr-name">‘<a href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>の値は無視されます。
    </p>



    <h2 id="TextDecorationProperties" class="heading">11.11. テキスト装飾<a class="self-link"
            href="#TextDecorationProperties"></a></h2>

    <p>
        SVGのテキストは下線・上線・打ち消し線など<em>装飾</em>できます。装飾の位置やスタイルは、それぞれ<a class="property"
            href="text.html#TextDecorationProperties">text-decoration-line</a>や<a class="property"
            href="text.html#TextDecorationProperties">text-decoration-style</a>プロパティ、または<a class="property"
            href="text.html#TextDecorationProperties">text-decoration</a>ショートハンドプロパティ（<a
            href="https://www.w3.org/TR/css-text-decor-3/#line-decoration">Line Decoration</a>セクション、<a
            href="https://www.w3.org/TR/css-text-decor-3/">CSS Text Decoration Module Level 3</a>
        [(<a href="refs.html#ref-css-text-decor-3">css-text-decor-3</a>)]仕様）で決まります。装飾の塗りと線は<a class="property"
            href="text.html#TextDecorationFillProperty">text-decoration-fill</a>と<a class="property"
            href="text.html#TextDecorationStrokeProperty">text-decoration-stroke</a>プロパティで指定します。色値が<a class="property"
            href="text.html#TextDecorationProperties">text-decoration-color</a>プロパティや<a class="property"
            href="text.html#TextDecorationProperties">text-decoration</a>ショートハンドで指定され、<a class="property"
            href="text.html#TextDecorationFillProperty">text-decoration-fill</a>プロパティで指定されていない場合、<a class="property"
            href="text.html#TextDecorationFillProperty">text-decoration-fill</a>プロパティにその色値を指定したとみなします。
    </p>

    <p>
        テキスト装飾の塗りや線が（<a class="property" href="text.html#TextDecorationProperties">text-decoration</a>、<a
            class="property" href="text.html#TextDecorationProperties">text-decoration-color</a>、<a class="property"
            href="text.html#TextDecorationFillProperty">text-decoration-fill</a>、<a class="property"
            href="text.html#TextDecorationStrokeProperty">text-decoration-stroke</a>等で）明示的に指定されていない場合、装飾宣言時点のテキストのfill/stroke値が使われます（下記例参照）。
    </p>

    <p class="note">
        <a class="property" href="text.html#TextDecorationLineProperty">text-decoration-line</a>と<a class="property"
            href="text.html#TextDecorationStyleProperty">text-decoration-style</a>プロパティはSVG 2で新規追加です。SVG 1.1/CSS 2.1の<a
            class="property"
            href="text.html#TextDecorationProperties">text-decoration</a>プロパティは、これらのプロパティのショートハンドとして後方互換変換されます。<a
            class="property" href="text.html#TextDecorationFillProperty">text-decoration-fill</a>と<a class="property"
            href="text.html#TextDecorationStrokeProperty">text-decoration-stroke</a>はSVG固有プロパティで、将来的にCSS Text
        Decoration仕様に追加される可能性があります。
    </p>

    <p>
        テキストおよび装飾の描画順序は<a href="https://www.w3.org/TR/css-text-decor-3/#painting-order">CSS Text Decoration Module Level
            3の「Painting Order of Text Decorations」</a>で定義されます。装飾自体の塗り・線の描画順は、装飾宣言時点の<a class="property"
            href="painting.html#PaintOrderProperty">paint-order</a>プロパティ値で決まります。
    </p>

    <p id="ExampleTextDecoration01">
        <span class="example-ref">例 textdecoration01</span>は<a class="property"
            href="text.html#TextDecorationProperties">text-decoration</a>の例です。1行目は<a class="property"
            href="text.html#TextDecorationProperties">text-decoration</a>値未指定なので初期値<span
            class="prop-value">text-decoration:none</span>で描画されます。2行目は<span
            class="prop-value">text-decoration:line-through</span>の例。3行目は<span
            class="prop-value">text-decoration:underline</span>の例。4行目は、装飾宣言要素のfill/stroke値で装飾される規則を示します（この場合、<span
            class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素上で指定されているので、全テキストが青fill・赤strokeの下線になりますが、単語ごとに異なるfill/stroke指定があっても適用されます）。ただし"different"だけは<span
            class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span>要素上でtext-decorationを明示指定しているため、その単語だけ黄色fill・濃緑strokeの下線になります：
    </p>

    <div class="example">
        <pre class="xml">&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="12cm" height="4cm" viewBox="0 0 1200 400"
     xmlns="http://www.w3.org/2000/svg" version="1.1">
  &lt;desc>例 textdecoration01 - 'text-decoration'プロパティの挙動&lt;/desc>
  &lt;rect x="1" y="1" width="1198" height="398" fill="none" stroke="blue" stroke-width="2" />
  &lt;g font-size="60" fill="blue" stroke="red" stroke-width="1" >
    &lt;text x="100" y="75">Normal text&lt;/text>
    &lt;text x="100" y="165" text-decoration="line-through" >Text with line-through&lt;/text>
    &lt;text x="100" y="255" text-decoration="underline" >Underlined text&lt;/text>
    &lt;text x="100" y="345" text-decoration="underline" >
      &lt;tspan>One &lt;/tspan>
      &lt;tspan fill="yellow" stroke="purple" >word &lt;/tspan>
      &lt;tspan fill="yellow" stroke="black" >has &lt;/tspan>
      &lt;tspan fill="yellow" stroke="darkgreen" text-decoration="underline" >different &lt;/tspan>
      &lt;tspan fill="yellow" stroke="blue" >underlining&lt;/tspan>
    &lt;/text>
  &lt;/g>
&lt;/svg></pre>
        <div class="figure"><img alt="例 textdecoration01 — 'text-decoration'プロパティの挙動"
                src="https://www.w3.org/TR/SVG2/images/text/textdecoration01.png" />
            <p class="caption">例 textdecoration01</p>
        </div>
        <p class="view-as-svg"><a
                href="https://www.w3.org/TR/SVG2/images/text/textdecoration01.svg">この例をSVGとして表示（SVG対応ブラウザのみ）</a></p>
    </div>

    <h3 id="TextDecorationFillStroke" class="heading">11.11.1. ‘<span class="property">text-decoration-fill</span>’
        および‘<span class="property">text-decoration-stroke</span>’プロパティ<a class="self-link"
            href="#TextDecorationFillStroke"></a></h3>

    <p class="annotation">
        CSSワーキンググループは2014年CSS/SVG合同TPAC会議でSVG仕様の'text-decoration-fill'/'text-decoration-stroke'プロパティを承認しました。2015年シドニー合同会議でもこれらプロパティの使用を再度支持しました。今後CSSテキスト装飾仕様で'text-decoration-fill'/'text-decoration-stroke'プロパティが追加される際、テキストへの'fill'/'stroke'プロパティ適用も同時に許可される予定です。
    </p>

    <table class="propdef def">
        <tr>
            <th>名前:</th>
            <td><dfn id="TextDecorationFillProperty" data-dfn-type="property" data-export="">text-decoration-fill</dfn>
            </td>
        </tr>
        <tr>
            <th>値:</th>
            <td><a href="painting.html#SpecifyingPaint">&lt;paint></a></td>
        </tr>
        <tr>
            <th>初期値:</th>
            <td>本文参照。</td>
        </tr>
        <tr>
            <th>適用対象:</th>
            <td><a href="text.html#TermTextContentElement">テキストコンテンツ要素</a></td>
        </tr>
        <tr>
            <th>継承:</th>
            <td>本文参照。</td>
        </tr>
        <tr>
            <th>パーセンテージ:</th>
            <td>該当なし</td>
        </tr>
        <tr>
            <th>メディア:</th>
            <td>視覚</td>
        </tr>
        <tr>
            <th>算出値:</th>
            <td>指定値。ただし<a href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a>値は算出済み、<a
                    href="https://www.w3.org/TR/css3-values/#url-value">&lt;url></a>値は絶対化される。</td>
        </tr>
        <tr>
            <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>:</th>
            <td>はい</td>
        </tr>
    </table>

    <table class="propdef def">
        <tr>
            <th>名前:</th>
            <td><dfn id="TextDecorationStrokeProperty" data-dfn-type="property"
                    data-export="">text-decoration-stroke</dfn></td>
        </tr>
        <tr>
            <th>値:</th>
            <td><a href="painting.html#SpecifyingPaint">&lt;paint></a></td>
        </tr>
        <tr>
            <th>初期値:</th>
            <td>本文参照。</td>
        </tr>
        <tr>
            <th>適用対象:</th>
            <td><a href="text.html#TermTextContentElement">テキストコンテンツ要素</a></td>
        </tr>
        <tr>
            <th>継承:</th>
            <td>本文参照。</td>
        </tr>
        <tr>
            <th>パーセンテージ:</th>
            <td>該当なし</td>
        </tr>
        <tr>
            <th>メディア:</th>
            <td>視覚</td>
        </tr>
        <tr>
            <th>算出値:</th>
            <td>指定値。ただし<a href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a>値は算出済み、<a
                    href="https://www.w3.org/TR/css3-values/#url-value">&lt;url></a>値は絶対化される。</td>
        </tr>
        <tr>
            <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>:</th>
            <td>はい</td>
        </tr>
    </table>

    <h2 id="TextSelection" class="heading">11.12. テキスト選択とクリップボード操作<a class="self-link" href="#TextSelection"></a></h2>

    <p>
        <a
            href="conform.html#ConformingSVGViewers">適合SVGビューア</a>は、テキスト選択機能（例：マウス等のポインタデバイス搭載）と、コピー＆ペースト用のシステムクリップボードを持つシステム上で、以下をサポートする必要があります。
    </p>

    <ul>
        <li>SVGコンテンツ内のテキスト文字列のユーザー選択</li>
        <li>選択したテキスト文字列をシステムクリップボードへコピーする機能</li>
    </ul>

    <p>
        テキスト選択操作は以下すべてが成立した場合に開始されます：
    </p>

    <ul>
        <li>
            ユーザーがポインタデバイスを<span class="element-name">‘<a
                    href="text.html#TextElement"><span>text</span></a>’</span>要素の一部として描画されたグリフ上に移動し、<em>選択</em>操作を開始（例：標準の選択用マウスボタンを押す）し、そのまま<em>選択</em>操作を継続しながらポインタデバイスを移動する（例：マウスボタンを押したままドラッグ）
        </li>

        <li>
            その時点でポインタデバイスがクリックされた位置に他の可視グラフィックス要素がグリフ上に描画されていない
        </li>

        <li>
            該当グリフに関連する<span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>、
            <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>、
            <span class="element-name">‘<a
                    href="text.html#TextPathElement"><span>textPath</span></a>’</span>要素（またはその祖先）に<a
                href="linking.html#Links">リンク</a>や<a href="interact.html">イベント</a>が割り当てられていない
        </li>
    </ul>

    <p>
        テキスト選択操作が進行中（例：ユーザーがマウスボタンを押し続けている間）、他のグラフィックス要素への全ての関連イベントは無視されます（選択操作はモーダル）。SVGユーザーエージェントは<code>::selection</code>疑似クラス用スタイルを適用して、選択された文字を動的に表示します。
        選択処理中にポインタが移動すると、選択操作の終了グリフは、同じ<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素内でポインタに最も近いグリフセルとなります。選択開始から終了までの<span
            class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素内の全ての文字は、キャンバス上の位置や終了点の上にグラフィックス要素があっても、強調表示されます。
    </p>

    <p>
        テキスト選択操作が終了したら（例：マウスボタンを離す）、選択されたテキストは、選択解除イベント（例：マウスボタン押下等）が発生するまで強調表示されたままになります。
    </p>

    <p>
        テキスト選択操作中にどの文字を強調表示するかの詳細ルールは
        <a href="#TextSelectionImplementationNotes">テキスト選択実装ノート</a>に記載されています。
    </p>

    <p>
        システムクリップボードを持つシステムでは、SVGユーザーエージェントは、現在選択中のテキストをシステムクリップボードへコピーするためのUIを提供する必要があります。SVGユーザーエージェントは、選択されたテキスト文字列をシステムのプレーンテキスト用クリップボード形式で投稿すれば十分ですが、可能ならテキストのフォントプロパティ等を含むリッチテキスト形式でも投稿するのが望ましいです。
    </p>

    <p>
        双方向テキストの場合、ユーザーエージェントは論理順でのテキスト選択をサポートしなければならず、双方向並び替えによってグリフの強調表示が非連続になる場合があります。ユーザーエージェントは、視覚的レンダリング順（双方向テキストレイアウトアルゴリズム適用後）で選択できる代替機能も提供できます。この場合、クリップボードへのコピー要求時、ユーザーエージェントは視覚的に選択された文字のみをクリップボードへコピーするよう調整する必要があります。
    </p>

    <p>
        SVG著者および<a
            href="conform.html#TermSVGGenerator">SVG生成ツール</a>は、テキスト選択がWebブラウザ等のSVG閲覧アプリで正しい順序になるよう、テキスト文字列の順序を工夫すべきです。つまり、DOM上の順番が自然な読書順になるよう配置してください。
    </p>

    <h3 id="TextSelectionImplementationNotes" class="heading">11.12.1. テキスト選択実装ノート<a class="self-link"
            href="#TextSelectionImplementationNotes"></a></h3>

    <p>以下は<a href="#TextSelection">テキスト選択</a>操作でどの文字が選択されるかを決定するアルゴリズムの実装ノートです。</p>

    <p>選択操作中（例：ユーザーがマウスでクリック＆ドラッグして選択範囲を指定）、ユーザーエージェントは<em>開始選択位置</em>と<em>終了選択位置</em>を決定します。どちらも文字間の位置を表します。開始・終了選択位置を決定した後、ユーザーエージェントは適切な文字を選択します。選択結果は次のいずれかです：
    </p>

    <ul>
        <li>選択なし</li>

        <li>1つの<em>開始文字</em>と<em>終了文字</em>（同じ文字の場合もある）、および同じ<span class="element-name">‘<a
                    href="text.html#TextElement"><span>text</span></a>’</span>要素内でDOM上で論理順に開始文字と終了文字の間にある全ての文字</li>
    </ul>

    <p>ポインタデバイス搭載システムでは、<em>開始選択位置</em>の決定は、現在のポインタ位置から見て描画済みグリフに対応する文字間境界のうち最適（例：最も近い）ものを選びます（選択操作開始時のイベント例：マウスダウン）。その後、選択操作完了まで（例：マウスドラッグ後にマウスアップ）を追跡します。選択操作の終了時、<em>終了選択位置</em>として、最適な文字間境界（例：最も近い）を決定します。
    </p>

    <p>双方向性による文字並び替えがなければ、選択範囲は<em>開始選択位置</em>と<em>終了選択位置</em>の間の全ての文字となります。例えば、<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>要素の文字列が"abcdef"で、開始・終了選択位置が0と3（"a"の左端が0）なら、選択範囲は"abc"になります。
    </p>

    <p>双方向テキストの選択を実装する場合、選択開始（または終了）が論理順で隣接しない文字間の場合、選択範囲として複数の組合せがあり得ます。選択アルゴリズムは、視覚的レンダリング順に最も近い選択範囲を選ぶべきです。</p>
    <p>複数文字が1つ以上のグリフに不可分にマッピングされる場合、ユーザーエージェントはグリフセット中間で選択開始を禁じるか、グリフセットの領域を対応文字ごとに割り当てる工夫をしてもよいです。</p>

    <p>マウス等のポインタデバイス対応システムでは、イベントハンドラやリンクが割り当てられ、イベント処理優先度のため選択が阻害される場合でも、ユーザーエージェントはテキスト選択機構を提供する必要があります（<a
            href="interact.html#PointerEvents">Pointer events</a>参照）。
        一実装例：ポインタデバイス対応プラットフォームでは、文字セル周囲に小さな追加領域を設け、テキスト選択のみを開始しイベントハンドラやリンクは発火しないようにできます。</p>

    <h2 id="DOMInterfaces" class="heading">11.13. DOMインターフェース<a class="self-link" href="#DOMInterfaces"></a></h2>

    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2 要件:</th>
                <td><span class="element-name">‘<a
                            href="text.html#TextElement"><span>text</span></a>’</span>要素をアウトラインパスデータへ変換するDOMメソッドを持つこと。
                </td>
            </tr>
            <tr>
                <th>決議:</th>
                <td><a href="https://www.w3.org/2012/01/13-svg-irc#T05-07-07"><span
                            class="element-name">‘text’</span>要素をアウトラインパスデータへ変換するDOMメソッドを追加（機能はFXTFへ移す可能性あり）。</a></td>
            </tr>
            <tr>
                <th>目的:</th>
                <td>テキストをパスとして操作可能にするため。</td>
            </tr>
            <tr>
                <th>担当者:</th>
                <td>Cameron (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3076">ACTION-3076</a>)</td>
            </tr>
            <tr>
                <th>ステータス:</th>
                <td><a href="https://github.com/w3c/svgwg/issues/221">将来の要望リスト</a></td>
            </tr>
        </table>
    </div>

    <div class="ready-for-wider-review">
        <h3 id="InterfaceSVGTextContentElement" class="heading">11.13.1. Interface SVGTextContentElement<a
                class="self-link" href="#InterfaceSVGTextContentElement"></a></h3>

        <p><a class="idlinterface" href="text.html#InterfaceSVGTextContentElement">SVGTextContentElement</a>
            インターフェイスは、子テキストコンテンツの描画をサポートする要素によって実装されます。</p>

        <p>このインターフェイスのメソッドで文字のインデックスや文字数を参照する場合、その参照はUTF-16コード単位のインデックスまたはUTF-16コード単位の数として解釈されます。これは、DOM Level 2 Coreで
            <a class="idlinterface" href="https://dom.spec.whatwg.org/#interface-characterdata">CharacterData</a>
            インターフェイスのメソッドが文字データ内のインデックスやカウントにUTF-16コード単位を使用することと一貫性を保つためです。例えば、<span class="element-name">‘<a
                    href="text.html#TextElement"><span>text</span></a>’</span>
            要素のテキストコンテンツがU+10000のようなBMP外文字1文字の場合、その要素で <a
                href="text.html#__svg__SVGTextContentElement__getNumberOfChars">getNumberOfChars</a>
            を呼び出すと、1文字を表すために2つのUTF-16コード単位（サロゲートペア）が使われているので2を返します。
        </p>

        <pre class="idl">[Exposed=Window]
interface <b>SVGTextContentElement</b> : <a class="idlinterface" href="types.html#InterfaceSVGGraphicsElement">SVGGraphicsElement</a> {

  // lengthAdjust Types
  const unsigned short <a href="text.html#__svg__SVGTextContentElement__LENGTHADJUST_UNKNOWN">LENGTHADJUST_UNKNOWN</a> = 0;
  const unsigned short <a href="text.html#__svg__SVGTextContentElement__LENGTHADJUST_SPACING">LENGTHADJUST_SPACING</a> = 1;
  const unsigned short <a href="text.html#__svg__SVGTextContentElement__LENGTHADJUST_SPACINGANDGLYPHS">LENGTHADJUST_SPACINGANDGLYPHS</a> = 2;

  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLength">SVGAnimatedLength</a> <a href="text.html#__svg__SVGTextContentElement__textLength">textLength</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedEnumeration">SVGAnimatedEnumeration</a> <a href="text.html#__svg__SVGTextContentElement__lengthAdjust">lengthAdjust</a>;

  long <a href="text.html#__svg__SVGTextContentElement__getNumberOfChars">getNumberOfChars</a>();
  float <a href="text.html#__svg__SVGTextContentElement__getComputedTextLength">getComputedTextLength</a>();
  float <a href="text.html#__svg__SVGTextContentElement__getSubStringLength">getSubStringLength</a>(unsigned long charnum, unsigned long nchars);
  <a class="idlinterface" href="https://www.w3.org/TR/geometry-1/#dom-dompoint">DOMPoint</a> <a href="text.html#__svg__SVGTextContentElement__getStartPositionOfChar">getStartPositionOfChar</a>(unsigned long charnum);
  <a class="idlinterface" href="https://www.w3.org/TR/geometry-1/#dom-dompoint">DOMPoint</a> <a href="text.html#__svg__SVGTextContentElement__getEndPositionOfChar">getEndPositionOfChar</a>(unsigned long charnum);
  <a class="idlinterface" href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-domrect">DOMRect</a> <a href="text.html#__svg__SVGTextContentElement__getExtentOfChar">getExtentOfChar</a>(unsigned long charnum);
  float <a href="text.html#__svg__SVGTextContentElement__getRotationOfChar">getRotationOfChar</a>(unsigned long charnum);
  long <a href="text.html#__svg__SVGTextContentElement__getCharNumAtPosition">getCharNumAtPosition</a>(optional <a class="idlinterface" href="https://www.w3.org/TR/geometry-1/#dictdef-dompointinit">DOMPointInit</a> point);
  void <a href="text.html#__svg__SVGTextContentElement__selectSubString">selectSubString</a>(unsigned long charnum, unsigned long nchars);
};</pre>

        <p><a class="idlinterface" href="text.html#InterfaceSVGTextContentElement">SVGTextContentElement</a>
            で定義される数値型長調整定数は、<span class="attr-name">‘<a
                    href="text.html#TextElementLengthAdjustAttribute"><span>lengthAdjust</span></a>’</span>
            属性が取れるキーワード値を表すために使われます。各意味は下記の通りです：</p>

        <table class="vert">
            <tr>
                <th>定数</th>
                <th>意味</th>
            </tr>
            <tr>
                <td><b id="__svg__SVGTextContentElement__LENGTHADJUST_SPACING">LENGTHADJUST_SPACING</b></td>
                <td><span class="attr-value">spacing</span> キーワード。</td>
            </tr>
            <tr>
                <td><b
                        id="__svg__SVGTextContentElement__LENGTHADJUST_SPACINGANDGLYPHS">LENGTHADJUST_SPACINGANDGLYPHS</b>
                </td>
                <td><span class="attr-value">spacingAndGlyphs</span> キーワード。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGTextContentElement__LENGTHADJUST_UNKNOWN">LENGTHADJUST_UNKNOWN</b></td>
                <td>その他の値。</td>
            </tr>
        </table>

        <p><b id="__svg__SVGTextContentElement__textLength">textLength</b> IDL属性は、<a
                href="types.html#TermReflect">反映</a>される <span class="attr-name">‘<a
                    href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span> コンテンツ属性に対応します。
        </p>

        <p class="note">
            <span class="attr-name">‘<a
                    href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>
            コンテンツ属性の初期値は、要素のユーザーエージェント計算長と等しいと定義されます。
            つまり、コンテンツ属性が存在しない場合、IDLプロパティは、同じ要素上で <a
                href="text.html#__svg__SVGTextContentElement__getComputedTextLength">getComputedTextLength</a>
            を呼び出した返り値（ユーザー単位の長さ）で初期化されます。
        </p>

        <p><b id="__svg__SVGTextContentElement__lengthAdjust">lengthAdjust</b> IDL属性は、<a
                href="types.html#TermReflect">反映</a>される <span class="attr-name">‘<a
                    href="text.html#TextElementLengthAdjustAttribute"><span>lengthAdjust</span></a>’</span>
            コンテンツ属性に対応します。<a href="types.html#TermNumericTypeValue">数値型値</a>は、上記表の数値型長調整定数に従います。
        </p>

        <div class="ready-for-wider-review">
            <p><b id="__svg__SVGTextContentElement__getNumberOfChars">getNumberOfChars</b> メソッドは、現在の要素内で描画可能な <a
                    href="text.html#TermAddressableCharacter">アドレス可能文字</a> の総数を返します（実際に描画されるかどうかに関係なく）。
                getNumberOfChars() が呼ばれると、以下の手順が実行されます：</p>

            <ol class="algorithm">
                <li><var>node</var> をこのメソッドが呼ばれた要素またはノードとする</li>
                <li><var>node</var> がDOMテキストノードなら、親要素の <a class="property"
                        href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>
                    プロパティ値に従い空白を正規化した後のテキスト内容の長さを返す。</li>
                <li><var>node</var> が <a class="idlinterface"
                        href="https://dom.spec.whatwg.org/#interface-element">Element</a> なら：
                    <ul>
                        <li>要素が <a href="render.html#Rendered-vs-NonRendered">非描画</a>（例：<a class="property"
                                href="render.html#VisibilityControl">display</a> プロパティused値が <span
                                class="prop-value">none</span> など）なら 0 を返す；</li>
                        <li>それ以外なら、<var>count</var> = 0 とし、<var>node</var> の各子ノードに対して：
                            <ul>
                                <li>このアルゴリズムを再帰呼び出しし、返り値を <var>count</var> に加算する。</li>
                            </ul>
                            <var>count</var> を返す。
                        </li>
                    </ul>
                </li>
                <li>その他のノード型（例：DOMコメント）には 0 を返す。</li>
            </ol>
        </div>

        <p><b id="__svg__SVGTextContentElement__getComputedTextLength">getComputedTextLength</b>
            メソッドは、要素内テキストの「長さ」を計算するために使われます。
            getComputedTextLength() が呼ばれると、以下の手順が実行されます：</p>

        <ol class="algorithm">
            <li><var>count</var> を、この要素で <a href="#__svg__SVGTextContentElement__getNumberOfChars">getNumberOfChars</a>
                メソッドを呼んだ時の返り値とする。</li>
            <li><var>length</var> を、この要素で <a
                    href="#__svg__SVGTextContentElement__getSubStringLength">getSubStringLength</a> メソッドを引数 0 と
                <var>count</var> で呼んだ時の返り値とする。
            </li>
            <li><var>length</var> を返す。</li>
        </ol>

        <p><b id="__svg__SVGTextContentElement__getSubStringLength">getSubStringLength</b>
            メソッドは、要素内テキストの部分文字列のフォーマット済みテキスト進み距離を計算するために使われます。
            getSubStringLength(<var>charnum</var>, <var>nchars</var>) が呼ばれると、以下の手順が実行されます：</p>

        <ol class="algorithm">
            <li>この要素内DOMの各 <a href="text.html#TermAddressableCharacter">アドレス可能文字</a> にインデックスを割り当て、最初の文字が 0。</li>
            <li><var>charnum</var> が割り当てられた最大インデックスより大きいか、<var>nchars</var> が負なら <a
                    href="https://heycam.github.io/webidl/#dfn-throw">throw</a> <a
                    href="https://heycam.github.io/webidl/#indexsizeerror">IndexSizeError</a>。</li>
            <li><var>length</var> をユーザー単位の長さとして0で初期化。</li>
            <li>この要素内DOMの各 <a href="text.html#TermAddressableCharacter">アドレス可能文字</a> の中でインデックスが <var>charnum</var> ≤
                index &lt; (<var>charnum</var> + <var>nchars</var>) のものについて：
                <ol>
                    <li>文字が <a href="text.html#TermTypographicCharacterUnit">組版文字</a>に対応し、かつその <a
                            href="text.html#TermTypographicCharacterUnit">組版文字</a>に対応する最初の文字なら：
                        <ol>
                            <li>その <a href="text.html#TermTypographicCharacterUnit">組版文字</a> のadvance（フォントカーニングも調整）を
                                <var>length</var> に加算。
                            </li>
                            <li><a class="property"
                                    href="https://www.w3.org/TR/css-text-3/#letter-spacing-property">letter-spacing</a>
                                や <a class="property"
                                    href="https://www.w3.org/TR/css-text-3/#word-spacing-property">word-spacing</a>
                                プロパティで直後に追加スペースがあれば、それも <var>length</var> に加算。</li>
                        </ol>
                        <p class="note">たとえばリガチャの一部だけ部分文字列に含まれている場合、その <a
                                href="text.html#TermTypographicCharacterUnit">組版文字</a> のadvanceや letter/word-spacing
                            は最初の文字のtext lengthに割り当てられます。</p>
                    </li>
                </ol>
            </li>
            <li><var>length</var> を返す。</li>
        </ol>
        <p class="note">
            SVGの過去バージョンでは、このメソッドや <a
                href="#__svg__SVGTextContentElement__getComputedTextLength">getComputedTextLength</a> で、子要素の <span
                class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span> や <span
                class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>
            によるインライン方向位置調整も含める必要があり、返り値はユーザーエージェントの <span class="attr-name">‘<a
                    href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>
            計算値と等しくなるはずでした。ですが仕様も実装も不完全かつ有用性が低いため、実装に合わせて単純化されました。
        </p>

        <p class="annotation">
            テキスト長メソッドの変更は <a
                href="https://lists.w3.org/Archives/Public/www-svg/2015Aug/att-0009/SVGWG-F2F-minutes-20150824.html#item04">2015年8月パリF2Fで決議</a>。
        </p>

        <p>要素 <var>element</var> 内インデックス <var>index</var> の文字に対して <dfn id="TermFindTypographicCharacterForCharacter"
                data-dfn-type="dfn" data-export="">組版文字を対応させる</dfn>には、以下の手順を実行します：</p>

        <ol class="algorithm">
            <li>この要素内DOMの各 <a href="text.html#TermAddressableCharacter">アドレス可能文字</a> にインデックスを割り当て、最初の文字が 0。</li>
            <li><var>last</var> を割り当てられた最大インデックスとする。</li>
            <li><var>charnum</var> &lt; <var>last</var> かつ、そのインデックスの文字が <a
                    href="text.html#TermTypographicCharacterUnit">組版文字</a>に対応しない間：
                <ol>
                    <li><var>charnum</var> = <var>charnum</var> + 1。</li>
                </ol>
            </li>
            <li><var>charnum</var> が最大インデックスより大きいなら null を返す。</li>
            <li>それ以外なら、その <a href="text.html#TermTypographicCharacterUnit">組版文字</a>を返す。</li>
        </ol>

        <p><b id="__svg__SVGTextContentElement__getStartPositionOfChar">getStartPositionOfChar</b> メソッドはテキストレイアウト後の <a
                href="text.html#TermTypographicCharacterUnit">組版文字</a>
            の位置を取得します。getStartPositionOfChar(<var>charnum</var>) が呼ばれると、以下の手順を実行します：</p>

        <ol class="algorithm">
            <li>現在の要素内インデックス <var>charnum</var> の文字に対して <a
                    href="#TermFindTypographicCharacterForCharacter">組版文字を対応させる</a>結果を <var>cluster</var> とする。</li>
            <li><var>cluster</var> が null なら <a href="https://heycam.github.io/webidl/#dfn-throw">throw</a> <a
                    href="https://heycam.github.io/webidl/#indexsizeerror">IndexSizeError</a>。</li>
            <li><var>p</var> を、そのインデックスの文字に対応する <a href="text.html#TermTypographicCharacterUnit">組版文字</a> の <a
                    href="text.html#TermAlignmentPoint">アラインメントポイント</a>（要素座標系）とする。</li>
            <li><var>p</var> を表す新規作成・<a href="shapes.html#PointMode">detached</a> な <a class="idlinterface"
                    href="https://www.w3.org/TR/geometry-1/#dom-dompoint">DOMPoint</a> オブジェクトを返す。</li>
        </ol>

        <p><b id="__svg__SVGTextContentElement__getEndPositionOfChar">getEndPositionOfChar</b> メソッドはテキストレイアウト後の <a
                href="text.html#TermTypographicCharacterUnit">組版文字</a>
            の終了位置を取得します。getEndPositionOfChar(<var>charnum</var>) が呼ばれると、以下の手順を実行します：</p>

        <ol class="algorithm">
            <li>現在の要素内インデックス <var>charnum</var> の文字に対して <a
                    href="#TermFindTypographicCharacterForCharacter">組版文字を対応させる</a>結果を <var>cluster</var> とする。</li>
            <li><var>cluster</var> が null なら <a href="https://heycam.github.io/webidl/#dfn-throw">throw</a> <a
                    href="https://heycam.github.io/webidl/#indexsizeerror">IndexSizeError</a>。</li>
            <li><var>p</var> を <var>cluster</var> のアラインメントポイント（インデックスの文字に対応、要素座標系）とする。</li>
            <li><var>direction</var> を <var>cluster</var> のadvance方向の単位ベクトルとする。この方向は書字モード、文字のdirection、<a
                    class="property"
                    href="https://www.w3.org/TR/css3-writing-modes/#text-orientation">text-orientation</a>、<a
                    class="property"
                    href="text.html#GlyphOrientationHorizontalProperty">glyph-orientation-horizontal</a>、<a
                    class="property"
                    href="text.html#GlyphOrientationVerticalProperty">glyph-orientation-vertical</a>、適用される <span
                    class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
                値、<span class="element-name">‘<a
                        href="text.html#TextPathElement"><span>textPath</span></a>’</span>による回転などを考慮します。</li>
            <li><var>advance</var> を <var>cluster</var> のadvanceとする。</li>
            <li><var>p</var> = <var>p</var> + <var>advance</var> · <var>direction</var> とする。</li>
            <li><var>p</var> を表す新規作成・<a href="shapes.html#PointMode">detached</a> な <a class="idlinterface"
                    href="https://www.w3.org/TR/geometry-1/#dom-dompoint">DOMPoint</a> オブジェクトを返す。</li>
        </ol>

        <p><b id="__svg__SVGTextContentElement__getExtentOfChar">getExtentOfChar</b> メソッドは、指定した <a
                href="text.html#TermTypographicCharacterUnit">組版文字</a>
            に対応するグリフセルの厳密なバウンディングボックスを計算します。getExtentOfChar(<var>charnum</var>) が呼ばれると、以下の手順を実行します：</p>

        <ol class="algorithm">
            <li>現在の要素内インデックス <var>charnum</var> の文字に対して <a
                    href="#TermFindTypographicCharacterForCharacter">組版文字を対応させる</a>結果を <var>cluster</var> とする。</li>
            <li><var>cluster</var> が null なら <a href="https://heycam.github.io/webidl/#dfn-throw">throw</a> <a
                    href="https://heycam.github.io/webidl/#indexsizeerror">IndexSizeError</a>。</li>
            <li><var>quad</var> を現在の要素座標系で回転されている可能性がある <var>cluster</var> のグリフセル矩形とする。</li>
            <li><var>rect</var> を <var>quad</var> の周囲で最も厳密なバウンディングボックス矩形（要素座標系）とする。</li>
            <li><var>rect</var> を表す新規作成 <a class="idlinterface"
                    href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-domrect">DOMRect</a> オブジェクトを返す。</li>
        </ol>

        <p><b id="__svg__SVGTextContentElement__getRotationOfChar">getRotationOfChar</b> メソッドは <a
                href="text.html#TermTypographicCharacterUnit">組版文字</a> の回転角度を取得します。getRotationOfChar(<var>charnum</var>)
            が呼ばれると、以下の手順を実行します：</p>

        <ol class="algorithm">
            <li>現在の要素内インデックス <var>charnum</var> の文字に対して <a
                    href="#TermFindTypographicCharacterForCharacter">組版文字を対応させる</a>結果を <var>cluster</var> とする。</li>
            <li><var>cluster</var> が null なら <a href="https://heycam.github.io/webidl/#dfn-throw">throw</a> <a
                    href="https://heycam.github.io/webidl/#indexsizeerror">IndexSizeError</a>。</li>
            <li><var>direction</var> を <var>cluster</var> のadvance方向角度（度）とする。この方向は書字モード、文字のdirection、<a class="property"
                    href="https://www.w3.org/TR/css3-writing-modes/#text-orientation">text-orientation</a>、<a
                    class="property"
                    href="text.html#GlyphOrientationHorizontalProperty">glyph-orientation-horizontal</a>、<a
                    class="property"
                    href="text.html#GlyphOrientationVerticalProperty">glyph-orientation-vertical</a>、適用される <span
                    class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
                値、<span class="element-name">‘<a
                        href="text.html#TextPathElement"><span>textPath</span></a>’</span>による回転などを考慮します。</li>
            <li><var>direction</var> を返す。</li>
        </ol>

        <p><b id="__svg__SVGTextContentElement__getCharNumAtPosition">getCharNumAtPosition</b>
            メソッドは、指定した座標系上の位置にどの文字が原因でグリフが描画されたかを調べるために使われます。文字とグリフの関係が1対1ではないため、該当 <a
                href="text.html#TermTypographicCharacterUnit">組版文字</a> の最初の文字だけが返されます。
            getCharNumAtPosition(<var>point</var>) が呼ばれると、以下の手順を実行します：</p>

        <ol class="algorithm">
            <li>この要素内DOMの各文字にインデックスを割り当て、最初の文字が 0。</li>
            <li><var>last</var> を割り当てられた最大インデックスとする。</li>
            <li><var>charnum</var> = 0。</li>
            <li><var>result</var> = -1。</li>
            <li><var>charnum</var> &lt; <var>last</var> の間：
                <ol>
                    <li>インデックス <var>charnum</var> の文字が <a
                            href="text.html#TermTypographicCharacterUnit">組版文字</a>に対応し、かつその <a
                            href="text.html#TermTypographicCharacterUnit">組版文字</a>に対応する最初の文字であり、かつこの要素座標系で
                        <var>point</var> が <a
                            href="text.html#TermTypographicCharacterUnit">組版文字</a>のグリフセル内であれば、<var>result</var> =
                        <var>charnum</var>。
                    </li>
                </ol>
            </li>
            <li><var>result</var> を返す。</li>
        </ol>
    </div>

    <div class="ready-for-wider-review">
        <p><b id="__svg__SVGTextContentElement__selectSubString">selectSubString</b>
            メソッドは要素内テキストを選択するために使われます。selectSubString(<var>charnum</var>, <var>nchars</var>) が呼ばれると、以下の手順を実行します：</p>

        <p>この要素のテキストを、文字インデックス <var>charnum</var> から <var>nchars</var> 文字分選択します。メソッド呼び出し時に以下の手順を実行してください：</p>
        <ol>
            <li><var>node</var> をこのテキストコンテンツ要素とする。</li>
            <li><var>count</var> をこのテキストコンテンツ要素内の文字数とする。</li>
            <li><var>end</var> = <var>charnum</var> + <var>nchars</var>。</li>
            <li><var>charnum</var> ≥ <var>count</var> または <var>end</var> ≥ <var>count</var> なら <a
                    href="https://heycam.github.io/webidl/#dfn-throw">throw</a> <a
                    href="https://heycam.github.io/webidl/#indexsizeerror">IndexSizeError</a>。</li>
            <li>文書の <a href="http://w3c.github.io/selection-api/#dfn-selection">selection</a> から全 <a
                    href="https://www.w3.org/TR/2014/WD-dom-20140204/#concept-range">range</a> を削除する。[<a
                    href="refs.html#ref-dom">DOM</a>][<a href="refs.html#ref-editing">EDITING</a>]</li>
            <li><a href="http://w3c.github.io/selection-api/#dfn-selection">selection</a> の <a
                    href="http://w3c.github.io/selection-api/">direction</a> を forwards に設定。</li>
            <li><a href="http://w3c.github.io/selection-api/#dfn-selection">selection</a> に新しい <a
                    href="https://www.w3.org/TR/2014/WD-dom-20140204/#concept-range">range</a> を追加。その <a
                    href="https://www.w3.org/TR/2014/WD-dom-20140204/#concept-range-start">start</a> は (<var>node</var>,
                <var>charnum</var>)、<a href="https://www.w3.org/TR/2014/WD-dom-20140204/#concept-range-end">end</a> は
                (<var>node</var>, <var>end</var>)。
            </li>
        </ol>
        <div class="note">
            <p>引数チェックと例外スローを除けば、これは以下と同等：</p>
            <pre>var selection = document.getSelection();
selection.removeAllRanges();
var range = new Range();
range.setStart(textContentElement, charnum);
range.setEnd(textContentElement, charnum + nchars);
selection.addRange(range);</pre>
        </div>
        <p>このメソッドはSelection APIの機能重複のため非推奨です。</p>
    </div>


    <div class="ready-for-wider-review">
        <h3 id="InterfaceSVGTextPositioningElement" class="heading">11.13.2. Interface SVGTextPositioningElement<a
                class="self-link" href="#InterfaceSVGTextPositioningElement"></a></h3>

        <p><a class="idlinterface" href="text.html#InterfaceSVGTextPositioningElement">SVGTextPositioningElement</a>
            インターフェイスは、個別テキストグリフの位置指定属性をサポートする要素によって実装されます。これは <a class="idlinterface"
                href="text.html#InterfaceSVGTextElement">SVGTextElement</a> および <a class="idlinterface"
                href="text.html#InterfaceSVGTSpanElement">SVGTSpanElement</a> に継承されます。
        </p>

        <pre class="idl">[Exposed=Window]
interface <b>SVGTextPositioningElement</b> : <a class="idlinterface" href="text.html#InterfaceSVGTextContentElement">SVGTextContentElement</a> {
  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLengthList">SVGAnimatedLengthList</a> <a href="text.html#__svg__SVGTextPositioningElement__x">x</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLengthList">SVGAnimatedLengthList</a> <a href="text.html#__svg__SVGTextPositioningElement__y">y</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLengthList">SVGAnimatedLengthList</a> <a href="text.html#__svg__SVGTextPositioningElement__dx">dx</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLengthList">SVGAnimatedLengthList</a> <a href="text.html#__svg__SVGTextPositioningElement__dy">dy</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedNumberList">SVGAnimatedNumberList</a> <a href="text.html#__svg__SVGTextPositioningElement__rotate">rotate</a>;
};</pre>

        <p>
            <b id="__svg__SVGTextPositioningElement__x">x</b>,
            <b id="__svg__SVGTextPositioningElement__y">y</b>,
            <b id="__svg__SVGTextPositioningElement__dx">dx</b>,
            <b id="__svg__SVGTextPositioningElement__dy">dy</b>,
            <b id="__svg__SVGTextPositioningElement__rotate">rotate</b> の各IDL属性は、
            それぞれ <a href="types.html#TermReflect">反映</a>される <span class="attr-name">‘<a
                    href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、<span class="attr-name">‘<a
                    href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、<span
                class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>、<span
                class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            コンテンツ属性に対応します。
        </p>


        <h3 id="InterfaceSVGTextElement" class="heading">11.13.3. Interface SVGTextElement<a class="self-link"
                href="#InterfaceSVGTextElement"></a></h3>



        <p><a class="idlinterface" href="text.html#InterfaceSVGTextElement">SVGTextElement</a> オブジェクトは、DOM内の <span
                class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 要素を表します。
        </p>

        <pre class="idl">[Exposed=Window]
interface <b>SVGTextElement</b> : <a class="idlinterface" href="text.html#InterfaceSVGTextPositioningElement">SVGTextPositioningElement</a> {
};</pre>



        <h3 id="InterfaceSVGTSpanElement" class="heading">11.13.4. Interface SVGTSpanElement<a class="self-link"
                href="#InterfaceSVGTSpanElement"></a></h3>



        <p><a class="idlinterface" href="text.html#InterfaceSVGTSpanElement">SVGTSpanElement</a> オブジェクトは、DOM内の <span
                class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 要素を表します。
        </p>

        <pre class="idl">[Exposed=Window]
interface <b>SVGTSpanElement</b> : <a class="idlinterface" href="text.html#InterfaceSVGTextPositioningElement">SVGTextPositioningElement</a> {
};</pre>



        <h3 id="InterfaceSVGTextPathElement" class="heading">11.13.5. Interface SVGTextPathElement<a class="self-link"
                href="#InterfaceSVGTextPathElement"></a></h3>



        <p><a class="idlinterface" href="text.html#InterfaceSVGTextPathElement">SVGTextPathElement</a> オブジェクトは、DOM内の
            <span class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span> 要素を表します。
        </p>

        <pre
            class="idl">[Exposed=Window]
interface <b>SVGTextPathElement</b> : <a class="idlinterface" href="text.html#InterfaceSVGTextContentElement">SVGTextContentElement</a> {

  // textPath Method Types
  const unsigned short <a href="text.html#__svg__SVGTextPathElement__TEXTPATH_METHODTYPE_UNKNOWN">TEXTPATH_METHODTYPE_UNKNOWN</a> = 0;
  const unsigned short <a href="text.html#__svg__SVGTextPathElement__TEXTPATH_METHODTYPE_ALIGN">TEXTPATH_METHODTYPE_ALIGN</a> = 1;
  const unsigned short <a href="text.html#__svg__SVGTextPathElement__TEXTPATH_METHODTYPE_STRETCH">TEXTPATH_METHODTYPE_STRETCH</a> = 2;

  // textPath Spacing Types
  const unsigned short <a href="text.html#__svg__SVGTextPathElement__TEXTPATH_SPACINGTYPE_UNKNOWN">TEXTPATH_SPACINGTYPE_UNKNOWN</a> = 0;
  const unsigned short <a href="text.html#__svg__SVGTextPathElement__TEXTPATH_SPACINGTYPE_AUTO">TEXTPATH_SPACINGTYPE_AUTO</a> = 1;
  const unsigned short <a href="text.html#__svg__SVGTextPathElement__TEXTPATH_SPACINGTYPE_EXACT">TEXTPATH_SPACINGTYPE_EXACT</a> = 2;

  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLength">SVGAnimatedLength</a> <a href="text.html#__svg__SVGTextPathElement__startOffset">startOffset</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedEnumeration">SVGAnimatedEnumeration</a> <a href="text.html#__svg__SVGTextPathElement__method">method</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedEnumeration">SVGAnimatedEnumeration</a> <a href="text.html#__svg__SVGTextPathElement__spacing">spacing</a>;
};

<a class="idlinterface" href="text.html#InterfaceSVGTextPathElement">SVGTextPathElement</a> includes <a class="idlinterface" href="types.html#InterfaceSVGURIReference">SVGURIReference</a>;</pre>

        <p><a class="idlinterface" href="text.html#InterfaceSVGTextPathElement">SVGTextPathElement</a>
            で定義される数値型メソッドタイプ定数は、<span class="attr-name">‘<a
                    href="text.html#TextPathElementMethodAttribute"><span>method</span></a>’</span>
            属性が取れるキーワード値を表すために使われます。各意味は下記の通りです：</p>

        <table class="vert">
            <tr>
                <th>定数</th>
                <th>意味</th>
            </tr>
            <tr>
                <td><b id="__svg__SVGTextPathElement__TEXTPATH_METHODTYPE_ALIGN">TEXTPATH_METHODTYPE_ALIGN</b></td>
                <td><span class="attr-value">align</span> キーワード。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGTextPathElement__TEXTPATH_METHODTYPE_STRETCH">TEXTPATH_METHODTYPE_STRETCH</b></td>
                <td><span class="attr-value">stretch</span> キーワード。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGTextPathElement__TEXTPATH_METHODTYPE_UNKNOWN">TEXTPATH_METHODTYPE_UNKNOWN</b></td>
                <td>その他の値。</td>
            </tr>
        </table>

        <p><a class="idlinterface" href="text.html#InterfaceSVGTextPathElement">SVGTextPathElement</a>
            で定義される数値型スペーシングタイプ定数は、<span class="attr-name">‘<a
                    href="text.html#TextPathElementSpacingAttribute"><span>spacing</span></a>’</span>
            属性が取れるキーワード値を表すために使われます。各意味は下記の通りです：</p>

        <table class="vert">
            <tr>
                <th>定数</th>
                <th>意味</th>
            </tr>
            <tr>
                <td><b id="__svg__SVGTextPathElement__TEXTPATH_SPACINGTYPE_AUTO">TEXTPATH_SPACINGTYPE_AUTO</b></td>
                <td><span class="attr-value">auto</span> キーワード。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGTextPathElement__TEXTPATH_SPACINGTYPE_EXACT">TEXTPATH_SPACINGTYPE_EXACT</b></td>
                <td><span class="attr-value">exact</span> キーワード。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGTextPathElement__TEXTPATH_SPACINGTYPE_UNKNOWN">TEXTPATH_SPACINGTYPE_UNKNOWN</b>
                </td>
                <td>その他の値。</td>
            </tr>
        </table>

        <p><b id="__svg__SVGTextPathElement__startOffset">startOffset</b> IDL属性は、<a
                href="types.html#TermReflect">反映</a>される <span class="attr-name">‘<a
                    href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>
            コンテンツ属性に対応します。
        </p>

        <p><b id="__svg__SVGTextPathElement__method">method</b> IDL属性は、<a href="types.html#TermReflect">反映</a>される <span
                class="attr-name">‘<a href="text.html#TextPathElementMethodAttribute"><span>method</span></a>’</span>
            コンテンツ属性に対応します。<a href="types.html#TermNumericTypeValue">数値型値</a>は、上記表の数値型メソッドタイプ定数に従います。
        </p>

        <p><b id="__svg__SVGTextPathElement__spacing">spacing</b> IDL属性は、<a href="types.html#TermReflect">反映</a>される
            <span class="attr-name">‘<a
                    href="text.html#TextPathElementSpacingAttribute"><span>spacing</span></a>’</span> コンテンツ属性に対応します。<a
                href="types.html#TermNumericTypeValue">数値型値</a>は、上記表の数値型スペーシングタイプ定数に従います。
        </p>


    </div>

    <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
    <script src="https://www.w3.org/TR/SVG2/images/style/expanders.js" type="text/javascript"></script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
</body>

</html>