<!DOCTYPE html>

<!--
  Scalable Vector Graphics (SVG) 2
  Chapter 8: Coordinate Systems, Transformations and Units

  Note: This document is generated from ../master/coords.html.
  Run "make" from the root of the repository to regenerate it.
  -->

<html lang="ja-JP" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8" />
    <title>座標系・変換・単位 — SVG 2</title>

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- Style sheets for local dev. Will be standardized in processing.
  Add attribute data-keep="" to any extra stylesheet link you do not want removed
  (or use <style>), and include it before here. -->


    <link rel="stylesheet" title="Default" href="https://www.w3.org/TR/SVG2/style/svg.css" type="text/css"
        media="screen" />
    <link rel="alternate stylesheet" title="Only annotations for publication"
        href="https://www.w3.org/TR/SVG2/style/default_no_maturity.css" type="text/css" media="screen" />
    <link rel="alternate stylesheet" title="No issues/annotations"
        href="https://www.w3.org/TR/SVG2/style/default_no_issues.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-ED" type="text/css" media="screen" />
    <script src="https://www.w3.org/TR/SVG2/style/link-fixup.js"></script>
    <script data-script-mathjax="" async=""
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_SVG"></script>
</head>

<body class="chapter-coords">

    <h1>第8章: 座標系・変換・単位</h1>
    <nav id="toc">
        <div class="header top"><a href="index.html">概要</a> . <a href="geometry.html">前へ</a> . <a
                href="paths.html">次へ</a> . <a href="eltindex.html">要素一覧</a> . <a href="attindex.html">属性一覧</a> . <a
                href="propidx.html">プロパティ一覧</a></div>
        <h2 id="Contents" class="contents">目次</h2>
        <ol class="toc">
            <li>
                <ol class="toc">
                    <li><a href="coords.html#Introduction"><span class="secno">8.1.</span> はじめに</a></li>
                    <li><a href="coords.html#ComputingAViewportsTransform"><span class="secno">8.2.</span>
                            SVGビューポートの等価変換の計算</a></li>
                    <li><a href="coords.html#ViewportSpace"><span class="secno">8.3.</span> 初期ビューポート</a>
                    </li>
                    <li><a href="coords.html#InitialCoordinateSystem"><span class="secno">8.4.</span> 初期座標系</a></li>
                    <li><a href="coords.html#TransformProperty"><span class="secno">8.5.</span> ‘<span
                                class="property">transform</span>’プロパティ</a></li>
                    <li><a href="coords.html#ViewBoxAttribute"><span class="secno">8.6.</span> <span
                                class="attr-name">‘viewBox’</span>属性</a></li>
                    <li><a href="coords.html#PreserveAspectRatioAttribute"><span class="secno">8.7.</span> <span
                                class="attr-name">‘preserveAspectRatio’</span>
                            属性</a></li>
                    <li><a href="coords.html#EstablishingANewSVGViewport"><span class="secno">8.8.</span>
                            新しいSVGビューポートの確立</a></li>
                    <li><a href="coords.html#Units"><span class="secno">8.9.</span> 単位</a></li>
                    <li><a href="coords.html#BoundingBoxes"><span class="secno">8.10.</span> バウンディングボックス</a></li>
                    <li><a href="coords.html#ObjectBoundingBoxUnits"><span class="secno">8.11.</span>
                            オブジェクトバウンディングボックス単位</a></li>
                    <li><a href="coords.html#SizingSVGInCSS"><span class="secno">8.12.</span> SVGコンテンツの固有サイズプロパティ</a>
                    </li>
                    <li><a href="coords.html#VectorEffects"><span class="secno">8.13.</span> ベクター効果</a>
                        <ol class="toc">
                            <li><a href="coords.html#VectorEffectsCalculation"><span class="secno">8.13.1.</span>
                                    ベクター効果の計算</a></li>
                            <li><a href="coords.html#NestedVectorEffectsCalculation"><span class="secno">8.13.2.</span>
                                    入れ子ビューポート座標系に対するベクター効果の計算</a></li>
                            <li><a href="coords.html#VectorEffectsExamples"><span class="secno">8.13.3.</span>
                                    ベクター効果の例</a></li>
                        </ol>
                    </li>
                    <li><a href="coords.html#DOMInterfaces"><span class="secno">8.14.</span> DOMインターフェース</a>
                        <ol class="toc">
                            <li><a href="coords.html#InterfaceSVGTransform"><span class="secno">8.14.1.</span> Interface
                                    SVGTransform</a></li>
                            <li><a href="coords.html#InterfaceSVGTransformList"><span class="secno">8.14.2.</span>
                                    Interface SVGTransformList</a></li>
                            <li><a href="coords.html#InterfaceSVGAnimatedTransformList"><span
                                        class="secno">8.14.3.</span> Interface SVGAnimatedTransformList</a></li>
                            <li><a href="coords.html#InterfaceSVGPreserveAspectRatio"><span class="secno">8.14.4.</span>
                                    Interface SVGPreserveAspectRatio</a></li>
                            <li><a href="coords.html#InterfaceSVGAnimatedPreserveAspectRatio"><span
                                        class="secno">8.14.5.</span> Interface SVGAnimatedPreserveAspectRatio</a></li>
                        </ol>
                    </li>
                </ol>
            </li>
        </ol>
    </nav>

    <h2 id="Introduction" class="heading">8.1. はじめに<a class="self-link" href="#Introduction"></a></h2>
    <div class="ready-for-wider-review">

        <p>すべてのSVGコンテンツは
            <dfn id="TermSVGViewport" data-dfn-type="dfn" data-export="">SVGビューポート</dfn>
            内に描画されます。
            SVGビューポートはそれぞれ、サイズ（幅、高さ）と原点によって特徴付けられる描画領域を定義し、原点は抽象的な
            <dfn id="TermUserUnits" data-dfn-type="dfn" data-export="">ユーザー単位</dfn>
            で測定されます。
        </p>

        <p class="note">SVGビューポートという用語は
            <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/visuren.html#viewport">CSSの「viewport」</a>
            用語とは異なります。
        </p>

        <p><dfn id="TermInitialViewport" data-dfn-type="dfn"
                data-export="">初期ビューポート</dfn>は、トップレベルのSVGビューポートであり、親環境（例えばウェブブラウザのCSSピクセル）で使われる座標系と<a
                href="coords.html#TermUserUnits">ユーザー単位</a>との間の対応付けを確立します。初期ビューポートの確立については、<a
                href="#ViewportSpace">初期ビューポート</a>で詳しく説明します。</p>

        <p>SVGビューポートは要素によってのみ確立されます。どの要素がビューポートを生成するかの詳細は
            <a href="#EstablishingANewSVGViewport">新しいSVGビューポートの確立</a>を参照してください。
        </p>

        <p>各SVGビューポートは
            <dfn id="TermViewportCoordinateSystem" data-dfn-type="dfn" data-export="">ビューポート座標系</dfn>
            と
            <dfn id="TermUserCoordinateSystem" data-dfn-type="dfn" data-export="">ユーザー座標系</dfn>
            を生成し、初期状態では両者は一致します。
            ビューポートの要素に<span class="attr-name">‘<a
                    href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>属性を指定すると、ユーザー座標系がビューポート座標系に対して変換されます（詳細は
            <span class="attr-name">‘<a
                    href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>属性参照）。ビューポートの子要素はさらに<a
                href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">ユーザー座標系</a>を変更できます。例えば、<a
                class="property" href="coords.html#TransformProperty">transform</a>プロパティを指定した場合などです。
        </p>

        <p>SVGビューポートは入れ子にできます。パーセンテージ単位は最も近い祖先SVGビューポートの幅と高さを基準に解決されます。したがって、SVGビューポートの入れ子構造はパーセンテージ単位の意味を再定義し、特定の矩形領域に対してグラフィックを「フィット」させるための新しい参照矩形を提供できます。
        </p>

        <p>SVGビューポートの幅・高さ・原点は、SVGビューポートを生成するSVG文書断片とその親（明示的または暗黙的）との間で交渉によって決定されます。交渉プロセスの詳細は
            <a href="#EstablishingANewSVGViewport">新しいSVGビューポートの確立</a>を参照してください。
        </p>

        <p>デフォルトでは、入れ子SVGビューポートの<a
                href="coords.html#TermViewportCoordinateSystem">ビューポート座標系</a>は、親要素のローカル座標系に等しく、SVGビューポート要素の原点で平行移動されたものとなります。ただし、SVGビューポート要素に<a
                class="property" href="coords.html#TransformProperty">transform</a>プロパティが指定されている場合は、親要素のユーザー座標系に対して<a
                href="coords.html#TermViewportCoordinateSystem">ビューポート座標系</a>が変更されます。</p>

        <p>抽象的には、すべてのSVGビューポートは
            <dfn id="TermCanvas" data-dfn-type="dfn" data-export="">キャンバス</dfn>
            （すべての関連次元で無限に広い描画領域）に埋め込まれています。
        </p>

        <h2 id="ComputingAViewportsTransform" class="heading">8.2. SVGビューポートの等価変換の計算<a class="self-link"
                href="#ComputingAViewportsTransform"></a></h2>

        <p>このプロセスは、viewBox属性のmin-x, min-y, width,
            heightの値、viewBox属性が定義されている要素の位置とサイズ、およびその要素のpreserveAspectRatio属性値を、要素内コンテンツに適用される平行移動と拡大縮小へ変換します。</p>

        <ol class="algorithm">
            <li><var>vb-x</var>, <var>vb-y</var>, <var>vb-width</var>, <var>vb-height</var>をviewBox属性のmin-x, min-y,
                width, heightの値とする。</li>
            <li><var>e-x</var>, <var>e-y</var>, <var>e-width</var>, <var>e-height</var>を要素の位置とサイズとする。</li>
            <li><var>align</var>をpreserveAspectRatioのalign値、preserveAspectRatioが未定義の場合は'xMidYMid'とする。</li>
            <li><var>meetOrSlice</var>をpreserveAspectRatioのmeetOrSlice値、preserveAspectRatio未定義またはmeetOrSlice値が省略されている場合は'meet'とする。
            </li>
            <li><var>scale-x</var>を<var>e-width</var>/<var>vb-width</var>で初期化する。</li>
            <li><var>scale-y</var>を<var>e-height</var>/<var>vb-height</var>で初期化する。</li>
            <li><var>align</var>が'none'でなく、かつ<var>meetOrSlice</var>が'meet'なら、<var>scale-x</var>と<var>scale-y</var>の大きい方を小さい方に合わせる。
            </li>
            <li>それ以外で<var>align</var>が'none'でなく、かつ<var>meetOrSlice</var>が'slice'なら、<var>scale-x</var>と<var>scale-y</var>の小さい方を大きい方に合わせる。
            </li>
            <li><var>translate-x</var>を<var>e-x</var> - (<var>vb-x</var> * <var>scale-x</var>)で初期化する。</li>
            <li><var>translate-y</var>を<var>e-y</var> - (<var>vb-y</var> * <var>scale-y</var>)で初期化する。</li>
            <li><var>align</var>に'xMid'が含まれていれば、(<var>e-width</var> - <var>vb-width</var> * <var>scale-x</var>) /
                2を<var>translate-x</var>へ加算する。</li>
            <li><var>align</var>に'xMax'が含まれていれば、(<var>e-width</var> - <var>vb-width</var> *
                <var>scale-x</var>)を<var>translate-x</var>へ加算する。
            </li>
            <li><var>align</var>に'yMid'が含まれていれば、(<var>e-height</var> - <var>vb-height</var> * <var>scale-y</var>) /
                2を<var>translate-y</var>へ加算する。</li>
            <li><var>align</var>に'yMax'が含まれていれば、(<var>e-height</var> - <var>vb-height</var> *
                <var>scale-y</var>)を<var>translate-y</var>へ加算する。
            </li>
        </ol>

        <p>要素内コンテンツに適用される変換は
            translate(<var>translate-x</var>, <var>translate-y</var>) scale(<var>scale-x</var>, <var>scale-y</var>)
            です。</p>

    </div>

    <h2 id="ViewportSpace" class="heading">8.3. 初期ビューポート<a class="self-link" href="#ViewportSpace"></a></h2>

    <p>初期ビューポートの幅は、<a class="property" href="geometry.html#Sizing">width</a>プレゼンテーション属性の値が<a
            href="struct.html#TermOutermostSVGElement">最外svg要素</a>に指定されている場合はその値となります。ただし、以下の条件を全て満たす場合は除きます：</p>

    <ul>
        <li>SVGコンテンツが参照埋め込み（HTMLの<span class="element-name">‘object’</span>要素など）やインライン埋め込みで別途保存されたリソースである場合</li>

        <li>かつ、参照要素または親文書がCSS [<a href="refs.html#ref-css2">CSS2</a>]でスタイリングされている場合</li>

        <li>かつ、参照要素（例：<span class="element-name">‘object’</span>要素）または親文書の<a
                href="struct.html#TermOutermostSVGElement">最外svg要素</a>に<a
                href="https://www.w3.org/TR/2011/REC-CSS2-20110607/visuren.html#positioning-scheme">CSS互換の位置指定プロパティ</a>
            ([<a href="refs.html#ref-css2">CSS2</a>] 9.3節)が十分に指定されていて、ビューポート幅を確定できる場合</li>
    </ul>

    <p>これらの条件下では、ビューポート幅は位置指定プロパティにより決定しなければなりません。</p>

    <p>同様に、参照要素または<a href="struct.html#TermOutermostSVGElement">最外svg要素</a>に
        <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/visuren.html#positioning-scheme">位置指定プロパティ</a>
        が十分に指定されていてビューポート高さを確定できる場合は、これらの位置指定プロパティで高さを決定しなければなりません。そうでなければ、初期ビューポートの高さは<a class="property"
            href="geometry.html#Sizing">height</a>プレゼンテーション属性の値となります。
    </p>

    <p><a class="property" href="geometry.html#Sizing">width</a>や<a class="property"
            href="geometry.html#Sizing">height</a>プレゼンテーション属性が<a
            href="struct.html#TermOutermostSVGElement">最外svg要素</a>にユーザー単位（単位指定なし）で指定されている場合は、その値は「px」単位と同等とみなされます（<a
            href="coords.html#Units">単位</a>参照）。</p>

    <div class="example">
        <p>次の例では、SVGグラフィックが親XML文書内にインラインで埋め込まれており、CSSレイアウトルールで整形されています。<a
                href="struct.html#TermOutermostSVGElement">最外svg要素</a>にCSS位置指定プロパティが指定されていないため、<span
                class="attr-value">width="100px"</span>と<span
                class="attr-value">height="200px"</span>属性が初期ビューポートのサイズを決定します：
        </p>

        <pre>
&lt;?xml version="1.0" standalone="yes"?>
&lt;parent xmlns="http://some.url">

   &lt;!-- SVG graphic -->
   &lt;svg xmlns='http://www.w3.org/2000/svg'
      width="100px" height="200px">
      &lt;path d="M100,100 Q200,400,300,100"/>
      &lt;!-- rest of SVG graphic would go here -->
   &lt;/svg>

&lt;/parent>
</pre>
    </div>

    <h2 id="InitialCoordinateSystem" class="heading">8.4. 初期座標系<a class="self-link" href="#InitialCoordinateSystem"></a>
    </h2>

    <p><a href="struct.html#TermOutermostSVGElement">最外svg要素</a>に対して、SVGユーザーエージェントは初期<a
            href="coords.html#TermViewportCoordinateSystem">ビューポート座標系</a>と初期<a
            href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">ユーザー座標系</a>を決定しなければなりません。この両座標系は一致している必要があります。両座標系の原点はSVGビューポートの原点となり、初期座標系の1単位はSVGビューポート内の
        <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#length-units">CSS 2.1 px</a>
        ([<a href="refs.html#ref-css2">CSS2</a>] 4.3.2節)と等しくなります。

        スタンドアロンSVG文書や、CSS [<a
            href="refs.html#ref-css2">CSS2</a>]でレイアウトされる親文書内に参照またはインライン埋め込みされたSVG文書断片では、初期ビューポート座標系（および初期ユーザー座標系）は、原点がビューポートの左上、x軸が右向き、y軸が下向き、テキストは「立て書き」方向（ローマ字や全角漢字などのグリフの上端が上、右端が右になるよう配置）となります。
    </p>

    <p>SVG実装がCSS
        2.1互換の<em>px</em>単位による文書スタイリングをサポートするユーザーエージェントの一部である場合、SVGユーザーエージェントは<em>px</em>単位の実世界サイズの初期値を他のスタイリング操作で使われる値と一致させるべきです。そうでない場合、ユーザーエージェントが環境から<em>px</em>単位のサイズを決定できればそれを使い、できない場合は適切なサイズを選ぶべきです。いずれの場合も、<em>px</em>単位のサイズは<a
            href="https://www.w3.org/TR/CSS2/syndata.html#length-units">CSS 2.1で説明される規則</a>
        ([<a href="refs.html#ref-css2">CSS2</a>] 4.3.2節)に準拠しなければなりません。
    </p>

    <p id="ExampleInitialCoords"><span class="example-ref">例
            InitialCoords</span>は、初期座標系の原点が左上で、x軸が右向き、y軸が下向きであることを示しています。初期ユーザー座標系の1ユーザー単位は、親（明示的または暗黙的）ユーザーエージェントの「ピクセル」と等しくなります。
    </p>

    <div class="example">
        <pre class="xml">&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="300px" height="100px" version="1.1"
     xmlns="http://www.w3.org/2000/svg">
  &lt;desc>例 InitialCoords - SVGの初期座標系&lt;/desc>

  &lt;g fill="none" stroke="black" stroke-width="3" >
    &lt;line x1="0" y1="1.5" x2="300" y2="1.5" />
    &lt;line x1="1.5" y1="0" x2="1.5" y2="100" />
  &lt;/g>
  &lt;g fill="red" stroke="none" >
    &lt;rect x="0" y="0" width="3" height="3" />
    &lt;rect x="297" y="0" width="3" height="3" />
    &lt;rect x="0" y="97" width="3" height="3" />
  &lt;/g>
  &lt;g font-size="14" font-family="Verdana" >
    &lt;text x="10" y="20">(0,0)&lt;/text>
    &lt;text x="240" y="20">(300,0)&lt;/text>
    &lt;text x="10" y="90">(0,100)&lt;/text>
  &lt;/g>
&lt;/svg></pre>
        <div class="figure"><img alt="例 InitialCoords — SVGの初期座標系"
                src="https://www.w3.org/TR/SVG2/images/coords/InitialCoords.png" />
            <p class="caption">例 InitialCoords</p>
        </div>
        <p class="view-as-svg"><a
                href="https://www.w3.org/TR/SVG2/images/coords/InitialCoords.svg">この例をSVGとして表示（SVG対応ブラウザのみ）</a></p>
    </div>

    <div class="ready-for-wider-review">

        <h2 id="TransformProperty" class="heading">8.5. ‘<span class="property">transform</span>’プロパティ<a
                class="self-link" href="#TransformProperty"></a></h2>

        <p>
            ユーザーエージェントは、[<a href="refs.html#ref-css-transforms-1">css-transforms-1</a>]で定義される
            <a class="property" href="coords.html#TransformProperty">transform</a>プロパティおよびプレゼンテーション属性をサポートしなければなりません。
        </p>

        <h2 id="ViewBoxAttribute" class="heading">8.6. <span class="attr-name">‘viewBox’</span>属性<a class="self-link"
                href="#ViewBoxAttribute"></a></h2>

        <dl class="attrdef-list">
            <dt>
                <table class="attrdef def">
                    <tr>
                        <th>名前</th>
                        <th>値</th>
                        <th>初期値</th>
                        <th>アニメーション可能</th>
                    </tr>
                    <tr>
                        <td><dfn id="TermViewBox" data-dfn-type="element-attr" data-dfn-for="svg"
                                data-export="">viewBox</dfn></td>
                        <td>[<span class="attr-value">&lt;min-x></span>,?
                            <span class="attr-value">&lt;min-y></span>,?
                            <span class="attr-value">&lt;width></span>,?
                            <span class="attr-value">&lt;height></span>]
                        </td>
                        <td>未指定と同様</td>
                        <td>はい</td>
                    </tr>
                </table>
            </dt>
            <dd>
                <pre>&lt;min-x>, &lt;min-y>, &lt;width>, &lt;height> = <a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a></pre>
            </dd>
        </dl>

        <p class="annotation"><span class="element-name">‘<a
                    href="struct.html#SVGElement"><span>svg</span></a>’</span>要素上のtransformは
            <span class="attr-name">‘<a
                    href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>属性のため特別な扱いとなります。
            transformは、あたかも<span class="element-name">‘<a
                    href="struct.html#SVGElement"><span>svg</span></a>’</span>要素がそのtransformを持つ親要素を持っているかのように適用されるべきです。
            <br /><br /><a href="https://www.w3.org/2015/01/08-svg-minutes.html">決議:
                transformプロパティは概念的に'svg'要素の外側に適用され、プレゼンテーション属性とスタイルプロパティの間に視覚的結果の違いはありません</a>。
        </p>

        <p class="note"><span class="attr-name">‘<a
                    href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>属性は、
            <span class="attr-name">‘<a
                    href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>属性と組み合わせて、
            SVGビューポートを特定のコンテナ要素に合わせて伸縮する機能を提供します。
        </p>

        <p><span class="attr-name">‘<a href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>属性の値は、4つの数値
            <span class="attr-value">&lt;min-x></span>、<span class="attr-value">&lt;min-y></span>、<span
                class="attr-value">&lt;width></span>、<span class="attr-value">&lt;height></span>
            のリストで、空白またはカンマで区切られます。これらはユーザー空間の矩形を指定し、指定された要素で確立されたSVGビューポートの境界にマッピングされます（
            <span class="attr-name">‘<a
                    href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>
            属性を考慮）。<span class="attr-name">‘<a
                    href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>属性を指定すると、
            <a href="#ComputingAViewportsTransform">SVGビューポートの等価変換の計算</a>で記載されているように
            ビューポート座標系に変換が適用されます。
        </p>

        <p><span class="attr-value">&lt;width></span>または
            <span class="attr-value">&lt;height></span>に負の値を指定するとエラーとなり、
            <span class="attr-name">‘<a
                    href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>属性は無効になります。ゼロ値の場合は要素の描画が無効化されます。
        </p>

        <div class="example">
            <p id="ExampleViewBox"><span class="example-ref">例 ViewBox</span>は、
                <a href="struct.html#TermOutermostSVGElement">最外svg要素</a>上の<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>属性によって、
                SVGコンテンツがSVGビューポートの境界に合わせて伸縮する例です。
            </p>

            <pre>
&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="300px" height="200px"
     viewBox="0 0 1500 1000" preserveAspectRatio="none"
     xmlns="http://www.w3.org/2000/svg">
  &lt;desc>例 ViewBox - viewBox属性を使い、
   初期ユーザー座標系を自動的に作成し、グラフィックが
   SVGビューポートのサイズに関わらずフィットするようにスケールします。&lt;/desc>
  &lt;!-- この矩形はユーザー座標系の(0,0)から(1500,1000)までです。
       上記viewBox属性により、この矩形はSVGコンテンツ用に確保された全領域を埋めることになります。 -->
  &lt;rect x="0" y="0" width="1500" height="1000"
        fill="yellow" stroke="blue" stroke-width="12"  />
  &lt;!-- 大きな赤い三角形 -->
  &lt;path fill="red"  d="M 750,100 L 250,900 L 1250,900 z"/>
  &lt;!-- SVGビューポートのほとんどを覆うテキスト -->
  &lt;text x="100" y="600" font-size="200" font-family="Verdana" >
    Stretch to fit
  &lt;/text>
&lt;/svg>
</pre>

            <table>
                <caption>
                    例 ViewBox
                </caption>
                <tr>
                    <th>SVGビューポート（幅=300px,<br />高さ=200px）で描画</th>
                    <th> </th>
                    <th>SVGビューポート（幅=150px,<br />高さ=200px）で描画</th>
                </tr>
                <tr>
                    <td><img alt="例 ViewBox - 300×200にフィット" src="https://www.w3.org/TR/SVG2/images/coords/ViewBox.png"
                            width="300" height="200" /></td>
                    <td> </td>
                    <td><img alt="例 ViewBox - 150×200にフィット"
                            src="https://www.w3.org/TR/SVG2/images/coords/ViewBox-Width150.png" width="150"
                            height="200" /></td>
                </tr>
            </table>

            <p class="view-as-svg"><a
                    href="https://www.w3.org/TR/SVG2/images/coords/ViewBox.svg">この例をSVGとして表示（SVG対応ブラウザのみ）</a><br />
            </p>

            <p><span class="attr-name">‘<a href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>
                属性の効果は、ユーザーエージェントが指定されたユーザー座標系内の矩形を指定領域（多くの場合SVGビューポート）にマッピングするための適切な変換行列を自動的に適用することです。左側の例（SVGビューポート300×200ピクセル）の場合、ユーザーエージェントはX・Y両方を0.2でスケールする変換を自動挿入する必要があります。これは、300px×200pxのSVGビューポートと次の補助変換が文書にあるのと同等です：
            </p>

            <pre>
&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="300px" height="200px"
     xmlns="http://www.w3.org/2000/svg">
  <strong>&lt;g transform="scale(0.2)"></strong>
    &lt;!-- 本文書の残り -->
  <strong>&lt;/g></strong>
&lt;/svg>
</pre>

            <p>右側の例（SVGビューポート150×200ピクセル）の場合は、Xを0.1、Yを0.2でスケールする変換を自動挿入する必要があります。これは、150px×200pxのSVGビューポートと次の補助変換があるのと同等です：
            </p>

            <pre>
&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="150px" height="200px"
     xmlns="http://www.w3.org/2000/svg">
  <strong>&lt;g transform="scale(0.1 0.2)"></strong>
    &lt;!-- 本文書の残り -->
  <strong>&lt;/g></strong>
&lt;/svg>
</pre>
        </div>

        <div class="note">
            <p>場合によっては、ユーザーエージェントが<strong>scale</strong>変換に加えて<strong>translate</strong>変換も適用する必要があります。例えば、
                <a href="struct.html#TermOutermostSVGElement">最外svg要素</a>上で
                <span class="attr-name">‘<a href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>属性の
                <span class="attr-value">&lt;min-x></span>や<span class="attr-value">&lt;min-y></span>にゼロ以外の値が指定された場合は、
                <strong>translate</strong>変換が必要となります。
            </p>
        </div>

        <p>両方の<a class="property" href="coords.html#TransformProperty">transform</a>（または<span class="attr-name">‘<a
                    href="pservers.html#PatternElementPatternTransformAttribute"><span>patternTransform</span></a>’</span>）と
            <span class="attr-name">‘<a
                    href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>が要素に適用される場合、2つの新しい座標系が確立されます。
            <a class="property" href="coords.html#TransformProperty">transform</a>が最初の新しい座標系を確立し、
            <span class="attr-name">‘<a
                    href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>がすべての子孫要素に対する2つ目の座標系を確立します。
            最初の座標系は2つ目の座標系で後置乗算されます。
        </p>

        <p id="ViewBoxAttributeEffectOnSiblingAttributes"><a class="property"
                href="coords.html#TransformProperty">transform</a>プロパティとは異なり、
            <span class="attr-name">‘<a href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>による自動変換は、
            要素上の<span class="attr-name">‘x’</span>、<span class="attr-name">‘y’</span>、<span
                class="attr-name">‘width’</span>、<span class="attr-name">‘height’</span>属性（
            <span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span>要素の場合は
            <span class="attr-name">‘<a
                    href="painting.html#MarkerWidthAttribute"><span>markerWidth</span></a>’</span>および
            <span class="attr-name">‘<a
                    href="painting.html#MarkerHeightAttribute"><span>markerHeight</span></a>’</span>属性）には影響しません。
            したがって、上記例で示したように、
            <span class="element-name">‘<a href="struct.html#SVGElement"><span>svg</span></a>’</span>要素が
            <a class="property" href="geometry.html#Sizing">width</a>と<a class="property"
                href="geometry.html#Sizing">height</a>プレゼンテーション属性、
            <span class="attr-name">‘<a href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>属性を持つ場合、
            <a class="property" href="geometry.html#Sizing">width</a>と<a class="property"
                href="geometry.html#Sizing">height</a>は
            <span class="attr-name">‘<a
                    href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>変換が適用される<em>前</em>の座標系での値となります。一方、<a
                class="property" href="coords.html#TransformProperty">transform</a>プロパティと同様に、
            他の属性や子孫要素に対しては新しい座標系が確立されます。
        </p>

        <h2 id="PreserveAspectRatioAttribute" class="heading">8.7. <span class="attr-name">‘preserveAspectRatio’</span>
            属性<a class="self-link" href="#PreserveAspectRatioAttribute"></a></h2>

        <dl class="attrdef-list">
            <dt>
                <table class="attrdef def">
                    <tr>
                        <th>名前</th>
                        <th>値</th>
                        <th>初期値</th>
                        <th>アニメーション可能</th>
                    </tr>
                    <tr>
                        <td><dfn id="TermPreserveAspectRatio" data-dfn-type="element-attr" data-dfn-for="svg"
                                data-export="">preserveAspectRatio</dfn></td>
                        <td><span class="attr-value">&lt;align></span> <span class="attr-value">&lt;meetOrSlice></span>?
                        </td>
                        <td>xMidYMid meet</td>
                        <td>はい</td>
                    </tr>
                </table>
            </dt>
            <dd>
                <pre>&lt;align> =
    none
    | xMinYMin | xMidYMin | xMaxYMin
    | xMinYMid | xMidYMid | xMaxYMid
    | xMinYMax | xMidYMax | xMaxYMax</pre>
                <pre>&lt;meetOrSlice> = meet | slice</pre>
                <p>均一な拡大縮小を強制するかどうかを示します。新しいSVGビューポートを確立するすべての要素（<a
                        href="coords.html#ElementsThatEstablishViewports">SVGビューポートを確立する要素</a>参照）、および
                    <span class="element-name">‘<a href="embedded.html#ImageElement"><span>image</span></a>’</span>、
                    <span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span>、
                    <span class="element-name">‘<a href="pservers.html#PatternElement"><span>pattern</span></a>’</span>
                    、
                    <span class="element-name">‘<a href="linking.html#ViewElement"><span>view</span></a>’</span>
                    要素に適用されます
                </p>
            </dd>
        </dl>

        <p>場合によっては、通常
            <span class="attr-name">‘<a href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>属性を使用する際に、
            グラフィック全体をSVGビューポート全体に非均一にフィットさせることが望ましいことがあります。他の場合には、グラフィックのアスペクト比を保持するために均一な拡大縮小を使用することが望ましいことがあります。
        </p>

        <p>新しいSVGビューポートを確立する要素（<a href="coords.html#ElementsThatEstablishViewports">SVGビューポートを確立する要素</a>参照）、
            および
            <span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span>、
            <span class="element-name">‘<a href="pservers.html#PatternElement"><span>pattern</span></a>’</span>、
            <span class="element-name">‘<a href="linking.html#ViewElement"><span>view</span></a>’</span>要素については、
            同じ要素に<span class="attr-name">‘<a
                    href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>属性の値が指定されている場合のみ
            <span class="attr-name">‘<a
                    href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>が適用されます。これらの要素で
            <span class="attr-name">‘<a
                    href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>属性が指定されていない場合は
            <span class="attr-name">‘<a
                    href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>は無視されます。
        </p>

        <p><span class="element-name">‘<a href="embedded.html#ImageElement"><span>image</span></a>’</span>要素については、
            <span class="attr-name">‘<a
                    href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>属性は
            参照画像を基準矩形にどのようにフィットさせるか、および参照画像のアスペクト比を現在のユーザー座標系で保持するかどうかを示します。
        </p>

        <p id="DataTypeAlign"><span class="attr-value">&lt;align></span>パラメータは、
            均一な拡大縮小を強制するかどうか、強制する場合はSVGビューポートのアスペクト比と<span class="attr-name">‘<a
                    href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>のアスペクト比が一致しない場合の整列方式を示します。<span
                class="attr-value">&lt;align></span>パラメータは以下のいずれかの文字列でなければなりません：</p>

        <ul>
            <li><span class="attr-value">none</span> -
                均一な拡大縮小を強制しません。必要に応じてグラフィック内容を非均一に拡大縮小し、要素のバウンディングボックスがSVGビューポート矩形に正確に一致するようにします。<br />
                （注：<span class="attr-value">&lt;align></span>が<span class="attr-value">none</span>の場合、オプションの<span
                    class="attr-value">&lt;meetOrSlice></span>値は無視されます。）
            </li>

            <li><span class="attr-value">xMinYMin</span> - 均一な拡大縮小を強制します。<br />
                要素の<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>の<span
                    class="attr-value">&lt;min-x></span>をSVGビューポートの最小X値に合わせます。<br />
                要素の<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>の<span
                    class="attr-value">&lt;min-y></span>をSVGビューポートの最小Y値に合わせます。</li>

            <li><span class="attr-value">xMidYMin</span> - 均一な拡大縮小を強制します。<br />
                要素の<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>のX値の中点をSVGビューポートのX値の中点に合わせます。<br />
                要素の<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>の<span
                    class="attr-value">&lt;min-y></span>をSVGビューポートの最小Y値に合わせます。
            </li>

            <li><span class="attr-value">xMaxYMin</span> - 均一な拡大縮小を強制します。<br />
                要素の<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>の<span
                    class="attr-value">&lt;min-x>+&lt;width></span>をSVGビューポートの最大X値に合わせます。<br />
                要素の<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>の<span
                    class="attr-value">&lt;min-y></span>をSVGビューポートの最小Y値に合わせます。</li>

            <li><span class="attr-value">xMinYMid</span> - 均一な拡大縮小を強制します。<br />
                要素の<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>の<span
                    class="attr-value">&lt;min-x></span>をSVGビューポートの最小X値に合わせます。<br />
                要素の<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>のY値の中点をSVGビューポートのY値の中点に合わせます。
            </li>

            <li><span class="attr-value">xMidYMid</span>（<a href="types.html#TermInitialValue">初期値</a>） -
                均一な拡大縮小を強制します。<br />
                要素の<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>のX値の中点をSVGビューポートのX値の中点に合わせます。<br />
                要素の<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>のY値の中点をSVGビューポートのY値の中点に合わせます。
            </li>

            <li><span class="attr-value">xMaxYMid</span> - 均一な拡大縮小を強制します。<br />
                要素の<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>の<span
                    class="attr-value">&lt;min-x>+&lt;width></span>をSVGビューポートの最大X値に合わせます。<br />
                要素の<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>のY値の中点をSVGビューポートのY値の中点に合わせます。
            </li>

            <li><span class="attr-value">xMinYMax</span> - 均一な拡大縮小を強制します。<br />
                要素の<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>の<span
                    class="attr-value">&lt;min-x></span>をSVGビューポートの最小X値に合わせます。<br />
                要素の<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>の<span
                    class="attr-value">&lt;min-y>+&lt;height></span>をSVGビューポートの最大Y値に合わせます。</li>

            <li><span class="attr-value">xMidYMax</span> - 均一な拡大縮小を強制します。<br />
                要素の<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>のX値の中点をSVGビューポートのX値の中点に合わせます。<br />
                要素の<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>の<span
                    class="attr-value">&lt;min-y>+&lt;height></span>をSVGビューポートの最大Y値に合わせます。</li>

            <li><span class="attr-value">xMaxYMax</span> - 均一な拡大縮小を強制します。<br />
                要素の<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>の<span
                    class="attr-value">&lt;min-x>+&lt;width></span>をSVGビューポートの最大X値に合わせます。<br />
                要素の<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>の<span
                    class="attr-value">&lt;min-y>+&lt;height></span>をSVGビューポートの最大Y値に合わせます。</li>
        </ul>

        <p><span class="attr-value">&lt;meetOrSlice></span>
            パラメータはオプションであり、指定する場合は<span class="attr-value">&lt;align></span>値の後に1つ以上の空白で区切り、以下のいずれかの文字列でなければなりません：
        </p>

        <ul>
            <li>
                <p><span class="attr-value">meet</span>（デフォルト） - グラフィックを以下のように拡大縮小します：</p>

                <ul>
                    <li>アスペクト比は保持される</li>
                    <li><span class="attr-name">‘<a
                                href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>全体がSVGビューポート内に収まる
                    </li>
                    <li><span class="attr-name">‘<a
                                href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>は他の条件を満たす範囲で最大限拡大される
                    </li>
                </ul>

                <p>この場合、グラフィックのアスペクト比がSVGビューポートと一致しない場合、SVGビューポートの一部が<span class="attr-name">‘<a
                            href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>の範囲外にはみ出します（つまり、<span
                        class="attr-name">‘<a
                            href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>が描画する領域はSVGビューポートより小さくなります）。
                </p>
            </li>

            <li>
                <p><span class="attr-value">slice</span> - グラフィックを以下のように拡大縮小します：</p>

                <ul>
                    <li>アスペクト比は保持される</li>
                    <li>SVGビューポート全体が<span class="attr-name">‘<a
                                href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>で覆われる</li>
                    <li><span class="attr-name">‘<a
                                href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>は他の条件を満たす範囲で最大限縮小される
                    </li>
                </ul>

                <p>この場合、<span class="attr-name">‘<a
                            href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>のアスペクト比がSVGビューポートと一致しない場合、<span
                        class="attr-name">‘<a
                            href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>の一部がSVGビューポートの範囲外にはみ出します（つまり、<span
                        class="attr-name">‘<a
                            href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>が描画する領域はSVGビューポートより大きくなります）。
                </p>
            </li>
        </ul>

        <div class="example">
            <p id="ExamplePreserveAspectRatio"><span class="example-ref">例 PreserveAspectRatio</span>
                は<span class="attr-name">‘<a
                        href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>の様々なオプションを示しています。
                この例では
                <a href="struct.html#TermOutermostSVGElement">最外svg要素</a>内に
                <span class="element-name">‘<a href="struct.html#SVGElement"><span>svg</span></a>’</span>サブ要素を埋め込むことで
                複数の新しいSVGビューポートを作成しています（<a href="coords.html#EstablishingANewSVGViewport">新しいSVGビューポートの確立</a>参照）。
            </p>
            <pre>﻿&lt;svg width="450px" height="300px" xmlns="http://www.w3.org/2000/svg">

  &lt;desc>例 PreserveAspectRatio - preserveAspectRatio属性の例&lt;/desc>

  &lt;style type="text/css">
    text { font-size: 9; }
    rect { fill: none; stroke: blue; }
  &lt;/style>

  &lt;defs>
    &lt;g id="smile">
      &lt;rect x='.5' y='.5' width='29' height='39' style="fill:black;stroke:red"/>
      &lt;circle cx='15' cy='20' r='10'  fill='yellow'/>
      &lt;circle cx='12' cy='17' r='1.5' fill='black'/>
      &lt;circle cx='17' cy='17' r='1.5' fill='black'/>
      &lt;path d='M 10 24 A 8 8 0 0 0 20 24' stroke='black' stroke-width='2'/>
    &lt;/g>
  &lt;/defs>

  &lt;rect x="1" y="1" width="448" height="298"/>

  &lt;text x="10" y="30">SVGをフィット&lt;/text>
  &lt;g transform="translate(20,40)">&lt;use href="#smile" />&lt;/g>

  &lt;text x="10" y="110">ビューポート 1&lt;/text>
  &lt;g transform="translate(10,120)">&lt;rect x='.5' y='.5' width='49' height='29'/>&lt;/g>

  &lt;text x="10" y="180">ビューポート 2&lt;/text>
  &lt;g transform="translate(20,190)">&lt;rect x='.5' y='.5' width='29' height='59'/>&lt;/g>

  &lt;g id="meet-group-1" transform="translate(100, 60)">
    &lt;text x="0" y="-30">--------------- meet ---------------&lt;/text>
    &lt;g>
      &lt;text y="-10">xMin*&lt;/text>
      &lt;rect x='.5' y='.5' width='49' height='29'/>
      &lt;svg preserveAspectRatio="xMinYMin meet" viewBox="0 0 30 40" width="50" height="30">
	&lt;use href="#smile" />
      &lt;/svg>
    &lt;/g>
    &lt;g transform="translate(70,0)">
      &lt;text y="-10">xMid*&lt;/text>
      &lt;rect x='.5' y='.5' width='49' height='29'/>
      &lt;svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 30 40" width="50" height="30">
	&lt;use href="#smile" />
      &lt;/svg>
    &lt;/g>
    &lt;g transform="translate(0,70)">
      &lt;text y="-10">xMax*&lt;/text>
      &lt;rect x='.5' y='.5' width='49' height='29'/>
      &lt;svg preserveAspectRatio="xMaxYMax meet" viewBox="0 0 30 40" width="50" height="30">
        &lt;use href="#smile" />
      &lt;/svg>
    &lt;/g>
  &lt;/g>

  &lt;g id="meet-group-2" transform="translate(250, 60)">
    &lt;text x="0" y="-30">---------- meet ----------&lt;/text>
    &lt;g>
      &lt;text y="-10">*YMin&lt;/text>
      &lt;rect  x='.5' y='.5' width='29' height='59'/>
      &lt;svg preserveAspectRatio="xMinYMin meet" viewBox="0 0 30 40" width="30" height="60">
	&lt;use href="#smile" />
      &lt;/svg>
    &lt;/g>
    &lt;g transform="translate(50, 0)">
      &lt;text y="-10">*YMid&lt;/text>
      &lt;rect x='.5' y='.5' width='29' height='59'/>
      &lt;svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 30 40" width="30" height="60">
	&lt;use href="#smile" />
      &lt;/svg>
    &lt;/g>
    &lt;g transform="translate(100, 0)">
      &lt;text y="-10">*YMax&lt;/text>
      &lt;rect x='.5' y='.5' width='29' height='59'/>
      &lt;svg preserveAspectRatio="xMaxYMax meet" viewBox="0 0 30 40" width="30" height="60">
	&lt;use href="#smile" />
      &lt;/svg>
    &lt;/g>
  &lt;/g>

  &lt;g id="slice-group-1" transform="translate(100, 220)">
    &lt;text x="0" y="-30">---------- slice ----------&lt;/text>
    &lt;g>
      &lt;text y="-10">xMin*&lt;/text>
      &lt;rect x='.5' y='.5' width='29' height='59'/>
      &lt;svg preserveAspectRatio="xMinYMin slice" viewBox="0 0 30 40" width="30" height="60">
	&lt;use href="#smile" />
      &lt;/svg>
    &lt;/g>
    &lt;g transform="translate(50,0)">
      &lt;text y="-10">xMid*&lt;/text>
      &lt;rect x='.5' y='.5' width='29' height='59'/>
      &lt;svg preserveAspectRatio="xMidYMid slice" viewBox="0 0 30 40" width="30" height="60">
	&lt;use href="#smile" />
      &lt;/svg>
    &lt;/g>
    &lt;g transform="translate(100,0)">
      &lt;text y="-10">xMax*&lt;/text>
      &lt;rect x='.5' y='.5' width='29' height='59'/>
      &lt;svg preserveAspectRatio="xMaxYMax slice" viewBox="0 0 30 40" width="30" height="60">
	&lt;use href="#smile" />
      &lt;/svg>
    &lt;/g>
  &lt;/g>

  &lt;g id="slice-group-2" transform="translate(250, 220)">
    &lt;text x="0" y="-30">--------------- slice ---------------&lt;/text>
    &lt;g>
      &lt;text y="-10">*YMin&lt;/text>
      &lt;rect x='.5' y='.5' width='49' height='29'/>
      &lt;svg preserveAspectRatio="xMinYMin slice" viewBox="0 0 30 40"
           width="50" height="30">
	&lt;use href="#smile" />
      &lt;/svg>
    &lt;/g>
    &lt;g transform="translate(70,0)">
      &lt;text y="-10">*YMid&lt;/text>
      &lt;rect x='.5' y='.5' width='49' height='29'/>
      &lt;svg preserveAspectRatio="xMidYMid slice" viewBox="0 0 30 40" width="50" height="30">
	&lt;use href="#smile" />
      &lt;/svg>
    &lt;/g>
    &lt;g transform="translate(140,0)">
      &lt;text y="-10">*YMax&lt;/text>
      &lt;rect x='.5' y='.5' width='49' height='29'/>
      &lt;svg preserveAspectRatio="xMaxYMax slice" viewBox="0 0 30 40" width="50" height="30">
	&lt;use href="#smile" />
      &lt;/svg>
    &lt;/g>
  &lt;/g>
&lt;/svg></pre>
            <div class="figure"><img alt="例 PreserveAspectRatio — 選択可能なオプションの説明"
                    src="https://www.w3.org/TR/SVG2/images/coords/PreserveAspectRatio.png" />
                <p class="caption">例 PreserveAspectRatio</p>
            </div>
        </div>

        <h2 id="EstablishingANewSVGViewport" class="heading">8.8. 新しいSVGビューポートの確立<a class="self-link"
                href="#EstablishingANewSVGViewport"></a></h2>

        <p>SVGコンテンツ内に<span class="element-name">‘<a href="struct.html#SVGElement"><span>svg</span></a>’</span>要素を含めると、
            その中に含まれるすべてのグラフィックが描画される新しいSVGビューポートが作成されます。
            これにより暗黙的に新しいビューポート座標系と新しいユーザー座標系が確立されます。
            また、新しいSVGビューポートが確立されることで、パーセンテージ単位の意味も新しくなります
            （<a href="coords.html#Units">単位</a>参照）。
        </p>

        <p>新しいSVGビューポートの境界は、そのビューポートを確立する要素（例えば<span class="element-name">‘<a
                    href="struct.html#SVGElement"><span>svg</span></a>’</span>要素）の
            <span class="attr-name">‘x’</span>、<span class="attr-name">‘y’</span>、
            <span class="attr-name">‘width’</span>、<span class="attr-name">‘height’</span>属性によって定義されます。
            新しいビューポート座標系と新しいユーザー座標系の原点は
            (<span class="attr-name">‘x’</span>, <span class="attr-name">‘y’</span>) となり、
            <span class="attr-name">‘x’</span>と<span class="attr-name">‘y’</span>は
            SVGビューポートを確立する要素の属性値です。
            新しいビューポート座標系と新しいユーザー座標系の向きは、
            SVGビューポートを確立する要素の現在のユーザー座標系の向きに一致します。
            新しいビューポート座標系と新しいユーザー座標系の1単位は、
            SVGビューポートを確立する要素の現在のユーザー座標系の1単位と同じ大きさです。
        </p>

        <div class="example">
            <p>例：</p>

            <pre>
&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="4in" height="3in"
     xmlns="http://www.w3.org/2000/svg">
  &lt;desc>このSVG描画は別のSVGを埋め込みます、
    これによって新しいSVGビューポートが確立されます
  &lt;/desc>
  &lt;!-- 次の記述で新しいSVGビューポートを確立し、
       SVG描画BをそのSVGビューポートに描画します -->
  &lt;svg x="25%" y="25%" width="50%" height="50%">
     &lt;!-- 描画Bはここ -->
  &lt;/svg>
&lt;/svg>
</pre>

            <p>新しいSVGビューポート作成のより詳しい例は
                <a href="coords.html#ExamplePreserveAspectRatio">例 PreserveAspectRatio</a>を参照してください。
            </p>
        </div>

        <p id="ElementsThatEstablishViewports">以下の要素が新しいSVGビューポートを確立します：</p>

        <ul>
            <li><span class="element-name">‘<a href="struct.html#SVGElement"><span>svg</span></a>’</span>要素</li>

            <li><span class="element-name">‘<a href="struct.html#SymbolElement"><span>symbol</span></a>’</span>要素
                （<span class="element-name">‘<a
                        href="struct.html#UseElement"><span>use</span></a>’</span>要素によってインスタンス化された場合）</li>
        </ul>

        <p class="note">
            歴史的な理由で、
            <span class="element-name">‘<a href="pservers.html#PatternElement"><span>pattern</span></a>’</span>要素や
            <span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span>要素は、
            <span class="attr-name">‘<a href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>属性を受け付けますが、
            新しいビューポートは作成しません。
            <span class="element-name">‘<a
                    href="https://drafts.fxtf.org/css-masking-1/#ClipPathElement"><span>clipPath</span></a>’</span>要素や
            <span class="element-name">‘<a
                    href="https://drafts.fxtf.org/css-masking-1/#MaskElement"><span>mask</span></a>’</span>要素も同様です。
            これらの要素内のコンテンツでのパーセンテージ長さは、グラフィカル効果領域の寸法に比例しません。
        </p>

        <p>
            <span class="element-name">‘<a
                    href="embedded.html#ForeignObjectElement"><span>foreignObject</span></a>’</span>要素は、
            子コンテンツ用に新しい
            <a href="https://www.w3.org/TR/css-position-3/#def-cb">CSS包含ブロック</a>を確立します。
            <span class="element-name">‘<a href="embedded.html#HTMLElements"><span>video</span></a>’</span>、
            <span class="element-name">‘<a href="embedded.html#HTMLElements"><span>audio</span></a>’</span>、
            <span class="element-name">‘<a href="embedded.html#HTMLElements"><span>canvas</span></a>’</span>要素も、
            フォールバックコンテンツが描画される場合は同様です。
            これは新しいビューポートに似た効果があり、
            子コンテンツのレイアウトのスコープをリセットします。
            ただし、<span class="element-name">‘<a
                    href="embedded.html#ForeignObjectElement"><span>foreignObject</span></a>’</span>の子孫としてSVG要素を描画するには、
            新しい<span class="element-name">‘<a href="struct.html#SVGElement"><span>svg</span></a>’</span>要素で
            SVG文書断片とSVGビューポートを確立する必要があります。
        </p>
        <p>
            <span class="element-name">‘<a href="embedded.html#ImageElement"><span>image</span></a>’</span>要素や
            <span class="element-name">‘<a href="embedded.html#HTMLElements"><span>iframe</span></a>’</span>要素は、
            参照先文書用の新しい
            <a href="https://www.w3.org/TR/css-position-3/#vp">文書ビューポート</a>を作成します。
            参照先がSVGファイルの場合、当然その中でも自身のSVGビューポートが確立されます。
        </p>

        <p>新しいSVGビューポートが新たなクリッピングパスも確立するかどうかは、
            そのビューポートを確立する要素の<a class="property"
                href="render.html#OverflowAndClipProperties">overflow</a>プロパティの値によって決まります。</p>

        <h2 id="Units" class="heading">8.9. 単位<a class="self-link" href="#Units"></a></h2>

        <p>SVGは、CSS値と単位モジュール
            [<a href="refs.html#ref-css-values-3">css-values</a>]で定義される一般的な値と単位の説明に従い、
            属性・プレゼンテーション属性・CSSプロパティに適用します。各属性やプロパティは使用する値型を指定しなければなりません。
            CSS WGやSVG WGが公開する後続・拡張仕様は、基本データ型を拡張したり新しいデータ型を追加したりする場合があります。
        </p>

        <p><a href="https://www.w3.org/TR/css3-values/#percentages">&lt;percentage></a>値がSVGビューポートのサイズに対して相対的に定義されている場合：
        </p>

        <ul class="ready-for-wider-review">
            <li><a href="coords.html#TermSVGViewport">SVGビューポート</a>のx座標値や幅値がパーセンテージで指定された場合、
                その値は、そのビューポートに適用された<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>のwidthパラメータのパーセンテージ（ユーザー単位）でなければなりません。
                <span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>が指定されていない場合は、
                SVGビューポートの幅（ユーザー単位）のパーセンテージを使用します。
            </li>
            <li><a href="coords.html#TermSVGViewport">SVGビューポート</a>のy座標値や高さ値がパーセンテージで指定された場合、
                その値は、そのビューポートに適用された<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>のheightパラメータのパーセンテージ（ユーザー単位）でなければなりません。
                <span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>が指定されていない場合は、
                SVGビューポートの高さ（ユーザー単位）のパーセンテージを使用します。
            </li>
            <li id="Units_viewport_percentage">その他の長さ値が<a
                    href="coords.html#TermSVGViewport">SVGビューポート</a>のパーセンテージで指定された場合は、
                その値は、そのビューポートに適用された<span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>の正規化対角線長のパーセンテージで計算されます。
                <span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>が指定されていない場合は、
                SVGビューポートの正規化対角線長を使用します。正規化対角線長は
                <code>sqrt((<em>width</em>)**2 + (<em>height</em>)**2)/sqrt(2)</code>で計算します。
            </li>
        </ul>

        <div class="example">
            <p id="ExampleUnits"><span class="example-ref">例 Units</span>は
                さまざまな単位種別の処理規則の一部を示します。</p>

            <pre>&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="400px" height="200px" viewBox="0 0 4000 2000"
     xmlns="http://www.w3.org/2000/svg">
  &lt;title>例 Units&lt;/title>
  &lt;desc>さまざまな単位オプションの例&lt;/desc>

  &lt;!-- 図を枠で囲む -->
  &lt;rect x="5" y="5" width="3990" height="1990"
        fill="none" stroke="blue" stroke-width="10"/>

  &lt;g fill="blue" stroke="red" font-family="Verdana" font-size="150">
    &lt;!-- 絶対単位指定 -->
    &lt;g transform="translate(400,0)">
      &lt;text x="-50" y="300" fill="black" stroke="none">絶対単位:&lt;/text>
      &lt;rect x="0" y="400" width="4in" height="2in" stroke-width=".4in"/>
      &lt;rect x="0" y="750" width="384" height="192" stroke-width="38.4"/>
      &lt;g transform="scale(2)">
        &lt;rect x="0" y="600" width="4in" height="2in" stroke-width=".4in"/>
      &lt;/g>
    &lt;/g>

    &lt;!-- 相対単位指定 -->
    &lt;g transform="translate(1600,0)">
      &lt;text x="-50" y="300" fill="black" stroke="none">相対単位:&lt;/text>
      &lt;rect x="0" y="400" width="2.5em" height="1.25em" stroke-width=".25em"/>
      &lt;rect x="0" y="750" width="375" height="187.5" stroke-width="37.5"/>
      &lt;g transform="scale(2)">
        &lt;rect x="0" y="600" width="2.5em" height="1.25em" stroke-width=".25em"/>
      &lt;/g>
    &lt;/g>

    &lt;!-- パーセンテージ -->
    &lt;g transform="translate(2800,0)">
      &lt;text x="-50" y="300" fill="black" stroke="none">パーセンテージ:&lt;/text>
      &lt;rect x="0" y="400" width="10%" height="10%" stroke-width="1%"/>
      &lt;rect x="0" y="750" width="400" height="200" stroke-width="31.62"/>
      &lt;g transform="scale(2)">
        &lt;rect x="0" y="600" width="10%" height="10%" stroke-width="1%"/>
      &lt;/g>
    &lt;/g>
  &lt;/g>
&lt;/svg></pre>
            <div class="figure"><img alt="例 Units — 選択可能なオプションの説明"
                    src="https://www.w3.org/TR/SVG2/images/coords/Units.png" />
                <p class="caption">例 Units</p>
            </div>

            <p>左側の3つの矩形は絶対単位識別子「in」（インチ）の使用例です。CSSでは1インチは96ピクセルに等しいと定義されています。そのため、最上段の矩形（インチ単位指定）は、中段の矩形（ユーザー単位で指定され、最上段と同じ寸法になるように1インチ=96ユーザー単位で指定）と全く同じサイズになります。下段の矩形はインチ指定値をスケールした場合の挙動を示します。
            </p>

            <p>中央の3つの矩形は相対単位識別子「em」の使用例です。最外<span class="element-name">‘<a
                        href="struct.html#GElement"><span>g</span></a>’</span>要素に<a class="property"
                    href="https://www.w3.org/TR/css-fonts-3/#font-size-prop">font-size</a>プロパティが<span
                    class="prop-value">150</span>で設定されているため、1em=150ユーザー単位となります。最上段の矩形（em単位指定）は中段の矩形（ユーザー単位指定で最上段と同じ寸法になるように150ユーザー単位=1emで指定）と全く同じサイズです。下段の矩形はem指定値をスケールした場合の挙動を示します。
            </p>

            <p>右側の3つの矩形はパーセンテージ単位の使用例です。SVGビューポートのユーザー座標系（この例では最外<span class="element-name">‘<a
                        href="struct.html#TermOutermostSVGElement"><span>svg</span></a>’</span>要素）の幅・高さは
                <span class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>属性の処理によって
                4000と2000に変換されます。最上段の矩形（パーセンテージ単位指定）は中段の矩形（同等のユーザー単位指定）と全く同じサイズです。特に、中段の矩形の<a class="property"
                    href="painting.html#StrokeWidthProperty">stroke-width</a>プロパティは
                <code>sqrt((<em>actual-width</em>)**2 +
(<em>actual-height</em>)**2) / sqrt(2)</code>の1%、
                この場合は.01*sqrt(4000*4000+2000*2000)/sqrt(2)=31.62となります。下段の矩形はパーセンテージ指定値をスケールした場合の挙動です。
            </p>
        </div>

        <h2 id="BoundingBoxes" class="heading">8.10. バウンディングボックス<a class="self-link" href="#BoundingBoxes"></a></h2>

        <dl class="definitions" data-dfn-type="dfn" data-export="">

            <dt id="TermBoundingBox"><dfn id="bounding-box" data-dfn-type="dfn" data-export="">バウンディングボックス</dfn></dt>
            <dd>
                <p>要素のバウンディングボックス（または "bbox"）は、その要素のユーザー座標系の軸に揃えた最もぴったり収まる矩形で、要素自身とその子孫をすべて完全に囲みます。</p>
            </dd>
        </dl>

        <p>要素について計算できるバウンディングボックスには3種類あります：</p>

        <ol>
            <li><dfn id="TermObjectBoundingBox" data-dfn-type="dfn" data-export="">オブジェクトバウンディングボックス</dfn>は、
                要素の幾何学的形状のみを含むバウンディングボックスです。
                <a href="shapes.html#TermBasicShapeElement">基本図形</a>の場合、これは塗りつぶされる領域です。
                特に指定がない限り、「バウンディングボックス」とはこれを指します。
            </li>

            <li><dfn id="TermStrokeBoundingBox" data-dfn-type="dfn" data-export="">ストロークバウンディングボックス</dfn>は、
                要素の幾何学的形状と<a href="painting.html#TermStrokeShape">ストローク形状</a>の両方を含むバウンディングボックスです。</li>

            <li><dfn id="TermDecoratedBoundingBox" data-dfn-type="dfn" data-export="">装飾バウンディングボックス</dfn>は、
                要素の幾何学的形状、<a href="painting.html#TermStrokeShape">ストローク形状</a>、および<a
                    href="painting.html#Markers">マーカー</a>のすべてを含むバウンディングボックスです。</li>
        </ol>

        <p class="note">要素の<a class="property" href="render.html#ObjectAndGroupOpacityProperties">opacity</a>、<a
                class="property" href="render.html#VisibilityControl">visibility</a>、<a class="property"
                href="painting.html#FillProperty">fill</a>、
            <a class="property" href="painting.html#FillOpacityProperty">fill-opacity</a>、<a class="property"
                href="painting.html#FillRuleProperty">fill-rule</a>、<a class="property"
                href="painting.html#StrokeDasharrayProperty">stroke-dasharray</a>
            、<a class="property" href="painting.html#StrokeDashoffsetProperty">stroke-dashoffset</a>プロパティは、
            バウンディングボックスには影響しません。
        </p>

        <p>曲線図形の場合、バウンディングボックスは曲線端点だけでなく、曲線の縁に沿ったすべての部分を囲む必要があります。
            たとえば、キュービックベジェ命令の2番目の座標ペアのように、曲線上にない制御点はバウンディングボックスの寸法に寄与してはなりません
            （ただし、それらの点が図形自身または曲線上・近傍に位置する場合は、バウンディングボックス内に含まれることがあります）。
            例えば、曲線端から離れた側にある制御点は、バウンディングボックスに含めてはなりません。</p>

        <div class="figure">
            <img src="https://www.w3.org/TR/SVG2/images/coords/bbox01.svg" alt="二次ベジェ曲線のオブジェクトバウンディングボックスの画像。" />
            <p class="caption">パス <span class="attr-value">'M20,50 L35,100 H120 V50 Q70,10 20,50'</span>
                は薄い青色で表示されています。左側はパスの正しいオブジェクトバウンディングボックスです。
                曲線の最上部制御点は含まれませんが、すべての青い図形部分（制御点の凸包外も含む）はバウンディングボックスに含まれます。</p>
        </div>

        <p>要素が<a href="render.html#RenderingTree">レンダリングツリー</a>に属していなくても
            （<span class="prop-value">'display: none'</span>、<span class="element-name">‘<a
                    href="struct.html#DefsElement"><span>defs</span></a>’</span>要素内、
            <span class="element-name">‘<a
                    href="struct.html#SymbolElement"><span>symbol</span></a>’</span>要素のように通常レンダリングされない場合や、
            文書ツリー内に存在しない場合など）、
            バウンディングボックスは持ちます。
            <a href="types.html#__svg__SVGGraphicsElement__getBBox">getBBox</a>で取得した場合、
            要素がレンダリングされている場合と同じ矩形になります。
            ただし、レンダリングツリーに属していない要素は、祖先要素のバウンディングボックスには寄与しません。
        </p>

        <div class="example">
            <p>以下の例は複数の要素を定義しています。ID付き要素ごとの期待される
                <a href="coords.html#TermObjectBoundingBox">オブジェクトバウンディングボックス</a>を下記に示します。
            </p>

            <pre>&lt;svg xmlns="http://www.w3.org/2000/svg">

  &lt;title>バウンディングボックス計算&lt;/title>
  &lt;desc>文脈によって異なるバウンディングボックス結果を持つ要素例&lt;/desc>

  &lt;defs id="defs-1">
     &lt;rect id="rect-1" x="20" y="20" width="40" height="40" fill="blue" />
  &lt;/defs>

  &lt;g id="group-1">
    &lt;use id="use-1" href="#rect-1" x="10" y="10" />

    &lt;g id="group-2" display="none">
      &lt;rect id="rect-2" x="10" y="10" width="100" height="100" fill="red" />
    &lt;/g>
  &lt;/g>
&lt;/svg></pre>

            <table class="vert">
                <thead>
                    <tr>
                        <th>要素ID</th>
                        <th>バウンディングボックスの結果</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>"<code>defs-1</code>"</td>
                        <td>{0, 0, 0, 0}</td>
                    </tr>
                    <tr>
                        <td>"<code>rect-1</code>"</td>
                        <td>{20, 20, 40, 40}</td>
                    </tr>
                    <tr>
                        <td>"<code>group-1</code>"</td>
                        <td>{30, 30, 40, 40}</td>
                    </tr>
                    <tr>
                        <td>"<code>use-1</code>"</td>
                        <td>{30, 30, 40, 40}</td>
                    </tr>
                    <tr>
                        <td>"<code>group-2</code>"</td>
                        <td>{10, 10, 100, 100}</td>
                    </tr>
                    <tr>
                        <td>"<code>rect-2</code>"</td>
                        <td>{10, 10, 100, 100}</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <p><a href="text.html#TermTextContentElement">テキストコンテンツ要素</a>の場合、バウンディングボックス計算では各グリフを個別のグラフィック要素として扱う必要があります。
            計算ではすべてのグリフが<a href="coords.html#TermFullGlyphCell">フルグリフセル</a>を占有すると仮定しなければなりません。
            <span class="ready-for-wider-review">
                <dfn id="TermFullGlyphCell" data-dfn-type="dfn" data-export="">フルグリフセル</dfn>は、
                横書きテキストの場合は横方向のアドバンスとEMボックスの高さを持ちます。
                縦書きテキストを横倒しで組版する場合は、EMボックスの幅と横方向アドバンスの高さを持ちます。
                その他の縦書きテキストでは、EMボックスの幅と縦方向アドバンスの高さ（縦方向アドバンスがフォントで定義されていない場合はEMボックスの高さ）となります。
            </span>
            例えば、横書きテキストの場合は、各グリフがフォントの全アセント・ディセント値まで垂直方向に広がると仮定します。
        </p>
        <p>宣言的またはスクリプトによるアニメーションで要素の形状・サイズ・位置が変化するため、バウンディングボックスは可変です。
            したがって、バウンディングボックスはスクリプト呼び出しや宣言的・リンク構文の一部として要求された時点での要素の現在値を反映します。</p>

        <p>幅ゼロ、高さゼロ、またはその両方の要素
            （垂直/水平線や<a href="shapes.html#RectElement"><span class="element-name">‘rect’</span></a>要素で幅・高さがゼロの場合など）も、
            プラスの寸法があればその値、なければ幅・高さの両方が<span class="attr-value">'0'</span>のバウンディングボックスを持ちます。
            同様に、<span class="element-name">‘<a
                    href="paths.html#PathElement"><span>path</span></a>’</span>要素のサブパスで幅・高さがゼロの区間も、
            バウンディングボックス計算のためにはその要素の形状に含める必要があります。
        </p>


        <p class="ready-for-wider-review">位置指定のない要素（<span class="element-name">‘<a
                    href="paths.html#PathElement"><span>path</span></a>’</span>要素で<a class="property"
                href="paths.html#DProperty">d</a>プロパティ値が<span class="prop-value">none</span>の場合など）は、
            バウンディングボックス計算上は(0,0)に配置されたものとみなします。
        </p>


        <p>DOMオブジェクトが<a class="idlinterface"
                href="types.html#InterfaceSVGGraphicsElement">SVGGraphicsElement</a>から派生していない要素（グラデーション要素など）は
            バウンディングボックスを持たず、バウンディングボックス要求のためのインターフェースもありません。</p>

        <p><a href="render.html#RenderingTree">レンダリングツリー</a>内で未解決リソースを参照している要素も、
            属性で指定された位置・寸法、または値未指定の場合は<a href="types.html#TermInitialValue">初期値</a>により
            バウンディングボックスを持ちます。例えば <code>&lt;use href="#bad" x="10" y="10"/></code> は
            x=10, y=10, 幅・高さ=0のバウンディングボックスを持ちます。</p>

        <p>次のアルゴリズムは要素のバウンディングボックスの計算方法を定義します。アルゴリズムへの入力は以下です：</p>

        <ul>
            <li><var>element</var>：バウンディングボックスを計算する要素</li>
            <li><var>space</var>：バウンディングボックス計算に使う座標空間</li>
            <li><var>fill</var>：要素とその子孫の形状をバウンディングボックスに含めるかどうか</li>
            <li><var>stroke</var>：要素とその子孫のストロークをバウンディングボックスに含めるかどうか</li>
            <li><var>markers</var>：要素とその子孫のマーカーをバウンディングボックスに含めるかどうか</li>
            <li><var>clipped</var>：要素とその子孫に適用されたクリッピングパスの影響を受けるかどうか</li>
        </ul>

        <p>バウンディングボックスを計算するアルゴリズムは、<var>element</var>の型によって以下の通りです：</p>

        <dl class="switch">
            <dt><a href="shapes.html#TermShapeElement">図形</a></dt>
            <dt><a href="text.html#TermTextContentElement">テキストコンテンツ要素</a></dt>
            <dt><a href="text.html#TermTextContentElement">テキストコンテンツ要素内の<span class="element-name">‘<a
                            href="linking.html#AElement"><span>a</span></a>’</span>要素</a></dt>
            <dd>
                <ol class="algorithm">
                    <li><var>box</var>を(0, 0, 0, 0)で初期化。</li>
                    <li><var>fill-shape</var>を、<var>element</var>が図形なら<a href="paths.html#TermEquivalentPath">等価パス</a>、
                        そうでなければテキスト内の各グリフセルを含む形状とする。
                    </li>
                    <li><var>fill</var>がtrueなら、<var>box</var>を座標系<var>space</var>で<var>fill-shape</var>を最もぴったり囲む矩形に設定。
                        <p class="note"><a class="property" href="painting.html#FillProperty">fill</a>、
                            <a class="property" href="painting.html#FillOpacityProperty">fill-opacity</a>、
                            <a class="property"
                                href="painting.html#FillRuleProperty">fill-rule</a>プロパティ値は<var>fill-shape</var>に影響しません。
                        </p>
                    </li>
                    <li><var>stroke</var>がtrueで、要素の<a class="property"
                            href="painting.html#StrokeProperty">stroke</a>が<span class="prop-value">none</span>でない場合、
                        <var>box</var>を<var>box</var>と、座標系<var>space</var>で要素の<a
                            href="painting.html#StrokeShape">ストローク形状</a>をぴったり囲む矩形の和集合に設定
                        （ダッシュパターンはないものとする）。
                        <p class="note"><a class="property"
                                href="painting.html#StrokeOpacityProperty">stroke-opacity</a>、
                            <a class="property" href="painting.html#StrokeDasharrayProperty">stroke-dasharray</a>、
                            <a class="property" href="painting.html#StrokeDashoffsetProperty">stroke-dashoffset</a>
                            プロパティ値はストローク形状計算に影響しません。
                        </p>
                    </li>
                    <li><var>markers</var>がtrueなら、要素に描画される各マーカー<var>marker</var>について：
                        <ol>
                            <li><var>marker</var>のコンテンツを定義する<span class="element-name">‘<a
                                        href="painting.html#MarkerElement"><span>marker</span></a>’</span>要素の
                                各子孫<a href="struct.html#TermGraphicsElement">グラフィック要素</a><var>child</var>について：
                                <ol>
                                    <li><var>child</var>が<span class="element-name">‘<a
                                                href="painting.html#MarkerElement"><span>marker</span></a>’</span>内の祖先要素に
                                        <span class="prop-value">'display: none'</span>や条件付き処理属性、または
                                        <span class="element-name">‘<a
                                                href="linking.html#AElement"><span>a</span></a>’</span>、
                                        <span class="element-name">‘<a
                                                href="struct.html#GElement"><span>g</span></a>’</span>、
                                        <span class="element-name">‘<a
                                                href="struct.html#SVGElement"><span>svg</span></a>’</span>、
                                        <span class="element-name">‘<a
                                                href="struct.html#SwitchElement"><span>switch</span></a>’</span>以外の要素があれば、
                                        次の子孫グラフィック要素へcontinue。
                                    </li>
                                    <li>それ以外の場合、<var>box</var>を<var>box</var>と、アルゴリズムを呼び出して<var>child</var>をelement、
                                        <var>space</var>を座標空間、<var>fill</var>・<var>stroke</var>・<var>markers</var>をすべてtrue、
                                        <var>clipped</var>をそのまま渡して得られる結果の和集合に設定。
                                    </li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li><var>clipped</var>がtrueで、<var>element</var>の<a class="property"
                            href="https://drafts.fxtf.org/css-masking-1/#the-clip-path">clip-path</a>値が<span
                            class="prop-value">none</span>でない場合、
                        <var>box</var>を<var>box</var>とクリッピングパスの交差部分を座標系<var>space</var>でぴったり囲む矩形に設定。
                    </li>
                    <li><var>box</var>を返す。</li>
                </ol>
            </dd>
            <dt id="ContainerElementBoudingBoxComputation"><a href="struct.html#TermContainerElement">コンテナ要素</a></dt>
            <dt><span class="element-name">‘<a href="struct.html#UseElement"><span>use</span></a>’</span></dt>
            <dd>
                <ol class="algorithm">
                    <li><var>box</var>を(0, 0, 0, 0)で初期化。</li>
                    <li><var>parent</var>を、コンテナ要素ならそれ、そうでなければ<span class="element-name">‘<a
                                href="struct.html#UseElement"><span>use</span></a>’</span>要素のシャドウツリーのルートとする。</li>
                    <li><var>parent</var>の各子孫<a href="struct.html#TermGraphicsElement">グラフィック要素</a><var>child</var>について：
                        <ol>
                            <li><var>child</var>が<a href="render.html#Rendered-vs-NonRendered">レンダリングされない</a>場合、
                                次の子孫グラフィック要素へcontinue。</li>
                            <li>それ以外の場合、<var>box</var>を<var>box</var>と、アルゴリズム呼び出しで<var>child</var>をelement、
                                <var>space</var>・<var>fill</var>・<var>stroke</var>・<var>markers</var>・<var>clipped</var>は入力値そのままの結果の和集合に設定。
                            </li>
                        </ol>
                    </li>
                    <li><var>clipped</var>がtrueの場合：
                        <ul>
                            <li><var>element</var>の<a class="property"
                                    href="https://drafts.fxtf.org/css-masking-1/#the-clip-path">clip-path</a>値が<span
                                    class="prop-value">none</span>でない場合、
                                <var>box</var>を<var>box</var>とクリッピングパスの交差部分を座標系<var>space</var>でぴったり囲む矩形に設定。
                            </li>
                            <li><var>element</var>に<a class="property"
                                    href="render.html#OverflowAndClipProperties">overflow</a>プロパティが適用され、
                                その値が<span class="prop-value">visible</span>でない場合、
                                <var>box</var>を<var>box</var>と要素のoverflow境界の交差部分を座標系<var>space</var>でぴったり囲む矩形に設定。
                            </li>
                            <li><var>element</var>に<a class="property"
                                    href="https://drafts.fxtf.org/css-masking-1/#propdef-clip">clip</a>プロパティが適用され、
                                その値が<span class="prop-value">auto</span>でない場合、
                                <var>box</var>を<var>box</var>と<a class="property"
                                    href="https://drafts.fxtf.org/css-masking-1/#propdef-clip">clip</a>で指定された矩形の交差部分を座標系<var>space</var>でぴったり囲む矩形に設定。
                            </li>
                        </ul>
                    </li>
                    <li><var>box</var> を返す。</li>
                </ol>
            </dd>
            <dt><span class="element-name">‘<a href="embedded.html#HTMLElements"><span>canvas</span></a>’</span></dt>
            <dt><span class="element-name">‘<a
                        href="embedded.html#ForeignObjectElement"><span>foreignObject</span></a>’</span></dt>
            <dt><span class="element-name">‘<a href="embedded.html#HTMLElements"><span>iframe</span></a>’</span></dt>
            <dt><span class="element-name">‘<a href="embedded.html#ImageElement"><span>image</span></a>’</span></dt>
            <dt><span class="element-name">‘<a href="embedded.html#HTMLElements"><span>video</span></a>’</span></dt>
            <dd>
                <ol class="algorithm">
                    <li><var>box</var> を、要素の
                        <span class="attr-name">‘x’</span>,
                        <span class="attr-name">‘y’</span>,
                        <span class="attr-name">‘width’</span>,
                        <span class="attr-name">‘height’</span> の幾何プロパティによって定義される
                        <a href="embedded.html#TermPositioningRectangle">配置矩形</a> を含む、座標空間 <var>space</var> の最も狭い矩形とする。
                        <p class="note">このアルゴリズムへの <var>fill</var>, <var>stroke</var>, <var>markers</var>
                            の入力引数は、これらの要素に対して返されるバウンディングボックスには影響しません。</p>
                    </li>
                    <li><var>clipped</var> が true で、<var>element</var> の <a class="property"
                            href="https://drafts.fxtf.org/css-masking-1/#the-clip-path">clip-path</a> の値が
                        <span class="prop-value">none</span> でない場合は、<var>box</var> を、
                        <var>box</var> とクリッピングパスの交差部分を含む座標系 <var>space</var> の最も狭い矩形とする。
                    </li>
                    <li><var>box</var> を返す。</li>
                </ol>
            </dd>
        </dl>

        <p>値 (0, 0, 0, 0) の <var>box</var> と空の形状との和集合は <var>box</var> である。</p>

        <p>要素の <a href="coords.html#TermObjectBoundingBox">オブジェクトバウンディングボックス</a>、
            <a href="coords.html#TermStrokeBoundingBox">ストロークバウンディングボックス</a>、
            または <a href="coords.html#TermDecoratedBoundingBox">装飾バウンディングボックス</a> は、
            上記のバウンディングボックス計算アルゴリズムを次の引数で呼び出した結果である：
            <var>element</var> は要素自身、
            <var>space</var> はその要素のユーザー座標系、
            <var>fill</var> は true、
            <var>stroke</var> は <a href="coords.html#TermStrokeBoundingBox">ストロークバウンディングボックス</a> または <a
                href="coords.html#TermDecoratedBoundingBox">装飾バウンディングボックス</a> を計算する場合は true、それ以外の場合は false、
            <var>markers</var> は <a href="coords.html#TermDecoratedBoundingBox">装飾バウンディングボックス</a> を計算する場合は true、それ以外の場合は
            false、
            <var>clipped</var> は false。
        </p>

        <h2 id="ObjectBoundingBoxUnits" class="heading">8.11. オブジェクトバウンディングボックス単位<a class="self-link"
                href="#ObjectBoundingBoxUnits"></a></h2>

        <p id="ObjectBoundingBox">以下の要素は、指定された属性をその要素に<span
                class="attr-value">'objectBoundingBox'</span>と設定することで、座標値や長さを<a
                href="coords.html#TermObjectBoundingBox">オブジェクトバウンディングボックス</a>の分数（場合によってはパーセンテージ）で表現することができます：</p>

        <table class="vert">
            <tr>
                <th>要素</th>
                <th>属性</th>
                <th>効果</th>
            </tr>
            <tr>

                <td><span class="element-name">‘<a
                            href="pservers.html#LinearGradientElement"><span>linearGradient</span></a>’</span></td>
                <td><span class="attr-name">‘<a
                            href="pservers.html#LinearGradientElementGradientUnitsAttribute"><span>gradientUnits</span></a>’</span>
                </td>
                <td>グラデーションベクトルを指定する属性
                    (<span class="attr-name">‘<a
                            href="pservers.html#LinearGradientElementX1Attribute"><span>x1</span></a>’</span>, <span
                        class="attr-name">‘<a
                            href="pservers.html#LinearGradientElementY1Attribute"><span>y1</span></a>’</span>, <span
                        class="attr-name">‘<a
                            href="pservers.html#LinearGradientElementX2Attribute"><span>x2</span></a>’</span>, <span
                        class="attr-name">‘<a
                            href="pservers.html#LinearGradientElementY2Attribute"><span>y2</span></a>’</span>)
                    が、グラデーションが適用される要素のバウンディングボックスの分数またはパーセンテージを表すことを示します。</td>

            </tr>
            <tr>

                <td><span class="element-name">‘<a
                            href="pservers.html#RadialGradientElement"><span>radialGradient</span></a>’</span></td>
                <td><span class="attr-name">‘<a
                            href="pservers.html#RadialGradientElementGradientUnitsAttribute"><span>gradientUnits</span></a>’</span>
                </td>
                <td>中心
                    (<span class="attr-name">‘<a
                            href="pservers.html#RadialGradientElementCXAttribute"><span>cx</span></a>’</span>, <span
                        class="attr-name">‘<a
                            href="pservers.html#RadialGradientElementCYAttribute"><span>cy</span></a>’</span>)、半径
                    (<span class="attr-name">‘<a
                            href="pservers.html#RadialGradientElementRAttribute"><span>r</span></a>’</span>)、フォーカス
                    (<span class="attr-name">‘<a
                            href="pservers.html#RadialGradientElementFXAttribute"><span>fx</span></a>’</span>, <span
                        class="attr-name">‘<a
                            href="pservers.html#RadialGradientElementFYAttribute"><span>fy</span></a>’</span>)
                    を、グラデーションが適用される要素のバウンディングボックスの分数またはパーセンテージで表すことを示します。</td>

            </tr>

            <tr>
                <td><span class="element-name">‘<a href="pservers.html#PatternElement"><span>pattern</span></a>’</span>
                </td>
                <td><span class="attr-name">‘<a
                            href="pservers.html#PatternElementPatternUnitsAttribute"><span>patternUnits</span></a>’</span>
                </td>
                <td>パターンのタイル方法を定義する属性
                    (<span class="attr-name">‘<a
                            href="pservers.html#PatternElementXAttribute"><span>x</span></a>’</span>, <span
                        class="attr-name">‘<a href="pservers.html#PatternElementYAttribute"><span>y</span></a>’</span>,
                    <span class="attr-name">‘<a
                            href="pservers.html#PatternElementWidthAttribute"><span>width</span></a>’</span>, <span
                        class="attr-name">‘<a
                            href="pservers.html#PatternElementHeightAttribute"><span>height</span></a>’</span>)
                    が、パターンが適用される要素のバウンディングボックスを基準に決定されることを示します。
                </td>
            </tr>
            <tr>
                <td><span class="element-name">‘<a href="pservers.html#PatternElement"><span>pattern</span></a>’</span>
                </td>
                <td><span class="attr-name">‘<a
                            href="pservers.html#PatternElementPatternContentUnitsAttribute"><span>patternContentUnits</span></a>’</span>
                </td>
                <td>パターンの内容のユーザー座標系が、パターンが適用される要素のバウンディングボックスを基準に設定されることを示します。</td>
            </tr>

            <tr>
                <td><span class="element-name">‘<a
                            href="https://drafts.fxtf.org/css-masking-1/#ClipPathElement"><span>clipPath</span></a>’</span>
                </td>
                <td><span class="attr-name">‘<a
                            href="https://drafts.fxtf.org/css-masking-1/#element-attrdef-clippath-clippathunits"><span>clipPathUnits</span></a>’</span>
                </td>
                <td><span class="element-name">‘<a
                            href="https://drafts.fxtf.org/css-masking-1/#ClipPathElement"><span>clipPath</span></a>’</span>要素の内容のユーザー座標系が、クリッピングパスが適用される要素のバウンディングボックスを基準に設定されることを示します。
                </td>
            </tr>

            <tr>
                <td><span class="element-name">‘<a
                            href="https://drafts.fxtf.org/css-masking-1/#MaskElement"><span>mask</span></a>’</span></td>
                <td><span class="attr-name">‘<a
                            href="https://drafts.fxtf.org/css-masking-1/#element-attrdef-mask-maskunits"><span>maskUnits</span></a>’</span>
                </td>
                <td>マスク領域を定義する属性
                    (<span class="attr-name">‘<a
                            href="https://drafts.fxtf.org/css-masking-1/#element-attrdef-mask-x"><span>x</span></a>’</span>,
                    <span class="attr-name">‘<a
                            href="https://drafts.fxtf.org/css-masking-1/#element-attrdef-mask-y"><span>y</span></a>’</span>,
                    <span class="attr-name">‘<a
                            href="https://drafts.fxtf.org/css-masking-1/#element-attrdef-mask-width"><span>width</span></a>’</span>,
                    <span class="attr-name">‘<a
                            href="https://drafts.fxtf.org/css-masking-1/#element-attrdef-mask-height"><span>height</span></a>’</span>)
                    が、マスクが適用される要素のバウンディングボックスを基準に設定されることを示します。
                </td>
            </tr>
            <tr>
                <td><span class="element-name">‘<a
                            href="https://drafts.fxtf.org/css-masking-1/#MaskElement"><span>mask</span></a>’</span></td>
                <td><span class="attr-name">‘<a
                            href="https://drafts.fxtf.org/css-masking-1/#element-attrdef-mask-maskcontentunits"><span>maskContentUnits</span></a>’</span>
                </td>
                <td><span class="element-name">‘<a
                            href="https://drafts.fxtf.org/css-masking-1/#MaskElement"><span>mask</span></a>’</span>要素の内容のユーザー座標系が、マスクが適用される要素のバウンディングボックスを基準に設定されることを示します。
                </td>
            </tr>


            <tr>
                <td><span class="element-name">‘<a
                            href="https://drafts.fxtf.org/filter-effects/#FilterElement"><span>filter</span></a>’</span>
                </td>
                <td><span class="attr-name">‘<a
                            href="https://drafts.fxtf.org/filter-effects/#element-attrdef-filter-filterunits"><span>filterUnits</span></a>’</span>
                </td>
                <td><a href="https://drafts.fxtf.org/filter-effects/#FilterPrimitiveSubRegion">フィルター効果領域</a>
                    (<span class="attr-name">‘<a
                            href="https://drafts.fxtf.org/filter-effects/#element-attrdef-filter-x"><span>x</span></a>’</span>,
                    <span class="attr-name">‘<a
                            href="https://drafts.fxtf.org/filter-effects/#element-attrdef-filter-y"><span>y</span></a>’</span>,
                    <span class="attr-name">‘<a
                            href="https://drafts.fxtf.org/filter-effects/#element-attrdef-filter-width"><span>width</span></a>’</span>,
                    <span class="attr-name">‘<a
                            href="https://drafts.fxtf.org/filter-effects/#element-attrdef-filter-height"><span>height</span></a>’</span>)
                    を、フィルターが適用される要素のバウンディングボックスの分数またはパーセンテージとして表すことを示します。
                </td>
            </tr>
            <tr>
                <td><span class="element-name">‘<a
                            href="https://drafts.fxtf.org/filter-effects/#FilterElement"><span>filter</span></a>’</span>
                </td>
                <td><span class="attr-name">‘<a
                            href="https://drafts.fxtf.org/filter-effects/#element-attrdef-filter-primitiveunits"><span>primitiveUnits</span></a>’</span>
                </td>
                <td>フィルタープリミティブ内の様々な長さの値が、フィルターが適用される要素のバウンディングボックスの分数またはパーセンテージで表されることを示します。</td>
            </tr>

        </table>

        <p>以下の説明では、<em>適用要素</em>とは効果が適用される要素を指します。グラデーションやパターンの場合、適用要素は<a
                href="struct.html#TermGraphicsElement">グラフィックス要素</a>であり、その<a class="property"
                href="painting.html#FillProperty">fill</a>または<a class="property"
                href="painting.html#StrokeProperty">stroke</a>プロパティが該当グラデーションやパターンを参照しています（<a
                href="text.html">テキスト要素</a>に関する特別なルールについては、<a
                href="text.html#ObjectBoundingBoxUnitsTextObjects">オブジェクトバウンディングボックス単位とテキスト要素</a>を参照）。クリッピングパス、マスク、フィルターについては、適用要素は<a
                href="struct.html#TermContainerElement">コンテナ要素</a>または<a
                href="struct.html#TermGraphicsElement">グラフィックス要素</a>となり得ます。
        </p>

        <p>キーワード<span
                class="attr-value">objectBoundingBox</span>が使われる場合、入れ子の変換行列リストに補助的な変換行列が挿入され、新たなユーザー座標系が生成される効果が得られます。
        </p>

        <p>まず、(<strong>minx</strong>,<strong>miny</strong>)と(<strong>maxx</strong>,<strong>maxy</strong>)座標は、適用要素の<a
                href="coords.html#TermObjectBoundingBox">オブジェクトバウンディングボックス</a>の範囲によって決定されます。</p>

        <p>次に、新しいユーザー座標系の(0,0)が適用要素のユーザー座標系内のバウンディングボックスの(minx,miny)隅に、
            (1,1)がバウンディングボックスの(maxx,maxy)隅にマッピングされます。多くの場合、以下の変換行列が正しい効果を生みます：</p>

        <pre>
[ (maxx-minx) 0 0 (maxy-miny) minx miny ]
</pre>

        <p>グラデーションベクトル、パターンタイル、フィルター領域、マスク領域を定義する属性にパーセンテージを使用した場合、パーセンテージは対応する小数値と同じ値を表します（例：50%は0.5と同じ意味）。<span
                class="element-name">‘<a href="pservers.html#PatternElement"><span>pattern</span></a>’</span>、
            <span class="element-name">‘<a
                    href="https://drafts.fxtf.org/css-masking-1/#ClipPathElement"><span>clipPath</span></a>’</span>、
            <span class="element-name">‘<a
                    href="https://drafts.fxtf.org/css-masking-1/#MaskElement"><span>mask</span></a>’</span>、
            <span class="element-name">‘<a
                    href="https://drafts.fxtf.org/filter-effects/#FilterElement"><span>filter</span></a>’</span>要素の内容内でパーセンテージが使われた場合は、<a
                href="coords.html#Units">単位</a>で定義されたパーセンテージの処理規則に従います。
        </p>

        <p>オブジェクトバウンディングボックス単位として分数やパーセンテージで表現する値には任意の数値を指定できます。特に、0未満や1より大きい分数、0%未満や100%以上のパーセンテージも指定可能です。</p>

        <p>キーワード<span
                class="attr-value">objectBoundingBox</span>は、適用要素のジオメトリーが幅または高さを持たない場合（例えば水平線や垂直線など）には使用すべきではありません。線に実際の太さ（非ゼロのストローク幅）があっても、ストローク幅はバウンディングボックスの計算では無視されるためです。適用要素のジオメトリーが幅または高さを持たず、<span
                class="attr-value">objectBoundingBox</span>が指定された場合、該当する効果（例：グラデーションやフィルター）は無視されます。</p>

    </div>

    <div class="ready-for-wider-review">
        <h2 id="SizingSVGInCSS" class="heading">8.12. SVGコンテンツの固有サイズプロパティ<a class="self-link"
                href="#SizingSVGInCSS"></a></h2>
        <p>CSSで整形されたホスト文書にSVGを含めるためには、<a
                href="https://www.w3.org/TR/css3-images#concrete-object-size">具体的オブジェクトサイズ</a>を算出する必要があります。
            <a href="https://www.w3.org/TR/css3-images#concrete-object-size">具体的オブジェクトサイズ</a>はCSS Images 3
            [<a href="refs.html#ref-css-images-3">css-images-3</a>]で定義される
            <a href="https://www.w3.org/TR/css3-images/#default-sizing">デフォルトサイズ付けアルゴリズム</a>
            を用いて、次の入力値で算出しなければなりません。
        </p>

        <p><a href="https://www.w3.org/TR/css3-images#specified-size">指定サイズ</a>は、<span class="element-name">‘<a
                    href="struct.html#SVGElement"><span>svg</span></a>’</span>要素の<a class="property"
                href="geometry.html#Sizing">width</a>および<a class="property"
                href="geometry.html#Sizing">height</a>サイズプロパティの使用値から決定しなければなりません。
        </p>

        <p><a href="https://www.w3.org/TR/css3-images#intrinsic-dimensions">固有寸法</a>も<a class="property"
                href="geometry.html#Sizing">width</a>および<a class="property"
                href="geometry.html#Sizing">height</a>サイズプロパティから決定されます。<a class="property"
                href="geometry.html#Sizing">width</a>または<a class="property"
                href="geometry.html#Sizing">height</a>が指定されていない場合、使用値は初期値<span class="attr-value">'auto'</span>となります。
            <span class="attr-value">'auto'</span>やパーセンテージ長は<a
                href="https://www.w3.org/TR/css3-images#intrinsic-width">固有幅</a>や<a
                href="https://www.w3.org/TR/css3-images#intrinsic-height">固有高さ</a>の決定には使用できません。
        </p>

        <p class="note">
            ビットマップ画像形式では、<a href="https://www.w3.org/TR/css3-images#intrinsic-dimensions">固有寸法</a>は画像ファイル内で固定され、
            指定サイズはホスト文書で画像を拡大縮小するために定義されます。
            SVGは本質的にスケーラブルなので、<a href="https://www.w3.org/TR/css3-images#intrinsic-width">固有幅</a>と
            <a href="https://www.w3.org/TR/css3-images#intrinsic-height">固有高さ</a>は<a
                href="https://www.w3.org/TR/css3-images#specified-size">指定サイズ</a>の幅と高さに適合します。
            よって、長さとして指定された場合、<span class="element-name">‘<a
                    href="struct.html#SVGElement"><span>svg</span></a>’</span>要素の<a class="property"
                href="geometry.html#Sizing">width</a>と<a class="property"
                href="geometry.html#Sizing">height</a>サイズプロパティはSVG画像の<a
                href="https://www.w3.org/TR/css3-images#intrinsic-dimensions">固有寸法</a>と、ホスト文書にSVG画像を配置する際の<a
                href="https://www.w3.org/TR/css3-images#specified-size">指定サイズ</a>を制御します。
        </p>

        <p> <a
                href="https://www.w3.org/TR/css3-images#intrinsic-aspect-ratio">固有アスペクト比</a>は、次のアルゴリズムで算出します。アルゴリズムがnullを返す場合、固有アスペクト比はありません。
        </p>

        <ol class="algorithm">
            <li><span class="element-name">‘<a href="struct.html#SVGElement"><span>svg</span></a>’</span>要素の<a
                    class="property" href="geometry.html#Sizing">width</a>と<a class="property"
                    href="geometry.html#Sizing">height</a>サイズプロパティが両方とも絶対値の場合：
                <ol>
                    <li>width / height を返す</li>
                </ol>
            </li>
            <li><a href="linking.html#LinksIntoSVG">SVGビュー</a>がアクティブな場合：
                <ol>
                    <li><var>viewbox</var>をアクティブなSVGビューで定義されたviewboxとする</li>
                    <li><var>viewbox</var>.width / <var>viewbox</var>.height を返す</li>
                </ol>
            </li>
            <li><span class="element-name">‘<a href="struct.html#SVGElement"><span>svg</span></a>’</span>要素上の<span
                    class="attr-name">‘<a
                        href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>が正しく指定されている場合：
                <ol>
                    <li><var>viewbox</var>を<span class="element-name">‘<a
                                href="struct.html#SVGElement"><span>svg</span></a>’</span>要素上の<span
                            class="attr-name">‘<a
                                href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>属性で定義されたviewboxとする
                    </li>
                    <li><var>viewbox</var>.width / <var>viewbox</var>.height を返す</li>
                </ol>
            </li>
            <li>null を返す</li>
        </ol>

        <p>この節で定義される挙動はCSS固有ですが、他のホスト環境にも適用可能です。すべてのホスト環境で、<a
                href="https://www.w3.org/TR/css3-images#intrinsic-aspect-ratio">固有アスペクト比</a>が利用可能な場合は、SVGビューポートのサイズ決定時に尊重しなければなりません。
        </p>
    </div>

    <p>例：</p>

    <div class="example">
        <div class="exampleheader">
            <strong>例：</strong> 固有アスペクト比 1
        </div>

        <div class="examplesource">
            <pre>&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="10cm" height="5cm">
  ...
&lt;/svg></pre>
        </div>
    </div>

    <p>この例では、<a href="coords.html#TermSVGViewport">SVGビューポート</a>の固有アスペクト比は2:1です。
        固有幅は10cm、固有高さは5cmです。</p>

    <div class="example">
        <div class="exampleheader">
            <strong>例：</strong> 固有アスペクト比 2
        </div>

        <div class="examplesource">
            <pre>&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="100%" height="50%" viewBox="0 0 200 200">
  ...
&lt;/svg></pre>
        </div>
    </div>

    <p>この例では、最外部<a href="coords.html#TermSVGViewport">SVGビューポート</a>の固有アスペクト比は1:1です。
        この場合のアスペクト比計算により、片方向のみ制約のある包含ブロック内のオブジェクトへの埋め込みが可能となります。</p>

    <div class="example">
        <div class="exampleheader">
            <strong>例：</strong> 固有アスペクト比 3
        </div>

        <div class="examplesource">
            <pre>&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="10cm" viewBox="0 0 200 200">
  ...
&lt;/svg></pre>
        </div>
    </div>

    <p>この場合、固有アスペクト比は1:1です。</p>

    <div class="example">
        <div class="exampleheader">
            <strong>例：</strong> 固有アスペクト比 4
        </div>

        <div class="examplesource">
            <pre>&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="75%" height="10cm" viewBox="0 0 200 200">
  ...
&lt;/svg></pre>
        </div>
    </div>

    <p>この例では、固有アスペクト比は1:1です。</p>

    <p class="issue" data-issue="19" id="issue19"><a class="self-link" href="#issue19"></a>新しいauto値の例をもっと追加すべきか？例えばDavid
        Vestが提供した
        <a href="https://docs.google.com/presentation/d/1POUiroOBbLmXYlQKf0pIR8zVkHWH9jRVN-w8A4aNsIk/">例</a>
        など。
    </p>

    <h2 id="VectorEffects" class="heading">8.13. ベクター効果<a class="self-link" href="#VectorEffects"></a></h2>
    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2 要件:</th>
                <td><a
                        href="https://www.w3.org/Graphics/SVG/WG/wiki/SVG2_Requirements_Input#Constrained_Transformations">SVG
                        2はSVG 1.2 Tinyを元に制約付き変換を持つ。</a></td>
            </tr>
            <tr>
                <th>決議:</th>
                <td><a href="https://www.w3.org/2014/04/09-svg-minutes.html#item06">ベクター効果拡張提案をSVG 2仕様に追加。</a></td>
            </tr>
            <tr>
                <th>目的:</th>
                <td>非スケーリング機能（オブジェクトの一部非スケーリング、オブジェクト全体非スケーリング）を含めるため。</td>
            </tr>
            <tr>
                <th>担当者:</th>
                <td>Satoru Takagi (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3619">ACTION-3619</a>)</td>
            </tr>
        </table>
    </div>

    <p>オブジェクトのアウトラインを元の幅のまま保持したり、オブジェクトの位置を変換に関わらず固定したい場合があります。例えば、地図上の道路を2px幅の線で描画する場合、ユーザーが地図をズームしても道路を2px幅に保つことや、グラフのイントロノートでパンが可能な場合などです。
    </p>

    <p>このような座標変換やグラフィック描画に関する効果を提供するため、SVG Tiny 1.2では<a class="property"
            href="coords.html#VectorEffectProperty">vector-effect</a>プロパティが導入されました。
        SVG Tiny
        1.2では非スケーリングストロークのみが導入されましたが、このバージョンではさらに多くの効果が追加されています。さらに、これらの効果は組み合わせて指定でき、より多様な効果を表現できます。また、SVG言語の将来バージョンではこのプロパティを通じてより強力なベクター効果指定が可能となります。
    </p>

    <p class="issue" data-issue="31" id="issue31"><a class="self-link" href="#issue31"></a>
        <a class="property" href="coords.html#VectorEffectProperty">vector-effect</a>の値のうち、<span
            class="prop-value">non-scaling-stroke</span>と<span class="prop-value">none</span>以外は実装不足のためSVG
        2から削除の危険があります。
        実装者からのフィードバック（現仕様での実装可能性について）が実装期間中に求められています。
    </p>

    <table class="propdef def">
        <tr>
            <th>名前:</th>
            <td><dfn id="VectorEffectProperty" data-dfn-type="property" data-export="">vector-effect</dfn></td>
        </tr>
        <tr>
            <th>値:</th>
            <td>none | [ non-scaling-stroke | non-scaling-size | non-rotation | fixed-position ]+ [ viewport | screen ]?
            </td>
        </tr>
        <tr>
            <th>初期値:</th>
            <td>none</td>
        </tr>
        <tr>
            <th>適用対象:</th>
            <td><a href="struct.html#TermGraphicsElement">グラフィックス要素</a>および<span class="element-name">‘<a
                        href="struct.html#UseElement"><span>use</span></a>’</span></td>
        </tr>
        <tr>
            <th>継承:</th>
            <td>いいえ</td>
        </tr>
        <tr>
            <th>パーセンテージ:</th>
            <td>N/A</td>
        </tr>
        <tr>
            <th>メディア:</th>
            <td>視覚</td>
        </tr>
        <tr>
            <th>算出値:</th>
            <td>指定通り</td>
        </tr>
        <tr>
            <th><a href="https://svgwg.org/specs/animations/#Animatable">アニメーション可能</a>:</th>
            <td>はい</td>
        </tr>
    </table>

    <dl>
        <dt class="prop-value">none</dt>
        <dd>ベクター効果は適用されません。すなわちSVG 1.1からのデフォルト描画動作が使われ、まず図形のジオメトリーが指定ペイントで塗りつぶされ、次にアウトラインが指定ペイントでストロークされます。</dd>
        <dt class="prop-value">non-scaling-stroke</dt>
        <dd><a href="painting.html#non-scaling-stroke">ペインティングにおけるベクター効果の説明</a>を参照してください。</dd>
        <dt class="prop-value">non-scaling-size</dt>
        <dd>この要素および子孫に対して特別な<a
                href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">ユーザー座標系</a>を制約付き変換で指定します。次の特徴があります。<a
                href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">ユーザー座標系</a>のスケールは、ホスト座標空間の<a
                href="https://www.w3.org/TR/css-transforms-1/#current-transformation-matrix">CTM</a>が変化しても変化しません。ただし、回転と傾斜の抑制は指定しません。また、<a
                href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">ユーザー座標系</a>の配置固定も指定しません。non-scaling-sizeはユーザー座標系のスケーリング抑制を行うため、non-scaling-strokeの特性も持ちます。変換式と例は次章で示します。
        </dd>
        <dt class="prop-value">non-rotation</dt>
        <dd>この要素および子孫に対して特別な<a
                href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">ユーザー座標系</a>を制約付き変換で指定します。次の特徴があります。<a
                href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">ユーザー座標系</a>の回転と傾斜は、ホスト座標空間の<a
                href="https://www.w3.org/TR/css-transforms-1/#current-transformation-matrix">CTM</a>が変化しても抑制されます。ただし、スケーリングの抑制は指定しません。また、<a
                href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">ユーザー座標系</a>の配置固定も指定しません。変換式と例は次章で示します。
        </dd>
        <dt class="prop-value">fixed-position</dt>
        <dd>この要素および子孫に対して特別な<a
                href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">ユーザー座標系</a>を制約付き変換で指定します。次の特徴があります。<a
                href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">ユーザー座標系</a>の配置は、ホスト座標空間の<a
                href="https://www.w3.org/TR/css-transforms-1/#current-transformation-matrix">CTM</a>が変化しても固定されます。ただし、回転・傾斜・スケーリングの抑制は指定しません。fixed-position効果を持つ要素が<a
                class="property" href="coords.html#TransformProperty">transform</a>プロパティも持つ場合、そのプロパティは本効果のために消費されます。<a
                class="property"
                href="coords.html#TransformProperty">transform</a>プロパティの行列のシフト成分<var>e</var>と<var>f</var>は固定ユーザー座標系の原点移動に利用されます。変換式と例は次章で示します。
        </dd>
    </dl>

    <p>これらの値は列挙可能であり、これらの特徴を同時に持つ効果を指定できます。</p>

    <p>次の2つの値は、上記の値を補助します。これらは制約付き変換のホスト座標空間を示します。特に、入れ子コンテンツや入れ子<span class="element-name">‘<a
                href="struct.html#SVGElement"><span>svg</span></a>’</span>要素など、入れ子ビューポート座標系に属する要素に効果的です。未指定時の初期値は<span
            class="prop-value">viewport</span>です。</p>

    <dl>
        <dt class="prop-value">viewport</dt>
        <dd>直近の<a href="coords.html#TermViewportCoordinateSystem">ビューポート座標系</a>をホスト座標空間とします。要素が入れ子の<a
                href="coords.html#TermViewportCoordinateSystem">ビューポート座標系</a>に属している場合、ベクター効果はその要素が直接属する<a
                href="coords.html#TermViewportCoordinateSystem">ビューポート座標系</a>に適用されます。すなわち、ベクター効果は祖先<a
                href="coords.html#TermViewportCoordinateSystem">ビューポート座標系</a>のCTM変化には効果がありません。</dd>
        <dt class="prop-value">screen</dt>
        <dd>内容の座標系を、<a href="conform.html#TermUserAgent">ユーザーエージェント</a>が直接制御する座標系とします。いわば<a
                href="conform.html#TermUserAgent">ユーザーエージェント</a>が持つ「画面」です（SVGT1.2の"screen coordinate
            space"）。その要素が入れ子ビューポート座標系に属していても、ベクター効果はあらゆる階層のCTM変化に常に有効です。SVG実装がCSS互換px単位をサポートする<a
                href="conform.html#TermUserAgent">ユーザーエージェント</a>の一部である場合、これはルートコンテンツのCSSピクセル上の座標系です。一般的に、デバイスのピクセル（またはドット）とCSSのピクセルは、<a
                href="conform.html#TermUserAgent">ユーザーエージェント</a>自身のズーム機能やdpiの違いによって必ずしも一致しません（<a
                href="https://www.w3.org/TR/css3-values/#resolution">resolution</a>
            [<a href="https://www.w3.org/TR/css3-values/">CSS Values and Units Module Level 3</a>]参照）。
            したがって、この値はデバイス座標系への制約付き変換を指定しません。
        </dd>
    </dl>

    <p>注：SVGの将来バージョンではデバイス座標系指定方法が追加される可能性があります。</p>
    <h3 id="VectorEffectsCalculation" class="heading">8.13.1. ベクター効果の計算<a class="self-link"
            href="#VectorEffectsCalculation"></a></h3>

    <p>この節では、ベクター効果の挙動を明確化するため、<span class="prop-value">non-scaling-stroke</span>（明確な意味を持つもの）を除く値の組み合わせに関する変換式一覧を示します。
    </p>

    <p class="ready-for-wider-review"><a class="property"
            href="coords.html#VectorEffectProperty">vector-effect</a>プロパティは、<a
            href="https://drafts.csswg.org/css-transforms-2/#3d-rendering-contexts">3dレンダリングコンテキスト</a>で実行される変換には影響しません。
    </p>

    <p>通常の<a href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">ユーザー座標系</a>から<a
            href="coords.html#TermViewportCoordinateSystem">ビューポート座標系</a>への座標変換式は以下の通りです。</p>

    <div role="math">
        <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
            <mtable columnalign="left">
                <mtr>
                    <mtd>
                        <mfenced open="[" close="]">
                            <mtable rowalign="center">
                                <mtr>
                                    <mtd>
                                        <msub>
                                            <mi>x</mi>
                                            <mi>viewport</mi>
                                        </msub>
                                    </mtd>
                                </mtr>
                                <mtr>
                                    <mtd>
                                        <msub>
                                            <mi>y</mi>
                                            <mi>viewport</mi>
                                        </msub>
                                    </mtd>
                                </mtr>
                                <mtr>
                                    <mtd>
                                        <mn>1</mn>
                                    </mtd>
                                </mtr>
                            </mtable>
                        </mfenced>
                        <mo>=</mo>
                        <mtext mathsize="big">CTM</mtext>
                        <mo lspace="2px" rspace="2px">⋅</mo>
                        <mfenced open="[" close="]">
                            <mtable rowalign="center">
                                <mtr>
                                    <mtd>
                                        <msub>
                                            <mi>x</mi>
                                            <mi>userspace</mi>
                                        </msub>
                                    </mtd>
                                </mtr>
                                <mtr>
                                    <mtd>
                                        <msub>
                                            <mi>y</mi>
                                            <mi>userspace</mi>
                                        </msub>
                                    </mtd>
                                </mtr>
                                <mtr>
                                    <mtd>
                                        <mn>1</mn>
                                    </mtd>
                                </mtr>
                            </mtable>
                        </mfenced>
                    </mtd>
                </mtr>
                <mtr>
                    <mtd>
                        <mtext mathsize="big">CTM</mtext>
                        <mo>=</mo>
                        <mfenced open="[" close="]">
                            <mtable rowalign="center">
                                <mtr>
                                    <mtd>
                                        <msub>
                                            <mi>a</mi>
                                            <mi>ctm</mi>
                                        </msub>
                                    </mtd>
                                    <mtd>
                                        <msub>
                                            <mi>c</mi>
                                            <mi>ctm</mi>
                                        </msub>
                                    </mtd>
                                    <mtd>
                                        <msub>
                                            <mi>e</mi>
                                            <mi>ctm</mi>
                                        </msub>
                                    </mtd>
                                </mtr>
                                <mtr>
                                    <mtd>
                                        <msub>
                                            <mi>b</mi>
                                            <mi>ctm</mi>
                                        </msub>
                                    </mtd>
                                    <mtd>
                                        <msub>
                                            <mi>d</mi>
                                            <mi>ctm</mi>
                                        </msub>
                                    </mtd>
                                    <mtd>
                                        <msub>
                                            <mi>f</mi>
                                            <mi>ctm</mi>
                                        </msub>
                                    </mtd>
                                </mtr>
                                <mtr>
                                    <mtd>
                                        <mn>0</mn>
                                    </mtd>
                                    <mtd>
                                        <mn>0</mn>
                                    </mtd>
                                    <mtd>
                                        <mn>1</mn>
                                    </mtd>
                                </mtr>
                            </mtable>
                        </mfenced>
                    </mtd>
                </mtr>
            </mtable>
        </math>
    </div>

    <!--
<p>Here, [DPR] is <a href="http://dev.w3.org/csswg/cssom-view/#dom-window-devicepixelratio">Device Pixel Ratio</a> (in scalar). And [BCM] presupposes that it is a matrix synthesizing the coordinate transformation by Browser Chrome's built-in zooming panning functions. Hereafter, x(<a href="intro.html#TermUserSpace">userspace</a>), y(<a href="intro.html#TermUserSpace">userspace</a>) is abbreviated as x, y.
</p>
-->

    <pre class="xml">
&lt;circle vector-effect="<var>veValue</var>" transform="translate(<var>x<sub>o</sub></var> <var>y<sub>o</sub></var>)" cx="<var>x<sub>f</sub></var>" cy="<var>y<sub>f</sub></var>" r=".."/>
</pre>

    <p>上記のように<a class="property"
            href="coords.html#VectorEffectProperty">vector-effect</a>を要素に追加すると、ユーザー座標からデバイス座標への変換式が以下のように変化します。ここで<var>x<sub>f</sub></var>と<var>y<sub>f</sub></var>は対応する要素およびその子孫のユーザー座標です。また、<var>x<sub>o</sub></var>と<var>y<sub>o</sub></var>は当該要素のtransform属性の行列要素<var>e</var>と<var>f</var>です。さらに、<b>|det(CTM)|</b>は<a
            href="https://www.w3.org/TR/css-transforms-1/#current-transformation-matrix">CTM</a>の行列式の絶対値です。この値が0となり<span
            class="prop-value">non-scaling-size</span>が指定された場合、<a class="property"
            href="coords.html#VectorEffectProperty">vector-effect</a>は無効、すなわち<span class="prop-value">none</span>となります。
    </p>


    <div role="math">
        <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
            <mrow>
                <mrow>
                    <mtext>det</mtext>
                    <mfenced open="(" close=")">
                        <mtext mathsize="big">CTM</mtext>
                    </mfenced>
                </mrow>
                <mo>=</mo>
                <msub>
                    <mi>a</mi>
                    <mi>ctm</mi>
                </msub>
                <mo lspace="2px" rspace="2px">⋅</mo>
                <msub>
                    <mi>d</mi>
                    <mi>ctm</mi>
                </msub>
                <mo lspace="2px" rspace="2px">-</mo>
                <msub>
                    <mi>b</mi>
                    <mi>ctm</mi>
                </msub>
                <mo lspace="2px" rspace="2px">⋅</mo>
                <msub>
                    <mi>c</mi>
                    <mi>ctm</mi>
                </msub>
            </mrow>
        </math>
    </div>


    <table class="attrdef def">
        <tr>
            <th>veValue</th>
            <th>式</th>
        </tr>
        <tr>
            <td><span class="prop-value">non-scaling-size</span></td>
            <td>
                <div role="math">
                    <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                        <mrow>
                            <mfenced open="[" close="]">
                                <mtable rowalign="center">
                                    <mtr>
                                        <mtd>
                                            <msub>
                                                <mi>x</mi>
                                                <mi>viewport</mi>
                                            </msub>
                                        </mtd>
                                    </mtr>
                                    <mtr>
                                        <mtd>
                                            <msub>
                                                <mi>y</mi>
                                                <mi>viewport</mi>
                                            </msub>
                                        </mtd>
                                    </mtr>
                                    <mtr>
                                        <mtd>
                                            <mn>1</mn>
                                        </mtd>
                                    </mtr>
                                </mtable>
                            </mfenced>
                            <mo>=</mo>
                            <mrow>
                                <mtext mathsize="big">CTM</mtext>
                                <mo lspace="2px" rspace="2px">⋅</mo>
                                <mfenced open="[" close="]">
                                    <mtable rowalign="center">
                                        <mtr>
                                            <mtd>
                                                <mtext>0</mtext>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mtext>0</mtext>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                        </mtr>
                                    </mtable>
                                </mfenced>
                                <mo lspace="2px" rspace="2px">+</mo>
                                <mfrac>
                                    <mtext mathsize="big">CTM</mtext>
                                    <msqrt>
                                        <mfenced open="|" close="|">
                                            <mrow>
                                                <mtext>det</mtext>
                                                <mfenced open="(" close=")">
                                                    <mtext mathsize="big">CTM</mtext>
                                                </mfenced>
                                            </mrow>
                                        </mfenced>
                                    </msqrt>
                                </mfrac>
                                <mo lspace="2px" rspace="2px">⋅</mo>
                                <mfenced open="[" close="]">
                                    <mtable rowalign="center">
                                        <mtr>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                        </mtr>
                                    </mtable>
                                </mfenced>
                                <mo lspace="2px" rspace="2px">⋅</mo>
                                <mfenced open="[" close="]">
                                    <mtable rowalign="center">
                                        <mtr>
                                            <mtd>
                                                <msub>
                                                    <mi>x</mi>
                                                    <mi>f</mi>
                                                </msub>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <msub>
                                                    <mi>y</mi>
                                                    <mi>f</mi>
                                                </msub>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                        </mtr>
                                    </mtable>
                                </mfenced>
                            </mrow>
                        </mrow>
                    </math>
                </div>
            </td>
        </tr>
        <tr>
            <td><span class="prop-value">non-rotation</span></td>
            <td>
                <div role="math">
                    <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                        <mrow>
                            <mfenced open="[" close="]">
                                <mtable rowalign="center">
                                    <mtr>
                                        <mtd>
                                            <msub>
                                                <mi>x</mi>
                                                <mi>viewport</mi>
                                            </msub>
                                        </mtd>
                                    </mtr>
                                    <mtr>
                                        <mtd>
                                            <msub>
                                                <mi>y</mi>
                                                <mi>viewport</mi>
                                            </msub>
                                        </mtd>
                                    </mtr>
                                    <mtr>
                                        <mtd>
                                            <mn>1</mn>
                                        </mtd>
                                    </mtr>
                                </mtable>
                            </mfenced>
                            <mo>=</mo>
                            <mrow>
                                <mtext mathsize="big">CTM</mtext>
                                <mo lspace="2px" rspace="2px">⋅</mo>
                                <mfenced open="[" close="]">
                                    <mtable rowalign="center">
                                        <mtr>
                                            <mtd>
                                                <mtext>0</mtext>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mtext>0</mtext>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                        </mtr>
                                    </mtable>
                                </mfenced>
                                <mo lspace="2px" rspace="2px">+</mo>
                                <msqrt>
                                    <mfenced open="|" close="|">
                                        <mrow>
                                            <mtext>det</mtext>
                                            <mfenced open="(" close=")">
                                                <mtext mathsize="big">CTM</mtext>
                                            </mfenced>
                                        </mrow>
                                    </mfenced>
                                </msqrt>
                                <mo lspace="2px" rspace="2px">⋅</mo>
                                <mfenced open="[" close="]">
                                    <mtable rowalign="center">
                                        <mtr>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                        </mtr>
                                    </mtable>
                                </mfenced>
                                <mo lspace="2px" rspace="2px">⋅</mo>
                                <mfenced open="[" close="]">
                                    <mtable rowalign="center">
                                        <mtr>
                                            <mtd>
                                                <msub>
                                                    <mi>x</mi>
                                                    <mi>f</mi>
                                                </msub>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <msub>
                                                    <mi>y</mi>
                                                    <mi>f</mi>
                                                </msub>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                        </mtr>
                                    </mtable>
                                </mfenced>
                            </mrow>
                        </mrow>
                    </math>
                </div>
            </td>
        </tr>
        <tr>
            <td><span class="prop-value">non-scaling-size</span> <span class="prop-value">non-rotation</span></td>
            <td>
                <div role="math">
                    <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                        <mrow>
                            <mfenced open="[" close="]">
                                <mtable rowalign="center">
                                    <mtr>
                                        <mtd>
                                            <msub>
                                                <mi>x</mi>
                                                <mi>viewport</mi>
                                            </msub>
                                        </mtd>
                                    </mtr>
                                    <mtr>
                                        <mtd>
                                            <msub>
                                                <mi>y</mi>
                                                <mi>viewport</mi>
                                            </msub>
                                        </mtd>
                                    </mtr>
                                    <mtr>
                                        <mtd>
                                            <mn>1</mn>
                                        </mtd>
                                    </mtr>
                                </mtable>
                            </mfenced>
                            <mo>=</mo>
                            <mrow>
                                <mtext mathsize="big">CTM</mtext>
                                <mo lspace="2px" rspace="2px">⋅</mo>
                                <mfenced open="[" close="]">
                                    <mtable rowalign="center">
                                        <mtr>
                                            <mtd>
                                                <mtext>0</mtext>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mtext>0</mtext>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                        </mtr>
                                    </mtable>
                                </mfenced>
                                <mo lspace="2px" rspace="2px">+</mo>
                                <mfenced open="[" close="]">
                                    <mtable rowalign="center">
                                        <mtr>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                        </mtr>
                                    </mtable>
                                </mfenced>
                                <mo lspace="2px" rspace="2px">⋅</mo>
                                <mfenced open="[" close="]">
                                    <mtable rowalign="center">
                                        <mtr>
                                            <mtd>
                                                <msub>
                                                    <mi>x</mi>
                                                    <mi>f</mi>
                                                </msub>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <msub>
                                                    <mi>y</mi>
                                                    <mi>f</mi>
                                                </msub>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                        </mtr>
                                    </mtable>
                                </mfenced>
                            </mrow>
                        </mrow>
                    </math>
                </div>
            </td>
        </tr>
        <tr>
            <td><span class="prop-value">fixed-position</span></td>
            <td>
                <div role="math">
                    <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                        <mrow>
                            <mfenced open="[" close="]">
                                <mtable rowalign="center">
                                    <mtr>
                                        <mtd>
                                            <msub>
                                                <mi>x</mi>
                                                <mi>viewport</mi>
                                            </msub>
                                        </mtd>
                                    </mtr>
                                    <mtr>
                                        <mtd>
                                            <msub>
                                                <mi>y</mi>
                                                <mi>viewport</mi>
                                            </msub>
                                        </mtd>
                                    </mtr>
                                    <mtr>
                                        <mtd>
                                            <mn>1</mn>
                                        </mtd>
                                    </mtr>
                                </mtable>
                            </mfenced>
                            <mo>=</mo>
                            <mrow>
                                <mfenced open="[" close="]">
                                    <mtable rowalign="center">
                                        <mtr>
                                            <mtd>
                                                <msub>
                                                    <mi>x</mi>
                                                    <mi>o</mi>
                                                </msub>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <msub>
                                                    <mi>y</mi>
                                                    <mi>o</mi>
                                                </msub>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                        </mtr>
                                    </mtable>
                                </mfenced>
                                <mo>+</mo>
                                <mtext mathsize="big">CTM</mtext>
                                <mo lspace="2px" rspace="2px">⋅</mo>
                                <mfenced open="[" close="]">
                                    <mtable rowalign="center">
                                        <mtr>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                        </mtr>
                                    </mtable>
                                </mfenced>
                                <mo lspace="2px" rspace="2px">⋅</mo>
                                <mfenced open="[" close="]">
                                    <mtable rowalign="center">
                                        <mtr>
                                            <mtd>
                                                <msub>
                                                    <mi>x</mi>
                                                    <mi>f</mi>
                                                </msub>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <msub>
                                                    <mi>y</mi>
                                                    <mi>f</mi>
                                                </msub>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                        </mtr>
                                    </mtable>
                                </mfenced>
                            </mrow>
                        </mrow>
                    </math>
                </div>
            </td>
        </tr>
        <tr>
            <td><span class="prop-value">fixed-position</span> <span class="prop-value">non-scaling-size</span></td>
            <td>
                <div role="math">
                    <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                        <mrow>
                            <mfenced open="[" close="]">
                                <mtable rowalign="center">
                                    <mtr>
                                        <mtd>
                                            <msub>
                                                <mi>x</mi>
                                                <mi>viewport</mi>
                                            </msub>
                                        </mtd>
                                    </mtr>
                                    <mtr>
                                        <mtd>
                                            <msub>
                                                <mi>y</mi>
                                                <mi>viewport</mi>
                                            </msub>
                                        </mtd>
                                    </mtr>
                                    <mtr>
                                        <mtd>
                                            <mn>1</mn>
                                        </mtd>
                                    </mtr>
                                </mtable>
                            </mfenced>
                            <mo>=</mo>
                            <mrow>
                                <mfenced open="[" close="]">
                                    <mtable rowalign="center">
                                        <mtr>
                                            <mtd>
                                                <msub>
                                                    <mi>x</mi>
                                                    <mi>o</mi>
                                                </msub>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <msub>
                                                    <mi>y</mi>
                                                    <mi>o</mi>
                                                </msub>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                        </mtr>
                                    </mtable>
                                </mfenced>
                                <mo>+</mo>
                                <mfrac>
                                    <mtext mathsize="big">CTM</mtext>
                                    <msqrt>
                                        <mfenced open="|" close="|">
                                            <mrow>
                                                <mtext>det</mtext>
                                                <mfenced open="(" close=")">
                                                    <mtext mathsize="big">CTM</mtext>
                                                </mfenced>
                                            </mrow>
                                        </mfenced>
                                    </msqrt>
                                </mfrac>
                                <mo lspace="2px" rspace="2px">⋅</mo>
                                <mfenced open="[" close="]">
                                    <mtable rowalign="center">
                                        <mtr>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                        </mtr>
                                    </mtable>
                                </mfenced>
                                <mo lspace="2px" rspace="2px">⋅</mo>
                                <mfenced open="[" close="]">
                                    <mtable rowalign="center">
                                        <mtr>
                                            <mtd>
                                                <msub>
                                                    <mi>x</mi>
                                                    <mi>f</mi>
                                                </msub>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <msub>
                                                    <mi>y</mi>
                                                    <mi>f</mi>
                                                </msub>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                        </mtr>
                                    </mtable>
                                </mfenced>
                            </mrow>
                        </mrow>
                    </math>
                </div>
            </td>
        </tr>
        <tr>
            <td><span class="prop-value">fixed-position</span> <span class="prop-value">non-rotation</span></td>
            <td>
                <div role="math">
                    <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                        <mrow>
                            <mfenced open="[" close="]">
                                <mtable rowalign="center">
                                    <mtr>
                                        <mtd>
                                            <msub>
                                                <mi>x</mi>
                                                <mi>viewport</mi>
                                            </msub>
                                        </mtd>
                                    </mtr>
                                    <mtr>
                                        <mtd>
                                            <msub>
                                                <mi>y</mi>
                                                <mi>viewport</mi>
                                            </msub>
                                        </mtd>
                                    </mtr>
                                    <mtr>
                                        <mtd>
                                            <mn>1</mn>
                                        </mtd>
                                    </mtr>
                                </mtable>
                            </mfenced>
                            <mo>=</mo>
                            <mrow>
                                <mfenced open="[" close="]">
                                    <mtable rowalign="center">
                                        <mtr>
                                            <mtd>
                                                <msub>
                                                    <mi>x</mi>
                                                    <mi>o</mi>
                                                </msub>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <msub>
                                                    <mi>y</mi>
                                                    <mi>o</mi>
                                                </msub>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                        </mtr>
                                    </mtable>
                                </mfenced>
                                <mo>+</mo>
                                <msqrt>
                                    <mfenced open="|" close="|">
                                        <mrow>
                                            <mtext>det</mtext>
                                            <mfenced open="(" close=")">
                                                <mtext mathsize="big">CTM</mtext>
                                            </mfenced>
                                        </mrow>
                                    </mfenced>
                                </msqrt>
                                <mo lspace="2px" rspace="2px">⋅</mo>
                                <mfenced open="[" close="]">
                                    <mtable rowalign="center">
                                        <mtr>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                        </mtr>
                                    </mtable>
                                </mfenced>
                                <mo lspace="2px" rspace="2px">⋅</mo>
                                <mfenced open="[" close="]">
                                    <mtable rowalign="center">
                                        <mtr>
                                            <mtd>
                                                <msub>
                                                    <mi>x</mi>
                                                    <mi>f</mi>
                                                </msub>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <msub>
                                                    <mi>y</mi>
                                                    <mi>f</mi>
                                                </msub>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                        </mtr>
                                    </mtable>
                                </mfenced>
                            </mrow>
                        </mrow>
                    </math>
                </div>
            </td>
        </tr>
        <tr>
            <td><span class="prop-value">fixed-position</span> <span class="prop-value">non-scaling-size</span> <span
                    class="prop-value">non-rotation</span></td>
            <td>
                <div role="math">
                    <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                        <mrow>
                            <mfenced open="[" close="]">
                                <mtable rowalign="center">
                                    <mtr>
                                        <mtd>
                                            <msub>
                                                <mi>x</mi>
                                                <mi>viewport</mi>
                                            </msub>
                                        </mtd>
                                    </mtr>
                                    <mtr>
                                        <mtd>
                                            <msub>
                                                <mi>y</mi>
                                                <mi>viewport</mi>
                                            </msub>
                                        </mtd>
                                    </mtr>
                                    <mtr>
                                        <mtd>
                                            <mn>1</mn>
                                        </mtd>
                                    </mtr>
                                </mtable>
                            </mfenced>
                            <mo>=</mo>
                            <mrow>
                                <mrow>
                                    <mfenced open="[" close="]">
                                        <mtable rowalign="center">
                                            <mtr>
                                                <mtd>
                                                    <msub>
                                                        <mi>x</mi>
                                                        <mi>o</mi>
                                                    </msub>
                                                </mtd>
                                            </mtr>
                                            <mtr>
                                                <mtd>
                                                    <msub>
                                                        <mi>y</mi>
                                                        <mi>o</mi>
                                                    </msub>
                                                </mtd>
                                            </mtr>
                                            <mtr>
                                                <mtd>
                                                    <mn>1</mn>
                                                </mtd>
                                            </mtr>
                                        </mtable>
                                    </mfenced>
                                </mrow>
                                <mo>+</mo>
                                <mfenced open="[" close="]">
                                    <mtable rowalign="center">
                                        <mtr>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                            <mtd>
                                                <mn>0</mn>
                                            </mtd>
                                        </mtr>
                                    </mtable>
                                </mfenced>
                                <mo lspace="2px" rspace="2px">⋅</mo>
                                <mfenced open="[" close="]">
                                    <mtable rowalign="center">
                                        <mtr>
                                            <mtd>
                                                <msub>
                                                    <mi>x</mi>
                                                    <mi>f</mi>
                                                </msub>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <msub>
                                                    <mi>y</mi>
                                                    <mi>f</mi>
                                                </msub>
                                            </mtd>
                                        </mtr>
                                        <mtr>
                                            <mtd>
                                                <mn>1</mn>
                                            </mtd>
                                        </mtr>
                                    </mtable>
                                </mfenced>
                            </mrow>
                        </mrow>
                    </math>
                </div>
            </td>
        </tr>
    </table>

    <h3 id="NestedVectorEffectsCalculation" class="heading">8.13.2. 入れ子ビューポート座標系に対するベクター効果の計算<a class="self-link"
            href="#NestedVectorEffectsCalculation"></a></h3>

    <p>以下は、ベクター効果なしで入れ子ビューポート座標系における通常の座標変換式です。<b>x<sub>viewport(UA)</sub></b>と<b>y<sub>viewport(UA)</sub></b>は<a
            href="conform.html#TermUserAgent">ユーザーエージェント</a>が直接制御する座標です。<b>CTM<sub>this</sub></b>は、対象グラフィックの<a
            href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">ユーザー座標系</a>から、それが属する<a
            href="coords.html#TermViewportCoordinateSystem">ビューポート座標系</a>への変換行列の<a
            href="https://www.w3.org/TR/css-transforms-1/#current-transformation-matrix">CTM</a>です。<b>CTM<sub>parent</sub></b>は、前述の<a
            href="coords.html#TermViewportCoordinateSystem">ビューポート座標系</a>から親の<a
            href="coords.html#TermViewportCoordinateSystem">ビューポート座標系</a>への変換行列の<a
            href="https://www.w3.org/TR/css-transforms-1/#current-transformation-matrix">CTM</a>です。そして、<b>CTM<sub>root</sub></b>は、最上位のビューポート座標系（UA）の<a
            href="https://www.w3.org/TR/css-transforms-1/#current-transformation-matrix">CTM</a>です。
    </p>

    <div role="math">
        <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
            <mrow>
                <mfenced open="[" close="]">
                    <mtable rowalign="center">
                        <mtr>
                            <mtd>
                                <msub>
                                    <mi>x</mi>
                                    <mi>viewport(UA)</mi>
                                </msub>
                            </mtd>
                        </mtr>
                        <mtr>
                            <mtd>
                                <msub>
                                    <mi>y</mi>
                                    <mi>viewport(UA)</mi>
                                </msub>
                            </mtd>
                        </mtr>
                        <mtr>
                            <mtd>
                                <mn>1</mn>
                            </mtd>
                        </mtr>
                    </mtable>
                </mfenced>
                <mo>=</mo>
                <msub>
                    <mtext mathsize="big">CTM</mtext>
                    <mi>root</mi>
                </msub>
                <mo lspace="2px" rspace="2px">⋅</mo>
                <mtext>...</mtext>
                <mo lspace="2px" rspace="2px">⋅</mo>
                <msub>
                    <mtext mathsize="big">CTM</mtext>
                    <mi>parent</mi>
                </msub>
                <mo lspace="2px" rspace="2px">⋅</mo>
                <msub>
                    <mtext mathsize="big">CTM</mtext>
                    <mi>this</mi>
                </msub>
                <mo lspace="2px" rspace="2px">⋅</mo>
                <mfenced open="[" close="]">
                    <mtable rowalign="center">
                        <mtr>
                            <mtd>
                                <msub>
                                    <mi>x</mi>
                                    <mi>userspace</mi>
                                </msub>
                            </mtd>
                        </mtr>
                        <mtr>
                            <mtd>
                                <msub>
                                    <mi>y</mi>
                                    <mi>userspace</mi>
                                </msub>
                            </mtd>
                        </mtr>
                        <mtr>
                            <mtd>
                                <mn>1</mn>
                            </mtd>
                        </mtr>
                    </mtable>
                </mfenced>
            </mrow>
        </math>
    </div>

    <p>前節の7つの式を入れ子のビューポート座標系に適用する際、これらの式の適用方法は、<a class="property"
            href="coords.html#VectorEffectProperty">vector-effect</a>の追加値として<span
            class="prop-value">viewport</span>または<span class="prop-value">screen</span>が指定されているかによって次のように変わります。</p>

    <p><span class="prop-value">viewport</span>値が指定された場合、<a
            href="conform.html#TermUserAgent">ユーザーエージェント</a>は前章の7つの式のいずれかと、次の式を組み合わせて座標を計算します。</p>

    <div role="math">
        <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
            <mtable columnalign="left">
                <mtr>
                    <mtd>
                        <mfenced open="[" close="]">
                            <mtable rowalign="center">
                                <mtr>
                                    <mtd>
                                        <msub>
                                            <mi>x</mi>
                                            <mrow>
                                                <mi>viewport</mi>
                                                <mo stretchy="false">(</mo>
                                                <mi>UA</mi>
                                                <mo stretchy="false">)</mo>
                                            </mrow>
                                        </msub>
                                    </mtd>
                                </mtr>
                                <mtr>
                                    <mtd>
                                        <msub>
                                            <mi>y</mi>
                                            <mrow>
                                                <mi>viewport</mi>
                                                <mo stretchy="false">(</mo>
                                                <mi>UA</mi>
                                                <mo stretchy="false">)</mo>
                                            </mrow>
                                        </msub>
                                    </mtd>
                                </mtr>
                                <mtr>
                                    <mtd>
                                        <mn>1</mn>
                                    </mtd>
                                </mtr>
                            </mtable>
                        </mfenced>
                        <mo>=</mo>
                        <msub>
                            <mtext mathsize="big">CTM</mtext>
                            <mtext>root</mtext>
                        </msub>
                        <mo lspace="2px" rspace="2px">⋅</mo>
                        <mtext>...</mtext>
                        <mo lspace="2px" rspace="2px">⋅</mo>
                        <msub>
                            <mtext mathsize="big">CTM</mtext>
                            <mtext>parent</mtext>
                        </msub>
                        <mo lspace="2px" rspace="2px">⋅</mo>
                        <mfenced open="[" close="]">
                            <mtable rowalign="center">
                                <mtr>
                                    <mtd>
                                        <msub>
                                            <mi>x</mi>
                                            <mi>viewport</mi>
                                        </msub>
                                    </mtd>
                                </mtr>
                                <mtr>
                                    <mtd>
                                        <msub>
                                            <mi>y</mi>
                                            <mi>viewport</mi>
                                        </msub>
                                    </mtd>
                                </mtr>
                                <mtr>
                                    <mtd>
                                        <mn>1</mn>
                                    </mtd>
                                </mtr>
                            </mtable>
                        </mfenced>
                    </mtd>
                </mtr>
                <mtr>
                    <mtd>
                        <mtext mathsize="big">CTM</mtext>
                        <mo>=</mo>
                        <msub>
                            <mtext mathsize="big">CTM</mtext>
                            <mtext>this</mtext>
                        </msub>
                    </mtd>
                </mtr>
            </mtable>
        </math>
    </div>

    <p><span class="prop-value">screen</span>値が指定された場合、<a
            href="conform.html#TermUserAgent">ユーザーエージェント</a>は前章の7つの式のいずれかと、以下の式を組み合わせて座標を計算します。</p>

    <div role="math">
        <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
            <mtable columnalign="left">
                <mtr>
                    <mtd>
                        <mfenced open="[" close="]">
                            <mtable rowalign="center">
                                <mtr>
                                    <mtd>
                                        <msub>
                                            <mi>x</mi>
                                            <mrow>
                                                <mi>viewport</mi>
                                                <mo stretchy="false">(</mo>
                                                <mi>UA</mi>
                                                <mo stretchy="false">)</mo>
                                            </mrow>
                                        </msub>
                                    </mtd>
                                </mtr>
                                <mtr>
                                    <mtd>
                                        <msub>
                                            <mi>y</mi>
                                            <mrow>
                                                <mi>viewport</mi>
                                                <mo stretchy="false">(</mo>
                                                <mi>UA</mi>
                                                <mo stretchy="false">)</mo>
                                            </mrow>
                                        </msub>
                                    </mtd>
                                </mtr>
                                <mtr>
                                    <mtd>
                                        <mn>1</mn>
                                    </mtd>
                                </mtr>
                            </mtable>
                        </mfenced>
                        <mo>=</mo>
                        <mfenced open="[" close="]">
                            <mtable rowalign="center">
                                <mtr>
                                    <mtd>
                                        <msub>
                                            <mi>x</mi>
                                            <mi>viewport</mi>
                                        </msub>
                                    </mtd>
                                </mtr>
                                <mtr>
                                    <mtd>
                                        <msub>
                                            <mi>y</mi>
                                            <mi>viewport</mi>
                                        </msub>
                                    </mtd>
                                </mtr>
                                <mtr>
                                    <mtd>
                                        <mn>1</mn>
                                    </mtd>
                                </mtr>
                            </mtable>
                        </mfenced>
                    </mtd>
                </mtr>
                <mtr>
                    <mtd>
                        <mtext mathsize="big">CTM</mtext>
                        <mo>=</mo>
                        <msub>
                            <mtext mathsize="big">CTM</mtext>
                            <mtext>root</mtext>
                        </msub>
                        <mo lspace="2px" rspace="2px">⋅</mo>
                        <mtext>...</mtext>
                        <mo lspace="2px" rspace="2px">⋅</mo>
                        <msub>
                            <mtext mathsize="big">CTM</mtext>
                            <mtext>parent</mtext>
                        </msub>
                        <mo lspace="2px" rspace="2px">⋅</mo>
                        <msub>
                            <mtext mathsize="big">CTM</mtext>
                            <mtext>this</mtext>
                        </msub>
                    </mtd>
                </mtr>
            </mtable>
        </math>
    </div>

    <h3 id="VectorEffectsExamples" class="heading">8.13.3. ベクター効果の例<a class="self-link"
            href="#VectorEffectsExamples"></a></h3>

    <div class="example">
        <p>以下は <span class="prop-value">non-scaling-stroke</span> の<a class="property"
                href="coords.html#VectorEffectProperty">vector-effect</a>の例です。</p>

        <pre>&lt;?xml version="1.0"?>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="6cm" height="4cm" viewBox="0 0 600 400"
     viewport-fill="rgb(255,150,200)">

  &lt;desc>non-scaling strokeの例&lt;/desc>
  &lt;rect x="1" y="1" width="598" height="398" fill="none" stroke="black"/>

  &lt;g transform="scale(9,1)">
    &lt;line stroke="black" stroke-width="5" x1="10" y1="50" x2="10" y2="350"/>
    &lt;line vector-effect="non-scaling-stroke" stroke="black" stroke-width="5"
        x1="32" y1="50" x2="32" y2="350"/>
    &lt;line vector-effect="none" stroke="black" stroke-width="5"
        x1="55" y1="50" x2="55" y2="350"/>
  &lt;/g>

&lt;/svg></pre>
    </div>

    <div class="example">
        <p>以下は <span class="prop-value">none</span> の<a class="property"
                href="coords.html#VectorEffectProperty">vector-effect</a>（ベクター効果なし）の例です。</p>
        <table>
            <tr>
                <td>CTM変更前</td>
                <td>CTM変更後</td>
            </tr>
            <tr>
                <td><img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/vectorEffects/ve-initial.svg"
                        alt="noneベクター効果の画像" /></td>
                <td><img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/vectorEffects/ve-none.svg"
                        alt="noneベクター効果の画像" /></td>
            </tr>
        </table>

        <p>ソースコード</p>
        <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="-50,-50,500,500" height="500" width="500">

  &lt;rect x="-50" y="-50" width="500" height="500" stroke="orange" stroke-width="3" fill="none"/>

  &lt;!-- このtransform属性で入れ子ユーザー座標系が変換される -->
  &lt;g transform="matrix(2.1169438081370817,0.3576047954311102,-0.3576047954311102,1.4700998667618626,0,0)
                translate(-50,-50)">
    &lt;svg viewBox="-50,-50,500,500" height="500" width="500">
      &lt;!-- このsvgの基底ユーザー座標系上のグラフペーパー -->
      &lt;g stroke="green" stroke-width="1" fill="none">
        &lt;circle cx="0" cy="0" r="10"/>
        &lt;circle cx="150" cy="150" r="7"/>
        &lt;path fill="green" stroke="none" d="M0,-3 L30,-3 25,-10 50,0 25,10 30,3 0,3z"/>

        &lt;line x1="-100" y1="-100" x2="600" y2="-100" stroke-dasharray="5,5"/>
        &lt;line x1="-100" y1="000" x2="600" y2="000"/>
        &lt;line x1="-100" y1="100" x2="600" y2="100" stroke-dasharray="5,5"/>
        &lt;line x1="-100" y1="200" x2="600" y2="200" stroke-dasharray="5,5"/>
        &lt;line x1="-100" y1="300" x2="600" y2="300" stroke-dasharray="5,5"/>
        &lt;line x1="-100" y1="400" x2="600" y2="400" stroke-dasharray="5,5"/>
        &lt;line x1="-100" y1="500" x2="600" y2="500" stroke-dasharray="5,5"/>

        &lt;line y1="-100" x1="-100" y2="600" x2="-100" stroke-dasharray="5,5"/>
        &lt;line y1="-100" x1="000" y2="600" x2="000"/>
        &lt;line y1="-100" x1="100" y2="600" x2="100" stroke-dasharray="5,5"/>
        &lt;line y1="-100" x1="200" y2="600" x2="200" stroke-dasharray="5,5"/>
        &lt;line y1="-100" x1="300" y2="600" x2="300" stroke-dasharray="5,5"/>
        &lt;line y1="-100" x1="400" y2="600" x2="400" stroke-dasharray="5,5"/>
        &lt;line y1="-100" x1="500" y2="600" x2="500" stroke-dasharray="5,5"/>
      &lt;/g>

      &lt;!-- ベクター効果を持つ図形 -->
      &lt;!-- 太い赤い右矢印と小さな矩形がこの図形の入れ子ユーザー座標系原点に配置される -->
      &lt;path id="ve" vector-effect="none"
            stroke="red" stroke-width="3" fill="none"
            transform="matrix(1,0,0,1,150,150)"
            d="M-50,-50 L50,-50 50,-100 150,0 50,100 50,50 -50,50 -50,-50z M5 0 L0 -5 -5 0 0 5z"/>
    &lt;/svg>
  &lt;/g>
&lt;/svg>
</pre>
    </div>

    <div class="example">
        <p>以下は <span class="prop-value">non-scaling-size</span> の例です。</p>
        <table>
            <tr>
                <td>CTM変更前</td>
                <td>CTM変更後</td>
            </tr>
            <tr>
                <td><img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/vectorEffects/ve-initial.svg"
                        alt="ベクター効果が現れる前の画像" /></td>
                <td><img class="bordered"
                        src="https://www.w3.org/TR/SVG2/images/painting/vectorEffects/ve-nonScalingSize.svg"
                        alt="non-scaling-sizeベクター効果の画像" /></td>
            </tr>
        </table>

        <pre>
&lt;path id="ve" vector-effect="non-scaling-size"
      stroke="red" stroke-width="3" fill="none"
      transform="matrix(1,0,0,1,150,150)"
      d="M-50,-50 L50,-50 50,-100 150,0 50,100 50,50 -50,50 -50,-50z M5 0 L0 -5 -5 0 0 5z"/></pre>
    </div>

    <div class="example">
        <p>以下は <span class="prop-value">non-rotation</span> の例です。</p>
        <table>
            <tr>
                <td>CTM変更前</td>
                <td>CTM変更後</td>
            </tr>
            <tr>
                <td><img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/vectorEffects/ve-initial.svg"
                        alt="ベクター効果が現れる前の画像" /></td>
                <td><img class="bordered"
                        src="https://www.w3.org/TR/SVG2/images/painting/vectorEffects/ve-nonRotation.svg"
                        alt="non-rotationベクター効果の画像" /></td>
            </tr>
        </table>

        <pre>
&lt;path id="ve" vector-effect="non-rotation"
      stroke="red" stroke-width="3" fill="none"
      transform="matrix(1,0,0,1,150,150)"
      d="M-50,-50 L50,-50 50,-100 150,0 50,100 50,50 -50,50 -50,-50z M5 0 L0 -5 -5 0 0 5z"/></pre>
    </div>

    <div class="example">
        <p>以下は <span class="prop-value">non-scaling-size</span> <span class="prop-value">non-rotation</span> の例です。</p>
        <table>
            <tr>
                <td>CTM変更前</td>
                <td>CTM変更後</td>
            </tr>
            <tr>
                <td><img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/vectorEffects/ve-initial.svg"
                        alt="ベクター効果が現れる前の画像" /></td>
                <td><img class="bordered"
                        src="https://www.w3.org/TR/SVG2/images/painting/vectorEffects/ve-nonScalingSize-nonRotation.svg"
                        alt="non-scaling-size non-rotationベクター効果の画像" /></td>
            </tr>
        </table>

        <pre>
&lt;path id="ve" vector-effect="non-scaling-size non-rotation"
      stroke="red" stroke-width="3" fill="none"
      transform="matrix(1,0,0,1,150,150)"
      d="M-50,-50 L50,-50 50,-100 150,0 50,100 50,50 -50,50 -50,-50z M5 0 L0 -5 -5 0 0 5z"/></pre>
    </div>

    <div class="example">
        <p>以下は <span class="prop-value">fixed-position</span> の例です。</p>
        <table>
            <tr>
                <td>CTM変更前</td>
                <td>CTM変更後</td>
            </tr>
            <tr>
                <td><img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/vectorEffects/ve-initial.svg"
                        alt="ベクター効果が現れる前の画像" /></td>
                <td><img class="bordered"
                        src="https://www.w3.org/TR/SVG2/images/painting/vectorEffects/ve-fixedPosition.svg"
                        alt="fixed-positionベクター効果の画像" /></td>
            </tr>
        </table>

        <pre>
&lt;path id="ve" vector-effect="fixed-position"
      stroke="red" stroke-width="3" fill="none"
      transform="matrix(1,0,0,1,150,150)"
      d="M-50,-50 L50,-50 50,-100 150,0 50,100 50,50 -50,50 -50,-50z M5 0 L0 -5 -5 0 0 5z"/></pre>
    </div>

    <div class="example">
        <p>以下は <span class="prop-value">non-scaling-size</span> <span class="prop-value">fixed-position</span> の例です。</p>
        <table>
            <tr>
                <td>CTM変更前</td>
                <td>CTM変更後</td>
            </tr>
            <tr>
                <td><img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/vectorEffects/ve-initial.svg"
                        alt="ベクター効果が現れる前の画像" /></td>
                <td><img class="bordered"
                        src="https://www.w3.org/TR/SVG2/images/painting/vectorEffects/ve-nonScalingSize-fixedPosition.svg"
                        alt="non-scaling-size fixed-positionベクター効果の画像" /></td>
            </tr>
        </table>

        <pre>
&lt;path id="ve" vector-effect="non-scaling-size fixed-position"
      stroke="red" stroke-width="3" fill="none"
      transform="matrix(1,0,0,1,150,150)"
      d="M-50,-50 L50,-50 50,-100 150,0 50,100 50,50 -50,50 -50,-50z M5 0 L0 -5 -5 0 0 5z"/></pre>
    </div>

    <div class="example">
        <p>以下は <span class="prop-value">non-rotation</span> <span class="prop-value">fixed-position</span> の例です。</p>
        <table>
            <tr>
                <td>CTM変更前</td>
                <td>CTM変更後</td>
            </tr>
            <tr>
                <td><img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/vectorEffects/ve-initial.svg"
                        alt="ベクター効果が現れる前の画像" /></td>
                <td><img class="bordered"
                        src="https://www.w3.org/TR/SVG2/images/painting/vectorEffects/ve-nonRotation-fixedPosition.svg"
                        alt="non-rotation fixed-positionベクター効果の画像" /></td>
            </tr>
        </table>

        <pre>
&lt;path id="ve" vector-effect="non-rotation fixed-position"
      stroke="red" stroke-width="3" fill="none"
      transform="matrix(1,0,0,1,150,150)"
      d="M-50,-50 L50,-50 50,-100 150,0 50,100 50,50 -50,50 -50,-50z M5 0 L0 -5 -5 0 0 5z"/></pre>
    </div>

    <div class="example">
        <p>以下は <span class="prop-value">non-scaling-size</span> <span class="prop-value">non-rotation</span> <span
                class="prop-value">fixed-position</span> の例です。</p>
        <table>
            <tr>
                <td>CTM変更前</td>
                <td>CTM変更後</td>
            </tr>
            <tr>
                <td><img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/vectorEffects/ve-initial.svg"
                        alt="ベクター効果が現れる前の画像" /></td>
                <td><img class="bordered"
                        src="https://www.w3.org/TR/SVG2/images/painting/vectorEffects/ve-nonScalingSize-nonRotation-fixedPosition.svg"
                        alt="non-scaling-size non-rotation fixed-positionベクター効果の画像" /></td>
            </tr>
        </table>

        <pre>
&lt;path id="ve" vector-effect="non-scaling-size non-rotation fixed-position"
      stroke="red" stroke-width="3" fill="none"
      transform="matrix(1,0,0,1,150,150)"
      d="M-50,-50 L50,-50 50,-100 150,0 50,100 50,50 -50,50 -50,-50z M5 0 L0 -5 -5 0 0 5z"/></pre>
    </div>

    <div class="ready-for-wider-review">
        <h2 id="DOMInterfaces" class="heading">8.14. DOMインターフェイス<a class="self-link" href="#DOMInterfaces"></a></h2>

        <h3 id="InterfaceSVGTransform" class="heading">8.14.1. SVGTransformインターフェイス<a class="self-link"
                href="#InterfaceSVGTransform"></a></h3>

        <p><a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a>インターフェイスは、
            <a
                href="https://drafts.csswg.org/css-transforms-1/#typedef-transform-function">&lt;transform-function></a>値を表すために使用されます。これらは<a
                class="property" href="coords.html#TransformProperty">transform</a>プロパティや、そのプレゼンテーション属性<span
                class="attr-name">‘transform’</span>、
            <span class="attr-name">‘<a
                    href="pservers.html#LinearGradientElementGradientTransformAttribute"><span>gradientTransform</span></a>’</span>
            および
            <span class="attr-name">‘<a
                    href="pservers.html#PatternElementPatternTransformAttribute"><span>patternTransform</span></a>’</span>に現れます。
            <a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a>は、変換リストの単一コンポーネント（例えば<span
                class="prop-value">scale(…)</span>や<span class="prop-value">matrix(…)</span>値）を表します。
        </p>

        <p id="ReadOnlyTransform"><a class="idlinterface"
                href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトは<em>読み取り専用</em>に指定することができ、この場合オブジェクトを変更しようとすると、下記の通り例外が投げられます。
        </p>

        <p id="TransformAssociatedElement"><a class="idlinterface"
                href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトは特定の要素に<em>関連付け</em>ることができます。関連付けられた要素は、オブジェクトがその属性を<a
                href="types.html#TermReflect">反映</a>する場合、どの要素の<span
                class="attr-name">‘transform’</span>プレゼンテーション属性を更新するか決定します。特記のない限り、<a class="idlinterface"
                href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトはいかなる要素にも関連付けられていません。</p>

        <div class="ready-for-wider-review">
            <p id="TransformMode">すべての<a class="idlinterface"
                    href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトは2つのモードのいずれかで動作します：</p>

            <ol>
                <li><em>プレゼンテーション属性値の要素を反映</em>
                    （<a href="#__svg__SVGAnimatedTransformList__baseVal">baseVal</a>メンバーのメソッドを通して
                    <a class="idlinterface"
                        href="coords.html#InterfaceSVGAnimatedTransformList">SVGAnimatedTransformList</a>で公開される）
                </li>
                <li><em>切り離されている</em>（<a class="idlinterface"
                        href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトが
                    <a href="struct.html#__svg__SVGSVGElement__createSVGTransform">createSVGTransform</a>
                    や <a
                        href="struct.html#__svg__SVGSVGElement__createSVGTransformFromMatrix">createSVGTransformFromMatrix</a>で作成された場合）
                </li>
            </ol>
        </div>

        <p><a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトは内部に
            <a
                href="https://drafts.csswg.org/css-transforms-1/#typedef-transform-function">&lt;transform-function></a>値を保持し、これを<dfn
                id="TransformValue" data-dfn-type="dfn">値</dfn>と呼びます。
            また、<a class="idlinterface"
                href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-dommatrix">DOMMatrix</a>オブジェクトも保持し、これを<dfn
                id="TransformMatrixObject" data-dfn-type="dfn" data-export="">行列オブジェクト</dfn>と呼びます。これは<a
                href="#__svg__SVGTransform__matrix">matrix</a>IDL属性から返されるオブジェクトです。<a class="idlinterface"
                href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトの<a
                href="#TransformMatrixObject">行列オブジェクト</a>は常に<a href="#TransformValue">値</a>と同期されています。
        </p>

        <pre class="idl">[Exposed=Window]
interface <b>SVGTransform</b> {

  // Transform Types
  const unsigned short <a href="coords.html#__svg__SVGTransform__SVG_TRANSFORM_UNKNOWN">SVG_TRANSFORM_UNKNOWN</a> = 0;
  const unsigned short <a href="coords.html#__svg__SVGTransform__SVG_TRANSFORM_MATRIX">SVG_TRANSFORM_MATRIX</a> = 1;
  const unsigned short <a href="coords.html#__svg__SVGTransform__SVG_TRANSFORM_TRANSLATE">SVG_TRANSFORM_TRANSLATE</a> = 2;
  const unsigned short <a href="coords.html#__svg__SVGTransform__SVG_TRANSFORM_SCALE">SVG_TRANSFORM_SCALE</a> = 3;
  const unsigned short <a href="coords.html#__svg__SVGTransform__SVG_TRANSFORM_ROTATE">SVG_TRANSFORM_ROTATE</a> = 4;
  const unsigned short <a href="coords.html#__svg__SVGTransform__SVG_TRANSFORM_SKEWX">SVG_TRANSFORM_SKEWX</a> = 5;
  const unsigned short <a href="coords.html#__svg__SVGTransform__SVG_TRANSFORM_SKEWY">SVG_TRANSFORM_SKEWY</a> = 6;

  readonly attribute unsigned short <a href="coords.html#__svg__SVGTransform__type">type</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-dommatrix">DOMMatrix</a> <a href="coords.html#__svg__SVGTransform__matrix">matrix</a>;
  readonly attribute float <a href="coords.html#__svg__SVGTransform__angle">angle</a>;

  void <a href="coords.html#__svg__SVGTransform__setMatrix">setMatrix</a>(<a class="idlinterface" href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-dommatrixreadonly">DOMMatrixReadOnly</a> matrix);
  void <a href="coords.html#__svg__SVGTransform__setTranslate">setTranslate</a>(float tx, float ty);
  void <a href="coords.html#__svg__SVGTransform__setScale">setScale</a>(float sx, float sy);
  void <a href="coords.html#__svg__SVGTransform__setRotate">setRotate</a>(float angle, float cx, float cy);
  void <a href="coords.html#__svg__SVGTransform__setSkewX">setSkewX</a>(float angle);
  void <a href="coords.html#__svg__SVGTransform__setSkewY">setSkewY</a>(float angle);
};</pre>

        <p><a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a>で定義された数値変換タイプ定数は、
            <a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a>の<a
                href="#TransformValue">値</a>のタイプを表すために使われます。
            それぞれの意味は以下の通りです：
        </p>

        <table class="vert">
            <tr>
                <th>定数</th>
                <th>意味</th>
            </tr>
            <tr>
                <td><b id="__svg__SVGTransform__SVG_TRANSFORM_MATRIX">SVG_TRANSFORM_MATRIX</b></td>
                <td><span class="prop-value">matrix(…)</span>値。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGTransform__SVG_TRANSFORM_TRANSLATE">SVG_TRANSFORM_TRANSLATE</b></td>
                <td><span class="prop-value">translate(…)</span>値。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGTransform__SVG_TRANSFORM_SCALE">SVG_TRANSFORM_SCALE</b></td>
                <td><span class="prop-value">scale(…)</span>値。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGTransform__SVG_TRANSFORM_ROTATE">SVG_TRANSFORM_ROTATE</b></td>
                <td><span class="prop-value">rotate(…)</span>値。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGTransform__SVG_TRANSFORM_SKEWX">SVG_TRANSFORM_SKEWX</b></td>
                <td><span class="prop-value">skewX(…)</span>値。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGTransform__SVG_TRANSFORM_SKEWY">SVG_TRANSFORM_SKEWY</b></td>
                <td><span class="prop-value">skewY(…)</span>値。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGTransform__SVG_TRANSFORM_UNKNOWN">SVG_TRANSFORM_UNKNOWN</b></td>
                <td>その他のタイプの値。</td>
            </tr>
        </table>

        <p class="note">数値変換タイプ定数の使用はアンチパターンです。<a class="idlinterface"
                href="coords.html#InterfaceSVGTransform">SVGTransform</a>がサポートする変換タイプについて新しい定数値は追加されません。他の種類の変換がサポート・使用される場合、<a
                class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a>は<a
                href="#__svg__SVGTransform__SVG_TRANSFORM_UNKNOWN">SVG_TRANSFORM_UNKNOWN</a>タイプを使用します。他のプロパティの挙動については下記を参照してください。
        </p>

        <p><b id="__svg__SVGTransform__type">type</b> IDL属性は、
            <a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a>の<a
                href="#TransformValue">値</a>の変換項目タイプを表します。
            <a href="#__svg__SVGTransform__type">type</a>取得時は次の手順を実行します：
        </p>

        <ol class="algorithm">
            <li><a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a>の<a
                    href="#TransformValue">値</a>が
                <span class="prop-value">matrix(…)</span>、
                <span class="prop-value">translate(…)</span>、
                <span class="prop-value">scale(…)</span>、
                <span class="prop-value">rotate(…)</span>、
                <span class="prop-value">skewX(…)</span>または
                <span class="prop-value">skewY(…)</span>関数の場合、上記タイプ表の対応する定数値を返す。
            </li>
            <li>それ以外の場合は<a href="#__svg__SVGTransform__SVG_TRANSFORM_UNKNOWN">SVG_TRANSFORM_UNKNOWN</a>を返す。
                <p class="note">例えば<span class="prop-value">scaleX(…)</span>や<span
                        class="prop-value">translate3d(…)</span>変換の場合、<a
                        href="#__svg__SVGTransform__SVG_TRANSFORM_UNKNOWN">SVG_TRANSFORM_UNKNOWN</a>が返されます。</p>
            </li>
        </ol>

        <p><b id="__svg__SVGTransform__matrix">matrix</b> IDL属性は、
            変換を4x4同次行列として表し、取得時は<a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a>の<a
                href="#TransformMatrixObject">行列オブジェクト</a>を返します。
            <a href="#TransformMatrixObject">行列オブジェクト</a>が初めて作成されるとき、その値は<a class="idlinterface"
                href="coords.html#InterfaceSVGTransform">SVGTransform</a>の変換関数<a
                href="#TransformValue">値</a>に一致するように設定され、<a href="#MatrixMode">SVGTransformを反映する</a>モードになります。
        </p>

        <p class="note"><a href="https://drafts.csswg.org/css-transforms-1/#mathematical-description">CSS
                Transforms</a>仕様で、各変換関数タイプが特定の行列値にどのように対応するか説明されています。</p>

        <p><b id="__svg__SVGTransform__angle">angle</b> IDL属性は、
            <span class="prop-value">rotate(…)</span>、
            <span class="prop-value">skewX(…)</span>、
            <span class="prop-value">skewY(…)</span>変換関数の角度パラメータを表します。
            取得時は以下の手順を実行します：
        </p>

        <ol class="algorithm">
            <li><a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトの<a
                    href="#TransformValue">値</a>が
                <span class="prop-value">rotate(…)</span>、
                <span class="prop-value">skewX(…)</span>、
                <span class="prop-value">skewY(…)</span>関数の場合、その角度引数（度）を返す。
            </li>
            <li>それ以外の場合は0を返す。</li>
        </ol>

        <p><b id="__svg__SVGTransform__setMatrix">setMatrix</b>メソッドは、
            <a class="idlinterface"
                href="coords.html#InterfaceSVGTransform">SVGTransform</a>を指定された行列値に設定するために使います。setMatrix(<var>matrix</var>)が呼ばれた時は、以下の手順を実行します：
        </p>

        <ol class="algorithm">
            <li><a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトが<a
                    href="#ReadOnlyTransform">読み取り専用</a>の場合は、
                <a href="https://heycam.github.io/webidl/#dfn-throw">throw</a>で<a
                    href="https://heycam.github.io/webidl/#nomodificationallowederror">NoModificationAllowedError</a>を投げる。
            </li>
            <li><var>matrix</var>が
                <a href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-dommatrixreadonly-is2d">is2d</a>
                メソッドでtrueを返す場合、<a class="idlinterface"
                    href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトの<a
                    href="#TransformValue">値</a>を<var>matrix</var>と同じ行列を表す<span
                    class="prop-value">matrix(…)</span>値に設定する。
            </li>
            <li>それ以外の場合は、<a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトの<a
                    href="#TransformValue">値</a>を<var>matrix</var>と同じ行列を表す<span
                    class="prop-value">matrix3d(…)</span>値に設定する。</li>
            <li><var>matrix</var>の行列コンポーネント値を<a class="idlinterface"
                    href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトの<a
                    href="#TransformMatrixObject">行列オブジェクト</a>にコピーする。</li>
            <li><a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトが
                <a href="#TransformMode">プレゼンテーション属性値の要素を反映</a>している場合は、反映されている属性を<a
                    href="types.html#TermReserialize">再シリアライズ</a>する。
            </li>
        </ol>

        <p>
            <b id="__svg__SVGTransform__setTranslate">setTranslate</b>、
            <b id="__svg__SVGTransform__setScale">setScale</b>、
            <b id="__svg__SVGTransform__setRotate">setRotate</b>、
            <b id="__svg__SVGTransform__setSkewX">setSkewX</b>、
            <b id="__svg__SVGTransform__setSkewY">setSkewY</b>メソッドは、
            <a class="idlinterface"
                href="coords.html#InterfaceSVGTransform">SVGTransform</a>を新しい変換関数値に設定するために使います。これらのメソッドが呼ばれた場合、以下の手順を実行します：
        </p>

        <ol class="algorithm">
            <li><a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトが<a
                    href="#ReadOnlyTransform">読み取り専用</a>の場合は、
                <a href="https://heycam.github.io/webidl/#dfn-throw">throw</a>で<a
                    href="https://heycam.github.io/webidl/#nomodificationallowederror">NoModificationAllowedError</a>を投げる。
            </li>
            <li>呼ばれたメソッドに応じて、<a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトの<a
                    href="#TransformValue">値</a>を新しい変換関数値に設定する：
                <dl class="switch">
                    <dt>setTranslate(<var>tx</var>, <var>ty</var>)</dt>
                    <dd>新しい変換関数値は<span class="prop-value">translate(<var>tx</var>, <var>ty</var>)</span></dd>
                    <dt>setScale(<var>sx</var>, <var>sy</var>)</dt>
                    <dd>新しい変換関数値は<span class="prop-value">scale(<var>sx</var>, <var>sy</var>)</span></dd>
                    <dt>setRotate(<var>angle</var>, <var>cx</var>, <var>cy</var>)</dt>
                    <dd>新しい変換関数値は<span class="prop-value">rotate(<var>angle</var>, <var>cx</var>, <var>cy</var>)</span>
                    </dd>
                    <dt>setSkewX(<var>angle</var>)</dt>
                    <dd>新しい変換関数値は<span class="prop-value">skewX(<var>angle</var>)</span></dd>
                    <dt>setSkewY(<var>angle</var>)</dt>
                    <dd>新しい変換関数値は<span class="prop-value">skewY(<var>angle</var>)</span></dd>
                </dl>
            </li>
            <li><a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトの<a
                    href="#TransformMatrixObject">行列オブジェクト</a>のコンポーネントを、新しい変換関数<a href="#TransformValue">値</a>に合わせて設定する。
            </li>
            <li><a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトが
                <a href="#TransformMode">プレゼンテーション属性値の要素を反映</a>している場合は、反映されている属性を<a
                    href="types.html#TermReserialize">再シリアライズ</a>する。
            </li>
        </ol>

        <p>本仕様では、<a class="idlinterface"
                href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-dommatrix">DOMMatrix</a>オブジェクトの挙動に、
            <a href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/">Geometry
                Interfaces</a>仕様で記載された内容に加えて追加要件を課しています。これにより、変換値を受け取るプレゼンテーション属性を反映するために利用できます。
        </p>

        <p id="MatrixMode">すべての<a class="idlinterface"
                href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-dommatrix">DOMMatrix</a>オブジェクトは2つのモードのいずれかで動作します：
        <ol>
            <li><em><a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a>を反映</em>
                （<a href="#__svg__SVGTransform__matrix">matrix</a>IDL属性で公開される）、</li>
            <li><em>切り離されている</em>（コンストラクタや<a
                    href="struct.html#__svg__SVGSVGElement__createSVGMatrix">createSVGMatrix</a>で作成された場合）</li>
        </ol>
        </p>

        <p id="ReadOnlyMatrix"><a class="idlinterface"
                href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-dommatrix">DOMMatrix</a>は<em>読み取り専用</em>に指定することができ、この場合オブジェクトを変更しようとすると例外が投げられます。読み取り専用の<a
                class="idlinterface"
                href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-dommatrix">DOMMatrix</a>のIDL属性に代入したり、可変変換メソッドを呼び出すと、内部値の更新の代わりに<a
                href="https://heycam.github.io/webidl/#nomodificationallowederror">NoModificationAllowedError</a>例外が<a
                href="https://heycam.github.io/webidl/#dfn-throw">throw</a>されます。</p>

        <p class="note">これは読み書き可能な<a class="idlinterface"
                href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-dommatrix">DOMMatrix</a>インターフェイスにのみ適用されます。<a
                class="idlinterface"
                href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-dommatrixreadonly">DOMMatrixReadOnly</a>インターフェイス（<a
                class="property" href="coords.html#TransformProperty">transform</a>を反映する用途では使われません）は、元々変更しようとすると例外を投げます。
        </p>

        <p>書き込み可能な<a class="idlinterface"
                href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-dommatrix">DOMMatrix</a>のIDL属性に代入したり、可変変換メソッドを呼び出した場合、内部行列値の更新後に以下の手順が実行されます：
        </p>

        <ol class="algorithm">
            <li><a class="idlinterface"
                    href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-dommatrix">DOMMatrix</a>が<a
                    href="#MatrixMode">SVGTransformを反映</a>している場合：
                <ol>
                    <li><a class="idlinterface"
                            href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-dommatrix">DOMMatrix</a>が
                        <a href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-dommatrixreadonly-is2d">is2d</a>
                        メソッドでtrueを返す場合、<a class="idlinterface"
                            href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトの<a
                            href="#TransformValue">値</a>を<a class="idlinterface"
                            href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-dommatrix">DOMMatrix</a>と同じ行列を表す<span
                            class="prop-value">matrix(…)</span>値に設定する。
                    </li>
                    <li>それ以外の場合は、<a class="idlinterface"
                            href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトの<a
                            href="#TransformValue">値</a>を<a class="idlinterface"
                            href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-dommatrix">DOMMatrix</a>と同じ行列を表す<span
                            class="prop-value">matrix3d(…)</span>値に設定する。</li>
                    <li><a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトが
                        <a href="#TransformMode">プレゼンテーション属性値の要素を反映</a>している場合は、反映されている属性を<a
                            href="types.html#TermReserialize">再シリアライズ</a>する。
                    </li>
                </ol>
            </li>
        </ol>

        <h3 id="InterfaceSVGTransformList" class="heading">8.14.2. SVGTransformListインターフェイス<a class="self-link"
                href="#InterfaceSVGTransformList"></a></h3>

        <p><a class="idlinterface" href="coords.html#InterfaceSVGTransformList">SVGTransformList</a>インターフェイスは、<a
                href="types.html#TermListInterface">リストインターフェイス</a>であり、その要素は<a class="idlinterface"
                href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトです。<a class="idlinterface"
                href="coords.html#InterfaceSVGTransformList">SVGTransformList</a>は<a class="property"
                href="coords.html#TransformProperty">transform</a>プロパティが取り得る値、すなわち<a
                href="https://drafts.csswg.org/css-transforms-1/#typedef-transform-list">&lt;transform-list></a>またはキーワード<span
                class="prop-value">none</span>を表します。
        </p>

        <pre class="idl">[Exposed=Window]
interface <b>SVGTransformList</b> {

  readonly attribute unsigned long <a href="types.html#__svg__SVGNameList__length">length</a>;
  readonly attribute unsigned long <a href="types.html#__svg__SVGNameList__numberOfItems">numberOfItems</a>;

  void <a href="types.html#__svg__SVGNameList__clear">clear</a>();
  <a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a> <a href="types.html#__svg__SVGNameList__initialize">initialize</a>(<a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a> newItem);
  getter <a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a> <a href="types.html#__svg__SVGNameList__getItem">getItem</a>(unsigned long index);
  <a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a> <a href="types.html#__svg__SVGNameList__insertItemBefore">insertItemBefore</a>(<a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a> newItem, unsigned long index);
  <a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a> <a href="types.html#__svg__SVGNameList__replaceItem">replaceItem</a>(<a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a> newItem, unsigned long index);
  <a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a> <a href="types.html#__svg__SVGNameList__removeItem">removeItem</a>(unsigned long index);
  <a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a> <a href="types.html#__svg__SVGNameList__appendItem">appendItem</a>(<a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a> newItem);
  <a href="types.html#__svg__SVGNameList__setter">setter</a> void (unsigned long index, <a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a> newItem);

  <span class="comment">// 他のリストインターフェイスにはない追加メソッド。</span>
  <a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a> <a href="coords.html#__svg__SVGTransformList__createSVGTransformFromMatrix">createSVGTransformFromMatrix</a>(<a class="idlinterface" href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-dommatrixreadonly">DOMMatrixReadOnly</a> matrix);
  <a class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a>? <a href="coords.html#__svg__SVGTransformList__consolidate">consolidate</a>();
};</pre>

        <p><b
                id="__svg__SVGTransformList__createSVGTransformFromMatrix">createSVGTransformFromMatrix</b>メソッドは、行列オブジェクトから新しい<a
                class="idlinterface" href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトを作成するために使います。
            createSVGTransformFromMatrix(<var>matrix</var>)メソッドが呼ばれた際は、以下の手順を実行します：</p>

        <ol class="algorithm">
            <li><var>transform</var>を新たに作成された<a class="idlinterface"
                    href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクト（<a
                    href="#TransformMode">切り離された</a>状態）とする。</li>
            <li><var>transform</var>に対して<a
                    href="#__svg__SVGTransform__setMatrix">setMatrix</a>メソッドが呼ばれた場合に実行される手順を、<var>matrix</var>を引数として実行する。
            </li>
            <li><var>transform</var>を返す。</li>
        </ol>

        <p><b
                id="__svg__SVGTransformList__consolidate">consolidate</b>メソッドは、変換リストを単一の変換関数を使った同等の変換へ変換するために使います。consolidate()メソッドが呼ばれた際は、以下の手順を実行します：
        </p>

        <ol class="algorithm">
            <li><a class="idlinterface" href="coords.html#InterfaceSVGTransformList">SVGTransformList</a>オブジェクトが<a
                    href="types.html#ReadOnlyList">読み取り専用</a>の場合は、<a
                    href="https://heycam.github.io/webidl/#dfn-throw">throw</a>で<a
                    href="https://heycam.github.io/webidl/#nomodificationallowederror">NoModificationAllowedError</a>を投げる。
            </li>
            <li>リストが空なら、nullを返す。</li>
            <li>リスト内のすべての要素を<a href="types.html#TermDetach">切り離し</a>て削除する。</li>
            <li><var>transform</var>を新たに作成された<a class="idlinterface"
                    href="coords.html#InterfaceSVGTransform">SVGTransform</a>オブジェクトとする。</li>
            <li><var>matrix</var>を、単位行列から始めて、リスト内の各<a class="idlinterface"
                    href="coords.html#InterfaceSVGTransform">SVGTransform</a>の<a
                    href="#TransformMatrixObject">行列オブジェクト</a>の値を順に後置乗算した結果の行列値とする。</li>
            <li><var>transform</var>の<a href="#TransformMatrixObject">行列オブジェクト</a>のコンポーネント値を<var>matrix</var>の値に設定する。
            </li>
            <li><var>transform</var>の<a href="#TransformMatrixObject">行列オブジェクト</a>が<a
                    href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-dommatrixreadonly-is2d">is2d</a>メソッドでtrueを返す場合、<var>transform</var>の<a
                    href="#TransformValue">値</a>を<a href="#TransformMatrixObject">行列オブジェクト</a>と同じ行列を表す<span
                    class="prop-value">matrix(…)</span>値に設定する。</li>
            <li>それ以外の場合は<var>transform</var>の<a href="#TransformValue">値</a>を<a
                    href="#TransformMatrixObject">行列オブジェクト</a>と同じ行列を表す<span class="prop-value">matrix3d(…)</span>値に設定する。
            </li>
            <li><var>transform</var>をこの<a class="idlinterface"
                    href="coords.html#InterfaceSVGTransformList">SVGTransformList</a>に<a
                    href="types.html#TermAttach">アタッチ</a>する。</li>
            <li>このリストに<var>transform</var>を追加する。</li>
            <li>リストが<a href="types.html#TermReflect">プレゼンテーション属性を反映</a>している場合は、反映されている属性を<a
                    href="types.html#TermReserialize">再シリアライズ</a>する。</li>
            <li><var>transform</var>を返す。</li>
        </ol>

        <p>その他の<a class="idlinterface" href="types.html#InterfaceSVGLengthList">SVGLengthList</a>インターフェイスメンバーの挙動は、<a
                href="types.html#ListInterfaces">リストインターフェイス</a>で定義されています。</p>


        <h3 id="InterfaceSVGAnimatedTransformList" class="heading">8.14.3. SVGAnimatedTransformListインターフェイス<a
                class="self-link" href="#InterfaceSVGAnimatedTransformList"></a></h3>

        <p><a class="idlinterface"
                href="coords.html#InterfaceSVGAnimatedTransformList">SVGAnimatedTransformList</a>オブジェクトは、<a
                href="types.html#TermReflect">反映</a>された<a class="property"
                href="coords.html#TransformProperty">transform</a>プロパティおよびその対応するプレゼンテーション属性（要素により<span
                class="attr-name">‘transform’</span>、<span class="attr-name">‘<a
                    href="pservers.html#LinearGradientElementGradientTransformAttribute"><span>gradientTransform</span></a>’</span>、<span
                class="attr-name">‘<a
                    href="pservers.html#PatternElementPatternTransformAttribute"><span>patternTransform</span></a>’</span>）を反映するために使われます。
        </p>

        <pre class="idl">[Exposed=Window]
interface <b>SVGAnimatedTransformList</b> {
  [SameObject] readonly attribute <a class="idlinterface" href="coords.html#InterfaceSVGTransformList">SVGTransformList</a> <a href="coords.html#__svg__SVGAnimatedTransformList__baseVal">baseVal</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="coords.html#InterfaceSVGTransformList">SVGTransformList</a> <a href="coords.html#__svg__SVGAnimatedTransformList__animVal">animVal</a>;
};</pre>

        <p class="ready-for-wider-review"><b id="__svg__SVGAnimatedTransformList__baseVal">baseVal</b>および<b
                id="__svg__SVGAnimatedTransformList__animVal">animVal</b>IDL属性は、反映されたプレゼンテーション属性の値を表します。<a
                href="#__svg__SVGAnimatedTransformList__baseVal">baseVal</a>または<a
                href="#__svg__SVGAnimatedTransformList__animVal">animVal</a>取得時は、当該プレゼンテーション属性を反映する<a
                class="idlinterface" href="coords.html#InterfaceSVGTransformList">SVGTransformList</a>オブジェクトが返されます。
        </p>

        <h3 id="InterfaceSVGPreserveAspectRatio" class="heading">8.14.4. SVGPreserveAspectRatioインターフェイス<a
                class="self-link" href="#InterfaceSVGPreserveAspectRatio"></a></h3>

        <p><a class="idlinterface"
                href="coords.html#InterfaceSVGPreserveAspectRatio">SVGPreserveAspectRatio</a>インターフェイスは、<span
                class="attr-name">‘<a
                    href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>属性の値を表すために使います。
        </p>

        <p id="ReadOnlyPreserveAspectRatio"><a class="idlinterface"
                href="coords.html#InterfaceSVGPreserveAspectRatio">SVGPreserveAspectRatio</a>オブジェクトは<em>読み取り専用</em>に指定することができ、この場合オブジェクトを変更しようとすると、下記の通り例外が投げられます。
        </p>

        <p id="PreserveAspectRatioMode" class="ready-for-wider-review">すべての<a class="idlinterface"
                href="coords.html#InterfaceSVGPreserveAspectRatio">SVGPreserveAspectRatio</a>オブジェクトは、<span
                class="attr-name">‘<a
                    href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>属性の<em>基準値を反映</em>します（<a
                href="#__svg__SVGAnimatedPreserveAspectRatio__baseVal">baseVal</a>または<a
                href="#__svg__SVGAnimatedPreserveAspectRatio__animVal">animVal</a>メンバーのメソッドから公開される<a
                class="idlinterface"
                href="coords.html#InterfaceSVGAnimatedPreserveAspectRatio">SVGAnimatedPreserveAspectRatio</a>経由）。
        </p>

        <pre class="idl">[Exposed=Window]
interface <b>SVGPreserveAspectRatio</b> {

  // アラインメントタイプ
  const unsigned short <a href="coords.html#__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_UNKNOWN">SVG_PRESERVEASPECTRATIO_UNKNOWN</a> = 0;
  const unsigned short <a href="coords.html#__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_NONE">SVG_PRESERVEASPECTRATIO_NONE</a> = 1;
  const unsigned short <a href="coords.html#__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_XMINYMIN">SVG_PRESERVEASPECTRATIO_XMINYMIN</a> = 2;
  const unsigned short <a href="coords.html#__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_XMIDYMIN">SVG_PRESERVEASPECTRATIO_XMIDYMIN</a> = 3;
  const unsigned short <a href="coords.html#__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_XMAXYMIN">SVG_PRESERVEASPECTRATIO_XMAXYMIN</a> = 4;
  const unsigned short <a href="coords.html#__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_XMINYMID">SVG_PRESERVEASPECTRATIO_XMINYMID</a> = 5;
  const unsigned short <a href="coords.html#__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_XMIDYMID">SVG_PRESERVEASPECTRATIO_XMIDYMID</a> = 6;
  const unsigned short <a href="coords.html#__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_XMAXYMID">SVG_PRESERVEASPECTRATIO_XMAXYMID</a> = 7;
  const unsigned short <a href="coords.html#__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_XMINYMAX">SVG_PRESERVEASPECTRATIO_XMINYMAX</a> = 8;
  const unsigned short <a href="coords.html#__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_XMIDYMAX">SVG_PRESERVEASPECTRATIO_XMIDYMAX</a> = 9;
  const unsigned short <a href="coords.html#__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_XMAXYMAX">SVG_PRESERVEASPECTRATIO_XMAXYMAX</a> = 10;

  // ミート・オア・スライスタイプ
  const unsigned short <a href="coords.html#__svg__SVGPreserveAspectRatio__SVG_MEETORSLICE_UNKNOWN">SVG_MEETORSLICE_UNKNOWN</a> = 0;
  const unsigned short <a href="coords.html#__svg__SVGPreserveAspectRatio__SVG_MEETORSLICE_MEET">SVG_MEETORSLICE_MEET</a> = 1;
  const unsigned short <a href="coords.html#__svg__SVGPreserveAspectRatio__SVG_MEETORSLICE_SLICE">SVG_MEETORSLICE_SLICE</a> = 2;

  attribute unsigned short <a href="coords.html#__svg__SVGPreserveAspectRatio__align">align</a>;
  attribute unsigned short <a href="coords.html#__svg__SVGPreserveAspectRatio__meetOrSlice">meetOrSlice</a>;
};</pre>

        <p><a class="idlinterface"
                href="coords.html#InterfaceSVGPreserveAspectRatio">SVGPreserveAspectRatio</a>で定義された数値アラインメントタイプ定数は、<span
                class="attr-name">‘<a
                    href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>が取り得るアラインメントキーワード値を表すために使われます。それぞれの意味は以下の通りです：
        </p>

        <table class="vert">
            <tr>
                <th>定数</th>
                <th>意味</th>
            </tr>
            <tr>
                <td><b id="__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_NONE">SVG_PRESERVEASPECTRATIO_NONE</b>
                </td>
                <td><span class="attr-value">none</span>キーワード。</td>
            </tr>
            <tr>
                <td><b
                        id="__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_XMINYMIN">SVG_PRESERVEASPECTRATIO_XMINYMIN</b>
                </td>
                <td><span class="attr-value">xMinYMin</span>キーワード。</td>
            </tr>
            <tr>
                <td><b
                        id="__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_XMIDYMIN">SVG_PRESERVEASPECTRATIO_XMIDYMIN</b>
                </td>
                <td><span class="attr-value">xMidYMin</span>キーワード。</td>
            </tr>
            <tr>
                <td><b
                        id="__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_XMAXYMIN">SVG_PRESERVEASPECTRATIO_XMAXYMIN</b>
                </td>
                <td><span class="attr-value">xMaxYMin</span>キーワード。</td>
            </tr>
            <tr>
                <td><b
                        id="__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_XMINYMID">SVG_PRESERVEASPECTRATIO_XMINYMID</b>
                </td>
                <td><span class="attr-value">xMinYMid</span>キーワード。</td>
            </tr>
            <tr>
                <td><b
                        id="__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_XMIDYMID">SVG_PRESERVEASPECTRATIO_XMIDYMID</b>
                </td>
                <td><span class="attr-value">xMidYMid</span>キーワード。</td>
            </tr>
            <tr>
                <td><b
                        id="__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_XMAXYMID">SVG_PRESERVEASPECTRATIO_XMAXYMID</b>
                </td>
                <td><span class="attr-value">xMaxYMid</span>キーワード。</td>
            </tr>
            <tr>
                <td><b
                        id="__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_XMINYMAX">SVG_PRESERVEASPECTRATIO_XMINYMAX</b>
                </td>
                <td><span class="attr-value">xMinYMax</span>キーワード。</td>
            </tr>
            <tr>
                <td><b
                        id="__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_XMIDYMAX">SVG_PRESERVEASPECTRATIO_XMIDYMAX</b>
                </td>
                <td><span class="attr-value">xMidYMax</span>キーワード。</td>
            </tr>
            <tr>
                <td><b
                        id="__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_XMAXYMAX">SVG_PRESERVEASPECTRATIO_XMAXYMAX</b>
                </td>
                <td><span class="attr-value">xMaxYMax</span>キーワード。</td>
            </tr>
            <tr>
                <td><b
                        id="__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_UNKNOWN">SVG_PRESERVEASPECTRATIO_UNKNOWN</b>
                </td>
                <td>その他のタイプの値。</td>
            </tr>
        </table>

        <p>同様に、<a class="idlinterface"
                href="coords.html#InterfaceSVGPreserveAspectRatio">SVGPreserveAspectRatio</a>で定義された数値ミート・オア・スライスタイプ定数は、<span
                class="attr-name">‘<a
                    href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>が取り得るmeet-or-sliceキーワード値を表すために使われます。それぞれの意味は以下の通りです：
        </p>

        <table class="vert">
            <tr>
                <th>定数</th>
                <th>意味</th>
            </tr>
            <tr>
                <td><b id="__svg__SVGPreserveAspectRatio__SVG_MEETORSLICE_MEET">SVG_MEETORSLICE_MEET</b></td>
                <td><span class="attr-value">meet</span>キーワード。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGPreserveAspectRatio__SVG_MEETORSLICE_SLICE">SVG_MEETORSLICE_SLICE</b></td>
                <td><span class="attr-value">slice</span>キーワード。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGPreserveAspectRatio__SVG_MEETORSLICE_UNKNOWN">SVG_MEETORSLICE_UNKNOWN</b></td>
                <td>その他のタイプの値。</td>
            </tr>
        </table>

        <p><b id="__svg__SVGPreserveAspectRatio__align">align</b>IDL属性は、<span class="attr-name">‘<a
                    href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>値のアラインメントキーワード部分を表します。取得時は以下の手順を実行します：
        </p>

        <div class="ready-for-wider-review">
            <ol class="algorithm">
                <li><var>value</var>が<span class="attr-name">‘<a
                            href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>属性の<em>基準値を反映</em>するようにする。<var>value</var>は属性の現在の非アニメーション値（属性が存在しないか無効な場合は<a
                        href="types.html#TermInitialValue">初期値</a>を使用）とする。</li>
                <li><var>value</var>内のアラインメントキーワードに対応する、上記アラインメント定数表で指定された定数値を返す。</li>
            </ol>
        </div>

        <p><a href="#__svg__SVGPreserveAspectRatio__align">align</a>を設定するときは、以下の手順を実行します：</p>

        <ol class="algorithm">
            <li><a class="idlinterface" href="coords.html#InterfaceSVGPreserveAspectRatio">SVGPreserveAspectRatio</a>が<a
                    href="#ReadOnlyPreserveAspectRatio">読み取り専用</a>の場合は、<a
                    href="https://heycam.github.io/webidl/#dfn-throw">throw</a>で<a
                    href="https://heycam.github.io/webidl/#nomodificationallowederror">NoModificationAllowedError</a>を投げる。
            </li>
            <li><var>value</var>が<a
                    href="#__svg__SVGPreserveAspectRatio__SVG_PRESERVEASPECTRATIO_UNKNOWN">SVG_PRESERVEASPECTRATIO_UNKNOWN</a>であるか、上記アラインメントキーワード表に対応する項目がない場合はreturnする。
            </li>
            <li><var>string</var>を、<var>value</var>に対応する上記アラインメントキーワード表のキーワードとする。</li>
            <li><var>string</var>にU+0020スペース文字を1つ追加する。</li>
            <li><var>meet or slice</var>を、この<a class="idlinterface"
                    href="coords.html#InterfaceSVGPreserveAspectRatio">SVGPreserveAspectRatio</a>の<a
                    href="#__svg__SVGPreserveAspectRatio__meetOrSlice">meetOrSlice</a>メンバーから返される値とする。</li>
            <li><var>string</var>に、<var>meet or slice</var>に対応する上記meet-or-sliceキーワード表のキーワードを追加する。</li>
            <li>反映された<span class="attr-name">‘<a
                        href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>属性を<var>string</var>に設定する。
            </li>
        </ol>

        <p><b id="__svg__SVGPreserveAspectRatio__meetOrSlice">meetOrSlice</b>IDL属性は、<span class="attr-name">‘<a
                    href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>値のmeet-or-sliceキーワード部分を表します。取得時は以下の手順を実行します：
        </p>

        <div class="ready-for-wider-review">
            <ol class="algorithm">
                <li><var>value</var>を、<span class="attr-name">‘<a
                            href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>値で、その<em>基準値を反映</em>するようにする。<var>value</var>は属性の現在の非アニメーション値。
                </li>
                <li>meet-or-slice値が<var>value</var>に存在しない場合、<a
                        href="#__svg__SVGPreserveAspectRatio__SVG_MEETORSLICE_MEET">SVG_MEETORSLICE_MEET</a>を返す。</li>
                <li>それ以外は、meet-or-slice値が存在する場合。<var>value</var>内のmeet-or-sliceキーワードに対応する、上記meet-or-slice定数表で指定された定数値を返す。
                </li>
            </ol>
        </div>

        <p><a href="#__svg__SVGPreserveAspectRatio__meetOrSlice">meetOrSlice</a>を設定するときは、以下の手順を実行します：</p>

        <ol class="algorithm">
            <li><a class="idlinterface" href="coords.html#InterfaceSVGPreserveAspectRatio">SVGPreserveAspectRatio</a>が<a
                    href="#ReadOnlyPreserveAspectRatio">読み取り専用</a>の場合は、<a
                    href="https://heycam.github.io/webidl/#dfn-throw">throw</a>で<a
                    href="https://heycam.github.io/webidl/#nomodificationallowederror">NoModificationAllowedError</a>を投げる。
            </li>
            <li><var>value</var>が<a
                    href="#__svg__SVGPreserveAspectRatio__SVG_MEETORSLICE_UNKNOWN">SVG_MEETORSLICE_UNKNOWN</a>であるか、上記meet-or-sliceキーワード表に対応する項目がない場合はreturnする。
            </li>
            <li><var>align</var>を、この<a class="idlinterface"
                    href="coords.html#InterfaceSVGPreserveAspectRatio">SVGPreserveAspectRatio</a>の<a
                    href="#__svg__SVGPreserveAspectRatio__align">align</a>メンバーから返される値とする。</li>
            <li><var>string</var>を、<var>align</var>に対応する上記アラインメントキーワード表のキーワードとする。</li>
            <li><var>string</var>にU+0020スペース文字を1つ追加する。</li>
            <li><var>string</var>に、<var>value</var>に対応する上記meet-or-sliceキーワード表のキーワードを追加する。</li>
            <li>反映された<span class="attr-name">‘<a
                        href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>属性を<var>string</var>に設定する。
            </li>
        </ol>


        <h3 id="InterfaceSVGAnimatedPreserveAspectRatio" class="heading">8.14.5. SVGAnimatedPreserveAspectRatioインターフェイス
            <a class="self-link" href="#InterfaceSVGAnimatedPreserveAspectRatio"></a>
        </h3>

        <p><a class="idlinterface"
                href="coords.html#InterfaceSVGAnimatedPreserveAspectRatio">SVGAnimatedPreserveAspectRatio</a>オブジェクトは、<a
                href="types.html#TermReflect">反映</a>された<span class="attr-name">‘<a
                    href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>属性を表すために使います。
        </p>

        <pre class="idl">[Exposed=Window]
interface <b>SVGAnimatedPreserveAspectRatio</b> {
  [SameObject] readonly attribute <a class="idlinterface" href="coords.html#InterfaceSVGPreserveAspectRatio">SVGPreserveAspectRatio</a> <a href="coords.html#__svg__SVGAnimatedPreserveAspectRatio__baseVal">baseVal</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="coords.html#InterfaceSVGPreserveAspectRatio">SVGPreserveAspectRatio</a> <a href="coords.html#__svg__SVGAnimatedPreserveAspectRatio__animVal">animVal</a>;
};</pre>

        <p class="ready-for-wider-review"><b id="__svg__SVGAnimatedPreserveAspectRatio__baseVal">baseVal</b>および<b
                id="__svg__SVGAnimatedPreserveAspectRatio__animVal">animVal</b>IDL属性は、反映された<span class="attr-name">‘<a
                    href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>属性の現在の非アニメーション値を表します。<a
                href="#__svg__SVGAnimatedPreserveAspectRatio__baseVal">baseVal</a>または<a
                href="#__svg__SVGAnimatedPreserveAspectRatio__animVal">animVal</a>取得時は、<span class="attr-name">‘<a
                    href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>属性の<em>基準値を反映</em>した<a
                class="idlinterface"
                href="coords.html#InterfaceSVGPreserveAspectRatio">SVGPreserveAspectRatio</a>オブジェクトが返されます（このIDL属性型<a
                class="idlinterface"
                href="coords.html#InterfaceSVGAnimatedPreserveAspectRatio">SVGAnimatedPreserveAspectRatio</a>を通して取得したSVG要素上の属性）。
        </p>

    </div>

    <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
</body>

</html>