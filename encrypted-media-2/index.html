<!DOCTYPE html>
<html lang="ja-JP" dir="ltr">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <!-- <meta name="generator" content="ReSpec 35.5.1"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        span.example-title {
            text-transform: none
        }

        :is(aside, div).example,
        div.illegal-example {
            padding: .5em;
            margin: 1em 0;
            position: relative;
            clear: both
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: #000
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff
        }
    </style>
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-color: var(--warning-border, #f11);
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
            background: var(--warning-bg, #fbe9e9);
            color: #000;
            color: var(--text, #000)
        }

        .warning-title:before {
            content: "⚠";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        pre.idl {
            padding: 1em;
            position: relative
        }

        pre.idl>code {
            color: #000;
            color: var(--text, #000)
        }

        @media print {
            pre.idl {
                white-space: pre-wrap
            }
        }

        .idlHeader {
            display: block;
            width: 150px;
            background: #8ccbf2;
            background: var(--def-border, #8ccbf2);
            color: #fff;
            color: var(--defrow-border, #fff);
            font-family: sans-serif;
            font-weight: 700;
            margin: -1em 0 1em -1em;
            height: 28px;
            line-height: 28px
        }

        .idlHeader a.self-link {
            margin-left: .3cm;
            text-decoration: none;
            border-bottom: none;
            color: inherit
        }

        .idlID {
            font-weight: 700;
            color: #005a9c
        }

        .idlType {
            color: #005a9c
        }

        .idlName {
            color: #ff4500
        }

        .idlName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none
        }

        a.idlEnumItem {
            color: #000;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        .idlSuperclass {
            font-style: italic;
            color: #005a9c
        }

        .idlDefaultValue,
        .idlParamName {
            font-style: italic
        }

        .extAttr {
            color: #666
        }

        .idlSectionComment {
            color: gray
        }

        .idlIncludes a {
            font-weight: 700
        }

        .respec-button-copy-paste:focus {
            text-decoration: none;
            border-color: #51a7e8;
            outline: 0;
            box-shadow: 0 0 5px rgba(81, 167, 232, .5)
        }

        .respec-button-copy-paste:is(:focus:hover, .selected:focus) {
            border-color: #51a7e8
        }

        .respec-button-copy-paste:is(:hover, :active, .zeroclipboard-is-hover, .zeroclipboard-is-active) {
            text-decoration: none;
            background-color: #ddd;
            background-image: linear-gradient(#eee, #ddd);
            border-color: #ccc
        }

        .respec-button-copy-paste:is(:active, .selected, .zeroclipboard-is-active) {
            background-color: #dcdcdc;
            background-image: none;
            border-color: #b5b5b5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, .15)
        }

        .respec-button-copy-paste.selected:hover {
            background-color: #cfcfcf
        }

        .respec-button-copy-paste:is(:disabled, :disabled:hover, .disabled, .disabled:hover) {
            color: rgba(102, 102, 102, .5);
            cursor: default;
            background-color: rgba(229, 229, 229, .5);
            background-image: none;
            border-color: rgba(197, 197, 197, .5);
            box-shadow: none
        }

        @media print {
            .respec-button-copy-paste {
                visibility: hidden
            }
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            background: var(--indextable-hover-bg, #fff);
            color: #000;
            color: var(--text, #000);
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 1em 3em -.4em var(--tocsidebar-shadow, rgba(0, 0, 0, .3)), 0 0 1px 1px var(--tocsidebar-shadow, rgba(0, 0, 0, .05));
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            border-bottom-color: var(--indextable-hover-bg, #fff);
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1;
            border-bottom-color: var(--indextable-hover-bg, #a2a9b1)
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            color: var(--text, #000);
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333;
            color: var(--text, #333)
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>


    <title>暗号化メディア拡張機能</title>

    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: italic
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>


    <link rel="stylesheet" href="https://www.w3.org/TR/encrypted-media-2/eme.css">

    <meta name="color-scheme" content="light">
    <!-- <meta name="revision" content="1b9ea6db1992c2c783b5728416906bcf55e2fcba"> -->
    <meta name="description" content="この仕様は、HTMLMediaElement [HTML] を拡張し、暗号化されたコンテンツの再生を制御する API を提供します。">
    <link rel="canonical" href="https://www.w3.org/TR/encrypted-media-2/">
    <style>
        .hljs {
            --base: #fafafa;
            --mono-1: #383a42;
            --mono-2: #686b77;
            --mono-3: #717277;
            --hue-1: #0b76c5;
            --hue-2: #336ae3;
            --hue-3: #a626a4;
            --hue-4: #42803c;
            --hue-5: #ca4706;
            --hue-5-2: #c91243;
            --hue-6: #986801;
            --hue-6-2: #9a6a01
        }

        @media (prefers-color-scheme:dark) {
            .hljs {
                --base: #282c34;
                --mono-1: #abb2bf;
                --mono-2: #818896;
                --mono-3: #5c6370;
                --hue-1: #56b6c2;
                --hue-2: #61aeee;
                --hue-3: #c678dd;
                --hue-4: #98c379;
                --hue-5: #e06c75;
                --hue-5-2: #be5046;
                --hue-6: #d19a66;
                --hue-6-2: #e6c07b
            }
        }

        .hljs {
            display: block;
            overflow-x: auto;
            padding: .5em;
            color: #383a42;
            color: var(--mono-1, #383a42);
            background: #fafafa;
            background: var(--base, #fafafa)
        }

        .hljs-comment,
        .hljs-quote {
            color: #717277;
            color: var(--mono-3, #717277);
            font-style: italic
        }

        .hljs-doctag,
        .hljs-formula,
        .hljs-keyword {
            color: #a626a4;
            color: var(--hue-3, #a626a4)
        }

        .hljs-deletion,
        .hljs-name,
        .hljs-section,
        .hljs-selector-tag,
        .hljs-subst {
            color: #ca4706;
            color: var(--hue-5, #ca4706);
            font-weight: 700
        }

        .hljs-literal {
            color: #0b76c5;
            color: var(--hue-1, #0b76c5)
        }

        .hljs-addition,
        .hljs-attribute,
        .hljs-meta-string,
        .hljs-regexp,
        .hljs-string {
            color: #42803c;
            color: var(--hue-4, #42803c)
        }

        .hljs-built_in,
        .hljs-class .hljs-title {
            color: #9a6a01;
            color: var(--hue-6-2, #9a6a01)
        }

        .hljs-attr,
        .hljs-number,
        .hljs-selector-attr,
        .hljs-selector-class,
        .hljs-selector-pseudo,
        .hljs-template-variable,
        .hljs-type,
        .hljs-variable {
            color: #986801;
            color: var(--hue-6, #986801)
        }

        .hljs-bullet,
        .hljs-link,
        .hljs-meta,
        .hljs-selector-id,
        .hljs-symbol,
        .hljs-title {
            color: #336ae3;
            color: var(--hue-2, #336ae3)
        }

        .hljs-emphasis {
            font-style: italic
        }

        .hljs-strong {
            font-weight: 700
        }

        .hljs-link {
            text-decoration: underline
        }
    </style>
    <style>
        var:hover {
            text-decoration: underline;
            cursor: pointer
        }

        var.respec-hl {
            color: var(--color, #000);
            background-color: var(--bg-color);
            box-shadow: 0 0 0 2px var(--bg-color)
        }

        @media (prefers-color-scheme:dark) {
            var.respec-hl {
                filter: saturate(.9) brightness(.9)
            }
        }

        var.respec-hl-c1 {
            --bg-color: #f4d200
        }

        var.respec-hl-c2 {
            --bg-color: #ff87a2
        }

        var.respec-hl-c3 {
            --bg-color: #96e885
        }

        var.respec-hl-c4 {
            --bg-color: #3eeed2
        }

        var.respec-hl-c5 {
            --bg-color: #eacfb6
        }

        var.respec-hl-c6 {
            --bg-color: #82ddff
        }

        var.respec-hl-c7 {
            --bg-color: #ffbcf2
        }

        @media print {
            var.respec-hl {
                background: 0 0;
                color: #000;
                box-shadow: unset
            }
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #222
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #222;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "specStatus": "WD",
  "implementationReportURI": "https://w3c.github.io/test-results/encrypted-media/all.html",
  "shortName": "encrypted-media-2",
  "edDraftURI": "https://w3c.github.io/encrypted-media/",
  "prevRecURI": "https://www.w3.org/TR/2017/REC-encrypted-media-20170918/",
  "editors": [
    {
      "name": "Joey Parrish",
      "w3cid": "105371",
      "company": "Google Inc.",
      "companyURL": "https://www.google.com/"
    },
    {
      "name": "Greg Freedman",
      "w3cid": "115364",
      "company": "Netflix Inc.",
      "companyURL": "https://www.netflix.com/"
    }
  ],
  "formerEditors": [
    {
      "name": "Mark Watson",
      "note": "Until September 2019",
      "w3cid": "46379",
      "company": "Netflix Inc.",
      "companyURL": "https://www.netflix.com/"
    },
    {
      "name": "David Dorwin",
      "note": "Until September 2017",
      "w3cid": "52505",
      "company": "Google Inc.",
      "companyURL": "https://www.google.com/"
    },
    {
      "name": "Jerry Smith",
      "note": "Until September 2017",
      "w3cid": "60176",
      "company": "Microsoft Corporation",
      "companyURL": "https://www.microsoft.com/"
    },
    {
      "name": "Adrian Bateman",
      "note": "Until May 2014",
      "w3cid": "42763",
      "company": "Microsoft Corporation",
      "companyURL": "https://www.microsoft.com/"
    }
  ],
  "group": "media",
  "github": "w3c/encrypted-media",
  "wgURI": "https://www.w3.org/media-wg/",
  "wgPublicList": "public-media-wg",
  "wgPatentURI": "https://www.w3.org/2004/01/pp-impl/115198/status",
  "localBiblio": {
    "CENC": {
      "title": "ISO/IEC 23001-7:2016, Information technology — MPEG systems technologies — Part 7: Common encryption in ISO Base Media File Format files",
      "href": "https://www.iso.org/obp/ui/#iso:std:iso-iec:23001:-7:ed-3:v1",
      "status": "International Standard",
      "publisher": "ISO/IEC",
      "id": "cenc"
    }
  },
  "xref": [
    "dom",
    "html",
    "infra",
    "mimesniff",
    "webaudio"
  ],
  "gitRevision": "1b9ea6db1992c2c783b5728416906bcf55e2fcba",
  "publishDate": "2025-08-21",
  "previousMaturity": "WD",
  "previousPublishDate": "2025-04-04",
  "publishISODate": "2025-08-21T00:00:00.000Z",
  "generatedSubtitle": "W3C Working Draft 21 August 2025"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD">
</head>

<body class="h-entry" data-cite="WEBIDL dom html infra mimesniff webaudio">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.w3.org/"><img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a></p>
        <h1 id="title" class="title">暗号化メディア拡張機能</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C 作業草案</a> <time class="dt-published"
                datetime="2025-08-21">2025年8月21日</time></p>
        <details open="">
            <summary>この文書の詳細情報</summary>
            <dl>
                <dt>このバージョン:</dt>
                <dd>
                    <a class="u-url"
                        href="https://www.w3.org/TR/2025/WD-encrypted-media-2-20250821/">https://www.w3.org/TR/2025/WD-encrypted-media-2-20250821/</a>
                </dd>
                <dt>最新公開バージョン:</dt>
                <dd>
                    <a href="https://www.w3.org/TR/encrypted-media-2/">https://www.w3.org/TR/encrypted-media-2/</a>
                </dd>
                <dt>最新編集者草案:</dt>
                <dd><a href="https://w3c.github.io/encrypted-media/">https://w3c.github.io/encrypted-media/</a></dd>
                <dt>履歴:</dt>
                <dd>
                    <a
                        href="https://www.w3.org/standards/history/encrypted-media-2/">https://www.w3.org/standards/history/encrypted-media-2/</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/encrypted-media/commits/">コミット履歴</a>
                </dd>

                <dt>実装報告:</dt>
                <dd>
                    <a
                        href="https://w3c.github.io/test-results/encrypted-media/all.html">https://w3c.github.io/test-results/encrypted-media/all.html</a>
                </dd>


                <dt>最新勧告:</dt>
                <dd><a
                        href="https://www.w3.org/TR/2017/REC-encrypted-media-20170918/">https://www.w3.org/TR/2017/REC-encrypted-media-20170918/</a>
                </dd>
                <dt>編集者:</dt>
                <dd class="editor p-author h-card vcard" data-editor-id="105371">
                    <span class="p-name fn">Joey Parrish</span> (<a class="p-org org h-org"
                        href="https://www.google.com/">Google Inc.</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="115364">
                    <span class="p-name fn">Greg Freedman</span> (<a class="p-org org h-org"
                        href="https://www.netflix.com/">Netflix Inc.</a>)
                </dd>
                <dt>
                    以前の編集者:
                </dt>
                <dd class="editor p-author h-card vcard" data-editor-id="46379">
                    <span class="p-name fn">Mark Watson</span> (<a class="p-org org h-org"
                        href="https://www.netflix.com/">Netflix Inc.</a>) (2019年9月まで)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="52505">
                    <span class="p-name fn">David Dorwin</span> (<a class="p-org org h-org"
                        href="https://www.google.com/">Google Inc.</a>) (2017年9月まで)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="60176">
                    <span class="p-name fn">Jerry Smith</span> (<a class="p-org org h-org"
                        href="https://www.microsoft.com/">Microsoft Corporation</a>) (2017年9月まで)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="42763">
                    <span class="p-name fn">Adrian Bateman</span> (<a class="p-org org h-org"
                        href="https://www.microsoft.com/">Microsoft Corporation</a>) (2014年5月まで)
                </dd>

                <dt>フィードバック:</dt>
                <dd>
                    <a href="https://github.com/w3c/encrypted-media/">GitHub w3c/encrypted-media</a>
                    (<a href="https://github.com/w3c/encrypted-media/pulls/">プルリクエスト</a>,
                    <a href="https://github.com/w3c/encrypted-media/issues/new/choose">新規 issue</a>,
                    <a href="https://github.com/w3c/encrypted-media/issues/">オープン issue</a>)
                </dd>
                <dd><a
                        href="mailto:public-media-wg@w3.org?subject=%5Bencrypted-media-2%5D%20YOUR%20TOPIC%20HERE">public-media-wg@w3.org</a>
                    件名 <kbd>[encrypted-media-2] <em>… メッセージトピック …</em></kbd> (<a rel="discussion"
                        href="https://lists.w3.org/Archives/Public/public-media-wg">アーカイブ</a>)</dd>


            </dl>
        </details>


        <p class="copyright">
            <a href="https://www.w3.org/policies/#copyright">Copyright</a>
            ©
            2025

            <a href="https://www.w3.org/">World Wide Web Consortium</a>.
            <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
            <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>,
            <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/copyright/software-license-2023/"
                title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>概要</h2>
        <p>
            この仕様は、<a data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement" class="internalDFN"
                id="ref-for-dom-htmlmediaelement-1"><code>HTMLMediaElement</code></a> [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-html" title="HTML Standard">HTML</a></cite>]
            を拡張し、暗号化されたコンテンツの再生を制御するための API を提供します。
        </p>
        <p>
            この API は、単純な Clear Key
            による復号から、高価値のビデオ（適切なユーザーエージェントの実装がある場合）までのユースケースをサポートします。ライセンス/鍵交換はアプリケーション側で制御され、さまざまなコンテンツ復号および保護技術をサポートする堅牢な再生アプリケーションの開発を容易にします。
        </p>
        <p>
            この仕様はコンテンツ保護や Digital Rights
            Management（DRM）システムを定義するものではありません。代わりに、これらのシステムやより単純なコンテンツ暗号化システムを検出、選択、相互作用するために使用できる共通の API
            を定義します。本仕様への準拠のために DRM の実装は必須ではありません。共通のベースラインとして実装が要求されるのは <a data-link-type="dfn|abstract-op"
                href="#dfn-clear-key" class="internalDFN" id="ref-for-dfn-clear-key-1">Clear Key</a> システムのみです。
        </p>
        <p>
            共通 API
            は単純なコンテンツ暗号化機能のセットをサポートし、認証や認可などのアプリケーション機能はページ作成者に委ねます。これは、コンテンツ保護システム固有のメッセージングが暗号化システムとライセンスや他のサーバー間の帯外通信を前提とするのではなく、ページによって媒介されることを要求することで実現されます。
        </p>
    </section>
    <section id="sotd" class="introductory">
        <h2>この文書の状態</h2>
        <p><em>このセクションは、発行時点におけるこの文書の状態を説明します。現在の <abbr title="World Wide Web Consortium">W3C</abbr>
                公開物と本技術報告書の最新改訂版は、<a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr>
                    standards and drafts
                    index</a> で確認できます。</em></p>
        <p>
            2017年9月の <a href="https://www.w3.org/TR/2017/REC-encrypted-media-20170918/">W3C Recommendation</a>
            の公開以降、二つの新機能が追加されました：
        </p>
        <ul>
            <li>暗号化方式の機能検出を、<a data-link-type="idl" href="#dom-mediakeysystemmediacapability-encryptionscheme"
                    class="internalDFN"
                    id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme-1"><code>encryptionScheme</code></a>
                属性を通じて可能にすること。
            </li>
            <li>HDCP ポリシーに関連する鍵の状態を問い合わせる能力を、<a data-link-type="idl" data-lt="getStatusForPolicy()"
                    href="#dom-mediakeys-getstatusforpolicy" class="internalDFN"
                    id="ref-for-dom-mediakeys-getstatusforpolicy-1"><code>getStatusForPolicy</code></a><code>()</code>
                メソッドを通じて提供すること。
            </li>
        </ul>
        <p>
            その他の機能の追加は Media Working Group の対象外です。編集上の更新に加え、本仕様へのその他の実質的な変更は、本仕様に対する保守上の問題に対処しています：
        </p>
        <ul>
            <li>Permissions Policy と <a data-link-type="dfn|abstract-op" href="#dfn-encrypted-media" class="internalDFN"
                    id="ref-for-dfn-encrypted-media-1"><code>encrypted-media</code></a> 識別子を通じて統合すること。
            </li>
            <li><a data-link-type="idl" href="#dom-mediakeystatus-usable-in-future" class="internalDFN"
                    id="ref-for-dom-mediakeystatus-usable-in-future-1"><code>usable-in-future</code></a>
                を、まだ復号に使用できない鍵のために <a data-link-type="idl" data-lt="MediaKeyStatus" href="#dom-mediakeystatus"
                    class="internalDFN" id="ref-for-dom-mediakeystatus-1"><code>MediaKeyStatus</code></a> に追加すること。
            </li>
            <li>リソース不足により処理が失敗した場合に <a data-link-type="dfn|abstract-op" href="#dfn-quotaexceedederror"
                    class="internalDFN" id="ref-for-dfn-quotaexceedederror-1"><code>QuotaExceededError</code></a> を返すこと。
            </li>
            <li><a data-link-type="idl" data-lt="MediaKeySessionClosedReason" href="#dom-mediakeysessionclosedreason"
                    class="internalDFN"
                    id="ref-for-dom-mediakeysessionclosedreason-1"><code>MediaKeySessionClosedReason</code></a>
                を追加してセッション閉鎖の可能な理由を記述し、それに応じてアルゴリズムを調整すること。
            </li>
        </ul>
        <p>
            以前のバージョン以降の変更の完全な一覧については、<a href="https://github.com/w3c/encrypted-media/commits/main">コミット履歴</a> を参照してください。
        </p>
        <p>
            この文書は <a href="https://www.w3.org/groups/wg/media">Media Working Group</a> により、<a
                href="https://www.w3.org/policies/process/20250818/#recs-and-notes">Recommendation track</a> を用いて
            Working Draft として公開されました。
        </p>
        <p>Working Draft としての公開は、<abbr title="World Wide Web Consortium">W3C</abbr> およびそのメンバーによる支持を意味するものではありません。</p>
        <p>
            これは草案文書であり、いつでも更新、置換、廃止される可能性があります。本文書を進行中の作業以外の目的で引用することは適切ではありません。
        </p>
        <p>
            この文書は、<a href="https://www.w3.org/policies/patent-policy/"><abbr
                    title="World Wide Web Consortium">W3C</abbr> Patent
                Policy</a> の下で運営されるグループによって作成されました。
        </p>
        <p>
            <abbr title="World Wide Web Consortium">W3C</abbr>
            は、グループの成果物に関連して行われた特許開示の公開リストを維持しています。該当ページには特許の開示方法についての指示も含まれています。個人が、当該個人が本質的請求（Essential
            Claim(s)）を含むと信じる特許を実際に知っている場合、その情報は <a href="https://www.w3.org/policies/patent-policy/#sec-Disclosure">W3C
                特許方針セクション6</a> に従って開示しなければなりません。
        </p>
        <p>
            この文書は <a id="w3c_process_revision" href="https://www.w3.org/policies/process/20250818/">2025年8月18日付の <abbr
                    title="World Wide Web Consortium">W3C</abbr> プロセス文書</a> に従って管理されています。
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">目次</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">概要</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">この文書の状態</a></li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>
                    導入
                </a></li>
            <li class="tocline"><a class="tocxref" href="#definitions"><bdi class="secno">2. </bdi>
                    定義
                </a></li>
            <li class="tocline"><a class="tocxref" href="#obtaining-access-to-key-systems"><bdi class="secno">3. </bdi>
                    鍵システムへのアクセスの取得
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#permissions-policy-integration"><bdi class="secno">3.1
                            </bdi>
                            Permissions Policy の統合
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#navigator-extension-requestmediakeysystemaccess"><bdi
                                class="secno">3.2 </bdi>
                            <span data-idl="interface" data-title="Navigator"
                                data-dfn-for=""><code>Navigator</code></span> の拡張:
                            <code>requestMediaKeySystemAccess()</code>
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#methods"><bdi class="secno">3.2.1 </bdi>
                                    メソッド
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#algorithms"><bdi class="secno">3.2.2 </bdi>
                                    アルゴリズム
                                </a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#get-supported-configuration"><bdi
                                                class="secno">3.2.2.1 </bdi>
                                            <span class="export" data-export="">サポートされている構成を取得</span>
                                        </a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#get-supported-configuration-and-consent"><bdi class="secno">3.2.2.2
                                            </bdi>
                                            <span>サポートされている構成と同意を取得</span>
                                        </a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#get-supported-capabilities-for-audio-video-type"><bdi
                                                class="secno">3.2.2.3 </bdi>
                                            <span>オーディオ/ビデオタイプのサポート機能を取得</span>
                                        </a></li>
                                    <li class="tocline"><a class="tocxref" href="#get-consent-status"><bdi
                                                class="secno">3.2.2.4 </bdi>
                                            <span>同意状況を取得</span>
                                        </a></li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#mediakeysystemconfiguration-dictionary"><bdi
                                class="secno">3.3 </bdi>
                            <span data-export="" data-dfn-type="dictionary" data-idl="dictionary"
                                data-title="MediaKeySystemConfiguration"
                                data-dfn-for=""><code>MediaKeySystemConfiguration</code></span> 辞書
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#mediakeysystemmediacapability-dictionary"><bdi
                                class="secno">3.4 </bdi>
                            <span data-export="" data-dfn-type="dictionary" data-idl="dictionary"
                                data-title="MediaKeySystemMediaCapability"
                                data-dfn-for=""><code>MediaKeySystemMediaCapability</code></span> 辞書
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref"
                                    href="#dictionary-mediakeysystemmediacapability-members"><bdi class="secno">3.4.1
                                    </bdi>
                                    辞書 <span class="formerLink"
                                        data-link-type="idl"><code>MediaKeySystemMediaCapability</code></span> のメンバー
                                </a></li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#mediakeysystemaccess-interface"><bdi class="secno">4. </bdi>
                    <span data-export="" data-dfn-type="interface" data-idl="interface"
                        data-title="MediaKeySystemAccess" data-dfn-for=""><code>MediaKeySystemAccess</code></span>
                    インターフェース
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#attributes"><bdi class="secno">4.1 </bdi>
                            属性
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#methods-0"><bdi class="secno">4.2 </bdi>
                            メソッド
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#mediakeys-interface"><bdi class="secno">5. </bdi>
                    <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="MediaKeys"
                        data-dfn-for=""><code>MediaKeys</code></span> インターフェース
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#methods-1"><bdi class="secno">5.1 </bdi>
                            メソッド
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#algorithms-0"><bdi class="secno">5.2 </bdi>
                            アルゴリズム
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#is-persistent-session-type"><bdi
                                        class="secno">5.2.1 </bdi>
                                    永続セッションタイプか?
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#cdm-unavailable"><bdi class="secno">5.2.2
                                    </bdi>
                                    CDM が利用不可
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#media-keys-storage"><bdi class="secno">5.3 </bdi>
                            ストレージと永続性
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#mediakeysession-interface"><bdi class="secno">6. </bdi>
                    <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="MediaKeySession"
                        data-dfn-for=""><code>MediaKeySession</code></span> インターフェース
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#attributes-0"><bdi class="secno">6.1 </bdi>
                            属性
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#methods-2"><bdi class="secno">6.2 </bdi>
                            メソッド
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#mediakeystatusmap-interface"><bdi class="secno">6.3
                            </bdi>
                            <span data-export="" data-dfn-type="interface" data-idl="interface"
                                data-title="MediaKeyStatusMap" data-dfn-for=""><code>MediaKeyStatusMap</code></span>
                            インターフェース
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#attributes-1"><bdi class="secno">6.3.1 </bdi>
                                    属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#methods-3"><bdi class="secno">6.3.2 </bdi>
                                    メソッド
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#mediakeymessageevent"><bdi class="secno">6.4 </bdi>
                            <span data-xref-type="_IDL_" data-link-type="idl" data-lt="MediaKeyMessageEvent"
                                class="formerLink"><code>MediaKeyMessageEvent</code></span>
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#attributes-2"><bdi class="secno">6.4.1 </bdi>
                                    属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#mediakeymessageeventinit"><bdi
                                        class="secno">6.4.2 </bdi>
                                    <span data-export="" data-dfn-type="dictionary" data-idl="dictionary"
                                        data-title="MediaKeyMessageEventInit"
                                        data-dfn-for=""><code>MediaKeyMessageEventInit</code></span>
                                </a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref"
                                            href="#dictionary-mediakeymessageeventinit-members"><bdi
                                                class="secno">6.4.2.1 </bdi>
                                            辞書 <span class="formerLink"
                                                data-link-type="idl"><code>MediaKeyMessageEventInit</code></span> のメンバー
                                        </a></li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#mediakeysession-events"><bdi class="secno">6.5 </bdi>
                            イベント一覧
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#mediakeysession-algorithms"><bdi class="secno">6.6
                            </bdi>
                            アルゴリズム
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#queue-message"><bdi class="secno">6.6.1 </bdi>
                                    「message」イベントをキューに入れる
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#update-key-statuses"><bdi class="secno">6.6.2
                                    </bdi>
                                    鍵の状態を更新
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#update-expiration"><bdi class="secno">6.6.3
                                    </bdi>
                                    有効期限を更新
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#session-closed"><bdi class="secno">6.6.4
                                    </bdi>
                                    セッションの閉鎖
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#monitor-cdm"><bdi class="secno">6.6.5 </bdi>
                                    CDM 状態変更の監視
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#exceptions"><bdi class="secno">6.7 </bdi>
                            例外
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#session-storage"><bdi class="secno">6.8 </bdi>
                            セッションの保存と永続性
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#htmlmediaelement-extensions"><bdi class="secno">7. </bdi>
                    <span data-idl="interface" data-title="HTMLMediaElement"
                        data-dfn-for=""><code>HTMLMediaElement</code></span> の拡張
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#attributes-3"><bdi class="secno">7.1 </bdi>
                            属性
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#methods-4"><bdi class="secno">7.2 </bdi>
                            メソッド
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#mediaencryptedevent"><bdi class="secno">7.3 </bdi>
                            <span class="formerLink" data-link-type="idl"><code>MediaEncryptedEvent</code></span>
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#attributes-4"><bdi class="secno">7.3.1 </bdi>
                                    属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#mediaencryptedeventinit"><bdi
                                        class="secno">7.3.2 </bdi>
                                    <span data-export="" data-dfn-type="dictionary" data-idl="dictionary"
                                        data-title="MediaEncryptedEventInit"
                                        data-dfn-for=""><code>MediaEncryptedEventInit</code></span>
                                </a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref"
                                            href="#dictionary-mediaencryptedeventinit-members"><bdi
                                                class="secno">7.3.2.1 </bdi>
                                            辞書 <span class="formerLink"
                                                data-link-type="idl"><code>MediaEncryptedEventInit</code></span> のメンバー
                                        </a></li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#htmlmediaelement-events"><bdi class="secno">7.4 </bdi>
                            イベント一覧
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#htmlmediaelement-algorithms"><bdi class="secno">7.5
                            </bdi>
                            アルゴリズム
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#media-may-contain-encrypted-blocks"><bdi
                                        class="secno">7.5.1 </bdi>
                                    メディアデータは暗号化ブロックを含む可能性がある
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#initdata-encountered"><bdi class="secno">7.5.2
                                    </bdi>
                                    <span class="export" data-export="">初期化データを検出した</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#encrypted-block-encountered"><bdi
                                        class="secno">7.5.3 </bdi>
                                    <span class="export" data-export="">暗号化ブロックを検出した</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#attempt-to-decrypt"><bdi class="secno">7.5.4
                                    </bdi>
                                    復号を試みる
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#wait-for-key"><bdi class="secno">7.5.5 </bdi>
                                    鍵を待つ
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#resume-playback"><bdi class="secno">7.5.6
                                    </bdi>
                                    必要に応じて再生を再開しようとする
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#media-element-restrictions"><bdi class="secno">7.6
                            </bdi>
                            メディア要素の制約
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#implementation-requirements"><bdi class="secno">8. </bdi>
                    実装要件
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#cdm-constraint-requirements"><bdi class="secno">8.1
                            </bdi>
                            CDM 制約
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#messaging-requirements"><bdi class="secno">8.2 </bdi>
                            メッセージおよび通信
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#persistent-state-requirements"><bdi class="secno">8.3
                            </bdi>
                            永続データ
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#use-origin-specific-key-system-storage"><bdi
                                        class="secno">8.3.1 </bdi>
                                    オリジン特有かつブラウジングプロファイル特有の <span data-link-type="dfn|abstract-op"
                                        class="formerLink">Key System</span> ストレージを使用すること
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#allow-persistent-data-cleared"><bdi
                                        class="secno">8.3.2 </bdi>
                                    永続データの削除を許可すること
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#encrypt-or-obfuscate-persistent-data"><bdi
                                        class="secno">8.3.3 </bdi>
                                    永続データを暗号化または難読化すること
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#exposed-value-requirements"><bdi class="secno">8.4
                            </bdi>
                            アプリケーションに公開される値に関する要件
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#per-origin-per-profile-values"><bdi
                                        class="secno">8.4.1 </bdi>
                                    オリジンごと・プロファイルごとの値を使用すること
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#allow-values-to-be-cleared"><bdi
                                        class="secno">8.4.2 </bdi>
                                    値の消去を許可すること
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#identifier-requirements"><bdi class="secno">8.5 </bdi>
                            識別子要件
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref"
                                    href="#limit-or-avoid-use-of-distinctive-identifiers-and-permanent-identifiers"><bdi
                                        class="secno">8.5.1 </bdi>
                                    目立つ識別子および永久識別子の使用を制限または回避すること
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#encrypt-identifiers"><bdi class="secno">8.5.2
                                    </bdi>
                                    識別子を暗号化すること
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#per-origin-per-profile-identifiers"><bdi
                                        class="secno">8.5.3 </bdi>
                                    オリジンごと・プロファイルごとの識別子を使用すること
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#non-associable-identifiers"><bdi
                                        class="secno">8.5.4 </bdi>
                                    非紐付け可能な識別子を使用すること
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#allow-identifiers-cleared"><bdi
                                        class="secno">8.5.5 </bdi>
                                    識別子の消去を許可すること
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#individualization"><bdi class="secno">8.6 </bdi>
                            個別化
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#direct-individualization"><bdi
                                        class="secno">8.6.1 </bdi>
                                    直接個別化
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#app-assisted-individualization"><bdi
                                        class="secno">8.6.2 </bdi>
                                    アプリ支援個別化
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#support-multiple-keys"><bdi class="secno">8.7 </bdi>
                            複数鍵のサポート
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#initialization-data-type-support-requirements"><bdi
                                class="secno">8.8 </bdi>
                            初期化データ型のサポート
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref"
                                    href="#licenses-generated-are-independent-of-content-type"><bdi class="secno">8.8.1
                                    </bdi>
                                    生成されるライセンスはコンテンツタイプに依存しない
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#support-extraction-from-media-data"><bdi
                                        class="secno">8.8.2 </bdi>
                                    メディアデータからの抽出をサポートする
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#media-requirements"><bdi class="secno">8.9 </bdi>
                            サポートされるメディア
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#unencrypted-container"><bdi
                                        class="secno">8.9.1 </bdi>
                                    暗号化されていないコンテナ
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#interoperably-encrypted"><bdi
                                        class="secno">8.9.2 </bdi>
                                    相互運用可能に暗号化されている
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#unencrypted-in-band-support-content"><bdi
                                        class="secno">8.9.3 </bdi>
                                    バンド内サポートコンテンツは暗号化されていない
                                </a></li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#common-key-systems"><bdi class="secno">9. </bdi>
                    共通のキーシステム
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#clear-key"><bdi class="secno">9.1 </bdi>
                            Clear Key
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#clear-key-capabilities"><bdi
                                        class="secno">9.1.1 </bdi>
                                    機能
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#clear-key-behavior"><bdi class="secno">9.1.2
                                    </bdi>
                                    動作
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#clear-key-request-format"><bdi
                                        class="secno">9.1.3 </bdi>
                                    ライセンス要求フォーマット
                                </a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#clear-key-request-format-example"><bdi
                                                class="secno">9.1.3.1 </bdi>
                                            例
                                        </a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#clear-key-license-format"><bdi
                                        class="secno">9.1.4 </bdi>
                                    ライセンスフォーマット
                                </a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#clear-key-license-format-example"><bdi
                                                class="secno">9.1.4.1 </bdi>
                                            例
                                        </a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#clear-key-release-format"><bdi
                                        class="secno">9.1.5 </bdi>
                                    ライセンス解除フォーマット
                                </a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref"
                                            href="#clear-key-release-format-example-1"><bdi class="secno">9.1.5.1 </bdi>
                                            ライセンス破棄の記録を反映する例メッセージ
                                        </a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#clear-key-release-ack-format"><bdi
                                        class="secno">9.1.6 </bdi>
                                    ライセンス解除確認フォーマット
                                </a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref"
                                            href="#clear-key-release-ack-format-example"><bdi class="secno">9.1.6.1
                                            </bdi>
                                            例
                                        </a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#using-base64url"><bdi class="secno">9.1.7
                                    </bdi>
                                    base64url の使用
                                </a></li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#security"><bdi class="secno">10. </bdi>
                    セキュリティ
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#input-data-security"><bdi class="secno">10.1 </bdi>
                            入力データに対する攻撃と脆弱性
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#cdm-security"><bdi class="secno">10.2 </bdi>
                            CDM の攻撃と脆弱性
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#network-attacks"><bdi class="secno">10.3 </bdi>
                            ネットワーク攻撃
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#potential-attacks"><bdi class="secno">10.3.1
                                    </bdi>
                                    想定される攻撃
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#mitigations"><bdi class="secno">10.3.2 </bdi>
                                    緩和策
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#iframe-attacks"><bdi class="secno">10.4 </bdi>
                            <code>iframe</code> を利用した攻撃
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#potential-attacks-0"><bdi class="secno">10.4.1
                                    </bdi>
                                    想定される攻撃
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#mitigations-0"><bdi class="secno">10.4.2
                                    </bdi>
                                    緩和策
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#cross-directory-attacks"><bdi class="secno">10.5
                            </bdi>
                            クロスディレクトリ攻撃
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#privacy"><bdi class="secno">11. </bdi>
                    プライバシー
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#privacy-disclosure"><bdi class="secno">11.1 </bdi>
                            EME およびキーシステムによって開示される情報
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#privacy-fingerprinting"><bdi class="secno">11.2 </bdi>
                            フィンガープリンティング
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#privacy-leakage"><bdi class="secno">11.3 </bdi>
                            情報漏えい
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#concerns"><bdi class="secno">11.3.1 </bdi>
                                    懸念事項
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#mitigations-1"><bdi class="secno">11.3.2
                                    </bdi>
                                    緩和策
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#user-tracking"><bdi class="secno">11.4 </bdi>
                            ユーザートラッキング
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#concerns-0"><bdi class="secno">11.4.1 </bdi>
                                    懸念事項
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#mitigations-2"><bdi class="secno">11.4.2
                                    </bdi>
                                    緩和策
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#privacy-storedinfo"><bdi class="secno">11.5 </bdi>
                            ユーザー機器に保存される情報
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#concerns-1"><bdi class="secno">11.5.1 </bdi>
                                    懸念事項
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#mitigations-3"><bdi class="secno">11.5.2
                                    </bdi>
                                    緩和策
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#incomplete-clearing"><bdi class="secno">11.6 </bdi>
                            データの未完全消去
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#concerns-2"><bdi class="secno">11.6.1 </bdi>
                                    懸念事項
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#mitigations-4"><bdi class="secno">11.6.2
                                    </bdi>
                                    緩和策
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#private-browsing"><bdi class="secno">11.7 </bdi>
                            プライベート閲覧モード
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#privacy-secureorigin"><bdi class="secno">11.8 </bdi>
                            安全なオリジンと通信
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">12. </bdi>適合性</a></li>
            <li class="tocline"><a class="tocxref" href="#examples"><bdi class="secno">13. </bdi>
                    例
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#example-source-and-key-known"><bdi class="secno">13.1
                            </bdi>
                            ページ読み込み時にソースと鍵が既知の場合 (Clear Key)
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#example-selecting-key-system"><bdi class="secno">13.2
                            </bdi>
                            サポートされているキーシステムを選択し、"encrypted" イベントからの初期化データを使用する
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#example-mediakeys-before-source"><bdi
                                class="secno">13.3 </bdi>
                            メディアをロードする前に <code>MediaKeys</code> を作成する
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#example-using-all-events"><bdi class="secno">13.4
                            </bdi>
                            すべてのイベントを使用する
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#example-stored-license"><bdi class="secno">13.5 </bdi>
                            保存されたライセンス
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#example-getStatusForPolicy"><bdi class="secno">13.6
                            </bdi>
                            HDCP ポリシー付きメディアを事前取得する
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#acknowledgements"><bdi class="secno">14. </bdi>
                    謝辞
                </a></li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">A. </bdi>参考文献</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">A.1
                            </bdi>正規の参考文献</a></li>
                    <li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">A.2
                            </bdi>参考情報</a></li>
                </ol>
            </li>
        </ol>
    </nav>
    <section class="informative" id="introduction">
        <div class="header-wrapper">
            <h2 id="x1-introduction"><bdi class="secno">1. </bdi>
                導入
            </h2><a class="self-link" href="#introduction" aria-label="Permalink for Section 1."></a>
        </div>
        <p><em>このセクションは非規範的です。</em></p>

        <p>
            この仕様はスクリプトがコンテンツ保護メカニズムを選択し、ライセンス／鍵交換を制御し、カスタムのライセンス管理アルゴリズムを実行できるようにします。各ユースケースごとに各ユーザーエージェント側でクライアント改変を要求することなく、幅広いユースケースをサポートします。これにより、コンテンツ提供者はすべてのデバイス向けに単一のアプリケーションソリューションを開発できます。
        </p>
        <p>
            サポートされるコンテンツはコンテナ固有の「共通暗号化」仕様に従って暗号化され、キーシステム間での利用を可能にします。サポートされるコンテンツはコンテナ自体は暗号化されていないため、メタデータをアプリケーションに提供でき、他の
            <a data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement" class="internalDFN"
                id="ref-for-dom-htmlmediaelement-2"><code>HTMLMediaElement</code></a> の機能との互換性を維持します。
        </p>
        <p>
            実装者は、本仕様で記述されているセキュリティおよびプライバシーの脅威と懸念に対する緩和策に注意を払うべきです。特に、セキュリティおよびプライバシー要件は <a
                data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                id="ref-for-dfn-key-system-1">Key System</a> とその実装のセキュリティおよびプライバシー特性を把握していないと満たせません。<a
                href="#implementation-requirements" class="sec-ref"><bdi class="secno">8. </bdi>
                Implementation Requirements</a> には基盤となる <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                class="internalDFN" id="ref-for-dfn-key-system-2">Key System</a>
            実装の統合および使用に関するセキュリティとプライバシーの条項が含まれています。<a href="#security" class="sec-ref"><bdi class="secno">10. </bdi>
                Security</a> は入力データやネットワーク攻撃など外部からの脅威に焦点を当てています。<a href="#privacy" class="sec-ref"><bdi
                    class="secno">11. </bdi>
                Privacy</a> はユーザー固有の情報の取り扱いと、ユーザーが自身のプライバシーを適切に制御できるようにすることに焦点を当てています。
        </p>
        <div class="note" role="note" id="issue-container-generatedID">
            <div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>注</span></div>
            <p class="">
                この仕様はメディアデータの供給元に依存しませんが、多くの実装が Media Source Extensions [<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-media-source" title="Media Source Extensions™">MEDIA-SOURCE</a></cite>]
                経由で提供されるメディアデータの復号のみをサポートしていることに著者は注意すべきです。
            </p>
        </div>
        <p>
            API を用いて実装された一般的なスタックの例を以下に示します。この図は一例のフローを示しており、他の API 呼び出しやイベントの組み合わせも可能です。
        </p><img src="https://www.w3.org/TR/encrypted-media-2/stack_overview.svg" alt="提案された API を使用して実装された汎用スタック"
            height="700">
    </section>
    <section id="definitions">
        <div class="header-wrapper">
            <h2 id="x2-definitions"><bdi class="secno">2. </bdi>
                定義
            </h2><a class="self-link" href="#definitions" aria-label="Permalink for Section 2."></a>
        </div>

        <dl>
            <dt>
                <dfn class="export" data-lt="CDM|Content Decryption Module (CDM)" data-export="" data-plurals="cdms"
                    id="dfn-cdm" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">コンテンツ復号モジュール（CDM）</dfn>
            </dt>
            <dd>
                <p>
                    コンテンツ復号モジュール（CDM）は、1 つ以上の <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                        class="internalDFN" id="ref-for-dfn-key-system-3">Key Systems</a>
                    に対して復号を含む機能を提供するクライアント側のコンポーネントです。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-0">
                    <div role="heading" class="note-title marker" id="h-note-0" aria-level="3"><span>注</span></div>
                    <p class="">
                        実装は CDM の実装とユーザーエージェントの実装を分離する場合と分離しない場合があります。本仕様ではこれは API とアプリケーションに対して透過的です。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn class="export" data-export="" data-plurals="key systems" id="dfn-key-system" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">Key System</dfn>
            </dt>
            <dd>
                <p>
                    Key System は復号メカニズムおよび／またはコンテンツ保護プロバイダを指す一般的な用語です。Key System 文字列は Key System
                    を一意に識別します。これらはユーザーエージェントによって <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-1">CDM</a> を選択したり、鍵に関連するイベントの発生源を特定するために使用されます。ユーザーエージェントは <em
                        class="rfc2119">MUST</em> で <a data-link-type="dfn|abstract-op" href="#dfn-common-key-systems"
                        class="internalDFN" id="ref-for-dfn-common-key-systems-1">Common Key Systems</a>
                    をサポートしなければなりません。ユーザーエージェントは追加の <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                        class="internalDFN" id="ref-for-dfn-cdm-2">CDMs</a> と対応する Key System 文字列を提供してもよい（MAY）です。
                </p>
                <p>
                    Key System 文字列は常に逆ドメイン名です。Key System 文字列の比較は大文字小文字を区別して行われます。<em class="rfc2119">RECOMMENDED</em>
                    として、<a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-3">CDMs</a> は単純な小文字の ASCII キーシステム文字列を使用することが推奨されます。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-1">
                    <div role="heading" class="note-title marker" id="h-note-1" aria-level="3"><span>注</span></div>
                    <p class="">
                        例えば "com.example.somesystem" のようになります。
                    </p>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-2">
                    <div role="heading" class="note-title marker" id="h-note-2" aria-level="3"><span>注</span></div>
                    <p class="">
                        与えられたシステム内（例では "somesystem"）では、キーシステムプロバイダによって決定されるサブシステムが定義される場合があります。例えば
                        "com.example.somesystem.1" や "com.example.somesystem.1_5"
                        のようなものです。キーシステムプロバイダはこれらが比較や発見に使用されることを念頭に置き、比較しやすく構造を合理的に単純に保つべきです。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn id="dfn-key-session" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Key Session</dfn>
            </dt>
            <dd>
                <p>
                    Key Session（単に Session とも呼ぶ）は <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                        class="internalDFN" id="ref-for-dfn-cdm-4">CDM</a> とのメッセージ交換の文脈を提供し、その結果として鍵が <a
                        data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-5">CDM</a> に利用可能になります。セッションは <a data-link-type="idl"
                        data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-1"><code>MediaKeySession</code></a> オブジェクトとして具現化されます。各 Key
                    Session は <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                        id="ref-for-dfn-initialization-data-1">Initialization Data</a> の単一インスタンスに関連付けられ、これは <a
                        data-link-type="idl" data-lt="generateRequest()" href="#dom-mediakeysession-generaterequest"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysession-generaterequest-1"><code>generateRequest</code></a><code>()</code>
                    呼び出しで提供されます。
                </p>
                <p>
                    各 Key Session は単一の <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys"
                        class="internalDFN" id="ref-for-dom-mediakeys-1"><code>MediaKeys</code></a> オブジェクトに関連付けられ、その <a
                        data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                        id="ref-for-dom-mediakeys-2"><code>MediaKeys</code></a>
                    オブジェクトに関連付けられたメディア要素のみがセッションに関連付けられた鍵にアクセスできます。その他の <a data-link-type="idl" data-lt="MediaKeys"
                        href="#dom-mediakeys" class="internalDFN"
                        id="ref-for-dom-mediakeys-3"><code>MediaKeys</code></a> オブジェクト、<a
                        data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-6">CDM</a> インスタンス、およびメディア要素はセッションにアクセスしたりその鍵を使用してはなりません（<em
                        class="rfc2119">MUST NOT</em>）。セッションとその含む鍵は、<a data-link-type="dfn|abstract-op"
                        href="#dfn-usable-for-decryption" class="internalDFN"
                        id="ref-for-dfn-usable-for-decryption-1">usable for decryption</a> ではなくなります。これは <a
                        data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-2"><code>MediaKeySession</code></a> オブジェクトが破棄された場合も含みます。
                </p>
                <p>
                    明示的に保存されていないすべてのライセンスおよび鍵は、Key Session が閉じられたときに破棄されなければなりません（<em class="rfc2119">MUST</em>）。
                </p>
                <p>
                    <a data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id" class="internalDFN"
                        id="ref-for-dfn-decryption-key-id-1">Key IDs</a> はセッション内で一意でなければなりません（<em
                        class="rfc2119">MUST</em>）。
                </p>
            </dd>
            <dt>
                <dfn data-plurals="session ids" id="dfn-session-id" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">Session ID</dfn>
            </dt>
            <dd>
                <p>
                    Session ID は <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-7">CDM</a> によって生成される一意の文字列識別子で、アプリケーションが <a data-link-type="idl"
                        data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-3"><code>MediaKeySession</code></a> オブジェクトを識別するために使用できます。
                </p>
                <p>
                    ユーザーエージェントと <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-8">CDM</a> が新しいセッションを正常に作成するたびに、新しい Session ID が生成されます。
                </p>
                <p>
                    各 Session ID は、作成されたブラウジングコンテキスト内で一意でなければなりません（<em class="rfc2119">SHALL</em>）。<a
                        data-link-type="dfn|abstract-op" href="#dfn-is-persistent-session-type" class="internalDFN"
                        id="ref-for-dfn-is-persistent-session-type-1">Is persistent session type?</a> アルゴリズムが
                    <code>true</code> を返すセッションタイプについては、Session ID はオリジン内で時間を越えて、一貫して一意でなければなりません（<em
                        class="rfc2119">MUST</em>）、閲覧セッションを跨いでも含みます。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-3">
                    <div role="heading" class="note-title marker" id="h-note-3" aria-level="3"><span>注</span></div>
                    <p class="">
                        基盤となるコンテンツ保護プロトコルは必ずしも Session ID をサポートする必要はありません。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn data-lt="key(s)|Key" id="dfn-key-s" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">Key</dfn>
            </dt>
            <dd>
                <p>
                    特に明記されない限り、key は <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#media-data">media data</a>
                    内のブロックを復号するために使用される復号キーを指します。各キーは <a data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id"
                        class="internalDFN" id="ref-for-dfn-decryption-key-id-2">key ID</a> によって一意に識別されます。キーはそれを <a
                        data-link-type="dfn|abstract-op" data-lt="key session" href="#dfn-key-session"
                        class="internalDFN" id="ref-for-dfn-key-session-1">session</a> に提供するために使用された <a
                        data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-9">CDM</a> に関連付けられます。（同じキーが複数のセッションに存在する場合があります。）そのような鍵は <a
                        data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update" class="internalDFN"
                        id="ref-for-dom-mediakeysession-update-1"><code>update</code></a><code>()</code> 呼び出しを通じてのみ <a
                        data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-10">CDM</a> に提供されなければなりません（<em
                        class="rfc2119">MUST</em>）。（後で保存されたセッションデータの一部として <a data-link-type="idl" data-lt="load()"
                        href="#dom-mediakeysession-load" class="internalDFN"
                        id="ref-for-dom-mediakeysession-load-1"><code>load</code></a><code>()</code> によって読み込まれる場合があります。）
                </p>
                <div class="note" role="note" id="issue-container-generatedID-4">
                    <div role="heading" class="note-title marker" id="h-note-4" aria-level="3"><span>注</span></div>
                    <p class="">
                        著者は、意味のある異なるポリシーを強制する必要がある各ストリーム集合を別個のキー（および key ID）で暗号化することを推奨します（<em
                            class="rfc2119">SHOULD</em>）。例えば、二つのビデオ解像度間でポリシーが異なる可能性がある場合、ある解像度を含むストリームは他の解像度を含むストリームを暗号化するのに使用されたキーと同じキーで暗号化してはいけません。音声ストリームが暗号化される場合、音声はビデオストリームと同じキーを使用すべきではありません（<em
                            class="rfc2119">SHOULD NOT</em>）。これはクライアント間での強制と互換性を保証する唯一の方法です。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn id="dfn-usable-for-decryption" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Usable For
                    Decryption</dfn>
            </dt>
            <dd>
                <p>
                    キーが復号に使用可能と見なされるのは、<a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-11">CDM</a> が当該キーが現在 1 個以上の <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#media-data">media data</a>
                    のブロックを復号するために使用可能であると確信できる場合です。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-5">
                    <div role="heading" class="note-title marker" id="h-note-5" aria-level="3"><span>注</span></div>
                    <p class="">
                        例えば、ライセンスが期限切れの場合、そのキーは復号に使用できません。ライセンスが期限切れでない場合でも、出力保護などの使用条件が現在満たされていない場合は、そのキーは復号に使用できません。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn class="export" data-export="" data-lt="Decryption key ID|Key ID" data-plurals="key ids"
                    id="dfn-decryption-key-id" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Key ID</dfn>
            </dt>
            <dd>
                <p>
                    <a data-link-type="dfn|abstract-op" href="#dfn-key-s" class="internalDFN"
                        id="ref-for-dfn-key-s-1">key</a> はバイト列である key ID に関連付けられ、キーを一意に識別します。コンテナは <a
                        data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/media.html#media-data">media
                        data</a> 内のブロックまたはブロック集合を復号できるキーの ID を指定します。<a data-link-type="dfn|abstract-op"
                        href="#dfn-initialization-data" class="internalDFN"
                        id="ref-for-dfn-initialization-data-2">Initialization Data</a> はメディアデータを復号するために必要なキーを識別するための key
                    ID を含んでいてもよい（<em class="rfc2119">MAY</em>）。しかし、Initialization Data にメディアデータやメディアリソースで使用されるすべての key
                    ID が含まれることを要求するものではありません。<a data-link-type="dfn|abstract-op" href="#dfn-license" class="internalDFN"
                        id="ref-for-dfn-license-1">Licenses</a> が <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                        class="internalDFN" id="ref-for-dfn-cdm-12">CDM</a> に提供されると、各キーは key ID に関連付けられ、<a
                        data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-13">CDM</a> が暗号化されたメディアデータのブロックを復号する際に適切なキーを選択できるようになります。
                </p>
            </dd>
            <dt>
                <dfn data-lt="Known|Known Key" data-plurals="known keys" id="dfn-known" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">Known Key</dfn>
            </dt>
            <dd>
                <p>
                    キーがセッションに「既知」であるとは、<a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-14">CDM</a> のセッション実装がそのキーについて何らかの情報を含んでいる（特に <a
                        data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id" class="internalDFN"
                        id="ref-for-dfn-decryption-key-id-3">key
                        ID</a>）ことを指し、実際のキーの値が既知であるかどうか、またはそのキーが使用可能かどうかは問いません。既知のキーは <a data-link-type="idl"
                        href="#dom-mediakeysession-keystatuses" class="internalDFN"
                        id="ref-for-dom-mediakeysession-keystatuses-1"><code>keyStatuses</code></a> 属性を通じて公開されます。
                </p>
                <p>
                    キーは、例えば <a data-link-type="dfn|abstract-op" href="#dfn-expiration" class="internalDFN"
                        id="ref-for-dfn-expiration-1">expiration</a> によって使用不能になった場合や、削除されたが <a
                        data-link-type="dfn|abstract-op" href="#dfn-record-s-of-license-destruction" class="internalDFN"
                        id="ref-for-dfn-record-s-of-license-destruction-1">record of license destruction</a>
                    が利用可能な場合でも、既知と見なされます。キーは明示的にセッションから削除され、かつライセンス解除メッセージが確認されるときにのみ未知になります。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-6">
                    <div role="heading" class="note-title marker" id="h-note-6" aria-level="3"><span>注</span></div>
                    <p class="">
                        例えば、<a data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysession-update-2"><code>update</code></a><code>()</code>
                        呼び出しが以前キーを含んでいたライセンスを置換するような新しいライセンスを提供し、その新しいライセンスにそのキーが含まれていない場合、キーは未知になる可能性があります。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn data-plurals="licenses" id="dfn-license" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">License</dfn>
            </dt>
            <dd>
                <p>
                    ライセンスはキーシステム固有の状態情報で、一つ以上の <a data-link-type="dfn|abstract-op" href="#dfn-key-s" class="internalDFN"
                        id="ref-for-dfn-key-s-3">key(s)</a>（各々が <a data-link-type="dfn|abstract-op"
                        href="#dfn-decryption-key-id" class="internalDFN" id="ref-for-dfn-decryption-key-id-4">key
                        ID</a> に関連付けられる）および鍵利用に関する他の情報を含む場合があります。
                </p>
            </dd>
            <dt id="initialization-data">
                <dfn class="export" data-export="" id="dfn-initialization-data" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">Initialization Data</dfn>
            </dt>
            <dd>
                <div class="note" role="note" id="issue-container-generatedID-7">
                    <div role="heading" class="note-title marker" id="h-note-7" aria-level="3"><span>注</span></div>
                    <p class="">
                        <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                            id="ref-for-dfn-key-system-4">Key Systems</a>
                        は通常、ライセンス要求メッセージを構築する前に、復号対象ストリームに関する情報を含む初期化データのブロックを必要とします。このブロックは単純なキーやコンテンツ ID
                        であったり、より複雑な構造を含む場合があります。初期化データは <a data-link-type="dfn|abstract-op" href="#dfn-key-s"
                            class="internalDFN" id="ref-for-dfn-key-s-4">必要なキー</a> を一意に識別できるように常にするべきです（<em
                            class="rfc2119">SHOULD</em>）。この初期化情報はアプリケーション固有の方法で取得されるか、<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/media.html#media-data">media data</a>
                        と共に提供される場合があります（<em class="rfc2119">MAY</em>）。
                    </p>
                </div>
                <p>
                    Initialization Data は CDM がライセンス要求を生成するために使用するコンテナ固有データの総称です。
                </p>
                <p>
                    初期化データの形式はコンテナの種類に依存し、コンテナは複数の初期化データ形式をサポートしている場合があります。<dfn class="export" data-export=""
                        id="dfn-initialization-data-type" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">Initialization Data Type</dfn> は、付随する Initialization Data
                    の形式を示す文字列です。Initialization Data Type 文字列は常に大文字小文字を区別して照合されます。Initialization Data Type 文字列は小文字 ASCII
                    文字列にすることが <em class="rfc2119">RECOMMENDED</em> です。
                </p>
                <p>
                    <cite><a data-matched-text="[[[EME-INITDATA-REGISTRY]]]"
                            href="https://www.w3.org/TR/eme-initdata-registry/">Encrypted Media Extensions
                            Initialization Data Format Registry</a></cite> [<cite><a class="bibref"
                            data-link-type="biblio" href="#bib-eme-initdata-registry"
                            title="Encrypted Media Extensions Initialization Data Format Registry">EME-INITDATA-REGISTRY</a></cite>]
                    は、Initialization Data Type 文字列と各形式の仕様との対応を提供します。
                </p>
                <p>
                    ユーザーエージェントが <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#media-data">media data</a> 内で
                    Initialization Data を検出したとき、それを <a data-link-type="idl" href="#dom-mediaencryptedevent-initdata"
                        class="internalDFN" id="ref-for-dom-mediaencryptedevent-initdata-1"><code>initData</code></a>
                    属性としてアプリケーションに <a data-link-type="idl" data-lt="encrypted" href="#dfn-encrypted" class="internalDFN"
                        id="ref-for-dfn-encrypted-1"><code><code>encrypted</code></code></a> イベントで提供します。ユーザーエージェントはその時点で
                    Initialization Data を保存したり、その <em>内容</em> を使用してはなりません（<em class="rfc2119">MUST NOT</em>）。アプリケーションは
                    <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                        id="ref-for-dfn-initialization-data-3">Initialization Data</a> を <a
                        data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-16">CDM</a> に <a data-link-type="idl" data-lt="generateRequest()"
                        href="#dom-mediakeysession-generaterequest" class="internalDFN"
                        id="ref-for-dom-mediakeysession-generaterequest-2"><code>generateRequest</code></a><code>()</code>
                    を通じて提供します。ユーザーエージェントは他の手段で <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data"
                        class="internalDFN" id="ref-for-dfn-initialization-data-4">Initialization Data</a> を <a
                        data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-17">CDM</a> に提供してはなりません（<em class="rfc2119">MUST NOT</em>）。
                </p>
                <p>
                    Initialization Data は与えられたストリーム集合または <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#media-data">media data</a>
                    に対して固定値でなければなりません（<em
                        class="rfc2119">MUST</em>）。それは与えられたストリーム集合またはメディアデータの復号に必要な鍵に関連する情報のみを含まなければなりません（<em
                        class="rfc2119">MUST</em>）。Initialization Data
                    はアプリケーションデータ、クライアント固有データ、ユーザー固有データ、または実行可能なコードを含んではなりません（<em class="rfc2119">MUST NOT</em>）。
                </p>
                <p>
                    Initialization Data は Key System 固有のデータや値を含むべきではありません（<em class="rfc2119">SHOULD
                        NOT</em>）。実装は各サポートする <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data-type"
                        class="internalDFN" id="ref-for-dfn-initialization-data-type-2">Initialization Data Type</a>
                    に対して [<cite><a class="bibref" data-link-type="biblio" href="#bib-eme-initdata-registry"
                            title="Encrypted Media Extensions Initialization Data Format Registry">EME-INITDATA-REGISTRY</a></cite>]
                    で定義された共通形式をサポートしなければなりません（<em class="rfc2119">MUST</em>）。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-8">
                    <div role="heading" class="note-title marker" id="h-note-8" aria-level="3"><span>注</span></div>
                    <p class="">
                        独自形式／独自コンテンツの使用は推奨されず、独自形式のみをサポートまたは使用することは強く非推奨です。独自形式は既存のコンテンツや共通形式をサポートしない既存クライアントデバイスと共にのみ使用すべきです。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn data-lt="associable|Associable Value" id="dfn-associable" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">Associable Value</dfn>
            </dt>
            <dd>
                <p>
                    二つ以上の識別子または他の値は、同一であるか、あるいは合理的な時間と労力で相関または関連付けることが可能である場合、互いに「associable（関連付け可能）」であると言われます。そうでない場合、それらの値は
                    <dfn id="dfn-non-associable" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">non-associable（非関連付け可能）</dfn> です。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-9">
                    <div role="heading" class="note-title marker" id="h-note-9" aria-level="3"><span>注</span></div>
                    <div class="">
                        <p>
                            例えば、次の方法で作成された値は <a data-link-type="dfn|abstract-op" href="#dfn-associable"
                                class="internalDFN" id="ref-for-dfn-associable-1">associable（関連付け可能）</a> とされます：
                        </p>
                        <ul>
                            <li>
                                <p>
                                    簡単に逆変換可能なハッシュ関数を使用している場合。
                                </p>
                            </li>
                            <li>
                                <p>
                                    プレフィックスや他の部分集合を共有している場合
                                </p>
                            </li>
                            <li>
                                <p>
                                    ランダム値 N を N+10 に置き換える場合
                                </p>
                            </li>
                            <li>
                                <p>
                                    オリジンに固定値を XOR する（簡単に逆変換可能であるため）
                                </p>
                            </li>
                        </ul>
                        <p>
                            対照的に、完全に無関係または暗号学的に区別される、例えば強力な非可逆ハッシュ関数を用いた値は <a data-link-type="dfn|abstract-op"
                                href="#dfn-non-associable" class="internalDFN"
                                id="ref-for-dfn-non-associable-1">non-associable（非関連付け可能）</a> とされます。
                        </p>
                    </div>
                </div>
                <p>
                    二つ以上の識別子または他の値は <dfn id="dfn-associable-by-an-entity" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">associable by an entity（ある主体によって関連付け可能）</dfn>
                    と言われます。これは参照された主体または主体の集合が追加の主体の参加なしにそれらを相関または関連付けることが合理的な時間と労力で可能である場合を意味します。そうでない場合、それらの値は <dfn
                        id="dfn-non-associable-by-an-entity" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">non-associable by an entity（主体によって関連付け不可能）</dfn> です。
                </p>
                <p>
                    二つ以上の識別子または他の値は <dfn data-lt="non-associable by application|non-associable by the application"
                        data-plurals="non-associable by applications" id="dfn-non-associable-by-application"
                        tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">non-associable by the
                        application（アプリケーションによって関連付け不能）</dfn> と言われます。これはそれらが <a data-link-type="dfn|abstract-op"
                        href="#dfn-non-associable-by-an-entity" class="internalDFN"
                        id="ref-for-dfn-non-associable-by-an-entity-1">non-associable by an entity</a>
                    であり、その主体がアプリケーション、他のすべてのアプリケーション、およびそれらが使用または通信するサーバを含む集合である場合を意味します。そうでない場合、これらの値は <dfn
                        id="dfn-associable-by-the-application" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">associable by the application（アプリケーションによって関連付け可能）</dfn> と見なされ、これは禁止されます。
                </p>
            </dd>
            <dt>
                <dfn data-lt="distinctive|Distinctive Value" data-plurals="distinctive values" id="dfn-distinctive"
                    tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Distinctive Value</dfn>
            </dt>
            <dd>
                <p>
                    Distinctive Value
                    は、多数のユーザーまたはクライアントデバイス間で共有されない値、データの断片、その所持を示す示唆、または観測可能な振る舞いやタイミングであり、メモリ内または永続化されうるものです。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-10">
                    <div role="heading" class="note-title marker" id="h-note-10" aria-level="3"><span>注</span></div>
                    <div class="">
                        <p>
                            Distinctive Value の例には次が含まれますがこれに限定されません：
                        </p>
                        <ul>
                            <li>
                                <p>
                                    <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                        class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-1">Distinctive
                                        Identifiers（識別的識別子）</a>
                                </p>
                            </li>
                            <li>
                                <p>
                                    <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                                        class="internalDFN"
                                        id="ref-for-dfn-distinctive-permanent-identifier-s-1">Distinctive Permanent
                                        Identifiers（恒久的に識別的な識別子）</a>
                                </p>
                            </li>
                            <li>
                                <p>
                                    その他の識別子
                                </p>
                            </li>
                            <li>
                                <p>
                                    <a data-link-type="dfn|abstract-op" href="#dfn-session-id" class="internalDFN"
                                        id="ref-for-dfn-session-id-1">Session IDs</a>
                                </p>
                            </li>
                            <li>
                                <p>
                                    <a data-link-type="dfn|abstract-op" href="#dfn-license" class="internalDFN"
                                        id="ref-for-dfn-license-2">Licenses</a>
                                </p>
                            </li>
                            <li>
                                <p>
                                    その他のセッションデータ
                                </p>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-11">
                    <div role="heading" class="note-title marker" id="h-note-11" aria-level="3"><span>注</span></div>
                    <p class="">
                        Distinctive Value
                        は通常ユーザーやクライアントデバイスに固有ですが、絶対的に一意である必要はありません。例えば少数のユーザー間で共有される値でも識別的でありうる場合があります。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn data-lt="Permanent Identifier(s)|Permanent Identifier" data-plurals="permanent identifiers"
                    id="dfn-permanent-identifier-s" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Permanent
                    Identifier</dfn>
            </dt>
            <dd>
                <p>
                    Permanent Identifier
                    は何らかの方法で消去困難、またはユーザーが削除・リセット・変更するのが非自明な値、データ、所持の示唆、または観測可能な振る舞いやタイミングを指します。これには次のものが含まれますがこれに限定されません：
                </p>
                <ul>
                    <li>
                        <p>
                            ハードウェアまたはハードウェアに基づく識別子
                        </p>
                    </li>
                    <li>
                        <p>
                            工場でデバイスにプロビジョニングされた値
                        </p>
                    </li>
                    <li>
                        <p>
                            オペレーティングシステムのインストールインスタンスに関連する値
                        </p>
                    </li>
                    <li>
                        <p>
                            ユーザーエージェントのインストールインスタンスに関連する値
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-18">CDM</a> や他のソフトウェアコンポーネントに関連する値
                        </p>
                    </li>
                    <li>
                        <p>
                            クライアントで生成されても設定ファイルなどに保存された半永続的なデータ内の値
                        </p>
                    </li>
                    <li>
                        <p>
                            クライアントまたは他のユーザーアカウントに関連する値
                        </p>
                    </li>
                </ul>
                <p>
                    <dfn data-lt="Distinctive Permanent Identifier(s)|Distinctive Permanent Identifier"
                        data-plurals="distinctive permanent identifiers" id="dfn-distinctive-permanent-identifier-s"
                        tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Distinctive Permanent Identifier</dfn>
                    は、<a data-link-type="dfn|abstract-op" href="#dfn-permanent-identifier-s" class="internalDFN"
                        id="ref-for-dfn-permanent-identifier-s-1">Permanent Identifier</a> であって <a
                        data-link-type="dfn|abstract-op" href="#dfn-distinctive" class="internalDFN"
                        id="ref-for-dfn-distinctive-1">distinctive</a> なものです。
                </p>
                <p>
                    クライアント外に露出される場合、Distinctive Permanent Identifiers およびそれらから派生または関連する値は <em class="rfc2119">MUST</em>
                    暗号化されなければなりません（<a href="#encrypt-identifiers">encrypt</a>）。Distinctive Permanent Identifiers
                    はアプリケーションに対して決して露出されてはなりません（<em class="rfc2119">MUST NOT</em>）、たとえ暗号化形式であってもです。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-12">
                    <div role="heading" class="note-title marker" id="h-note-12" aria-level="3"><span>注</span></div>
                    <p class="">
                        Distinctive Permanent Identifier
                        は通常ユーザーやクライアントデバイスに固有ですが、厳密に一意である必要はありません。例えば少数のユーザー間で共有される値でも識別的でありうる場合があります。
                    </p>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-13">
                    <div role="heading" class="note-title marker" id="h-note-13" aria-level="3"><span>注</span></div>
                    <p class="">
                        Distinctive Permanent Identifier は生成や派生の範囲内ではないため、<a data-link-type="dfn|abstract-op"
                            href="#dfn-distinctive-identifier-s" class="internalDFN"
                            id="ref-for-dfn-distinctive-identifier-s-2">Distinctive Identifier</a> ではありません。
                    </p>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-14">
                    <div role="heading" class="note-title marker" id="h-note-14" aria-level="3"><span>注</span></div>
                    <p class="">
                        <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-1"><code>distinctiveIdentifier</code></a>
                        は Distinctive Permanent Identifiers の使用可否を制御します。具体的には、Distinctive Permanent Identifiers
                        が使用できるのは、<a data-link-type="idl" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-2"><code>distinctiveIdentifier</code></a>
                        メンバーが <a data-link-type="idl" data-lt="MediaKeySystemAccess" href="#dom-mediakeysystemaccess"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemaccess-1"><code>MediaKeySystemAccess</code></a> の生成に使用された値が
                        "<a data-link-type="idl" href="#dom-mediakeysrequirement-required" class="internalDFN"
                            id="ref-for-dom-mediakeysrequirement-required-1"><code>required</code></a>" の場合に限られます。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn data-lt="Distinctive Identifier(s)|Distinctive Identifier" data-plurals="distinctive identifiers"
                    id="dfn-distinctive-identifier-s" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">Distinctive Identifier</dfn>
            </dt>
            <dd>
                <div class="note" role="note" id="issue-container-generatedID-15">
                    <div role="heading" class="note-title marker" id="h-note-15" aria-level="3"><span>注</span></div>
                    <div class="">
                        <p>
                            Distinctive Identifier
                            は、クライアント外の任意の主体がウェブプラットフォーム上でユーザーが期待する以上に値を相関・関連付けできる値（不透明または暗号化形式を含む）です（例：クッキーや他のサイトデータを越えた相関）。例えば、ある値がオリジンやブラウジングプロファイル、閲覧セッションを跨いで外部の主体によって相関可能である場合、これは
                            Distinctive Identifier と見なされます。これは個別化（<a data-link-type="dfn|abstract-op"
                                href="#dfn-individualization" class="internalDFN"
                                id="ref-for-dfn-individualization-1">individualization</a>）要求に共通の値が含まれていたり、個別化要求で提供された値が中央サーバ（例：個別化サーバ）によって相関可能である場合に起こり得ます。
                        </p>
                        <p>
                            アプリケーションに露出される Distinctive Identifiers は、暗号化形式であっても、<a
                                href="#identifier-requirements">識別子要件</a>（暗号化、オリジン・プロファイルごとの一意性、消去可能性など）に従わなければなりません（<em
                                class="rfc2119">MUST</em>）。
                        </p>
                        <p>
                            Distinctive Identifier の生成や使用は本仕様の API の使用によってトリガーされますが、その識別子をアプリケーションに提供する必要はありません（ただし
                            Distinctive Permanent Identifiers は決してアプリケーションに提供されるべきではありません）。
                        </p>
                    </div>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-16">
                    <div role="heading" class="note-title marker" id="h-note-16" aria-level="3"><span>注</span></div>
                    <p class="">
                        <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-3"><code>distinctiveIdentifier</code></a>
                        は Distinctive Identifiers の使用可否を制御します。具体的には、Distinctive Identifiers が使用できるのは、<a
                            data-link-type="idl" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-4"><code>distinctiveIdentifier</code></a>
                        メンバーが <a data-link-type="idl" data-lt="MediaKeySystemAccess" href="#dom-mediakeysystemaccess"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemaccess-2"><code>MediaKeySystemAccess</code></a> の生成に使用された値が
                        "<a data-link-type="idl" href="#dom-mediakeysrequirement-required" class="internalDFN"
                            id="ref-for-dom-mediakeysrequirement-required-2"><code>required</code></a>" の場合に限られることを示します。
                    </p>
                </div>
                <p>
                    Distinctive Identifier は次のすべての基準を満たす値、データ断片、所持の示唆、または観測可能な振る舞いやタイミングです：
                </p>
                <ul>
                    <li>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-distinctive" class="internalDFN"
                                id="ref-for-dfn-distinctive-2">識別的であること（distinctive）</a>。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-17">
                            <div role="heading" class="note-title marker" id="h-note-17" aria-level="3">
                                <span>注</span>
                            </div>
                            <p class="">
                                Distinctive Identifier
                                は通常ユーザーやクライアントデバイスに固有ですが、厳密に一意である必要はありません。例えば少数のユーザー間で共有される識別子でも識別的でありえます。
                            </p>
                        </div>
                    </li>
                    <li>
                        <p>
                            それ自体、あるいはそれに関する情報や派生値がクライアント外に（暗号化形式であっても）露出されること。これにはアプリケーションやライセンス、<a
                                data-link-type="dfn|abstract-op" href="#dfn-individualization" class="internalDFN"
                                id="ref-for-dfn-individualization-2">individualization</a> サーバ、その他のサーバへの提供が含まれます。
                        </p>
                    </li>
                    <li>
                        <p>
                            次の一つ以上の性質を持つこと：
                        </p>
                        <ul>
                            <li>
                                <p>
                                    それが一つ以上の <a data-link-type="dfn|abstract-op"
                                        href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                                        id="ref-for-dfn-distinctive-permanent-identifier-s-4">Distinctive Permanent
                                        Identifier</a> から派生していること。
                                </p>
                            </li>
                            <li>
                                <p>
                                    その値を生成したプロセス（生成、<a data-link-type="dfn|abstract-op" href="#dfn-individualization"
                                        class="internalDFN"
                                        id="ref-for-dfn-individualization-3">individualization</a>、プロビジョニングなど）が一つ以上の <a
                                        data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                                        class="internalDFN"
                                        id="ref-for-dfn-distinctive-permanent-identifier-s-5">Distinctive Permanent
                                        Identifier</a> または他の Distinctive Identifier を使ったか、関連していること。
                                </p>
                            </li>
                            <li>
                                <p>
                                    それは <a href="#allow-identifiers-cleared">消去可能（clearable）</a>
                                    だが、クッキーなどのサイトデータと一緒には消去されないこと。
                                </p>
                                <div class="note" role="note" id="issue-container-generatedID-18">
                                    <div role="heading" class="note-title marker" id="h-note-18" aria-level="3">
                                        <span>注</span>
                                    </div>
                                    <p class="">
                                        例えば OS レベルの外部メカニズムを介する場合などです。
                                    </p>
                                </div>
                            </li>
                        </ul>
                        <div class="note" role="note" id="issue-container-generatedID-19">
                            <div role="heading" class="note-title marker" id="h-note-19" aria-level="3">
                                <span>注</span>
                            </div>
                            <div class="">
                                <p>
                                    アプリケーションに露出される値について規範的に禁止される他の性質には次が含まれますがこれに限定されません：
                                </p>
                                <ul>
                                    <li>
                                        <p>
                                            それが <a data-link-type="dfn|abstract-op"
                                                href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                                                id="ref-for-dfn-distinctive-permanent-identifier-s-6">Distinctive
                                                Permanent Identifier</a> であること。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            <em>消去不能（not clearable）</em> であること。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            <a href="#allow-identifiers-cleared">識別子を消去</a>
                                            した後に生成される値が、以前の値とアプリケーションによって <a data-link-type="dfn|abstract-op"
                                                href="#dfn-associable-by-the-application" class="internalDFN"
                                                id="ref-for-dfn-associable-by-the-application-1">関連付け可能</a> になること。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            値が <a href="#per-origin-per-profile-identifiers">オリジンおよびプロファイルごとに一意でない</a>
                                            こと。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            異なるオリジンの値がアプリケーションによって <a data-link-type="dfn|abstract-op"
                                                href="#dfn-associable-by-the-application" class="internalDFN"
                                                id="ref-for-dfn-associable-by-the-application-2">関連付け可能</a> であること。
                                        </p>
                                    </li>
                                </ul>
                                <p>
                                    規範的に禁止されるそのような値の例には次が含まれますがこれに限定されません：
                                </p>
                                <ul>
                                    <li>
                                        <p>
                                            すべてのオリジンで使用される単一のハードウェアベースの値。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            すべてのオリジンで使用される単一のランダムベースの値。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            すべてのオリジンで使用される単一の個別化プロセス（<a data-link-type="dfn|abstract-op"
                                                href="#dfn-individualization" class="internalDFN"
                                                id="ref-for-dfn-individualization-4">individualization</a>）により得られた値。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            上記の値の全部または一部を含む値。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            複数のオリジンで使用されるがすべてのオリジンではない単一値。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            ドメイン内のすべてのオリジンで使用される単一値。（識別子はオリジンごとでなければなりません。）
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            事前プロビジョニングされたオリジン固有値。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            生成が簡単に逆変換可能な手段で行われた値（したがってアプリケーションによって<a data-link-type="dfn|abstract-op"
                                                href="#dfn-associable-by-the-application" class="internalDFN"
                                                id="ref-for-dfn-associable-by-the-application-3">関連付け可能</a>である）。例えば、オリジンの一部を固定値と
                                            XOR するなど。
                                        </p>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </li>
                </ul>
                <div class="note" role="note" id="issue-container-generatedID-20">
                    <div role="heading" class="note-title marker" id="h-note-20" aria-level="3"><span>注</span></div>
                    <p class="">
                        Distinctive Identifier は通常それらを生成した主体によって <a data-link-type="dfn|abstract-op"
                            data-lt="associable by an entity" href="#dfn-associable-by-an-entity" class="internalDFN"
                            id="ref-for-dfn-associable-by-an-entity-4">相関可能である</a> が、アプリケーションによって相関されてはなりません（<a
                            data-link-type="dfn|abstract-op" href="#dfn-non-associable-by-application"
                            class="internalDFN" id="ref-for-dfn-non-associable-by-application-1">non-associable by
                            applications</a>）。言い換えると、そのような相関は元々 Distinctive Identifier
                        を生成した主体（例えば個別化サーバ）のみが行えるべきです。Distinctive Permanent Identifier
                        にアクセスできる主体は、その相関機能をアプリケーションに露出してはならず（<em class="rfc2119">MUST
                            NOT</em>）、他の主体や第三者に対してもそのような相関を露出しないよう注意を払うべきです（<em class="rfc2119">SHOULD</em>）。
                    </p>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-21">
                    <div role="heading" class="note-title marker" id="h-note-21" aria-level="3"><span>注</span></div>
                    <div class="">
                        <p>
                            Distinctive Identifier の例には次が含まれますがこれに限定されません：
                        </p>
                        <ul>
                            <li>
                                <p>
                                    キー要求に含まれるバイト列で、他のクライアントデバイスが含めるバイト列と異なり、Distinctive Permanent Identifier
                                    に基づく、あるいはそれを直接または間接に使用して取得されたもの。
                                </p>
                            </li>
                            <li>
                                <p>
                                    キー要求に含まれる公開鍵で、他のクライアントデバイスの要求に含まれる公開鍵と異なり、Distinctive Permanent Identifier
                                    に基づく、あるいはそれを直接または間接に使用して取得されたもの。
                                </p>
                            </li>
                            <li>
                                <p>
                                    例えば一部データに署名するなど、他のクライアントデバイスが持たない秘密鍵の保有を示す証明で、Distinctive Permanent Identifier
                                    に基づく、あるいはそれを直接または間接に使用して取得されたもの。
                                </p>
                            </li>
                            <li>
                                <p>
                                    そのような鍵の識別子。
                                </p>
                            </li>
                            <li>
                                <p>
                                    第1の値が直接露出されていなくても、それを使って導出された別の露出される値。
                                </p>
                            </li>
                            <li>
                                <p>
                                    他の Distinctive Identifier から導出された値。
                                </p>
                            </li>
                            <li>
                                <p>
                                    個別化サーバなどに報告されたランダム値で、Distinctive Permanent Identifier と共に提供されたか、またはそのようなサーバから
                                    Distinctive Permanent Identifier 提供後に返されたもの。
                                </p>
                            </li>
                            <li>
                                <p>
                                    工場でデバイスにプロビジョニングされた一意の値から導出された値。
                                </p>
                            </li>
                            <li>
                                <p>
                                    工場で埋め込まれた一意のハードウェア値（例：MAC アドレスやシリアル番号）やソフトウェア値（例：OS インストールインスタンスや OS
                                    ユーザーアカウント名）から導出された値。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                        id="ref-for-dfn-cdm-19">CDM</a> バイナリや <a data-link-type="dfn|abstract-op"
                                        href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-20">CDM</a>
                                    が使用する他のファイルに埋め込まれた一意の値から導出された値。
                                </p>
                            </li>
                        </ul>
                        <p>
                            Distinctive Identifier でない例には次が含まれます：
                        </p>
                        <ul>
                            <li>
                                <p>
                                    インストールベースが大きい場合、ある CDM バージョンのすべてのコピーで共有される公開鍵。
                                </p>
                            </li>
                            <li>
                                <p>
                                    一意だが一つのセッションでのみ使用されるノンスやエフェメラルキー。
                                </p>
                            </li>
                            <li>
                                <p>
                                    外部に露出しない値（個別化や類似の方法を含めて）で、クライアント外に派生形や類似の形で露出されないもの。
                                </p>
                            </li>
                            <li>
                                <p>
                                    例えばビデオパイプラインと <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                        class="internalDFN" id="ref-for-dfn-cdm-22">CDM</a> 間の認証で使用されるデバイス固有キーのように、CDM
                                    がそれらの認証をアプリケーションに流さず、代わりに Distinctive Identifier を構成しないキーを用いて新たな認証を行う場合。
                                </p>
                            </li>
                            <li>
                                <p>
                                    クッキー等と共に完全に消去可能であり、その後中央サーバ（例えば個別化サーバ）によっても相関され得ない（non-associable）新しい値に置き換えられる値、かつ以下のいずれかを満たすもの。
                                </p>
                                <ul>
                                    <li>
                                        <p>
                                            生成に Distinctive Permanent Identifier や Distinctive Identifier が関与していないこと。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            システムからの入力なしに生成されたランダム値であること。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            サーバから提供された値であり、他の Distinctive Identifier の使用や知識を伴わないこと。
                                        </p>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </dd>
            <dt>
                <dfn class="lint-ignore" id="dfn-use-of-distinctive-identifiers-and-distinctive-permanent-identifiers"
                    tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Use of Distinctive Identifiers and
                    Distinctive Permanent
                    Identifiers</dfn>
            </dt>
            <dd>
                <p>
                    実装、設定、インスタンス、またはオブジェクトが <dfn
                        data-lt="use Distinctive Identifier(s)|use of Distinctive Identifier(s)|uses Distinctive Identifier(s)"
                        id="dfn-use-distinctive-identifier-s" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">Distinctive Identifier(s) を使用する</dfn>
                    とは、そのライフタイム中または関連するエンティティのライフタイム中のいかなる時点でも、アプリケーションやライセンス、<a data-link-type="dfn|abstract-op"
                        href="#dfn-individualization" class="internalDFN"
                        id="ref-for-dfn-individualization-10">individualization</a> サーバ、その他のサーバに対して、たとえ暗号化形式であっても一つ以上の
                    <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-identifier-s-3">Distinctive
                        Identifier(s)</a>、それらに関する情報、またはそれらから派生・関連する値を露出することを意味します。
                </p>
                <p>
                    実装、設定、インスタンス、またはオブジェクトが <dfn
                        data-lt="use Distinctive Permanent Identifier(s)|using Distinctive Permanent Identifier(s)|uses Distinctive Permanent Identifier(s)"
                        id="dfn-use-distinctive-permanent-identifier-s" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">Distinctive Permanent Identifier(s) を使用する</dfn>
                    とは、そのライフタイム中または関連するエンティティのライフタイム中のいかなる時点でも、たとえ暗号化形式であっても一つ以上の <a data-link-type="dfn|abstract-op"
                        href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-permanent-identifier-s-14">Distinctive Permanent
                        Identifier(s)</a>、それらに関する情報、またはそれらから派生・関連する値をクライアント外に露出することを意味します。これには個別化サーバへの提供などが含まれます。こうした値はアプリケーションに提供されてはなりません（<em
                        class="rfc2119">MUST NOT</em>）。
                </p>
                <p>
                    実装、設定、インスタンス、またはオブジェクトが <dfn
                        data-lt="use Distinctive Identifier(s) or Distinctive Permanent Identifier(s)|use of Distinctive Identifier(s) or Distinctive Permanent Identifier(s)|using Distinctive Identifier(s) or Distinctive Permanent Identifier(s)|uses Distinctive Identifier(s) or Distinctive Permanent Identifier(s)"
                        id="dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s" tabindex="0"
                        aria-haspopup="dialog" data-dfn-type="dfn">
                        uses Distinctive Identifier(s) or Distinctive Permanent Identifier(s)</dfn> とは、それが <a
                        data-link-type="dfn|abstract-op" href="#dfn-use-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-use-distinctive-identifier-s-1">uses Distinctive Identifier(s)</a> および／または <a
                        data-link-type="dfn|abstract-op" href="#dfn-use-distinctive-permanent-identifier-s"
                        class="internalDFN" id="ref-for-dfn-use-distinctive-permanent-identifier-s-1">uses Distinctive
                        Permanent Identifier(s)</a> のいずれかであることを意味します。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-22">
                    <div role="heading" class="note-title marker" id="h-note-22" aria-level="3"><span>注</span></div>
                    <p class="">
                        <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-5"><code>distinctiveIdentifier</code></a>
                        は Distinctive Identifiers および Distinctive Permanent Identifiers の使用可否を制御します。具体的には、これらの識別子は <a
                            data-link-type="idl" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-6"><code>distinctiveIdentifier</code></a>
                        メンバーが <a data-link-type="idl" data-lt="MediaKeySystemAccess" href="#dom-mediakeysystemaccess"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemaccess-3"><code>MediaKeySystemAccess</code></a> の生成に使用された値が
                        "<a data-link-type="idl" href="#dom-mediakeysrequirement-required" class="internalDFN"
                            id="ref-for-dom-mediakeysrequirement-required-3"><code>required</code></a>"
                        の場合にのみ使用できることを示します。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn class="lint-ignore" id="dfn-cross-origin-limitations" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">Cross Origin Limitations</dfn>
            </dt>
            <dd>
                <p>
                    再生中、埋め込まれたメディアデータは埋め込み元の <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                    のスクリプトに晒されます。API が <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data"
                        class="internalDFN" id="ref-for-dfn-initialization-data-5">Initialization Data</a> を <a
                        data-link-type="idl" data-lt="encrypted" href="#dfn-encrypted" class="internalDFN"
                        id="ref-for-dfn-encrypted-2"><code><code>encrypted</code></code></a> イベントで提供するためには、<a
                        data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/media.html#media-data">media
                        data</a> は埋め込みページと CORS-same-origin でなければなりません（<em
                        class="rfc2119">MUST</em>）。メディアデータが埋め込み文書とクロスオリジンである場合、著者は <a data-link-type="attribute"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-crossorigin"><code>crossOrigin</code></a>
                    属性を <a data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement"
                        class="internalDFN" id="ref-for-dom-htmlmediaelement-3"><code>HTMLMediaElement</code></a>
                    に設定し、メディアデータのレスポンスに CORS ヘッダを付与して CORS-same-origin にするべきです（<em class="rfc2119">SHOULD</em>）。
                </p>
            </dd>
            <dt>
                <dfn id="dfn-mixed-content-limitations" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Mixed
                    Content Limitations</dfn>
            </dt>
            <dd>
                <p>
                    再生中、埋め込まれたメディアデータは埋め込み元の <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                    のスクリプトに晒されます。API が <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data"
                        class="internalDFN" id="ref-for-dfn-initialization-data-6">Initialization Data</a> を <a
                        data-link-type="idl" data-lt="encrypted" href="#dfn-encrypted" class="internalDFN"
                        id="ref-for-dfn-encrypted-3"><code><code>encrypted</code></code></a> イベントで提供するためには、<a
                        data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/media.html#media-data">media
                        data</a> は Mixed Content であってはなりません（<em class="rfc2119">MUST NOT</em>）[<cite><a class="bibref"
                            data-link-type="biblio" href="#bib-mixed-content"
                            title="Mixed Content">MIXED-CONTENT</a></cite>]。
                </p>
            </dd>
            <dt>
                <dfn id="dfn-time" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Time</dfn>
            </dt>
            <dd>
                <p>
                    時刻（Time）は <a class="external"
                        href="https://tc39.github.io/ecma262/#sec-time-values-and-time-range">ECMAScript の Time Values
                        and Time Range</a> に表現されるものと同等でなければなりません（<em class="rfc2119">MUST</em>）。
                </p>
                <p>
                    該当する時刻が存在しない、または時刻が不確定である場合、Time は <code>NaN</code> をとります。<code>Infinity</code> の値を持つべきではありません。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-23">
                    <div role="heading" class="note-title marker" id="h-note-23" aria-level="3"><span>注</span></div>
                    <p class="">
                        Time は通常ミリ秒精度の時刻を表しますが、それだけでは十分な定義ではありません。定義された Time Values and Time Range 参照が他の重要な要件を追加します。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn data-lt="expiration|Expiration Time" id="dfn-expiration" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">Expiration Time</dfn>
            </dt>
            <dd>
                <p>
                    キーがもはや <a data-link-type="dfn|abstract-op" href="#dfn-usable-for-decryption" class="internalDFN"
                        id="ref-for-dfn-usable-for-decryption-2">usable for decryption</a> ではなくなる時刻を指します。
                </p>
            </dd>
            <dt>
                <dfn data-plurals="browsing profiles" id="dfn-browsing-profile" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">Browsing Profile</dfn>
            </dt>
            <dd>
                <p>
                    与えられたマシン上のユーザーエージェントは、アプリケーションに可視な状態やデータに関して独立して振る舞うことが期待される様々なコンテキストやモード、一時的状態で実行できる場合があります。特に、保存されたすべてのデータは独立していることが期待されます。本仕様ではそのような独立したコンテキストやモードを「Browsing
                    Profiles」と呼びます。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-24">
                    <div role="heading" class="note-title marker" id="h-note-24" aria-level="3"><span>注</span></div>
                    <p class="">
                        そのような独立コンテキストの例としては、ユーザーエージェントが異なる OS
                        ユーザーアカウントで実行されている場合や、単一アカウントで複数の独立プロファイルを定義する機能をユーザーエージェントが提供している場合などがあります。
                    </p>
                </div>
            </dd>
        </dl>
    </section>
    <section id="obtaining-access-to-key-systems">
        <div class="header-wrapper">
            <h2 id="x3-obtaining-access-to-key-systems"><bdi class="secno">3. </bdi>
                キーシステムへのアクセスの取得
            </h2><a class="self-link" href="#obtaining-access-to-key-systems" aria-label="Permalink for Section 3."></a>
        </div>

        <p>
            このセクションでは、<a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                id="ref-for-dfn-key-system-5">Key System</a> へのアクセスを取得する仕組みを定義します。リクエストに機能を含めることで、機能検出も可能になります。
        </p>
        <p>
            アルゴリズムの手順は、プロミスが拒否されると常に中止されます。
        </p>
        <section id="permissions-policy-integration">
            <div class="header-wrapper">
                <h3 id="x3-1-permissions-policy-integration"><bdi class="secno">3.1 </bdi>
                    Permissions Policy の統合
                </h3><a class="self-link" href="#permissions-policy-integration"
                    aria-label="Permalink for Section 3.1"></a>
            </div>

            <p>
                <a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                    href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                    id="ref-for-dom-navigator-requestmediakeysystemaccess-1"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                は、文字列
                <code><dfn id="dfn-encrypted-media" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">encrypted-media</dfn></code>
                によって識別される <a data-link-type="dfn"
                    href="https://www.w3.org/TR/permissions-policy-1/#policy-controlled-feature">ポリシー制御機能</a> です。
                その <a data-link-type="dfn"
                    href="https://www.w3.org/TR/permissions-policy-1/#policy-controlled-feature-default-allowlist">デフォルト許可リスト</a>
                は <code>'self'</code> です [<cite><a class="bibref" data-link-type="biblio" href="#bib-permissions-policy"
                        title="Permissions Policy">PERMISSIONS-POLICY</a></cite>].
            </p>
        </section>
        <section data-dfn-for="Navigator" id="navigator-extension-requestmediakeysystemaccess">
            <div class="header-wrapper">
                <h3 id="x3-2-navigator-extension-requestmediakeysystemaccess"><bdi class="secno">3.2 </bdi>
                    <dfn id="dom-navigator" data-idl="interface" data-title="Navigator" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog" data-dfn-type="dfn"><code>Navigator</code></dfn> の拡張:
                    <code>requestMediaKeySystemAccess()</code>
                </h3><a class="self-link" href="#navigator-extension-requestmediakeysystemaccess"
                    aria-label="Permalink for Section 3.2"></a>
            </div>

            <pre class="idl def" id="webidl-571417346"><span class="idlHeader"><a class="self-link" href="#webidl-571417346">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-navigator-partial-1" data-title="Navigator">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
partial interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-navigator" id="ref-for-dom-navigator-1"><code>Navigator</code></a> {<span data-idl="" class="idlMethod" id="idl-def-navigator-requestmediakeysystemaccess-keysystem-supportedconfigurations" data-title="requestMediaKeySystemAccess" data-dfn-for="Navigator">
  [<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-mediakeysystemaccess" class="internalDFN" id="ref-for-dom-mediakeysystemaccess-4"><code>MediaKeySystemAccess</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-navigator-requestmediakeysystemaccess" id="ref-for-dom-navigator-requestmediakeysystemaccess-2"><code>requestMediaKeySystemAccess</code></a> (<span class="idlType">
      <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">keySystem</span>,<span class="idlType">
      <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-mediakeysystemconfiguration" class="internalDFN" id="ref-for-dom-mediakeysystemconfiguration-1"><code>MediaKeySystemConfiguration</code></a>&gt;</span> <span class="idlParamName">supportedConfigurations</span>);</span>
};</span></code></pre>
            <section id="methods">
                <div class="header-wrapper">
                    <h4 id="x3-2-1-methods"><bdi class="secno">3.2.1 </bdi>
                        メソッド
                    </h4><a class="self-link" href="#methods" aria-label="Permalink for Section 3.2.1"></a>
                </div>

                <dl class="methods">
                    <dt>
                        <dfn data-export="" data-dfn-type="method" id="dom-navigator-requestmediakeysystemaccess"
                            data-idl="operation" data-title="requestMediaKeySystemAccess()" data-dfn-for="Navigator"
                            data-type="Promise"
                            data-lt="requestMediaKeySystemAccess()|requestMediaKeySystemAccess(keySystem, supportedConfigurations)"
                            data-local-lt="Navigator.requestMediaKeySystemAccess|Navigator.requestMediaKeySystemAccess()|requestMediaKeySystemAccess"
                            tabindex="0" aria-haspopup="dialog"><code>requestMediaKeySystemAccess()</code></dfn>
                    </dt>
                    <dd>
                        <div class="note" role="note" id="issue-container-generatedID-25">
                            <div role="heading" class="note-title marker" id="h-note-25" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                このメソッドを呼び出すと、ユーザーの同意を求めるなどの <em>ユーザーに見える影響</em> が生じる可能性があります。このメソッドは、提供された構成で <a
                                    data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                                    id="ref-for-dom-mediakeys-7"><code>MediaKeys</code></a>
                                オブジェクトを作成して使用する意図がある場合にのみ呼び出すべきです。
                            </p>
                        </div>
                        <p>
                            指定された <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-6">Key System</a>
                            へのアクセスを要求します。少なくともその要素の一つでサポートされる構成が指定されていなければなりません。結果の <a data-link-type="idl"
                                data-lt="MediaKeySystemAccess" href="#dom-mediakeysystemaccess" class="internalDFN"
                                id="ref-for-dom-mediakeysystemaccess-5"><code>MediaKeySystemAccess</code></a>
                            は、そのような最初の要素に対応します。
                        </p>
                        <p>
                            同意のプロンプトなどの権限チェックやユーザーとの対話は、プロミスを解決する前に <em class="rfc2119">必ず</em> 実行されなければなりません。
                        </p>
                        <p>
                            <code>keySystem</code> がサポートされていないか許可されていない場合（少なくとも <code>supportedConfigurations</code>
                            のいずれかで）、プロミスは拒否されます。そうでなければ、新しい <a data-link-type="idl" data-lt="MediaKeySystemAccess"
                                href="#dom-mediakeysystemaccess" class="internalDFN"
                                id="ref-for-dom-mediakeysystemaccess-6"><code>MediaKeySystemAccess</code></a>
                            オブジェクトで解決されます。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-26">
                            <div role="heading" class="note-title marker" id="h-note-26" aria-level="5">
                                <span>注</span>
                            </div>
                            <div class="">
                                <p>
                                    このメソッドは <code>[SecureContext]</code> IDL 属性に示されている通り、<a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context">セキュアコンテキスト</a>
                                    にのみ公開されます。
                                </p>
                                <p>
                                    セキュアコンテキストを要求することは、その他のセキュリティやプライバシーに関する要件や推奨事項の代替ではありません。実装は関連するすべての要件を満たし、関連する推奨事項に従うべきであり、セキュアコンテキストにおけるリスクが類似するようにするべきです。
                                </p>
                            </div>
                        </div>
                        <p>
                            このメソッドが呼び出されたとき、ユーザーエージェントは次の手順を <em class="rfc2119">必ず</em> 実行しなければなりません:
                        </p>
                        <ol class="method-algorithm">

                            <li>
                                <p>
                                    もし <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> の <a
                                        data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">relevant
                                        global object</a> の <a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window">associated
                                        Document</a> が <a href="#dfn-encrypted-media" class="internalDFN"
                                        data-link-type="dfn"
                                        id="ref-for-dfn-encrypted-media-2"><code><code>encrypted-media</code></code></a>
                                    機能を <a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use">使用することを許可されていない</a>
                                    場合、"<a data-link-type="exception" data-lt="SecurityError"
                                        href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a>"
                                    <a data-link-type="interface" data-lt="DOMException"
                                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                                    をスローし、これらの手順を中止します。
                                </p>
                            </li>
                            <li>
                                <p>
                                    もし <var>keySystem</var> が空文字列であれば、新しく作成した <a data-link-type="idl"
                                        data-lt="TypeError" href="#dfn-typeerror" class="internalDFN"
                                        id="ref-for-dfn-typeerror-1"><code><code>TypeError</code></code></a>
                                    で拒否されたプロミスを返します。
                                </p>
                            </li>
                            <li>
                                <p>
                                    もし <var>supportedConfigurations</var> が空であれば、新しく作成した <a data-link-type="idl"
                                        data-lt="TypeError" href="#dfn-typeerror" class="internalDFN"
                                        id="ref-for-dfn-typeerror-2"><code><code>TypeError</code></code></a>
                                    で拒否されたプロミスを返します。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <var>document</var> を呼び出しコンテキストの <a data-link-type="dfn"
                                        href="https://dom.spec.whatwg.org/#concept-document">Document</a> とします。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <var>origin</var> を <var>document</var> の <a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                                    とします。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <var>promise</var> を新しいプロミスとします。
                                </p>
                            </li>
                            <li>
                                <p>
                                    次の手順を並行して実行します:
                                </p>
                                <ol>
                                    <li>
                                        <p>
                                            もし <var>keySystem</var> がユーザーエージェントによってサポートされている <a
                                                data-link-type="dfn|abstract-op" href="#dfn-key-system"
                                                class="internalDFN" id="ref-for-dfn-key-system-7">Key Systems</a>
                                            の一つでない場合、<var>promise</var> を <a data-link-type="idl"
                                                data-lt="NotSupportedError" href="#dfn-notsupportederror"
                                                class="internalDFN"
                                                id="ref-for-dfn-notsupportederror-1"><code><code>NotSupportedError</code></code></a>
                                            で拒否します。文字列比較は大文字小文字を区別します。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            <var>implementation</var> を <var>keySystem</var> の実装とします。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            <code>supportedConfigurations</code> の各値について:
                                        </p>
                                        <ol>
                                            <li>
                                                <p>
                                                    <var>candidate configuration</var> をその値とします。
                                                </p>
                                            </li>
                                            <li>
                                                <p>
                                                    <var>supported configuration</var> を、<a
                                                        data-link-type="dfn|abstract-op"
                                                        href="#dfn-get-supported-configuration" class="internalDFN"
                                                        id="ref-for-dfn-get-supported-configuration-1">Get Supported
                                                        Configuration</a> アルゴリズムを <var>implementation</var>、
                                                    <var>candidate configuration</var>、および <var>origin</var>
                                                    に対して実行した結果とします。
                                                </p>
                                            </li>
                                            <li>
                                                <p>
                                                    もし <var>supported configuration</var> が <code>NotSupported</code>
                                                    でない場合、次の手順を実行します:
                                                </p>
                                                <ol>
                                                    <li>
                                                        <p>
                                                            <var>access</var> を新しい <a data-link-type="idl"
                                                                data-lt="MediaKeySystemAccess"
                                                                href="#dom-mediakeysystemaccess" class="internalDFN"
                                                                id="ref-for-dom-mediakeysystemaccess-7"><code>MediaKeySystemAccess</code></a>
                                                            オブジェクトとし、次のように初期化します:
                                                        </p>
                                                        <ol>
                                                            <li>
                                                                <p>
                                                                    <a data-link-type="idl"
                                                                        href="#dom-mediakeysystemaccess-keysystem"
                                                                        class="internalDFN"
                                                                        id="ref-for-dom-mediakeysystemaccess-keysystem-1"><code>keySystem</code></a>
                                                                    属性を <var>keySystem</var> に設定します。
                                                                </p>
                                                            </li>
                                                            <li>
                                                                <p>
                                                                    <var>configuration</var> の値を <var>supported
                                                                        configuration</var> とします。
                                                                </p>
                                                            </li>
                                                            <li>
                                                                <p>
                                                                    <var>cdm implementation</var> の値を
                                                                    <var>implementation</var> とします。
                                                                </p>
                                                            </li>
                                                        </ol>
                                                    </li>
                                                    <li>
                                                        <p>
                                                            <var>promise</var> を <var>access</var>
                                                            で解決し、このアルゴリズムの並行手順を中止します。
                                                        </p>
                                                    </li>
                                                </ol>
                                            </li>
                                        </ol>
                                    </li>
                                    <li>
                                        <p>
                                            <var>promise</var> を <a data-link-type="idl" data-lt="NotSupportedError"
                                                href="#dfn-notsupportederror" class="internalDFN"
                                                id="ref-for-dfn-notsupportederror-2"><code><code>NotSupportedError</code></code></a>
                                            で拒否します。
                                        </p>
                                        <div class="note" role="note" id="issue-container-generatedID-27">
                                            <div role="heading" class="note-title marker" id="h-note-27" aria-level="5">
                                                <span>注</span>
                                            </div>
                                            <p class="">
                                                <code>keySystem</code>
                                                がサポート／許可されていないか、<code>supportedConfigurations</code>
                                                内のどの構成もサポート／許可されなかったことを示します。
                                            </p>
                                        </div>
                                    </li>
                                </ol>
                            </li>
                            <li>
                                <p>
                                    <var>promise</var> を返します。
                                </p>
                            </li>
                        </ol>
                    </dd>
                </dl>
            </section>
            <section id="algorithms">
                <div class="header-wrapper">
                    <h4 id="x3-2-2-algorithms"><bdi class="secno">3.2.2 </bdi>
                        アルゴリズム
                    </h4><a class="self-link" href="#algorithms" aria-label="Permalink for Section 3.2.2"></a>
                </div>

                <section id="get-supported-configuration">
                    <div class="header-wrapper">
                        <h5 id="x3-2-2-1-get-supported-configuration"><bdi class="secno">3.2.2.1 </bdi>
                            <dfn class="export" data-export="" id="dfn-get-supported-configuration" tabindex="0"
                                aria-haspopup="dialog" data-dfn-type="dfn">Get Supported Configuration</dfn>
                        </h5><a class="self-link" href="#get-supported-configuration"
                            aria-label="Permalink for Section 3.2.2.1"></a>
                    </div>

                    <p>
                        <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                            id="ref-for-dfn-key-system-8">Key Systems</a> 実装 <var>implementation</var>、<a
                            data-link-type="idl" data-lt="MediaKeySystemConfiguration"
                            href="#dom-mediakeysystemconfiguration" class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-2"><code>MediaKeySystemConfiguration</code></a>
                        の <var>candidate configuration</var>、および <var>origin</var> が与えられたとき、このアルゴリズムは適切にサポートされる構成または
                        <code>NotSupported</code> を返します。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-28">
                        <div role="heading" class="note-title marker" id="h-note-28" aria-level="6"><span>注</span>
                        </div>
                        <p class="">
                            <var>candidate configuration</var> の未認識の辞書メンバーは [<cite><a class="bibref"
                                    data-link-type="biblio" href="#bib-webidl"
                                    title="Web IDL Standard">WEBIDL</a></cite>]
                            に従って無視され、このアルゴリズムに渡されることはありません。したがって、それらは構成の一部とは見なされません。
                        </p>
                    </div>
                    <div class="note" role="note" id="issue-container-generatedID-29">
                        <div role="heading" class="note-title marker" id="h-note-29" aria-level="6"><span>注</span>
                        </div>
                        <div class="">
                            <p>
                                特定の構成では、ユーザーの同意を取得したりユーザーに通知することが必要になる場合があります。ユーザーエージェントは特定の構成に対して同意が必要かどうか、またその同意が他の構成にも適用され得るかどうかを決定する際にある程度の柔軟性を持ちます。例えば、ある構成への同意は、より制限の強い構成への同意も意味することがあります。同様に、ある構成への同意拒否は、より強力で制限の少ない構成への拒否を意味するかもしれません。
                            </p>
                            <p>
                                サポートされる構成（サポートされる音声・映像コーデックを含む）は、Distinctive Identifier(s)
                                や永続状態のようなオプションの機能の利用可否に依存する場合があります。以下のアルゴリズムは、サポートされ、かつユーザーの同意がある（または同意が不要な）構成を逐次的に探します。
                            </p>
                            <p>
                                ユーザーエージェントは、適切な場合には、少なくとも <a data-link-type="idl"
                                    data-lt="requestMediaKeySystemAccess()"
                                    href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                                    id="ref-for-dom-navigator-requestmediakeysystemaccess-3"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                                アルゴリズムの実行期間中は、以前の同意応答を再利用して、類似の構成に対してユーザーへ繰り返し要求することを避けるべきです。
                            </p>
                            <p>
                                以下の手順内の変数 <var>restrictions</var>
                                は、このアルゴリズムの実行中あるいはそのオリジンに対して保持されている同意情報に基づき、ユーザー同意が拒否された構成を表します。これは候補構成または累積構成に対してユーザー同意が拒否されているかどうかを判定するために使用されます。累積構成のすべての派生構成が既に拒否されている場合、その累積構成について同意は拒否されたと見なされます。<var>restrictions</var>
                                の内部表現は実装依存です。
                            </p>
                        </div>
                    </div>
                    <ol>
                        <li>
                            <p>
                                <var>supported configuration</var> を <code>ConsentDenied</code> とします。
                            </p>
                        </li>
                        <li>
                            <p>
                                <var>restrictions</var> を、ユーザー同意が拒否された構成が存在しないことを示すように初期化します。
                            </p>
                        </li>
                        <li>
                            <p>
                                <var>supported configuration</var> が <code>ConsentDenied</code> の間、次の手順を繰り返します:
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        <var>supported configuration</var> と、もし提供されれば <var>restrictions</var> を、<a
                                            data-link-type="dfn|abstract-op"
                                            href="#dfn-get-supported-configuration-and-consent" class="internalDFN"
                                            id="ref-for-dfn-get-supported-configuration-and-consent-1">Get Supported
                                            Configuration and Consent</a> アルゴリズムを <var>implementation</var>、
                                        <var>candidate configuration</var>、<var>restrictions</var> および
                                        <var>origin</var> に対して実行した結果として設定します。
                                    </p>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                <var>supported configuration</var> を返します。
                            </p>
                        </li>
                    </ol>
                </section>
                <section id="get-supported-configuration-and-consent">
                    <div class="header-wrapper">
                        <h5 id="x3-2-2-2-get-supported-configuration-and-consent"><bdi class="secno">3.2.2.2 </bdi>
                            <dfn id="dfn-get-supported-configuration-and-consent" tabindex="0" aria-haspopup="dialog"
                                data-dfn-type="dfn">Get Supported Configuration and Consent</dfn>
                        </h5><a class="self-link" href="#get-supported-configuration-and-consent"
                            aria-label="Permalink for Section 3.2.2.2"></a>
                    </div>

                    <p>
                        <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                            id="ref-for-dfn-key-system-9">Key Systems</a> 実装 <var>implementation</var>、
                        <a data-link-type="idl" data-lt="MediaKeySystemConfiguration"
                            href="#dom-mediakeysystemconfiguration" class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-3"><code>MediaKeySystemConfiguration</code></a>
                        の <var>candidate configuration</var>、
                        <var>restrictions</var>、および <var>origin</var>
                        が与えられたとき、このアルゴリズムはサポートされる構成、<code>NotSupported</code>、または <code>ConsentDenied</code>
                        のいずれかを適切に返し、<code>ConsentDenied</code> の場合は <var>restrictions</var> も返します。
                    </p>
                    <ol>
                        <li>
                            <p>
                                <var>accumulated configuration</var> を新しい <a data-link-type="idl"
                                    data-lt="MediaKeySystemConfiguration" href="#dom-mediakeysystemconfiguration"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-4"><code>MediaKeySystemConfiguration</code></a>
                                辞書として作成します。
                            </p>
                        </li>
                        <li>
                            <p>
                                <var>accumulated configuration</var> の <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-label" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-label-1"><code>label</code></a> メンバーを
                                <var>candidate
                                    configuration</var> の同名メンバーと等しく設定します。
                            </p>
                        </li>
                        <li>
                            <p>
                                もし <var>candidate configuration</var> の <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-initdatatypes" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-initdatatypes-1"><code>initDataTypes</code></a>
                                メンバーが空でないなら、次の手順を実行します:
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        <var>supported types</var> を空の <a data-link-type="interface" data-lt="DOMString"
                                            href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>
                                        の列として初期化します。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>candidate configuration</var> の <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-initdatatypes" class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-initdatatypes-2"><code>initDataTypes</code></a>
                                        メンバーの各値について:
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                <var>initDataType</var> をその値とします。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                もし <var>implementation</var> が <var>initDataType</var>
                                                に基づいてリクエストを生成することをサポートしているなら、<var>initDataType</var> を <var>supported
                                                    types</var> に追加します。文字列比較は大文字小文字を区別します。空文字列は決してサポートされません。
                                            </p>
                                            <div class="note" role="note" id="issue-container-generatedID-30">
                                                <div role="heading" class="note-title marker" id="h-note-30"
                                                    aria-level="6"><span>注</span></div>
                                                <p class="">
                                                    <var>initDataType</var>
                                                    は、後の手順で構成が予期せず拒否されるのを避けるために、コンテンツタイプに依存せずサポートされている必要があります（<em
                                                        class="rfc2119">MUST</em>）。<var>initDataType</var>
                                                    のサポートにはライセンス生成と、適切な場合はメディアデータからの抽出の両方が含まれます。詳細は <a
                                                        href="#initialization-data-type-support-requirements">Initialization
                                                        Data Type Support requirements</a> を参照してください。
                                                </p>
                                            </div>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        もし <var>supported types</var> が空であれば <code>NotSupported</code> を返します。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>accumulated configuration</var> の <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-initdatatypes" class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-initdatatypes-3"><code>initDataTypes</code></a>
                                        メンバーを <var>supported types</var> に設定します。
                                    </p>
                                </li>
                            </ol>
                        </li>

                        <li>
                            <p>
                                <var>distinctive identifier requirement</var> を <var>candidate configuration</var> の <a
                                    data-link-type="idl" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-7"><code>distinctiveIdentifier</code></a>
                                メンバーの値とします。
                            </p>
                        </li>
                        <li>
                            <p>
                                もし <var>distinctive identifier requirement</var> が "<a data-link-type="idl"
                                    href="#dom-mediakeysrequirement-optional" class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-optional-1"><code>optional</code></a>" であり、<a
                                    data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                    class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-6">Distinctive
                                    Identifiers</a> が <var>restrictions</var> に従って許可されていない場合、<var>distinctive identifier
                                    requirement</var> を "<a data-link-type="idl"
                                    href="#dom-mediakeysrequirement-not-allowed" class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-not-allowed-1"><code>not-allowed</code></a>"
                                に設定します。
                            </p>
                        </li>
                        <li>
                            <p>
                                次のリストから <var>distinctive identifier requirement</var> に対応する手順を実行します:
                            </p>
                            <dl class="switch">
                                <dt>
                                    "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysrequirement-required-4"><code>required</code></a>"
                                </dt>
                                <dd>
                                    <p>
                                        もし <var>implementation</var> が <var>accumulated configuration</var> と
                                        <var>restrictions</var> の組み合わせで <a data-link-type="dfn|abstract-op"
                                            href="#dfn-use-distinctive-identifier-s" class="internalDFN"
                                            id="ref-for-dfn-use-distinctive-identifier-s-2">Distinctive Identifier(s)
                                            の使用</a> をサポートしていない場合、<code>NotSupported</code> を返します。
                                    </p>
                                </dd>
                                <dt>
                                    "<a data-link-type="idl" href="#dom-mediakeysrequirement-optional"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysrequirement-optional-2"><code>optional</code></a>"
                                </dt>
                                <dd>
                                    <p>
                                        続行します。
                                    </p>
                                </dd>
                                <dt>
                                    "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysrequirement-not-allowed-2"><code>not-allowed</code></a>"
                                </dt>
                                <dd>
                                    <p>
                                        もし <var>implementation</var> が <var>accumulated configuration</var> と
                                        <var>restrictions</var> の組み合わせで <a data-link-type="dfn|abstract-op"
                                            href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                                            class="internalDFN"
                                            id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-1">Distinctive
                                            Identifier(s) または Distinctive Permanent Identifier(s) の使用</a>
                                        を要求する場合、<code>NotSupported</code> を返します。
                                    </p>
                                </dd>
                            </dl>
                            <div class="note" role="note" id="issue-container-generatedID-31">
                                <div role="heading" class="note-title marker" id="h-note-31" aria-level="6">
                                    <span>注</span>
                                </div>
                                <div class="">
                                    <p>
                                        <var>accumulated configuration</var> と <var>restrictions</var>
                                        の組み合わせとは、<var>accumulated configuration</var> のすべての内容を含み、かつ
                                        <var>restrictions</var> によって拒否されない可能性のあるすべての構成を意味します。
                                    </p>
                                    <p>
                                        実装がこの組み合わせでサポートする構成のうち少なくとも1つをサポートしていれば、その機能はこの組み合わせでサポートされていると見なされます。
                                    </p>
                                    <p>
                                        実装がこの組み合わせですべてのサポートされる構成にその機能を含める場合、その機能はその実装にとって要求されていると見なされます。
                                    </p>
                                </div>
                            </div>
                        </li>
                        <li>
                            <p>
                                <var>accumulated configuration</var> の <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-distinctiveidentifier" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-8"><code>distinctiveIdentifier</code></a>
                                メンバーを <var>distinctive identifier requirement</var> と等しく設定します。
                            </p>
                        </li>
                        <li>
                            <p>
                                <var>persistent state requirement</var> を <var>candidate configuration</var> の <a
                                    data-link-type="idl" href="#dom-mediakeysystemconfiguration-persistentstate"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-persistentstate-1"><code>persistentState</code></a>
                                メンバーの値とします。
                            </p>
                        </li>
                        <li>
                            <p>
                                もし <var>persistent state requirement</var> が "<a data-link-type="idl"
                                    href="#dom-mediakeysrequirement-optional" class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-optional-3"><code>optional</code></a>"
                                であり、永続状態の保持が <var>restrictions</var> に従って許可されていない場合、<var>persistent state
                                    requirement</var> を "<a data-link-type="idl"
                                    href="#dom-mediakeysrequirement-not-allowed" class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-not-allowed-3"><code>not-allowed</code></a>"
                                に設定します。
                            </p>
                        </li>
                        <li>
                            <p>
                                次のリストから <var>persistent state requirement</var> に対応する手順を実行します:
                            </p>
                            <dl class="switch">
                                <dt>
                                    "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysrequirement-required-5"><code>required</code></a>"
                                </dt>
                                <dd>
                                    <p>
                                        もし <var>implementation</var> が <var>accumulated configuration</var> と
                                        <var>restrictions</var> の組み合わせで状態を永続化することをサポートしていない場合、<code>NotSupported</code>
                                        を返します。
                                    </p>
                                </dd>
                                <dt>
                                    "<a data-link-type="idl" href="#dom-mediakeysrequirement-optional"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysrequirement-optional-4"><code>optional</code></a>"
                                </dt>
                                <dd>
                                    <p>
                                        続行します。
                                    </p>
                                </dd>
                                <dt>
                                    "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysrequirement-not-allowed-4"><code>not-allowed</code></a>"
                                </dt>
                                <dd>
                                    <p>
                                        もし <var>implementation</var> が <var>accumulated configuration</var> と
                                        <var>restrictions</var> の組み合わせで状態を永続化することを要求する場合、<code>NotSupported</code>
                                        を返します。
                                    </p>
                                </dd>
                            </dl>
                        </li>
                        <li>
                            <p>
                                <var>accumulated configuration</var> の <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-persistentstate" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-persistentstate-2"><code>persistentState</code></a>
                                メンバーを <var>persistent state requirement</var> の値と等しく設定します。
                            </p>
                        </li>
                        <li>
                            <p>
                                次のリストの最初に一致する条件に対する手順を実行します:
                            </p>
                            <dl class="switch">
                                <dt>
                                    もし <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-sessiontypes"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysystemconfiguration-sessiontypes-1"><code>sessionTypes</code></a>
                                    メンバーが <var>candidate configuration</var> に存在する場合
                                </dt>
                                <dd>
                                    <p>
                                        <var>session types</var> を <var>candidate configuration</var> の <a
                                            data-link-type="idl" href="#dom-mediakeysystemconfiguration-sessiontypes"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-sessiontypes-2"><code>sessionTypes</code></a>
                                        メンバーとします。
                                    </p>
                                </dd>
                                <dt>
                                    それ以外
                                </dt>
                                <dd>
                                    <p>
                                        <var>session types</var> を
                                        <code>[ "<a data-link-type="idl" href="#dom-mediakeysessiontype-temporary" class="internalDFN" id="ref-for-dom-mediakeysessiontype-temporary-1"><code>temporary</code></a>"
                                        ]</code> とします。
                                    </p>
                                </dd>
                            </dl>
                        </li>
                        <li>
                            <p>
                                <var>session types</var> の各値について:
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        <var>session type</var> をその値とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        もし <var>accumulated configuration</var> の <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-persistentstate" class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-persistentstate-3"><code>persistentState</code></a>
                                        の値が "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-not-allowed-5"><code>not-allowed</code></a>"
                                        であり、<a data-link-type="dfn|abstract-op" href="#dfn-is-persistent-session-type"
                                            class="internalDFN" id="ref-for-dfn-is-persistent-session-type-2">Is
                                            persistent session
                                            type?</a> アルゴリズムが <var>session type</var> に対して <code>true</code>
                                        を返すなら、<code>NotSupported</code> を返します。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        もし <var>implementation</var> が他の理由で <var>accumulated configuration</var> と
                                        <var>restrictions</var> の組み合わせで <var>session type</var>
                                        をサポートしていない場合、<code>NotSupported</code> を返します。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        もし <var>accumulated configuration</var> の <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-persistentstate" class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-persistentstate-4"><code>persistentState</code></a>
                                        の値が "<a data-link-type="idl" href="#dom-mediakeysrequirement-optional"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-optional-5"><code>optional</code></a>"
                                        であり、<a data-link-type="dfn|abstract-op" href="#dfn-is-persistent-session-type"
                                            class="internalDFN" id="ref-for-dfn-is-persistent-session-type-3">Is
                                            persistent session
                                            type?</a> アルゴリズムを <var>session type</var> に対して実行した結果が <code>true</code>
                                        であれば、<var>accumulated configuration</var> の <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-persistentstate" class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-persistentstate-5"><code>persistentState</code></a>
                                        の値を "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-required-6"><code>required</code></a>"
                                        に変更します。
                                    </p>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                <var>accumulated configuration</var> の <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-sessiontypes" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-sessiontypes-3"><code>sessionTypes</code></a>
                                メンバーを <var>session types</var> に設定します。
                            </p>
                        </li>
                        <li>
                            <p>
                                もし <var>candidate configuration</var> の <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-videocapabilities" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-videocapabilities-1"><code>videoCapabilities</code></a>
                                と <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-audiocapabilities"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-audiocapabilities-1"><code>audioCapabilities</code></a>
                                の両方が空であれば、<code>NotSupported</code> を返します。
                            </p>
                        </li>
                        <li>
                            <dl class="switch">
                                <dt>
                                    もし <var>candidate configuration</var> の <a data-link-type="idl"
                                        href="#dom-mediakeysystemconfiguration-videocapabilities" class="internalDFN"
                                        id="ref-for-dom-mediakeysystemconfiguration-videocapabilities-2"><code>videoCapabilities</code></a>
                                    メンバーが空でない場合:
                                </dt>
                                <dd>
                                    <ol>
                                        <li>
                                            <p>
                                                <var>video capabilities</var> を、Video、<var>candidate configuration</var>
                                                の <a data-link-type="idl"
                                                    href="#dom-mediakeysystemconfiguration-videocapabilities"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeysystemconfiguration-videocapabilities-3"><code>videoCapabilities</code></a>
                                                メンバー、
                                                <var>accumulated configuration</var>、および <var>restrictions</var> に対して <a
                                                    data-link-type="dfn|abstract-op"
                                                    href="#dfn-get-supported-capabilities-for-audio-video-type"
                                                    class="internalDFN"
                                                    id="ref-for-dfn-get-supported-capabilities-for-audio-video-type-1">Get
                                                    Supported Capabilities for Audio/Video Type</a> アルゴリズムを実行した結果とします。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                もし <var>video capabilities</var> が <code>null</code>
                                                なら、<code>NotSupported</code> を返します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <var>accumulated configuration</var> の <a data-link-type="idl"
                                                    href="#dom-mediakeysystemconfiguration-videocapabilities"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeysystemconfiguration-videocapabilities-4"><code>videoCapabilities</code></a>
                                                メンバーを <var>video capabilities</var> に設定します。
                                            </p>
                                        </li>
                                    </ol>
                                </dd>
                                <dt>
                                    それ以外:
                                </dt>
                                <dd>
                                    <p>
                                        <var>accumulated configuration</var> の <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-videocapabilities"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-videocapabilities-5"><code>videoCapabilities</code></a>
                                        メンバーを空の列に設定します。
                                    </p>
                                </dd>
                            </dl>
                        </li>
                        <li>
                            <dl class="switch">
                                <dt>
                                    もし <var>candidate configuration</var> の <a data-link-type="idl"
                                        href="#dom-mediakeysystemconfiguration-audiocapabilities" class="internalDFN"
                                        id="ref-for-dom-mediakeysystemconfiguration-audiocapabilities-2"><code>audioCapabilities</code></a>
                                    メンバーが空でない場合:
                                </dt>
                                <dd>
                                    <ol>
                                        <li>
                                            <p>
                                                <var>audio capabilities</var> を、Audio、<var>candidate configuration</var>
                                                の <a data-link-type="idl"
                                                    href="#dom-mediakeysystemconfiguration-audiocapabilities"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeysystemconfiguration-audiocapabilities-3"><code>audioCapabilities</code></a>
                                                メンバー、
                                                <var>accumulated configuration</var>、および <var>restrictions</var> に対して <a
                                                    data-link-type="dfn|abstract-op"
                                                    href="#dfn-get-supported-capabilities-for-audio-video-type"
                                                    class="internalDFN"
                                                    id="ref-for-dfn-get-supported-capabilities-for-audio-video-type-2">Get
                                                    Supported Capabilities for Audio/Video Type</a> アルゴリズムを実行した結果とします。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                もし <var>audio capabilities</var> が <code>null</code>
                                                なら、<code>NotSupported</code> を返します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <var>accumulated configuration</var> の <a data-link-type="idl"
                                                    href="#dom-mediakeysystemconfiguration-audiocapabilities"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeysystemconfiguration-audiocapabilities-4"><code>audioCapabilities</code></a>
                                                メンバーを <var>audio capabilities</var> に設定します。
                                            </p>
                                        </li>
                                    </ol>
                                </dd>
                                <dt>
                                    それ以外:
                                </dt>
                                <dd>
                                    <p>
                                        <var>accumulated configuration</var> の <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-audiocapabilities"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-audiocapabilities-5"><code>audioCapabilities</code></a>
                                        メンバーを空の列に設定します。
                                    </p>
                                </dd>
                            </dl>
                        </li>

                        <li>
                            <p>
                                もし <var>accumulated configuration</var> の <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-distinctiveidentifier" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-9"><code>distinctiveIdentifier</code></a>
                                の値が "<a data-link-type="idl" href="#dom-mediakeysrequirement-optional"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-optional-6"><code>optional</code></a>"
                                であれば、次のリストの最初に一致する条件に対する手順を実行します:
                            </p>
                            <dl class="switch">
                                <dt>
                                    もし <var>accumulated configuration</var> のいずれかの組み合わせに対して <var>implementation</var> が
                                    <a data-link-type="dfn|abstract-op"
                                        href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                                        class="internalDFN"
                                        id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-2">Distinctive
                                        Identifier(s) または Distinctive Permanent Identifier(s) の使用</a> を要求する場合:
                                </dt>
                                <dd>
                                    <p>
                                        <var>accumulated configuration</var> の <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-10"><code>distinctiveIdentifier</code></a>
                                        の値を "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-required-7"><code>required</code></a>"
                                        に変更します。
                                    </p>
                                </dd>
                                <dt>
                                    それ以外
                                </dt>
                                <dd>
                                    <p>
                                        <var>accumulated configuration</var> の <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-11"><code>distinctiveIdentifier</code></a>
                                        の値を "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-not-allowed-6"><code>not-allowed</code></a>"
                                        に変更します。
                                    </p>
                                </dd>
                            </dl>
                        </li>
                        <li>
                            <p>
                                もし <var>accumulated configuration</var> の <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-persistentstate" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-persistentstate-6"><code>persistentState</code></a>
                                の値が "<a data-link-type="idl" href="#dom-mediakeysrequirement-optional"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-optional-7"><code>optional</code></a>"
                                であれば、次のリストの最初に一致する条件に対する手順を実行します:
                            </p>
                            <dl class="switch">
                                <dt>
                                    もし <var>implementation</var> が <var>accumulated configuration</var>
                                    のいずれかの組み合わせに対して状態の永続化を要求する場合
                                </dt>
                                <dd>
                                    <p>
                                        <var>accumulated configuration</var> の <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-persistentstate" class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-persistentstate-7"><code>persistentState</code></a>
                                        の値を "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-required-8"><code>required</code></a>"
                                        に変更します。
                                    </p>
                                </dd>
                                <dt>
                                    それ以外
                                </dt>
                                <dd>
                                    <p>
                                        <var>accumulated configuration</var> の <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-persistentstate" class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-persistentstate-8"><code>persistentState</code></a>
                                        の値を "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-not-allowed-7"><code>not-allowed</code></a>"
                                        に変更します。
                                    </p>
                                </dd>
                            </dl>
                        </li>
                        <li>
                            <p>
                                もし <var>implementation</var> が <var>accumulated configuration</var>
                                の値の組み合わせで指定された構成をサポートしていない、または <var>origin</var> で許可されていない場合、<code>NotSupported</code>
                                を返します。
                            </p>
                            <div class="note" role="note" id="issue-container-generatedID-32">
                                <div role="heading" class="note-title marker" id="h-note-32" aria-level="6">
                                    <span>注</span>
                                </div>
                                <p class="">
                                    この手順における "supported"
                                    には、このアルゴリズムが戻る時点でその実装が使用可能であることが含まれます。単にユーザーエージェントがそのような実装をサポートしているだけでは不十分です。
                                </p>
                            </div>
                        </li>
                        <li>
                            <p>
                                もし <var>accumulated configuration</var> の <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-distinctiveidentifier" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-12"><code>distinctiveIdentifier</code></a>
                                の値が "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-required-9"><code>required</code></a>" であり、<a
                                    data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                    class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-7">Distinctive
                                    Identifier(s)</a>
                                が <a href="#per-origin-per-profile-identifiers">オリジンごと・プロファイルごとに一意で</a> かつ <a
                                    href="#allow-identifiers-cleared">消去可能でない</a> 場合:
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        <var>restrictions</var> を更新して、<var>accumulated configuration</var>
                                        で記述されるすべての構成がユーザー同意を持たないことを反映させます。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <code>ConsentDenied</code> と <var>restrictions</var> を返します。
                                    </p>
                                </li>
                            </ol>
                            <div class="note" role="note" id="issue-container-generatedID-33">
                                <div role="heading" class="note-title marker" id="h-note-33" aria-level="6">
                                    <span>注</span>
                                </div>
                                <div class="">
                                    <p>
                                        "オリジンごと・プロファイルごとに一意" と "消去可能" の条件は、準拠した実装では偽にはなり得ません。実装は <a
                                            href="#per-origin-per-profile-identifiers">オリジンごと・プロファイルごとの識別子を使用する</a> と <a
                                            href="#allow-identifiers-cleared">識別子の消去を許可する</a> を満たす必要があるためです。
                                    </p>
                                </div>
                            </div>
                        </li>
                        <li>
                            <p>
                                <var>consent status</var> と <var>updated restrictions</var> を、<a
                                    data-link-type="dfn|abstract-op" href="#dfn-get-consent-status" class="internalDFN"
                                    id="ref-for-dfn-get-consent-status-1">Get Consent Status</a> アルゴリズムを
                                <var>accumulated
                                    configuration</var>、<var>restrictions</var>、および <var>origin</var>
                                に対して実行した結果として得られる値とし、<var>consent status</var> の値に対する次のリストの手順に従います:
                            </p>
                            <dl class="switch">
                                <dt>
                                    <code>ConsentDenied</code>:
                                </dt>
                                <dd>
                                    <p>
                                        <code>ConsentDenied</code> と <var>updated restrictions</var> を返します。
                                    </p>
                                </dd>
                                <dt>
                                    <code>InformUser</code>:
                                </dt>
                                <dd>
                                    <p>
                                        <var>accumulated configuration</var> が <var>origin</var>
                                        で使用されることをユーザーに通知します。特に、もし <var>accumulated configuration</var> の <a
                                            data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-13"><code>distinctiveIdentifier</code></a>
                                        メンバーが "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-required-10"><code>required</code></a>"
                                        であれば、<a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                            class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-8">Distinctive
                                            Identifier(s)</a> および／または適切に <a data-link-type="dfn|abstract-op"
                                            href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                                            id="ref-for-dfn-distinctive-permanent-identifier-s-16">Distinctive Permanent
                                            Identifier(s)</a> が使用されることを含めて通知します。続けて次の手順に進みます。
                                    </p>
                                </dd>
                                <dt>
                                    <code>Allowed</code>:
                                </dt>
                                <dd>
                                    <p>
                                        次の手順に進みます。
                                    </p>
                                </dd>
                            </dl>
                        </li>
                        <li>
                            <p>
                                <var>accumulated configuration</var> を返します。
                            </p>
                        </li>
                    </ol>
                </section>
                <section id="get-supported-capabilities-for-audio-video-type">
                    <div class="header-wrapper">
                        <h5 id="x3-2-2-3-get-supported-capabilities-for-audio-video-type"><bdi class="secno">3.2.2.3
                            </bdi>
                            <dfn id="dfn-get-supported-capabilities-for-audio-video-type" tabindex="0"
                                aria-haspopup="dialog" data-dfn-type="dfn">オーディオ／ビデオタイプに対するサポートされる機能を取得する</dfn>
                        </h5><a class="self-link" href="#get-supported-capabilities-for-audio-video-type"
                            aria-label="Permalink for Section 3.2.2.3"></a>
                    </div>

                    <p>
                        <var>audio/video type</var>、<a data-link-type="idl" data-lt="MediaKeySystemMediaCapability"
                            href="#dom-mediakeysystemmediacapability" class="internalDFN"
                            id="ref-for-dom-mediakeysystemmediacapability-1"><code>MediaKeySystemMediaCapability</code></a>
                        の列 <var>requested media capabilities</var>、<a data-link-type="idl"
                            data-lt="MediaKeySystemConfiguration" href="#dom-mediakeysystemconfiguration"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-5"><code>MediaKeySystemConfiguration</code></a>
                        <var>accumulated configuration</var>、および <var>restrictions</var> が与えられたとき、このアルゴリズムはこの
                        audio/video type に対してサポートされる <a data-link-type="idl" data-lt="MediaKeySystemMediaCapability"
                            href="#dom-mediakeysystemmediacapability" class="internalDFN"
                            id="ref-for-dom-mediakeysystemmediacapability-2"><code>MediaKeySystemMediaCapability</code></a>
                        の値の列、または適切に <code>null</code> を返します。
                    </p>
                    <ol>
                        <li>
                            <p>
                                <var>local accumulated configuration</var> を <var>accumulated configuration</var>
                                のローカルコピーとします。
                            </p>
                        </li>
                        <li>
                            <p>
                                <var>supported media capabilities</var> を空の <a data-link-type="idl"
                                    data-lt="MediaKeySystemMediaCapability" href="#dom-mediakeysystemmediacapability"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysystemmediacapability-3"><code>MediaKeySystemMediaCapability</code></a>
                                辞書の列として定義します。
                            </p>
                        </li>
                        <li>
                            <p>
                                <var>requested media capabilities</var> の各 <var>requested media capability</var> について:
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        <var>content type</var> を <var>requested media capability</var> の <a
                                            data-link-type="idl" href="#dom-mediakeysystemmediacapability-contenttype"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemmediacapability-contenttype-1"><code>contentType</code></a>
                                        メンバーとします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>encryption scheme</var> を <var>requested media capability</var> の
                                        <a data-link-type="idl"
                                            href="#dom-mediakeysystemmediacapability-encryptionscheme"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme-2"><code>encryptionScheme</code></a>
                                        メンバーとします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>robustness</var> を <var>requested media capability</var> の
                                        <a data-link-type="idl" href="#dom-mediakeysystemmediacapability-robustness"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemmediacapability-robustness-1"><code>robustness</code></a>
                                        メンバーとします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        もし <var>content type</var> が空文字列であれば、<code>null</code> を返します。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>mimeType</var> を、<a data-link-type="dfn"
                                            href="https://mimesniff.spec.whatwg.org/#parse-a-mime-type">parse a MIME
                                            type</a> を <var>content type</var> に対して実行した結果とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        もし <var>mimeType</var> が <code>failure</code> であるか認識されない場合、次の反復へ進みます。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>container</var> を <var>mimeType</var> によって指定されるコンテナタイプとします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        ユーザーエージェントが <var>container</var> をサポートしていない場合、次の反復へ進みます。文字列比較の大文字小文字の扱いは適切な RFC
                                        によって決まります。
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-34">
                                        <div role="heading" class="note-title marker" id="h-note-34" aria-level="6">
                                            <span>注</span>
                                        </div>
                                        <p class="">
                                            RFC 6838 によれば [<cite><a class="bibref" data-link-type="biblio"
                                                    href="#bib-rfc6838"
                                                    title="Media Type Specifications and Registration Procedures">RFC6838</a></cite>]、
                                            "Both top-level type and subtype names are
                                            case-insensitive."
                                        </p>
                                    </div>
                                </li>
                                <li>
                                    <p>
                                        <var>parameters</var> を <var>mimeType</var> の "codecs" および "profiles"（RFC
                                        6381）パラメータ、存在する場合とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        もしユーザーエージェントが一つ以上の <var>parameters</var>
                                        を認識しない、または関連仕様に従っていずれかのパラメータが無効である場合、次の反復へ進みます。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>media types</var> を <var>parameters</var>
                                        によって指定されるコーデックとコーデック制約の集合とします。文字列比較の大文字小文字の扱いは適切な RFC または他の仕様によって決まります。
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-35">
                                        <div role="heading" class="note-title marker" id="h-note-35" aria-level="6">
                                            <span>注</span>
                                        </div>
                                        <p class="">
                                            一部の形式については RFC 6381 が "Values are case sensitive"
                                            と述べているため、ケースセンシティブな文字列比較が推奨されます。
                                        </p>
                                    </div>
                                </li>
                                <li>
                                    <p>
                                        もし <var>media types</var> が空であれば:
                                    </p>
                                    <dl class="switch">
                                        <dt>
                                            もし <var>container</var> が規範的に特定の一連のコーデックおよびコーデック制約を意味する場合:
                                        </dt>
                                        <dd>
                                            <p>
                                                <var>parameters</var> をその一連の値とします。
                                            </p>
                                        </dd>
                                        <dt>
                                            それ以外:
                                        </dt>
                                        <dd>
                                            <p>
                                                次の反復へ進みます。
                                            </p>
                                        </dd>
                                    </dl>
                                </li>
                                <li>
                                    <p>
                                        もし <var>mimeType</var> が厳密に <var>audio/video type</var> でない場合、次の反復へ進みます。
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-36">
                                        <div role="heading" class="note-title marker" id="h-note-36" aria-level="6">
                                            <span>注</span>
                                        </div>
                                        <p class="">
                                            例えば、<var>audio/video type</var> が Video の場合に <var>mimeType</var> の <a
                                                data-link-type="dfn"
                                                href="https://mimesniff.spec.whatwg.org/#type">type</a> が "video"
                                            でない、または <var>media
                                                types</var> に非ビデオコーデックが含まれる場合などです。
                                        </p>
                                    </div>
                                </li>
                                <li>
                                    <p>
                                        もし <var>encryption scheme</var> が非 null かつ <var>implementation</var>
                                        によって認識されないかサポートされない場合、次の反復へ進みます。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        もし <var>robustness</var> が空文字列でなく、認識されない値を含むか <var>implementation</var>
                                        によってサポートされない値を含む場合、次の反復へ進みます。文字列比較は大文字小文字を区別します。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        ユーザーエージェントと <var>implementation</var> が、<var>container</var>、<var>media
                                            types</var>、<var>encryption scheme</var>、<var>robustness</var> および
                                        <var>local accumulated configuration</var> の組み合わせと <var>restrictions</var>
                                        とを合わせて暗号化されたメディアデータの再生を確実にサポートする場合:
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-37">
                                        <div role="heading" class="note-title marker" id="h-note-37" aria-level="6">
                                            <span>注</span>
                                        </div>
                                        <p class="">
                                            <var>requested media capability</var>（content type と
                                            robustness）は、以前に追加されたすべての requested media capabilities と合わせてサポートされる必要があります。
                                        </p>
                                    </div>
                                    <ol>
                                        <li>
                                            <p>
                                                <var>requested media capability</var> を <var>supported media
                                                    capabilities</var> に追加します。
                                            </p>
                                            <div class="note" role="note" id="issue-container-generatedID-38">
                                                <div role="heading" class="note-title marker" id="h-note-38"
                                                    aria-level="6"><span>注</span></div>
                                                <p class="">
                                                    この手順は、<var>supported media capabilities</var>
                                                    内のエントリのメンバーの値が、ユーザーエージェントによって変更されずに <var>requested media
                                                        capability</var> によって提供された正確な文字列であることを保証します。
                                                </p>
                                            </div>
                                        </li>
                                        <li>
                                            <dl class="switch">
                                                <dt>
                                                    もし <var>audio/video type</var> が Video の場合:
                                                </dt>
                                                <dd>
                                                    <p>
                                                        <var>requested media capability</var> を <var>local accumulated
                                                            configuration</var> の
                                                        <a data-link-type="idl"
                                                            href="#dom-mediakeysystemconfiguration-videocapabilities"
                                                            class="internalDFN"
                                                            id="ref-for-dom-mediakeysystemconfiguration-videocapabilities-6"><code>videoCapabilities</code></a>
                                                        メンバーに追加します。
                                                    </p>
                                                </dd>
                                                <dt>
                                                    もし <var>audio/video type</var> が Audio の場合:
                                                </dt>
                                                <dd>
                                                    <p>
                                                        <var>requested media capability</var> を <var>local accumulated
                                                            configuration</var> の
                                                        <a data-link-type="idl"
                                                            href="#dom-mediakeysystemconfiguration-audiocapabilities"
                                                            class="internalDFN"
                                                            id="ref-for-dom-mediakeysystemconfiguration-audiocapabilities-6"><code>audioCapabilities</code></a>
                                                        メンバーに追加します。
                                                    </p>
                                                </dd>
                                            </dl>
                                            <div class="note" role="note" id="issue-container-generatedID-39">
                                                <div role="heading" class="note-title marker" id="h-note-39"
                                                    aria-level="6"><span>注</span></div>
                                                <p class="">
                                                    この手順により、構成は常に前の反復や前回のこのアルゴリズム呼び出しからの構成とともにチェックされます。そうでなければ、後続の呼び出しでは前回のこのアルゴリズム呼び出しの構成のみがチェックされることになります。
                                                </p>
                                            </div>
                                        </li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                もし <var>supported media capabilities</var> が空であれば、<code>null</code> を返します。
                            </p>
                            <div class="note" role="note" id="issue-container-generatedID-40">
                                <div role="heading" class="note-title marker" id="h-note-40" aria-level="6">
                                    <span>注</span>
                                </div>
                                <p class="">
                                    <var>requested media capabilities</var> の要素のいずれも <var>accumulated
                                        configuration</var> と組み合わせた場合にサポートされませんでした。
                                </p>
                            </div>
                        </li>
                        <li>
                            <p>
                                <var>supported media capabilities</var> を返します。
                            </p>
                        </li>
                    </ol>
                </section>
                <section id="get-consent-status">
                    <div class="header-wrapper">
                        <h5 id="x3-2-2-4-get-consent-status"><bdi class="secno">3.2.2.4 </bdi>
                            <dfn id="dfn-get-consent-status" tabindex="0" aria-haspopup="dialog"
                                data-dfn-type="dfn">同意状況を取得する</dfn>
                        </h5><a class="self-link" href="#get-consent-status"
                            aria-label="Permalink for Section 3.2.2.4"></a>
                    </div>

                    <p>
                        <var>accumulated configuration</var>、<var>restrictions</var>、および <var>origin</var>
                        が与えられたとき、このアルゴリズムは <var>accumulated configuration</var> と <var>origin</var> の同意状況を
                        <code>ConsentDenied</code>、<code>InformUser</code>、または <code>Allowed</code>
                        のいずれかで返し、<code>ConsentDenied</code> の場合は <var>restrictions</var> の更新値も返します。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-41">
                        <div role="heading" class="note-title marker" id="h-note-41" aria-level="6"><span>注</span>
                        </div>
                        <div class="">
                            <p>
                                <var>accumulated configuration</var> の同意状況は、少なくとも <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-distinctiveidentifier" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-14"><code>distinctiveIdentifier</code></a>
                                メンバーの値に依存します。
                            </p>
                            <p>
                                <var>accumulated configuration</var> の以前の同意で <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-distinctiveidentifier" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-15"><code>distinctiveIdentifier</code></a>
                                が "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-not-allowed-8"><code>not-allowed</code></a>"
                                に設定されていたとしても、同じ構成で <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-distinctiveidentifier" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-16"><code>distinctiveIdentifier</code></a>
                                が "<a data-link-type="idl" href="#dom-mediakeysrequirement-optional" class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-optional-8"><code>optional</code></a>" または "<a
                                    data-link-type="idl" href="#dom-mediakeysrequirement-required" class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-required-11"><code>required</code></a>"
                                に設定された場合の同意を意味するものではありません。
                            </p>
                        </div>
                    </div>
                    <ol>
                        <li>
                            <p>
                                もし <var>origin</var> に対して保存された拒否が存在し、<var>accumulated configuration</var>
                                が許可されないことを示している場合、次の手順を実行します:
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        <var>restrictions</var> を更新して、同意が拒否された構成を反映させます。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <code>ConsentDenied</code> と <var>restrictions</var> を返します。
                                    </p>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                もし <var>origin</var> に対して保存された同意が存在し、<var>accumulated configuration</var>
                                が許可されることを示している場合、<code>Allowed</code> を返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                次のいずれかが真である場合:
                            </p>
                            <ul>
                                <li>
                                    <p>
                                        <var>accumulated configuration</var> の <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-17"><code>distinctiveIdentifier</code></a>
                                        メンバーが "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-not-allowed-9"><code>not-allowed</code></a>"
                                        でない、かつ User Agent、<var>implementation</var>、および <var>accumulated
                                            configuration</var> の組み合わせが <a href="#allow-persistent-data-cleared">Allow
                                            Persistent Data to Be Cleared</a> に関するすべての推奨を <a
                                            data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                            class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-9">Distinctive
                                            Identifier(s)</a> について遵守していない場合。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        ユーザーエージェントが他の理由により <var>accumulated configuration</var> に対して明示的なユーザー同意を要求する場合。
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-42">
                                        <div role="heading" class="note-title marker" id="h-note-42" aria-level="6">
                                            <span>注</span>
                                        </div>
                                        <p class="">
                                            明示的なユーザー同意が必要となる別の理由としては、CDM 実装のセキュリティ特性に起因する場合があります。
                                        </p>
                                    </div>
                                </li>
                            </ul>
                            <p>
                                その場合、次の手順を実行します:
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        <var>origin</var> で <var>accumulated configuration</var>
                                        を使用するためのユーザー同意を要求し、ユーザーの応答を待ちます。
                                    </p>
                                    <p>
                                        同意は、もし <var>accumulated configuration</var> の <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-18"><code>distinctiveIdentifier</code></a>
                                        メンバーが "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-required-12"><code>required</code></a>"
                                        に設定されている場合、<a data-link-type="dfn|abstract-op"
                                            href="#dfn-distinctive-identifier-s" class="internalDFN"
                                            id="ref-for-dfn-distinctive-identifier-s-10">Distinctive Identifier(s)</a>
                                        および／または適切に <a data-link-type="dfn|abstract-op"
                                            href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                                            id="ref-for-dfn-distinctive-permanent-identifier-s-17">Distinctive Permanent
                                            Identifier(s)</a> の使用への同意を含む必要があります。
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-43">
                                        <div role="heading" class="note-title marker" id="h-note-43" aria-level="6">
                                            <span>注</span>
                                        </div>
                                        <div class="">
                                            <p>
                                                <var>accumulated configuration</var> を使用するためのユーザー同意は <var>origin</var>
                                                固有であり、<var>accumulated configuration</var> と共通のプロパティを持つ構成に限定される場合があります。
                                            </p>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <p>
                                        もし同意が拒否された場合、次の手順を実行します:
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                <var>restrictions</var> を更新して、同意が拒否された構成を反映させます。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <code>ConsentDenied</code> と <var>restrictions</var> を返します。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                もし <var>accumulated configuration</var> の <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-distinctiveidentifier" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-19"><code>distinctiveIdentifier</code></a>
                                メンバーが "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-not-allowed-10"><code>not-allowed</code></a>"
                                でない場合、<code>InformUser</code> を返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                ユーザーエージェントが他の理由で <var>accumulated configuration</var>
                                についてユーザーに通知する必要がある場合、<code>InformUser</code> を返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                <code>Allowed</code> を返します。
                            </p>
                        </li>
                    </ol>
                </section>
            </section>
        </section>
        <section data-dfn-for="MediaKeySystemConfiguration" id="mediakeysystemconfiguration-dictionary">
            <div class="header-wrapper">
                <h3 id="x3-3-mediakeysystemconfiguration-dictionary"><bdi class="secno">3.3 </bdi>
                    <dfn data-export="" data-dfn-type="dictionary" id="dom-mediakeysystemconfiguration"
                        data-idl="dictionary" data-title="MediaKeySystemConfiguration" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>MediaKeySystemConfiguration</code></dfn> 辞書
                </h3><a class="self-link" href="#mediakeysystemconfiguration-dictionary"
                    aria-label="Permalink for Section 3.3"></a>
            </div>

            <pre class="idl def" id="webidl-1197737164"><span class="idlHeader"><a class="self-link" href="#webidl-1197737164">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-mediakeysrequirement" data-title="MediaKeysRequirement">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-mediakeysrequirement" id="ref-for-dom-mediakeysrequirement-1"><code>MediaKeysRequirement</code></a> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeysrequirement-required" id="ref-for-dom-mediakeysrequirement-required-13"><code>required</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeysrequirement-optional" id="ref-for-dom-mediakeysrequirement-optional-9"><code>optional</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeysrequirement-not-allowed" id="ref-for-dom-mediakeysrequirement-not-allowed-11"><code>not-allowed</code></a>"</span>
};</span></code></pre>
            <p>
                <dfn data-export="" data-dfn-type="enum" id="dom-mediakeysrequirement" data-idl="enum"
                    data-title="MediaKeysRequirement" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>MediaKeysRequirement</code></dfn> 列挙型は以下のように定義されます:
            </p>
            <table class="simple" data-dfn-for="MediaKeysRequirement">
                <tbody>
                    <tr>
                        <th colspan="2">
                            列挙型の説明
                        </th>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeysrequirement-required"
                                data-idl="enum-value" data-title="required" data-dfn-for="MediaKeysRequirement"
                                tabindex="0" aria-haspopup="dialog"><code>required</code></dfn>
                        </td>
                        <td>
                            <dl>
                                <dt>
                                    <a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                                        href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                                        id="ref-for-dom-navigator-requestmediakeysystemaccess-4"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                                    の呼び出しで使用した場合
                                </dt>
                                <dd>
                                    返されるオブジェクトはこの機能を <em class="rfc2119">MUST</em> サポートしなければなりません。
                                </dd>
                                <dt>
                                    <a data-link-type="idl" data-lt="MediaKeySystemAccess"
                                        href="#dom-mediakeysystemaccess" class="internalDFN"
                                        id="ref-for-dom-mediakeysystemaccess-8"><code>MediaKeySystemAccess</code></a>
                                    オブジェクトによって返された場合
                                </dt>
                                <dd>
                                    オブジェクトによって生成された <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                        class="internalDFN" id="ref-for-dfn-cdm-25">CDM</a> インスタンスはこの機能を使用してもよい（<em
                                        class="rfc2119">MAY</em>）。
                                </dd>
                            </dl>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeysrequirement-optional"
                                data-idl="enum-value" data-title="optional" data-dfn-for="MediaKeysRequirement"
                                tabindex="0" aria-haspopup="dialog"><code>optional</code></dfn>
                        </td>
                        <td>
                            <dl>
                                <dt>
                                    <a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                                        href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                                        id="ref-for-dom-navigator-requestmediakeysystemaccess-5"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                                    の呼び出しで使用した場合
                                </dt>
                                <dd>
                                    返されるオブジェクトはこの機能をサポート・使用してもよい（<em class="rfc2119">MAY</em>）。
                                </dd>
                                <dt>
                                    <a data-link-type="idl" data-lt="MediaKeySystemAccess"
                                        href="#dom-mediakeysystemaccess" class="internalDFN"
                                        id="ref-for-dom-mediakeysystemaccess-9"><code>MediaKeySystemAccess</code></a>
                                    オブジェクトによって返された場合
                                </dt>
                                <dd>
                                    この値はそのようなオブジェクトに存在することはできず、<em class="rfc2119">MUST NOT</em> 存在してはなりません。
                                </dd>
                            </dl>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeysrequirement-not-allowed"
                                data-idl="enum-value" data-title="not-allowed" data-dfn-for="MediaKeysRequirement"
                                tabindex="0" aria-haspopup="dialog"><code>not-allowed</code></dfn>
                        </td>
                        <td>
                            <dl>
                                <dt>
                                    <a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                                        href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                                        id="ref-for-dom-navigator-requestmediakeysystemaccess-6"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                                    の呼び出しで使用した場合
                                </dt>
                                <dd>
                                    返されるオブジェクトはこの機能を使用せず、かつ <em class="rfc2119">MUST NOT</em> いかなる時点でも使用してはなりません。
                                </dd>
                                <dt>
                                    <a data-link-type="idl" data-lt="MediaKeySystemAccess"
                                        href="#dom-mediakeysystemaccess" class="internalDFN"
                                        id="ref-for-dom-mediakeysystemaccess-10"><code>MediaKeySystemAccess</code></a>
                                    オブジェクトによって返された場合
                                </dt>
                                <dd>
                                    オブジェクトによって生成された <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                        class="internalDFN" id="ref-for-dfn-cdm-26">CDM</a> インスタンスはこの機能を <em
                                        class="rfc2119">MUST NOT</em> 使用してはなりません。
                                </dd>
                            </dl>
                        </td>
                    </tr>
                </tbody>
            </table>
            <pre class="idl def" id="webidl-798704963"><span class="idlHeader"><a class="self-link" href="#webidl-798704963">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-mediakeysystemconfiguration" data-title="MediaKeySystemConfiguration">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-mediakeysystemconfiguration" id="ref-for-dom-mediakeysystemconfiguration-6"><code>MediaKeySystemConfiguration</code></a> {<span data-idl="" class="idlMember" id="idl-def-mediakeysystemconfiguration-label" data-title="label" data-dfn-for="MediaKeySystemConfiguration"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span>                               <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeysystemconfiguration-label" id="ref-for-dom-mediakeysystemconfiguration-label-3"><code>label</code></a> = "";</span><span data-idl="" class="idlMember" id="idl-def-mediakeysystemconfiguration-initdatatypes" data-title="initDataTypes" data-dfn-for="MediaKeySystemConfiguration"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>&gt;</span>                     <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeysystemconfiguration-initdatatypes" id="ref-for-dom-mediakeysystemconfiguration-initdatatypes-4"><code>initDataTypes</code></a> = [];</span><span data-idl="" class="idlMember" id="idl-def-mediakeysystemconfiguration-audiocapabilities" data-title="audioCapabilities" data-dfn-for="MediaKeySystemConfiguration"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-mediakeysystemmediacapability" class="internalDFN" id="ref-for-dom-mediakeysystemmediacapability-5"><code>MediaKeySystemMediaCapability</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeysystemconfiguration-audiocapabilities" id="ref-for-dom-mediakeysystemconfiguration-audiocapabilities-7"><code>audioCapabilities</code></a> = [];</span><span data-idl="" class="idlMember" id="idl-def-mediakeysystemconfiguration-videocapabilities" data-title="videoCapabilities" data-dfn-for="MediaKeySystemConfiguration"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-mediakeysystemmediacapability" class="internalDFN" id="ref-for-dom-mediakeysystemmediacapability-6"><code>MediaKeySystemMediaCapability</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeysystemconfiguration-videocapabilities" id="ref-for-dom-mediakeysystemconfiguration-videocapabilities-7"><code>videoCapabilities</code></a> = [];</span><span data-idl="" class="idlMember" id="idl-def-mediakeysystemconfiguration-distinctiveidentifier" data-title="distinctiveIdentifier" data-dfn-for="MediaKeySystemConfiguration"><span class="idlType">
  <a data-link-type="idl" href="#dom-mediakeysrequirement" class="internalDFN" id="ref-for-dom-mediakeysrequirement-2"><code>MediaKeysRequirement</code></a></span>                    <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeysystemconfiguration-distinctiveidentifier" id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-20"><code>distinctiveIdentifier</code></a> = "optional";</span><span data-idl="" class="idlMember" id="idl-def-mediakeysystemconfiguration-persistentstate" data-title="persistentState" data-dfn-for="MediaKeySystemConfiguration"><span class="idlType">
  <a data-link-type="idl" href="#dom-mediakeysrequirement" class="internalDFN" id="ref-for-dom-mediakeysrequirement-3"><code>MediaKeysRequirement</code></a></span>                    <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeysystemconfiguration-persistentstate" id="ref-for-dom-mediakeysystemconfiguration-persistentstate-9"><code>persistentState</code></a> = "optional";</span><span data-idl="" class="idlMember" id="idl-def-mediakeysystemconfiguration-sessiontypes" data-title="sessionTypes" data-dfn-for="MediaKeySystemConfiguration"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>&gt;</span>                     <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeysystemconfiguration-sessiontypes" id="ref-for-dom-mediakeysystemconfiguration-sessiontypes-4"><code>sessionTypes</code></a>;</span>
};</span></code></pre>
            <p>
                辞書 <a data-link-type="idl" data-lt="MediaKeySystemConfiguration" href="#dom-mediakeysystemconfiguration"
                    class="internalDFN"
                    id="ref-for-dom-mediakeysystemconfiguration-7"><code>MediaKeySystemConfiguration</code></a>
                は以下のメンバーを持ちます:
            </p>
            <dl class="dictionary-members" data-dfn-for="MediaKeySystemConfiguration">
                <dt>
                    <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeysystemconfiguration-label" data-idl="field" data-title="label" data-dfn-for="MediaKeySystemConfiguration" data-type="DOMString" tabindex="0" aria-haspopup="dialog">label</dfn></code>
                    型 <a data-link-type="interface" data-lt="DOMString"
                        href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>、デフォルト値
                    <code>""</code>
                </dt>
                <dd>
                    オプションのラベルで、<a data-link-type="idl" data-lt="MediaKeySystemConfiguration"
                        href="#dom-mediakeysystemconfiguration" class="internalDFN"
                        id="ref-for-dom-mediakeysystemconfiguration-8"><code>MediaKeySystemConfiguration</code></a>
                    が <a data-link-type="idl" data-lt="getConfiguration()"
                        href="#dom-mediakeysystemaccess-getconfiguration" class="internalDFN"
                        id="ref-for-dom-mediakeysystemaccess-getconfiguration-1"><code>getConfiguration</code></a><code>()</code>
                    メソッドで返される際に保持されます。
                    <a data-link-type="idl" data-lt="MediaKeySystemAccess" href="#dom-mediakeysystemaccess"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysystemaccess-11"><code>MediaKeySystemAccess</code></a> のメソッドです。
                </dd>
                <dt>
                    <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeysystemconfiguration-initdatatypes" data-idl="field" data-title="initDataTypes" data-dfn-for="MediaKeySystemConfiguration" data-type="sequence" tabindex="0" aria-haspopup="dialog">initDataTypes</dfn></code>
                    型 <span class="idlMemberType">sequence&lt;<a data-link-type="interface" data-lt="DOMString"
                            href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>&gt;</span>、デフォルト値
                    <code>[]</code>
                </dt>
                <dd>
                    サポートされる <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data-type" class="internalDFN"
                        id="ref-for-dfn-initialization-data-type-3">Initialization Data Type</a>
                    名のリストです。このオブジェクトの <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data-type"
                        class="internalDFN" id="ref-for-dfn-initialization-data-type-4">Initialization Data Type</a>
                    機能は、リストが空または他のすべてのメンバーと共にサポートされる値が1つ以上含まれていればサポートされていると見なされます（アルゴリズムで判定）。列の値は空文字列であってはなりません（<em
                        class="rfc2119">MUST</em>）。
                </dd>
                <dt>
                    <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeysystemconfiguration-audiocapabilities" data-idl="field" data-title="audioCapabilities" data-dfn-for="MediaKeySystemConfiguration" data-type="sequence" tabindex="0" aria-haspopup="dialog">audioCapabilities</dfn></code>
                    型 <span class="idlMemberType">sequence&lt;<a data-link-type="idl"
                            data-lt="MediaKeySystemMediaCapability" href="#dom-mediakeysystemmediacapability"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemmediacapability-7"><code>MediaKeySystemMediaCapability</code></a>&gt;</span>、デフォルト値
                    <code>[]</code>
                </dt>
                <dd>
                    サポートされる音声タイプと機能のペアのリストです。このオブジェクトの音声機能はリストが空か他のすべてのメンバーと共にサポートされる値が1つ以上含まれていればサポートされていると見なされます（アルゴリズムで判定）。値間に競合がある場合は、先の値が選択されます。空リストは音声機能がサポートされないことを示します。この場合、<a
                        data-link-type="idl" href="#dom-mediakeysystemconfiguration-videocapabilities"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysystemconfiguration-videocapabilities-8"><code>videoCapabilities</code></a>
                    メンバーは空であってはなりません。
                </dd>
                <dt>
                    <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeysystemconfiguration-videocapabilities" data-idl="field" data-title="videoCapabilities" data-dfn-for="MediaKeySystemConfiguration" data-type="sequence" tabindex="0" aria-haspopup="dialog">videoCapabilities</dfn></code>
                    型 <span class="idlMemberType">sequence&lt;<a data-link-type="idl"
                            data-lt="MediaKeySystemMediaCapability" href="#dom-mediakeysystemmediacapability"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemmediacapability-8"><code>MediaKeySystemMediaCapability</code></a>&gt;</span>、デフォルト値
                    <code>[]</code>
                </dt>
                <dd>
                    サポートされる映像タイプと機能のペアのリストです。このオブジェクトの映像機能はリストが空か他のすべてのメンバーと共にサポートされる値が1つ以上含まれていればサポートされていると見なされます（アルゴリズムで判定）。値間に競合がある場合は、先の値が選択されます。空リストは映像機能がサポートされないことを示します。この場合、<a
                        data-link-type="idl" href="#dom-mediakeysystemconfiguration-audiocapabilities"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysystemconfiguration-audiocapabilities-8"><code>audioCapabilities</code></a>
                    メンバーは空であってはなりません。
                </dd>
                <dt>
                    <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeysystemconfiguration-distinctiveidentifier" data-idl="field" data-title="distinctiveIdentifier" data-dfn-for="MediaKeySystemConfiguration" data-type="MediaKeysRequirement" tabindex="0" aria-haspopup="dialog">distinctiveIdentifier</dfn></code>
                    型 <a data-link-type="idl" data-lt="MediaKeysRequirement" href="#dom-mediakeysrequirement"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysrequirement-4"><code>MediaKeysRequirement</code></a>、デフォルト値
                    <code>"optional"</code>
                </dt>
                <dd>
                    <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-identifier-s-11">Distinctive Identifier(s)</a>
                    の使用が必要かどうか。
                    <p>
                        このメンバーが "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysrequirement-not-allowed-12"><code>not-allowed</code></a>"
                        の場合、実装はこの構成から生成されたいかなるオブジェクトの処理において <a data-link-type="dfn|abstract-op"
                            href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                            class="internalDFN"
                            id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-3">Distinctive
                            Identifier(s) または Distinctive Permanent Identifier(s) の使用</a> を <em class="rfc2119">MUST
                            NOT</em> 行ってはなりません。
                    </p>
                </dd>
                <dt>
                    <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeysystemconfiguration-persistentstate" data-idl="field" data-title="persistentState" data-dfn-for="MediaKeySystemConfiguration" data-type="MediaKeysRequirement" tabindex="0" aria-haspopup="dialog">persistentState</dfn></code>
                    型 <a data-link-type="idl" data-lt="MediaKeysRequirement" href="#dom-mediakeysrequirement"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysrequirement-5"><code>MediaKeysRequirement</code></a>、デフォルト値
                    <code>"optional"</code>
                </dt>
                <dd>
                    状態の永続化機能が必要かどうかを示します。これにはセッションデータやその他の種類の状態が含まれます。
                    <p>
                        このメンバーが "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysrequirement-not-allowed-13"><code>not-allowed</code></a>" の場合、<a
                            data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                            id="ref-for-dfn-cdm-27">CDM</a> はこのオブジェクトの <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> や <a
                            data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#concept-document">Document</a>、アプリケーションに関連するいかなる状態も永続化してはなりません（<em
                            class="rfc2119">MUST NOT</em>）。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-44">
                        <div role="heading" class="note-title marker" id="h-note-44" aria-level="4"><span>注</span>
                        </div>
                        <p class="">
                            このメンバーに関して、永続状態にはキーシステム実装が管理する永続的な一意識別子（<a data-link-type="dfn|abstract-op"
                                href="#dfn-distinctive-identifier-s" class="internalDFN"
                                id="ref-for-dfn-distinctive-identifier-s-12">Distinctive Identifiers</a>）は含みません。<a
                                data-link-type="idl" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-21"><code>distinctiveIdentifier</code></a>
                            がこの要件を個別に反映します。
                        </p>
                    </div>
                    <p>
                        永続状態がサポートされない場合は、"<a data-link-type="idl" href="#dom-mediakeysessiontype-temporary"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysessiontype-temporary-2"><code>temporary</code></a>" セッションのみ作成可能です。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-45">
                        <div role="heading" class="note-title marker" id="h-note-45" aria-level="4"><span>注</span>
                        </div>
                        <p class="">
                            "<a data-link-type="idl" href="#dom-mediakeysessiontype-temporary" class="internalDFN"
                                id="ref-for-dom-mediakeysessiontype-temporary-3"><code>temporary</code></a>"
                            セッションでは、状態の保存の必要性や可能性はキーシステム実装依存であり、使用される機能によって異なる場合があります。
                        </p>
                    </div>
                    <div class="note" role="note" id="issue-container-generatedID-46">
                        <div role="heading" class="note-title marker" id="h-note-46" aria-level="4"><span>注</span>
                        </div>
                        <p class="">
                            "<a data-link-type="idl" href="#dom-mediakeysessiontype-temporary" class="internalDFN"
                                id="ref-for-dom-mediakeysessiontype-temporary-4"><code>temporary</code></a>"
                            以外のセッションを作成したいアプリケーションは、
                            <a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                                href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                                id="ref-for-dom-navigator-requestmediakeysystemaccess-7"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                            呼び出し時にこのメンバーを "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysrequirement-required-14"><code>required</code></a>" に設定すべきです。
                        </p>
                    </div>
                </dd>
                <dt>
                    <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeysystemconfiguration-sessiontypes" data-idl="field" data-title="sessionTypes" data-dfn-for="MediaKeySystemConfiguration" data-type="sequence" tabindex="0" aria-haspopup="dialog">sessionTypes</dfn></code>
                    型 <span class="idlMemberType">sequence&lt;<a data-link-type="interface" data-lt="DOMString"
                            href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>&gt;</span>
                </dt>
                <dd>
                    サポートされなければならない <a data-link-type="idl" data-lt="MediaKeySessionType" href="#dom-mediakeysessiontype"
                        class="internalDFN" id="ref-for-dom-mediakeysessiontype-1"><code>MediaKeySessionType</code></a>
                    のリストです。すべての値がサポートされている必要があります。
                    <p>
                        このメンバーが辞書に <a data-link-type="dfn" data-lt="exist"
                            href="https://infra.spec.whatwg.org/#map-exists">存在しない</a> [<cite><a class="bibref"
                                data-link-type="biblio" href="#bib-infra" title="Infra Standard">Infra</a></cite>] 状態で
                        <a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                            href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                            id="ref-for-dom-navigator-requestmediakeysystemaccess-8"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                        に渡された場合、<code>[ "<a data-link-type="idl" href="#dom-mediakeysessiontype-temporary" class="internalDFN" id="ref-for-dom-mediakeysessiontype-temporary-5"><code>temporary</code></a>"
                        ]</code> が設定されているものとして扱われます。
                    </p>
                </dd>
            </dl>
            <p>
                実装はこの辞書にメンバーを追加すべきではありません（<em class="rfc2119">SHOULD NOT</em>）。もし追加する場合、型は <a data-link-type="idl"
                    data-lt="MediaKeysRequirement" href="#dom-mediakeysrequirement" class="internalDFN"
                    id="ref-for-dom-mediakeysrequirement-6"><code>MediaKeysRequirement</code></a> にしなければならず（<em
                    class="rfc2119">MUST</em>）、デフォルト値は "<a data-link-type="idl"
                    href="#dom-mediakeysrequirement-optional" class="internalDFN"
                    id="ref-for-dom-mediakeysrequirement-optional-10"><code>optional</code></a>" とすることが推奨されます（<em
                    class="rfc2119">RECOMMENDED</em>）。これにより最も幅広いアプリケーションとクライアントの組み合わせをサポートできます。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-47">
                <div role="heading" class="note-title marker" id="h-note-47" aria-level="4"><span>注</span></div>
                <p class="">
                    ユーザーエージェント実装が認識しない辞書メンバーは [<cite><a class="bibref" data-link-type="biblio" href="#bib-webidl"
                            title="Web IDL Standard">WEBIDL</a></cite>] に従い無視され、<a data-link-type="idl"
                        data-lt="requestMediaKeySystemAccess()" href="#dom-navigator-requestmediakeysystemaccess"
                        class="internalDFN"
                        id="ref-for-dom-navigator-requestmediakeysystemaccess-9"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                    アルゴリズムで考慮されません。アプリケーションが非標準的な辞書メンバーを使用する場合、ユーザーエージェント実装がそのような辞書メンバーを含む構成を拒否することを前提にしてはなりません（<em
                        class="rfc2119">MUST NOT</em>）。
                </p>
            </div>
            <p>
                この辞書は <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-28">CDM</a> に状態やデータを渡すために使用してはなりません（<em class="rfc2119">MUST NOT</em>）。
            </p>
        </section>
        <section id="mediakeysystemmediacapability-dictionary">
            <div class="header-wrapper">
                <h3 id="x3-4-mediakeysystemmediacapability-dictionary"><bdi class="secno">3.4 </bdi>
                    <dfn data-export="" data-dfn-type="dictionary" id="dom-mediakeysystemmediacapability"
                        data-idl="dictionary" data-title="MediaKeySystemMediaCapability" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>MediaKeySystemMediaCapability</code></dfn> 辞書
                </h3><a class="self-link" href="#mediakeysystemmediacapability-dictionary"
                    aria-label="Permalink for Section 3.4"></a>
            </div>

            <pre class="idl def" id="webidl-1151374081"><span class="idlHeader"><a class="self-link" href="#webidl-1151374081">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-mediakeysystemmediacapability" data-title="MediaKeySystemMediaCapability">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-mediakeysystemmediacapability" id="ref-for-dom-mediakeysystemmediacapability-9"><code>MediaKeySystemMediaCapability</code></a> {<span data-idl="" class="idlMember" id="idl-def-mediakeysystemmediacapability-contenttype" data-title="contentType" data-dfn-for="MediaKeySystemMediaCapability"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeysystemmediacapability-contenttype" id="ref-for-dom-mediakeysystemmediacapability-contenttype-2"><code>contentType</code></a> = "";</span><span data-idl="" class="idlMember" id="idl-def-mediakeysystemmediacapability-encryptionscheme" data-title="encryptionScheme" data-dfn-for="MediaKeySystemMediaCapability"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeysystemmediacapability-encryptionscheme" id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme-3"><code>encryptionScheme</code></a> = null;</span><span data-idl="" class="idlMember" id="idl-def-mediakeysystemmediacapability-robustness" data-title="robustness" data-dfn-for="MediaKeySystemMediaCapability"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeysystemmediacapability-robustness" id="ref-for-dom-mediakeysystemmediacapability-robustness-2"><code>robustness</code></a> = "";</span>
};</span></code></pre>
            <section id="dictionary-mediakeysystemmediacapability-members">
                <div class="header-wrapper">
                    <h4 id="x3-4-1-dictionary-mediakeysystemmediacapability-members"><bdi class="secno">3.4.1 </bdi>
                        辞書 <a class="idlType internalDFN" href="#dom-mediakeysystemmediacapability" data-link-type="idl"
                            id="ref-for-dom-mediakeysystemmediacapability-10"><code>MediaKeySystemMediaCapability</code></a>
                        のメンバー
                    </h4><a class="self-link" href="#dictionary-mediakeysystemmediacapability-members"
                        aria-label="Permalink for Section 3.4.1"></a>
                </div>

                <dl class="dictionary-members" data-dfn-for="MediaKeySystemMediaCapability">
                    <dt>
                        <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeysystemmediacapability-contenttype" data-idl="field" data-title="contentType" data-dfn-for="MediaKeySystemMediaCapability" data-type="DOMString" tabindex="0" aria-haspopup="dialog">contentType</dfn></code>
                        型 <a data-link-type="interface" data-lt="DOMString"
                            href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>、デフォルト値
                        <code>""</code>
                    </dt>
                    <dd>
                        <p>
                            <a href="https://html.spec.whatwg.org/multipage/#mime-types">MIMEタイプ</a>（<a
                                href="https://html.spec.whatwg.org/multipage/#media-resource">メディアリソース</a>の）。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-48">
                            <div role="heading" class="note-title marker" id="h-note-48" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                アプリケーションは、MIMEタイプが明示的にコーデックやコーデック制約（たとえば [<cite><a class="bibref"
                                        data-link-type="biblio" href="#bib-rfc6381"
                                        title="The 'Codecs' and 'Profiles' Parameters for &quot;Bucket&quot; Media Types">RFC6381</a></cite>]）を指定することを
                                <em class="rfc2119">推奨</em> します（SHOULD）。これらがコンテナによって規範的に暗示されない限りです。
                            </p>
                        </div>
                    </dd>
                    <dt>
                        <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeysystemmediacapability-encryptionscheme" data-idl="field" data-title="encryptionScheme" data-dfn-for="MediaKeySystemMediaCapability" data-type="DOMString" tabindex="0" aria-haspopup="dialog">encryptionScheme</dfn></code>
                        型 <a data-link-type="interface" data-lt="DOMString"
                            href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>、デフォルト値
                        <code>null</code>
                    </dt>
                    <dd>
                        <p>
                            content type に関連付けられる暗号化方式。値が null
                            または存在しない場合、アプリケーションが特定の暗号化方式を要求しないことをユーザーエージェントに示し、そのためいかなる暗号化方式でも許容されます。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-49">
                            <div role="heading" class="note-title marker" id="h-note-49" aria-level="5">
                                <span>注</span>
                            </div>
                            <div class="">
                                <p>
                                    このフィールドを認識しているアプリケーションは、必要な暗号化方式を指定すべきです（<em
                                        class="rfc2119">SHOULD</em>）。異なる暗号化方式は一般的に互換性がありません。アプリケーションが「いかなる方式でも可」とするのは非現実的ですが、デフォルトの
                                    null と null の「任意」としての解釈は、未認識アプリや古いユーザーエージェントへのポリフィルの道を提供します。
                                </p>
                            </div>
                        </div>
                        <div class="note" role="note" id="issue-container-generatedID-50">
                            <div role="heading" class="note-title marker" id="h-note-50" aria-level="5">
                                <span>注</span>
                            </div>
                            <div class="">
                                <p>
                                    空文字列は null や未指定とは異なり、認識できない暗号化方式として扱われます。
                                </p>
                            </div>
                        </div>
                        <div class="note" role="note" id="issue-container-generatedID-51">
                            <div role="heading" class="note-title marker" id="h-note-51" aria-level="5">
                                <span>注</span>
                            </div>
                            <div class="">
                                <p>
                                    encryptionScheme のよく知られた値:
                                </p>
                                <ul>
                                    <li>
                                        <code><dfn id="scheme-cenc" data-lt="&quot;cenc&quot;|cenc" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">cenc</dfn></code>:
                                        "cenc" モード。 [<cite><a class="bibref" data-link-type="biblio" href="#bib-cenc"
                                                title="ISO/IEC 23001-7:2016, Information technology — MPEG systems technologies — Part 7: Common encryption in ISO Base Media File Format files">CENC</a></cite>]
                                        4.2a節。AES-CTRモードのフルサンプルおよび動画NALサブサンプル暗号化。
                                    </li>
                                    <li>
                                        <code><dfn id="scheme-cbcs" data-lt="&quot;cbcs&quot;|cbcs" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">cbcs</dfn></code>:
                                        "cbcs" モード。 [<cite><a class="bibref" data-link-type="biblio" href="#bib-cenc"
                                                title="ISO/IEC 23001-7:2016, Information technology — MPEG systems technologies — Part 7: Common encryption in ISO Base Media File Format files">CENC</a></cite>]
                                        4.2d節。AES-CBCモードの部分動画NALパターン暗号化。動画の場合、仕様では様々な暗号化パターンを許容しています。
                                    </li>
                                    <li>
                                        <code><dfn class="lint-ignore" id="dfn-cbcs-1-9" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">cbcs-1-9</dfn></code>:
                                        <a data-link-type="dfn|abstract-op" href="#scheme-cbcs" class="internalDFN"
                                            id="ref-for-scheme-cbcs-1"><code>"cbcs"</code></a>
                                        モードと同じですが、動画について暗号化:スキップパターンが 1:9 となっており、[<cite><a class="bibref"
                                                data-link-type="biblio" href="#bib-cenc"
                                                title="ISO/IEC 23001-7:2016, Information technology — MPEG systems technologies — Part 7: Common encryption in ISO Base Media File Format files">CENC</a></cite>]
                                        10.4.2節の推奨です。
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </dd>
                    <dt>
                        <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeysystemmediacapability-robustness" data-idl="field" data-title="robustness" data-dfn-for="MediaKeySystemMediaCapability" data-type="DOMString" tabindex="0" aria-haspopup="dialog">robustness</dfn></code>
                        型 <a data-link-type="interface" data-lt="DOMString"
                            href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>、デフォルト値
                        <code>""</code>
                    </dt>
                    <dd>
                        <p>
                            content type に関連付けられる堅牢性レベル。空文字列の場合、コンテンツタイプの復号およびデコードができる能力であれば何でも許容されます。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-52">
                            <div role="heading" class="note-title marker" id="h-note-52" aria-level="5">
                                <span>注</span>
                            </div>
                            <div class="">
                                <p>
                                    実装は <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                        id="ref-for-dfn-cdm-29">CDM</a> を、<a data-link-type="idl"
                                        data-lt="MediaKeySystemAccess" href="#dom-mediakeysystemaccess"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysystemaccess-12"><code>MediaKeySystemAccess</code></a>
                                    オブジェクトの構成で指定された堅牢性レベルを少なくともサポートするように設定しなければなりません（<em class="rfc2119">MUST</em>）。<a
                                        data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys"
                                        class="internalDFN" id="ref-for-dom-mediakeys-8"><code>MediaKeys</code></a>
                                    オブジェクトの生成に使用されます。CDM の正確な設定は実装依存であり、実装は構成内の最高堅牢性レベルを使うように設定してもよい（<em
                                        class="rfc2119">MAY</em>）、より高い堅牢性レベルが利用可能であってもです。空文字列のみ指定された場合、実装はサポートする最低堅牢性レベルを使うように設定してもよいです（<em
                                        class="rfc2119">MAY</em>）。
                                </p>
                                <p>
                                    アプリケーションは想定外のクライアント非互換性を避けるために必要な堅牢性レベルを指定するべきです（<em class="rfc2119">SHOULD</em>）。
                                </p>
                            </div>
                        </div>
                    </dd>
                </dl>
            </section>
            <p>
                このオブジェクトが表す機能がサポートされているとみなされるためには、<a data-link-type="idl"
                    href="#dom-mediakeysystemmediacapability-contenttype" class="internalDFN"
                    id="ref-for-dom-mediakeysystemmediacapability-contenttype-3"><code>contentType</code></a>
                は空文字列であってはならず（<em class="rfc2119">MUST NOT</em>）、値全体（すべてのコーデックを含む）が <a data-link-type="idl"
                    href="#dom-mediakeysystemmediacapability-robustness" class="internalDFN"
                    id="ref-for-dom-mediakeysystemmediacapability-robustness-3"><code>robustness</code></a>
                とともにサポートされていなければなりません（<em class="rfc2119">MUST</em>）。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-53">
                <div role="heading" class="note-title marker" id="h-note-53" aria-level="4"><span>注</span></div>
                <p class="">
                    受け入れ可能なコーデックが複数ある場合は、各コーデックごとにこの辞書の別インスタンスを使用してください。
                </p>
            </div>
        </section>
    </section>
    <section id="mediakeysystemaccess-interface">
        <div class="header-wrapper">
            <h2 id="x4-mediakeysystemaccess-interface"><bdi class="secno">4. </bdi>
                <dfn data-export="" data-dfn-type="interface" id="dom-mediakeysystemaccess" data-idl="interface"
                    data-title="MediaKeySystemAccess" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>MediaKeySystemAccess</code></dfn> インターフェース
            </h2><a class="self-link" href="#mediakeysystemaccess-interface" aria-label="Permalink for Section 4."></a>
        </div>

        <p>
            <a data-link-type="idl" data-lt="MediaKeySystemAccess" href="#dom-mediakeysystemaccess" class="internalDFN"
                id="ref-for-dom-mediakeysystemaccess-13"><code>MediaKeySystemAccess</code></a>
            オブジェクトは <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                id="ref-for-dfn-key-system-12">Key System</a> へのアクセスを提供します。
        </p>
        <pre class="idl def" id="webidl-1780138428"><span class="idlHeader"><a class="self-link" href="#webidl-1780138428">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-mediakeysystemaccess" data-title="MediaKeySystemAccess">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>] interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-mediakeysystemaccess" id="ref-for-dom-mediakeysystemaccess-14"><code>MediaKeySystemAccess</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-mediakeysystemaccess-keysystem" data-title="keySystem" data-dfn-for="MediaKeySystemAccess">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediakeysystemaccess-keysystem" id="ref-for-dom-mediakeysystemaccess-keysystem-2"><code>keySystem</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-mediakeysystemaccess-getconfiguration" data-title="getConfiguration" data-dfn-for="MediaKeySystemAccess"><span class="idlType">
  <a data-link-type="idl" href="#dom-mediakeysystemconfiguration" class="internalDFN" id="ref-for-dom-mediakeysystemconfiguration-9"><code>MediaKeySystemConfiguration</code></a></span>  <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeysystemaccess-getconfiguration" id="ref-for-dom-mediakeysystemaccess-getconfiguration-2"><code>getConfiguration</code></a> ();</span><span data-idl="" class="idlMethod" id="idl-def-mediakeysystemaccess-createmediakeys" data-title="createMediaKeys" data-dfn-for="MediaKeySystemAccess"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-mediakeys" class="internalDFN" id="ref-for-dom-mediakeys-9"><code>MediaKeys</code></a>&gt;</span>           <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeysystemaccess-createmediakeys" id="ref-for-dom-mediakeysystemaccess-createmediakeys-1"><code>createMediaKeys</code></a> ();</span>
};</span></code></pre>
        <section id="attributes">
            <div class="header-wrapper">
                <h3 id="x4-1-attributes"><bdi class="secno">4.1 </bdi>
                    属性
                </h3><a class="self-link" href="#attributes" aria-label="Permalink for Section 4.1"></a>
            </div>

            <dl class="attributes" data-dfn-for="MediaKeySystemAccess">
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-mediakeysystemaccess-keysystem"
                        data-idl="attribute" data-title="keySystem" data-dfn-for="MediaKeySystemAccess"
                        data-type="DOMString" data-lt="keySystem" data-local-lt="MediaKeySystemAccess.keySystem"
                        tabindex="0" aria-haspopup="dialog"><code>keySystem</code></dfn> 型 <a data-link-type="interface"
                        data-lt="DOMString"
                        href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>、readonly
                </dt>
                <dd>
                    使用される <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                        id="ref-for-dfn-key-system-13">Key System</a> を識別します。
                </dd>
            </dl>
        </section>
        <section id="methods-0">
            <div class="header-wrapper">
                <h3 id="x4-2-methods"><bdi class="secno">4.2 </bdi>
                    メソッド
                </h3><a class="self-link" href="#methods-0" aria-label="Permalink for Section 4.2"></a>
            </div>

            <dl class="methods" data-dfn-for="MediaKeySystemAccess">
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediakeysystemaccess-getconfiguration"
                        data-idl="operation" data-title="getConfiguration()" data-dfn-for="MediaKeySystemAccess"
                        data-type="MediaKeySystemConfiguration" data-lt="getConfiguration()"
                        data-local-lt="MediaKeySystemAccess.getConfiguration|MediaKeySystemAccess.getConfiguration()|getConfiguration"
                        tabindex="0" aria-haspopup="dialog"><code>getConfiguration()</code></dfn>
                </dt>
                <dd>
                    <p>
                        <a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                            href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                            id="ref-for-dom-navigator-requestmediakeysystemaccess-10"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                        アルゴリズムによって選択されたサポートされる構成オプションの組み合わせを返します。
                    </p>
                    <p>
                        返されるオブジェクトは、最初に満たされた <a data-link-type="idl" data-lt="MediaKeySystemConfiguration"
                            href="#dom-mediakeysystemconfiguration" class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-10"><code>MediaKeySystemConfiguration</code></a>
                        構成（+暗黙のデフォルト）からなる非厳密な部分集合です。これは <a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                            href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                            id="ref-for-dom-navigator-requestmediakeysystemaccess-11"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                        の呼び出しに渡され、その呼び出しで解決されたプロミスに対応します。その単一構成で指定されていない機能（暗黙のデフォルト以外）は含まれず、<a
                            data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                            id="ref-for-dfn-key-system-14">Key System</a>
                        実装のすべての機能を必ずしも反映しません。構成内のすべての値は任意の組み合わせで使用できます。型 <a data-link-type="idl"
                            data-lt="MediaKeysRequirement" href="#dom-mediakeysrequirement" class="internalDFN"
                            id="ref-for-dom-mediakeysrequirement-7"><code>MediaKeysRequirement</code></a>
                        のメンバーは、どの組み合わせでその機能が要求されるかを反映します。これらは "<a data-link-type="idl"
                            href="#dom-mediakeysrequirement-optional" class="internalDFN"
                            id="ref-for-dom-mediakeysrequirement-optional-11"><code>optional</code></a>" の値にはなりません。
                    </p>
                    <p>
                        このメソッドが呼び出された際、ユーザーエージェントは次の手順を <em class="rfc2119">必ず</em>実行しなければなりません:
                    </p>
                    <ol class="method-algorithm">
                        <li>
                            <p>
                                このオブジェクトの <var>configuration</var> の値を返します。
                            </p>
                            <div class="note" role="note" id="issue-container-generatedID-54">
                                <div role="heading" class="note-title marker" id="h-note-54" aria-level="4">
                                    <span>注</span>
                                </div>
                                <p class="">
                                    このメソッドが呼び出されるたびに <var>configuration</var> から新しいオブジェクトが作成・初期化されます。
                                </p>
                            </div>
                            <div class="note" role="note" id="issue-container-generatedID-55">
                                <div role="heading" class="note-title marker" id="h-note-55" aria-level="4">
                                    <span>注</span>
                                </div>
                                <p class="">
                                    <a data-link-type="idl" href="#dom-mediakeysystemmediacapability-encryptionscheme"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme-4"><code>encryptionScheme</code></a>
                                    がアプリケーションによって指定されなかった場合でも、累積された <var>configuration</var> には値 <code>null</code> の <a
                                        data-link-type="idl" href="#dom-mediakeysystemmediacapability-encryptionscheme"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme-5"><code>encryptionScheme</code></a>
                                    フィールドが含まれていなければならず（<em
                                        class="rfc2119">MUST</em>）、ポリフィルがユーザーエージェントのフィールドサポートを特定値指定せずに検出できるようにします。
                                </p>
                            </div>
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediakeysystemaccess-createmediakeys"
                        data-idl="operation" data-title="createMediaKeys()" data-dfn-for="MediaKeySystemAccess"
                        data-type="Promise" data-lt="createMediaKeys()"
                        data-local-lt="MediaKeySystemAccess.createMediaKeys|MediaKeySystemAccess.createMediaKeys()|createMediaKeys"
                        tabindex="0" aria-haspopup="dialog"><code>createMediaKeys()</code></dfn>
                </dt>
                <dd>
                    <p>
                        <var>keySystem</var> 用の新しい <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys"
                            class="internalDFN" id="ref-for-dom-mediakeys-10"><code>MediaKeys</code></a> オブジェクトを作成します。
                    </p>
                    <p>
                        このメソッドが呼び出された際、ユーザーエージェントは次の手順を <em class="rfc2119">必ず</em>実行しなければなりません:
                    </p>
                    <ol class="method-algorithm">
                        <li>
                            <p>
                                <var>promise</var> を新しいプロミスとして作成します。
                            </p>
                        </li>
                        <li>
                            <p>
                                次の手順を並行して実行します:
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        <var>configuration</var> をこのオブジェクトの <var>configuration</var> の値とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>use distinctive identifier</var> を、<var>configuration</var> の <a
                                            data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-22"><code>distinctiveIdentifier</code></a>
                                        メンバーの値が "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-required-15"><code>required</code></a>"
                                        なら <code>true</code>、そうでなければ <code>false</code> とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>persistent state allowed</var> を、<var>configuration</var> の <a
                                            data-link-type="idl" href="#dom-mediakeysystemconfiguration-persistentstate"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-persistentstate-10"><code>persistentState</code></a>
                                        メンバーの値が "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-required-16"><code>required</code></a>"
                                        なら <code>true</code>、そうでなければ <code>false</code> とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        必要ならこのオブジェクトの <var>cdm implementation</var> の値で表される <a
                                            data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                            id="ref-for-dfn-key-system-15">Key System</a> 実装をロード・初期化します。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>instance</var> をこのオブジェクトの <var>cdm implementation</var> の値で表される <a
                                            data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                            id="ref-for-dfn-key-system-16">Key System</a> 実装の新しいインスタンスとします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>configuration</var> を使って <var>instance</var> を <a
                                            data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                            id="ref-for-dfn-key-system-17">Key System</a> 機能の有効化・無効化・選択に初期化します。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>use distinctive identifier</var> が <code>false</code>
                                        の場合、<var>instance</var> が <a data-link-type="dfn|abstract-op"
                                            data-lt="uses Distinctive Identifier(s) or Distinctive Permanent Identifier(s)"
                                            href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                                            class="internalDFN"
                                            id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-4">Distinctive
                                            Identifier(s) および Distinctive Permanent Identifier(s) を使用</a> できないようにします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>persistent state allowed</var> が <code>false</code> の場合、<var>instance</var>
                                        がこのオブジェクトの <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                                        や <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#concept-document">Document</a>、アプリケーションに関連するいかなる状態も永続化できないようにします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        直前のいずれかの手順が失敗した場合、新しい <a data-link-type="interface" data-lt="DOMException"
                                            href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>（名前は適切な
                                        <a href="#error-names">エラー名</a>）で <var>promise</var> を拒否します。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>media keys</var> を新しい <a data-link-type="idl" data-lt="MediaKeys"
                                            href="#dom-mediakeys" class="internalDFN"
                                            id="ref-for-dom-mediakeys-11"><code>MediaKeys</code></a>
                                        オブジェクトとし、以下のように初期化します:
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                <var>use distinctive identifier</var> の値を <var>media keys</var>
                                                の値として設定します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <var>persistent state allowed</var> の値を <var>media keys</var>
                                                の値として設定します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <var>supported session types</var> の値を <var>configuration</var> の <a
                                                    data-link-type="idl"
                                                    href="#dom-mediakeysystemconfiguration-sessiontypes"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeysystemconfiguration-sessiontypes-5"><code>sessionTypes</code></a>
                                                メンバーの値とします。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <var>cdm implementation</var> の値をこのオブジェクトの <var>cdm implementation</var>
                                                の値とします。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <var>cdm instance</var> の値を <var>instance</var> とします。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        <var>promise</var> を <var>media keys</var> で解決します。
                                    </p>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                <var>promise</var> を返します。
                            </p>
                        </li>
                    </ol>
                </dd>
            </dl>
        </section>
    </section>
    <section id="mediakeys-interface">
        <div class="header-wrapper">
            <h2 id="x5-mediakeys-interface"><bdi class="secno">5. </bdi>
                <dfn data-export="" data-dfn-type="interface" id="dom-mediakeys" data-idl="interface"
                    data-title="MediaKeys" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>MediaKeys</code></dfn> インターフェース
            </h2><a class="self-link" href="#mediakeys-interface" aria-label="Permalink for Section 5."></a>
        </div>

        <p>
            <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                id="ref-for-dom-mediakeys-12"><code>MediaKeys</code></a> オブジェクトは、関連付けられた <a data-link-type="idl"
                data-lt="HTMLMediaElement" href="#dom-htmlmediaelement" class="internalDFN"
                id="ref-for-dom-htmlmediaelement-4"><code>HTMLMediaElement</code></a> が再生中に <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/media.html#media-data">media data</a>
            の復号に使用できる一連の鍵を表します。また、<a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                id="ref-for-dfn-cdm-32">CDM</a> インスタンスも表します。
        </p>
        <p>
            <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                id="ref-for-dom-mediakeys-13"><code>MediaKeys</code></a>
            オブジェクトは、もはやアクセス可能でないとユーザーエージェントが判断した場合に破棄されることがあります。
        </p>
        <div class="note" role="note" id="issue-container-generatedID-56">
            <div role="heading" class="note-title marker" id="h-note-56" aria-level="3"><span>注</span></div>
            <p class="">
                例えば、スクリプトからの参照が存在せず、添付されたメディア要素がない場合などです。
            </p>
        </div>
        <p>
            プロミスを返すメソッドにおいて、すべてのエラーは返された Promise を拒否することで非同期に報告されます。これには [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-webidl" title="Web IDL Standard">WEBIDL</a></cite>]
            の型マッピングエラーも含まれます。
        </p>
        <p>
            アルゴリズムの手順は、プロミスが拒否されると常に中止されます。
        </p>
        <pre class="idl def" id="webidl-2083600463"><span class="idlHeader"><a class="self-link" href="#webidl-2083600463">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-mediakeysessiontype" data-title="MediaKeySessionType">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-mediakeysessiontype" id="ref-for-dom-mediakeysessiontype-2"><code>MediaKeySessionType</code></a> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeysessiontype-temporary" id="ref-for-dom-mediakeysessiontype-temporary-6"><code>temporary</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeysessiontype-persistent-license" id="ref-for-dom-mediakeysessiontype-persistent-license-1"><code>persistent-license</code></a>"</span>
};</span></code></pre>
        <p>
            <dfn data-export="" data-dfn-type="enum" id="dom-mediakeysessiontype" data-idl="enum"
                data-title="MediaKeySessionType" data-dfn-for="" tabindex="0"
                aria-haspopup="dialog"><code>MediaKeySessionType</code></dfn> 列挙型は次のように定義されます:
        </p>
        <table class="simple" data-dfn-for="MediaKeySessionType">
            <tbody>
                <tr>
                    <th colspan="2">
                        列挙型の説明
                    </th>
                </tr>
                <tr>
                    <td>
                        <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeysessiontype-temporary"
                            data-idl="enum-value" data-title="temporary" data-dfn-for="MediaKeySessionType" tabindex="0"
                            aria-haspopup="dialog"><code>temporary</code></dfn>
                    </td>
                    <td>
                        <p>
                            ライセンス、鍵およびセッションに関連する記録やデータが永続化されないセッション。
                        </p>
                        <p>
                            アプリケーションはそのような保存の管理を心配する必要はありません。このセッションタイプのサポートは <em class="rfc2119">必須</em> です。
                        </p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeysessiontype-persistent-license"
                            data-idl="enum-value" data-title="persistent-license" data-dfn-for="MediaKeySessionType"
                            tabindex="0" aria-haspopup="dialog"><code>persistent-license</code></dfn>
                    </td>
                    <td>
                        <p>
                            ライセンス（および必要に応じてセッションに関連する他のデータ）が永続化されるセッション。ライセンスとそれが含む鍵が破棄されるとき、<a
                                data-link-type="dfn|abstract-op" href="#dfn-record-s-of-license-destruction"
                                class="internalDFN" id="ref-for-dfn-record-s-of-license-destruction-2">record of license
                                destruction</a> が必ず永続化されなければなりません。<dfn
                                data-lt="record(s) of license destruction|records of license destruction|record of license destruction"
                                id="dfn-record-s-of-license-destruction" tabindex="0" aria-haspopup="dialog"
                                data-dfn-type="dfn">record of license destruction</dfn>
                            は、そのライセンスと含まれる鍵がクライアントによって使用不能であることを示す <a data-link-type="dfn|abstract-op"
                                href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-18">Key System</a>
                            固有の証明です。このセッションタイプのサポートは <em class="rfc2119">任意</em> です。
                        </p>
                        <p>
                            このタイプのセッションは、このオブジェクトを生成した <a data-link-type="idl" data-lt="MediaKeySystemAccess"
                                href="#dom-mediakeysystemaccess" class="internalDFN"
                                id="ref-for-dom-mediakeysystemaccess-15"><code>MediaKeySystemAccess</code></a>
                            オブジェクトに関係付けられた構成の <a data-link-type="idl"
                                href="#dom-mediakeysystemconfiguration-persistentstate" class="internalDFN"
                                id="ref-for-dom-mediakeysystemconfiguration-persistentstate-11"><code>persistentState</code></a>
                            が "<a data-link-type="idl" href="#dom-mediakeysrequirement-required" class="internalDFN"
                                id="ref-for-dom-mediakeysrequirement-required-17"><code>required</code></a>"
                            に設定されている場合にのみ作成できます。セッションは <a data-link-type="dfn|abstract-op" href="#dfn-session-id"
                                class="internalDFN" id="ref-for-dfn-session-id-2">Session ID</a> を使用して、<a
                                data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysession-update-3"><code>update</code></a><code>()</code>
                            が成功裏に呼ばれた後、ロード可能でなければなりません。<a data-link-type="idl" data-lt="message" href="#dfn-message"
                                class="internalDFN" id="ref-for-dfn-message-1"><code><code>message</code></code></a>
                            のタイプ "<a data-link-type="idl" href="#dom-mediakeymessagetype-license-release"
                                class="internalDFN"
                                id="ref-for-dom-mediakeymessagetype-license-release-1"><code>license-release</code></a>"
                            を含むメッセージが、<a data-link-type="idl" data-lt="remove()" href="#dom-mediakeysession-remove"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysession-remove-1"><code>remove</code></a><code>()</code>
                            が呼ばれたときに生成され、その記録が <a data-link-type="idl" data-lt="update()"
                                href="#dom-mediakeysession-update" class="internalDFN"
                                id="ref-for-dom-mediakeysession-update-4"><code>update</code></a><code>()</code>
                            に渡された応答によって確認されるまで送出され続けます。
                        </p>
                        <p>
                            そのようなセッションのために永続化されたデータが不要になったときに削除する責任はアプリケーションにあります。詳細は <a href="#session-storage">Session
                                Storage and Persistence</a> を参照してください。
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <pre class="idl def" id="webidl-742597615"><span class="idlHeader"><a class="self-link" href="#webidl-742597615">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-mediakeys" data-title="MediaKeys">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>] interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-mediakeys" id="ref-for-dom-mediakeys-14"><code>MediaKeys</code></a> {<span data-idl="" class="idlMethod" id="idl-def-mediakeys-createsession-sessiontype" data-title="createSession" data-dfn-for="MediaKeys"><span class="idlType">
    <a data-link-type="idl" href="#dom-mediakeysession" class="internalDFN" id="ref-for-dom-mediakeysession-4"><code>MediaKeySession</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeys-createsession" id="ref-for-dom-mediakeys-createsession-1"><code>createSession</code></a> (optional<span class="idlType"> <a data-link-type="idl" href="#dom-mediakeysessiontype" class="internalDFN" id="ref-for-dom-mediakeysessiontype-3"><code>MediaKeySessionType</code></a></span> <span class="idlParamName">sessionType</span> = "temporary");</span><span data-idl="" class="idlMethod" id="idl-def-mediakeys-getstatusforpolicy-policy" data-title="getStatusForPolicy" data-dfn-for="MediaKeys"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-mediakeystatus" class="internalDFN" id="ref-for-dom-mediakeystatus-2"><code>MediaKeyStatus</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeys-getstatusforpolicy" id="ref-for-dom-mediakeys-getstatusforpolicy-2"><code>getStatusForPolicy</code></a> (optional<span class="idlType"> <a data-link-type="idl" href="#dom-mediakeyspolicy" class="internalDFN" id="ref-for-dom-mediakeyspolicy-1"><code>MediaKeysPolicy</code></a></span> <span class="idlParamName">policy</span> = {});</span><span data-idl="" class="idlMethod" id="idl-def-mediakeys-setservercertificate-servercertificate" data-title="setServerCertificate" data-dfn-for="MediaKeys"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeys-setservercertificate" id="ref-for-dom-mediakeys-setservercertificate-1"><code>setServerCertificate</code></a> (<span class="idlType"><a data-link-type="typedef" href="https://webidl.spec.whatwg.org/#BufferSource">BufferSource</a></span> <span class="idlParamName">serverCertificate</span>);</span>
};</span></code></pre>
        <section id="methods-1">
            <div class="header-wrapper">
                <h3 id="x5-1-methods"><bdi class="secno">5.1 </bdi>
                    メソッド
                </h3><a class="self-link" href="#methods-1" aria-label="Permalink for Section 5.1"></a>
            </div>

            <dl class="methods" data-dfn-for="MediaKeys">
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediakeys-createsession" data-idl="operation"
                        data-title="createSession()" data-dfn-for="MediaKeys" data-type="MediaKeySession"
                        data-lt="createSession()|createSession(sessionType)"
                        data-local-lt="MediaKeys.createSession|MediaKeys.createSession()|createSession" tabindex="0"
                        aria-haspopup="dialog"><code>createSession()</code></dfn>
                </dt>
                <dd>
                    <p>
                        新しい <a data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession"
                            class="internalDFN" id="ref-for-dom-mediakeysession-5"><code>MediaKeySession</code></a>
                        オブジェクトを返します。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-57">
                        <div role="heading" class="note-title marker" id="h-note-57" aria-level="4"><span>注</span>
                        </div>
                        <p class="">
                            <var>sessionType</var> パラメータは返されるオブジェクトの挙動に影響します。
                        </p>
                    </div>
                    <p>
                        このメソッドが呼び出されたとき、ユーザーエージェントは次の手順を <em class="rfc2119">必ず</em> 実行しなければなりません:
                    </p>
                    <ol class="method-algorithm">
                        <li>
                            <p>
                                もしこのオブジェクトの <var>supported session types</var> 値が <var>sessionType</var> を含まない場合、<a
                                    data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a>
                                [<cite><a class="bibref" data-link-type="biblio" href="#bib-webidl"
                                        title="Web IDL Standard">WEBIDL</a></cite>] として <a data-link-type="idl"
                                    data-lt="NotSupportedError" href="#dfn-notsupportederror" class="internalDFN"
                                    id="ref-for-dfn-notsupportederror-3"><code><code>NotSupportedError</code></code></a>
                                を投げます。
                            </p>
                            <div class="note" role="note" id="issue-container-generatedID-58">
                                <div role="heading" class="note-title marker" id="h-note-58" aria-level="4">
                                    <span>注</span>
                                </div>
                                <p class="">
                                    <var>sessionType</var> に対して <a data-link-type="dfn|abstract-op"
                                        href="#dfn-is-persistent-session-type" class="internalDFN"
                                        id="ref-for-dfn-is-persistent-session-type-4">Is persistent session type?</a>
                                    アルゴリズムが <code>true</code> を返す値は、このオブジェクトの <var>persistent state allowed</var> 値が
                                    <code>false</code> の場合に失敗します。
                                </p>
                            </div>
                        </li>
                        <li>
                            <p>
                                実装が現在の状態で <a data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysession-6"><code>MediaKeySession</code></a>
                                操作をサポートしていない場合、<a data-link-type="dfn"
                                    href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> [<cite><a class="bibref"
                                        data-link-type="biblio" href="#bib-webidl"
                                        title="Web IDL Standard">WEBIDL</a></cite>] として <a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-1"><code><code>InvalidStateError</code></code></a>
                                を投げます。
                            </p>
                            <div class="note" role="note" id="issue-container-generatedID-59">
                                <div role="heading" class="note-title marker" id="h-note-59" aria-level="4">
                                    <span>注</span>
                                </div>
                                <p class="">
                                    一部の実装では、この <a data-link-type="idl" data-lt="MediaKeySession"
                                        href="#dom-mediakeysession" class="internalDFN"
                                        id="ref-for-dom-mediakeysession-7"><code>MediaKeySession</code></a>
                                    アルゴリズムを実行するために、まずこの <a data-link-type="idl" data-lt="MediaKeys"
                                        href="#dom-mediakeys" class="internalDFN"
                                        id="ref-for-dom-mediakeys-15"><code>MediaKeys</code></a> オブジェクトを <a
                                        data-link-type="idl" data-lt="setMediaKeys()"
                                        href="#dom-htmlmediaelement-setmediakeys" class="internalDFN"
                                        id="ref-for-dom-htmlmediaelement-setmediakeys-1"><code>setMediaKeys</code></a><code>()</code>
                                    を使ってメディア要素に関連付ける必要がある場合があります。この手順は、そのような珍しい挙動を検出することで、その後の操作実行前に検出できるようにするものです。
                                </p>
                            </div>
                        </li>
                        <li>
                            <p>
                                <var>session</var> を新しい <a data-link-type="idl" data-lt="MediaKeySession"
                                    href="#dom-mediakeysession" class="internalDFN"
                                    id="ref-for-dom-mediakeysession-8"><code>MediaKeySession</code></a>
                                オブジェクトとし、次のように初期化します:
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        <a data-link-type="idl" href="#dom-mediakeysession-sessionid"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysession-sessionid-1"><code>sessionId</code></a>
                                        属性を空文字列とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <a data-link-type="idl" href="#dom-mediakeysession-expiration"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysession-expiration-1"><code>expiration</code></a>
                                        属性を <code>NaN</code> とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <a data-link-type="idl" href="#dom-mediakeysession-closed" class="internalDFN"
                                            id="ref-for-dom-mediakeysession-closed-1"><code>closed</code></a>
                                        属性を新しいプロミスとします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>key status</var> を新しい空の <a data-link-type="idl" data-lt="MediaKeyStatusMap"
                                            href="#dom-mediakeystatusmap" class="internalDFN"
                                            id="ref-for-dom-mediakeystatusmap-1"><code>MediaKeyStatusMap</code></a>
                                        オブジェクトとし、次のように初期化します:
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                <a data-link-type="idl" href="#dom-mediakeystatusmap-size"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeystatusmap-size-1"><code>size</code></a>
                                                属性を 0 とします。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        <var>session type</var> の値を <var>sessionType</var> とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>uninitialized</var> の値を true とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>callable</var> の値を false とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>closing or closed</var> の値を false とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>use distinctive identifier</var> の値をこのオブジェクトの <var>use distinctive
                                            identifier</var> 値とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>cdm implementation</var> の値をこのオブジェクトの <var>cdm implementation</var> とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>cdm instance</var> の値をこのオブジェクトの <var>cdm instance</var> とします。
                                    </p>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                <var>session</var> を返します。
                            </p>
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediakeys-getstatusforpolicy"
                        data-idl="operation" data-title="getStatusForPolicy()" data-dfn-for="MediaKeys"
                        data-type="Promise" data-lt="getStatusForPolicy()|getStatusForPolicy(policy)"
                        data-local-lt="MediaKeys.getStatusForPolicy|MediaKeys.getStatusForPolicy()|getStatusForPolicy"
                        tabindex="0" aria-haspopup="dialog"><code>getStatusForPolicy()</code></dfn>
                </dt>
                <dd>
                    <p id="status-for-policy">
                        指定された <a data-link-type="idl" data-lt="MediaKeysPolicy" href="#dom-mediakeyspolicy"
                            class="internalDFN" id="ref-for-dom-mediakeyspolicy-2"><code>MediaKeysPolicy</code></a> に対する
                        <a data-link-type="idl" data-lt="MediaKeyStatus" href="#dom-mediakeystatus" class="internalDFN"
                            id="ref-for-dom-mediakeystatus-3"><code>MediaKeyStatus</code></a> を返します。
                    </p>
                    <div>
                        <pre class="idl def" id="webidl-2023973166"><span class="idlHeader"><a class="self-link" href="#webidl-2023973166">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-mediakeyspolicy" data-title="MediaKeysPolicy">dictionary <dfn data-export="" data-dfn-type="dictionary" id="dom-mediakeyspolicy" data-idl="dictionary" data-title="MediaKeysPolicy" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>MediaKeysPolicy</code></dfn> {<span data-idl="" class="idlMember" id="idl-def-mediakeyspolicy-minhdcpversion" data-title="minHdcpVersion" data-dfn-for="MediaKeysPolicy"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeyspolicy-minhdcpversion" data-idl="field" data-title="minHdcpVersion" data-dfn-for="MediaKeysPolicy" data-type="DOMString" class="idlName" tabindex="0" aria-haspopup="dialog"><code>minHdcpVersion</code></dfn>;</span>
};</span></code></pre>
                        <p>
                            <a data-link-type="idl" data-lt="MediaKeysPolicy" href="#dom-mediakeyspolicy"
                                class="internalDFN" id="ref-for-dom-mediakeyspolicy-3"><code>MediaKeysPolicy</code></a>
                            辞書はオプションのプロパティのみからなるオブジェクトです。各プロパティはポリシー要件を表します。ポリシーは、すべての要件に基づいて <a
                                data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-33">CDM</a> が復号済みメディアデータの表示を許可する場合に満たされたと見なされます。
                        </p>
                    </div>
                    <div>
                        <p>
                            HDCP ポリシーは <a data-link-type="idl" href="#dom-mediakeyspolicy-minhdcpversion"
                                class="internalDFN"
                                id="ref-for-dom-mediakeyspolicy-minhdcpversion-1"><code>minHdcpVersion</code></a>
                            で表されます。システムが指定された HDCP バージョン以上を有効にできる場合、ポリシーは "<a data-link-type="idl"
                                href="#dom-mediakeystatus-usable" class="internalDFN"
                                id="ref-for-dom-mediakeystatus-usable-1"><code>usable</code></a>" の <a
                                data-link-type="idl" data-lt="MediaKeyStatus" href="#dom-mediakeystatus"
                                class="internalDFN" id="ref-for-dom-mediakeystatus-4"><code>MediaKeyStatus</code></a>
                            をもたらします。[<cite><a class="bibref" data-link-type="biblio"
                                    href="#bib-eme-hdcp-version-registry"
                                    title="Encrypted Media Extensions HDCP Version Registry">EME-HDCP-VERSION-REGISTRY</a></cite>]
                            は <a data-link-type="idl" href="#dom-mediakeyspolicy-minhdcpversion" class="internalDFN"
                                id="ref-for-dom-mediakeyspolicy-minhdcpversion-2"><code>minHdcpVersion</code></a> の値と
                            HDCP 仕様との対応を提供します。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-60">
                            <div role="heading" class="note-title marker" id="h-note-60" aria-level="4">
                                <span>注</span>
                            </div>
                            <p class="">
                                HDCP 状況の判定は、再生中に <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                    id="ref-for-dfn-cdm-34">CDM</a>
                                がそのような制限を強制するのと同じ方法で行うべきです。こうすることで、アプリケーション開発者は再生を開始するために取得すべきコンテンツを最適化するための合理的なヒントを得られます。
                            </p>
                        </div>
                    </div>
                    <p>
                        このメソッドが呼び出されたとき、ユーザーエージェントは次の手順を <em class="rfc2119">必ず</em> 実行しなければなりません:
                    </p>
                    <ol class="method-algorithm">
                        <li>If <var>policy</var> に <a data-link-type="dfn" data-lt="exist"
                                href="https://infra.spec.whatwg.org/#map-exists">存在する</a> <a data-link-type="dfn"
                                href="https://webidl.spec.whatwg.org/#dfn-dictionary-member">辞書メンバー</a> がない場合、<a
                                data-link-type="idl" data-lt="TypeError" href="#dfn-typeerror" class="internalDFN"
                                id="ref-for-dfn-typeerror-3"><code><code>TypeError</code></code></a> で拒否されたプロミスを返します。
                        </li>
                        <li>
                            <p>
                                <var>promise</var> を新しいプロミスとします。
                            </p>
                        </li>
                        <li>
                            <p>
                                <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキュー</a>して、次の手順を実行します:
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        <var>policy</var> の各 <a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#dfn-dictionary-member">辞書メンバー</a>
                                        に対して次の手順を実行します:
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                もしキーが <a data-link-type="idl" data-lt="MediaKeysPolicy"
                                                    href="#dom-mediakeyspolicy" class="internalDFN"
                                                    id="ref-for-dom-mediakeyspolicy-4"><code>MediaKeysPolicy</code></a>
                                                の有効なメンバーでないか、値の型が間違っている場合、<var>promise</var> を <a data-link-type="idl"
                                                    data-lt="TypeError" href="#dfn-typeerror" class="internalDFN"
                                                    id="ref-for-dfn-typeerror-4"><code><code>TypeError</code></code></a>
                                                で拒否してこれらの手順を中止します。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        <var>policy</var> の各 <a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#dfn-dictionary-member">辞書メンバー</a>
                                        に対して次の手順を実行します:
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                もし <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                                    class="internalDFN" id="ref-for-dfn-cdm-35">CDM</a> がその <a
                                                    data-link-type="idl" data-lt="MediaKeyStatus"
                                                    href="#dom-mediakeystatus" class="internalDFN"
                                                    id="ref-for-dom-mediakeystatus-5"><code>MediaKeyStatus</code></a>
                                                を判定できない場合、<var>promise</var> を <a data-link-type="idl"
                                                    data-lt="NotSupportedError" href="#dfn-notsupportederror"
                                                    class="internalDFN"
                                                    id="ref-for-dfn-notsupportederror-4"><code><code>NotSupportedError</code></code></a>
                                                で拒否してこれらの手順を中止します。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        <var>policy</var> の各 <a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#dfn-dictionary-member">辞書メンバー</a>
                                        に対して次の手順を実行します:
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                もし <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                                    class="internalDFN" id="ref-for-dfn-cdm-36">CDM</a>
                                                がその辞書メンバーに対して復号済みメディアデータの表示をブロックするなら、<var>promise</var> を "<a
                                                    data-link-type="idl" href="#dom-mediakeystatus-output-restricted"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeystatus-output-restricted-1"><code>output-restricted</code></a>"
                                                で解決します。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        <var>promise</var> を "<a data-link-type="idl" href="#dom-mediakeystatus-usable"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeystatus-usable-2"><code>usable</code></a>" で解決します。
                                    </p>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                <var>promise</var> を返します。
                            </p>
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediakeys-setservercertificate"
                        data-idl="operation" data-title="setServerCertificate()" data-dfn-for="MediaKeys"
                        data-type="Promise" data-lt="setServerCertificate()|setServerCertificate(serverCertificate)"
                        data-local-lt="MediaKeys.setServerCertificate|MediaKeys.setServerCertificate()|setServerCertificate"
                        tabindex="0" aria-haspopup="dialog"><code>setServerCertificate()</code></dfn>
                </dt>
                <dd>
                    <p id="server-certificate">
                        ライセンスサーバーへのメッセージを暗号化するために使用されるサーバー証明書を提供します。
                    </p>
                    <p>
                        そのような証明書を使用する <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                            id="ref-for-dfn-key-system-19">Key Systems</a> は、サーバーから証明書を要求するために "<a
                            data-link-type="dfn|abstract-op" href="#dfn-queue-a-message-event" class="internalDFN"
                            id="ref-for-dfn-queue-a-message-event-1">Queue a "message" Event</a>" アルゴリズムをサポートしなければなりません。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-61">
                        <div role="heading" class="note-title marker" id="h-note-61" aria-level="4"><span>注</span>
                        </div>
                        <p class="">
                            このメソッドは、必要になった場合に CDM
                            が証明書を要求する追加の往復を回避するために、サーバー証明書を事前に実装に渡すことを可能にします。最適化を目的としており、アプリケーションはこれを必ず使用する必要はありません。
                        </p>
                    </div>
                    <p>
                        サーバー証明書の内容は <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                            id="ref-for-dfn-key-system-20">Key System</a> 固有です。実行可能なコードを含んではいけません（<em
                            class="rfc2119">MUST NOT</em>）。
                    </p>
                    <p>
                        このメソッドが呼び出されたとき、ユーザーエージェントは次の手順を <em class="rfc2119">必ず</em> 実行しなければなりません:
                    </p>
                    <ol class="method-algorithm">
                        <li>
                            <p>
                                このオブジェクトの <var>cdm implementation</var> 値で表される <a data-link-type="dfn|abstract-op"
                                    href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-21">Key
                                    System</a> 実装がサーバー証明書をサポートしていない場合、<code>false</code> で解決されたプロミスを返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                もし <var>serverCertificate</var> が空の配列であれば、新しく作成した <a data-link-type="idl"
                                    data-lt="TypeError" href="#dfn-typeerror" class="internalDFN"
                                    id="ref-for-dfn-typeerror-5"><code><code>TypeError</code></code></a>
                                で拒否されたプロミスを返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                <var>certificate</var> を <var>serverCertificate</var> パラメータの内容のコピーとします。
                            </p>
                        </li>
                        <li>
                            <p>
                                <var>promise</var> を新しいプロミスとします。
                            </p>
                        </li>
                        <li>
                            <p>
                                次の手順を並行して実行します:
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        <var>sanitized certificate</var> を <var>certificate</var>
                                        の検証および／またはサニタイズされたバージョンとします。
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-62">
                                        <div role="heading" class="note-title marker" id="h-note-62" aria-level="4">
                                            <span>注</span>
                                        </div>
                                        <p class="">
                                            ユーザーエージェントは証明書を CDM
                                            に渡す前に十分に検証すべきです。これには、値が妥当な範囲内であることの確認、無関係なデータやフィールドの削除、事前解析、サニタイズ、あるいは完全にサニタイズされたバージョンの生成が含まれる場合があります。ユーザーエージェントはフィールドの長さや値が妥当であることを確認すべきです。未知のフィールドは拒否または削除すべきです。
                                        </p>
                                    </div>
                                </li>
                                <li>
                                    <p>
                                        このオブジェクトの <var>cdm instance</var> を使って <var>sanitized certificate</var> を処理します。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        前述の手順が失敗した場合、適切な <a href="#error-names">エラー名</a> を持つ新しい <a
                                            data-link-type="interface" data-lt="DOMException"
                                            href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                                        で <var>promise</var> を拒否します。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>promise</var> を <code>true</code> で解決します。
                                    </p>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                <var>promise</var> を返します。
                            </p>
                        </li>
                    </ol>
                </dd>
            </dl>
        </section>
        <section id="algorithms-0">
            <div class="header-wrapper">
                <h3 id="x5-2-algorithms"><bdi class="secno">5.2 </bdi>
                    アルゴリズム
                </h3><a class="self-link" href="#algorithms-0" aria-label="Permalink for Section 5.2"></a>
            </div>

            <section id="is-persistent-session-type">
                <div class="header-wrapper">
                    <h4 id="x5-2-1-is-persistent-session-type"><bdi class="secno">5.2.1 </bdi>
                        <dfn id="dfn-is-persistent-session-type" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">Is persistent session type?</dfn>
                    </h4><a class="self-link" href="#is-persistent-session-type"
                        aria-label="Permalink for Section 5.2.1"></a>
                </div>

                <p>
                    Is persistent session type?
                    アルゴリズムは、指定されたセッションタイプが何らかの永続化をサポートするかどうかを判定するために実行されます。このアルゴリズムを実行するリクエストには <a data-link-type="idl"
                        data-lt="MediaKeySessionType" href="#dom-mediakeysessiontype" class="internalDFN"
                        id="ref-for-dom-mediakeysessiontype-4"><code>MediaKeySessionType</code></a> の値が含まれます。
                </p>
                <p>
                    次の手順が実行されます:
                </p>
                <ol>
                    <li>
                        <p>
                            <var>session type</var> を指定された <a data-link-type="idl" data-lt="MediaKeySessionType"
                                href="#dom-mediakeysessiontype" class="internalDFN"
                                id="ref-for-dom-mediakeysessiontype-5"><code>MediaKeySessionType</code></a> の値とします。
                        </p>
                    </li>
                    <li>
                        <p>
                            次のリストの <var>session type</var> の値に対応する手順に従います:
                        </p>
                        <dl class="switch">
                            <dt>
                                "<a data-link-type="idl" href="#dom-mediakeysessiontype-temporary" class="internalDFN"
                                    id="ref-for-dom-mediakeysessiontype-temporary-7"><code>temporary</code></a>"
                            </dt>
                            <dd>
                                Return <code>false</code>.
                            </dd>
                            <dt>
                                "<a data-link-type="idl" href="#dom-mediakeysessiontype-persistent-license"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysessiontype-persistent-license-2"><code>persistent-license</code></a>"
                            </dt>
                            <dd>
                                Return <code>true</code>.
                            </dd>
                        </dl>
                    </li>
                </ol>
            </section>
            <section id="cdm-unavailable">
                <div class="header-wrapper">
                    <h4 id="x5-2-2-cdm-unavailable"><bdi class="secno">5.2.2 </bdi>
                        <dfn id="dfn-cdm-unavailable" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">CDM
                            Unavailable</dfn>
                    </h4><a class="self-link" href="#cdm-unavailable" aria-label="Permalink for Section 5.2.2"></a>
                </div>

                <p>
                    CDM unavailable アルゴリズムは、<a data-link-type="idl" data-lt="MediaKeySession"
                        href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-9"><code>MediaKeySession</code></a> オブジェクトをすべて閉じるために実行されます。対象は
                    <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                        id="ref-for-dom-mediakeys-16"><code>MediaKeys</code></a> オブジェクト（<var>media
                        keys</var>）に関連付けられたものです。これは <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                        class="internalDFN" id="ref-for-dfn-cdm-39">CDM</a>
                    インスタンスが利用不可能になった場合に実行されます。このアルゴリズムを実行するリクエストには <a data-link-type="idl"
                        data-lt="MediaKeySessionClosedReason" href="#dom-mediakeysessionclosedreason"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysessionclosedreason-2"><code>MediaKeySessionClosedReason</code></a>
                    の値が含まれます。
                </p>
                <p>
                    次の手順が実行されます:
                </p>
                <ol>
                    <li>
                        <p>
                            <var>reason</var> を指定された <a data-link-type="idl" data-lt="MediaKeySessionClosedReason"
                                href="#dom-mediakeysessionclosedreason" class="internalDFN"
                                id="ref-for-dom-mediakeysessionclosedreason-3"><code>MediaKeySessionClosedReason</code></a>
                            の値とします。
                        </p>
                    </li>
                    <li>
                        <p>
                            <var>media keys</var> によって生成され、この時点で <a data-link-type="dfn|abstract-op" href="#dfn-closed"
                                class="internalDFN" id="ref-for-dfn-closed-1">closed</a> でない各 <a data-link-type="idl"
                                data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                                id="ref-for-dom-mediakeysession-10"><code>MediaKeySession</code></a> に対して、<a
                                data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキュー</a>し、そのセッションで
                            <a data-link-type="dfn|abstract-op" href="#dfn-session-closed" class="internalDFN"
                                id="ref-for-dfn-session-closed-1">Session Closed</a> アルゴリズムを <var>reason</var>
                            を使って実行します。
                        </p>
                    </li>
                </ol>
            </section>
        </section>
        <section id="media-keys-storage">
            <div class="header-wrapper">
                <h3 id="x5-3-storage-and-persistence"><bdi class="secno">5.3 </bdi>
                    <dfn id="dfn-storage-and-persistence" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">Storage and Persistence</dfn>
                </h3><a class="self-link" href="#media-keys-storage" aria-label="Permalink for Section 5.3"></a>
            </div>

            <p>
                本節では、ストレージおよび永続化に関連する一般的な要件について説明します。
            </p>
            <p>
                もし <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                    id="ref-for-dom-mediakeys-17"><code>MediaKeys</code></a> オブジェクトの <var>persistent state
                    allowed</var> 値が
                <code>false</code> である場合、そのオブジェクトの <var>cdm instance</var>
                は、このオブジェクトまたはそれが生成するいかなるセッションに対する操作の結果として状態を永続化したり、以前に永続化された状態にアクセスしてはならない（<em class="rfc2119">SHALL
                    NOT</em>）。
            </p>
            <p>
                もし <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                    id="ref-for-dom-mediakeys-18"><code>MediaKeys</code></a> オブジェクトの <var>persistent state
                    allowed</var> 値が
                <code>true</code> である場合、そのオブジェクトの <var>cdm instance</var>
                は、このオブジェクトまたはそれが生成するいかなるセッションに対する操作の結果として状態を永続化したり、以前に永続化された状態にアクセスしてもよい（<em class="rfc2119">MAY</em>）。
            </p>
            <p>
                永続化されたデータは常に、このオブジェクトの <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> を持つ
                <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document">Document</a>
                のみがアクセスできるように保存されなければならない（<em class="rfc2119">MUST</em>）。さらに、そのデータは現在の <a
                    data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                    id="ref-for-dfn-browsing-profile-2">browsing profile</a>
                のみがアクセス可能でなければならず、他のブラウジングプロファイル、ユーザーエージェント、およびアプリケーションは保存されたデータにアクセスしてはならない（<em class="rfc2119">MUST
                    NOT</em>）。詳細は <a href="#privacy-storedinfo">Information Stored on
                    User Devices</a> を参照してください。
            </p>
            <p>
                永続ストレージをサポートする際の追加の考慮事項については、<a href="#security" class="sec-ref"><bdi class="secno">10. </bdi>
                    Security</a> および <a href="#privacy" class="sec-ref"><bdi class="secno">11. </bdi>
                    Privacy</a> を参照してください。
            </p>
        </section>
    </section>
    <section id="mediakeysession-interface">
        <div class="header-wrapper">
            <h2 id="x6-mediakeysession-interface"><bdi class="secno">6. </bdi>
                <dfn data-export="" data-dfn-type="interface" id="dom-mediakeysession" data-idl="interface"
                    data-title="MediaKeySession" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>MediaKeySession</code></dfn> インターフェース
            </h2><a class="self-link" href="#mediakeysession-interface" aria-label="Permalink for Section 6."></a>
        </div>

        <p>
            <a data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                id="ref-for-dom-mediakeysession-11"><code>MediaKeySession</code></a> オブジェクトは<a
                data-link-type="dfn|abstract-op" href="#dfn-key-session" class="internalDFN"
                id="ref-for-dfn-key-session-2">キーセッション</a>を表します。
        </p>
        <p>
            <a data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                id="ref-for-dom-mediakeysession-12"><code>MediaKeySession</code></a> オブジェクトは、そのオブジェクトの <a
                data-link-type="idl" href="#dom-mediakeysession-closed" class="internalDFN"
                id="ref-for-dom-mediakeysession-closed-2"><code>closed</code></a> 属性が解決済みである場合に限り <dfn
                data-dfn-for="media key session" id="dfn-closed" tabindex="0" aria-haspopup="dialog"
                data-dfn-type="dfn">closed</dfn> と見なされます。
        </p>
        <p>
            ユーザーエージェントは、<a data-link-type="dfn|abstract-op" href="#dfn-monitor-for-cdm-state-changes"
                class="internalDFN" id="ref-for-dfn-monitor-for-cdm-state-changes-1">CDM 状態変化の監視</a> アルゴリズムを、<a
                data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                id="ref-for-dom-mediakeysession-13"><code>MediaKeySession</code></a> オブジェクトごとに、そのオブジェクトが <a
                data-link-type="dfn|abstract-op" href="#dfn-closed" class="internalDFN"
                id="ref-for-dfn-closed-2">closed</a> でない限り継続的に実行しなければなりません。<a data-link-type="dfn|abstract-op"
                href="#dfn-monitor-for-cdm-state-changes" class="internalDFN"
                id="ref-for-dfn-monitor-for-cdm-state-changes-2">CDM 状態変化の監視</a> アルゴリズムは、メインイベントループと並列して実行されなければならない（<em
                class="rfc2119">MUST</em>）が、本仕様で並列実行と定義されている他の手続きと並行して実行してはなりません。
        </p>
        <p>
            <a data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                id="ref-for-dom-mediakeysession-14"><code>MediaKeySession</code></a> オブジェクトは、もしそのオブジェクトが <a
                data-link-type="dfn|abstract-op" href="#dfn-closed" class="internalDFN"
                id="ref-for-dfn-closed-3">closed</a> でなく、かつそれを生成した <a data-link-type="idl" data-lt="MediaKeys"
                href="#dom-mediakeys" class="internalDFN" id="ref-for-dom-mediakeys-19"><code>MediaKeys</code></a>
            オブジェクトが引き続きアクセス可能である場合、破棄されてはならず（<em class="rfc2119">SHALL</em>）、イベントを受け取り続けなければなりません。そうでない場合、もはやアクセス可能でない
            <a data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                id="ref-for-dom-mediakeysession-15"><code>MediaKeySession</code></a> オブジェクトは更なるイベントを受け取ってはならず（<em
                class="rfc2119">SHALL NOT</em>）、破棄されてもよい（<em class="rfc2119">MAY</em>）。
        </p>
        <div class="note" role="note" id="issue-container-generatedID-63">
            <div role="heading" class="note-title marker" id="h-note-63" aria-level="3"><span>注</span></div>
            <p class="">
                上記の規則は、すべての <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                    id="ref-for-dom-mediakeys-20"><code>MediaKeys</code></a> オブジェクトおよび当該 <a data-link-type="idl"
                    data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                    id="ref-for-dom-mediakeysession-16"><code>MediaKeySession</code></a> オブジェクトが破棄されるまで、対応する <a
                    data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-40">CDM</a>
                インスタンスが破棄されてはならないことを意味します。
            </p>
        </div>
        <p>
            <a data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                id="ref-for-dom-mediakeysession-17"><code>MediaKeySession</code></a> オブジェクトがページからアクセス不能になったときにそれが <a
                data-link-type="dfn|abstract-op" href="#dfn-closed" class="internalDFN"
                id="ref-for-dfn-closed-4">closed</a> でない場合、<a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                class="internalDFN" id="ref-for-dfn-cdm-42">CDM</a> は当該オブジェクトに関連する <a data-link-type="dfn|abstract-op"
                href="#dfn-key-session" class="internalDFN" id="ref-for-dfn-key-session-3">キーセッション</a> を閉じなければなりません（<em
                class="rfc2119">SHALL</em>）。
        </p>
        <div class="note" role="note" id="issue-container-generatedID-64">
            <div role="heading" class="note-title marker" id="h-note-64" aria-level="3"><span>注</span></div>
            <p class="">
                キーセッションを閉じると、明示的に保存されていないライセンスや鍵が破棄されます。
            </p>
        </div>
        <div class="note" role="note" id="issue-container-generatedID-65">
            <div role="heading" class="note-title marker" id="h-note-65" aria-level="3"><span>注</span></div>
            <p class="">
                キーセッションが正確にいつ閉じられるかは実装依存であり、アプリケーションは特定のタイミングに依存してはなりません（<em class="rfc2119">SHOULD NOT</em>）。
                あるアクションを行う前にセッションが閉じられていることを確実にしたいアプリケーションは、<a data-link-type="idl" data-lt="close()"
                    href="#dom-mediakeysession-close" class="internalDFN"
                    id="ref-for-dom-mediakeysession-close-1"><code>close</code></a><code>()</code>
                を呼び出し、返されたプロミスが解決されるのを待つべきです（<em class="rfc2119">SHOULD</em>）。
            </p>
        </div>
        <p>
            プロミスを返すメソッドにおいて、すべてのエラーは返された Promise を拒否することで非同期に報告されます。これには [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-webidl" title="Web IDL Standard">WEBIDL</a></cite>]
            の型マッピングエラーも含まれます。
        </p>
        <p>
            アルゴリズムの以下の手順は、プロミスが拒否されると常に中止されます。
        </p>
        <pre class="idl def" id="webidl-103604943"><span class="idlHeader"><a class="self-link" href="#webidl-103604943">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-mediakeysessionclosedreason" data-title="MediaKeySessionClosedReason">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-mediakeysessionclosedreason" id="ref-for-dom-mediakeysessionclosedreason-4"><code>MediaKeySessionClosedReason</code></a> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeysessionclosedreason-internal-error" id="ref-for-dom-mediakeysessionclosedreason-internal-error-1"><code>internal-error</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeysessionclosedreason-closed-by-application" id="ref-for-dom-mediakeysessionclosedreason-closed-by-application-1"><code>closed-by-application</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeysessionclosedreason-release-acknowledged" id="ref-for-dom-mediakeysessionclosedreason-release-acknowledged-1"><code>release-acknowledged</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeysessionclosedreason-hardware-context-reset" id="ref-for-dom-mediakeysessionclosedreason-hardware-context-reset-1"><code>hardware-context-reset</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeysessionclosedreason-resource-evicted" id="ref-for-dom-mediakeysessionclosedreason-resource-evicted-1"><code>resource-evicted</code></a>"</span>
};</span></code></pre>
        <p>
            <dfn data-export="" data-dfn-type="enum" id="dom-mediakeysessionclosedreason" data-idl="enum"
                data-title="MediaKeySessionClosedReason" data-dfn-for="" tabindex="0"
                aria-haspopup="dialog"><code>MediaKeySessionClosedReason</code></dfn> 列挙型は次のように定義されます:
        </p>
        <table class="simple" data-dfn-for="MediaKeySessionClosedReason">
            <tbody>
                <tr>
                    <th colspan="2">
                        列挙型の説明
                    </th>
                </tr>
                <tr>
                    <td>
                        <dfn data-export="" data-dfn-type="enum-value"
                            id="dom-mediakeysessionclosedreason-internal-error" data-idl="enum-value"
                            data-title="internal-error" data-dfn-for="MediaKeySessionClosedReason" tabindex="0"
                            aria-haspopup="dialog"><code>internal-error</code></dfn>
                    </td>
                    <td>
                        CDM に回復不能なエラーが発生したためセッションが閉じられました。この場合、アプリケーションは当該 <a data-link-type="idl" data-lt="MediaKeys"
                            href="#dom-mediakeys" class="internalDFN"
                            id="ref-for-dom-mediakeys-21"><code>MediaKeys</code></a> インスタンス上で新しいセッションを作成してはなりません（<em
                            class="rfc2119">MUST NOT</em>）。
                    </td>
                </tr>
                <tr>
                    <td>
                        <dfn data-export="" data-dfn-type="enum-value"
                            id="dom-mediakeysessionclosedreason-closed-by-application" data-idl="enum-value"
                            data-title="closed-by-application" data-dfn-for="MediaKeySessionClosedReason" tabindex="0"
                            aria-haspopup="dialog"><code>closed-by-application</code></dfn>
                    </td>
                    <td>
                        アプリケーションがセッションの <a data-link-type="idl" data-lt="close()" href="#dom-mediakeysession-close"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysession-close-2"><code>close</code></a><code>()</code>
                        メソッドを明示的に呼び出してセッションを閉じたためです。
                    </td>
                </tr>
                <tr>
                    <td>
                        <dfn data-export="" data-dfn-type="enum-value"
                            id="dom-mediakeysessionclosedreason-release-acknowledged" data-idl="enum-value"
                            data-title="release-acknowledged" data-dfn-for="MediaKeySessionClosedReason" tabindex="0"
                            aria-haspopup="dialog"><code>release-acknowledged</code></dfn>
                    </td>
                    <td>
                        CDM が <a data-link-type="dfn|abstract-op" href="#dfn-record-s-of-license-destruction"
                            class="internalDFN" id="ref-for-dfn-record-s-of-license-destruction-4">record of license
                            destruction</a> の確認応答を受け取ったためセッションが閉じられました。
                    </td>
                </tr>
                <tr>
                    <td>
                        <dfn data-export="" data-dfn-type="enum-value"
                            id="dom-mediakeysessionclosedreason-hardware-context-reset" data-idl="enum-value"
                            data-title="hardware-context-reset" data-dfn-for="MediaKeySessionClosedReason" tabindex="0"
                            aria-haspopup="dialog"><code>hardware-context-reset</code></dfn>
                    </td>
                    <td>
                        CDM の元のハードウェアコンテキストがリセットされたためセッションが閉じられました。この場合、ユーザーエージェントはアプリケーションが当該 <a data-link-type="idl"
                            data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                            id="ref-for-dom-mediakeys-22"><code>MediaKeys</code></a>
                        インスタンス上で新しいセッションを作成できるようにしなければなりません（<em class="rfc2119">MUST</em>）。
                        <div class="note" role="note" id="issue-container-generatedID-66">
                            <div role="heading" class="note-title marker" id="h-note-66" aria-level="3">
                                <span>注</span>
                            </div>
                            <div class="">
                                <p>
                                    これはデバイスのハイバネーション、モニター設定の変更など多くの理由で発生する可能性があり、その正確な理由は実装依存です。
                                </p>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <dfn data-export="" data-dfn-type="enum-value"
                            id="dom-mediakeysessionclosedreason-resource-evicted" data-idl="enum-value"
                            data-title="resource-evicted" data-dfn-for="MediaKeySessionClosedReason" tabindex="0"
                            aria-haspopup="dialog"><code>resource-evicted</code></dfn>
                    </td>
                    <td>
                        システムが他のセッションを作成するためにリソースを回収する必要があり、セッションが閉じられました。
                        <div class="note" role="note" id="issue-container-generatedID-67">
                            <div role="heading" class="note-title marker" id="h-note-67" aria-level="3">
                                <span>注</span>
                            </div>
                            <div class="">
                                <p>
                                    これはセッションリソースに関するデバイス固有の制限に達したことを意味します。もし閉じられたセッションがまだ必要であれば、アプリ開発者は必要なセッション数を減らすか不要なセッションを事前に閉じる等の対策を検討すべきです。
                                </p>
                            </div>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <pre class="idl def" id="webidl-782043315"><span class="idlHeader"><a class="self-link" href="#webidl-782043315">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-mediakeysession" data-title="MediaKeySession">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>] interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-mediakeysession" id="ref-for-dom-mediakeysession-18"><code>MediaKeySession</code></a> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a></span> {<span data-idl="" class="idlAttribute" id="idl-def-mediakeysession-sessionid" data-title="sessionId" data-dfn-for="MediaKeySession">
  readonly        attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span>                            <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediakeysession-sessionid" id="ref-for-dom-mediakeysession-sessionid-2"><code>sessionId</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediakeysession-expiration" data-title="expiration" data-dfn-for="MediaKeySession">
  readonly        attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double">unrestricted double</a></span>                  <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediakeysession-expiration" id="ref-for-dom-mediakeysession-expiration-2"><code>expiration</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediakeysession-closed" data-title="closed" data-dfn-for="MediaKeySession">
  readonly        attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-mediakeysessionclosedreason" class="internalDFN" id="ref-for-dom-mediakeysessionclosedreason-5"><code>MediaKeySessionClosedReason</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediakeysession-closed" id="ref-for-dom-mediakeysession-closed-3"><code>closed</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediakeysession-keystatuses" data-title="keyStatuses" data-dfn-for="MediaKeySession">
  readonly        attribute<span class="idlType"> <a data-link-type="idl" href="#dom-mediakeystatusmap" class="internalDFN" id="ref-for-dom-mediakeystatusmap-2"><code>MediaKeyStatusMap</code></a></span>                    <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediakeysession-keystatuses" id="ref-for-dom-mediakeysession-keystatuses-2"><code>keyStatuses</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediakeysession-onkeystatuseschange" data-title="onkeystatuseschange" data-dfn-for="MediaKeySession">
                  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span>                         <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediakeysession-onkeystatuseschange" id="ref-for-dom-mediakeysession-onkeystatuseschange-1"><code>onkeystatuseschange</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediakeysession-onmessage" data-title="onmessage" data-dfn-for="MediaKeySession">
                  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span>                         <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediakeysession-onmessage" id="ref-for-dom-mediakeysession-onmessage-1"><code>onmessage</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-mediakeysession-generaterequest-initdatatype-initdata" data-title="generateRequest" data-dfn-for="MediaKeySession"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span>    <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeysession-generaterequest" id="ref-for-dom-mediakeysession-generaterequest-3"><code>generateRequest</code></a> (<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">initDataType</span>,<span class="idlType"> <a data-link-type="typedef" href="https://webidl.spec.whatwg.org/#BufferSource">BufferSource</a></span> <span class="idlParamName">initData</span>);</span><span data-idl="" class="idlMethod" id="idl-def-mediakeysession-load-sessionid" data-title="load" data-dfn-for="MediaKeySession"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeysession-load" id="ref-for-dom-mediakeysession-load-2"><code>load</code></a> (<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">sessionId</span>);</span><span data-idl="" class="idlMethod" id="idl-def-mediakeysession-update-response" data-title="update" data-dfn-for="MediaKeySession"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span>    <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeysession-update" id="ref-for-dom-mediakeysession-update-5"><code>update</code></a> (<span class="idlType"><a data-link-type="typedef" href="https://webidl.spec.whatwg.org/#BufferSource">BufferSource</a></span> <span class="idlParamName">response</span>);</span><span data-idl="" class="idlMethod" id="idl-def-mediakeysession-close" data-title="close" data-dfn-for="MediaKeySession"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span>    <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeysession-close" id="ref-for-dom-mediakeysession-close-3"><code>close</code></a> ();</span><span data-idl="" class="idlMethod" id="idl-def-mediakeysession-remove" data-title="remove" data-dfn-for="MediaKeySession"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span>    <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeysession-remove" id="ref-for-dom-mediakeysession-remove-2"><code>remove</code></a> ();</span>
};</span></code></pre>
        <section id="attributes-0">
            <div class="header-wrapper">
                <h3 id="x6-1-attributes"><bdi class="secno">6.1 </bdi>
                    属性
                </h3><a class="self-link" href="#attributes-0" aria-label="Permalink for Section 6.1"></a>
            </div>

            <dl class="attributes" data-dfn-for="MediaKeySession">
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-mediakeysession-sessionid"
                        data-idl="attribute" data-title="sessionId" data-dfn-for="MediaKeySession" data-type="DOMString"
                        data-lt="sessionId" data-local-lt="MediaKeySession.sessionId" tabindex="0"
                        aria-haspopup="dialog"><code>sessionId</code></dfn> 型 <a data-link-type="interface"
                        data-lt="DOMString"
                        href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>、readonly
                </dt>
                <dd>
                    <p>
                        このオブジェクトおよび関連する鍵やライセンスの <a data-link-type="dfn|abstract-op" href="#dfn-session-id"
                            class="internalDFN" id="ref-for-dfn-session-id-3">Session ID</a>。
                    </p>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-mediakeysession-expiration"
                        data-idl="attribute" data-title="expiration" data-dfn-for="MediaKeySession"
                        data-type="unrestricted double" data-lt="expiration" data-local-lt="MediaKeySession.expiration"
                        tabindex="0" aria-haspopup="dialog"><code>expiration</code></dfn> 型 <a
                        data-link-type="interface" data-lt="unrestricted double"
                        href="https://webidl.spec.whatwg.org/#idl-unrestricted-double"><code>unrestricted double</code></a>,
                    readonly
                </dt>
                <dd>
                    <p>
                        セッション内のすべての鍵の <a data-link-type="dfn|abstract-op" href="#dfn-expiration" class="internalDFN"
                            id="ref-for-dfn-expiration-2">expiration time</a>、またはそのような時刻が存在しない場合やライセンスが明示的に期限切れにならないと
                        CDM が判断した場合は <code>NaN</code>。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-68">
                        <div role="heading" class="note-title marker" id="h-note-68" aria-level="4"><span>注</span>
                        </div>
                        <p class="">
                            この値は、ウィンドウの開始を引き起こすようなアクションが発生したときのように、セッションの有効期間中に変更されることがある（<em class="rfc2119">MAY</em>）。
                        </p>
                    </div>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-mediakeysession-closed" data-idl="attribute"
                        data-title="closed" data-dfn-for="MediaKeySession" data-type="Promise" data-lt="closed"
                        data-local-lt="MediaKeySession.closed" tabindex="0"
                        aria-haspopup="dialog"><code>closed</code></dfn> 型 <span class="idlAttrType">Promise&lt;<a
                            data-link-type="idl" data-lt="MediaKeySessionClosedReason"
                            href="#dom-mediakeysessionclosedreason" class="internalDFN"
                            id="ref-for-dom-mediakeysessionclosedreason-6"><code>MediaKeySessionClosedReason</code></a>&gt;</span>,
                    readonly
                </dt>
                <dd>
                    <p>
                        <a data-link-type="dfn|abstract-op" href="#dfn-session-closed" class="internalDFN"
                            id="ref-for-dfn-session-closed-2">Session Closed</a> アルゴリズムの実行によりオブジェクトが <a
                            data-link-type="dfn|abstract-op" href="#dfn-closed" class="internalDFN"
                            id="ref-for-dfn-closed-5">closed</a> になったときに通知します。このプロミスは満たされることのみ可能で、拒否されることはありません。
                    </p>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-mediakeysession-keystatuses"
                        data-idl="attribute" data-title="keyStatuses" data-dfn-for="MediaKeySession"
                        data-type="MediaKeyStatusMap" data-lt="keyStatuses" data-local-lt="MediaKeySession.keyStatuses"
                        tabindex="0" aria-haspopup="dialog"><code>keyStatuses</code></dfn> 型 <a data-link-type="idl"
                        data-lt="MediaKeyStatusMap" href="#dom-mediakeystatusmap" class="internalDFN"
                        id="ref-for-dom-mediakeystatusmap-3"><code>MediaKeyStatusMap</code></a>,
                    readonly
                </dt>
                <dd>
                    <p>
                        セッションに <a data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id" class="internalDFN"
                            id="ref-for-dfn-decryption-key-id-5">key
                            IDs</a> と、そのキーに対応する現在の状態を示す読み取り専用マップへの参照。各エントリは一意の key ID を持たなければならない（<em
                            class="rfc2119">MUST</em>）。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-69">
                        <div role="heading" class="note-title marker" id="h-note-69" aria-level="4"><span>注</span>
                        </div>
                        <p class="">
                            マップのエントリおよびその値はイベントループが回るたびに更新され得る。マップは決して不整合や部分的更新の状態になってはならない（<em class="rfc2119">MUST
                                NOT</em>）が、アクセス間にイベントループが回ると変化する可能性はある。Key ID は <a data-link-type="idl" data-lt="load()"
                                href="#dom-mediakeysession-load" class="internalDFN"
                                id="ref-for-dom-mediakeysession-load-3"><code>load</code></a><code>()</code> や <a
                                data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysession-update-6"><code>update</code></a><code>()</code>
                            の結果として追加されることがある。既存の鍵に関する知識を削除する（または既存の鍵セットを新しいセットに置き換える）ような <a data-link-type="idl"
                                data-lt="update()" href="#dom-mediakeysession-update" class="internalDFN"
                                id="ref-for-dom-mediakeysession-update-7"><code>update</code></a><code>()</code>
                            の呼び出しにより Key ID は削除され得る。Key ID が有効期限切れなどで使用不能になったために削除されてはならない（<em class="rfc2119">MUST
                                NOT</em>）。その代わりに、例えば "<a data-link-type="idl" href="#dom-mediakeystatus-expired"
                                class="internalDFN" id="ref-for-dom-mediakeystatus-expired-1"><code>expired</code></a>"
                            のような適切な状態が付与されなければならない（<em class="rfc2119">MUST</em>）。
                        </p>
                    </div>
                    <div class="note" role="note" id="issue-container-generatedID-70">
                        <div role="heading" class="note-title marker" id="h-note-70" aria-level="4"><span>注</span>
                        </div>
                        <p class="">
                            古いプラットフォームの中には key IDs を公開しない <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                                class="internalDFN" id="ref-for-dfn-key-system-22">Key System</a>
                            実装があり、準拠するユーザーエージェント実装を提供することが不可能な場合がある。相互運用性を最大化するため、そうした CDM
                            を公開するユーザーエージェント実装はこのメンバーを次のように実装することを <em class="rfc2119">SHOULD</em> 推奨する:
                            非空のリストが適切である場合、例えばこのオブジェクトが表す <a data-link-type="dfn|abstract-op" href="#dfn-key-session"
                                class="internalDFN" id="ref-for-dfn-key-session-4">key session</a> に鍵が含まれる可能性がある場合、マップを
                            1 バイトの key ID <code>0</code> と、このオブジェクトの集約された状態に最も適切な <a data-link-type="idl"
                                data-lt="MediaKeyStatus" href="#dom-mediakeystatus" class="internalDFN"
                                id="ref-for-dom-mediakeystatus-6"><code>MediaKeyStatus</code></a> を持つ単一のペアで埋める。
                        </p>
                    </div>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-mediakeysession-onkeystatuseschange"
                        data-idl="attribute" data-title="onkeystatuseschange" data-dfn-for="MediaKeySession"
                        data-type="EventHandler" data-lt="onkeystatuseschange"
                        data-local-lt="MediaKeySession.onkeystatuseschange" tabindex="0"
                        aria-haspopup="dialog"><code>onkeystatuseschange</code></dfn> 型 <a data-link-type="typedef"
                        data-lt="EventHandler"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><code>EventHandler</code></a>
                </dt>
                <dd>
                    <p>
                        <a data-link-type="idl" data-lt="keystatuseschange" href="#dfn-keystatuseschange"
                            class="internalDFN"
                            id="ref-for-dfn-keystatuseschange-1"><code><code>keystatuseschange</code></code></a>
                        イベントのイベントハンドラ。
                    </p>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-mediakeysession-onmessage"
                        data-idl="attribute" data-title="onmessage" data-dfn-for="MediaKeySession"
                        data-type="EventHandler" data-lt="onmessage" data-local-lt="MediaKeySession.onmessage"
                        tabindex="0" aria-haspopup="dialog"><code>onmessage</code></dfn> 型 <a data-link-type="typedef"
                        data-lt="EventHandler"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><code>EventHandler</code></a>
                </dt>
                <dd>
                    <p>
                        <a data-link-type="idl" data-lt="message" href="#dfn-message" class="internalDFN"
                            id="ref-for-dfn-message-2"><code><code>message</code></code></a> イベントのイベントハンドラ。
                    </p>
                </dd>
            </dl>
        </section>
        <section id="methods-2">
            <div class="header-wrapper">
                <h3 id="x6-2-methods"><bdi class="secno">6.2 </bdi>
                    Methods
                </h3><a class="self-link" href="#methods-2" aria-label="Permalink for Section 6.2"></a>
            </div>

            <dl class="methods" data-dfn-for="MediaKeySession">
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediakeysession-generaterequest"
                        data-idl="operation" data-title="generateRequest()" data-dfn-for="MediaKeySession"
                        data-type="Promise" data-lt="generateRequest()|generateRequest(initDataType, initData)"
                        data-local-lt="MediaKeySession.generateRequest|MediaKeySession.generateRequest()|generateRequest"
                        tabindex="0" aria-haspopup="dialog"><code>generateRequest()</code></dfn>
                </dt>
                <dd>
                    <p>
                        <var>initData</var> に基づくライセンス要求を生成します。アルゴリズムが成功してプロミスが解決された場合、タイプが
                        "<a data-link-type="idl" href="#dom-mediakeymessagetype-license-request" class="internalDFN"
                            id="ref-for-dom-mediakeymessagetype-license-request-1"><code>license-request</code></a>" または
                        "<a data-link-type="idl" href="#dom-mediakeymessagetype-individualization-request"
                            class="internalDFN"
                            id="ref-for-dom-mediakeymessagetype-individualization-request-1"><code>individualization-request</code></a>"
                        の <a data-link-type="idl" data-lt="message" href="#dfn-message" class="internalDFN"
                            id="ref-for-dfn-message-3"><code><code>message</code></code></a> が常にキューされます。
                    </p>
                    <p>
                        このメソッドが呼び出されたとき、ユーザーエージェントは次の手順を <em class="rfc2119">必ず</em> 実行しなければなりません:
                    </p>
                    <ol class="method-algorithm">
                        <li>
                            <p>
                                もしこのオブジェクトの <var>closing or closed</var> 値が true であれば、<a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-2"><code><code>InvalidStateError</code></code></a>
                                で拒否されたプロミスを返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                もしこのオブジェクトの <var>uninitialized</var> 値が false であれば、<a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-3"><code><code>InvalidStateError</code></code></a>
                                で拒否されたプロミスを返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                このオブジェクトの <var>uninitialized</var> 値を false にします。
                            </p>
                        </li>

                        <li>
                            <p>
                                もし <var>initDataType</var> が空文字列であれば、新しく作成した <a data-link-type="idl" data-lt="TypeError"
                                    href="#dfn-typeerror" class="internalDFN"
                                    id="ref-for-dfn-typeerror-6"><code><code>TypeError</code></code></a>
                                で拒否されたプロミスを返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                もし <var>initData</var> が空の配列であれば、新しく作成した <a data-link-type="idl" data-lt="TypeError"
                                    href="#dfn-typeerror" class="internalDFN"
                                    id="ref-for-dfn-typeerror-7"><code><code>TypeError</code></code></a>
                                で拒否されたプロミスを返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                もしこのオブジェクトの <var>cdm implementation</var> 値で表される <a data-link-type="dfn|abstract-op"
                                    href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-23">Key
                                    System</a> 実装が <var>initDataType</var> を <a data-link-type="dfn|abstract-op"
                                    href="#dfn-initialization-data-type" class="internalDFN"
                                    id="ref-for-dfn-initialization-data-type-5">Initialization Data Type</a>
                                としてサポートしていない場合、<a data-link-type="idl" data-lt="NotSupportedError"
                                    href="#dfn-notsupportederror" class="internalDFN"
                                    id="ref-for-dfn-notsupportederror-5"><code><code>NotSupportedError</code></code></a>
                                で拒否されたプロミスを返します。文字列比較は大文字小文字を区別します。
                            </p>
                        </li>
                        <li>
                            <p>
                                <var>init data</var> を <var>initData</var> パラメータの内容のコピーとします。
                            </p>
                        </li>
                        <li>
                            <p>
                                <var>session type</var> をこのオブジェクトの <var>session type</var> とします。
                            </p>
                        </li>
                        <li>
                            <p>
                                <var>promise</var> を新しいプロミスとします。
                            </p>
                        </li>
                        <li>
                            <p>
                                次の手順を並行して実行します:
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        もし <var>init data</var> が <var>initDataType</var> に対して有効でない場合、<var>promise</var>
                                        を新しく作成した <a data-link-type="idl" data-lt="TypeError" href="#dfn-typeerror"
                                            class="internalDFN"
                                            id="ref-for-dfn-typeerror-8"><code><code>TypeError</code></code></a> で拒否します。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>sanitized init data</var> を <var>init data</var> の検証およびサニタイズされたバージョンとします。
                                    </p>
                                    <p>
                                        ユーザーエージェントは <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data"
                                            class="internalDFN" id="ref-for-dfn-initialization-data-7">Initialization
                                            Data</a> を CDM に渡す前に徹底的に検証しなければなりません（<em
                                            class="rfc2119">MUST</em>）。これにはフィールドの長さや値が妥当であることの確認、値が合理的な範囲内であることの検証、無関係・未サポート・未知のデータやフィールドの削除が含まれます。ユーザーエージェントは
                                        <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data"
                                            class="internalDFN" id="ref-for-dfn-initialization-data-8">Initialization
                                            Data</a> を事前解析・サニタイズし、完全にサニタイズされたバージョンを生成することが <em
                                            class="rfc2119">RECOMMENDED</em> です。もし <var>initDataType</var>
                                        で指定されるフォーマットが複数エントリをサポートする場合、ユーザーエージェントは CDM に不要なエントリを削除することを <em
                                            class="rfc2119">SHOULD</em> します。ユーザーエージェントは <a
                                            data-link-type="dfn|abstract-op" href="#dfn-initialization-data"
                                            class="internalDFN" id="ref-for-dfn-initialization-data-10">Initialization
                                            Data</a> 内のエントリの並び替えを行ってはなりません（<em class="rfc2119">MUST NOT</em>）。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        もし直前の手順が失敗した場合、<var>promise</var> を新しく作成した <a data-link-type="idl"
                                            data-lt="TypeError" href="#dfn-typeerror" class="internalDFN"
                                            id="ref-for-dfn-typeerror-9"><code><code>TypeError</code></code></a> で拒否します。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        もし <var>sanitized init data</var> が空であれば、<a data-link-type="idl"
                                            data-lt="NotSupportedError" href="#dfn-notsupportederror"
                                            class="internalDFN"
                                            id="ref-for-dfn-notsupportederror-6"><code><code>NotSupportedError</code></code></a>
                                        で <var>promise</var> を拒否します。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>session id</var> を空文字列とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>message</var> を null とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>message type</var> を null とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>cdm</var> をこのオブジェクトの <var>cdm instance</var> 値で表される <a
                                            data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                            id="ref-for-dfn-cdm-50">CDM</a> インスタンスとします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>cdm</var> を使用して次の手順を実行します:
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                もし <var>sanitized init data</var> が <var>cdm</var>
                                                によってサポートされていなければ、<var>promise</var> を <a data-link-type="idl"
                                                    data-lt="NotSupportedError" href="#dfn-notsupportederror"
                                                    class="internalDFN"
                                                    id="ref-for-dfn-notsupportederror-7"><code><code>NotSupportedError</code></code></a>
                                                で拒否します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                次のリストから <var>session type</var> の値に対応する手順に従います:
                                            </p>
                                            <dl class="switch">
                                                <dt>
                                                    "<a data-link-type="idl" href="#dom-mediakeysessiontype-temporary"
                                                        class="internalDFN"
                                                        id="ref-for-dom-mediakeysessiontype-temporary-8"><code>temporary</code></a>"
                                                </dt>
                                                <dd>
                                                    <p>
                                                        <var>requested license type</var> を一時的で永続化不可のライセンスとします。
                                                    </p>
                                                    <div class="note" role="note" id="issue-container-generatedID-71">
                                                        <div role="heading" class="note-title marker" id="h-note-71"
                                                            aria-level="4"><span>Note</span></div>
                                                        <p class="">
                                                            返されるライセンスは永続化できず、それに関連する情報を永続化することを要求してはなりません。
                                                        </p>
                                                    </div>
                                                </dd>
                                                <dt>
                                                    "<a data-link-type="idl"
                                                        href="#dom-mediakeysessiontype-persistent-license"
                                                        class="internalDFN"
                                                        id="ref-for-dom-mediakeysessiontype-persistent-license-3"><code>persistent-license</code></a>"
                                                </dt>
                                                <dd>
                                                    <p>
                                                        <var>requested license type</var> を永続化可能なライセンスとします。
                                                    </p>
                                                </dd>
                                            </dl>
                                        </li>
                                        <li>
                                            <p>
                                                <var>session id</var> を一意な <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-session-id" class="internalDFN"
                                                    id="ref-for-dfn-session-id-4">Session ID</a> 文字列とします。
                                            </p>
                                            <p>
                                                もし <var>session type</var> に対して <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-is-persistent-session-type" class="internalDFN"
                                                    id="ref-for-dfn-is-persistent-session-type-5">Is persistent session
                                                    type?</a> アルゴリズムを実行した結果が true であれば、この ID はこのオブジェクトの <a
                                                    data-link-type="dfn"
                                                    href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                                                内で、ドキュメントやブラウジングセッションを跨いで一意でなければなりません（<em class="rfc2119">MUST</em>）。
                                            </p>
                                        </li>
                                        <li>
                                            <dl class="switch">
                                                <dt>
                                                    もし <var>sanitized init data</var> に基づいて <var>requested license
                                                        type</var> のライセンス要求を生成できる場合:
                                                </dt>
                                                <dd>
                                                    <ol>
                                                        <li>
                                                            <p>
                                                                <var>message</var> を、<var>sanitized init data</var> を
                                                                <var>initDataType</var> に従って解釈して生成された <var>requested
                                                                    license type</var> のライセンス要求とします。
                                                            </p>
                                                            <p>
                                                                <var>cdm</var> は <var>sanitized init data</var>
                                                                で提供されていないストリーム固有のデータ（<a data-link-type="dfn"
                                                                    href="https://html.spec.whatwg.org/multipage/media.html#media-data">media
                                                                    data</a> を含む）を使用してはなりません（<em class="rfc2119">MUST
                                                                    NOT</em>）。
                                                            </p>
                                                            <p>
                                                                <var>cdm</var> はこの時点でセッションデータ（セッション ID を含む）を保存してはならないことが
                                                                <em class="rfc2119">SHOULD NOT</em> とされます。詳細は <a
                                                                    href="#session-storage">Session Storage and
                                                                    Persistence</a> を参照してください。
                                                            </p>
                                                        </li>
                                                        <li>
                                                            <p>
                                                                <var>message type</var> を "<a data-link-type="idl"
                                                                    href="#dom-mediakeymessagetype-license-request"
                                                                    class="internalDFN"
                                                                    id="ref-for-dom-mediakeymessagetype-license-request-2"><code>license-request</code></a>"
                                                                とします。
                                                            </p>
                                                        </li>
                                                    </ol>
                                                </dd>
                                                <dt>
                                                    それ以外
                                                </dt>
                                                <dd>
                                                    <ol>
                                                        <li>
                                                            <p>
                                                                <var>message</var> を、<var>sanitized init data</var>
                                                                に基づいて <var>requested license type</var>
                                                                のライセンス要求を生成する前に処理する必要のある要求とします。
                                                            </p>
                                                            <p>
                                                                後続の <a data-link-type="idl" data-lt="update()"
                                                                    href="#dom-mediakeysession-update"
                                                                    class="internalDFN"
                                                                    id="ref-for-dom-mediakeysession-update-8"><code>update</code></a><code>()</code>
                                                                呼び出しにおいて、<a data-link-type="dfn|abstract-op"
                                                                    href="#dfn-cdm" class="internalDFN"
                                                                    id="ref-for-dfn-cdm-51">CDM</a> は
                                                                <var>initDataType</var> に従って解釈された <var>sanitized init
                                                                    data</var> に基づいて <var>requested license type</var>
                                                                のライセンス要求を生成しなければなりません（<em class="rfc2119">MUST</em>）。
                                                            </p>
                                                        </li>
                                                        <li>
                                                            <p>
                                                                <var>message type</var> を <var>message</var>
                                                                の型に合わせて設定します。これは "<a data-link-type="idl"
                                                                    href="#dom-mediakeymessagetype-license-request"
                                                                    class="internalDFN"
                                                                    id="ref-for-dom-mediakeymessagetype-license-request-3"><code>license-request</code></a>"
                                                                または "<a data-link-type="idl"
                                                                    href="#dom-mediakeymessagetype-individualization-request"
                                                                    class="internalDFN"
                                                                    id="ref-for-dom-mediakeymessagetype-individualization-request-2"><code>individualization-request</code></a>"
                                                                のいずれかです。
                                                            </p>
                                                        </li>
                                                    </ol>
                                                </dd>
                                            </dl>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue
                                            a task</a> を使って次の手順を実行します:
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                もし前段のいずれかの手順がリソース不足のために失敗したなら、<var>promise</var> を <a
                                                    data-link-type="idl" data-lt="QuotaExceededError"
                                                    href="#dfn-quotaexceedederror" class="internalDFN"
                                                    id="ref-for-dfn-quotaexceedederror-2"><code><code>QuotaExceededError</code></code></a>
                                                で拒否します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                もし前段のいずれかの手順がその他の理由で失敗したなら、適切な <a href="#error-names">error name</a>
                                                を名前に持つ新しい <a data-link-type="interface" data-lt="DOMException"
                                                    href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                                                で <var>promise</var> を拒否します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <a data-link-type="idl" href="#dom-mediakeysession-sessionid"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeysession-sessionid-3"><code>sessionId</code></a>
                                                属性を <var>session id</var> に設定します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                このオブジェクトの <var>callable</var> 値を true に設定します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <var>promise</var> を <code>undefined</code> で解決します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <a data-link-type="dfn|abstract-op" href="#dfn-queue-a-message-event"
                                                    class="internalDFN" id="ref-for-dfn-queue-a-message-event-2">Queue a
                                                    "message" Event</a> アルゴリズムを <var>session</var> 上で実行し、<var>message
                                                    type</var> と <var>message</var> を提供します。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                <var>promise</var> を返します。
                            </p>
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediakeysession-load" data-idl="operation"
                        data-title="load()" data-dfn-for="MediaKeySession" data-type="Promise"
                        data-lt="load()|load(sessionId)"
                        data-local-lt="MediaKeySession.load|MediaKeySession.load()|load" tabindex="0"
                        aria-haspopup="dialog"><code>load()</code></dfn>
                </dt>
                <dd>
                    <p>
                        指定されたセッションに保存されているデータをこのオブジェクトにロードします。
                    </p>
                    <p>
                        このメソッドが呼び出されたとき、ユーザーエージェントは次の手順を <em class="rfc2119">必ず</em> 実行しなければなりません:
                    </p>
                    <ol class="method-algorithm">
                        <li>
                            <p>
                                もしこのオブジェクトの <var>closing or closed</var> 値が true であれば、<a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-4"><code><code>InvalidStateError</code></code></a>
                                で拒否されたプロミスを返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                もしこのオブジェクトの <var>uninitialized</var> 値が false であれば、<a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-5"><code><code>InvalidStateError</code></code></a>
                                で拒否されたプロミスを返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                このオブジェクトの <var>uninitialized</var> 値を false にします。
                            </p>
                        </li>

                        <li>
                            <p>
                                もし <var>sessionId</var> が空文字列であれば、新しく作成した <a data-link-type="idl" data-lt="TypeError"
                                    href="#dfn-typeerror" class="internalDFN"
                                    id="ref-for-dfn-typeerror-10"><code><code>TypeError</code></code></a>
                                で拒否されたプロミスを返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                もしこのオブジェクトの <var>session type</var> に対して <a data-link-type="dfn|abstract-op"
                                    href="#dfn-is-persistent-session-type" class="internalDFN"
                                    id="ref-for-dfn-is-persistent-session-type-6">Is persistent session type?</a>
                                アルゴリズムを実行した結果が false であれば、新しく作成した <a data-link-type="idl" data-lt="TypeError"
                                    href="#dfn-typeerror" class="internalDFN"
                                    id="ref-for-dfn-typeerror-11"><code><code>TypeError</code></code></a>
                                で拒否されたプロミスを返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                <var>origin</var> をこのオブジェクトの <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                                とします。
                            </p>
                        </li>
                        <li>
                            <p>
                                <var>promise</var> を新しいプロミスとします。
                            </p>
                        </li>
                        <li>
                            <p>
                                次の手順を並行して実行します:
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        <var>sanitized session ID</var> を <var>sessionId</var>
                                        の検証および／またはサニタイズされたバージョンとします。
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-72">
                                        <div role="heading" class="note-title marker" id="h-note-72" aria-level="4">
                                            <span>Note</span>
                                        </div>
                                        <p class="">
                                            ユーザーエージェントは <var>sessionId</var> を CDM
                                            に渡す前に徹底的に検証するべきです。最低でも長さや値が妥当であること（例えば数十文字より長くない、英数字である、等）を確認すべきです。
                                        </p>
                                    </div>
                                </li>
                                <li>
                                    <p>
                                        もし直前の手順が失敗した、または <var>sanitized session ID</var> が空であれば、新しく作成した <a
                                            data-link-type="idl" data-lt="TypeError" href="#dfn-typeerror"
                                            class="internalDFN"
                                            id="ref-for-dfn-typeerror-12"><code><code>TypeError</code></code></a> で
                                        <var>promise</var> を拒否します。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        もしこのオブジェクトの <a data-link-type="idl" data-lt="MediaKeySession"
                                            href="#dom-mediakeysession" class="internalDFN"
                                            id="ref-for-dom-mediakeysession-19"><code>MediaKeySession</code></a>
                                        の中で、このオブジェクトの <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#concept-document">Document</a> に属し、かつ <a
                                            data-link-type="idl" href="#dom-mediakeysession-sessionid"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysession-sessionid-4"><code>sessionId</code></a> 属性が
                                        <var>sanitized session ID</var> である閉じられていないセッションが存在する場合、<var>promise</var> を <a
                                            data-link-type="idl" data-lt="QuotaExceededError"
                                            href="#dfn-quotaexceedederror" class="internalDFN"
                                            id="ref-for-dfn-quotaexceedederror-3"><code><code>QuotaExceededError</code></code></a>
                                        で拒否します。
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-73">
                                        <div role="heading" class="note-title marker" id="h-note-73" aria-level="4">
                                            <span>Note</span>
                                        </div>
                                        <p class="">
                                            言い換えれば、このブラウジングコンテキスト内ですでに閉じられていないセッション（タイプに関わらず）がこの <var>sanitized session
                                                ID</var> を持つ場合はセッションを作成してはなりません。
                                        </p>
                                    </div>
                                </li>
                                <li>
                                    <p>
                                        <var>expiration time</var> を <code>NaN</code> とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>message</var> を null とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>message type</var> を null とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>cdm</var> をこのオブジェクトの <var>cdm instance</var> 値で表される <a
                                            data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                            id="ref-for-dfn-cdm-53">CDM</a> インスタンスとします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>cdm</var> を使用して次の手順を実行します:
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                もし <var>origin</var> に <var>sanitized session ID</var>
                                                のデータが存在しない場合、<var>promise</var> を <code>false</code> で解決してこれらの手順を中止します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                もし保存されたセッションの <var>session type</var> が現在のこのオブジェクトの <var>session
                                                    type</var> と異なる場合、<var>promise</var> を新しく作成した <a
                                                    data-link-type="idl" data-lt="TypeError" href="#dfn-typeerror"
                                                    class="internalDFN"
                                                    id="ref-for-dfn-typeerror-13"><code><code>TypeError</code></code></a>
                                                で拒否します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <var>session data</var> を <var>origin</var> に保存されている <var>sanitized
                                                    session ID</var> 用のデータとします。このデータは他の origin のデータや origin
                                                に関連付けられていないデータを含んではなりません（<em class="rfc2119">MUST NOT</em>）。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                もしどの <a data-link-type="idl" data-lt="MediaKeySession"
                                                    href="#dom-mediakeysession" class="internalDFN"
                                                    id="ref-for-dom-mediakeysession-21"><code>MediaKeySession</code></a>
                                                オブジェクトも閉じられておらず、かつその <var>session data</var> を表すものが任意の <a
                                                    data-link-type="dfn"
                                                    href="https://dom.spec.whatwg.org/#concept-document">Document</a>
                                                に存在する場合、<var>promise</var> を <a data-link-type="idl"
                                                    data-lt="QuotaExceededError" href="#dfn-quotaexceedederror"
                                                    class="internalDFN"
                                                    id="ref-for-dfn-quotaexceedederror-4"><code><code>QuotaExceededError</code></code></a>
                                                で拒否します。
                                            </p>
                                            <div class="note" role="note" id="issue-container-generatedID-74">
                                                <div role="heading" class="note-title marker" id="h-note-74"
                                                    aria-level="4"><span>Note</span></div>
                                                <p class="">
                                                    言い換えれば、任意のブラウジングコンテキスト内ですでに非閉じられた永続セッションがこの <var>sanitized session
                                                        ID</var> について存在する場合はセッションを作成してはなりません。
                                                </p>
                                            </div>
                                        </li>
                                        <li>
                                            <p>
                                                <var>session data</var> をロードします。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                もし <var>session data</var> がセッションの <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-expiration" class="internalDFN"
                                                    id="ref-for-dfn-expiration-3">expiration time</a>
                                                を示しているなら、<var>expiration time</var> をその期限時刻にします。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                もしメッセージを送信する必要があるなら、次の手順を実行します:
                                            </p>
                                            <ol>
                                                <li>
                                                    <p>
                                                        <var>message</var> を <var>session data</var>
                                                        に基づいて生成されたメッセージとします。
                                                    </p>
                                                </li>
                                                <li>
                                                    <p>
                                                        <var>message type</var> をそのメッセージに適切な <a data-link-type="idl"
                                                            data-lt="MediaKeyMessageType"
                                                            href="#dom-mediakeymessagetype" class="internalDFN"
                                                            id="ref-for-dom-mediakeymessagetype-1"><code>MediaKeyMessageType</code></a>
                                                        とします。
                                                    </p>
                                                </li>
                                            </ol>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue
                                            a task</a> を使って次の手順を実行します:
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                もし前段のいずれかの手順が失敗したなら、適切な <a href="#error-names">error name</a> で
                                                <var>promise</var> を拒否します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <a data-link-type="idl" href="#dom-mediakeysession-sessionid"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeysession-sessionid-5"><code>sessionId</code></a>
                                                属性を <var>sanitized session ID</var> に設定します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                このオブジェクトの <var>callable</var> 値を true に設定します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                もしロードされたセッションがいかなる鍵に関する情報（<a data-link-type="dfn|abstract-op"
                                                    href="#dfn-known" class="internalDFN" id="ref-for-dfn-known-2">known
                                                    keys</a>）を含むなら、各鍵の <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-decryption-key-id" class="internalDFN"
                                                    id="ref-for-dfn-decryption-key-id-6">key ID</a> と適切な <a
                                                    data-link-type="idl" data-lt="MediaKeyStatus"
                                                    href="#dom-mediakeystatus" class="internalDFN"
                                                    id="ref-for-dom-mediakeystatus-7"><code>MediaKeyStatus</code></a>
                                                を渡して、<a data-link-type="dfn|abstract-op" href="#dfn-update-key-statuses"
                                                    class="internalDFN" id="ref-for-dfn-update-key-statuses-1">Update
                                                    Key Statuses</a> アルゴリズムを <var>session</var> 上で実行します。
                                            </p>
                                            <p>
                                                もし鍵の状態を確定するために追加処理が必要であれば、"<a data-link-type="idl"
                                                    href="#dom-mediakeystatus-status-pending" class="internalDFN"
                                                    id="ref-for-dom-mediakeystatus-status-pending-1"><code>status-pending</code></a>"
                                                を使用します。1 つ以上の鍵に対する追加処理が完了したら、実際の状態で再度 <a
                                                    data-link-type="dfn|abstract-op" href="#dfn-update-key-statuses"
                                                    class="internalDFN" id="ref-for-dfn-update-key-statuses-2">Update
                                                    Key Statuses</a> アルゴリズムを実行します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <a data-link-type="dfn|abstract-op" href="#dfn-update-expiration"
                                                    class="internalDFN" id="ref-for-dfn-update-expiration-1">Update
                                                    Expiration</a> アルゴリズムを <var>session</var> 上で実行し、<var>expiration
                                                    time</var> を提供します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <var>promise</var> を <code>true</code> で解決します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                もし <var>message</var> が null でなければ、<a data-link-type="dfn|abstract-op"
                                                    href="#dfn-queue-a-message-event" class="internalDFN"
                                                    id="ref-for-dfn-queue-a-message-event-3">Queue a "message" Event</a>
                                                アルゴリズムを <var>session</var> 上で実行し、<var>message type</var> と
                                                <var>message</var> を提供します。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                <var>promise</var> を返します。
                            </p>
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediakeysession-update" data-idl="operation"
                        data-title="update()" data-dfn-for="MediaKeySession" data-type="Promise"
                        data-lt="update()|update(response)"
                        data-local-lt="MediaKeySession.update|MediaKeySession.update()|update" tabindex="0"
                        aria-haspopup="dialog"><code>update()</code></dfn>
                </dt>
                <dd>
                    <p>
                        ライセンスを含むメッセージを <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                            id="ref-for-dfn-cdm-54">CDM</a> に提供します。
                    </p>
                    <p>
                        <var>response</var> パラメータは CDM に提供されるメッセージを含みます。内容は <a data-link-type="dfn|abstract-op"
                            href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-24">Key System</a>
                        固有です。実行可能なコードを含んではなりません（<em class="rfc2119">MUST NOT</em>）。
                    </p>
                    <p>
                        このメソッドが呼び出されたとき、ユーザーエージェントは次の手順を <em class="rfc2119">必ず</em> 実行しなければなりません:
                    </p>
                    <ol class="method-algorithm">
                        <li>
                            <p>
                                もしこのオブジェクトの <var>closing or closed</var> 値が true であれば、<a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-6"><code><code>InvalidStateError</code></code></a>
                                で拒否されたプロミスを返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                もしこのオブジェクトの <var>callable</var> 値が false であれば、<a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-7"><code><code>InvalidStateError</code></code></a>
                                で拒否されたプロミスを返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                もし <var>response</var> が空の配列であれば、新しく作成した <a data-link-type="idl" data-lt="TypeError"
                                    href="#dfn-typeerror" class="internalDFN"
                                    id="ref-for-dfn-typeerror-14"><code><code>TypeError</code></code></a>
                                で拒否されたプロミスを返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                <var>response copy</var> を <var>response</var> パラメータの内容のコピーとします。
                            </p>
                        </li>
                        <li>
                            <p>
                                <var>promise</var> を新しいプロミスとします。
                            </p>
                        </li>
                        <li>
                            <p>
                                次の手順を並行して実行します:
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        <var>sanitized response</var> を <var>response copy</var>
                                        の検証および／またはサニタイズされたバージョンとします。
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-75">
                                        <div role="heading" class="note-title marker" id="h-note-75" aria-level="4">
                                            <span>Note</span>
                                        </div>
                                        <p class="">
                                            ユーザーエージェントは CDM に渡す前に <var>response</var>
                                            を徹底的に検証するべきです。これには値が合理的な範囲内にあることの検証、無関係なデータやフィールドの削除、事前解析、サニタイズ、完全にサニタイズされたバージョンの生成などが含まれ得ます。フィールドの長さや値が妥当であることを確認し、未知のフィールドは拒否または削除するべきです。
                                        </p>
                                    </div>
                                </li>
                                <li>
                                    <p>
                                        もし直前の手順が失敗した、または <var>sanitized response</var> が空であれば、<var>promise</var>
                                        を新しく作成した <a data-link-type="idl" data-lt="TypeError" href="#dfn-typeerror"
                                            class="internalDFN"
                                            id="ref-for-dfn-typeerror-15"><code><code>TypeError</code></code></a>
                                        で拒否します。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>message</var> を null とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>message type</var> を null とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>session closed</var> を false とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>cdm</var> をこのオブジェクトの <var>cdm instance</var> 値で表される <a
                                            data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                            id="ref-for-dfn-cdm-57">CDM</a> インスタンスとします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>cdm</var> を使用して次の手順を実行します:
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                もし <var>sanitized response</var> の形式が何らかの方法で無効であれば、<var>promise</var>
                                                を新しく作成した <a data-link-type="idl" data-lt="TypeError"
                                                    href="#dfn-typeerror" class="internalDFN"
                                                    id="ref-for-dfn-typeerror-16"><code><code>TypeError</code></code></a>
                                                で拒否します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <var>sanitized response</var> を処理し、以下のリストの最初に一致する条件に従って処理を行います:
                                            </p>
                                            <dl class="switch">
                                                <dt>
                                                    もし <var>sanitized response</var> がライセンスまたは鍵を含む場合
                                                </dt>
                                                <dd>
                                                    <div class="note" role="note" id="issue-container-generatedID-76">
                                                        <div role="heading" class="note-title marker" id="h-note-76"
                                                            aria-level="4"><span>Note</span></div>
                                                        <p class="">
                                                            これには初期ライセンス、更新ライセンス、ライセンス更新メッセージが含まれます。
                                                        </p>
                                                    </div>
                                                    <p>
                                                        <var>sanitized response</var> を処理し、以下のリストの最初に一致する条件に従います:
                                                    </p>
                                                    <dl class="switch">
                                                        <dt>
                                                            もし <var>sessionType</var> が "<a data-link-type="idl"
                                                                href="#dom-mediakeysessiontype-temporary"
                                                                class="internalDFN"
                                                                id="ref-for-dom-mediakeysessiontype-temporary-9"><code>temporary</code></a>"
                                                            であり、かつ <var>sanitized response</var>
                                                            が含むセッションデータ（ライセンス、鍵、類似のセッションデータを含む）が保存されるべきであると指定していない場合
                                                        </dt>
                                                        <dd>
                                                            <p>
                                                                <var>sanitized response</var> を処理し、セッションデータを保存しません。
                                                            </p>
                                                        </dd>
                                                        <dt>
                                                            もし <var>sessionType</var> が "<a data-link-type="idl"
                                                                href="#dom-mediakeysessiontype-persistent-license"
                                                                class="internalDFN"
                                                                id="ref-for-dom-mediakeysessiontype-persistent-license-4"><code>persistent-license</code></a>"
                                                            であり、かつ <var>sanitized response</var> が永続化可能なライセンスを含む場合
                                                        </dt>
                                                        <dd>
                                                            <p>
                                                                <var>sanitized response</var> を処理し、<var>sanitized
                                                                    response</var>
                                                                に含まれるライセンス／鍵および関連するセッションデータを保存します。そのようなデータはこのオブジェクトの <a
                                                                    data-link-type="dfn"
                                                                    href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                                                                のみがアクセスできるように保存されなければなりません（<em
                                                                    class="rfc2119">MUST</em>）。
                                                            </p>
                                                        </dd>
                                                        <dt>
                                                            それ以外
                                                        </dt>
                                                        <dd>
                                                            <p>
                                                                <var>promise</var> を新しく作成した <a data-link-type="idl"
                                                                    data-lt="TypeError" href="#dfn-typeerror"
                                                                    class="internalDFN"
                                                                    id="ref-for-dfn-typeerror-17"><code><code>TypeError</code></code></a>
                                                                で拒否します。
                                                            </p>
                                                        </dd>
                                                    </dl>
                                                    <p>
                                                        詳細は <a href="#session-storage">Session Storage and
                                                            Persistence</a> も参照してください。
                                                    </p>
                                                    <p>
                                                        各セッションの状態情報（鍵を含む）は、あるセッションを閉じても他のセッションの観測可能な状態に影響を与えないように保存されなければなりません（<em
                                                            class="rfc2119">MUST</em>）。たとえそれらが重複する key ID を含んでいてもです。
                                                    </p>
                                                    <div class="note" role="note" id="issue-container-generatedID-77">
                                                        <div role="heading" class="note-title marker" id="h-note-77"
                                                            aria-level="4"><span>Note</span></div>
                                                        <p class="">
                                                            <var>sanitized response</var> が鍵や関連データを含む場合、<var>cdm</var>
                                                            は通常それらを鍵 ID でインデックスされた（メモリ内の）データとして格納するでしょう。
                                                        </p>
                                                    </div>
                                                    <div class="note" role="note" id="issue-container-generatedID-78">
                                                        <div role="heading" class="note-title marker" id="h-note-78"
                                                            aria-level="4"><span>Note</span></div>
                                                        <p class="">
                                                            セッション内での置換アルゴリズムは <a data-link-type="dfn|abstract-op"
                                                                href="#dfn-key-system" class="internalDFN"
                                                                id="ref-for-dfn-key-system-25">Key System</a> に依存します。
                                                        </p>
                                                    </div>
                                                    <div class="note" role="note" id="issue-container-generatedID-79">
                                                        <div role="heading" class="note-title marker" id="h-note-79"
                                                            aria-level="4"><span>Note</span></div>
                                                        <p class="">
                                                            <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                                                class="internalDFN" id="ref-for-dfn-cdm-58">CDM</a>
                                                            実装は、各 <a data-link-type="idl" data-lt="MediaKeySession"
                                                                href="#dom-mediakeysession" class="internalDFN"
                                                                id="ref-for-dom-mediakeysession-22"><code>MediaKeySession</code></a>
                                                            オブジェクトあたりの標準的かつ十分に大きな最小鍵数、標準的な置換アルゴリズム、および標準的かつ十分に大きな最小セッション数をサポートすることが
                                                            <em class="rfc2119">RECOMMENDED</em>
                                                            です。これによりユーザーエージェント間で鍵ローテーションアルゴリズムの実装が容易になり、同一要素で複数ストリームが存在するケース（適応ストリームや異なる音声／映像トラックなど）で再生中断の可能性を減らせます。
                                                        </p>
                                                    </div>
                                                </dd>
                                                <dt>
                                                    もし <var>sanitized response</var> が <a
                                                        data-link-type="dfn|abstract-op"
                                                        href="#dfn-record-s-of-license-destruction" class="internalDFN"
                                                        id="ref-for-dfn-record-s-of-license-destruction-5">record of
                                                        license destruction</a> の確認応答を含み、かつ <var>sessionType</var> が "<a
                                                        data-link-type="idl"
                                                        href="#dom-mediakeysessiontype-persistent-license"
                                                        class="internalDFN"
                                                        id="ref-for-dom-mediakeysessiontype-persistent-license-5"><code>persistent-license</code></a>"
                                                    である場合
                                                </dt>
                                                <dd>
                                                    <p>
                                                        次の手順を実行します:
                                                    </p>
                                                    <ol>
                                                        <li>
                                                            <p>
                                                                <a data-link-type="dfn|abstract-op"
                                                                    href="#dfn-key-session" class="internalDFN"
                                                                    id="ref-for-dfn-key-session-5">key session</a>
                                                                を閉じ、当該オブジェクトに関連する <em>すべて</em> の保存されたセッションデータ（<a
                                                                    data-link-type="idl"
                                                                    href="#dom-mediakeysession-sessionid"
                                                                    class="internalDFN"
                                                                    id="ref-for-dom-mediakeysession-sessionid-6"><code>sessionId</code></a>
                                                                や <a data-link-type="dfn|abstract-op"
                                                                    href="#dfn-record-s-of-license-destruction"
                                                                    class="internalDFN"
                                                                    id="ref-for-dfn-record-s-of-license-destruction-6">record
                                                                    of license destruction</a> を含む）を消去します。
                                                            </p>
                                                            <div class="note" role="note"
                                                                id="issue-container-generatedID-80">
                                                                <div role="heading" class="note-title marker"
                                                                    id="h-note-80" aria-level="4"><span>Note</span>
                                                                </div>
                                                                <p class="">
                                                                    その後にこのオブジェクトの <a data-link-type="idl"
                                                                        data-lt="load()"
                                                                        href="#dom-mediakeysession-load"
                                                                        class="internalDFN"
                                                                        id="ref-for-dom-mediakeysession-load-4"><code>load</code></a><code>()</code>
                                                                    を当該オブジェクトの <a data-link-type="idl"
                                                                        href="#dom-mediakeysession-sessionid"
                                                                        class="internalDFN"
                                                                        id="ref-for-dom-mediakeysession-sessionid-7"><code>sessionId</code></a>
                                                                    の値で呼んでも失敗することになります（そのセッション ID に対するデータが存在しないため）。
                                                                </p>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <p>
                                                                <var>session closed</var> を true に設定します。
                                                            </p>
                                                        </li>
                                                    </ol>
                                                </dd>
                                                <dt>
                                                    それ以外
                                                </dt>
                                                <dd>
                                                    <p>
                                                        <var>sanitized response</var> を処理し、セッションデータを保存しません。
                                                    </p>
                                                    <div class="note" role="note" id="issue-container-generatedID-81">
                                                        <div role="heading" class="note-title marker" id="h-note-81"
                                                            aria-level="4"><span>Note</span></div>
                                                        <p class="">
                                                            例えば <var>sanitized response</var> が別の <a
                                                                data-link-type="idl" data-lt="message"
                                                                href="#dfn-message" class="internalDFN"
                                                                id="ref-for-dfn-message-4"><code><code>message</code></code></a>
                                                            イベントを生成するために用いられる情報を含む場合があります。この場合、<var>sessionType</var>
                                                            に対して内容を検証する必要はありません。
                                                        </p>
                                                    </div>
                                                </dd>
                                            </dl>
                                        </li>
                                        <li>
                                            <p>
                                                もしメッセージを送信する必要があるなら、次の手順を実行します:
                                            </p>
                                            <ol>
                                                <li>
                                                    <p>
                                                        <var>message</var> をそのメッセージとします。
                                                    </p>
                                                </li>
                                                <li>
                                                    <p>
                                                        <var>message type</var> をそのメッセージに適切な <a data-link-type="idl"
                                                            data-lt="MediaKeyMessageType"
                                                            href="#dom-mediakeymessagetype" class="internalDFN"
                                                            id="ref-for-dom-mediakeymessagetype-2"><code>MediaKeyMessageType</code></a>
                                                        とします。
                                                    </p>
                                                </li>
                                            </ol>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue
                                            a task</a> を使って次の手順を実行します:
                                    </p>
                                    <ol>
                                        <li>
                                            <dl class="switch">
                                                <dt>
                                                    もし <var>session closed</var> が true なら:
                                                </dt>
                                                <dd>
                                                    <p>
                                                        このオブジェクト上で <a data-link-type="dfn|abstract-op"
                                                            href="#dfn-session-closed" class="internalDFN"
                                                            id="ref-for-dfn-session-closed-3">Session Closed</a>
                                                        アルゴリズムを理由 "<a data-link-type="idl"
                                                            href="#dom-mediakeysessionclosedreason-release-acknowledged"
                                                            class="internalDFN"
                                                            id="ref-for-dom-mediakeysessionclosedreason-release-acknowledged-2"><code>release-acknowledged</code></a>"
                                                        で実行します。
                                                    </p>
                                                </dd>
                                                <dt>
                                                    それ以外
                                                </dt>
                                                <dd>
                                                    <p>
                                                        次の手順を実行します:
                                                    </p>
                                                    <ol>
                                                        <li>
                                                            <p>
                                                                もしこのオブジェクトに対して <a data-link-type="dfn|abstract-op"
                                                                    href="#dfn-cdm" class="internalDFN"
                                                                    id="ref-for-dfn-cdm-59">CDM</a>
                                                                によって知られている鍵の集合が変更された、または任意の鍵の状態が変化した場合、各既知鍵の <a
                                                                    data-link-type="dfn|abstract-op"
                                                                    href="#dfn-decryption-key-id" class="internalDFN"
                                                                    id="ref-for-dfn-decryption-key-id-7">key ID</a> と適切な
                                                                <a data-link-type="idl" data-lt="MediaKeyStatus"
                                                                    href="#dom-mediakeystatus" class="internalDFN"
                                                                    id="ref-for-dom-mediakeystatus-8"><code>MediaKeyStatus</code></a>
                                                                を渡して、<a data-link-type="dfn|abstract-op"
                                                                    href="#dfn-update-key-statuses" class="internalDFN"
                                                                    id="ref-for-dfn-update-key-statuses-3">Update Key
                                                                    Statuses</a> アルゴリズムを <var>session</var> 上で実行します。
                                                            </p>
                                                            <p>
                                                                鍵の状態を確定するために追加処理が必要な場合は "<a data-link-type="idl"
                                                                    href="#dom-mediakeystatus-status-pending"
                                                                    class="internalDFN"
                                                                    id="ref-for-dom-mediakeystatus-status-pending-2"><code>status-pending</code></a>"
                                                                を使用します。追加処理が完了したら、実際の状態で再度 <a
                                                                    data-link-type="dfn|abstract-op"
                                                                    href="#dfn-update-key-statuses" class="internalDFN"
                                                                    id="ref-for-dfn-update-key-statuses-4">Update Key
                                                                    Statuses</a> を実行します。
                                                            </p>
                                                        </li>
                                                        <li>
                                                            <p>
                                                                もしセッションの <a data-link-type="dfn|abstract-op"
                                                                    href="#dfn-expiration" class="internalDFN"
                                                                    id="ref-for-dfn-expiration-4">expiration time</a>
                                                                が変化していれば、<a data-link-type="dfn|abstract-op"
                                                                    href="#dfn-update-expiration" class="internalDFN"
                                                                    id="ref-for-dfn-update-expiration-2">Update
                                                                    Expiration</a> アルゴリズムを <var>session</var> 上で実行し、新しい
                                                                expiration time を提供します。
                                                            </p>
                                                        </li>
                                                        <li>
                                                            <p>
                                                                もし前段のいずれかの手順が失敗したなら、適切な <a href="#error-names">error
                                                                    name</a> を名前に持つ新しい <a data-link-type="interface"
                                                                    data-lt="DOMException"
                                                                    href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                                                                で <var>promise</var> を拒否します。
                                                            </p>
                                                        </li>
                                                        <li>
                                                            <p>
                                                                もし <var>message</var> が null でなければ、<a
                                                                    data-link-type="dfn|abstract-op"
                                                                    href="#dfn-queue-a-message-event"
                                                                    class="internalDFN"
                                                                    id="ref-for-dfn-queue-a-message-event-4">Queue a
                                                                    "message" Event</a> アルゴリズムを <var>session</var>
                                                                上で実行し、<var>message type</var> と <var>message</var>
                                                                を提供します。
                                                            </p>
                                                        </li>
                                                    </ol>
                                                </dd>
                                            </dl>
                                        </li>
                                        <li>
                                            <p>
                                                <var>promise</var> を <code>undefined</code> で解決します。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                <var>promise</var> を返します。
                            </p>
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediakeysession-close" data-idl="operation"
                        data-title="close()" data-dfn-for="MediaKeySession" data-type="Promise" data-lt="close()"
                        data-local-lt="MediaKeySession.close|MediaKeySession.close()|close" tabindex="0"
                        aria-haspopup="dialog"><code>close()</code></dfn>
                </dt>
                <dd>
                    <p>
                        アプリケーションがもはやセッションを必要としないことを示します。<a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                            class="internalDFN" id="ref-for-dfn-cdm-60">CDM</a>
                        はセッションに関連するリソースを解放し、セッションを閉じるべきです。保存されたデータは解放や消去されるべきではありません。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-82">
                        <div role="heading" class="note-title marker" id="h-note-82" aria-level="4"><span>Note</span>
                        </div>
                        <p class="">
                            返されるプロミスはリクエストの処理が完了したときに解決され、セッションが閉じられたときには <a data-link-type="idl"
                                href="#dom-mediakeysession-closed" class="internalDFN"
                                id="ref-for-dom-mediakeysession-closed-4"><code>closed</code></a> 属性プロミスが "<a
                                data-link-type="idl" href="#dom-mediakeysessionclosedreason-closed-by-application"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysessionclosedreason-closed-by-application-2"><code>closed-by-application</code></a>"
                            で解決されます。
                        </p>
                    </div>
                    <p>
                        このメソッドが呼び出されたとき、ユーザーエージェントは次の手順を <em class="rfc2119">必ず</em> 実行しなければなりません:
                    </p>
                    <ol class="method-algorithm">
                        <li>
                            <p>
                                もしこのオブジェクトの <var>closing or closed</var> 値が true であれば、<code>undefined</code>
                                で解決されたプロミスを返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                もしこのオブジェクトの <var>callable</var> 値が false であれば、<a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-8"><code><code>InvalidStateError</code></code></a>
                                で拒否されたプロミスを返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                <var>promise</var> を新しいプロミスとします。
                            </p>
                        </li>
                        <li>
                            <p>
                                このオブジェクトの <var>closing or closed</var> 値を true に設定します。
                            </p>
                        </li>
                        <li>
                            <p>
                                次の手順を並行して実行します:
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        <var>cdm</var> をこのオブジェクトの <var>cdm instance</var> 値で表される <a
                                            data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                            id="ref-for-dfn-cdm-61">CDM</a> インスタンスとします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>cdm</var> を使用してこのオブジェクトに関連する <a data-link-type="dfn|abstract-op"
                                            href="#dfn-key-session" class="internalDFN"
                                            id="ref-for-dfn-key-session-6">key session</a> を閉じます。
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-83">
                                        <div role="heading" class="note-title marker" id="h-note-83" aria-level="4">
                                            <span>Note</span>
                                        </div>
                                        <p class="">
                                            キーセッションを閉じると、明示的に保存されていないライセンスや鍵が破棄されます。
                                        </p>
                                    </div>
                                </li>
                                <li>
                                    <p>
                                        <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue
                                            a task</a> を使って次の手順を実行します:
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                <var>promise</var> を <code>undefined</code> で解決します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                このオブジェクト上で <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-session-closed" class="internalDFN"
                                                    id="ref-for-dfn-session-closed-4">Session Closed</a> アルゴリズムを理由 "<a
                                                    data-link-type="idl"
                                                    href="#dom-mediakeysessionclosedreason-closed-by-application"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeysessionclosedreason-closed-by-application-3"><code>closed-by-application</code></a>"
                                                で実行します。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                <var>promise</var> を返します。
                            </p>
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediakeysession-remove" data-idl="operation"
                        data-title="remove()" data-dfn-for="MediaKeySession" data-type="Promise" data-lt="remove()"
                        data-local-lt="MediaKeySession.remove|MediaKeySession.remove()|remove" tabindex="0"
                        aria-haspopup="dialog"><code>remove()</code></dfn>
                </dt>
                <dd>
                    <p>
                        セッションに関連するすべてのライセンスおよび鍵を削除します。<a href="#is-persistent-session-type">永続セッションタイプ</a>
                        の場合、リリースメッセージの確認応答が <a data-link-type="idl" data-lt="update()"
                            href="#dom-mediakeysession-update" class="internalDFN"
                            id="ref-for-dom-mediakeysession-update-9"><code>update</code></a><code>()</code>
                        によって処理されると、セッションタイプごとに定義される他のセッションデータも消去されます。
                    </p>
                    <p>
                        このメソッドが呼び出されたとき、ユーザーエージェントは次の手順を <em class="rfc2119">必ず</em> 実行しなければなりません:
                    </p>
                    <ol class="method-algorithm">
                        <li>
                            <p>
                                もしこのオブジェクトの <var>closing or closed</var> 値が true であれば、<a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-9"><code><code>InvalidStateError</code></code></a>
                                で拒否されたプロミスを返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                もしこのオブジェクトの <var>callable</var> 値が false であれば、<a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-10"><code><code>InvalidStateError</code></code></a>
                                で拒否されたプロミスを返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                <var>promise</var> を新しいプロミスとします。
                            </p>
                        </li>
                        <li>
                            <p>
                                次の手順を並行して実行します:
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        <var>cdm</var> をこのオブジェクトの <var>cdm instance</var> 値で表される <a
                                            data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                            id="ref-for-dfn-cdm-62">CDM</a> インスタンスとします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>message</var> を null とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>message type</var> を null とします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>cdm</var> を使用して次の手順を実行します:
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                もしセッションに関連するライセンスや鍵が存在する場合:
                                            </p>
                                            <ol>
                                                <li>
                                                    <p>
                                                        セッションに関連するライセンスや鍵を破棄します。
                                                    </p>
                                                    <div class="note" role="note" id="issue-container-generatedID-84">
                                                        <div role="heading" class="note-title marker" id="h-note-84"
                                                            aria-level="4"><span>Note</span></div>
                                                        <p class="">
                                                            これはそれらがメモリ内にあろうと永続ストアにあろうと、ライセンスおよび／または鍵が破壊されることを意味します。
                                                        </p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <p>
                                                        このオブジェクトの <var>session type</var> の値に対するリストの手順に従います:
                                                    </p>
                                                    <dl class="switch">
                                                        <dt>
                                                            "<a data-link-type="idl"
                                                                href="#dom-mediakeysessiontype-temporary"
                                                                class="internalDFN"
                                                                id="ref-for-dom-mediakeysessiontype-temporary-10"><code>temporary</code></a>"
                                                        </dt>
                                                        <dd>
                                                            <p>
                                                                次の手順を続行します。
                                                            </p>
                                                        </dd>
                                                        <dt>
                                                            "<a data-link-type="idl"
                                                                href="#dom-mediakeysessiontype-persistent-license"
                                                                class="internalDFN"
                                                                id="ref-for-dom-mediakeysessiontype-persistent-license-6"><code>persistent-license</code></a>"
                                                        </dt>
                                                        <dd>
                                                            <ol>
                                                                <li>
                                                                    <p>
                                                                        <var>record of license destruction</var>
                                                                        を当該オブジェクトが表すライセンスのための <a
                                                                            data-link-type="dfn|abstract-op"
                                                                            href="#dfn-record-s-of-license-destruction"
                                                                            class="internalDFN"
                                                                            id="ref-for-dfn-record-s-of-license-destruction-7">record
                                                                            of license destruction</a> とします。
                                                                    </p>
                                                                </li>
                                                                <li>
                                                                    <p>
                                                                        <var>record of license destruction</var> を保存します。
                                                                    </p>
                                                                </li>
                                                                <li>
                                                                    <p>
                                                                        <var>message</var> を <var>record of license
                                                                            destruction</var> を含むかそれを反映するメッセージとします。
                                                                    </p>
                                                                </li>
                                                            </ol>
                                                        </dd>
                                                    </dl>
                                                </li>
                                            </ol>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue
                                            a task</a> を使って次の手順を実行します:
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                <a data-link-type="dfn|abstract-op" href="#dfn-update-key-statuses"
                                                    class="internalDFN" id="ref-for-dfn-update-key-statuses-5">Update
                                                    Key Statuses</a> アルゴリズムを <var>session</var> 上で実行し、セッション内のすべての <a
                                                    data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id"
                                                    class="internalDFN" id="ref-for-dfn-decryption-key-id-8">key ID</a>
                                                に対して "<a data-link-type="idl" href="#dom-mediakeystatus-released"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeystatus-released-1"><code>released</code></a>"
                                                の <a data-link-type="idl" data-lt="MediaKeyStatus"
                                                    href="#dom-mediakeystatus" class="internalDFN"
                                                    id="ref-for-dom-mediakeystatus-9"><code>MediaKeyStatus</code></a>
                                                値を提供します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <a data-link-type="dfn|abstract-op" href="#dfn-update-expiration"
                                                    class="internalDFN" id="ref-for-dfn-update-expiration-3">Update
                                                    Expiration</a> アルゴリズムを <var>session</var> 上で実行し、<code>NaN</code>
                                                を提供します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                もし前段のいずれかの手順が失敗したなら、適切な <a href="#error-names">error name</a> を名前に持つ新しい
                                                <a data-link-type="interface" data-lt="DOMException"
                                                    href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                                                で <var>promise</var> を拒否します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <var>message type</var> を "<a data-link-type="idl"
                                                    href="#dom-mediakeymessagetype-license-release" class="internalDFN"
                                                    id="ref-for-dom-mediakeymessagetype-license-release-2"><code>license-release</code></a>"
                                                にします。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <var>promise</var> を <code>undefined</code> で解決します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                もし <var>message</var> が <code>null</code> でなければ、<a
                                                    data-link-type="dfn|abstract-op" href="#dfn-queue-a-message-event"
                                                    class="internalDFN" id="ref-for-dfn-queue-a-message-event-5">Queue a
                                                    "message" Event</a> アルゴリズムを <var>session</var> 上で実行し、<var>message
                                                    type</var> と <var>message</var> を提供します。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                <var>promise</var> を返します。
                            </p>
                        </li>
                    </ol>
                </dd>
            </dl>
        </section>
        <section id="mediakeystatusmap-interface">
            <div class="header-wrapper">
                <h3 id="x6-3-mediakeystatusmap-interface"><bdi class="secno">6.3 </bdi>
                    <dfn data-export="" data-dfn-type="interface" id="dom-mediakeystatusmap" data-idl="interface"
                        data-title="MediaKeyStatusMap" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>MediaKeyStatusMap</code></dfn> インターフェース
                </h3><a class="self-link" href="#mediakeystatusmap-interface"
                    aria-label="Permalink for Section 6.3"></a>
            </div>

            <p>
                <a data-link-type="idl" data-lt="MediaKeyStatusMap" href="#dom-mediakeystatusmap" class="internalDFN"
                    id="ref-for-dom-mediakeystatusmap-4"><code>MediaKeyStatusMap</code></a> オブジェクトは、
                <a data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id" class="internalDFN"
                    id="ref-for-dfn-decryption-key-id-9">key IDs</a> と、対応する鍵の現在の状態への読み取り専用マップです。
            </p>
            <p>
                鍵の状態は、その鍵が現在使用されているかどうかやメディアデータに依存しません。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-85">
                <div role="heading" class="note-title marker" id="h-note-85" aria-level="4"><span>注</span></div>
                <p class="">
                    例えば、鍵に対して現在満たせない出力要件がある場合、その鍵がメディアデータの復号に必要であったかどうかに関わらず、鍵の状態は状況に応じて "<a data-link-type="idl"
                        href="#dom-mediakeystatus-output-downscaled" class="internalDFN"
                        id="ref-for-dom-mediakeystatus-output-downscaled-1"><code>output-downscaled</code></a>" または
                    "<a data-link-type="idl" href="#dom-mediakeystatus-output-restricted" class="internalDFN"
                        id="ref-for-dom-mediakeystatus-output-restricted-2"><code>output-restricted</code></a>" とするべきです。
                </p>
            </div>
            <pre class="idl def" id="webidl-366396555"><span class="idlHeader"><a class="self-link" href="#webidl-366396555">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-mediakeystatusmap" data-title="MediaKeyStatusMap">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>] interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-mediakeystatusmap" id="ref-for-dom-mediakeystatusmap-5"><code>MediaKeyStatusMap</code></a> {<span data-idl="" class="idlIterable" id="idl-def-mediakeystatusmap-iterable" data-title="iterable" data-dfn-for="MediaKeyStatusMap">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-iterable">iterable</a>&lt;<a data-link-type="typedef" href="https://webidl.spec.whatwg.org/#BufferSource">BufferSource</a>,<a data-link-type="idl" href="#dom-mediakeystatus" class="internalDFN" id="ref-for-dom-mediakeystatus-10"><code>MediaKeyStatus</code></a>&gt;;</span><span data-idl="" class="idlAttribute" id="idl-def-mediakeystatusmap-size" data-title="size" data-dfn-for="MediaKeyStatusMap">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediakeystatusmap-size" id="ref-for-dom-mediakeystatusmap-size-2"><code>size</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-mediakeystatusmap-has-keyid" data-title="has" data-dfn-for="MediaKeyStatusMap"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeystatusmap-has" id="ref-for-dom-mediakeystatusmap-has-1"><code>has</code></a> (<span class="idlType"><a data-link-type="typedef" href="https://webidl.spec.whatwg.org/#BufferSource">BufferSource</a></span> <span class="idlParamName">keyId</span>);</span><span data-idl="" class="idlMethod" id="idl-def-mediakeystatusmap-get-keyid" data-title="get" data-dfn-for="MediaKeyStatusMap"><span class="idlType">
  (<a data-link-type="idl" href="#dom-mediakeystatus" class="internalDFN" id="ref-for-dom-mediakeystatus-11"><code>MediaKeyStatus</code></a> or <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>)</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeystatusmap-get" id="ref-for-dom-mediakeystatusmap-get-1"><code>get</code></a> (<span class="idlType"><a data-link-type="typedef" href="https://webidl.spec.whatwg.org/#BufferSource">BufferSource</a></span> <span class="idlParamName">keyId</span>);</span>
};</span></code></pre>
            <section id="attributes-1">
                <div class="header-wrapper">
                    <h4 id="x6-3-1-attributes"><bdi class="secno">6.3.1 </bdi>
                        属性
                    </h4><a class="self-link" href="#attributes-1" aria-label="Permalink for Section 6.3.1"></a>
                </div>

                <dl class="attributes" data-dfn-for="MediaKeyStatusMap">
                    <dt>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-mediakeystatusmap-size"
                            data-idl="attribute" data-title="size" data-dfn-for="MediaKeyStatusMap"
                            data-type="unsigned long" data-lt="size" data-local-lt="MediaKeyStatusMap.size" tabindex="0"
                            aria-haspopup="dialog"><code>size</code></dfn> 型 <a data-link-type="interface"
                            data-lt="unsigned long"
                            href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><code>unsigned long</code></a>,
                        readonly
                    </dt>
                    <dd>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-known" class="internalDFN"
                                id="ref-for-dfn-known-4">known keys</a> の数。
                        </p>
                    </dd>
                </dl>
            </section>
            <section id="methods-3">
                <div class="header-wrapper">
                    <h4 id="x6-3-2-methods"><bdi class="secno">6.3.2 </bdi>
                        メソッド
                    </h4><a class="self-link" href="#methods-3" aria-label="Permalink for Section 6.3.2"></a>
                </div>

                <dl class="methods" data-dfn-for="MediaKeyStatusMap">
                    <dt>
                        <dfn data-export="" data-dfn-type="method" id="dom-mediakeystatusmap-has" data-idl="operation"
                            data-title="has()" data-dfn-for="MediaKeyStatusMap" data-type="boolean"
                            data-lt="has()|has(keyId)" data-local-lt="MediaKeyStatusMap.has|MediaKeyStatusMap.has()|has"
                            tabindex="0" aria-haspopup="dialog"><code>has()</code></dfn>
                    </dt>
                    <dd>
                        <p>
                            <var>keyId</var> で識別される鍵の状態が既知であれば <code>true</code> を返します。
                        </p>
                    </dd>
                    <dt>
                        <dfn data-export="" data-dfn-type="method" id="dom-mediakeystatusmap-get" data-idl="operation"
                            data-title="get()" data-dfn-for="MediaKeyStatusMap" data-type="MediaKeyStatus|undefined"
                            data-lt="get()|get(keyId)" data-local-lt="MediaKeyStatusMap.get|MediaKeyStatusMap.get()|get"
                            tabindex="0" aria-haspopup="dialog"><code>get()</code></dfn>
                    </dt>
                    <dd>
                        <p>
                            <var>keyId</var> で識別される鍵の <a data-link-type="idl" data-lt="MediaKeyStatus"
                                href="#dom-mediakeystatus" class="internalDFN"
                                id="ref-for-dom-mediakeystatus-12"><code>MediaKeyStatus</code></a> を返すか、
                            その鍵の状態が既知でなければ <code>undefined</code> を返します。
                        </p>
                    </dd>
                </dl>
                <p>
                    このインターフェースは、<code>entries</code>、<code>keys</code>、<code>values</code>、
                    <code>forEach</code> および <code>@@iterator</code> メソッドを <a data-link-type="dfn"
                        href="https://webidl.spec.whatwg.org/#dfn-iterable">iterable</a> により提供します
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-webidl"
                            title="Web IDL Standard">WebIDL</a></cite>]。
                </p>
                <p>
                    反復対象となる値のペアは、すべての <a data-link-type="dfn|abstract-op" href="#dfn-known" class="internalDFN"
                        id="ref-for-dfn-known-5">known keys</a> に対して形成された (<a data-link-type="dfn|abstract-op"
                        href="#dfn-decryption-key-id" class="internalDFN" id="ref-for-dfn-decryption-key-id-10">key
                        ID</a>, 対応する <a data-link-type="idl" data-lt="MediaKeyStatus" href="#dom-mediakeystatus"
                        class="internalDFN" id="ref-for-dom-mediakeystatus-13"><code>MediaKeyStatus</code></a>)
                    のスナップショットであり、
                    <a data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id" class="internalDFN"
                        id="ref-for-dfn-decryption-key-id-11">key ID</a> によってソートされています。key ID の比較は次のように行われます: 長さが
                    <var>m</var> の key ID <var>A</var> と長さが <var>n</var> の <var>B</var>（<var>m</var> &lt;= <var>n</var>
                    に割り当てられている）について、<var>A</var> の方が小さい (<var>A</var> &lt; <var>B</var>) のは、<var>A</var> の <var>m</var>
                    オクテットが <var>B</var> の最初の <var>m</var> オクテットより辞書順で小さい場合、またはそれらが等しくかつ <var>m</var> &lt; <var>n</var>
                    の場合です。
                </p>
            </section>
            <pre class="idl def" id="webidl-418631828"><span class="idlHeader"><a class="self-link" href="#webidl-418631828">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-mediakeystatus" data-title="MediaKeyStatus">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-mediakeystatus" id="ref-for-dom-mediakeystatus-14"><code>MediaKeyStatus</code></a> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeystatus-usable" id="ref-for-dom-mediakeystatus-usable-3"><code>usable</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeystatus-expired" id="ref-for-dom-mediakeystatus-expired-2"><code>expired</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeystatus-released" id="ref-for-dom-mediakeystatus-released-2"><code>released</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeystatus-output-restricted" id="ref-for-dom-mediakeystatus-output-restricted-3"><code>output-restricted</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeystatus-output-downscaled" id="ref-for-dom-mediakeystatus-output-downscaled-2"><code>output-downscaled</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeystatus-usable-in-future" id="ref-for-dom-mediakeystatus-usable-in-future-2"><code>usable-in-future</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeystatus-status-pending" id="ref-for-dom-mediakeystatus-status-pending-3"><code>status-pending</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeystatus-internal-error" id="ref-for-dom-mediakeystatus-internal-error-1"><code>internal-error</code></a>"</span>
};</span></code></pre>
            <p>
                <dfn data-export="" data-dfn-type="enum" id="dom-mediakeystatus" data-idl="enum"
                    data-title="MediaKeyStatus" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>MediaKeyStatus</code></dfn> 列挙型は次のように定義されます:
            </p>
            <table class="simple" data-dfn-for="MediaKeyStatus">
                <tbody>
                    <tr>
                        <th colspan="2">
                            列挙型の説明
                        </th>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeystatus-usable"
                                data-idl="enum-value" data-title="usable" data-dfn-for="MediaKeyStatus" tabindex="0"
                                aria-haspopup="dialog"><code>usable</code></dfn>
                        </td>
                        <td>
                            <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-63">CDM</a> が、その鍵が現在 <a data-link-type="dfn|abstract-op"
                                href="#dfn-usable-for-decryption" class="internalDFN"
                                id="ref-for-dfn-usable-for-decryption-3">復号に使用可能である</a> と確信している状態です。<br>
                            復号に現在使用できない可能性のある鍵は、この状態を持ってはなりません（<em class="rfc2119">MUST NOT</em>）。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeystatus-expired"
                                data-idl="enum-value" data-title="expired" data-dfn-for="MediaKeyStatus" tabindex="0"
                                aria-haspopup="dialog"><code>expired</code></dfn>
                        </td>
                        <td>
                            鍵はその <a data-link-type="dfn|abstract-op" href="#dfn-usable-for-decryption"
                                class="internalDFN" id="ref-for-dfn-usable-for-decryption-5">復号使用可能性</a> を失っており、その理由は鍵の
                            <a data-link-type="dfn|abstract-op" href="#dfn-expiration" class="internalDFN"
                                id="ref-for-dfn-expiration-5">expiration time</a> が経過したためです。<br>
                            <a data-link-type="idl" href="#dom-mediakeysession-expiration" class="internalDFN"
                                id="ref-for-dom-mediakeysession-expiration-3"><code>expiration</code></a>
                            属性が表す時刻は現在時刻よりも前であることが <em class="rfc2119">MUST</em> です。セッション内のすべての他の鍵はこの状態でなければなりません（<em
                                class="rfc2119">MUST</em>）。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeystatus-released"
                                data-idl="enum-value" data-title="released" data-dfn-for="MediaKeyStatus" tabindex="0"
                                aria-haspopup="dialog"><code>released</code></dfn>
                        </td>
                        <td>
                            鍵自体はもはや <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-64">CDM</a> に利用可能ではありませんが、
                            <a data-link-type="dfn|abstract-op" href="#dfn-record-s-of-license-destruction"
                                class="internalDFN" id="ref-for-dfn-record-s-of-license-destruction-8">record of license
                                destruction</a> のような鍵に関する情報は利用可能です。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeystatus-output-restricted"
                                data-idl="enum-value" data-title="output-restricted" data-dfn-for="MediaKeyStatus"
                                tabindex="0" aria-haspopup="dialog"><code>output-restricted</code></dfn>
                        </td>
                        <td>
                            鍵に関連する出力制限があり、それらが現在満たせない状態です。必要に応じて、この鍵で復号されたメディアデータの表示はブロックされる可能性があります。アプリケーションは、その鍵に関連する出力制限を引き起こすストリームの使用を避けるべきです。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeystatus-output-downscaled"
                                data-idl="enum-value" data-title="output-downscaled" data-dfn-for="MediaKeyStatus"
                                tabindex="0" aria-haspopup="dialog"><code>output-downscaled</code></dfn>
                        </td>
                        <td>
                            鍵に関連する出力制限があり、それらが現在満たせない状態です。必要に応じて、この鍵で復号されたメディアデータは低品質（例えば解像度）で表示される可能性があります。アプリケーションは、その鍵に関連する出力制限を引き起こすストリームの使用を避けるべきです。<br>
                            ダウンスケーリングのサポートは <em class="rfc2119">OPTIONAL</em>
                            です。出力要件が満たせないときに中断なく再生を保証するためにダウンスケーリングに依存してはならない（<em class="rfc2119">SHOULD
                                NOT</em>）ことに注意してください。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeystatus-usable-in-future"
                                data-idl="enum-value" data-title="usable-in-future" data-dfn-for="MediaKeyStatus"
                                tabindex="0" aria-haspopup="dialog"><code>usable-in-future</code></dfn>
                        </td>
                        <td>
                            鍵はまだ <a data-link-type="dfn|abstract-op" href="#dfn-usable-for-decryption"
                                class="internalDFN"
                                id="ref-for-dfn-usable-for-decryption-6">復号に使用可能ではありません</a>。開始時刻が将来に設定されているためで、開始時刻に達すると鍵は使用可能になります。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeystatus-status-pending"
                                data-idl="enum-value" data-title="status-pending" data-dfn-for="MediaKeyStatus"
                                tabindex="0" aria-haspopup="dialog"><code>status-pending</code></dfn>
                        </td>
                        <td>
                            鍵の状態はまだ不明で、判定中です。状態が判定されたときに実際の状態で更新されます。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeystatus-internal-error"
                                data-idl="enum-value" data-title="internal-error" data-dfn-for="MediaKeyStatus"
                                tabindex="0" aria-haspopup="dialog"><code>internal-error</code></dfn>
                        </td>
                        <td>
                            鍵は、他の値とは無関係な <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-65">CDM</a> 内のエラーのため現在 <a data-link-type="dfn|abstract-op"
                                href="#dfn-usable-for-decryption" class="internalDFN"
                                id="ref-for-dfn-usable-for-decryption-7">復号に使用できない</a>
                            状態です。この値はアプリケーションによって対処可能なものではありません。
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section id="mediakeymessageevent">
            <div class="header-wrapper">
                <h3 id="x6-4-mediakeymessageevent"><bdi class="secno">6.4 </bdi>
                    <a data-link-type="idl" data-lt="MediaKeyMessageEvent" href="#dom-mediakeymessageevent"
                        class="internalDFN"
                        id="ref-for-dom-mediakeymessageevent-1"><code>MediaKeyMessageEvent</code></a>
                </h3><a class="self-link" href="#mediakeymessageevent" aria-label="Permalink for Section 6.4"></a>
            </div>

            <p>
                <code>MediaKeyMessageEvent</code> オブジェクトは <a data-link-type="idl" data-lt="message" href="#dfn-message"
                    class="internalDFN" id="ref-for-dfn-message-5"><code><code>message</code></code></a> イベントに使用されます。
            </p>
            <pre class="idl def" id="webidl-1754914033"><span class="idlHeader"><a class="self-link" href="#webidl-1754914033">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-mediakeymessagetype" data-title="MediaKeyMessageType">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-mediakeymessagetype" id="ref-for-dom-mediakeymessagetype-3"><code>MediaKeyMessageType</code></a> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeymessagetype-license-request" id="ref-for-dom-mediakeymessagetype-license-request-4"><code>license-request</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeymessagetype-license-renewal" id="ref-for-dom-mediakeymessagetype-license-renewal-1"><code>license-renewal</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeymessagetype-license-release" id="ref-for-dom-mediakeymessagetype-license-release-3"><code>license-release</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeymessagetype-individualization-request" id="ref-for-dom-mediakeymessagetype-individualization-request-3"><code>individualization-request</code></a>"</span>
};</span></code></pre>
            <p>
                <dfn data-export="" data-dfn-type="enum" id="dom-mediakeymessagetype" data-idl="enum"
                    data-title="MediaKeyMessageType" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>MediaKeyMessageType</code></dfn> は次のように定義されます:
            </p>
            <table class="simple" data-dfn-for="MediaKeyMessageType">
                <tbody>
                    <tr>
                        <th colspan="2">
                            列挙型の説明
                        </th>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeymessagetype-license-request"
                                data-idl="enum-value" data-title="license-request" data-dfn-for="MediaKeyMessageType"
                                tabindex="0" aria-haspopup="dialog"><code>license-request</code></dfn>
                        </td>
                        <td>
                            メッセージが新しいライセンスの要求を含む場合。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeymessagetype-license-renewal"
                                data-idl="enum-value" data-title="license-renewal" data-dfn-for="MediaKeyMessageType"
                                tabindex="0" aria-haspopup="dialog"><code>license-renewal</code></dfn>
                        </td>
                        <td>
                            メッセージが既存ライセンスの更新要求を含む場合。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeymessagetype-license-release"
                                data-idl="enum-value" data-title="license-release" data-dfn-for="MediaKeyMessageType"
                                tabindex="0" aria-haspopup="dialog"><code>license-release</code></dfn>
                        </td>
                        <td>
                            メッセージが <a data-link-type="dfn|abstract-op" href="#dfn-record-s-of-license-destruction"
                                class="internalDFN" id="ref-for-dfn-record-s-of-license-destruction-9">record of license
                                destruction</a> を含む場合。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value"
                                id="dom-mediakeymessagetype-individualization-request" data-idl="enum-value"
                                data-title="individualization-request" data-dfn-for="MediaKeyMessageType" tabindex="0"
                                aria-haspopup="dialog"><code>individualization-request</code></dfn>
                        </td>
                        <td>
                            メッセージが <a data-link-type="dfn|abstract-op" href="#dfn-app-assisted-individualization"
                                class="internalDFN" id="ref-for-dfn-app-assisted-individualization-1">App-Assisted
                                Individualization</a>（または再個体化）の要求を含む場合です。<br>
                            他のすべてのメッセージと同様に、メッセージ内の識別子は <em class="rfc2119">MUST</em> origin と profile ごとに区別できるものであり、かつ
                            <em class="rfc2119">MUST NOT</em> Distinctive Permanent Identifiers であってはなりません。
                        </td>
                    </tr>
                </tbody>
            </table>
            <pre class="idl def" id="webidl-1595553803"><span class="idlHeader"><a class="self-link" href="#webidl-1595553803">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-mediakeymessageevent" data-title="MediaKeyMessageEvent">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
interface <dfn data-export="" data-dfn-type="interface" id="dom-mediakeymessageevent" data-idl="interface" data-title="MediaKeyMessageEvent" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>MediaKeyMessageEvent</code></dfn> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#event">Event</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-mediakeymessageevent-constructor-type-eventinitdict" data-title="constructor" data-dfn-for="MediaKeyMessageEvent">
  <dfn data-export="" data-dfn-type="constructor" id="dom-mediakeymessageevent-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="MediaKeyMessageEvent" data-lt="constructor()|constructor(type, eventInitDict)" data-local-lt="MediaKeyMessageEvent.constructor|MediaKeyMessageEvent.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>,<span class="idlType"> <a data-link-type="idl" href="#dom-mediakeymessageeventinit" class="internalDFN" id="ref-for-dom-mediakeymessageeventinit-1"><code>MediaKeyMessageEventInit</code></a></span> <span class="idlParamName">eventInitDict</span>);</span><span data-idl="" class="idlAttribute" id="idl-def-mediakeymessageevent-messagetype" data-title="messageType" data-dfn-for="MediaKeyMessageEvent">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-mediakeymessagetype" class="internalDFN" id="ref-for-dom-mediakeymessagetype-4"><code>MediaKeyMessageType</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediakeymessageevent-messagetype" id="ref-for-dom-mediakeymessageevent-messagetype-1"><code>messageType</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediakeymessageevent-message" data-title="message" data-dfn-for="MediaKeyMessageEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a></span>         <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediakeymessageevent-message" id="ref-for-dom-mediakeymessageevent-message-1"><code>message</code></a>;</span>
};</span></code></pre>
            <section id="attributes-2">
                <div class="header-wrapper">
                    <h4 id="x6-4-1-attributes"><bdi class="secno">6.4.1 </bdi>
                        属性
                    </h4><a class="self-link" href="#attributes-2" aria-label="Permalink for Section 6.4.1"></a>
                </div>

                <dl class="attributes" data-dfn-for="MediaKeyMessageEvent">
                    <dt>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-mediakeymessageevent-messagetype"
                            data-idl="attribute" data-title="messageType" data-dfn-for="MediaKeyMessageEvent"
                            data-type="MediaKeyMessageType" data-lt="messageType"
                            data-local-lt="MediaKeyMessageEvent.messageType" tabindex="0"
                            aria-haspopup="dialog"><code>messageType</code></dfn> 型 <a data-link-type="idl"
                            data-lt="MediaKeyMessageType" href="#dom-mediakeymessagetype" class="internalDFN"
                            id="ref-for-dom-mediakeymessagetype-5"><code>MediaKeyMessageType</code></a>, readonly
                    </dt>
                    <dd>
                        メッセージの種類。
                        <p>
                            実装はアプリケーションにメッセージタイプの処理を要求してはなりません（<em class="rfc2119">MUST
                                NOT</em>）。実装はメッセージを区別しないアプリケーションをサポートしなければならず（<em
                                class="rfc2119">MUST</em>）、メッセージタイプの処理を強制してはなりません（<em class="rfc2119">MUST NOT</em>）。
                            具体的には、<a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-26">Key Systems</a> はすべての種類のメッセージを単一の URL
                            に渡すことをサポートしなければなりません（<em class="rfc2119">MUST</em>）。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-86">
                            <div role="heading" class="note-title marker" id="h-note-86" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                この属性は、メッセージを解析せずにアプリケーションがメッセージを区別できるようにするためのものです。これはオプションのアプリケーションやサーバーの最適化を可能にすることを意図していますが、アプリケーションはこれを使用する必要はありません。
                            </p>
                        </div>
                    </dd>
                    <dt>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-mediakeymessageevent-message"
                            data-idl="attribute" data-title="message" data-dfn-for="MediaKeyMessageEvent"
                            data-type="ArrayBuffer" data-lt="message" data-local-lt="MediaKeyMessageEvent.message"
                            tabindex="0" aria-haspopup="dialog"><code>message</code></dfn> 型 <a
                            data-link-type="interface" data-lt="ArrayBuffer"
                            href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a>,
                        readonly
                    </dt>
                    <dd>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-66">CDM</a> からのメッセージ。メッセージは <a data-link-type="dfn|abstract-op"
                                href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-27">Key System</a>
                            固有です。
                        </p>
                    </dd>
                </dl>
            </section>
            <section id="mediakeymessageeventinit">
                <div class="header-wrapper">
                    <h4 id="x6-4-2-mediakeymessageeventinit"><bdi class="secno">6.4.2 </bdi>
                        <dfn data-export="" data-dfn-type="dictionary" id="dom-mediakeymessageeventinit"
                            data-idl="dictionary" data-title="MediaKeyMessageEventInit" data-dfn-for="" tabindex="0"
                            aria-haspopup="dialog"><code>MediaKeyMessageEventInit</code></dfn>
                    </h4><a class="self-link" href="#mediakeymessageeventinit"
                        aria-label="Permalink for Section 6.4.2"></a>
                </div>

                <pre class="idl def" id="webidl-726369050"><span class="idlHeader"><a class="self-link" href="#webidl-726369050">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-mediakeymessageeventinit" data-title="MediaKeyMessageEventInit">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-mediakeymessageeventinit" id="ref-for-dom-mediakeymessageeventinit-2"><code>MediaKeyMessageEventInit</code></a> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a></span> {<span data-idl="" class="idlMember" id="idl-def-mediakeymessageeventinit-messagetype" data-title="messageType" data-dfn-for="MediaKeyMessageEventInit">
  required<span class="idlType"> <a data-link-type="idl" href="#dom-mediakeymessagetype" class="internalDFN" id="ref-for-dom-mediakeymessagetype-6"><code>MediaKeyMessageType</code></a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeymessageeventinit-messagetype" id="ref-for-dom-mediakeymessageeventinit-messagetype-1"><code>messageType</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-mediakeymessageeventinit-message" data-title="message" data-dfn-for="MediaKeyMessageEventInit">
  required<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a></span>         <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeymessageeventinit-message" id="ref-for-dom-mediakeymessageeventinit-message-1"><code>message</code></a>;</span>
};</span></code></pre>
                <section id="dictionary-mediakeymessageeventinit-members">
                    <div class="header-wrapper">
                        <h5 id="x6-4-2-1-dictionary-mediakeymessageeventinit-members"><bdi class="secno">6.4.2.1 </bdi>
                            辞書 <a class="idlType internalDFN" href="#dom-mediakeymessageeventinit" data-link-type="idl"
                                id="ref-for-dom-mediakeymessageeventinit-3"><code>MediaKeyMessageEventInit</code></a>
                            のメンバー
                        </h5><a class="self-link" href="#dictionary-mediakeymessageeventinit-members"
                            aria-label="Permalink for Section 6.4.2.1"></a>
                    </div>

                    <dl class="dictionary-members" data-dfn-for="MediaKeyMessageEventInit">
                        <dt>
                            <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeymessageeventinit-messagetype" data-idl="field" data-title="messageType" data-dfn-for="MediaKeyMessageEventInit" data-type="MediaKeyMessageType" tabindex="0" aria-haspopup="dialog">messageType</dfn></code>
                            型 <a data-link-type="idl" data-lt="MediaKeyMessageType" href="#dom-mediakeymessagetype"
                                class="internalDFN"
                                id="ref-for-dom-mediakeymessagetype-7"><code>MediaKeyMessageType</code></a>
                        </dt>
                        <dd>
                            メッセージの種類。
                        </dd>
                        <dt>
                            <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeymessageeventinit-message" data-idl="field" data-title="message" data-dfn-for="MediaKeyMessageEventInit" data-type="ArrayBuffer" tabindex="0" aria-haspopup="dialog">message</dfn></code>
                            型 <a data-link-type="interface" data-lt="ArrayBuffer"
                                href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a>
                        </dt>
                        <dd>
                            メッセージ。
                        </dd>
                    </dl>
                </section>
            </section>
        </section>
        <section id="mediakeysession-events" class="informative">
            <div class="header-wrapper">
                <h3 id="x6-5-event-summary"><bdi class="secno">6.5 </bdi>
                    Event Summary
                </h3><a class="self-link" href="#mediakeysession-events" aria-label="Permalink for Section 6.5"></a>
            </div>
            <p><em>この節は非規範的です。</em></p>

            <table class="old-table">
                <thead>
                    <tr>
                        <th>
                            イベント名
                        </th>
                        <th>
                            インターフェース
                        </th>
                        <th>
                            発生条件
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <code><dfn id="dfn-keystatuseschange" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">keystatuseschange</dfn></code>
                        </td>
                        <td>
                            <a data-link-type="interface" data-lt="Event"
                                href="https://dom.spec.whatwg.org/#event"><code>Event</code></a>
                        </td>
                        <td>
                            セッション内の鍵やその状態に変化があったとき。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code><dfn id="dfn-message" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">message</dfn></code>
                        </td>
                        <td>
                            <a data-link-type="idl" data-lt="MediaKeyMessageEvent" href="#dom-mediakeymessageevent"
                                class="internalDFN"
                                id="ref-for-dom-mediakeymessageevent-2"><code>MediaKeyMessageEvent</code></a>
                        </td>
                        <td>
                            <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-67">CDM</a> がセッションのためにメッセージを生成したとき。
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section id="mediakeysession-algorithms">
            <div class="header-wrapper">
                <h3 id="x6-6-algorithms"><bdi class="secno">6.6 </bdi>
                    アルゴリズム
                </h3><a class="self-link" href="#mediakeysession-algorithms" aria-label="Permalink for Section 6.6"></a>
            </div>

            <section id="queue-message">
                <div class="header-wrapper">
                    <h4 id="x6-6-1-queue-a-message-event"><bdi class="secno">6.6.1 </bdi>
                        <dfn id="dfn-queue-a-message-event" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">「message」イベントをキューする</dfn>
                    </h4><a class="self-link" href="#queue-message" aria-label="Permalink for Section 6.6.1"></a>
                </div>

                <p>
                    「message」イベントをキューするアルゴリズムは、<a data-link-type="idl" data-lt="MediaKeySession"
                        href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-24"><code>MediaKeySession</code></a> オブジェクトに対してメッセージイベントをキューします。
                    このアルゴリズムを実行する要求には、ターゲットとなる <a data-link-type="idl" data-lt="MediaKeySession"
                        href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-25"><code>MediaKeySession</code></a> オブジェクト、<var>message
                        type</var>、および <var>message</var> が含まれます。
                </p>
                <p>
                    <var>message</var> は暗号化された形であっても <a data-link-type="dfn|abstract-op"
                        href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-permanent-identifier-s-19">Distinctive Permanent Identifier(s)</a>
                    を含んではいけません（<em class="rfc2119">MUST NOT</em>）。また、もし該当の <a data-link-type="idl"
                        data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-26"><code>MediaKeySession</code></a> オブジェクトの <var>use
                        distinctive identifier</var> 値が false の場合、<var>message</var> は暗号化された形であっても <a
                        data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-identifier-s-13">Distinctive Identifier(s)</a> を含んではいけません（<em
                        class="rfc2119">MUST NOT</em>）。
                </p>
                <p>
                    次の手順を実行します:
                </p>
                <ol>
                    <li>
                        <p>
                            <var>session</var> を指定された <a data-link-type="idl" data-lt="MediaKeySession"
                                href="#dom-mediakeysession" class="internalDFN"
                                id="ref-for-dom-mediakeysession-27"><code>MediaKeySession</code></a> オブジェクトとします。
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキュー</a>して、バブリングせずキャンセル不可能な名前が
                            <a data-link-type="idl" data-lt="message" href="#dfn-message" class="internalDFN"
                                id="ref-for-dfn-message-6"><code><code>message</code></code></a> というイベントを作成し、<a
                                data-link-type="idl" data-lt="MediaKeyMessageEvent" href="#dom-mediakeymessageevent"
                                class="internalDFN"
                                id="ref-for-dom-mediakeymessageevent-3"><code>MediaKeyMessageEvent</code></a>
                            インターフェースを用いてそのイベントを生成し、<var>type</var> 属性を <code>message</code> に、<var>isTrusted</var> 属性を
                            <code>true</code> に初期化し、それを <var>session</var> に対してディスパッチします。
                        </p>
                        <p>
                            イベントインターフェース <a data-link-type="idl" data-lt="MediaKeyMessageEvent"
                                href="#dom-mediakeymessageevent" class="internalDFN"
                                id="ref-for-dom-mediakeymessageevent-4"><code>MediaKeyMessageEvent</code></a> は次を持ちます:
                        </p>
                        <ul style="list-style-type:none">
                            <li><a data-link-type="idl" href="#dom-mediakeymessageevent-messagetype" class="internalDFN"
                                    id="ref-for-dom-mediakeymessageevent-messagetype-2"><code>messageType</code></a> =
                                指定された <var>message type</var><br>
                                <br>
                                <a data-link-type="idl" href="#dom-mediakeymessageevent-message" class="internalDFN"
                                    id="ref-for-dom-mediakeymessageevent-message-2"><code>message</code></a> = 指定された
                                <var>message</var>
                            </li>
                        </ul>
                    </li>
                </ol>
            </section>
            <section id="update-key-statuses">
                <div class="header-wrapper">
                    <h4 id="x6-6-2-update-key-statuses"><bdi class="secno">6.6.2 </bdi>
                        <dfn id="dfn-update-key-statuses" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">鍵の状態を更新する</dfn>
                    </h4><a class="self-link" href="#update-key-statuses" aria-label="Permalink for Section 6.6.2"></a>
                </div>

                <p>
                    鍵の状態を更新するアルゴリズムは、<a data-link-type="dfn|abstract-op" href="#dfn-known" class="internalDFN"
                        id="ref-for-dfn-known-6">known</a> 鍵の集合や、1つ以上の鍵の状態を <a data-link-type="idl"
                        data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-28"><code>MediaKeySession</code></a>
                    に対して更新します。このアルゴリズムを実行する要求には、ターゲットの <a data-link-type="idl" data-lt="MediaKeySession"
                        href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-29"><code>MediaKeySession</code></a> オブジェクトと、<a
                        data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id" class="internalDFN"
                        id="ref-for-dfn-decryption-key-id-12">key ID</a> とそれに対応する <a data-link-type="idl"
                        data-lt="MediaKeyStatus" href="#dom-mediakeystatus" class="internalDFN"
                        id="ref-for-dom-mediakeystatus-15"><code>MediaKeyStatus</code></a> の対の列が含まれます。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-87">
                    <div role="heading" class="note-title marker" id="h-note-87" aria-level="5"><span>注</span></div>
                    <p class="">
                        このアルゴリズムは常にタスク内で実行されます。
                    </p>
                </div>
                <p>
                    次の手順を実行します:
                </p>
                <ol>
                    <li>
                        <p>
                            <var>session</var> を該当する <a data-link-type="idl" data-lt="MediaKeySession"
                                href="#dom-mediakeysession" class="internalDFN"
                                id="ref-for-dom-mediakeysession-30"><code>MediaKeySession</code></a> オブジェクトとします。
                        </p>
                    </li>
                    <li>
                        <p>
                            <var>input statuses</var> を、key ID とそれに対応する <a data-link-type="idl" data-lt="MediaKeyStatus"
                                href="#dom-mediakeystatus" class="internalDFN"
                                id="ref-for-dom-mediakeystatus-16"><code>MediaKeyStatus</code></a> の対の列とします。
                        </p>
                    </li>
                    <li>
                        <p>
                            <var>statuses</var> を <var>session</var> の <a data-link-type="idl"
                                href="#dom-mediakeysession-keystatuses" class="internalDFN"
                                id="ref-for-dom-mediakeysession-keystatuses-3"><code>keyStatuses</code></a> 属性とします。
                        </p>
                    </li>
                    <li>
                        <p>
                            <var>statuses</var> の内容を置き換えるために次の手順を実行します:
                        </p>
                        <ol>
                            <li>
                                <p>
                                    <var>statuses</var> を空にします。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <var>input statuses</var> の各対について以下を行います。
                                </p>
                                <ol>
                                    <li>
                                        <p>
                                            <var>pair</var> をその対とします。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            <var>pair</var> の key ID に対するエントリを <var>statuses</var> に挿入し、<var>pair</var>
                                            の <a data-link-type="idl" data-lt="MediaKeyStatus"
                                                href="#dom-mediakeystatus" class="internalDFN"
                                                id="ref-for-dom-mediakeystatus-17"><code>MediaKeyStatus</code></a>
                                            値を設定します。
                                        </p>
                                    </li>
                                </ol>
                            </li>
                        </ol>
                        <div class="note" role="note" id="issue-container-generatedID-88">
                            <div role="heading" class="note-title marker" id="h-note-88" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                この手順の効果は、<var>session</var> の <a data-link-type="idl"
                                    href="#dom-mediakeysession-keystatuses" class="internalDFN"
                                    id="ref-for-dom-mediakeysession-keystatuses-4"><code>keyStatuses</code></a>
                                属性の内容が既存の参照を無効にすることなく置き換えられる、ということです。この置換はスクリプトの観点から原子操作です。つまり、スクリプトは決して部分的にしか埋められていない状態を観測してはなりません（<em
                                    class="rfc2119">MUST NOT</em>）。
                            </p>
                        </div>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキュー</a>して、<a
                                data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">イベントを発火</a>
                            する処理を実行し、名前が <a data-link-type="idl" data-lt="keystatuseschange"
                                href="#dfn-keystatuseschange" class="internalDFN"
                                id="ref-for-dfn-keystatuseschange-2"><code><code>keystatuseschange</code></code></a>
                            のイベントを <var>session</var> に対して発火します。
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキュー</a>して、各メディア要素について
                            <a data-link-type="idl" href="#dom-htmlmediaelement-mediakeys" class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-mediakeys-1"><code>mediaKeys</code></a> 属性がこの
                            <var>session</var> を作成した <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys"
                                class="internalDFN" id="ref-for-dom-mediakeys-23"><code>MediaKeys</code></a>
                            オブジェクトである場合に、<a data-link-type="dfn|abstract-op"
                                href="#dfn-attempt-to-resume-playback-if-necessary" class="internalDFN"
                                id="ref-for-dfn-attempt-to-resume-playback-if-necessary-1">Attempt to Resume Playback If
                                Necessary</a> アルゴリズムを実行します。
                        </p>
                    </li>
                </ol>
            </section>
            <section id="update-expiration">
                <div class="header-wrapper">
                    <h4 id="x6-6-3-update-expiration"><bdi class="secno">6.6.3 </bdi>
                        <dfn id="dfn-update-expiration" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">有効期限を更新する</dfn>
                    </h4><a class="self-link" href="#update-expiration" aria-label="Permalink for Section 6.6.3"></a>
                </div>

                <p>
                    有効期限を更新するアルゴリズムは、<a data-link-type="dfn|abstract-op" href="#dfn-expiration" class="internalDFN"
                        id="ref-for-dfn-expiration-6">expiration time</a> を <a data-link-type="idl"
                        data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-31"><code>MediaKeySession</code></a>
                    に対して更新します。このアルゴリズムを実行する要求には、ターゲットの <a data-link-type="idl" data-lt="MediaKeySession"
                        href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-32"><code>MediaKeySession</code></a>
                    オブジェクトと、新しい有効期限（<code>NaN</code> である場合があります）が含まれます。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-89">
                    <div role="heading" class="note-title marker" id="h-note-89" aria-level="5"><span>注</span></div>
                    <p class="">
                        このアルゴリズムは常にタスク内で実行されます。
                    </p>
                </div>
                <p>
                    次の手順を実行します:
                </p>
                <ol>
                    <li>
                        <p>
                            <var>session</var> を該当する <a data-link-type="idl" data-lt="MediaKeySession"
                                href="#dom-mediakeysession" class="internalDFN"
                                id="ref-for-dom-mediakeysession-33"><code>MediaKeySession</code></a> オブジェクトとします。
                        </p>
                    </li>
                    <li>
                        <p>
                            <var>expiration time</var> を <code>NaN</code> とします。
                        </p>
                    </li>
                    <li>
                        <p>
                            新しい有効期限が <code>NaN</code> でないなら、<var>expiration time</var> をその値とします。
                        </p>
                    </li>
                    <li>
                        <p>
                            <var>session</var> の <a data-link-type="idl" href="#dom-mediakeysession-expiration"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysession-expiration-4"><code>expiration</code></a> 属性を、<a
                                data-link-type="dfn|abstract-op" href="#dfn-time" class="internalDFN"
                                id="ref-for-dfn-time-2">time</a> として表現された <var>expiration time</var> に設定します。
                        </p>
                    </li>
                </ol>
            </section>
            <section id="session-closed">
                <div class="header-wrapper">
                    <h4 id="x6-6-4-session-closed"><bdi class="secno">6.6.4 </bdi>
                        <dfn id="dfn-session-closed" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">セッションが閉じられた</dfn>
                    </h4><a class="self-link" href="#session-closed" aria-label="Permalink for Section 6.6.4"></a>
                </div>

                <p>
                    セッションが閉じられたアルゴリズムは、<a data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession"
                        class="internalDFN" id="ref-for-dom-mediakeysession-34"><code>MediaKeySession</code></a> の状態を、<a
                        data-link-type="dfn|abstract-op" href="#dfn-key-session" class="internalDFN"
                        id="ref-for-dfn-key-session-7">key session</a> が <a data-link-type="dfn|abstract-op"
                        href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-68">CDM</a>
                    によって閉じられた後に更新します。このアルゴリズムを実行する要求には、ターゲットの <a data-link-type="idl" data-lt="MediaKeySession"
                        href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-35"><code>MediaKeySession</code></a> オブジェクトと、<a
                        data-link-type="idl" data-lt="MediaKeySessionClosedReason"
                        href="#dom-mediakeysessionclosedreason" class="internalDFN"
                        id="ref-for-dom-mediakeysessionclosedreason-7"><code>MediaKeySessionClosedReason</code></a>
                    が含まれます。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-90">
                    <div role="heading" class="note-title marker" id="h-note-90" aria-level="5"><span>注</span></div>
                    <p class="">
                        このアルゴリズムは常にタスク内で実行されます。
                    </p>
                </div>
                <p>
                    セッションが閉じられると、当該セッションに関連するライセンスや鍵はメディアデータの復号に利用できなくなります。すべての <a data-link-type="idl"
                        data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-36"><code>MediaKeySession</code></a>
                    のメソッドは失敗し、このアルゴリズム実行後はこのオブジェクトに対してさらにイベントがキューされることはありません。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-91">
                    <div role="heading" class="note-title marker" id="h-note-91" aria-level="5"><span>注</span></div>
                    <div class="">
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-69">CDM</a>
                            は、セッションが不要になったときやシステムリソースが失われたときなど、任意の時点でセッションを閉じることがあります。その場合、<a
                                data-link-type="dfn|abstract-op" href="#dfn-monitor-for-cdm-state-changes"
                                class="internalDFN" id="ref-for-dfn-monitor-for-cdm-state-changes-3">Monitor for CDM
                                State Changes</a> アルゴリズムが変化を検出してこのアルゴリズムを実行します。
                        </p>
                        <p>
                            他のセッション内の鍵は、たとえ重複する key ID を持っていても影響を受けてはなりません（<em class="rfc2119">MUST</em>）。
                        </p>
                        <p>
                            このアルゴリズム実行後、当該アルゴリズムによってキューされたイベントハンドラは実行されますが、それ以降はさらにイベントをキューすることはできません。その結果、セッションを閉じたことにより
                            CDM がメッセージを送信することはできなくなります。
                        </p>
                    </div>
                </div>
                <p>
                    次の手順を実行します:
                </p>
                <ol>
                    <li>
                        <p>
                            <var>session</var> を該当する <a data-link-type="idl" data-lt="MediaKeySession"
                                href="#dom-mediakeysession" class="internalDFN"
                                id="ref-for-dom-mediakeysession-37"><code>MediaKeySession</code></a> オブジェクトとします。
                        </p>
                    </li>
                    <li>
                        <p>
                            <var>promise</var> を <var>session</var> の <a data-link-type="idl"
                                href="#dom-mediakeysession-closed" class="internalDFN"
                                id="ref-for-dom-mediakeysession-closed-5"><code>closed</code></a> 属性とします。
                        </p>
                    </li>

                    <li>
                        <p>
                            もし <var>promise</var> が既に解決されているなら、この手順を中止します。
                        </p>
                    </li>

                    <li>
                        <p>
                            <var>session</var> の <var>closing or closed</var> 値を true に設定します。
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-update-key-statuses" class="internalDFN"
                                id="ref-for-dfn-update-key-statuses-6">Update Key Statuses</a> アルゴリズムを
                            <var>session</var> 上で空の列を提供して実行します。
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-update-expiration" class="internalDFN"
                                id="ref-for-dfn-update-expiration-4">Update Expiration</a> アルゴリズムを <var>session</var> 上で
                            <code>NaN</code> を提供して実行します。
                        </p>
                    </li>
                    <li>
                        <p>
                            <var>promise</var> を与えられた理由で解決します。
                        </p>
                    </li>
                </ol>
            </section>
            <section id="monitor-cdm">
                <div class="header-wrapper">
                    <h4 id="x6-6-5-monitor-for-cdm-state-changes"><bdi class="secno">6.6.5 </bdi>
                        <dfn id="dfn-monitor-for-cdm-state-changes" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">CDM の状態変化を監視する</dfn>
                    </h4><a class="self-link" href="#monitor-cdm" aria-label="Permalink for Section 6.6.5"></a>
                </div>

                <p>
                    CDM の状態変化を監視するアルゴリズムは、<a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-71">CDM</a> 状態の変化に伴って必要となる手順を実行します。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-92">
                    <div role="heading" class="note-title marker" id="h-note-92" aria-level="5"><span>注</span></div>
                    <p class="">
                        このアルゴリズムは、他のアルゴリズムで扱われていない CDM の状態変化にのみ適用されます。たとえば、<a data-link-type="idl" data-lt="update()"
                            href="#dom-mediakeysession-update" class="internalDFN"
                            id="ref-for-dom-mediakeysession-update-10"><code>update</code></a><code>()</code>
                        はメッセージ、鍵状態の変化、または有効期限の変化をもたらすことがありますが、それらはすべて当該アルゴリズム内で処理されます。
                    </p>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-93">
                    <div role="heading" class="note-title marker" id="h-note-93" aria-level="5"><span>注</span></div>
                    <p class="">
                        このアルゴリズムは常にメインイベントループと並列して実行されます。
                    </p>
                </div>
                <p>
                    次の手順を実行します:
                </p>
                <ol>
                    <li>
                        <p>
                            <var>session</var> を <a data-link-type="idl" data-lt="MediaKeySession"
                                href="#dom-mediakeysession" class="internalDFN"
                                id="ref-for-dom-mediakeysession-38"><code>MediaKeySession</code></a> オブジェクトとします。
                        </p>
                    </li>
                    <li>
                        <p>
                            <var>cdm</var> を <var>session</var> の <var>cdm instance</var> 値で表される <a
                                data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-73">CDM</a> インスタンスとします。
                        </p>
                    </li>
                    <li>
                        <p>
                            もし <var>cdm</var> にまだ送信されていない送信メッセージがあるなら、<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキュー</a>して次の手順を実行します:
                        </p>
                        <ol>
                            <li>
                                <p>
                                    <var>message type</var> と <var>message</var> をメッセージの種類とメッセージにそれぞれ設定します。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <a data-link-type="dfn|abstract-op" href="#dfn-queue-a-message-event"
                                        class="internalDFN"
                                        id="ref-for-dfn-queue-a-message-event-6">「message」イベントをキューする</a>
                                    アルゴリズムを実行し、<var>session</var>、<var>message type</var>、<var>message</var> を渡します。
                                </p>
                            </li>
                        </ol>
                    </li>
                    <li>
                        <p>
                            もし <var>cdm</var> が <var>session</var> に対して <a data-link-type="dfn|abstract-op"
                                href="#dfn-known" class="internalDFN" id="ref-for-dfn-known-7">known</a>
                            な鍵の集合を変更したか、あるいは 1つ以上の鍵の状態を変更したなら、<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキュー</a>して次の手順を実行します:
                        </p>
                        <ol>
                            <li>
                                <p>
                                    <var>statuses</var> を、<var>session</var> に <a data-link-type="dfn|abstract-op"
                                        href="#dfn-known" class="internalDFN" id="ref-for-dfn-known-8">known</a> な各鍵につき
                                    1 対の key ID と <a data-link-type="idl" data-lt="MediaKeyStatus"
                                        href="#dom-mediakeystatus" class="internalDFN"
                                        id="ref-for-dom-mediakeystatus-18"><code>MediaKeyStatus</code></a> 値を含むリストとします。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <a data-link-type="dfn|abstract-op" href="#dfn-update-key-statuses"
                                        class="internalDFN" id="ref-for-dfn-update-key-statuses-7">鍵の状態を更新する</a>
                                    アルゴリズムを実行し、<var>session</var> と <var>statuses</var> を渡します。
                                </p>
                            </li>
                        </ol>
                    </li>
                    <li>
                        <p>
                            もし <var>cdm</var> が <var>session</var> の <a data-link-type="dfn|abstract-op"
                                href="#dfn-expiration" class="internalDFN" id="ref-for-dfn-expiration-7">expiration
                                time</a> を変更したなら、<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキュー</a>して次の手順を実行します:
                        </p>
                        <ol>
                            <li>
                                <p>
                                    <var>expiration time</var> を <var>session</var> の新しい有効期限とします。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <a data-link-type="dfn|abstract-op" href="#dfn-update-expiration"
                                        class="internalDFN" id="ref-for-dfn-update-expiration-5">有効期限を更新する</a>
                                    アルゴリズムを実行し、<var>session</var> と <var>expiration time</var> を渡します。
                                </p>
                            </li>
                        </ol>
                    </li>
                    <li>
                        <p>
                            もし <var>cdm</var> が <var>session</var> を閉じたなら、<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキュー</a>して、<a
                                data-link-type="dfn|abstract-op" href="#dfn-session-closed" class="internalDFN"
                                id="ref-for-dfn-session-closed-5">セッションが閉じられた</a> アルゴリズムを適切な <a data-link-type="idl"
                                data-lt="MediaKeySessionClosedReason" href="#dom-mediakeysessionclosedreason"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysessionclosedreason-8"><code>MediaKeySessionClosedReason</code></a>
                            値で <var>session</var> に対して実行します。
                        </p>
                    </li>
                    <li>
                        <p>
                            もし <var>cdm</var> がハードウェアコンテキストリセットにより利用不能になったなら、<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキュー</a>して、<a
                                data-link-type="dfn|abstract-op" href="#dfn-cdm-unavailable" class="internalDFN"
                                id="ref-for-dfn-cdm-unavailable-1">CDM Unavailable</a> アルゴリズムを理由 "<a
                                data-link-type="idl" href="#dom-mediakeysessionclosedreason-hardware-context-reset"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysessionclosedreason-hardware-context-reset-2"><code>hardware-context-reset</code></a>"
                            で実行します。
                        </p>
                    </li>
                    <li>
                        <p>
                            もし <var>cdm</var> が他の理由で利用不能になったなら、<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキュー</a>して、<a
                                data-link-type="dfn|abstract-op" href="#dfn-cdm-unavailable" class="internalDFN"
                                id="ref-for-dfn-cdm-unavailable-2">CDM Unavailable</a> アルゴリズムを理由 "<a
                                data-link-type="idl" href="#dom-mediakeysessionclosedreason-internal-error"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysessionclosedreason-internal-error-2"><code>internal-error</code></a>"
                            で実行します。
                        </p>
                    </li>
                </ol>
            </section>
        </section>
        <section id="exceptions">
            <div class="header-wrapper">
                <h3 id="x6-7-exceptions"><bdi class="secno">6.7 </bdi>
                    例外
                </h3><a class="self-link" href="#exceptions" aria-label="Permalink for Section 6.7"></a>
            </div>

            <p id="error-names">
                メソッドは、返されたプロミスを <a data-link-type="dfn"
                    href="https://webidl.spec.whatwg.org/#dfn-simple-exception">単純例外</a>
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-webidl"
                        title="Web IDL Standard">WEBIDL</a></cite>] または <a data-link-type="interface"
                    data-lt="DOMException"
                    href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                で拒否することでエラーを報告します。以下の
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-webidl"
                        title="Web IDL Standard">WEBIDL</a></cite>] のアルゴリズムで使用される <a data-link-type="dfn"
                    href="https://webidl.spec.whatwg.org/#dfn-simple-exception">単純例外</a> および <a
                    href="https://webidl.spec.whatwg.org/#idl-DOMException-error-names">DOMException 名</a>
                を示します。アルゴリズムで指定された原因は各名前の横に記載されていますが、これらの名前は他の理由でも使われることがあります（<em class="rfc2119">MAY</em>）。
            </p>
            <table class="old-table">
                <tbody>
                    <tr>
                        <th>
                            名前
                        </th>
                        <th>
                            主な原因（例示、網羅的ではない）
                        </th>
                    </tr>
                    <tr>
                        <td>
                            <code><dfn id="dfn-typeerror" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">TypeError</dfn></code>
                        </td>
                        <td>
                            パラメータが空である。<br>
                            初期化データが無効。<br>
                            応答フォーマットが無効。<br>
                            "<a data-link-type="idl" href="#dom-mediakeysessiontype-temporary" class="internalDFN"
                                id="ref-for-dom-mediakeysessiontype-temporary-11"><code>temporary</code></a>"
                            セッションに永続ライセンスが提供された。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code><dfn id="dfn-notsupportederror" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">NotSupportedError</dfn></code>
                        </td>
                        <td>
                            既存の <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                                id="ref-for-dom-mediakeys-24"><code>MediaKeys</code></a> オブジェクトが削除できない。<br>
                            <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-28">Key System</a> がサポートされていない。<br>
                            初期化データタイプが <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-29">Key System</a> でサポートされていない。<br>
                            セッションタイプが <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-30">Key System</a> でサポートされていない。<br>
                            初期化データが <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-31">Key System</a> でサポートされていない。<br>
                            操作が <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-32">Key System</a> でサポートされていない。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code><dfn id="dfn-invalidstateerror" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">InvalidStateError</dfn></code>
                        </td>
                        <td>
                            既存の <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                                id="ref-for-dom-mediakeys-25"><code>MediaKeys</code></a> オブジェクトが現時点では削除できない。<br>
                            セッションがすでに使用された。<br>
                            セッションがまだ初期化されていない。<br>
                            セッションが閉じられている。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code><dfn id="dfn-quotaexceedederror" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">QuotaExceededError</dfn></code>
                        </td>
                        <td>
                            <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                                id="ref-for-dom-mediakeys-26"><code>MediaKeys</code></a> オブジェクトは追加の <a
                                data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement"
                                class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-5"><code>HTMLMediaElement</code></a> で使用できない。<br>
                            この sessionId に対して未閉セッションがすでに存在する。<br>
                            新しいセッションやライセンス要求を作成するためのリソースが不足している。
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section id="session-storage">
            <div class="header-wrapper">
                <h3 id="x6-8-session-storage-and-persistence"><bdi class="secno">6.8 </bdi>
                    セッションの保存と永続化
                </h3><a class="self-link" href="#session-storage" aria-label="Permalink for Section 6.8"></a>
            </div>

            <p>
                本節は、アルゴリズムを補足するセッション保存と永続化の概要を示します。
            </p>
            <p>
                以下の要件は、<a data-link-type="dfn|abstract-op" href="#dfn-storage-and-persistence" class="internalDFN"
                    id="ref-for-dfn-storage-and-persistence-1">Storage and Persistence</a> の要件に加えて適用されます。
            </p>
            <p>
                このオブジェクトの <var>session type</var> に対して <a data-link-type="dfn|abstract-op"
                    href="#dfn-is-persistent-session-type" class="internalDFN"
                    id="ref-for-dfn-is-persistent-session-type-7">Is persistent session type?</a> アルゴリズムを実行した結果が
                <code>false</code> であれば、ユーザーエージェントおよび <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                    class="internalDFN" id="ref-for-dfn-cdm-74">CDM</a> はセッションに関連する記録やデータ（ライセンス、鍵、<a
                    data-link-type="dfn|abstract-op" href="#dfn-record-s-of-license-destruction" class="internalDFN"
                    id="ref-for-dfn-record-s-of-license-destruction-10">record(s) of license destruction</a>、<a
                    data-link-type="dfn|abstract-op" href="#dfn-session-id" class="internalDFN"
                    id="ref-for-dfn-session-id-5">Session ID</a> を含む）をいかなる時点でも永続化してはならない（<em class="rfc2119">MUST
                    NOT</em>）。
            </p>
            <p>
                この節の残りは、<a data-link-type="dfn|abstract-op" href="#dfn-is-persistent-session-type" class="internalDFN"
                    id="ref-for-dfn-is-persistent-session-type-8">Is persistent session type?</a> アルゴリズムが
                <code>true</code> を返すセッションタイプに適用されます。
            </p>
            <p>
                <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-75">CDM</a>
                は <em class="rfc2119">SHOULD NOT</em> <a data-link-type="idl" data-lt="update()"
                    href="#dom-mediakeysession-update" class="internalDFN"
                    id="ref-for-dom-mediakeysession-update-11"><code>update</code></a><code>()</code>
                が初めて呼ばれるまでは、Session ID を含むセッションデータを保存すべきではありません。特に、<a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                    class="internalDFN" id="ref-for-dfn-cdm-76">CDM</a> は <a data-link-type="idl"
                    data-lt="generateRequest()" href="#dom-mediakeysession-generaterequest" class="internalDFN"
                    id="ref-for-dom-mediakeysession-generaterequest-4"><code>generateRequest</code></a><code>()</code>
                アルゴリズムの間にセッションデータを保存すべきではありません（<em class="rfc2119">SHOULD
                    NOT</em>）。これにより、アプリケーションはセッションの存在を把握し、最終的に削除する必要があることが分かります。
            </p>
            <p>
                セッションがクリアされたとき（例: <a data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update"
                    class="internalDFN"
                    id="ref-for-dom-mediakeysession-update-12"><code>update</code></a><code>()</code> で <a
                    data-link-type="dfn|abstract-op" href="#dfn-record-s-of-license-destruction" class="internalDFN"
                    id="ref-for-dfn-record-s-of-license-destruction-11">record of license destruction</a>
                確認応答が処理された場合など）、そのセッションに関連する <em>すべて</em> のデータはクリアされなければなりません（<em class="rfc2119">MUST</em>）。詳細は <a
                    href="#persistent-state-requirements">Persistent Data</a> を参照。
            </p>
            <p>
                <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-77">CDM</a>
                は、あるセッションのデータが未閉じの <a data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession"
                    class="internalDFN" id="ref-for-dom-mediakeysession-39"><code>MediaKeySession</code></a> オブジェクト（任意の
                <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document">Document</a>
                内）にしか存在しないことを保証しなければなりません（<em class="rfc2119">MUST</em>）。言い換えれば、<a data-link-type="idl" data-lt="load()"
                    href="#dom-mediakeysession-load" class="internalDFN"
                    id="ref-for-dom-mediakeysession-load-5"><code>load</code></a><code>()</code> は、その sessionId
                パラメータで指定されたセッションを表す <a data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession"
                    class="internalDFN" id="ref-for-dom-mediakeysession-40"><code>MediaKeySession</code></a>
                が既に存在している場合（それを <a data-link-type="idl" data-lt="generateRequest()"
                    href="#dom-mediakeysession-generaterequest" class="internalDFN"
                    id="ref-for-dom-mediakeysession-generaterequest-5"><code>generateRequest</code></a><code>()</code>
                で作成したオブジェクトがまだアクティブか、あるいは他のオブジェクトに <a data-link-type="idl" data-lt="load()"
                    href="#dom-mediakeysession-load" class="internalDFN"
                    id="ref-for-dom-mediakeysession-load-6"><code>load</code></a><code>()</code>
                でロードされた場合）、必ず失敗しなければなりません（<em class="rfc2119">MUST</em>）。すべての関連オブジェクトが <a
                    data-link-type="dfn|abstract-op" href="#dfn-closed" class="internalDFN"
                    id="ref-for-dfn-closed-9">closed</a> なら、再度ロードすることができます（<em class="rfc2119">MAY</em>）。
            </p>
            <p>
                <a data-link-type="dfn|abstract-op" href="#dfn-is-persistent-session-type" class="internalDFN"
                    id="ref-for-dfn-is-persistent-session-type-9">Is persistent session type?</a> アルゴリズムが
                <code>true</code> を返す型でセッションを作成するアプリケーションは、保存されたデータを後で <a data-link-type="idl" data-lt="remove()"
                    href="#dom-mediakeysession-remove" class="internalDFN"
                    id="ref-for-dom-mediakeysession-remove-3"><code>remove</code></a><code>()</code>
                で削除処理を開始し、その削除処理（メッセージのやりとりを含む場合がある）が正常に完了することを確認するべきです（<em class="rfc2119">SHOULD</em>）。<a
                    data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-78">CDM</a>
                も適切にセッションを削除することがありますが、アプリケーションはこれに依存すべきではありません（<em class="rfc2119">SHOULD NOT</em>）。
            </p>
            <p>
                永続ストレージ対応時の追加考慮事項については、<a href="#security" class="sec-ref"><bdi class="secno">10. </bdi>
                    Security</a> および <a href="#privacy" class="sec-ref"><bdi class="secno">11. </bdi>
                    Privacy</a> を参照してください。
            </p>
        </section>
    </section>
    <section id="htmlmediaelement-extensions">
        <div class="header-wrapper">
            <h2 id="x7-htmlmediaelement-extensions"><bdi class="secno">7. </bdi>
                <dfn id="dom-htmlmediaelement" data-idl="interface" data-title="HTMLMediaElement" data-dfn-for=""
                    tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><code>HTMLMediaElement</code></dfn>
                拡張
            </h2><a class="self-link" href="#htmlmediaelement-extensions" aria-label="Permalink for Section 7."></a>
        </div>

        <p>
            この節では、Encrypted Media Extensions がサポートされている場合の <a data-link-type="idl" data-lt="HTMLMediaElement"
                href="#dom-htmlmediaelement" class="internalDFN"
                id="ref-for-dom-htmlmediaelement-6"><code>HTMLMediaElement</code></a> [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-html" title="HTML Standard">HTML</a></cite>]
            への追加および変更について規定します。
        </p>
        <p>
            以下の内部値が <a data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement" class="internalDFN"
                id="ref-for-dom-htmlmediaelement-7"><code>HTMLMediaElement</code></a> に追加されます:
        </p>
        <ul>
            <li>
                <p>
                    <var>attaching media keys</var>（<em class="rfc2119">SHALL</em> ブール値を持つ）。
                </p>
            </li>
            <li>
                <p>
                    <var>encrypted block queue</var>（<em class="rfc2119">SHALL</em> 復号待ちの暗号化ブロックのキュー）。
                </p>
            </li>
            <li>
                <p>
                    <var>decryption blocked waiting for key</var>（<em class="rfc2119">SHALL</em> ブール値を持つ）。
                </p>
            </li>
            <li>
                <p>
                    <var>playback blocked waiting for key</var>（<em class="rfc2119">SHALL</em> ブール値を持つ）。
                </p>
            </li>
        </ul>
        <p>
            以下の変更が <a data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement" class="internalDFN"
                id="ref-for-dom-htmlmediaelement-8"><code>HTMLMediaElement</code></a> の挙動に加えられます:
        </p>
        <ul>
            <li>
                <p>
                    <a data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement" class="internalDFN"
                        id="ref-for-dom-htmlmediaelement-9"><code>HTMLMediaElement</code></a> が生成されるとき、<var>attaching
                        media keys</var> の値は <em class="rfc2119">SHALL</em> <code>false</code> で初期化され、<var>encrypted
                        block queue</var> の値は <em class="rfc2119">SHALL</em> 空で、<var>decryption blocked waiting for
                        key</var> の値は <em class="rfc2119">SHALL</em> <code>false</code> で初期化され、<var>playback blocked
                        waiting for key</var> の値も <em class="rfc2119">SHALL</em> <code>false</code> で初期化されます。
                </p>
            </li>
            <li>
                <p>
                    <a href="https://html.spec.whatwg.org/multipage/#current-playback-position">現在の再生位置</a>
                    が通常再生の一部として再生方向に進む以外の方法で変更された場合、<var>encrypted block queue</var> の値は <em class="rfc2119">SHALL</em>
                    空となり、<var>decryption blocked waiting for key</var> の値は <em class="rfc2119">SHALL</em>
                    <code>false</code> で初期化され、<var>playback blocked waiting for key</var> の値も <em
                        class="rfc2119">SHALL</em> <code>false</code> に設定されます。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-94">
                    <div role="heading" class="note-title marker" id="h-note-94" aria-level="3"><span>注</span></div>
                    <p class="">
                        つまり、例えば <a
                            href="https://html.spec.whatwg.org/multipage/#loading-the-media-resource">メディアリソースのロード</a> や
                        <a href="https://html.spec.whatwg.org/multipage/#seeking">シーク</a>の際にこれらの値をリセットすべきです。
                    </p>
                </div>
            </li>
            <li>
                <p>
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                            title="HTML Standard">HTML</a></cite>] で規定された基準に加えて、<a data-link-type="idl"
                        data-lt="HTMLMediaElement" href="#dom-htmlmediaelement" class="internalDFN"
                        id="ref-for-dom-htmlmediaelement-10"><code>HTMLMediaElement</code></a> は、<var>playback blocked
                        waiting for key</var> の値が <code>true</code> の場合 <a
                        href="https://html.spec.whatwg.org/multipage/#blocked-media-element">blocked media element</a>
                    と見なされます（<em class="rfc2119">SHALL</em>）。
                </p>
            </li>
            <li>
                <p>
                    ユーザーエージェントが再生を開始する準備ができ、<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#media-data">media data</a>
                    に暗号化ブロックが含まれる可能性のある指示に遭遇した場合、<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">resource
                        fetch algorithm</a> の中で、ユーザーエージェントは <em class="rfc2119">SHALL</em> <a
                        href="#media-may-contain-encrypted-blocks">Media Data May Contain Encrypted Blocks</a>
                    アルゴリズムを実行します。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-95">
                    <div role="heading" class="note-title marker" id="h-note-95" aria-level="3"><span>注</span></div>
                    <p class="">
                        一部のコンテナフォーマットでは、この指示は <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data"
                            class="internalDFN" id="ref-for-dfn-initialization-data-11">Initialization Data</a> とは別です。
                    </p>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-96">
                    <div role="heading" class="note-title marker" id="h-note-96" aria-level="3"><span>注</span></div>
                    <p class="">
                        このアルゴリズムは、関連するコンテナデータのパース（<a data-link-type="dfn|abstract-op"
                            href="#dfn-initialization-data-encountered" class="internalDFN"
                            id="ref-for-dfn-initialization-data-encountered-1">Initialization Data Encountered</a>
                        アルゴリズムの実行を含む）後、デコードが開始する前に実行されます。
                    </p>
                </div>
            </li>
            <li>
                <p>
                    ユーザーエージェントが <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                        id="ref-for-dfn-initialization-data-12">Initialization Data</a> を <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#media-data">media data</a> の中で <a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">resource
                        fetch algorithm</a> の間に検出した場合、ユーザーエージェントは <em class="rfc2119">SHALL</em> <a
                        data-link-type="dfn|abstract-op" href="#dfn-initialization-data-encountered" class="internalDFN"
                        id="ref-for-dfn-initialization-data-encountered-2">Initialization Data Encountered</a>
                    アルゴリズムを実行します。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-97">
                    <div role="heading" class="note-title marker" id="h-note-97" aria-level="3"><span>注</span></div>
                    <p class="">
                        一部のコンテナフォーマットは <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data"
                            class="internalDFN" id="ref-for-dfn-initialization-data-13">Initialization Data</a>
                        を含まない暗号化メディアデータをサポートしており、その場合このアルゴリズムはトリガーされません。
                    </p>
                </div>
            </li>
            <li>
                <p>
                    <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/media.html#media-data">media
                        data</a> の暗号化ブロックが <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">resource
                        fetch algorithm</a> の間に検出されるごとに、ユーザーエージェントは暗号化ブロックが検出された順に <a data-link-type="dfn|abstract-op"
                        href="#dfn-encrypted-block-encountered" class="internalDFN"
                        id="ref-for-dfn-encrypted-block-encountered-1">Encrypted Block Encountered</a> アルゴリズムを <em
                        class="rfc2119">SHALL</em> 実行します。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-98">
                    <div role="heading" class="note-title marker" id="h-note-98" aria-level="3"><span>注</span></div>
                    <p class="">
                        この手順は、ユーザーエージェント実装が暗号化ブロック検出後、再生に必要になるまでの任意のタイミングで復号を行う柔軟性を提供します。
                    </p>
                </div>
            </li>
            <li>
                <p>
                    <var>decryption blocked waiting for key</var> の値が <code>true</code> の間に次のいずれかが発生した場合、ユーザーエージェントは <em
                        class="rfc2119">SHALL</em> <a data-link-type="dfn|abstract-op" href="#dfn-wait-for-key"
                        class="internalDFN" id="ref-for-dfn-wait-for-key-1">Wait for Key</a> アルゴリズムを実行します。
                </p>
                <ul>
                    <li>
                        <p>
                            ユーザーエージェントが <a
                                href="https://html.spec.whatwg.org/multipage/#current-playback-position">現在の再生位置</a> を
                            <a
                                href="https://html.spec.whatwg.org/multipage/#direction-of-playback">再生方向</a>に進めることができない場合。
                        </p>
                    </li>
                    <li>
                        <p>
                            ユーザーエージェントが <a
                                href="https://html.spec.whatwg.org/multipage/#current-playback-position">現在の再生位置</a>
                            に対するデータを提供できない場合。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-99">
                            <div role="heading" class="note-title marker" id="h-note-99" aria-level="3">
                                <span>注</span>
                            </div>
                            <p class="">
                                例えば、再生開始時や <a href="https://html.spec.whatwg.org/multipage/#seeking">シーク</a>後など。
                            </p>
                        </div>
                    </li>
                </ul>
            </li>
            <li>
                <p>
                    以下のように属性およびメソッドが追加されます。
                </p>
            </li>
        </ul>
        <p>
            プロミスを返すメソッドにおいて、すべてのエラーは返された Promise を拒否することで非同期に報告されます。これには [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-webidl" title="Web IDL Standard">WEBIDL</a></cite>]
            の型マッピングエラーも含まれます。
        </p>
        <p>
            アルゴリズムの手順は、プロミスが拒否されると常に中止されます。
        </p>
        <pre class="idl def" id="webidl-1869224078"><span class="idlHeader"><a class="self-link" href="#webidl-1869224078">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-htmlmediaelement-partial-1" data-title="HTMLMediaElement">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>] partial interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-htmlmediaelement" id="ref-for-dom-htmlmediaelement-11"><code>HTMLMediaElement</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-htmlmediaelement-mediakeys" data-title="mediaKeys" data-dfn-for="HTMLMediaElement">
  [<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>] readonly        attribute<span class="idlType"> <a data-link-type="idl" href="#dom-mediakeys" class="internalDFN" id="ref-for-dom-mediakeys-27"><code>MediaKeys</code></a>?</span>   <a class="internalDFN idlName" data-link-type="attribute" href="#dom-htmlmediaelement-mediakeys" id="ref-for-dom-htmlmediaelement-mediakeys-2"><code>mediaKeys</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-htmlmediaelement-onencrypted" data-title="onencrypted" data-dfn-for="HTMLMediaElement">
                                  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-htmlmediaelement-onencrypted" id="ref-for-dom-htmlmediaelement-onencrypted-1"><code>onencrypted</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-htmlmediaelement-onwaitingforkey" data-title="onwaitingforkey" data-dfn-for="HTMLMediaElement">
                                  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-htmlmediaelement-onwaitingforkey" id="ref-for-dom-htmlmediaelement-onwaitingforkey-1"><code>onwaitingforkey</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-htmlmediaelement-setmediakeys-mediakeys" data-title="setMediaKeys" data-dfn-for="HTMLMediaElement">
  [<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-htmlmediaelement-setmediakeys" id="ref-for-dom-htmlmediaelement-setmediakeys-2"><code>setMediaKeys</code></a> (<span class="idlType"><a data-link-type="idl" href="#dom-mediakeys" class="internalDFN" id="ref-for-dom-mediakeys-28"><code>MediaKeys</code></a>?</span> <span class="idlParamName">mediaKeys</span>);</span>
};</span></code></pre>
        <section id="attributes-3">
            <div class="header-wrapper">
                <h3 id="x7-1-attributes"><bdi class="secno">7.1 </bdi>
                    属性
                </h3><a class="self-link" href="#attributes-3" aria-label="Permalink for Section 7.1"></a>
            </div>

            <dl class="attributes" data-dfn-for="HTMLMediaElement">
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-htmlmediaelement-mediakeys"
                        data-idl="attribute" data-title="mediaKeys" data-dfn-for="HTMLMediaElement"
                        data-type="MediaKeys" data-lt="mediaKeys" data-local-lt="HTMLMediaElement.mediaKeys"
                        tabindex="0" aria-haspopup="dialog"><code>mediaKeys</code></dfn> 型 <a data-link-type="idl"
                        data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                        id="ref-for-dom-mediakeys-29"><code>MediaKeys</code></a>、readonly、nullable
                </dt>
                <dd>
                    <p>
                        このメディア要素で暗号化された <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/media.html#media-data">media data</a>
                        を復号する際に使用される <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys"
                            class="internalDFN" id="ref-for-dom-mediakeys-30"><code>MediaKeys</code></a>。
                    </p>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-htmlmediaelement-onencrypted"
                        data-idl="attribute" data-title="onencrypted" data-dfn-for="HTMLMediaElement"
                        data-type="EventHandler" data-lt="onencrypted" data-local-lt="HTMLMediaElement.onencrypted"
                        tabindex="0" aria-haspopup="dialog"><code>onencrypted</code></dfn> 型 <a data-link-type="typedef"
                        data-lt="EventHandler"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><code>EventHandler</code></a>
                </dt>
                <dd>
                    <p>
                        <a data-link-type="idl" data-lt="encrypted" href="#dfn-encrypted" class="internalDFN"
                            id="ref-for-dfn-encrypted-4"><code><code>encrypted</code></code></a> イベントのイベントハンドラ。全ての <a
                            data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement"
                            class="internalDFN" id="ref-for-dom-htmlmediaelement-12"><code>HTMLMediaElement</code></a>
                        でコンテンツ属性およびIDL属性として <em class="rfc2119">MUST</em> サポートされなければなりません。
                    </p>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-htmlmediaelement-onwaitingforkey"
                        data-idl="attribute" data-title="onwaitingforkey" data-dfn-for="HTMLMediaElement"
                        data-type="EventHandler" data-lt="onwaitingforkey"
                        data-local-lt="HTMLMediaElement.onwaitingforkey" tabindex="0"
                        aria-haspopup="dialog"><code>onwaitingforkey</code></dfn> 型 <a data-link-type="typedef"
                        data-lt="EventHandler"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><code>EventHandler</code></a>
                </dt>
                <dd>
                    <p>
                        <a data-link-type="idl" data-lt="waitingforkey" href="#dfn-waitingforkey" class="internalDFN"
                            id="ref-for-dfn-waitingforkey-1"><code><code>waitingforkey</code></code></a>
                        イベントのイベントハンドラ。全ての <a data-link-type="idl" data-lt="HTMLMediaElement"
                            href="#dom-htmlmediaelement" class="internalDFN"
                            id="ref-for-dom-htmlmediaelement-13"><code>HTMLMediaElement</code></a> でコンテンツ属性およびIDL属性として
                        <em class="rfc2119">MUST</em> サポートされなければなりません。
                    </p>
                </dd>
            </dl>
        </section>
        <section id="methods-4">
            <div class="header-wrapper">
                <h3 id="x7-2-methods"><bdi class="secno">7.2 </bdi>
                    メソッド
                </h3><a class="self-link" href="#methods-4" aria-label="Permalink for Section 7.2"></a>
            </div>

            <dl class="methods" data-dfn-for="HTMLMediaElement">
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-htmlmediaelement-setmediakeys"
                        data-idl="operation" data-title="setMediaKeys()" data-dfn-for="HTMLMediaElement"
                        data-type="Promise" data-lt="setMediaKeys()|setMediaKeys(mediaKeys)"
                        data-local-lt="HTMLMediaElement.setMediaKeys|HTMLMediaElement.setMediaKeys()|setMediaKeys"
                        tabindex="0" aria-haspopup="dialog"><code>setMediaKeys()</code></dfn>
                </dt>
                <dd>
                    <p>
                        再生中のメディアデータの復号に使用する <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys"
                            class="internalDFN" id="ref-for-dom-mediakeys-31"><code>MediaKeys</code></a> を指定します。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-100">
                        <div role="heading" class="note-title marker" id="h-note-100" aria-level="4"><span>注</span>
                        </div>
                        <p class="">
                            再生中に関連付けられた <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys"
                                class="internalDFN" id="ref-for-dom-mediakeys-32"><code>MediaKeys</code></a>
                            オブジェクトをクリアまたは置換することのサポートは実装品質に依存します。多くの場合、悪いユーザー体験やプロミスの拒否につながります。
                        </p>
                    </div>
                    <p>
                        このメソッドが呼ばれたとき、ユーザーエージェントは次の手順を <em class="rfc2119">必ず</em> 実行しなければなりません:
                    </p>
                    <ol class="method-algorithm">

                        <li>
                            <p>
                                このオブジェクトの <var>attaching media keys</var> 値が true なら、<a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-11"><code><code>InvalidStateError</code></code></a>
                                で拒否されたプロミスを返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                <var>mediaKeys</var> と <a data-link-type="idl" href="#dom-htmlmediaelement-mediakeys"
                                    class="internalDFN"
                                    id="ref-for-dom-htmlmediaelement-mediakeys-3"><code>mediaKeys</code></a>
                                属性が同じオブジェクトなら、<code>undefined</code> で解決されたプロミスを返します。
                            </p>
                        </li>
                        <li>
                            <p>
                                このオブジェクトの <var>attaching media keys</var> 値を true にします。
                            </p>
                        </li>
                        <li>
                            <p>
                                <var>promise</var> を新しいプロミスとします。
                            </p>
                        </li>
                        <li>
                            <p>
                                次の手順を並行して実行します:
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        以下の条件がすべて成り立つ場合:
                                    </p>
                                    <ul>
                                        <li>
                                            <p>
                                                <var>mediaKeys</var> が null でない
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <var>mediaKeys</var> で表される <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-79">CDM</a>
                                                インスタンスが他のメディア要素ですでに使用されている
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                ユーザーエージェントがこの要素でそれを使用できない
                                            </p>
                                        </li>
                                    </ul>
                                    <p>
                                        この場合はこのオブジェクトの <var>attaching media keys</var> 値を false にし、<var>promise</var> を
                                        <a data-link-type="idl" data-lt="QuotaExceededError"
                                            href="#dfn-quotaexceedederror" class="internalDFN"
                                            id="ref-for-dfn-quotaexceedederror-5"><code><code>QuotaExceededError</code></code></a>
                                        で拒否します。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <a data-link-type="idl" href="#dom-htmlmediaelement-mediakeys"
                                            class="internalDFN"
                                            id="ref-for-dom-htmlmediaelement-mediakeys-4"><code>mediaKeys</code></a> 属性が
                                        null でない場合、次の手順を実行します:
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                ユーザーエージェントまたは <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                                    class="internalDFN" id="ref-for-dfn-cdm-80">CDM</a>
                                                が関連付け解除をサポートしない場合は、このオブジェクトの <var>attaching media keys</var> 値を false
                                                にし、<var>promise</var> を <a data-link-type="idl"
                                                    data-lt="NotSupportedError" href="#dfn-notsupportederror"
                                                    class="internalDFN"
                                                    id="ref-for-dfn-notsupportederror-8"><code><code>NotSupportedError</code></code></a>
                                                で拒否します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                現時点で関連付け解除できない場合は、このオブジェクトの <var>attaching media keys</var> 値を false
                                                にし、<var>promise</var> を <a data-link-type="idl"
                                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror"
                                                    class="internalDFN"
                                                    id="ref-for-dfn-invalidstateerror-12"><code><code>InvalidStateError</code></code></a>
                                                で拒否します。
                                            </p>
                                            <div class="note" role="note" id="issue-container-generatedID-101">
                                                <div role="heading" class="note-title marker" id="h-note-101"
                                                    aria-level="4"><span>注</span></div>
                                                <p class="">
                                                    例えば一部の実装では再生中の解除を許可しません。
                                                </p>
                                            </div>
                                        </li>
                                        <li>
                                            <p>
                                                <a data-link-type="idl" href="#dom-htmlmediaelement-mediakeys"
                                                    class="internalDFN"
                                                    id="ref-for-dom-htmlmediaelement-mediakeys-5"><code>mediaKeys</code></a>
                                                属性で表される <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                                    class="internalDFN" id="ref-for-dfn-cdm-81">CDM</a>
                                                インスタンスの利用を停止し、メディア要素との関連付けも解除します。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                上記の手順が失敗した場合は、このオブジェクトの <var>attaching media keys</var> 値を false
                                                にし、<var>promise</var> を適切な <a href="#error-names">error name</a> で拒否します。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        <var>mediaKeys</var> が null でない場合、次の手順を実行します:
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                <var>mediaKeys</var> で表される <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-82">CDM</a>
                                                インスタンスをメディア要素に関連付け、<a data-link-type="dfn"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#media-data">media
                                                    data</a> の復号に使用するようにします。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                上記の手順が失敗した場合は次の手順を実行します:
                                            </p>
                                            <ol>
                                                <li>
                                                    <p>
                                                        <a data-link-type="idl" href="#dom-htmlmediaelement-mediakeys"
                                                            class="internalDFN"
                                                            id="ref-for-dom-htmlmediaelement-mediakeys-6"><code>mediaKeys</code></a>
                                                        属性を null にします。
                                                    </p>
                                                </li>

                                                <li>
                                                    <p>
                                                        このオブジェクトの <var>attaching media keys</var> 値を false にします。
                                                    </p>
                                                </li>
                                                <li>
                                                    <p>
                                                        <var>promise</var> を適切な <a href="#error-names">error name</a>
                                                        で新しい <a data-link-type="interface" data-lt="DOMException"
                                                            href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                                                        で拒否します。
                                                    </p>
                                                </li>
                                            </ol>
                                        </li>
                                        <li>
                                            <p>
                                                <a data-link-type="dfn"
                                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキュー</a>して、メディア要素上で
                                                <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-attempt-to-resume-playback-if-necessary"
                                                    class="internalDFN"
                                                    id="ref-for-dfn-attempt-to-resume-playback-if-necessary-2">Attempt
                                                    to Resume Playback If Necessary</a> アルゴリズムを実行します。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        <a data-link-type="idl" href="#dom-htmlmediaelement-mediakeys"
                                            class="internalDFN"
                                            id="ref-for-dom-htmlmediaelement-mediakeys-7"><code>mediaKeys</code></a> 属性を
                                        <var>mediaKeys</var> に設定します。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        このオブジェクトの <var>attaching media keys</var> 値を false にします。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <var>promise</var> を <code>undefined</code> で解決します。
                                    </p>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                <var>promise</var> を返します。
                            </p>
                        </li>
                    </ol>
                </dd>
            </dl>
        </section>
        <section id="mediaencryptedevent">
            <div class="header-wrapper">
                <h3 id="x7-3-mediaencryptedevent"><bdi class="secno">7.3 </bdi>
                    <a href="#dom-mediaencryptedevent" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-mediaencryptedevent-1"><code>MediaEncryptedEvent</code></a>
                </h3><a class="self-link" href="#mediaencryptedevent" aria-label="Permalink for Section 7.3"></a>
            </div>

            <p>
                <code>MediaEncryptedEvent</code> オブジェクトは <a data-link-type="idl" data-lt="encrypted"
                    href="#dfn-encrypted" class="internalDFN"
                    id="ref-for-dfn-encrypted-5"><code><code>encrypted</code></code></a> イベントで使用されます。
            </p>
            <pre class="idl def" id="webidl-1395593112"><span class="idlHeader"><a class="self-link" href="#webidl-1395593112">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-mediaencryptedevent" data-title="MediaEncryptedEvent">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" id="dom-mediaencryptedevent" data-idl="interface" data-title="MediaEncryptedEvent" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>MediaEncryptedEvent</code></dfn> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#event">Event</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-mediaencryptedevent-constructor-type-eventinitdict" data-title="constructor" data-dfn-for="MediaEncryptedEvent">
    <dfn data-export="" data-dfn-type="constructor" id="dom-mediaencryptedevent-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="MediaEncryptedEvent" data-lt="constructor()|constructor(type)|constructor(type, eventInitDict)" data-local-lt="MediaEncryptedEvent.constructor|MediaEncryptedEvent.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-mediaencryptedeventinit" class="internalDFN" id="ref-for-dom-mediaencryptedeventinit-1"><code>MediaEncryptedEventInit</code></a></span> <span class="idlParamName">eventInitDict</span> = {});</span><span data-idl="" class="idlAttribute" id="idl-def-mediaencryptedevent-initdatatype" data-title="initDataType" data-dfn-for="MediaEncryptedEvent">
    readonly        attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span>    <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediaencryptedevent-initdatatype" id="ref-for-dom-mediaencryptedevent-initdatatype-1"><code>initDataType</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediaencryptedevent-initdata" data-title="initData" data-dfn-for="MediaEncryptedEvent">
    readonly        attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediaencryptedevent-initdata" id="ref-for-dom-mediaencryptedevent-initdata-2"><code>initData</code></a>;</span>
};</span></code></pre>
            <section id="attributes-4">
                <div class="header-wrapper">
                    <h4 id="x7-3-1-attributes"><bdi class="secno">7.3.1 </bdi>
                        属性
                    </h4><a class="self-link" href="#attributes-4" aria-label="Permalink for Section 7.3.1"></a>
                </div>

                <dl class="attributes" data-dfn-for="MediaEncryptedEvent">
                    <dt>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-mediaencryptedevent-initdatatype"
                            data-idl="attribute" data-title="initDataType" data-dfn-for="MediaEncryptedEvent"
                            data-type="DOMString" data-lt="initDataType"
                            data-local-lt="MediaEncryptedEvent.initDataType" tabindex="0"
                            aria-haspopup="dialog"><code>initDataType</code></dfn> 型 <a data-link-type="interface"
                            data-lt="DOMString"
                            href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>、readonly
                    </dt>
                    <dd>
                        このイベントに含まれる <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data-type"
                            class="internalDFN" id="ref-for-dfn-initialization-data-type-6">Initialization Data Type</a>
                        を示します。<a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                            id="ref-for-dfn-initialization-data-14">Initialization Data</a> は <a data-link-type="idl"
                            href="#dom-mediaencryptedevent-initdata" class="internalDFN"
                            id="ref-for-dom-mediaencryptedevent-initdata-3"><code>initData</code></a> 属性に格納されています。
                    </dd>
                    <dt>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-mediaencryptedevent-initdata"
                            data-idl="attribute" data-title="initData" data-dfn-for="MediaEncryptedEvent"
                            data-type="ArrayBuffer" data-lt="initData" data-local-lt="MediaEncryptedEvent.initData"
                            tabindex="0" aria-haspopup="dialog"><code>initData</code></dfn> 型 <a
                            data-link-type="interface" data-lt="ArrayBuffer"
                            href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a>、readonly、nullable
                    </dt>
                    <dd>
                        このイベントの <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                            id="ref-for-dfn-initialization-data-15">Initialization Data</a>。
                    </dd>
                </dl>
            </section>
            <section id="mediaencryptedeventinit">
                <div class="header-wrapper">
                    <h4 id="x7-3-2-mediaencryptedeventinit"><bdi class="secno">7.3.2 </bdi>
                        <dfn data-export="" data-dfn-type="dictionary" id="dom-mediaencryptedeventinit"
                            data-idl="dictionary" data-title="MediaEncryptedEventInit" data-dfn-for="" tabindex="0"
                            aria-haspopup="dialog"><code>MediaEncryptedEventInit</code></dfn>
                    </h4><a class="self-link" href="#mediaencryptedeventinit"
                        aria-label="Permalink for Section 7.3.2"></a>
                </div>

                <pre class="idl def" id="webidl-51354785"><span class="idlHeader"><a class="self-link" href="#webidl-51354785">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-mediaencryptedeventinit" data-title="MediaEncryptedEventInit">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-mediaencryptedeventinit" id="ref-for-dom-mediaencryptedeventinit-2"><code>MediaEncryptedEventInit</code></a> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a></span> {<span data-idl="" class="idlMember" id="idl-def-mediaencryptedeventinit-initdatatype" data-title="initDataType" data-dfn-for="MediaEncryptedEventInit"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span>    <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediaencryptedeventinit-initdatatype" id="ref-for-dom-mediaencryptedeventinit-initdatatype-1"><code>initDataType</code></a> = "";</span><span data-idl="" class="idlMember" id="idl-def-mediaencryptedeventinit-initdata" data-title="initData" data-dfn-for="MediaEncryptedEventInit"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediaencryptedeventinit-initdata" id="ref-for-dom-mediaencryptedeventinit-initdata-1"><code>initData</code></a> = null;</span>
};</span></code></pre>
                <section id="dictionary-mediaencryptedeventinit-members">
                    <div class="header-wrapper">
                        <h5 id="x7-3-2-1-dictionary-mediaencryptedeventinit-members"><bdi class="secno">7.3.2.1 </bdi>
                            辞書 <a class="idlType internalDFN" href="#dom-mediaencryptedeventinit" data-link-type="idl"
                                id="ref-for-dom-mediaencryptedeventinit-3"><code>MediaEncryptedEventInit</code></a>
                            のメンバー
                        </h5><a class="self-link" href="#dictionary-mediaencryptedeventinit-members"
                            aria-label="Permalink for Section 7.3.2.1"></a>
                    </div>

                    <dl class="dictionary-members" data-dfn-for="MediaEncryptedEventInit">
                        <dt>
                            <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediaencryptedeventinit-initdatatype" data-idl="field" data-title="initDataType" data-dfn-for="MediaEncryptedEventInit" data-type="DOMString" tabindex="0" aria-haspopup="dialog">initDataType</dfn></code>
                            型 <a data-link-type="interface" data-lt="DOMString"
                                href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>、
                            デフォルト値 <code>""</code>
                        </dt>
                        <dd>
                            <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data-type" class="internalDFN"
                                id="ref-for-dfn-initialization-data-type-7">Initialization Data Type</a>。
                        </dd>
                        <dt>
                            <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediaencryptedeventinit-initdata" data-idl="field" data-title="initData" data-dfn-for="MediaEncryptedEventInit" data-type="ArrayBuffer" tabindex="0" aria-haspopup="dialog">initData</dfn></code>
                            型 <a data-link-type="interface" data-lt="ArrayBuffer"
                                href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a>、
                            nullable、デフォルト値 <code>null</code>
                        </dt>
                        <dd>
                            <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                                id="ref-for-dfn-initialization-data-16">Initialization Data</a>。
                        </dd>
                    </dl>
                </section>
            </section>
        </section>
        <section id="htmlmediaelement-events" class="informative">
            <div class="header-wrapper">
                <h3 id="x7-4-event-summary"><bdi class="secno">7.4 </bdi>
                    イベント概要
                </h3><a class="self-link" href="#htmlmediaelement-events" aria-label="Permalink for Section 7.4"></a>
            </div>
            <p><em>この節は非規範的です。</em></p>

            <table class="old-table">
                <thead>
                    <tr>
                        <th>
                            イベント名
                        </th>
                        <th>
                            インターフェース
                        </th>
                        <th>
                            発生条件
                        </th>
                        <th>
                            前提条件
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <code><dfn id="dfn-encrypted" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">encrypted</dfn></code>
                        </td>
                        <td>
                            <a data-link-type="idl" data-lt="MediaEncryptedEvent" href="#dom-mediaencryptedevent"
                                class="internalDFN"
                                id="ref-for-dom-mediaencryptedevent-2"><code>MediaEncryptedEvent</code></a>
                        </td>
                        <td>
                            ユーザーエージェントが <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data"
                                class="internalDFN" id="ref-for-dfn-initialization-data-17">Initialization Data</a> を <a
                                data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/media.html#media-data">media data</a>
                            で検出したとき。
                        </td>
                        <td>
                            要素の <a data-link-type="attribute"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-readystate"><code>readyState</code></a>
                            が
                            <a data-link-type="const"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_metadata"><code>HAVE_METADATA</code></a>
                            以上であること。
                            <div class="note" role="note" id="issue-container-generatedID-102">
                                <div role="heading" class="note-title marker" id="h-note-102" aria-level="4">
                                    <span>注</span>
                                </div>
                                <p class="">
                                    要素が再生中または再生済みの場合もあり得ます。
                                </p>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code><dfn id="dfn-waitingforkey" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">waitingforkey</dfn></code>
                        </td>
                        <td>
                            <a data-link-type="interface" data-lt="Event"
                                href="https://dom.spec.whatwg.org/#event"><code>Event</code></a>
                        </td>
                        <td>
                            再生が鍵待ちでブロックされている。
                        </td>
                        <td>
                            <a data-link-type="attribute"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-readystate"><code>readyState</code></a>
                            が
                            <a data-link-type="const"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_current_data"><code>HAVE_CURRENT_DATA</code></a>
                            以下であること。
                            要素の <var>playback blocked waiting
                                for key</var> の値が新たに <code>true</code> になったとき。
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section id="htmlmediaelement-algorithms">
            <div class="header-wrapper">
                <h3 id="x7-5-algorithms"><bdi class="secno">7.5 </bdi>
                    アルゴリズム
                </h3><a class="self-link" href="#htmlmediaelement-algorithms"
                    aria-label="Permalink for Section 7.5"></a>
            </div>

            <section id="media-may-contain-encrypted-blocks">
                <div class="header-wrapper">
                    <h4 id="x7-5-1-media-data-may-contain-encrypted-blocks"><bdi class="secno">7.5.1 </bdi>
                        Media Data May Contain Encrypted Blocks
                    </h4><a class="self-link" href="#media-may-contain-encrypted-blocks"
                        aria-label="Permalink for Section 7.5.1"></a>
                </div>

                <p>
                    「Media Data May Contain Encrypted Blocks」アルゴリズムは、ユーザーエージェントがメディアデータを再生する前に <a data-link-type="idl"
                        data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                        id="ref-for-dom-mediakeys-33"><code>MediaKeys</code></a> オブジェクトの指定を要求する場合に再生を一時停止します。
                    このアルゴリズムを実行する要求には、ターゲットの <a data-link-type="idl" data-lt="HTMLMediaElement"
                        href="#dom-htmlmediaelement" class="internalDFN"
                        id="ref-for-dom-htmlmediaelement-14"><code>HTMLMediaElement</code></a> オブジェクトが含まれます。
                </p>
                <p>
                    次の手順を実行します:
                </p>
                <ol>
                    <li>
                        <p>
                            <var>media element</var> を指定された <a data-link-type="idl" data-lt="HTMLMediaElement"
                                href="#dom-htmlmediaelement" class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-15"><code>HTMLMediaElement</code></a> オブジェクトとします。
                        </p>
                    </li>
                    <li>
                        <p>
                            もし <var>media element</var> の <a data-link-type="idl" href="#dom-htmlmediaelement-mediakeys"
                                class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-mediakeys-8"><code>mediaKeys</code></a> 属性が null
                            であり、実装が暗号化されている可能性のある <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/media.html#media-data">media data</a>
                            のデコード前に <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys"
                                class="internalDFN" id="ref-for-dom-mediakeys-34"><code>MediaKeys</code></a>
                            オブジェクトの指定を要求する場合は、次の手順を実行します:
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-103">
                            <div role="heading" class="note-title marker" id="h-note-103" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                これらの手順は、アプリケーションが <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/media.html#media-data">media data</a>
                                を提供した後に <a data-link-type="idl" data-lt="setMediaKeys()"
                                    href="#dom-htmlmediaelement-setmediakeys" class="internalDFN"
                                    id="ref-for-dom-htmlmediaelement-setmediakeys-3"><code>setMediaKeys</code></a><code>()</code>
                                を呼んで <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys"
                                    class="internalDFN" id="ref-for-dom-mediakeys-35"><code>MediaKeys</code></a>
                                オブジェクトを提供するような場合に到達することがあります。<a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                    class="internalDFN" id="ref-for-dfn-cdm-83">CDM</a>
                                の選択はパイプラインやデコーダに影響を与える可能性があるため、一部の実装では <a data-link-type="dfn|abstract-op"
                                    href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-84">CDM</a> が <a
                                    data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                                    id="ref-for-dom-mediakeys-36"><code>MediaKeys</code></a> として <a data-link-type="idl"
                                    data-lt="setMediaKeys()" href="#dom-htmlmediaelement-setmediakeys"
                                    class="internalDFN"
                                    id="ref-for-dom-htmlmediaelement-setmediakeys-4"><code>setMediaKeys</code></a><code>()</code>
                                に渡されるまで、暗号化ブロックを含む可能性のあるメディアデータの再生を遅延させることがあります。
                            </p>
                        </div>
                        <ol>
                            <li>
                                <p>
                                    <a data-link-type="dfn|abstract-op" href="#dfn-wait-for-key" class="internalDFN"
                                        id="ref-for-dfn-wait-for-key-2">Wait for Key</a> アルゴリズムを <var>media
                                        element</var> に対して実行します。
                                </p>
                            </li>
                            <li>
                                <p>
                                    再生を再開するためのシグナルを待ちます。
                                </p>
                            </li>
                        </ol>
                    </li>
                </ol>
            </section>
            <section id="initdata-encountered">
                <div class="header-wrapper">
                    <h4 id="x7-5-2-initialization-data-encountered"><bdi class="secno">7.5.2 </bdi>
                        <dfn class="export" data-export="" id="dfn-initialization-data-encountered" tabindex="0"
                            aria-haspopup="dialog" data-dfn-type="dfn">Initialization Data Encountered</dfn>
                    </h4><a class="self-link" href="#initdata-encountered" aria-label="Permalink for Section 7.5.2"></a>
                </div>

                <p>
                    「Initialization Data Encountered」アルゴリズムは、メディアデータ中で発見された <a data-link-type="dfn" data-lt="encrypted"
                        href="#dfn-encrypted" class="internalDFN"
                        id="ref-for-dfn-encrypted-6"><code><code>encrypted</code></code></a> イベントをキューします。
                    このアルゴリズムを実行する要求には、ターゲットの <a data-link-type="idl" data-lt="HTMLMediaElement"
                        href="#dom-htmlmediaelement" class="internalDFN"
                        id="ref-for-dom-htmlmediaelement-16"><code>HTMLMediaElement</code></a> オブジェクトが含まれます。
                </p>
                <p>
                    次の手順を実行します:
                </p>
                <ol>
                    <li>
                        <p>
                            <var>media element</var> を指定された <a data-link-type="idl" data-lt="HTMLMediaElement"
                                href="#dom-htmlmediaelement" class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-17"><code>HTMLMediaElement</code></a> オブジェクトとします。
                        </p>
                    </li>
                    <li>
                        <p>
                            <var>initDataType</var> を空文字列とします。
                        </p>
                    </li>
                    <li>
                        <p>
                            <var>initData</var> を null とします。
                        </p>
                    </li>
                    <li>
                        <p>
                            もし <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/media.html#media-data">media data</a> が <a
                                data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/urls-and-fetching.html#cors-same-origin">CORS-same-origin</a>
                            であり、かつ <em>混在コンテンツではない</em> 場合、次の手順を実行します:
                        </p>
                        <ol>
                            <li>
                                <p>
                                    <var>initDataType</var> を、発見された Initialization Data の <a
                                        data-link-type="dfn|abstract-op" href="#dfn-initialization-data-type"
                                        class="internalDFN" id="ref-for-dfn-initialization-data-type-8">Initialization
                                        Data Type</a> を表す文字列とします。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <var>initData</var> を Initialization Data とします。
                                </p>
                            </li>
                        </ol>
                        <div class="note" role="note" id="issue-container-generatedID-104">
                            <div role="heading" class="note-title marker" id="h-note-104" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                メディア要素は「Upgradeable Content」を許可する場合がありますが、そのようなメディアデータからの Initialization Data
                                をアプリケーションに公開してはなりません（<em class="rfc2119">MUST NOT</em>）。
                            </p>
                        </div>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキュー</a>して、バブリングせずキャンセル不可の名前が
                            <a data-link-type="idl" data-lt="encrypted" href="#dfn-encrypted" class="internalDFN"
                                id="ref-for-dfn-encrypted-7"><code><code>encrypted</code></code></a> というイベントを <a
                                href="#dom-mediaencryptedevent" class="internalDFN" data-link-type="idl"
                                id="ref-for-dom-mediaencryptedevent-3"><code>MediaEncryptedEvent</code></a>
                            インターフェースを使って作成し、<var>type</var> 属性を <code>encrypted</code> に、<var>isTrusted</var> を
                            <code>true</code> に初期化して <var>media element</var> 上でディスパッチします。
                        </p>
                        <p>
                            イベントインターフェース <a href="#dom-mediaencryptedevent" class="internalDFN" data-link-type="idl"
                                id="ref-for-dom-mediaencryptedevent-4"><code>MediaEncryptedEvent</code></a> は次を持ちます:
                        </p>
                        <ul style="list-style-type:none">
                            <li><a data-link-type="idl" href="#dom-mediaencryptedevent-initdatatype" class="internalDFN"
                                    id="ref-for-dom-mediaencryptedevent-initdatatype-2"><code>initDataType</code></a> =
                                <var>initDataType</var><br>
                                <br>
                                <a data-link-type="idl" href="#dom-mediaencryptedevent-initdata" class="internalDFN"
                                    id="ref-for-dom-mediaencryptedevent-initdata-4"><code>initData</code></a> =
                                <var>initData</var>
                            </li>
                        </ul>
                        <div class="note" role="note" id="issue-container-generatedID-105">
                            <div role="heading" class="note-title marker" id="h-note-105" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                <a data-link-type="attribute"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-readystate"><code>readyState</code></a>
                                は変更されず、アルゴリズムは中止されません。 このイベントは単に情報を提供するものです。
                            </p>
                        </div>
                        <div class="note" role="note" id="issue-container-generatedID-106">
                            <div role="heading" class="note-title marker" id="h-note-106" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                <a data-link-type="idl" href="#dom-mediaencryptedevent-initdata" class="internalDFN"
                                    id="ref-for-dom-mediaencryptedevent-initdata-5"><code>initData</code></a>
                                属性は、メディアデータが <em>CORS-same-origin でない</em> か、または <em>混在コンテンツ</em> である場合は null
                                になります。アプリケーションは代替ソースから Initialization Data を取得することができます。
                            </p>
                        </div>
                    </li>
                </ol>
            </section>
            <section id="encrypted-block-encountered">
                <div class="header-wrapper">
                    <h4 id="x7-5-3-encrypted-block-encountered"><bdi class="secno">7.5.3 </bdi>
                        <dfn class="export" data-export="" id="dfn-encrypted-block-encountered" tabindex="0"
                            aria-haspopup="dialog" data-dfn-type="dfn">Encrypted Block Encountered</dfn>
                    </h4><a class="self-link" href="#encrypted-block-encountered"
                        aria-label="Permalink for Section 7.5.3"></a>
                </div>

                <p>
                    「Encrypted Block Encountered」アルゴリズムは、復号のために暗号化されたメディアデータのブロックをキューに入れ、可能であれば復号を試みます。
                    このアルゴリズムを実行する要求には、ターゲットの <a data-link-type="idl" data-lt="HTMLMediaElement"
                        href="#dom-htmlmediaelement" class="internalDFN"
                        id="ref-for-dom-htmlmediaelement-18"><code>HTMLMediaElement</code></a> オブジェクトが含まれます。
                </p>
                <p>
                    次の手順を実行します:
                </p>
                <ol>
                    <li>
                        <p>
                            <var>media element</var> を指定された <a data-link-type="idl" data-lt="HTMLMediaElement"
                                href="#dom-htmlmediaelement" class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-19"><code>HTMLMediaElement</code></a> オブジェクトとします。
                        </p>
                    </li>
                    <li>
                        <p>
                            <var>block</var> を暗号化されたメディアデータのブロックとします。
                        </p>
                    </li>
                    <li>
                        <p>
                            <var>block</var> を <var>media element</var> の <var>encrypted block queue</var> の末尾に追加します。
                        </p>
                    </li>
                    <li>
                        <p>
                            もし <var>media element</var> の <var>decryption blocked waiting for key</var> 値が
                            <code>false</code> であれば、<a data-link-type="dfn|abstract-op" href="#dfn-attempt-to-decrypt"
                                class="internalDFN" id="ref-for-dfn-attempt-to-decrypt-1">Attempt to Decrypt</a>
                            アルゴリズムを実行します。
                        </p>

                    </li>
                </ol>
            </section>
            <section id="attempt-to-decrypt">
                <div class="header-wrapper">
                    <h4 id="x7-5-4-attempt-to-decrypt"><bdi class="secno">7.5.4 </bdi>
                        <dfn id="dfn-attempt-to-decrypt" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Attempt
                            to Decrypt</dfn>
                    </h4><a class="self-link" href="#attempt-to-decrypt" aria-label="Permalink for Section 7.5.4"></a>
                </div>

                <p>
                    「Attempt to Decrypt」アルゴリズムは、復号のためにキューに入れられているメディアデータの復号を試みます。 このアルゴリズムを実行する要求には、ターゲットの <a
                        data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement" class="internalDFN"
                        id="ref-for-dom-htmlmediaelement-20"><code>HTMLMediaElement</code></a> オブジェクトが含まれます。
                </p>
                <p>
                    次の手順を実行します:
                </p>
                <ol>
                    <li>
                        <p>
                            <var>media element</var> を指定された <a data-link-type="idl" data-lt="HTMLMediaElement"
                                href="#dom-htmlmediaelement" class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-21"><code>HTMLMediaElement</code></a> オブジェクトとします。
                        </p>
                    </li>
                    <li>
                        <p>
                            もし <var>media element</var> の <var>encrypted block queue</var> が空であれば、この手順を中止します。
                        </p>
                    </li>
                    <li>
                        <p>
                            もし <var>media element</var> の <a data-link-type="idl" href="#dom-htmlmediaelement-mediakeys"
                                class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-mediakeys-9"><code>mediaKeys</code></a> 属性が null
                            でない場合、次の手順を実行します:
                        </p>
                        <ol>
                            <li>
                                <p>
                                    <var>media keys</var> をその属性が参照する <a data-link-type="idl" data-lt="MediaKeys"
                                        href="#dom-mediakeys" class="internalDFN"
                                        id="ref-for-dom-mediakeys-37"><code>MediaKeys</code></a> オブジェクトとします。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <var>cdm</var> を <var>media keys</var> の <var>cdm instance</var> 値で表される <a
                                        data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                        id="ref-for-dfn-cdm-85">CDM</a> インスタンスとします。
                                </p>
                            </li>
                            <li>
                                <p>
                                    もし <var>cdm</var> が何らかの理由でもはや使用不可能であれば、次の手順を実行します:
                                </p>
                                <ol>
                                    <li>
                                        <p>
                                            <a href="https://html.spec.whatwg.org/multipage/#fatal-decode-error">media
                                                data is corrupted</a> の手順を <a data-link-type="dfn"
                                                href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">resource
                                                fetch algorithm</a> の対応箇所で実行します。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            <a data-link-type="dfn|abstract-op" href="#dfn-cdm-unavailable"
                                                class="internalDFN" id="ref-for-dfn-cdm-unavailable-3">CDM
                                                Unavailable</a> アルゴリズムを、<var>media keys</var>
                                            に対して、ハードウェアコンテキストのリセットの場合は理由を "<a data-link-type="idl"
                                                href="#dom-mediakeysessionclosedreason-hardware-context-reset"
                                                class="internalDFN"
                                                id="ref-for-dom-mediakeysessionclosedreason-hardware-context-reset-3"><code>hardware-context-reset</code></a>"、それ以外の場合は
                                            "<a data-link-type="idl"
                                                href="#dom-mediakeysessionclosedreason-internal-error"
                                                class="internalDFN"
                                                id="ref-for-dom-mediakeysessionclosedreason-internal-error-3"><code>internal-error</code></a>"
                                            として実行します。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            この手順を中止します。
                                        </p>
                                    </li>
                                </ol>
                            </li>
                            <li>
                                <p>
                                    もし <var>media keys</var> によって作成された <a data-link-type="idl" data-lt="MediaKeySession"
                                        href="#dom-mediakeysession" class="internalDFN"
                                        id="ref-for-dom-mediakeysession-41"><code>MediaKeySession</code></a>
                                    が少なくとも1つ存在し、それが <a data-link-type="dfn|abstract-op" href="#dfn-closed"
                                        class="internalDFN" id="ref-for-dfn-closed-10">closed</a> でない場合、次の手順を実行します:
                                </p>
                                <div class="note" role="note" id="issue-container-generatedID-107">
                                    <div role="heading" class="note-title marker" id="h-note-107" aria-level="5">
                                        <span>注</span>
                                    </div>
                                    <p class="">
                                        このチェックは、<var>cdm</var> の読み込みが完了し、対応する鍵が利用可能である前提条件を保証するためのものです。
                                    </p>
                                </div>
                                <ol>
                                    <li>
                                        <p>
                                            <var>block</var> を <var>media element</var> の <var>encrypted block
                                                queue</var> の先頭のエントリとします。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            <var>block key ID</var> を <var>block</var> の key ID とします。
                                        </p>
                                        <div class="note" role="note" id="issue-container-generatedID-108">
                                            <div role="heading" class="note-title marker" id="h-note-108"
                                                aria-level="5"><span>注</span></div>
                                            <p class="">
                                                key ID は一般にコンテナによって指定されます。
                                            </p>
                                        </div>
                                    </li>
                                    <li>
                                        <p>
                                            <var>cdm</var> を使用して次の手順を実行します:
                                        </p>
                                        <ol>
                                            <li>
                                                <p>
                                                    <var>available keys</var> を、<var>media keys</var>
                                                    によって作成されたセッション内の鍵の和集合とします。
                                                </p>
                                            </li>
                                            <li>
                                                <p>
                                                    <var>block key</var> を null とします。
                                                </p>
                                            </li>
                                            <li>
                                                <p>
                                                    もし <var>available keys</var> の中に <var>block key ID</var> に対応し、かつ <a
                                                        data-link-type="dfn|abstract-op"
                                                        href="#dfn-usable-for-decryption" class="internalDFN"
                                                        id="ref-for-dfn-usable-for-decryption-8">usable for
                                                        decryption</a> なものがあれば、当該鍵を含む <a data-link-type="idl"
                                                        data-lt="MediaKeySession" href="#dom-mediakeysession"
                                                        class="internalDFN"
                                                        id="ref-for-dom-mediakeysession-42"><code>MediaKeySession</code></a>
                                                    オブジェクトを <var>session</var> とし、当該鍵を <var>block key</var> とします。
                                                </p>
                                                <div class="note" role="note" id="issue-container-generatedID-109">
                                                    <div role="heading" class="note-title marker" id="h-note-109"
                                                        aria-level="5"><span>注</span></div>
                                                    <p class="">
                                                        複数のセッションに対して <var>block key ID</var> に対応する <a
                                                            data-link-type="dfn|abstract-op"
                                                            href="#dfn-usable-for-decryption" class="internalDFN"
                                                            id="ref-for-dfn-usable-for-decryption-9">usable for
                                                            decryption</a> な鍵が含まれている場合、どのセッションと鍵を使用するかは <a
                                                            data-link-type="dfn|abstract-op" href="#dfn-key-system"
                                                            class="internalDFN" id="ref-for-dfn-key-system-33">Key
                                                            System</a> に依存します。
                                                    </p>
                                                </div>
                                            </li>
                                            <li>
                                                <p>
                                                    もし前のステップの実行によって <var>available keys</var> の状態が変更された場合、影響を受けた各
                                                    <var>session</var> に対して、すべての <a data-link-type="dfn|abstract-op"
                                                        href="#dfn-decryption-key-id" class="internalDFN"
                                                        id="ref-for-dfn-decryption-key-id-13">key ID</a> とそれに対応する適切な <a
                                                        data-link-type="idl" data-lt="MediaKeyStatus"
                                                        href="#dom-mediakeystatus" class="internalDFN"
                                                        id="ref-for-dom-mediakeystatus-19"><code>MediaKeyStatus</code></a>
                                                    値を渡して、<a data-link-type="dfn|abstract-op"
                                                        href="#dfn-update-key-statuses" class="internalDFN"
                                                        id="ref-for-dfn-update-key-statuses-8">Update Key Statuses</a>
                                                    アルゴリズムをキューするタスクを起動します。
                                                </p>
                                            </li>
                                            <li>
                                                <p>
                                                    もし <var>block key</var> が null でない場合、次の手順を実行します:
                                                </p>
                                                <ol>
                                                    <li>
                                                        <p>
                                                            <var>cdm</var> を使って <var>block</var> を <var>block key</var>
                                                            で復号します。
                                                        </p>
                                                    </li>
                                                    <li>
                                                        <p>
                                                            以下のリストの最初に一致する条件に従って処理します:
                                                        </p>
                                                        <dl class="switch">
                                                            <dt>
                                                                もし復号が失敗した場合
                                                            </dt>
                                                            <dd>
                                                                <ol>
                                                                    <li>
                                                                        <p>
                                                                            <a
                                                                                href="https://html.spec.whatwg.org/multipage/#fatal-decode-error">media
                                                                                data is corrupted</a> の手順を <a
                                                                                data-link-type="dfn"
                                                                                href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">resource
                                                                                fetch algorithm</a> の対応箇所で実行します。
                                                                        </p>
                                                                    </li>
                                                                    <li>
                                                                        <p>
                                                                            もし <var>cdm</var> がもはや使用不可能であれば、<a
                                                                                data-link-type="dfn|abstract-op"
                                                                                href="#dfn-cdm-unavailable"
                                                                                class="internalDFN"
                                                                                id="ref-for-dfn-cdm-unavailable-4">CDM
                                                                                Unavailable</a> アルゴリズムを <var>media
                                                                                keys</var> に対して、ハードウェアコンテキストリセットの場合は "<a
                                                                                data-link-type="idl"
                                                                                href="#dom-mediakeysessionclosedreason-hardware-context-reset"
                                                                                class="internalDFN"
                                                                                id="ref-for-dom-mediakeysessionclosedreason-hardware-context-reset-4"><code>hardware-context-reset</code></a>"、それ以外は
                                                                            "<a data-link-type="idl"
                                                                                href="#dom-mediakeysessionclosedreason-internal-error"
                                                                                class="internalDFN"
                                                                                id="ref-for-dom-mediakeysessionclosedreason-internal-error-4"><code>internal-error</code></a>"
                                                                            の理由で実行します。
                                                                        </p>
                                                                    </li>
                                                                    <li>
                                                                        <p>
                                                                            この手順を中止します。
                                                                        </p>
                                                                    </li>
                                                                </ol>
                                                            </dd>
                                                            <dt>
                                                                それ以外
                                                            </dt>
                                                            <dd>
                                                                <ol>
                                                                    <li>
                                                                        <p>
                                                                            <var>block</var> を <var>media element</var>
                                                                            の <var>encrypted block queue</var>
                                                                            の先頭から削除します。
                                                                        </p>
                                                                    </li>
                                                                    <li>
                                                                        <p>
                                                                            復号済みブロックを通常どおり処理します。
                                                                        </p>
                                                                        <div class="note" role="note"
                                                                            id="issue-container-generatedID-110">
                                                                            <div role="heading"
                                                                                class="note-title marker"
                                                                                id="h-note-110" aria-level="5">
                                                                                <span>注</span>
                                                                            </div>
                                                                            <p class="">
                                                                                つまり、そのブロックをデコードします。
                                                                            </p>
                                                                        </div>
                                                                    </li>
                                                                    <li>
                                                                        <p>
                                                                            このアルゴリズムの先頭に戻ります。
                                                                        </p>
                                                                    </li>
                                                                </ol>
                                                            </dd>
                                                        </dl>
                                                        <div class="note" role="note"
                                                            id="issue-container-generatedID-111">
                                                            <div role="heading" class="note-title marker"
                                                                id="h-note-111" aria-level="5"><span>注</span></div>
                                                            <p class="">
                                                                すべての復号の問題（例:
                                                                間違った鍵を使うなど）がここでの復号失敗を引き起こすわけではありません。そのような場合、ここではエラーが発生しないが、デコード中にエラーが発生する可能性があります。
                                                            </p>
                                                        </div>
                                                    </li>
                                                </ol>
                                                <div class="note" role="note" id="issue-container-generatedID-112">
                                                    <div role="heading" class="note-title marker" id="h-note-112"
                                                        aria-level="5"><span>注</span></div>
                                                    <p class="">
                                                        そうでなければ、いかなるセッションにも <var>block key ID</var> の鍵が存在しないため、処理を継続します。
                                                    </p>
                                                </div>
                                            </li>
                                        </ol>
                                    </li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li>
                        <p>
                            <var>media element</var> の <var>decryption blocked waiting for key</var> 値を
                            <code>true</code> に設定します。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-113">
                            <div role="heading" class="note-title marker" id="h-note-113" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                この手順は、<var>block</var> に対して <a data-link-type="dfn|abstract-op"
                                    href="#dfn-usable-for-decryption" class="internalDFN"
                                    id="ref-for-dfn-usable-for-decryption-10">usable for decryption</a> な鍵がない場合に到達します。
                            </p>
                        </div>
                        <div class="note" role="note" id="issue-container-generatedID-114">
                            <div role="heading" class="note-title marker" id="h-note-114" aria-level="5">
                                <span>注</span>
                            </div>
                            <div class="">
                                <p>
                                    ユーザーエージェントが復号できないブロックに先行するブロックを（可能な限り、例えば完全なビデオフレーム全てなど）レンダリングした後、<a
                                        data-link-type="dfn|abstract-op" href="#dfn-wait-for-key" class="internalDFN"
                                        id="ref-for-dfn-wait-for-key-3">Wait for Key</a> アルゴリズムを実行します。
                                </p>
                                <p>
                                    このアルゴリズムをここで直接実行しないのは、実装が現在の再生位置より先にメディアデータを復号・デコードすることを許容し、その可視的挙動に影響を与えないようにするためです。
                                </p>
                            </div>
                        </div>
                    </li>
                </ol>
                <div class="note" role="note" id="issue-container-generatedID-115">
                    <div role="heading" class="note-title marker" id="h-note-115" aria-level="5"><span>注</span></div>
                    <div class="">
                        <p>
                            フレームベースの暗号化の場合、メディア要素がリソース取得アルゴリズムの一部としてフレームのデコードを試みるときに、以下のように実装できることがあります:
                        </p>
                        <ol>
                            <li>
                                <p>
                                    <var>encrypted</var> を false にします。
                                </p>
                            </li>
                            <li>
                                <p>
                                    フレームが暗号化されているかどうかを検出します。
                                </p>
                                <dl class="switch">
                                    <dt>
                                        フレームが暗号化されている場合
                                    </dt>
                                    <dd>
                                        上記の手順を実行します。
                                    </dd>
                                    <dt>
                                        それ以外
                                    </dt>
                                    <dd>
                                        続行します。
                                    </dd>
                                </dl>
                            </li>
                            <li>
                                <p>
                                    フレームをデコードします。
                                </p>
                            </li>
                            <li>
                                <p>
                                    レンダリングのためにフレームを提供します。
                                </p>
                            </li>
                        </ol>
                    </div>
                </div>
            </section>
            <section id="wait-for-key">
                <div class="header-wrapper">
                    <h4 id="x7-5-5-wait-for-key"><bdi class="secno">7.5.5 </bdi>
                        <dfn id="dfn-wait-for-key" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Wait for
                            Key</dfn>
                    </h4><a class="self-link" href="#wait-for-key" aria-label="Permalink for Section 7.5.5"></a>
                </div>

                <p>
                    「Wait for Key」アルゴリズムは <a data-link-type="idl" data-lt="waitingforkey" href="#dfn-waitingforkey"
                        class="internalDFN" id="ref-for-dfn-waitingforkey-2"><code><code>waitingforkey</code></code></a>
                    イベントをキューし、<a data-link-type="attribute"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-readystate"><code>readyState</code></a>
                    を更新します。 このアルゴリズムは、<a data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement"
                        class="internalDFN" id="ref-for-dom-htmlmediaelement-22"><code>HTMLMediaElement</code></a>
                    オブジェクトが <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#potentially-playing">potentially
                        playing</a> であり、その <a data-link-type="attribute"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-readystate"><code>readyState</code></a>
                    が <a data-link-type="const"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_future_data"><code>HAVE_FUTURE_DATA</code></a>
                    以上のときにのみ呼び出すべきです。 このアルゴリズムを実行する要求にはターゲットの <a data-link-type="idl" data-lt="HTMLMediaElement"
                        href="#dom-htmlmediaelement" class="internalDFN"
                        id="ref-for-dom-htmlmediaelement-23"><code>HTMLMediaElement</code></a> オブジェクトが含まれます。
                </p>
                <p>
                    次の手順を実行します:
                </p>
                <ol>
                    <li>
                        <p>
                            <var>media element</var> を指定された <a data-link-type="idl" data-lt="HTMLMediaElement"
                                href="#dom-htmlmediaelement" class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-24"><code>HTMLMediaElement</code></a> オブジェクトとします。
                        </p>
                    </li>
                    <li>
                        <p>
                            もし <var>media element</var> の <var>playback blocked waiting for key</var> 値が
                            <code>true</code> であれば、この手順を中止します。
                        </p>
                    </li>
                    <li>
                        <p>
                            <var>media element</var> の <var>playback blocked waiting for key</var> 値を <code>true</code>
                            に設定します。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-116">
                            <div role="heading" class="note-title marker" id="h-note-116" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                上の手順の結果、メディア要素はまだでなければ <a
                                    href="https://html.spec.whatwg.org/multipage/#blocked-media-element">blocked media
                                    element</a> となり得ます。その場合、メディア要素は再生を停止します。
                            </p>
                        </div>
                    </li>
                    <li>
                        <p>
                            以下のリストの最初に一致する条件に従います:
                        </p>
                        <dl class="switch">
                            <dt>
                                もし直近の <a
                                    href="https://html.spec.whatwg.org/multipage/#current-playback-position">current
                                    playback position</a> に対するデータが利用可能である場合
                            </dt>
                            <dd>
                                <p>
                                    <var>media element</var> の <a data-link-type="attribute"
                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-readystate"><code>readyState</code></a>
                                    を <a data-link-type="const"
                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_current_data"><code>HAVE_CURRENT_DATA</code></a>
                                    に設定します。
                                </p>
                            </dd>
                            <dt>
                                それ以外
                            </dt>
                            <dd>
                                <p>
                                    <var>media element</var> の <a data-link-type="attribute"
                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-readystate"><code>readyState</code></a>
                                    を <a data-link-type="const"
                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_metadata"><code>HAVE_METADATA</code></a>
                                    に設定します。
                                </p>
                            </dd>
                        </dl>
                        <div class="note" role="note" id="issue-container-generatedID-117">
                            <div role="heading" class="note-title marker" id="h-note-117" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                言い換えれば、現在の再生位置のビデオフレームやオーディオデータが非暗号化であったり正常に復号されたためにデコード済みであれば <a
                                    data-link-type="attribute"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-readystate"><code>readyState</code></a>
                                を <a data-link-type="const"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_current_data"><code>HAVE_CURRENT_DATA</code></a>
                                に設定します。そうでない場合、または以前はその状態だったが現在はデータが利用できない場合は <a data-link-type="attribute"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-readystate"><code>readyState</code></a>
                                を <a data-link-type="const"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_metadata"><code>HAVE_METADATA</code></a>
                                に設定します。
                            </p>
                        </div>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキュー</a>して、<a
                                data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">イベント発火</a>
                            を行い、名前が <a data-link-type="idl" data-lt="waitingforkey" href="#dfn-waitingforkey"
                                class="internalDFN"
                                id="ref-for-dfn-waitingforkey-3"><code><code>waitingforkey</code></code></a> のイベントを
                            <var>media element</var> に対して発火します。
                        </p>
                    </li>
                    <li>
                        <p>
                            再生を一時停止します。
                        </p>
                    </li>
                </ol>
            </section>
            <section id="resume-playback">
                <div class="header-wrapper">
                    <h4 id="x7-5-6-attempt-to-resume-playback-if-necessary"><bdi class="secno">7.5.6 </bdi>
                        <dfn id="dfn-attempt-to-resume-playback-if-necessary" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">Attempt to Resume Playback If Necessary</dfn>
                    </h4><a class="self-link" href="#resume-playback" aria-label="Permalink for Section 7.5.6"></a>
                </div>

                <p>
                    「Attempt to Resume Playback If Necessary」アルゴリズムは、メディア要素が鍵待ちでブロックされており、必要な鍵が現在 <a
                        data-link-type="dfn|abstract-op" href="#dfn-usable-for-decryption" class="internalDFN"
                        id="ref-for-dfn-usable-for-decryption-11">usable for decryption</a> である場合に再生を再開します。
                    このアルゴリズムを実行する要求には、ターゲットの <a data-link-type="idl" data-lt="HTMLMediaElement"
                        href="#dom-htmlmediaelement" class="internalDFN"
                        id="ref-for-dom-htmlmediaelement-25"><code>HTMLMediaElement</code></a> オブジェクトが含まれます。
                </p>
                <p>
                    次の手順を実行します:
                </p>
                <ol>
                    <li>
                        <p>
                            <var>media element</var> を指定された <a data-link-type="idl" data-lt="HTMLMediaElement"
                                href="#dom-htmlmediaelement" class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-26"><code>HTMLMediaElement</code></a> オブジェクトとします。
                        </p>
                    </li>
                    <li>
                        <p>
                            もし <var>media element</var> の <var>playback blocked waiting for key</var> が
                            <code>false</code> であれば、この手順を中止します。
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-attempt-to-decrypt" class="internalDFN"
                                id="ref-for-dfn-attempt-to-decrypt-2">Attempt to Decrypt</a> アルゴリズムを <var>media
                                element</var> に対して実行します。
                        </p>
                    </li>
                    <li>
                        <p>
                            もしユーザーエージェントが <a
                                href="https://html.spec.whatwg.org/multipage/#current-playback-position">current
                                playback position</a> を再生方向に進めることができるなら:
                        </p>
                        <ol>
                            <li>
                                <p>
                                    <var>media element</var> の <var>decryption blocked waiting for key</var> 値を
                                    <code>false</code> に設定します。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <var>media element</var> の <var>playback blocked waiting for key</var> 値を
                                    <code>false</code> に設定します。
                                </p>
                                <div class="note" role="note" id="issue-container-generatedID-118">
                                    <div role="heading" class="note-title marker" id="h-note-118" aria-level="5">
                                        <span>注</span>
                                    </div>
                                    <p class="">
                                        上の手順の結果、メディア要素はもはや <a
                                            href="https://html.spec.whatwg.org/multipage/#blocked-media-element">blocked
                                            media element</a> でなくなる可能性があり、その結果として再生が再開されることがあります。
                                    </p>
                                </div>
                            </li>
                            <li>
                                <p>
                                    <var>media element</var> の <a data-link-type="attribute"
                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-readystate"><code>readyState</code></a>
                                    を、状況に応じて <a data-link-type="const"
                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_current_data"><code>HAVE_CURRENT_DATA</code></a>、<a
                                        data-link-type="const"
                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_future_data"><code>HAVE_FUTURE_DATA</code></a>、または
                                    <a data-link-type="const"
                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_enough_data"><code>HAVE_ENOUGH_DATA</code></a>
                                    に設定します。
                                </p>
                                <div class="note" role="note" id="issue-container-generatedID-119">
                                    <div role="heading" class="note-title marker" id="h-note-119" aria-level="5">
                                        <span>注</span>
                                    </div>
                                    <div class="">
                                        <p>
                                            <a data-link-type="const"
                                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_current_data"><code>HAVE_CURRENT_DATA</code></a>
                                            より先の状態や <a data-link-type="event"
                                                href="https://html.spec.whatwg.org/multipage/media.html#event-media-canplaythrough">canplaythrough</a>
                                            イベントは、通常、現在の鍵以上の鍵の利用可能性を考慮しない（またはあまり考慮しない）ことに注意してください。
                                        </p>
                                        <p>
                                            ready state の変更は、<a data-link-type="idl" data-lt="HTMLMediaElement"
                                                href="#dom-htmlmediaelement" class="internalDFN"
                                                id="ref-for-dom-htmlmediaelement-27"><code>HTMLMediaElement</code></a>
                                            によるイベントの発火を引き起こすことがあります（詳細は <a
                                                href="https://html.spec.whatwg.org/multipage/#ready-states">こちら</a>
                                            を参照）。
                                        </p>
                                    </div>
                                </div>
                            </li>
                        </ol>
                    </li>
                </ol>
            </section>
        </section>
        <section id="media-element-restrictions" class="informative">
            <div class="header-wrapper">
                <h3 id="x7-6-media-element-restrictions"><bdi class="secno">7.6 </bdi>
                    Media Element Restrictions
                </h3><a class="self-link" href="#media-element-restrictions" aria-label="Permalink for Section 7.6"></a>
            </div>
            <p><em>この節は規範的ではありません。</em></p>

            <p>
                <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-86">CDM</a>
                によって処理されるメディアデータは、通常の方法（例えば <a data-link-type="interface" data-lt="CanvasRenderingContext2D"
                    href="https://html.spec.whatwg.org/multipage/canvas.html#canvasrenderingcontext2d"><code>CanvasRenderingContext2D</code></a>
                の
                <a data-link-type="method" data-lt="drawImage()"
                    href="https://html.spec.whatwg.org/multipage/canvas.html#dom-context-2d-drawimage"><code>drawImage</code></a><code>()</code>
                メソッドや <a data-link-type="interface" data-lt="AudioContext"
                    href="https://www.w3.org/TR/webaudio-1.0/#AudioContext"><code>AudioContext</code></a> の
                <a data-link-type="interface" data-lt="MediaElementAudioSourceNode"
                    href="https://www.w3.org/TR/webaudio-1.0/#MediaElementAudioSourceNode"><code>MediaElementAudioSourceNode</code></a>
                を用いる等）を通じてウェブプラットフォームの API から利用できないことが<em class="rfc2119">MAY</em>あります。
                本仕様はそのようなメディアデータの非利用可能性の条件を定義しませんが、もしメディアデータがそのような API を通じて利用できない場合、これらの API
                はメディアデータがまったく存在しないかのように振る舞うことが<em class="rfc2119">MAY</em>あります。
            </p>
            <p>
                メディアレンダリングが UA によって行われない場合、例えばハードウェアベースのメディアパイプラインの場合、CSS トランスフォーム等の HTML のレンダリング機能のすべてが利用できないことが<em
                    class="rfc2119">MAY</em>あります。典型的な制約の一つとしては、ビデオメディアがウィンドウの辺に平行な辺を持ち、通常の向きに整った矩形領域のみに表示が制限されることが<em
                    class="rfc2119">MAY</em>あります。
            </p>
        </section>
    </section>
    <section id="implementation-requirements">
        <div class="header-wrapper">
            <h2 id="x8-implementation-requirements"><bdi class="secno">8. </bdi>
                Implementation Requirements
            </h2><a class="self-link" href="#implementation-requirements" aria-label="Permalink for Section 8."></a>
        </div>

        <p>
            この節は、アルゴリズムで明示的に扱われていないかもしれない実装要件（ユーザーエージェントおよび <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                class="internalDFN" id="ref-for-dfn-key-system-34">Key Systems</a>、および <a
                data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-87">CDM</a>
            やサーバーを含む）を定義します。ここおよび仕様全体の要件は、<a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                id="ref-for-dfn-cdm-88">CDM</a> がユーザーエージェントの外部にあるか内部に組み込まれているかにかかわらず、すべての実装に適用されます。
        </p>
        <section id="cdm-constraint-requirements">
            <div class="header-wrapper">
                <h3 id="x8-1-cdm-constraints"><bdi class="secno">8.1 </bdi>
                    CDM Constraints
                </h3><a class="self-link" href="#cdm-constraint-requirements"
                    aria-label="Permalink for Section 8.1"></a>
            </div>

            <p>
                ユーザーエージェントの実装者は、<a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-89">CDM</a>
                が、本仕様の機能を用いた保護されたメディアの再生に合理的に必要とされる範囲を超える情報、ストレージ、またはシステム能力へアクセスしないことを<em class="rfc2119">MUST</em>
                確実にしなければなりません。具体的には、<a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-90">CDM</a> は <em class="rfc2119">SHALL NOT</em> 次を行ってはなりません:
            </p>
            <ul>
                <li>
                    <p>
                        本仕様で明示的に許可されている場合を除き、ローカルまたはリモートのネットワークリソースへ直接アクセスすること。
                    </p>
                </li>
                <li>
                    <p>
                        保護されたメディアの再生に合理的に必要とされる場合を除き、ディスクやメモリなどのストレージへアクセスすること。
                    </p>
                </li>
                <li>
                    <p>
                        <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                            id="ref-for-dfn-cdm-91">CDM</a> 状態や <a href="#persistent-state-requirements">persistent
                            data</a> 以外のユーザーデータへアクセスすること。
                    </p>
                </li>
                <li>
                    <p>
                        保護されたメディアの再生に合理的に必要とされる場合を除き、ハードウェアコンポーネントやデバイスへアクセスすること。
                    </p>
                </li>
            </ul>
            <p>
                ユーザーエージェントの実装者は上記要件を満たすために様々な手法を用いることができます。例えば、自身で <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                    class="internalDFN" id="ref-for-dfn-cdm-92">CDM</a>
                を実装する実装者は、そのコンポーネントに上記を設計要件として組み込むことができます。サードパーティの <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                    class="internalDFN" id="ref-for-dfn-cdm-93">CDM</a>
                を利用する実装者は、それが禁止された情報やコンポーネントへアクセスできない制約付き環境（例えば「サンドボックス」）で実行されることを保証することができます。
            </p>
        </section>
        <section id="messaging-requirements">
            <div class="header-wrapper">
                <h3 id="x8-2-messages-and-communication"><bdi class="secno">8.2 </bdi>
                    Messages and Communication
                </h3><a class="self-link" href="#messaging-requirements" aria-label="Permalink for Section 8.2"></a>
            </div>

            <p>
                <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-94">CDM</a>
                との間のすべてのメッセージおよび通信（CDM とライセンスサーバーの間のものなど）は、ユーザーエージェントを経由して渡されなければならない（<em class="rfc2119">MUST</em>）。<a
                    data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-96">CDM</a>
                は直接のアウトオブバンドなネットワークリクエストを行ってはならない（<em class="rfc2119">MUST NOT</em>）。<a
                    href="#direct-individualization">Direct Individualization</a> で記述されたもの以外のすべてのメッセージと通信は、本仕様で定義された API
                を通じてアプリケーションを経由して渡されなければならない（<em class="rfc2119">MUST</em>）。具体的には、アプリケーションが指定した URL に送信されるかその origin
                に基づく、アプリケーション固有、origin 固有、コンテンツ固有の情報を含む通信や、ライセンス交換メッセージはすべて API を経由しなければなりません。
            </p>
        </section>
        <section id="persistent-state-requirements">
            <div class="header-wrapper">
                <h3 id="x8-3-persistent-data"><bdi class="secno">8.3 </bdi>
                    Persistent Data
                </h3><a class="self-link" href="#persistent-state-requirements"
                    aria-label="Permalink for Section 8.3"></a>
            </div>

            <p>
                Persistent Data には、<a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-97">CDM</a>、または CDM を代表してユーザーエージェントが保存する、<a data-link-type="idl"
                    data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                    id="ref-for-dom-mediakeys-38"><code>MediaKeys</code></a> オブジェクトの破棄後も残るすべてのデータが含まれます。具体的には、識別子（<a
                    data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                    id="ref-for-dfn-distinctive-identifier-s-14">Distinctive Identifier(s)</a> を含む）、ライセンス、鍵、鍵 ID、あるいは <a
                    data-link-type="dfn|abstract-op" href="#dfn-record-s-of-license-destruction" class="internalDFN"
                    id="ref-for-dfn-record-s-of-license-destruction-12">records of license destruction</a> などが該当します。これらは
                <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-99">CDM</a>
                または CDM を代表してユーザーエージェントによって保存されます。
            </p>
            <section id="use-origin-specific-key-system-storage">
                <div class="header-wrapper">
                    <h4 id="x8-3-1-use-origin-specific-and-browsing-profile-specific-key-system-storage"><bdi
                            class="secno">8.3.1 </bdi>
                        Use origin-specific and browsing profile-specific <a data-link-type="dfn|abstract-op"
                            href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-35">Key System</a>
                        storage
                    </h4><a class="self-link" href="#use-origin-specific-key-system-storage"
                        aria-label="Permalink for Section 8.3.1"></a>
                </div>

                <p>
                    アプリケーションやライセンスサーバーに見える形でメッセージや振る舞いに影響を与え得る Persistent Data は、<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> 固有かつ <a
                        data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                        id="ref-for-dfn-browsing-profile-3">browsing profile</a> 固有の方法で保存されなければならず（<em
                        class="rfc2119">MUST</em>）、プライベートブラウジングセッションへ流出したり、そこから漏れてはいけません（<em class="rfc2119">MUST
                        NOT</em>）。具体的には（網羅的ではありませんが）、セッションデータ、ライセンス、鍵、per-origin 識別子は <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> と <a
                        data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                        id="ref-for-dfn-browsing-profile-4">browsing profile</a> ごとに保存されなければなりません。
                </p>
                <p>
                    詳細は <a href="#session-storage">Session Storage and Persistence</a> を参照してください。
                </p>
            </section>
            <section id="allow-persistent-data-cleared">
                <div class="header-wrapper">
                    <h4 id="x8-3-2-allow-persistent-data-to-be-cleared"><bdi class="secno">8.3.2 </bdi>
                        Allow Persistent Data to Be Cleared
                    </h4><a class="self-link" href="#allow-persistent-data-cleared"
                        aria-label="Permalink for Section 8.3.2"></a>
                </div>

                <p>
                    Persistent Data を使用する実装は、そのデータが本仕様で定義された API 経由など外部から、またクライアントデバイス上でも回復不能になるようにユーザーがデータを消去できることを<em
                        class="rfc2119">MUST</em> 許容しなければなりません。
                </p>
                <p>
                    ユーザーエージェントは <em class="rfc2119">SHOULD</em> 次のことを行うべきです:
                </p>
                <ul>
                    <li>
                        <p>
                            Persistent Data をクッキー等の他のサイトデータと同様に扱う。具体的には:
                        </p>
                        <ul>
                            <li>
                                <p id="allow-persistent-data-cleared-with-cookies">
                                    クッキーとともに Persistent Data を消去できるようにすること。
                                </p>
                            </li>
                            <li>
                                <p>
                                    閲覧履歴の消去機能の一部として Persistent Data を消去できるようにすること。
                                </p>
                            </li>
                            <li>
                                <p>
                                    「すべてのデータを削除」機能に Persistent Data を含めること。
                                </p>
                            </li>
                            <li>
                                <p>
                                    Persistent Data を他のサイトデータと同じ UI の場所に表示すること。
                                </p>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <p>
                            ユーザーが <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                            ごと、または <a data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                                id="ref-for-dfn-browsing-profile-5">browsing profile</a> ごとに Persistent Data
                            を消去できるようにすること（特に「このサイトを忘れる」機能の一部として、特定サイトに関連するクッキーやデータを削除できるようにすること）。
                        </p>
                    </li>
                    <li>
                        <p>
                            Persistent Data を消去する操作が十分に原子的であり、「クッキー復活（cookie
                            resurrection）」のような、新しい識別子と古いものを別の残存データにより再関連付けできる状況を防ぐこと。
                        </p>
                    </li>
                    <li>
                        <p>
                            これらのインターフェースを、データの不完全な消去の可能性をユーザーが理解できるように提示し、クッキーや web storage
                            などデータを永続化するすべての機能に関連するデータを同時に削除できるようにすること。
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-36">Key System</a>
                            を無効化・再有効化するためのインターフェースを、データの不完全な消去の可能性を理解させ、すべての永続ストレージ機能におけるデータを同時に削除できるように提示すること。
                        </p>
                    </li>
                    <li>
                        <p>
                            ユーザーが <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                            ごと、あるいはすべての origin に対して Persistent Data を特定に削除できるようにすること。
                        </p>
                    </li>
                </ul>
            </section>
            <section id="encrypt-or-obfuscate-persistent-data">
                <div class="header-wrapper">
                    <h4 id="x8-3-3-encrypt-or-obfuscate-persistent-data"><bdi class="secno">8.3.3 </bdi>
                        Encrypt or obfuscate Persistent Data
                    </h4><a class="self-link" href="#encrypt-or-obfuscate-persistent-data"
                        aria-label="Permalink for Section 8.3.3"></a>
                </div>

                <p>
                    ユーザーエージェントは Persistent Data
                    を潜在的に機微な情報として扱うべきです。これらの情報が流出するとユーザーのプライバシーが損なわれる可能性があります。そのため、ユーザーエージェントは Persistent Data
                    が安全に保存されるようにし、データを削除する際は基盤となるストレージから速やかに削除されることを<em class="rfc2119">SHOULD</em> 確保すべきです。
                </p>
            </section>
        </section>
        <section id="exposed-value-requirements">
            <div class="header-wrapper">
                <h3 id="x8-4-values-exposed-to-the-application"><bdi class="secno">8.4 </bdi>
                    Values Exposed to the Application
                </h3><a class="self-link" href="#exposed-value-requirements" aria-label="Permalink for Section 8.4"></a>
            </div>

            <p>
                アプリケーションに公開される、あるいは <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-101">CDM</a>
                による使用などを通じて推測可能な値は、識別子として設計されていない場合でもクライアントやユーザーを特定するのに利用され得ます。本節はそのような懸念を回避または緩和するための要件を定義します。識別子に関する追加要件は
                <a href="#identifier-requirements">Identifiers</a> を参照してください。
            </p>
            <section id="per-origin-per-profile-values">
                <div class="header-wrapper">
                    <h4 id="x8-4-1-use-per-origin-per-profile-values"><bdi class="secno">8.4.1 </bdi>
                        Use Per-Origin Per-Profile Values
                    </h4><a class="self-link" href="#per-origin-per-profile-values"
                        aria-label="Permalink for Section 8.4.1"></a>
                </div>

                <p>
                    アプリケーションに公開される、または推測可能なすべての <a data-link-type="dfn|abstract-op" href="#dfn-distinctive"
                        class="internalDFN" id="ref-for-dfn-distinctive-3">Distinctive Values</a> は、<a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> ごとおよび <a
                        data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                        id="ref-for-dfn-browsing-profile-6">browsing profile</a> ごとに固有でなければならない（<em
                        class="rfc2119">MUST</em>）。つまり、本仕様で定義された API を使用する一つの origin に対する値は、他の origin
                    に対する値と異なるものでなければならず、また一つの <a data-link-type="dfn|abstract-op" href="#dfn-browsing-profile"
                        class="internalDFN" id="ref-for-dfn-browsing-profile-7">browsing profile</a>
                    で使われる値は他のプロファイルで使われるものと異なるものでなければなりません。これらの値はプライベートブラウジングセッションへ漏れてはならず、そこから流出してはなりません。
                </p>
                <p>
                    オリジンやプロファイルをまたいだ値は、アプリケーションによって関連付け不可能（<a data-link-type="dfn|abstract-op"
                        href="#dfn-non-associable-by-application" class="internalDFN"
                        id="ref-for-dfn-non-associable-by-application-3">non-associable by
                        applications</a>）でなければなりません。すなわち、複数のオリジンやプロファイルからの値を相互に相関させて同一のクライアントやユーザーに由来するものと特定できてはなりません。オリジン独立またはプロファイル独立の値から
                    per-origin 値を導出する実装は、上記の非関連付け性を保証する方法（非可逆性を持つ導出関数など）を用いなければなりません（<em class="rfc2119">MUST</em>）。
                </p>
            </section>
            <section id="allow-values-to-be-cleared">
                <div class="header-wrapper">
                    <h4 id="x8-4-2-allow-values-to-be-cleared"><bdi class="secno">8.4.2 </bdi>
                        Allow Values to Be Cleared
                    </h4><a class="self-link" href="#allow-values-to-be-cleared"
                        aria-label="Permalink for Section 8.4.2"></a>
                </div>

                <p>
                    <a href="#allow-persistent-data-cleared">Allow Persistent Data to Be Cleared</a>
                    の要件の結果として、アプリケーションに公開されたすべての永続化された値は、外部（本仕様で定義された API
                    経由等）およびクライアントデバイス上の双方で回復不能となるようにクリア可能でなければなりません（<em class="rfc2119">MUST</em>）。
                </p>
                <p>
                    一度クリアされたら、新しい非関連付け可能な（<a data-link-type="dfn|abstract-op" href="#dfn-non-associable-by-application"
                        class="internalDFN" id="ref-for-dfn-non-associable-by-application-4">non-associable by
                        applications</a>）値が、後で値が必要になったときに生成されなければなりません（<em class="rfc2119">MUST</em>）。
                </p>
            </section>
        </section>
        <section id="identifier-requirements">
            <div class="header-wrapper">
                <h3 id="x8-5-identifiers"><bdi class="secno">8.5 </bdi>
                    Identifiers
                </h3><a class="self-link" href="#identifier-requirements" aria-label="Permalink for Section 8.5"></a>
            </div>

            <p>
                実装による識別子の使用、特に <a data-link-type="dfn|abstract-op"
                    data-lt="uses Distinctive Identifier(s) or Distinctive Permanent Identifier(s)"
                    href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s" class="internalDFN"
                    id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-5">Distinctive
                    Identifier(s) や Distinctive Permanent Identifier(s)</a>
                の利用はプライバシー上の懸念を引き起こします。本節はそのような懸念を回避または緩和するための要件を定義します。アプリケーションに公開される値に関する要件（<a
                    href="#exposed-value-requirements">Values Exposed to the
                    Application</a>）は、アプリケーションに公開される識別子にも適用されます。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-120">
                <div role="heading" class="note-title marker" id="h-note-120" aria-level="4"><span>注</span></div>
                <div class="">
                    <p>
                        要約すると:
                    </p>
                    <ul>
                        <li>
                            <p>
                                <a href="#limit-or-avoid-use-of-distinctive-identifiers-and-permanent-identifiers">Distinctive
                                    Identifiers や Permanent Identifiers の使用を制限または回避する</a>。
                            </p>
                        </li>
                        <li>
                            <p>
                                <em>Permanent Identifiers</em> を除くすべての識別子は、<a data-link-type="dfn|abstract-op"
                                    href="#dfn-permanent-identifier-s" class="internalDFN"
                                    id="ref-for-dfn-permanent-identifier-s-2">Permanent Identifiers</a> を除いて、<em
                                    class="rfc2119">MUST</em> origin と profile
                                ごとに一意であり、相関不能（non-associable）であり、クリア可能でなければならない。
                            </p>
                        </li>
                        <li>
                            <p>
                                すべての識別子は公開時に暗号化されるべきである（<em class="rfc2119">SHOULD</em>）。
                            </p>
                        </li>
                        <li>
                            <p>
                                <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                    class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-15">Distinctive
                                    Identifiers</a> は、クライアント外に公開される際に暗号化され、origin と profile
                                ごとに一意であり、かつクリア可能でなければならない（<em class="rfc2119">MUST</em>）。
                            </p>
                        </li>
                        <li>
                            <p>
                                <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                                    class="internalDFN"
                                    id="ref-for-dfn-distinctive-permanent-identifier-s-20">Distinctive Permanent
                                    Identifiers</a> は、クライアント外に公開される際に暗号化されなければならず（<em
                                    class="rfc2119">MUST</em>）、アプリケーションに公開されてはならない（<em class="rfc2119">MUST NOT</em>）。
                            </p>
                        </li>
                        <li>
                            <p>
                                本仕様で定義された API の使用に伴って生成される潜在的な識別子や <a data-link-type="dfn|abstract-op"
                                    href="#dfn-distinctive" class="internalDFN"
                                    id="ref-for-dfn-distinctive-4">Distinctive Values</a> はすべて、origin と profile
                                ごとに一意であり、かつクリア可能でなければならない（<em class="rfc2119">MUST</em>）。これはランダム識別子、セッションデータ、その他の <a
                                    data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                    id="ref-for-dfn-cdm-102">CDM</a> データなどを含みますが、これらに限定されません。
                            </p>
                        </li>
                    </ul>
                </div>
            </div>
            <section id="limit-or-avoid-use-of-distinctive-identifiers-and-permanent-identifiers">
                <div class="header-wrapper">
                    <h4 id="x8-5-1-limit-or-avoid-use-of-distinctive-identifiers-and-permanent-identifiers"><bdi
                            class="secno">8.5.1 </bdi>
                        Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers
                    </h4><a class="self-link"
                        href="#limit-or-avoid-use-of-distinctive-identifiers-and-permanent-identifiers"
                        aria-label="Permalink for Section 8.5.1"></a>
                </div>

                <ul>
                    <li>
                        <p>
                            実装は <a data-link-type="dfn|abstract-op"
                                href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                                class="internalDFN"
                                id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-6">Distinctive
                                Identifier(s) や Distinctive Permanent Identifier(s)</a> の使用を避けるべきです（<em
                                class="rfc2119">SHOULD</em>）。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-121">
                            <div role="heading" class="note-title marker" id="h-note-121" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                例えば、個々のクライアントではなく複数クライアントやデバイスのグループに適用される識別子や値を使用することが考えられます。
                            </p>
                        </div>
                    </li>
                    <li>
                        <p>
                            実装は、<a data-link-type="dfn|abstract-op"
                                href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                                class="internalDFN"
                                id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-7">Distinctive
                                Identifier(s) や Distinctive Permanent Identifier(s)</a> を、特定の <a
                                data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-103">CDM</a> インスタンスやセッションのポリシーを強制するためにのみ使用すべきです（<em
                                class="rfc2119">SHOULD</em>）。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-122">
                            <div role="heading" class="note-title marker" id="h-note-122" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                例えば、"<a data-link-type="idl" href="#dom-mediakeysessiontype-temporary"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysessiontype-temporary-12"><code>temporary</code></a>" と
                                "<a data-link-type="idl" href="#dom-mediakeysessiontype-persistent-license"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysessiontype-persistent-license-7"><code>persistent-license</code></a>"
                                のセッションは異なる要件を持つかもしれません。
                            </p>
                        </div>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="dfn|abstract-op"
                                href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                                class="internalDFN"
                                id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-8">Distinctive
                                Identifier(s) や Distinctive Permanent Identifier(s)</a>
                            を使用する実装は、それらを使用しないオプションをサポートすべきです（<em
                                class="rfc2119">SHOULD</em>）。そのようなサポートがある実装は、ユーザーがこのオプションを選択できる機能を公開するべきです（<em
                                class="rfc2119">SHOULD</em>）。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-123">
                            <div role="heading" class="note-title marker" id="h-note-123" aria-level="5">
                                <span>注</span>
                            </div>
                            <div class="">
                                <p>
                                    サポートされている場合、アプリケーションは <a data-link-type="idl"
                                        href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-23"><code>distinctiveIdentifier</code></a>
                                    = "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysrequirement-not-allowed-14"><code>not-allowed</code></a>"
                                    を指定してこのモードを選択できます。こうしたオプションの選択は <a data-link-type="idl"
                                        data-lt="requestMediaKeySystemAccess()"
                                        href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                                        id="ref-for-dom-navigator-requestmediakeysystemaccess-12"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                                    の結果や、後続のセッションから生成されるライセンス要求に影響する可能性があります。
                                </p>
                                <p>
                                    ユーザーにこの実装機能を選択させることで、より高いプライバシーを維持しながらコンテンツへアクセスできるようになる場合があります。
                                </p>
                            </div>
                        </div>
                    </li>
                </ul>
            </section>
            <section id="encrypt-identifiers">
                <div class="header-wrapper">
                    <h4 id="x8-5-2-encrypt-identifiers"><bdi class="secno">8.5.2 </bdi>
                        Encrypt Identifiers
                    </h4><a class="self-link" href="#encrypt-identifiers" aria-label="Permalink for Section 8.5.2"></a>
                </div>

                <p>
                    <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-identifier-s-16">Distinctive Identifiers</a> と <a
                        data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                        class="internalDFN" id="ref-for-dfn-distinctive-permanent-identifier-s-21">Distinctive Permanent
                        Identifiers</a> は、クライアント外へ公開される際にメッセージ交換レベルで暗号化されなければなりません（<em
                        class="rfc2119">MUST</em>）。その他の識別子も、クライアント外へ公開される際にはメッセージ交換レベルで暗号化されるべきです（<em
                        class="rfc2119">SHOULD</em>）。暗号化は、識別子の暗号文の二つのインスタンスが復号鍵を持つエンティティのみによって関連付け可能（associable）であることを保証しなければなりません（<em
                        class="rfc2119">MUST</em>）。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-124">
                    <div role="heading" class="note-title marker" id="h-note-124" aria-level="5"><span>注</span></div>
                    <div class="">
                        <p>
                            識別子は次のような方法で公開され得ます:
                        </p>
                        <ul>
                            <li>
                                <p>
                                    <a data-link-type="idl" data-lt="message" href="#dfn-message" class="internalDFN"
                                        id="ref-for-dfn-message-7"><code><code>message</code></code></a>
                                    イベントを介してアプリケーションに。
                                </p>
                            </li>
                            <li>
                                <p>
                                    サーバーからのメッセージ内で、例えば <a data-link-type="idl" data-lt="update()"
                                        href="#dom-mediakeysession-update" class="internalDFN"
                                        id="ref-for-dom-mediakeysession-update-13"><code>update</code></a><code>()</code>
                                    に渡されるものとして。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <a data-link-type="dfn|abstract-op" href="#dfn-individualization"
                                        class="internalDFN" id="ref-for-dfn-individualization-12">individualization</a>
                                    の一部として。
                                </p>
                            </li>
                        </ul>
                    </div>
                </div>
                <p>
                    <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-104">CDM</a> は、暗号化鍵がその <a data-link-type="dfn|abstract-op"
                        href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-37">Key System</a>
                    に対して有効なサーバーに属していることを検証しなければなりません（<em class="rfc2119">MUST</em>）。アプリケーションに公開される識別子については、これは <a
                        href="#server-certificate">サーバー証明書</a> を用いて実装され得ます（<em class="rfc2119">MAY</em>）。
                </p>
                <p>
                    サーバーは、識別子をそれを送った <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-105">CDM</a> 以外のエンティティに公開してはなりません（<em class="rfc2119">MUST NOT</em>）。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-125">
                    <div role="heading" class="note-title marker" id="h-note-125" aria-level="5"><span>注</span></div>
                    <p class="">
                        具体的には、識別子をアプリケーションに提供したり、<a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                            id="ref-for-dfn-cdm-106">CDM</a> に対するメッセージに平文で含めてはなりません。識別子やメッセージを暗号化し、その特定の <a
                            data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                            id="ref-for-dfn-cdm-107">CDM</a> のみが復号できるようにすることでこれを達成できます。
                    </p>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-126">
                    <div role="heading" class="note-title marker" id="h-note-126" aria-level="5"><span>注</span></div>
                    <div class="">
                        <p>
                            これは次を意味します:
                        </p>
                        <ul>
                            <li>
                                <p>
                                    デバイス固有またはユーザー固有の鍵で作られる署名は、同じプレーンテキストであっても各署名が異なっていなければならない（<em
                                        class="rfc2119">MUST</em>）。
                                </p>
                            </li>
                            <li>
                                <p>
                                    デバイス固有またはユーザー固有の鍵に関連する識別子、鍵、証明書は、ライセンスや <a data-link-type="dfn|abstract-op"
                                        href="#dfn-individualization" class="internalDFN"
                                        id="ref-for-dfn-individualization-13">individualization</a>
                                    サーバー向けに暗号化されなければならない（<em class="rfc2119">MUST</em>）。
                                </p>
                            </li>
                            <li>
                                <p>
                                    ライセンスサーバーから <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                        id="ref-for-dfn-cdm-108">CDM</a> へのメッセージは、意図された復号鍵の識別子（例えば対象の復号鍵の
                                    ID）など受信者固有の識別子を暗号封筒の外側に露出してはならない（<em class="rfc2119">MUST NOT</em>）。
                                </p>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>
            <section id="per-origin-per-profile-identifiers">
                <div class="header-wrapper">
                    <h4 id="x8-5-3-use-per-origin-per-profile-identifiers"><bdi class="secno">8.5.3 </bdi>
                        Use Per-Origin Per-Profile Identifiers
                    </h4><a class="self-link" href="#per-origin-per-profile-identifiers"
                        aria-label="Permalink for Section 8.5.3"></a>
                </div>

                <p>
                    <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                        class="internalDFN" id="ref-for-dfn-distinctive-permanent-identifier-s-22">Distinctive Permanent
                        Identifiers</a> を除くすべての識別子は、<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> と <a
                        data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                        id="ref-for-dfn-browsing-profile-8">browsing profile</a> ごとに一意でなければなりません（<em
                        class="rfc2119">MUST</em>）。詳細は <a href="#per-origin-per-profile-values" class="sec-ref"><bdi
                            class="secno">8.4.1 </bdi>
                        Use Per-Origin Per-Profile Values</a> を参照してください。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-127">
                    <div role="heading" class="note-title marker" id="h-note-127" aria-level="5"><span>注</span></div>
                    <div class="">
                        <p>
                            これは <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-18">Distinctive
                                Identifiers</a> を含みますがこれに限定されません。
                        </p>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                                class="internalDFN" id="ref-for-dfn-distinctive-permanent-identifier-s-23">Distinctive
                                Permanent Identifiers</a> はアプリケーションやオリジンに公開してはならない（<em class="rfc2119">MUST NOT</em>）。
                        </p>
                    </div>
                </div>
            </section>
            <section id="non-associable-identifiers">
                <div class="header-wrapper">
                    <h4 id="x8-5-4-use-non-associable-identifiers"><bdi class="secno">8.5.4 </bdi>
                        Use Non-Associable Identifiers
                    </h4><a class="self-link" href="#non-associable-identifiers"
                        aria-label="Permalink for Section 8.5.4"></a>
                </div>

                <p>
                    実装がアプリケーションに公開するすべての識別子（<a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                        class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-19">Distinctive Identifiers</a>
                    を含む）、たとえ暗号化された形であっても、オリジン、<a data-link-type="dfn|abstract-op" href="#dfn-browsing-profile"
                        class="internalDFN" id="ref-for-dfn-browsing-profile-9">browsing profiles</a>、および <a
                        href="#allow-identifiers-cleared">識別子のクリア</a> を跨いでアプリケーションによって関連付けられない（<a
                        data-link-type="dfn|abstract-op" href="#dfn-non-associable-by-application" class="internalDFN"
                        id="ref-for-dfn-non-associable-by-application-5">non-associable by
                        application</a>）ものでなければなりません（<em class="rfc2119">MUST</em>）。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-128">
                    <div role="heading" class="note-title marker" id="h-note-128" aria-level="5"><span>注</span></div>
                    <p class="">
                        そのような識別子について、複数のアプリケーションや関連するライセンスサーバー等が相関や関連付けを行えないことが求められます（<em class="rfc2119">MUST
                            NOT</em>）。
                    </p>
                </div>
            </section>
            <section id="allow-identifiers-cleared">
                <div class="header-wrapper">
                    <h4 id="x8-5-5-allow-identifiers-to-be-cleared"><bdi class="secno">8.5.5 </bdi>
                        Allow Identifiers to Be Cleared
                    </h4><a class="self-link" href="#allow-identifiers-cleared"
                        aria-label="Permalink for Section 8.5.5"></a>
                </div>

                <p>
                    <a href="#allow-persistent-data-cleared">Allow Persistent Data to Be Cleared</a> の要件の帰結として、<a
                        data-link-type="dfn|abstract-op" href="#dfn-distinctive" class="internalDFN"
                        id="ref-for-dfn-distinctive-5">Distinctive Values</a>（<a data-link-type="dfn|abstract-op"
                        href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-permanent-identifier-s-24">Distinctive Permanent Identifiers</a>
                    を除く） は、外部やクライアントデバイス上の双方で回復不能となるようにクリア可能でなければなりません（<em class="rfc2119">MUST</em>）。
                </p>
                <p>
                    <a data-link-type="dfn|abstract-op" href="#dfn-use-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-use-distinctive-identifier-s-3">Distinctive Identifier(s)</a> を使用する実装は、ユーザーがその
                    <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-identifier-s-20">Distinctive Identifier(s)</a>
                    をクリアできるようにしなければなりません（<em class="rfc2119">MUST</em>）。また、<a data-link-type="dfn|abstract-op"
                        href="#dfn-use-distinctive-permanent-identifier-s" class="internalDFN"
                        id="ref-for-dfn-use-distinctive-permanent-identifier-s-2">Distinctive Permanent
                        Identifier(s)</a> を使用する実装は、当該 <a data-link-type="dfn|abstract-op"
                        href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-permanent-identifier-s-25">Distinctive Permanent Identifier(s)</a>
                    に関連する値をユーザーがクリアできるようにしなければなりません（<em class="rfc2119">MUST</em>）。
                </p>
                <p>
                    一度クリアされたら、新しい非関連付け可能な（<a data-link-type="dfn|abstract-op" href="#dfn-non-associable-by-application"
                        class="internalDFN" id="ref-for-dfn-non-associable-by-application-6">non-associable by
                        applications</a>）値が、例えば <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                        class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-21">Distinctive Identifiers</a>
                    のような値が再び必要になったときに生成されなければなりません（<em class="rfc2119">MUST</em>）。
                </p>
            </section>
        </section>
        <section id="individualization">
            <div class="header-wrapper">
                <h3 id="x8-6-individualization"><bdi class="secno">8.6 </bdi>
                    <dfn id="dfn-individualization" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">Individualization</dfn>
                </h3><a class="self-link" href="#individualization" aria-label="Permalink for Section 8.6"></a>
            </div>

            <p>
                識別子、特に <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                    id="ref-for-dfn-distinctive-identifier-s-22">Distinctive Identifiers</a> は、
                個体化（individualization）またはプロビジョニングと呼ばれるプロセスを通じて生成または取得されることがあります。得られた識別子は <em class="rfc2119">MUST</em>
                アプリケーションによって<a data-link-type="dfn|abstract-op" href="#dfn-non-associable-by-application"
                    class="internalDFN" id="ref-for-dfn-non-associable-by-application-7">関連付けできない（non-associable by
                    applications）</a>ものであり、かつ<a data-link-type="dfn|abstract-op"
                    data-lt="use of Distinctive Identifier(s)" href="#dfn-use-distinctive-identifier-s"
                    class="internalDFN" id="ref-for-dfn-use-distinctive-identifier-s-4">それらの使用</a>は <em
                    class="rfc2119">MUST</em> 単一の
                プロファイルの単一のオリジンにのみ公開されるものでなければなりません。 このプロセスは、識別子が<a
                    href="#allow-identifiers-cleared">クリア</a>された後などに、複数回実行されることが <em class="rfc2119">MAY</em> あります。
            </p>
            <p>
                このプロセスは <em class="rfc2119">MUST</em> ユーザーエージェントが直接実行する<a data-link-type="dfn|abstract-op"
                    data-lt="direct individualization" href="#dfn-direct-individualization" class="internalDFN"
                    id="ref-for-dfn-direct-individualization-1">directly by the user agent</a> か、または<a
                    data-link-type="dfn|abstract-op" data-lt="app-assisted individualization"
                    href="#dfn-app-assisted-individualization" class="internalDFN"
                    id="ref-for-dfn-app-assisted-individualization-2">アプリケーションを通じて</a>実行されなければなりません。両者の個体化の仕組み、フロー、および制約は以下の節で説明する通り異なります。どの方法が使用されるかは、<a
                    data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-109">CDM</a> の実装と本仕様の要件（特に以下の要件）の適用によって決まります。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-129">
                <div role="heading" class="note-title marker" id="h-note-129" aria-level="4"><span>注</span></div>
                <p class="">
                    <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-24"><code>distinctiveIdentifier</code></a>
                    は、<a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-identifier-s-23">Distinctive Identifiers</a> および
                    <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                        class="internalDFN" id="ref-for-dfn-distinctive-permanent-identifier-s-26">Distinctive Permanent
                        Identifiers</a> が個体化を含め使用できるかどうかを制御します。具体的には、そのような識別子は、<a data-link-type="idl"
                        href="#dom-mediakeysystemconfiguration-distinctiveidentifier" class="internalDFN"
                        id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-25"><code>distinctiveIdentifier</code></a>
                    メンバーの値が "<a data-link-type="idl" href="#dom-mediakeysrequirement-required" class="internalDFN"
                        id="ref-for-dom-mediakeysrequirement-required-18"><code>required</code></a>" の場合にのみ使用され得ます。
                </p>
            </div>
            <section id="direct-individualization">
                <div class="header-wrapper">
                    <h4 id="x8-6-1-direct-individualization"><bdi class="secno">8.6.1 </bdi>
                        <dfn id="dfn-direct-individualization" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">Direct Individualization</dfn>
                    </h4><a class="self-link" href="#direct-individualization"
                        aria-label="Permalink for Section 8.6.1"></a>
                </div>

                <p>
                    Direct Individualization は <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-110">CDM</a> とオリジンやアプリケーションに依存しないサーバーとの間で行われます。サーバーはオリジン非依存ですが、個体化の結果により <a
                        data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-111">CDM</a>
                    は本仕様の他の要件に従ってオリジン固有の識別子を提供できるようになります。このプロセスはユーザーエージェントによって実行されなければならず（<em
                        class="rfc2119">MUST</em>）、本仕様で定義された API を使用してはなりません（<em class="rfc2119">MUST NOT</em>）。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-130">
                    <div role="heading" class="note-title marker" id="h-note-130" aria-level="5"><span>注</span></div>
                    <p class="">
                        例えば、このプロセスはクライアントデバイスを初期化したり、ユーザーエージェントまたは CDM ベンダーがホストする事前に決められたサーバーと通信して、<a
                            href="#per-origin-per-profile-identifiers">単一のブラウジングプロファイル</a> のための <a
                            href="#allow-identifiers-cleared">クリア可能な</a> <a
                            href="#per-origin-per-profile-identifiers">per-origin</a> 識別子を取得する場合があります。その際にクライアントデバイスの<a
                            data-link-type="dfn|abstract-op" href="#dfn-use-distinctive-permanent-identifier-s"
                            class="internalDFN" id="ref-for-dfn-use-distinctive-permanent-identifier-s-3">Distinctive
                            Permanent Identifier(s)</a> や他の<a data-link-type="dfn|abstract-op"
                            href="#dfn-permanent-identifier-s" class="internalDFN"
                            id="ref-for-dfn-permanent-identifier-s-3">Permanent Identifier(s)</a> を使用することがあります。
                    </p>
                </div>
                <p>
                    そのような個体化では、すべてのメッセージ交換は次を満たさなければなりません:
                </p>
                <ul>
                    <li>
                        <p>
                            <em class="rfc2119">MUST</em> ユーザーエージェントが扱い、ユーザーエージェントのネットワークスタックを通じてユーザーエージェントによって実行されること。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST NOT</em> <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                class="internalDFN" id="ref-for-dfn-cdm-112">CDM</a> によって直接実行されないこと。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST NOT</em> 本仕様で定義された API を通じてアプリケーションに渡されたり通過したりしないこと。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST</em> オリジンやアプリケーションに依存しない URL に送信されること。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST</em> すべての <a data-link-type="dfn|abstract-op"
                                href="#dfn-distinctive-identifier-s" class="internalDFN"
                                id="ref-for-dfn-distinctive-identifier-s-24">Distinctive Identifiers</a> と <a
                                data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                                class="internalDFN" id="ref-for-dfn-distinctive-permanent-identifier-s-27">Distinctive
                                Permanent Identifiers</a> を暗号化すること。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST</em> TLS を使用すること。
                        </p>
                    </li>
                </ul>
                <p>
                    実装は、オリジン、オリジン固有またはアプリケーション固有の情報、もしくはオリジンと<a data-link-type="dfn|abstract-op" href="#dfn-associable"
                        class="internalDFN"
                        id="ref-for-dfn-associable-2">関連付け可能な（associable）</a>値を中央集権的サーバーに、たとえ暗号化された形であっても公開してはなりません。そうするとユーザーやデバイスが訪れたすべてのオリジンの中央記録が作成される可能性があるためです。
                </p>
            </section>
            <section id="app-assisted-individualization">
                <div class="header-wrapper">
                    <h4 id="x8-6-2-app-assisted-individualization"><bdi class="secno">8.6.2 </bdi>
                        <dfn id="dfn-app-assisted-individualization" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">App-Assisted Individualization</dfn>
                    </h4><a class="self-link" href="#app-assisted-individualization"
                        aria-label="Permalink for Section 8.6.2"></a>
                </div>

                <p>
                    App-Assisted Individualization は <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                        class="internalDFN" id="ref-for-dfn-cdm-113">CDM</a>
                    とアプリケーション（アプリケーションが選択したサーバーを含む）の間で行われ、オリジンごとの識別子を生成します。このプロセスは本仕様で定義された API を通じて実行されなければならず（<em
                        class="rfc2119">MUST</em>）、他の通信手段を用いてはなりません（<em class="rfc2119">MUST NOT</em>）。他の API
                    の使用と同様に、このプロセスは <em class="rfc2119">MAY</em> <a data-link-type="dfn|abstract-op"
                        data-lt="use Distinctive Identifier(s)" href="#dfn-use-distinctive-identifier-s"
                        class="internalDFN" id="ref-for-dfn-use-distinctive-identifier-s-5">1 つ以上の Distinctive
                        Identifier(s)</a> を使用することがありますが、
                    <em class="rfc2119">MUST NOT</em> <a data-link-type="dfn|abstract-op"
                        href="#dfn-use-distinctive-permanent-identifier-s" class="internalDFN"
                        id="ref-for-dfn-use-distinctive-permanent-identifier-s-4">Distinctive Permanent
                        Identifier(s)</a> や非オリジン固有の値を使用してはなりません（たとえ暗号化された形でも）。もし処理が <a data-link-type="dfn|abstract-op"
                        data-lt="uses Distinctive Identifier(s)" href="#dfn-use-distinctive-identifier-s"
                        class="internalDFN" id="ref-for-dfn-use-distinctive-identifier-s-6">1つ以上の Distinctive
                        Identifier(s)</a> を使用する場合、結果の識別子は定義上 <a data-link-type="dfn|abstract-op"
                        href="#dfn-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-identifier-s-25">Distinctive Identifier</a> にもなります。
                </p>
                <p>
                    そのような個体化では、すべてのメッセージ交換は次を満たさなければなりません:
                </p>
                <ul>
                    <li>
                        <p>
                            <em class="rfc2119">MUST</em> 本仕様で定義された API を介してアプリケーションに渡されるか、アプリケーションを通して渡されること。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">SHALL</em> 関連するすべての <a data-link-type="idl" data-lt="message"
                                href="#dfn-message" class="internalDFN"
                                id="ref-for-dfn-message-8"><code><code>message</code></code></a> イベントに対してメッセージ種別 "<a
                                data-link-type="idl" href="#dom-mediakeymessagetype-individualization-request"
                                class="internalDFN"
                                id="ref-for-dom-mediakeymessagetype-individualization-request-4"><code>individualization-request</code></a>"
                            を使用すること。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST NOT</em> ユーザーエージェントによって実行されないこと。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST NOT</em> <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                class="internalDFN" id="ref-for-dfn-cdm-114">CDM</a> によって直接実行されないこと。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST NOT</em> Distinctive Permanent Identifier(s) を含んだり使用したりしないこと。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST NOT</em> 非オリジン固有のクライアント情報を含んではならないこと。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST</em> <a href="#identifier-requirements">識別子要件</a> に従うこと。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-131">
                            <div role="heading" class="note-title marker" id="h-note-131" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                これには <a href="#per-origin-per-profile-identifiers">origin と profile ごとに一意であること</a>、<a
                                    href="#allow-identifiers-cleared">クリア可能であること</a>、および必要に応じて<a
                                    href="#encrypt-identifiers">暗号化すること</a>が含まれます。
                            </p>
                        </div>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST NOT</em> 実行可能なコードを <a data-link-type="dfn|abstract-op"
                                href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-115">CDM</a> に提供してはならないこと。
                        </p>
                    </li>
                </ul>
                <p>
                    <a data-link-type="dfn|abstract-op" href="#dfn-associable" class="internalDFN"
                        id="ref-for-dfn-associable-3">関連付け可能（associable）</a> な値、たとえば <a data-link-type="dfn|abstract-op"
                        href="#dfn-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-identifier-s-26">Distinctive Identifier(s)</a>
                    がプロセスで使用される場合、実装はたとえ暗号化された形であってもオリジンやオリジン固有、アプリケーション固有の情報、あるいはオリジンと<a
                        data-link-type="dfn|abstract-op" href="#dfn-associable" class="internalDFN"
                        id="ref-for-dfn-associable-4">関連付け可能な（associable）</a>
                    値を中央サーバーに公開してはなりません。これによりユーザーやデバイスが訪れたすべてのオリジンの中央記録が作成される可能性があるためです。
                </p>
                <p>
                    適切な注意を払えば、そのような個体化は <a data-link-type="dfn|abstract-op" href="#dfn-direct-individualization"
                        class="internalDFN" id="ref-for-dfn-direct-individualization-2">Direct Individualization</a>
                    よりも良好なプライバシーを提供することがありますが、<a data-link-type="dfn|abstract-op"
                        href="#dfn-use-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-use-distinctive-identifier-s-8">Distinctive Identifier(s) を使用しない</a>
                    モデルほどではありません。そのような設計の利点を保持し、他のプライバシー問題を導入しないために、こうした実装やそれをサポートするアプリケーションは、個体化メッセージを中央サーバーやアプリケーション作成者が制御していない他のサーバーに先送りしたり委任したりすることを避けるべきです（<em
                        class="rfc2119">SHOULD</em>）。
                </p>
            </section>
        </section>
        <section id="support-multiple-keys">
            <div class="header-wrapper">
                <h3 id="x8-7-support-multiple-keys"><bdi class="secno">8.7 </bdi>
                    Support Multiple Keys
                </h3><a class="self-link" href="#support-multiple-keys" aria-label="Permalink for Section 8.7"></a>
            </div>

            <p>
                実装は各 <a data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                    id="ref-for-dom-mediakeysession-43"><code>MediaKeySession</code></a> オブジェクトで複数の鍵をサポートしなければなりません（<em
                    class="rfc2119">MUST</em>）。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-132">
                <div role="heading" class="note-title marker" id="h-note-132" aria-level="4"><span>注</span></div>
                <p class="">
                    複数の鍵をどのようにサポートするかの仕組みは実装の詳細ですが、アプリケーションおよび本仕様で定義された API から見て透明でなければなりません（<em
                        class="rfc2119">MUST</em>）。
                </p>
            </div>
            <p>
                実装は再生中の鍵間のシームレスな切替をサポートしなければなりません（<em class="rfc2119">MUST</em>）。これには同一の <a data-link-type="idl"
                    data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                    id="ref-for-dom-mediakeysession-44"><code>MediaKeySession</code></a> 内の鍵と、別の <a data-link-type="idl"
                    data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                    id="ref-for-dom-mediakeysession-45"><code>MediaKeySession</code></a> オブジェクトにある鍵の両方が含まれます。
            </p>
        </section>
        <section id="initialization-data-type-support-requirements">
            <div class="header-wrapper">
                <h3 id="x8-8-initialization-data-type-support"><bdi class="secno">8.8 </bdi>
                    Initialization Data Type Support
                </h3><a class="self-link" href="#initialization-data-type-support-requirements"
                    aria-label="Permalink for Section 8.8"></a>
            </div>

            <section id="licenses-generated-are-independent-of-content-type">
                <div class="header-wrapper">
                    <h4 id="x8-8-1-licenses-generated-are-independent-of-content-type"><bdi class="secno">8.8.1 </bdi>
                        Licenses Generated are Independent of Content Type
                    </h4><a class="self-link" href="#licenses-generated-are-independent-of-content-type"
                        aria-label="Permalink for Section 8.8.1"></a>
                </div>

                <p>
                    実装はサポートする任意の <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data-type"
                        class="internalDFN" id="ref-for-dfn-initialization-data-type-9">Initialization Data Type</a>
                    で生成されたライセンスを任意のコンテンツタイプで使用できるようにすることが <em class="rfc2119">SHOULD</em> です。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-133">
                    <div role="heading" class="note-title marker" id="h-note-133" aria-level="5"><span>注</span></div>
                    <p class="">
                        そうでない場合、<a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                            href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                            id="ref-for-dom-navigator-requestmediakeysystemaccess-13"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                        アルゴリズムは、例えば <a data-link-type="idl" data-lt="MediaKeySystemConfiguration"
                            href="#dom-mediakeysystemconfiguration" class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-11"><code>MediaKeySystemConfiguration</code></a>
                        のうちの一つが、<a data-link-type="idl" href="#dom-mediakeysystemconfiguration-initdatatypes"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-initdatatypes-5"><code>initDataTypes</code></a>
                        のいずれかがある <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-videocapabilities"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-videocapabilities-9"><code>videoCapabilities</code></a>
                        と互換性がないとして拒否する可能性があります。
                    </p>
                </div>
            </section>
            <section id="support-extraction-from-media-data">
                <div class="header-wrapper">
                    <h4 id="x8-8-2-support-extraction-from-media-data"><bdi class="secno">8.8.2 </bdi>
                        Support Extraction From Media Data
                    </h4><a class="self-link" href="#support-extraction-from-media-data"
                        aria-label="Permalink for Section 8.8.2"></a>
                </div>

                <p>
                    サポートされるコンテナに現れる可能性のある任意のサポートされた <a data-link-type="dfn|abstract-op"
                        href="#dfn-initialization-data-type" class="internalDFN"
                        id="ref-for-dfn-initialization-data-type-10">Initialization Data Type</a>
                    について、ユーザーエージェントはそれらのコンテナからその種の <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data"
                        class="internalDFN" id="ref-for-dfn-initialization-data-19">Initialization Data</a> を抽出することを <em
                        class="rfc2119">MUST</em> サポートしなければなりません（<a
                        href="#initdata-encountered">initdata-encountered</a> を参照）。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-134">
                    <div role="heading" class="note-title marker" id="h-note-134" aria-level="5"><span>注</span></div>
                    <p class="">
                        言い換えれば、ある <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data-type"
                            class="internalDFN" id="ref-for-dfn-initialization-data-type-11">Initialization Data
                            Type</a> のサポートを示すことは、<a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                            id="ref-for-dfn-cdm-116">CDM</a>
                        がライセンス要求を生成することをサポートすることと、コンテナ固有の型についてはユーザーエージェントがそのコンテナから抽出できることの両方を意味します。ただし、これは実装が任意のサポートされる
                        <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                            id="ref-for-dfn-initialization-data-20">Initialization Data</a>
                        を任意のサポートされるコンテンツタイプから解析できなければならない、という意味ではありません。
                    </p>
                </div>
            </section>
        </section>
        <section id="media-requirements">
            <div class="header-wrapper">
                <h3 id="x8-9-supported-media"><bdi class="secno">8.9 </bdi>
                    Supported Media
                </h3><a class="self-link" href="#media-requirements" aria-label="Permalink for Section 8.9"></a>
            </div>

            <p>
                本節は本仕様の実装がサポートすべきコンテンツ（<a href="https://html.spec.whatwg.org/multipage/#media-resource">media
                    resource</a>）の特性を定義します。
            </p>
            <section id="unencrypted-container">
                <div class="header-wrapper">
                    <h4 id="x8-9-1-unencrypted-container"><bdi class="secno">8.9.1 </bdi>
                        Unencrypted Container
                    </h4><a class="self-link" href="#unencrypted-container"
                        aria-label="Permalink for Section 8.9.1"></a>
                </div>

                <p>
                    メディアコンテナは暗号化されていてはならない（<em class="rfc2119">MUST
                        NOT</em>）。本仕様はユーザーエージェントがメディアデータを復号することなしにメディアコンテナを解析できることに依存します。これには <a
                        data-link-type="dfn|abstract-op" href="#dfn-encrypted-block-encountered" class="internalDFN"
                        id="ref-for-dfn-encrypted-block-encountered-2">Encrypted Block
                        Encountered</a> や <a data-link-type="dfn|abstract-op"
                        href="#dfn-initialization-data-encountered" class="internalDFN"
                        id="ref-for-dfn-initialization-data-encountered-3">Initialization Data Encountered</a>
                    アルゴリズム、および <a data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement"
                        class="internalDFN" id="ref-for-dom-htmlmediaelement-28"><code>HTMLMediaElement</code></a>
                    の標準的な機能（例えば <a href="https://html.spec.whatwg.org/multipage/#seeking">seeking</a>）のサポートが含まれます。
                </p>
            </section>
            <section id="interoperably-encrypted">
                <div class="header-wrapper">
                    <h4 id="x8-9-2-interoperably-encrypted"><bdi class="secno">8.9.2 </bdi>
                        Interoperably Encrypted
                    </h4><a class="self-link" href="#interoperably-encrypted"
                        aria-label="Permalink for Section 8.9.2"></a>
                </div>

                <p>
                    すべてのトラックを含む <a href="https://html.spec.whatwg.org/multipage/#media-resource">Media resources</a>
                    は、コンテナ固有の「共通暗号化（common encryption）」仕様に従って暗号化およびパッケージ化される必要があります（<em
                        class="rfc2119">MUST</em>）。これにより鍵が提供されたときにコンテンツを完全に規定された互換的な方法で復号できるようになります。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-135">
                    <div role="heading" class="note-title marker" id="h-note-135" aria-level="5"><span>注</span></div>
                    <p class="">
                        <cite><a data-matched-text="[[[EME-STREAM-REGISTRY]]]"
                                href="https://www.w3.org/TR/eme-stream-registry/">Encrypted Media Extensions Stream
                                Format Registry</a></cite> [<cite><a class="bibref" data-link-type="biblio"
                                href="#bib-eme-stream-registry"
                                title="Encrypted Media Extensions Stream Format Registry">EME-STREAM-REGISTRY</a></cite>]
                        はそのようなストリーム形式への参照を提供します。
                    </p>
                </div>
            </section>
            <section id="unencrypted-in-band-support-content">
                <div class="header-wrapper">
                    <h4 id="x8-9-3-unencrypted-in-band-support-content"><bdi class="secno">8.9.3 </bdi>
                        Unencrypted In-band Support Content
                    </h4><a class="self-link" href="#unencrypted-in-band-support-content"
                        aria-label="Permalink for Section 8.9.3"></a>
                </div>

                <p>
                    字幕、記述音声、トランスクリプトなどのインバンドのサポートコンテンツは暗号化されるべきではありません（<em class="rfc2119">SHOULD NOT</em>）。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-136">
                    <div role="heading" class="note-title marker" id="h-note-136" aria-level="5"><span>注</span></div>
                    <p class="">
                        そのようなトラックの復号 — 特にユーザーエージェントに返せる形での復号 —
                        は一般に実装でサポートされていません。したがって、そのようなトラックを暗号化すると、ユーザーエージェントの実装でアクセシビリティ機能に広く利用されることが妨げられます。
                    </p>
                </div>
                <p>
                    アクセシビリティ情報が利用可能な形で提供されることを確実にするために、インバンドのサポートコンテンツの暗号化をサポートする実装については: a) <a
                        data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-117">CDM</a> は復号済みデータをユーザーエージェントに提供しなければならず（<em
                        class="rfc2119">MUST</em>）、b) ユーザーエージェントはそれを同等の非暗号化サポートコンテンツと同様に処理しなければなりません（例えば <a
                        href="https://html.spec.whatwg.org/multipage/#timed-text-tracks">timed text tracks</a>
                    として公開するなど）（<em class="rfc2119">MUST</em>）。
                </p>
            </section>
        </section>
    </section>
    <section id="common-key-systems">
        <div class="header-wrapper">
            <h2 id="x9-common-key-systems"><bdi class="secno">9. </bdi>
                <dfn id="dfn-common-key-systems" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">共通キーシステム</dfn>
            </h2><a class="self-link" href="#common-key-systems" aria-label="Permalink for Section 9."></a>
        </div>

        <p>
            すべてのユーザーエージェントは <em class="rfc2119">MUST</em> このセクションで説明される共通の <a data-link-type="dfn|abstract-op"
                href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-38">キーシステム</a> をサポートしなければなりません。
        </p>
        <div class="note" role="note" id="issue-container-generatedID-137">
            <div role="heading" class="note-title marker" id="h-note-137" aria-level="3"><span>注</span></div>
            <p class="">
                これは、完全にオープンソースであるユーザーエージェントを含め、すべてのユーザーエージェントでサポートが保証される共通の基本機能レベルが存在することを保証します。したがって、基本的な復号のみを必要とするコンテンツ提供者は、任意のコンテンツ保護プロバイダーと連携することなく、すべてのプラットフォームで動作する簡単なアプリケーションを構築できます。
            </p>
        </div>
        <section id="clear-key">
            <div class="header-wrapper">
                <h3 id="x9-1-clear-key"><bdi class="secno">9.1 </bdi>
                    <dfn id="dfn-clear-key" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">クリアキー</dfn>
                </h3><a class="self-link" href="#clear-key" aria-label="Permalink for Section 9.1"></a>
            </div>

            <p>
                <code>"org.w3.clearkey"</code> の <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                    class="internalDFN" id="ref-for-dfn-key-system-39">キーシステム</a>
                は、平文のクリア（暗号化されていない）キーを使用してソースを復号します。追加のクライアント側コンテンツ保護は不要です。本 <a data-link-type="dfn|abstract-op"
                    href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-40">キーシステム</a> は以下に記述します。
            </p>
            <section id="clear-key-capabilities">
                <div class="header-wrapper">
                    <h4 id="x9-1-1-capabilities"><bdi class="secno">9.1.1 </bdi>
                        能力
                    </h4><a class="self-link" href="#clear-key-capabilities"
                        aria-label="Permalink for Section 9.1.1"></a>
                </div>

                <p>
                    以下は <a data-link-type="dfn|abstract-op" href="#dfn-clear-key" class="internalDFN"
                        id="ref-for-dfn-clear-key-2">クリアキー</a> が <a data-link-type="dfn|abstract-op"
                        href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-41">キーシステム
                    </a>）固有の機能をどのようにサポートするかの説明です: </p>
                <ul>
                    <li>
                        <p>
                            <a data-link-type="idl" data-lt="MediaKeySystemConfiguration"
                                href="#dom-mediakeysystemconfiguration" class="internalDFN"
                                id="ref-for-dom-mediakeysystemconfiguration-12"><code>MediaKeySystemConfiguration</code></a>:
                        </p>
                        <ol>
                            <li>
                                <p>
                                    <a data-link-type="idl" href="#dom-mediakeysystemmediacapability-encryptionscheme"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme-6"><code>encryptionScheme</code></a>:
                                    実装は <em class="rfc2119">MUST</em>
                                    <code><a data-link-type="dfn|abstract-op" href="#scheme-cenc" class="internalDFN" id="ref-for-scheme-cenc-1"><code>"cenc"</code>
                                    </a></code> スキームをサポートし、他のスキームをサポートしてもよい（<em class="rfc2119">MAY</em>）。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <a data-link-type="idl" href="#dom-mediakeysystemmediacapability-robustness"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysystemmediacapability-robustness-4"><code>robustness</code></a>:
                                    空文字列のみがサポートされます。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <a data-link-type="idl"
                                        href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-26"><code>distinctiveIdentifier</code></a>:
                                    "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysrequirement-required-19"><code>required</code></a>"
                                    はサポートされません。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-persistentstate"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysystemconfiguration-persistentstate-12"><code>persistentState</code></a>:
                                    アプリケーションが非 "<a data-link-type="idl" href="#dom-mediakeysessiontype-temporary"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysessiontype-temporary-13"><code>temporary</code></a>"
                                    セッションを作成するつもりでない限り、"<a data-link-type="idl"
                                        href="#dom-mediakeysrequirement-required" class="internalDFN"
                                        id="ref-for-dom-mediakeysrequirement-required-20"><code>required</code></a>"
                                    ではありません。
                                </p>
                            </li>
                        </ol>
                    </li>
                    <li>
                        <p>
                            "<a data-link-type="idl" href="#dom-mediakeysessiontype-persistent-license"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysessiontype-persistent-license-8"><code>persistent-license</code></a>"
                            <a data-link-type="idl" data-lt="MediaKeySessionType" href="#dom-mediakeysessiontype"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysessiontype-6"><code>MediaKeySessionType</code></a>:
                            実装はこのタイプをサポートしてもよい（<em class="rfc2119">MAY</em>）。
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="idl" data-lt="setServerCertificate()"
                                href="#dom-mediakeys-setservercertificate" class="internalDFN"
                                id="ref-for-dom-mediakeys-setservercertificate-2"><code>setServerCertificate</code></a><code>()</code>
                            メソッド: サポートされません。
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="idl" data-lt="getStatusForPolicy()"
                                href="#dom-mediakeys-getstatusforpolicy" class="internalDFN"
                                id="ref-for-dom-mediakeys-getstatusforpolicy-3"><code>getStatusForPolicy</code></a><code>()</code>
                            メソッド: 実装は常にプロミスを "<a data-link-type="idl" href="#dom-mediakeystatus-usable"
                                class="internalDFN" id="ref-for-dom-mediakeystatus-usable-4"><code>usable</code></a>"
                            と解決すべきです。
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="idl" data-lt="setMediaKeys()" href="#dom-htmlmediaelement-setmediakeys"
                                class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-setmediakeys-5"><code>setMediaKeys</code></a><code>()</code>
                            メソッド: 実装は <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys"
                                class="internalDFN" id="ref-for-dom-mediakeys-40"><code>MediaKeys</code></a> オブジェクトを複数の
                            <a data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement"
                                class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-29"><code>HTMLMediaElement</code></a>
                            に関連付けることをサポートしてもよい（<em class="rfc2119">MAY</em>）。
                        </p>
                    </li>
                </ul>
            </section>
            <section id="clear-key-behavior">
                <div class="header-wrapper">
                    <h4 id="x9-1-2-behavior"><bdi class="secno">9.1.2 </bdi>
                        動作
                    </h4><a class="self-link" href="#clear-key-behavior" aria-label="Permalink for Section 9.1.2"></a>
                </div>

                <p>
                    以下は <a data-link-type="dfn|abstract-op" href="#dfn-clear-key" class="internalDFN"
                        id="ref-for-dfn-clear-key-3">クリアキー</a> が <a data-link-type="dfn|abstract-op"
                        href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-42">キーシステム</a>
                    固有の動作をどのように実装するかの説明です:
                </p>
                <ul>
                    <li>
                        <p>
                            <a data-link-type="idl" data-lt="generateRequest()"
                                href="#dom-mediakeysession-generaterequest" class="internalDFN"
                                id="ref-for-dom-mediakeysession-generaterequest-6"><code>generateRequest</code></a><code>()</code>
                            アルゴリズム:
                        </p>
                        <ul>
                            <li>
                                <p>
                                    生成される <var>message</var> は <a href="#clear-key-request-format">License Request
                                        Format</a> に記載されたとおり UTF-8 でエンコードされた JSON オブジェクトです。
                                </p>
                            </li>
                            <li>
                                <p>
                                    リクエストは <var>sanitized init data</var> からキーIDを抽出することによって生成されます。
                                </p>
                            </li>
                            <li>
                                <p>
                                    "type" メンバの値は <var>sessionType</var> パラメータの値です。
                                </p>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="idl" href="#dom-mediakeysession-sessionid" class="internalDFN"
                                id="ref-for-dom-mediakeysession-sessionid-8"><code>sessionId</code></a> 属性は 32
                            ビット整数で表現可能な数値です。
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="idl" href="#dom-mediakeysession-expiration" class="internalDFN"
                                id="ref-for-dom-mediakeysession-expiration-5"><code>expiration</code></a> 属性は常に
                            <code>NaN</code> です。
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysession-update-14"><code>update</code></a><code>()</code>
                            アルゴリズム:
                        </p>
                        <ul>
                            <li>
                                <p>
                                    <var>response</var> パラメータは <a href="#clear-key-license-format">License Format</a>
                                    に記載された JWK Set、または <a href="#clear-key-release-ack-format">License Release
                                        Acknowledgement Format</a> に記載された UTF-8 でエンコードされた JSON オブジェクトのいずれかです。
                                </p>
                            </li>
                            <li>
                                <p>
                                    前者の場合、少なくとも音声/映像タイプに対して有効な長さの少なくとも一つの有効な JWK キーを含む有効な JWK Set でない場合、<var>sanitized
                                        response</var> は無効と見なされます。後者の場合、<var>sanitized response</var> は有効な JSON
                                    オブジェクトでない場合に無効と見なされます。
                                </p>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <p>
                            タイプが "<a data-link-type="idl" href="#dom-mediakeysessiontype-persistent-license"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysessiontype-persistent-license-9"><code>persistent-license</code></a>"
                            のセッションに対しては、
                            <a data-link-type="idl" data-lt="remove()" href="#dom-mediakeysession-remove"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysession-remove-4"><code>remove</code></a><code>()</code>
                            アルゴリズムにおいて、<var>record of license destruction</var> を反映する <var>message</var> は <a
                                href="#clear-key-release-format">License Release Format</a> に記載されたとおり UTF-8 でエンコードされた
                            JSON オブジェクトです。
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="idl" href="#dom-mediakeysession-keystatuses" class="internalDFN"
                                id="ref-for-dom-mediakeysession-keystatuses-5"><code>keyStatuses</code></a> 属性は最初、<a
                                data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysession-update-15"><code>update</code></a><code>()</code>
                            によって提供されたすべてのキーID を含み、それらのステータスは "<a data-link-type="idl" href="#dom-mediakeystatus-usable"
                                class="internalDFN" id="ref-for-dom-mediakeystatus-usable-5"><code>usable</code></a>"
                            です。<a data-link-type="idl" data-lt="remove()" href="#dom-mediakeysession-remove"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysession-remove-5"><code>remove</code></a><code>()</code>
                            アルゴリズムが実行されると、<a data-link-type="idl" href="#dom-mediakeysession-keystatuses"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysession-keystatuses-6"><code>keyStatuses</code></a>
                            属性は空のリストに設定されます。
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                                id="ref-for-dfn-initialization-data-21">Initialization Data</a>:
                            実装は登録された Initialization Data Types [<cite><a class="bibref" data-link-type="biblio"
                                    href="#bib-eme-initdata-registry"
                                    title="Encrypted Media Extensions Initialization Data Format Registry">EME-INITDATA-REGISTRY</a></cite>]
                            の任意の組み合わせをサポートしてもよい（<em class="rfc2119">MAY</em>）。実装は <code>"keyids"</code> タイプ [<cite><a
                                    class="bibref" data-link-type="biblio" href="#bib-eme-initdata-keyids"
                                    title="&quot;keyids&quot; Initialization Data Format">EME-INITDATA-KEYIDS</a></cite>]
                            や、ユーザーエージェントがサポートするコンテンツタイプに適した他のタイプをサポートすることが推奨されます（<em class="rfc2119">SHOULD</em>）。
                        </p>
                    </li>
                </ul>
            </section>
            <section id="clear-key-request-format">
                <div class="header-wrapper">
                    <h4 id="x9-1-3-license-request-format"><bdi class="secno">9.1.3 </bdi>
                        ライセンス要求フォーマット
                    </h4><a class="self-link" href="#clear-key-request-format"
                        aria-label="Permalink for Section 9.1.3"></a>
                </div>

                <p>
                    本節では、<a data-link-type="idl" data-lt="message" href="#dfn-message" class="internalDFN"
                        id="ref-for-dfn-message-9"><code><code>message</code></code></a> イベントの message
                    属性を通じてアプリケーションに提供されるライセンス要求のフォーマットについて説明します。
                </p>
                <p>
                    フォーマットは以下のメンバーを含む JSON オブジェクトです:
                </p>
                <dl>
                    <dt>
                        "kids"
                    </dt>
                    <dd>
                        <a data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id" class="internalDFN"
                            id="ref-for-dfn-decryption-key-id-14">key ID</a> の配列。配列の各要素はキーID 値を含むオクテット列の base64url
                        エンコーディングです。
                    </dd>
                    <dt>
                        "type"
                    </dt>
                    <dd>
                        要求された <a data-link-type="idl" data-lt="MediaKeySessionType" href="#dom-mediakeysessiontype"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysessiontype-7"><code>MediaKeySessionType</code></a>。
                    </dd>
                </dl>
                <p>
                    ArrayBuffer の形で <a data-link-type="idl" href="#dom-mediakeymessageevent-message" class="internalDFN"
                        id="ref-for-dom-mediakeymessageevent-message-3"><code>message</code></a>
                    属性に含まれる場合、JSON 文字列は Encoding 仕様 [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-encoding" title="Encoding Standard">ENCODING</a></cite>] に従って UTF-8
                    でエンコードされます。アプリケーションは <a data-link-type="interface" data-lt="TextDecoder"
                        href="https://encoding.spec.whatwg.org/#textdecoder"><code>TextDecoder</code></a> インターフェイスを使用して
                    ArrayBuffer の内容を JSON 文字列にデコードしてもよい（<em class="rfc2119">MAY</em>）。
                </p>
                <section id="clear-key-request-format-example" class="informative">
                    <div class="header-wrapper">
                        <h5 id="x9-1-3-1-example"><bdi class="secno">9.1.3.1 </bdi>
                            例
                        </h5><a class="self-link" href="#clear-key-request-format-example"
                            aria-label="Permalink for Section 9.1.3.1"></a>
                    </div>
                    <p><em>この節は規範ではありません。</em></p>

                    <p>
                        以下の例は、2 つのキーID に対する一時ライセンスのライセンス要求です。（改行は読みやすさのためのものです。）
                    </p>
                    <div class="example" id="example-1">
                        <div class="marker">
                            <a class="self-link" href="#example-1">Example<bdi> 1</bdi></a>
                        </div>
                        <pre class="highlight" aria-busy="false"><code class="hljs json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"kids"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"LwVHf8JLtPrv2GUXFW2v_A"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"0DdtU9od-Bh5L3xbv0Xf_A"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"temporary"</span>
<span class="hljs-punctuation">}</span></code></pre>
                    </div>
                </section>
            </section>
            <section id="clear-key-license-format">
                <div class="header-wrapper">
                    <h4 id="x9-1-4-license-format"><bdi class="secno">9.1.4 </bdi>
                        ライセンスフォーマット
                    </h4><a class="self-link" href="#clear-key-license-format"
                        aria-label="Permalink for Section 9.1.4"></a>
                </div>

                <p>
                    本節では、<a data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysession-update-16"><code>update</code></a><code>()</code> メソッドの
                    <var>response</var> パラメータを通じて提供されるライセンスのフォーマットについて説明します。
                </p>
                <p>
                    フォーマットは、復号に使用される対称鍵の表現を含む JSON Web Key (JWK) Set であり、JSON Web Key (JWK) 仕様 [<cite><a class="bibref"
                            data-link-type="biblio" href="#bib-rfc7517" title="JSON Web Key (JWK)">RFC7517</a></cite>]
                    に定義されます。
                </p>
                <p>
                    セット内の各 JWK について、パラメータ値は次のとおりです:
                </p>
                <dl>
                    <dt>
                        "kty" (鍵タイプ)
                    </dt>
                    <dd>
                        "oct"（オクテット列）。
                    </dd>
                    <dt>
                        "k" (鍵値)
                    </dt>
                    <dd>
                        対称 <a data-link-type="dfn|abstract-op" href="#dfn-key-s" class="internalDFN"
                            id="ref-for-dfn-key-s-6">key</a> 値を含むオクテット列の base64url エンコーディング。
                    </dd>
                    <dt>
                        "kid" (キーID)
                    </dt>
                    <dd>
                        <a data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id" class="internalDFN"
                            id="ref-for-dfn-decryption-key-id-15">key ID</a> 値を含むオクテット列の base64url エンコーディング。
                    </dd>
                </dl>
                <p>
                    JSON オブジェクトはオプションの "type" メンバ値を持っていてもよく（<em class="rfc2119">MAY</em>）、その場合は <a data-link-type="idl"
                        data-lt="MediaKeySessionType" href="#dom-mediakeysessiontype" class="internalDFN"
                        id="ref-for-dom-mediakeysessiontype-8"><code>MediaKeySessionType</code></a>
                    の値のいずれかでなければなりません（<em class="rfc2119">MUST</em>）。指定されない場合、デフォルト値として "<a data-link-type="idl"
                        href="#dom-mediakeysessiontype-temporary" class="internalDFN"
                        id="ref-for-dom-mediakeysessiontype-temporary-14"><code>temporary</code></a>" が使用されます。<a
                        data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update" class="internalDFN"
                        id="ref-for-dom-mediakeysession-update-17"><code>update</code></a><code>()</code> アルゴリズムはこの値を
                    <var>sessionType</var> と比較します。
                </p>
                <p>
                    <a data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update" class="internalDFN"
                        id="ref-for-dom-mediakeysession-update-18"><code>update</code></a><code>()</code> メソッドに
                    ArrayBuffer として <var>response</var> パラメータで渡される場合、JSON 文字列は Encoding 仕様 [<cite><a class="bibref"
                            data-link-type="biblio" href="#bib-encoding" title="Encoding Standard">ENCODING</a></cite>]
                    に従って UTF-8 でエンコードされていなければなりません（<em class="rfc2119">MUST</em>）。アプリケーションは <a
                        data-link-type="interface" data-lt="TextEncoder"
                        href="https://encoding.spec.whatwg.org/#textencoder"><code>TextEncoder</code></a> インターフェイスを使用して
                    JSON 文字列をエンコードしてもよい（<em class="rfc2119">MAY</em>）。
                </p>
                <section id="clear-key-license-format-example" class="informative">
                    <div class="header-wrapper">
                        <h5 id="x9-1-4-1-example"><bdi class="secno">9.1.4.1 </bdi>
                            例
                        </h5><a class="self-link" href="#clear-key-license-format-example"
                            aria-label="Permalink for Section 9.1.4.1"></a>
                    </div>
                    <p><em>この節は規範ではありません。</em></p>

                    <p>
                        以下の例は、単一の対称鍵を含む JWK Set です。（改行は読みやすさのためのものです。）
                    </p>
                    <div class="example" id="example-2">
                        <div class="marker">
                            <a class="self-link" href="#example-2">Example<bdi> 2</bdi></a>
                        </div>
                        <pre class="highlight" aria-busy="false"><code class="hljs json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"keys"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"kty"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"oct"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tQ0bJVWb6b0KPL6KtZIy_A"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"kid"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"LwVHf8JLtPrv2GUXFW2v_A"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"temporary"</span>
<span class="hljs-punctuation">}</span></code></pre>
                    </div>
                </section>
            </section>
            <section id="clear-key-release-format">
                <div class="header-wrapper">
                    <h4 id="x9-1-5-license-release-format"><bdi class="secno">9.1.5 </bdi>
                        ライセンス解除フォーマット
                    </h4><a class="self-link" href="#clear-key-release-format"
                        aria-label="Permalink for Section 9.1.5"></a>
                </div>

                <p>
                    本節では、<a data-link-type="idl" data-lt="message" href="#dfn-message" class="internalDFN"
                        id="ref-for-dfn-message-10"><code><code>message</code></code></a> イベントの message
                    属性を通じて提供されるライセンス解除メッセージのフォーマットについて説明します。
                </p>
                <p>
                    フォーマットは JSON オブジェクトです。タイプが "<a data-link-type="idl"
                        href="#dom-mediakeysessiontype-persistent-license" class="internalDFN"
                        id="ref-for-dom-mediakeysessiontype-persistent-license-10"><code>persistent-license</code></a>"
                    のセッションの場合、オブジェクトは次のメンバを含める必要があります:
                </p>
                <dl>
                    <dt>
                        "kids"
                    </dt>
                    <dd>
                        <a data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id" class="internalDFN"
                            id="ref-for-dfn-decryption-key-id-16">key ID</a>の配列。配列の各要素はキーID 値を含むオクテット列の base64url
                        エンコーディングです。
                    </dd>
                </dl>
                <p>
                    ArrayBuffer の形で <a data-link-type="idl" href="#dom-mediakeymessageevent-message" class="internalDFN"
                        id="ref-for-dom-mediakeymessageevent-message-4"><code>message</code></a>
                    属性に含まれる場合、JSON 文字列は Encoding 仕様 [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-encoding" title="Encoding Standard">ENCODING</a></cite>] に従って UTF-8
                    でエンコードされます。アプリケーションは <a data-link-type="interface" data-lt="TextDecoder"
                        href="https://encoding.spec.whatwg.org/#textdecoder"><code>TextDecoder</code></a> インターフェイスを使用して
                    ArrayBuffer の内容を JSON 文字列にデコードしてもよい（<em class="rfc2119">MAY</em>）。
                </p>
                <section id="clear-key-release-format-example-1" class="informative">
                    <div class="header-wrapper">
                        <h5 id="x9-1-5-1-example-message-reflecting-a-record-of-license-destruction"><bdi
                                class="secno">9.1.5.1 </bdi>
                            ライセンス破棄の記録を反映する例のメッセージ
                        </h5><a class="self-link" href="#clear-key-release-format-example-1"
                            aria-label="Permalink for Section 9.1.5.1"></a>
                    </div>
                    <p><em>この節は規範ではありません。</em></p>

                    <p>
                        以下の例は、2 つのキーを含んでいた "<a data-link-type="idl" href="#dom-mediakeysessiontype-persistent-license"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysessiontype-persistent-license-11"><code>persistent-license</code></a>"
                        セッションのライセンス解除です。（改行は読みやすさのためのものです。）
                    </p>
                    <div class="example" id="example-3">
                        <div class="marker">
                            <a class="self-link" href="#example-3">Example<bdi> 3</bdi></a>
                        </div>
                        <pre class="highlight" aria-busy="false"><code class="hljs json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"kids"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span> <span class="hljs-string">"LwVHf8JLtPrv2GUXFW2v_A"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"0DdtU9od-Bh5L3xbv0Xf_A"</span> <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span></code></pre>
                    </div>
                </section>
            </section>
            <section id="clear-key-release-ack-format">
                <div class="header-wrapper">
                    <h4 id="x9-1-6-license-release-acknowledgement-format"><bdi class="secno">9.1.6 </bdi>
                        ライセンス解除確認フォーマット
                    </h4><a class="self-link" href="#clear-key-release-ack-format"
                        aria-label="Permalink for Section 9.1.6"></a>
                </div>

                <p>
                    本節では、<a data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysession-update-19"><code>update</code></a><code>()</code> メソッドの
                    <var>response</var> パラメータを通じて提供されるライセンス解除確認のフォーマットについて説明します。
                </p>
                <p>
                    フォーマットは次のメンバを含む JSON オブジェクトです:
                </p>
                <dl>
                    <dt>
                        "kids"
                    </dt>
                    <dd>
                        <a data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id" class="internalDFN"
                            id="ref-for-dfn-decryption-key-id-17">key ID</a>の配列。配列の各要素はキーID 値を含むオクテット列の base64url
                        エンコーディングです。
                    </dd>
                </dl>
                <p>
                    <a data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update" class="internalDFN"
                        id="ref-for-dom-mediakeysession-update-20"><code>update</code></a><code>()</code> メソッドに
                    ArrayBuffer として <var>response</var> パラメータで渡される場合、JSON 文字列は Encoding 仕様 [<cite><a class="bibref"
                            data-link-type="biblio" href="#bib-encoding" title="Encoding Standard">ENCODING</a></cite>]
                    に従って UTF-8 でエンコードされていなければなりません（<em class="rfc2119">MUST</em>）。アプリケーションは <a
                        data-link-type="interface" data-lt="TextEncoder"
                        href="https://encoding.spec.whatwg.org/#textencoder"><code>TextEncoder</code></a> インターフェイスを使用して
                    JSON 文字列をエンコードしてもよい（<em class="rfc2119">MAY</em>）。
                </p>
                <section id="clear-key-release-ack-format-example" class="informative">
                    <div class="header-wrapper">
                        <h5 id="x9-1-6-1-example"><bdi class="secno">9.1.6.1 </bdi>
                            例
                        </h5><a class="self-link" href="#clear-key-release-ack-format-example"
                            aria-label="Permalink for Section 9.1.6.1"></a>
                    </div>
                    <p><em>この節は規範ではありません。</em></p>

                    <p>
                        以下の例は、2 つのキーID に対する一時ライセンスのライセンス要求です。（改行は読みやすさのためのものです。）
                    </p>
                    <div class="example" id="example-4">
                        <div class="marker">
                            <a class="self-link" href="#example-4">Example<bdi> 4</bdi></a>
                        </div>
                        <pre class="highlight" aria-busy="false"><code class="hljs json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"kids"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"LwVHf8JLtPrv2GUXFW2v_A"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"0DdtU9od-Bh5L3xbv0Xf_A"</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span></code></pre>
                    </div>
                </section>
            </section>
            <section id="using-base64url" class="informative">
                <div class="header-wrapper">
                    <h4 id="x9-1-7-using-base64url"><bdi class="secno">9.1.7 </bdi>
                        base64url の使用
                    </h4><a class="self-link" href="#using-base64url" aria-label="Permalink for Section 9.1.7"></a>
                </div>
                <p><em>この節は規範ではありません。</em></p>

                <p>
                    base64url とそれを扱う方法の詳細については、"Base64url Encoding" 用語定義および "Notes on implementing base64url encoding
                    without padding" を [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc7515"
                            title="JSON Web Signature (JWS)">RFC7515</a></cite>] で参照してください。具体的には '=' パディングは存在せず、文字 '-'
                    および '_' はそれぞれ '+' および '/' の代わりに使用されなければなりません（<em class="rfc2119">MUST</em>）。
                </p>
            </section>
        </section>
    </section>
    <section id="security">
        <div class="header-wrapper">
            <h2 id="x10-security"><bdi class="secno">10. </bdi>
                Security
            </h2><a class="self-link" href="#security" aria-label="Permalink for Section 10."></a>
        </div>

        <section id="input-data-security">
            <div class="header-wrapper">
                <h3 id="x10-1-input-data-attacks-and-vulnerabilities"><bdi class="secno">10.1 </bdi>
                    Input Data Attacks and Vulnerabilities
                </h3><a class="self-link" href="#input-data-security" aria-label="Permalink for Section 10.1"></a>
            </div>

            <p>
                User Agent and <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                    id="ref-for-dfn-key-system-43">Key System</a> implementations <em class="rfc2119">MUST</em> consider
                <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/media.html#media-data">media
                    data</a>, <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                    id="ref-for-dfn-initialization-data-22">Initialization Data</a>, data passed to <a
                    data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update" class="internalDFN"
                    id="ref-for-dom-mediakeysession-update-21"><code>update</code></a><code>()</code>, licenses,
                key data, and all other data provided by the application as untrusted content and
                potential attack vectors. They <em class="rfc2119">MUST</em> use appropriate safeguards to mitigate any
                associated
                threats and take care to safely parse, decrypt, etc. such data. User Agents <em
                    class="rfc2119">SHOULD</em>
                validate data before passing it to the <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                    class="internalDFN" id="ref-for-dfn-cdm-118">CDM</a>.
            </p>
            <div class="note" role="note" id="issue-container-generatedID-138">
                <div role="heading" class="note-title marker" id="h-note-138" aria-level="4"><span>Note</span></div>
                <p class="">
                    Such validation is especially important if the <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                        class="internalDFN" id="ref-for-dfn-cdm-119">CDM</a> does not run in the same
                    (sandboxed) context as, for example, the DOM.
                </p>
            </div>
            <p>
                Implementations <em class="rfc2119">MUST NOT</em> return active content or passive content that affects
                program
                control flow to the application.
            </p>
            <div class="note" role="note" id="issue-container-generatedID-139">
                <div role="heading" class="note-title marker" id="h-note-139" aria-level="4"><span>Note</span></div>
                <p class="">
                    For example, it is not safe to expose URLs or other information that may have come from
                    media data, such as is the case for the <a data-link-type="dfn|abstract-op"
                        href="#dfn-initialization-data" class="internalDFN"
                        id="ref-for-dfn-initialization-data-23">Initialization Data</a> passed to
                    <a data-link-type="idl" data-lt="generateRequest()" href="#dom-mediakeysession-generaterequest"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysession-generaterequest-7"><code>generateRequest</code></a><code>()</code>.
                    Applications must determine the URLs to use. The
                    <a data-link-type="idl" href="#dom-mediakeymessageevent-messagetype" class="internalDFN"
                        id="ref-for-dom-mediakeymessageevent-messagetype-3"><code>messageType</code></a> attribute of
                    the <a data-link-type="idl" data-lt="message" href="#dfn-message" class="internalDFN"
                        id="ref-for-dfn-message-11"><code><code>message</code></code></a> event can be used by
                    the application to select among a set of URLs if applicable.
                </p>
            </div>
        </section>
        <section id="cdm-security">
            <div class="header-wrapper">
                <h3 id="x10-2-cdm-attacks-and-vulnerabilities"><bdi class="secno">10.2 </bdi>
                    CDM Attacks and Vulnerabilities
                </h3><a class="self-link" href="#cdm-security" aria-label="Permalink for Section 10.2"></a>
            </div>

            <p>
                User Agents are responsible for providing users with a secure way to browse the web. This
                responsibility applies to any functionality used by User Agents, including
                functionalities from third parties. User agent implementers <em class="rfc2119">MUST</em> obtain
                sufficient
                information from <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                    id="ref-for-dfn-key-system-44">Key System</a> implementers to enable them to properly assess the
                security implications of integrating with the <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                    class="internalDFN" id="ref-for-dfn-key-system-45">Key System</a>. User agent implementers
                <em class="rfc2119">MUST</em> ensure <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                    class="internalDFN" id="ref-for-dfn-cdm-120">CDM</a> implementations provide and/or support
                sufficient controls for the
                user agent to provide security for the user. User agent implementers <em class="rfc2119">MUST</em>
                ensure <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-121">CDM</a>
                implementations can and will be quickly and proactively updated in the event of security
                vulnerabilities.
            </p>
            <p>
                Exploiting a <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-122">CDM</a> implementation that is not fully sandboxed and/or uses platform
                features may allow an attacker to access OS or platform features, elevate privilege
                (e.g., to run as system or root), and/or access drivers, kernel, firmware, hardware, etc.
                Such features, software, and hardware may not be written to be robust against hostile
                software or web-based attacks and may not be updated with security fixes, especially
                compared to the user agent. Lack of, infrequent, or slow updates for fixes to security
                vulnerabilities in <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-123">CDM</a> implementations increases the risk. Such <a
                    data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-124">CDM</a>
                implementations and UAs that expose them <em class="rfc2119">MUST</em> be especially careful in all
                areas of
                security, including parsing of <a href="#input-data-security">all data</a>.
            </p>
            <div class="note" role="note" id="issue-container-generatedID-140">
                <div role="heading" class="note-title marker" id="h-note-140" aria-level="4"><span>Note</span></div>
                <p class="">
                    User agents should be especially diligent when using a <a data-link-type="dfn|abstract-op"
                        href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-125">CDM</a> or underlying mechanism
                    that is part of or provided by the client OS, platform and/or hardware.
                </p>
            </div>
            <p>
                If a user agent chooses to support a <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                    class="internalDFN" id="ref-for-dfn-key-system-46">Key System</a> implementation that cannot be
                sufficiently sandboxed or otherwise secured, the user agent <em class="rfc2119">SHOULD</em> <a
                    href="#security-consent">ensure that users are fully informed and/or give explicit consent</a>
                before loading or invoking it.
            </p>
            <div class="note" role="note" id="issue-container-generatedID-141">
                <div role="heading" class="note-title marker" id="h-note-141" aria-level="4"><span>Note</span></div>
                <p class="">
                    Granting permissions to unauthenticated origins is equivalent to granting the permissions
                    to any origin in the presence of a network attacker. See <a href="#persisted-consent-abuse">abuse of
                        persisted consent</a>.
                </p>
            </div>
        </section>
        <section id="network-attacks">
            <div class="header-wrapper">
                <h3 id="x10-3-network-attacks"><bdi class="secno">10.3 </bdi>
                    Network Attacks
                </h3><a class="self-link" href="#network-attacks" aria-label="Permalink for Section 10.3"></a>
            </div>

            <section class="informative" id="potential-attacks">
                <div class="header-wrapper">
                    <h4 id="x10-3-1-potential-attacks"><bdi class="secno">10.3.1 </bdi>
                        Potential Attacks
                    </h4><a class="self-link" href="#potential-attacks" aria-label="Permalink for Section 10.3.1"></a>
                </div>
                <p><em>This section is non-normative.</em></p>

                <p>
                    Potential network attacks and their implications include:
                </p>
                <ul>
                    <li>
                        <p>
                            DNS spoofing attacks: One cannot guarantee that a host claiming to be in a certain
                            domain (<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>)
                            really is from that domain.
                        </p>
                    </li>
                    <li>
                        <p>
                            Passive network attacks: One cannot guarantee that data, including <a
                                data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-27">Distinctive
                                Identifiers</a> and <a data-link-type="dfn|abstract-op"
                                href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                                id="ref-for-dfn-distinctive-permanent-identifier-s-28">Distinctive Permanent
                                Identifiers</a>, transmitted between the
                            client and server is not viewed by other entities. See <a href="#user-tracking">User
                                Tracking</a>.
                        </p>
                    </li>
                    <li>
                        <p>
                            Active network attacks: One cannot guarantee that Additional scripts or iframes are
                            not injected into pages (both those that use the APIs defined in this specification
                            for legitimate purposes and pages that do not use them). The consequences are that:
                        </p>
                        <ul>
                            <li>
                                <p>
                                    Calls to the APIs defined in this specification can be injected into any page.
                                </p>
                            </li>
                            <li>
                                <p>
                                    Calls to the APIs defined in this specification from pages using them for
                                    legitimate reasons can be manipulated, including modifying the requested
                                    functionality, modifying or adding calls, and modifying or injecting data. See
                                    also <a href="#input-data-security">Input Data Attacks and Vulnerabilities</a>
                                </p>
                            </li>
                            <li>
                                <p>
                                    Data, including <a data-link-type="dfn|abstract-op"
                                        href="#dfn-distinctive-identifier-s" class="internalDFN"
                                        id="ref-for-dfn-distinctive-identifier-s-28">Distinctive Identifiers</a> and <a
                                        data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                                        class="internalDFN"
                                        id="ref-for-dfn-distinctive-permanent-identifier-s-29">Distinctive Permanent
                                        Identifiers</a>, transmitted between the client and server can be viewed and/or
                                    modified by other entities. See <a href="#user-tracking">User Tracking</a>.
                                </p>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <p>
                            <span id="persisted-consent-abuse">Abuse of persisted consent</span>: One cannot
                            guarantee that the host requesting use of the APIs defined in this specification is
                            the host to which the user previously provided consent. The consequences are that
                            granting permissions to unauthenticated origins is equivalent to granting the
                            permissions to any origin in the presence of a network attacker.
                        </p>
                    </li>
                </ul>
            </section>
            <section id="mitigations">
                <div class="header-wrapper">
                    <h4 id="x10-3-2-mitigations"><bdi class="secno">10.3.2 </bdi>
                        Mitigations
                    </h4><a class="self-link" href="#mitigations" aria-label="Permalink for Section 10.3.2"></a>
                </div>

                <p>
                    The following techniques may mitigate the risks:
                </p>
                <dl>
                    <dt>
                        Use TLS
                    </dt>
                    <dd>
                        <p>
                            Applications using TLS can be sure that only the user, software working on behalf
                            of the user, and other pages using TLS that have certificates identifying them as
                            being from the same domain, can interact with that application. Furthermore,
                            <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>-specific
                            permissions in combination with a secure origin, ensure that
                            permissions granted to an application cannot be abused by a network attacker.
                        </p>
                        <p>
                            The APIs defined in this specification are only exposed on secure contexts. See
                            also <a href="#privacy-secureorigin">Secure Origin and Transport</a>.
                        </p>
                    </dd>
                    <dt>
                        Block Mixed Content
                    </dt>
                    <dd>
                        <p>
                            User agents <em class="rfc2119">MUST</em> properly handle Mixed Content [<cite><a
                                    class="bibref" data-link-type="biblio" href="#bib-mixed-content"
                                    title="Mixed Content">MIXED-CONTENT</a></cite>], including
                            blocking "Blockable Content" [<cite><a class="bibref" data-link-type="biblio"
                                    href="#bib-mixed-content" title="Mixed Content">MIXED-CONTENT</a></cite>] to avoid
                            potential exposure to
                            insecure content. Such exposure could compromise other mitigations, such as use of
                            TLS.
                        </p>
                        <p>
                            User agents <em class="rfc2119">MAY</em> choose to block all Mixed Content, including
                            "Optionally-blockable
                            Content" [<cite><a class="bibref" data-link-type="biblio" href="#bib-mixed-content"
                                    title="Mixed Content">MIXED-CONTENT</a></cite>] to further increase security by
                            preventing <a href="#input-data-security">untrusted media data</a> from being passed to the
                            <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-126">CDM</a>
                            (see <a href="#cdm-security">CDM Attacks and Vulnerabilities</a>).
                        </p>
                    </dd>
                    <dt id="security-consent">
                        Fully inform users and/or require explicit user consent
                    </dt>
                    <dd>
                        <p>
                            User agents <em class="rfc2119">SHOULD</em> ensure that users are fully informed and/or give
                            explicit
                            consent before a <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                                class="internalDFN" id="ref-for-dfn-key-system-47">Key System</a> that presents security
                            concerns that are greater
                            than other user agent features (e.g., DOM content) may be accessed by an
                            <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>.
                        </p>
                        <p>
                            Such mechanisms <em class="rfc2119">MUST</em> be per <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> to
                            avoid valid uses enabling subsequent
                            malicious access and <em class="rfc2119">MUST</em> be per <a
                                data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                                id="ref-for-dfn-browsing-profile-10">browsing profile</a>.
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-142">
                            <div role="heading" class="note-title marker" id="h-note-142" aria-level="5">
                                <span>Note</span>
                            </div>
                            <p class="">
                                The restriction of the APIs defined in this specification to secure contexts
                                ensures that a <a href="#network-attacks">network attacker</a> cannot exploit
                                permissions granted to an unauthenticated origin. See <a
                                    href="#persisted-consent-abuse">abuse of persisted consent</a>.
                            </p>
                        </div>
                    </dd>
                </dl>
            </section>
        </section>
        <section id="iframe-attacks">
            <div class="header-wrapper">
                <h3 id="x10-4-iframe-attacks"><bdi class="secno">10.4 </bdi>
                    <code>iframe</code> Attacks
                </h3><a class="self-link" href="#iframe-attacks" aria-label="Permalink for Section 10.4"></a>
            </div>

            <section class="informative" id="potential-attacks-0">
                <div class="header-wrapper">
                    <h4 id="x10-4-1-potential-attacks"><bdi class="secno">10.4.1 </bdi>
                        Potential Attacks
                    </h4><a class="self-link" href="#potential-attacks-0" aria-label="Permalink for Section 10.4.1"></a>
                </div>
                <p><em>This section is non-normative.</em></p>

                <p>
                    Malicious pages could host legitimate applications in an iframe in an attempt hide an
                    attack or deceive the user as to the source, such as making the use appear to be from a
                    legitimate content provider. This is especially relevent for implementations that
                    <a href="#security-consent">inform the user or require consent</a>, such as for
                    security and/or <a href="#privacy-consent">privacy reasons</a>. In addition to <a
                        href="#network-attacks">Network Attacks</a>, attackers could try to exploit legitimate uses
                    of the APIs defined in this specification by hosting them in an <code>iframe</code>. By
                    having the legitimate application performing the actions, the attacker can reuse
                    existing granted permissions (or whitelisting) and/or appear to be a legitimate request
                    or use.
                </p>
            </section>
            <section id="mitigations-0">
                <div class="header-wrapper">
                    <h4 id="x10-4-2-mitigations"><bdi class="secno">10.4.2 </bdi>
                        Mitigations
                    </h4><a class="self-link" href="#mitigations-0" aria-label="Permalink for Section 10.4.2"></a>
                </div>

                <p>
                    User agents that <a href="#security-consent">inform the user or require consent</a>,
                    including for security and/or <a href="#privacy-consent">privacy reasons</a>, <em
                        class="rfc2119">SHOULD</em>
                    base the UI and persistence of consent on the combination of <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> of the
                    top-level <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document">Document</a>
                    and the <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> using the
                    APIs defined in this specification.
                    This ensures that users are informed of the main document making the request and that
                    persisting a permission for one (legitimate) combination does not inadvertently allow
                    malicious use to go undetected.
                </p>
                <p>
                    Authors <em class="rfc2119">SHOULD</em> prevent other entities from hosting their applications in
                    <code>iframe</code>s. Applications that must support being hosted for legitimate
                    application-design reasons <em class="rfc2119">SHOULD NOT</em> allow hosting documents to provide <a
                        href="#input-data-security">any data to be passed to the CDM</a> - either via the APIs
                    defined in this specification or as media data - and <em class="rfc2119">SHOULD NOT</em> allow
                    hosting frames to
                    invoke the APIs defined in this specification.
                </p>
            </section>
        </section>
        <section id="cross-directory-attacks" class="informative">
            <div class="header-wrapper">
                <h3 id="x10-5-cross-directory-attacks"><bdi class="secno">10.5 </bdi>
                    Cross-Directory Attacks
                </h3><a class="self-link" href="#cross-directory-attacks" aria-label="Permalink for Section 10.5"></a>
            </div>
            <p><em>This section is non-normative.</em></p>

            <p>
                Different authors sharing one host name, for example users hosting content on
                <code>geocities.com</code>, all share one <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>. User agents
                do not provide features
                to restrict access to APIs by pathname.
            </p>
            <p>
                Using the APIs defined in this specification on shared hosts compromises origin-based
                security and privacy mitigations implemented by user agents. For example, per-origin
                <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                    id="ref-for-dfn-distinctive-identifier-s-29">Distinctive Identifiers</a> are shared by all authors
                on one host name, and peristed data
                may be accessed and manipulated by any author on the host. The latter is especially
                important if, for example, modification or deletion of such data could erase a user's
                right to specific content.
            </p>
            <div class="note" role="note" id="issue-container-generatedID-143">
                <div role="heading" class="note-title marker" id="h-note-143" aria-level="4"><span>Note</span></div>
                <p class="">
                    Even if a path-restriction feature was made available by user agents, the usual DOM
                    scripting security model would make it trivial to bypass this protection and access the
                    data from any path.
                </p>
            </div>
            <p>
                Authors on shared hosts are therefore <em class="rfc2119">RECOMMENDED</em> to avoid using the APIs
                defined in this
                specification because doing so compromises origin-based security and privacy mitigations
                in user agents.
            </p>
        </section>
    </section>
    <section id="privacy">
        <div class="header-wrapper">
            <h2 id="x11-privacy"><bdi class="secno">11. </bdi>
                Privacy
            </h2><a class="self-link" href="#privacy" aria-label="Permalink for Section 11."></a>
        </div>

        <p>
            The presence or use of <a data-link-type="dfn|abstract-op" data-lt="Key System" href="#dfn-key-system"
                class="internalDFN" id="ref-for-dfn-key-system-48">Key System(s)</a> on a user's device raises a number
            of
            privacy issues, falling into two categories: (a) user-specific information that may be
            disclosed by the EME interface itself or within <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                class="internalDFN" id="ref-for-dfn-key-system-49">Key System</a> messages and (b)
            user-specific information that may be persistently stored on the user's device.
        </p>
        <p>
            User Agents <em class="rfc2119">MUST</em> take responsibility for providing users with adequate control over
            their
            own privacy. Since User Agents may integrate with third party <a data-link-type="dfn|abstract-op"
                href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-127">CDM</a> implementations,
            <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-128">CDM</a>
            implementers <em class="rfc2119">MUST</em> provide sufficient information and controls to user agent
            implementers to enable them to implement appropriate techniques to ensure users have
            control over their privacy, including but not limited to the techniques described below.
        </p>
        <section id="privacy-disclosure">
            <div class="header-wrapper">
                <h3 id="x11-1-information-disclosed-by-eme-and-key-systems"><bdi class="secno">11.1 </bdi>
                    Information Disclosed by EME and Key Systems
                </h3><a class="self-link" href="#privacy-disclosure" aria-label="Permalink for Section 11.1"></a>
            </div>

            <p>
                Concerns regarding information disclosed by EME and <a data-link-type="dfn|abstract-op"
                    href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-50">Key Systems</a> fall into
                two
                categories: (a) concerns about non-specific information that may nevertheless contribute
                to the possibility of fingerprinting a user agent or device and (b) user-specific
                information that may be used directly for <a href="#user-tracking">user tracking</a>.
            </p>
        </section>
        <section id="privacy-fingerprinting">
            <div class="header-wrapper">
                <h3 id="x11-2-fingerprinting"><bdi class="secno">11.2 </bdi>
                    Fingerprinting
                </h3><a class="self-link" href="#privacy-fingerprinting" aria-label="Permalink for Section 11.2"></a>
            </div>

            <p>
                Malicious applications may be able to fingerprint users or user agents by detecting or
                enumerating the list of <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                    id="ref-for-dfn-key-system-51">Key Systems</a> that are supported and related information. If
                proper origin protections are not provided this could include detection of sites that
                have been visited and information stored for those sites. In particular, <a
                    data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                    id="ref-for-dfn-key-system-52">Key Systems</a>
                <em class="rfc2119">MUST</em> not share key or other data between <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origins</a>.
            </p>
        </section>
        <section id="privacy-leakage">
            <div class="header-wrapper">
                <h3 id="x11-3-information-leakage"><bdi class="secno">11.3 </bdi>
                    Information Leakage
                </h3><a class="self-link" href="#privacy-leakage" aria-label="Permalink for Section 11.3"></a>
            </div>

            <section class="informative" id="concerns">
                <div class="header-wrapper">
                    <h4 id="x11-3-1-concerns"><bdi class="secno">11.3.1 </bdi>
                        Concerns
                    </h4><a class="self-link" href="#concerns" aria-label="Permalink for Section 11.3.1"></a>
                </div>
                <p><em>This section is non-normative.</em></p>

                <p>
                    CDMs, especially those implemented outside the user agent, may not have the same
                    fundamental isolations as the web platform. It is important that steps be taken to
                    avoid information leakage, especially across origins. This includes both in-memory and
                    stored data. Failure to do so could lead to information leakage to/from private
                    browsing sessions, across <a data-link-type="dfn|abstract-op" href="#dfn-browsing-profile"
                        class="internalDFN" id="ref-for-dfn-browsing-profile-11">browsing profiles</a> (including across
                    operating system user
                    accounts) and even across different browsers or applications.
                </p>
            </section>
            <section id="mitigations-1">
                <div class="header-wrapper">
                    <h4 id="x11-3-2-mitigations"><bdi class="secno">11.3.2 </bdi>
                        Mitigations
                    </h4><a class="self-link" href="#mitigations-1" aria-label="Permalink for Section 11.3.2"></a>
                </div>

                <p>
                    To avoid such issues, user agent and <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                        class="internalDFN" id="ref-for-dfn-cdm-129">CDM</a> implementations <em
                        class="rfc2119">MUST</em> ensure that:
                </p>
                <ul>
                    <li>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-130">CDMs</a> have a concept of a <a
                                data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-131">CDM</a> instance that is associated one-to-one with a
                            <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                                id="ref-for-dom-mediakeys-41"><code>MediaKeys</code></a> object.
                        </p>
                    </li>
                    <li>
                        <p>
                            Keys, licenses, other session data, and the presence of sessions are restricted to
                            the <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-132">CDM</a> instance associated with the <a data-link-type="idl"
                                data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                                id="ref-for-dom-mediakeys-42"><code>MediaKeys</code></a> object that created the
                            session.
                        </p>
                    </li>
                    <li>
                        <p>
                            Session data is not shared between <a data-link-type="idl" data-lt="MediaKeys"
                                href="#dom-mediakeys" class="internalDFN"
                                id="ref-for-dom-mediakeys-43"><code>MediaKeys</code></a> objects or <a
                                data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-133">CDM</a> instances.
                        </p>
                    </li>
                    <li>
                        <p>
                            Session data is not shared with media elements not associated with the
                            <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                                id="ref-for-dom-mediakeys-44"><code>MediaKeys</code></a> object that created the
                            session. Among other things, this means a
                            session's keys <em class="rfc2119">MUST</em> not be used to decrypt content loaded by a
                            media element whose
                            <a data-link-type="idl" href="#dom-htmlmediaelement-mediakeys" class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-mediakeys-10"><code>mediaKeys</code></a> attribute is
                            not that <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys"
                                class="internalDFN" id="ref-for-dom-mediakeys-45"><code>MediaKeys</code></a> object.
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                                id="ref-for-dom-mediakeys-46"><code>MediaKeys</code></a> objects and the underlying
                            implementation do not expose information
                            outside the <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>.
                        </p>
                    </li>
                    <li>
                        <p>
                            Persisted session data, if applicable, is stored on a per-<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                            basis.
                        </p>
                    </li>
                    <li>
                        <p>
                            Only data stored by the requesting <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                            may be loaded.
                        </p>
                    </li>
                    <li>
                        <p>
                            It is not possible to extract, derive or infer information from the <a
                                data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-134">CDM</a> that is
                            not either explicitly described in this specification or available to the page
                            through other web platform APIs without user permission. This applies to any
                            information that is exposed outside the client device or to the application,
                            including, for example, in <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                class="internalDFN" id="ref-for-dfn-cdm-135">CDM</a> messages.
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-144">
                            <div role="heading" class="note-title marker" id="h-note-144" aria-level="5">
                                <span>Note</span>
                            </div>
                            <div class="">
                                <p>
                                    The type of information covered by this requirement includes but is not limited
                                    to:
                                </p>
                                <ul>
                                    <li>
                                        <p>
                                            Location, including geolocation
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            Credentials or identifiers other than <a data-link-type="dfn|abstract-op"
                                                href="#dfn-distinctive-identifier-s" class="internalDFN"
                                                id="ref-for-dfn-distinctive-identifier-s-30">Distinctive Identifiers</a>
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            OS account name and other potential PII
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            Local directory paths, which may contain similar information.
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            Local network details (for example, the device's local IP address)
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            Local devices, including but not limited to Bluetooth, USB, and user media.
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            User state not associated with or stored as a result of the APIs defined in
                                            this specification.
                                        </p>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </li>
                </ul>
            </section>
        </section>
        <section id="user-tracking">
            <div class="header-wrapper">
                <h3 id="x11-4-user-tracking"><bdi class="secno">11.4 </bdi>
                    User Tracking
                </h3><a class="self-link" href="#user-tracking" aria-label="Permalink for Section 11.4"></a>
            </div>

            <section class="informative" id="concerns-0">
                <div class="header-wrapper">
                    <h4 id="x11-4-1-concerns"><bdi class="secno">11.4.1 </bdi>
                        Concerns
                    </h4><a class="self-link" href="#concerns-0" aria-label="Permalink for Section 11.4.1"></a>
                </div>
                <p><em>This section is non-normative.</em></p>

                <p>
                    A third-party host (or any entity, such as an advertiser, capable of getting content
                    distributed to multiple sites) could use a <a data-link-type="dfn|abstract-op"
                        href="#dfn-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-identifier-s-31">Distinctive Identifier</a> or persistent
                    data, including licenses, keys, key IDs, or <a data-link-type="dfn|abstract-op"
                        href="#dfn-record-s-of-license-destruction" class="internalDFN"
                        id="ref-for-dfn-record-s-of-license-destruction-14">records of license destruction</a>, stored
                    by or on behalf of the <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-136">CDM</a> to track a user across multiple sessions (including
                    across <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origins</a> and <a
                        data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                        id="ref-for-dfn-browsing-profile-12">browsing profiles</a>), building a profile of the user's
                    activities or interests. Such tracking would undermine the privacy protections provided
                    by the rest of the web platform and could, for example, enable highly-targeted
                    advertising not otherwise possible. In conjunction with a site that is aware of the
                    user's real identity (for example, a content provider or e-commerce site that requires
                    authenticated credentials), this could allow oppressive groups to target individuals
                    with greater accuracy than in a world with purely anonymous web usage.
                </p>
                <p>
                    User- or client-specific information that could be obtained via implementations of the
                    APIs in this specification includes:
                </p>
                <ul>
                    <li>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                                id="ref-for-dfn-distinctive-identifier-s-32">Distinctive Identifier(s)</a>
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                                class="internalDFN" id="ref-for-dfn-distinctive-permanent-identifier-s-30">Distinctive
                                Permanent Identifier(s)</a>
                        </p>
                    </li>
                    <li>
                        <p>
                            Origins visited (via stored or in-memory data, permissions, etc.)
                        </p>
                    </li>
                    <li>
                        <p>
                            Content viewed (via stored or in-memory licenses, keys, key IDs, <a
                                data-link-type="dfn|abstract-op" href="#dfn-record-s-of-license-destruction"
                                class="internalDFN" id="ref-for-dfn-record-s-of-license-destruction-15">records of
                                license destruction</a>, etc.)
                        </p>
                    </li>
                </ul>
                <p>
                    This specification presents a specific concern because such information is commonly
                    stored outside the user agent (and associated <a data-link-type="dfn|abstract-op"
                        href="#dfn-browsing-profile" class="internalDFN" id="ref-for-dfn-browsing-profile-13">browsing
                        profile</a> storage), often in
                    the <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-137">CDM</a>.
                </p>
                <p>
                    Since the content of licenses and <a data-link-type="dfn|abstract-op"
                        href="#dfn-record-s-of-license-destruction" class="internalDFN"
                        id="ref-for-dfn-record-s-of-license-destruction-16">records of license destruction</a> are <a
                        data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                        id="ref-for-dfn-key-system-53">Key System</a>-specific and since key IDs may contain any value,
                    these data items could be
                    abused to store user-identifying information.
                </p>
                <p>
                    <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                        id="ref-for-dfn-key-system-54">Key Systems</a> may access or create persistent or
                    semi-persistent identifier(s) for a
                    device or user of a device. In some cases these identifiers may be bound to a specific
                    device in a secure manner. If these identifiers are present in <a data-link-type="dfn|abstract-op"
                        href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-55">Key System</a>
                    messages,
                    then devices and/or users may be tracked. If the mitigations below are not applied,
                    this could include both tracking of users / devices over time and associating multiple
                    users of a given device.
                </p>
                <p>
                    It is important to note that such identifiers, especially those that are non-clearable,
                    non-<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>-specific,
                    or <a data-link-type="dfn|abstract-op" data-lt="permanent identifier"
                        href="#dfn-permanent-identifier-s" class="internalDFN"
                        id="ref-for-dfn-permanent-identifier-s-4">permanent</a>, exceed the tracking
                    impact of existing techniques such as cookies [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-cookies" title="HTTP State Management Mechanism">COOKIES</a></cite>] or session
                    identifiers
                    embedded in URLs.
                </p>
                <p>
                    If not mitigated, such tracking may take three forms depending on the design of the
                    <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                        id="ref-for-dfn-key-system-56">Key System</a>:
                </p>
                <ul>
                    <li>
                        <p>
                            In all cases, such identifiers are expected to be available to sites and/or servers
                            that fully support the <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                                class="internalDFN" id="ref-for-dfn-key-system-57">Key System</a> (and thus can
                            interpret <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-58">Key System</a>
                            messages) enabling tracking by such sites.
                        </p>
                    </li>
                    <li>
                        <p>
                            If identifiers exposed by <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                                class="internalDFN" id="ref-for-dfn-key-system-59">Key Systems</a> are not
                            origin-specific, then two sites
                            and/or servers that fully support the <a data-link-type="dfn|abstract-op"
                                href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-60">Key System</a>
                            may collude to track the user.
                        </p>
                    </li>
                    <li>
                        <p>
                            If <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-61">Key System</a> messages contain information derived from
                            a user identifier in a
                            consistent manner, for example such that a portion of the initial <a
                                data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-62">Key System</a>
                            message for a specific content item does not change over time and is dependent on
                            the user identifier, then this information could be used by any application to
                            track the device or user over time.
                        </p>
                    </li>
                </ul>
                <p>
                    In addition, if a <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                        id="ref-for-dfn-key-system-63">Key System</a> permits keys or other data to be stored and to be
                    re-used between origins, then it may be possible for two origins to collude and track a
                    unique user by recording their ability to access a common key.
                </p>
                <p>
                    Finally, if any user interface for user control of <a data-link-type="dfn|abstract-op"
                        href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-64">Key Systems</a>
                    presents data
                    separately from data in HTTP session cookies [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-cookies" title="HTTP State Management Mechanism">COOKIES</a></cite>] or
                    persistent storage, then
                    users are likely to modify site authorization or delete data in one and not the others.
                    This would allow sites to use the various features as redundant backup for each other,
                    defeating a user's attempts to protect his or her privacy.
                </p>
                <p>
                    In addition to the potential for sites and other third-parties to track users, the user
                    agent implementer, <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-138">CDM</a> vendor, or device vendor could build a profile of the user's
                    activities or interests, such as sites using the APIs defined in this specification
                    that the user visits. Such tracking would undermine the privacy protections provided by
                    the rest of the web platform, especially those related to isolation of origins.
                </p>
                <p>
                    Identifiers, such as <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                        class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-33">Distinctive Identifiers</a>,
                    may be obtained from a server
                    operated or provided by the <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-139">CDM</a> vendor, such as via an <a data-link-type="dfn|abstract-op"
                        href="#dfn-individualization" class="internalDFN"
                        id="ref-for-dfn-individualization-14">individualization</a>
                    process. The process may include providing client identifier(s), including
                    <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                        class="internalDFN" id="ref-for-dfn-distinctive-permanent-identifier-s-31">Distinctive Permanent
                        Identifier(s)</a>, to the server. In order to generate a
                    per-origin identifier, a value representing the origin may also be provided.
                </p>
                <p>
                    In such an implementation, the <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                        class="internalDFN" id="ref-for-dfn-cdm-140">CDM</a> vendor may be able to track the activity of
                    the
                    user, such as number of origins visited or number of times a new identifier is
                    required. If the origin or a value <a data-link-type="dfn|abstract-op" href="#dfn-associable"
                        class="internalDFN" id="ref-for-dfn-associable-5">associable</a> with the origin is provided in
                    the
                    identifier request, the <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-141">CDM</a> vendor could track the sites visited by the user or
                    user(s) of a device.
                </p>
                <p>
                    The following section describes techniques that may mitigate the risks of tracking
                    without user consent.
                </p>
            </section>
            <section id="mitigations-2">
                <div class="header-wrapper">
                    <h4 id="x11-4-2-mitigations"><bdi class="secno">11.4.2 </bdi>
                        Mitigations
                    </h4><a class="self-link" href="#mitigations-2" aria-label="Permalink for Section 11.4.2"></a>
                </div>

                <dl>
                    <dt>
                        Do not <a data-link-type="dfn|abstract-op"
                            data-lt="use Distinctive Identifier(s) or Distinctive Permanent Identifier(s)"
                            href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                            class="internalDFN"
                            id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-11">use
                            Distinctive Identifiers or Distinctive Permanent Identifiers</a>
                    </dt>
                    <dd>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-65">Key System</a> implementations <em
                                class="rfc2119">SHOULD</em> avoid <a data-link-type="dfn|abstract-op"
                                data-lt="using Distinctive Identifier(s) or Distinctive Permanent Identifier(s)"
                                href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                                class="internalDFN"
                                id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-12">using
                                Distinctive Identifiers and Distinctive Permanent Identifiers</a> whenever possible and
                            only use them when they meaningfully
                            contribute to the robustness of the implementation. See <a
                                href="#limit-or-avoid-use-of-distinctive-identifiers-and-permanent-identifiers">Limit or
                                Avoid use of Distinctive Identifiers and Permanent Identifiers</a>.
                        </p>
                    </dd>
                    <dt>
                        Do not expose <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                            class="internalDFN" id="ref-for-dfn-distinctive-permanent-identifier-s-32">Distinctive
                            Permanent Identifiers</a> to the application
                    </dt>
                    <dd>
                        <p>
                            Implementations <em class="rfc2119">MUST NOT</em> expose <a data-link-type="dfn|abstract-op"
                                href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                                id="ref-for-dfn-distinctive-permanent-identifier-s-33">Distinctive Permanent
                                Identifiers</a> to the
                            application or origin.
                        </p>
                    </dd>
                    <dt>
                        Encrypt <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                            class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-34">Distinctive Identifiers</a>
                    </dt>
                    <dd>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                                id="ref-for-dfn-distinctive-identifier-s-35">Distinctive Identifiers</a> in <a
                                data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-66">Key System</a> messages <em class="rfc2119">MUST</em> be
                            encrypted, together
                            with a timestamp or nonce, such that the <a data-link-type="dfn|abstract-op"
                                href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-67">Key System</a>
                            messages are always
                            different. This prevents the use of <a data-link-type="dfn|abstract-op"
                                href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-68">Key System</a>
                            messages for tracking except by
                            servers fully supporting the <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                                class="internalDFN" id="ref-for-dfn-key-system-69">Key System</a>. See <a
                                href="#encrypt-identifiers">Encrypt Identifiers</a>.
                        </p>
                    </dd>
                    <dt id="like-cookies">
                        Treat <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                            class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-36">Distinctive Identifiers</a>
                        and Key System stored data like cookies / web
                        storage
                    </dt>
                    <dd>
                        <p>
                            User agents <em class="rfc2119">SHOULD</em> present the presence of <a
                                data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-37">Distinctive
                                Identifiers</a> and data
                            stored by <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-70">Key Systems</a> to the user in a way that associates them
                            strongly with
                            HTTP session cookies [<cite><a class="bibref" data-link-type="biblio" href="#bib-cookies"
                                    title="HTTP State Management Mechanism">COOKIES</a></cite>], including it in "remove
                            all data", and presenting
                            it in the same UI locations. This might encourage users to view such identifiers
                            with healthy suspicion. User agents <em class="rfc2119">SHOULD</em> help the user avoid <a
                                href="#incomplete-clearing">Incomplete Clearing of Data</a>.
                        </p>
                    </dd>
                    <dt>
                        Do not expose per-origin information to unrelated entities
                    </dt>
                    <dd>
                        <p>
                            Do not provide <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>(s)
                            or values <a data-link-type="dfn|abstract-op" href="#dfn-associable" class="internalDFN"
                                id="ref-for-dfn-associable-6">associable</a> with origins to
                            individualization servers or other entities not related to the origin. Follow the
                            requirements and recommendations in the <a data-link-type="dfn|abstract-op"
                                href="#dfn-individualization" class="internalDFN"
                                id="ref-for-dfn-individualization-15">Individualization</a> section if such a
                            process is used by the implementation.
                        </p>
                    </dd>
                    <dt>
                        Use non-associable per-origin per-profile values and identifiers
                    </dt>
                    <dd>

                        <p>
                            For all <a data-link-type="dfn|abstract-op" href="#dfn-distinctive" class="internalDFN"
                                id="ref-for-dfn-distinctive-6">Distinctive Values</a> exposed to the application,
                            implementations <em class="rfc2119">MUST</em> use
                            a different <a data-link-type="dfn|abstract-op" href="#dfn-non-associable-by-application"
                                class="internalDFN" id="ref-for-dfn-non-associable-by-application-8">non-associable by
                                applications</a> value for each <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                            and
                            <a data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                                id="ref-for-dfn-browsing-profile-14">browsing profile</a>. See <a
                                href="#per-origin-per-profile-values" class="sec-ref"><bdi class="secno">8.4.1 </bdi>
                                Use Per-Origin Per-Profile Values</a>.
                        </p>
                        <p>
                            This is especially important for implementations that <a data-link-type="dfn|abstract-op"
                                href="#dfn-use-distinctive-identifier-s" class="internalDFN"
                                id="ref-for-dfn-use-distinctive-identifier-s-9">use Distinctive Identifier(s)</a>. See
                            <a href="#per-origin-per-profile-identifiers" class="sec-ref"><bdi class="secno">8.5.3
                                </bdi>
                                Use Per-Origin Per-Profile Identifiers</a>.
                        </p>
                    </dd>
                    <dt>
                        Use origin-specific and browsing profile-specific <a data-link-type="dfn|abstract-op"
                            href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-71">Key System</a>
                        storage
                    </dt>
                    <dd>
                        <p>
                            Any data used by the <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-142">CDM</a> that might impact messages or behavior in an
                            application- or license server-visible way <em class="rfc2119">MUST</em> be partitioned by
                            <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                            and
                            <a data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                                id="ref-for-dfn-browsing-profile-15">browsing profile</a> and <em class="rfc2119">MUST
                                NOT</em> leak to or from private browsing sessions. This
                            includes both in-memory and persisted data. Specifically but not exhaustively,
                            session data, licenses, keys, and per-origin identifiers <em class="rfc2119">MUST</em> be
                            partitioned
                            per-<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                            and per-<a data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                                id="ref-for-dfn-browsing-profile-16">browsing profile</a>. See <a
                                href="#use-origin-specific-key-system-storage" class="sec-ref"><bdi class="secno">8.3.1
                                </bdi>
                                Use origin-specific and browsing profile-specific <span>Key System</span> storage</a>
                            and <a href="#per-origin-per-profile-values" class="sec-ref"><bdi class="secno">8.4.1 </bdi>
                                Use Per-Origin Per-Profile Values</a>.
                        </p>
                    </dd>
                    <dt>
                        Provide user deletion of persistent data, including <a data-link-type="dfn|abstract-op"
                            href="#dfn-distinctive-identifier-s" class="internalDFN"
                            id="ref-for-dfn-distinctive-identifier-s-38">Distinctive Identifiers</a>
                    </dt>
                    <dd>
                        <p>
                            User agents <em class="rfc2119">MUST</em> provide users with the ability to clear any
                            persistent data,
                            including <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-39">Distinctive
                                Identifiers</a>, maintained by <a data-link-type="dfn|abstract-op"
                                href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-72">Key
                                Systems</a>. See <a href="#allow-persistent-data-cleared">Allow Persistent Data to Be
                                Cleared</a>.
                        </p>
                    </dd>
                    <dt>
                        Expire stored data
                    </dt>
                    <dd>
                        <p>
                            User agents <em class="rfc2119">MAY</em>, possibly in a manner configured by the user,
                            automatically delete
                            <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                                id="ref-for-dfn-distinctive-identifier-s-40">Distinctive Identifiers</a> and/or other
                            Key System data after a period of time.
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-145">
                            <div role="heading" class="note-title marker" id="h-note-145" aria-level="5">
                                <span>Note</span>
                            </div>
                            <div class="">
                                <p>
                                    For example, a user agent could be configured to store such data as session-only
                                    storage, deleting the data once the user had closed all the browsing contexts
                                    that could access it.
                                </p>
                                <p>
                                    This can restrict the ability of a site to track a user, as the site would then
                                    only be able to track the user across multiple sessions when the user
                                    authenticates with the site itself (e.g., by making a purchase or signing in to a
                                    service).
                                </p>
                                <p>
                                    However, this can also put the user's access to content, especially purchased or
                                    rented content, at risk if the user does not fully understand the implications of
                                    such expiration.
                                </p>
                            </div>
                        </div>
                    </dd>
                    <dt>
                        Block third-party access
                    </dt>
                    <dd>

                        <p>
                            User agents <em class="rfc2119">MAY</em> restrict access to <a
                                data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-73">Key Systems</a> and/or features to scripts
                            originating at the <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> of
                            the top-level <a data-link-type="dfn"
                                href="https://dom.spec.whatwg.org/#concept-document">Document</a> of the browsing
                            context. For example, <a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                                href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                                id="ref-for-dom-navigator-requestmediakeysystemaccess-14"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                            may deny requests
                            for certain configurations for pages from other origins running in
                            <code>iframe</code>s.
                        </p>
                    </dd>
                    <dt id="privacy-consent">
                        Fully inform users and/or require explicit user consent
                    </dt>
                    <dd>
                        <p>
                            User agents <em class="rfc2119">MUST</em> ensure that users are fully informed and/or give
                            explicit consent
                            before <a data-link-type="dfn|abstract-op"
                                href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                                class="internalDFN"
                                id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-13">using
                                Distinctive Identifier(s) or Distinctive Permanent Identifier(s)</a>.
                        </p>
                        <p>
                            Such mechanisms <em class="rfc2119">MUST</em> be per <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> to
                            avoid valid uses enabling subsequent
                            malicious access and <em class="rfc2119">MUST</em> be per <a
                                data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                                id="ref-for-dfn-browsing-profile-17">browsing profile</a>.
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-146">
                            <div role="heading" class="note-title marker" id="h-note-146" aria-level="5">
                                <span>Note</span>
                            </div>
                            <p class="">
                                The restriction of the APIs defined in this specification to secure contexts
                                ensures that a <a href="#network-attacks">network attacker</a> cannot exploit
                                permissions granted to an unauthenticated origin. See <a
                                    href="#persisted-consent-abuse">abuse of persisted consent</a>.
                            </p>
                        </div>
                    </dd>
                    <dt>
                        Provide user controls to disable <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                            class="internalDFN" id="ref-for-dfn-key-system-74">Key Systems</a> or <a
                            data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                            id="ref-for-dfn-key-system-75">Key System</a> use of identifiers
                    </dt>
                    <dd>
                        <p>
                            User Agents <em class="rfc2119">SHOULD</em> provide users with a global control of whether a
                            <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-76">Key System</a>
                            is enabled and/or whether <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                                class="internalDFN" id="ref-for-dfn-key-system-77">Key System</a> <a
                                data-link-type="dfn|abstract-op"
                                href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                                class="internalDFN"
                                id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-14">use
                                of Distinctive Identifier(s) or Distinctive Permanent Identifier(s)</a> is enabled (if
                            supported by the <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                                class="internalDFN" id="ref-for-dfn-key-system-78">Key System</a>). User agents <em
                                class="rfc2119">SHOULD</em> help the user avoid <a
                                href="#incomplete-clearing">Incomplete Clearing of Data</a>.
                        </p>
                    </dd>
                    <dt>
                        Require site-specific whitelisting of access to each <a data-link-type="dfn|abstract-op"
                            href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-79">Key System</a>
                    </dt>
                    <dd>
                        <p>
                            User agents <em class="rfc2119">MAY</em> require the user to explicitly authorize access to
                            each <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-80">Key System</a> - and/or certain features - before a site
                            can use it. User agents <em class="rfc2119">SHOULD</em>
                            enable users to revoke this authorization either temporarily or permanently.
                        </p>
                    </dd>
                    <dt>
                        Use shared blacklists
                    </dt>
                    <dd>
                        <p>
                            User agents <em class="rfc2119">MAY</em> allow users to share blacklists of <a
                                data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origins</a>
                            and/or <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-81">Key Systems</a>. This would allow communities to act
                            together to protect their privacy.
                        </p>
                    </dd>
                </dl>
                <div class="note" role="note" id="issue-container-generatedID-147">
                    <div role="heading" class="note-title marker" id="h-note-147" aria-level="5"><span>Note</span></div>
                    <p class="">
                        While these suggestions prevent trivial use of the APIs defined in this specification
                        for user tracking, they do not block it altogether. Within a single origin, a site can
                        continue to track the user during a session, and can then pass all this information to
                        a third party along with any identifying information (names, credit card numbers,
                        addresses) obtained by the site. If a third party cooperates with multiple sites to
                        obtain such information, and if identifiers are not
                        <a href="#per-origin-per-profile-identifiers">unique per origin and profile</a>, then a profile
                        can still be created.
                    </p>
                </div>
            </section>
        </section>
        <section id="privacy-storedinfo">
            <div class="header-wrapper">
                <h3 id="x11-5-information-stored-on-user-devices"><bdi class="secno">11.5 </bdi>
                    Information Stored on User Devices
                </h3><a class="self-link" href="#privacy-storedinfo" aria-label="Permalink for Section 11.5"></a>
            </div>

            <section class="informative" id="concerns-1">
                <div class="header-wrapper">
                    <h4 id="x11-5-1-concerns"><bdi class="secno">11.5.1 </bdi>
                        Concerns
                    </h4><a class="self-link" href="#concerns-1" aria-label="Permalink for Section 11.5.1"></a>
                </div>
                <p><em>This section is non-normative.</em></p>

                <p>
                    <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                        id="ref-for-dfn-key-system-82">Key Systems</a> may store information on a user's device, or user
                    agents may store
                    information on behalf of Key Systems. Potentially, this could reveal information about
                    a user to another user of the same device, including potentially the <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origins</a> that
                    have used a particular <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                        class="internalDFN" id="ref-for-dfn-key-system-83">Key System</a> (i.e., sites visited) or even
                    the content that
                    has been decrypted using a <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                        class="internalDFN" id="ref-for-dfn-key-system-84">Key System</a>.
                </p>
                <p>
                    If information stored by one origin affects the operation of the <a data-link-type="dfn|abstract-op"
                        href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-85">Key System</a> for
                    another origin, then potentially the sites visited or content viewed by a user on one
                    site may be revealed to another, potentially malicious, site.
                </p>
                <p>
                    If information stored for one <a data-link-type="dfn|abstract-op" href="#dfn-browsing-profile"
                        class="internalDFN" id="ref-for-dfn-browsing-profile-18">browsing profile</a> on the client
                    device affects the
                    operation of the <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                        id="ref-for-dfn-key-system-86">Key System</a> for other <a data-link-type="dfn|abstract-op"
                        href="#dfn-browsing-profile" class="internalDFN" id="ref-for-dfn-browsing-profile-19">browsing
                        profiles</a>, or browsers, then
                    potentially the sites visited or content viewed in one may be revealed by or
                    correlatable with another <a data-link-type="dfn|abstract-op" href="#dfn-browsing-profile"
                        class="internalDFN" id="ref-for-dfn-browsing-profile-20">browsing profile</a>, even including
                    for different operating
                    system user accounts or browsers.
                </p>
            </section>
            <section id="mitigations-3">
                <div class="header-wrapper">
                    <h4 id="x11-5-2-mitigations"><bdi class="secno">11.5.2 </bdi>
                        Mitigations
                    </h4><a class="self-link" href="#mitigations-3" aria-label="Permalink for Section 11.5.2"></a>
                </div>

                <p>
                    Requirements mitigating these concerns are defined in <a href="#persistent-state-requirements"
                        class="sec-ref"><bdi class="secno">8.3 </bdi>
                        Persistent Data</a>.
                </p>
            </section>
        </section>
        <section id="incomplete-clearing">
            <div class="header-wrapper">
                <h3 id="x11-6-incomplete-clearing-of-data"><bdi class="secno">11.6 </bdi>
                    Incomplete Clearing of Data
                </h3><a class="self-link" href="#incomplete-clearing" aria-label="Permalink for Section 11.6"></a>
            </div>

            <section class="informative" id="concerns-2">
                <div class="header-wrapper">
                    <h4 id="x11-6-1-concerns"><bdi class="secno">11.6.1 </bdi>
                        Concerns
                    </h4><a class="self-link" href="#concerns-2" aria-label="Permalink for Section 11.6.1"></a>
                </div>
                <p><em>This section is non-normative.</em></p>

                <p>
                    A user's attempts to protect his or her privacy by clearing <a data-link-type="dfn|abstract-op"
                        href="#dfn-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-identifier-s-41">Distinctive Identifiers</a>
                    and stored data and/or disabling a <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                        class="internalDFN" id="ref-for-dfn-key-system-87">Key System</a> may be defeated if all such
                    data and
                    functionality as well as cookies [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-cookies" title="HTTP State Management Mechanism">COOKIES</a></cite>] and other
                    site data are not cleared and/or
                    disabled at the same time. For example:
                </p>
                <ul>
                    <li>
                        <p>
                            If a user clears cookies or other persistent storage without also clearing
                            <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                                id="ref-for-dfn-distinctive-identifier-s-42">Distinctive Identifiers</a> and data stored
                            by Key Systems, sites can defeat those
                            attempts by using the various features as redundant backup for each other.
                        </p>
                    </li>
                    <li>
                        <p>
                            If a user clears <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-43">Distinctive
                                Identifiers</a> without also clearing data stored by
                            <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-88">Key Systems</a>, including persistent sessions, as well
                            as cookies and other
                            persistent storage, sites can defeat those attempts by using the remaining data to
                            associate the old and new identifiers.
                        </p>
                    </li>
                    <li>
                        <p>
                            If a user disables a <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                                class="internalDFN" id="ref-for-dfn-key-system-89">Key System</a>, especially for a
                            specific <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>,
                            without
                            also clearing cookies or other persistent storage, sites can defeat those attempts
                            by using the remaining features.
                        </p>
                    </li>
                    <li>
                        <p>
                            If a user disables a <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                                class="internalDFN" id="ref-for-dfn-key-system-90">Key System</a>, then later decide to
                            enable the <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-91">Key System</a>, without also clearing cookies or other
                            persistent storage, <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-44">Distinctive
                                Identifiers</a>, and data stored by <a data-link-type="dfn|abstract-op"
                                href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-92">Key
                                Systems</a>, sites may be able to associate
                            data prior to the disabling with data and behavior after the <a
                                data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-93">Key System</a> is
                            re-enabled.
                        </p>
                    </li>
                </ul>
            </section>
            <section id="mitigations-4">
                <div class="header-wrapper">
                    <h4 id="x11-6-2-mitigations"><bdi class="secno">11.6.2 </bdi>
                        Mitigations
                    </h4><a class="self-link" href="#mitigations-4" aria-label="Permalink for Section 11.6.2"></a>
                </div>

                <p>
                    Recommendations mitigating these concerns are defined in <a href="#persistent-state-requirements"
                        class="sec-ref"><bdi class="secno">8.3 </bdi>
                        Persistent Data</a>.
                </p>
            </section>
        </section>
        <section id="private-browsing">
            <div class="header-wrapper">
                <h3 id="x11-7-private-browsing-modes"><bdi class="secno">11.7 </bdi>
                    Private Browsing Modes
                </h3><a class="self-link" href="#private-browsing" aria-label="Permalink for Section 11.7"></a>
            </div>

            <p>
                User agents may support a mode (e.g., private browsing) of operation intended to preserve
                user anonymity and/or ensure records of browsing activity are not persisted on the
                client. The privacy concerns discussed in previous sections may be especially concerning
                for users employing such modes.
            </p>
            <p>
                User agent implementers that support such mode(s) <em class="rfc2119">SHOULD</em> carefully consider
                whether
                access to <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                    id="ref-for-dfn-key-system-94">Key Systems</a> should be disabled in these mode(s). For example,
                such modes
                <em class="rfc2119">MAY</em> prohibit creation of <a data-link-type="idl" data-lt="MediaKeySystemAccess"
                    href="#dom-mediakeysystemaccess" class="internalDFN"
                    id="ref-for-dom-mediakeysystemaccess-17"><code>MediaKeySystemAccess</code></a> objects that support
                or use
                <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-persistentstate" class="internalDFN"
                    id="ref-for-dom-mediakeysystemconfiguration-persistentstate-13"><code>persistentState</code></a> or
                a
                <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                    class="internalDFN"
                    id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-27"><code>distinctiveIdentifier</code></a>
                (either as part of the <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-143">CDM</a>
                implementation or because the application indicated they were
                "<a data-link-type="idl" href="#dom-mediakeysrequirement-required" class="internalDFN"
                    id="ref-for-dom-mediakeysrequirement-required-21"><code>required</code></a>"). If implementations do
                not prohibit such creation,
                they <em class="rfc2119">SHOULD</em> inform the user of the implications and potential consequences for
                the
                expected privacy properties of such modes before allowing their use.
            </p>
        </section>
        <section id="privacy-secureorigin">
            <div class="header-wrapper">
                <h3 id="x11-8-secure-origin-and-transport"><bdi class="secno">11.8 </bdi>
                    Secure Origin and Transport
                </h3><a class="self-link" href="#privacy-secureorigin" aria-label="Permalink for Section 11.8"></a>
            </div>

            <p>
                The APIs defined in this specification are only supported on secure origins, protecting
                information discussed in previous sections. Identifiers are additionally encrypted as
                specified in <a href="#encrypt-identifiers">Encrypt Identifiers</a>.
            </p>
            <p>
                Applications, including the servers they use, <em class="rfc2119">SHOULD</em> use secure transport for
                all traffic
                involving or containing data or messages from the <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                    class="internalDFN" id="ref-for-dfn-cdm-144">CDM</a>, including but is not limited
                to all data passed from <a data-link-type="idl" data-lt="message" href="#dfn-message"
                    class="internalDFN" id="ref-for-dfn-message-12"><code><code>message</code></code></a> events and to
                <a data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update" class="internalDFN"
                    id="ref-for-dom-mediakeysession-update-22"><code>update</code></a><code>()</code>.
            </p>
            <p>
                All user agents <em class="rfc2119">MUST</em> properly handle Mixed Content [<cite><a class="bibref"
                        data-link-type="biblio" href="#bib-mixed-content"
                        title="Mixed Content">MIXED-CONTENT</a></cite>] to avoid exposure to
                insecure content or transport when the user agent or application wish to enforce secure
                origin and transport.
            </p>
        </section>
    </section>
    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x12-conformance"><bdi class="secno">12. </bdi>Conformance</h2><a class="self-link"
                href="#conformance" aria-label="Permalink for Section 12."></a>
        </div>
        <p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this
            specification are non-normative. Everything else in this specification is normative.</p>
        <p>
            The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST</em>, <em class="rfc2119">MUST
                NOT</em>, <em class="rfc2119">OPTIONAL</em>, <em class="rfc2119">RECOMMENDED</em>, <em
                class="rfc2119">REQUIRED</em>, <em class="rfc2119">SHALL</em>, <em class="rfc2119">SHALL NOT</em>, <em
                class="rfc2119">SHOULD</em>, and <em class="rfc2119">SHOULD NOT</em> in this document
            are to be interpreted as described in
            <a href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119"
                    title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc8174"
                    title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
            when, and only when, they appear in all
            capitals, as shown here.
        </p>
    </section>
    <section id="examples" class="informative">
        <div class="header-wrapper">
            <h2 id="x13-examples"><bdi class="secno">13. </bdi>
                Examples
            </h2><a class="self-link" href="#examples" aria-label="Permalink for Section 13."></a>
        </div>
        <p><em>This section is non-normative.</em></p>

        <p>
            This section contains example solutions for various use cases using the proposed
            extensions. These are not the only solutions to these use cases. Video elements are used in
            the examples, but the same would apply to all media elements. In some cases, such as using
            synchronous XHR, the examples are simplified to keep the focus on the extensions.
        </p>
        <section id="example-source-and-key-known">
            <div class="header-wrapper">
                <h3 id="x13-1-source-and-key-known-at-page-load-clear-key"><bdi class="secno">13.1 </bdi>
                    Source and Key Known at Page Load (Clear Key)
                </h3><a class="self-link" href="#example-source-and-key-known"
                    aria-label="Permalink for Section 13.1"></a>
            </div>

            <p class="exampledescription">
                In this simple example, the source file and <a href="#clear-key">clear-text license</a>
                are hard-coded in the page. Only one session will ever be created.
            </p>
            <div class="example" id="example-5">
                <div class="marker">
                    <a class="self-link" href="#example-5">Example<bdi> 5</bdi></a>
                </div>
                <pre class="highlight" aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">onLoad</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">var</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'video'</span>);

    <span class="hljs-keyword">if</span> (!video.<span class="hljs-property">mediaKeys</span>) {
      navigator.<span class="hljs-title function_">requestMediaKeySystemAccess</span>(<span class="hljs-string">'org.w3.clearkey'</span>, [
        { <span class="hljs-attr">initDataTypes</span>: [<span class="hljs-string">'webm'</span>],
          <span class="hljs-attr">videoCapabilities</span>: [{ <span class="hljs-attr">contentType</span>: <span class="hljs-string">'video/webm; codecs="vp8"'</span> }] }
      ]).<span class="hljs-title function_">then</span>(
        <span class="hljs-keyword">function</span>(<span class="hljs-params">keySystemAccess</span>) {
          <span class="hljs-keyword">var</span> promise = keySystemAccess.<span class="hljs-title function_">createMediaKeys</span>();
          promise.<span class="hljs-title function_">catch</span>(
            <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Unable to create MediaKeys'</span>)
          );
          promise.<span class="hljs-title function_">then</span>(
            <span class="hljs-keyword">function</span>(<span class="hljs-params">createdMediaKeys</span>) {
              <span class="hljs-keyword">return</span> video.<span class="hljs-title function_">setMediaKeys</span>(createdMediaKeys);
            }
          ).<span class="hljs-title function_">catch</span>(
            <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Unable to set MediaKeys'</span>)
          );
          promise.<span class="hljs-title function_">then</span>(
            <span class="hljs-keyword">function</span>(<span class="hljs-params">createdMediaKeys</span>) {
              <span class="hljs-keyword">var</span> te = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextEncoder</span>();
              <span class="hljs-keyword">var</span> initData = te.<span class="hljs-title function_">encode</span>( <span class="hljs-string">'{"kids":["LwVHf8JLtPrv2GUXFW2v_A"]}'</span>);
              <span class="hljs-keyword">var</span> keySession = createdMediaKeys.<span class="hljs-title function_">createSession</span>();
              keySession.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"message"</span>, handleMessage, <span class="hljs-literal">false</span>);
              <span class="hljs-keyword">return</span> keySession.<span class="hljs-title function_">generateRequest</span>(<span class="hljs-string">'keyids'</span>, initData);
            }
          ).<span class="hljs-title function_">catch</span>(
            <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Unable to create or initialize key session'</span>)
          );
        }
      );
    }
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMessage</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-keyword">var</span> keySession = event.<span class="hljs-property">target</span>;
    <span class="hljs-keyword">var</span> te = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextEncoder</span>();
    <span class="hljs-keyword">var</span> license = te.<span class="hljs-title function_">encode</span>(<span class="hljs-string">'{"keys":[{"kty":"oct","k":"tQ0bJVWb6b0KPL6KtZIy_A","kid":"LwVHf8JLtPrv2GUXFW2v_A"}],"type":"temporary"}'</span>);
    keySession.<span class="hljs-title function_">update</span>(license).<span class="hljs-title function_">catch</span>(
      <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'update() failed'</span>)
    );
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">'onLoad()'</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">src</span>=<span class="hljs-string">'foo.webm'</span> <span class="hljs-attr">autoplay</span> <span class="hljs-attr">id</span>=<span class="hljs-string">'video'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></code></pre>
            </div>
        </section>
        <section id="example-selecting-key-system">
            <div class="header-wrapper">
                <h3 id="x13-2-selecting-a-supported-key-system-and-using-initialization-data-from-the-encrypted-event">
                    <bdi class="secno">13.2 </bdi>
                    Selecting a Supported Key System and Using Initialization Data from the "encrypted" Event
                </h3><a class="self-link" href="#example-selecting-key-system"
                    aria-label="Permalink for Section 13.2"></a>
            </div>

            <p class="exampledescription">
                This example selects a supported <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                    class="internalDFN" id="ref-for-dfn-key-system-95">Key System</a> using the
                <a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                    href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                    id="ref-for-dom-navigator-requestmediakeysystemaccess-15"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                method then uses the <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data"
                    class="internalDFN" id="ref-for-dfn-initialization-data-24">Initialization Data</a>
                from the <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/media.html#media-data">media data</a> to generate the
                license request and send it to
                the appropriate license server. One of the supported key systems uses a
                serverCertificate, which is provided proactively.
            </p>
            <div class="example" id="example-6">
                <div class="marker">
                    <a class="self-link" href="#example-6">Example<bdi> 6</bdi></a>
                </div>
                <pre class="highlight"
                    aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
  <span class="hljs-keyword">var</span> licenseUrl;
  <span class="hljs-keyword">var</span> serverCertificate;

  <span class="hljs-comment">// Returns a Promise&lt;MediaKeys&gt;.</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">createSupportedKeySystem</span>(<span class="hljs-params"></span>) {
    someSystemOptions = [
     { <span class="hljs-attr">initDataTypes</span>: [<span class="hljs-string">'keyids'</span>, <span class="hljs-string">'webm'</span>],
       <span class="hljs-attr">audioCapabilities</span>: [
         { <span class="hljs-attr">contentType</span>: <span class="hljs-string">'audio/webm; codecs="opus"'</span> },
         { <span class="hljs-attr">contentType</span>: <span class="hljs-string">'audio/webm; codecs="vorbis"'</span> }
       ],
       <span class="hljs-attr">videoCapabilities</span>: [
         { <span class="hljs-attr">contentType</span>: <span class="hljs-string">'video/webm; codecs="vp9"'</span> },
         { <span class="hljs-attr">contentType</span>: <span class="hljs-string">'video/webm; codecs="vp8"'</span> }
       ]
     }
    ];
    clearKeyOptions = [
     { <span class="hljs-attr">initDataTypes</span>: [<span class="hljs-string">'keyids'</span>, <span class="hljs-string">'webm'</span>],
       <span class="hljs-attr">audioCapabilities</span>: [
         { <span class="hljs-attr">contentType</span>: <span class="hljs-string">'audio/webm; codecs="opus"'</span> },
         { <span class="hljs-attr">contentType</span>: <span class="hljs-string">'audio/webm; codecs="vorbis"'</span> }
       ],
       <span class="hljs-attr">videoCapabilities</span>: [
         { <span class="hljs-attr">contentType</span>: <span class="hljs-string">'video/webm; codecs="vp9"'</span>,
           <span class="hljs-attr">robustness</span>: <span class="hljs-string">'foo'</span> },
         { <span class="hljs-attr">contentType</span>: <span class="hljs-string">'video/webm; codecs="vp9"'</span>,
           <span class="hljs-attr">robustness</span>: <span class="hljs-string">'bar'</span> },
         { <span class="hljs-attr">contentType</span>: <span class="hljs-string">'video/webm; codecs="vp8"'</span>,
           <span class="hljs-attr">robustness</span>: <span class="hljs-string">'bar'</span> },
       ]
     }
    ];

    <span class="hljs-keyword">return</span> navigator.<span class="hljs-title function_">requestMediaKeySystemAccess</span>(<span class="hljs-string">'com.example.somesystem'</span>, someSystemOptions).<span class="hljs-title function_">then</span>(
      <span class="hljs-keyword">function</span>(<span class="hljs-params">keySystemAccess</span>) {
        <span class="hljs-comment">// Not shown:</span>
        <span class="hljs-comment">// 1. Use both attributes of keySystemAccess.getConfiguration().audioCapabilities[0]</span>
        <span class="hljs-comment">//    and both attributes of keySystemAccess.getConfiguration().videoCapabilities[0]</span>
        <span class="hljs-comment">//    to retrieve appropriate stream(s).</span>
        <span class="hljs-comment">// 2. Set video.src.</span>

        licenseUrl = <span class="hljs-string">'https://license.example.com/getkey'</span>;
        serverCertificate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([ ... ]);
        <span class="hljs-keyword">return</span> keySystemAccess.<span class="hljs-title function_">createMediaKeys</span>();
      }
    ).<span class="hljs-title function_">catch</span>(
      <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) {
        <span class="hljs-comment">// Try the next key system.</span>
        navigator.<span class="hljs-title function_">requestMediaKeySystemAccess</span>(<span class="hljs-string">'org.w3.clearkey'</span>, clearKeyOptions).<span class="hljs-title function_">then</span>(
          <span class="hljs-keyword">function</span>(<span class="hljs-params">keySystemAccess</span>) {
            <span class="hljs-comment">// Not shown:</span>
            <span class="hljs-comment">// 1. Use keySystemAccess.getConfiguration().audioCapabilities[0].contentType</span>
            <span class="hljs-comment">//    and keySystemAccess.getConfiguration().videoCapabilities[0].contentType</span>
            <span class="hljs-comment">//    to retrieve appropriate stream(s).</span>
            <span class="hljs-comment">// 2. Set video.src.</span>

            licenseUrl = <span class="hljs-string">'https://license.example.com/clearkey/request'</span>;
            <span class="hljs-keyword">return</span> keySystemAccess.<span class="hljs-title function_">createMediaKeys</span>();
          }
        );
      }
    ).<span class="hljs-title function_">catch</span>(
      <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Unable to instantiate a key system supporting the required combinations'</span>)
    );
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleInitData</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-keyword">var</span> video = event.<span class="hljs-property">target</span>;
    <span class="hljs-keyword">if</span> (video.<span class="hljs-property">mediaKeysObject</span> === <span class="hljs-literal">undefined</span>) {
      video.<span class="hljs-property">mediaKeysObject</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// Prevent entering this path again.</span>
      video.<span class="hljs-property">pendingSessionData</span> = []; <span class="hljs-comment">// Will store all initData until the MediaKeys is ready.</span>
      <span class="hljs-title function_">createSupportedKeySystem</span>().<span class="hljs-title function_">then</span>(
        <span class="hljs-keyword">function</span>(<span class="hljs-params">createdMediaKeys</span>) {
          video.<span class="hljs-property">mediaKeysObject</span> = createdMediaKeys;

          <span class="hljs-keyword">if</span> (serverCertificate)
            createdMediaKeys.<span class="hljs-title function_">setServerCertificate</span>(serverCertificate);

          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; video.<span class="hljs-property">pendingSessionData</span>.<span class="hljs-property">length</span>; i++) {
            <span class="hljs-keyword">var</span> data = video.<span class="hljs-property">pendingSessionData</span>[i];
            <span class="hljs-title function_">makeNewRequest</span>(video.<span class="hljs-property">mediaKeysObject</span>, data.<span class="hljs-property">initDataType</span>, data.<span class="hljs-property">initData</span>);
          }
          video.<span class="hljs-property">pendingSessionData</span> = [];

          <span class="hljs-keyword">return</span> video.<span class="hljs-title function_">setMediaKeys</span>(createdMediaKeys);
        }
      ).<span class="hljs-title function_">catch</span>(
        <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Failed to create and initialize a MediaKeys object'</span>)
      );
    }
    <span class="hljs-title function_">addSession</span>(video, event.<span class="hljs-property">initDataType</span>, event.<span class="hljs-property">initData</span>);
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">addSession</span>(<span class="hljs-params">video, initDataType, initData</span>) {
    <span class="hljs-keyword">if</span> (video.<span class="hljs-property">mediaKeysObject</span>) {
      <span class="hljs-title function_">makeNewRequest</span>(video.<span class="hljs-property">mediaKeysObject</span>, initDataType, initData);
    } <span class="hljs-keyword">else</span> {
      video.<span class="hljs-property">pendingSessionData</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">initDataType</span>: initDataType, <span class="hljs-attr">initData</span>: initData});
    }
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">makeNewRequest</span>(<span class="hljs-params">mediaKeys, initDataType, initData</span>) {
    <span class="hljs-keyword">var</span> keySession = mediaKeys.<span class="hljs-title function_">createSession</span>();
    keySession.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"message"</span>, licenseRequestReady, <span class="hljs-literal">false</span>);
    keySession.<span class="hljs-title function_">generateRequest</span>(initDataType, initData).<span class="hljs-title function_">catch</span>(
      <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Unable to create or initialize key session'</span>)
    );
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">licenseRequestReady</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-keyword">var</span> request = event.<span class="hljs-property">message</span>;

    <span class="hljs-keyword">var</span> xmlhttp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
    xmlhttp.<span class="hljs-property">keySession</span> = event.<span class="hljs-property">target</span>;
    xmlhttp.<span class="hljs-title function_">open</span>(<span class="hljs-string">"POST"</span>, licenseUrl);
    xmlhttp.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
      <span class="hljs-keyword">if</span> (xmlhttp.<span class="hljs-property">readyState</span> == <span class="hljs-number">4</span>) {
        <span class="hljs-keyword">var</span> license = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(xmlhttp.<span class="hljs-property">response</span>);
        xmlhttp.<span class="hljs-property">keySession</span>.<span class="hljs-title function_">update</span>(license).<span class="hljs-title function_">catch</span>(
          <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'update() failed'</span>)
        );
      }
    }
    xmlhttp.<span class="hljs-title function_">send</span>(request);
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">autoplay</span> <span class="hljs-attr">onencrypted</span>=<span class="hljs-string">'handleInitData(event)'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span></code></pre>
            </div>
        </section>
        <section id="example-mediakeys-before-source">
            <div class="header-wrapper">
                <h3 id="x13-3-create-mediakeys-before-loading-media"><bdi class="secno">13.3 </bdi>
                    Create MediaKeys Before Loading Media
                </h3><a class="self-link" href="#example-mediakeys-before-source"
                    aria-label="Permalink for Section 13.3"></a>
            </div>

            <p class="exampledescription">
                Initialization is much simpler if encrypted events do not need to be handled during
                <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                    id="ref-for-dom-mediakeys-47"><code>MediaKeys</code></a> initialization. This can be accomplished
                either by providing the
                <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                    id="ref-for-dfn-initialization-data-25">Initialization Data</a> in other ways or setting the source
                after the <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                    id="ref-for-dom-mediakeys-48"><code>MediaKeys</code></a>
                object has been created. This example does the latter.
            </p>
            <div class="example" id="example-7">
                <div class="marker">
                    <a class="self-link" href="#example-7">Example<bdi> 7</bdi></a>
                </div>
                <pre class="highlight"
                    aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
  <span class="hljs-keyword">var</span> licenseUrl;
  <span class="hljs-keyword">var</span> serverCertificate;
  <span class="hljs-keyword">var</span> mediaKeys;

  <span class="hljs-comment">// See the previous example for implementations of these functions.</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">createSupportedKeySystem</span>(<span class="hljs-params"></span>) { ... }
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">makeNewRequest</span>(<span class="hljs-params">mediaKeys, initDataType, initData</span>) { ... }
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">licenseRequestReady</span>(<span class="hljs-params">event</span>) { ... }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleInitData</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-title function_">makeNewRequest</span>(mediaKeys, event.<span class="hljs-property">initDataType</span>, event.<span class="hljs-property">initData</span>);
  }

  <span class="hljs-title function_">createSupportedKeySystem</span>().<span class="hljs-title function_">then</span>(
    <span class="hljs-keyword">function</span>(<span class="hljs-params">createdMediaKeys</span>) {
      mediaKeys = createdMediaKeys;
      <span class="hljs-keyword">var</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"v"</span>);
      video.<span class="hljs-property">src</span> = <span class="hljs-string">'foo.webm'</span>;
      <span class="hljs-keyword">if</span> (serverCertificate)
        mediaKeys.<span class="hljs-title function_">setServerCertificate</span>(serverCertificate);
      <span class="hljs-keyword">return</span> video.<span class="hljs-title function_">setMediaKeys</span>(mediaKeys);
    }
  ).<span class="hljs-title function_">catch</span>(
    <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Failed to create and initialize a MediaKeys object'</span>)
  );
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"v"</span> <span class="hljs-attr">autoplay</span> <span class="hljs-attr">onencrypted</span>=<span class="hljs-string">'handleInitData(event)'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span></code></pre>
            </div>
        </section>
        <section id="example-using-all-events">
            <div class="header-wrapper">
                <h3 id="x13-4-using-all-events"><bdi class="secno">13.4 </bdi>
                    Using All Events
                </h3><a class="self-link" href="#example-using-all-events" aria-label="Permalink for Section 13.4"></a>
            </div>

            <p class="exampledescription">
                This is a more complete example showing all events being used.
            </p>
            <p class="exampledescription">
                Note that <code>handleMessage()</code> could be called multiple times, including in
                response to the <a data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update"
                    class="internalDFN"
                    id="ref-for-dom-mediakeysession-update-23"><code>update</code></a><code>()</code> call if multiple
                round trips are required
                and for any other reason the Key System might need to send a message.
            </p>
            <div class="example" id="example-8">
                <div class="marker">
                    <a class="self-link" href="#example-8">Example<bdi> 8</bdi></a>
                </div>
                <pre class="highlight"
                    aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
  <span class="hljs-keyword">var</span> licenseUrl;
  <span class="hljs-keyword">var</span> serverCertificate;
  <span class="hljs-keyword">var</span> mediaKeys;

  <span class="hljs-comment">// See previous examples for implementations of these functions.</span>
  <span class="hljs-comment">// createSupportedKeySystem() additionally sets renewalUrl.</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">createSupportedKeySystem</span>(<span class="hljs-params"></span>) { ... }
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleInitData</span>(<span class="hljs-params">event</span>) { ... }

  <span class="hljs-comment">// This replaces the implementation in the previous example.</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">makeNewRequest</span>(<span class="hljs-params">mediaKeys, initDataType, initData</span>) {
    <span class="hljs-keyword">var</span> keySession = mediaKeys.<span class="hljs-title function_">createSession</span>();
    keySession.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, handleMessage, <span class="hljs-literal">false</span>);
    keySession.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keystatuseschange'</span>, handlekeyStatusesChange, <span class="hljs-literal">false</span>);
    keySession.<span class="hljs-property">closed</span>.<span class="hljs-title function_">then</span>(
      <span class="hljs-keyword">function</span>(<span class="hljs-params">reason</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Session'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">sessionId</span>, <span class="hljs-string">'closed, reason'</span>, reason);
      }.<span class="hljs-title function_">bind</span>(keySession)
    );
    keySession.<span class="hljs-title function_">generateRequest</span>(initDataType, initData).<span class="hljs-title function_">catch</span>(
      <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Unable to create or initialize key session'</span>)
    );
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMessageResponse</span>(<span class="hljs-params">keySession, response</span>) {
    <span class="hljs-keyword">var</span> license = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(response);
    keySession.<span class="hljs-title function_">update</span>(license).<span class="hljs-title function_">catch</span>(
      <span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'update() failed: '</span> + err);
      }
    );
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendMessage</span>(<span class="hljs-params">type, message, keySession</span>) {
    <span class="hljs-keyword">var</span> url = licenseUrl;
    <span class="hljs-keyword">if</span> (type == <span class="hljs-string">"license-renewal"</span>)
      url = renewalUrl;
    xmlhttp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
    xmlhttp.<span class="hljs-property">keySession</span> = keySession;
    xmlhttp.<span class="hljs-title function_">open</span>(<span class="hljs-string">'POST'</span>, url);
    xmlhttp.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
      <span class="hljs-keyword">if</span> (xmlhttp.<span class="hljs-property">readyState</span> == <span class="hljs-number">4</span>)
        <span class="hljs-title function_">handleMessageResponse</span>(xmlhttp.<span class="hljs-property">keySession</span>, xmlhttp.<span class="hljs-property">response</span>);
    }
    xmlhttp.<span class="hljs-title function_">send</span>(message);
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMessage</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-title function_">sendMessage</span>(event.<span class="hljs-property">messageType</span>, event.<span class="hljs-property">message</span>, event.<span class="hljs-property">target</span>);
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handlekeyStatusesChange</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-comment">// Evaluate the current state using one of the map-like methods exposed by</span>
    <span class="hljs-comment">// event.target.keyStatuses.</span>
    <span class="hljs-comment">// For example:</span>
    event.<span class="hljs-property">target</span>.<span class="hljs-property">keyStatuses</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">status, keyId</span>) {
      <span class="hljs-keyword">switch</span> (status) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">"usable"</span>:
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">"expired"</span>:
          <span class="hljs-comment">// Report an expired key.</span>
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">"status-pending"</span>:
          <span class="hljs-comment">// The status is not yet known. Consider the key unusable until the status is updated.</span>
          <span class="hljs-keyword">break</span>;
        <span class="hljs-attr">default</span>:
          <span class="hljs-comment">// Do something with |keyId| and |status|.</span>
      }
    })
  }

  <span class="hljs-title function_">createSupportedKeySystem</span>().<span class="hljs-title function_">then</span>(
    <span class="hljs-keyword">function</span>(<span class="hljs-params">createdMediaKeys</span>) {
      mediaKeys = createdMediaKeys;
      <span class="hljs-keyword">var</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"v"</span>);
      video.<span class="hljs-property">src</span> = <span class="hljs-string">'foo.webm'</span>;
      <span class="hljs-keyword">if</span> (serverCertificate)
        mediaKeys.<span class="hljs-title function_">setServerCertificate</span>(serverCertificate);
      <span class="hljs-keyword">return</span> video.<span class="hljs-title function_">setMediaKeys</span>(mediaKeys);
    }
  ).<span class="hljs-title function_">catch</span>(
    <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Failed to create and initialize a MediaKeys object'</span>)
  );
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"v"</span> <span class="hljs-attr">autoplay</span> <span class="hljs-attr">onencrypted</span>=<span class="hljs-string">'handleInitData(event)'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span></code></pre>
            </div>
        </section>
        <section id="example-stored-license">
            <div class="header-wrapper">
                <h3 id="x13-5-stored-license"><bdi class="secno">13.5 </bdi>
                    Stored License
                </h3><a class="self-link" href="#example-stored-license" aria-label="Permalink for Section 13.5"></a>
            </div>

            <p class="exampledescription">
                This example requests a persistent license for future use and stores it. It also provides
                functions for later retrieving the license and for destroying it.
            </p>
            <div class="example" id="example-9">
                <div class="marker">
                    <a class="self-link" href="#example-9">Example<bdi> 9</bdi></a>
                </div>
                <pre class="highlight"
                    aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
  <span class="hljs-keyword">var</span> licenseUrl;
  <span class="hljs-keyword">var</span> serverCertificate;
  <span class="hljs-keyword">var</span> mediaKeys;

  <span class="hljs-comment">// See the previous examples for implementations of these functions.</span>
  <span class="hljs-comment">// createSupportedKeySystem() additionally sets persistentState: "required" in each options dictionary.</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">createSupportedKeySystem</span>(<span class="hljs-params"></span>) { ... }
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendMessage</span>(<span class="hljs-params">message, keySession</span>) { ... }
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMessage</span>(<span class="hljs-params">event</span>) { ... }

  <span class="hljs-comment">// Called if the application does not have a stored sessionId for the media resource.</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">makeNewRequest</span>(<span class="hljs-params">mediaKeys, initDataType, initData</span>) {
    <span class="hljs-keyword">var</span> keySession = mediaKeys.<span class="hljs-title function_">createSession</span>(<span class="hljs-string">"persistent-license"</span>);
    keySession.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, handleMessage, <span class="hljs-literal">false</span>);
    keySession.<span class="hljs-property">closed</span>.<span class="hljs-title function_">then</span>(
      <span class="hljs-keyword">function</span>(<span class="hljs-params">reason</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Session'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">sessionId</span>, <span class="hljs-string">'closed, reason'</span>, reason);
      }.<span class="hljs-title function_">bind</span>(keySession)
    );
    keySession.<span class="hljs-title function_">generateRequest</span>(initDataType, initData).<span class="hljs-title function_">then</span>(
      <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
        <span class="hljs-comment">// Store this.sessionId in the application.</span>
      }.<span class="hljs-title function_">bind</span>(keySession)
    ).<span class="hljs-title function_">catch</span>(
      <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Unable to request a persistent license'</span>)
    );
  }

  <span class="hljs-comment">// Called if the application has a stored sessionId for the media resource.</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadStoredSession</span>(<span class="hljs-params">mediaKeys, sessionId</span>) {
    <span class="hljs-keyword">var</span> keySession = mediaKeys.<span class="hljs-title function_">createSession</span>(<span class="hljs-string">"persistent-license"</span>);
    keySession.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, handleMessage, <span class="hljs-literal">false</span>);
    keySession.<span class="hljs-property">closed</span>.<span class="hljs-title function_">then</span>(
      <span class="hljs-keyword">function</span>(<span class="hljs-params">reason</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Session'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">sessionId</span>, <span class="hljs-string">'closed, reason'</span>, reason);
      }.<span class="hljs-title function_">bind</span>(keySession)
    );
    keySession.<span class="hljs-title function_">load</span>(sessionId).<span class="hljs-title function_">then</span>(
      <span class="hljs-keyword">function</span>(<span class="hljs-params">loaded</span>) {
        <span class="hljs-keyword">if</span> (!loaded) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'No stored session with the ID '</span> + sessionId + <span class="hljs-string">' was found.'</span>);
          <span class="hljs-comment">// The application should remove its record of |sessionId|.</span>
          <span class="hljs-keyword">return</span>;
        }
      }
    ).<span class="hljs-title function_">catch</span>(
      <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Unable to load or initialize the stored session with the ID '</span> + sessionId)
    );
  }

  <span class="hljs-comment">// Called when the application wants to stop using the session without removing the stored license.</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">closeSession</span>(<span class="hljs-params">keySession</span>) {
    keySession.<span class="hljs-title function_">close</span>();
  }

  <span class="hljs-comment">// Called when the application wants to remove the stored license.</span>
  <span class="hljs-comment">// The stored session data has not been completely removed until the promise returned by remove() is fulfilled.</span>
  <span class="hljs-comment">// The remove() call may initiate a series of messages to/from the server that must be completed before this occurs.</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">removeStoredSession</span>(<span class="hljs-params">keySession</span>) {
    keySession.<span class="hljs-title function_">remove</span>().<span class="hljs-title function_">then</span>(
      <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Session '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">sessionId</span> + <span class="hljs-string">' removed'</span>);
        <span class="hljs-comment">// The application should remove its record of this.sessionId.</span>
      }.<span class="hljs-title function_">bind</span>(keySession)
    ).<span class="hljs-title function_">catch</span>(
      <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Failed to remove the session'</span>)
    );
  }

  <span class="hljs-comment">// This replaces the implementation in the previous example.</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMessageResponse</span>(<span class="hljs-params">keySession, response</span>) {
    <span class="hljs-keyword">var</span> license = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(response);
    keySession.<span class="hljs-title function_">update</span>(license).<span class="hljs-title function_">then</span>(
      <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
        <span class="hljs-comment">// If this was the last required message from the server, the license is</span>
        <span class="hljs-comment">// now stored. Update the application state as appropriate.</span>
      }
    ).<span class="hljs-title function_">catch</span>(
      <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'update() failed'</span>)
    );
  }

  <span class="hljs-title function_">createSupportedKeySystem</span>().<span class="hljs-title function_">then</span>(
    <span class="hljs-keyword">function</span>(<span class="hljs-params">createdMediaKeys</span>) {
      mediaKeys = createdMediaKeys;
      <span class="hljs-keyword">var</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"v"</span>);
      <span class="hljs-keyword">if</span> (serverCertificate)
        mediaKeys.<span class="hljs-title function_">setServerCertificate</span>(serverCertificate);
      <span class="hljs-keyword">return</span> video.<span class="hljs-title function_">setMediaKeys</span>(mediaKeys);
    }
  ).<span class="hljs-title function_">catch</span>(
    <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Failed to create and initialize a MediaKeys object'</span>)
  );
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">id</span>=<span class="hljs-string">'v'</span> <span class="hljs-attr">src</span>=<span class="hljs-string">'foo.webm'</span> <span class="hljs-attr">autoplay</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span></code></pre>
            </div>
        </section>
        <section id="example-getStatusForPolicy">
            <div class="header-wrapper">
                <h3 id="x13-6-pre-fetch-media-with-hdcp-policy"><bdi class="secno">13.6 </bdi>
                    Pre-fetch Media With HDCP Policy
                </h3><a class="self-link" href="#example-getStatusForPolicy"
                    aria-label="Permalink for Section 13.6"></a>
            </div>

            <p class="exampledescription">
                If some media will have an HDCP policy in the license, an application can check for that
                version before pre-fetching.
            </p>
            <div class="example" id="example-10">
                <div class="marker">
                    <a class="self-link" href="#example-10">Example<bdi> 10</bdi></a>
                </div>
                <pre class="highlight" aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">const</span> status = <span class="hljs-keyword">await</span> video.<span class="hljs-property">mediaKeys</span>.<span class="hljs-title function_">getStatusForPolicy</span>({
  <span class="hljs-attr">minHdcpVersion</span>: <span class="hljs-string">'1.4'</span>
});

<span class="hljs-keyword">if</span> (status === <span class="hljs-string">'usable'</span>) {
  <span class="hljs-comment">// Pre-fetch HD content.</span>
} <span class="hljs-keyword">else</span> {  <span class="hljs-comment">// 'output-restricted'</span>
  <span class="hljs-comment">// Pre-fetch SD content.</span>
}</code></pre>
            </div>
        </section>
    </section>
    <section id="acknowledgements">
        <div class="header-wrapper">
            <h2 id="x14-acknowledgments"><bdi class="secno">14. </bdi>
                Acknowledgments
            </h2><a class="self-link" href="#acknowledgements" aria-label="Permalink for Section 14."></a>
        </div>

        <p>
            The editors would like to thank Aaron Colwell, Alex Russell, Anne van Kesteren, Bob Lund,
            Boris Zbarsky, Chris Needham, Chris Pearce, David Singer, Domenic Denicola, Frank Galligan,
            Glenn Adams, Henri Sivonen, Jer Noble, Joe Steele, Joey Parrish, John Simmons, Mark
            Vickers, Pavel Pergamenshchik, Philip Jägenstedt, Pierre Lemieux, Robert O'Callahan, Ryan
            Sleevi, Steve Heffernan, Steven Robertson Theresa O'Connor, Thomás Inskip, Travis Leithead,
            and Xiaohan Wang for their contributions to this specification. Thank you also to the many
            others who contributed to the specification, including through their participation on the
            mailing list and in the issues.
        </p>
    </section>


    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="a-references"><bdi class="secno">A. </bdi>References</h2><a class="self-link" href="#references"
                aria-label="Permalink for Appendix A."></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="a-1-normative-references"><bdi class="secno">A.1 </bdi>Normative references</h3><a
                    class="self-link" href="#normative-references" aria-label="Permalink for Appendix A.1"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-cookies">[COOKIES]</dt>
                <dd>
                    <a href="https://httpwg.org/specs/rfc6265.html"><cite>HTTP State Management Mechanism</cite></a>. A.
                    Barth. IETF. April 2011. Proposed Standard. URL: <a
                        href="https://httpwg.org/specs/rfc6265.html">https://httpwg.org/specs/rfc6265.html</a>
                </dd>
                <dt id="bib-dom">[dom]</dt>
                <dd>
                    <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Anne van Kesteren. WHATWG.
                    Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-ecma-262">[ECMA-262]</dt>
                <dd>
                    <a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript Language Specification</cite></a>.
                    Ecma International. URL: <a
                        href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
                </dd>
                <dt id="bib-eme-initdata-keyids">[EME-INITDATA-KEYIDS]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/eme-initdata-keyids/"><cite>"keyids" Initialization Data
                            Format</cite></a>. Joey Parrish; Greg Freedman. W3C. 20 August 2024. W3C Working Group Note.
                    URL: <a
                        href="https://www.w3.org/TR/eme-initdata-keyids/">https://www.w3.org/TR/eme-initdata-keyids/</a>
                </dd>
                <dt id="bib-eme-initdata-registry">[EME-INITDATA-REGISTRY]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/eme-initdata-registry/"><cite>Encrypted Media Extensions
                            Initialization Data Format Registry</cite></a>. Joey Parrish; Greg Freedman. W3C. 18 July
                    2024. DRY. URL: <a
                        href="https://www.w3.org/TR/eme-initdata-registry/">https://www.w3.org/TR/eme-initdata-registry/</a>
                </dd>
                <dt id="bib-encoding">[ENCODING]</dt>
                <dd>
                    <a href="https://encoding.spec.whatwg.org/"><cite>Encoding Standard</cite></a>. Anne van Kesteren.
                    WHATWG. Living Standard. URL: <a
                        href="https://encoding.spec.whatwg.org/">https://encoding.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-html">[HTML]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren;
                    Domenic Denicola; Dominic Farolino; Ian Hickson; Philip Jägenstedt; Simon Pieters. WHATWG. Living
                    Standard. URL: <a
                        href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-infra">[Infra]</dt>
                <dd>
                    <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Anne van Kesteren; Domenic
                    Denicola. WHATWG. Living Standard. URL: <a
                        href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-mimesniff">[mimesniff]</dt>
                <dd>
                    <a href="https://mimesniff.spec.whatwg.org/"><cite>MIME Sniffing Standard</cite></a>. Gordon P.
                    Hemsley. WHATWG. Living Standard. URL: <a
                        href="https://mimesniff.spec.whatwg.org/">https://mimesniff.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-mixed-content">[MIXED-CONTENT]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/mixed-content/"><cite>Mixed Content</cite></a>. Emily Stark; Mike
                    West; Carlos IbarraLopez. W3C. 23 February 2023. CRD. URL: <a
                        href="https://www.w3.org/TR/mixed-content/">https://www.w3.org/TR/mixed-content/</a>
                </dd>
                <dt id="bib-permissions-policy">[PERMISSIONS-POLICY]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/permissions-policy-1/"><cite>Permissions Policy</cite></a>. Ian
                    Clelland. W3C. 6 August 2025. W3C Working Draft. URL: <a
                        href="https://www.w3.org/TR/permissions-policy-1/">https://www.w3.org/TR/permissions-policy-1/</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate
                            Requirement Levels</cite></a>. S. Bradner. IETF. March 1997. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
                </dd>
                <dt id="bib-rfc6381">[RFC6381]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc6381"><cite>The 'Codecs' and 'Profiles' Parameters for
                            "Bucket" Media Types</cite></a>. R. Gellens; D. Singer; P. Frojdh. IETF. August 2011.
                    Proposed Standard. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc6381">https://www.rfc-editor.org/rfc/rfc6381</a>
                </dd>
                <dt id="bib-rfc7517">[RFC7517]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc7517"><cite>JSON Web Key (JWK)</cite></a>. M. Jones.
                    IETF. May 2015. Proposed Standard. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc7517">https://www.rfc-editor.org/rfc/rfc7517</a>
                </dd>
                <dt id="bib-rfc8174">[RFC8174]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC
                            2119 Key Words</cite></a>. B. Leiba. IETF. May 2017. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
                </dd>
                <dt id="bib-webidl">[WEBIDL]</dt>
                <dd>
                    <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Edgar Chen; Timothy Gu.
                    WHATWG. Living Standard. URL: <a
                        href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
        <section id="informative-references">
            <div class="header-wrapper">
                <h3 id="a-2-informative-references"><bdi class="secno">A.2 </bdi>Informative references</h3><a
                    class="self-link" href="#informative-references" aria-label="Permalink for Appendix A.2"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-cenc">[CENC]</dt>
                <dd>
                    <a href="https://www.iso.org/obp/ui/#iso:std:iso-iec:23001:-7:ed-3:v1"><cite>ISO/IEC 23001-7:2016,
                            Information technology — MPEG systems technologies — Part 7: Common encryption in ISO Base
                            Media File Format files</cite></a>. ISO/IEC. International Standard. URL: <a
                        href="https://www.iso.org/obp/ui/#iso:std:iso-iec:23001:-7:ed-3:v1">https://www.iso.org/obp/ui/#iso:std:iso-iec:23001:-7:ed-3:v1</a>
                </dd>
                <dt id="bib-eme-hdcp-version-registry">[EME-HDCP-VERSION-REGISTRY]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/eme-hdcp-version-registry/"><cite>Encrypted Media Extensions HDCP
                            Version Registry</cite></a>. Joey Parrish; Greg Freedman. W3C. 18 July 2024. DRY. URL: <a
                        href="https://www.w3.org/TR/eme-hdcp-version-registry/">https://www.w3.org/TR/eme-hdcp-version-registry/</a>
                </dd>
                <dt id="bib-eme-stream-registry">[EME-STREAM-REGISTRY]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/eme-stream-registry/"><cite>Encrypted Media Extensions Stream Format
                            Registry</cite></a>. Joey Parrish; Greg Freedman. W3C. 18 July 2024. DRY. URL: <a
                        href="https://www.w3.org/TR/eme-stream-registry/">https://www.w3.org/TR/eme-stream-registry/</a>
                </dd>
                <dt id="bib-media-source">[MEDIA-SOURCE]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/media-source-2/"><cite>Media Source Extensions™</cite></a>. Jean-Yves
                    Avenard; Mark Watson. W3C. 17 April 2025. W3C Working Draft. URL: <a
                        href="https://www.w3.org/TR/media-source-2/">https://www.w3.org/TR/media-source-2/</a>
                </dd>
                <dt id="bib-rfc6838">[RFC6838]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc6838"><cite>Media Type Specifications and Registration
                            Procedures</cite></a>. N. Freed; J. Klensin; T. Hansen. IETF. January 2013. Best Current
                    Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc6838">https://www.rfc-editor.org/rfc/rfc6838</a>
                </dd>
                <dt id="bib-rfc7515">[RFC7515]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc7515"><cite>JSON Web Signature (JWS)</cite></a>. M.
                    Jones; J. Bradley; N. Sakimura. IETF. May 2015. Proposed Standard. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc7515">https://www.rfc-editor.org/rfc/rfc7515</a>
                </dd>
                <dt id="bib-webaudio">[webaudio]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/webaudio-1.0/"><cite>Web Audio API</cite></a>. Paul Adenot; Hongchan
                    Choi. W3C. 17 June 2021. W3C Recommendation. URL: <a
                        href="https://www.w3.org/TR/webaudio-1.0/">https://www.w3.org/TR/webaudio-1.0/</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="Back to Top">↑</abbr></a>
    </p>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-cdm"
        aria-label="Links in this document to definition: Content Decryption Module (CDM)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-cdm"
                aria-label="Permalink for definition: Content Decryption Module (CDM). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-cdm-1" title="§ 2. Definitions">§ 2. Definitions</a> <a href="#ref-for-dfn-cdm-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-cdm-4" title="Reference 4">(4)</a> <a href="#ref-for-dfn-cdm-5"
                    title="Reference 5">(5)</a> <a href="#ref-for-dfn-cdm-6" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-cdm-7" title="Reference 7">(7)</a> <a href="#ref-for-dfn-cdm-8"
                    title="Reference 8">(8)</a> <a href="#ref-for-dfn-cdm-9" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-cdm-10" title="Reference 10">(10)</a> <a href="#ref-for-dfn-cdm-11"
                    title="Reference 11">(11)</a> <a href="#ref-for-dfn-cdm-12" title="Reference 12">(12)</a> <a
                    href="#ref-for-dfn-cdm-13" title="Reference 13">(13)</a> <a href="#ref-for-dfn-cdm-14"
                    title="Reference 14">(14)</a> <a href="#ref-for-dfn-cdm-15" title="Reference 15">(15)</a> <a
                    href="#ref-for-dfn-cdm-16" title="Reference 16">(16)</a> <a href="#ref-for-dfn-cdm-17"
                    title="Reference 17">(17)</a> <a href="#ref-for-dfn-cdm-18" title="Reference 18">(18)</a> <a
                    href="#ref-for-dfn-cdm-19" title="Reference 19">(19)</a> <a href="#ref-for-dfn-cdm-20"
                    title="Reference 20">(20)</a> <a href="#ref-for-dfn-cdm-21" title="Reference 21">(21)</a> <a
                    href="#ref-for-dfn-cdm-22" title="Reference 22">(22)</a> <a href="#ref-for-dfn-cdm-23"
                    title="Reference 23">(23)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-24" title="§ 3.2.2.4 Get Consent Status">§ 3.2.2.4 Get Consent Status</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-25" title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3
                    MediaKeySystemConfiguration dictionary</a> <a href="#ref-for-dfn-cdm-26" title="Reference 2">(2)</a>
                <a href="#ref-for-dfn-cdm-27" title="Reference 3">(3)</a> <a href="#ref-for-dfn-cdm-28"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-29" title="§ 3.4.1 Dictionary MediaKeySystemMediaCapability Members">§ 3.4.1
                    Dictionary MediaKeySystemMediaCapability Members</a> <a href="#ref-for-dfn-cdm-30"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-31" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-32" title="§ 5. MediaKeys Interface">§ 5. MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-33" title="§ 5.1 Methods">§ 5.1 Methods</a> <a href="#ref-for-dfn-cdm-34"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-35" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-cdm-36" title="Reference 4">(4)</a> <a href="#ref-for-dfn-cdm-37"
                    title="Reference 5">(5)</a> <a href="#ref-for-dfn-cdm-38" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-39" title="§ 5.2.2 CDM Unavailable">§ 5.2.2 CDM Unavailable</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-40" title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession Interface</a>
                <a href="#ref-for-dfn-cdm-41" title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-42"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-cdm-43" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-cdm-44" title="Reference 5">(5)</a> <a href="#ref-for-dfn-cdm-45"
                    title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-46" title="§ 6.1 Attributes">§ 6.1 Attributes</a> <a
                    href="#ref-for-dfn-cdm-47" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-48" title="§ 6.2 Methods">§ 6.2 Methods</a> <a href="#ref-for-dfn-cdm-49"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-50" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-cdm-51" title="Reference 4">(4)</a> <a href="#ref-for-dfn-cdm-52"
                    title="Reference 5">(5)</a> <a href="#ref-for-dfn-cdm-53" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-cdm-54" title="Reference 7">(7)</a> <a href="#ref-for-dfn-cdm-55"
                    title="Reference 8">(8)</a> <a href="#ref-for-dfn-cdm-56" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-cdm-57" title="Reference 10">(10)</a> <a href="#ref-for-dfn-cdm-58"
                    title="Reference 11">(11)</a> <a href="#ref-for-dfn-cdm-59" title="Reference 12">(12)</a> <a
                    href="#ref-for-dfn-cdm-60" title="Reference 13">(13)</a> <a href="#ref-for-dfn-cdm-61"
                    title="Reference 14">(14)</a> <a href="#ref-for-dfn-cdm-62" title="Reference 15">(15)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-63" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3 MediaKeyStatusMap
                    Interface</a> <a href="#ref-for-dfn-cdm-64" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-cdm-65" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-66" title="§ 6.4.1 Attributes">§ 6.4.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-67" title="§ 6.5 Event Summary">§ 6.5 Event Summary</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-68" title="§ 6.6.4 Session Closed">§ 6.6.4 Session Closed</a> <a
                    href="#ref-for-dfn-cdm-69" title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-70"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-71" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5 Monitor for CDM
                    State Changes</a> <a href="#ref-for-dfn-cdm-72" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-cdm-73" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-74" title="§ 6.8 Session Storage and Persistence">§ 6.8 Session Storage and
                    Persistence</a> <a href="#ref-for-dfn-cdm-75" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-cdm-76" title="Reference 3">(3)</a> <a href="#ref-for-dfn-cdm-77"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-cdm-78" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-79" title="§ 7.2 Methods">§ 7.2 Methods</a> <a href="#ref-for-dfn-cdm-80"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-81" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-cdm-82" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-83" title="§ 7.5.1 Media Data May Contain Encrypted Blocks">§ 7.5.1 Media Data
                    May Contain Encrypted Blocks</a> <a href="#ref-for-dfn-cdm-84" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-85" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to Decrypt</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-86" title="§ 7.6 Media Element Restrictions">§ 7.6 Media Element
                    Restrictions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-87" title="§ 8. Implementation Requirements">§ 8. Implementation
                    Requirements</a> <a href="#ref-for-dfn-cdm-88" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-89" title="§ 8.1 CDM Constraints">§ 8.1 CDM Constraints</a> <a
                    href="#ref-for-dfn-cdm-90" title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-91"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-cdm-92" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-cdm-93" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-94" title="§ 8.2 Messages and Communication">§ 8.2 Messages and
                    Communication</a> <a href="#ref-for-dfn-cdm-95" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-cdm-96" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-97" title="§ 8.3 Persistent Data">§ 8.3 Persistent Data</a> <a
                    href="#ref-for-dfn-cdm-98" title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-99"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-cdm-100" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-101" title="§ 8.4 Values Exposed to the Application">§ 8.4 Values Exposed to
                    the Application</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-102" title="§ 8.5 Identifiers">§ 8.5 Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-103"
                    title="§ 8.5.1 Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers">§ 8.5.1
                    Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-104" title="§ 8.5.2 Encrypt Identifiers">§ 8.5.2 Encrypt Identifiers</a> <a
                    href="#ref-for-dfn-cdm-105" title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-106"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-cdm-107" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-cdm-108" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-109" title="§ 8.6 Individualization">§ 8.6 Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-110" title="§ 8.6.1 Direct Individualization">§ 8.6.1 Direct
                    Individualization</a> <a href="#ref-for-dfn-cdm-111" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-cdm-112" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-113" title="§ 8.6.2 App-Assisted Individualization">§ 8.6.2 App-Assisted
                    Individualization</a> <a href="#ref-for-dfn-cdm-114" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-cdm-115" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-116" title="§ 8.8.2 Support Extraction From Media Data">§ 8.8.2 Support
                    Extraction From Media Data</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-117" title="§ 8.9.3 Unencrypted In-band Support Content">§ 8.9.3 Unencrypted
                    In-band Support Content</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-118" title="§ 10.1 Input Data Attacks and Vulnerabilities">§ 10.1 Input Data
                    Attacks and Vulnerabilities</a> <a href="#ref-for-dfn-cdm-119" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-120" title="§ 10.2 CDM Attacks and Vulnerabilities">§ 10.2 CDM Attacks and
                    Vulnerabilities</a> <a href="#ref-for-dfn-cdm-121" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-cdm-122" title="Reference 3">(3)</a> <a href="#ref-for-dfn-cdm-123"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-cdm-124" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-cdm-125" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-126" title="§ 10.3.2 Mitigations">§ 10.3.2 Mitigations</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-127" title="§ 11. Privacy">§ 11. Privacy</a> <a href="#ref-for-dfn-cdm-128"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-129" title="§ 11.3.2 Mitigations">§ 11.3.2 Mitigations</a> <a
                    href="#ref-for-dfn-cdm-130" title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-131"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-cdm-132" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-cdm-133" title="Reference 5">(5)</a> <a href="#ref-for-dfn-cdm-134"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-cdm-135" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-136" title="§ 11.4.1 Concerns">§ 11.4.1 Concerns</a> <a
                    href="#ref-for-dfn-cdm-137" title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-138"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-cdm-139" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-cdm-140" title="Reference 5">(5)</a> <a href="#ref-for-dfn-cdm-141"
                    title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-142" title="§ 11.4.2 Mitigations">§ 11.4.2 Mitigations</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-143" title="§ 11.7 Private Browsing Modes">§ 11.7 Private Browsing Modes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-144" title="§ 11.8 Secure Origin and Transport">§ 11.8 Secure Origin and
                    Transport</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-key-system"
        aria-label="Links in this document to definition: Key System">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-key-system"
                aria-label="Permalink for definition: Key System. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-key-system-1" title="§ 1. Introduction">§ 1. Introduction</a> <a
                    href="#ref-for-dfn-key-system-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-3" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-key-system-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-5" title="§ 3. Obtaining Access to Key Systems">§ 3. Obtaining Access
                    to Key Systems</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-6" title="§ 3.2.1 Methods">§ 3.2.1 Methods</a> <a
                    href="#ref-for-dfn-key-system-7" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-8" title="§ 3.2.2.1 Get Supported Configuration">§ 3.2.2.1 Get
                    Supported Configuration</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-9" title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2
                    Get Supported Configuration and Consent</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-10" title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3
                    MediaKeySystemConfiguration dictionary</a> <a href="#ref-for-dfn-key-system-11"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-12" title="§ 4. MediaKeySystemAccess Interface">§ 4.
                    MediaKeySystemAccess Interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-13" title="§ 4.1 Attributes">§ 4.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-14" title="§ 4.2 Methods">§ 4.2 Methods</a> <a
                    href="#ref-for-dfn-key-system-15" title="Reference 2">(2)</a> <a href="#ref-for-dfn-key-system-16"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-key-system-17" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-18" title="§ 5. MediaKeys Interface">§ 5. MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-19" title="§ 5.1 Methods">§ 5.1 Methods</a> <a
                    href="#ref-for-dfn-key-system-20" title="Reference 2">(2)</a> <a href="#ref-for-dfn-key-system-21"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-22" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-23" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-key-system-24" title="Reference 2">(2)</a> <a href="#ref-for-dfn-key-system-25"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-26" title="§ 6.4.1 Attributes">§ 6.4.1 Attributes</a> <a
                    href="#ref-for-dfn-key-system-27" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-28" title="§ 6.7 Exceptions">§ 6.7 Exceptions</a> <a
                    href="#ref-for-dfn-key-system-29" title="Reference 2">(2)</a> <a href="#ref-for-dfn-key-system-30"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-key-system-31" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-key-system-32" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-33" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to Decrypt</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-34" title="§ 8. Implementation Requirements">§ 8. Implementation
                    Requirements</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-35"
                    title="§ 8.3.1 Use origin-specific and browsing profile-specific Key System storage">§ 8.3.1 Use
                    origin-specific and browsing profile-specific Key System storage</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-36" title="§ 8.3.2 Allow Persistent Data to Be Cleared">§ 8.3.2 Allow
                    Persistent Data to Be Cleared</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-37" title="§ 8.5.2 Encrypt Identifiers">§ 8.5.2 Encrypt Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-38" title="§ 9. Common Key Systems">§ 9. Common Key Systems</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-39" title="§ 9.1 Clear Key">§ 9.1 Clear Key</a> <a
                    href="#ref-for-dfn-key-system-40" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-41" title="§ 9.1.1 Capabilities">§ 9.1.1 Capabilities</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-42" title="§ 9.1.2 Behavior">§ 9.1.2 Behavior</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-43" title="§ 10.1 Input Data Attacks and Vulnerabilities">§ 10.1 Input
                    Data Attacks and Vulnerabilities</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-44" title="§ 10.2 CDM Attacks and Vulnerabilities">§ 10.2 CDM Attacks
                    and Vulnerabilities</a> <a href="#ref-for-dfn-key-system-45" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-key-system-46" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-47" title="§ 10.3.2 Mitigations">§ 10.3.2 Mitigations</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-48" title="§ 11. Privacy">§ 11. Privacy</a> <a
                    href="#ref-for-dfn-key-system-49" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-50" title="§ 11.1 Information Disclosed by EME and Key Systems">§ 11.1
                    Information Disclosed by EME and Key Systems</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-51" title="§ 11.2 Fingerprinting">§ 11.2 Fingerprinting</a> <a
                    href="#ref-for-dfn-key-system-52" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-53" title="§ 11.4.1 Concerns">§ 11.4.1 Concerns</a> <a
                    href="#ref-for-dfn-key-system-54" title="Reference 2">(2)</a> <a href="#ref-for-dfn-key-system-55"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-key-system-56" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-key-system-57" title="Reference 5">(5)</a> <a href="#ref-for-dfn-key-system-58"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-key-system-59" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-key-system-60" title="Reference 8">(8)</a> <a href="#ref-for-dfn-key-system-61"
                    title="Reference 9">(9)</a> <a href="#ref-for-dfn-key-system-62" title="Reference 10">(10)</a> <a
                    href="#ref-for-dfn-key-system-63" title="Reference 11">(11)</a> <a href="#ref-for-dfn-key-system-64"
                    title="Reference 12">(12)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-65" title="§ 11.4.2 Mitigations">§ 11.4.2 Mitigations</a> <a
                    href="#ref-for-dfn-key-system-66" title="Reference 2">(2)</a> <a href="#ref-for-dfn-key-system-67"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-key-system-68" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-key-system-69" title="Reference 5">(5)</a> <a href="#ref-for-dfn-key-system-70"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-key-system-71" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-key-system-72" title="Reference 8">(8)</a> <a href="#ref-for-dfn-key-system-73"
                    title="Reference 9">(9)</a> <a href="#ref-for-dfn-key-system-74" title="Reference 10">(10)</a> <a
                    href="#ref-for-dfn-key-system-75" title="Reference 11">(11)</a> <a href="#ref-for-dfn-key-system-76"
                    title="Reference 12">(12)</a> <a href="#ref-for-dfn-key-system-77" title="Reference 13">(13)</a> <a
                    href="#ref-for-dfn-key-system-78" title="Reference 14">(14)</a> <a href="#ref-for-dfn-key-system-79"
                    title="Reference 15">(15)</a> <a href="#ref-for-dfn-key-system-80" title="Reference 16">(16)</a> <a
                    href="#ref-for-dfn-key-system-81" title="Reference 17">(17)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-82" title="§ 11.5.1 Concerns">§ 11.5.1 Concerns</a> <a
                    href="#ref-for-dfn-key-system-83" title="Reference 2">(2)</a> <a href="#ref-for-dfn-key-system-84"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-key-system-85" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-key-system-86" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-87" title="§ 11.6.1 Concerns">§ 11.6.1 Concerns</a> <a
                    href="#ref-for-dfn-key-system-88" title="Reference 2">(2)</a> <a href="#ref-for-dfn-key-system-89"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-key-system-90" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-key-system-91" title="Reference 5">(5)</a> <a href="#ref-for-dfn-key-system-92"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-key-system-93" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-94" title="§ 11.7 Private Browsing Modes">§ 11.7 Private Browsing
                    Modes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-95"
                    title="§ 13.2 Selecting a Supported Key System and Using Initialization Data from the &quot;encrypted&quot; Event">§
                    13.2 Selecting a Supported Key System and Using Initialization Data from the "encrypted" Event</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-key-session"
        aria-label="Links in this document to definition: Key Session">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-key-session"
                aria-label="Permalink for definition: Key Session. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-key-session-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-session-2" title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession
                    Interface</a> <a href="#ref-for-dfn-key-session-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-session-4" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-session-5" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-key-session-6" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-session-7" title="§ 6.6.4 Session Closed">§ 6.6.4 Session Closed</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-session-id"
        aria-label="Links in this document to definition: Session ID">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-session-id"
                aria-label="Permalink for definition: Session ID. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-session-id-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-session-id-2" title="§ 5. MediaKeys Interface">§ 5. MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-session-id-3" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-session-id-4" title="§ 6.2 Methods">§ 6.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dfn-session-id-5" title="§ 6.8 Session Storage and Persistence">§ 6.8 Session Storage
                    and Persistence</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-key-s"
        aria-label="Links in this document to definition: Key">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-key-s"
                aria-label="Permalink for definition: Key. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-key-s-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-key-s-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-key-s-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-key-s-4" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-s-5" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-s-6" title="§ 9.1.4 License Format">§ 9.1.4 License Format</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-usable-for-decryption"
        aria-label="Links in this document to definition: Usable For Decryption">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-usable-for-decryption"
                aria-label="Permalink for definition: Usable For Decryption. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-usable-for-decryption-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-usable-for-decryption-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-usable-for-decryption-3" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a> <a href="#ref-for-dfn-usable-for-decryption-4"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-usable-for-decryption-5"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-usable-for-decryption-6"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-usable-for-decryption-7"
                    title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-usable-for-decryption-8" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to
                    Decrypt</a> <a href="#ref-for-dfn-usable-for-decryption-9" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-usable-for-decryption-10" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-usable-for-decryption-11"
                    title="§ 7.5.6 Attempt to Resume Playback If Necessary">§ 7.5.6 Attempt to Resume Playback If
                    Necessary</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-decryption-key-id"
        aria-label="Links in this document to definition: Key ID">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-decryption-key-id"
                aria-label="Permalink for definition: Key ID. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-decryption-key-id-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-decryption-key-id-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-decryption-key-id-4" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-5" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-6" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-decryption-key-id-7" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-decryption-key-id-8" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-9" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-10" title="§ 6.3.2 Methods">§ 6.3.2 Methods</a> <a
                    href="#ref-for-dfn-decryption-key-id-11" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-12" title="§ 6.6.2 Update Key Statuses">§ 6.6.2 Update Key
                    Statuses</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-13" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to
                    Decrypt</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-14" title="§ 9.1.3 License Request Format">§ 9.1.3 License
                    Request Format</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-15" title="§ 9.1.4 License Format">§ 9.1.4 License Format</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-16" title="§ 9.1.5 License Release Format">§ 9.1.5 License
                    Release Format</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-17" title="§ 9.1.6 License Release Acknowledgement Format">§
                    9.1.6 License Release Acknowledgement Format</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-known"
        aria-label="Links in this document to definition: Known Key">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-known"
                aria-label="Permalink for definition: Known Key. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-known-1" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-known-2" title="§ 6.2 Methods">§ 6.2 Methods</a> <a href="#ref-for-dfn-known-3"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-known-4" title="§ 6.3.1 Attributes">§ 6.3.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-known-5" title="§ 6.3.2 Methods">§ 6.3.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dfn-known-6" title="§ 6.6.2 Update Key Statuses">§ 6.6.2 Update Key Statuses</a>
            </li>
            <li>
                <a href="#ref-for-dfn-known-7" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5 Monitor for CDM
                    State Changes</a> <a href="#ref-for-dfn-known-8" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-license"
        aria-label="Links in this document to definition: License">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-license"
                aria-label="Permalink for definition: License. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-license-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-license-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-initialization-data"
        aria-label="Links in this document to definition: Initialization Data">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-initialization-data"
                aria-label="Permalink for definition: Initialization Data. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-initialization-data-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-initialization-data-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-initialization-data-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-initialization-data-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-initialization-data-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-initialization-data-6" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-7" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-initialization-data-8" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-initialization-data-9" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-initialization-data-10" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-11" title="§ 7. HTMLMediaElement Extensions">§ 7.
                    HTMLMediaElement Extensions</a> <a href="#ref-for-dfn-initialization-data-12"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-initialization-data-13"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-14" title="§ 7.3.1 Attributes">§ 7.3.1 Attributes</a> <a
                    href="#ref-for-dfn-initialization-data-15" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-16"
                    title="§ 7.3.2.1 Dictionary MediaEncryptedEventInit Members">§ 7.3.2.1 Dictionary
                    MediaEncryptedEventInit Members</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-17" title="§ 7.4 Event Summary">§ 7.4 Event Summary</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-18" title="§ 7.5.2 Initialization Data Encountered">§ 7.5.2
                    Initialization Data Encountered</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-19" title="§ 8.8.2 Support Extraction From Media Data">§ 8.8.2
                    Support Extraction From Media Data</a> <a href="#ref-for-dfn-initialization-data-20"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-21" title="§ 9.1.2 Behavior">§ 9.1.2 Behavior</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-22" title="§ 10.1 Input Data Attacks and Vulnerabilities">§
                    10.1 Input Data Attacks and Vulnerabilities</a> <a href="#ref-for-dfn-initialization-data-23"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-24"
                    title="§ 13.2 Selecting a Supported Key System and Using Initialization Data from the &quot;encrypted&quot; Event">§
                    13.2 Selecting a Supported Key System and Using Initialization Data from the "encrypted" Event</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-25" title="§ 13.3 Create MediaKeys Before Loading Media">§
                    13.3 Create MediaKeys Before Loading Media</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-initialization-data-type"
        aria-label="Links in this document to definition: Initialization Data Type">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-initialization-data-type"
                aria-label="Permalink for definition: Initialization Data Type. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-initialization-data-type-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-initialization-data-type-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-type-3" title="§ 3.3 MediaKeySystemConfiguration dictionary">§
                    3.3 MediaKeySystemConfiguration dictionary</a> <a href="#ref-for-dfn-initialization-data-type-4"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-type-5" title="§ 6.2 Methods">§ 6.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-type-6" title="§ 7.3.1 Attributes">§ 7.3.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-type-7"
                    title="§ 7.3.2.1 Dictionary MediaEncryptedEventInit Members">§ 7.3.2.1 Dictionary
                    MediaEncryptedEventInit Members</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-type-8" title="§ 7.5.2 Initialization Data Encountered">§
                    7.5.2 Initialization Data Encountered</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-type-9"
                    title="§ 8.8.1 Licenses Generated are Independent of Content Type">§ 8.8.1 Licenses Generated are
                    Independent of Content Type</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-type-10" title="§ 8.8.2 Support Extraction From Media Data">§
                    8.8.2 Support Extraction From Media Data</a> <a href="#ref-for-dfn-initialization-data-type-11"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-associable"
        aria-label="Links in this document to definition: Associable Value">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-associable"
                aria-label="Permalink for definition: Associable Value. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-associable-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-associable-2" title="§ 8.6.1 Direct Individualization">§ 8.6.1 Direct
                    Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-associable-3" title="§ 8.6.2 App-Assisted Individualization">§ 8.6.2 App-Assisted
                    Individualization</a> <a href="#ref-for-dfn-associable-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-associable-5" title="§ 11.4.1 Concerns">§ 11.4.1 Concerns</a>
            </li>
            <li>
                <a href="#ref-for-dfn-associable-6" title="§ 11.4.2 Mitigations">§ 11.4.2 Mitigations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-non-associable"
        aria-label="Links in this document to definition: non-associable">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-non-associable"
                aria-label="Permalink for definition: non-associable. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-non-associable-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-non-associable-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-associable-by-an-entity"
        aria-label="Links in this document to definition: associable by an entity">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-associable-by-an-entity"
                aria-label="Permalink for definition: associable by an entity. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-associable-by-an-entity-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-associable-by-an-entity-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-associable-by-an-entity-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-associable-by-an-entity-4" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-associable-by-an-entity-5" title="§ 8.5.2 Encrypt Identifiers">§ 8.5.2 Encrypt
                    Identifiers</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-non-associable-by-an-entity"
        aria-label="Links in this document to definition: non-associable by an entity">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-non-associable-by-an-entity"
                aria-label="Permalink for definition: non-associable by an entity. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-non-associable-by-an-entity-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-non-associable-by-application"
        aria-label="Links in this document to definition: non-associable by the application">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-non-associable-by-application"
                aria-label="Permalink for definition: non-associable by the application. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-non-associable-by-application-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-non-associable-by-application-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-non-associable-by-application-3"
                    title="§ 8.4.1 Use Per-Origin Per-Profile Values">§ 8.4.1 Use Per-Origin Per-Profile Values</a>
            </li>
            <li>
                <a href="#ref-for-dfn-non-associable-by-application-4" title="§ 8.4.2 Allow Values to Be Cleared">§
                    8.4.2 Allow Values to Be Cleared</a>
            </li>
            <li>
                <a href="#ref-for-dfn-non-associable-by-application-5" title="§ 8.5.4 Use Non-Associable Identifiers">§
                    8.5.4 Use Non-Associable Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-non-associable-by-application-6" title="§ 8.5.5 Allow Identifiers to Be Cleared">§
                    8.5.5 Allow Identifiers to Be Cleared</a>
            </li>
            <li>
                <a href="#ref-for-dfn-non-associable-by-application-7" title="§ 8.6 Individualization">§ 8.6
                    Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-non-associable-by-application-8" title="§ 11.4.2 Mitigations">§ 11.4.2
                    Mitigations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-associable-by-the-application"
        aria-label="Links in this document to definition: associable by the application">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-associable-by-the-application"
                aria-label="Permalink for definition: associable by the application. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-associable-by-the-application-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-associable-by-the-application-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-associable-by-the-application-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-associable-by-the-application-4" title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-distinctive"
        aria-label="Links in this document to definition: Distinctive Value">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-distinctive"
                aria-label="Permalink for definition: Distinctive Value. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-distinctive-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-distinctive-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-3" title="§ 8.4.1 Use Per-Origin Per-Profile Values">§ 8.4.1 Use
                    Per-Origin Per-Profile Values</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-4" title="§ 8.5 Identifiers">§ 8.5 Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-5" title="§ 8.5.5 Allow Identifiers to Be Cleared">§ 8.5.5 Allow
                    Identifiers to Be Cleared</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-6" title="§ 11.4.2 Mitigations">§ 11.4.2 Mitigations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-permanent-identifier-s"
        aria-label="Links in this document to definition: Permanent Identifier">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-permanent-identifier-s"
                aria-label="Permalink for definition: Permanent Identifier. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-permanent-identifier-s-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-permanent-identifier-s-2" title="§ 8.5 Identifiers">§ 8.5 Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-permanent-identifier-s-3" title="§ 8.6.1 Direct Individualization">§ 8.6.1 Direct
                    Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-permanent-identifier-s-4" title="§ 11.4.1 Concerns">§ 11.4.1 Concerns</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-distinctive-permanent-identifier-s"
        aria-label="Links in this document to definition: Distinctive Permanent Identifier">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-distinctive-permanent-identifier-s"
                aria-label="Permalink for definition: Distinctive Permanent Identifier. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-1" title="§ 2. Definitions">§ 2.
                    Definitions</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-4"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-5"
                    title="Reference 5">(5)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-6"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-7"
                    title="Reference 7">(7)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-8"
                    title="Reference 8">(8)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-9"
                    title="Reference 9">(9)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-10"
                    title="Reference 10">(10)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-11"
                    title="Reference 11">(11)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-12"
                    title="Reference 12">(12)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-13"
                    title="Reference 13">(13)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-14"
                    title="Reference 14">(14)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-15"
                    title="Reference 15">(15)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-16"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-17" title="§ 3.2.2.4 Get Consent Status">§
                    3.2.2.4 Get Consent Status</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-18" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-19"
                    title="§ 6.6.1 Queue a &quot;message&quot; Event">§ 6.6.1 Queue a "message" Event</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-20" title="§ 8.5 Identifiers">§ 8.5
                    Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-21" title="§ 8.5.2 Encrypt Identifiers">§ 8.5.2
                    Encrypt Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-22"
                    title="§ 8.5.3 Use Per-Origin Per-Profile Identifiers">§ 8.5.3 Use Per-Origin Per-Profile
                    Identifiers</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-23"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-24"
                    title="§ 8.5.5 Allow Identifiers to Be Cleared">§ 8.5.5 Allow Identifiers to Be Cleared</a> <a
                    href="#ref-for-dfn-distinctive-permanent-identifier-s-25" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-26" title="§ 8.6 Individualization">§ 8.6
                    Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-27" title="§ 8.6.1 Direct Individualization">§
                    8.6.1 Direct Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-28" title="§ 10.3.1 Potential Attacks">§ 10.3.1
                    Potential Attacks</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-29"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-30" title="§ 11.4.1 Concerns">§ 11.4.1
                    Concerns</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-31"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-32" title="§ 11.4.2 Mitigations">§ 11.4.2
                    Mitigations</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-33"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-distinctive-identifier-s"
        aria-label="Links in this document to definition: Distinctive Identifier">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-distinctive-identifier-s"
                aria-label="Permalink for definition: Distinctive Identifier. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-4" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-5" title="§ 3.2.2.1 Get Supported Configuration">§
                    3.2.2.1 Get Supported Configuration</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-6"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dfn-distinctive-identifier-s-7" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-8" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-9" title="§ 3.2.2.4 Get Consent Status">§ 3.2.2.4 Get
                    Consent Status</a> <a href="#ref-for-dfn-distinctive-identifier-s-10" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-11"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dfn-distinctive-identifier-s-12" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-13" title="§ 6.6.1 Queue a &quot;message&quot; Event">§
                    6.6.1 Queue a "message" Event</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-14" title="§ 8.3 Persistent Data">§ 8.3 Persistent
                    Data</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-15" title="§ 8.5 Identifiers">§ 8.5 Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-16" title="§ 8.5.2 Encrypt Identifiers">§ 8.5.2 Encrypt
                    Identifiers</a> <a href="#ref-for-dfn-distinctive-identifier-s-17" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-18"
                    title="§ 8.5.3 Use Per-Origin Per-Profile Identifiers">§ 8.5.3 Use Per-Origin Per-Profile
                    Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-19" title="§ 8.5.4 Use Non-Associable Identifiers">§
                    8.5.4 Use Non-Associable Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-20" title="§ 8.5.5 Allow Identifiers to Be Cleared">§
                    8.5.5 Allow Identifiers to Be Cleared</a> <a href="#ref-for-dfn-distinctive-identifier-s-21"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-22" title="§ 8.6 Individualization">§ 8.6
                    Individualization</a> <a href="#ref-for-dfn-distinctive-identifier-s-23" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-24" title="§ 8.6.1 Direct Individualization">§ 8.6.1
                    Direct Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-25" title="§ 8.6.2 App-Assisted Individualization">§
                    8.6.2 App-Assisted Individualization</a> <a href="#ref-for-dfn-distinctive-identifier-s-26"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-27" title="§ 10.3.1 Potential Attacks">§ 10.3.1 Potential
                    Attacks</a> <a href="#ref-for-dfn-distinctive-identifier-s-28" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-29" title="§ 10.5 Cross-Directory Attacks">§ 10.5
                    Cross-Directory Attacks</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-30" title="§ 11.3.2 Mitigations">§ 11.3.2 Mitigations</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-31" title="§ 11.4.1 Concerns">§ 11.4.1 Concerns</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-32" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-33" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-34" title="§ 11.4.2 Mitigations">§ 11.4.2 Mitigations</a>
                <a href="#ref-for-dfn-distinctive-identifier-s-35" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-36" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-37" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-38" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-39" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-40" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-41" title="§ 11.6.1 Concerns">§ 11.6.1 Concerns</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-42" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-43" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-44" title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-use-of-distinctive-identifiers-and-distinctive-permanent-identifiers"
        aria-label="Links in this document to definition: Use of Distinctive Identifiers and Distinctive Permanent Identifiers">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-use-of-distinctive-identifiers-and-distinctive-permanent-identifiers"
                aria-label="Permalink for definition: Use of Distinctive Identifiers and Distinctive Permanent Identifiers. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-use-distinctive-identifier-s"
        aria-label="Links in this document to definition: uses Distinctive Identifier(s)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-use-distinctive-identifier-s"
                aria-label="Permalink for definition: uses Distinctive Identifier(s). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-2"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-3" title="§ 8.5.5 Allow Identifiers to Be Cleared">§
                    8.5.5 Allow Identifiers to Be Cleared</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-4" title="§ 8.6 Individualization">§ 8.6
                    Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-5" title="§ 8.6.2 App-Assisted Individualization">§
                    8.6.2 App-Assisted Individualization</a> <a href="#ref-for-dfn-use-distinctive-identifier-s-6"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-use-distinctive-identifier-s-7"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-use-distinctive-identifier-s-8"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-9" title="§ 11.4.2 Mitigations">§ 11.4.2
                    Mitigations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-use-distinctive-permanent-identifier-s"
        aria-label="Links in this document to definition: uses Distinctive Permanent Identifier(s)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-use-distinctive-permanent-identifier-s"
                aria-label="Permalink for definition: uses Distinctive Permanent Identifier(s). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-use-distinctive-permanent-identifier-s-1" title="§ 2. Definitions">§ 2.
                    Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-permanent-identifier-s-2"
                    title="§ 8.5.5 Allow Identifiers to Be Cleared">§ 8.5.5 Allow Identifiers to Be Cleared</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-permanent-identifier-s-3"
                    title="§ 8.6.1 Direct Individualization">§ 8.6.1 Direct Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-permanent-identifier-s-4"
                    title="§ 8.6.2 App-Assisted Individualization">§ 8.6.2 App-Assisted Individualization</a> <a
                    href="#ref-for-dfn-use-distinctive-permanent-identifier-s-5" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
        aria-label="Links in this document to definition: uses Distinctive Identifier(s) or Distinctive Permanent Identifier(s)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                aria-label="Permalink for definition: uses Distinctive Identifier(s) or Distinctive Permanent Identifier(s). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a
                    href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-3"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-4"
                    title="§ 4.2 Methods">§ 4.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-5"
                    title="§ 8.5 Identifiers">§ 8.5 Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-6"
                    title="§ 8.5.1 Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers">§ 8.5.1
                    Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers</a> <a
                    href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-7"
                    title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-8"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-9"
                    title="§ 8.6 Individualization">§ 8.6 Individualization</a> <a
                    href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-10"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-11"
                    title="§ 11.4.2 Mitigations">§ 11.4.2 Mitigations</a> <a
                    href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-12"
                    title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-13"
                    title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-14"
                    title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-cross-origin-limitations"
        aria-label="Links in this document to definition: Cross Origin Limitations">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-cross-origin-limitations"
                aria-label="Permalink for definition: Cross Origin Limitations. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-mixed-content-limitations"
        aria-label="Links in this document to definition: Mixed Content Limitations">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-mixed-content-limitations"
                aria-label="Permalink for definition: Mixed Content Limitations. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-mixed-content-limitations-1" title="§ 7.5.2 Initialization Data Encountered">§
                    7.5.2 Initialization Data Encountered</a> <a href="#ref-for-dfn-mixed-content-limitations-2"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-time"
        aria-label="Links in this document to definition: Time">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-time"
                aria-label="Permalink for definition: Time. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-time-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-time-2" title="§ 6.6.3 Update Expiration">§ 6.6.3 Update Expiration</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-expiration"
        aria-label="Links in this document to definition: Expiration Time">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-expiration"
                aria-label="Permalink for definition: Expiration Time. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-expiration-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-expiration-2" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-expiration-3" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-expiration-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-expiration-5" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3 MediaKeyStatusMap
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-expiration-6" title="§ 6.6.3 Update Expiration">§ 6.6.3 Update Expiration</a>
            </li>
            <li>
                <a href="#ref-for-dfn-expiration-7" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5 Monitor for
                    CDM State Changes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-browsing-profile"
        aria-label="Links in this document to definition: Browsing Profile">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-browsing-profile"
                aria-label="Permalink for definition: Browsing Profile. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-browsing-profile-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-2" title="§ 5.3 Storage and Persistence">§ 5.3 Storage and
                    Persistence</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-3"
                    title="§ 8.3.1 Use origin-specific and browsing profile-specific Key System storage">§ 8.3.1 Use
                    origin-specific and browsing profile-specific Key System storage</a> <a
                    href="#ref-for-dfn-browsing-profile-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-5" title="§ 8.3.2 Allow Persistent Data to Be Cleared">§ 8.3.2
                    Allow Persistent Data to Be Cleared</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-6" title="§ 8.4.1 Use Per-Origin Per-Profile Values">§ 8.4.1 Use
                    Per-Origin Per-Profile Values</a> <a href="#ref-for-dfn-browsing-profile-7"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-8" title="§ 8.5.3 Use Per-Origin Per-Profile Identifiers">§ 8.5.3
                    Use Per-Origin Per-Profile Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-9" title="§ 8.5.4 Use Non-Associable Identifiers">§ 8.5.4 Use
                    Non-Associable Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-10" title="§ 10.3.2 Mitigations">§ 10.3.2 Mitigations</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-11" title="§ 11.3.1 Concerns">§ 11.3.1 Concerns</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-12" title="§ 11.4.1 Concerns">§ 11.4.1 Concerns</a> <a
                    href="#ref-for-dfn-browsing-profile-13" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-14" title="§ 11.4.2 Mitigations">§ 11.4.2 Mitigations</a> <a
                    href="#ref-for-dfn-browsing-profile-15" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-browsing-profile-16" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-browsing-profile-17" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-18" title="§ 11.5.1 Concerns">§ 11.5.1 Concerns</a> <a
                    href="#ref-for-dfn-browsing-profile-19" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-browsing-profile-20" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-encrypted-media"
        aria-label="Links in this document to definition: encrypted-media">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-encrypted-media"
                aria-label="Permalink for definition: encrypted-media. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-encrypted-media-1" title="§ Status of This Document">§ Status of This Document</a>
            </li>
            <li>
                <a href="#ref-for-dfn-encrypted-media-2" title="§ 3.2.1 Methods">§ 3.2.1 Methods</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-navigator"
        aria-label="Links in this document to definition: Navigator">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-navigator"
                aria-label="Permalink for definition: Navigator. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-navigator-1" title="§ 3.2 Navigator Extension: requestMediaKeySystemAccess()">§
                    3.2 Navigator Extension: requestMediaKeySystemAccess()</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-navigator-requestmediakeysystemaccess"
        aria-label="Links in this document to definition: requestMediaKeySystemAccess()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-navigator-requestmediakeysystemaccess"
                aria-label="Permalink for definition: requestMediaKeySystemAccess(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-571417346">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-1"
                    title="§ 3.1 Permissions Policy Integration">§ 3.1 Permissions Policy Integration</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-2"
                    title="§ 3.2 Navigator Extension: requestMediaKeySystemAccess()">§ 3.2 Navigator Extension:
                    requestMediaKeySystemAccess()</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-3"
                    title="§ 3.2.2.1 Get Supported Configuration">§ 3.2.2.1 Get Supported Configuration</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-4"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-5"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-6"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-7"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-8"
                    title="Reference 5">(5)</a> <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-9"
                    title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-10" title="§ 4.2 Methods">§ 4.2 Methods</a>
                <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-11" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-12"
                    title="§ 8.5.1 Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers">§ 8.5.1
                    Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-13"
                    title="§ 8.8.1 Licenses Generated are Independent of Content Type">§ 8.8.1 Licenses Generated are
                    Independent of Content Type</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-14" title="§ 11.4.2 Mitigations">§ 11.4.2
                    Mitigations</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-15"
                    title="§ 13.2 Selecting a Supported Key System and Using Initialization Data from the &quot;encrypted&quot; Event">§
                    13.2 Selecting a Supported Key System and Using Initialization Data from the "encrypted" Event</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-get-supported-configuration"
        aria-label="Links in this document to definition: Get Supported Configuration">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-get-supported-configuration"
                aria-label="Permalink for definition: Get Supported Configuration. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-get-supported-configuration-1" title="§ 3.2.1 Methods">§ 3.2.1 Methods</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-get-supported-configuration-and-consent"
        aria-label="Links in this document to definition: Get Supported Configuration and Consent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-get-supported-configuration-and-consent"
                aria-label="Permalink for definition: Get Supported Configuration and Consent. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-get-supported-configuration-and-consent-1"
                    title="§ 3.2.2.1 Get Supported Configuration">§ 3.2.2.1 Get Supported Configuration</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-get-supported-capabilities-for-audio-video-type"
        aria-label="Links in this document to definition: Get Supported Capabilities for Audio/Video Type">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-get-supported-capabilities-for-audio-video-type"
                aria-label="Permalink for definition: Get Supported Capabilities for Audio/Video Type. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-get-supported-capabilities-for-audio-video-type-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dfn-get-supported-capabilities-for-audio-video-type-2"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-get-consent-status"
        aria-label="Links in this document to definition: Get Consent Status">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-get-consent-status"
                aria-label="Permalink for definition: Get Consent Status. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-get-consent-status-1" title="§ 3.2.2.2 Get Supported Configuration and Consent">§
                    3.2.2.2 Get Supported Configuration and Consent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysystemconfiguration"
        aria-label="Links in this document to definition: MediaKeySystemConfiguration">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemconfiguration"
                aria-label="Permalink for definition: MediaKeySystemConfiguration. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-798704963">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-1"
                    title="§ 3.2 Navigator Extension: requestMediaKeySystemAccess()">§ 3.2 Navigator Extension:
                    requestMediaKeySystemAccess()</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-2" title="§ 3.2.2.1 Get Supported Configuration">§
                    3.2.2.1 Get Supported Configuration</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-3"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysystemconfiguration-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-5"
                    title="§ 3.2.2.3 Get Supported Capabilities for Audio/Video Type">§ 3.2.2.3 Get Supported
                    Capabilities for Audio/Video Type</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-6"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dom-mediakeysystemconfiguration-7" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysystemconfiguration-8" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-9" title="§ 4. MediaKeySystemAccess Interface">§ 4.
                    MediaKeySystemAccess Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-10" title="§ 4.2 Methods">§ 4.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-11"
                    title="§ 8.8.1 Licenses Generated are Independent of Content Type">§ 8.8.1 Licenses Generated are
                    Independent of Content Type</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-12" title="§ 9.1.1 Capabilities">§ 9.1.1
                    Capabilities</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysrequirement"
        aria-label="Links in this document to definition: MediaKeysRequirement">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysrequirement"
                aria-label="Permalink for definition: MediaKeysRequirement. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1197737164">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-1" title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3
                    MediaKeySystemConfiguration dictionary</a> <a href="#ref-for-dom-mediakeysrequirement-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysrequirement-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediakeysrequirement-4"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-mediakeysrequirement-5"
                    title="Reference 5">(5)</a> <a href="#ref-for-dom-mediakeysrequirement-6"
                    title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-7" title="§ 4.2 Methods">§ 4.2 Methods</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysrequirement-required"
        aria-label="Links in this document to definition: required">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysrequirement-required"
                aria-label="Permalink for definition: required. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1197737164">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-required-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dom-mediakeysrequirement-required-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-required-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-required-4"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysrequirement-required-5" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-required-6" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-required-7" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-required-8" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-required-9" title="Reference 6">(6)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-required-10" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-required-11" title="§ 3.2.2.4 Get Consent Status">§ 3.2.2.4
                    Get Consent Status</a> <a href="#ref-for-dom-mediakeysrequirement-required-12"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-required-13"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dom-mediakeysrequirement-required-14" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-required-15" title="§ 4.2 Methods">§ 4.2 Methods</a> <a
                    href="#ref-for-dom-mediakeysrequirement-required-16" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-required-17" title="§ 5. MediaKeys Interface">§ 5. MediaKeys
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-required-18" title="§ 8.6 Individualization">§ 8.6
                    Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-required-19" title="§ 9.1.1 Capabilities">§ 9.1.1
                    Capabilities</a> <a href="#ref-for-dom-mediakeysrequirement-required-20" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-required-21" title="§ 11.7 Private Browsing Modes">§ 11.7
                    Private Browsing Modes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysrequirement-optional"
        aria-label="Links in this document to definition: optional">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysrequirement-optional"
                aria-label="Permalink for definition: optional. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1197737164">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-optional-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysrequirement-optional-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-optional-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-optional-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-optional-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-optional-6" title="Reference 6">(6)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-optional-7" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-optional-8" title="§ 3.2.2.4 Get Consent Status">§ 3.2.2.4
                    Get Consent Status</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-optional-9"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dom-mediakeysrequirement-optional-10" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-optional-11" title="§ 4.2 Methods">§ 4.2 Methods</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysrequirement-not-allowed"
        aria-label="Links in this document to definition: not-allowed">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysrequirement-not-allowed"
                aria-label="Permalink for definition: not-allowed. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1197737164">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-not-allowed-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysrequirement-not-allowed-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-not-allowed-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-not-allowed-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-not-allowed-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-not-allowed-6" title="Reference 6">(6)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-not-allowed-7" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-not-allowed-8" title="§ 3.2.2.4 Get Consent Status">§ 3.2.2.4
                    Get Consent Status</a> <a href="#ref-for-dom-mediakeysrequirement-not-allowed-9"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysrequirement-not-allowed-10"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-not-allowed-11"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dom-mediakeysrequirement-not-allowed-12"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysrequirement-not-allowed-13"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-not-allowed-14"
                    title="§ 8.5.1 Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers">§ 8.5.1
                    Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemconfiguration-label"
        aria-label="Links in this document to definition: label">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemconfiguration-label"
                aria-label="Permalink for definition: label. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-798704963">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-label-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysystemconfiguration-label-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-label-3"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemconfiguration-initdatatypes"
        aria-label="Links in this document to definition: initDataTypes">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemconfiguration-initdatatypes"
                aria-label="Permalink for definition: initDataTypes. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-798704963">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-initdatatypes-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysystemconfiguration-initdatatypes-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-initdatatypes-3"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-initdatatypes-4"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-initdatatypes-5"
                    title="§ 8.8.1 Licenses Generated are Independent of Content Type">§ 8.8.1 Licenses Generated are
                    Independent of Content Type</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemconfiguration-audiocapabilities"
        aria-label="Links in this document to definition: audioCapabilities">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemconfiguration-audiocapabilities"
                aria-label="Permalink for definition: audioCapabilities. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-798704963">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-audiocapabilities-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysystemconfiguration-audiocapabilities-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-audiocapabilities-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-audiocapabilities-4"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-audiocapabilities-5"
                    title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-audiocapabilities-6"
                    title="§ 3.2.2.3 Get Supported Capabilities for Audio/Video Type">§ 3.2.2.3 Get Supported
                    Capabilities for Audio/Video Type</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-audiocapabilities-7"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dom-mediakeysystemconfiguration-audiocapabilities-8"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemconfiguration-videocapabilities"
        aria-label="Links in this document to definition: videoCapabilities">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemconfiguration-videocapabilities"
                aria-label="Permalink for definition: videoCapabilities. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-798704963">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-videocapabilities-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysystemconfiguration-videocapabilities-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-videocapabilities-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-videocapabilities-4"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-videocapabilities-5"
                    title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-videocapabilities-6"
                    title="§ 3.2.2.3 Get Supported Capabilities for Audio/Video Type">§ 3.2.2.3 Get Supported
                    Capabilities for Audio/Video Type</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-videocapabilities-7"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dom-mediakeysystemconfiguration-videocapabilities-8"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-videocapabilities-9"
                    title="§ 8.8.1 Licenses Generated are Independent of Content Type">§ 8.8.1 Licenses Generated are
                    Independent of Content Type</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemconfiguration-distinctiveidentifier"
        aria-label="Links in this document to definition: distinctiveIdentifier">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                aria-label="Permalink for definition: distinctiveIdentifier. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-798704963">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-1" title="§ 2. Definitions">§ 2.
                    Definitions</a> <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-2"
                    title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-3" title="Reference 3">(3)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-4" title="Reference 4">(4)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-5" title="Reference 5">(5)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-6" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-7"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-8"
                    title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-9" title="Reference 3">(3)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-10" title="Reference 4">(4)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-11" title="Reference 5">(5)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-12" title="Reference 6">(6)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-13" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-14"
                    title="§ 3.2.2.4 Get Consent Status">§ 3.2.2.4 Get Consent Status</a> <a
                    href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-15" title="Reference 2">(2)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-16" title="Reference 3">(3)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-17" title="Reference 4">(4)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-18" title="Reference 5">(5)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-19" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-20"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-21"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-22" title="§ 4.2 Methods">§ 4.2
                    Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-23"
                    title="§ 8.5.1 Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers">§ 8.5.1
                    Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-24"
                    title="§ 8.6 Individualization">§ 8.6 Individualization</a> <a
                    href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-25" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-26"
                    title="§ 9.1.1 Capabilities">§ 9.1.1 Capabilities</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-27"
                    title="§ 11.7 Private Browsing Modes">§ 11.7 Private Browsing Modes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemconfiguration-persistentstate"
        aria-label="Links in this document to definition: persistentState">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemconfiguration-persistentstate"
                aria-label="Permalink for definition: persistentState. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-798704963">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-4"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-5"
                    title="Reference 5">(5)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-6"
                    title="Reference 6">(6)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-7"
                    title="Reference 7">(7)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-8"
                    title="Reference 8">(8)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-9"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-10" title="§ 4.2 Methods">§ 4.2
                    Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-11" title="§ 5. MediaKeys Interface">§
                    5. MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-12" title="§ 9.1.1 Capabilities">§
                    9.1.1 Capabilities</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-13"
                    title="§ 11.7 Private Browsing Modes">§ 11.7 Private Browsing Modes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemconfiguration-sessiontypes"
        aria-label="Links in this document to definition: sessionTypes">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemconfiguration-sessiontypes"
                aria-label="Permalink for definition: sessionTypes. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-798704963">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-sessiontypes-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysystemconfiguration-sessiontypes-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-sessiontypes-3"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-sessiontypes-4"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-sessiontypes-5" title="§ 4.2 Methods">§ 4.2
                    Methods</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemmediacapability"
        aria-label="Links in this document to definition: MediaKeySystemMediaCapability">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemmediacapability"
                aria-label="Permalink for definition: MediaKeySystemMediaCapability. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1151374081">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-1"
                    title="§ 3.2.2.3 Get Supported Capabilities for Audio/Video Type">§ 3.2.2.3 Get Supported
                    Capabilities for Audio/Video Type</a> <a href="#ref-for-dom-mediakeysystemmediacapability-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysystemmediacapability-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediakeysystemmediacapability-4"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-5"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dom-mediakeysystemmediacapability-6" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysystemmediacapability-7" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysystemmediacapability-8" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-9"
                    title="§ 3.4 MediaKeySystemMediaCapability dictionary">§ 3.4 MediaKeySystemMediaCapability
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-10"
                    title="§ 3.4.1 Dictionary MediaKeySystemMediaCapability Members">§ 3.4.1 Dictionary
                    MediaKeySystemMediaCapability Members</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemmediacapability-contenttype"
        aria-label="Links in this document to definition: contentType">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemmediacapability-contenttype"
                aria-label="Permalink for definition: contentType. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1151374081">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-contenttype-1"
                    title="§ 3.2.2.3 Get Supported Capabilities for Audio/Video Type">§ 3.2.2.3 Get Supported
                    Capabilities for Audio/Video Type</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-contenttype-2"
                    title="§ 3.4 MediaKeySystemMediaCapability dictionary">§ 3.4 MediaKeySystemMediaCapability
                    dictionary</a> <a href="#ref-for-dom-mediakeysystemmediacapability-contenttype-3"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemmediacapability-encryptionscheme"
        aria-label="Links in this document to definition: encryptionScheme">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemmediacapability-encryptionscheme"
                aria-label="Permalink for definition: encryptionScheme. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1151374081">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-encryptionscheme-1"
                    title="§ Status of This Document">§ Status of This Document</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-encryptionscheme-2"
                    title="§ 3.2.2.3 Get Supported Capabilities for Audio/Video Type">§ 3.2.2.3 Get Supported
                    Capabilities for Audio/Video Type</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-encryptionscheme-3"
                    title="§ 3.4 MediaKeySystemMediaCapability dictionary">§ 3.4 MediaKeySystemMediaCapability
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-encryptionscheme-4" title="§ 4.2 Methods">§ 4.2
                    Methods</a> <a href="#ref-for-dom-mediakeysystemmediacapability-encryptionscheme-5"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-encryptionscheme-6" title="§ 9.1.1 Capabilities">§
                    9.1.1 Capabilities</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-scheme-cenc"
        aria-label="Links in this document to definition: cenc">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#scheme-cenc"
                aria-label="Permalink for definition: cenc. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-scheme-cenc-1" title="§ 9.1.1 Capabilities">§ 9.1.1 Capabilities</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-scheme-cbcs"
        aria-label="Links in this document to definition: cbcs">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#scheme-cbcs"
                aria-label="Permalink for definition: cbcs. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-scheme-cbcs-1" title="§ 3.4.1 Dictionary MediaKeySystemMediaCapability Members">§
                    3.4.1 Dictionary MediaKeySystemMediaCapability Members</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-cbcs-1-9"
        aria-label="Links in this document to definition: cbcs-1-9">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-cbcs-1-9"
                aria-label="Permalink for definition: cbcs-1-9. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemmediacapability-robustness"
        aria-label="Links in this document to definition: robustness">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemmediacapability-robustness"
                aria-label="Permalink for definition: robustness. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1151374081">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-robustness-1"
                    title="§ 3.2.2.3 Get Supported Capabilities for Audio/Video Type">§ 3.2.2.3 Get Supported
                    Capabilities for Audio/Video Type</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-robustness-2"
                    title="§ 3.4 MediaKeySystemMediaCapability dictionary">§ 3.4 MediaKeySystemMediaCapability
                    dictionary</a> <a href="#ref-for-dom-mediakeysystemmediacapability-robustness-3"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-robustness-4" title="§ 9.1.1 Capabilities">§ 9.1.1
                    Capabilities</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysystemaccess"
        aria-label="Links in this document to definition: MediaKeySystemAccess">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemaccess"
                aria-label="Permalink for definition: MediaKeySystemAccess. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1780138428">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dom-mediakeysystemaccess-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysystemaccess-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-4"
                    title="§ 3.2 Navigator Extension: requestMediaKeySystemAccess()">§ 3.2 Navigator Extension:
                    requestMediaKeySystemAccess()</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-5" title="§ 3.2.1 Methods">§ 3.2.1 Methods</a> <a
                    href="#ref-for-dom-mediakeysystemaccess-6" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysystemaccess-7" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-8" title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3
                    MediaKeySystemConfiguration dictionary</a> <a href="#ref-for-dom-mediakeysystemaccess-9"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysystemaccess-10"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediakeysystemaccess-11"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-12"
                    title="§ 3.4.1 Dictionary MediaKeySystemMediaCapability Members">§ 3.4.1 Dictionary
                    MediaKeySystemMediaCapability Members</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-13" title="§ 4. MediaKeySystemAccess Interface">§ 4.
                    MediaKeySystemAccess Interface</a> <a href="#ref-for-dom-mediakeysystemaccess-14"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-15" title="§ 5. MediaKeys Interface">§ 5. MediaKeys
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-16" title="§ 8.6 Individualization">§ 8.6
                    Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-17" title="§ 11.7 Private Browsing Modes">§ 11.7 Private
                    Browsing Modes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemaccess-keysystem"
        aria-label="Links in this document to definition: keySystem">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemaccess-keysystem"
                aria-label="Permalink for definition: keySystem. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1780138428">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-keysystem-1" title="§ 3.2.1 Methods">§ 3.2.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-keysystem-2" title="§ 4. MediaKeySystemAccess Interface">§ 4.
                    MediaKeySystemAccess Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemaccess-getconfiguration"
        aria-label="Links in this document to definition: getConfiguration()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemaccess-getconfiguration"
                aria-label="Permalink for definition: getConfiguration(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1780138428">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-getconfiguration-1"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-getconfiguration-2"
                    title="§ 4. MediaKeySystemAccess Interface">§ 4. MediaKeySystemAccess Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemaccess-createmediakeys"
        aria-label="Links in this document to definition: createMediaKeys()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemaccess-createmediakeys"
                aria-label="Permalink for definition: createMediaKeys(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1780138428">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-createmediakeys-1"
                    title="§ 4. MediaKeySystemAccess Interface">§ 4. MediaKeySystemAccess Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeys"
        aria-label="Links in this document to definition: MediaKeys">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeys"
                aria-label="Permalink for definition: MediaKeys. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-742597615">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeys-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dom-mediakeys-2" title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeys-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediakeys-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediakeys-5" title="Reference 5">(5)</a> <a href="#ref-for-dom-mediakeys-6"
                    title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-7" title="§ 3.2.1 Methods">§ 3.2.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-8" title="§ 3.4.1 Dictionary MediaKeySystemMediaCapability Members">§
                    3.4.1 Dictionary MediaKeySystemMediaCapability Members</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-9" title="§ 4. MediaKeySystemAccess Interface">§ 4. MediaKeySystemAccess
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-10" title="§ 4.2 Methods">§ 4.2 Methods</a> <a
                    href="#ref-for-dom-mediakeys-11" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-12" title="§ 5. MediaKeys Interface">§ 5. MediaKeys Interface</a> <a
                    href="#ref-for-dom-mediakeys-13" title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeys-14"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-15" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-16" title="§ 5.2.2 CDM Unavailable">§ 5.2.2 CDM Unavailable</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-17" title="§ 5.3 Storage and Persistence">§ 5.3 Storage and
                    Persistence</a> <a href="#ref-for-dom-mediakeys-18" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-19" title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession
                    Interface</a> <a href="#ref-for-dom-mediakeys-20" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeys-21" title="Reference 3">(3)</a> <a href="#ref-for-dom-mediakeys-22"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-23" title="§ 6.6.2 Update Key Statuses">§ 6.6.2 Update Key Statuses</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-24" title="§ 6.7 Exceptions">§ 6.7 Exceptions</a> <a
                    href="#ref-for-dom-mediakeys-25" title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeys-26"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-27" title="§ 7. HTMLMediaElement Extensions">§ 7. HTMLMediaElement
                    Extensions</a> <a href="#ref-for-dom-mediakeys-28" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-29" title="§ 7.1 Attributes">§ 7.1 Attributes</a> <a
                    href="#ref-for-dom-mediakeys-30" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-31" title="§ 7.2 Methods">§ 7.2 Methods</a> <a
                    href="#ref-for-dom-mediakeys-32" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-33" title="§ 7.5.1 Media Data May Contain Encrypted Blocks">§ 7.5.1
                    Media Data May Contain Encrypted Blocks</a> <a href="#ref-for-dom-mediakeys-34"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeys-35" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeys-36" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-37" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to Decrypt</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-38" title="§ 8.3 Persistent Data">§ 8.3 Persistent Data</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-39" title="§ 8.6 Individualization">§ 8.6 Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-40" title="§ 9.1.1 Capabilities">§ 9.1.1 Capabilities</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-41" title="§ 11.3.2 Mitigations">§ 11.3.2 Mitigations</a> <a
                    href="#ref-for-dom-mediakeys-42" title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeys-43"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediakeys-44" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediakeys-45" title="Reference 5">(5)</a> <a href="#ref-for-dom-mediakeys-46"
                    title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-47" title="§ 13.3 Create MediaKeys Before Loading Media">§ 13.3 Create
                    MediaKeys Before Loading Media</a> <a href="#ref-for-dom-mediakeys-48" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysessiontype"
        aria-label="Links in this document to definition: MediaKeySessionType">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysessiontype"
                aria-label="Permalink for definition: MediaKeySessionType. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2083600463">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-1" title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3
                    MediaKeySystemConfiguration dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-2" title="§ 5. MediaKeys Interface">§ 5. MediaKeys
                    Interface</a> <a href="#ref-for-dom-mediakeysessiontype-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-4" title="§ 5.2.1 Is persistent session type?">§ 5.2.1 Is
                    persistent session type?</a> <a href="#ref-for-dom-mediakeysessiontype-5"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-6" title="§ 9.1.1 Capabilities">§ 9.1.1 Capabilities</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-7" title="§ 9.1.3 License Request Format">§ 9.1.3 License
                    Request Format</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-8" title="§ 9.1.4 License Format">§ 9.1.4 License Format</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysessiontype-temporary"
        aria-label="Links in this document to definition: temporary">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysessiontype-temporary"
                aria-label="Permalink for definition: temporary. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2083600463">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-temporary-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-temporary-2"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dom-mediakeysessiontype-temporary-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysessiontype-temporary-4" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysessiontype-temporary-5" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-temporary-6" title="§ 5. MediaKeys Interface">§ 5. MediaKeys
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-temporary-7" title="§ 5.2.1 Is persistent session type?">§
                    5.2.1 Is persistent session type?</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-temporary-8" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dom-mediakeysessiontype-temporary-9" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysessiontype-temporary-10" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-temporary-11" title="§ 6.7 Exceptions">§ 6.7 Exceptions</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-temporary-12"
                    title="§ 8.5.1 Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers">§ 8.5.1
                    Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-temporary-13" title="§ 9.1.1 Capabilities">§ 9.1.1
                    Capabilities</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-temporary-14" title="§ 9.1.4 License Format">§ 9.1.4 License
                    Format</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysessiontype-persistent-license"
        aria-label="Links in this document to definition: persistent-license">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysessiontype-persistent-license"
                aria-label="Permalink for definition: persistent-license. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2083600463">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-persistent-license-1" title="§ 5. MediaKeys Interface">§ 5.
                    MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-persistent-license-2"
                    title="§ 5.2.1 Is persistent session type?">§ 5.2.1 Is persistent session type?</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-persistent-license-3" title="§ 6.2 Methods">§ 6.2 Methods</a>
                <a href="#ref-for-dom-mediakeysessiontype-persistent-license-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysessiontype-persistent-license-5" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysessiontype-persistent-license-6" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-persistent-license-7"
                    title="§ 8.5.1 Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers">§ 8.5.1
                    Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-persistent-license-8" title="§ 9.1.1 Capabilities">§ 9.1.1
                    Capabilities</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-persistent-license-9" title="§ 9.1.2 Behavior">§ 9.1.2
                    Behavior</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-persistent-license-10"
                    title="§ 9.1.5 License Release Format">§ 9.1.5 License Release Format</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-persistent-license-11"
                    title="§ 9.1.5.1 Example message reflecting a record of license destruction">§ 9.1.5.1 Example
                    message reflecting a record of license destruction</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-record-s-of-license-destruction"
        aria-label="Links in this document to definition: record of license destruction">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-record-s-of-license-destruction"
                aria-label="Permalink for definition: record of license destruction. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-record-s-of-license-destruction-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-record-s-of-license-destruction-2" title="§ 5. MediaKeys Interface">§ 5. MediaKeys
                    Interface</a> <a href="#ref-for-dfn-record-s-of-license-destruction-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-record-s-of-license-destruction-4" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-record-s-of-license-destruction-5" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-record-s-of-license-destruction-6" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-record-s-of-license-destruction-7" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-record-s-of-license-destruction-8" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-record-s-of-license-destruction-9" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a>
            </li>
            <li>
                <a href="#ref-for-dfn-record-s-of-license-destruction-10"
                    title="§ 6.8 Session Storage and Persistence">§ 6.8 Session Storage and Persistence</a> <a
                    href="#ref-for-dfn-record-s-of-license-destruction-11" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-record-s-of-license-destruction-12" title="§ 8.3 Persistent Data">§ 8.3 Persistent
                    Data</a>
            </li>
            <li>
                <a href="#ref-for-dfn-record-s-of-license-destruction-13"
                    title="§ 9.1.5.1 Example message reflecting a record of license destruction">§ 9.1.5.1 Example
                    message reflecting a record of license destruction</a>
            </li>
            <li>
                <a href="#ref-for-dfn-record-s-of-license-destruction-14" title="§ 11.4.1 Concerns">§ 11.4.1
                    Concerns</a> <a href="#ref-for-dfn-record-s-of-license-destruction-15" title="Reference 2">(2)</a>
                <a href="#ref-for-dfn-record-s-of-license-destruction-16" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeys-createsession"
        aria-label="Links in this document to definition: createSession()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeys-createsession"
                aria-label="Permalink for definition: createSession(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-742597615">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeys-createsession-1" title="§ 5. MediaKeys Interface">§ 5. MediaKeys
                    Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeys-getstatusforpolicy"
        aria-label="Links in this document to definition: getStatusForPolicy()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeys-getstatusforpolicy"
                aria-label="Permalink for definition: getStatusForPolicy(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-742597615">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeys-getstatusforpolicy-1" title="§ Status of This Document">§ Status of This
                    Document</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-getstatusforpolicy-2" title="§ 5. MediaKeys Interface">§ 5. MediaKeys
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-getstatusforpolicy-3" title="§ 9.1.1 Capabilities">§ 9.1.1
                    Capabilities</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeyspolicy"
        aria-label="Links in this document to definition: MediaKeysPolicy">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeyspolicy"
                aria-label="Permalink for definition: MediaKeysPolicy. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeyspolicy-1" title="§ 5. MediaKeys Interface">§ 5. MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeyspolicy-2" title="§ 5.1 Methods">§ 5.1 Methods</a> <a
                    href="#ref-for-dom-mediakeyspolicy-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeyspolicy-4" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeyspolicy-minhdcpversion"
        aria-label="Links in this document to definition: minHdcpVersion">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeyspolicy-minhdcpversion"
                aria-label="Permalink for definition: minHdcpVersion. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeyspolicy-minhdcpversion-1" title="§ 5.1 Methods">§ 5.1 Methods</a> <a
                    href="#ref-for-dom-mediakeyspolicy-minhdcpversion-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeys-setservercertificate"
        aria-label="Links in this document to definition: setServerCertificate()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeys-setservercertificate"
                aria-label="Permalink for definition: setServerCertificate(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-742597615">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeys-setservercertificate-1" title="§ 5. MediaKeys Interface">§ 5. MediaKeys
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-setservercertificate-2" title="§ 9.1.1 Capabilities">§ 9.1.1
                    Capabilities</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-is-persistent-session-type"
        aria-label="Links in this document to definition: Is persistent session type?">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-is-persistent-session-type"
                aria-label="Permalink for definition: Is persistent session type?. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-is-persistent-session-type-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-is-persistent-session-type-2"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dfn-is-persistent-session-type-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-is-persistent-session-type-4" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dfn-is-persistent-session-type-5" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-is-persistent-session-type-6" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-is-persistent-session-type-7" title="§ 6.8 Session Storage and Persistence">§ 6.8
                    Session Storage and Persistence</a> <a href="#ref-for-dfn-is-persistent-session-type-8"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-is-persistent-session-type-9"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-cdm-unavailable"
        aria-label="Links in this document to definition: CDM Unavailable">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-cdm-unavailable"
                aria-label="Permalink for definition: CDM Unavailable. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-cdm-unavailable-1" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5 Monitor
                    for CDM State Changes</a> <a href="#ref-for-dfn-cdm-unavailable-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-unavailable-3" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to
                    Decrypt</a> <a href="#ref-for-dfn-cdm-unavailable-4" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-storage-and-persistence"
        aria-label="Links in this document to definition: Storage and Persistence">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-storage-and-persistence"
                aria-label="Permalink for definition: Storage and Persistence. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-storage-and-persistence-1" title="§ 6.8 Session Storage and Persistence">§ 6.8
                    Session Storage and Persistence</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysession"
        aria-label="Links in this document to definition: MediaKeySession">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession"
                aria-label="Permalink for definition: MediaKeySession. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dom-mediakeysession-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-4" title="§ 5. MediaKeys Interface">§ 5. MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-5" title="§ 5.1 Methods">§ 5.1 Methods</a> <a
                    href="#ref-for-dom-mediakeysession-6" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-7" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysession-8" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-9" title="§ 5.2.2 CDM Unavailable">§ 5.2.2 CDM Unavailable</a> <a
                    href="#ref-for-dom-mediakeysession-10" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-11" title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession
                    Interface</a> <a href="#ref-for-dom-mediakeysession-12" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-13" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysession-14" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediakeysession-15" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-mediakeysession-16" title="Reference 6">(6)</a> <a
                    href="#ref-for-dom-mediakeysession-17" title="Reference 7">(7)</a> <a
                    href="#ref-for-dom-mediakeysession-18" title="Reference 8">(8)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-19" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dom-mediakeysession-20" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-21" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysession-22" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediakeysession-23" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-24" title="§ 6.6.1 Queue a &quot;message&quot; Event">§ 6.6.1
                    Queue a "message" Event</a> <a href="#ref-for-dom-mediakeysession-25" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-26" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysession-27" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-28" title="§ 6.6.2 Update Key Statuses">§ 6.6.2 Update Key
                    Statuses</a> <a href="#ref-for-dom-mediakeysession-29" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-30" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-31" title="§ 6.6.3 Update Expiration">§ 6.6.3 Update
                    Expiration</a> <a href="#ref-for-dom-mediakeysession-32" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-33" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-34" title="§ 6.6.4 Session Closed">§ 6.6.4 Session Closed</a> <a
                    href="#ref-for-dom-mediakeysession-35" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-36" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysession-37" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-38" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5 Monitor
                    for CDM State Changes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-39" title="§ 6.8 Session Storage and Persistence">§ 6.8 Session
                    Storage and Persistence</a> <a href="#ref-for-dom-mediakeysession-40" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-41" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to
                    Decrypt</a> <a href="#ref-for-dom-mediakeysession-42" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-43" title="§ 8.7 Support Multiple Keys">§ 8.7 Support Multiple
                    Keys</a> <a href="#ref-for-dom-mediakeysession-44" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-45" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-closed"
        aria-label="Links in this document to definition: closed">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-closed"
                aria-label="Permalink for definition: closed. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-closed-1" title="§ 5.2.2 CDM Unavailable">§ 5.2.2 CDM Unavailable</a>
            </li>
            <li>
                <a href="#ref-for-dfn-closed-2" title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession
                    Interface</a> <a href="#ref-for-dfn-closed-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-closed-4" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-closed-5" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-closed-6" title="§ 6.2 Methods">§ 6.2 Methods</a> <a href="#ref-for-dfn-closed-7"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-closed-8" title="§ 6.8 Session Storage and Persistence">§ 6.8 Session Storage and
                    Persistence</a> <a href="#ref-for-dfn-closed-9" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-closed-10" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to Decrypt</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysessionclosedreason"
        aria-label="Links in this document to definition: MediaKeySessionClosedReason">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysessionclosedreason"
                aria-label="Permalink for definition: MediaKeySessionClosedReason. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-103604943">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-1" title="§ Status of This Document">§ Status of This
                    Document</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-2" title="§ 5.2.2 CDM Unavailable">§ 5.2.2 CDM
                    Unavailable</a> <a href="#ref-for-dom-mediakeysessionclosedreason-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-4" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a> <a href="#ref-for-dom-mediakeysessionclosedreason-5"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-6" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-7" title="§ 6.6.4 Session Closed">§ 6.6.4 Session
                    Closed</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-8" title="§ 6.6.5 Monitor for CDM State Changes">§
                    6.6.5 Monitor for CDM State Changes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysessionclosedreason-internal-error"
        aria-label="Links in this document to definition: internal-error">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysessionclosedreason-internal-error"
                aria-label="Permalink for definition: internal-error. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-103604943">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-internal-error-1"
                    title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-internal-error-2"
                    title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5 Monitor for CDM State Changes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-internal-error-3" title="§ 7.5.4 Attempt to Decrypt">§
                    7.5.4 Attempt to Decrypt</a> <a href="#ref-for-dom-mediakeysessionclosedreason-internal-error-4"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysessionclosedreason-closed-by-application"
        aria-label="Links in this document to definition: closed-by-application">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysessionclosedreason-closed-by-application"
                aria-label="Permalink for definition: closed-by-application. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-103604943">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-closed-by-application-1"
                    title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-closed-by-application-2" title="§ 6.2 Methods">§ 6.2
                    Methods</a> <a href="#ref-for-dom-mediakeysessionclosedreason-closed-by-application-3"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysessionclosedreason-release-acknowledged"
        aria-label="Links in this document to definition: release-acknowledged">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysessionclosedreason-release-acknowledged"
                aria-label="Permalink for definition: release-acknowledged. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-103604943">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-release-acknowledged-1"
                    title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-release-acknowledged-2" title="§ 6.2 Methods">§ 6.2
                    Methods</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysessionclosedreason-hardware-context-reset"
        aria-label="Links in this document to definition: hardware-context-reset">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysessionclosedreason-hardware-context-reset"
                aria-label="Permalink for definition: hardware-context-reset. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-103604943">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-hardware-context-reset-1"
                    title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-hardware-context-reset-2"
                    title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5 Monitor for CDM State Changes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-hardware-context-reset-3"
                    title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to Decrypt</a> <a
                    href="#ref-for-dom-mediakeysessionclosedreason-hardware-context-reset-4" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysessionclosedreason-resource-evicted"
        aria-label="Links in this document to definition: resource-evicted">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysessionclosedreason-resource-evicted"
                aria-label="Permalink for definition: resource-evicted. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-103604943">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-resource-evicted-1"
                    title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysession-sessionid"
        aria-label="Links in this document to definition: sessionId">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-sessionid"
                aria-label="Permalink for definition: sessionId. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-sessionid-1" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-sessionid-2" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-sessionid-3" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dom-mediakeysession-sessionid-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-sessionid-5" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysession-sessionid-6" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediakeysession-sessionid-7" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-sessionid-8" title="§ 9.1.2 Behavior">§ 9.1.2 Behavior</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysession-expiration"
        aria-label="Links in this document to definition: expiration">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-expiration"
                aria-label="Permalink for definition: expiration. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-expiration-1" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-expiration-2" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-expiration-3" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-expiration-4" title="§ 6.6.3 Update Expiration">§ 6.6.3 Update
                    Expiration</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-expiration-5" title="§ 9.1.2 Behavior">§ 9.1.2 Behavior</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysession-closed"
        aria-label="Links in this document to definition: closed">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-closed"
                aria-label="Permalink for definition: closed. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-closed-1" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-closed-2" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a> <a href="#ref-for-dom-mediakeysession-closed-3"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-closed-4" title="§ 6.2 Methods">§ 6.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-closed-5" title="§ 6.6.4 Session Closed">§ 6.6.4 Session
                    Closed</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysession-keystatuses"
        aria-label="Links in this document to definition: keyStatuses">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-keystatuses"
                aria-label="Permalink for definition: keyStatuses. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-keystatuses-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-keystatuses-2" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-keystatuses-3" title="§ 6.6.2 Update Key Statuses">§ 6.6.2 Update
                    Key Statuses</a> <a href="#ref-for-dom-mediakeysession-keystatuses-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-keystatuses-5" title="§ 9.1.2 Behavior">§ 9.1.2 Behavior</a> <a
                    href="#ref-for-dom-mediakeysession-keystatuses-6" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysession-onkeystatuseschange"
        aria-label="Links in this document to definition: onkeystatuseschange">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-onkeystatuseschange"
                aria-label="Permalink for definition: onkeystatuseschange. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-onkeystatuseschange-1" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysession-onmessage"
        aria-label="Links in this document to definition: onmessage">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-onmessage"
                aria-label="Permalink for definition: onmessage. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-onmessage-1" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysession-generaterequest"
        aria-label="Links in this document to definition: generateRequest()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-generaterequest"
                aria-label="Permalink for definition: generateRequest(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-generaterequest-1" title="§ 2. Definitions">§ 2. Definitions</a>
                <a href="#ref-for-dom-mediakeysession-generaterequest-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-generaterequest-3" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-generaterequest-4" title="§ 6.8 Session Storage and Persistence">§
                    6.8 Session Storage and Persistence</a> <a href="#ref-for-dom-mediakeysession-generaterequest-5"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-generaterequest-6" title="§ 9.1.2 Behavior">§ 9.1.2 Behavior</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-generaterequest-7"
                    title="§ 10.1 Input Data Attacks and Vulnerabilities">§ 10.1 Input Data Attacks and
                    Vulnerabilities</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysession-load"
        aria-label="Links in this document to definition: load()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-load"
                aria-label="Permalink for definition: load(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-load-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-load-2" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-load-3" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-load-4" title="§ 6.2 Methods">§ 6.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-load-5" title="§ 6.8 Session Storage and Persistence">§ 6.8
                    Session Storage and Persistence</a> <a href="#ref-for-dom-mediakeysession-load-6"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysession-update"
        aria-label="Links in this document to definition: update()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-update"
                aria-label="Permalink for definition: update(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dom-mediakeysession-update-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-3" title="§ 5. MediaKeys Interface">§ 5. MediaKeys
                    Interface</a> <a href="#ref-for-dom-mediakeysession-update-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-5" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-6" title="§ 6.1 Attributes">§ 6.1 Attributes</a> <a
                    href="#ref-for-dom-mediakeysession-update-7" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-8" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dom-mediakeysession-update-9" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-10" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5
                    Monitor for CDM State Changes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-11" title="§ 6.8 Session Storage and Persistence">§ 6.8
                    Session Storage and Persistence</a> <a href="#ref-for-dom-mediakeysession-update-12"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-13" title="§ 8.5.2 Encrypt Identifiers">§ 8.5.2 Encrypt
                    Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-14" title="§ 9.1.2 Behavior">§ 9.1.2 Behavior</a> <a
                    href="#ref-for-dom-mediakeysession-update-15" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-16" title="§ 9.1.4 License Format">§ 9.1.4 License
                    Format</a> <a href="#ref-for-dom-mediakeysession-update-17" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-update-18" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-19"
                    title="§ 9.1.6 License Release Acknowledgement Format">§ 9.1.6 License Release Acknowledgement
                    Format</a> <a href="#ref-for-dom-mediakeysession-update-20" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-21" title="§ 10.1 Input Data Attacks and Vulnerabilities">§
                    10.1 Input Data Attacks and Vulnerabilities</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-22" title="§ 11.8 Secure Origin and Transport">§ 11.8
                    Secure Origin and Transport</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-23" title="§ 13.4 Using All Events">§ 13.4 Using All
                    Events</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysession-close"
        aria-label="Links in this document to definition: close()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-close"
                aria-label="Permalink for definition: close(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-close-1" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a> <a href="#ref-for-dom-mediakeysession-close-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysession-close-3"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysession-remove"
        aria-label="Links in this document to definition: remove()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-remove"
                aria-label="Permalink for definition: remove(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-remove-1" title="§ 5. MediaKeys Interface">§ 5. MediaKeys
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-remove-2" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-remove-3" title="§ 6.8 Session Storage and Persistence">§ 6.8
                    Session Storage and Persistence</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-remove-4" title="§ 9.1.2 Behavior">§ 9.1.2 Behavior</a> <a
                    href="#ref-for-dom-mediakeysession-remove-5" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeystatusmap"
        aria-label="Links in this document to definition: MediaKeyStatusMap">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatusmap"
                aria-label="Permalink for definition: MediaKeyStatusMap. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-366396555">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatusmap-1" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatusmap-2" title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatusmap-3" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatusmap-4" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a> <a href="#ref-for-dom-mediakeystatusmap-5"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeystatusmap-size"
        aria-label="Links in this document to definition: size">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatusmap-size"
                aria-label="Permalink for definition: size. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-366396555">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatusmap-size-1" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatusmap-size-2" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeystatusmap-has"
        aria-label="Links in this document to definition: has()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatusmap-has"
                aria-label="Permalink for definition: has(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-366396555">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatusmap-has-1" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeystatusmap-get"
        aria-label="Links in this document to definition: get()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatusmap-get"
                aria-label="Permalink for definition: get(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-366396555">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatusmap-get-1" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeystatus"
        aria-label="Links in this document to definition: MediaKeyStatus">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatus"
                aria-label="Permalink for definition: MediaKeyStatus. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-418631828">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatus-1" title="§ Status of This Document">§ Status of This Document</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-2" title="§ 5. MediaKeys Interface">§ 5. MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-3" title="§ 5.1 Methods">§ 5.1 Methods</a> <a
                    href="#ref-for-dom-mediakeystatus-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeystatus-5" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-6" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-7" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dom-mediakeystatus-8" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeystatus-9" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-10" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a> <a href="#ref-for-dom-mediakeystatus-11" title="Reference 2">(2)</a>
                <a href="#ref-for-dom-mediakeystatus-14" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-12" title="§ 6.3.2 Methods">§ 6.3.2 Methods</a> <a
                    href="#ref-for-dom-mediakeystatus-13" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-15" title="§ 6.6.2 Update Key Statuses">§ 6.6.2 Update Key
                    Statuses</a> <a href="#ref-for-dom-mediakeystatus-16" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeystatus-17" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-18" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5 Monitor
                    for CDM State Changes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-19" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to
                    Decrypt</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeystatus-usable"
        aria-label="Links in this document to definition: usable">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatus-usable"
                aria-label="Permalink for definition: usable. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-418631828">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatus-usable-1" title="§ 5.1 Methods">§ 5.1 Methods</a> <a
                    href="#ref-for-dom-mediakeystatus-usable-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-usable-3" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-usable-4" title="§ 9.1.1 Capabilities">§ 9.1.1 Capabilities</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-usable-5" title="§ 9.1.2 Behavior">§ 9.1.2 Behavior</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeystatus-expired"
        aria-label="Links in this document to definition: expired">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatus-expired"
                aria-label="Permalink for definition: expired. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-418631828">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatus-expired-1" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-expired-2" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeystatus-released"
        aria-label="Links in this document to definition: released">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatus-released"
                aria-label="Permalink for definition: released. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-418631828">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatus-released-1" title="§ 6.2 Methods">§ 6.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-released-2" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeystatus-output-restricted"
        aria-label="Links in this document to definition: output-restricted">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatus-output-restricted"
                aria-label="Permalink for definition: output-restricted. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-418631828">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatus-output-restricted-1" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-output-restricted-2" title="§ 6.3 MediaKeyStatusMap Interface">§
                    6.3 MediaKeyStatusMap Interface</a> <a href="#ref-for-dom-mediakeystatus-output-restricted-3"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeystatus-output-downscaled"
        aria-label="Links in this document to definition: output-downscaled">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatus-output-downscaled"
                aria-label="Permalink for definition: output-downscaled. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-418631828">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatus-output-downscaled-1" title="§ 6.3 MediaKeyStatusMap Interface">§
                    6.3 MediaKeyStatusMap Interface</a> <a href="#ref-for-dom-mediakeystatus-output-downscaled-2"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeystatus-usable-in-future"
        aria-label="Links in this document to definition: usable-in-future">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatus-usable-in-future"
                aria-label="Permalink for definition: usable-in-future. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-418631828">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatus-usable-in-future-1" title="§ Status of This Document">§ Status of
                    This Document</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-usable-in-future-2" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeystatus-status-pending"
        aria-label="Links in this document to definition: status-pending">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatus-status-pending"
                aria-label="Permalink for definition: status-pending. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-418631828">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatus-status-pending-1" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dom-mediakeystatus-status-pending-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-status-pending-3" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeystatus-internal-error"
        aria-label="Links in this document to definition: internal-error">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatus-internal-error"
                aria-label="Permalink for definition: internal-error. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-418631828">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatus-internal-error-1" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeymessagetype"
        aria-label="Links in this document to definition: MediaKeyMessageType">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessagetype"
                aria-label="Permalink for definition: MediaKeyMessageType. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1754914033">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-1" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dom-mediakeymessagetype-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-3" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a> <a href="#ref-for-dom-mediakeymessagetype-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-5" title="§ 6.4.1 Attributes">§ 6.4.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-6" title="§ 6.4.2 MediaKeyMessageEventInit">§ 6.4.2
                    MediaKeyMessageEventInit</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-7"
                    title="§ 6.4.2.1 Dictionary MediaKeyMessageEventInit Members">§ 6.4.2.1 Dictionary
                    MediaKeyMessageEventInit Members</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeymessagetype-license-request"
        aria-label="Links in this document to definition: license-request">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessagetype-license-request"
                aria-label="Permalink for definition: license-request. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1754914033">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-license-request-1" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dom-mediakeymessagetype-license-request-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeymessagetype-license-request-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-license-request-4" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeymessagetype-license-renewal"
        aria-label="Links in this document to definition: license-renewal">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessagetype-license-renewal"
                aria-label="Permalink for definition: license-renewal. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1754914033">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-license-renewal-1" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeymessagetype-license-release"
        aria-label="Links in this document to definition: license-release">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessagetype-license-release"
                aria-label="Permalink for definition: license-release. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1754914033">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-license-release-1" title="§ 5. MediaKeys Interface">§ 5.
                    MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-license-release-2" title="§ 6.2 Methods">§ 6.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-license-release-3" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeymessagetype-individualization-request"
        aria-label="Links in this document to definition: individualization-request">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessagetype-individualization-request"
                aria-label="Permalink for definition: individualization-request. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1754914033">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-individualization-request-1" title="§ 6.2 Methods">§ 6.2
                    Methods</a> <a href="#ref-for-dom-mediakeymessagetype-individualization-request-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-individualization-request-3"
                    title="§ 6.4 MediaKeyMessageEvent">§ 6.4 MediaKeyMessageEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-individualization-request-4"
                    title="§ 8.6.2 App-Assisted Individualization">§ 8.6.2 App-Assisted Individualization</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeymessageevent"
        aria-label="Links in this document to definition: MediaKeyMessageEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessageevent"
                aria-label="Permalink for definition: MediaKeyMessageEvent. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-1" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-2" title="§ 6.5 Event Summary">§ 6.5 Event Summary</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-3" title="§ 6.6.1 Queue a &quot;message&quot; Event">§ 6.6.1
                    Queue a "message" Event</a> <a href="#ref-for-dom-mediakeymessageevent-4"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-5" title="§ 9.1.3 License Request Format">§ 9.1.3 License
                    Request Format</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-6" title="§ 9.1.5 License Release Format">§ 9.1.5 License
                    Release Format</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeymessageevent-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessageevent-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeymessageevent-messagetype"
        aria-label="Links in this document to definition: messageType">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessageevent-messagetype"
                aria-label="Permalink for definition: messageType. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1595553803">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-messagetype-1" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-messagetype-2"
                    title="§ 6.6.1 Queue a &quot;message&quot; Event">§ 6.6.1 Queue a "message" Event</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-messagetype-3"
                    title="§ 10.1 Input Data Attacks and Vulnerabilities">§ 10.1 Input Data Attacks and
                    Vulnerabilities</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeymessageevent-message"
        aria-label="Links in this document to definition: message">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessageevent-message"
                aria-label="Permalink for definition: message. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1595553803">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-message-1" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-message-2"
                    title="§ 6.6.1 Queue a &quot;message&quot; Event">§ 6.6.1 Queue a "message" Event</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-message-3" title="§ 9.1.3 License Request Format">§ 9.1.3
                    License Request Format</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-message-4" title="§ 9.1.5 License Release Format">§ 9.1.5
                    License Release Format</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeymessageeventinit"
        aria-label="Links in this document to definition: MediaKeyMessageEventInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessageeventinit"
                aria-label="Permalink for definition: MediaKeyMessageEventInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-726369050">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessageeventinit-1" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageeventinit-2" title="§ 6.4.2 MediaKeyMessageEventInit">§ 6.4.2
                    MediaKeyMessageEventInit</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageeventinit-3"
                    title="§ 6.4.2.1 Dictionary MediaKeyMessageEventInit Members">§ 6.4.2.1 Dictionary
                    MediaKeyMessageEventInit Members</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeymessageeventinit-messagetype"
        aria-label="Links in this document to definition: messageType">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessageeventinit-messagetype"
                aria-label="Permalink for definition: messageType. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-726369050">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessageeventinit-messagetype-1" title="§ 6.4.2 MediaKeyMessageEventInit">§
                    6.4.2 MediaKeyMessageEventInit</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeymessageeventinit-message"
        aria-label="Links in this document to definition: message">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessageeventinit-message"
                aria-label="Permalink for definition: message. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-726369050">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessageeventinit-message-1" title="§ 6.4.2 MediaKeyMessageEventInit">§
                    6.4.2 MediaKeyMessageEventInit</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-keystatuseschange"
        aria-label="Links in this document to definition: keystatuseschange">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-keystatuseschange"
                aria-label="Permalink for definition: keystatuseschange. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-keystatuseschange-1" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-keystatuseschange-2" title="§ 6.6.2 Update Key Statuses">§ 6.6.2 Update Key
                    Statuses</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-message"
        aria-label="Links in this document to definition: message">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-message"
                aria-label="Permalink for definition: message. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-message-1" title="§ 5. MediaKeys Interface">§ 5. MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-message-2" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-message-3" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-message-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-message-5" title="§ 6.4 MediaKeyMessageEvent">§ 6.4 MediaKeyMessageEvent</a>
            </li>
            <li>
                <a href="#ref-for-dfn-message-6" title="§ 6.6.1 Queue a &quot;message&quot; Event">§ 6.6.1 Queue a
                    "message" Event</a>
            </li>
            <li>
                <a href="#ref-for-dfn-message-7" title="§ 8.5.2 Encrypt Identifiers">§ 8.5.2 Encrypt Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-message-8" title="§ 8.6.2 App-Assisted Individualization">§ 8.6.2 App-Assisted
                    Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-message-9" title="§ 9.1.3 License Request Format">§ 9.1.3 License Request
                    Format</a>
            </li>
            <li>
                <a href="#ref-for-dfn-message-10" title="§ 9.1.5 License Release Format">§ 9.1.5 License Release
                    Format</a>
            </li>
            <li>
                <a href="#ref-for-dfn-message-11" title="§ 10.1 Input Data Attacks and Vulnerabilities">§ 10.1 Input
                    Data Attacks and Vulnerabilities</a>
            </li>
            <li>
                <a href="#ref-for-dfn-message-12" title="§ 11.8 Secure Origin and Transport">§ 11.8 Secure Origin and
                    Transport</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-queue-a-message-event"
        aria-label="Links in this document to definition: Queue a &quot;message&quot; Event">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-queue-a-message-event"
                aria-label="Permalink for definition: Queue a &quot;message&quot; Event. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-queue-a-message-event-1" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dfn-queue-a-message-event-2" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-queue-a-message-event-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-queue-a-message-event-4" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-queue-a-message-event-5" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-queue-a-message-event-6" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5
                    Monitor for CDM State Changes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-update-key-statuses"
        aria-label="Links in this document to definition: Update Key Statuses">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-update-key-statuses"
                aria-label="Permalink for definition: Update Key Statuses. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-update-key-statuses-1" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-update-key-statuses-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-update-key-statuses-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-update-key-statuses-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-update-key-statuses-5" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-update-key-statuses-6" title="§ 6.6.4 Session Closed">§ 6.6.4 Session Closed</a>
            </li>
            <li>
                <a href="#ref-for-dfn-update-key-statuses-7" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5
                    Monitor for CDM State Changes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-update-key-statuses-8" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to
                    Decrypt</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-update-expiration"
        aria-label="Links in this document to definition: Update Expiration">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-update-expiration"
                aria-label="Permalink for definition: Update Expiration. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-update-expiration-1" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-update-expiration-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-update-expiration-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-update-expiration-4" title="§ 6.6.4 Session Closed">§ 6.6.4 Session Closed</a>
            </li>
            <li>
                <a href="#ref-for-dfn-update-expiration-5" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5 Monitor
                    for CDM State Changes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-session-closed"
        aria-label="Links in this document to definition: Session Closed">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-session-closed"
                aria-label="Permalink for definition: Session Closed. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-session-closed-1" title="§ 5.2.2 CDM Unavailable">§ 5.2.2 CDM Unavailable</a>
            </li>
            <li>
                <a href="#ref-for-dfn-session-closed-2" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-session-closed-3" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-session-closed-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-session-closed-5" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5 Monitor
                    for CDM State Changes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-monitor-for-cdm-state-changes"
        aria-label="Links in this document to definition: Monitor for CDM State Changes">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-monitor-for-cdm-state-changes"
                aria-label="Permalink for definition: Monitor for CDM State Changes. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-monitor-for-cdm-state-changes-1" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a> <a href="#ref-for-dfn-monitor-for-cdm-state-changes-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-monitor-for-cdm-state-changes-3" title="§ 6.6.4 Session Closed">§ 6.6.4 Session
                    Closed</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-typeerror"
        aria-label="Links in this document to definition: TypeError">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-typeerror"
                aria-label="Permalink for definition: TypeError. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-typeerror-1" title="§ 3.2.1 Methods">§ 3.2.1 Methods</a> <a
                    href="#ref-for-dfn-typeerror-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-typeerror-3" title="§ 5.1 Methods">§ 5.1 Methods</a> <a
                    href="#ref-for-dfn-typeerror-4" title="Reference 2">(2)</a> <a href="#ref-for-dfn-typeerror-5"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-typeerror-6" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-typeerror-7" title="Reference 2">(2)</a> <a href="#ref-for-dfn-typeerror-8"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-typeerror-9" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-typeerror-10" title="Reference 5">(5)</a> <a href="#ref-for-dfn-typeerror-11"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-typeerror-12" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-typeerror-13" title="Reference 8">(8)</a> <a href="#ref-for-dfn-typeerror-14"
                    title="Reference 9">(9)</a> <a href="#ref-for-dfn-typeerror-15" title="Reference 10">(10)</a> <a
                    href="#ref-for-dfn-typeerror-16" title="Reference 11">(11)</a> <a href="#ref-for-dfn-typeerror-17"
                    title="Reference 12">(12)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-notsupportederror"
        aria-label="Links in this document to definition: NotSupportedError">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-notsupportederror"
                aria-label="Permalink for definition: NotSupportedError. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-notsupportederror-1" title="§ 3.2.1 Methods">§ 3.2.1 Methods</a> <a
                    href="#ref-for-dfn-notsupportederror-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-notsupportederror-3" title="§ 5.1 Methods">§ 5.1 Methods</a> <a
                    href="#ref-for-dfn-notsupportederror-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-notsupportederror-5" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-notsupportederror-6" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-notsupportederror-7" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-notsupportederror-8" title="§ 7.2 Methods">§ 7.2 Methods</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-invalidstateerror"
        aria-label="Links in this document to definition: InvalidStateError">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-invalidstateerror"
                aria-label="Permalink for definition: InvalidStateError. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-invalidstateerror-1" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dfn-invalidstateerror-2" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-invalidstateerror-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-invalidstateerror-4" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-invalidstateerror-5" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-invalidstateerror-6" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-invalidstateerror-7" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-invalidstateerror-8" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-invalidstateerror-9" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-invalidstateerror-10" title="Reference 9">(9)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-invalidstateerror-11" title="§ 7.2 Methods">§ 7.2 Methods</a> <a
                    href="#ref-for-dfn-invalidstateerror-12" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-quotaexceedederror"
        aria-label="Links in this document to definition: QuotaExceededError">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-quotaexceedederror"
                aria-label="Permalink for definition: QuotaExceededError. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-quotaexceedederror-1" title="§ Status of This Document">§ Status of This
                    Document</a>
            </li>
            <li>
                <a href="#ref-for-dfn-quotaexceedederror-2" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-quotaexceedederror-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-quotaexceedederror-4" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-quotaexceedederror-5" title="§ 7.2 Methods">§ 7.2 Methods</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-htmlmediaelement"
        aria-label="Links in this document to definition: HTMLMediaElement">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-htmlmediaelement"
                aria-label="Permalink for definition: HTMLMediaElement. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-1" title="§ Abstract">§ Abstract</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-2" title="§ 1. Introduction">§ 1. Introduction</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-3" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-4" title="§ 5. MediaKeys Interface">§ 5. MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-5" title="§ 6.7 Exceptions">§ 6.7 Exceptions</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-6" title="§ 7. HTMLMediaElement Extensions">§ 7. HTMLMediaElement
                    Extensions</a> <a href="#ref-for-dom-htmlmediaelement-7" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-htmlmediaelement-8" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-htmlmediaelement-9" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-htmlmediaelement-10" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-htmlmediaelement-11" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-12" title="§ 7.1 Attributes">§ 7.1 Attributes</a> <a
                    href="#ref-for-dom-htmlmediaelement-13" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-14" title="§ 7.5.1 Media Data May Contain Encrypted Blocks">§
                    7.5.1 Media Data May Contain Encrypted Blocks</a> <a href="#ref-for-dom-htmlmediaelement-15"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-16" title="§ 7.5.2 Initialization Data Encountered">§ 7.5.2
                    Initialization Data Encountered</a> <a href="#ref-for-dom-htmlmediaelement-17"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-18" title="§ 7.5.3 Encrypted Block Encountered">§ 7.5.3 Encrypted
                    Block Encountered</a> <a href="#ref-for-dom-htmlmediaelement-19" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-20" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to
                    Decrypt</a> <a href="#ref-for-dom-htmlmediaelement-21" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-22" title="§ 7.5.5 Wait for Key">§ 7.5.5 Wait for Key</a> <a
                    href="#ref-for-dom-htmlmediaelement-23" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-htmlmediaelement-24" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-25" title="§ 7.5.6 Attempt to Resume Playback If Necessary">§
                    7.5.6 Attempt to Resume Playback If Necessary</a> <a href="#ref-for-dom-htmlmediaelement-26"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-htmlmediaelement-27" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-28" title="§ 8.9.1 Unencrypted Container">§ 8.9.1 Unencrypted
                    Container</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-29" title="§ 9.1.1 Capabilities">§ 9.1.1 Capabilities</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-htmlmediaelement-mediakeys"
        aria-label="Links in this document to definition: mediaKeys">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-htmlmediaelement-mediakeys"
                aria-label="Permalink for definition: mediaKeys. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1869224078">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-mediakeys-1" title="§ 6.6.2 Update Key Statuses">§ 6.6.2 Update
                    Key Statuses</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-mediakeys-2" title="§ 7. HTMLMediaElement Extensions">§ 7.
                    HTMLMediaElement Extensions</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-mediakeys-3" title="§ 7.2 Methods">§ 7.2 Methods</a> <a
                    href="#ref-for-dom-htmlmediaelement-mediakeys-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-htmlmediaelement-mediakeys-5" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-htmlmediaelement-mediakeys-6" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-htmlmediaelement-mediakeys-7" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-mediakeys-8"
                    title="§ 7.5.1 Media Data May Contain Encrypted Blocks">§ 7.5.1 Media Data May Contain Encrypted
                    Blocks</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-mediakeys-9" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt
                    to Decrypt</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-mediakeys-10" title="§ 11.3.2 Mitigations">§ 11.3.2
                    Mitigations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-htmlmediaelement-onencrypted"
        aria-label="Links in this document to definition: onencrypted">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-htmlmediaelement-onencrypted"
                aria-label="Permalink for definition: onencrypted. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1869224078">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-onencrypted-1" title="§ 7. HTMLMediaElement Extensions">§ 7.
                    HTMLMediaElement Extensions</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-htmlmediaelement-onwaitingforkey"
        aria-label="Links in this document to definition: onwaitingforkey">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-htmlmediaelement-onwaitingforkey"
                aria-label="Permalink for definition: onwaitingforkey. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1869224078">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-onwaitingforkey-1" title="§ 7. HTMLMediaElement Extensions">§ 7.
                    HTMLMediaElement Extensions</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-htmlmediaelement-setmediakeys"
        aria-label="Links in this document to definition: setMediaKeys()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-htmlmediaelement-setmediakeys"
                aria-label="Permalink for definition: setMediaKeys(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1869224078">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-setmediakeys-1" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-setmediakeys-2" title="§ 7. HTMLMediaElement Extensions">§ 7.
                    HTMLMediaElement Extensions</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-setmediakeys-3"
                    title="§ 7.5.1 Media Data May Contain Encrypted Blocks">§ 7.5.1 Media Data May Contain Encrypted
                    Blocks</a> <a href="#ref-for-dom-htmlmediaelement-setmediakeys-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-setmediakeys-5" title="§ 9.1.1 Capabilities">§ 9.1.1
                    Capabilities</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediaencryptedevent"
        aria-label="Links in this document to definition: MediaEncryptedEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediaencryptedevent"
                aria-label="Permalink for definition: MediaEncryptedEvent. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediaencryptedevent-1" title="§ 7.3 MediaEncryptedEvent">§ 7.3
                    MediaEncryptedEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediaencryptedevent-2" title="§ 7.4 Event Summary">§ 7.4 Event Summary</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediaencryptedevent-3" title="§ 7.5.2 Initialization Data Encountered">§ 7.5.2
                    Initialization Data Encountered</a> <a href="#ref-for-dom-mediaencryptedevent-4"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediaencryptedevent-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediaencryptedevent-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediaencryptedevent-initdatatype"
        aria-label="Links in this document to definition: initDataType">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediaencryptedevent-initdatatype"
                aria-label="Permalink for definition: initDataType. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1395593112">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediaencryptedevent-initdatatype-1" title="§ 7.3 MediaEncryptedEvent">§ 7.3
                    MediaEncryptedEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediaencryptedevent-initdatatype-2"
                    title="§ 7.5.2 Initialization Data Encountered">§ 7.5.2 Initialization Data Encountered</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediaencryptedevent-initdata"
        aria-label="Links in this document to definition: initData">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediaencryptedevent-initdata"
                aria-label="Permalink for definition: initData. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1395593112">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediaencryptedevent-initdata-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediaencryptedevent-initdata-2" title="§ 7.3 MediaEncryptedEvent">§ 7.3
                    MediaEncryptedEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediaencryptedevent-initdata-3" title="§ 7.3.1 Attributes">§ 7.3.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediaencryptedevent-initdata-4" title="§ 7.5.2 Initialization Data Encountered">§
                    7.5.2 Initialization Data Encountered</a> <a href="#ref-for-dom-mediaencryptedevent-initdata-5"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediaencryptedeventinit"
        aria-label="Links in this document to definition: MediaEncryptedEventInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediaencryptedeventinit"
                aria-label="Permalink for definition: MediaEncryptedEventInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-51354785">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediaencryptedeventinit-1" title="§ 7.3 MediaEncryptedEvent">§ 7.3
                    MediaEncryptedEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediaencryptedeventinit-2" title="§ 7.3.2 MediaEncryptedEventInit">§ 7.3.2
                    MediaEncryptedEventInit</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediaencryptedeventinit-3"
                    title="§ 7.3.2.1 Dictionary MediaEncryptedEventInit Members">§ 7.3.2.1 Dictionary
                    MediaEncryptedEventInit Members</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediaencryptedeventinit-initdatatype"
        aria-label="Links in this document to definition: initDataType">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediaencryptedeventinit-initdatatype"
                aria-label="Permalink for definition: initDataType. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-51354785">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediaencryptedeventinit-initdatatype-1" title="§ 7.3.2 MediaEncryptedEventInit">§
                    7.3.2 MediaEncryptedEventInit</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediaencryptedeventinit-initdata"
        aria-label="Links in this document to definition: initData">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediaencryptedeventinit-initdata"
                aria-label="Permalink for definition: initData. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-51354785">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediaencryptedeventinit-initdata-1" title="§ 7.3.2 MediaEncryptedEventInit">§
                    7.3.2 MediaEncryptedEventInit</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-encrypted"
        aria-label="Links in this document to definition: encrypted">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-encrypted"
                aria-label="Permalink for definition: encrypted. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-encrypted-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-encrypted-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-encrypted-3"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-encrypted-4" title="§ 7.1 Attributes">§ 7.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-encrypted-5" title="§ 7.3 MediaEncryptedEvent">§ 7.3 MediaEncryptedEvent</a>
            </li>
            <li>
                <a href="#ref-for-dfn-encrypted-6" title="§ 7.5.2 Initialization Data Encountered">§ 7.5.2
                    Initialization Data Encountered</a> <a href="#ref-for-dfn-encrypted-7" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-waitingforkey"
        aria-label="Links in this document to definition: waitingforkey">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-waitingforkey"
                aria-label="Permalink for definition: waitingforkey. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-waitingforkey-1" title="§ 7.1 Attributes">§ 7.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-waitingforkey-2" title="§ 7.5.5 Wait for Key">§ 7.5.5 Wait for Key</a> <a
                    href="#ref-for-dfn-waitingforkey-3" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-initialization-data-encountered"
        aria-label="Links in this document to definition: Initialization Data Encountered">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-initialization-data-encountered"
                aria-label="Permalink for definition: Initialization Data Encountered. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-initialization-data-encountered-1" title="§ 7. HTMLMediaElement Extensions">§ 7.
                    HTMLMediaElement Extensions</a> <a href="#ref-for-dfn-initialization-data-encountered-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-encountered-3" title="§ 8.9.1 Unencrypted Container">§ 8.9.1
                    Unencrypted Container</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-encrypted-block-encountered"
        aria-label="Links in this document to definition: Encrypted Block Encountered">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-encrypted-block-encountered"
                aria-label="Permalink for definition: Encrypted Block Encountered. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-encrypted-block-encountered-1" title="§ 7. HTMLMediaElement Extensions">§ 7.
                    HTMLMediaElement Extensions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-encrypted-block-encountered-2" title="§ 8.9.1 Unencrypted Container">§ 8.9.1
                    Unencrypted Container</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-attempt-to-decrypt"
        aria-label="Links in this document to definition: Attempt to Decrypt">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-attempt-to-decrypt"
                aria-label="Permalink for definition: Attempt to Decrypt. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-attempt-to-decrypt-1" title="§ 7.5.3 Encrypted Block Encountered">§ 7.5.3
                    Encrypted Block Encountered</a>
            </li>
            <li>
                <a href="#ref-for-dfn-attempt-to-decrypt-2" title="§ 7.5.6 Attempt to Resume Playback If Necessary">§
                    7.5.6 Attempt to Resume Playback If Necessary</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wait-for-key"
        aria-label="Links in this document to definition: Wait for Key">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-wait-for-key"
                aria-label="Permalink for definition: Wait for Key. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-wait-for-key-1" title="§ 7. HTMLMediaElement Extensions">§ 7. HTMLMediaElement
                    Extensions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-wait-for-key-2" title="§ 7.5.1 Media Data May Contain Encrypted Blocks">§ 7.5.1
                    Media Data May Contain Encrypted Blocks</a>
            </li>
            <li>
                <a href="#ref-for-dfn-wait-for-key-3" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to Decrypt</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-attempt-to-resume-playback-if-necessary"
        aria-label="Links in this document to definition: Attempt to Resume Playback If Necessary">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-attempt-to-resume-playback-if-necessary"
                aria-label="Permalink for definition: Attempt to Resume Playback If Necessary. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-attempt-to-resume-playback-if-necessary-1" title="§ 6.6.2 Update Key Statuses">§
                    6.6.2 Update Key Statuses</a>
            </li>
            <li>
                <a href="#ref-for-dfn-attempt-to-resume-playback-if-necessary-2" title="§ 7.2 Methods">§ 7.2 Methods</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-individualization"
        aria-label="Links in this document to definition: Individualization">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-individualization"
                aria-label="Permalink for definition: Individualization. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-individualization-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-individualization-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-individualization-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-individualization-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-individualization-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-individualization-6" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-individualization-7" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-individualization-8" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-individualization-9" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-individualization-10" title="Reference 10">(10)</a> <a
                    href="#ref-for-dfn-individualization-11" title="Reference 11">(11)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-individualization-12" title="§ 8.5.2 Encrypt Identifiers">§ 8.5.2 Encrypt
                    Identifiers</a> <a href="#ref-for-dfn-individualization-13" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-individualization-14" title="§ 11.4.1 Concerns">§ 11.4.1 Concerns</a>
            </li>
            <li>
                <a href="#ref-for-dfn-individualization-15" title="§ 11.4.2 Mitigations">§ 11.4.2 Mitigations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-direct-individualization"
        aria-label="Links in this document to definition: Direct Individualization">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-direct-individualization"
                aria-label="Permalink for definition: Direct Individualization. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-direct-individualization-1" title="§ 8.6 Individualization">§ 8.6
                    Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-direct-individualization-2" title="§ 8.6.2 App-Assisted Individualization">§ 8.6.2
                    App-Assisted Individualization</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-app-assisted-individualization"
        aria-label="Links in this document to definition: App-Assisted Individualization">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-app-assisted-individualization"
                aria-label="Permalink for definition: App-Assisted Individualization. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-app-assisted-individualization-1" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a>
            </li>
            <li>
                <a href="#ref-for-dfn-app-assisted-individualization-2" title="§ 8.6 Individualization">§ 8.6
                    Individualization</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-common-key-systems"
        aria-label="Links in this document to definition: Common Key Systems">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-common-key-systems"
                aria-label="Permalink for definition: Common Key Systems. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-common-key-systems-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-clear-key"
        aria-label="Links in this document to definition: Clear Key">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-clear-key"
                aria-label="Permalink for definition: Clear Key. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-clear-key-1" title="§ Abstract">§ Abstract</a>
            </li>
            <li>
                <a href="#ref-for-dfn-clear-key-2" title="§ 9.1.1 Capabilities">§ 9.1.1 Capabilities</a>
            </li>
            <li>
                <a href="#ref-for-dfn-clear-key-3" title="§ 9.1.2 Behavior">§ 9.1.2 Behavior</a>
            </li>
        </ul>
    </div>
    <script id="respec-highlight-vars">(() => {
            // @ts-check

            if (document.respec) {
                document.respec.ready.then(setupVarHighlighter);
            } else {
                setupVarHighlighter();
            }

            function setupVarHighlighter() {
                document
                    .querySelectorAll("var")
                    .forEach(varElem => varElem.addEventListener("click", highlightListener));
            }

            function highlightListener(ev) {
                ev.stopPropagation();
                const { target: varElem } = ev;
                const hightligtedElems = highlightVars(varElem);
                const resetListener = () => {
                    const hlColor = getHighlightColor(varElem);
                    hightligtedElems.forEach(el => removeHighlight(el, hlColor));
                    [...HL_COLORS.keys()].forEach(key => HL_COLORS.set(key, true));
                };
                if (hightligtedElems.length) {
                    document.body.addEventListener("click", resetListener, { once: true });
                }
            }

            // availability of highlight colors. colors from var.css
            const HL_COLORS = new Map([
                ["respec-hl-c1", true],
                ["respec-hl-c2", true],
                ["respec-hl-c3", true],
                ["respec-hl-c4", true],
                ["respec-hl-c5", true],
                ["respec-hl-c6", true],
                ["respec-hl-c7", true],
            ]);

            function getHighlightColor(target) {
                // return current colors if applicable
                const { value } = target.classList;
                const re = /respec-hl-\w+/;
                const activeClass = re.test(value) && value.match(re);
                if (activeClass) return activeClass[0];

                // first color preference
                if (HL_COLORS.get("respec-hl-c1") === true) return "respec-hl-c1";

                // otherwise get some other available color
                return [...HL_COLORS.keys()].find(c => HL_COLORS.get(c)) || "respec-hl-c1";
            }

            function highlightVars(varElem) {
                const textContent = norm(varElem.textContent);
                const parent = varElem.closest(".algorithm, section");
                const highlightColor = getHighlightColor(varElem);

                const varsToHighlight = [...parent.querySelectorAll("var")].filter(
                    el =>
                        norm(el.textContent) === textContent &&
                        el.closest(".algorithm, section") === parent
                );

                // update availability of highlight color
                const colorStatus = varsToHighlight[0].classList.contains("respec-hl");
                HL_COLORS.set(highlightColor, colorStatus);

                // highlight vars
                if (colorStatus) {
                    varsToHighlight.forEach(el => removeHighlight(el, highlightColor));
                    return [];
                } else {
                    varsToHighlight.forEach(el => addHighlight(el, highlightColor));
                }
                return varsToHighlight;
            }

            function removeHighlight(el, highlightColor) {
                el.classList.remove("respec-hl", highlightColor);
                // clean up empty class attributes so they don't come in export
                if (!el.classList.length) el.removeAttribute("class");
            }

            function addHighlight(elem, highlightColor) {
                elem.classList.add("respec-hl", highlightColor);
            }

            /**
             * Same as `norm` from src/core/utils, but our build process doesn't allow
             * imports in runtime scripts, so duplicated here.
             * @param {string} str
             */
            function norm(str) {
                return str.trim().replace(/\s+/g, " ");
            }
        })()</script>
    <script id="respec-dfn-panel">(() => {
                                               // @ts-check
                                               if (document.respec) {
                                                   document.respec.ready.then(setupPanel);
                                               } else {
                                                   setupPanel();
                                               }

                                               function setupPanel() {
                                                   const listener = panelListener();
                                                   document.body.addEventListener("keydown", listener);
                                                   document.body.addEventListener("click", listener);
                                               }

                                               function panelListener() {
                                                   /** @type {HTMLElement} */
                                                   let panel = null;
                                                   return event => {
                                                       const { target, type } = event;

                                                       if (!(target instanceof HTMLElement)) return;

                                                       // For keys, we only care about Enter key to activate the panel
                                                       // otherwise it's activated via a click.
                                                       if (type === "keydown" && event.key !== "Enter") return;

                                                       const action = deriveAction(event);

                                                       switch (action) {
                                                           case "show": {
                                                               hidePanel(panel);
                                                               /** @type {HTMLElement} */
                                                               const dfn = target.closest("dfn, .index-term");
                                                               panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                                                               const coords = deriveCoordinates(event);
                                                               displayPanel(dfn, panel, coords);
                                                               break;
                                                           }
                                                           case "dock": {
                                                               panel.style.left = null;
                                                               panel.style.top = null;
                                                               panel.classList.add("docked");
                                                               break;
                                                           }
                                                           case "hide": {
                                                               hidePanel(panel);
                                                               panel = null;
                                                               break;
                                                           }
                                                       }
                                                   };
                                               }

                                               /**
                                                * @param {MouseEvent|KeyboardEvent} event
                                                */
                                               function deriveCoordinates(event) {
                                                   const target = /** @type HTMLElement */ (event.target);

                                                   // We prevent synthetic AT clicks from putting
                                                   // the dialog in a weird place. The AT events sometimes
                                                   // lack coordinates, so they have clientX/Y = 0
                                                   const rect = target.getBoundingClientRect();
                                                   if (
                                                       event instanceof MouseEvent &&
                                                       event.clientX >= rect.left &&
                                                       event.clientY >= rect.top
                                                   ) {
                                                       // The event probably happened inside the bounding rect...
                                                       return { x: event.clientX, y: event.clientY };
                                                   }

                                                   // Offset to the middle of the element
                                                   const x = rect.x + rect.width / 2;
                                                   // Placed at the bottom of the element
                                                   const y = rect.y + rect.height;
                                                   return { x, y };
                                               }

                                               /**
                                                * @param {Event} event
                                                */
                                               function deriveAction(event) {
                                                   const target = /** @type {HTMLElement} */ (event.target);
                                                   const hitALink = !!target.closest("a");
                                                   if (target.closest("dfn:not([data-cite]), .index-term")) {
                                                       return hitALink ? "none" : "show";
                                                   }
                                                   if (target.closest(".dfn-panel")) {
                                                       if (hitALink) {
                                                           return target.classList.contains("self-link") ? "hide" : "dock";
                                                       }
                                                       const panel = target.closest(".dfn-panel");
                                                       return panel.classList.contains("docked") ? "hide" : "none";
                                                   }
                                                   if (document.querySelector(".dfn-panel:not([hidden])")) {
                                                       return "hide";
                                                   }
                                                   return "none";
                                               }

                                               /**
                                                * @param {HTMLElement} dfn
                                                * @param {HTMLElement} panel
                                                * @param {{ x: number, y: number }} clickPosition
                                                */
                                               function displayPanel(dfn, panel, { x, y }) {
                                                   panel.hidden = false;
                                                   // distance (px) between edge of panel and the pointing triangle (caret)
                                                   const MARGIN = 20;

                                                   const dfnRects = dfn.getClientRects();
                                                   // Find the `top` offset when the `dfn` can be spread across multiple lines
                                                   let closestTop = 0;
                                                   let minDiff = Infinity;
                                                   for (const rect of dfnRects) {
                                                       const { top, bottom } = rect;
                                                       const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                                                       if (diffFromClickY < minDiff) {
                                                           minDiff = diffFromClickY;
                                                           closestTop = top;
                                                       }
                                                   }

                                                   const top = window.scrollY + closestTop + dfnRects[0].height;
                                                   const left = x - MARGIN;
                                                   panel.style.left = `${left}px`;
                                                   panel.style.top = `${top}px`;

                                                   // Find if the panel is flowing out of the window
                                                   const panelRect = panel.getBoundingClientRect();
                                                   const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                                                   if (panelRect.right > SCREEN_WIDTH) {
                                                       const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                                                       const newCaretOffset = left - newLeft;
                                                       panel.style.left = `${newLeft}px`;
                                                       /** @type {HTMLElement} */
                                                       const caret = panel.querySelector(".caret");
                                                       caret.style.left = `${newCaretOffset}px`;
                                                   }

                                                   // As it's a dialog, we trap focus.
                                                   // TODO: when <dialog> becomes a implemented, we should really
                                                   // use that.
                                                   trapFocus(panel, dfn);
                                               }

                                               /**
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function trapFocus(panel, dfn) {
                                                   /** @type NodeListOf<HTMLAnchorElement> elements */
                                                   const anchors = panel.querySelectorAll("a[href]");
                                                   // No need to trap focus
                                                   if (!anchors.length) return;

                                                   // Move focus to first anchor element
                                                   const first = anchors.item(0);
                                                   first.focus();

                                                   const trapListener = createTrapListener(anchors, panel, dfn);
                                                   panel.addEventListener("keydown", trapListener);

                                                   // Hiding the panel releases the trap
                                                   const mo = new MutationObserver(records => {
                                                       const [record] = records;
                                                       const target = /** @type HTMLElement */ (record.target);
                                                       if (target.hidden) {
                                                           panel.removeEventListener("keydown", trapListener);
                                                           mo.disconnect();
                                                       }
                                                   });
                                                   mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
                                               }

                                               /**
                                                *
                                                * @param {NodeListOf<HTMLAnchorElement>} anchors
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function createTrapListener(anchors, panel, dfn) {
                                                   const lastIndex = anchors.length - 1;
                                                   let currentIndex = 0;
                                                   return event => {
                                                       switch (event.key) {
                                                           // Hitting "Tab" traps us in a nice loop around elements.
                                                           case "Tab": {
                                                               event.preventDefault();
                                                               currentIndex += event.shiftKey ? -1 : +1;
                                                               if (currentIndex < 0) {
                                                                   currentIndex = lastIndex;
                                                               } else if (currentIndex > lastIndex) {
                                                                   currentIndex = 0;
                                                               }
                                                               anchors.item(currentIndex).focus();
                                                               break;
                                                           }

                                                           // Hitting "Enter" on an anchor releases the trap.
                                                           case "Enter":
                                                               hidePanel(panel);
                                                               break;

                                                           // Hitting "Escape" returns focus to dfn.
                                                           case "Escape":
                                                               hidePanel(panel);
                                                               dfn.focus();
                                                               return;
                                                       }
                                                   };
                                               }

                                               /** @param {HTMLElement} panel */
                                               function hidePanel(panel) {
                                                   if (!panel) return;
                                                   panel.hidden = true;
                                                   panel.classList.remove("docked");
                                               }
                                           })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
</body>

</html>