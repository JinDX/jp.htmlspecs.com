<!doctype html>
<html lang="ja-JP">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>サイトデータをクリア</title>
    <meta content="WD" name="w3c-status">
    <!-- <meta content="Bikeshed version fbf1456a756299b3ff6d248d0857ec87f2e68cd7" name="generator"> -->
    <link href="https://www.w3.org/TR/clear-site-data/" rel="canonical">
    <!-- <meta content="1254b534c550ee719bf3d88552ed86d218b7c7de" name="document-revision"> -->
    <style>
        /* style-md-lists */

        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* style-counters */

        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* style-dfn-panel */

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: #DDDDDD;
            color: black;
            border: outset 0.2em;
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: black;
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0;
        }

        .dfn-panel li {
            list-style: inside;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled {
            cursor: pointer;
        }
    </style>
    <style>
        /* style-selflinks */

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: gray;
            color: white;
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: black;
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* style-autolinks */

        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: #005a9c;
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2016/W3C-WD" rel="stylesheet" type="text/css">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
        <h1>サイトデータをクリア</h1>
        <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">W3C作業草案, <time
                    class="dt-updated" datetime="2017-11-30">2017年11月30日</time></span></h2>
        <div data-fill-with="spec-metadata">
            <dl>
                <dt>このバージョン:
                <dd><a class="u-url"
                        href="https://www.w3.org/TR/2017/WD-clear-site-data-20171130/">https://www.w3.org/TR/2017/WD-clear-site-data-20171130/</a>
                <dt>最新公表版:
                <dd><a href="https://www.w3.org/TR/clear-site-data/">https://www.w3.org/TR/clear-site-data/</a>
                <dt>編集者草案:
                <dd><a
                        href="https://w3c.github.io/webappsec-clear-site-data/">https://w3c.github.io/webappsec-clear-site-data/</a>
                <dt>以前のバージョン:
                <dd><a href="https://www.w3.org/TR/2016/WD-clear-site-data-20160720/"
                        rel="prev">https://www.w3.org/TR/2016/WD-clear-site-data-20160720/</a>
                <dt>バージョン履歴:
                <dd><a
                        href="https://github.com/w3c/webappsec-clear-site-data/commits/master/index.src.html">https://github.com/w3c/webappsec-clear-site-data/commits/master/index.src.html</a>
                <dt>フィードバック:
                <dd><span><a
                            href="mailto:public-webappsec@w3.org?subject=%5Bclear-site-data%5D%20YOUR%20TOPIC%20HERE">public-webappsec@w3.org</a>
                        件名 “<kbd>[clear-site-data] <i data-lt="">… message topic …</i></kbd>” で (<a
                            href="https://lists.w3.org/Archives/Public/public-webappsec/"
                            rel="discussion">アーカイブ</a>)</span>
                <dt class="editor">編集者:
                <dd class="editor p-author h-card vcard" data-editor-id="56384"><a class="p-name fn u-email email"
                        href="mailto:mkwst@google.com">Mike West</a> (<span class="p-org org">Google株式会社</span>)
                <dt>参加:
                <dd><a href="https://github.com/w3c/webappsec-clear-site-data/issues/new">課題を登録</a> (<a
                        href="https://github.com/w3c/webappsec-clear-site-data/issues">オープン課題</a>)
            </dl>
        </div>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2017 <a
                href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
                href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a
                href="https://www.ercim.eu/"><abbr
                    title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a
                href="https://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply. </p>
        <hr title="Separator for header">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">要約</span></h2>
        <p>本書は、ウェブ開発者がユーザーエージェントにホスト関連のサイトのローカル保存データをクリアするよう指示できる命令的な仕組みを定義します。</p>
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">この文書のステータス</span>
    </h2>
    <div data-fill-with="status">
        <p> <em>このセクションは発行時点の文書のステータスを説明します。他の文書が本書に取って代わる可能性があります。現在のW3C刊行物および本技術レポートの最新版は <a
                    href="https://www.w3.org/TR/">W3C技術レポート一覧 https://www.w3.org/TR/</a> からご覧いただけます。</em> </p>
        <p> この文書は <a href="https://www.w3.org/2011/webappsec/">Web Application Security Working Group</a>
            によりワーキングドラフトとして発行されました。 本文書はW3C勧告になることを意図しています。 </p>
        <p> (<a href="https://lists.w3.org/Archives/Public/public-webappsec/">アーカイブ</a>)された公開メーリングリスト <a
                href="mailto:public-webappsec@w3.org?Subject=%5Bclear-site-data%5D%20PUT%20SUBJECT%20HERE">public-webappsec@w3.org</a>
            （<a href="https://www.w3.org/Mail/Request">説明</a>参照）
            は本仕様の議論に推奨される場です。
            電子メールを送信する際は、件名に “clear-site-data” を含めてください。推奨形式は
            “[clear-site-data] <em>…コメント要約…</em>” です。 </p>
        <p> ワーキングドラフトとしての公開はW3C会員による承認を意味しません。これは草案文書であり、随時更新・差し替え・廃止される場合があります。進行中の作業以外として本書を引用するのは適切ではありません。 </p>
        <p> 本文書は <a href="https://www.w3.org/2011/webappsec/">Web Application Security Working Group</a> により作成されました。
        </p>
        <p> 本文書は <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/">2004年2月5日
                W3C特許ポリシー</a>の下で運営されるグループにより作成されました。W3Cは、グループの成果物に関連してなされた<a
                href="https://www.w3.org/2004/01/pp-impl/49309/status" rel="disclosure">特許公開の公開リスト</a>を維持しています。
            そのページには特許公開の方法に関する説明も含まれています。
            特許の<em>本質的な請求項</em>を含むことを知っている者は<a
                href="https://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">特許ポリシー第6節</a>に従って情報を公開する必要があります。
        </p>
        <p> 本文書は <a href="https://www.w3.org/2017/Process-20170301/" id="w3c_process_revision">2017年3月1日 W3Cプロセス文書</a>
            により管理されています。 </p>
        <p></p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目次</h2>
        <ol class="toc" role="directory">
            <li>
                <a href="#intro"><span class="secno">1</span> <span class="content">イントロダクション</span></a>
                <ol class="toc">
                    <li>
                        <a href="#examples"><span class="secno">1.1</span> <span class="content">例</span></a>
                        <ol class="toc">
                            <li><a href="#example-signout"><span class="secno">1.1.1</span> <span
                                        class="content">サインアウト</span></a>
                            <li><a href="#example-targeted"><span class="secno">1.1.2</span> <span
                                        class="content">ターゲットを絞ったクリア</span></a>
                            <li><a href="#example-keepcookies"><span class="secno">1.1.3</span> <span
                                        class="content">重要なCookieを保持</span></a>
                            <li><a href="#example-killswitch"><span class="secno">1.1.4</span> <span
                                        class="content">キルスイッチ</span></a>
                        </ol>
                    <li><a href="#goals"><span class="secno">1.2</span> <span class="content">目的</span></a>
                </ol>
            <li><a href="#infra"><span class="secno">2</span> <span class="content">インフラストラクチャ</span></a>
            <li>
                <a href="#clearing"><span class="secno">3</span> <span class="content">サイトデータのクリア</span></a>
                <ol class="toc">
                    <li><a href="#header"><span class="secno">3.1</span> <span class="content">
                                <code>Clear-Site-Data</code> HTTPレスポンスヘッダーフィールド </span></a>
                    <li><a href="#fetch-integration"><span class="secno">3.2</span> <span
                                class="content">Fetch統合</span></a>
                </ol>
            <li>
                <a href="#algorithms"><span class="secno">4</span> <span class="content">アルゴリズム</span></a>
                <ol class="toc">
                    <li><a href="#parsing"><span class="secno">4.1</span> <span class="content">パース</span></a>
                    <li>
                        <a href="#clear-response"><span class="secno">4.2</span> <span class="content">
                                <var>response</var> のデータクリア </span></a>
                        <ol class="toc">
                            <li><a href="#prepare"><span class="secno">4.2.1</span> <span class="content">
                                        <var>origin</var> のデータ消去準備 </span></a>
                            <li><a href="#reload-contexts"><span class="secno">4.2.2</span> <span class="content">
                                        <var>browsing contexts</var> をリロードする </span></a>
                            <li><a href="#clear-cache"><span class="secno">4.2.3</span> <span class="content">
                                        <var>origin</var> のキャッシュをクリアする </span></a>
                            <li><a href="#clear-cookies"><span class="secno">4.2.4</span> <span class="content">
                                        <var>origin</var> のCookieをクリアする</span></a>
                            <li><a href="#clear-dom"><span class="secno">4.2.5</span> <span class="content">
                                        <var>origin</var> の DOM からアクセス可能なストレージをクリアする </span></a>
                        </ol>
                </ol>
            <li>
                <a href="#security"><span class="secno">5</span> <span class="content">セキュリティ考慮事項</span></a>
                <ol class="toc">
                    <li><a href="#incomplete"><span class="secno">5.1</span> <span class="content">不完全なクリアリング</span></a>
                    <li><a href="#service-workers"><span class="secno">5.2</span> <span class="content">Service
                                worker</span></a>
                </ol>
            <li>
                <a href="#privacy"><span class="secno">6</span> <span class="content">プライバシー考慮事項</span></a>
                <ol class="toc">
                    <li><a href="#user-vs-author"><span class="secno">6.1</span> <span class="content">Web
                                開発者がタイミングを制御</span></a>
                    <li><a href="#remnants"><span class="secno">6.2</span> <span class="content">ディスクに残るデータ</span></a>
                </ol>
            <li>
                <a href="#iana-considerations"><span class="secno">7</span> <span class="content">IANA考慮事項</span></a>
                <ol class="toc">
                    <li><a href="#iana-clear-site-data"><span class="secno">7.1</span> <span class="content">
                                Clear-Site-Data </span></a>
                </ol>
            <li><a href="#acknowledgements"><span class="secno">8</span> <span class="content">謝辞</span></a>
            <li>
                <a href="#conformance"><span class="secno"></span> <span class="content">適合性</span></a>
                <ol class="toc">
                    <li><a href="#conventions"><span class="secno"></span> <span class="content">文書の表記規則</span></a>
                    <li><a href="#conformant-algorithms"><span class="secno"></span> <span
                                class="content">適合アルゴリズム</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本仕様書で定義された用語</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">他仕様で定義されている用語</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">規範的参考文献</span></a>
                    <li><a href="#informative"><span class="secno"></span> <span class="content">非規範的参考文献</span></a>
                </ol>
            <li><a href="#issues-index"><span class="secno"></span> <span class="content">課題索引</span></a>
        </ol>
    </nav>
    <main>
        <section>
            <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span
                    class="content">イントロダクション</span><a class="self-link" href="#intro"></a></h2>
            <p><em>このセクションは規範的ではありません。</em></p>
            <p>ウェブアプリケーションは、ユーザーのコンピュータにデータをローカル保存して、ユーザーがオフライン中も機能を提供し、オンライン中のパフォーマンスも向上させます。これらのローカルキャッシュは、ユーザーと開発者の双方に大きな利点をもたらしますが、リスクも存在します。
            </p>
            <p>ユーザーのデータは機微かつ価値あるものです。ウェブ開発者はそれを保護するために合理的な手段を講じるべきです。その一つは保存前にデータを暗号化すること、また別の一つは不要になったデータをユーザーのマシンから削除することです（たとえばアプリからサインアウトしたときやアカウントを削除したとき）。
            </p>
            <p>サイトの作者はJavaScriptで多数のストレージ機構からデータを削除できますが、確実な対応が困難なものもあります。例えばクッキーは、JavaScriptの<code>document.cookie</code>アクセスで一部をクリアできますが、<code>HttpOnly</code>クッキーはHTTPレスポンス内の複数の<code>Set-Cookie</code>ヘッダを使った場合のみクリア可能です。全ホストのクッキーを知っている必要があり、これは複雑です。キャッシュはさらに困難で、ブラウザのネットワークキャッシュに命令的にアクセスする手段はそもそもありません。
            </p>
            <p>本書は、これらや他のローカルストレージからデータを削除するための新たな仕組みを定義し、ウェブ開発者が<a data-link-type="http-header"
                    href="#http-headerdef-clear-site-data"
                    id="ref-for-http-headerdef-clear-site-data">Clear-Site-Data</a>
                HTTPレスポンスヘッダを通じて、ユーザーのローカルデータキャッシュをクリアできるようにします。</p>
            <h3 class="heading settled" data-level="1.1" id="examples"><span class="secno">1.1. </span><span
                    class="content">例</span><a class="self-link" href="#examples"></a></h3>
            <h4 class="heading settled" data-level="1.1.1" id="example-signout"><span class="secno">1.1.1. </span><span
                    class="content">サインアウト</span><a class="self-link" href="#example-signout"></a></h4>
            <div class="example" id="example-49c6d404">
                <a class="self-link" href="#example-49c6d404"></a>
                ユーザーはCSRF対策POSTで<code>https://supersecretsocialnetwork.example.com/logout</code>からSuper Secret Social
                Networkをサインアウトし、
                サイト作者はローカル保存データが削除されることを望んでいます。
                <p>そのために、レスポンスに次のHTTPヘッダを送信できます:</p>
                <pre><a data-link-type="http-header" href="#http-headerdef-clear-site-data" id="ref-for-http-headerdef-clear-site-data①">Clear-Site-Data</a>: "<a data-link-type="grammar" href="#grammardef-cache" id="ref-for-grammardef-cache">cache</a>", "<a data-link-type="grammar" href="#grammardef-cookies" id="ref-for-grammardef-cookies">cookies</a>", "<a data-link-type="grammar" href="#grammardef-storage" id="ref-for-grammardef-storage">storage</a>", "<a data-link-type="grammar" href="#grammardef-executioncontexts" id="ref-for-grammardef-executioncontexts">executionContexts</a>"
</pre>
            </div>
            <h4 class="heading settled" data-level="1.1.2" id="example-targeted"><span class="secno">1.1.2. </span><span
                    class="content">ターゲットを絞ったクリア</span><a class="self-link" href="#example-targeted"></a></h4>
            <div class="example" id="example-46539dbc">
                <a class="self-link" href="#example-46539dbc"></a> ユーザーは Megacorp Inc.
                のサイトでCSRF対策POSTで<code>https://megacorp.example.com/logout</code>からサインアウトします。Megacorpは多数のサービスがサブドメインで存在し、どれをログアウト時にクリアして安全か一概に判別できません。一案は全てクリアし、問題はその後で処理することですが、CEOは「Irate
                Ibexes」での長時間の進捗が誤消去で失われた経験から全消去を拒否しています。
                <p>しかし開発者は「Minus」アプリケーションだけは安全であると把握しているため、ログアウト時ランディングページでこのサブドメインに対しCORS対応・CSRF対策POSTをリクエストとして組み込むことで個別にクリアできます:
                </p>
                <pre>fetch("https://minus.megacorp.example.com/clear-site-data",
      {
          method: "POST",
          mode: "cors",
          headers: new Headers({
              "CSRF": "[<em>insert sekrit token here</em>]"
          })
      });
</pre>
                <p>そのエンドポイントはプリフライトには正しいCORSヘッダを返し、本リクエストには次のヘッダを返してください:</p>
                <pre><a data-link-type="http-header" href="#http-headerdef-clear-site-data" id="ref-for-http-headerdef-clear-site-data②">Clear-Site-Data</a>: "<a data-link-type="grammar" href="#grammardef-cache" id="ref-for-grammardef-cache①">cache</a>", "<a data-link-type="grammar" href="#grammardef-cookies" id="ref-for-grammardef-cookies①">cookies</a>", "<a data-link-type="grammar" href="#grammardef-storage" id="ref-for-grammardef-storage①">storage</a>", "<a data-link-type="grammar" href="#grammardef-executioncontexts" id="ref-for-grammardef-executioncontexts①">executionContexts</a>"
</pre>
            </div>
            <h4 class="heading settled" data-level="1.1.3" id="example-keepcookies"><span class="secno">1.1.3.
                </span><span class="content">重要なCookieを保持</span><a class="self-link" href="#example-keepcookies"></a>
            </h4>
            <div class="example" id="example-d9204fbb">
                <a class="self-link" href="#example-d9204fbb"></a> ユーザーは
                <code>https://ads-are-awesome.example.com/optout</code>
                にCSRF対策POSTで興味関心広告からオプトアウトします。サイト作者はトラッキング情報を含む可能性のある DOM
                アクセス可能データを削除しますが、行ったばかりのオプトアウトクッキーが一緒に消えるのは避けたい。
                <p>そのためには "<a data-link-type="grammar" href="#grammardef-cookies"
                        id="ref-for-grammardef-cookies②">cookies</a>" を除き、他すべての型を含めて次のHTTPヘッダを送信します:</p>
                <pre><a data-link-type="http-header" href="#http-headerdef-clear-site-data" id="ref-for-http-headerdef-clear-site-data③">Clear-Site-Data</a>: "<a data-link-type="grammar" href="#grammardef-cache" id="ref-for-grammardef-cache②">cache</a>", "<a data-link-type="grammar" href="#grammardef-storage" id="ref-for-grammardef-storage②">storage</a>", "<a data-link-type="grammar" href="#grammardef-executioncontexts" id="ref-for-grammardef-executioncontexts②">executionContexts</a>"
</pre>
            </div>
            <h4 class="heading settled" data-level="1.1.4" id="example-killswitch"><span class="secno">1.1.4.
                </span><span class="content">キルスイッチ</span><a class="self-link" href="#example-killswitch"></a></h4>
            <div class="example" id="example-d2647715">
                <a class="self-link" href="#example-d2647715"></a> Super Secret Social Network
                の開発者は、サイトがクロスサイトスクリプティング攻撃に脆弱で、その結果悪意ある者が任意コードをオリジンに注入できる状態だったことを知ります。サイトは修正され、リスク低減のため強い Content
                Security Policy <a data-link-type="biblio" href="#biblio-csp">[CSP]</a>
                も適用されましたが、クライアントが本当に元通り信頼できる状態になったか確信は持てません。攻撃者が巧妙な永続化機構を使ったかもしれません。
                <p>このような永続化クライアントサイドXSSのリスクを下げるため、ローカルのデータソースを消し去る次のHTTPヘッダをレスポンスで送信できます:</p>
                <pre><a data-link-type="http-header" href="#http-headerdef-clear-site-data" id="ref-for-http-headerdef-clear-site-data④">Clear-Site-Data</a>: "<a data-link-type="grammar" href="#grammardef-cache" id="ref-for-grammardef-cache③">cache</a>", "<a data-link-type="grammar" href="#grammardef-cookies" id="ref-for-grammardef-cookies③">cookies</a>", "<a data-link-type="grammar" href="#grammardef-storage" id="ref-for-grammardef-storage③">storage</a>", "<a data-link-type="grammar" href="#grammardef-executioncontexts" id="ref-for-grammardef-executioncontexts③">executionContexts</a>"
</pre>
                <p class="note" role="note"><span>注:</span> Service Worker
                    を導入すると、リクエストは約24時間ごとに必ずサーバへ送られます。更新時のping時に、このようなヘッダを障害時用に送信するとよいでしょう。 <a data-link-type="biblio"
                        href="#biblio-service-workers">[SERVICE-WORKERS]</a></p>
            </div>
            <h3 class="heading settled" data-level="1.2" id="goals"><span class="secno">1.2. </span><span
                    class="content">目的</span><a class="self-link" href="#goals"></a></h3>
            <p>一般的には、ウェブ開発者が各オリジンのユーザーエージェントによるローカルデータ保存について、よりコントロールしやすくすることを目的としています。特に開発者は、下記のことを信頼性高く実現できるべきです:</p>
            <ol>
                <li data-md="">
                    <p><a data-link-type="biblio" href="#biblio-indexeddb">[INDEXEDDB]</a>・WebSQL・Filesystem・<code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webstorage.html#dom-localstorage" id="ref-for-dom-localstorage">localStorage</a></code>・<code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webstorage.html#dom-sessionstorage" id="ref-for-dom-sessionstorage">sessionStorage</a></code>
                        のようなオリジンのクライアントサイドストレージ機構内のデータがクリアされること。</p>
                <li data-md="">
                    <p>オリジンのホストに設定されたクッキーが削除されること <a data-link-type="biblio" href="#biblio-rfc6265">[RFC6265]</a>。</p>
                <li data-md="">
                    <p>オリジンのWeb Worker（専用・共有）が終了されること。</p>
                <li data-md="">
                    <p>オリジンに登録されたService Workerが終了・登録解除されること。</p>
                <li data-md="">
                    <p>オリジン由来のリソースがユーザーエージェントのローカルキャッシュから消去されること。</p>
                <li data-md="">
                    <p>上記全てがHTTPSオリジンのHTTP版にも伝播されること。</p>
                <li data-md="">
                    <p>上記のいずれも、悪意のあるアクティブなドキュメントがメモリに面白いデータを保持し、それがクリアされたら再設定することでバイパスされないこと。</p>
            </ol>
        </section>
        <section>
            <h2 class="heading settled" data-level="2" id="infra"><span class="secno">2. </span><span
                    class="content">インフラストラクチャ</span><a class="self-link" href="#infra"></a></h2>
            <p>本書はABNF文法を<a data-link-type="biblio" href="#biblio-rfc5234">[RFC5234]</a>で定義し<a data-link-type="biblio"
                    href="#biblio-rfc7405">[RFC7405]</a>で更新され、<a
                    href="https://tools.ietf.org/html/rfc7230#section-7">RFC7230・セクション7</a>で定義された<code>#rule</code>拡張と、同文書の<a
                    href="https://tools.ietf.org/html/rfc7230#section-3.2.6">セクション3.2.6</a>で定義されている<code>quoted-string</code>ルールを用いて構文を記述しています。
            </p>
            <p>また本書アルゴリズムや本文上の基本的概念の多くはInfra Standard <a data-link-type="biblio" href="#biblio-infra">[INFRA]</a>
                を参照します。</p>
        </section>
        <section>
            <h2 class="heading settled" data-level="3" id="clearing"><span class="secno">3. </span><span
                    class="content">サイトデータのクリア</span><a class="self-link" href="#clearing"></a></h2>
            <p>開発者はリクエストに対するレスポンスで <code>Clear-Site-Data</code> HTTPレスポンスヘッダを配信することで、ユーザーエージェントにさまざまな関連データのクリアを指示できます。
            </p>
            <h3 class="heading settled" data-level="3.1" id="header"><span class="secno">3.1. </span><span
                    class="content"> <code>Clear-Site-Data</code> HTTPレスポンスヘッダーフィールド </span><a class="self-link"
                    href="#header"></a></h3>
            <p><dfn class="dfn-paneled" data-dfn-type="http-header" data-export=""
                    id="http-headerdef-clear-site-data"><code>Clear-Site-Data</code></dfn>
                HTTPレスポンスヘッダーフィールドは、ユーザーエージェントに対し、特定種類のすべてのデータを削除すべきであることを通知します。このヘッダーは次の文法で表現されます:</p>
            <pre class="abnf">Clear-Site-Data = 1#( <a data-link-type="grammar" href="https://tools.ietf.org/html/rfc7230https://tools.ietf.org/html/rfc7230#section-3.2.6" id="ref-for-section-3.2.6">quoted-string</a> )
; <a data-link-type="grammar" href="https://tools.ietf.org/html/rfc7230#section-7" id="ref-for-section-7">#rule</a> はRFC7230のセクション7で定義されています。
</pre>
            <p><a href="#fetch-integration">§3.2 Fetch統合</a> および <a href="#parsing">§4.1 パース</a> で<a
                    data-link-type="http-header" href="#http-headerdef-clear-site-data"
                    id="ref-for-http-headerdef-clear-site-data⑤">Clear-Site-Data</a> ヘッダーの処理方法を記述します。</p>
            <p>この文書では、この仕組みでクリアできる既知のデータ型の初期セットを定義します。下記に説明があります。将来のバージョンでは、このヘッダーで追加のデータ型をサポートでき、その場合は<a
                    data-link-type="grammar"
                    href="https://tools.ietf.org/html/rfc7230https://tools.ietf.org/html/rfc7230#section-3.2.6"
                    id="ref-for-section-3.2.6①">quoted-string</a>文法に準拠する必要があります。ユーザーエージェントは、ヘッダーのパース時に未知の型を無視しなければなりません（MUST）。
            </p>
            <dl>
                <dt data-md="">"<dfn class="dfn-paneled" data-dfn-type="grammar" data-export=""
                        id="grammardef-cache"><code>cache</code></dfn>"
                <dd data-md="">
                    <p>"<code>cache</code>"型は、サーバーが特定<a data-link-type="dfn"
                            href="https://tools.ietf.org/html/rfc6454#section-3.2" id="ref-for-section-3.2">オリジン</a>の
                        <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response"
                            id="ref-for-concept-response">response</a> の <a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-response-url"
                            id="ref-for-concept-response-url">url</a> に関連付けられたローカルキャッシュデータを削除したいことを表します。これには当然ながら<a
                            data-link-type="dfn" href="https://tools.ietf.org/html/rfc7234#section-2"
                            id="ref-for-section-2">ネットワークキャッシュ</a>も含まれますが、ユーザーエージェントが実装する他の多様なキャッシュ（プリレンダページ、スクリプトキャッシュ、シェーダキャッシュ等）のデータも削除します。
                    </p>
                    <p>実装詳細は<a href="#clear-cache">§4.2.3 オリジンのキャッシュクリア</a>参照。</p>
                    <div class="example" id="example-f74a3235">
                        <a class="self-link" href="#example-f74a3235"></a>
                        <code>https://example.com/clear</code>からレスポンスが届いたとき、以下のヘッダーでオリジン<code>https://example.com</code>に関連するキャッシュがクリアされます:
                        <pre><a data-link-type="http-header" href="#http-headerdef-clear-site-data" id="ref-for-http-headerdef-clear-site-data⑥">Clear-Site-Data</a>: "<a data-link-type="grammar" href="#grammardef-cache" id="ref-for-grammardef-cache④">cache</a>"
</pre>
                    </div>
                    <p class="note" role="note"><span>注:</span>
                        キャッシュは通常オリジン単位ではなくURLやタイムスタンプ単位で管理されています。そのため、実際にはオリジン指定のキャッシュクリアは線形走査が必要となり、大きなキャッシュでは非常に高コストです。
                    </p>
                <dt data-md="">"<dfn class="dfn-paneled" data-dfn-type="grammar" data-export=""
                        id="grammardef-cookies"><code>cookies</code></dfn>"
                <dd data-md="">
                    <p>"<code>cookies</code>"型は、サーバーが特定<a data-link-type="dfn"
                            href="https://tools.ietf.org/html/rfc6454#section-3.2" id="ref-for-section-3.2①">オリジン</a>の
                        <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response"
                            id="ref-for-concept-response①">response</a> の <a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-response-url"
                            id="ref-for-concept-response-url①">url</a> に関連付けられたクッキーを削除したいことを表します。クッキーに加え、HTTP認証認証情報 <a
                            data-link-type="biblio" href="#biblio-rfc7235">[RFC7235]</a>、Channel ID <a
                            data-link-type="biblio" href="#biblio-channelid">[CHANNELID]</a> や Token Binding <a
                            data-link-type="biblio" href="#biblio-tokbind">[TOKBIND]</a>等のオリジン依存トークンもクリアされます。
                    </p>
                    <p>実装詳細は<a href="#clear-cookies">§4.2.4 オリジンのクッキークリア</a>参照。</p>
                    <div class="example" id="example-54e5f977">
                        <a class="self-link" href="#example-54e5f977"></a>
                        <code>https://example.com/clear</code>からのレスポンス時、下記ヘッダーでオリジン<code>https://example.com</code>に関連するクッキー、並びに同じ登録ドメイン配下すべてのオリジンのクッキー（例
                        <code>https://www.example.com/</code> や
                        <code>https://more.subdomains.example.com/</code>）がクリアされます。
                        <pre><a data-link-type="http-header" href="#http-headerdef-clear-site-data" id="ref-for-http-headerdef-clear-site-data⑦">Clear-Site-Data</a>: "<a data-link-type="grammar" href="#grammardef-cookies" id="ref-for-grammardef-cookies④">cookies</a>"
</pre>
                    </div>
                <dt data-md="">"<dfn class="dfn-paneled" data-dfn-type="grammar" data-export=""
                        id="grammardef-storage"><code>storage</code></dfn>"
                <dd data-md="">
                    <p>"<code>storage</code>"型は、サーバーが特定<a data-link-type="dfn"
                            href="https://tools.ietf.org/html/rfc6454#section-3.2" id="ref-for-section-3.2②">オリジン</a>の
                        <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response"
                            id="ref-for-concept-response②">response</a> の <a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-response-url"
                            id="ref-for-concept-response-url②">url</a>に関連付けられたローカル保存データを削除したいことを表します。ここには(<code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webstorage.html#dom-localstorage" id="ref-for-dom-localstorage①">localStorage</a></code>,
                        <code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webstorage.html#dom-sessionstorage" id="ref-for-dom-sessionstorage①">sessionStorage</a></code>,
                        <a data-link-type="biblio" href="#biblio-indexeddb">[INDEXEDDB]</a>, <a data-link-type="biblio"
                            href="#biblio-webdatabase">[WEBDATABASE]</a>等）や、<a data-link-type="dfn"
                            href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration"
                            id="ref-for-dfn-service-worker-registration">Service Worker登録</a>のような周辺的仕組みも含みます。
                    </p>
                    <p>実装詳細は<a href="#clear-dom">§4.2.5 オリジンのDOMアクセシブルストレージクリア</a>参照。</p>
                    <div class="example" id="example-cc066205">
                        <a class="self-link" href="#example-cc066205"></a>
                        <code>https://example.com/clear</code>からのレスポンス時、下記ヘッダーで<code>https://example.com</code>のDOMアクセシブルストレージがクリアされます:
                        <pre><a data-link-type="http-header" href="#http-headerdef-clear-site-data" id="ref-for-http-headerdef-clear-site-data⑧">Clear-Site-Data</a>: "<a data-link-type="grammar" href="#grammardef-storage" id="ref-for-grammardef-storage④">storage</a>"
</pre>
                    </div>
                <dt data-md="">"<dfn class="dfn-paneled" data-dfn-type="grammar" data-export=""
                        id="grammardef-executioncontexts"><code>executionContexts</code></dfn>"
                <dd data-md="">
                    <p>"<code>executionContexts</code>"型は、サーバーが現在特定<a data-link-type="dfn"
                            href="https://tools.ietf.org/html/rfc6454#section-3.2"
                            id="ref-for-section-3.2③">オリジン</a>に対応してレンダリングしている
                        <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response"
                            id="ref-for-concept-response③">response</a> の <a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-response-url"
                            id="ref-for-concept-response-url③">url</a> の実行コンテキストを無効化し再読み込みすることを表します。
                    </p>
                    <div class="example" id="example-b8b629a3">
                        <a class="self-link" href="#example-b8b629a3"></a>
                        <code>https://example.com/clear</code>からのレスポンス時、下記ヘッダーで
                        <code>https://example.com</code> の実行コンテキストが無効化・再読み込みされます:
                        <pre><a data-link-type="http-header" href="#http-headerdef-clear-site-data" id="ref-for-http-headerdef-clear-site-data⑨">Clear-Site-Data</a>: "<a data-link-type="grammar" href="#grammardef-executioncontexts" id="ref-for-grammardef-executioncontexts④">executionContexts</a>"
</pre>
                    </div>
                <dt data-md="">"<dfn class="dfn-paneled" data-dfn-type="grammar" data-export=""
                        id="grammardef-"><code>*</code></dfn>"
                <dd data-md="">
                    <p>"<code>*</code>"（ワイルドカード）疑似型は、サーバーがすべての型を指定した場合と同じ効果をもたらすことを表します。</p>
                    <div class="example" id="example-06da2e13">
                        <a class="self-link" href="#example-06da2e13"></a>
                        <code>https://example.com/clear</code>からのレスポンス時、下記ヘッダーで
                        <code>https://example.com</code>
                        に関連するすべてのクッキー・キャッシュ・DOMアクセシブルストレージがクリアされ、同オリジンの実行コンテキストも無効化・再読み込みされます:
                        <pre><a data-link-type="http-header" href="#http-headerdef-clear-site-data" id="ref-for-http-headerdef-clear-site-data①⓪">Clear-Site-Data</a>: "<a data-link-type="grammar" href="#grammardef-" id="ref-for-grammardef-">*</a>"
</pre>
                    </div>
                    <div class="note" role="note">
                        <p> 注: ワイルドカードは将来型追加時にも前方互換的に全型をカバーします。 </p>
                        <p> 幅広いクリーニングが目的ならワイルドカードを使ってください（DO）。 </p>
                        <p> 上記4種の略記としてワイルドカードを使うのは推奨しません（DO NOT）。将来意味が変わるからです。</p>
                    </div>
            </dl>
            <p class="note" role="note"><span>注:</span> ここで定義した構文は本ドキュメント将来の拡張で、型指定により細かいフィルタが追加される場合も互換です。例として、"<a
                    data-link-type="grammar" href="#grammardef-cookies"
                    id="ref-for-grammardef-cookies⑤"><code>cookies</code></a>"
                の個別値除外機能拡張が予想されます。すべての型名を二重引用符で囲んでおくことで、簡単なカンマ分割処理からヘッダー値をJSONで解釈する高度処理に移行しても下位互換が保てます。</p>
            <h3 class="heading settled" data-level="3.2" id="fetch-integration"><span class="secno">3.2. </span><span
                    class="content">Fetch統合</span><a class="self-link" href="#fetch-integration"></a></h3>
            <p class="issue" id="issue-3ded38d3"><a class="self-link" href="#issue-3ded38d3"></a> モンキーパッチ！Anneと相談のこと。
            </p>
            <p><a data-link-type="http-header" href="#http-headerdef-clear-site-data"
                    id="ref-for-http-headerdef-clear-site-data①①"><code>Clear-Site-Data</code></a> ヘッダーがネットワークから受信したHTTP
                <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response"
                    id="ref-for-concept-response④">response</a>
                に存在する場合は、そのレスポンスをユーザーに表示する前にデータをクリアしなければなりません（MUST）。つまり、現行の<a data-link-type="dfn"
                    href="https://fetch.spec.whatwg.org/#concept-http-network-fetch"
                    id="ref-for-concept-http-network-fetch">HTTP-network fetch</a>アルゴリズムのステップ14の後に、次のステップを実行します:
            </p>
            <ol start="15">
                <li data-md="">
                    <p><var>credentials flag</var>がセットされ、かつ<var>response</var>の<a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-response-header-list"
                            id="ref-for-concept-response-header-list">header list</a>に<a data-link-type="http-header"
                            href="#http-headerdef-clear-site-data"
                            id="ref-for-http-headerdef-clear-site-data①②"><code>Clear-Site-Data</code></a>ヘッダーが含まれていれば、<a
                            href="#clear-response">§4.2
                            responseのデータクリア</a> を<var>response</var>に対して実行する。</p>
            </ol>
            <p class="note" role="note"><span>注:</span>
                これは<code>Set-Cookie</code>ヘッダー処理の<em>後</em>に実行されます。クッキーをクリアする場合はすべて消去です。これは部分的なクッキー消去によるアプリケーションの不定/脆弱状態を避ける意図です。特定クッキーの削除は<code>Set-Cookie</code>ヘッダで失効させることで行うべきです。
            </p>
            <p class="note" role="note"><span>注:</span> fetchの<code>credentials flag</code>は本来クッキーの変更制限ですが、<a
                    data-link-type="http-header" href="#http-headerdef-clear-site-data"
                    id="ref-for-http-headerdef-clear-site-data①③"><code>Clear-Site-Data</code></a>は一貫性の観点から全タイプにこの制約を適用します。
            </p>
            <section>
                <section>
                    <h2 class="heading settled" data-level="4" id="algorithms"><span class="secno">4. </span><span
                            class="content">アルゴリズム</span><a class="self-link" href="#algorithms"></a></h2>
                    <h3 class="heading settled algorithm" data-algorithm="Parsing" data-level="4.1" id="parsing"><span
                            class="secno">4.1. </span><span class="content">パース</span><a class="self-link"
                            href="#parsing"></a></h3>
                    <p><a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response"
                            id="ref-for-concept-response⑤">response</a>が与えられたとき、ユーザーエージェントは <dfn class="dfn-paneled"
                            data-dfn-type="abstract-op" data-export="" data-local-lt="parse response"
                            data-lt="parse response’s Clear-Site-Data header"
                            id="abstract-opdef-parse-responses-clear-site-data-header"> <var>response</var>の
                            <code>Clear-Site-Data</code> ヘッダーをパース </dfn>して、タイプのリストを返すことができます。手順は次の通りです：</p>
                    <ol class="algorithm">
                        <li data-md="">
                            <p><var>types</var>を空リストにする。</p>
                        <li data-md="">
                            <p><var>header</var>を、<a data-link-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#extract-header-list-values"
                                    id="ref-for-extract-header-list-values">extracting header list values</a>（引数
                                <code>Clear-Site-Data</code> と <var>response</var>の<a data-link-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#concept-response-header-list"
                                    id="ref-for-concept-response-header-list①">header list</a>）の結果とする。
                            </p>
                        <li data-md="">
                            <p><var>header</var>が<code>null</code>またはfailureなら空リストを返す。</p>
                        <li data-md="">
                            <p><var>header</var> の各<var>type</var>について、最初に一致するものがあればその文を実行する（switch on <var>type</var>):
                            </p>
                            <dl>
                                <dt data-md="">`<code>"cache"</code>`
                                <dd data-md="">
                                    <p><a data-link-type="grammar" href="#grammardef-cache"
                                            id="ref-for-grammardef-cache⑤">cache</a> を <var>types</var> に追加</p>
                                <dt data-md="">`<code>"cookies"</code>`
                                <dd data-md="">
                                    <p><a data-link-type="grammar" href="#grammardef-cookies"
                                            id="ref-for-grammardef-cookies⑥">cookies</a> を <var>types</var> に追加</p>
                                <dt data-md="">`<code>"storage"</code>`
                                <dd data-md="">
                                    <p><a data-link-type="grammar" href="#grammardef-storage"
                                            id="ref-for-grammardef-storage⑤">storage</a> を <var>types</var> に追加</p>
                                <dt data-md="">`<code>"executionContexts"</code>`
                                <dd data-md="">
                                    <p><a data-link-type="grammar" href="#grammardef-executioncontexts"
                                            id="ref-for-grammardef-executioncontexts⑤">executionContexts</a> を
                                        <var>types</var> に追加
                                    </p>
                                <dt data-md="">`<code>"*"</code>`
                                <dd data-md="">
                                    <p><a data-link-type="grammar" href="#grammardef-cache"
                                            id="ref-for-grammardef-cache⑥">cache</a>、<a data-link-type="grammar"
                                            href="#grammardef-cookies" id="ref-for-grammardef-cookies⑦">cookies</a>、
                                        <a data-link-type="grammar" href="#grammardef-storage"
                                            id="ref-for-grammardef-storage⑥">storage</a>、
                                        <a data-link-type="grammar" href="#grammardef-executioncontexts"
                                            id="ref-for-grammardef-executioncontexts⑥">executionContexts</a> を
                                        <var>types</var> にすべて追加
                                    </p>
                            </dl>
                        <li data-md="">
                            <p><var>types</var> を返す。</p>
                    </ol>
                    <p class="note" role="note"><span>注:</span>
                        現行の値は上のシンプルなswitch文で処理できます。今後型定義が複雑化した場合はパーサ全体をJSON処理に移行することになるでしょう。</p>
                    <h3 class="heading settled algorithm" data-algorithm="Clear data for response" data-level="4.2"
                        id="clear-response"><span class="secno">4.2. </span><span class="content"> <var>response</var>
                            のデータクリア </span><a class="self-link" href="#clear-response"></a></h3>
                    <p><a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response"
                            id="ref-for-concept-response⑥">response</a>（<var>response</var>）が与えられたとき、ユーザーエージェントは <dfn
                            data-dfn-type="abstract-op" data-export="" data-lt="clear site data for response"
                            id="abstract-opdef-clear-site-data-for-response"><var>response</var>のサイトデータクリア <a
                                class="self-link" href="#abstract-opdef-clear-site-data-for-response"></a></dfn>
                        を次の手順で行えます：</p>
                    <ol class="algorithm">
                        <li data-md="">
                            <p>もし<var>response</var>の<a data-link-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#concept-response-url"
                                    id="ref-for-concept-response-url④">url</a>が<a data-link-type="dfn"
                                    href="https://www.w3.org/TR/mixed-content/#a-priori-authenticated-url"
                                    id="ref-for-a-priori-authenticated-url"><i lang="la">a priori</i> authenticated
                                    URL</a>でなければ、<a data-link-type="dfn"
                                    href="https://infra.spec.whatwg.org/#iteration-break"
                                    id="ref-for-iteration-break">break</a>。</p>
                        <li data-md="">
                            <p><var>types</var>を<a data-link-type="abstract-op"
                                    href="#abstract-opdef-parse-responses-clear-site-data-header"
                                    id="ref-for-abstract-opdef-parse-responses-clear-site-data-header">
                                    <var>response</var>のClear-Site-Dataヘッダーをパース</a>の結果とする。</p>
                        <li data-md="">
                            <p><var>origin</var>を<var>response</var>の<a data-link-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#concept-response-url"
                                    id="ref-for-concept-response-url⑤">url</a>の<a data-link-type="dfn"
                                    href="https://url.spec.whatwg.org/#concept-url-origin"
                                    id="ref-for-concept-url-origin">origin</a>とする。</p>
                        <li data-md="">
                            <p><var>browsing contexts</var>を<a data-link-type="abstract-op"
                                    href="#abstract-opdef-prepare-to-clear-origins-data"
                                    id="ref-for-abstract-opdef-prepare-to-clear-origins-data">
                                    <var>origin</var>と<var>types</var>のデータ消去準備</a>の結果とする。</p>
                        <li data-md="">
                            <p><var>types</var> の各<var>type</var>について：</p>
                            <ol>
                                <li data-md="">
                                    <p>最初に一致するものに応じて実行：</p>
                                    <dl>
                                        <dt data-md="">"<a data-link-type="grammar" href="#grammardef-cache"
                                                id="ref-for-grammardef-cache⑦"><code>cache</code></a>"
                                        <dd data-md="">
                                            <p><a data-link-type="abstract-op"
                                                    href="#abstract-opdef-clear-cache-for-origin"
                                                    id="ref-for-abstract-opdef-clear-cache-for-origin"><var>origin</var>のキャッシュクリア</a>
                                            </p>
                                        <dt data-md="">"<a data-link-type="grammar" href="#grammardef-cookies"
                                                id="ref-for-grammardef-cookies⑧"><code>cookies</code></a>"
                                        <dd data-md="">
                                            <p><a data-link-type="abstract-op"
                                                    href="#abstract-opdef-clear-cookies-for-origin"
                                                    id="ref-for-abstract-opdef-clear-cookies-for-origin"><var>origin</var>のクッキークリア</a>
                                            </p>
                                        <dt data-md="">"<a data-link-type="grammar" href="#grammardef-storage"
                                                id="ref-for-grammardef-storage⑦"><code>storage</code></a>"
                                        <dd data-md="">
                                            <p><a data-link-type="abstract-op"
                                                    href="#abstract-opdef-clear-dom-accessible-storage-for-origin"
                                                    id="ref-for-abstract-opdef-clear-dom-accessible-storage-for-origin"><var>origin</var>のDOMアクセシブルストレージクリア</a>
                                            </p>
                                    </dl>
                            </ol>
                        <li data-md="">
                            <p>もし<var>types</var>が"<a data-link-type="grammar" href="#grammardef-executioncontexts"
                                    id="ref-for-grammardef-executioncontexts⑦">executionContexts</a>"を含むなら、<a
                                    data-link-type="abstract-op" href="#abstract-opdef-reload-browsing-contexts"
                                    id="ref-for-abstract-opdef-reload-browsing-contexts"><var>browsing
                                        contexts</var>をリロード</a>。</p>
                    </ol>
                    <p class="note" role="note"><span>注:</span>
                        ユーザーエージェントは開発者向けにクリア動作のデバッグ手段を提供することが推奨されます。例えば成功を示すコンソールメッセージやタイムラインエントリが該当します。</p>
                    <h4 class="heading settled algorithm" data-algorithm="Prepare to clear origin’s data"
                        data-level="4.2.1" id="prepare"><span class="secno">4.2.1. </span><span class="content">
                            <var>origin</var>のデータ消去準備 </span><a class="self-link" href="#prepare"></a></h4>
                    <p><a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6454#section-3.2"
                            id="ref-for-section-3.2④">origin</a> (<var>origin</var>) と type
                        のリスト(<var>types</var>)が与えられたとき、ユーザーエージェントは <dfn class="dfn-paneled" data-dfn-type="abstract-op"
                            data-export="" data-local-lt="prepare"
                            id="abstract-opdef-prepare-to-clear-origins-data"><var>origin</var>のデータ消去準備</dfn>
                        を次の手順で行えます。このアルゴリズムは、消去されたデータをメモリ上のJavaScript変数から再生成できないように、サンドボックス化された<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context"
                            id="ref-for-browsing-context">browsing context</a>のリストを返します。</p>
                    <ol class="algorithm">
                        <li data-md="">
                            <p><var>sandboxed</var>を空リストにする。</p>
                        <li data-md="">
                            <p><var>types</var>が"<a data-link-type="grammar" href="#grammardef-executioncontexts"
                                    id="ref-for-grammardef-executioncontexts⑧"><code>executionContexts</code></a>"を<a
                                    data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain"
                                    id="ref-for-list-contain">含まない</a>場合、<var>sandboxed</var>を返す。</p>
                        <li data-md="">
                            <p>ユーザーエージェントの全<a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context"
                                    id="ref-for-browsing-context①">browsing context</a>の各<var>context</var>について:</p>
                            <ol>
                                <li data-md="">
                                    <p><var>document</var>を<var>context</var>の<a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/browsers.html#active-document"
                                            id="ref-for-active-document">active document</a>とする。</p>
                                <li data-md="">
                                    <p>もし<var>document</var>の<a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object"
                                            id="ref-for-relevant-settings-object">relevant settings object</a>の<a
                                            data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin"
                                            id="ref-for-concept-settings-object-origin">origin</a>が<var>origin</var>でなければ、<a
                                            data-link-type="dfn"
                                            href="https://infra.spec.whatwg.org/#iteration-continue"
                                            id="ref-for-iteration-continue">continue</a></p>
                                <li data-md="">
                                    <p><a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/origin.html#parse-a-sandboxing-directive"
                                            id="ref-for-parse-a-sandboxing-directive">サンドボックスディレクティブのパース</a>を空文字列を入力値、<var>document</var>の<a
                                            data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/origin.html#active-sandboxing-flag-set"
                                            id="ref-for-active-sandboxing-flag-set">active sandboxing flag
                                            set</a>を出力値として実行。</p>
                                <li data-md="">
                                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append"
                                            id="ref-for-list-append"><var>context</var>を<var>sandboxed</var>に追加</a></p>
                            </ol>
                        <li data-md="">
                            <p><var>sandboxed</var>を返す。</p>
                    </ol>
                    <h4 class="heading settled" data-level="4.2.2" id="reload-contexts"><span class="secno">4.2.2.
                        </span><span class="content"> <var>browsing contexts</var> をリロードする </span><a class="self-link"
                            href="#reload-contexts"></a></h4>
                    <p><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context"
                            id="ref-for-browsing-context②">browsing
                            contexts</a>（<var>contexts</var>）のリストが与えられた場合、ユーザーエージェントは以下のように <dfn class="dfn-paneled"
                            data-dfn-type="abstract-op" data-export="" data-local-lt="reload"
                            id="abstract-opdef-reload-browsing-contexts">browsing contexts をリロードする</dfn> ことができる：</p>
                    <ol class="algorithm">
                        <li data-md="">
                            <p><var>contexts</var> の各 <var>context</var> について：</p>
                            <ol>
                                <li data-md="">
                                    <p><var>context</var> の <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/browsers.html#active-document"
                                            id="ref-for-active-document①">active document</a> の <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object"
                                            id="ref-for-relevant-settings-object①">relevant settings object</a> の <a
                                            data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global"
                                            id="ref-for-concept-settings-object-global">global object</a> の <code
                                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/history.html#location" id="ref-for-location">Location</a></code>
                                        オブジェクトの <code
                                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/history.html#dom-location-reload" id="ref-for-dom-location-reload">reload()</a></code>
                                        を実行する。
                                    </p>
                                    <p class="issue" id="issue-808c351f"><a class="self-link"
                                            href="#issue-808c351f"></a>
                                        これは最も単純な方法だが、おそらくドキュメントとそのコンテキストに少し深く入り込みすぎている。おそらく HTML
                                        から該当する部分を分解してコピー／貼り付けする必要がある。</p>
                            </ol>
                    </ol>
                    <h4 class="heading settled" data-level="4.2.3" id="clear-cache"><span class="secno">4.2.3.
                        </span><span class="content"> <var>origin</var> のキャッシュをクリアする </span><a class="self-link"
                            href="#clear-cache"></a></h4>
                    <p><a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6454#section-3.2"
                            id="ref-for-section-3.2⑤">origin</a>（<var>origin</var>）が与えられた場合、ユーザーエージェントは以下のように <dfn
                            class="dfn-paneled" data-dfn-type="abstract-op" data-export="" data-local-lt="clear cache"
                            id="abstract-opdef-clear-cache-for-origin"><var>origin</var> のキャッシュをクリアする</dfn> ことができる：</p>
                    <ol class="algorithm">
                        <li data-md="">
                            <p><var>host</var> を <var>origin</var> の <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin-host"
                                    id="ref-for-concept-origin-host">host</a> とする。</p>
                        <li data-md="">
                            <p><var>cache list</var> を、<a data-link-type="dfn"
                                    href="https://tools.ietf.org/html/rfc7234#section-2" id="ref-for-section-2①">network
                                    cache</a> から、その <code>target URI</code> の <a data-link-type="dfn"
                                    href="https://url.spec.whatwg.org/#concept-url-host"
                                    id="ref-for-concept-url-host">host</a> が <var>host</var> と同一であるエントリの集合とする。</p>
                        <li data-md="">
                            <p><var>cache list</var> の各 <var>entry</var> について：</p>
                            <ol>
                                <li data-md="">
                                    <p><var>entry</var> を <a data-link-type="dfn"
                                            href="https://tools.ietf.org/html/rfc7234#section-2"
                                            id="ref-for-section-2②">network cache</a> から削除する。</p>
                            </ol>
                        <li data-md="">
                            <p>ユーザーエージェントが純粋な <a data-link-type="dfn"
                                    href="https://tools.ietf.org/html/rfc7234#section-2" id="ref-for-section-2③">network
                                    cache</a> 以外のキャッシュを実装している場合、それらのキャッシュからも <var>origin</var>
                                に一致するすべてのエントリを削除しなければならない。</p>
                            <p class="issue" id="issue-0156fcab"><a class="self-link" href="#issue-0156fcab"></a> ここでは
                                <a data-link-type="biblio" href="#biblio-rfc7234">[RFC7234]</a> で定義される network cache
                                を扱っているが、これはユーザーエージェントがキャッシュするすべてではない。ベンダー固有のセクションでどこまで曖昧にできるか？たとえば、Chrome
                                はプリレンダページ、スクリプトキャッシュ、WebGL シェーダーキャッシュ、WebRTC
                                の諸要素、アドレスバー候補キャッシュ、表現でないネットワーク関連のさまざまなもの（HSTS/HPKP, SCDHなど）もクリアする。おそらく <a
                                    data-link-type="biblio" href="#biblio-storage">[STORAGE]</a> でより明確になるかもしれない？
                            </p>
                    </ol>
                    <h4 class="heading settled" data-level="4.2.4" id="clear-cookies"><span class="secno">4.2.4.
                        </span><span class="content"> <var>origin</var> の cookie をクリアする </span><a class="self-link"
                            href="#clear-cookies"></a></h4>
                    <p><a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6454#section-3.2"
                            id="ref-for-section-3.2⑥">origin</a>（<var>origin</var>）が与えられた場合、ユーザーエージェントは以下のように <dfn
                            class="dfn-paneled" data-dfn-type="abstract-op" data-export="" data-local-lt="clear cookies"
                            id="abstract-opdef-clear-cookies-for-origin"><var>origin</var> の cookie をクリアする</dfn> ことができる：
                    </p>
                    <p class="note" role="note"><span>注:</span> すべての <a data-link-type="dfn"
                            href="https://publicsuffix.org/list/#">登録ドメイン</a> の cookie を削除する。cookie
                        は同一生成元ポリシーを無視するためであり、特定のサブドメインのみの cookie をクリアした場合、アプリケーションが不定状態に陥るリスクがある。例えば
                        <code>accounts.google.com</code> と <code>mail.google.com</code> の双方にはサインイン状態を示す cookie が存在する。
                    </p>
                    <p class="note" role="note"><span>注:</span> このアルゴリズムはユーザーエージェントが<a data-link-type="dfn"
                            href="https://tools.ietf.org/html/rfc6265#section-5.3" id="ref-for-section-5.3">cookie
                            store</a>（<a data-link-type="biblio" href="#biblio-rfc6265">[RFC6265]</a> の 5.3
                        節に記載）を実装しており、host で cookie のリストを取得し、個々の cookie を削除できることを前提とする。</p>
                    <ol class="algorithm">
                        <li data-md="">
                            <p><var>registered</var> を <var>origin</var> の <a data-link-type="dfn"
                                    href="https://publicsuffix.org/list/#">登録ドメイン</a> とする（<a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin-host"
                                    id="ref-for-concept-origin-host①">host</a> の登録ドメイン）。
                            </p>
                        <li data-md="">
                            <p><var>cookie list</var> を <a data-link-type="dfn"
                                    href="https://tools.ietf.org/html/rfc6265#section-5.3"
                                    id="ref-for-section-5.3①">cookie store</a> から、<code>domain</code> 属性が <a
                                    data-link-type="dfn" href="https://tools.ietf.org/html/rfc6265#section-5.1.3"
                                    id="ref-for-section-5.1.3">domain-match</a> となる <var>registered</var> の cookie
                                セットとする。</p>
                        <li data-md="">
                            <p><var>cookie list</var> の各 <var>cookie</var> について：</p>
                            <ol>
                                <li data-md="">
                                    <p><var>cookie</var> を <a data-link-type="dfn"
                                            href="https://tools.ietf.org/html/rfc6265#section-5.3"
                                            id="ref-for-section-5.3②">cookie store</a> から削除する。</p>
                            </ol>
                        <li data-md="">
                            <p>ユーザーエージェントが他の cookie 風ストレージをサポートしている場合、それも <a data-link-type="dfn"
                                    href="https://tools.ietf.org/html/rfc6454#section-3.2"
                                    id="ref-for-section-3.2⑦">origins</a> のうち、<a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin-host"
                                    id="ref-for-concept-origin-host②">host</a> の <a data-link-type="dfn"
                                    href="https://publicsuffix.org/list/#">登録ドメイン</a> が <var>registered</var>
                                であるものについて全てクリアしなければならない。
                            </p>
                            <p class="note" role="note"><span>注:</span> 例えば、ユーザーエージェントが Flash をサポートしている場合は、<a
                                    href="https://wiki.mozilla.org/NPAPI:ClearSiteData">NPP_ClearSiteData</a>
                                でローカルストアオブジェクトもクリアされる。</p>
                        <li data-md="">
                            <p><a data-link-type="biblio" href="#biblio-channelid">[CHANNELID]</a> の Channel ID と <a
                                    data-link-type="biblio" href="#biblio-tokbind">[TOKBIND]</a> のバウンドトークンを、<a
                                    data-link-type="dfn" href="https://tools.ietf.org/html/rfc6454#section-3.2"
                                    id="ref-for-section-3.2⑧">origins</a> のうち、<a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin-host"
                                    id="ref-for-concept-origin-host③">host</a> の <a data-link-type="dfn"
                                    href="https://publicsuffix.org/list/#">登録ドメイン</a> が <var>registered</var>
                                であるものからクリアする。
                            </p>
                        <li data-md="">
                            <p><a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#authentication-entry"
                                    id="ref-for-authentication-entry">authentication entries</a> および <a
                                    data-link-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#proxy-authentication-entry"
                                    id="ref-for-proxy-authentication-entry">proxy-authentication entries</a> を、<a
                                    data-link-type="dfn" href="https://tools.ietf.org/html/rfc6454#section-3.2"
                                    id="ref-for-section-3.2⑨">origins</a> のうち <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin-host"
                                    id="ref-for-concept-origin-host④">host</a> の <a data-link-type="dfn"
                                    href="https://publicsuffix.org/list/#">登録ドメイン</a> が <var>registered</var>
                                であるものについてクリアする。
                            </p>
                    </ol>
                    <p class="issue" id="issue-a4a76269"><a class="self-link" href="#issue-a4a76269"></a> bound
                        tokens/IDs や HTTP 認証のクリアのプロセスは非常に曖昧。<a
                            href="https://github.com/w3c/webappsec-clear-site-data/issues/2">&lt;https://github.com/w3c/webappsec-clear-site-data/issues/2></a>
                    </p>
                    <h4 class="heading settled" data-level="4.2.5" id="clear-dom"><span class="secno">4.2.5.
                        </span><span class="content"> <var>origin</var> の DOM からアクセス可能なストレージをクリアする </span><a
                            class="self-link" href="#clear-dom"></a></h4>
                    <p><a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6454#section-3.2"
                            id="ref-for-section-3.2①⓪">origin</a>（<var>origin</var>）が与えられた場合、ユーザーエージェントは以下のように <dfn
                            class="dfn-paneled" data-dfn-type="abstract-op" data-export="" data-local-lt="clear storage"
                            id="abstract-opdef-clear-dom-accessible-storage-for-origin"><var>origin</var> の DOM
                            からアクセス可能なストレージをクリアする</dfn> ことができる：</p>
                    <ol class="algorithm">
                        <li data-md="">
                            <p>ユーザーエージェントの <a class="idl-code" data-link-type="attribute"
                                    href="https://html.spec.whatwg.org/multipage/webstorage.html#dom-localstorage"
                                    id="ref-for-dom-localstorage②">local storage
                                    areas</a> <a data-link-type="biblio" href="#biblio-html">[HTML]</a> の各
                                <var>area</var> について：
                            </p>
                            <ol>
                                <li data-md="">
                                    <p><var>area</var> の <a data-link-type="dfn"
                                            href="https://tools.ietf.org/html/rfc6454#section-3.2"
                                            id="ref-for-section-3.2①①">origin</a> が <var>origin</var> である場合：</p>
                                    <ol>
                                        <li data-md="">
                                            <p><var>area</var> に関連付けられた <code
                                                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webstorage.html#dom-storage-clear" id="ref-for-dom-storage-clear">clear()</a></code>
                                                を <code
                                                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webstorage.html#storage-2" id="ref-for-storage-2">Storage</a></code>
                                                オブジェクト上で実行する。</p>
                                    </ol>
                            </ol>
                        <li data-md="">
                            <p>ユーザーエージェントの <a class="idl-code" data-link-type="attribute"
                                    href="https://html.spec.whatwg.org/multipage/webstorage.html#dom-sessionstorage"
                                    id="ref-for-dom-sessionstorage②">session storage
                                    areas</a> <a data-link-type="biblio" href="#biblio-html">[HTML]</a> の各
                                <var>area</var> について：
                            </p>
                            <ol>
                                <li data-md="">
                                    <p><var>area</var> の <a data-link-type="dfn"
                                            href="https://tools.ietf.org/html/rfc6454#section-3.2"
                                            id="ref-for-section-3.2①②">origin</a> が <var>origin</var> である場合：</p>
                                    <ol>
                                        <li data-md="">
                                            <p><var>area</var> に関連付けられた <code
                                                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webstorage.html#dom-storage-clear" id="ref-for-dom-storage-clear①">clear()</a></code>
                                                を <code
                                                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webstorage.html#storage-2" id="ref-for-storage-2①">Storage</a></code>
                                                オブジェクト上で実行する。</p>
                                    </ol>
                            </ol>
                        <li data-md="">
                            <p><var>origin</var> 用の <a data-link-type="dfn"
                                    href="https://w3c.github.io/IndexedDB/#database" id="ref-for-database">databases</a>
                                <a data-link-type="biblio" href="#biblio-indexeddb">[INDEXEDDB]</a> の各
                                <var>database</var> について：
                            </p>
                            <ol>
                                <li data-md="">
                                    <p><a data-link-type="dfn" href="https://w3c.github.io/IndexedDB/#delete-a-database"
                                            id="ref-for-delete-a-database">Delete</a> <var>database</var>。</p>
                            </ol>
                        <li data-md="">
                            <p>ユーザーエージェントの <a data-link-type="dfn"
                                    href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration"
                                    id="ref-for-dfn-service-worker-registration①">service worker registrations</a> の各
                                <var>registration</var> について：
                            </p>
                            <ol>
                                <li data-md="">
                                    <p><var>registration</var> の <a data-link-type="dfn"
                                            href="https://w3c.github.io/ServiceWorker/#dfn-scope-url"
                                            id="ref-for-dfn-scope-url">scope URL</a> の <a data-link-type="dfn"
                                            href="https://url.spec.whatwg.org/#concept-url-origin"
                                            id="ref-for-concept-url-origin①">origin</a> が <var>origin</var> の場合：</p>
                                    <ol>
                                        <li data-md="">
                                            <p><var>registration</var> で <code
                                                    class="idl"><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#dom-serviceworkerregistration-unregister" id="ref-for-dom-serviceworkerregistration-unregister">unregister()</a></code>
                                                を実行する。</p>
                                    </ol>
                            </ol>
                        <li data-md="">
                            <p>ユーザーエージェントの <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/offline.html#application-cache"
                                    id="ref-for-application-cache">application caches</a> の各 <var>appcache</var> について：
                            </p>
                            <ol>
                                <li data-md="">
                                    <p><var>appcache</var> の <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/offline.html#application-cache-group"
                                            id="ref-for-application-cache-group">application cache group</a> が、<a
                                            data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin"
                                            id="ref-for-concept-url-origin②">origin</a> が <var>origin</var> である URL
                                        で識別される場合：</p>
                                    <ol>
                                        <li data-md="">
                                            <p><var>appcache</var> を破棄する。</p>
                                    </ol>
                            </ol>
                        <li data-md="">
                            <p>その他のスクリプトからアクセス可能なストレージについても、ユーザーエージェントはこの origin
                                に関連付けられたすべてのデータを削除しなければならない。これには（但し限定されない）以下が含まれる：</p>
                            <ol>
                                <li data-md="">
                                    <p>origin の WebSQL データベース <a data-link-type="biblio"
                                            href="#biblio-webdatabase">[WEBDATABASE]</a>。</p>
                                <li data-md="">
                                    <p>origin のファイルシステム <a data-link-type="biblio"
                                            href="#biblio-file-system-api">[file-system-api]</a></p>
                                <li data-md="">
                                    <p>プラグインデータ（例：Flash の <a
                                            href="https://wiki.mozilla.org/NPAPI:ClearSiteData">NPP_ClearSiteData</a>
                                        など）</p>
                                <li data-md="">
                                    <p class="issue" id="issue-b346d876"><a class="self-link"
                                            href="#issue-b346d876"></a> Moar?</p>
                            </ol>
                    </ol>
                </section>
                <section>
                    <h2 class="heading settled" data-level="5" id="security"><span class="secno">5. </span><span
                            class="content">セキュリティ考慮事項</span><a class="self-link" href="#security"></a>
                    </h2>
                    <h3 class="heading settled" data-level="5.1" id="incomplete"><span class="secno">5.1. </span><span
                            class="content">不完全なクリアリング</span><a class="self-link" href="#incomplete"></a></h3>
                    <p>ストレージの種類を一つだけクリアした場合に、アプリケーションが不定状態に陥る可能性がある。これに対しては、すべてのストレージオプションをまとめてクリアし、ヘッダーをセキュア接続で配信することを必須とすることで、ある程度緩和ができる。
                    </p>
                    <h3 class="heading settled" data-level="5.2" id="service-workers"><span class="secno">5.2.
                        </span><span class="content">Service worker</span><a class="self-link"
                            href="#service-workers"></a></h3>
                    <p>Clear-Site-Data ヘッダーは、ネットワーク経由で取得されたレスポンスに対してのみ尊重されるべきであり、service worker
                        から提供されるレスポンスには適用されてはならない。</p>
                    <p>service worker は、スコープ内のリソース要求（サードパーティ要求も含む）に対して任意のレスポンスを返せるため、Clear-Site-Data をサポートすると任意の origin
                        のデータをクリアできる権限を与えてしまうことになる。</p>
                    <p>あるリクエストが service worker 宛に送られ、それが処理されず、<a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#request-service-workers-mode"
                            id="ref-for-request-service-workers-mode">service-workers mode</a> を "<code>none</code>"
                        にして再実行されネットワークに送られた場合、そのレスポンスはネットワークレスポンスなのでハンドリングできる。前回の service worker からの応答取得は無関係である。</p>
                    <p>また、service worker アップデートはネットワークレスポンスとなるため、この制約の影響を受けない。これは <a href="#example-killswitch">§1.1.4
                            Kill Switch</a> のユースケースのためにも重要である。</p>
                    <h2 class="heading settled" data-level="6" id="privacy"><span class="secno">6. </span><span
                            class="content">プライバシー考慮事項</span><a class="self-link" href="#privacy"></a></h2>
                    <h3 class="heading settled" data-level="6.1" id="user-vs-author"><span class="secno">6.1.
                        </span><span class="content">Web 開発者がタイミングを制御</span><a class="self-link"
                            href="#user-vs-author"></a></h3>
                    <p>適切なタイミングで <a data-link-type="http-header" href="#http-headerdef-clear-site-data"
                            id="ref-for-http-headerdef-clear-site-data①④"><code>Clear-Site-Data</code></a>
                        が発火される場合、ユーザーエージェントから機密データがクリアされることでユーザーのプライバシーやセキュリティが高まる。しかし、データクリアのトリガータイミングはウェブ開発者（ユーザーでは<em>ない</em>）が制御していることに注意。悪意のないサイト管理者であっても、ユーザは特定のタイミングでデータがクリアされることを保証できず、またどのデータ種類がクリアされるかもユーザが制御できない。
                    </p>
                    <p>ユーザーが特定のタイミングでサイトデータが実際にクリアされたことを保証したい場合は、ユーザーエージェント自身によるデータ消去機能を利用すべきである。</p>
                    <p>最低限として、ユーザーエージェントは（<a data-link-type="biblio" href="#biblio-rfc6919">[RFC6919]</a>
                        の意味において）ウェブ開発者に提供している機能はユーザーにも提供「すべき」である。理想的には、プラットフォームレベルを超える機能（履歴のクリアなど）も提供することが望ましい。</p>
                    <h3 class="heading settled" data-level="6.2" id="remnants"><span class="secno">6.2. </span><span
                            class="content">ディスクに残るデータ</span><a class="self-link" href="#remnants"></a>
                    </h3>
                    <p><a data-link-type="http-header" href="#http-headerdef-clear-site-data"
                            id="ref-for-http-headerdef-clear-site-data①⑤"><code>Clear-Site-Data</code></a>
                        はユーザーエージェント内でクリアイベントを発火させるが、クリアイベントの後にユーザーのディスクの状態がどうなるかについては保証しにくい。とくに、すべてのサイトデータの痕跡をディスクから確実に消去する責任はユーザーエージェントにあるが、これは非常に難しい作業になりえる（たとえば仮想メモリなど）。
                    </p>
                    <p>要するに、多くのユーザーエージェントは「ベストエフォート」で消去処理を実装しているが、完全な消去を保証できるわけではない。</p>
                    <p>ユーザーが本当にサイトデータがディスクに残らないことを保証したい場合、「意図的にディスクへデータを書き込まない」ことを約束しているブラウジングモード（Chrome の「シークレット」、IE
                        の「InPrivate」など）を利用するのが最善である。これらのモードはより高い防御になるが、それでも完全には防げない制限がある。</p>
                </section>
                <section>
                    <h2 class="heading settled" data-level="7" id="iana-considerations"><span class="secno">7.
                        </span><span class="content">IANA考慮事項</span><a class="self-link"
                            href="#iana-considerations"></a></h2>
                    <p>恒久的なメッセージヘッダーフィールドレジストリは以下の登録で更新する必要がある： <a data-link-type="biblio"
                            href="#biblio-rfc3864">[RFC3864]</a>
                    </p>
                    <h3 class="heading settled" data-level="7.1" id="iana-clear-site-data"><span class="secno">7.1.
                        </span><span class="content"> Clear-Site-Data </span><a class="self-link"
                            href="#iana-clear-site-data"></a></h3>
                    <dl>
                        <dt>ヘッダーフィールド名
                        <dd>Clear-Site-Data
                        <dt>対象プロトコル
                        <dd>http
                        <dt>ステータス
                        <dd>standard
                        <dt>著者／変更管理者
                        <dd>W3C
                        <dt>仕様ドキュメント
                        <dd>本仕様（<a href="#header">§3.1 The Clear-Site-Data HTTP Response Header
                                Field</a> を参照）
                    </dl>
                    <section>
                        <h2 class="heading settled" data-level="8" id="acknowledgements"><span class="secno">8.
                            </span><span class="content">謝辞</span><a class="self-link" href="#acknowledgements"></a>
                        </h2>
                        <p>Michal Zalewski がこのコンセプトのバリエーションを提案し、Mark Knichel が詳細化に協力した。</p>
                    </section>
                </section>
            </section>
        </section>
    </main>
    <h2 class="no-ref no-num heading settled" id="conformance"><span class="content">適合性</span><a class="self-link"
            href="#conformance"></a></h2>
    <h3 class="no-ref no-num heading settled" id="conventions"><span class="content">文書の表記規則</span><a class="self-link"
            href="#conventions"></a></h3>
    <p>適合性要件は、記述的な断定と RFC 2119 の用語の組み合わせで表現される。本仕様の規範的部分で使われる “MUST”、“MUST NOT”、“REQUIRED”、“SHALL”、“SHALL
        NOT”、“SHOULD”、“SHOULD NOT”、“RECOMMENDED”、“MAY”、“OPTIONAL” というキーワードは RFC 2119
        に記載されている通りに解釈される。ただし、可読性のためこれらの語は本仕様内ではすべて大文字で表記されているわけではない。</p>
    <p>本仕様書における文書のすべての本文は、明示的に非規範的または例、注意（ノート）と記載された節を除き、規範的である。 <a data-link-type="biblio"
            href="#biblio-rfc2119">[RFC2119]</a></p>
    <p>本仕様での例は「for example」で始まるか、<code>class="example"</code> によるスタイル分離で示される。例えば：</p>
    <div class="example" id="example-f839f6c8">
        <a class="self-link" href="#example-f839f6c8"></a>
        <p>これは情報的な例の一つです。</p>
    </div>
    <p>情報ノートは「Note」で始まり、<code>class="note"</code> で本文と分離される。例えば：</p>
    <p class="note" role="note">Note, これは情報ノートです。</p>
    <h3 class="no-ref no-num heading settled" id="conformant-algorithms"><span class="content">適合アルゴリズム</span><a
            class="self-link" href="#conformant-algorithms"></a></h3>
    <p>（「先頭の空白文字を取り除く」や「false を返してこの手順を中断する」などの）アルゴリズム中で命令形で記載された要件は、そのアルゴリズムの導入文で使われているキーワード（"must"、"should"、"may"
        など）の意味で解釈されること。</p>
    <p>アルゴリズムまたは手順として記述された適合要件は、その最終的な結果が同等である限り、どのような方法で実装してもよい。特に、本仕様書で定義されるアルゴリズムは理解しやすいことを意図しており、高速に動作することを意図しているわけではない。実装者は最適化することが推奨される。
    </p>
    <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本仕様書で定義された用語</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#grammardef-">*</a><span>、§3.1 にて</span>
        <li><a href="#grammardef-cache">cache</a><span>、§3.1 にて</span>
        <li><a href="#abstract-opdef-clear-cache-for-origin">clear cache</a><span>、§4.2.3 にて</span>
        <li><a href="#abstract-opdef-clear-cache-for-origin">clear cache for origin</a><span>、§4.2.3 にて</span>
        <li><a href="#abstract-opdef-clear-cookies-for-origin">clear cookies</a><span>、§4.2.4 にて</span>
        <li><a href="#abstract-opdef-clear-cookies-for-origin">clear cookies for origin</a><span>、§4.2.4 にて</span>
        <li><a href="#abstract-opdef-clear-dom-accessible-storage-for-origin">clear DOM-accessible storage for
                origin</a><span>、§4.2.5 にて</span>
        <li><a href="#http-headerdef-clear-site-data">Clear-Site-Data</a><span>、§3.1 にて</span>
        <li><a href="#abstract-opdef-clear-site-data-for-response">clear site data for response</a><span>、§4.2 にて</span>
        <li><a href="#abstract-opdef-clear-dom-accessible-storage-for-origin">clear storage</a><span>、§4.2.5 にて</span>
        <li><a href="#grammardef-cookies">cookies</a><span>、§3.1 にて</span>
        <li><a href="#grammardef-executioncontexts">executionContexts</a><span>、§3.1 にて</span>
        <li><a href="#abstract-opdef-parse-responses-clear-site-data-header">parse response</a><span>、§4.1 にて</span>
        <li><a href="#abstract-opdef-parse-responses-clear-site-data-header">parse response’s Clear-Site-Data
                header</a><span>、§4.1 にて</span>
        <li><a href="#abstract-opdef-prepare-to-clear-origins-data">prepare</a><span>、§4.2.1 にて</span>
        <li><a href="#abstract-opdef-prepare-to-clear-origins-data">prepare to clear origin’s data</a><span>、§4.2.1
                にて</span>
        <li><a href="#abstract-opdef-reload-browsing-contexts">reload</a><span>、§4.2.2 にて</span>
        <li><a href="#abstract-opdef-reload-browsing-contexts">reload browsing contexts</a><span>、§4.2.2 にて</span>
        <li><a href="#grammardef-storage">storage</a><span>、§3.1 にて</span>
    </ul>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">他仕様で定義されている用語</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[FETCH]</a> は次の用語を定義する：
            <ul>
                <li><a href="https://fetch.spec.whatwg.org/#authentication-entry">authentication entry</a>
                <li><a href="https://fetch.spec.whatwg.org/#extract-header-list-values">extracting header list
                        values</a>
                <li><a href="https://fetch.spec.whatwg.org/#concept-response-header-list">header list</a>
                <li><a href="https://fetch.spec.whatwg.org/#concept-http-network-fetch">http-network fetch</a>
                <li><a href="https://fetch.spec.whatwg.org/#proxy-authentication-entry">proxy-authentication entry</a>
                <li><a href="https://fetch.spec.whatwg.org/#concept-response">response</a>
                <li><a href="https://fetch.spec.whatwg.org/#request-service-workers-mode">service-workers mode</a>
                <li><a href="https://fetch.spec.whatwg.org/#concept-response-url">url</a>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a> は次の用語を定義する：
            <ul>
                <li><a href="https://html.spec.whatwg.org/multipage/history.html#location">Location</a>
                <li><a href="https://html.spec.whatwg.org/multipage/webstorage.html#storage-2">Storage</a>
                <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#active-document">active document</a>
                <li><a href="https://html.spec.whatwg.org/multipage/origin.html#active-sandboxing-flag-set">active
                        sandboxing flag set</a>
                <li><a href="https://html.spec.whatwg.org/multipage/offline.html#application-cache">application
                        cache</a>
                <li><a href="https://html.spec.whatwg.org/multipage/offline.html#application-cache-group">application
                        cache group</a>
                <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context">browsing context</a>
                <li><a href="https://html.spec.whatwg.org/multipage/webstorage.html#dom-storage-clear">clear()</a>
                <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global">global
                        object</a>
                <li><a href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin-host">host</a>
                <li><a href="https://html.spec.whatwg.org/multipage/webstorage.html#dom-localstorage">localStorage</a>
                <li><a
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin">origin</a>
                <li><a href="https://html.spec.whatwg.org/multipage/origin.html#parse-a-sandboxing-directive">parse a
                        sandboxing directive</a>
                <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object">relevant
                        settings object</a>
                <li><a href="https://html.spec.whatwg.org/multipage/history.html#dom-location-reload">reload()</a>
                <li><a
                        href="https://html.spec.whatwg.org/multipage/webstorage.html#dom-sessionstorage">sessionStorage</a>
            </ul>
        <li>
            <a data-link-type="biblio">[IndexedDB-2]</a> は次の用語を定義する：
            <ul>
                <li><a href="https://w3c.github.io/IndexedDB/#database">database</a>
                <li><a href="https://w3c.github.io/IndexedDB/#delete-a-database">delete a database</a>
            </ul>
        <li>
            <a data-link-type="biblio">[INFRA]</a> は次の用語を定義する：
            <ul>
                <li><a href="https://infra.spec.whatwg.org/#list-append">append</a>
                <li><a href="https://infra.spec.whatwg.org/#iteration-break">break</a>
                <li><a href="https://infra.spec.whatwg.org/#list-contain">contain</a>
                <li><a href="https://infra.spec.whatwg.org/#iteration-continue">continue</a>
            </ul>
        <li>
            <a data-link-type="biblio">[mixed-content]</a> は次の用語を定義する：
            <ul>
                <li><a href="https://www.w3.org/TR/mixed-content/#a-priori-authenticated-url">a priori authenticated
                        url</a>
            </ul>
        <li>
            <a data-link-type="biblio">[PSL]</a> は次の用語を定義する：
            <ul>
                <li><a href="https://publicsuffix.org/list/#">registered domain</a>
            </ul>
        <li>
            <a data-link-type="biblio">[RFC6265]</a> は次の用語を定義する：
            <ul>
                <li><a href="https://tools.ietf.org/html/rfc6265#section-5.3">cookie store</a>
                <li><a href="https://tools.ietf.org/html/rfc6265#section-5.1.3">domain-match</a>
            </ul>
        <li>
            <a data-link-type="biblio">[rfc6454]</a> は次の用語を定義する：
            <ul>
                <li><a href="https://tools.ietf.org/html/rfc6454#section-3.2">origin</a>
            </ul>
        <li>
            <a data-link-type="biblio">[RFC7230]</a> は次の用語を定義する：
            <ul>
                <li><a href="https://tools.ietf.org/html/rfc7230#section-7">#rule</a>
                <li><a
                        href="https://tools.ietf.org/html/rfc7230https://tools.ietf.org/html/rfc7230#section-3.2.6">quoted-string</a>
            </ul>
        <li>
            <a data-link-type="biblio">[RFC7234]</a> は次の用語を定義する：
            <ul>
                <li><a href="https://tools.ietf.org/html/rfc7234#section-2">network cache</a>
            </ul>
        <li>
            <a data-link-type="biblio">[SERVICE-WORKERS]</a> は次の用語を定義する：
            <ul>
                <li><a href="https://w3c.github.io/ServiceWorker/#dfn-scope-url">scope url</a>
                <li><a href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration">service worker
                        registration</a>
                <li><a
                        href="https://w3c.github.io/ServiceWorker/#dom-serviceworkerregistration-unregister">unregister()</a>
            </ul>
        <li>
            <a data-link-type="biblio">[URL]</a> は次の用語を定義する：
            <ul>
                <li><a href="https://url.spec.whatwg.org/#concept-url-host">host</a>
                <li><a href="https://url.spec.whatwg.org/#concept-url-origin">origin</a>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">規範的参考文献</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-channelid">[CHANNELID]
        <dd>Dirk Balfanz; Ryan Hamilton. <a href="https://tools.ietf.org/html/draft-balfanz-tls-channelid">Transport
                Layer Security (TLS) Channel IDs</a>. URL: <a
                href="https://tools.ietf.org/html/draft-balfanz-tls-channelid">https://tools.ietf.org/html/draft-balfanz-tls-channelid</a>
        <dt id="biblio-fetch">[FETCH]
        <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/">Fetch Standard</a>. Living Standard. URL: <a
                href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
        <dt id="biblio-file-system-api">[FILE-SYSTEM-API]
        <dd>Eric Uhrhane. <a href="https://www.w3.org/TR/file-system-api/">File API: Directories and System</a>.
            2014年4月24日. NOTE. URL: <a
                href="https://www.w3.org/TR/file-system-api/">https://www.w3.org/TR/file-system-api/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living
            Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-indexeddb">[INDEXEDDB]
        <dd>Nikunj Mehta; et al. <a href="https://www.w3.org/TR/IndexedDB/">Indexed Database API</a>. 2015年1月8日. REC.
            URL: <a href="https://www.w3.org/TR/IndexedDB/">https://www.w3.org/TR/IndexedDB/</a>
        <dt id="biblio-indexeddb-2">[IndexedDB-2]
        <dd>Ali Alabbas; Joshua Bell. <a href="https://www.w3.org/TR/IndexedDB-2/">Indexed Database API 2.0</a>.
            2017年11月16日. PR. URL: <a href="https://www.w3.org/TR/IndexedDB-2/">https://www.w3.org/TR/IndexedDB-2/</a>
        <dt id="biblio-infra">[INFRA]
        <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/">Infra Standard</a>. Living
            Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
        <dt id="biblio-mixed-content">[MIXED-CONTENT]
        <dd>Mike West. <a href="https://www.w3.org/TR/mixed-content/">Mixed Content</a>. 2016年8月2日. CR. URL: <a
                href="https://www.w3.org/TR/mixed-content/">https://www.w3.org/TR/mixed-content/</a>
        <dt id="biblio-psl">[PSL]
        <dd><cite><a href="https://publicsuffix.org/">Public Suffix List</a></cite>. Mozilla Foundation.
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement
                Levels</a>. 1997年3月. Best Current Practice. URL: <a
                href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
        <dt id="biblio-rfc3864">[RFC3864]
        <dd>G. Klyne; M. Nottingham; J. Mogul. <a href="https://tools.ietf.org/html/rfc3864">Registration Procedures for
                Message Header Fields</a>. 2004年9月. Best Current Practice. URL: <a
                href="https://tools.ietf.org/html/rfc3864">https://tools.ietf.org/html/rfc3864</a>
        <dt id="biblio-rfc5234">[RFC5234]
        <dd>D. Crocker, Ed.; P. Overell. <a href="https://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax
                Specifications: ABNF</a>. 2008年1月. Internet Standard. URL: <a
                href="https://tools.ietf.org/html/rfc5234">https://tools.ietf.org/html/rfc5234</a>
        <dt id="biblio-rfc6265">[RFC6265]
        <dd>A. Barth. <a href="https://tools.ietf.org/html/rfc6265">HTTP State Management Mechanism</a>. 2011年4月.
            Proposed Standard. URL: <a
                href="https://tools.ietf.org/html/rfc6265">https://tools.ietf.org/html/rfc6265</a>
        <dt id="biblio-rfc6454">[RFC6454]
        <dd>A. Barth. <a href="https://tools.ietf.org/html/rfc6454">The Web Origin Concept</a>. 2011年12月. Proposed
            Standard. URL: <a href="https://tools.ietf.org/html/rfc6454">https://tools.ietf.org/html/rfc6454</a>
        <dt id="biblio-rfc7230">[RFC7230]
        <dd>R. Fielding, Ed.; J. Reschke, Ed.. <a href="https://tools.ietf.org/html/rfc7230">Hypertext Transfer Protocol
                (HTTP/1.1): Message Syntax and Routing</a>. 2014年6月. Proposed Standard. URL: <a
                href="https://tools.ietf.org/html/rfc7230">https://tools.ietf.org/html/rfc7230</a>
        <dt id="biblio-rfc7234">[RFC7234]
        <dd>R. Fielding, Ed.; M. Nottingham, Ed.; J. Reschke, Ed.. <a
                href="https://tools.ietf.org/html/rfc7234">Hypertext Transfer Protocol (HTTP/1.1): Caching</a>. 2014年6月.
            Proposed Standard. URL: <a
                href="https://tools.ietf.org/html/rfc7234">https://tools.ietf.org/html/rfc7234</a>
        <dt id="biblio-rfc7235">[RFC7235]
        <dd>R. Fielding, Ed.; J. Reschke, Ed.. <a href="https://tools.ietf.org/html/rfc7235">Hypertext Transfer Protocol
                (HTTP/1.1): Authentication</a>. 2014年6月. Proposed Standard. URL: <a
                href="https://tools.ietf.org/html/rfc7235">https://tools.ietf.org/html/rfc7235</a>
        <dt id="biblio-rfc7405">[RFC7405]
        <dd>P. Kyzivat. <a href="https://tools.ietf.org/html/rfc7405">Case-Sensitive String Support in ABNF</a>.
            2014年12月. Proposed Standard. URL: <a
                href="https://tools.ietf.org/html/rfc7405">https://tools.ietf.org/html/rfc7405</a>
        <dt id="biblio-service-workers">[SERVICE-WORKERS]
        <dd>Alex Russell; et al. <a href="https://www.w3.org/TR/service-workers-1/">Service Workers 1</a>. 2017年11月2日.
            WD. URL: <a href="https://www.w3.org/TR/service-workers-1/">https://www.w3.org/TR/service-workers-1/</a>
        <dt id="biblio-tokbind">[TOKBIND]
        <dd>Andrei Popov; et al. <a href="https://tools.ietf.org/html/draft-ietf-tokbind-protocol">The Token Binding
                Protocol Version 1.0</a>. URL: <a
                href="https://tools.ietf.org/html/draft-ietf-tokbind-protocol">https://tools.ietf.org/html/draft-ietf-tokbind-protocol</a>
        <dt id="biblio-url">[URL]
        <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/">URL Standard</a>. Living Standard. URL: <a
                href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
        <dt id="biblio-webdatabase">[WEBDATABASE]
        <dd>Ian Hickson. <a href="https://www.w3.org/TR/webdatabase/">Web SQL Database</a>. 2010年11月18日. NOTE. URL:
            <a href="https://www.w3.org/TR/webdatabase/">https://www.w3.org/TR/webdatabase/</a>
    </dl>
    <h3 class="no-num no-ref heading settled" id="informative"><span class="content">非規範的参考文献</span><a class="self-link"
            href="#informative"></a></h3>
    <dl>
        <dt id="biblio-csp">[CSP]
        <dd>Mike West. <a href="https://www.w3.org/TR/CSP3/">Content Security Policy Level 3</a>. 2016年9月13日. WD.
            URL: <a href="https://www.w3.org/TR/CSP3/">https://www.w3.org/TR/CSP3/</a>
        <dt id="biblio-rfc6919">[RFC6919]
        <dd>R. Barnes; S. Kent; E. Rescorla. <a href="https://tools.ietf.org/html/rfc6919">Further Key Words for Use in
                RFCs to Indicate Requirement Levels</a>. 2013年4月1日. Experimental. URL: <a
                href="https://tools.ietf.org/html/rfc6919">https://tools.ietf.org/html/rfc6919</a>
        <dt id="biblio-storage">[STORAGE]
        <dd>Anne van Kesteren. <a href="https://storage.spec.whatwg.org/">Storage Standard</a>. Living Standard. URL: <a
                href="https://storage.spec.whatwg.org/">https://storage.spec.whatwg.org/</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">課題索引</span><a class="self-link"
            href="#issues-index"></a></h2>
    <div style="counter-reset:issue">
        <div class="issue">Monkey patching! Anne に相談せよ。<a href="#issue-3ded38d3"> ↵ </a></div>
        <div class="issue">これは最も単純な方法だが、おそらくドキュメントとそのコンテキストに少し深く入り込みすぎている。おそらく HTML から該当する部分を分解してコピー／貼り付けする必要がある。<a
                href="#issue-808c351f"> ↵ </a></div>
        <div class="issue">ここでは <a data-link-type="biblio" href="#biblio-rfc7234">[RFC7234]</a> で定義される network cache
            を扱っているが、これはユーザーエージェントがキャッシュするすべてではない。ベンダー固有のセクションでどこまで曖昧にできるか？たとえば、Chrome はプリレンダページ、スクリプトキャッシュ、WebGL
            シェーダーキャッシュ、WebRTC の諸要素、アドレスバー候補キャッシュ、表現でないネットワーク関連のさまざまなもの（HSTS/HPKP, SCDHなど）もクリアする。おそらく <a
                data-link-type="biblio" href="#biblio-storage">[STORAGE]</a> でより明確になるかもしれない？<a href="#issue-0156fcab"> ↵
            </a></div>
        <div class="issue">bound tokens/IDs や HTTP 認証のクリアのプロセスは非常に曖昧。<a
                href="https://github.com/w3c/webappsec-clear-site-data/issues/2">&lt;https://github.com/w3c/webappsec-clear-site-data/issues/2></a><a
                href="#issue-a4a76269"> ↵ </a></div>
        <div class="issue">Moar?<a href="#issue-b346d876"> ↵ </a></div>
    </div>
    <aside class="dfn-panel" data-for="http-headerdef-clear-site-data">
        <b><a href="#http-headerdef-clear-site-data">#http-headerdef-clear-site-data</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-http-headerdef-clear-site-data">1. Introduction</a>
            <li><a href="#ref-for-http-headerdef-clear-site-data①">1.1.1. Signing Out</a>
            <li><a href="#ref-for-http-headerdef-clear-site-data②">1.1.2. Targeted Clearing</a>
            <li><a href="#ref-for-http-headerdef-clear-site-data③">1.1.3. Keep Critical Cookies</a>
            <li><a href="#ref-for-http-headerdef-clear-site-data④">1.1.4. Kill Switch</a>
            <li><a href="#ref-for-http-headerdef-clear-site-data⑤">3.1.
                    The Clear-Site-Data HTTP Response Header Field </a> <a
                    href="#ref-for-http-headerdef-clear-site-data⑥">(2)</a> <a
                    href="#ref-for-http-headerdef-clear-site-data⑦">(3)</a> <a
                    href="#ref-for-http-headerdef-clear-site-data⑧">(4)</a> <a
                    href="#ref-for-http-headerdef-clear-site-data⑨">(5)</a> <a
                    href="#ref-for-http-headerdef-clear-site-data①⓪">(6)</a>
            <li><a href="#ref-for-http-headerdef-clear-site-data①①">3.2. Fetch Integration</a> <a
                    href="#ref-for-http-headerdef-clear-site-data①②">(2)</a> <a
                    href="#ref-for-http-headerdef-clear-site-data①③">(3)</a>
            <li><a href="#ref-for-http-headerdef-clear-site-data①④">6.1. Web developers control the timing.</a>
            <li><a href="#ref-for-http-headerdef-clear-site-data①⑤">6.2. Remnants of data on disk.</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="grammardef-cache">
        <b><a href="#grammardef-cache">#grammardef-cache</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-grammardef-cache">1.1.1. Signing Out</a>
            <li><a href="#ref-for-grammardef-cache①">1.1.2. Targeted Clearing</a>
            <li><a href="#ref-for-grammardef-cache②">1.1.3. Keep Critical Cookies</a>
            <li><a href="#ref-for-grammardef-cache③">1.1.4. Kill Switch</a>
            <li><a href="#ref-for-grammardef-cache④">3.1.
                    The Clear-Site-Data HTTP Response Header Field </a>
            <li><a href="#ref-for-grammardef-cache⑤">4.1. Parsing</a> <a href="#ref-for-grammardef-cache⑥">(2)</a>
            <li><a href="#ref-for-grammardef-cache⑦">4.2.
                    Clear data for response </a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="grammardef-cookies">
        <b><a href="#grammardef-cookies">#grammardef-cookies</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-grammardef-cookies">1.1.1. Signing Out</a>
            <li><a href="#ref-for-grammardef-cookies①">1.1.2. Targeted Clearing</a>
            <li><a href="#ref-for-grammardef-cookies②">1.1.3. Keep Critical Cookies</a>
            <li><a href="#ref-for-grammardef-cookies③">1.1.4. Kill Switch</a>
            <li><a href="#ref-for-grammardef-cookies④">3.1.
                    The Clear-Site-Data HTTP Response Header Field </a> <a href="#ref-for-grammardef-cookies⑤">(2)</a>
            <li><a href="#ref-for-grammardef-cookies⑥">4.1. Parsing</a> <a href="#ref-for-grammardef-cookies⑦">(2)</a>
            <li><a href="#ref-for-grammardef-cookies⑧">4.2.
                    Clear data for response </a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="grammardef-storage">
        <b><a href="#grammardef-storage">#grammardef-storage</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-grammardef-storage">1.1.1. Signing Out</a>
            <li><a href="#ref-for-grammardef-storage①">1.1.2. Targeted Clearing</a>
            <li><a href="#ref-for-grammardef-storage②">1.1.3. Keep Critical Cookies</a>
            <li><a href="#ref-for-grammardef-storage③">1.1.4. Kill Switch</a>
            <li><a href="#ref-for-grammardef-storage④">3.1.
                    The Clear-Site-Data HTTP Response Header Field </a>
            <li><a href="#ref-for-grammardef-storage⑤">4.1. Parsing</a> <a href="#ref-for-grammardef-storage⑥">(2)</a>
            <li><a href="#ref-for-grammardef-storage⑦">4.2.
                    Clear data for response </a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="grammardef-executioncontexts">
        <b><a href="#grammardef-executioncontexts">#grammardef-executioncontexts</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-grammardef-executioncontexts">1.1.1. Signing Out</a>
            <li><a href="#ref-for-grammardef-executioncontexts①">1.1.2. Targeted Clearing</a>
            <li><a href="#ref-for-grammardef-executioncontexts②">1.1.3. Keep Critical Cookies</a>
            <li><a href="#ref-for-grammardef-executioncontexts③">1.1.4. Kill Switch</a>
            <li><a href="#ref-for-grammardef-executioncontexts④">3.1.
                    The Clear-Site-Data HTTP Response Header Field </a>
            <li><a href="#ref-for-grammardef-executioncontexts⑤">4.1. Parsing</a> <a
                    href="#ref-for-grammardef-executioncontexts⑥">(2)</a>
            <li><a href="#ref-for-grammardef-executioncontexts⑦">4.2.
                    Clear data for response </a>
            <li><a href="#ref-for-grammardef-executioncontexts⑧">4.2.1.
                    Prepare to clear origin’s data </a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="grammardef-">
        <b><a href="#grammardef-">#grammardef-</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-grammardef-">3.1.
                    The Clear-Site-Data HTTP Response Header Field </a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="abstract-opdef-parse-responses-clear-site-data-header">
        <b><a
                href="#abstract-opdef-parse-responses-clear-site-data-header">#abstract-opdef-parse-responses-clear-site-data-header</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-abstract-opdef-parse-responses-clear-site-data-header">4.2.
                    Clear data for response </a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="abstract-opdef-prepare-to-clear-origins-data">
        <b><a
                href="#abstract-opdef-prepare-to-clear-origins-data">#abstract-opdef-prepare-to-clear-origins-data</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-abstract-opdef-prepare-to-clear-origins-data">4.2.
                    Clear data for response </a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="abstract-opdef-reload-browsing-contexts">
        <b><a
                href="#abstract-opdef-reload-browsing-contexts">#abstract-opdef-reload-browsing-contexts</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-abstract-opdef-reload-browsing-contexts">4.2.
                    Clear data for response </a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="abstract-opdef-clear-cache-for-origin">
        <b><a href="#abstract-opdef-clear-cache-for-origin">#abstract-opdef-clear-cache-for-origin</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-abstract-opdef-clear-cache-for-origin">4.2.
                    Clear data for response </a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="abstract-opdef-clear-cookies-for-origin">
        <b><a
                href="#abstract-opdef-clear-cookies-for-origin">#abstract-opdef-clear-cookies-for-origin</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-abstract-opdef-clear-cookies-for-origin">4.2.
                    Clear data for response </a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="abstract-opdef-clear-dom-accessible-storage-for-origin">
        <b><a
                href="#abstract-opdef-clear-dom-accessible-storage-for-origin">#abstract-opdef-clear-dom-accessible-storage-for-origin</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-abstract-opdef-clear-dom-accessible-storage-for-origin">4.2.
                    Clear data for response </a>
        </ul>
    </aside>
    <script>/* script-dfn-panel */

        document.body.addEventListener("click", function (e) {
            var queryAll = function (sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while (el.parentElement) {
                if (el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if (el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if (el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if (target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function (el) {
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if (target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if (dfnPanel) {
                    console.log(dfnPanel);
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if (panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if (target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
    </script>
    <script src="https://htmlspecs.com/dropdown.js"></script>