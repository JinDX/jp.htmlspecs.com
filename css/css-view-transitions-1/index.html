<!doctype html>
<html lang="ja-JP">

<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>CSSビュー遷移モジュール レベル1</title>
  <meta content="CRD" name="w3c-status">
  <meta content="Bikeshed version 584813e63, updated Fri Mar 8 15:59:30 2024 -0800" name="generator">
  <link href="https://www.w3.org/TR/css-view-transitions-1/" rel="canonical">
  <meta content="54feb3132434137b732feddc0bee99ae093bbeeb" name="revision">
  <meta content="dark light" name="color-scheme">
  <style>
    spec-scaler {
      display: block;
    }

    spec-scaler:not(:defined)>* {
      display: none;
    }

    .spec-slides {
      width: 100%;
      height: 100%;
      border: none;
      display: block;
    }

    .spec-slide-controls {
      text-align: center;
    }

    .main-example-video {
      display: block;
      width: 100%;
      max-width: 702px;
      height: auto;
      margin: 0 auto;
    }

    /* Put nice boxes around each algorithm. */
    [data-algorithm]:not(.heading) {
      padding: .5em;
      border: thin solid #ddd;
      border-radius: .5em;
      margin: .5em calc(-0.5em - 1px);
    }

    [data-algorithm]:not(.heading)> :first-child {
      margin-top: 0;
    }

    [data-algorithm]:not(.heading)> :last-child {
      margin-bottom: 0;
    }

    [data-algorithm] [data-algorithm] {
      margin: 1em 0;
    }

    pre {
      tab-size: 2;
    }

    .domintro {
      position: relative;
      color: green;
      background: #DDFFDD;
      margin: 2.5em 0 2em 0;
      padding: 1.5em 1em 0.5em 2em;
    }

    .domintro dt,
    .domintro dt * {
      color: black;
      font-size: inherit;
    }

    .domintro dd {
      margin: 0.5em 0 1em 2em;
      padding: 0;
    }

    .domintro dd p {
      margin: 0.5em 0;
    }

    .domintro::before {
      content: 'For web developers (non-normative)';
      background: green;
      color: white;
      padding: 0.15em 0.25em;
      font-style: normal;
      position: absolute;
      top: -0.8em;
      left: -0.8em;
    }
  </style>
  <style>
    /* Boilerplate: style-autolinks */
    .css.css,
    .property.property,
    .descriptor.descriptor {
      color: var(--a-normal-text);
      font-size: inherit;
      font-family: inherit;
    }

    .css::before,
    .property::before,
    .descriptor::before {
      content: "‘";
    }

    .css::after,
    .property::after,
    .descriptor::after {
      content: "’";
    }

    .property,
    .descriptor {
      /* Don't wrap property and descriptor names */
      white-space: nowrap;
    }

    .type {
      /* CSS value <type> */
      font-style: italic;
    }

    pre .property::before,
    pre .property::after {
      content: "";
    }

    [data-link-type="property"]::before,
    [data-link-type="propdesc"]::before,
    [data-link-type="descriptor"]::before,
    [data-link-type="value"]::before,
    [data-link-type="function"]::before,
    [data-link-type="at-rule"]::before,
    [data-link-type="selector"]::before,
    [data-link-type="maybe"]::before {
      content: "‘";
    }

    [data-link-type="property"]::after,
    [data-link-type="propdesc"]::after,
    [data-link-type="descriptor"]::after,
    [data-link-type="value"]::after,
    [data-link-type="function"]::after,
    [data-link-type="at-rule"]::after,
    [data-link-type="selector"]::after,
    [data-link-type="maybe"]::after {
      content: "’";
    }

    [data-link-type].production::before,
    [data-link-type].production::after,
    .prod [data-link-type]::before,
    .prod [data-link-type]::after {
      content: "";
    }

    [data-link-type=element],
    [data-link-type=element-attr] {
      font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
      font-size: .9em;
    }

    [data-link-type=element]::before {
      content: "<"
    }

    [data-link-type=element]::after {
      content: ">"
    }

    [data-link-type=biblio] {
      white-space: pre;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
      }
    }
  </style>
  <style>
    /* Boilerplate: style-colors */
    /* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
    :root {
      color-scheme: light dark;

      --text: black;
      --bg: white;

      --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

      --logo-bg: #1a5e9a;
      --logo-active-bg: #c00;
      --logo-text: white;

      --tocnav-normal-text: #707070;
      --tocnav-normal-bg: var(--bg);
      --tocnav-hover-text: var(--tocnav-normal-text);
      --tocnav-hover-bg: #f8f8f8;
      --tocnav-active-text: #c00;
      --tocnav-active-bg: var(--tocnav-normal-bg);

      --tocsidebar-text: var(--text);
      --tocsidebar-bg: #f7f8f9;
      --tocsidebar-shadow: rgba(0, 0, 0, .1);
      --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

      --toclink-text: var(--text);
      --toclink-underline: #3980b5;
      --toclink-visited-text: var(--toclink-text);
      --toclink-visited-underline: #054572;

      --heading-text: #005a9c;

      --hr-text: var(--text);

      --algo-border: #def;

      --del-text: red;
      --del-bg: transparent;
      --ins-text: #080;
      --ins-bg: transparent;

      --a-normal-text: #034575;
      --a-normal-underline: #bbb;
      --a-visited-text: var(--a-normal-text);
      --a-visited-underline: #707070;
      --a-hover-bg: rgba(75%, 75%, 75%, .25);
      --a-active-text: #c00;
      --a-active-underline: #c00;

      --blockquote-border: silver;
      --blockquote-bg: transparent;
      --blockquote-text: currentcolor;

      --issue-border: #e05252;
      --issue-bg: #fbe9e9;
      --issue-text: var(--text);
      --issueheading-text: #831616;

      --example-border: #e0cb52;
      --example-bg: #fcfaee;
      --example-text: var(--text);
      --exampleheading-text: #574b0f;

      --note-border: #52e052;
      --note-bg: #e9fbe9;
      --note-text: var(--text);
      --noteheading-text: hsl(120, 70%, 30%);
      --notesummary-underline: silver;

      --assertion-border: #aaa;
      --assertion-bg: #eee;
      --assertion-text: black;

      --advisement-border: orange;
      --advisement-bg: #fec;
      --advisement-text: var(--text);
      --advisementheading-text: #b35f00;

      --warning-border: red;
      --warning-bg: hsla(40, 100%, 50%, 0.95);
      --warning-text: var(--text);

      --amendment-border: #330099;
      --amendment-bg: #F5F0FF;
      --amendment-text: var(--text);
      --amendmentheading-text: #220066;

      --def-border: #8ccbf2;
      --def-bg: #def;
      --def-text: var(--text);
      --defrow-border: #bbd7e9;

      --datacell-border: silver;

      --indexinfo-text: #707070;

      --indextable-hover-text: black;
      --indextable-hover-bg: #f7f8f9;

      --outdatedspec-bg: rgba(0, 0, 0, .5);
      --outdatedspec-text: black;
      --outdated-bg: maroon;
      --outdated-text: white;
      --outdated-shadow: red;

      --editedrec-bg: darkorange;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255, 255, 255, .1);
        --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40, 100%, 20%, 0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
      }

      /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
      img {
        background: white;
      }
    }
  </style>
  <style>
    /* Boilerplate: style-counters */
    body {
      counter-reset: example figure issue;
    }

    .issue {
      counter-increment: issue;
    }

    .issue:not(.no-marker)::before {
      content: "Issue " counter(issue);
    }

    .example {
      counter-increment: example;
    }

    .example:not(.no-marker)::before {
      content: "Example " counter(example);
    }

    .invalid.example:not(.no-marker)::before,
    .illegal.example:not(.no-marker)::before {
      content: "Invalid Example" counter(example);
    }

    figcaption {
      counter-increment: figure;
    }

    figcaption:not(.no-marker)::before {
      content: "Figure " counter(figure) " ";
    }
  </style>
  <style>
    /* Boilerplate: style-dfn-panel */
    :root {
      --dfnpanel-bg: #ddd;
      --dfnpanel-text: var(--text);
      --dfnpanel-target-bg: #ffc;
      --dfnpanel-target-outline: orange;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
      }
    }

    .dfn-panel {
      position: absolute;
      z-index: 35;
      width: 20em;
      width: 300px;
      height: auto;
      max-height: 500px;
      overflow: auto;
      padding: 0.5em 0.75em;
      font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
      background: var(--dfnpanel-bg);
      color: var(--dfnpanel-text);
      border: outset 0.2em;
      white-space: normal;
      /* in case it's moved into a pre */
    }

    .dfn-panel:not(.on) {
      display: none;
    }

    .dfn-panel * {
      margin: 0;
      padding: 0;
      text-indent: 0;
    }

    .dfn-panel>b {
      display: block;
    }

    .dfn-panel a {
      color: var(--dfnpanel-text);
    }

    .dfn-panel a:not(:hover) {
      text-decoration: none !important;
      border-bottom: none !important;
    }

    .dfn-panel a:focus {
      outline: 5px auto Highlight;
      outline: 5px auto -webkit-focus-ring-color;
    }

    .dfn-panel>b+b {
      margin-top: 0.25em;
    }

    .dfn-panel ul {
      padding: 0 0 0 1em;
      list-style: none;
    }

    .dfn-panel li a {
      max-width: calc(300px - 1.5em - 1em);
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .dfn-panel.activated {
      display: inline-block;
      position: fixed;
      left: 8px;
      bottom: 2em;
      margin: 0 auto;
      max-width: calc(100vw - 1.5em - .4em - .5em);
      max-height: 30vh;
      transition: left 1s ease-out, bottom 1s ease-out;
    }

    .dfn-panel .link-item:hover {
      text-decoration: underline;
    }

    .dfn-panel .link-item .copy-icon {
      opacity: 0;
    }

    .dfn-panel .link-item:hover .copy-icon,
    .dfn-panel .link-item .copy-icon:focus {
      opacity: 1;
    }

    .dfn-panel .copy-icon {
      display: inline-block;
      margin-right: 0.5em;
      width: 0.85em;
      height: 1em;
      border-radius: 3px;
      background-color: #ccc;
      cursor: pointer;
    }

    .dfn-panel .copy-icon .icon {
      width: 100%;
      height: 100%;
      background-color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
    }

    .dfn-panel .copy-icon .icon::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 1px solid black;
      background-color: #ccc;
      opacity: 0.25;
      transform: translate(3px, -3px);
    }

    .dfn-panel .copy-icon:active .icon::before {
      opacity: 1;
    }

    .dfn-paneled[role="button"] {
      cursor: help;
    }

    .highlighted {
      animation: target-fade 3s;
    }

    @keyframes target-fade {
      from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
      }

      to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
      }
    }
  </style>
  <style>
    /* Boilerplate: style-idl-highlighting */
    pre.idl.highlight {
      background: var(--borderedblock-bg, var(--def-bg));
    }
  </style>
  <style>
    /* Boilerplate: style-issues */
    a[href].issue-return {
      float: right;
      float: inline-end;
      color: var(--issueheading-text);
      font-weight: bold;
      text-decoration: none;
    }
  </style>
  <style>
    /* Boilerplate: style-md-lists */
    /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
    [data-md]> :first-child {
      margin-top: 0;
    }

    [data-md]> :last-child {
      margin-bottom: 0;
    }
  </style>
  <style>
    /* Boilerplate: style-ref-hints */
    :root {
      --ref-hint-bg: #ddd;
      --ref-hint-text: var(--text);
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
      }
    }

    .ref-hint {
      display: inline-block;
      position: absolute;
      z-index: 35;
      width: 20em;
      width: 300px;
      height: auto;
      max-height: 500px;
      overflow: auto;
      padding: 0.5em 0.5em;
      font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
      background: var(--ref-hint-bg);
      color: var(--ref-hint-text);
      border: outset 0.2em;
      white-space: normal;
      /* in case it's moved into a pre */
    }

    .ref-hint * {
      margin: 0;
      padding: 0;
      text-indent: 0;
    }

    .ref-hint ul {
      padding: 0 0 0 1em;
      list-style: none;
    }
  </style>
  <style>
    /* Boilerplate: style-selflinks */
    :root {
      --selflink-text: white;
      --selflink-bg: gray;
      --selflink-hover-text: black;
    }

    .heading,
    .issue,
    .note,
    .example,
    li,
    dt {
      position: relative;
    }

    a.self-link {
      position: absolute;
      top: 0;
      left: calc(-1 * (3.5rem - 26px));
      width: calc(3.5rem - 26px);
      height: 2em;
      text-align: center;
      border: none;
      transition: opacity .2s;
      opacity: .5;
    }

    a.self-link:hover {
      opacity: 1;
    }

    .heading>a.self-link {
      font-size: 83%;
    }

    .example>a.self-link,
    .note>a.self-link,
    .issue>a.self-link {
      /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
      left: auto;
      right: 0;
    }

    li>a.self-link {
      left: calc(-1 * (3.5rem - 26px) - 2em);
    }

    dfn>a.self-link {
      top: auto;
      left: auto;
      opacity: 0;
      width: 1.5em;
      height: 1.5em;
      background: var(--selflink-bg);
      color: var(--selflink-text);
      font-style: normal;
      transition: opacity .2s, background-color .2s, color .2s;
    }

    dfn:hover>a.self-link {
      opacity: 1;
    }

    dfn>a.self-link:hover {
      color: var(--selflink-hover-text);
    }

    a.self-link::before {
      content: "¶";
    }

    .heading>a.self-link::before {
      content: "§";
    }

    dfn>a.self-link::before {
      content: "#";
    }
  </style>
  <style>
    /* Boilerplate: style-syntax-highlighting */
    code.highlight {
      padding: .1em;
      border-radius: .3em;
    }

    pre.highlight,
    pre>code.highlight {
      display: block;
      padding: 1em;
      margin: .5em 0;
      overflow: auto;
      border-radius: 0;
    }

    .highlight:not(.idl) {
      background: rgba(0, 0, 0, .03);
    }

    c-[a] {
      color: #990055
    }

    /* Keyword.Declaration */
    c-[b] {
      color: #990055
    }

    /* Keyword.Type */
    c-[c] {
      color: #708090
    }

    /* Comment */
    c-[d] {
      color: #708090
    }

    /* Comment.Multiline */
    c-[e] {
      color: #0077aa
    }

    /* Name.Attribute */
    c-[f] {
      color: #669900
    }

    /* Name.Tag */
    c-[g] {
      color: #222222
    }

    /* Name.Variable */
    c-[k] {
      color: #990055
    }

    /* Keyword */
    c-[l] {
      color: #000000
    }

    /* Literal */
    c-[m] {
      color: #000000
    }

    /* Literal.Number */
    c-[n] {
      color: #0077aa
    }

    /* Name */
    c-[o] {
      color: #999999
    }

    /* Operator */
    c-[p] {
      color: #999999
    }

    /* Punctuation */
    c-[s] {
      color: #a67f59
    }

    /* Literal.String */
    c-[t] {
      color: #a67f59
    }

    /* Literal.String.Single */
    c-[u] {
      color: #a67f59
    }

    /* Literal.String.Double */
    c-[cp] {
      color: #708090
    }

    /* Comment.Preproc */
    c-[c1] {
      color: #708090
    }

    /* Comment.Single */
    c-[cs] {
      color: #708090
    }

    /* Comment.Special */
    c-[kc] {
      color: #990055
    }

    /* Keyword.Constant */
    c-[kn] {
      color: #990055
    }

    /* Keyword.Namespace */
    c-[kp] {
      color: #990055
    }

    /* Keyword.Pseudo */
    c-[kr] {
      color: #990055
    }

    /* Keyword.Reserved */
    c-[ld] {
      color: #000000
    }

    /* Literal.Date */
    c-[nc] {
      color: #0077aa
    }

    /* Name.Class */
    c-[no] {
      color: #0077aa
    }

    /* Name.Constant */
    c-[nd] {
      color: #0077aa
    }

    /* Name.Decorator */
    c-[ni] {
      color: #0077aa
    }

    /* Name.Entity */
    c-[ne] {
      color: #0077aa
    }

    /* Name.Exception */
    c-[nf] {
      color: #0077aa
    }

    /* Name.Function */
    c-[nl] {
      color: #0077aa
    }

    /* Name.Label */
    c-[nn] {
      color: #0077aa
    }

    /* Name.Namespace */
    c-[py] {
      color: #0077aa
    }

    /* Name.Property */
    c-[ow] {
      color: #999999
    }

    /* Operator.Word */
    c-[mb] {
      color: #000000
    }

    /* Literal.Number.Bin */
    c-[mf] {
      color: #000000
    }

    /* Literal.Number.Float */
    c-[mh] {
      color: #000000
    }

    /* Literal.Number.Hex */
    c-[mi] {
      color: #000000
    }

    /* Literal.Number.Integer */
    c-[mo] {
      color: #000000
    }

    /* Literal.Number.Oct */
    c-[sb] {
      color: #a67f59
    }

    /* Literal.String.Backtick */
    c-[sc] {
      color: #a67f59
    }

    /* Literal.String.Char */
    c-[sd] {
      color: #a67f59
    }

    /* Literal.String.Doc */
    c-[se] {
      color: #a67f59
    }

    /* Literal.String.Escape */
    c-[sh] {
      color: #a67f59
    }

    /* Literal.String.Heredoc */
    c-[si] {
      color: #a67f59
    }

    /* Literal.String.Interpol */
    c-[sx] {
      color: #a67f59
    }

    /* Literal.String.Other */
    c-[sr] {
      color: #a67f59
    }

    /* Literal.String.Regex */
    c-[ss] {
      color: #a67f59
    }

    /* Literal.String.Symbol */
    c-[vc] {
      color: #0077aa
    }

    /* Name.Variable.Class */
    c-[vg] {
      color: #0077aa
    }

    /* Name.Variable.Global */
    c-[vi] {
      color: #0077aa
    }

    /* Name.Variable.Instance */
    c-[il] {
      color: #000000
    }

    /* Literal.Number.Integer.Long */

    @media (prefers-color-scheme: dark) {
      .highlight:not(.idl) {
        background: rgba(255, 255, 255, .05);
      }

      c-[a] {
        color: #d33682
      }

      /* Keyword.Declaration */
      c-[b] {
        color: #d33682
      }

      /* Keyword.Type */
      c-[c] {
        color: #2aa198
      }

      /* Comment */
      c-[d] {
        color: #2aa198
      }

      /* Comment.Multiline */
      c-[e] {
        color: #268bd2
      }

      /* Name.Attribute */
      c-[f] {
        color: #b58900
      }

      /* Name.Tag */
      c-[g] {
        color: #cb4b16
      }

      /* Name.Variable */
      c-[k] {
        color: #d33682
      }

      /* Keyword */
      c-[l] {
        color: #657b83
      }

      /* Literal */
      c-[m] {
        color: #657b83
      }

      /* Literal.Number */
      c-[n] {
        color: #268bd2
      }

      /* Name */
      c-[o] {
        color: #657b83
      }

      /* Operator */
      c-[p] {
        color: #657b83
      }

      /* Punctuation */
      c-[s] {
        color: #6c71c4
      }

      /* Literal.String */
      c-[t] {
        color: #6c71c4
      }

      /* Literal.String.Single */
      c-[u] {
        color: #6c71c4
      }

      /* Literal.String.Double */
      c-[ch] {
        color: #2aa198
      }

      /* Comment.Hashbang */
      c-[cp] {
        color: #2aa198
      }

      /* Comment.Preproc */
      c-[cpf] {
        color: #2aa198
      }

      /* Comment.PreprocFile */
      c-[c1] {
        color: #2aa198
      }

      /* Comment.Single */
      c-[cs] {
        color: #2aa198
      }

      /* Comment.Special */
      c-[kc] {
        color: #d33682
      }

      /* Keyword.Constant */
      c-[kn] {
        color: #d33682
      }

      /* Keyword.Namespace */
      c-[kp] {
        color: #d33682
      }

      /* Keyword.Pseudo */
      c-[kr] {
        color: #d33682
      }

      /* Keyword.Reserved */
      c-[ld] {
        color: #657b83
      }

      /* Literal.Date */
      c-[nc] {
        color: #268bd2
      }

      /* Name.Class */
      c-[no] {
        color: #268bd2
      }

      /* Name.Constant */
      c-[nd] {
        color: #268bd2
      }

      /* Name.Decorator */
      c-[ni] {
        color: #268bd2
      }

      /* Name.Entity */
      c-[ne] {
        color: #268bd2
      }

      /* Name.Exception */
      c-[nf] {
        color: #268bd2
      }

      /* Name.Function */
      c-[nl] {
        color: #268bd2
      }

      /* Name.Label */
      c-[nn] {
        color: #268bd2
      }

      /* Name.Namespace */
      c-[py] {
        color: #268bd2
      }

      /* Name.Property */
      c-[ow] {
        color: #657b83
      }

      /* Operator.Word */
      c-[mb] {
        color: #657b83
      }

      /* Literal.Number.Bin */
      c-[mf] {
        color: #657b83
      }

      /* Literal.Number.Float */
      c-[mh] {
        color: #657b83
      }

      /* Literal.Number.Hex */
      c-[mi] {
        color: #657b83
      }

      /* Literal.Number.Integer */
      c-[mo] {
        color: #657b83
      }

      /* Literal.Number.Oct */
      c-[sa] {
        color: #6c71c4
      }

      /* Literal.String.Affix */
      c-[sb] {
        color: #6c71c4
      }

      /* Literal.String.Backtick */
      c-[sc] {
        color: #6c71c4
      }

      /* Literal.String.Char */
      c-[dl] {
        color: #6c71c4
      }

      /* Literal.String.Delimiter */
      c-[sd] {
        color: #6c71c4
      }

      /* Literal.String.Doc */
      c-[se] {
        color: #6c71c4
      }

      /* Literal.String.Escape */
      c-[sh] {
        color: #6c71c4
      }

      /* Literal.String.Heredoc */
      c-[si] {
        color: #6c71c4
      }

      /* Literal.String.Interpol */
      c-[sx] {
        color: #6c71c4
      }

      /* Literal.String.Other */
      c-[sr] {
        color: #6c71c4
      }

      /* Literal.String.Regex */
      c-[ss] {
        color: #6c71c4
      }

      /* Literal.String.Symbol */
      c-[fm] {
        color: #268bd2
      }

      /* Name.Function.Magic */
      c-[vc] {
        color: #cb4b16
      }

      /* Name.Variable.Class */
      c-[vg] {
        color: #cb4b16
      }

      /* Name.Variable.Global */
      c-[vi] {
        color: #cb4b16
      }

      /* Name.Variable.Instance */
      c-[vm] {
        color: #cb4b16
      }

      /* Name.Variable.Magic */
      c-[il] {
        color: #657b83
      }

      /* Literal.Number.Integer.Long */
    }
  </style>
  <style>
    /* Boilerplate: style-var-click-highlighting */
    /*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)
*/
    [data-algorithm] var {
      cursor: pointer;
    }

    var[data-var-color="0"] {
      background-color: #F4D200;
      box-shadow: 0 0 0 2px #F4D200;
    }

    var[data-var-color="1"] {
      background-color: #FF87A2;
      box-shadow: 0 0 0 2px #FF87A2;
    }

    var[data-var-color="2"] {
      background-color: #96E885;
      box-shadow: 0 0 0 2px #96E885;
    }

    var[data-var-color="3"] {
      background-color: #3EEED2;
      box-shadow: 0 0 0 2px #3EEED2;
    }

    var[data-var-color="4"] {
      background-color: #EACFB6;
      box-shadow: 0 0 0 2px #EACFB6;
    }

    var[data-var-color="5"] {
      background-color: #82DDFF;
      box-shadow: 0 0 0 2px #82DDFF;
    }

    var[data-var-color="6"] {
      background-color: #FFBCF2;
      box-shadow: 0 0 0 2px #FFBCF2;
    }
  </style>
  <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-CRD" rel="stylesheet">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet"
    type="text/css">

<body class="h-entry">
  <div class="head">
    <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
          src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
    <h1 class="p-name no-ref" id="title">CSSビュー遷移モジュール レベル1</h1>
    <p id="w3c-state"><a href="https://www.w3.org/standards/types#CRD">W3C 候補勧告ドラフト</a>, <time class="dt-updated"
        datetime="2024-03-28">2024年3月28日</time></p>
    <details open>
      <summary>この文書の詳細</summary>
      <div data-fill-with="spec-metadata">
        <dl>
          <dt>このバージョン:
          <dd><a class="u-url"
              href="https://www.w3.org/TR/2024/CRD-css-view-transitions-1-20240328/">https://www.w3.org/TR/2024/CRD-css-view-transitions-1-20240328/</a>
          <dt>最新公開バージョン:
          <dd><a href="https://www.w3.org/TR/css-view-transitions-1/">https://www.w3.org/TR/css-view-transitions-1/</a>
          <dt>編集者ドラフト:
          <dd><a
              href="https://drafts.csswg.org/css-view-transitions-1/">https://drafts.csswg.org/css-view-transitions-1/</a>
          <dt>履歴:
          <dd><a class="u-url"
              href="https://www.w3.org/standards/history/css-view-transitions-1/">https://www.w3.org/standards/history/css-view-transitions-1/</a>
          <dt>実装レポート:
          <dd><a
              href="https://wpt.fyi/results/css/css-view-transitions">https://wpt.fyi/results/css/css-view-transitions</a>
          <dt>フィードバック:
          <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-view-transitions-1">CSSWG イシューレポジトリ</a>
          <dt class="editor">編集者:
          <dd class="editor p-author h-card vcard" data-editor-id="42199"><a class="p-name fn u-url url"
              href="http://xanthir.com/contact/">Tab Atkins-Bittner</a> (<span class="p-org org">Google</span>)
          <dd class="editor p-author h-card vcard" data-editor-id="76394"><span class="p-name fn">Jake Archibald</span>
            (<span class="p-org org">Google</span>)
          <dd class="editor p-author h-card vcard" data-editor-id="122787"><span class="p-name fn">Khushal Sagar</span>
            (<span class="p-org org">Google</span>)
          <dt>この仕様への編集提案:
          <dd><a href="https://github.com/w3c/csswg-drafts/blob/main/css-view-transitions-1/Overview.bs">GitHub
              エディター</a>
        </dl>
      </div>
    </details>
    <div data-fill-with="warning"></div>
    <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> ©
      2024 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr
        title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a
        href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a
        href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a
        href="https://www.w3.org/copyright/software-license/" rel="license"
        title="W3C Software and Document License">permissive document license</a> rules apply. </p>
    <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
    <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">概要</span></h2>
    <p>このモジュールは、View Transition APIと、それに関連するプロパティや疑似要素を定義します。これにより、開発者はドキュメントの状態変化を表現するアニメーション付きのビジュアル遷移を作成できます。</p>
    <a href="https://www.w3.org/TR/CSS/">CSS</a>は、構造化文書（HTMLやXMLなど）の画面表示、印刷などのレンダリングを記述する言語です。
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">この文書のステータス</span></h2>
  <div data-fill-with="status">
    <p><em>このセクションは、公開時点での本書のステータスについて説明します。
        現在のW3C出版物の一覧や本技術レポートの最新改訂版は、<a href="https://www.w3.org/TR/">W3C技術レポートインデックス
          https://www.w3.org/TR/</a>で確認できます。</em></p>
    <p>この文書は<a href="https://www.w3.org/groups/wg/css">CSS作業部会</a>によって、<strong>候補勧告ドラフト</strong>として<a
        href="https://www.w3.org/2023/Process-20231103/#recs-and-notes">勧告トラック</a>に従い公開されました。
      候補勧告として公開されたことは、<abbr title="World Wide Web Consortium">W3C</abbr>およびそのメンバーによる承認を意味するものではありません。
      候補勧告ドラフトは、前回の候補勧告から作業部会が次回の候補勧告スナップショットに含める予定の変更を統合したものです。</p>
    <p>この文書はドラフトであり、随時更新、置換、または他の文書によって廃止される可能性があります。
      この文書を進行中の作業以外として引用することは適切ではありません。</p>
    <p>フィードバックは、<a
        href="https://github.com/w3c/csswg-drafts/issues">GitHubのissueに投稿</a>（推奨）、タイトルに仕様コード「css-view-transitions」を含めてください（例:
      “[css-view-transitions] <i>…コメントの概要…</i>”）。
      すべてのissueおよびコメントは<a href="https://lists.w3.org/Archives/Public/public-css-archive/">アーカイブ</a>されています。
      または、<a href="https://lists.w3.org/Archives/Public/www-style/">アーカイブ済み</a>の公開メーリングリスト<a
        href="mailto:www-style@w3.org?Subject=%5Bcss-view-transitions%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>に送信することもできます。
    </p>
    <p>この文書は、<a href="https://www.w3.org/2023/Process-20231103/" id="w3c_process_revision">2023年11月3日
        W3Cプロセス文書</a>によって管理されています。</p>
    <p>この文書は、<a href="https://www.w3.org/Consortium/Patent-Policy-20200915/">W3C特許ポリシー</a>の下で運営されるグループによって作成されました。
      W3Cは、グループの成果物に関連して行われた<a href="https://www.w3.org/groups/wg/css/ipr" rel="disclosure">特許開示の公開リスト</a>を管理しています。
      そのページには特許開示の手順も記載されています。
      個人が特許の存在を認識し、その特許が<a
        href="https://www.w3.org/Consortium/Patent-Policy-20200915/#def-essential">必須クレーム</a>を含むと考える場合、<a
        href="https://www.w3.org/Consortium/Patent-Policy-20200915/#sec-Disclosure">W3C特許ポリシー第6節</a>に従って情報を開示しなければなりません。
    </p>
    <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
    <h2 class="no-num no-toc no-ref" id="contents">目次</h2>
    <ol class="toc" role="directory">
      <li>
        <a href="#intro"><span class="secno">1</span> <span class="content">はじめに</span></a>
        <ol class="toc">
          <li><a href="#separating-transitions"><span class="secno">1.1</span> <span
                class="content">ビジュアル遷移とDOM更新の分離</span></a>
          <li><a href="#customizing"><span class="secno">1.2</span> <span class="content">ビュー遷移のカスタマイズ</span></a>
          <li><a href="#lifecycle"><span class="secno">1.3</span> <span class="content">ビュー遷移のライフサイクル</span></a>
          <li><a href="#transitions-as-enhancements"><span class="secno">1.4</span> <span
                class="content">拡張機能としての遷移</span></a>
          <li><a href="#rendering-model"><span class="secno">1.5</span> <span class="content">レンダリングモデル</span></a>
          <li><a href="#examples"><span class="secno">1.6</span> <span class="content">例</span></a>
        </ol>
      <li>
        <a href="#css-properties"><span class="secno">2</span> <span class="content">CSSプロパティ</span></a>
        <ol class="toc">
          <li>
            <a href="#view-transition-name-prop"><span class="secno">2.1</span> <span class="content">個別に遷移するサブツリーのタグ付け:
                <span class="property">view-transition-name</span>プロパティ</span></a>
            <ol class="toc">
              <li><a href="#named-and-transitioning"><span class="secno">2.1.1</span> <span
                    class="content">レンダリングの統合</span></a>
            </ol>
        </ol>
      <li>
        <a href="#pseudo"><span class="secno">3</span> <span class="content">疑似要素</span></a>
        <ol class="toc">
          <li><a href="#pseudo-root"><span class="secno">3.1</span> <span class="content">疑似要素ツリー</span></a>
          <li>
            <a href="#view-transition-pseudos"><span class="secno">3.2</span> <span class="content">ビュー遷移疑似要素</span></a>
            <ol class="toc">
              <li><a href="#named-view-transition-pseudo"><span class="secno">3.2.1</span> <span
                    class="content">名前付きビュー遷移疑似要素</span></a>
              <li><a href="#view-transition-pseudo"><span class="secno">3.2.2</span> <span class="content">ビュー遷移ツリーのルート:
                    <span class="css">::view-transition</span>疑似要素</span></a>
              <li><a href="#::view-transition-group"><span class="secno">3.2.3</span> <span
                    class="content">ビュー遷移名前付きサブツリーのルート: <span
                      class="css">::view-transition-group()</span>疑似要素</span></a>
              <li><a href="#::view-transition-image-pair"><span class="secno">3.2.4</span> <span
                    class="content">ビュー遷移画像ペアの分離: <span class="css">::view-transition-image-pair()</span>疑似要素</span></a>
              <li><a href="#::view-transition-old"><span class="secno">3.2.5</span> <span class="content">ビュー遷移旧状態画像:
                    <span class="css">::view-transition-old()</span>疑似要素</span></a>
              <li><a href="#::view-transition-new"><span class="secno">3.2.6</span> <span class="content">ビュー遷移新状態画像:
                    <span class="css">::view-transition-new()</span>疑似要素</span></a>
            </ol>
        </ol>
      <li>
        <a href="#view-transition-rendering"><span class="secno">4</span> <span class="content">ビュー遷移レイアウト</span></a>
        <ol class="toc">
          <li><a href="#snapshot-containing-block-concept"><span class="secno">4.1</span> <span
                class="content">スナップショット包含ブロック</span></a>
          <li><a href="#view-transition-stacking-layer"><span class="secno">4.2</span> <span
                class="content">ビュー遷移の描画順序</span></a>
        </ol>
      <li><a href="#ua-styles"><span class="secno">5</span> <span class="content">ユーザーエージェントスタイルシート</span></a>
      <li>
        <a href="#api"><span class="secno">6</span> <span class="content">API</span></a>
        <ol class="toc">
          <li>
            <a href="#additions-to-document-api"><span class="secno">6.1</span> <span class="content"><code
                  class="idl"><span>Document</span></code>への追加</span></a>
            <ol class="toc">
              <li><a href="#ViewTransition-prepare"><span class="secno">6.1.1</span> <span class="content"><code
                      class="idl"><span>startViewTransition()</span></code>メソッド手順</span></a>
            </ol>
          <li>
            <a href="#the-domtransition-interface"><span class="secno">6.2</span> <span class="content"><code
                  class="idl"><span>ViewTransition</span></code>インターフェース</span></a>
            <ol class="toc">
              <li><a href="#ViewTransition-skipTransition"><span class="secno">6.2.1</span> <span class="content"><code
                      class="idl"><span>skipTransition()</span></code>メソッド手順</span></a>
            </ol>
        </ol>
      <li>
        <a href="#algorithms"><span class="secno">7</span> <span class="content">アルゴリズム</span></a>
        <ol class="toc">
          <li>
            <a href="#concepts"><span class="secno">7.1</span> <span class="content">データ構造</span></a>
            <ol class="toc">
              <li><a href="#additions-to-document"><span class="secno">7.1.1</span> <span class="content"><code
                      class="idl"><span>Document</span></code>への追加</span></a>
              <li><a href="#elements-concept"><span class="secno">7.1.2</span> <span class="content">要素への追加</span></a>
              <li><a href="#captured-elements"><span class="secno">7.1.3</span> <span
                    class="content"><span>キャプチャされた要素</span></span></a>
            </ol>
          <li><a href="#perform-pending-transition-operations-algorithm"><span class="secno">7.2</span> <span
                class="content"><span>保留中の遷移操作の実行</span></span></a>
          <li>
            <a href="#setup-view-transition-algorithm"><span class="secno">7.3</span> <span
                class="content"><span>ビュー遷移のセットアップ</span></span></a>
            <ol class="toc">
              <li><a href="#capture-old-state-algorithm"><span class="secno">7.3.1</span> <span
                    class="content"><span>旧状態のキャプチャ</span></span></a>
              <li><a href="#capture-new-state-algorithm"><span class="secno">7.3.2</span> <span
                    class="content"><span>新状態のキャプチャ</span></span></a>
              <li><a href="#setup-transition-pseudo-elements-algorithm"><span class="secno">7.3.3</span> <span
                    class="content"><span>遷移疑似要素のセットアップ</span></span></a>
            </ol>
          <li><a href="#call-dom-update-callback-algorithm"><span class="secno">7.4</span> <span
                class="content"><span>update callback の呼び出し</span></span></a>
          <li><a href="#skip-the-view-transition-algorithm"><span class="secno">7.5</span> <span
                class="content"><span>ビュー遷移をスキップする</span></span></a>
          <li><a href="#page-visibility-change-steps"><span class="secno">7.6</span> <span
                class="content">ビュー遷移のページ可視性変更手順</span></a>
          <li>
            <a href="#capture-the-image-algorithm"><span class="secno">7.7</span> <span
                class="content"><span>画像のキャプチャ</span></span></a>
            <ol class="toc">
              <li><a href="#capture-rendering-characteristics-algorithm"><span class="secno">7.7.1</span> <span
                    class="content"><span>キャプチャレンダリング特性</span></span></a>
            </ol>
          <li><a href="#handle-transition-frame-algorithm"><span class="secno">7.8</span> <span
                class="content"><span>遷移フレームの処理</span></span></a>
          <li><a href="#style-transition-pseudo-elements-algorithm"><span class="secno">7.9</span> <span
                class="content"><span>疑似要素スタイルの更新</span></span></a>
          <li><a href="#clear-view-transition-algorithm"><span class="secno">7.10</span> <span
                class="content"><span>ビュー遷移のクリア</span></span></a>
        </ol>
      <li><a href="#priv"><span class="secno"></span> <span class="content">プライバシーに関する考慮事項</span></a>
      <li><a href="#sec"><span class="secno"></span> <span class="content">セキュリティに関する考慮事項</span></a>
      <li>
        <a href="#changes"><span class="secno"></span> <span class="content">付録A. 変更点</span></a>
        <ol class="toc">
          <li><a href="#changes-since-2022-05-30"><span class="secno"></span> <span
                class="content">2022-05-30ワーキングドラフトからの変更</span></a>
          <li><a href="#changes-since-2022-05-25"><span class="secno"></span> <span
                class="content">2022-05-25ワーキングドラフトからの変更</span></a>
          <li><a href="#changes-since-2022-11-24"><span class="secno"></span> <span
                class="content">2022-11-24ワーキングドラフトからの変更</span></a>
          <li><a href="#changes-since-2022-10-25"><span class="secno"></span> <span
                class="content">2022-10-25ワーキングドラフト（FPWD）からの変更</span></a>
        </ol>
      <li>
        <a href="#w3c-conformance"><span class="secno"></span> <span class="content">適合性</span></a>
        <ol class="toc">
          <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">文書の慣例</span></a>
          <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span class="content">適合クラス</span></a>
          <li>
            <a href="#w3c-partial"><span class="secno"></span> <span class="content">部分的な実装</span></a>
            <ol class="toc">
              <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span
                    class="content">不安定・独自機能の実装</span></a>
            </ol>
          <li><a href="#w3c-testing"><span class="secno"></span> <span class="content">非実験的実装</span></a>
          <li><a href="#w3c-cr-exit-criteria"><span class="secno"></span> <span class="content">CR移行基準</span></a>
        </ol>
      <li>
        <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
        <ol class="toc">
          <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">本仕様で定義される用語</span></a>
          <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                class="content">参照によって定義される用語</span></a>
        </ol>
      <li>
        <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
        <ol class="toc">
          <li><a href="#normative"><span class="secno"></span> <span class="content">規範参照</span></a>
          <li><a href="#informative"><span class="secno"></span> <span class="content">参考情報</span></a>
        </ol>
      <li><a href="#property-index"><span class="secno"></span> <span class="content">プロパティ索引</span></a>
      <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL索引</span></a>
    </ol>
  </nav>
  <main>
    <script async src="https://www.w3.org/TR/css-view-transitions-1/diagrams/resources/scaler.js"
      type="module"></script>
    <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span
        class="content">はじめに</span><a class="self-link" href="#intro"></a></h2>
    <p><em>このセクションは規範的ではありません。</em></p>
    <p>この仕様は、DOM APIおよび関連するCSS機能を導入し、
      開発者がアニメーション付きのビジュアル遷移
      （<dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="view-transitions">ビュー遷移</dfn>）
      を異なる<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
        id="ref-for-concept-document">ドキュメント</a>の状態間で作成できるようにします。</p>
    <h3 class="heading settled" data-level="1.1" id="separating-transitions"><span class="secno">1.1. </span><span
        class="content">ビジュアル遷移とDOM更新の分離</span><a class="self-link" href="#separating-transitions"></a></h3>
    <p>従来、2つのドキュメント状態間でビジュアル遷移を作成するには、
      両方の状態が同時にDOM内に存在する期間が必要でした。
      実際には、両方の状態を表現できる特定のDOM構造を作成することが多く、
      例えば、ある要素がコンテナ間を「移動」する場合、
      遷移期間中はその要素がどちらのコンテナにも属さない状態にする必要があり、
      どちらのコンテナや祖先要素によるクリッピングを避けるためです。</p>
    <p>このような中間状態は、純粋にビジュアル効果のためにDOM構造を損なうため、
      UXやアクセシビリティの問題を引き起こすことがよくありました。</p>
    <p><a data-link-type="dfn" href="#view-transitions" id="ref-for-view-transitions">ビュー遷移</a>は、この中間状態を回避し、
      DOMを即座に状態切り替えした後、別レイヤーでカスタマイズ可能なビジュアル遷移を行います。
      旧状態の静的キャプチャと新状態のライブキャプチャを用いて、
      これらのキャプチャは<a data-link-type="dfn" href="https://www.w3.org/TR/CSS21/selector.html#x22"
        id="ref-for-x22">疑似要素</a>のツリー（<a href="#view-transition-pseudos">§ 3.2 ビュー遷移疑似要素</a>で詳細）として表現され、
      旧ビジュアル状態と新状態が共存することで、
      サイズや位置のアニメーション中にクロスフェードなどの効果を実現できます。</p>
    <h3 class="heading settled" data-level="1.2" id="customizing"><span class="secno">1.2. </span><span
        class="content">ビュー遷移のカスタマイズ</span><a class="self-link" href="#customizing"></a></h3>
    <p>デフォルトでは、
      <code>document.<code class="idl"><a data-link-type="idl" href="#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition">startViewTransition()</a></code></code>
      は、2つのDOM状態間でページ全体のクロスフェードを行う
      <a data-link-type="dfn" href="#view-transitions" id="ref-for-view-transitions①">ビュー遷移</a>
      を作成します。
      開発者は、<a class="property css" data-link-type="property" href="#propdef-view-transition-name"
        id="ref-for-propdef-view-transition-name">view-transition-name</a> CSSプロパティを使い、
      どの要素を個別にキャプチャするか選択でき、
      ページ全体とは独立してアニメーションさせることができます。
      遷移状態（旧・新のビジュアルキャプチャが共存する状態）は疑似要素で表現されるため、
      開発者は<a href="https://www.w3.org/TR/css-animations/">CSSアニメーション</a>や<a
        href="https://www.w3.org/TR/web-animations/">Webアニメーション</a>などの使い慣れた機能で
      それぞれの遷移をカスタマイズできます。
    </p>
    <h3 class="heading settled" data-level="1.3" id="lifecycle"><span class="secno">1.3. </span><span
        class="content">ビュー遷移のライフサイクル</span><a class="self-link" href="#lifecycle"></a></h3>
    <p>正常な<a data-link-type="dfn" href="#view-transitions" id="ref-for-view-transitions②">ビュー遷移</a>は、次の段階を経て進行します:</p>
    <ol>
      <li data-md>
        <p>開発者が
          <code>document.<code class="idl"><a data-link-type="idl" href="#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition①">startViewTransition</a></code>(<code
            class="idl"><a data-link-type="idl" href="#callbackdef-updatecallback" id="ref-for-callbackdef-updatecallback">updateCallback</a></code>)</code>
          を呼び出すと、
          <code
            class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition">ViewTransition</a></code>
          型の<var>viewTransition</var>が返されます。
        </p>
      <li data-md>
        <p>現在の状態が「旧」状態としてキャプチャされる。</p>
      <li data-md>
        <p>レンダリングが一時停止される。</p>
      <li data-md>
        <p>開発者の<code
            class="idl"><a data-link-type="idl" href="#callbackdef-updatecallback" id="ref-for-callbackdef-updatecallback①">updateCallback</a></code>
          関数（指定されていれば）が呼び出され、
          ドキュメントの状態が更新される。</p>
      <li data-md>
        <p>
          <code><var>viewTransition</var>.<code class="idl"><a data-link-type="idl" href="#dom-viewtransition-updatecallbackdone" id="ref-for-dom-viewtransition-updatecallbackdone">updateCallbackDone</a></code></code>
          が完了する。
        </p>
      <li data-md>
        <p>現在の状態が「新」状態としてキャプチャされる。</p>
      <li data-md>
        <p>遷移疑似要素が生成される。
          この構造の概要は<a href="#view-transition-pseudos">§ 3.2 ビュー遷移疑似要素</a>を参照。</p>
      <li data-md>
        <p>レンダリングが再開され、遷移疑似要素が表示される。</p>
      <li data-md>
        <p>
          <code><var>viewTransition</var>.<code class="idl"><a data-link-type="idl" href="#dom-viewtransition-ready" id="ref-for-dom-viewtransition-ready">ready</a></code></code>
          が完了する。
        </p>
      <li data-md>
        <p>疑似要素がアニメーションし、終了まで続く。</p>
      <li data-md>
        <p>遷移疑似要素が削除される。</p>
      <li data-md>
        <p>
          <code><var>viewTransition</var>.<code class="idl"><a data-link-type="idl" href="#dom-viewtransition-finished" id="ref-for-dom-viewtransition-finished">finished</a></code></code>
          が完了する。
        </p>
    </ol>
    <div id="phases-diagram">
      <spec-scaler canvasheight="1080" canvaswidth="1920" style="aspect-ratio: 1920/1080"> <iframe class="spec-slides"
          src="https://www.w3.org/TR/css-view-transitions-1/diagrams/phases/phases.html"></iframe> </spec-scaler>
      <p class="spec-slide-controls">
        <button disabled>前へ</button>
        <button disabled>次へ</button>
      </p>
      <script type="module">
        const root = document.querySelector('#phases-diagram');
        const [previous, next] = root.querySelectorAll('.spec-slide-controls button');
        const iframe = root.querySelector('iframe');
        next.disabled = false;

        const updateButtons = (slide) => {
          next.disabled = !slide.hasNext;
          previous.disabled = !slide.hasPrevious;
        };

        next.addEventListener('click', async () => {
          const slide = iframe.contentDocument.querySelector('spec-slide');
          await slide.next();
          updateButtons(slide);
        });
        previous.addEventListener('click', async () => {
          const slide = iframe.contentDocument.querySelector('spec-slide');
          await slide.previous();
          updateButtons(slide);
        });
      </script>
    </div>
    <h3 class="heading settled" data-level="1.4" id="transitions-as-enhancements"><span class="secno">1.4. </span><span
        class="content">拡張機能としての遷移</span><a class="self-link" href="#transitions-as-enhancements"></a></h3>
    <p>View Transition API設計の重要な点は、
      アニメーション付きの遷移が基盤となるドキュメント状態変化への視覚的<strong>拡張</strong>であることです。
      つまり、設定ミスやデバイス制約などによりビジュアル遷移の生成に失敗しても、
      <code
        class="idl"><a data-link-type="idl" href="#callbackdef-updatecallback" id="ref-for-callbackdef-updatecallback②">UpdateCallback</a></code>
      の呼び出しは妨げられません。
      遷移アニメーションが事前にできないと分かっていても、状態変更のためのコールバックは必ず呼ばれます。
    </p>
    <p>例えば、開発者が<a href="#lifecycle">ビュー遷移のライフサイクル</a>の開始時に
      <code
        class="idl"><a data-link-type="idl" href="#dom-viewtransition-skiptransition" id="ref-for-dom-viewtransition-skiptransition">skipTransition()</a></code>
      を呼び出すと、
      アニメーション遷移に関する手順（<a data-link-type="dfn" href="#view-transition-tree"
        id="ref-for-view-transition-tree">ビュー遷移ツリー</a>の生成など）は実行されません。
      しかし、<code
        class="idl"><a data-link-type="idl" href="#callbackdef-updatecallback" id="ref-for-callbackdef-updatecallback③">UpdateCallback</a></code>
      は必ず呼ばれます。
      スキップされるのはビジュアル遷移のみで、基盤となる状態変更は必ず行われます。
    </p>
    <p class="note" role="note"><span class="marker">注:</span> DOMの変更自体もスキップしたい場合は、
      それには別の機能が必要です。
      <code><code class="idl"><a data-link-type="idl" href="https://wicg.github.io/navigation-api/#navigateevent" id="ref-for-navigateevent">navigateEvent</a></code>.<code
        class="idl"><a data-link-type="idl" href="https://wicg.github.io/navigation-api/#ref-for-dom-navigateevent-signal①" id="ref-for-ref-for-dom-navigateevent-signal①">signal</a></code></code>
      はそのために利用できる機能例です。
    </p>
    <p>View Transition APIは、<code
        class="idl"><a data-link-type="idl" href="#callbackdef-updatecallback" id="ref-for-callbackdef-updatecallback④">UpdateCallback</a></code>
      によりDOM変更を非同期化できますが、
      API自体はDOM変更のキューイングやスケジューリングの責任は持ちません（遷移自体に必要なスケジューリング以外は）。
      非同期DOM変更が同時並行で発生する場合（例：独立したコンポーネント内）もあれば、
      キューイングや以前の変更の中止が必要な場合もあります。
      これらはアプリケーション全体をより包括的に見渡せるフレームワークや機能に委ねるのが最適です。
    </p>
    <h3 class="heading settled" data-level="1.5" id="rendering-model"><span class="secno">1.5. </span><span
        class="content">レンダリングモデル</span><a class="self-link" href="#rendering-model"></a></h3>
    <p>ビュー遷移は、UAが生成する疑似要素を使って、要素のレンダリング状態を複製することで動作します。
      要素自身やその子孫に適用されるレンダリングの側面、例えば <a class="property css" data-link-type="property"
        href="https://www.w3.org/TR/filter-effects-1/#propdef-filter" id="ref-for-propdef-filter">filter</a> や <a
        class="property css" data-link-type="property" href="https://www.w3.org/TR/css-color-4/#propdef-opacity"
        id="ref-for-propdef-opacity">opacity</a> のような視覚効果、
      あるいは <a class="property css" data-link-type="property"
        href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow" id="ref-for-propdef-overflow">overflow</a> や <a
        class="property css" data-link-type="property" href="https://www.w3.org/TR/css-masking-1/#propdef-clip-path"
        id="ref-for-propdef-clip-path">clip-path</a> によるクリッピングなどは、
      <a data-link-type="dfn" href="#capture-the-image" id="ref-for-capture-the-image">画像のキャプチャ</a>で画像を生成する際に適用されます。
    </p>
    <p>ただし、<a class="property css" data-link-type="property"
        href="https://www.w3.org/TR/compositing-1/#propdef-mix-blend-mode"
        id="ref-for-propdef-mix-blend-mode">mix-blend-mode</a> のような、
      要素が埋め込まれたときの描画方法を定義するプロパティは画像には適用できません。
      このようなプロパティは、要素に対応する <a class="css" data-link-type="maybe" href="#selectordef-view-transition-group"
        id="ref-for-selectordef-view-transition-group">::view-transition-group()</a> 疑似要素に適用されます。
      これは要素と同等のボックスを生成するためのものです。</p>
    <p><a class="css" data-link-type="maybe" href="#selectordef-view-transition-group"
        id="ref-for-selectordef-view-transition-group①">::view-transition-group()</a> が "新しい"状態に対応する要素を持つ場合、
      ブラウザは <span class="css" id="ref-for-selectordef-view-transition-group②">::view-transition-group()</span>
      にコピーされたプロパティを
      DOMの "新しい"状態の要素と同期します。
      <span class="css" id="ref-for-selectordef-view-transition-group③">::view-transition-group()</span> が
      "古い"状態と"新しい"状態の両方に対応する場合、
      かつコピーされるプロパティが補間可能なものであれば、
      ブラウザはそのプロパティを滑らかにアニメーションするためのデフォルトのアニメーションも設定します。
    </p>
    <h3 class="heading settled" data-level="1.6" id="examples"><span class="secno">1.6. </span><span
        class="content">例</span><a class="self-link" href="#examples"></a></h3>
    <div class="example" id="example-6d7fc030">
      <a class="self-link" href="#example-6d7fc030"></a> すでに次のようなパターンでコンテンツを更新しているページの場合:
      <pre class="language-js highlight"><c- a>function</c-> spaNavigate<c- p>(</c->data<c- p>)</c-> <c- p>{</c->
  updateTheDOMSomehow<c- p>(</c->data<c- p>);</c->
<c- p>}</c->
</pre>
      <p><a data-link-type="dfn" href="#view-transitions" id="ref-for-view-transitions③">ビュー遷移</a>は次のように追加できます:</p>
      <pre class="language-js highlight"><c- a>function</c-> spaNavigate<c- p>(</c->data<c- p>)</c-> <c- p>{</c->
  <c- c1>// このAPIをサポートしないブラウザ用のフォールバック:</c->
  <c- k>if</c-> <c- p>(</c-><c- o>!</c->document<c- p>.</c->startViewTransition<c- p>)</c-> <c- p>{</c->
    updateTheDOMSomehow<c- p>(</c->data<c- p>);</c->
    <c- k>return</c-><c- p>;</c->
  <c- p>}</c->

  <c- c1>// 遷移ありの場合:</c->
  document<c- p>.</c->startViewTransition<c- p>(()</c-> <c- p>=></c-> updateTheDOMSomehow<c- p>(</c->data<c- p>));</c->
<c- p>}</c->
</pre>
      <p>これにより、デフォルトの素早いクロスフェード遷移が実現されます:</p>
      <figure>
        <video class="main-example-video" controls loop muted playsinline
          src="https://www.w3.org/TR/css-view-transitions-1/diagrams/videos/default.mp4"
          style="aspect-ratio: 1404/738"></video>
      </figure>
      <p>クロスフェードは <a href="#view-transition-pseudos">疑似要素のツリー</a>上でCSSアニメーションによって実現されているため、
        CSSでカスタマイズ可能です。例:</p>
      <pre class="language-css highlight">:<c- nf>:view-transition-old</c-><c- p>(</c->root<c- p>),</c->
:<c- nf>:view-transition-new</c-><c- p>(</c->root<c- p>)</c-> <c- p>{</c->
  <c- k>animation-duration</c-><c- p>:</c-> <c- m>5</c-><c- k>s</c-><c- p>;</c->
<c- p>}</c->
</pre>
      <p>これにより、よりゆっくりとした遷移になります:</p>
      <figure>
        <video class="main-example-video" controls loop muted playsinline
          src="https://www.w3.org/TR/css-view-transitions-1/diagrams/videos/slow.mp4"
          style="aspect-ratio: 1404/738"></video>
      </figure>
    </div>
    <div class="example" id="example-b5766389">
      <a class="self-link" href="#example-b5766389"></a> 前の例を基に、動きを追加できます:
      <pre class="language-css highlight"><c- n>@keyframes</c-> fade-in <c- p>{</c->
  from <c- p>{</c-> <c- k>opacity</c-><c- p>:</c-> <c- m>0</c-><c- p>;</c-> <c- p>}</c->
<c- p>}</c->

<c- n>@keyframes</c-> fade-out <c- p>{</c->
  to <c- p>{</c-> <c- k>opacity</c-><c- p>:</c-> <c- m>0</c-><c- p>;</c-> <c- p>}</c->
<c- p>}</c->

<c- n>@keyframes</c-> slide-from-right <c- p>{</c->
  from <c- p>{</c-> <c- k>transform</c-><c- p>:</c-> <c- nf>translateX</c-><c- p>(</c-><c- m>30</c-><c- k>px</c-><c- p>);</c-> <c- p>}</c->
<c- p>}</c->

<c- n>@keyframes</c-> slide-to-left <c- p>{</c->
  to <c- p>{</c-> <c- k>transform</c-><c- p>:</c-> <c- nf>translateX</c-><c- p>(</c-><c- m>-30</c-><c- k>px</c-><c- p>);</c-> <c- p>}</c->
<c- p>}</c->

:<c- nf>:view-transition-old</c-><c- p>(</c->root<c- p>)</c-> <c- p>{</c->
  <c- k>animation</c-><c- p>:</c-> <c- m>90</c-><c- k>ms</c-> <c- nf>cubic-bezier</c-><c- p>(</c-><c- m>0.4</c-><c- p>,</c-> <c- m>0</c-><c- p>,</c-> <c- m>1</c-><c- p>,</c-> <c- m>1</c-><c- p>)</c-> both fade-out<c- p>,</c->
    <c- m>300</c-><c- k>ms</c-> <c- nf>cubic-bezier</c-><c- p>(</c-><c- m>0.4</c-><c- p>,</c-> <c- m>0</c-><c- p>,</c-> <c- m>0.2</c-><c- p>,</c-> <c- m>1</c-><c- p>)</c-> both slide-to-left<c- p>;</c->
<c- p>}</c->

:<c- nf>:view-transition-new</c-><c- p>(</c->root<c- p>)</c-> <c- p>{</c->
  <c- k>animation</c-><c- p>:</c-> <c- m>210</c-><c- k>ms</c-> <c- nf>cubic-bezier</c-><c- p>(</c-><c- m>0</c-><c- p>,</c-> <c- m>0</c-><c- p>,</c-> <c- m>0.2</c-><c- p>,</c-> <c- m>1</c-><c- p>)</c-> <c- m>90</c-><c- k>ms</c-> both fade-in<c- p>,</c->
    <c- m>300</c-><c- k>ms</c-> <c- nf>cubic-bezier</c-><c- p>(</c-><c- m>0.4</c-><c- p>,</c-> <c- m>0</c-><c- p>,</c-> <c- m>0.2</c-><c- p>,</c-> <c- m>1</c-><c- p>)</c-> both slide-from-right<c- p>;</c->
<c- p>}</c->
</pre>
      <p>結果は以下の通りです:</p>
      <figure>
        <video class="main-example-video" controls loop muted playsinline
          src="https://www.w3.org/TR/css-view-transitions-1/diagrams/videos/slide.mp4"
          style="aspect-ratio: 1404/738"></video>
      </figure>
    </div>
    <div class="example" id="example-4377639b">
      <a class="self-link" href="#example-4377639b"></a> 前の例を基に、
      ヘッダーとヘッダー内のテキストに、それぞれ専用の <a class="css" data-link-type="maybe" href="#selectordef-view-transition-group"
        id="ref-for-selectordef-view-transition-group④">::view-transition-group()</a> を設定して遷移できます:
      <pre class="language-css highlight">.main-header <c- p>{</c->
  <c- k>view-transition-name</c-><c- p>:</c-> main-header<c- p>;</c->
<c- p>}</c->

.main-header-text <c- p>{</c->
  <c- k>view-transition-name</c-><c- p>:</c-> main-header-text<c- p>;</c->
  <c- c>/* テキストが同じであると仮定して一貫したサイズを指定 */</c->
  width: fit-content<c- p>;</c->
<c- p>}</c->
</pre>
      <p>デフォルトでは、これらのグループは「古い」状態から「新しい」状態へサイズと位置を遷移し、
        視覚状態はクロスフェードします:</p>
      <figure>
        <video class="main-example-video" controls loop muted playsinline
          src="https://www.w3.org/TR/css-view-transitions-1/diagrams/videos/header.mp4"
          style="aspect-ratio: 1404/738"></video>
      </figure>
    </div>
    <div class="example" id="example-6b9396d2">
      <a class="self-link" href="#example-6b9396d2"></a> 前の例を基に、ページにサイドバーがあるとします:
      <figure>
        <video class="main-example-video" controls loop muted playsinline
          src="https://www.w3.org/TR/css-view-transitions-1/diagrams/videos/bad-sidebar.mp4"
          style="aspect-ratio: 1404/738"></video>
      </figure>
      <p>この場合、サイドバーが「古い」状態と「新しい」状態の両方に存在する場合は静的にして、
        そうでなければアニメーションで出現・消失させた方がよいでしょう。</p>
      <p><a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#only-child-pseudo"
          id="ref-for-only-child-pseudo">:only-child</a> 疑似クラスを使うことで、
        これらの状態に特化したアニメーションを作成できます:</p>
      <pre class="language-css highlight">.sidebar <c- p>{</c->
  <c- k>view-transition-name</c-><c- p>:</c-> sidebar<c- p>;</c->
<c- p>}</c->

<c- n>@keyframes</c-> slide-to-right <c- p>{</c->
  to <c- p>{</c-> <c- k>transform</c-><c- p>:</c-> <c- nf>translateX</c-><c- p>(</c-><c- m>30</c-><c- k>px</c-><c- p>);</c-> <c- p>}</c->
<c- p>}</c->

<c- c>/* 登場遷移 */</c->
:<c- nf>:view-transition-new</c-><c- p>(</c->sidebar<c- p>)</c->:only-child <c- p>{</c->
  <c- k>animation</c-><c- p>:</c-> <c- m>300</c-><c- k>ms</c-> <c- nf>cubic-bezier</c-><c- p>(</c-><c- m>0</c-><c- p>,</c-> <c- m>0</c-><c- p>,</c-> <c- m>0.2</c-><c- p>,</c-> <c- m>1</c-><c- p>)</c-> both fade-in<c- p>,</c->
    <c- m>300</c-><c- k>ms</c-> <c- nf>cubic-bezier</c-><c- p>(</c-><c- m>0.4</c-><c- p>,</c-> <c- m>0</c-><c- p>,</c-> <c- m>0.2</c-><c- p>,</c-> <c- m>1</c-><c- p>)</c-> both slide-from-right<c- p>;</c->
<c- p>}</c->

<c- c>/* 退場遷移 */</c->
:<c- nf>:view-transition-old</c-><c- p>(</c->sidebar<c- p>)</c->:only-child <c- p>{</c->
  <c- k>animation</c-><c- p>:</c-> <c- m>150</c-><c- k>ms</c-> <c- nf>cubic-bezier</c-><c- p>(</c-><c- m>0.4</c-><c- p>,</c-> <c- m>0</c-><c- p>,</c-> <c- m>1</c-><c- p>,</c-> <c- m>1</c-><c- p>)</c-> both fade-out<c- p>,</c->
    <c- m>300</c-><c- k>ms</c-> <c- nf>cubic-bezier</c-><c- p>(</c-><c- m>0.4</c-><c- p>,</c-> <c- m>0</c-><c- p>,</c-> <c- m>0.2</c-><c- p>,</c-> <c- m>1</c-><c- p>)</c-> both slide-to-right<c- p>;</c->
<c- p>}</c->
</pre>
      <p>サイドバーが「古い」状態と「新しい」状態の両方に存在する場合は、デフォルトのアニメーションが適切です。</p>
      <figure>
        <video class="main-example-video" controls loop muted playsinline
          src="https://www.w3.org/TR/css-view-transitions-1/diagrams/videos/good-sidebar.mp4"
          style="aspect-ratio: 1404/738"></video>
      </figure>
    </div>
    <div class="example" id="example-3e1ac75e">
      <a class="self-link" href="#example-3e1ac75e"></a> 今回は前の例を基にせず、
      ユーザーのカーソル位置から円形リビールを作りたい場合を考えます。
      これはCSSだけでは実現できません。
      <p>まずCSSで、「古い」状態と「新しい」状態が重なり合ってもデフォルトのブレンドを無効化し、
        デフォルトのクロスフェードアニメーションも防ぎます:</p>
      <pre class="language-css highlight">:<c- nf>:view-transition-image-pair</c-><c- p>(</c->root<c- p>)</c-> <c- p>{</c->
  <c- k>isolation</c-><c- p>:</c-> auto<c- p>;</c->
<c- p>}</c->

:<c- nf>:view-transition-old</c-><c- p>(</c->root<c- p>),</c->
:<c- nf>:view-transition-new</c-><c- p>(</c->root<c- p>)</c-> <c- p>{</c->
  <c- k>animation</c-><c- p>:</c-> none<c- p>;</c->
  <c- k>mix-blend-mode</c-><c- p>:</c-> normal<c- p>;</c->
<c- p>}</c->
</pre>
      <p>次にJavaScript:</p>
      <pre class="language-js highlight"><c- c1>// 最後のクリックイベントを保存</c->
<c- a>let</c-> lastClick<c- p>;</c->
addEventListener<c- p>(</c-><c- t>'click'</c-><c- p>,</c-> event <c- p>=></c-> <c- p>(</c->lastClick <c- o>=</c-> event<c- p>));</c->

<c- a>function</c-> spaNavigate<c- p>(</c->data<c- p>)</c-> <c- p>{</c->
  <c- c1>// このAPIをサポートしないブラウザ用のフォールバック:</c->
  <c- k>if</c-> <c- p>(</c-><c- o>!</c->document<c- p>.</c->startViewTransition<c- p>)</c-> <c- p>{</c->
    updateTheDOMSomehow<c- p>(</c->data<c- p>);</c->
    <c- k>return</c-><c- p>;</c->
  <c- p>}</c->

  <c- c1>// クリック位置を取得、なければ画面中央にフォールバック</c->
  <c- a>const</c-> x <c- o>=</c-> lastClick<c- o>?</c-><c- p>.</c->clientX <c- o>??</c-> innerWidth <c- o>/</c-> <c- mf>2</c-><c- p>;</c->
  <c- a>const</c-> y <c- o>=</c-> lastClick<c- o>?</c-><c- p>.</c->clientY <c- o>??</c-> innerHeight <c- o>/</c-> <c- mf>2</c-><c- p>;</c->
  <c- c1>// 最も遠い角までの距離を取得</c->
  <c- a>const</c-> endRadius <c- o>=</c-> Math<c- p>.</c->hypot<c- p>(</c->
    Math<c- p>.</c->max<c- p>(</c->x<c- p>,</c-> innerWidth <c- o>-</c-> x<c- p>),</c->
    Math<c- p>.</c->max<c- p>(</c->y<c- p>,</c-> innerHeight <c- o>-</c-> y<c- p>)</c->
  <c- p>);</c->

  <c- c1>// 遷移を作成:</c->
  <c- a>const</c-> transition <c- o>=</c-> document<c- p>.</c->startViewTransition<c- p>(()</c-> <c- p>=></c-> <c- p>{</c->
    updateTheDOMSomehow<c- p>(</c->data<c- p>);</c->
  <c- p>});</c->

  <c- c1>// 疑似要素が生成されるのを待つ:</c->
  transition<c- p>.</c->ready<c- p>.</c->then<c- p>(()</c-> <c- p>=></c-> <c- p>{</c->
    <c- c1>// rootの新ビューをアニメーション</c->
    document<c- p>.</c->documentElement<c- p>.</c->animate<c- p>(</c->
      <c- p>{</c->
        clipPath<c- o>:</c-> <c- p>[</c->
          \<c- sb>`circle(0 at </c-><c- si>${</c->x<c- si>}</c-><c- sb>px </c-><c- si>${</c->y<c- si>}</c-><c- sb>px)\`,</c->
<c- sb>          \`circle(</c-><c- si>${</c->endRadius<c- si>}</c-><c- sb>px at </c-><c- si>${</c->x<c- si>}</c-><c- sb>px </c-><c- si>${</c->y<c- si>}</c-><c- sb>px)\`,</c->
<c- sb>        ],</c->
<c- sb>      },</c->
<c- sb>      {</c->
<c- sb>        duration: 500,</c->
<c- sb>        easing: 'ease-in',</c->
<c- sb>        // アニメーションする疑似要素を指定</c->
<c- sb>        pseudoElement: '::view-transition-new(root)',</c->
<c- sb>      }</c->
<c- sb>    );</c->
<c- sb>  });</c->
<c- sb>}</c->
</pre>
      <p>結果は以下の通りです:</p>
      <figure>
        <video class="main-example-video" controls loop muted playsinline
          src="https://www.w3.org/TR/css-view-transitions-1/diagrams/videos/circle.mp4"
          style="aspect-ratio: 1404/738"></video>
      </figure>
    </div>
    <h2 class="heading settled" data-level="2" id="css-properties"><span class="secno">2. </span><span
        class="content">CSSプロパティ</span><a class="self-link" href="#css-properties"></a></h2>
    <h3 class="heading settled" data-level="2.1" id="view-transition-name-prop"><span class="secno">2.1. </span><span
        class="content">個別に遷移するサブツリーのタグ付け: <a class="property css" data-link-type="property"
          href="#propdef-view-transition-name" id="ref-for-propdef-view-transition-name①">view-transition-name</a>
        プロパティ</span><a class="self-link" href="#view-transition-name-prop"></a></h3>
    <table class="def propdef" data-link-for-hint="view-transition-name">
      <tbody>
        <tr>
          <th>名前:
          <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
              id="propdef-view-transition-name">view-transition-name</dfn>
        <tr class="value">
          <th><a href="https://www.w3.org/TR/css-values/#value-defs">値:</a>
          <td class="prod">none <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one"
              id="ref-for-comb-one">|</a> <a class="production css" data-link-type="type"
              href="https://www.w3.org/TR/css-values-4/#identifier-value"
              id="ref-for-identifier-value">&lt;custom-ident></a>
        <tr>
          <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">初期値:</a>
          <td>none
        <tr>
          <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">適用対象:</a>
          <td><a href="https://www.w3.org/TR/css-pseudo/#generated-content"
              title="Includes ::before and ::after pseudo-elements.">すべての要素</a>
        <tr>
          <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">継承:</a>
          <td>no
        <tr>
          <th><a href="https://www.w3.org/TR/css-values/#percentages">パーセンテージ:</a>
          <td>n/a
        <tr>
          <th><a href="https://www.w3.org/TR/css-cascade/#computed">算出値:</a>
          <td>指定通り
        <tr>
          <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">正規順序:</a>
          <td>文法通り
        <tr>
          <th><a href="https://www.w3.org/TR/web-animations/#animation-type">アニメーション型:</a>
          <td>離散
    </table>
    <p class="note" role="note"><span class="marker">注:</span> <a class="property css" data-link-type="property"
        href="#propdef-view-transition-name" id="ref-for-propdef-view-transition-name②">view-transition-name</a> は <a
        data-link-type="dfn" href="https://www.w3.org/TR/web-animations-1/#discrete"
        id="ref-for-discrete">離散的にアニメーション可能</a>ですが、
      これをアニメーションしても
      実行中のビュー遷移には影響しません。むしろ、値を時間や<a data-link-type="dfn" href="https://www.w3.org/TR/web-animations-1/#timeline"
        id="ref-for-timeline">タイムライン</a>に応じて変化させるための手段です。例えば、<span class="property"
        id="ref-for-propdef-view-transition-name③">view-transition-name</span> を<a data-link-type="dfn"
        href="https://www.w3.org/TR/scroll-animations-1/#scroll-driven-animations"
        id="ref-for-scroll-driven-animations">スクロール駆動アニメーション</a>に基づき変更する例があります。</p>
    <p><a class="property css" data-link-type="property" href="#propdef-view-transition-name"
        id="ref-for-propdef-view-transition-name④">view-transition-name</a> プロパティは要素を
      <a data-link-type="dfn" href="#captured-in-a-view-transition"
        id="ref-for-captured-in-a-view-transition">ビュー遷移でキャプチャ</a>するために「タグ付け」し、
      指定された <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="view-transition-name">ビュー遷移名</dfn> の下で
      <a data-link-type="dfn" href="#view-transition-tree" id="ref-for-view-transition-tree①">ビュー遷移ツリー</a>内で個別に追跡します。
      このようにキャプチャされた要素は、他のページ部分とは独立してアニメーションします。
    </p>
    <dl>
      <dt data-md><dfn class="dfn-paneled css" data-dfn-for="view-transition-name" data-dfn-type="value" data-export
          id="valdef-view-transition-name-none">none</dfn>
      <dd data-md>
        <p><a data-link-type="dfn" href="https://drafts.csswg.org/css2/#element" id="ref-for-element">要素</a>は
          ビュー遷移に個別参加しません。</p>
      <dt data-md><dfn class="dfn-paneled css" data-dfn-for="view-transition-name" data-dfn-type="value" data-export
          id="valdef-view-transition-name-custom-ident"><a class="production css" data-link-type="type"
            href="https://www.w3.org/TR/css-values-4/#identifier-value"
            id="ref-for-identifier-value①">&lt;custom-ident></a></dfn>
      <dd data-md>
        <p><a data-link-type="dfn" href="https://drafts.csswg.org/css2/#element" id="ref-for-element①">要素</a>は
          指定された <a data-link-type="dfn" href="#view-transition-name" id="ref-for-view-transition-name">ビュー遷移名</a>で
          古い/新しい <span id="ref-for-element②">要素</span>として個別にビュー遷移に参加します。</p>
        <p>ここでは <span class="css">none</span> および <span class="css">auto</span> の値は
          <a class="production css" data-link-type="type" href="https://www.w3.org/TR/css-values-4/#identifier-value"
            id="ref-for-identifier-value②">&lt;custom-ident></a> から除外されます。
        </p>
        <p class="note" role="note"><span class="marker">注:</span> この名前が一意でない場合
          （つまり複数要素が同時に同じ <a data-link-type="dfn" href="#view-transition-name"
            id="ref-for-view-transition-name①">ビュー遷移名</a>を指定した場合）、
          <a data-link-type="dfn" href="#view-transitions" id="ref-for-view-transitions④">ビュー遷移</a>は中断されます。
        </p>
    </dl>
    <p class="note" role="note"><span class="marker">注:</span> このAPIの観点では、
      旧状態で <a data-link-type="dfn" href="#view-transition-name" id="ref-for-view-transition-name②">ビュー遷移名</a> <span
        class="css">foo</span> を持つ要素と
      新状態で <span id="ref-for-view-transition-name③">ビュー遷移名</span> <span class="css">foo</span> を持つ要素は、
      同じ要素の異なる視覚状態を表すものと見なされ、
      <a data-link-type="dfn" href="#view-transition-tree" id="ref-for-view-transition-tree②">ビュー遷移ツリー</a>でペアとなります。
      実際は同じオブジェクトを指していなくても、同一概念のページ要素の視覚状態だとみなすモデルが有用です。
    </p>
    <p>要素の <a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#principal-box"
        id="ref-for-principal-box">principal box</a> が <a data-link-type="dfn"
        href="https://www.w3.org/TR/css-break-4/#fragment" id="ref-for-fragment">分断</a>、
      <a data-link-type="dfn" href="https://www.w3.org/TR/css-contain-2/#skips-its-contents"
        id="ref-for-skips-its-contents">スキップ</a>、
      または <a data-link-type="dfn" href="https://www.w3.org/TR/css-images-4/#element-not-rendered"
        id="ref-for-element-not-rendered">非レンダリング</a> の場合、
      このプロパティは効果を持ちません。
      詳細は <a href="#algorithms">§ 7 アルゴリズム</a> を参照してください。
    </p>
    <h4 class="heading settled" data-level="2.1.1" id="named-and-transitioning"><span class="secno">2.1.1. </span><span
        class="content">レンダリングの統合</span><a class="self-link" href="#named-and-transitioning"></a></h4>
    <p><a data-link-type="dfn" href="https://drafts.csswg.org/css2/#element" id="ref-for-element③">要素</a>が
      <a data-link-type="dfn" href="#captured-in-a-view-transition"
        id="ref-for-captured-in-a-view-transition①">ビュー遷移でキャプチャされている</a>、
      または <a class="property css" data-link-type="property" href="#propdef-view-transition-name"
        id="ref-for-propdef-view-transition-name⑤">view-transition-name</a> の <a data-link-type="dfn"
        href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value">算出値</a>が <a class="css"
        data-link-type="maybe" href="#valdef-view-transition-name-none"
        id="ref-for-valdef-view-transition-name-none">none</a> でない場合（任意のタイミング）:
    </p>
    <ul>
      <li data-md>
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/CSS21/visuren.html#x43"
            id="ref-for-x43">スタッキングコンテキスト</a>を形成する。</p>
      <li data-md>
        <p><a href="https://www.w3.org/TR/css-transforms-2/#grouping-property-values">3D変換でフラット化される</a>。</p>
      <li data-md>
        <p><a data-link-type="dfn" href="https://drafts.fxtf.org/filter-effects-2/#backdrop-root"
            id="ref-for-backdrop-root">バックドロップルート</a>を形成する。</p>
    </ul>
    <h2 class="heading settled" data-level="3" id="pseudo"><span class="secno">3. </span><span
        class="content">疑似要素</span><a class="self-link" href="#pseudo"></a></h2>
    <h3 class="heading settled" data-level="3.1" id="pseudo-root"><span class="secno">3.1. </span><span
        class="content">疑似要素ツリー</span><a class="self-link" href="#pseudo-root"></a></h3>
    <p class="note" role="note"><span class="marker">注:</span> これは疑似要素ツリーの一般的な定義です。
      他の機能でこの動作が必要な場合は、これらの定義は<a data-link-type="biblio" href="#biblio-css-pseudo-4"
        title="CSS Pseudo-Elements Module Level 4">[css-pseudo-4]</a>に移動されます。</p>
    <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="pseudo-element-root">疑似要素ルート</dfn>は
      <a data-link-type="dfn" href="https://www.w3.org/TR/css-pseudo-4/#tree-abiding"
        id="ref-for-tree-abiding">ツリー従属疑似要素</a>の一種で、
      <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-root"
        id="ref-for-concept-tree-root">ツリーのルート</a>として
      <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree" id="ref-for-concept-tree">ツリー</a>内で
      <span id="ref-for-tree-abiding①">ツリー従属疑似要素</span>となります。
      これを <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="pseudo-element-tree">疑似要素ツリー</dfn>と呼びます。
    </p>
    <p><a data-link-type="dfn" href="#pseudo-element-tree" id="ref-for-pseudo-element-tree">疑似要素ツリー</a>は
      その<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-descendant"
        id="ref-for-concept-tree-descendant">子孫</a>
      <a data-link-type="dfn" href="https://www.w3.org/TR/css-pseudo-4/#tree-abiding"
        id="ref-for-tree-abiding②">ツリー従属疑似要素</a>の文書順を定義します。
    </p>
    <p><a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#pseudo-element"
        id="ref-for-pseudo-element">疑似要素</a>が<a data-link-type="dfn"
        href="https://dom.spec.whatwg.org/#concept-tree-participate"
        id="ref-for-concept-tree-participate">疑似要素ツリーに参加</a>する場合、
      その<a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#originating-pseudo-element"
        id="ref-for-originating-pseudo-element">発生元疑似要素</a>が<a data-link-type="dfn"
        href="https://dom.spec.whatwg.org/#concept-tree-parent" id="ref-for-concept-tree-parent">親</a>になります。</p>
    <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-descendant"
        id="ref-for-concept-tree-descendant①">子孫</a> <var>pseudo</var> が
      <a data-link-type="dfn" href="#pseudo-element-root" id="ref-for-pseudo-element-root">疑似要素ルート</a>の下にあり、
      他に<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-sibling"
        id="ref-for-concept-tree-sibling">兄弟</a>がいない場合、
      <a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#only-child-pseudo"
        id="ref-for-only-child-pseudo①">:only-child</a>がその<var>pseudo</var>にマッチします。
    </p>
    <p class="note" role="note"><span class="marker">注:</span> つまり
      <code>::view-transition-new(ident):only-child</code>は
      親 <code>::view-transition-image-pair(ident)</code>に
      <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-child"
        id="ref-for-concept-tree-child">子</a>が1つだけの場合のみ
      <code>::view-transition-new(ident)</code>を選択します。
      つまり、<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-sibling"
        id="ref-for-concept-tree-sibling①">兄弟</a> <code>::view-transition-old(ident)</code>が存在しない場合です。
    </p>
    <h3 class="heading settled" data-level="3.2" id="view-transition-pseudos"><span class="secno">3.2. </span><span
        class="content">ビュー遷移疑似要素</span><a class="self-link" href="#view-transition-pseudos"></a>
    </h3>
    <p><a data-link-type="dfn" href="#view-transitions" id="ref-for-view-transitions⑥">ビュー遷移</a>の可視化は、<a
        data-link-type="dfn" href="#pseudo-element-tree"
        id="ref-for-pseudo-element-tree②">疑似要素ツリー</a>として表現され、これは下記で定義される<dfn class="dfn-paneled" data-dfn-type="dfn"
        data-noexport id="view-transition-tree">ビュー遷移ツリー</dfn>および<dfn class="dfn-paneled" data-dfn-type="dfn"
        data-noexport id="view-transition-pseudo-elements">ビュー遷移疑似要素</dfn>で構成されます。
      このツリーは<a data-link-type="dfn" href="#setup-transition-pseudo-elements"
        id="ref-for-setup-transition-pseudo-elements">遷移疑似要素のセットアップ</a>手順で構築され、
      <a class="css" data-link-type="maybe" href="#selectordef-view-transition"
        id="ref-for-selectordef-view-transition">::view-transition</a>疑似要素の下にルート化され、<a data-link-type="dfn"
        href="https://www.w3.org/TR/selectors-4/#originating-element" id="ref-for-originating-element">発生元</a>は<a
        data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#root-element"
        id="ref-for-root-element">ルート要素</a>です。
      すべての<a data-link-type="dfn" href="#view-transition-pseudo-elements"
        id="ref-for-view-transition-pseudo-elements">ビュー遷移疑似要素</a>は、
      <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#ultimate-originating-element"
        id="ref-for-ultimate-originating-element">究極の発生元要素</a>、つまり<a data-link-type="dfn"
        href="https://dom.spec.whatwg.org/#document-element" id="ref-for-document-element">ドキュメント要素</a>から選択されます。
    </p>
    <p><a data-link-type="dfn" href="#view-transition-tree"
        id="ref-for-view-transition-tree③">ビュー遷移ツリー</a>はアクセシビリティツリーには公開されません。</p>
    <div class="example" id="example-f80a7b18"><a class="self-link" href="#example-f80a7b18"></a> 例として、
      <a class="css" data-link-type="maybe" href="#selectordef-view-transition-group"
        id="ref-for-selectordef-view-transition-group⑤">::view-transition-group()</a> 疑似要素は、ルート要素セレクターに直接付与されます。
      例えば <span class="css">:root::view-transition-group()</span> のようになります。
      これは親である<a class="css" data-link-type="maybe" href="#selectordef-view-transition"
        id="ref-for-selectordef-view-transition①">::view-transition</a>疑似要素には付与されません。
    </div>
    <div class="note" role="note">
      ユーザーエージェントがドキュメントの「旧」状態と「新」状態をキャプチャした後、次のような疑似要素構造を生成します:
      <pre>::view-transition
├─ ::view-transition-group(name)
│  └─ ::view-transition-image-pair(name)
│     ├─ ::view-transition-old(name)
│     └─ ::view-transition-new(name)
└─ …その他のグループ…
</pre>
      <p><a class="property css" data-link-type="property" href="#propdef-view-transition-name"
          id="ref-for-propdef-view-transition-name⑥">view-transition-name</a> を持つ各要素は個別にキャプチャされ、
        各一意な <span class="property" id="ref-for-propdef-view-transition-name⑦">view-transition-name</span> ごとに <a
          class="css" data-link-type="maybe" href="#selectordef-view-transition-group"
          id="ref-for-selectordef-view-transition-group⑥">::view-transition-group()</a> が生成されます。</p>
      <p>便宜上、<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#document-element"
          id="ref-for-document-element①">ドキュメント要素</a>には <a class="property css" data-link-type="property"
          href="#propdef-view-transition-name" id="ref-for-propdef-view-transition-name⑧">view-transition-name</a>
        "root" が<a href="#ua-styles">ユーザーエージェントスタイルシート</a>で設定されています。</p>
      <p>「旧」状態や「新」状態のどちらかが存在しない場合は、<a class="css" data-link-type="maybe" href="#selectordef-view-transition-old"
          id="ref-for-selectordef-view-transition-old">::view-transition-old()</a> または <a class="css"
          data-link-type="maybe" href="#selectordef-view-transition-new"
          id="ref-for-selectordef-view-transition-new">::view-transition-new()</a> が欠落します。</p>
      <p>生成された各疑似要素はCSSでターゲット指定して外観や挙動、アニメーションをカスタマイズできます。
        これにより遷移を完全にカスタマイズ可能です。</p>
    </div>
    <h4 class="heading settled" data-level="3.2.1" id="named-view-transition-pseudo"><span class="secno">3.2.1.
      </span><span class="content">名前付きビュー遷移疑似要素</span><a class="self-link" href="#named-view-transition-pseudo"></a>
    </h4>
    <p>複数の<a data-link-type="dfn" href="#view-transition-pseudo-elements"
        id="ref-for-view-transition-pseudo-elements①">ビュー遷移疑似要素</a>は<dfn class="dfn-paneled" data-dfn-type="dfn"
        data-noexport id="named-view-transition-pseudo-elements">名前付きビュー遷移疑似要素</dfn>であり、
      これらは<a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#functional-pseudo-element"
        id="ref-for-functional-pseudo-element">関数型</a>の<a data-link-type="dfn"
        href="https://www.w3.org/TR/css-pseudo-4/#tree-abiding" id="ref-for-tree-abiding③">ツリー従属</a>な
      <span id="ref-for-view-transition-pseudo-elements②">ビュー遷移疑似要素</span>で、<a data-link-type="dfn"
        href="#view-transition-name" id="ref-for-view-transition-name④">ビュー遷移名</a>と関連付けられます。
      これら疑似要素は <a class="production css" data-link-type="type" href="#typedef-pt-name-selector"
        id="ref-for-typedef-pt-name-selector">&lt;pt-name-selector></a> を引数に取り、構文は以下のパターンに従います:
    </p>
    <pre class="prod">::view-transition-<var>pseudo</var>(<a class="production" data-link-type="type" href="#typedef-pt-name-selector" id="ref-for-typedef-pt-name-selector①">&lt;pt-name-selector></a>)
</pre>
    <p>ここで <a class="production css" data-link-type="type" href="#typedef-pt-name-selector"
        id="ref-for-typedef-pt-name-selector②">&lt;pt-name-selector></a> は <a data-link-type="dfn"
        href="#view-transition-name" id="ref-for-view-transition-name⑤">ビュー遷移名</a>を選択し、構文定義は以下の通りです:</p>
    <pre class="prod"><dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-pt-name-selector">&lt;pt-name-selector></dfn> = '*' <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one①">|</a> <a class="production" data-link-type="type" href="https://www.w3.org/TR/css-values-4/#identifier-value" id="ref-for-identifier-value③">&lt;custom-ident></a>
</pre>
    <p><a data-link-type="dfn" href="#named-view-transition-pseudo-elements"
        id="ref-for-named-view-transition-pseudo-elements">名前付きビュー遷移疑似要素</a>の<a data-link-type="dfn"
        href="https://www.w3.org/TR/selectors-4/#selector" id="ref-for-selector">セレクター</a>は、
      対応する<a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#pseudo-element"
        id="ref-for-pseudo-element①">疑似要素</a>の <a class="production css" data-link-type="type"
        href="#typedef-pt-name-selector" id="ref-for-typedef-pt-name-selector③">&lt;pt-name-selector></a> が
      その<span id="ref-for-pseudo-element②">疑似要素</span>の<a data-link-type="dfn" href="#view-transition-name"
        id="ref-for-view-transition-name⑥">ビュー遷移名</a>に一致する場合のみマッチします。
      つまり、<a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-3/#x" id="ref-for-x">*</a> または一致する
      <a class="production css" data-link-type="type" href="https://www.w3.org/TR/css-values-4/#identifier-value"
        id="ref-for-identifier-value④">&lt;custom-ident></a> の場合です。
    </p>
    <p class="note" role="note"><span class="marker">注:</span> <a data-link-type="dfn" href="#view-transition-name"
        id="ref-for-view-transition-name⑦">ビュー遷移名</a>は、
      <a data-link-type="dfn" href="#view-transition-pseudo-elements"
        id="ref-for-view-transition-pseudo-elements③">ビュー遷移疑似要素</a>の生成を引き起こした <a class="property css"
        data-link-type="property" href="#propdef-view-transition-name"
        id="ref-for-propdef-view-transition-name⑨">view-transition-name</a> に設定されます。
    </p>
    <p><a data-link-type="dfn" href="#named-view-transition-pseudo-elements"
        id="ref-for-named-view-transition-pseudo-elements①">名前付きビュー遷移疑似要素</a>の<a data-link-type="dfn"
        href="https://www.w3.org/TR/selectors-4/#selector" id="ref-for-selector①">セレクター</a>で
      <a class="production css" data-link-type="type" href="https://www.w3.org/TR/css-values-4/#identifier-value"
        id="ref-for-identifier-value⑤">&lt;custom-ident></a> 引数を持つものの詳細度（specificity）は <a data-link-type="dfn"
        href="https://www.w3.org/TR/selectors-4/#type-selector" id="ref-for-type-selector">型セレクター</a>と同等です。
      <span id="ref-for-named-view-transition-pseudo-elements②">名前付きビュー遷移疑似要素</span>の <span
        id="ref-for-selector②">セレクター</span>で <a class="css" data-link-type="maybe"
        href="https://www.w3.org/TR/selectors-3/#x" id="ref-for-x①">*</a> 引数の場合、詳細度はゼロです。
    </p>
    <h4 class="heading settled" data-level="3.2.2" id="view-transition-pseudo"><span class="secno">3.2.2. </span><span
        class="content">ビュー遷移ツリーのルート: <a class="css" data-link-type="maybe" href="#selectordef-view-transition"
          id="ref-for-selectordef-view-transition②">::view-transition</a>
        疑似要素</span><a class="self-link" href="#view-transition-pseudo"></a></h4>
    <p><dfn class="dfn-paneled css" data-dfn-type="selector" data-export
        id="selectordef-view-transition">::view-transition</dfn> <a data-link-type="dfn"
        href="https://www.w3.org/TR/selectors-4/#pseudo-element" id="ref-for-pseudo-element③">疑似要素</a>は
      <a data-link-type="dfn" href="https://www.w3.org/TR/css-pseudo-4/#tree-abiding"
        id="ref-for-tree-abiding④">ツリー従属疑似要素</a>であり、かつ<a data-link-type="dfn" href="#pseudo-element-root"
        id="ref-for-pseudo-element-root①">疑似要素ルート</a>でもあります。
      発生元要素はドキュメントの<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#document-element"
        id="ref-for-document-element②">ドキュメント要素</a>であり、
      包含ブロックは<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#containing-block"
        id="ref-for-containing-block">包含ブロック</a>として<a data-link-type="dfn" href="#snapshot-containing-block"
        id="ref-for-snapshot-containing-block">スナップショット包含ブロック</a>になります。
    </p>
    <p class="note" role="note"><span class="marker">注:</span> この要素はすべての<a class="css" data-link-type="maybe"
        href="#selectordef-view-transition-group"
        id="ref-for-selectordef-view-transition-group⑦">::view-transition-group()</a>疑似要素の親となります。</p>
    <h4 class="heading settled" data-level="3.2.3" id="::view-transition-group"><span class="secno">3.2.3. </span><span
        class="content">ビュー遷移名付きサブツリーのルート: <a class="css" data-link-type="maybe"
          href="#selectordef-view-transition-group"
          id="ref-for-selectordef-view-transition-group⑧">::view-transition-group()</a> 疑似要素</span><a class="self-link"
        href="#::view-transition-group"></a></h4>
    <p><dfn class="dfn-paneled css" data-dfn-type="selector" data-export
        id="selectordef-view-transition-group">::view-transition-group()</dfn> <a data-link-type="dfn"
        href="https://www.w3.org/TR/selectors-4/#pseudo-element" id="ref-for-pseudo-element④">疑似要素</a>は
      <a data-link-type="dfn" href="#named-view-transition-pseudo-elements"
        id="ref-for-named-view-transition-pseudo-elements③">名前付きビュー遷移疑似要素</a>であり、
      一致するビュー遷移名に対応する<a data-link-type="dfn" href="#view-transitions"
        id="ref-for-view-transitions⑦">ビュー遷移</a>キャプチャを表します。
      <a class="css" data-link-type="maybe" href="#selectordef-view-transition-group"
        id="ref-for-selectordef-view-transition-group⑨">::view-transition-group()</a> <span
        id="ref-for-pseudo-element⑤">疑似要素</span>は、各<a data-link-type="dfn" href="#view-transition-name"
        id="ref-for-view-transition-name⑧">ビュー遷移名</a>ごとに
      <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-child"
        id="ref-for-concept-tree-child①">子要素</a>として<a class="css" data-link-type="maybe"
        href="#selectordef-view-transition" id="ref-for-selectordef-view-transition③">::view-transition</a> <span
        id="ref-for-pseudo-element⑥">疑似要素</span>の下に生成され、
      対応する<a class="css" data-link-type="maybe" href="#selectordef-view-transition-image-pair"
        id="ref-for-selectordef-view-transition-image-pair">::view-transition-image-pair()</a>を含みます。
    </p>
    <div class="note" role="note">
      この要素は初期状態で「旧」要素のサイズ・位置を反映し、
      「旧」要素がなければ「新」要素を反映します。
      <p>「旧」と「新」の両方の状態がある場合、
        <a data-link-type="dfn" href="#document-dynamic-view-transition-style-sheet"
          id="ref-for-document-dynamic-view-transition-style-sheet">動的ビュー遷移スタイルシート</a>のスタイルで、
        この疑似要素の<a class="property css" data-link-type="property"
          href="https://www.w3.org/TR/css-sizing-3/#propdef-width" id="ref-for-propdef-width">width</a> および <a
          class="property css" data-link-type="property" href="https://www.w3.org/TR/css-sizing-3/#propdef-height"
          id="ref-for-propdef-height">height</a>が旧要素の<a data-link-type="dfn"
          href="https://www.w3.org/TR/css-box-4/#border-box" id="ref-for-border-box">border box</a>から新要素の <span
          id="ref-for-border-box①">border box</span> へアニメーションします。
      </p>
      <p>また、要素の<a class="property css" data-link-type="property"
          href="https://www.w3.org/TR/css-transforms-1/#propdef-transform" id="ref-for-propdef-transform">transform</a>
        は
        旧要素のスクリーンスペース変換から新要素のスクリーンスペース変換へアニメーションします。</p>
      <p>このスタイルは、アニメーションプロパティの値が遷移開始時に決まるため、動的に生成されます。</p>
    </div>
    <h4 class="heading settled" data-level="3.2.4" id="::view-transition-image-pair"><span class="secno">3.2.4.
      </span><span class="content">ビュー遷移画像ペアの分離: <a class="css" data-link-type="maybe"
          href="#selectordef-view-transition-image-pair"
          id="ref-for-selectordef-view-transition-image-pair①">::view-transition-image-pair()</a>
        疑似要素</span><a class="self-link" href="#::view-transition-image-pair"></a></h4>
    <p><dfn class="dfn-paneled css" data-dfn-type="selector" data-export
        id="selectordef-view-transition-image-pair">::view-transition-image-pair()</dfn> <a data-link-type="dfn"
        href="https://www.w3.org/TR/selectors-4/#pseudo-element" id="ref-for-pseudo-element⑦">疑似要素</a>は
      <a data-link-type="dfn" href="#named-view-transition-pseudo-elements"
        id="ref-for-named-view-transition-pseudo-elements④">名前付きビュー遷移疑似要素</a>であり、
      対応する旧/新の<a data-link-type="dfn" href="#view-transitions" id="ref-for-view-transitions⑧">ビュー遷移</a>キャプチャのペアを表します。
      この疑似要素は対応する<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-child"
        id="ref-for-concept-tree-child②">子要素</a>として<a class="css" data-link-type="maybe"
        href="#selectordef-view-transition-group"
        id="ref-for-selectordef-view-transition-group①⓪">::view-transition-group()</a>疑似要素の下に生成され、
      対応する<a class="css" data-link-type="maybe" href="#selectordef-view-transition-old"
        id="ref-for-selectordef-view-transition-old①">::view-transition-old()</a>疑似要素
      および/または
      <a class="css" data-link-type="maybe" href="#selectordef-view-transition-new"
        id="ref-for-selectordef-view-transition-new①">::view-transition-new()</a>疑似要素
      （この順）を含みます。
    </p>
    <div class="note" role="note"> この要素は、子要素に<a class="css" data-link-type="propdesc"
        href="https://www.w3.org/TR/compositing-1/#propdef-isolation" id="ref-for-propdef-isolation">isolation:
        isolate</a>を提供するために存在し、
      常に各<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-child"
        id="ref-for-concept-tree-child③">子要素</a>として<a class="css" data-link-type="maybe"
        href="#selectordef-view-transition-group"
        id="ref-for-selectordef-view-transition-group①①">::view-transition-group()</a>の下に現れます。
      この分離により、画像ペアが通常以外のブレンドモードで他のビジュアル出力に影響せずに合成可能になります。 </div>
    <h4 class="heading settled" data-level="3.2.5" id="::view-transition-old"><span class="secno">3.2.5. </span><span
        class="content">ビュー遷移旧状態画像: <a class="css" data-link-type="maybe" href="#selectordef-view-transition-old"
          id="ref-for-selectordef-view-transition-old②">::view-transition-old()</a> 疑似要素</span><a class="self-link"
        href="#::view-transition-old"></a></h4>
    <p><dfn class="dfn-paneled css" data-dfn-type="selector" data-export
        id="selectordef-view-transition-old">::view-transition-old()</dfn> <a data-link-type="dfn"
        href="https://www.w3.org/TR/selectors-4/#pseudo-element" id="ref-for-pseudo-element⑧">疑似要素</a>は、
      「旧」状態のビジュアルスナップショットを <a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#replaced-element"
        id="ref-for-replaced-element">置換要素</a>として表現する
      空の<a data-link-type="dfn" href="#named-view-transition-pseudo-elements"
        id="ref-for-named-view-transition-pseudo-elements⑤">名前付きビュー遷移疑似要素</a>です。
      表現すべき「旧」状態がない場合は省略されます。
      各 <a class="css" data-link-type="maybe" href="#selectordef-view-transition-old"
        id="ref-for-selectordef-view-transition-old③">::view-transition-old()</a> 疑似要素は、
      対応する <a class="css" data-link-type="maybe" href="#selectordef-view-transition-image-pair"
        id="ref-for-selectordef-view-transition-image-pair②">::view-transition-image-pair()</a> 疑似要素の
      <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-child"
        id="ref-for-concept-tree-child④">子要素</a>です。
    </p>
    <div class="note" role="note">
      <a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#only-child-pseudo"
        id="ref-for-only-child-pseudo②">:only-child</a> は、この要素が <a class="css" data-link-type="maybe"
        href="#selectordef-view-transition-image-pair"
        id="ref-for-selectordef-view-transition-image-pair③">::view-transition-image-pair()</a> 内で唯一の場合にマッチさせることができます。
      <p>この要素の見た目は、他の置換要素同様に <code>object-*</code> プロパティで操作できます。</p>
    </div>
    <p class="note" role="note"><span class="marker">注:</span> 画像の内容および<a data-link-type="dfn"
        href="https://www.w3.org/TR/css-images-3/#natural-dimensions" id="ref-for-natural-dimensions">本来の寸法</a>は
      <a data-link-type="dfn" href="#capture-the-image" id="ref-for-capture-the-image①">画像のキャプチャ</a>で取得され、
      <a data-link-type="dfn" href="#setup-transition-pseudo-elements"
        id="ref-for-setup-transition-pseudo-elements①">遷移疑似要素のセットアップ</a>で設定されます。
    </p>
    <p class="note" role="note"><span class="marker">注:</span> これら疑似要素をアニメーションするために追加される
      <a data-link-type="dfn" href="#document-dynamic-view-transition-style-sheet"
        id="ref-for-document-dynamic-view-transition-style-sheet①">動的ビュー遷移スタイルシート</a>上の追加スタイルについては、
      <a data-link-type="dfn" href="#setup-transition-pseudo-elements"
        id="ref-for-setup-transition-pseudo-elements②">遷移疑似要素のセットアップ</a>および <a data-link-type="dfn"
        href="#update-pseudo-element-styles" id="ref-for-update-pseudo-element-styles">疑似要素スタイルの更新</a>で詳述されています。
    </p>
    <h4 class="heading settled" data-level="3.2.6" id="::view-transition-new"><span class="secno">3.2.6. </span><span
        class="content">ビュー遷移新状態画像: <a class="css" data-link-type="maybe" href="#selectordef-view-transition-new"
          id="ref-for-selectordef-view-transition-new②">::view-transition-new()</a> 疑似要素</span><a class="self-link"
        href="#::view-transition-new"></a></h4>
    <p><dfn class="dfn-paneled css" data-dfn-type="selector" data-export
        id="selectordef-view-transition-new">::view-transition-new()</dfn> <a data-link-type="dfn"
        href="https://www.w3.org/TR/selectors-4/#pseudo-element" id="ref-for-pseudo-element⑨">疑似要素</a>（<a class="css"
        data-link-type="maybe" href="#selectordef-view-transition-old"
        id="ref-for-selectordef-view-transition-old④">::view-transition-old()</a> 疑似要素と同様）は、
      「新」状態のビジュアルスナップショットを <a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#replaced-element"
        id="ref-for-replaced-element①">置換要素</a>として表現する
      空の<a data-link-type="dfn" href="#named-view-transition-pseudo-elements"
        id="ref-for-named-view-transition-pseudo-elements⑥">名前付きビュー遷移疑似要素</a>です。
      表現すべき「新」状態がない場合は省略されます。
      各 <a class="css" data-link-type="maybe" href="#selectordef-view-transition-new"
        id="ref-for-selectordef-view-transition-new③">::view-transition-new()</a> 疑似要素は、
      対応する <a class="css" data-link-type="maybe" href="#selectordef-view-transition-image-pair"
        id="ref-for-selectordef-view-transition-image-pair④">::view-transition-image-pair()</a> 疑似要素の
      <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-child"
        id="ref-for-concept-tree-child⑤">子要素</a>です。
    </p>
    <p class="note" role="note"><span class="marker">注:</span> 画像の内容および<a data-link-type="dfn"
        href="https://www.w3.org/TR/css-images-3/#natural-dimensions" id="ref-for-natural-dimensions①">本来の寸法</a>は
      <a data-link-type="dfn" href="#capture-the-image" id="ref-for-capture-the-image②">画像のキャプチャ</a>で取得され、
      <a data-link-type="dfn" href="#setup-transition-pseudo-elements"
        id="ref-for-setup-transition-pseudo-elements③">遷移疑似要素のセットアップ</a>および <a data-link-type="dfn"
        href="#update-pseudo-element-styles" id="ref-for-update-pseudo-element-styles①">疑似要素スタイルの更新</a>で
      設定・更新されます。
    </p>
    <h2 class="heading settled" data-level="4" id="view-transition-rendering"><span class="secno">4. </span><span
        class="content">ビュー遷移レイアウト</span><a class="self-link" href="#view-transition-rendering"></a></h2>
    <p><a data-link-type="dfn" href="#view-transition-pseudo-elements"
        id="ref-for-view-transition-pseudo-elements④">ビュー遷移疑似要素</a>は、通常の要素と同様にスタイル・レイアウト・レンダリングされますが、
      <a data-link-type="dfn" href="#snapshot-containing-block"
        id="ref-for-snapshot-containing-block①">スナップショット包含ブロック</a>内で発生し、
      <a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#initial-containing-block"
        id="ref-for-initial-containing-block">初期包含ブロック</a>ではなく、
      ドキュメントの他の部分の上に <a data-link-type="dfn" href="#view-transition-layer"
        id="ref-for-view-transition-layer">ビュー遷移レイヤー</a>で描画されます。
    </p>
    <h3 class="heading settled" data-level="4.1" id="snapshot-containing-block-concept"><span class="secno">4.1.
      </span><span class="content">スナップショット包含ブロック</span><a class="self-link"
        href="#snapshot-containing-block-concept"></a></h3>
    <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="snapshot-containing-block">スナップショット包含ブロック</dfn>は、
      ウィンドウ内でページ内容が表示されうるすべての領域をカバーする矩形です
      （したがって、ルートのスクロールバーや <a data-link-type="dfn" href="https://www.w3.org/TR/css-viewport-1/#interactive-widget"
        id="ref-for-interactive-widget">インタラクティブウィジェット</a>に関係なく一貫性があります）。
      これにより、<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#document-element"
        id="ref-for-document-element③">ドキュメント要素</a>の
      <a data-link-type="dfn" href="#captured-element-old-image" id="ref-for-captured-element-old-image">旧画像</a>や
      <a data-link-type="dfn" href="#captured-element-new-element"
        id="ref-for-captured-element-new-element">新要素</a>に対して一貫性が保たれます。
    </p>
    <p>iframeの場合、<a data-link-type="dfn" href="#snapshot-containing-block"
        id="ref-for-snapshot-containing-block②">スナップショット包含ブロック</a>は
      <a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#initial-containing-block"
        id="ref-for-initial-containing-block①">初期包含ブロック</a>に対応します。
    </p>
    <figure>
      <img alt="スマートフォン画面の図。上部ステータスバー、ブラウザーURLバー、浮遊スクロールバー付きWebコンテンツ領域、仮想キーボード、OSの戻るボタン付き下部バーが含まれる" height="335"
        src="https://www.w3.org/TR/css-view-transitions-1/diagrams/phone-browser.svg" width="200"> <img
        alt="前図。スナップショット包含ブロックにあたる領域が強調。上部ステータスバーと下部OSバーを除く全領域" height="335"
        src="https://www.w3.org/TR/css-view-transitions-1/diagrams/phone-browser-snapshot-root.svg" width="200">
      <figcaption> モバイルOS上の <a data-link-type="dfn" href="#snapshot-containing-block"
          id="ref-for-snapshot-containing-block③">スナップショット包含ブロック</a>の例。
        スナップショットにはURLバーが含まれます（スクロールで消えるため）。
        キーボードは表示・非表示が切り替わるため含まれます。
        上下バーはOSの一部であり、ブラウザーの一部ではないためスナップショット包含ブロックには含まれません。 </figcaption>
    </figure>
    <figure>
      <img alt="デスクトップブラウザーウィンドウの図。タブバー、URLバー、水平・垂直スクロールバー付きWebコンテンツ領域" height="79"
        src="https://www.w3.org/TR/css-view-transitions-1/diagrams/desktop-browser.svg"
        style="height:auto; width: 600px" width="132"> <img alt="前図。スナップショット包含ブロックにあたる領域が強調。Webコンテンツ領域とスクロールバーを含む"
        height="79" src="https://www.w3.org/TR/css-view-transitions-1/diagrams/desktop-browser-snapshot-root.svg"
        style="height:auto; width: 600px" width="132">
      <figcaption> デスクトップOS上の <a data-link-type="dfn" href="#snapshot-containing-block"
          id="ref-for-snapshot-containing-block④">スナップショット包含ブロック</a>の例。
        スクロールバーは含まれますが、URLバーはWebコンテンツが表示されないため含まれません。
      </figcaption>
    </figure>
    <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
        id="snapshot-containing-block-origin">スナップショット包含ブロック原点</dfn>は、
      <a data-link-type="dfn" href="#snapshot-containing-block"
        id="ref-for-snapshot-containing-block⑤">スナップショット包含ブロック</a>の左上隅を指します。
    </p>
    <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
        id="snapshot-containing-block-size">スナップショット包含ブロックサイズ</dfn>は、
      <a data-link-type="dfn" href="#snapshot-containing-block"
        id="ref-for-snapshot-containing-block⑥">スナップショット包含ブロック</a>の幅・高さを
      <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple" id="ref-for-tuple">2つの数値のタプル</a>として表します。
    </p>
    <p><a data-link-type="dfn" href="#snapshot-containing-block"
        id="ref-for-snapshot-containing-block⑦">スナップショット包含ブロック</a>は
      <a data-link-type="dfn" href="https://www.w3.org/TR/css-position-3/#absolute-positioning-containing-block"
        id="ref-for-absolute-positioning-containing-block">絶対位置付け包含ブロック</a>および
      <a data-link-type="dfn" href="https://www.w3.org/TR/css-position-3/#fixed-positioning-containing-block"
        id="ref-for-fixed-positioning-containing-block">固定位置付け包含ブロック</a>とみなされ、
      <a class="css" data-link-type="maybe" href="#selectordef-view-transition"
        id="ref-for-selectordef-view-transition④">::view-transition</a>およびその子孫に適用されます。
    </p>
    <h3 class="heading settled" data-level="4.2" id="view-transition-stacking-layer"><span class="secno">4.2.
      </span><span class="content">ビュー遷移の描画順序</span><a class="self-link" href="#view-transition-stacking-layer"></a>
    </h3>
    <p>この仕様では、新しいスタッキングレイヤー <a data-link-type="dfn" href="#view-transition-layer"
        id="ref-for-view-transition-layer①">ビュー遷移レイヤー</a> を、
      <a href="https://www.w3.org/TR/CSS22/zindex.html">CSS2§E スタッキングコンテキストの詳細な説明</a> で定義された描画順序の末尾に追加します。
      <a data-link-type="biblio" href="#biblio-css2"
        title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS2]</a>
    </p>
    <p><a class="css" data-link-type="maybe" href="#selectordef-view-transition"
        id="ref-for-selectordef-view-transition⑤">::view-transition</a> 疑似要素は、新しいスタッキングコンテキスト
      <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="view-transition-layer">ビュー遷移レイヤー</dfn> を生成し、
      ドキュメントのすべての他のコンテンツ（<a data-link-type="dfn" href="https://drafts.csswg.org/css-position-4/#document-top-layer"
        id="ref-for-document-top-layer">トップレイヤー</a>でレンダリングされる内容も含む）より後に
      描画されます。また、これらのコンテンツに適用されるフィルターやエフェクトの後に描画されます。
      （ただし、ビュー遷移レイヤー自体はフィルターやエフェクトの対象にはなりません。
      ただし、<a class="css" data-link-type="maybe" href="#selectordef-view-transition-old"
        id="ref-for-selectordef-view-transition-old⑤">::view-transition-old()</a> および <a class="css"
        data-link-type="maybe" href="#selectordef-view-transition-new"
        id="ref-for-selectordef-view-transition-new④">::view-transition-new()</a> 疑似要素のレンダリング内容に影響する場合は除きます。）
    </p>
    <p class="note" role="note"><span class="marker">注:</span> この機能の目的は、ページの内容（トップレイヤー要素も含む）をキャプチャできるようにすることです。
      そのため、<a data-link-type="dfn" href="#view-transition-layer"
        id="ref-for-view-transition-layer②">ビュー遷移レイヤー</a>はキャプチャされたスタッキングコンテキストの一部にはできません。
      そうすると循環依存が生じるためです。
      よって、<span id="ref-for-view-transition-layer③">ビュー遷移レイヤー</span>は他のすべてのコンテンツの兄弟要素として扱われます。</p>
    <p><code
        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document">Document</a></code>
      の
      <a data-link-type="dfn" href="#document-active-view-transition"
        id="ref-for-document-active-view-transition">アクティブなビュー遷移</a>の <a data-link-type="dfn"
        href="#viewtransition-phase" id="ref-for-viewtransition-phase">phase</a> が "<code>animating</code>" の場合、
      <code
        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①">Document</a></code>
      内で
      <a data-link-type="dfn" href="#captured-in-a-view-transition"
        id="ref-for-captured-in-a-view-transition②">ビュー遷移でキャプチャされた</a>要素およびその
      <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#element-contents"
        id="ref-for-element-contents">要素内容</a>によって生成されるボックスは、
      <a data-link-type="dfn" href="#viewtransition-transition-root-pseudo-element"
        id="ref-for-viewtransition-transition-root-pseudo-element">遷移ルート疑似要素</a>の
      <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-inclusive-descendant"
        id="ref-for-concept-tree-inclusive-descendant">包括的子孫</a>を除き、
      描画されません（<a class="css" data-link-type="propdesc" href="https://www.w3.org/TR/css-display-3/#propdef-visibility"
        id="ref-for-propdef-visibility">visibility: hidden</a> のように）、
      またヒットテストにも応答しません（<a class="css" data-link-type="propdesc"
        href="https://drafts.csswg.org/css-ui-4/#propdef-pointer-events"
        id="ref-for-propdef-pointer-events">pointer-events: none</a> のように）。
    </p>
    <p class="note" role="note"><span class="marker">注:</span> 遷移に参加する要素は、DOM上の位置での描画をスキップする必要があります。
      なぜなら画像が対応する <a class="css" data-link-type="maybe" href="#selectordef-view-transition-new"
        id="ref-for-selectordef-view-transition-new⑤">::view-transition-new()</a> 疑似要素で描画されるためです。
      同様に、ヒットテストもスキップされます。DOM上の位置が実際の描画位置と一致しないためです。
      ただし、これらの要素のアクセシビリティツリーや支援技術によるアクセス方法には変更はありません。</p>
    <h2 class="heading settled" data-level="5" id="ua-styles"><span class="secno">5. </span><span
        class="content">ユーザーエージェントスタイルシート</span><a class="self-link" href="#ua-styles"></a></h2>
    <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
        id="global-view-transition-user-agent-style-sheet">グローバルビュー遷移ユーザーエージェントスタイルシート</dfn>は、
      以下のルールを含む<a data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-5/#cascade-origin-ua"
        id="ref-for-cascade-origin-ua">ユーザーエージェント起源</a>のスタイルシートです：</p>
    <pre class="language-css highlight">:root <c- p>{</c->
  <c- k>view-transition-name</c-><c- p>:</c-> root<c- p>;</c->
<c- p>}</c->

:root::view-transition <c- p>{</c->
  <c- k>position</c-><c- p>:</c-> fixed<c- p>;</c->
  <c- k>inset</c-><c- p>:</c-> <c- m>0</c-><c- p>;</c->
<c- p>}</c->

:root:<c- nf>:view-transition-group</c-><c- p>(</c->*<c- p>)</c-> <c- p>{</c->
  <c- k>position</c-><c- p>:</c-> absolute<c- p>;</c->
  <c- k>top</c-><c- p>:</c-> <c- m>0</c-><c- p>;</c->
  <c- k>left</c-><c- p>:</c-> <c- m>0</c-><c- p>;</c->

  <c- k>animation-duration</c-><c- p>:</c-> <c- m>0.25</c-><c- k>s</c-><c- p>;</c->
  <c- k>animation-fill-mode</c-><c- p>:</c-> both<c- p>;</c->
<c- p>}</c->

:root:<c- nf>:view-transition-image-pair</c-><c- p>(</c->*<c- p>)</c-> <c- p>{</c->
  <c- k>position</c-><c- p>:</c-> absolute<c- p>;</c->
  <c- k>inset</c-><c- p>:</c-> <c- m>0</c-><c- p>;</c->

  <c- k>animation-duration</c-><c- p>:</c-> inherit<c- p>;</c->
  <c- k>animation-fill-mode</c-><c- p>:</c-> inherit<c- p>;</c->
  <c- k>animation-delay</c-><c- p>:</c-> inherit<c- p>;</c->
<c- p>}</c->

:root:<c- nf>:view-transition-old</c-><c- p>(</c->*<c- p>),</c->
:root:<c- nf>:view-transition-new</c-><c- p>(</c->*<c- p>)</c-> <c- p>{</c->
  <c- k>position</c-><c- p>:</c-> absolute<c- p>;</c->
  <c- k>inset-block-start</c-><c- p>:</c-> <c- m>0</c-><c- p>;</c->
  <c- k>inline-size</c-><c- p>:</c-> <c- m>100</c-><c- k>%</c-><c- p>;</c->
  <c- k>block-size</c-><c- p>:</c-> auto<c- p>;</c->

  <c- k>animation-duration</c-><c- p>:</c-> inherit<c- p>;</c->
  <c- k>animation-fill-mode</c-><c- p>:</c-> inherit<c- p>;</c->
  <c- k>animation-delay</c-><c- p>:</c-> inherit<c- p>;</c->
<c- p>}</c->

<c- c>/* デフォルトのクロスフェード遷移 */</c->
<c- n>@keyframes</c-> -ua-view-transition-fade-out <c- p>{</c->
  to <c- p>{</c-> <c- k>opacity</c-><c- p>:</c-> <c- m>0</c-><c- p>;</c-> <c- p>}</c->
<c- p>}</c->
<c- n>@keyframes</c-> -ua-view-transition-fade-in <c- p>{</c->
  from <c- p>{</c-> <c- k>opacity</c-><c- p>:</c-> <c- m>0</c-><c- p>;</c-> <c- p>}</c->
<c- p>}</c->

<c- c>/* 画像が2枚ある場合のブレンディング用キーフレーム */</c->
<c- n>@keyframes</c-> -ua-mix-blend-mode-plus-lighter <c- p>{</c->
  from <c- p>{</c-> <c- k>mix-blend-mode</c-><c- p>:</c-> plus-lighter <c- p>}</c->
  to <c- p>{</c-> <c- k>mix-blend-mode</c-><c- p>:</c-> plus-lighter <c- p>}</c->
<c- p>}</c->
</pre>
    <details class="note">
      <summary>解説</summary>
      このUAスタイルシートは以下のことを行います：
      <ul>
        <li data-md>
          <p><a class="css" data-link-type="maybe" href="#selectordef-view-transition"
              id="ref-for-selectordef-view-transition⑥">::view-transition</a> を <a data-link-type="dfn"
              href="#snapshot-containing-block" id="ref-for-snapshot-containing-block⑧">スナップショット包含ブロック</a>全体にレイアウトし、
            各 <span class="css">:view-transition-group()</span> 子要素がそれに相対してレイアウトできるようにします。</p>
        <li data-md>
          <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#root-element"
              id="ref-for-root-element①">ルート要素</a>にデフォルトの <a data-link-type="dfn" href="#view-transition-name"
              id="ref-for-view-transition-name⑨">view-transition-name</a> を設定し、
            独立して選択できるようにします。</p>
        <li data-md>
          <p><a class="css" data-link-type="maybe" href="#selectordef-view-transition-image-pair"
              id="ref-for-selectordef-view-transition-image-pair⑤">::view-transition-image-pair()</a>
            疑似要素によるレイアウト干渉を減らし、
            著者が <a class="css" data-link-type="maybe" href="#selectordef-view-transition-old"
              id="ref-for-selectordef-view-transition-old⑥">::view-transition-old()</a> や <a class="css"
              data-link-type="maybe" href="#selectordef-view-transition-new"
              id="ref-for-selectordef-view-transition-new⑥">::view-transition-new()</a> をほとんどの場合
            <a class="css" data-link-type="maybe" href="#selectordef-view-transition-group"
              id="ref-for-selectordef-view-transition-group①②">::view-transition-group()</a> の直接の子として扱えるようにします。
          </p>
        <li data-md>
          <p>アニメーションのタイミングをツリー全体で継承させることで、デフォルトでは
            <a class="css" data-link-type="maybe" href="#selectordef-view-transition-group"
              id="ref-for-selectordef-view-transition-group①③">::view-transition-group()</a> 上に設定されたアニメーションタイミングが
            すべての子孫に影響します。
          </p>
        <li data-md>
          <p><a class="css" data-link-type="maybe" href="#selectordef-view-transition-old"
              id="ref-for-selectordef-view-transition-old⑦">::view-transition-old()</a> や <a class="css"
              data-link-type="maybe" href="#selectordef-view-transition-new"
              id="ref-for-selectordef-view-transition-new⑦">::view-transition-new()</a> のキャプチャ要素を
            <a class="css" data-link-type="maybe" href="#selectordef-view-transition-group"
              id="ref-for-selectordef-view-transition-group①④">::view-transition-group()</a> の
            サイズ・位置に（アスペクト比を崩さない範囲で）合わせてスタイルし、補間時にその間を遷移できるようにします。
            これら要素のサイズ指定は論理座標と物理座標のマッピングに依存するため、
            <a data-link-type="dfn" href="#document-dynamic-view-transition-style-sheet"
              id="ref-for-document-dynamic-view-transition-style-sheet②">動的ビュー遷移スタイルシート</a>がDOM要素から関連スタイルをコピーします。
          </p>
        <li data-md>
          <p>各 <a class="css" data-link-type="maybe" href="#selectordef-view-transition-group"
              id="ref-for-selectordef-view-transition-group①⑤">::view-transition-group()</a> に
            デフォルトで0.25秒のクロスフェードアニメーションを設定します。</p>
      </ul>
    </details>
    <p>追加のスタイルは、<a data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-5/#cascade-origin-ua"
        id="ref-for-cascade-origin-ua①">ユーザーエージェント起源</a>に
      <a data-link-type="dfn" href="#view-transitions" id="ref-for-view-transitions⑨">ビュー遷移</a>時に
      <a data-link-type="dfn" href="#document-dynamic-view-transition-style-sheet"
        id="ref-for-document-dynamic-view-transition-style-sheet③">動的ビュー遷移スタイルシート</a>経由で動的に追加されます。
    </p>
    <h2 class="heading settled" data-level="6" id="api"><span class="secno">6. </span><span class="content">API</span><a
        class="self-link" href="#api"></a></h2>
    <h3 class="heading settled" data-level="6.1" id="additions-to-document-api"><span class="secno">6.1. </span><span
        class="content"><code
          class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②">Document</a></code>への追加</span><a
        class="self-link" href="#additions-to-document-api"></a></h3>
    <pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#document" id="ref-for-document③"><c- g>Document</c-></a> {
  <a data-link-type="idl-name" href="#viewtransition" id="ref-for-viewtransition①"><c- n>ViewTransition</c-></a> <a class="idl-code" data-link-type="method" href="#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition②"><c- g>startViewTransition</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#callbackdef-updatecallback" id="ref-for-callbackdef-updatecallback⑤"><c- n>UpdateCallback</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Document/startViewTransition(updateCallback), Document/startViewTransition()" data-dfn-type="argument" data-export id="dom-document-startviewtransition-updatecallback-updatecallback"><code><c- g>updateCallback</c-></code></dfn>);
};

<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-updatecallback"><code><c- g>UpdateCallback</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any"><c- b>any</c-></a>> ();
</pre>
    <dl class="domintro non-normative">
      <dt data-md>
        <code><code class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition②">viewTransition</a></code>
        = <code
          class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document④">document</a></code>.<code
          class="idl"><a data-link-type="idl" href="#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition③">startViewTransition</a></code>(<code
          class="idl"><a data-link-type="idl" href="#callbackdef-updatecallback" id="ref-for-callbackdef-updatecallback⑥">updateCallback</a></code>)</code>
      <dd data-md>
        <p>新しい <a data-link-type="dfn" href="#view-transitions" id="ref-for-view-transitions①⓪">ビュー遷移</a> を開始します（<code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑤">document</a></code>
          の
          既存の <a data-link-type="dfn" href="#document-active-view-transition"
            id="ref-for-document-active-view-transition①">アクティブなビュー遷移</a>があればキャンセルします）。</p>
        <p><code
            class="idl"><a data-link-type="idl" href="#callbackdef-updatecallback" id="ref-for-callbackdef-updatecallback⑦">updateCallback</a></code>
          が指定されていれば、ドキュメントの現在の状態がキャプチャされた後に非同期で呼び出されます。
          その後、<code
            class="idl"><a data-link-type="idl" href="#callbackdef-updatecallback" id="ref-for-callbackdef-updatecallback⑧">updateCallback</a></code>
          が返すPromiseがfulfilledになると、
          ドキュメントの新しい状態がキャプチャされ、遷移が開始されます。</p>
        <p>なお <code
            class="idl"><a data-link-type="idl" href="#callbackdef-updatecallback" id="ref-for-callbackdef-updatecallback⑨">updateCallback</a></code>
          は、遷移が実行できない場合（例：重複した <code>view-transition-name</code> の値がある場合）でも
          <em>必ず</em>呼び出されます。
          遷移は状態変更への拡張であり、遷移の生成失敗によって状態変更自体が妨げられることはありません。
          この原則の詳細は <a href="#transitions-as-enhancements">§ 1.4 拡張機能としての遷移</a> を参照してください。
        </p>
        <p><code
            class="idl"><a data-link-type="idl" href="#callbackdef-updatecallback" id="ref-for-callbackdef-updatecallback①⓪">updateCallback</a></code>
          が返すPromiseがrejectされた場合、遷移はスキップされます。</p>
    </dl>
    <h4 class="heading settled" data-level="6.1.1" id="ViewTransition-prepare"><span class="secno">6.1.1. </span><span
        class="content"><code
          class="idl"><a data-link-type="idl" href="#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition④">startViewTransition()</a></code>
        メソッド手順</span><a class="self-link" href="#ViewTransition-prepare"></a></h4>
    <div class="algorithm" data-algorithm="startViewTransition(updateCallback)" data-algorithm-for="Document">
      <dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="method" data-export
        data-lt="startViewTransition(updateCallback)|startViewTransition()"
        id="dom-document-startviewtransition"><code>startViewTransition(<var>updateCallback</var>)</code></dfn> の
      <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#method-steps"
        id="ref-for-method-steps">メソッド手順</a>は以下の通りです:
      <ol>
        <li data-md>
          <p><var>transition</var> を <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
              id="ref-for-this">this</a> の
            <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
              id="ref-for-concept-relevant-realm">関連Realm</a>内で新しい <code
              class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition③">ViewTransition</a></code>
            オブジェクトとして生成する。
          </p>
        <li data-md>
          <p><var>updateCallback</var> が指定されていれば、<var>transition</var> の <a data-link-type="dfn"
              href="#viewtransition-update-callback" id="ref-for-viewtransition-update-callback">update callback</a> を
            <var>updateCallback</var> に設定する。
          </p>
        <li data-md>
          <p><var>document</var> を <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
              id="ref-for-this①">this</a> の
            <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
              id="ref-for-concept-relevant-global">関連グローバルオブジェクト</a>の
            <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"
              id="ref-for-concept-document-window">関連付けられたドキュメント</a>とする。
          </p>
        <li data-md>
          <p><var>document</var> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/interaction.html#visibility-state"
              id="ref-for-visibility-state">visibility state</a> が "<code>hidden</code>" なら、
            <a data-link-type="dfn" href="#skip-the-view-transition" id="ref-for-skip-the-view-transition">skip</a>
            <var>transition</var> （"<code
              class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror">InvalidStateError</a></code>"
            <code
              class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code>
            付き）で終了し、<var>transition</var> を返す。
          </p>
        <li data-md>
          <p><var>document</var> の <a data-link-type="dfn" href="#document-active-view-transition"
              id="ref-for-document-active-view-transition②">アクティブなビュー遷移</a> が null でない場合、
            <a data-link-type="dfn" href="#skip-the-view-transition"
              id="ref-for-skip-the-view-transition①">そのビュー遷移をスキップ</a>
            （"<code
              class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#aborterror" id="ref-for-aborterror">AbortError</a></code>"
            <code
              class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException①">DOMException</a></code>
            を
            <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②">this</a> の
            <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
              id="ref-for-concept-relevant-realm①">関連Realm</a>で発生させる）。
          </p>
          <p class="note" role="note"><span class="marker">注:</span> これにより2つの非同期な <a data-link-type="dfn"
              href="#viewtransition-update-callback" id="ref-for-viewtransition-update-callback①">update callback</a>
            が同時実行される可能性があり
            （順序が入れ替わる場合もある）:
            1つは <var>document</var> の現在の <a data-link-type="dfn" href="#document-active-view-transition"
              id="ref-for-document-active-view-transition③">アクティブなビュー遷移</a>用、
            もう1つは今回の <var>transition</var> 用。
            <a href="#transitions-as-enhancements">この機能の設計</a>に従い、開発者が別の機能やフレームワークでこれらDOM変更の正しいスケジューリングを行うことを想定しています。
          </p>
        <li data-md>
          <p><var>document</var> の <a data-link-type="dfn" href="#document-active-view-transition"
              id="ref-for-document-active-view-transition④">アクティブなビュー遷移</a> を <var>transition</var> に設定する。</p>
          <p class="note" role="note"><span class="marker">注:</span> <a data-link-type="dfn" href="#view-transitions"
              id="ref-for-view-transitions①①">ビュー遷移</a>の処理は
            <a data-link-type="dfn" href="#setup-view-transition" id="ref-for-setup-view-transition">ビュー遷移のセットアップ</a>内で
            <a data-link-type="dfn" href="#perform-pending-transition-operations"
              id="ref-for-perform-pending-transition-operations">保留遷移操作の実行</a>を通じて継続します。
          </p>
        <li data-md>
          <p><var>transition</var> を返す。</p>
      </ol>
    </div>
    <h3 class="heading settled" data-level="6.2" id="the-domtransition-interface"><span class="secno">6.2. </span><span
        class="content"><code
          class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition④">ViewTransition</a></code>
        インターフェース</span><a class="self-link" href="#the-domtransition-interface"></a></h3>
    <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="viewtransition"><code><c- g>ViewTransition</c-></code></dfn> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="ViewTransition" data-dfn-type="attribute" data-export data-readonly data-type="Promise<undefined>" id="dom-viewtransition-updatecallbackdone"><code><c- g>updateCallbackDone</c-></code></dfn>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise②"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="ViewTransition" data-dfn-type="attribute" data-export data-readonly data-type="Promise<undefined>" id="dom-viewtransition-ready"><code><c- g>ready</c-></code></dfn>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise③"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined②"><c- b>undefined</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="ViewTransition" data-dfn-type="attribute" data-export data-readonly data-type="Promise<undefined>" id="dom-viewtransition-finished"><code><c- g>finished</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined③"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-viewtransition-skiptransition" id="ref-for-dom-viewtransition-skiptransition①"><c- g>skipTransition</c-></a>();
};
</pre>
    <p><code
        class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition⑤">ViewTransition</a></code>
      インターフェースは、同一ドキュメント内の1つの<a data-link-type="dfn" href="#view-transitions"
        id="ref-for-view-transitions①②">ビュー遷移</a>（開始・終了ドキュメントが同じで、DOM構造が変更される可能性がある遷移）を表し、制御します。</p>
    <dl class="domintro non-normative">
      <dt data-md>
        <code><code class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition⑥">viewTransition</a></code>.<code
          class="idl"><a data-link-type="idl" href="#dom-viewtransition-updatecallbackdone" id="ref-for-dom-viewtransition-updatecallbackdone①">updateCallbackDone</a></code></code>
      <dd data-md>
        <p><code
            class="idl"><a data-link-type="idl" href="#callbackdef-updatecallback" id="ref-for-callbackdef-updatecallback①①">updateCallback</a></code>
          が返すPromiseがfulfilledになるときにfulfilledし、rejectされるとrejectされるPromiseです。</p>
        <p class="note" role="note"><span class="marker">注:</span> View Transition APIはDOM変更をラップし、ビジュアル遷移を生成します。
          しかし、遷移アニメーションの成否を気にせず、DOM変更がいつ実行されるかだけ知りたい場合があります。<code
            class="idl"><a data-link-type="idl" href="#dom-viewtransition-updatecallbackdone" id="ref-for-dom-viewtransition-updatecallbackdone②">updateCallbackDone</a></code>
          はその用途向けです。</p>
      <dt data-md>
        <code><code class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition⑦">viewTransition</a></code>.<code
          class="idl"><a data-link-type="idl" href="#dom-viewtransition-ready" id="ref-for-dom-viewtransition-ready①">ready</a></code></code>
      <dd data-md>
        <p>遷移用疑似要素が生成され、アニメーションが開始される直前にfulfilledするPromiseです。</p>
        <p>遷移が開始できない場合はrejectされます。
          これは重複した'view-transition-name'などの設定ミスや、
          <code
            class="idl"><a data-link-type="idl" href="#dom-viewtransition-updatecallbackdone" id="ref-for-dom-viewtransition-updatecallbackdone③">updateCallbackDone</a></code>
          がrejectされた場合などです。
        </p>
        <p><code
            class="idl"><a data-link-type="idl" href="#dom-viewtransition-ready" id="ref-for-dom-viewtransition-ready②">ready</a></code>
          がfulfilledするタイミングは、
          <a data-link-type="dfn" href="#view-transition-pseudo-elements"
            id="ref-for-view-transition-pseudo-elements⑤">ビュー遷移疑似要素</a>を <a
            href="https://www.w3.org/TR/web-animations-1/#extensions-to-the-element-interface">Web Animation API</a>
          でアニメーションするのに最適です。
        </p>
      <dt data-md>
        <code><code class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition⑧">viewTransition</a></code>.<code
          class="idl"><a data-link-type="idl" href="#dom-viewtransition-finished" id="ref-for-dom-viewtransition-finished①">finished</a></code></code>
      <dd data-md>
        <p>エンド状態が完全にユーザーに見えて、操作可能になったときにfulfilledするPromiseです。</p>
        <p>rejectされるのは
          <code
            class="idl"><a data-link-type="idl" href="#callbackdef-updatecallback" id="ref-for-callbackdef-updatecallback①②">updateCallback</a></code>
          がrejectされた場合のみで、
          これはエンド状態が生成されなかったことを示します。
        </p>
        <p>それ以外の場合、遷移が開始できなかったり
          <code
            class="idl"><a data-link-type="idl" href="#dom-viewtransition-skiptransition" id="ref-for-dom-viewtransition-skiptransition②">skipTransition()</a></code>
          でスキップされた場合でも、エンド状態には到達するので
          <code
            class="idl"><a data-link-type="idl" href="#dom-viewtransition-finished" id="ref-for-dom-viewtransition-finished②">finished</a></code>
          はfulfilledします。
        </p>
      <dt data-md>
        <code><code class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition⑨">viewTransition</a></code>.<code
          class="idl"><a data-link-type="idl" href="#dom-viewtransition-skiptransition" id="ref-for-dom-viewtransition-skiptransition③">skipTransition</a></code>()</code>
      <dd data-md>
        <p>遷移を即座に終了するか、開始を防ぎます。</p>
        <p>これは
          <code
            class="idl"><a data-link-type="idl" href="#callbackdef-updatecallback" id="ref-for-callbackdef-updatecallback①③">updateCallback</a></code>
          の呼び出しを妨げません。
          DOM変更は遷移とは独立しているためです。
          この原則の詳細は <a href="#transitions-as-enhancements">§ 1.4 拡張機能としての遷移</a> を参照してください。
        </p>
        <p>これが <code
            class="idl"><a data-link-type="idl" href="#dom-viewtransition-ready" id="ref-for-dom-viewtransition-ready③">ready</a></code>
          解決前に呼ばれると、<code
            class="idl"><a data-link-type="idl" href="#dom-viewtransition-ready" id="ref-for-dom-viewtransition-ready④">ready</a></code>
          はrejectされます。</p>
        <p><code
            class="idl"><a data-link-type="idl" href="#dom-viewtransition-finished" id="ref-for-dom-viewtransition-finished③">finished</a></code>
          が解決されていなければ、<code
            class="idl"><a data-link-type="idl" href="#dom-viewtransition-updatecallbackdone" id="ref-for-dom-viewtransition-updatecallbackdone④">updateCallbackDone</a></code>
          と一緒にfulfilledまたはrejectされます。</p>
    </dl>
    <p><code
        class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition①⓪">ViewTransition</a></code>
      には以下があります:</p>
    <dl>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="ViewTransition" data-dfn-type="dfn" data-noexport
          id="viewtransition-named-elements">named elements</dfn>
      <dd data-md>
        <p>キーが <a data-link-type="dfn" href="#view-transition-name" id="ref-for-view-transition-name①⓪">view transition
            name</a>、
          値が <a data-link-type="dfn" href="#captured-element" id="ref-for-captured-element">captured element</a> である <a
            data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map">map</a>。
          初期値は新しい <span id="ref-for-ordered-map①">map</span>。
          注: これは <code
            class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition①①">ViewTransition</a></code>
          に紐付くため、
          <a data-link-type="dfn" href="#clear-view-transition" id="ref-for-clear-view-transition">Clear view
            transition</a>が呼ばれるとクリーンアップされます。
        </p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="ViewTransition" data-dfn-type="dfn" data-noexport
          id="viewtransition-phase">phase</dfn>
      <dd data-md>
        <p>次の順序付きフェーズのうち1つ。初期値は "<code>pending-capture</code>"：</p>
        <ol>
          <li data-md>
            <p>"<code>pending-capture</code>"</p>
          <li data-md>
            <p>"<code>update-callback-called</code>"</p>
          <li data-md>
            <p>"<code>animating</code>"</p>
          <li data-md>
            <p>"<code>done</code>"</p>
        </ol>
        <p class="note" role="note"><span class="marker">注:</span> このAPIを使う開発者は通常、各フェーズを意識する必要はありません。フェーズは自動的に進行します。
          ただし、各フェーズで何が行われるか（スナップショットの取得、疑似要素DOMの生成など）は重要です。
          以下のフェーズ説明は、実装者が仕様準拠の実装を作るために曖昧さのない手順を提供することを目指しています。</p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="ViewTransition" data-dfn-type="dfn" data-noexport
          id="viewtransition-update-callback">update callback</dfn>
      <dd data-md>
        <p><code
            class="idl"><a data-link-type="idl" href="#callbackdef-updatecallback" id="ref-for-callbackdef-updatecallback①④">UpdateCallback</a></code>
          または null。初期値は null。</p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="ViewTransition" data-dfn-type="dfn" data-noexport
          id="viewtransition-ready-promise">ready promise</dfn>
      <dd data-md>
        <p><code
            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise④">Promise</a></code>。
          初期値は <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise"
            id="ref-for-a-new-promise">新しいpromise</a>（<a data-link-type="dfn"
            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③">this</a> の
          <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
            id="ref-for-concept-relevant-realm②">関連Realm</a>内）。
        </p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="ViewTransition" data-dfn-type="dfn" data-noexport
          id="viewtransition-update-callback-done-promise">update callback done promise</dfn>
      <dd data-md>
        <p><code
            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑤">Promise</a></code>。
          初期値は <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise"
            id="ref-for-a-new-promise①">新しいpromise</a>（<a data-link-type="dfn"
            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④">this</a> の
          <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
            id="ref-for-concept-relevant-realm③">関連Realm</a>内）。
        </p>
        <p class="note" role="note"><span class="marker">注:</span> <a data-link-type="dfn"
            href="#viewtransition-ready-promise" id="ref-for-viewtransition-ready-promise">ready promise</a> と <a
            data-link-type="dfn" href="#viewtransition-update-callback-done-promise"
            id="ref-for-viewtransition-update-callback-done-promise">update callback done promise</a> は即座に生成されるため、
          rejectされると <code
            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-unhandledrejection" id="ref-for-event-unhandledrejection">unhandledrejection</a></code>
          が発生します
          （getter（<code
            class="idl"><a data-link-type="idl" href="#dom-viewtransition-updatecallbackdone" id="ref-for-dom-viewtransition-updatecallbackdone⑤">updateCallbackDone</a></code>
          など）がアクセスされていなくても）、
          <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#mark-a-promise-as-handled"
            id="ref-for-mark-a-promise-as-handled">handled</a>されない限りです。
        </p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="ViewTransition" data-dfn-type="dfn" data-noexport
          id="viewtransition-finished-promise">finished promise</dfn>
      <dd data-md>
        <p><code
            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑥">Promise</a></code>。
          初期値は <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise"
            id="ref-for-a-new-promise②">新しいpromise</a>（<a data-link-type="dfn"
            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑤">this</a> の
          <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
            id="ref-for-concept-relevant-realm④">関連Realm</a>内）、<a data-link-type="dfn"
            href="https://webidl.spec.whatwg.org/#mark-a-promise-as-handled"
            id="ref-for-mark-a-promise-as-handled①">handled</a>としてマークされる。
        </p>
        <p class="note" role="note"><span class="marker">注:</span> このpromiseは <a data-link-type="dfn"
            href="https://webidl.spec.whatwg.org/#mark-a-promise-as-handled"
            id="ref-for-mark-a-promise-as-handled②">handled</a>としてマークされているため、重複した <code
            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-unhandledrejection" id="ref-for-event-unhandledrejection①">unhandledrejection</a></code>
          を防げます。
          このpromiseは <a data-link-type="dfn" href="#viewtransition-update-callback-done-promise"
            id="ref-for-viewtransition-update-callback-done-promise①">update callback done promise</a>
          と一緒にrejectされる場合のみrejectされます。</p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="ViewTransition" data-dfn-type="dfn" data-noexport
          id="viewtransition-transition-root-pseudo-element">transition root pseudo-element</dfn>
      <dd data-md>
        <p><a class="css" data-link-type="maybe" href="#selectordef-view-transition"
            id="ref-for-selectordef-view-transition⑦">::view-transition</a>。
          初期値は新しい <span class="css" id="ref-for-selectordef-view-transition⑧">::view-transition</span>。</p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="ViewTransition" data-dfn-type="dfn" data-noexport
          id="viewtransition-initial-snapshot-containing-block-size">initial snapshot containing block size</dfn>
      <dd data-md>
        <p>2つの数値（幅と高さ）の <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple"
            id="ref-for-tuple①">tuple</a>、または null。
          初期値は null。</p>
        <p class="note" role="note"><span class="marker">注:</span> これは <a data-link-type="dfn"
            href="#snapshot-containing-block-size" id="ref-for-snapshot-containing-block-size">スナップショット包含ブロックサイズ</a>
          の変化を検出するために使われます。
          変化があれば遷移は <a data-link-type="dfn" href="#skip-the-view-transition"
            id="ref-for-skip-the-view-transition②">skip</a> されます。<a
            href="https://github.com/w3c/csswg-drafts/issues/8045">この挙動の議論</a>。</p>
    </dl>
    <p><code
        class="idl"><a data-link-type="idl" href="#dom-viewtransition-finished" id="ref-for-dom-viewtransition-finished④">finished</a></code>
      の<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#getter-steps"
        id="ref-for-getter-steps">getter手順</a>は、
      <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑥">this</a> の <a
        data-link-type="dfn" href="#viewtransition-finished-promise"
        id="ref-for-viewtransition-finished-promise">finished promise</a> を返すこと。
    </p>
    <p><code
        class="idl"><a data-link-type="idl" href="#dom-viewtransition-ready" id="ref-for-dom-viewtransition-ready⑤">ready</a></code>
      の<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#getter-steps"
        id="ref-for-getter-steps①">getter手順</a>は、
      <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑦">this</a> の <a
        data-link-type="dfn" href="#viewtransition-ready-promise" id="ref-for-viewtransition-ready-promise①">ready
        promise</a> を返すこと。
    </p>
    <p><code
        class="idl"><a data-link-type="idl" href="#dom-viewtransition-updatecallbackdone" id="ref-for-dom-viewtransition-updatecallbackdone⑥">updateCallbackDone</a></code>
      の<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#getter-steps"
        id="ref-for-getter-steps②">getter手順</a>は、
      <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑧">this</a> の <a
        data-link-type="dfn" href="#viewtransition-update-callback-done-promise"
        id="ref-for-viewtransition-update-callback-done-promise②">update callback done promise</a> を返すこと。
    </p>
    <h4 class="heading settled" data-level="6.2.1" id="ViewTransition-skipTransition"><span class="secno">6.2.1.
      </span><span class="content"><code
          class="idl"><a data-link-type="idl" href="#dom-viewtransition-skiptransition" id="ref-for-dom-viewtransition-skiptransition④">skipTransition()</a></code>
        メソッド手順</span><a class="self-link" href="#ViewTransition-skipTransition"></a></h4>
    <div class="algorithm" data-algorithm="dom-viewtransition-skipTransition">
      <dfn class="dfn-paneled idl-code" data-dfn-for="ViewTransition" data-dfn-type="method" data-export
        id="dom-viewtransition-skiptransition"><code>skipTransition()</code></dfn> の
      <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#method-steps"
        id="ref-for-method-steps①">メソッド手順</a>は以下の通り:
      <ol>
        <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑨">this</a> の <a
              data-link-type="dfn" href="#viewtransition-phase" id="ref-for-viewtransition-phase①">phase</a> が
            "<code>done</code>" でなければ、
            <a data-link-type="dfn" href="#skip-the-view-transition" id="ref-for-skip-the-view-transition③">skip the
              view transition</a> を
            <span id="ref-for-this①⓪">this</span> で "<code
              class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#aborterror" id="ref-for-aborterror①">AbortError</a></code>"
            <code
              class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException②">DOMException</a></code>
            で行うこと。
          </p>
      </ol>
    </div>
    <h2 class="heading settled" data-level="7" id="algorithms"><span class="secno">7. </span><span
        class="content">アルゴリズム</span><a class="self-link" href="#algorithms"></a></h2>
    <h3 class="heading settled" data-level="7.1" id="concepts"><span class="secno">7.1. </span><span
        class="content">データ構造</span><a class="self-link" href="#concepts"></a></h3>
    <h4 class="heading settled" data-level="7.1.1" id="additions-to-document"><span class="secno">7.1.1. </span><span
        class="content"><code
          class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑥">Document</a></code>への追加</span><a
        class="self-link" href="#additions-to-document"></a></h4>
    <p><code
        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑦">Document</a></code>
      にはさらに以下が含まれる：</p>
    <dl>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="document" data-dfn-type="dfn" data-noexport
          id="document-active-view-transition">active view transition</dfn>
      <dd data-md>
        <p><code
            class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition①②">ViewTransition</a></code>
          または null。初期値は null。</p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="document" data-dfn-type="dfn" data-noexport
          id="document-rendering-suppression-for-view-transitions">rendering suppression for view transitions</dfn>
      <dd data-md>
        <p>boolean型。初期値は false。</p>
        <p><code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑧">Document</a></code>
          の
          <a data-link-type="dfn" href="#document-rendering-suppression-for-view-transitions"
            id="ref-for-document-rendering-suppression-for-view-transitions">rendering suppression for view
            transitions</a> が true の場合、
          すべてのポインターヒットテストは <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#document-element"
            id="ref-for-document-element④">document element</a> をターゲットとし、
          他の <a data-link-type="dfn" href="https://drafts.csswg.org/css2/#element" id="ref-for-element④">要素</a>は無視される。
        </p>
        <p class="note" role="note"><span class="marker">注:</span> これは <a data-link-type="dfn"
            href="https://www.w3.org/TR/pointerevents3/#dfn-pointer-capture" id="ref-for-dfn-pointer-capture">pointer
            capture</a> されているポインターには影響しません。</p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="document" data-dfn-type="dfn" data-noexport
          id="document-dynamic-view-transition-style-sheet">dynamic view transition style sheet</dfn>
      <dd data-md>
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-2022/#style-sheet"
            id="ref-for-style-sheet">スタイルシート</a>。
          初期値は新しい <span id="ref-for-style-sheet①">スタイルシート</span>で、
          <a data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-5/#cascade-origin-ua"
            id="ref-for-cascade-origin-ua②">ユーザーエージェント起源</a>に属し、
          <a data-link-type="dfn" href="#global-view-transition-user-agent-style-sheet"
            id="ref-for-global-view-transition-user-agent-style-sheet">グローバルビュー遷移ユーザーエージェントスタイルシート</a>の後に順序付けされる。
        </p>
        <p class="note" role="note"><span class="marker">注:</span> これは遷移に関連する動的スタイルを保持するために使用されます。</p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="document" data-dfn-type="dfn" data-noexport
          id="document-show-view-transition-tree">show view transition tree</dfn>
      <dd data-md>
        <p>boolean型。初期値は false。</p>
        <p>これが true の場合、<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①①">this</a>
          の <a data-link-type="dfn" href="#document-active-view-transition"
            id="ref-for-document-active-view-transition⑤">active view transition</a> の <a data-link-type="dfn"
            href="#viewtransition-transition-root-pseudo-element"
            id="ref-for-viewtransition-transition-root-pseudo-element①">transition root pseudo-element</a> が
          <span id="ref-for-this①②">this</span> の <a data-link-type="dfn"
            href="https://dom.spec.whatwg.org/#document-element" id="ref-for-document-element⑤">document element</a>
          の子としてレンダリングされ、
          <span id="ref-for-this①③">this</span> の <span id="ref-for-document-element⑥">document element</span> が
          その <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#originating-element"
            id="ref-for-originating-element②">originating element</a> となる。
        </p>
        <p class="note" role="note"><span class="marker">注:</span> <a data-link-type="dfn"
            href="#viewtransition-transition-root-pseudo-element"
            id="ref-for-viewtransition-transition-root-pseudo-element②">transition root pseudo-element</a> の
          <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#document-element"
            id="ref-for-document-element⑦">document element</a> 内での位置は重要ではありません。
          <span id="ref-for-viewtransition-transition-root-pseudo-element③">transition root pseudo-element</span> の
          <a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#containing-block"
            id="ref-for-containing-block①">包含ブロック</a>は
          <a data-link-type="dfn" href="#snapshot-containing-block"
            id="ref-for-snapshot-containing-block⑨">スナップショット包含ブロック</a>だからです。
        </p>
    </dl>
    <h4 class="heading settled" data-level="7.1.2" id="elements-concept"><span class="secno">7.1.2. </span><span
        class="content">要素への追加</span><a class="self-link" href="#elements-concept"></a></h4>
    <p><a data-link-type="dfn" href="https://drafts.csswg.org/css2/#element" id="ref-for-element⑤">要素</a>は
      <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="captured-in-a-view-transition">ビュー遷移でキャプチャされた</dfn>
      boolean型（初期値は false）を持ちます。
    </p>
    <p class="note" role="note"><span class="marker">注:</span> この仕様ではCSSの <a data-link-type="dfn"
        href="https://drafts.csswg.org/css2/#element" id="ref-for-element⑥">要素</a>の定義を使用しており、
      <a data-link-type="dfn" href="https://www.w3.org/TR/CSS21/selector.html#x22" id="ref-for-x22①">疑似要素</a>も含みます。
    </p>
    <h4 class="heading settled" data-level="7.1.3" id="captured-elements"><span class="secno">7.1.3. </span><span
        class="content"><a data-link-type="dfn" href="#captured-element"
          id="ref-for-captured-element①">キャプチャされた要素</a></span><a class="self-link" href="#captured-elements"></a></h4>
    <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="captured-element">キャプチャされた要素</dfn>は、以下を持つ<a
        data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct">構造体</a>です：</p>
    <dl>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
          id="captured-element-old-image">old image</dfn>
      <dd data-md>
        <p>2Dビットマップまたは null。初期値は null。</p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
          id="captured-element-old-width">old width</dfn>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
          id="captured-element-old-height">old height</dfn>
      <dd data-md>
        <p><code
            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double" id="ref-for-idl-unrestricted-double">unrestricted double</a></code>型、初期値は
          0。</p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
          id="captured-element-old-transform">old transform</dfn>
      <dd data-md>
        <p><a class="css" data-link-type="type" data-xref-type="css-type"
            href="https://www.w3.org/TR/css-transforms-2/#typedef-transform-function"
            id="ref-for-typedef-transform-function">&lt;transform-function></a>型。初期値は <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-transforms-1/#identity-transform-function"
            id="ref-for-identity-transform-function">単位変換関数</a>。</p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
          id="captured-element-old-writing-mode">old writing-mode</dfn>
      <dd data-md>
        <p>nullまたは<a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-writing-modes-4/#propdef-writing-mode"
            id="ref-for-propdef-writing-mode">writing-mode</a>。初期値は null。</p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
          id="captured-element-old-direction">old direction</dfn>
      <dd data-md>
        <p>nullまたは<a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-writing-modes-3/#propdef-direction"
            id="ref-for-propdef-direction">direction</a>。初期値は null。</p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
          id="captured-element-old-text-orientation">old text-orientation</dfn>
      <dd data-md>
        <p>nullまたは<a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-writing-modes-4/#propdef-text-orientation"
            id="ref-for-propdef-text-orientation">text-orientation</a>。初期値は null。</p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
          id="captured-element-old-mix-blend-mode">old mix-blend-mode</dfn>
      <dd data-md>
        <p>nullまたは<a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/compositing-1/#propdef-mix-blend-mode"
            id="ref-for-propdef-mix-blend-mode①">mix-blend-mode</a>。初期値は null。</p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
          id="captured-element-old-backdrop-filter">old backdrop-filter</dfn>
      <dd data-md>
        <p>nullまたは<a class="property css" data-link-type="property"
            href="https://drafts.fxtf.org/filter-effects-2/#propdef-backdrop-filter"
            id="ref-for-propdef-backdrop-filter">backdrop-filter</a>。初期値は null。</p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
          id="captured-element-old-color-scheme">old color-scheme</dfn>
      <dd data-md>
        <p>nullまたは<a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-color-adjust-1/#propdef-color-scheme"
            id="ref-for-propdef-color-scheme">color-scheme</a>。初期値は null。</p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
          id="captured-element-new-element">new element</dfn>
      <dd data-md>
        <p><a data-link-type="dfn" href="https://drafts.csswg.org/css2/#element" id="ref-for-element⑦">要素</a>または
          null。初期値は null。</p>
    </dl>
    <p>さらに、<a data-link-type="dfn" href="#captured-element" id="ref-for-captured-element②">キャプチャされた要素</a>は以下の<dfn
        class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
        id="captured-element-style-definitions">スタイル定義</dfn>を持つ：</p>
    <dl>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
          id="captured-element-group-keyframes">group keyframes</dfn>
      <dd data-md>
        <p><code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-animations-1/#csskeyframesrule" id="ref-for-csskeyframesrule">CSSKeyframesRule</a></code>
          または null。初期値は null。</p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
          id="captured-element-group-animation-name-rule">group animation name rule</dfn>
      <dd data-md>
        <p><code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule">CSSStyleRule</a></code>
          または null。初期値は null。</p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
          id="captured-element-group-styles-rule">group styles rule</dfn>
      <dd data-md>
        <p><code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule①">CSSStyleRule</a></code>
          または null。初期値は null。</p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
          id="captured-element-image-pair-isolation-rule">image pair isolation rule</dfn>
      <dd data-md>
        <p><code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule②">CSSStyleRule</a></code>
          または null。初期値は null。</p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
          id="captured-element-image-animation-name-rule">image animation name rule</dfn>
      <dd data-md>
        <p><code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule③">CSSStyleRule</a></code>
          または null。初期値は null。</p>
    </dl>
    <p class="note" role="note"><span class="marker">注:</span> これらは <a data-link-type="dfn"
        href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document①">document</a> の <a
        data-link-type="dfn" href="#document-dynamic-view-transition-style-sheet"
        id="ref-for-document-dynamic-view-transition-style-sheet④">dynamic view transition style sheet</a> から
      スタイルを更新・削除するために使われます。</p>
    <h3 class="heading settled" data-level="7.2" id="perform-pending-transition-operations-algorithm"><span
        class="secno">7.2. </span><span class="content"><a data-link-type="dfn"
          href="#perform-pending-transition-operations"
          id="ref-for-perform-pending-transition-operations①">保留中の遷移操作の実行</a></span><a class="self-link"
        href="#perform-pending-transition-operations-algorithm"></a></h3>
    <div class="algorithm" data-algorithm="perform pending transition operations">
      <div class="note" role="note">このアルゴリズムは html仕様の <a
          href="https://html.spec.whatwg.org/#event-loop-processing-model:perform-pending-transition-operations">rendering
          loopの更新</a> の一部として呼び出されます。</div>
      <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
          id="perform-pending-transition-operations">保留中の遷移操作の実行</dfn>は、<code
          class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑨">Document</a></code>
        <var>document</var> に対して以下の手順を実行する：
      </p>
      <ol>
        <li data-md>
          <p><var>document</var> の <a data-link-type="dfn" href="#document-active-view-transition"
              id="ref-for-document-active-view-transition⑥">active view transition</a> が null でない場合：</p>
          <ol>
            <li data-md>
              <p><var>document</var> の <a data-link-type="dfn" href="#document-active-view-transition"
                  id="ref-for-document-active-view-transition⑦">active view transition</a> の
                <a data-link-type="dfn" href="#viewtransition-phase" id="ref-for-viewtransition-phase②">phase</a> が
                "<code>pending-capture</code>" なら、
                <a data-link-type="dfn" href="#setup-view-transition"
                  id="ref-for-setup-view-transition①">ビュー遷移のセットアップ</a>を
                <var>document</var> の <span id="ref-for-document-active-view-transition⑧">active view transition</span>
                に対して実行する。
              </p>
            <li data-md>
              <p>それ以外の場合、<var>document</var> の <a data-link-type="dfn" href="#document-active-view-transition"
                  id="ref-for-document-active-view-transition⑨">active view transition</a> の
                <a data-link-type="dfn" href="#viewtransition-phase" id="ref-for-viewtransition-phase③">phase</a> が
                "<code>animating</code>" なら、
                <a data-link-type="dfn" href="#handle-transition-frame"
                  id="ref-for-handle-transition-frame">遷移フレームの処理</a>を
                <var>document</var> の <span id="ref-for-document-active-view-transition①⓪">active view transition</span>
                に対して実行する。
              </p>
          </ol>
      </ol>
    </div>
    <h3 class="heading settled" data-level="7.3" id="setup-view-transition-algorithm"><span class="secno">7.3.
      </span><span class="content"><a data-link-type="dfn" href="#setup-view-transition"
          id="ref-for-setup-view-transition②">ビュー遷移のセットアップ</a></span><a class="self-link"
        href="#setup-view-transition-algorithm"></a></h3>
    <div class="algorithm" data-algorithm="setup view transition">
      <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="setup-view-transition">setup view
        transition</dfn> を <code
        class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition①③">ViewTransition</a></code>
      <var>transition</var> に対して行う手順は以下の通り：
      <p class="note" role="note"><span class="marker">注:</span> このアルゴリズムはドキュメントの現在の状態をキャプチャし、
        遷移の <code
          class="idl"><a data-link-type="idl" href="#callbackdef-updatecallback" id="ref-for-callbackdef-updatecallback①⑤">UpdateCallback</a></code>
        を呼び出し、
        その後ドキュメントの新しい状態をキャプチャします。</p>
      <ol>
        <li data-md>
          <p><var>document</var> を <var>transition</var> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
              id="ref-for-concept-relevant-global①">関連グローバルオブジェクト</a> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"
              id="ref-for-concept-document-window①">関連付けられたドキュメント</a>とする。</p>
        <li data-md>
          <p><a data-link-type="dfn" href="#capture-the-old-state" id="ref-for-capture-the-old-state">旧状態のキャプチャ</a> を
            <var>transition</var> に対して行う。
          </p>
          <p>失敗が返された場合、<a data-link-type="dfn" href="#skip-the-view-transition"
              id="ref-for-skip-the-view-transition④">ビュー遷移のスキップ</a> を <var>transition</var> に対し
            "<code
              class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror①">InvalidStateError</a></code>"
            <code
              class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException③">DOMException</a></code>
            を <var>transition</var> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
              id="ref-for-concept-relevant-realm⑤">関連Realm</a> で行い、return。
          </p>
        <li data-md>
          <p><var>document</var> の <a data-link-type="dfn" href="#document-rendering-suppression-for-view-transitions"
              id="ref-for-document-rendering-suppression-for-view-transitions①">ビュー遷移用レンダリング抑制</a> を true にする。</p>
        <li data-md>
          <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task"
              id="ref-for-queue-a-global-task">グローバルタスクをキューに追加</a>する。
            <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source"
              id="ref-for-dom-manipulation-task-source">DOM操作タスクソース</a>で、
            <var>transition</var> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
              id="ref-for-concept-relevant-global②">関連グローバルオブジェクト</a> を指定し、以下の手順を実行：
          </p>
          <p class="note" role="note"><span class="marker">注:</span> <a data-link-type="dfn" href="#capture-the-image"
              id="ref-for-capture-the-image③">画像のキャプチャ</a>
            のテクスチャの読み出しは非同期となる場合があるため、ここでタスクをキューしていますが、HTML仕様のレンダーステップでは同期的に扱われます。</p>
          <ol>
            <li data-md>
              <p><var>transition</var> の <a data-link-type="dfn" href="#viewtransition-phase"
                  id="ref-for-viewtransition-phase④">phase</a> が "<code>done</code>" の場合、これらの手順を中止する。</p>
              <p class="note" role="note"><span class="marker">注:</span> これは <var>transition</var> がこの時点で <a
                  data-link-type="dfn" href="#skip-the-view-transition" id="ref-for-skip-the-view-transition⑤">スキップ</a>
                された場合に発生します。</p>
            <li data-md>
              <p><a data-link-type="dfn" href="#call-the-update-callback" id="ref-for-call-the-update-callback">update
                  callback の呼び出し</a>を行う。</p>
          </ol>
      </ol>
    </div>
    <div class="algorithm" data-algorithm="activate view transition">
      <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="activate-view-transition">activate view
        transition</dfn> を <code
        class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition①④">ViewTransition</a></code>
      <var>transition</var> に対して行う手順は以下の通り：
      <ol>
        <li data-md>
          <p><var>transition</var> の <a data-link-type="dfn" href="#viewtransition-phase"
              id="ref-for-viewtransition-phase⑤">phase</a> が "<code>done</code>" の場合、return。</p>
          <p class="note" role="note"><span class="marker">注:</span> これは <var>transition</var> がこの時点で <a
              data-link-type="dfn" href="#skip-the-view-transition" id="ref-for-skip-the-view-transition⑥">スキップ</a>
            された場合に発生します。</p>
        <li data-md>
          <p><a data-link-type="dfn" href="#document-rendering-suppression-for-view-transitions"
              id="ref-for-document-rendering-suppression-for-view-transitions②">ビュー遷移用レンダリング抑制</a> を false にする。</p>
        <li data-md>
          <p><var>transition</var> の <a data-link-type="dfn"
              href="#viewtransition-initial-snapshot-containing-block-size"
              id="ref-for-viewtransition-initial-snapshot-containing-block-size">初期スナップショット包含ブロックサイズ</a> が
            <a data-link-type="dfn" href="#snapshot-containing-block-size"
              id="ref-for-snapshot-containing-block-size①">スナップショット包含ブロックサイズ</a> と等しくない場合、
            <a data-link-type="dfn" href="#skip-the-view-transition"
              id="ref-for-skip-the-view-transition⑦">ビュー遷移のスキップ</a> を <var>transition</var> に対して行い、return。
          </p>
        <li data-md>
          <p><a data-link-type="dfn" href="#capture-the-new-state" id="ref-for-capture-the-new-state">新状態のキャプチャ</a> を
            <var>transition</var> に対して行う。
          </p>
          <p>失敗が返された場合、<a data-link-type="dfn" href="#skip-the-view-transition"
              id="ref-for-skip-the-view-transition⑧">ビュー遷移のスキップ</a> を <var>transition</var> に対し
            "<code
              class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror②">InvalidStateError</a></code>"
            <code
              class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException④">DOMException</a></code>
            を <var>transition</var> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
              id="ref-for-concept-relevant-realm⑥">関連Realm</a> で行い、return。
          </p>
        <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve">resolve</a>
            <var>transition</var> の <a data-link-type="dfn" href="#viewtransition-update-callback-done-promise"
              id="ref-for-viewtransition-update-callback-done-promise③">update callback done promise</a> を undefined
            で解決する。
          </p>
        <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate">各</a>
            <var>capturedElement</var> を <var>transition</var> の <a data-link-type="dfn"
              href="#viewtransition-named-elements" id="ref-for-viewtransition-named-elements">named elements</a> の <a
              data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-getting-the-values"
              id="ref-for-map-getting-the-values">値</a>でイテレート：
          </p>
          <ol>
            <li data-md>
              <p><var>capturedElement</var> の <a data-link-type="dfn" href="#captured-element-new-element"
                  id="ref-for-captured-element-new-element①">new element</a> が null でなければ、
                <var>capturedElement</var> の <span id="ref-for-captured-element-new-element②">new element</span> の
                <a data-link-type="dfn" href="#captured-in-a-view-transition"
                  id="ref-for-captured-in-a-view-transition③">ビュー遷移でキャプチャされた</a> を true に設定。
              </p>
          </ol>
        <li data-md>
          <p><a data-link-type="dfn" href="#setup-transition-pseudo-elements"
              id="ref-for-setup-transition-pseudo-elements④">遷移疑似要素のセットアップ</a> を <var>transition</var> に対して行う。</p>
        <li data-md>
          <p><a data-link-type="dfn" href="#update-pseudo-element-styles"
              id="ref-for-update-pseudo-element-styles②">疑似要素スタイルの更新</a> を <var>transition</var> に対して行う。</p>
          <p>失敗が返された場合、<a data-link-type="dfn" href="#skip-the-view-transition"
              id="ref-for-skip-the-view-transition⑨">ビュー遷移のスキップ</a> を <var>transition</var> に対し
            "<code
              class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror③">InvalidStateError</a></code>"
            <code
              class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑤">DOMException</a></code>
            を <var>transition</var> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
              id="ref-for-concept-relevant-realm⑦">関連Realm</a> で行い、return。
          </p>
          <p class="note" role="note"><span class="marker">注:</span>
            上記の手順では、スタイル・レイアウト中に計算される情報を得るために、ドキュメントのライフサイクルフェーズの実行が必要となります。</p>
        <li data-md>
          <p><var>transition</var> の <a data-link-type="dfn" href="#viewtransition-phase"
              id="ref-for-viewtransition-phase⑥">phase</a> を "<code>animating</code>" に設定。</p>
        <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①">resolve</a>
            <var>transition</var> の <a data-link-type="dfn" href="#viewtransition-ready-promise"
              id="ref-for-viewtransition-ready-promise②">ready promise</a> を解決する。
          </p>
      </ol>
    </div>
    <h4 class="heading settled" data-level="7.3.1" id="capture-old-state-algorithm"><span class="secno">7.3.1.
      </span><span class="content"><a data-link-type="dfn" href="#capture-the-old-state"
          id="ref-for-capture-the-old-state①">旧状態のキャプチャ</a></span><a class="self-link"
        href="#capture-old-state-algorithm"></a></h4>
    <div class="algorithm" data-algorithm="capture the old state">
      <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="capture-the-old-state">capture the old
        state</dfn> を <code
        class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition①⑤">ViewTransition</a></code>
      <var>transition</var> に対して行う手順：
      <ol>
        <li data-md>
          <p><var>document</var> を <var>transition</var> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
              id="ref-for-concept-relevant-global③">関連グローバルオブジェクト</a> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"
              id="ref-for-concept-document-window②">関連付けられたドキュメント</a>とする。</p>
        <li data-md>
          <p><var>namedElements</var> を <var>transition</var> の <a data-link-type="dfn"
              href="#viewtransition-named-elements" id="ref-for-viewtransition-named-elements①">named elements</a>とする。
          </p>
        <li data-md>
          <p><var>usedTransitionNames</var> を新しい <a data-link-type="dfn"
              href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set">セット</a>（string型）とする。</p>
        <li data-md>
          <p><var>captureElements</var> を新しい <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list"
              id="ref-for-list">リスト</a>（要素型）とする。</p>
        <li data-md>
          <p><var>document</var> を <var>transition</var> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
              id="ref-for-concept-relevant-global④">関連グローバルオブジェクト</a> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"
              id="ref-for-concept-document-window③">関連付けられたドキュメント</a>とする。</p>
        <li data-md>
          <p><a data-link-type="dfn" href="#snapshot-containing-block-size"
              id="ref-for-snapshot-containing-block-size②">スナップショット包含ブロックサイズ</a> が <a data-link-type="dfn"
              href="https://infra.spec.whatwg.org/#implementation-defined"
              id="ref-for-implementation-defined">実装依存</a>の最大値を超える場合、失敗を返す。</p>
        <li data-md>
          <p><var>transition</var> の <a data-link-type="dfn"
              href="#viewtransition-initial-snapshot-containing-block-size"
              id="ref-for-viewtransition-initial-snapshot-containing-block-size①">初期スナップショット包含ブロックサイズ</a> を
            <a data-link-type="dfn" href="#snapshot-containing-block-size"
              id="ref-for-snapshot-containing-block-size③">スナップショット包含ブロックサイズ</a> に設定する。
          </p>
        <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①">各</a>
            <var>element</var> を、<a data-link-type="dfn" href="https://drafts.csswg.org/css2/#element"
              id="ref-for-element⑧">要素</a>で <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#connected"
              id="ref-for-connected">connected</a> かつ
            <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document"
              id="ref-for-concept-node-document">ノードドキュメント</a>が <var>document</var> であるものを、
            <a href="https://drafts.csswg.org/css2/#painting-order">描画順</a>でイテレート：
          </p>
          <div class="note" role="note">描画順でイテレートすることで、この順序が <var>namedElements</var> にキャッシュされます。
            これによりペイントスタックの一番下の要素が ::view-transition の最初の疑似子要素を生成するなど、
            ::view-transition-group 疑似要素のDOM順が定義されます。</div>
          <ol>
            <li data-md>
              <p>この <var>element</var> の <a data-link-type="dfn"
                  href="https://drafts.csswg.org/css-scoping-1/#flat-tree" id="ref-for-flat-tree">flat tree</a> の祖先が <a
                  data-link-type="dfn" href="https://www.w3.org/TR/css-contain-2/#skips-its-contents"
                  id="ref-for-skips-its-contents①">内容をスキップ</a>している場合、<a data-link-type="dfn"
                  href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue">continue</a>。
              </p>
            <li data-md>
              <p><var>element</var> が複数の <a data-link-type="dfn" href="https://www.w3.org/TR/css-break-4/#box-fragment"
                  id="ref-for-box-fragment">box fragment</a> を持つ場合、<a data-link-type="dfn"
                  href="https://infra.spec.whatwg.org/#iteration-continue"
                  id="ref-for-iteration-continue①">continue</a>。</p>
              <p class="note" role="note"><span class="marker">注:</span> 将来のバージョンでは分断要素の遷移も有効化するかもしれません。
                <a href="https://github.com/w3c/csswg-drafts/issues/8900">#8900</a>を参照。
              </p>
              <p class="note" role="note"><span class="marker">注:</span> ここでの <a data-link-type="dfn"
                  href="https://www.w3.org/TR/css-break-4/#box-fragment" id="ref-for-box-fragment①">box fragment</a> は、
                <a href="https://www.w3.org/TR/CSS2/visuren.html#inline-boxes">インラインボックス</a>が <a
                  href="https://www.w3.org/TR/CSS2/visuren.html#line-box">ラインボックス</a>をまたぐ分断とは異なります。
                そのようなインラインも遷移に参加できます。
              </p>
            <li data-md>
              <p><var>transitionName</var> を <var>element</var> の <a data-link-type="dfn"
                  href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value①">算出値</a>（<a
                  class="property css" data-link-type="property" href="#propdef-view-transition-name"
                  id="ref-for-propdef-view-transition-name①⓪">view-transition-name</a>）とする。</p>
            <li data-md>
              <p><var>transitionName</var> が <a class="css" data-link-type="maybe"
                  href="#valdef-view-transition-name-none" id="ref-for-valdef-view-transition-name-none①">none</a> または
                <var>element</var> が <a data-link-type="dfn"
                  href="https://www.w3.org/TR/css-images-4/#element-not-rendered"
                  id="ref-for-element-not-rendered①">非レンダリング</a>なら、<a data-link-type="dfn"
                  href="https://infra.spec.whatwg.org/#iteration-continue"
                  id="ref-for-iteration-continue②">continue</a>。
              </p>
            <li data-md>
              <p><var>usedTransitionNames</var> が <a data-link-type="dfn"
                  href="https://infra.spec.whatwg.org/#list-contain"
                  id="ref-for-list-contain">transitionNameを含む</a>場合、失敗を返す。</p>
            <li data-md>
              <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append"
                  id="ref-for-set-append">transitionNameを追加</a> (<var>usedTransitionNames</var>に)。</p>
            <li data-md>
              <p><var>element</var> の <a data-link-type="dfn" href="#captured-in-a-view-transition"
                  id="ref-for-captured-in-a-view-transition④">ビュー遷移でキャプチャされた</a> を true に設定。</p>
            <li data-md>
              <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append"
                  id="ref-for-list-append">elementを追加</a> (<var>captureElements</var>に)。</p>
          </ol>
          <div class="note" role="note">このアルゴリズムは別のループで続行され、
            <a data-link-type="dfn" href="#captured-in-a-view-transition"
              id="ref-for-captured-in-a-view-transition⑤">ビュー遷移でキャプチャされた</a> が
            すべての参加要素に設定された後、後続ステップで読まれるためです。
          </div>
        <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate②">各</a>
            <var>element</var> を <var>captureElements</var> でイテレート：
          </p>
          <ol>
            <li data-md>
              <p><var>capture</var> を新しい <a data-link-type="dfn" href="#captured-element"
                  id="ref-for-captured-element③">キャプチャされた要素</a>構造体とする。</p>
            <li data-md>
              <p><var>capture</var> の <a data-link-type="dfn" href="#captured-element-old-image"
                  id="ref-for-captured-element-old-image①">old image</a> を <a data-link-type="dfn"
                  href="#capture-the-image" id="ref-for-capture-the-image④">画像のキャプチャ</a>
                の結果で設定する（<var>element</var>に対して）。</p>
            <li data-md>
              <p><var>originalRect</var> を <var>element</var> が <a data-link-type="dfn"
                  href="https://dom.spec.whatwg.org/#document-element" id="ref-for-document-element⑧">document
                  element</a> なら <a data-link-type="dfn" href="#snapshot-containing-block"
                  id="ref-for-snapshot-containing-block①⓪">スナップショット包含ブロック</a>、それ以外なら <a data-link-type="dfn"
                  href="https://www.w3.org/TR/css-box-4/#border-box" id="ref-for-border-box②">border box</a> とする。</p>
            <li data-md>
              <p><var>capture</var> の <a data-link-type="dfn" href="#captured-element-old-width"
                  id="ref-for-captured-element-old-width">old width</a> を <var>originalRect</var> の <code
                  class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/geometry-1/#dom-domrect-width" id="ref-for-dom-domrect-width">width</a></code>
                で設定。</p>
            <li data-md>
              <p><var>capture</var> の <a data-link-type="dfn" href="#captured-element-old-height"
                  id="ref-for-captured-element-old-height">old height</a> を <var>originalRect</var> の <code
                  class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/geometry-1/#dom-domrect-height" id="ref-for-dom-domrect-height">height</a></code>
                で設定。</p>
            <li data-md>
              <p><var>capture</var> の <a data-link-type="dfn" href="#captured-element-old-transform"
                  id="ref-for-captured-element-old-transform">old transform</a> を <a class="css" data-link-type="type"
                  data-xref-type="css-type" href="https://www.w3.org/TR/css-transforms-2/#typedef-transform-function"
                  id="ref-for-typedef-transform-function①">&lt;transform-function></a> で設定（<var>element</var> の <a
                  data-link-type="dfn" href="https://www.w3.org/TR/css-box-4/#border-box"
                  id="ref-for-border-box③">border box</a> を <a data-link-type="dfn"
                  href="#snapshot-containing-block-origin"
                  id="ref-for-snapshot-containing-block-origin">スナップショット包含ブロック原点</a> から現在の視覚位置までマッピングするもの）。</p>
            <li data-md>
              <p><var>capture</var> の <a data-link-type="dfn" href="#captured-element-old-writing-mode"
                  id="ref-for-captured-element-old-writing-mode">old writing-mode</a> を <a data-link-type="dfn"
                  href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value②">算出値</a>（<a
                  class="property css" data-link-type="property"
                  href="https://www.w3.org/TR/css-writing-modes-4/#propdef-writing-mode"
                  id="ref-for-propdef-writing-mode①">writing-mode</a>）で設定。</p>
            <li data-md>
              <p><var>capture</var> の <a data-link-type="dfn" href="#captured-element-old-direction"
                  id="ref-for-captured-element-old-direction">old direction</a> を <a data-link-type="dfn"
                  href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value③">算出値</a>（<a
                  class="property css" data-link-type="property"
                  href="https://www.w3.org/TR/css-writing-modes-3/#propdef-direction"
                  id="ref-for-propdef-direction①">direction</a>）で設定。</p>
            <li data-md>
              <p><var>capture</var> の <a data-link-type="dfn" href="#captured-element-old-text-orientation"
                  id="ref-for-captured-element-old-text-orientation">old text-orientation</a> を <a data-link-type="dfn"
                  href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value④">算出値</a>（<a
                  class="property css" data-link-type="property"
                  href="https://www.w3.org/TR/css-writing-modes-4/#propdef-text-orientation"
                  id="ref-for-propdef-text-orientation①">text-orientation</a>）で設定。</p>
            <li data-md>
              <p><var>capture</var> の <a data-link-type="dfn" href="#captured-element-old-mix-blend-mode"
                  id="ref-for-captured-element-old-mix-blend-mode">old mix-blend-mode</a> を <a data-link-type="dfn"
                  href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value⑤">算出値</a>（<a
                  class="property css" data-link-type="property"
                  href="https://www.w3.org/TR/compositing-1/#propdef-mix-blend-mode"
                  id="ref-for-propdef-mix-blend-mode②">mix-blend-mode</a>）で設定。</p>
            <li data-md>
              <p><var>capture</var> の <a data-link-type="dfn" href="#captured-element-old-backdrop-filter"
                  id="ref-for-captured-element-old-backdrop-filter">old backdrop-filter</a> を <a data-link-type="dfn"
                  href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value⑥">算出値</a>（<a
                  class="property css" data-link-type="property"
                  href="https://drafts.fxtf.org/filter-effects-2/#propdef-backdrop-filter"
                  id="ref-for-propdef-backdrop-filter①">backdrop-filter</a>）で設定。</p>
            <li data-md>
              <p><var>capture</var> の <a data-link-type="dfn" href="#captured-element-old-color-scheme"
                  id="ref-for-captured-element-old-color-scheme">old color-scheme</a> を <a data-link-type="dfn"
                  href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value⑦">算出値</a>（<a
                  class="property css" data-link-type="property"
                  href="https://www.w3.org/TR/css-color-adjust-1/#propdef-color-scheme"
                  id="ref-for-propdef-color-scheme①">color-scheme</a>）で設定。</p>
            <li data-md>
              <p><var>transitionName</var> を <var>element</var> の <a data-link-type="dfn"
                  href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value⑧">算出値</a>（<a
                  class="property css" data-link-type="property" href="#propdef-view-transition-name"
                  id="ref-for-propdef-view-transition-name①①">view-transition-name</a>）とする。</p>
            <li data-md>
              <p><var>namedElements</var>[<var>transitionName</var>] に <var>capture</var> を設定。</p>
          </ol>
        <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate③">各</a>
            <var>element</var> を <var>captureElements</var> でイテレート：
          </p>
          <ol>
            <li data-md>
              <p><var>element</var> の <a data-link-type="dfn" href="#captured-in-a-view-transition"
                  id="ref-for-captured-in-a-view-transition⑥">ビュー遷移でキャプチャされた</a> を false に設定。</p>
          </ol>
      </ol>
    </div>
    <h4 class="heading settled" data-level="7.3.2" id="capture-new-state-algorithm"><span class="secno">7.3.2.
      </span><span class="content"><a data-link-type="dfn" href="#capture-the-new-state"
          id="ref-for-capture-the-new-state①">新状態のキャプチャ</a></span><a class="self-link"
        href="#capture-new-state-algorithm"></a></h4>
    <div class="algorithm" data-algorithm="capture the new state">
      <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="capture-the-new-state">新状態のキャプチャ</dfn> を <code
        class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition①⑥">ViewTransition</a></code>
      <var>transition</var> に対して行う手順：
      <ol>
        <li data-md>
          <p><var>document</var> を <var>transition</var> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
              id="ref-for-concept-relevant-global⑤">関連グローバルオブジェクト</a> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"
              id="ref-for-concept-document-window④">関連付けられたドキュメント</a>とする。</p>
        <li data-md>
          <p><var>namedElements</var> を <var>transition</var> の <a data-link-type="dfn"
              href="#viewtransition-named-elements" id="ref-for-viewtransition-named-elements②">named elements</a>とする。
          </p>
        <li data-md>
          <p><var>usedTransitionNames</var> を新しい <a data-link-type="dfn"
              href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①">セット</a>（string型）とする。</p>
        <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate④">各</a>
            <var>element</var> を、<a data-link-type="dfn" href="https://drafts.csswg.org/css2/#element"
              id="ref-for-element⑨">要素</a>で <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#connected"
              id="ref-for-connected①">connected</a> かつ
            <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document"
              id="ref-for-concept-node-document①">ノードドキュメント</a>が <var>document</var> であるものを、
            <a href="https://drafts.csswg.org/css2/#painting-order">描画順</a>でイテレート：
          </p>
          <ol>
            <li data-md>
              <p>この <var>element</var> の <a data-link-type="dfn"
                  href="https://drafts.csswg.org/css-scoping-1/#flat-tree" id="ref-for-flat-tree①">flat tree</a> の祖先が <a
                  data-link-type="dfn" href="https://www.w3.org/TR/css-contain-2/#skips-its-contents"
                  id="ref-for-skips-its-contents②">内容をスキップ</a>している場合、<a data-link-type="dfn"
                  href="https://infra.spec.whatwg.org/#iteration-continue"
                  id="ref-for-iteration-continue③">continue</a>。</p>
            <li data-md>
              <p><var>transitionName</var> を <var>element</var> の <a data-link-type="dfn"
                  href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value⑨">算出値</a>（<a
                  class="property css" data-link-type="property" href="#propdef-view-transition-name"
                  id="ref-for-propdef-view-transition-name①②">view-transition-name</a>）とする。</p>
            <li data-md>
              <p><var>transitionName</var> が <a class="css" data-link-type="maybe"
                  href="#valdef-view-transition-name-none" id="ref-for-valdef-view-transition-name-none②">none</a> または
                <var>element</var> が <a data-link-type="dfn"
                  href="https://www.w3.org/TR/css-images-4/#element-not-rendered"
                  id="ref-for-element-not-rendered②">非レンダリング</a>の場合、<a data-link-type="dfn"
                  href="https://infra.spec.whatwg.org/#iteration-continue"
                  id="ref-for-iteration-continue④">continue</a>。
              </p>
            <li data-md>
              <p><var>usedTransitionNames</var> が <a data-link-type="dfn"
                  href="https://infra.spec.whatwg.org/#list-contain"
                  id="ref-for-list-contain①">transitionNameを含む</a>場合、失敗を返す。</p>
            <li data-md>
              <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append"
                  id="ref-for-set-append①">transitionNameを追加</a> (<var>usedTransitionNames</var>に)。</p>
            <li data-md>
              <p><var>namedElements</var>[<var>transitionName</var>] が <a data-link-type="dfn"
                  href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists">存在しない</a>場合、
                <var>namedElements</var>[<var>transitionName</var>] に新しい <a data-link-type="dfn"
                  href="#captured-element" id="ref-for-captured-element④">キャプチャされた要素</a>構造体を設定。
              </p>
              <p class="note" role="note"><span class="marker">注:</span> この構造体は意図的にこの順序付きmapの末尾に追加されます。
                新DOMにのみ存在する名前（エントリーアニメーション）は旧DOMのみの名前（退場アニメーション）や両DOMに存在する名前（ペアアニメーション）より上に描画されます。
                このレイヤリングがすべての場合に正しいとは限りません。<a href="https://github.com/w3c/csswg-drafts/issues/8941">issue 8941</a>参照。
              </p>
            <li data-md>
              <p><var>namedElements</var>[<var>transitionName</var>] の <a data-link-type="dfn"
                  href="#captured-element-new-element" id="ref-for-captured-element-new-element③">new element</a> に
                <var>element</var> を設定。
              </p>
          </ol>
      </ol>
    </div>
    <h4 class="heading settled" data-level="7.3.3" id="setup-transition-pseudo-elements-algorithm"><span
        class="secno">7.3.3. </span><span class="content"><a data-link-type="dfn"
          href="#setup-transition-pseudo-elements"
          id="ref-for-setup-transition-pseudo-elements⑤">遷移疑似要素のセットアップ</a></span><a class="self-link"
        href="#setup-transition-pseudo-elements-algorithm"></a></h4>
    <div class="algorithm" data-algorithm="setup transition pseudo-elements">
      <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="setup-transition-pseudo-elements">setup
        transition pseudo-elements</dfn> を <code
        class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition①⑦">ViewTransition</a></code>
      <var>transition</var> に対して行う手順：
      <p class="note" role="note"><span class="marker">注:</span> このアルゴリズムは遷移用疑似要素ツリーを構築し、
        初期スタイルを生成します。
        疑似ツリーの構造は <a href="#view-transition-pseudos">§ 3.2 ビュー遷移疑似要素</a>で説明されています。</p>
      <ol>
        <li data-md>
          <p><var>document</var> を <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
              id="ref-for-this①④">this</a> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
              id="ref-for-concept-relevant-global⑥">関連グローバルオブジェクト</a> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"
              id="ref-for-concept-document-window⑤">関連付けられたドキュメント</a>とする。</p>
        <li data-md>
          <p><var>document</var> の <a data-link-type="dfn" href="#document-show-view-transition-tree"
              id="ref-for-document-show-view-transition-tree">show view transition tree</a> を true に設定。</p>
        <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate" id="ref-for-map-iterate">各</a>
            <var>transitionName</var> → <var>capturedElement</var> を <var>transition</var> の <a data-link-type="dfn"
              href="#viewtransition-named-elements" id="ref-for-viewtransition-named-elements③">named elements</a>
            でイテレート：
          </p>
          <ol>
            <li data-md>
              <p><var>group</var> を新しい <a class="css" data-link-type="maybe" href="#selectordef-view-transition-group"
                  id="ref-for-selectordef-view-transition-group①⑥">::view-transition-group()</a> とし、
                <a data-link-type="dfn" href="#view-transition-name" id="ref-for-view-transition-name①①">ビュー遷移名</a>を
                <var>transitionName</var> に設定。
              </p>
            <li data-md>
              <p><var>group</var> を <var>transition</var> の <a data-link-type="dfn"
                  href="#viewtransition-transition-root-pseudo-element"
                  id="ref-for-viewtransition-transition-root-pseudo-element④">transition root pseudo-element</a> に追加。
              </p>
            <li data-md>
              <p><var>imagePair</var> を新しい <a class="css" data-link-type="maybe"
                  href="#selectordef-view-transition-image-pair"
                  id="ref-for-selectordef-view-transition-image-pair⑥">::view-transition-image-pair()</a> とし、
                <a data-link-type="dfn" href="#view-transition-name" id="ref-for-view-transition-name①②">ビュー遷移名</a>を
                <var>transitionName</var> に設定。
              </p>
            <li data-md>
              <p><var>imagePair</var> を <var>group</var> に追加。</p>
            <li data-md>
              <p><var>capturedElement</var> の <a data-link-type="dfn" href="#captured-element-old-image"
                  id="ref-for-captured-element-old-image②">old image</a> が null でなければ：</p>
              <ol>
                <li data-md>
                  <p><var>old</var> を新しい <a class="css" data-link-type="maybe" href="#selectordef-view-transition-old"
                      id="ref-for-selectordef-view-transition-old⑧">::view-transition-old()</a> とし、
                    <a data-link-type="dfn" href="#view-transition-name" id="ref-for-view-transition-name①③">ビュー遷移名</a>を
                    <var>transitionName</var> に設定、
                    <var>capturedElement</var> の <a data-link-type="dfn" href="#captured-element-old-image"
                      id="ref-for-captured-element-old-image③">old image</a> を <a data-link-type="dfn"
                      href="https://www.w3.org/TR/css-display-3/#replaced-element"
                      id="ref-for-replaced-element②">置換</a>内容として表示。
                  </p>
                <li data-md>
                  <p><var>old</var> を <var>imagePair</var> に追加。</p>
              </ol>
            <li data-md>
              <p><var>capturedElement</var> の <a data-link-type="dfn" href="#captured-element-new-element"
                  id="ref-for-captured-element-new-element④">new element</a> が null でなければ：</p>
              <ol>
                <li data-md>
                  <p><var>new</var> を新しい <a class="css" data-link-type="maybe" href="#selectordef-view-transition-new"
                      id="ref-for-selectordef-view-transition-new⑧">::view-transition-new()</a> とし、
                    <a data-link-type="dfn" href="#view-transition-name" id="ref-for-view-transition-name①④">ビュー遷移名</a>を
                    <var>transitionName</var> に設定。
                  </p>
                  <p class="note" role="note"><span class="marker">注:</span> この疑似要素のスタイリングは <a data-link-type="dfn"
                      href="#update-pseudo-element-styles"
                      id="ref-for-update-pseudo-element-styles③">疑似要素スタイルの更新</a>で扱います。</p>
                <li data-md>
                  <p><var>new</var> を <var>imagePair</var> に追加。</p>
              </ol>
            <li data-md>
              <p><var>capturedElement</var> の <a data-link-type="dfn" href="#captured-element-old-image"
                  id="ref-for-captured-element-old-image④">old image</a> が null の場合：</p>
              <ol>
                <li data-md>
                  <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert"
                      id="ref-for-assert">Assert</a>: <var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-new-element" id="ref-for-captured-element-new-element⑤">new element</a> は
                    null ではない。</p>
                <li data-md>
                  <p><var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-image-animation-name-rule"
                      id="ref-for-captured-element-image-animation-name-rule">image animation name rule</a> を新しい
                    <code
                      class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule④">CSSStyleRule</a></code>
                    (以下のCSSを表現)とし、
                    <var>document</var> の <a data-link-type="dfn" href="#document-dynamic-view-transition-style-sheet"
                      id="ref-for-document-dynamic-view-transition-style-sheet⑤">dynamic view transition style sheet</a>
                    に追加：
                  </p>
                  <pre class="highlight">:root:<c- nf>:view-transition-new</c-><c- p>(</c-><var>transitionName</var><c- p>)</c-> <c- p>{</c->
  <c- k>animation-name</c-><c- p>:</c-> -ua-view-transition-fade-in<c- p>;</c->
<c- p>}</c->
</pre>
                  <p class="note" role="note"><span class="marker">注:</span> 上記コード例は変数を置換する必要があります。</p>
              </ol>
            <li data-md>
              <p><var>capturedElement</var> の <a data-link-type="dfn" href="#captured-element-new-element"
                  id="ref-for-captured-element-new-element⑥">new element</a> が null の場合：</p>
              <ol>
                <li data-md>
                  <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert"
                      id="ref-for-assert①">Assert</a>: <var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-old-image" id="ref-for-captured-element-old-image⑤">old image</a> は null
                    ではない。</p>
                <li data-md>
                  <p><var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-image-animation-name-rule"
                      id="ref-for-captured-element-image-animation-name-rule①">image animation name rule</a> を新しい
                    <code
                      class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule⑤">CSSStyleRule</a></code>
                    (以下のCSSを表現)とし、
                    <var>document</var> の <a data-link-type="dfn" href="#document-dynamic-view-transition-style-sheet"
                      id="ref-for-document-dynamic-view-transition-style-sheet⑥">dynamic view transition style sheet</a>
                    に追加：
                  </p>
                  <pre class="highlight">:root:<c- nf>:view-transition-old</c-><c- p>(</c-><var>transitionName</var><c- p>)</c-> <c- p>{</c->
  <c- k>animation-name</c-><c- p>:</c-> -ua-view-transition-fade-out<c- p>;</c->
<c- p>}</c->
</pre>
                  <p class="note" role="note"><span class="marker">注:</span> 上記コード例は変数を置換する必要があります。</p>
              </ol>
            <li data-md>
              <p><var>capturedElement</var> の <a data-link-type="dfn" href="#captured-element-old-image"
                  id="ref-for-captured-element-old-image⑥">old image</a> と <a data-link-type="dfn"
                  href="#captured-element-new-element" id="ref-for-captured-element-new-element⑦">new element</a> が両方
                null でない場合：</p>
              <ol>
                <li data-md>
                  <p><var>transform</var> を <var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-old-transform" id="ref-for-captured-element-old-transform①">old
                      transform</a> とする。</p>
                <li data-md>
                  <p><var>width</var> を <var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-old-width" id="ref-for-captured-element-old-width①">old width</a> とする。</p>
                <li data-md>
                  <p><var>height</var> を <var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-old-height" id="ref-for-captured-element-old-height①">old height</a> とする。
                  </p>
                <li data-md>
                  <p><var>backdropFilter</var> を <var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-old-backdrop-filter"
                      id="ref-for-captured-element-old-backdrop-filter①">old backdrop-filter</a> とする。</p>
                <li data-md>
                  <p><var>capturedElement</var> の <a data-link-type="dfn" href="#captured-element-group-keyframes"
                      id="ref-for-captured-element-group-keyframes">group keyframes</a> を新しい <code
                      class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-animations-1/#csskeyframesrule" id="ref-for-csskeyframesrule①">CSSKeyframesRule</a></code>
                    (以下のCSSを表現)とし、
                    <var>document</var> の <a data-link-type="dfn" href="#document-dynamic-view-transition-style-sheet"
                      id="ref-for-document-dynamic-view-transition-style-sheet⑦">dynamic view transition style sheet</a>
                    に追加：
                  </p>
                  <pre class="highlight"><c- n>@keyframes</c-> -ua-view-transition-group-anim-<var>transitionName</var> <c- p>{</c->
  from <c- p>{</c->
    <c- k>transform</c-><c- p>:</c-> <var>transform</var><c- p>;</c->
    <c- k>width</c-><c- p>:</c-> <var>width</var><c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <var>height</var><c- p>;</c->
    <c- k>backdrop-filter</c-><c- p>:</c-> <var>backdropFilter</var><c- p>;</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
                  <p class="note" role="note"><span class="marker">注:</span> 上記コード例は変数を置換する必要があります。</p>
                <li data-md>
                  <p><var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-group-animation-name-rule"
                      id="ref-for-captured-element-group-animation-name-rule">group animation name rule</a> を新しい
                    <code
                      class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule⑥">CSSStyleRule</a></code>
                    (以下のCSSを表現)とし、
                    <var>document</var> の <a data-link-type="dfn" href="#document-dynamic-view-transition-style-sheet"
                      id="ref-for-document-dynamic-view-transition-style-sheet⑧">dynamic view transition style sheet</a>
                    に追加：
                  </p>
                  <pre class="highlight">:root:<c- nf>:view-transition-group</c-><c- p>(</c-><var>transitionName</var><c- p>)</c-> <c- p>{</c->
  <c- k>animation-name</c-><c- p>:</c-> -ua-view-transition-group-anim-<var>transitionName</var><c- p>;</c->
<c- p>}</c->
</pre>
                  <p class="note" role="note"><span class="marker">注:</span> 上記コード例は変数を置換する必要があります。</p>
                <li data-md>
                  <p><var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-image-pair-isolation-rule"
                      id="ref-for-captured-element-image-pair-isolation-rule">image pair isolation rule</a> を新しい
                    <code
                      class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule⑦">CSSStyleRule</a></code>
                    (以下のCSSを表現)とし、
                    <var>document</var> の <a data-link-type="dfn" href="#document-dynamic-view-transition-style-sheet"
                      id="ref-for-document-dynamic-view-transition-style-sheet⑨">dynamic view transition style sheet</a>
                    に追加：
                  </p>
                  <pre class="highlight">:root:<c- nf>:view-transition-image-pair</c-><c- p>(</c-><var>transitionName</var><c- p>)</c-> <c- p>{</c->
  <c- k>isolation</c-><c- p>:</c-> isolate<c- p>;</c->
<c- p>}</c->
</pre>
                  <p class="note" role="note"><span class="marker">注:</span> 上記コード例は変数を置換する必要があります。</p>
                <li data-md>
                  <p><var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-image-animation-name-rule"
                      id="ref-for-captured-element-image-animation-name-rule②">image animation name rule</a> を新しい
                    <code
                      class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule⑧">CSSStyleRule</a></code>
                    (以下のCSSを表現)とし、
                    <var>document</var> の <a data-link-type="dfn" href="#document-dynamic-view-transition-style-sheet"
                      id="ref-for-document-dynamic-view-transition-style-sheet①⓪">dynamic view transition style
                      sheet</a> に追加：
                  </p>
                  <pre class="highlight">:root:<c- nf>:view-transition-old</c-><c- p>(</c-><var>transitionName</var><c- p>)</c-> <c- p>{</c->
  <c- k>animation-name</c-><c- p>:</c-> -ua-view-transition-fade-out<c- p>,</c-> -ua-mix-blend-mode-plus-lighter<c- p>;</c->
<c- p>}</c->
:root:<c- nf>:view-transition-new</c-><c- p>(</c-><var>transitionName</var><c- p>)</c-> <c- p>{</c->
  <c- k>animation-name</c-><c- p>:</c-> -ua-view-transition-fade-in<c- p>,</c-> -ua-mix-blend-mode-plus-lighter<c- p>;</c->
<c- p>}</c->
</pre>
                  <p class="note" role="note"><span class="marker">注:</span> 上記コード例は変数を置換する必要があります。</p>
                  <p class="note" role="note"><span class="marker">注:</span> <a class="css" data-link-type="propdesc"
                      href="https://www.w3.org/TR/compositing-1/#propdef-mix-blend-mode"
                      id="ref-for-propdef-mix-blend-mode③">mix-blend-mode: plus-lighter</a> の効果で、
                    old/new両画像の同じピクセルを合成したときに正しいクロスフェードが実現できます。</p>
              </ol>
          </ol>
      </ol>
    </div>
    <h3 class="heading settled" data-level="7.4" id="call-dom-update-callback-algorithm"><span class="secno">7.4.
      </span><span class="content"><a data-link-type="dfn" href="#call-the-update-callback"
          id="ref-for-call-the-update-callback①">update callback の呼び出し</a></span><a class="self-link"
        href="#call-dom-update-callback-algorithm"></a></h3>
    <div class="algorithm" data-algorithm="call the update callback">
      <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="call-the-update-callback">update callback
        の呼び出し</dfn> を <code
        class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition①⑧">ViewTransition</a></code>
      <var>transition</var> に対して行う手順：
      <p class="note" role="note"><span class="marker">注:</span> これはすべての <code
          class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition①⑨">ViewTransition</a></code>
        に対し必ず発生します。遷移が <a data-link-type="dfn" href="#skip-the-view-transition"
          id="ref-for-skip-the-view-transition①⓪">skip</a> された場合も同様です。
        この理由は <a href="#transitions-as-enhancements">§ 1.4 拡張機能としての遷移</a>で説明されています。</p>
      <ol>
        <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert②">Assert</a>:
            <var>transition</var> の <a data-link-type="dfn" href="#viewtransition-phase"
              id="ref-for-viewtransition-phase⑦">phase</a> が "<code>done</code>" または
            "<code>update-callback-called</code>" 前であること。
          </p>
        <li data-md>
          <p><var>callbackPromise</var> を null とする。</p>
        <li data-md>
          <p><var>transition</var> の <a data-link-type="dfn" href="#viewtransition-update-callback"
              id="ref-for-viewtransition-update-callback②">update callback</a> が null なら、
            <var>callbackPromise</var> を <a data-link-type="dfn"
              href="https://webidl.spec.whatwg.org/#a-promise-resolved-with"
              id="ref-for-a-promise-resolved-with">undefinedで解決されたpromise</a>（<var>transition</var> の <a
              data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
              id="ref-for-concept-relevant-realm⑧">関連Realm</a>内）に設定。
          </p>
        <li data-md>
          <p>それ以外の場合、<var>callbackPromise</var> を <a data-link-type="dfn"
              href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
              id="ref-for-invoke-a-callback-function">update callbackの呼び出し</a>の結果に設定。</p>
        <li data-md>
          <p><var>transition</var> の <a data-link-type="dfn" href="#viewtransition-phase"
              id="ref-for-viewtransition-phase⑧">phase</a> が "<code>done</code>" でなければ、<span
              id="ref-for-viewtransition-phase⑨">phase</span> を "<code>update-callback-called</code>" に設定。</p>
        <li data-md>
          <p><var>fulfillSteps</var> を以下の手順とする：</p>
          <ol>
            <li data-md>
              <p><a data-link-type="dfn" href="#activate-view-transition" id="ref-for-activate-view-transition">activate
                  view transition</a> を <var>transition</var> に対して行う。</p>
            <li data-md>
              <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve"
                  id="ref-for-resolve②">resolve</a> <var>transition</var> の <a data-link-type="dfn"
                  href="#viewtransition-update-callback-done-promise"
                  id="ref-for-viewtransition-update-callback-done-promise④">update callback done promise</a> を undefined
                で解決。</p>
              <p class="note" role="note"><span class="marker">注:</span> 前手順で既にpromiseを解決している場合はno-opです。</p>
          </ol>
        <li data-md>
          <p><var>rejectSteps</var> を <var>reason</var>を引数に以下の手順とする：</p>
          <ol>
            <li data-md>
              <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject">reject</a>
                <var>transition</var> の <a data-link-type="dfn" href="#viewtransition-update-callback-done-promise"
                  id="ref-for-viewtransition-update-callback-done-promise⑤">update callback done promise</a> を
                <var>reason</var> でreject。
              </p>
            <li data-md>
              <p><var>transition</var> の <a data-link-type="dfn" href="#viewtransition-phase"
                  id="ref-for-viewtransition-phase①⓪">phase</a> が "<code>done</code>" なら return。</p>
              <p class="note" role="note"><span class="marker">注:</span> これは <var>transition</var> がこの時点で <a
                  data-link-type="dfn" href="#skip-the-view-transition" id="ref-for-skip-the-view-transition①①">skip</a>
                された場合に発生します。</p>
            <li data-md>
              <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#mark-a-promise-as-handled"
                  id="ref-for-mark-a-promise-as-handled③">handledとしてマーク</a> <var>transition</var> の <a
                  data-link-type="dfn" href="#viewtransition-ready-promise"
                  id="ref-for-viewtransition-ready-promise③">ready promise</a>。</p>
              <p class="note" role="note"><span class="marker">注:</span> <var>transition</var> の <a data-link-type="dfn"
                  href="#viewtransition-update-callback-done-promise"
                  id="ref-for-viewtransition-update-callback-done-promise⑥">update callback done promise</a> が <code
                  class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-unhandledrejection" id="ref-for-event-unhandledrejection②">unhandledrejection</a></code>
                を提供します。この手順は重複を避けるものです。</p>
            <li data-md>
              <p><a data-link-type="dfn" href="#skip-the-view-transition" id="ref-for-skip-the-view-transition①②">skip
                  the view transition</a> を <var>transition</var> に <var>reason</var> で行う。</p>
          </ol>
        <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled"
              id="ref-for-dfn-perform-steps-once-promise-is-settled">callbackPromiseをsettle時に</a>
            <var>fulfillSteps</var> と <var>rejectSteps</var> を実行。
          </p>
        <li data-md>
          <p>ユーザーエージェントがタイムアウト後に遷移をスキップする場合、以下の手順を <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
              id="ref-for-in-parallel">並列で</a>実行する：</p>
          <ol>
            <li data-md>
              <p>実装依存の <a data-link-type="dfn" href="https://www.w3.org/TR/hr-time-3/#dfn-duration"
                  id="ref-for-dfn-duration">duration</a> だけ待つ。</p>
            <li data-md>
              <p><a data-link-type="dfn"
                  href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task"
                  id="ref-for-queue-a-global-task①">グローバルタスクをキュー</a>（<a data-link-type="dfn"
                  href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source"
                  id="ref-for-dom-manipulation-task-source①">DOM操作タスクソース</a>で）、<var>transition</var> の <a
                  data-link-type="dfn"
                  href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                  id="ref-for-concept-relevant-global⑦">関連グローバルオブジェクト</a>指定、以下の手順実行：</p>
              <ol>
                <li data-md>
                  <p><var>transition</var> の <a data-link-type="dfn" href="#viewtransition-phase"
                      id="ref-for-viewtransition-phase①①">phase</a> が "<code>done</code>" なら return。</p>
                  <p class="note" role="note"><span class="marker">注:</span> これは <var>transition</var>
                    がこの時点で <a data-link-type="dfn" href="#skip-the-view-transition"
                      id="ref-for-skip-the-view-transition①③">skip</a> された場合に発生します。</p>
                <li data-md>
                  <p><a data-link-type="dfn" href="#skip-the-view-transition"
                      id="ref-for-skip-the-view-transition①④">skip</a> <var>transition</var> を "<code
                      class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#timeouterror" id="ref-for-timeouterror">TimeoutError</a></code>"
                    <code
                      class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑥">DOMException</a></code>
                    で行う。
                  </p>
              </ol>
          </ol>
      </ol>
    </div>
    <h3 class="heading settled" data-level="7.5" id="skip-the-view-transition-algorithm"><span class="secno">7.5.
      </span><span class="content"><a data-link-type="dfn" href="#skip-the-view-transition"
          id="ref-for-skip-the-view-transition①⑤">ビュー遷移をスキップする</a></span><a class="self-link"
        href="#skip-the-view-transition-algorithm"></a></h3>
    <div class="algorithm" data-algorithm="skip the view transition">
      <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="skip-the-view-transition">ビュー遷移をスキップする</dfn> を
      <code
        class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition②⓪">ViewTransition</a></code>
      <var>transition</var> に対して <var>reason</var> を用いて行う手順：
      <ol>
        <li data-md>
          <p><var>document</var> を <var>transition</var> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
              id="ref-for-concept-relevant-global⑧">関連グローバルオブジェクト</a> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"
              id="ref-for-concept-document-window⑥">関連付けられたドキュメント</a>とする。</p>
        <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert③">Assert</a>:
            <var>transition</var> の <a data-link-type="dfn" href="#viewtransition-phase"
              id="ref-for-viewtransition-phase①②">phase</a> が "<code>done</code>" でないこと。
          </p>
        <li data-md>
          <p><var>transition</var> の <a data-link-type="dfn" href="#viewtransition-phase"
              id="ref-for-viewtransition-phase①③">phase</a> が "<code>update-callback-called</code>"より前なら、
            <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task"
              id="ref-for-queue-a-global-task②">グローバルタスクをキュー</a>する（<a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source"
              id="ref-for-dom-manipulation-task-source②">DOM操作タスクソース</a>で、
            <var>transition</var> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
              id="ref-for-concept-relevant-global⑨">関連グローバルオブジェクト</a>指定）し、
            <a data-link-type="dfn" href="#call-the-update-callback" id="ref-for-call-the-update-callback②">update
              callback の呼び出し</a>を <var>transition</var> に対して行う。
          </p>
        <li data-md>
          <p><a data-link-type="dfn" href="#document-rendering-suppression-for-view-transitions"
              id="ref-for-document-rendering-suppression-for-view-transitions③">ビュー遷移用レンダリング抑制</a> を false に設定。</p>
        <li data-md>
          <p><var>document</var> の <a data-link-type="dfn" href="#document-active-view-transition"
              id="ref-for-document-active-view-transition①①">active view transition</a> が <var>transition</var> なら、
            <a data-link-type="dfn" href="#clear-view-transition" id="ref-for-clear-view-transition①">ビュー遷移のクリア</a> を
            <var>transition</var> に対して行う。
          </p>
        <li data-md>
          <p><var>transition</var> の <a data-link-type="dfn" href="#viewtransition-phase"
              id="ref-for-viewtransition-phase①④">phase</a> を "<code>done</code>" に設定。</p>
        <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①">reject</a>
            <var>transition</var> の <a data-link-type="dfn" href="#viewtransition-ready-promise"
              id="ref-for-viewtransition-ready-promise④">ready promise</a> を <var>reason</var> でreject。
          </p>
          <p class="note" role="note"><span class="marker">注:</span> <a data-link-type="dfn"
              href="#viewtransition-ready-promise" id="ref-for-viewtransition-ready-promise⑤">ready promise</a> は、
            この時点で既に解決済みである場合もある（<code
              class="idl"><a data-link-type="idl" href="#dom-viewtransition-skiptransition" id="ref-for-dom-viewtransition-skiptransition⑤">skipTransition()</a></code>
            がアニメーション開始後に呼ばれた場合）。
            その場合、このステップは no-op です。</p>
        <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve③">resolve</a>
            <var>transition</var> の <a data-link-type="dfn" href="#viewtransition-finished-promise"
              id="ref-for-viewtransition-finished-promise①">finished promise</a> を、
            <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled"
              id="ref-for-dfn-perform-steps-once-promise-is-settled①">update callback done promise の
              settle時に反応</a>した結果で解決：
          </p>
          <ul>
            <li data-md>
              <p>promiseがfulfilledなら undefined を返す。</p>
          </ul>
          <p class="note" role="note"><span class="marker">注:</span> <var>transition</var> の <a data-link-type="dfn"
              href="#viewtransition-update-callback-done-promise"
              id="ref-for-viewtransition-update-callback-done-promise⑧">update callback done promise</a>
            のrejectは明示的にここで処理されないため、
            <var>transition</var> の <span id="ref-for-viewtransition-update-callback-done-promise⑨">update callback done
              promise</span> がrejectされた場合、
            <var>transition</var> の <a data-link-type="dfn" href="#viewtransition-finished-promise"
              id="ref-for-viewtransition-finished-promise②">finished promise</a> も同じ理由でrejectされる。
          </p>
      </ol>
    </div>
    <h3 class="heading settled" data-level="7.6" id="page-visibility-change-steps"><span class="secno">7.6. </span><span
        class="content">ビュー遷移のページ可視性変更手順</span><a class="self-link" href="#page-visibility-change-steps"></a></h3>
    <div class="algorithm" data-algorithm="view transition page-visibility change steps">
      <dfn class="dfn-paneled" data-dfn-type="dfn" data-export
        id="view-transition-page-visibility-change-steps">ビュー遷移のページ可視性変更手順</dfn>は、<code
        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①⓪">Document</a></code>
      <var>document</var> に対して次の通り：
      <ol>
        <li data-md>
          <p><var>document</var> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/interaction.html#visibility-state"
              id="ref-for-visibility-state①">visibility state</a> が "<code>hidden</code>" なら：</p>
          <ol>
            <li data-md>
              <p><var>document</var> の <a data-link-type="dfn" href="#document-active-view-transition"
                  id="ref-for-document-active-view-transition①②">active view transition</a> が null でなければ、
                <a data-link-type="dfn" href="#skip-the-view-transition"
                  id="ref-for-skip-the-view-transition①⑥">skip</a>
                <var>document</var> の <span id="ref-for-document-active-view-transition①③">active view transition</span>
                を
                "<code
                  class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror④">InvalidStateError</a></code>"
                <code
                  class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑦">DOMException</a></code>
                でスキップする。
              </p>
          </ol>
        <li data-md>
          <p>それ以外の場合、<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert"
              id="ref-for-assert④">assert</a>: <a data-link-type="dfn" href="#document-active-view-transition"
              id="ref-for-document-active-view-transition①④">active view transition</a> は null であること。</p>
      </ol>
      <p class="note" role="note"><span class="marker">注:</span> これはHTML仕様から呼ばれます。</p>
    </div>
    <h3 class="heading settled" data-level="7.7" id="capture-the-image-algorithm"><span class="secno">7.7. </span><span
        class="content"><a data-link-type="dfn" href="#capture-the-image"
          id="ref-for-capture-the-image⑤">画像のキャプチャ</a></span><a class="self-link"
        href="#capture-the-image-algorithm"></a></h3>
    <div class="algorithm" data-algorithm="capture the image">
      <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="capture the image|capturing the image" data-noexport
        id="capture-the-image">画像のキャプチャ</dfn> を <a data-link-type="dfn" href="https://drafts.csswg.org/css2/#element"
        id="ref-for-element①⓪">element</a> <var>element</var> に対して行う手順。
      画像を返す。
      <ol>
        <li data-md>
          <p><var>element</var> が <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#document-element"
              id="ref-for-document-element⑨">document element</a> なら：</p>
          <ol>
            <li data-md>
              <p>ドキュメント領域
                （<a data-link-type="dfn" href="https://www.w3.org/TR/css-backgrounds-3/#canvas-background"
                  id="ref-for-canvas-background">canvas background</a> や <a data-link-type="dfn"
                  href="https://drafts.csswg.org/css-position-4/#document-top-layer"
                  id="ref-for-document-top-layer①">トップレイヤー</a>の内容を含む）
                が <a data-link-type="dfn" href="#snapshot-containing-block"
                  id="ref-for-snapshot-containing-block①①">スナップショット包含ブロック</a>と交差する部分を、
                <span id="ref-for-snapshot-containing-block①②">スナップショット包含ブロック</span>と同じサイズの透明なキャンバス上にレンダリングする。
                <a data-link-type="dfn" href="#capture-rendering-characteristics"
                  id="ref-for-capture-rendering-characteristics">キャプチャレンダリング特性</a>および以下の特性に従う：
              </p>
              <ul>
                <li data-md>
                  <p><var>element</var> の <a data-link-type="dfn"
                      href="https://drafts.csswg.org/cssom-view-1/#scrolling-box"
                      id="ref-for-scrolling-box">スクロールボックス</a> の外側領域は、
                    レイアウトビューポートを移動・サイズ変更せずに、スクロールされたかのようにレンダリングされるべき。
                    これはスクロールやリサイズ関連のイベント（<code
                      class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/intersection-observer/#intersectionobserver" id="ref-for-intersectionobserver">IntersectionObserver</a></code>など）を発火してはならない。
                  </p>
                  <figure>
                    <img alt="スマートフォンブラウザーウィンドウ。URLバー、直下に固定要素、その下にページコンテンツ。スクロールバーはページが大きくスクロールされていることを示す。" height="297"
                      src="https://www.w3.org/TR/css-view-transitions-1/diagrams/phone-browser-with-url.svg"
                      width="202"> <img alt="キャプチャされたスナップショット。URLバー下のコンテンツもキャプチャに含まれることが分かる。" height="297"
                      src="https://www.w3.org/TR/css-view-transitions-1/diagrams/phone-browser-without-url.svg"
                      width="202">
                    <figcaption> ユーザーが見ているものとキャプチャスナップショットの例。
                      この例ではルートだけがtransition nameを持つと仮定。 </figcaption>
                  </figure>
                <li data-md>
                  <p>スクロール不可能な領域（スクロール範囲外）は
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-backgrounds-3/#canvas-background"
                      id="ref-for-canvas-background①">canvas background</a> をレンダリングするべき。
                  </p>
                  <figure>
                    <img alt="スマートフォンブラウザーウィンドウ。URLバーとその下にコンテンツ。スクロールバーはページが一番上にあることを示す。" height="297"
                      src="https://www.w3.org/TR/css-view-transitions-1/diagrams/phone-browser-scrolled-to-top-with-url.svg"
                      width="202"> <img alt="キャプチャスナップショット。URLバー下の領域が他のドキュメント部分と同じ色になっている。" height="297"
                      src="https://www.w3.org/TR/css-view-transitions-1/diagrams/phone-browser-scrolled-to-top-without-url.svg"
                      width="202">
                    <figcaption> ユーザーが見ているものとキャプチャスナップショットの例。
                      この例ではルートだけがtransition nameを持つと仮定。 </figcaption>
                  </figure>
              </ul>
            <li data-md>
              <p>このキャンバスを画像として返す。
                画像の自然サイズは <a data-link-type="dfn" href="#snapshot-containing-block"
                  id="ref-for-snapshot-containing-block①③">スナップショット包含ブロック</a>と同じ。</p>
          </ol>
        <li data-md>
          <p>それ以外の場合：</p>
          <ol>
            <li data-md>
              <p><var>element</var> およびその <a data-link-type="dfn"
                  href="https://dom.spec.whatwg.org/#concept-tree-descendant"
                  id="ref-for-concept-tree-descendant②">子孫</a> を、
                <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document"
                  id="ref-for-concept-node-document②">ノードドキュメント</a>で表示されるのと同じサイズで、
                無限透明キャンバス上にレンダリングする。
                <a data-link-type="dfn" href="#capture-rendering-characteristics"
                  id="ref-for-capture-rendering-characteristics①">キャプチャレンダリング特性</a>に従う。
              </p>
            <li data-md>
              <p>このキャンバスのうち、<var>element</var> の <a data-link-type="dfn"
                  href="https://www.w3.org/TR/css-overflow-3/#ink-overflow-rectangle"
                  id="ref-for-ink-overflow-rectangle">ink overflow rectangle</a> を含む部分を画像として返す。
                この画像の<a data-link-type="dfn" href="https://www.w3.org/TR/css-images-3/#natural-dimensions"
                  id="ref-for-natural-dimensions②">自然寸法</a>は、その <a data-link-type="dfn"
                  href="https://www.w3.org/TR/css-display-3/#principal-box" id="ref-for-principal-box①">principal</a> <a
                  data-link-type="dfn" href="https://www.w3.org/TR/css-box-4/#border-box"
                  id="ref-for-border-box④">border box</a>と同じで、
                原点もその <span id="ref-for-border-box⑤">border box</span> の原点に対応する。
                画像はこの <span id="ref-for-border-box⑥">border box</span> の内容と、キャプチャされた <a data-link-type="dfn"
                  href="https://www.w3.org/TR/css-overflow-3/#ink-overflow" id="ref-for-ink-overflow">ink overflow</a>
                がその外側に表現される。</p>
              <p class="note" role="note"><span class="marker">注:</span> この画像を <a data-link-type="dfn"
                  href="https://www.w3.org/TR/css-display-3/#replaced-element"
                  id="ref-for-replaced-element③">置換要素</a>として自然サイズでレンダリングすると、
                要素の <a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#principal-box"
                  id="ref-for-principal-box②">principal box</a> のサイズと内容が表示され、
                キャプチャされた <a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#ink-overflow"
                  id="ref-for-ink-overflow①">ink overflow</a> は <a data-link-type="dfn"
                  href="https://www.w3.org/TR/css-box-4/#content-box" id="ref-for-content-box">content box</a>の外に溢れる。
              </p>
          </ol>
      </ol>
    </div>
    <h4 class="heading settled" data-level="7.7.1" id="capture-rendering-characteristics-algorithm"><span
        class="secno">7.7.1. </span><span class="content"><a data-link-type="dfn"
          href="#capture-rendering-characteristics"
          id="ref-for-capture-rendering-characteristics②">キャプチャレンダリング特性</a></span><a class="self-link"
        href="#capture-rendering-characteristics-algorithm"></a></h4>
    <div class="algorithm" data-algorithm="capture rendering characteristics">
      <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
        id="capture-rendering-characteristics">キャプチャレンダリング特性</dfn>は次の通り：
      <ul>
        <li data-md>
          <p>参照要素またはその祖先にtransformが適用されている場合、そのtransformは無視する。</p>
          <p class="note" role="note"><span class="marker">注:</span> このtransformは、関連する <span
              class="css">::view-transition-group</span> 疑似要素の <code>transform</code> プロパティでスナップショットに適用される。</p>
        <li data-md>
          <p>要素およびその子孫に適用された <a class="property css" data-link-type="property"
              href="https://www.w3.org/TR/css-color-4/#propdef-opacity" id="ref-for-propdef-opacity①">opacity</a> や <a
              class="property css" data-link-type="property"
              href="https://www.w3.org/TR/filter-effects-1/#propdef-filter" id="ref-for-propdef-filter①">filter</a>
            などの効果はキャプチャに適用される。
            祖先から要素に適用された効果は無視される。</p>
        <li data-md>
          <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#ink-overflow-rectangle"
              id="ref-for-ink-overflow-rectangle①">ink overflow rectangle</a> が <a data-link-type="dfn"
              href="https://infra.spec.whatwg.org/#implementation-defined"
              id="ref-for-implementation-defined①">実装依存</a>の最大値を超える場合、実装は描画内容をクリップしてもよい。
            ただし、キャプチャ画像には少なくとも <var>element</var> の <a data-link-type="dfn" href="#snapshot-containing-block"
              id="ref-for-snapshot-containing-block①④">スナップショット包含ブロック</a>と交差する内容は含めるべき。
            実装は、<a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#ink-overflow-region"
              id="ref-for-ink-overflow-region">ink overflow area</a> が大きくviewにtransformされる要素について、ラスタ品質を調整してもよい。</p>
        <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate⑤">各</a>
            <var>descendant</var> を <a data-link-type="dfn"
              href="https://dom.spec.whatwg.org/#concept-shadow-including-descendant"
              id="ref-for-concept-shadow-including-descendant">shadow-including descendant</a> <code
              class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①①">Element</a></code>
            および <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#pseudo-element"
              id="ref-for-pseudo-element①⓪">疑似要素</a>（<var>element</var>の）について、
            <var>descendant</var> が <a data-link-type="dfn" href="#captured-in-a-view-transition"
              id="ref-for-captured-in-a-view-transition⑦">ビュー遷移でキャプチャされた</a>なら、その描画をスキップする。
          </p>
          <p class="note" role="note"><span class="marker">注:</span> この理由は、子孫自身が独立してスナップショットを生成し、個別にアニメーションされるため。</p>
      </ul>
    </div>
    <h3 class="heading settled" data-level="7.8" id="handle-transition-frame-algorithm"><span class="secno">7.8.
      </span><span class="content"><a data-link-type="dfn" href="#handle-transition-frame"
          id="ref-for-handle-transition-frame①">遷移フレームの処理</a></span><a class="self-link"
        href="#handle-transition-frame-algorithm"></a></h3>
    <div class="algorithm" data-algorithm="handle transition frame">
      <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="handle-transition-frame">遷移フレームの処理</dfn> を <code
        class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition②①">ViewTransition</a></code>
      <var>transition</var> に対して行う手順：
      <ol>
        <li data-md>
          <p><var>document</var> を <var>transition</var> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
              id="ref-for-concept-relevant-global①⓪">関連グローバルオブジェクト</a> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"
              id="ref-for-concept-document-window⑦">関連付けられたドキュメント</a>とする。</p>
        <li data-md>
          <p><var>hasActiveAnimations</var> を boolean型（初期値 false）とする。</p>
        <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate⑥">各</a>
            <var>element</var> を <var>transition</var> の <a data-link-type="dfn"
              href="#viewtransition-transition-root-pseudo-element"
              id="ref-for-viewtransition-transition-root-pseudo-element⑤">transition root pseudo-element</a> の <a
              data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-inclusive-descendant"
              id="ref-for-concept-tree-inclusive-descendant①">inclusive descendants</a> でイテレート：
          </p>
          <ol>
            <li data-md>
              <p>各 <var>animation</var>（<a data-link-type="dfn" href="https://www.w3.org/TR/web-animations-1/#timeline"
                  id="ref-for-timeline①">timeline</a> が <a data-link-type="dfn"
                  href="https://www.w3.org/TR/web-animations-1/#document-timeline"
                  id="ref-for-document-timeline">document timeline</a>で <var>document</var>に関連し、
                少なくとも1つ <a data-link-type="dfn"
                  href="https://www.w3.org/TR/web-animations-1/#animation-associated-effect"
                  id="ref-for-animation-associated-effect">associated effect</a> の <a data-link-type="dfn"
                  href="https://www.w3.org/TR/web-animations-1/#keyframe-effect-effect-target"
                  id="ref-for-keyframe-effect-effect-target">effect target</a> が <var>element</var>であるもの）について、
                以下いずれかがtrueなら <var>hasActiveAnimations</var> を true にする：</p>
              <ul>
                <li data-md>
                  <p><var>animation</var> の <a data-link-type="dfn"
                      href="https://www.w3.org/TR/web-animations-1/#animation-play-state"
                      id="ref-for-animation-play-state">play state</a> が <a data-link-type="dfn"
                      href="https://www.w3.org/TR/web-animations-1/#play-state-paused"
                      id="ref-for-play-state-paused">paused</a> または <a data-link-type="dfn"
                      href="https://www.w3.org/TR/web-animations-1/#play-state-running"
                      id="ref-for-play-state-running">running</a>。</p>
                <li data-md>
                  <p><var>document</var> の <a data-link-type="dfn"
                      href="https://www.w3.org/TR/web-animations-1/#pending-animation-event-queue"
                      id="ref-for-pending-animation-event-queue">pending animation event queue</a> に
                    <var>animation</var> に関連するイベントがある。
                  </p>
              </ul>
          </ol>
        <li data-md>
          <p><var>hasActiveAnimations</var> が false の場合：</p>
          <ol>
            <li data-md>
              <p><var>transition</var> の <a data-link-type="dfn" href="#viewtransition-phase"
                  id="ref-for-viewtransition-phase①⑤">phase</a> を "<code>done</code>" に設定。</p>
            <li data-md>
              <p><a data-link-type="dfn" href="#clear-view-transition" id="ref-for-clear-view-transition②">ビュー遷移のクリア</a>
                を <var>transition</var> に対して実行。</p>
            <li data-md>
              <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve"
                  id="ref-for-resolve④">resolve</a> <var>transition</var> の <a data-link-type="dfn"
                  href="#viewtransition-finished-promise" id="ref-for-viewtransition-finished-promise③">finished
                  promise</a>。</p>
            <li data-md>
              <p>return。</p>
          </ol>
        <li data-md>
          <p><var>transition</var> の <a data-link-type="dfn"
              href="#viewtransition-initial-snapshot-containing-block-size"
              id="ref-for-viewtransition-initial-snapshot-containing-block-size②">初期スナップショット包含ブロックサイズ</a> が
            <a data-link-type="dfn" href="#snapshot-containing-block-size"
              id="ref-for-snapshot-containing-block-size④">スナップショット包含ブロックサイズ</a>と等しくない場合、
            <a data-link-type="dfn" href="#skip-the-view-transition"
              id="ref-for-skip-the-view-transition①⑦">ビュー遷移のスキップ</a> を <var>transition</var> に対して実行し、return。
          </p>
        <li data-md>
          <p><a data-link-type="dfn" href="#update-pseudo-element-styles"
              id="ref-for-update-pseudo-element-styles④">疑似要素スタイルの更新</a> を <var>transition</var> に対して実行。</p>
          <p>失敗が返された場合、<a data-link-type="dfn" href="#skip-the-view-transition"
              id="ref-for-skip-the-view-transition①⑧">ビュー遷移のスキップ</a> を <var>transition</var> に対し
            "<code
              class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror⑤">InvalidStateError</a></code>"
            <code
              class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑧">DOMException</a></code>
            を <var>transition</var> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
              id="ref-for-concept-relevant-realm⑨">関連Realm</a> で行い、return。
          </p>
          <p class="note" role="note"><span class="marker">注:</span> 上記は、要素のサイズや位置が変化した場合に新しいキーフレームが生成されることを意味します。
            このため、視覚的なジャンプが発生する場合があります。
            より滑らかなリターゲットも可能ですが、複雑さに見合うユースケースがまだありません。
            詳細は <a href="https://github.com/w3c/csswg-drafts/issues/7813">issue 7813</a> を参照。</p>
      </ol>
    </div>
    <h3 class="heading settled" data-level="7.9" id="style-transition-pseudo-elements-algorithm"><span
        class="secno">7.9. </span><span class="content"><a data-link-type="dfn" href="#update-pseudo-element-styles"
          id="ref-for-update-pseudo-element-styles⑤">疑似要素スタイルの更新</a></span><a class="self-link"
        href="#style-transition-pseudo-elements-algorithm"></a></h3>
    <div class="algorithm" data-algorithm="update pseudo-element styles">
      <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="update-pseudo-element-styles">疑似要素スタイルの更新</dfn> を
      <code
        class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition②②">ViewTransition</a></code>
      <var>transition</var> に対して行う手順：
      <ol>
        <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate" id="ref-for-map-iterate①">各</a>
            <var>transitionName</var> → <var>capturedElement</var> を <var>transition</var> の <a data-link-type="dfn"
              href="#viewtransition-named-elements" id="ref-for-viewtransition-named-elements④">named elements</a>
            でイテレート：
          </p>
          <ol>
            <li data-md>
              <p><var>width</var>, <var>height</var>, <var>transform</var>, <var>writingMode</var>,
                <var>direction</var>, <var>textOrientation</var>, <var>mixBlendMode</var>, <var>backdropFilter</var>,
                <var>colorScheme</var> を null で初期化。
              </p>
            <li data-md>
              <p><var>capturedElement</var> の <a data-link-type="dfn" href="#captured-element-new-element"
                  id="ref-for-captured-element-new-element⑧">new element</a> が null の場合：</p>
              <ol>
                <li data-md>
                  <p><var>width</var> を <var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-old-width" id="ref-for-captured-element-old-width②">old width</a> で設定。</p>
                <li data-md>
                  <p><var>height</var> を <var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-old-height" id="ref-for-captured-element-old-height②">old height</a> で設定。
                  </p>
                <li data-md>
                  <p><var>transform</var> を <var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-old-transform" id="ref-for-captured-element-old-transform②">old
                      transform</a> で設定。</p>
                <li data-md>
                  <p><var>writingMode</var> を <var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-old-writing-mode" id="ref-for-captured-element-old-writing-mode①">old
                      writing-mode</a> で設定。</p>
                <li data-md>
                  <p><var>direction</var> を <var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-old-direction" id="ref-for-captured-element-old-direction①">old
                      direction</a> で設定。</p>
                <li data-md>
                  <p><var>textOrientation</var> を <var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-old-text-orientation"
                      id="ref-for-captured-element-old-text-orientation①">old text-orientation</a> で設定。</p>
                <li data-md>
                  <p><var>mixBlendMode</var> を <var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-old-mix-blend-mode" id="ref-for-captured-element-old-mix-blend-mode①">old
                      mix-blend-mode</a> で設定。</p>
                <li data-md>
                  <p><var>backdropFilter</var> を <var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-old-backdrop-filter"
                      id="ref-for-captured-element-old-backdrop-filter②">old backdrop-filter</a> で設定。</p>
                <li data-md>
                  <p><var>colorScheme</var> を <var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-old-color-scheme" id="ref-for-captured-element-old-color-scheme①">old
                      color-scheme</a> で設定。</p>
              </ol>
            <li data-md>
              <p>それ以外の場合：</p>
              <ol>
                <li data-md>
                  <p>以下いずれかがtrueなら失敗を返す：</p>
                  <ul>
                    <li data-md>
                      <p><var>capturedElement</var> の <a data-link-type="dfn" href="#captured-element-new-element"
                          id="ref-for-captured-element-new-element⑨">new element</a> の <a data-link-type="dfn"
                          href="https://drafts.csswg.org/css-scoping-1/#flat-tree" id="ref-for-flat-tree②">flat tree</a>
                        の祖先が <a data-link-type="dfn" href="https://www.w3.org/TR/css-contain-2/#skips-its-contents"
                          id="ref-for-skips-its-contents③">内容をスキップ</a>している。</p>
                    <li data-md>
                      <p><var>capturedElement</var> の <a data-link-type="dfn" href="#captured-element-new-element"
                          id="ref-for-captured-element-new-element①⓪">new element</a> が <a data-link-type="dfn"
                          href="https://www.w3.org/TR/css-images-4/#element-not-rendered"
                          id="ref-for-element-not-rendered③">非レンダリング</a>。</p>
                    <li data-md>
                      <p><var>capturedElement</var> が複数の <a data-link-type="dfn"
                          href="https://www.w3.org/TR/css-break-4/#box-fragment" id="ref-for-box-fragment②">box
                          fragment</a> を持つ。</p>
                  </ul>
                  <p class="note" role="note"><span class="marker">注:</span> その他のレンダリング制約は <var>capturedElement</var> の
                    <a data-link-type="dfn" href="#captured-element-new-element"
                      id="ref-for-captured-element-new-element①①">new element</a> が <a data-link-type="dfn"
                      href="#captured-in-a-view-transition"
                      id="ref-for-captured-in-a-view-transition⑧">ビュー遷移でキャプチャされた</a>であることで強制される。
                  </p>
                <li data-md>
                  <p><var>width</var> を <var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-new-element" id="ref-for-captured-element-new-element①②">new element</a> の
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-box-4/#border-box"
                      id="ref-for-border-box⑦">border box</a> の現時点の幅で設定。
                  </p>
                <li data-md>
                  <p><var>height</var> を <var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-new-element" id="ref-for-captured-element-new-element①③">new element</a> の
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-box-4/#border-box"
                      id="ref-for-border-box⑧">border box</a> の現時点の高さで設定。
                  </p>
                <li data-md>
                  <p><var>transform</var> を <var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-new-element" id="ref-for-captured-element-new-element①④">new element</a> の
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-box-4/#border-box"
                      id="ref-for-border-box⑨">border box</a> を <a data-link-type="dfn"
                      href="#snapshot-containing-block-origin"
                      id="ref-for-snapshot-containing-block-origin①">スナップショット包含ブロック原点</a> から現在の視覚位置にマッピングするtransformで設定。
                  </p>
                <li data-md>
                  <p><var>writingMode</var> を <a data-link-type="dfn"
                      href="https://www.w3.org/TR/css-cascade-5/#computed-value"
                      id="ref-for-computed-value①⓪">算出値</a>（<a class="property css" data-link-type="property"
                      href="https://www.w3.org/TR/css-writing-modes-4/#propdef-writing-mode"
                      id="ref-for-propdef-writing-mode②">writing-mode</a>、<var>capturedElement</var> の <a
                      data-link-type="dfn" href="#captured-element-new-element"
                      id="ref-for-captured-element-new-element①⑤">new element</a>）で設定。</p>
                <li data-md>
                  <p><var>direction</var> を <a data-link-type="dfn"
                      href="https://www.w3.org/TR/css-cascade-5/#computed-value"
                      id="ref-for-computed-value①①">算出値</a>（<a class="property css" data-link-type="property"
                      href="https://www.w3.org/TR/css-writing-modes-3/#propdef-direction"
                      id="ref-for-propdef-direction②">direction</a>、<var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-new-element" id="ref-for-captured-element-new-element①⑥">new
                      element</a>）で設定。</p>
                <li data-md>
                  <p><var>textOrientation</var> を <a data-link-type="dfn"
                      href="https://www.w3.org/TR/css-cascade-5/#computed-value"
                      id="ref-for-computed-value①②">算出値</a>（<a class="property css" data-link-type="property"
                      href="https://www.w3.org/TR/css-writing-modes-4/#propdef-text-orientation"
                      id="ref-for-propdef-text-orientation②">text-orientation</a>、<var>capturedElement</var> の <a
                      data-link-type="dfn" href="#captured-element-new-element"
                      id="ref-for-captured-element-new-element①⑦">new element</a>）で設定。</p>
                <li data-md>
                  <p><var>mixBlendMode</var> を <a data-link-type="dfn"
                      href="https://www.w3.org/TR/css-cascade-5/#computed-value"
                      id="ref-for-computed-value①③">算出値</a>（<a class="property css" data-link-type="property"
                      href="https://www.w3.org/TR/compositing-1/#propdef-mix-blend-mode"
                      id="ref-for-propdef-mix-blend-mode④">mix-blend-mode</a>、<var>capturedElement</var> の <a
                      data-link-type="dfn" href="#captured-element-new-element"
                      id="ref-for-captured-element-new-element①⑧">new element</a>）で設定。</p>
                <li data-md>
                  <p><var>backdropFilter</var> を <a data-link-type="dfn"
                      href="https://www.w3.org/TR/css-cascade-5/#computed-value"
                      id="ref-for-computed-value①④">算出値</a>（<a class="property css" data-link-type="property"
                      href="https://drafts.fxtf.org/filter-effects-2/#propdef-backdrop-filter"
                      id="ref-for-backdrop-filter②">backdrop-filter</a>、<var>capturedElement</var> の <a
                      data-link-type="dfn" href="#captured-element-new-element"
                      id="ref-for-captured-element-new-element①⑨">new element</a>）で設定。</p>
                <li data-md>
                  <p><var>colorScheme</var> を <a data-link-type="dfn"
                      href="https://www.w3.org/TR/css-cascade-5/#computed-value"
                      id="ref-for-computed-value①⑤">算出値</a>（<a class="property css" data-link-type="property"
                      href="https://www.w3.org/TR/css-color-adjust-1/#propdef-color-scheme"
                      id="ref-for-color-scheme②">color-scheme</a>、<var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-new-element" id="ref-for-captured-element-new-element②⓪">new
                      element</a>）で設定。</p>
              </ol>
            <li data-md>
              <p><var>capturedElement</var> の <a data-link-type="dfn" href="#captured-element-group-styles-rule"
                  id="ref-for-captured-element-group-styles-rule">group styles rule</a> が null なら、
                <span id="ref-for-captured-element-group-styles-rule①">group styles rule</span> に新しい <code
                  class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule⑨">CSSStyleRule</a></code>
                （以下のCSS）を設定し、<var>transition</var> の <a data-link-type="dfn"
                  href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                  id="ref-for-concept-relevant-global①①">関連グローバルオブジェクト</a> の <a data-link-type="dfn"
                  href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"
                  id="ref-for-concept-document-window⑧">関連付けられたドキュメント</a> の <a data-link-type="dfn"
                  href="#document-dynamic-view-transition-style-sheet"
                  id="ref-for-document-dynamic-view-transition-style-sheet①①">dynamic view transition style sheet</a>
                に追加。
              </p>
              <p>それ以外の場合、<a data-link-type="dfn" href="#captured-element-group-styles-rule"
                  id="ref-for-captured-element-group-styles-rule②">group styles rule</a> を以下のCSSに更新：</p>
              <pre class="highlight">:root:<c- nf>:view-transition-group</c-><c- p>(</c-><var>transitionName</var><c- p>)</c-> <c- p>{</c->
  <c- k>width</c-><c- p>:</c-> <var>width</var><c- p>;</c->
  <c- k>height</c-><c- p>:</c-> <var>height</var><c- p>;</c->
  <c- k>transform</c-><c- p>:</c-> <var>transform</var><c- p>;</c->
  <c- k>writing-mode</c-><c- p>:</c-> <var>writingMode</var><c- p>;</c->
  <c- k>direction</c-><c- p>:</c-> <var>direction</var><c- p>;</c->
  <c- k>text-orientation</c-><c- p>:</c-> <var>textOrientation</var><c- p>;</c->
  <c- k>mix-blend-mode</c-><c- p>:</c-> <var>mixBlendMode</var><c- p>;</c->
  <c- k>backdrop-filter</c-><c- p>:</c-> <var>backdropFilter</var><c- p>;</c->
  <c- k>color-scheme</c-><c- p>:</c-> <var>colorScheme</var><c- p>;</c->
<c- p>}</c->
</pre>
              <p class="note" role="note"><span class="marker">注:</span> 上記コード例は変数を置換する必要があります。</p>
            <li data-md>
              <p><var>capturedElement</var> の <a data-link-type="dfn" href="#captured-element-new-element"
                  id="ref-for-captured-element-new-element②①">new element</a> が null でなければ：</p>
              <ol>
                <li data-md>
                  <p><var>new</var> を <a class="css" data-link-type="maybe" href="#selectordef-view-transition-new"
                      id="ref-for-selectordef-view-transition-new⑨">::view-transition-new()</a>（<a data-link-type="dfn"
                      href="#view-transition-name" id="ref-for-view-transition-name①⑤">ビュー遷移名</a>は
                    <var>transitionName</var>）とする。
                  </p>
                <li data-md>
                  <p><var>new</var> の <a data-link-type="dfn"
                      href="https://www.w3.org/TR/css-display-3/#replaced-element"
                      id="ref-for-replaced-element④">置換要素</a>内容に、<a data-link-type="dfn" href="#capture-the-image"
                      id="ref-for-capture-the-image⑥">画像のキャプチャ</a>（<var>capturedElement</var> の <a data-link-type="dfn"
                      href="#captured-element-new-element" id="ref-for-captured-element-new-element②②">new
                      element</a>）の結果を設定。</p>
              </ol>
          </ol>
      </ol>
      <p>このアルゴリズムは、Web APIからその効果が観測できる場合、<a data-link-type="dfn"
          href="https://www.w3.org/TR/css-cascade-5/#cascade-origin-ua"
          id="ref-for-cascade-origin-ua③">ユーザーエージェント起源</a>でスタイルを更新するために必ず実行されなければならない。</p>
      <p class="note" role="note"><span class="marker">注:</span>
        例えば、<code>window.getComputedStyle(document.documentElement, "::view-transition")</code> のようなWeb APIが該当する。</p>
    </div>
    <h3 class="heading settled" data-level="7.10" id="clear-view-transition-algorithm"><span class="secno">7.10.
      </span><span class="content"><a data-link-type="dfn" href="#clear-view-transition"
          id="ref-for-clear-view-transition③">ビュー遷移のクリア</a></span><a class="self-link"
        href="#clear-view-transition-algorithm"></a></h3>
    <div class="algorithm" data-algorithm="clear view transition">
      <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="clear-view-transition">ビュー遷移のクリア</dfn>を <code
        class="idl"><a data-link-type="idl" href="#viewtransition" id="ref-for-viewtransition②③">ViewTransition</a></code>
      <var>transition</var> に対して行う手順：
      <ol>
        <li data-md>
          <p><var>document</var> を <var>transition</var> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
              id="ref-for-concept-relevant-global①②">関連グローバルオブジェクト</a> の <a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"
              id="ref-for-concept-document-window⑨">関連付けられたドキュメント</a>とする。</p>
        <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert⑤">Assert</a>:
            <var>document</var> の <a data-link-type="dfn" href="#document-active-view-transition"
              id="ref-for-document-active-view-transition①⑤">active view transition</a> が <var>transition</var> であること。
          </p>
        <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate⑦">各</a>
            <var>capturedElement</var> を <var>transition</var> の <a data-link-type="dfn"
              href="#viewtransition-named-elements" id="ref-for-viewtransition-named-elements⑤">named elements</a> の <a
              data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-getting-the-values"
              id="ref-for-map-getting-the-values①">値</a>でイテレート：
          </p>
          <ol>
            <li data-md>
              <p><var>capturedElement</var> の <a data-link-type="dfn" href="#captured-element-new-element"
                  id="ref-for-captured-element-new-element②③">new element</a> が null でない場合、
                <span id="ref-for-captured-element-new-element②④">new element</span> の <a data-link-type="dfn"
                  href="#captured-in-a-view-transition" id="ref-for-captured-in-a-view-transition⑨">ビュー遷移でキャプチャされた</a> を
                false に設定。
              </p>
            <li data-md>
              <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                  id="ref-for-list-iterate⑧">各</a> <var>style</var> を <var>capturedElement</var> の <a
                  data-link-type="dfn" href="#captured-element-style-definitions"
                  id="ref-for-captured-element-style-definitions">スタイル定義</a>でイテレート：</p>
              <ol>
                <li data-md>
                  <p><var>style</var> が null でなく、かつ <var>style</var> が <var>document</var> の <a data-link-type="dfn"
                      href="#document-dynamic-view-transition-style-sheet"
                      id="ref-for-document-dynamic-view-transition-style-sheet①②">dynamic view transition style
                      sheet</a> に含まれている場合、
                    <var>style</var> を <var>document</var> の <span
                      id="ref-for-document-dynamic-view-transition-style-sheet①③">dynamic view transition style
                      sheet</span> から削除する。
                  </p>
              </ol>
          </ol>
        <li data-md>
          <p><var>document</var> の <a data-link-type="dfn" href="#document-show-view-transition-tree"
              id="ref-for-document-show-view-transition-tree①">show view transition tree</a> を false に設定。</p>
        <li data-md>
          <p><var>document</var> の <a data-link-type="dfn" href="#document-active-view-transition"
              id="ref-for-document-active-view-transition①⑥">active view transition</a> を null に設定。</p>
      </ol>
    </div>
    <h2 class="no-num heading settled" id="priv"><span class="content">プライバシーに関する考慮事項</span><a class="self-link"
        href="#priv"></a></h2>
    <p>この仕様は新たなプライバシー考慮事項を導入しません。</p>
    <h2 class="no-num heading settled" id="sec"><span class="content">セキュリティに関する考慮事項</span><a class="self-link"
        href="#sec"></a></h2>
    <p><a data-link-type="dfn" href="#capture-the-image"
        id="ref-for-capture-the-image⑦">画像のキャプチャ</a>アルゴリズムによって生成される画像は（ドキュメントがクロスオリジンリソースを埋め込んでいる場合）クロスオリジンデータや閲覧履歴等の機密情報を含む可能性があります。
      実装はこのデータがドキュメントからアクセスできないように保証しなければなりません。
      このデータへのアクセスは、通常のドキュメント描画でも既に防止されているはずなので、対応は容易です。</p>
    <h2 class="no-num non-normative heading settled" id="changes"><span class="content">付録A. 変更点</span><a
        class="self-link" href="#changes"></a></h2>
    <p>この付録は<em>参考情報</em>です。</p>
    <h3 class="heading settled" id="changes-since-2022-05-30"><span class="content"> <a
          href="https://www.w3.org/TR/2023/WD-css-view-transitions-1-20230530/">2022-05-30 ワーキングドラフト</a>からの変更 </span><a
        class="self-link" href="#changes-since-2022-05-30"></a></h3>
    <ul>
      <li data-md>
        <p>クロスフェード時にplus-lighterブレンドを追加するためキーフレームを使用。<a href="https://github.com/w3c/csswg-drafts/issues/8924">issue
            8924</a>参照。</p>
      <li data-md>
        <p>mix-blend-modeプロパティを<span class="css">::view-transition-group</span>にコピーするプロパティ一覧に追加。<a
            href="https://github.com/w3c/csswg-drafts/issues/8962">issue 8962</a>参照。</p>
      <li data-md>
        <p>text-orientationプロパティを<span class="css">::view-transition-group</span>にコピーするプロパティ一覧に追加。<a
            href="https://github.com/w3c/csswg-drafts/issues/8230">issue 8230</a>参照。</p>
      <li data-md>
        <p>古いキャプチャアルゴリズムをリファクタし、値を読み取る前に<a data-link-type="dfn" href="#captured-in-a-view-transition"
            id="ref-for-captured-in-a-view-transition①⓪">ビュー遷移でキャプチャされた</a>を正しく設定するように。</p>
      <li data-md>
        <p><code
            class="idl"><a data-link-type="idl" href="#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition⑤">startViewTransition()</a></code>
          パラメータをnull不可に変更。<a href="https://github.com/w3c/csswg-drafts/issues/9460">issue 9460</a>参照。</p>
      <li data-md>
        <p><a data-link-type="dfn" href="#view-transitions"
            id="ref-for-view-transitions①③">ビュー遷移</a>に参加する要素をアクセシビリティツリーに公開。<a
            href="https://github.com/w3c/csswg-drafts/issues/9365">issue 9365</a>参照。</p>
      <li data-md>
        <p><a data-link-type="dfn" href="#view-transition-tree"
            id="ref-for-view-transition-tree④">ビュー遷移ツリー</a>をアクセシビリティツリーに公開しない。<a
            href="https://github.com/w3c/csswg-drafts/issues/9365">issue 9365</a>参照。</p>
      <li data-md>
        <p>back-drop filterプロパティのアニメーションをtransform/size同様に追加。<a
            href="https://github.com/w3c/csswg-drafts/issues/9358">issue 9358</a>参照。</p>
      <li data-md>
        <p>DOM要素から<span class="css">::view-transition-group()</span>にcolor-schemeをコピー。<a
            href="https://github.com/w3c/csswg-drafts/issues/9276">issue 9276</a>参照。</p>
      <li data-md>
        <p>ドキュメントが非表示状態になる場合にアウトバウンドクロスドキュメント遷移とプログラム的ビュー遷移を順序付きで扱えるよう、自動スキップビュー遷移を公開。<a
            href="https://github.com/w3c/csswg-drafts/issues/9512">issue 9512</a>参照。</p>
      <li data-md>
        <p><a class="property css" data-link-type="property" href="#propdef-view-transition-name"
            id="ref-for-propdef-view-transition-name①③">view-transition-name</a>をアニメーション可能にすべき理由を説明するノートを追加。</p>
      <li data-md>
        <p><code>view-transition-name: auto</code>を無効値とするべき。<a
            href="https://github.com/w3c/csswg-drafts/issues/9639">issue 9639</a>参照。</p>
      <li data-md>
        <p>エントリーアニメーションのペイント順説明用ノート追加。<a href="https://github.com/w3c/csswg-drafts/issues/9672">issue 9672</a>参照。</p>
      <li data-md>
        <p>named elements のクリーンアップ方法説明用ノート追加。<a href="https://github.com/w3c/csswg-drafts/issues/9669">issue 9669</a>参照。
        </p>
      <li data-md>
        <p>アルゴリズムをリファクタし、特に`updateCallbackDone`のタイミングを明確化。<a
            href="https://github.com/w3c/csswg-drafts/issues/9762">issue 9762</a>参照。</p>
      <li data-md>
        <p>(::view-transition)-image-pair, -old, -new用UAスタイルシートルールにanimation-delay inheritを追加。<a
            href="https://github.com/w3c/csswg-drafts/issues/9817">issue 9817</a>参照。
        </p>
      <li data-md>
        <p>ドキュメントが非表示状態のときにアニメーションを自動スキップ。<a href="https://github.com/w3c/csswg-drafts/issues/9543">issue 9543</a>参照。
        </p>
      <li data-md>
        <p>クロスドキュメントビュー遷移への参照を削除し、L1仕様をシンプル化。<a href="https://github.com/w3c/csswg-drafts/issues/9886">Issue 9886</a>参照。
        </p>
      <li data-md>
        <p>ページ非表示時にアクティブな遷移をスキップするアルゴリズムを公開。<a href="https://github.com/w3c/csswg-drafts/issues/9543">issue 9543</a>参照。
        </p>
    </ul>
    <h3 class="heading settled" id="changes-since-2022-05-25"><span class="content"> <a
          href="https://www.w3.org/TR/2023/WD-css-view-transitions-1-20230525/">2022-05-25 ワーキングドラフト</a>からの変更 </span><a
        class="self-link" href="#changes-since-2022-05-25"></a></h3>
    <ul>
      <li data-md>
        <p>::view-transition-newユーザーエージェントスタイルシートのタイポ修正。<a
            href="https://github.com/w3c/csswg-drafts/pull/8879">PR</a>参照。</p>
    </ul>
    <h3 class="heading settled" id="changes-since-2022-11-24"><span class="content"> <a
          href="https://www.w3.org/TR/2022/WD-css-view-transitions-1-20221124/">2022-11-24 ワーキングドラフト</a>からの変更 </span><a
        class="self-link" href="#changes-since-2022-11-24"></a></h3>
    <ul>
      <li data-md>
        <p>レンダリング抑制時にpointer eventsがdocumentElementに解決されるように。<a
            href="https://github.com/w3c/csswg-drafts/issues/7797">issue 7797</a>参照。</p>
      <li data-md>
        <p>ビュー遷移参加要素のレンダリング制約追加。<a href="https://github.com/w3c/csswg-drafts/issues/8139">issue 8139</a>と<a
            href="https://github.com/w3c/csswg-drafts/issues/7882">issue 7882</a>参照。</p>
      <li data-md>
        <p>SVG Document上でもViewTransitionsをサポートするためUAスタイルシートからhtml固有記述を削除。</p>
      <li data-md>
        <p>updateDOMCallbackを<code
            class="idl"><a data-link-type="idl" href="#callbackdef-updatecallback" id="ref-for-callbackdef-updatecallback①⑥">UpdateCallback</a></code>にリネーム。<a
            href="https://github.com/w3c/csswg-drafts/issues/8144">issue 8144</a>参照。</p>
      <li data-md>
        <p>snapshot viewportを<a data-link-type="dfn" href="#snapshot-containing-block"
            id="ref-for-snapshot-containing-block①⑤">スナップショット包含ブロック</a>にリネーム。</p>
      <li data-md>
        <p>ビューポートサイズが変化した場合に遷移をスキップ。<a href="https://github.com/w3c/csswg-drafts/issues/8045">issue 8045</a>参照。</p>
      <li data-md>
        <p>:only-childサポート追加。<a href="https://github.com/w3c/csswg-drafts/issues/8057">issue 8057</a>参照。</p>
      <li data-md>
        <p><a data-link-type="dfn" href="#pseudo-element-root" id="ref-for-pseudo-element-root②">pseudo-element
            root</a>の下に疑似要素ツリーの概念追加。<a href="https://github.com/w3c/csswg-drafts/issues/8113">issue 8113</a>参照。</p>
      <li data-md>
        <p>遷移スキップ時、<code
            class="idl"><a data-link-type="idl" href="#callbackdef-updatecallback" id="ref-for-callbackdef-updatecallback①⑦">UpdateCallback</a></code>を同期ではなく自身のタスクで呼び出すように。<a
            href="https://github.com/w3c/csswg-drafts/issues/7904">issue 7904</a>参照。</p>
      <li data-md>
        <p>画像キャプチャ時は少なくともビューポート内の画像部分をキャプチャすべき。必要に応じてダウンスケール。<a
            href="https://github.com/w3c/csswg-drafts/issues/8561">issue 8561</a>参照。</p>
      <li data-md>
        <p>キャプチャ画像への<a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#ink-overflow"
            id="ref-for-ink-overflow②">ink overflow</a>の適用は実装定義とし、画像の<a data-link-type="dfn"
            href="https://www.w3.org/TR/css-images-3/#natural-size" id="ref-for-natural-size①">自然サイズ</a>には影響しない。<a
            href="https://github.com/w3c/csswg-drafts/issues/8597">issue 8597</a>参照。</p>
      <li data-md>
        <p>分断要素はビュー遷移に参加しない。<a href="https://github.com/w3c/csswg-drafts/issues/8339">issue 8339</a>参照。</p>
      <li data-md>
        <p>"snapshot root"を"snapshot containing block"にリネームし、子孫のための<a data-link-type="dfn"
            href="https://www.w3.org/TR/css-position-3/#absolute-positioning-containing-block"
            id="ref-for-absolute-positioning-containing-block①">絶対位置付け包含ブロック</a>および<a data-link-type="dfn"
            href="https://www.w3.org/TR/css-position-3/#fixed-positioning-containing-block"
            id="ref-for-fixed-positioning-containing-block①">固定位置付け包含ブロック</a>とする。<a
            href="https://github.com/w3c/csswg-drafts/issues/8505">issue 8505</a>参照。</p>
    </ul>
    <h3 class="heading settled" id="changes-since-2022-10-25"><span class="content"> <a
          href="https://www.w3.org/TR/2022/WD-css-view-transitions-1-20221025/">2022-10-25 ワーキングドラフト (FPWD)</a>からの変更
      </span><a class="self-link" href="#changes-since-2022-10-25"></a></h3>
    <ul>
      <li data-md>
        <p><a data-link-type="dfn" href="#document-dynamic-view-transition-style-sheet"
            id="ref-for-document-dynamic-view-transition-style-sheet①④">dynamic view transition style
            sheet</a>コンセプト追加。ドキュメントごとに動的生成されるUAスタイルを管理。</p>
      <li data-md>
        <p>snapshot viewportコンセプト追加。<a href="https://github.com/w3c/csswg-drafts/issues/7859">issue 7859</a>参照。</p>
      <li data-md>
        <p>遷移スキップ時のpromise解決/拒否タイミング明確化。<a href="https://github.com/w3c/csswg-drafts/issues/7956">issue 7956</a>参照。</p>
      <li data-md>
        <p>content-visibility:auto要素で内容をスキップする場合、その下の要素は無視。<a
            href="https://github.com/w3c/csswg-drafts/issues/7874">issue 7874</a>参照。</p>
      <li data-md>
        <p>UAスタイルと著者DOMの同期を保ち、開発者APIから観測可能に。<a href="https://github.com/w3c/csswg-drafts/issues/7812">issue 7812</a>参照。
        </p>
      <li data-md>
        <p>updateCallback中のレンダリング抑制追加。<a href="https://github.com/w3c/csswg-drafts/issues/7784">issue 7784</a>参照。</p>
      <li data-md>
        <p>新ドキュメント内要素のサイズ・位置変更時に新しいUAアニメーションキーフレーム生成。<a href="https://github.com/w3c/csswg-drafts/issues/7813">issue
            7813</a>参照。</p>
      <li data-md>
        <p>キーフレームを-UA-プレフィックス付きでUAスタイルシートに限定。<a href="https://github.com/w3c/csswg-drafts/issues/7560">issue 7560</a>参照。
        </p>
      <li data-md>
        <p>疑似要素名をview-transition*に更新。<a href="https://github.com/w3c/csswg-drafts/issues/7960">issue 7960</a>参照。</p>
      <li data-md>
        <p>疑似要素のセレクタ構文を更新。<a href="https://github.com/w3c/csswg-drafts/issues/7788">issue 7788</a>参照。</p>
      <li data-md>
        <p>セキュリティ・プライバシー考慮事項のセクション追加。</p>
    </ul>
  </main>
  <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content"> 適合性</span><a class="self-link"
      href="#w3c-conformance"></a></h2>
  <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content"> 文書の慣例</span><a class="self-link"
      href="#w3c-conventions"></a></h3>
  <p>適合性要件は、記述的な断定とRFC 2119の用語の組み合わせによって表現されます。重要な語句「MUST」「MUST NOT」「REQUIRED」「SHALL」「SHALL NOT」「SHOULD」「SHOULD
    NOT」「RECOMMENDED」「MAY」「OPTIONAL」は、この文書の規範的な部分ではRFC 2119の定義通りに解釈されます。
    ただし、可読性のために、これらの語句は本仕様ではすべて大文字ではありません。 </p>
  <p>本仕様のすべての本文は規範的ですが、明示的に非規範的と示されたセクション、例、および注は除きます。 <a data-link-type="biblio" href="#biblio-rfc2119"
      title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a></p>
  <p>本仕様の例は「例えば」で始まるか、<code>class="example"</code>を付与して規範文から分離されます。例：</p>
  <div class="example" id="w3c-example">
    <a class="self-link" href="#w3c-example"></a>
    <p>これは情報提供用の例です。</p>
  </div>
  <p>情報提供用の注は「注:」で始まり、<code>class="note"</code>で規範文と分離されます。例：</p>
  <p class="note" role="note">注: これは情報提供用の注です。</p>
  <p>アドバイスは、特別な注意を促すために規範的なセクションとして強調表示され、<code>&lt;strong class="advisement"></code>で他の規範文から分離されます。例：<strong
      class="advisement"> UAはアクセシブルな代替を提供しなければなりません。 </strong></p>
  <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content"> 適合性クラス</span><a
      class="self-link" href="#w3c-conformance-classes"></a></h3>
  <p>本仕様への適合性は、3つの適合性クラスで定義されます：</p>
  <dl>
    <dt>スタイルシート
    <dd><a href="https://www.w3.org/TR/CSS21/conform.html#style-sheet">CSSスタイルシート</a>。
    <dt>レンダラー
    <dd><a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>。スタイルシートの意味を解釈し、それらを用いた文書を描画するもの。
    <dt>オーサリングツール
    <dd><a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>。スタイルシートを書き出すもの。
  </dl>
  <p>スタイルシートは、本モジュールで定義された構文を使用するすべての文が、一般CSS文法および本モジュールで定義された各機能の個別文法に従って有効であれば、本仕様に適合します。</p>
  <p>
    レンダラーは、スタイルシートを適切な仕様通りに解釈することに加え、本仕様で定義されるすべての機能を正しくパースし、文書をそれに従って描画できれば、本仕様に適合します。ただし、デバイスの制限によりUAが文書を正しく描画できない場合でも、UAは非適合とはなりません。（例：UAはモノクロモニターで色を描画する必要はありません。）
  </p>
  <p>オーサリングツールは、一般CSS文法および本モジュールの各機能の個別文法に従って構文的に正しいスタイルシートを書き出し、本モジュールで記載されたスタイルシートの他の適合要件も満たしていれば、本仕様に適合します。</p>
  <h3 class="no-ref heading settled" id="w3c-partial"><span class="content"> 部分的な実装</span><a class="self-link"
      href="#w3c-partial"></a></h3>
  <p>著者がフォールバック値を割り当てられるように、CSSレンダラーは、サポートレベルのないat-ルール、プロパティ、プロパティ値、キーワードその他構文的な構成要素を<strong>無効</strong>として<a
      href="https://www.w3.org/TR/CSS21/conform.html#ignore">適切に無視</a>しなければなりません。特に、ユーザーエージェントは、未サポートのコンポーネント値のみ選択的に無視し、単一の複数値プロパティ宣言でサポートされる値のみを認めては<strong>なりません</strong>。値のいずれかが無効（未サポート値は必ずそうなる）と判断された場合、CSSは宣言全体を無視する必要があります。
  </p>
  <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content"> 不安定・独自機能の実装</span><a
      class="self-link" href="#w3c-conform-future-proofing"></a></h4>
  <p>将来の安定したCSS機能との競合を避けるため、CSSWGは<a href="https://www.w3.org/TR/CSS/#future-proofing">ベストプラクティス</a>に従い、<a
      href="https://www.w3.org/TR/CSS/#unstable">不安定</a>機能や<a
      href="https://www.w3.org/TR/CSS/#proprietary-extension">独自拡張</a>のCSS実装を推奨します。</p>
  <h3 class="no-ref heading settled" id="w3c-testing"><span class="content"> 非実験的実装</span><a class="self-link"
      href="#w3c-testing"></a></h3>
  <p>仕様がCandidate Recommendation段階に到達した時点で、非実験的な実装が可能となり、実装者は仕様通りに正しく実装できたCRレベルの機能については、非プレフィックスの実装をリリースするべきです。</p>
  <p>CSSの実装間で相互運用性を確立・維持するため、CSS Working
    Groupは、非実験的CSSレンダラーがCSS機能の非プレフィックス実装をリリースする前に、実装報告書（必要ならそのテストケースも）をW3Cに提出するよう要請します。W3Cへ提出されたテストケースはCSS Working
    Groupのレビュー・修正対象となります。</p>
  <p>テストケース・実装報告書の提出方法など詳細は、CSS Working GroupのWebサイト <a
      href="https://www.w3.org/Style/CSS/Test/">https://www.w3.org/Style/CSS/Test/</a> を参照してください。
    質問は <a href="https://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>
    メーリングリストにお問い合わせください。</p>
  <h3 class="no-ref heading settled" id="w3c-cr-exit-criteria"><span class="content"> CR移行基準</span><a class="self-link"
      href="#w3c-cr-exit-criteria"></a></h3>
  <p>本仕様がProposed
    Recommendationに進むためには、各機能について少なくとも2つの独立した相互運用可能な実装が必要です。各機能は異なる製品セットで実装されても構いません。すべての機能が単一製品で実装される必要はありません。この基準に関して、以下の用語を定義します：
  </p>
  <dl>
    <dt>独立
    <dd>各実装は異なる当事者によって開発され、他の適格実装のコードを共有・再利用・派生してはならない。仕様の実装に関係しないコード部分はこの要件から除外されます。
    <dt>相互運用可能
    <dd>
      公式CSSテストスイートの該当テストケースに合格すること、またはWebブラウザでない場合は同等のテスト。該当するすべてのテストには、同等のテストを作成し、該当UAが相互運用性を主張する場合は、他のUAも同等テストに合格できる必要があります。同等テストはピアレビューのため公開されなければなりません。
    <dt>実装
    <dd>
      ユーザーエージェントであり、以下を満たすもの：
      <ol class="inline">
        <li>仕様を実装している。
        <li>一般公開されている。製品版またはベータ版、プレビュー、nightly buildでも構わない。
          非製品版の場合は、少なくとも1ヶ月間その機能を実装して安定性を示す必要がある。
        <li>実験的でない（テストスイート合格のためだけに設計されたバージョン、今後通常使用されないものは不可）。
      </ol>
  </dl>
  <p>仕様はCandidate Recommendationの状態を少なくとも6ヶ月間維持します。</p>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
      href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本仕様で定義される用語</span><a
      class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
    <li><a href="#activate-view-transition">activate view transition</a><span>, § 7.3</span>
    <li><a href="#document-active-view-transition">active view transition</a><span>, § 7.1.1</span>
    <li><a href="#call-the-update-callback">call the update callback</a><span>, § 7.4</span>
    <li><a href="#captured-element">captured element</a><span>, § 7.1.3</span>
    <li><a href="#captured-in-a-view-transition">captured in a view transition</a><span>, § 7.1.2</span>
    <li><a href="#capture-rendering-characteristics">capture rendering characteristics</a><span>, § 7.7.1</span>
    <li><a href="#capture-the-image">capture the image</a><span>, § 7.7</span>
    <li><a href="#capture-the-new-state">capture the new state</a><span>, § 7.3.2</span>
    <li><a href="#capture-the-old-state">capture the old state</a><span>, § 7.3.1</span>
    <li><a href="#capture-the-image">capturing the image</a><span>, § 7.7</span>
    <li><a href="#clear-view-transition">clear view transition</a><span>, § 7.10</span>
    <li><a href="#valdef-view-transition-name-custom-ident">&lt;custom-ident></a><span>, § 2.1</span>
    <li><a href="#document-dynamic-view-transition-style-sheet">dynamic view transition style sheet</a><span>,
        § 7.1.1</span>
    <li><a href="#dom-viewtransition-finished">finished</a><span>, § 6.2</span>
    <li><a href="#viewtransition-finished-promise">finished promise</a><span>, § 6.2</span>
    <li><a href="#global-view-transition-user-agent-style-sheet">global view transition user agent style
        sheet</a><span>, § 5</span>
    <li><a href="#captured-element-group-animation-name-rule">group animation name rule</a><span>, § 7.1.3</span>
    <li><a href="#captured-element-group-keyframes">group keyframes</a><span>, § 7.1.3</span>
    <li><a href="#captured-element-group-styles-rule">group styles rule</a><span>, § 7.1.3</span>
    <li><a href="#handle-transition-frame">handle transition frame</a><span>, § 7.8</span>
    <li><a href="#captured-element-image-animation-name-rule">image animation name rule</a><span>, § 7.1.3</span>
    <li><a href="#captured-element-image-pair-isolation-rule">image pair isolation rule</a><span>, § 7.1.3</span>
    <li><a href="#viewtransition-initial-snapshot-containing-block-size">initial snapshot containing block
        size</a><span>, § 6.2</span>
    <li><a href="#viewtransition-named-elements">named elements</a><span>, § 6.2</span>
    <li><a href="#named-view-transition-pseudo-elements">named view transition pseudo-elements</a><span>, § 3.2.1</span>
    <li><a href="#captured-element-new-element">new element</a><span>, § 7.1.3</span>
    <li><a href="#valdef-view-transition-name-none">none</a><span>, § 2.1</span>
    <li><a href="#captured-element-old-backdrop-filter">old backdrop-filter</a><span>, § 7.1.3</span>
    <li><a href="#captured-element-old-color-scheme">old color-scheme</a><span>, § 7.1.3</span>
    <li><a href="#captured-element-old-direction">old direction</a><span>, § 7.1.3</span>
    <li><a href="#captured-element-old-height">old height</a><span>, § 7.1.3</span>
    <li><a href="#captured-element-old-image">old image</a><span>, § 7.1.3</span>
    <li><a href="#captured-element-old-mix-blend-mode">old mix-blend-mode</a><span>, § 7.1.3</span>
    <li><a href="#captured-element-old-text-orientation">old text-orientation</a><span>, § 7.1.3</span>
    <li><a href="#captured-element-old-transform">old transform</a><span>, § 7.1.3</span>
    <li><a href="#captured-element-old-width">old width</a><span>, § 7.1.3</span>
    <li><a href="#captured-element-old-writing-mode">old writing-mode</a><span>, § 7.1.3</span>
    <li><a href="#perform-pending-transition-operations">perform pending transition operations</a><span>, § 7.2</span>
    <li><a href="#viewtransition-phase">phase</a><span>, § 6.2</span>
    <li><a href="#pseudo-element-root">pseudo-element root</a><span>, § 3.1</span>
    <li><a href="#pseudo-element-tree">pseudo-element tree</a><span>, § 3.1</span>
    <li><a href="#typedef-pt-name-selector">&lt;pt-name-selector></a><span>, § 3.2.1</span>
    <li><a href="#dom-viewtransition-ready">ready</a><span>, § 6.2</span>
    <li><a href="#viewtransition-ready-promise">ready promise</a><span>, § 6.2</span>
    <li><a href="#document-rendering-suppression-for-view-transitions">rendering suppression for view
        transitions</a><span>, § 7.1.1</span>
    <li><a href="#setup-transition-pseudo-elements">setup transition pseudo-elements</a><span>, § 7.3.3</span>
    <li><a href="#setup-view-transition">setup view transition</a><span>, § 7.3</span>
    <li><a href="#document-show-view-transition-tree">show view transition tree</a><span>, § 7.1.1</span>
    <li><a href="#skip-the-view-transition">skip the view transition</a><span>, § 7.5</span>
    <li><a href="#dom-viewtransition-skiptransition">skipTransition()</a><span>, § 6.2.1</span>
    <li><a href="#snapshot-containing-block">snapshot containing block</a><span>, § 4.1</span>
    <li><a href="#snapshot-containing-block-origin">snapshot containing block origin</a><span>, § 4.1</span>
    <li><a href="#snapshot-containing-block-size">snapshot containing block size</a><span>, § 4.1</span>
    <li><a href="#dom-document-startviewtransition">startViewTransition()</a><span>, § 6.1.1</span>
    <li><a href="#dom-document-startviewtransition">startViewTransition(updateCallback)</a><span>, § 6.1.1</span>
    <li><a href="#captured-element-style-definitions">style definitions</a><span>, § 7.1.3</span>
    <li><a href="#viewtransition-transition-root-pseudo-element">transition root pseudo-element</a><span>, § 6.2</span>
    <li><a href="#viewtransition-update-callback">update callback</a><span>, § 6.2</span>
    <li><a href="#callbackdef-updatecallback">UpdateCallback</a><span>, § 6.1</span>
    <li><a href="#dom-viewtransition-updatecallbackdone">updateCallbackDone</a><span>, § 6.2</span>
    <li><a href="#viewtransition-update-callback-done-promise">update callback done promise</a><span>, § 6.2</span>
    <li><a href="#update-pseudo-element-styles">update pseudo-element styles</a><span>, § 7.9</span>
    <li><a href="#selectordef-view-transition">::view-transition</a><span>, § 3.2.2</span>
    <li><a href="#viewtransition">ViewTransition</a><span>, § 6.2</span>
    <li><a href="#selectordef-view-transition-group">::view-transition-group()</a><span>, § 3.2.3</span>
    <li><a href="#selectordef-view-transition-image-pair">::view-transition-image-pair()</a><span>, § 3.2.4</span>
    <li><a href="#view-transition-layer">view transition layer</a><span>, § 4.2</span>
    <li><a href="#view-transition-name">view transition name</a><span>, § 2.1</span>
    <li><a href="#propdef-view-transition-name">view-transition-name</a><span>, § 2.1</span>
    <li><a href="#selectordef-view-transition-new">::view-transition-new()</a><span>, § 3.2.6</span>
    <li><a href="#selectordef-view-transition-old">::view-transition-old()</a><span>, § 3.2.5</span>
    <li><a href="#view-transition-page-visibility-change-steps">view transition page-visibility change steps</a><span>,
        § 7.6</span>
    <li><a href="#view-transition-pseudo-elements">view transition pseudo-elements</a><span>, § 3.2</span>
    <li><a href="#view-transitions">view transitions</a><span>, § 1</span>
    <li><a href="#view-transition-tree">view transition tree</a><span>, § 3.2</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">参照によって定義される用語</span><a
      class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
    <li>
      <a data-link-type="biblio">[]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="2bc52ca2">NavigateEvent</span>
        <li><span class="dfn-paneled" id="a3331757">signal</span>
      </ul>
    <li>
      <a data-link-type="biblio">[COMPOSITING-1]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="ecfe8e64">isolation</span>
        <li><span class="dfn-paneled" id="3249d67d">mix-blend-mode</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-2022]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="226d9efe">style sheet</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-ANIMATIONS-1]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="256cde36">CSSKeyframesRule</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-BACKGROUNDS-3]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="fd42d148">canvas background</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-BOX-4]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="85c399c0">border box</span>
        <li><span class="dfn-paneled" id="f72f5cb4">content box</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-BREAK-4]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="d65c0e81">box fragment</span>
        <li><span class="dfn-paneled" id="64bdec0d">fragment</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-CASCADE-5]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="8c8e51b4">computed value</span>
        <li><span class="dfn-paneled" id="a9479ee7">user-agent origin</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-COLOR-4]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="3b7558dc">opacity</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-COLOR-ADJUST-1]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="b75080dc">color-scheme</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-CONTAIN-2]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="644cdfa3">element contents</span>
        <li><span class="dfn-paneled" id="0830f093">skips its contents</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-DISPLAY-3]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="6b4fc208">containing block</span>
        <li><span class="dfn-paneled" id="e26aa9bf">initial containing block</span>
        <li><span class="dfn-paneled" id="93f98063">principal box</span>
        <li><span class="dfn-paneled" id="299e10e4">replaced element</span>
        <li><span class="dfn-paneled" id="8b4f8a45">root element</span>
        <li><span class="dfn-paneled" id="d3ff9a69">visibility</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-IMAGES-3]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="487e1aa9">natural dimension</span>
        <li><span class="dfn-paneled" id="c0cc78c8">natural size</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-IMAGES-4]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="1389fc39">element-not-rendered</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-MASKING-1]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="e2b06daa">clip-path</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-OVERFLOW-3]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="00d2e365">ink overflow</span>
        <li><span class="dfn-paneled" id="1c933e34">ink overflow area</span>
        <li><span class="dfn-paneled" id="0938e0be">ink overflow rectangle</span>
        <li><span class="dfn-paneled" id="add377f4">overflow</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-POSITION-3]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="8bf8e632">absolute positioning containing block</span>
        <li><span class="dfn-paneled" id="1febb260">fixed positioning containing block</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-POSITION-4]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="8f59bb58">top layer</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-PSEUDO-4]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="b5ecbd4e">tree-abiding pseudo-element</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-SCOPING-1]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="22109b0e">flat tree</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-SIZING-3]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="5ad01cca">height</span>
        <li><span class="dfn-paneled" id="49731d1d">width</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-TRANSFORMS-1]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="4525418a">identity transform function</span>
        <li><span class="dfn-paneled" id="e7c6bf78">transform</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-TRANSFORMS-2]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="c43222a2">&lt;transform-function></span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-UI-4]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="73bc6606">pointer-events</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-VALUES-4]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="a0144f62">&lt;custom-ident></span>
        <li><span class="dfn-paneled" id="4eb9d37e">|</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-VIEWPORT-1]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="d37bcaf0">interactive-widget</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-WRITING-MODES-3]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="fb688f4f">direction</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-WRITING-MODES-4]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="8664e85f">text-orientation</span>
        <li><span class="dfn-paneled" id="37bb38a0">writing-mode</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS2]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="2161cf2b">pseudo-elements</span>
        <li><span class="dfn-paneled" id="a50c2771">stacking context</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS22]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="e8b75507">element</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSSOM-1]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="d293a05b">CSSStyleRule</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSSOM-VIEW-1]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="fafa15bc">layout viewport</span>
        <li><span class="dfn-paneled" id="4186822a">scrolling box</span>
      </ul>
    <li>
      <a data-link-type="biblio">[DOM]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="85394472">Document</span>
        <li><span class="dfn-paneled" id="296f3551">Element</span>
        <li><span class="dfn-paneled" id="84f47c16">child</span>
        <li><span class="dfn-paneled" id="9638f92b">connected</span>
        <li><span class="dfn-paneled" id="da8b8e0e">descendant</span>
        <li><span class="dfn-paneled" id="a973e0fe">document</span>
        <li><span class="dfn-paneled" id="2f0ba72c">document element</span>
        <li><span class="dfn-paneled" id="f9d909f7">inclusive descendant</span>
        <li><span class="dfn-paneled" id="5216e1a0">node document</span>
        <li><span class="dfn-paneled" id="d729a9ff">parent</span>
        <li><span class="dfn-paneled" id="58df5166">participate</span>
        <li><span class="dfn-paneled" id="f7960529">root</span>
        <li><span class="dfn-paneled" id="fd32e3c9">shadow-including descendant</span>
        <li><span class="dfn-paneled" id="ad10ee29">sibling</span>
        <li><span class="dfn-paneled" id="e6cc3311">tree</span>
      </ul>
    <li>
      <a data-link-type="biblio">[FILTER-EFFECTS-1]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="e9f6aadb">filter</span>
      </ul>
    <li>
      <a data-link-type="biblio">[FILTER-EFFECTS-2]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="31c41a75">backdrop root</span>
        <li><span class="dfn-paneled" id="54fa0afb">backdrop-filter</span>
      </ul>
    <li>
      <a data-link-type="biblio">[GEOMETRY-1]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="b904c22d">height</span>
        <li><span class="dfn-paneled" id="c7cb8568">width</span>
      </ul>
    <li>
      <a data-link-type="biblio">[HR-TIME-3]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="8297dfb0">duration</span>
      </ul>
    <li>
      <a data-link-type="biblio">[HTML]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="3349d69f">associated document</span>
        <li><span class="dfn-paneled" id="e10e7eb7">dom manipulation task source</span>
        <li><span class="dfn-paneled" id="a72449dd">in parallel</span>
        <li><span class="dfn-paneled" id="48438eb3">queue a global task</span>
        <li><span class="dfn-paneled" id="e99bd18e">relevant global object</span>
        <li><span class="dfn-paneled" id="5991ccfb">relevant realm</span>
        <li><span class="dfn-paneled" id="f1041b37">unhandledrejection</span>
        <li><span class="dfn-paneled" id="b4c365f8">visibility state</span>
      </ul>
    <li>
      <a data-link-type="biblio">[INFRA]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="53275e46">append <small>(for list)</small></span>
        <li><span class="dfn-paneled" id="a3b18719">append <small>(for set)</small></span>
        <li><span class="dfn-paneled" id="77b4c09a">assert</span>
        <li><span class="dfn-paneled" id="ae8def21">contain</span>
        <li><span class="dfn-paneled" id="f937b7b6">continue</span>
        <li><span class="dfn-paneled" id="1243a891">exist</span>
        <li><span class="dfn-paneled" id="16d07e10">for each <small>(for list)</small></span>
        <li><span class="dfn-paneled" id="45209803">for each <small>(for map)</small></span>
        <li><span class="dfn-paneled" id="860300d4">implementation-defined</span>
        <li><span class="dfn-paneled" id="649608b9">list</span>
        <li><span class="dfn-paneled" id="3fca5a9e">map</span>
        <li><span class="dfn-paneled" id="15e48c39">set</span>
        <li><span class="dfn-paneled" id="984221ca">struct</span>
        <li><span class="dfn-paneled" id="0e8de730">tuple</span>
        <li><span class="dfn-paneled" id="12d6b9a8">values</span>
      </ul>
    <li>
      <a data-link-type="biblio">[INTERSECTION-OBSERVER]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="8e7046bc">IntersectionObserver</span>
      </ul>
    <li>
      <a data-link-type="biblio">[POINTEREVENTS3]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="95302000">pointer capture</span>
      </ul>
    <li>
      <a data-link-type="biblio">[SCROLL-ANIMATIONS-1]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="6fac9c76">scroll-driven animations</span>
      </ul>
    <li>
      <a data-link-type="biblio">[SELECTORS-3]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="dfd67b05">*</span>
      </ul>
    <li>
      <a data-link-type="biblio">[SELECTORS-4]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="32fb2b6a">:only-child</span>
        <li><span class="dfn-paneled" id="2e965368">functional pseudo-element</span>
        <li><span class="dfn-paneled" id="7b5d8638">originating element</span>
        <li><span class="dfn-paneled" id="00ffc4c8">originating pseudo-element</span>
        <li><span class="dfn-paneled" id="4d06fa38">pseudo-element</span>
        <li><span class="dfn-paneled" id="388bc3fc">selector</span>
        <li><span class="dfn-paneled" id="15e81c46">type selector</span>
        <li><span class="dfn-paneled" id="fc8ac26a">ultimate originating element</span>
      </ul>
    <li>
      <a data-link-type="biblio">[WEB-ANIMATIONS-1]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="f3133dfc">associated effect</span>
        <li><span class="dfn-paneled" id="2cec4673">discrete</span>
        <li><span class="dfn-paneled" id="fe9b8cc4">document timeline</span>
        <li><span class="dfn-paneled" id="8a965e7d">effect target</span>
        <li><span class="dfn-paneled" id="59df29fe">paused</span>
        <li><span class="dfn-paneled" id="ac0fba29">pending animation event queue</span>
        <li><span class="dfn-paneled" id="bb293700">play state</span>
        <li><span class="dfn-paneled" id="960dded0">running</span>
        <li><span class="dfn-paneled" id="4c9d6912">timeline</span>
      </ul>
    <li>
      <a data-link-type="biblio">[WEBIDL]</a> は以下の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="d25dfb2c">AbortError</span>
        <li><span class="dfn-paneled" id="dca2de17">DOMException</span>
        <li><span class="dfn-paneled" id="889e932f">Exposed</span>
        <li><span class="dfn-paneled" id="797018a7">InvalidStateError</span>
        <li><span class="dfn-paneled" id="bdbd19d1">Promise</span>
        <li><span class="dfn-paneled" id="f0ba495b">TimeoutError</span>
        <li><span class="dfn-paneled" id="dacde8b5">a new promise</span>
        <li><span class="dfn-paneled" id="8f5c2179">a promise resolved with</span>
        <li><span class="dfn-paneled" id="6c6b1005">any</span>
        <li><span class="dfn-paneled" id="833154f2">getter steps</span>
        <li><span class="dfn-paneled" id="10ce5f6f">invoke</span>
        <li><span class="dfn-paneled" id="1171257a">mark as handled</span>
        <li><span class="dfn-paneled" id="3024958b">method steps</span>
        <li><span class="dfn-paneled" id="750a2f08">react</span>
        <li><span class="dfn-paneled" id="116848ac">reacting</span>
        <li><span class="dfn-paneled" id="b262501e">reject</span>
        <li><span class="dfn-paneled" id="3b90bdcd">resolve</span>
        <li><span class="dfn-paneled" id="4013a022">this</span>
        <li><span class="dfn-paneled" id="5f90bbfb">undefined</span>
        <li><span class="dfn-paneled" id="11e0b87f">unrestricted double</span>
      </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
      href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">規範参照</span><a class="self-link"
      href="#normative"></a></h3>
  <dl>
    <dt id="biblio-compositing-1">[COMPOSITING-1]
    <dd>Chris Harrelson. <a href="https://www.w3.org/TR/compositing-1/"><cite>Compositing and Blending Level
          1（合成とブレンド レベル1）</cite></a>. 2024年3月21日. CR. URL: <a
        href="https://www.w3.org/TR/compositing-1/">https://www.w3.org/TR/compositing-1/</a>
    <dt id="biblio-css-2022">[CSS-2022]
    <dd>Tab Atkins Jr.; Elika Etemad; Florian Rivoal. <a href="https://www.w3.org/TR/css-2022/"><cite>CSS Snapshot
          2022（CSS スナップショット2022）</cite></a>. 2022年11月22日. 注記. URL: <a
        href="https://www.w3.org/TR/css-2022/">https://www.w3.org/TR/css-2022/</a>
    <dt id="biblio-css-animations-1">[CSS-ANIMATIONS-1]
    <dd>David Baron; 他. <a href="https://www.w3.org/TR/css-animations-1/"><cite>CSS Animations Level 1（CSSアニメーション
          レベル1）</cite></a>. 2023年3月2日. WD. URL: <a
        href="https://www.w3.org/TR/css-animations-1/">https://www.w3.org/TR/css-animations-1/</a>
    <dt id="biblio-css-backgrounds-3">[CSS-BACKGROUNDS-3]
    <dd>Elika Etemad; Brad Kemper. <a href="https://www.w3.org/TR/css-backgrounds-3/"><cite>CSS Backgrounds and Borders
          Module Level 3（CSS 背景と枠線モジュール レベル3）</cite></a>. 2024年3月11日. CR. URL: <a
        href="https://www.w3.org/TR/css-backgrounds-3/">https://www.w3.org/TR/css-backgrounds-3/</a>
    <dt id="biblio-css-box-4">[CSS-BOX-4]
    <dd>Elika Etemad. <a href="https://www.w3.org/TR/css-box-4/"><cite>CSS Box Model Module Level 4（CSSボックスモデルモジュール
          レベル4）</cite></a>. 2022年11月3日. WD. URL: <a
        href="https://www.w3.org/TR/css-box-4/">https://www.w3.org/TR/css-box-4/</a>
    <dt id="biblio-css-break-4">[CSS-BREAK-4]
    <dd>Rossen Atanassov; Elika Etemad. <a href="https://www.w3.org/TR/css-break-4/"><cite>CSS Fragmentation Module
          Level 4（CSS分断モジュール レベル4）</cite></a>. 2018年12月18日. WD. URL: <a
        href="https://www.w3.org/TR/css-break-4/">https://www.w3.org/TR/css-break-4/</a>
    <dt id="biblio-css-cascade-5">[CSS-CASCADE-5]
    <dd>Elika Etemad; Miriam Suzanne; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-cascade-5/"><cite>CSS Cascading
          and Inheritance Level 5（CSSカスケーディングと継承 レベル5）</cite></a>. 2022年1月13日. CR. URL: <a
        href="https://www.w3.org/TR/css-cascade-5/">https://www.w3.org/TR/css-cascade-5/</a>
    <dt id="biblio-css-color-4">[CSS-COLOR-4]
    <dd>Chris Lilley; Tab Atkins Jr.; Lea Verou. <a href="https://www.w3.org/TR/css-color-4/"><cite>CSS Color Module
          Level 4（CSSカラー モジュール レベル4）</cite></a>. 2024年2月13日. CR. URL: <a
        href="https://www.w3.org/TR/css-color-4/">https://www.w3.org/TR/css-color-4/</a>
    <dt id="biblio-css-color-adjust-1">[CSS-COLOR-ADJUST-1]
    <dd>Elika Etemad; 他. <a href="https://www.w3.org/TR/css-color-adjust-1/"><cite>CSS Color Adjustment Module Level
          1（CSSカラー調整モジュール レベル1）</cite></a>. 2022年6月14日. CR. URL: <a
        href="https://www.w3.org/TR/css-color-adjust-1/">https://www.w3.org/TR/css-color-adjust-1/</a>
    <dt id="biblio-css-contain-2">[CSS-CONTAIN-2]
    <dd>Tab Atkins Jr.; Florian Rivoal; Vladimir Levin. <a href="https://www.w3.org/TR/css-contain-2/"><cite>CSS
          Containment Module Level 2（CSS包含モジュール レベル2）</cite></a>. 2022年9月17日. WD. URL: <a
        href="https://www.w3.org/TR/css-contain-2/">https://www.w3.org/TR/css-contain-2/</a>
    <dt id="biblio-css-display-3">[CSS-DISPLAY-3]
    <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-display-3/"><cite>CSS Display Module Level
          3（CSSディスプレイモジュール レベル3）</cite></a>. 2023年3月30日. CR. URL: <a
        href="https://www.w3.org/TR/css-display-3/">https://www.w3.org/TR/css-display-3/</a>
    <dt id="biblio-css-images-3">[CSS-IMAGES-3]
    <dd>Tab Atkins Jr.; Elika Etemad; Lea Verou. <a href="https://www.w3.org/TR/css-images-3/"><cite>CSS Images Module
          Level 3（CSS画像モジュール レベル3）</cite></a>. 2023年12月18日. CR. URL: <a
        href="https://www.w3.org/TR/css-images-3/">https://www.w3.org/TR/css-images-3/</a>
    <dt id="biblio-css-images-4">[CSS-IMAGES-4]
    <dd>Tab Atkins Jr.; Elika Etemad; Lea Verou. <a href="https://www.w3.org/TR/css-images-4/"><cite>CSS Images Module
          Level 4（CSS画像モジュール レベル4）</cite></a>. 2023年2月17日. WD. URL: <a
        href="https://www.w3.org/TR/css-images-4/">https://www.w3.org/TR/css-images-4/</a>
    <dt id="biblio-css-masking-1">[CSS-MASKING-1]
    <dd>Dirk Schulze; Brian Birtles; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-masking-1/"><cite>CSS Masking
          Module Level 1（CSSマスキングモジュール レベル1）</cite></a>. 2021年8月5日. CR. URL: <a
        href="https://www.w3.org/TR/css-masking-1/">https://www.w3.org/TR/css-masking-1/</a>
    <dt id="biblio-css-overflow-3">[CSS-OVERFLOW-3]
    <dd>Elika Etemad; Florian Rivoal. <a href="https://www.w3.org/TR/css-overflow-3/"><cite>CSS Overflow Module Level
          3（CSSオーバーフローモジュール レベル3）</cite></a>. 2023年3月29日. WD. URL: <a
        href="https://www.w3.org/TR/css-overflow-3/">https://www.w3.org/TR/css-overflow-3/</a>
    <dt id="biblio-css-position-3">[CSS-POSITION-3]
    <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-position-3/"><cite>CSS Positioned Layout Module
          Level 3（CSS位置レイアウトモジュール レベル3）</cite></a>. 2023年4月3日. WD. URL: <a
        href="https://www.w3.org/TR/css-position-3/">https://www.w3.org/TR/css-position-3/</a>
    <dt id="biblio-css-position-4">[CSS-POSITION-4]
    <dd><a href="https://drafts.csswg.org/css-position-4/"><cite>CSS Positioned Layout Module Level 4（CSS位置レイアウトモジュール
          レベル4）</cite></a>.
      編集者ドラフト. URL: <a href="https://drafts.csswg.org/css-position-4/">https://drafts.csswg.org/css-position-4/</a>
    <dt id="biblio-css-pseudo-4">[CSS-PSEUDO-4]
    <dd>Daniel Glazman; Elika Etemad; Alan Stearns. <a href="https://www.w3.org/TR/css-pseudo-4/"><cite>CSS
          Pseudo-Elements Module Level 4（CSS疑似要素モジュール レベル4）</cite></a>. 2022年12月30日. WD. URL: <a
        href="https://www.w3.org/TR/css-pseudo-4/">https://www.w3.org/TR/css-pseudo-4/</a>
    <dt id="biblio-css-scoping-1">[CSS-SCOPING-1]
    <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-scoping-1/"><cite>CSS Scoping Module Level
          1（CSSスコーピングモジュール レベル1）</cite></a>. 2014年4月3日. WD. URL: <a
        href="https://www.w3.org/TR/css-scoping-1/">https://www.w3.org/TR/css-scoping-1/</a>
    <dt id="biblio-css-transforms-1">[CSS-TRANSFORMS-1]
    <dd>Simon Fraser; 他. <a href="https://www.w3.org/TR/css-transforms-1/"><cite>CSS Transforms Module Level
          1（CSS変形モジュール レベル1）</cite></a>. 2019年2月14日. CR. URL: <a
        href="https://www.w3.org/TR/css-transforms-1/">https://www.w3.org/TR/css-transforms-1/</a>
    <dt id="biblio-css-transforms-2">[CSS-TRANSFORMS-2]
    <dd>Tab Atkins Jr.; 他. <a href="https://www.w3.org/TR/css-transforms-2/"><cite>CSS Transforms Module Level
          2（CSS変形モジュール レベル2）</cite></a>. 2021年11月9日. WD. URL: <a
        href="https://www.w3.org/TR/css-transforms-2/">https://www.w3.org/TR/css-transforms-2/</a>
    <dt id="biblio-css-ui-4">[CSS-UI-4]
    <dd>Florian Rivoal. <a href="https://www.w3.org/TR/css-ui-4/"><cite>CSS Basic User Interface Module Level
          4（CSS基本UIモジュール レベル4）</cite></a>. 2021年3月16日. WD. URL: <a
        href="https://www.w3.org/TR/css-ui-4/">https://www.w3.org/TR/css-ui-4/</a>
    <dt id="biblio-css-values-4">[CSS-VALUES-4]
    <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-4/"><cite>CSS Values and Units Module
          Level 4（CSS値と単位モジュール レベル4）</cite></a>. 2024年3月12日. WD. URL: <a
        href="https://www.w3.org/TR/css-values-4/">https://www.w3.org/TR/css-values-4/</a>
    <dt id="biblio-css-viewport-1">[CSS-VIEWPORT-1]
    <dd>Florian Rivoal; Emilio Cobos Álvarez. <a href="https://www.w3.org/TR/css-viewport-1/"><cite>CSS Viewport Module
          Level 1（CSSビューポートモジュール レベル1）</cite></a>. 2024年1月25日. WD. URL: <a
        href="https://www.w3.org/TR/css-viewport-1/">https://www.w3.org/TR/css-viewport-1/</a>
    <dt id="biblio-css-writing-modes-3">[CSS-WRITING-MODES-3]
    <dd>Elika Etemad; Koji Ishii. <a href="https://www.w3.org/TR/css-writing-modes-3/"><cite>CSS Writing Modes Level
          3（CSS書字方向モード レベル3）</cite></a>. 2019年12月10日. REC. URL: <a
        href="https://www.w3.org/TR/css-writing-modes-3/">https://www.w3.org/TR/css-writing-modes-3/</a>
    <dt id="biblio-css-writing-modes-4">[CSS-WRITING-MODES-4]
    <dd>Elika Etemad; Koji Ishii. <a href="https://www.w3.org/TR/css-writing-modes-4/"><cite>CSS Writing Modes Level
          4（CSS書字方向モード レベル4）</cite></a>. 2019年7月30日. CR. URL: <a
        href="https://www.w3.org/TR/css-writing-modes-4/">https://www.w3.org/TR/css-writing-modes-4/</a>
    <dt id="biblio-css2">[CSS2]
    <dd>Bert Bos; 他. <a href="https://www.w3.org/TR/CSS21/"><cite>Cascading Style Sheets Level 2 Revision 1 (CSS
          2.1) Specification（カスケーディングスタイルシート レベル2改訂1（CSS2.1）仕様）</cite></a>. 2011年6月7日. REC. URL: <a
        href="https://www.w3.org/TR/CSS21/">https://www.w3.org/TR/CSS21/</a>
    <dt id="biblio-css22">[CSS22]
    <dd>Bert Bos. <a href="https://www.w3.org/TR/CSS22/"><cite>Cascading Style Sheets Level 2 Revision 2 (CSS 2.2)
          Specification（カスケーディングスタイルシート レベル2改訂2（CSS2.2）仕様）</cite></a>. 2016年4月12日. WD. URL: <a
        href="https://www.w3.org/TR/CSS22/">https://www.w3.org/TR/CSS22/</a>
    <dt id="biblio-cssom-1">[CSSOM-1]
    <dd>Daniel Glazman; Emilio Cobos Álvarez. <a href="https://www.w3.org/TR/cssom-1/"><cite>CSS Object Model
          (CSSOM)（CSSオブジェクトモデル）</cite></a>. 2021年8月26日. WD. URL: <a
        href="https://www.w3.org/TR/cssom-1/">https://www.w3.org/TR/cssom-1/</a>
    <dt id="biblio-cssom-view-1">[CSSOM-VIEW-1]
    <dd>Simon Pieters. <a href="https://www.w3.org/TR/cssom-view-1/"><cite>CSSOM View Module（CSSOMビュー モジュール）</cite></a>.
      2016年3月17日. WD. URL: <a href="https://www.w3.org/TR/cssom-view-1/">https://www.w3.org/TR/cssom-view-1/</a>
    <dt id="biblio-dom">[DOM]
    <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM標準</cite></a>. Living Standard. URL:
      <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
    <dt id="biblio-filter-effects-1">[FILTER-EFFECTS-1]
    <dd>Dirk Schulze; Dean Jackson. <a href="https://www.w3.org/TR/filter-effects-1/"><cite>Filter Effects Module Level
          1（フィルター効果モジュール レベル1）</cite></a>. 2018年12月18日. WD. URL: <a
        href="https://www.w3.org/TR/filter-effects-1/">https://www.w3.org/TR/filter-effects-1/</a>
    <dt id="biblio-filter-effects-2">[FILTER-EFFECTS-2]
    <dd><a href="https://drafts.fxtf.org/filter-effects-2/"><cite>Filter Effects Module Level 2（フィルター効果モジュール
          レベル2）</cite></a>. 編集者ドラフト. URL: <a
        href="https://drafts.fxtf.org/filter-effects-2/">https://drafts.fxtf.org/filter-effects-2/</a>
    <dt id="biblio-geometry-1">[GEOMETRY-1]
    <dd>Simon Pieters; Chris Harrelson. <a href="https://www.w3.org/TR/geometry-1/"><cite>Geometry Interfaces Module
          Level 1（ジオメトリインターフェースモジュール レベル1）</cite></a>. 2018年12月4日. CR. URL: <a
        href="https://www.w3.org/TR/geometry-1/">https://www.w3.org/TR/geometry-1/</a>
    <dt id="biblio-hr-time-3">[HR-TIME-3]
    <dd>Yoav Weiss. <a href="https://www.w3.org/TR/hr-time-3/"><cite>High Resolution Time（高精度時間）</cite></a>. 2023年7月19日.
      WD.
      URL: <a href="https://www.w3.org/TR/hr-time-3/">https://www.w3.org/TR/hr-time-3/</a>
    <dt id="biblio-html">[HTML]
    <dd>Anne van Kesteren; 他. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML標準</cite></a>.
      Living Standard. URL: <a
        href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
    <dt id="biblio-infra">[INFRA]
    <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra標準</cite></a>.
      Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
    <dt id="biblio-intersection-observer">[INTERSECTION-OBSERVER]
    <dd>Stefan Zager; Emilio Cobos Álvarez; Traian Captan. <a
        href="https://www.w3.org/TR/intersection-observer/"><cite>Intersection Observer（インターセクションオブザーバー）</cite></a>.
      2023年10月18日. WD.
      URL: <a href="https://www.w3.org/TR/intersection-observer/">https://www.w3.org/TR/intersection-observer/</a>
    <dt id="biblio-rfc2119">[RFC2119]
    <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>RFCにおける要求レベルを示すための重要語</cite></a>.
      1997年3月. Best Current Practice. URL: <a
        href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
    <dt id="biblio-selectors-3">[SELECTORS-3]
    <dd>Tantek Çelik; 他. <a href="https://www.w3.org/TR/selectors-3/"><cite>Selectors Level 3（セレクタ レベル3）</cite></a>.
      2018年11月6日. REC. URL: <a href="https://www.w3.org/TR/selectors-3/">https://www.w3.org/TR/selectors-3/</a>
    <dt id="biblio-selectors-4">[SELECTORS-4]
    <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/selectors-4/"><cite>Selectors Level 4（セレクタ
          レベル4）</cite></a>.
      2022年11月11日. WD. URL: <a href="https://www.w3.org/TR/selectors-4/">https://www.w3.org/TR/selectors-4/</a>
    <dt id="biblio-web-animations-1">[WEB-ANIMATIONS-1]
    <dd>Brian Birtles; 他. <a href="https://www.w3.org/TR/web-animations-1/"><cite>Web Animations（ウェブアニメーション）</cite></a>.
      2023年6月5日. WD. URL: <a href="https://www.w3.org/TR/web-animations-1/">https://www.w3.org/TR/web-animations-1/</a>
    <dt id="biblio-webidl">[WEBIDL]
    <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL標準</cite></a>. Living
      Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">参考情報</span><a class="self-link"
      href="#informative"></a></h3>
  <dl>
    <dt id="biblio-css-sizing-3">[CSS-SIZING-3]
    <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-sizing-3/"><cite>CSS Box Sizing Module Level
          3（CSSボックスサイズモジュール レベル3）</cite></a>. 2021年12月17日. WD. URL: <a
        href="https://www.w3.org/TR/css-sizing-3/">https://www.w3.org/TR/css-sizing-3/</a>
    <dt id="biblio-pointerevents3">[POINTEREVENTS3]
    <dd>Patrick Lauke; Robert Flack. <a href="https://www.w3.org/TR/pointerevents3/"><cite>Pointer
          Events（ポインターイベント）</cite></a>. 2024年3月18日. WD. URL: <a
        href="https://www.w3.org/TR/pointerevents3/">https://www.w3.org/TR/pointerevents3/</a>
    <dt id="biblio-scroll-animations-1">[SCROLL-ANIMATIONS-1]
    <dd>Brian Birtles; 他. <a href="https://www.w3.org/TR/scroll-animations-1/"><cite>Scroll-driven
          Animations（スクロールドリブンアニメーション）</cite></a>. 2023年6月6日. WD. URL: <a
        href="https://www.w3.org/TR/scroll-animations-1/">https://www.w3.org/TR/scroll-animations-1/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="property-index"><span class="content">プロパティ索引</span><a class="self-link"
      href="#property-index"></a></h2>
  <div class="big-element-wrapper">
    <table class="index">
      <thead>
        <tr>
          <th scope="col">名前
          <th scope="col">値
          <th scope="col">初期値
          <th scope="col">適用対象
          <th scope="col">継承
          <th scope="col">%指定
          <th scope="col">アニメーションタイプ
          <th scope="col">正規順序
          <th scope="col">算出値
      <tbody>
        <tr>
          <th scope="row"><a class="css" data-link-type="property" href="#propdef-view-transition-name"
              id="ref-for-propdef-view-transition-name①④">view-transition-name</a>
          <td>none | &lt;custom-ident>
          <td>none
          <td>すべての要素
          <td>いいえ
          <td>該当なし
          <td>離散（discrete）
          <td>文法による
          <td>指定通り
    </table>
  </div>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL索引</span><a class="self-link"
      href="#idl-index"></a></h2>
  <pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#document"><c- g>Document</c-></a> {
  <a data-link-type="idl-name" href="#viewtransition"><c- n>ViewTransition</c-></a> <a class="idl-code" data-link-type="method" href="#dom-document-startviewtransition"><c- g>startViewTransition</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#callbackdef-updatecallback"><c- n>UpdateCallback</c-></a> <a href="#dom-document-startviewtransition-updatecallback-updatecallback"><code><c- g>updateCallback</c-></code></a>);
};

<c- b>callback</c-> <a href="#callbackdef-updatecallback"><code><c- g>UpdateCallback</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a>> ();

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#viewtransition"><code><c- g>ViewTransition</c-></code></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a data-readonly data-type="Promise<undefined>" href="#dom-viewtransition-updatecallbackdone"><code><c- g>updateCallbackDone</c-></code></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a data-readonly data-type="Promise<undefined>" href="#dom-viewtransition-ready"><code><c- g>ready</c-></code></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a data-readonly data-type="Promise<undefined>" href="#dom-viewtransition-finished"><code><c- g>finished</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-viewtransition-skiptransition"><c- g>skipTransition</c-></a>();
};

</pre>
  <script>/* Boilerplate: script-dom-helper */
    "use strict";
    function query(sel) { return document.querySelector(sel); }

    function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

    function iter(obj) {
      if (!obj) return [];
      var it = obj[Symbol.iterator];
      if (it) return it;
      return Object.entries(obj);
    }

    function mk(tagname, attrs, ...children) {
      const el = document.createElement(tagname);
      for (const [k, v] of iter(attrs)) {
        if (k.slice(0, 3) == "_on") {
          const eventName = k.slice(3);
          el.addEventListener(eventName, v);
        } else if (k[0] == "_") {
          // property, not attribute
          el[k.slice(1)] = v;
        } else {
          if (v === false || v == null) {
            continue;
          } else if (v === true) {
            el.setAttribute(k, "");
            continue;
          } else {
            el.setAttribute(k, v);
          }
        }
      }
      append(el, children);
      return el;
    }

    /* Create shortcuts for every known HTML element */
    [
      "a",
      "abbr",
      "acronym",
      "address",
      "applet",
      "area",
      "article",
      "aside",
      "audio",
      "b",
      "base",
      "basefont",
      "bdo",
      "big",
      "blockquote",
      "body",
      "br",
      "button",
      "canvas",
      "caption",
      "center",
      "cite",
      "code",
      "col",
      "colgroup",
      "datalist",
      "dd",
      "del",
      "details",
      "dfn",
      "dialog",
      "div",
      "dl",
      "dt",
      "em",
      "embed",
      "fieldset",
      "figcaption",
      "figure",
      "font",
      "footer",
      "form",
      "frame",
      "frameset",
      "head",
      "header",
      "h1",
      "h2",
      "h3",
      "h4",
      "h5",
      "h6",
      "hr",
      "html",
      "i",
      "iframe",
      "img",
      "input",
      "ins",
      "kbd",
      "label",
      "legend",
      "li",
      "link",
      "main",
      "map",
      "mark",
      "meta",
      "meter",
      "nav",
      "nobr",
      "noscript",
      "object",
      "ol",
      "optgroup",
      "option",
      "output",
      "p",
      "param",
      "pre",
      "progress",
      "q",
      "s",
      "samp",
      "script",
      "section",
      "select",
      "small",
      "source",
      "span",
      "strike",
      "strong",
      "style",
      "sub",
      "summary",
      "sup",
      "table",
      "tbody",
      "td",
      "template",
      "textarea",
      "tfoot",
      "th",
      "thead",
      "time",
      "title",
      "tr",
      "u",
      "ul",
      "var",
      "video",
      "wbr",
      "xmp",
    ].forEach(tagname => {
      mk[tagname] = (...args) => mk(tagname, ...args);
    });

    function* nodesFromChildList(children) {
      for (const child of children.flat(Infinity)) {
        if (child instanceof Node) {
          yield child;
        } else {
          yield new Text(child);
        }
      }
    }
    function append(el, ...children) {
      for (const child of nodesFromChildList(children)) {
        if (el instanceof Node) el.appendChild(child);
        else el.push(child);
      }
      return el;
    }

    function insertAfter(el, ...children) {
      for (const child of nodesFromChildList(children)) {
        el.parentNode.insertBefore(child, el.nextSibling);
      }
      return el;
    }

    function clearContents(el) {
      el.innerHTML = "";
      return el;
    }

    function parseHTML(markup) {
      if (markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
        const doc = document.implementation.createHTMLDocument("");
        doc.documentElement.innerHTML = markup;
        return doc;
      } else {
        const el = mk.template({});
        el.innerHTML = markup;
        return el.content;
      }
    }</script>
  <script>/* Boilerplate: script-dfn-panel */
    "use strict";
    {
      let dfnPanelData = {
        "00d2e365": { "dfnID": "00d2e365", "dfnText": "ink overflow", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-ink-overflow" }, { "id": "ref-for-ink-overflow\u2460" }], "title": "7.7. Capture the image" }, { "refs": [{ "id": "ref-for-ink-overflow\u2461" }], "title": "\nChanges from 2022-11-24 Working Draft\n" }], "url": "https://www.w3.org/TR/css-overflow-3/#ink-overflow" },
        "00ffc4c8": { "dfnID": "00ffc4c8", "dfnText": "originating pseudo-element", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-originating-pseudo-element" }], "title": "3.1. Pseudo-element Trees" }], "url": "https://www.w3.org/TR/selectors-4/#originating-pseudo-element" },
        "0830f093": { "dfnID": "0830f093", "dfnText": "skips its contents", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-skips-its-contents" }], "title": "2.1. Tagging Individually Transitioning Subtrees: the view-transition-name property" }, { "refs": [{ "id": "ref-for-skips-its-contents\u2460" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-skips-its-contents\u2461" }], "title": "7.3.2. Capture the new state" }, { "refs": [{ "id": "ref-for-skips-its-contents\u2462" }], "title": "7.9. Update pseudo-element styles" }], "url": "https://www.w3.org/TR/css-contain-2/#skips-its-contents" },
        "0938e0be": { "dfnID": "0938e0be", "dfnText": "ink overflow rectangle", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-ink-overflow-rectangle" }], "title": "7.7. Capture the image" }, { "refs": [{ "id": "ref-for-ink-overflow-rectangle\u2460" }], "title": "7.7.1. Capture rendering characteristics" }], "url": "https://www.w3.org/TR/css-overflow-3/#ink-overflow-rectangle" },
        "0e8de730": { "dfnID": "0e8de730", "dfnText": "tuple", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-tuple" }], "title": "4.1. The Snapshot Containing Block" }, { "refs": [{ "id": "ref-for-tuple\u2460" }], "title": "6.2. The ViewTransition interface" }], "url": "https://infra.spec.whatwg.org/#tuple" },
        "10ce5f6f": { "dfnID": "10ce5f6f", "dfnText": "invoke", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-invoke-a-callback-function" }], "title": "7.4. Call the update callback" }], "url": "https://webidl.spec.whatwg.org/#invoke-a-callback-function" },
        "116848ac": { "dfnID": "116848ac", "dfnText": "reacting", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-perform-steps-once-promise-is-settled" }], "title": "7.4. Call the update callback" }, { "refs": [{ "id": "ref-for-dfn-perform-steps-once-promise-is-settled\u2460" }], "title": "7.5. Skip the view transition" }], "url": "https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled" },
        "1171257a": { "dfnID": "1171257a", "dfnText": "mark as handled", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-mark-a-promise-as-handled" }, { "id": "ref-for-mark-a-promise-as-handled\u2460" }, { "id": "ref-for-mark-a-promise-as-handled\u2461" }], "title": "6.2. The ViewTransition interface" }, { "refs": [{ "id": "ref-for-mark-a-promise-as-handled\u2462" }], "title": "7.4. Call the update callback" }], "url": "https://webidl.spec.whatwg.org/#mark-a-promise-as-handled" },
        "11e0b87f": { "dfnID": "11e0b87f", "dfnText": "unrestricted double", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-unrestricted-double" }], "title": "7.1.3. Captured elements" }], "url": "https://webidl.spec.whatwg.org/#idl-unrestricted-double" },
        "1243a891": { "dfnID": "1243a891", "dfnText": "exist", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-map-exists" }], "title": "7.3.2. Capture the new state" }], "url": "https://infra.spec.whatwg.org/#map-exists" },
        "12d6b9a8": { "dfnID": "12d6b9a8", "dfnText": "values", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-map-getting-the-values" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-map-getting-the-values\u2460" }], "title": "7.10. Clear view transition" }], "url": "https://infra.spec.whatwg.org/#map-getting-the-values" },
        "1389fc39": { "dfnID": "1389fc39", "dfnText": "element-not-rendered", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-element-not-rendered" }], "title": "2.1. Tagging Individually Transitioning Subtrees: the view-transition-name property" }, { "refs": [{ "id": "ref-for-element-not-rendered\u2460" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-element-not-rendered\u2461" }], "title": "7.3.2. Capture the new state" }, { "refs": [{ "id": "ref-for-element-not-rendered\u2462" }], "title": "7.9. Update pseudo-element styles" }], "url": "https://www.w3.org/TR/css-images-4/#element-not-rendered" },
        "15e48c39": { "dfnID": "15e48c39", "dfnText": "set", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-ordered-set" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-ordered-set\u2460" }], "title": "7.3.2. Capture the new state" }], "url": "https://infra.spec.whatwg.org/#ordered-set" },
        "15e81c46": { "dfnID": "15e81c46", "dfnText": "type selector", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-type-selector" }], "title": "3.2.1. Named View Transition Pseudo-elements" }], "url": "https://www.w3.org/TR/selectors-4/#type-selector" },
        "16d07e10": { "dfnID": "16d07e10", "dfnText": "for each (for list)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-iterate" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-list-iterate\u2460" }, { "id": "ref-for-list-iterate\u2461" }, { "id": "ref-for-list-iterate\u2462" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-list-iterate\u2463" }], "title": "7.3.2. Capture the new state" }, { "refs": [{ "id": "ref-for-list-iterate\u2464" }], "title": "7.7.1. Capture rendering characteristics" }, { "refs": [{ "id": "ref-for-list-iterate\u2465" }], "title": "7.8. Handle transition frame" }, { "refs": [{ "id": "ref-for-list-iterate\u2466" }, { "id": "ref-for-list-iterate\u2467" }], "title": "7.10. Clear view transition" }], "url": "https://infra.spec.whatwg.org/#list-iterate" },
        "1c933e34": { "dfnID": "1c933e34", "dfnText": "ink overflow area", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-ink-overflow-region" }], "title": "7.7.1. Capture rendering characteristics" }], "url": "https://www.w3.org/TR/css-overflow-3/#ink-overflow-region" },
        "1febb260": { "dfnID": "1febb260", "dfnText": "fixed positioning containing block", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-fixed-positioning-containing-block" }], "title": "4.1. The Snapshot Containing Block" }, { "refs": [{ "id": "ref-for-fixed-positioning-containing-block\u2460" }], "title": "\nChanges from 2022-11-24 Working Draft\n" }], "url": "https://www.w3.org/TR/css-position-3/#fixed-positioning-containing-block" },
        "2161cf2b": { "dfnID": "2161cf2b", "dfnText": "pseudo-elements", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-x22" }], "title": "1.1. Separating Visual Transitions from DOM Updates" }, { "refs": [{ "id": "ref-for-x22\u2460" }], "title": "7.1.2. Additions to Elements" }], "url": "https://www.w3.org/TR/CSS21/selector.html#x22" },
        "22109b0e": { "dfnID": "22109b0e", "dfnText": "flat tree", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-flat-tree" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-flat-tree\u2460" }], "title": "7.3.2. Capture the new state" }, { "refs": [{ "id": "ref-for-flat-tree\u2461" }], "title": "7.9. Update pseudo-element styles" }], "url": "https://drafts.csswg.org/css-scoping-1/#flat-tree" },
        "226d9efe": { "dfnID": "226d9efe", "dfnText": "style sheet", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-style-sheet" }, { "id": "ref-for-style-sheet\u2460" }], "title": "7.1.1. Additions to Document" }], "url": "https://www.w3.org/TR/css-2022/#style-sheet" },
        "256cde36": { "dfnID": "256cde36", "dfnText": "CSSKeyframesRule", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-csskeyframesrule" }], "title": "7.1.3. Captured elements" }, { "refs": [{ "id": "ref-for-csskeyframesrule\u2460" }], "title": "7.3.3. Setup transition pseudo-elements" }], "url": "https://www.w3.org/TR/css-animations-1/#csskeyframesrule" },
        "296f3551": { "dfnID": "296f3551", "dfnText": "Element", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-element\u2460\u2460" }], "title": "7.7.1. Capture rendering characteristics" }], "url": "https://dom.spec.whatwg.org/#element" },
        "299e10e4": { "dfnID": "299e10e4", "dfnText": "replaced element", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-replaced-element" }], "title": "3.2.5. View Transition Old State Image: the ::view-transition-old() pseudo-element" }, { "refs": [{ "id": "ref-for-replaced-element\u2460" }], "title": "3.2.6. View Transition New State Image: the ::view-transition-new() pseudo-element" }, { "refs": [{ "id": "ref-for-replaced-element\u2461" }], "title": "7.3.3. Setup transition pseudo-elements" }, { "refs": [{ "id": "ref-for-replaced-element\u2462" }], "title": "7.7. Capture the image" }, { "refs": [{ "id": "ref-for-replaced-element\u2463" }], "title": "7.9. Update pseudo-element styles" }], "url": "https://www.w3.org/TR/css-display-3/#replaced-element" },
        "2bc52ca2": { "dfnID": "2bc52ca2", "dfnText": "NavigateEvent", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-navigateevent" }], "title": "1.4. Transitions as an enhancement" }], "url": "https://wicg.github.io/navigation-api/#navigateevent" },
        "2cec4673": { "dfnID": "2cec4673", "dfnText": "discrete", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-discrete" }], "title": "2.1. Tagging Individually Transitioning Subtrees: the view-transition-name property" }], "url": "https://www.w3.org/TR/web-animations-1/#discrete" },
        "2e965368": { "dfnID": "2e965368", "dfnText": "functional pseudo-element", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-functional-pseudo-element" }], "title": "3.2.1. Named View Transition Pseudo-elements" }], "url": "https://drafts.csswg.org/selectors-4/#functional-pseudo-element" },
        "2f0ba72c": { "dfnID": "2f0ba72c", "dfnText": "document element", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-document-element" }, { "id": "ref-for-document-element\u2460" }], "title": "3.2. View Transition Pseudo-elements" }, { "refs": [{ "id": "ref-for-document-element\u2461" }], "title": "3.2.2. View Transition Tree Root: the ::view-transition pseudo-element" }, { "refs": [{ "id": "ref-for-document-element\u2462" }], "title": "4.1. The Snapshot Containing Block" }, { "refs": [{ "id": "ref-for-document-element\u2463" }, { "id": "ref-for-document-element\u2464" }, { "id": "ref-for-document-element\u2465" }, { "id": "ref-for-document-element\u2466" }], "title": "7.1.1. Additions to Document" }, { "refs": [{ "id": "ref-for-document-element\u2467" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-document-element\u2468" }], "title": "7.7. Capture the image" }], "url": "https://dom.spec.whatwg.org/#document-element" },
        "3024958b": { "dfnID": "3024958b", "dfnText": "method steps", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-method-steps" }], "title": "6.1.1. startViewTransition() Method Steps" }, { "refs": [{ "id": "ref-for-method-steps\u2460" }], "title": "6.2.1. skipTransition() Method Steps" }], "url": "https://webidl.spec.whatwg.org/#method-steps" },
        "31c41a75": { "dfnID": "31c41a75", "dfnText": "backdrop root", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-backdrop-root" }], "title": "2.1.1. Rendering Consolidation" }], "url": "https://drafts.fxtf.org/filter-effects-2/#backdrop-root" },
        "3249d67d": { "dfnID": "3249d67d", "dfnText": "mix-blend-mode", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-mix-blend-mode" }], "title": "1.5. Rendering Model" }, { "refs": [{ "id": "ref-for-propdef-mix-blend-mode\u2460" }], "title": "7.1.3. Captured elements" }, { "refs": [{ "id": "ref-for-propdef-mix-blend-mode\u2461" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-propdef-mix-blend-mode\u2462" }], "title": "7.3.3. Setup transition pseudo-elements" }, { "refs": [{ "id": "ref-for-propdef-mix-blend-mode\u2463" }], "title": "7.9. Update pseudo-element styles" }], "url": "https://www.w3.org/TR/compositing-1/#propdef-mix-blend-mode" },
        "32fb2b6a": { "dfnID": "32fb2b6a", "dfnText": ":only-child", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-only-child-pseudo" }], "title": "1.6. Examples" }, { "refs": [{ "id": "ref-for-only-child-pseudo\u2460" }], "title": "3.1. Pseudo-element Trees" }, { "refs": [{ "id": "ref-for-only-child-pseudo\u2461" }], "title": "3.2.5. View Transition Old State Image: the ::view-transition-old() pseudo-element" }], "url": "https://www.w3.org/TR/selectors-4/#only-child-pseudo" },
        "3349d69f": { "dfnID": "3349d69f", "dfnText": "associated document", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-document-window" }], "title": "6.1.1. startViewTransition() Method Steps" }, { "refs": [{ "id": "ref-for-concept-document-window\u2460" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-concept-document-window\u2461" }, { "id": "ref-for-concept-document-window\u2462" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-concept-document-window\u2463" }], "title": "7.3.2. Capture the new state" }, { "refs": [{ "id": "ref-for-concept-document-window\u2464" }], "title": "7.3.3. Setup transition pseudo-elements" }, { "refs": [{ "id": "ref-for-concept-document-window\u2465" }], "title": "7.5. Skip the view transition" }, { "refs": [{ "id": "ref-for-concept-document-window\u2466" }], "title": "7.8. Handle transition frame" }, { "refs": [{ "id": "ref-for-concept-document-window\u2467" }], "title": "7.9. Update pseudo-element styles" }, { "refs": [{ "id": "ref-for-concept-document-window\u2468" }], "title": "7.10. Clear view transition" }], "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" },
        "37bb38a0": { "dfnID": "37bb38a0", "dfnText": "writing-mode", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-writing-mode" }], "title": "7.1.3. Captured elements" }, { "refs": [{ "id": "ref-for-propdef-writing-mode\u2460" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-propdef-writing-mode\u2461" }], "title": "7.9. Update pseudo-element styles" }], "url": "https://www.w3.org/TR/css-writing-modes-4/#propdef-writing-mode" },
        "388bc3fc": { "dfnID": "388bc3fc", "dfnText": "selector", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-selector" }, { "id": "ref-for-selector\u2460" }, { "id": "ref-for-selector\u2461" }], "title": "3.2.1. Named View Transition Pseudo-elements" }], "url": "https://www.w3.org/TR/selectors-4/#selector" },
        "3b7558dc": { "dfnID": "3b7558dc", "dfnText": "opacity", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-opacity" }], "title": "1.5. Rendering Model" }, { "refs": [{ "id": "ref-for-propdef-opacity\u2460" }], "title": "7.7.1. Capture rendering characteristics" }], "url": "https://www.w3.org/TR/css-color-4/#propdef-opacity" },
        "3b90bdcd": { "dfnID": "3b90bdcd", "dfnText": "resolve", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-resolve" }, { "id": "ref-for-resolve\u2460" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-resolve\u2461" }], "title": "7.4. Call the update callback" }, { "refs": [{ "id": "ref-for-resolve\u2462" }], "title": "7.5. Skip the view transition" }, { "refs": [{ "id": "ref-for-resolve\u2463" }], "title": "7.8. Handle transition frame" }], "url": "https://webidl.spec.whatwg.org/#resolve" },
        "3fca5a9e": { "dfnID": "3fca5a9e", "dfnText": "map", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-ordered-map" }, { "id": "ref-for-ordered-map\u2460" }], "title": "6.2. The ViewTransition interface" }], "url": "https://infra.spec.whatwg.org/#ordered-map" },
        "4013a022": { "dfnID": "4013a022", "dfnText": "this", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-this" }, { "id": "ref-for-this\u2460" }, { "id": "ref-for-this\u2461" }], "title": "6.1.1. startViewTransition() Method Steps" }, { "refs": [{ "id": "ref-for-this\u2462" }, { "id": "ref-for-this\u2463" }, { "id": "ref-for-this\u2464" }, { "id": "ref-for-this\u2465" }, { "id": "ref-for-this\u2466" }, { "id": "ref-for-this\u2467" }], "title": "6.2. The ViewTransition interface" }, { "refs": [{ "id": "ref-for-this\u2468" }, { "id": "ref-for-this\u2460\u24ea" }], "title": "6.2.1. skipTransition() Method Steps" }, { "refs": [{ "id": "ref-for-this\u2460\u2460" }, { "id": "ref-for-this\u2460\u2461" }, { "id": "ref-for-this\u2460\u2462" }], "title": "7.1.1. Additions to Document" }, { "refs": [{ "id": "ref-for-this\u2460\u2463" }], "title": "7.3.3. Setup transition pseudo-elements" }], "url": "https://webidl.spec.whatwg.org/#this" },
        "4186822a": { "dfnID": "4186822a", "dfnText": "scrolling box", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-scrolling-box" }], "title": "7.7. Capture the image" }], "url": "https://drafts.csswg.org/cssom-view-1/#scrolling-box" },
        "45209803": { "dfnID": "45209803", "dfnText": "for each (for map)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-map-iterate" }], "title": "7.3.3. Setup transition pseudo-elements" }, { "refs": [{ "id": "ref-for-map-iterate\u2460" }], "title": "7.9. Update pseudo-element styles" }], "url": "https://infra.spec.whatwg.org/#map-iterate" },
        "4525418a": { "dfnID": "4525418a", "dfnText": "identity transform function", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-identity-transform-function" }], "title": "7.1.3. Captured elements" }], "url": "https://www.w3.org/TR/css-transforms-1/#identity-transform-function" },
        "48438eb3": { "dfnID": "48438eb3", "dfnText": "queue a global task", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-queue-a-global-task" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-queue-a-global-task\u2460" }], "title": "7.4. Call the update callback" }, { "refs": [{ "id": "ref-for-queue-a-global-task\u2461" }], "title": "7.5. Skip the view transition" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" },
        "487e1aa9": { "dfnID": "487e1aa9", "dfnText": "natural dimension", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-natural-dimensions" }], "title": "3.2.5. View Transition Old State Image: the ::view-transition-old() pseudo-element" }, { "refs": [{ "id": "ref-for-natural-dimensions\u2460" }], "title": "3.2.6. View Transition New State Image: the ::view-transition-new() pseudo-element" }, { "refs": [{ "id": "ref-for-natural-dimensions\u2461" }], "title": "7.7. Capture the image" }], "url": "https://www.w3.org/TR/css-images-3/#natural-dimensions" },
        "49731d1d": { "dfnID": "49731d1d", "dfnText": "width", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-width" }], "title": "3.2.3. View Transition Named Subtree Root: the ::view-transition-group() pseudo-element" }], "url": "https://www.w3.org/TR/css-sizing-3/#propdef-width" },
        "4c9d6912": { "dfnID": "4c9d6912", "dfnText": "timeline", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-timeline" }], "title": "2.1. Tagging Individually Transitioning Subtrees: the view-transition-name property" }, { "refs": [{ "id": "ref-for-timeline\u2460" }], "title": "7.8. Handle transition frame" }], "url": "https://www.w3.org/TR/web-animations-1/#timeline" },
        "4d06fa38": { "dfnID": "4d06fa38", "dfnText": "pseudo-element", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-pseudo-element" }], "title": "3.1. Pseudo-element Trees" }, { "refs": [{ "id": "ref-for-pseudo-element\u2460" }, { "id": "ref-for-pseudo-element\u2461" }], "title": "3.2.1. Named View Transition Pseudo-elements" }, { "refs": [{ "id": "ref-for-pseudo-element\u2462" }], "title": "3.2.2. View Transition Tree Root: the ::view-transition pseudo-element" }, { "refs": [{ "id": "ref-for-pseudo-element\u2463" }, { "id": "ref-for-pseudo-element\u2464" }, { "id": "ref-for-pseudo-element\u2465" }], "title": "3.2.3. View Transition Named Subtree Root: the ::view-transition-group() pseudo-element" }, { "refs": [{ "id": "ref-for-pseudo-element\u2466" }], "title": "3.2.4. View Transition Image Pair Isolation: the ::view-transition-image-pair() pseudo-element" }, { "refs": [{ "id": "ref-for-pseudo-element\u2467" }], "title": "3.2.5. View Transition Old State Image: the ::view-transition-old() pseudo-element" }, { "refs": [{ "id": "ref-for-pseudo-element\u2468" }], "title": "3.2.6. View Transition New State Image: the ::view-transition-new() pseudo-element" }, { "refs": [{ "id": "ref-for-pseudo-element\u2460\u24ea" }], "title": "7.7.1. Capture rendering characteristics" }], "url": "https://www.w3.org/TR/selectors-4/#pseudo-element" },
        "4eb9d37e": { "dfnID": "4eb9d37e", "dfnText": "|", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-comb-one" }], "title": "2.1. Tagging Individually Transitioning Subtrees: the view-transition-name property" }, { "refs": [{ "id": "ref-for-comb-one\u2460" }], "title": "3.2.1. Named View Transition Pseudo-elements" }], "url": "https://www.w3.org/TR/css-values-4/#comb-one" },
        "5216e1a0": { "dfnID": "5216e1a0", "dfnText": "node document", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-node-document" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-concept-node-document\u2460" }], "title": "7.3.2. Capture the new state" }, { "refs": [{ "id": "ref-for-concept-node-document\u2461" }], "title": "7.7. Capture the image" }], "url": "https://dom.spec.whatwg.org/#concept-node-document" },
        "53275e46": { "dfnID": "53275e46", "dfnText": "append (for list)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-append" }], "title": "7.3.1. Capture the old state" }], "url": "https://infra.spec.whatwg.org/#list-append" },
        "54fa0afb": { "dfnID": "54fa0afb", "dfnText": "backdrop-filter", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-backdrop-filter" }], "title": "7.1.3. Captured elements" }, { "refs": [{ "id": "ref-for-propdef-backdrop-filter\u2460" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-propdef-backdrop-filter\u2461" }], "title": "7.9. Update pseudo-element styles" }], "url": "https://drafts.fxtf.org/filter-effects-2/#propdef-backdrop-filter" },
        "58df5166": { "dfnID": "58df5166", "dfnText": "participate", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-tree-participate" }], "title": "3.1. Pseudo-element Trees" }], "url": "https://dom.spec.whatwg.org/#concept-tree-participate" },
        "5991ccfb": { "dfnID": "5991ccfb", "dfnText": "relevant realm", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-relevant-realm" }, { "id": "ref-for-concept-relevant-realm\u2460" }], "title": "6.1.1. startViewTransition() Method Steps" }, { "refs": [{ "id": "ref-for-concept-relevant-realm\u2461" }, { "id": "ref-for-concept-relevant-realm\u2462" }, { "id": "ref-for-concept-relevant-realm\u2463" }], "title": "6.2. The ViewTransition interface" }, { "refs": [{ "id": "ref-for-concept-relevant-realm\u2464" }, { "id": "ref-for-concept-relevant-realm\u2465" }, { "id": "ref-for-concept-relevant-realm\u2466" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-concept-relevant-realm\u2467" }], "title": "7.4. Call the update callback" }, { "refs": [{ "id": "ref-for-concept-relevant-realm\u2468" }], "title": "7.8. Handle transition frame" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" },
        "59df29fe": { "dfnID": "59df29fe", "dfnText": "paused", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-play-state-paused" }], "title": "7.8. Handle transition frame" }], "url": "https://www.w3.org/TR/web-animations-1/#play-state-paused" },
        "5ad01cca": { "dfnID": "5ad01cca", "dfnText": "height", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-height" }], "title": "3.2.3. View Transition Named Subtree Root: the ::view-transition-group() pseudo-element" }], "url": "https://www.w3.org/TR/css-sizing-3/#propdef-height" },
        "5f90bbfb": { "dfnID": "5f90bbfb", "dfnText": "undefined", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-undefined" }, { "id": "ref-for-idl-undefined\u2460" }, { "id": "ref-for-idl-undefined\u2461" }, { "id": "ref-for-idl-undefined\u2462" }], "title": "6.2. The ViewTransition interface" }], "url": "https://webidl.spec.whatwg.org/#idl-undefined" },
        "644cdfa3": { "dfnID": "644cdfa3", "dfnText": "element contents", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-element-contents" }], "title": "4.2. View Transition Painting Order" }], "url": "https://drafts.csswg.org/css-contain-2/#element-contents" },
        "649608b9": { "dfnID": "649608b9", "dfnText": "list", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list" }], "title": "7.3.1. Capture the old state" }], "url": "https://infra.spec.whatwg.org/#list" },
        "64bdec0d": { "dfnID": "64bdec0d", "dfnText": "fragment", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-fragment" }], "title": "2.1. Tagging Individually Transitioning Subtrees: the view-transition-name property" }], "url": "https://www.w3.org/TR/css-break-4/#fragment" },
        "6b4fc208": { "dfnID": "6b4fc208", "dfnText": "containing block", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-containing-block" }], "title": "3.2.2. View Transition Tree Root: the ::view-transition pseudo-element" }, { "refs": [{ "id": "ref-for-containing-block\u2460" }], "title": "7.1.1. Additions to Document" }], "url": "https://www.w3.org/TR/css-display-3/#containing-block" },
        "6c6b1005": { "dfnID": "6c6b1005", "dfnText": "any", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-any" }], "title": "6.1. Additions to Document" }], "url": "https://webidl.spec.whatwg.org/#idl-any" },
        "6fac9c76": { "dfnID": "6fac9c76", "dfnText": "scroll-driven animations", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-scroll-driven-animations" }], "title": "2.1. Tagging Individually Transitioning Subtrees: the view-transition-name property" }], "url": "https://www.w3.org/TR/scroll-animations-1/#scroll-driven-animations" },
        "73bc6606": { "dfnID": "73bc6606", "dfnText": "pointer-events", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-pointer-events" }], "title": "4.2. View Transition Painting Order" }], "url": "https://drafts.csswg.org/css-ui-4/#propdef-pointer-events" },
        "750a2f08": { "dfnID": "750a2f08", "dfnText": "react", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-perform-steps-once-promise-is-settled" }], "title": "7.4. Call the update callback" }, { "refs": [{ "id": "ref-for-dfn-perform-steps-once-promise-is-settled\u2460" }], "title": "7.5. Skip the view transition" }], "url": "https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled" },
        "77b4c09a": { "dfnID": "77b4c09a", "dfnText": "assert", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-assert" }, { "id": "ref-for-assert\u2460" }], "title": "7.3.3. Setup transition pseudo-elements" }, { "refs": [{ "id": "ref-for-assert\u2461" }], "title": "7.4. Call the update callback" }, { "refs": [{ "id": "ref-for-assert\u2462" }], "title": "7.5. Skip the view transition" }, { "refs": [{ "id": "ref-for-assert\u2463" }], "title": "7.6. View transition page-visibility change steps" }, { "refs": [{ "id": "ref-for-assert\u2464" }], "title": "7.10. Clear view transition" }], "url": "https://infra.spec.whatwg.org/#assert" },
        "797018a7": { "dfnID": "797018a7", "dfnText": "InvalidStateError", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-invalidstateerror" }], "title": "6.1.1. startViewTransition() Method Steps" }, { "refs": [{ "id": "ref-for-invalidstateerror\u2460" }, { "id": "ref-for-invalidstateerror\u2461" }, { "id": "ref-for-invalidstateerror\u2462" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-invalidstateerror\u2463" }], "title": "7.6. View transition page-visibility change steps" }, { "refs": [{ "id": "ref-for-invalidstateerror\u2464" }], "title": "7.8. Handle transition frame" }], "url": "https://webidl.spec.whatwg.org/#invalidstateerror" },
        "7b5d8638": { "dfnID": "7b5d8638", "dfnText": "originating element", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-originating-element" }], "title": "3.2. View Transition Pseudo-elements" }, { "refs": [{ "id": "ref-for-originating-element\u2460" }], "title": "3.2.2. View Transition Tree Root: the ::view-transition pseudo-element" }, { "refs": [{ "id": "ref-for-originating-element\u2461" }], "title": "7.1.1. Additions to Document" }], "url": "https://www.w3.org/TR/selectors-4/#originating-element" },
        "8297dfb0": { "dfnID": "8297dfb0", "dfnText": "duration", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-duration" }], "title": "7.4. Call the update callback" }], "url": "https://www.w3.org/TR/hr-time-3/#dfn-duration" },
        "833154f2": { "dfnID": "833154f2", "dfnText": "getter steps", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-getter-steps" }, { "id": "ref-for-getter-steps\u2460" }, { "id": "ref-for-getter-steps\u2461" }], "title": "6.2. The ViewTransition interface" }], "url": "https://webidl.spec.whatwg.org/#getter-steps" },
        "84f47c16": { "dfnID": "84f47c16", "dfnText": "child", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-tree-child" }], "title": "3.1. Pseudo-element Trees" }, { "refs": [{ "id": "ref-for-concept-tree-child\u2460" }], "title": "3.2.3. View Transition Named Subtree Root: the ::view-transition-group() pseudo-element" }, { "refs": [{ "id": "ref-for-concept-tree-child\u2461" }, { "id": "ref-for-concept-tree-child\u2462" }], "title": "3.2.4. View Transition Image Pair Isolation: the ::view-transition-image-pair() pseudo-element" }, { "refs": [{ "id": "ref-for-concept-tree-child\u2463" }], "title": "3.2.5. View Transition Old State Image: the ::view-transition-old() pseudo-element" }, { "refs": [{ "id": "ref-for-concept-tree-child\u2464" }], "title": "3.2.6. View Transition New State Image: the ::view-transition-new() pseudo-element" }], "url": "https://dom.spec.whatwg.org/#concept-tree-child" },
        "85394472": { "dfnID": "85394472", "dfnText": "Document", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-document" }, { "id": "ref-for-document\u2460" }], "title": "4.2. View Transition Painting Order" }, { "refs": [{ "id": "ref-for-document\u2461" }, { "id": "ref-for-document\u2462" }, { "id": "ref-for-document\u2463" }, { "id": "ref-for-document\u2464" }], "title": "6.1. Additions to Document" }, { "refs": [{ "id": "ref-for-document\u2465" }, { "id": "ref-for-document\u2466" }, { "id": "ref-for-document\u2467" }], "title": "7.1.1. Additions to Document" }, { "refs": [{ "id": "ref-for-document\u2468" }], "title": "7.2. Perform pending transition operations" }, { "refs": [{ "id": "ref-for-document\u2460\u24ea" }], "title": "7.6. View transition page-visibility change steps" }, { "refs": [{ "id": "ref-for-document\u2460\u2460" }], "title": "\nChanges from 2022-05-30 Working Draft\n" }], "url": "https://dom.spec.whatwg.org/#document" },
        "85c399c0": { "dfnID": "85c399c0", "dfnText": "border box", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-border-box" }, { "id": "ref-for-border-box\u2460" }], "title": "3.2.3. View Transition Named Subtree Root: the ::view-transition-group() pseudo-element" }, { "refs": [{ "id": "ref-for-border-box\u2461" }, { "id": "ref-for-border-box\u2462" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-border-box\u2463" }, { "id": "ref-for-border-box\u2464" }, { "id": "ref-for-border-box\u2465" }], "title": "7.7. Capture the image" }, { "refs": [{ "id": "ref-for-border-box\u2466" }, { "id": "ref-for-border-box\u2467" }, { "id": "ref-for-border-box\u2468" }], "title": "7.9. Update pseudo-element styles" }], "url": "https://www.w3.org/TR/css-box-4/#border-box" },
        "860300d4": { "dfnID": "860300d4", "dfnText": "implementation-defined", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-implementation-defined" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-implementation-defined\u2460" }], "title": "7.7.1. Capture rendering characteristics" }], "url": "https://infra.spec.whatwg.org/#implementation-defined" },
        "8664e85f": { "dfnID": "8664e85f", "dfnText": "text-orientation", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-text-orientation" }], "title": "7.1.3. Captured elements" }, { "refs": [{ "id": "ref-for-propdef-text-orientation\u2460" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-propdef-text-orientation\u2461" }], "title": "7.9. Update pseudo-element styles" }], "url": "https://www.w3.org/TR/css-writing-modes-4/#propdef-text-orientation" },
        "889e932f": { "dfnID": "889e932f", "dfnText": "Exposed", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-Exposed" }], "title": "6.2. The ViewTransition interface" }], "url": "https://webidl.spec.whatwg.org/#Exposed" },
        "8a965e7d": { "dfnID": "8a965e7d", "dfnText": "effect target", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-keyframe-effect-effect-target" }], "title": "7.8. Handle transition frame" }], "url": "https://www.w3.org/TR/web-animations-1/#keyframe-effect-effect-target" },
        "8b4f8a45": { "dfnID": "8b4f8a45", "dfnText": "root element", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-root-element" }], "title": "3.2. View Transition Pseudo-elements" }, { "refs": [{ "id": "ref-for-root-element\u2460" }], "title": "5. User Agent Stylesheet" }], "url": "https://www.w3.org/TR/css-display-3/#root-element" },
        "8bf8e632": { "dfnID": "8bf8e632", "dfnText": "absolute positioning containing block", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-absolute-positioning-containing-block" }], "title": "4.1. The Snapshot Containing Block" }, { "refs": [{ "id": "ref-for-absolute-positioning-containing-block\u2460" }], "title": "\nChanges from 2022-11-24 Working Draft\n" }], "url": "https://www.w3.org/TR/css-position-3/#absolute-positioning-containing-block" },
        "8c8e51b4": { "dfnID": "8c8e51b4", "dfnText": "computed value", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-computed-value" }], "title": "2.1.1. Rendering Consolidation" }, { "refs": [{ "id": "ref-for-computed-value\u2460" }, { "id": "ref-for-computed-value\u2461" }, { "id": "ref-for-computed-value\u2462" }, { "id": "ref-for-computed-value\u2463" }, { "id": "ref-for-computed-value\u2464" }, { "id": "ref-for-computed-value\u2465" }, { "id": "ref-for-computed-value\u2466" }, { "id": "ref-for-computed-value\u2467" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-computed-value\u2468" }], "title": "7.3.2. Capture the new state" }, { "refs": [{ "id": "ref-for-computed-value\u2460\u24ea" }, { "id": "ref-for-computed-value\u2460\u2460" }, { "id": "ref-for-computed-value\u2460\u2461" }, { "id": "ref-for-computed-value\u2460\u2462" }, { "id": "ref-for-computed-value\u2460\u2463" }, { "id": "ref-for-computed-value\u2460\u2464" }], "title": "7.9. Update pseudo-element styles" }], "url": "https://www.w3.org/TR/css-cascade-5/#computed-value" },
        "8e7046bc": { "dfnID": "8e7046bc", "dfnText": "IntersectionObserver", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-intersectionobserver" }], "title": "7.7. Capture the image" }], "url": "https://www.w3.org/TR/intersection-observer/#intersectionobserver" },
        "8f59bb58": { "dfnID": "8f59bb58", "dfnText": "top layer", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-document-top-layer" }], "title": "4.2. View Transition Painting Order" }, { "refs": [{ "id": "ref-for-document-top-layer\u2460" }], "title": "7.7. Capture the image" }], "url": "https://drafts.csswg.org/css-position-4/#document-top-layer" },
        "8f5c2179": { "dfnID": "8f5c2179", "dfnText": "a promise resolved with", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-a-promise-resolved-with" }], "title": "7.4. Call the update callback" }], "url": "https://webidl.spec.whatwg.org/#a-promise-resolved-with" },
        "93f98063": { "dfnID": "93f98063", "dfnText": "principal box", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-principal-box" }], "title": "2.1. Tagging Individually Transitioning Subtrees: the view-transition-name property" }, { "refs": [{ "id": "ref-for-principal-box\u2460" }, { "id": "ref-for-principal-box\u2461" }], "title": "7.7. Capture the image" }], "url": "https://www.w3.org/TR/css-display-3/#principal-box" },
        "95302000": { "dfnID": "95302000", "dfnText": "pointer capture", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-pointer-capture" }], "title": "7.1.1. Additions to Document" }], "url": "https://www.w3.org/TR/pointerevents3/#dfn-pointer-capture" },
        "960dded0": { "dfnID": "960dded0", "dfnText": "running", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-play-state-running" }], "title": "7.8. Handle transition frame" }], "url": "https://www.w3.org/TR/web-animations-1/#play-state-running" },
        "9638f92b": { "dfnID": "9638f92b", "dfnText": "connected", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-connected" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-connected\u2460" }], "title": "7.3.2. Capture the new state" }], "url": "https://dom.spec.whatwg.org/#connected" },
        "984221ca": { "dfnID": "984221ca", "dfnText": "struct", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-struct" }], "title": "7.1.3. Captured elements" }], "url": "https://infra.spec.whatwg.org/#struct" },
        "a0144f62": { "dfnID": "a0144f62", "dfnText": "<custom-ident>", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-identifier-value" }, { "id": "ref-for-identifier-value\u2460" }, { "id": "ref-for-identifier-value\u2461" }], "title": "2.1. Tagging Individually Transitioning Subtrees: the view-transition-name property" }, { "refs": [{ "id": "ref-for-identifier-value\u2462" }, { "id": "ref-for-identifier-value\u2463" }, { "id": "ref-for-identifier-value\u2464" }], "title": "3.2.1. Named View Transition Pseudo-elements" }], "url": "https://www.w3.org/TR/css-values-4/#identifier-value" },
        "a3331757": { "dfnID": "a3331757", "dfnText": "signal", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-ref-for-dom-navigateevent-signal\u2460" }], "title": "1.4. Transitions as an enhancement" }], "url": "https://wicg.github.io/navigation-api/#ref-for-dom-navigateevent-signal\u2460" },
        "a3b18719": { "dfnID": "a3b18719", "dfnText": "append (for set)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-set-append" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-set-append\u2460" }], "title": "7.3.2. Capture the new state" }], "url": "https://infra.spec.whatwg.org/#set-append" },
        "a50c2771": { "dfnID": "a50c2771", "dfnText": "stacking context", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-x43" }], "title": "2.1.1. Rendering Consolidation" }], "url": "https://www.w3.org/TR/CSS21/visuren.html#x43" },
        "a72449dd": { "dfnID": "a72449dd", "dfnText": "in parallel", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-in-parallel" }], "title": "7.4. Call the update callback" }], "url": "https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" },
        "a9479ee7": { "dfnID": "a9479ee7", "dfnText": "user-agent origin", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-cascade-origin-ua" }, { "id": "ref-for-cascade-origin-ua\u2460" }], "title": "5. User Agent Stylesheet" }, { "refs": [{ "id": "ref-for-cascade-origin-ua\u2461" }], "title": "7.1.1. Additions to Document" }, { "refs": [{ "id": "ref-for-cascade-origin-ua\u2462" }], "title": "7.9. Update pseudo-element styles" }], "url": "https://www.w3.org/TR/css-cascade-5/#cascade-origin-ua" },
        "a973e0fe": { "dfnID": "a973e0fe", "dfnText": "document", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-document" }], "title": "1. Introduction" }, { "refs": [{ "id": "ref-for-concept-document\u2460" }], "title": "7.1.3. Captured elements" }], "url": "https://dom.spec.whatwg.org/#concept-document" },
        "ac0fba29": { "dfnID": "ac0fba29", "dfnText": "pending animation event queue", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-pending-animation-event-queue" }], "title": "7.8. Handle transition frame" }], "url": "https://www.w3.org/TR/web-animations-1/#pending-animation-event-queue" },
        "activate-view-transition": { "dfnID": "activate-view-transition", "dfnText": "activate view transition", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-activate-view-transition" }], "title": "7.4. Call the update callback" }], "url": "#activate-view-transition" },
        "ad10ee29": { "dfnID": "ad10ee29", "dfnText": "sibling", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-tree-sibling" }, { "id": "ref-for-concept-tree-sibling\u2460" }], "title": "3.1. Pseudo-element Trees" }], "url": "https://dom.spec.whatwg.org/#concept-tree-sibling" },
        "add377f4": { "dfnID": "add377f4", "dfnText": "overflow", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-overflow" }], "title": "1.5. Rendering Model" }], "url": "https://www.w3.org/TR/css-overflow-3/#propdef-overflow" },
        "ae8def21": { "dfnID": "ae8def21", "dfnText": "contain", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-contain" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-list-contain\u2460" }], "title": "7.3.2. Capture the new state" }], "url": "https://infra.spec.whatwg.org/#list-contain" },
        "b262501e": { "dfnID": "b262501e", "dfnText": "reject", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-reject" }], "title": "7.4. Call the update callback" }, { "refs": [{ "id": "ref-for-reject\u2460" }], "title": "7.5. Skip the view transition" }], "url": "https://webidl.spec.whatwg.org/#reject" },
        "b4c365f8": { "dfnID": "b4c365f8", "dfnText": "visibility state", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-visibility-state" }], "title": "6.1.1. startViewTransition() Method Steps" }, { "refs": [{ "id": "ref-for-visibility-state\u2460" }], "title": "7.6. View transition page-visibility change steps" }], "url": "https://html.spec.whatwg.org/multipage/interaction.html#visibility-state" },
        "b5ecbd4e": { "dfnID": "b5ecbd4e", "dfnText": "tree-abiding pseudo-element", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-tree-abiding" }, { "id": "ref-for-tree-abiding\u2460" }, { "id": "ref-for-tree-abiding\u2461" }], "title": "3.1. Pseudo-element Trees" }, { "refs": [{ "id": "ref-for-tree-abiding\u2462" }], "title": "3.2.1. Named View Transition Pseudo-elements" }, { "refs": [{ "id": "ref-for-tree-abiding\u2463" }], "title": "3.2.2. View Transition Tree Root: the ::view-transition pseudo-element" }], "url": "https://www.w3.org/TR/css-pseudo-4/#tree-abiding" },
        "b75080dc": { "dfnID": "b75080dc", "dfnText": "color-scheme", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-color-scheme" }], "title": "7.1.3. Captured elements" }, { "refs": [{ "id": "ref-for-propdef-color-scheme\u2460" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-propdef-color-scheme\u2461" }], "title": "7.9. Update pseudo-element styles" }], "url": "https://www.w3.org/TR/css-color-adjust-1/#propdef-color-scheme" },
        "b904c22d": { "dfnID": "b904c22d", "dfnText": "height", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-domrect-height" }], "title": "7.3.1. Capture the old state" }], "url": "https://www.w3.org/TR/geometry-1/#dom-domrect-height" },
        "bb293700": { "dfnID": "bb293700", "dfnText": "play state", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-animation-play-state" }], "title": "7.8. Handle transition frame" }], "url": "https://www.w3.org/TR/web-animations-1/#animation-play-state" },
        "bdbd19d1": { "dfnID": "bdbd19d1", "dfnText": "Promise", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-promise" }], "title": "6.1. Additions to Document" }, { "refs": [{ "id": "ref-for-idl-promise\u2460" }, { "id": "ref-for-idl-promise\u2461" }, { "id": "ref-for-idl-promise\u2462" }, { "id": "ref-for-idl-promise\u2463" }, { "id": "ref-for-idl-promise\u2464" }, { "id": "ref-for-idl-promise\u2465" }], "title": "6.2. The ViewTransition interface" }], "url": "https://webidl.spec.whatwg.org/#idl-promise" },
        "c0cc78c8": { "dfnID": "c0cc78c8", "dfnText": "natural size", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-natural-size" }], "title": "7.7. Capture the image" }, { "refs": [{ "id": "ref-for-natural-size\u2460" }], "title": "\nChanges from 2022-11-24 Working Draft\n" }], "url": "https://www.w3.org/TR/css-images-3/#natural-size" },
        "c43222a2": { "dfnID": "c43222a2", "dfnText": "<transform-function>", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-typedef-transform-function" }], "title": "7.1.3. Captured elements" }, { "refs": [{ "id": "ref-for-typedef-transform-function\u2460" }], "title": "7.3.1. Capture the old state" }], "url": "https://www.w3.org/TR/css-transforms-2/#typedef-transform-function" },
        "c7cb8568": { "dfnID": "c7cb8568", "dfnText": "width", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-domrect-width" }], "title": "7.3.1. Capture the old state" }], "url": "https://www.w3.org/TR/geometry-1/#dom-domrect-width" },
        "call-the-update-callback": { "dfnID": "call-the-update-callback", "dfnText": "call the update callback", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-call-the-update-callback" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-call-the-update-callback\u2460" }], "title": "7.4. Call the update callback" }, { "refs": [{ "id": "ref-for-call-the-update-callback\u2461" }], "title": "7.5. Skip the view transition" }], "url": "#call-the-update-callback" },
        "callbackdef-updatecallback": { "dfnID": "callbackdef-updatecallback", "dfnText": "UpdateCallback", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-callbackdef-updatecallback" }, { "id": "ref-for-callbackdef-updatecallback\u2460" }], "title": "1.3. View Transition Lifecycle" }, { "refs": [{ "id": "ref-for-callbackdef-updatecallback\u2461" }, { "id": "ref-for-callbackdef-updatecallback\u2462" }, { "id": "ref-for-callbackdef-updatecallback\u2463" }], "title": "1.4. Transitions as an enhancement" }, { "refs": [{ "id": "ref-for-callbackdef-updatecallback\u2464" }, { "id": "ref-for-callbackdef-updatecallback\u2465" }, { "id": "ref-for-callbackdef-updatecallback\u2466" }, { "id": "ref-for-callbackdef-updatecallback\u2467" }, { "id": "ref-for-callbackdef-updatecallback\u2468" }, { "id": "ref-for-callbackdef-updatecallback\u2460\u24ea" }], "title": "6.1. Additions to Document" }, { "refs": [{ "id": "ref-for-callbackdef-updatecallback\u2460\u2460" }, { "id": "ref-for-callbackdef-updatecallback\u2460\u2461" }, { "id": "ref-for-callbackdef-updatecallback\u2460\u2462" }, { "id": "ref-for-callbackdef-updatecallback\u2460\u2463" }], "title": "6.2. The ViewTransition interface" }, { "refs": [{ "id": "ref-for-callbackdef-updatecallback\u2460\u2464" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-callbackdef-updatecallback\u2460\u2465" }, { "id": "ref-for-callbackdef-updatecallback\u2460\u2466" }], "title": "\nChanges from 2022-11-24 Working Draft\n" }], "url": "#callbackdef-updatecallback" },
        "capture-rendering-characteristics": { "dfnID": "capture-rendering-characteristics", "dfnText": "capture rendering characteristics", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-capture-rendering-characteristics" }, { "id": "ref-for-capture-rendering-characteristics\u2460" }], "title": "7.7. Capture the image" }, { "refs": [{ "id": "ref-for-capture-rendering-characteristics\u2461" }], "title": "7.7.1. Capture rendering characteristics" }], "url": "#capture-rendering-characteristics" },
        "capture-the-image": { "dfnID": "capture-the-image", "dfnText": "capture the image", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-capture-the-image" }], "title": "1.5. Rendering Model" }, { "refs": [{ "id": "ref-for-capture-the-image\u2460" }], "title": "3.2.5. View Transition Old State Image: the ::view-transition-old() pseudo-element" }, { "refs": [{ "id": "ref-for-capture-the-image\u2461" }], "title": "3.2.6. View Transition New State Image: the ::view-transition-new() pseudo-element" }, { "refs": [{ "id": "ref-for-capture-the-image\u2462" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-capture-the-image\u2463" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-capture-the-image\u2464" }], "title": "7.7. Capture the image" }, { "refs": [{ "id": "ref-for-capture-the-image\u2465" }], "title": "7.9. Update pseudo-element styles" }, { "refs": [{ "id": "ref-for-capture-the-image\u2466" }], "title": "Security Considerations" }], "url": "#capture-the-image" },
        "capture-the-new-state": { "dfnID": "capture-the-new-state", "dfnText": "capture the new state", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-capture-the-new-state" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-capture-the-new-state\u2460" }], "title": "7.3.2. Capture the new state" }], "url": "#capture-the-new-state" },
        "capture-the-old-state": { "dfnID": "capture-the-old-state", "dfnText": "capture the old state", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-capture-the-old-state" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-capture-the-old-state\u2460" }], "title": "7.3.1. Capture the old state" }], "url": "#capture-the-old-state" },
        "captured-element": { "dfnID": "captured-element", "dfnText": "captured element", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-captured-element" }], "title": "6.2. The ViewTransition interface" }, { "refs": [{ "id": "ref-for-captured-element\u2460" }, { "id": "ref-for-captured-element\u2461" }], "title": "7.1.3. Captured elements" }, { "refs": [{ "id": "ref-for-captured-element\u2462" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-captured-element\u2463" }], "title": "7.3.2. Capture the new state" }], "url": "#captured-element" },
        "captured-element-group-animation-name-rule": { "dfnID": "captured-element-group-animation-name-rule", "dfnText": "group animation name rule", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-captured-element-group-animation-name-rule" }], "title": "7.3.3. Setup transition pseudo-elements" }], "url": "#captured-element-group-animation-name-rule" },
        "captured-element-group-keyframes": { "dfnID": "captured-element-group-keyframes", "dfnText": "group keyframes", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-captured-element-group-keyframes" }], "title": "7.3.3. Setup transition pseudo-elements" }], "url": "#captured-element-group-keyframes" },
        "captured-element-group-styles-rule": { "dfnID": "captured-element-group-styles-rule", "dfnText": "group styles rule", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-captured-element-group-styles-rule" }, { "id": "ref-for-captured-element-group-styles-rule\u2460" }, { "id": "ref-for-captured-element-group-styles-rule\u2461" }], "title": "7.9. Update pseudo-element styles" }], "url": "#captured-element-group-styles-rule" },
        "captured-element-image-animation-name-rule": { "dfnID": "captured-element-image-animation-name-rule", "dfnText": "image animation name rule", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-captured-element-image-animation-name-rule" }, { "id": "ref-for-captured-element-image-animation-name-rule\u2460" }, { "id": "ref-for-captured-element-image-animation-name-rule\u2461" }], "title": "7.3.3. Setup transition pseudo-elements" }], "url": "#captured-element-image-animation-name-rule" },
        "captured-element-image-pair-isolation-rule": { "dfnID": "captured-element-image-pair-isolation-rule", "dfnText": "image pair isolation rule", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-captured-element-image-pair-isolation-rule" }], "title": "7.3.3. Setup transition pseudo-elements" }], "url": "#captured-element-image-pair-isolation-rule" },
        "captured-element-new-element": { "dfnID": "captured-element-new-element", "dfnText": "new element", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-captured-element-new-element" }], "title": "4.1. The Snapshot Containing Block" }, { "refs": [{ "id": "ref-for-captured-element-new-element\u2460" }, { "id": "ref-for-captured-element-new-element\u2461" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-captured-element-new-element\u2462" }], "title": "7.3.2. Capture the new state" }, { "refs": [{ "id": "ref-for-captured-element-new-element\u2463" }, { "id": "ref-for-captured-element-new-element\u2464" }, { "id": "ref-for-captured-element-new-element\u2465" }, { "id": "ref-for-captured-element-new-element\u2466" }], "title": "7.3.3. Setup transition pseudo-elements" }, { "refs": [{ "id": "ref-for-captured-element-new-element\u2467" }, { "id": "ref-for-captured-element-new-element\u2468" }, { "id": "ref-for-captured-element-new-element\u2460\u24ea" }, { "id": "ref-for-captured-element-new-element\u2460\u2460" }, { "id": "ref-for-captured-element-new-element\u2460\u2461" }, { "id": "ref-for-captured-element-new-element\u2460\u2462" }, { "id": "ref-for-captured-element-new-element\u2460\u2463" }, { "id": "ref-for-captured-element-new-element\u2460\u2464" }, { "id": "ref-for-captured-element-new-element\u2460\u2465" }, { "id": "ref-for-captured-element-new-element\u2460\u2466" }, { "id": "ref-for-captured-element-new-element\u2460\u2467" }, { "id": "ref-for-captured-element-new-element\u2460\u2468" }, { "id": "ref-for-captured-element-new-element\u2461\u24ea" }, { "id": "ref-for-captured-element-new-element\u2461\u2460" }, { "id": "ref-for-captured-element-new-element\u2461\u2461" }], "title": "7.9. Update pseudo-element styles" }, { "refs": [{ "id": "ref-for-captured-element-new-element\u2461\u2462" }, { "id": "ref-for-captured-element-new-element\u2461\u2463" }], "title": "7.10. Clear view transition" }], "url": "#captured-element-new-element" },
        "captured-element-old-backdrop-filter": { "dfnID": "captured-element-old-backdrop-filter", "dfnText": "old backdrop-filter", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-captured-element-old-backdrop-filter" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-captured-element-old-backdrop-filter\u2460" }], "title": "7.3.3. Setup transition pseudo-elements" }, { "refs": [{ "id": "ref-for-captured-element-old-backdrop-filter\u2461" }], "title": "7.9. Update pseudo-element styles" }], "url": "#captured-element-old-backdrop-filter" },
        "captured-element-old-color-scheme": { "dfnID": "captured-element-old-color-scheme", "dfnText": "old color-scheme", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-captured-element-old-color-scheme" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-captured-element-old-color-scheme\u2460" }], "title": "7.9. Update pseudo-element styles" }], "url": "#captured-element-old-color-scheme" },
        "captured-element-old-direction": { "dfnID": "captured-element-old-direction", "dfnText": "old direction", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-captured-element-old-direction" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-captured-element-old-direction\u2460" }], "title": "7.9. Update pseudo-element styles" }], "url": "#captured-element-old-direction" },
        "captured-element-old-height": { "dfnID": "captured-element-old-height", "dfnText": "old height", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-captured-element-old-height" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-captured-element-old-height\u2460" }], "title": "7.3.3. Setup transition pseudo-elements" }, { "refs": [{ "id": "ref-for-captured-element-old-height\u2461" }], "title": "7.9. Update pseudo-element styles" }], "url": "#captured-element-old-height" },
        "captured-element-old-image": { "dfnID": "captured-element-old-image", "dfnText": "old image", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-captured-element-old-image" }], "title": "4.1. The Snapshot Containing Block" }, { "refs": [{ "id": "ref-for-captured-element-old-image\u2460" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-captured-element-old-image\u2461" }, { "id": "ref-for-captured-element-old-image\u2462" }, { "id": "ref-for-captured-element-old-image\u2463" }, { "id": "ref-for-captured-element-old-image\u2464" }, { "id": "ref-for-captured-element-old-image\u2465" }], "title": "7.3.3. Setup transition pseudo-elements" }], "url": "#captured-element-old-image" },
        "captured-element-old-mix-blend-mode": { "dfnID": "captured-element-old-mix-blend-mode", "dfnText": "old mix-blend-mode", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-captured-element-old-mix-blend-mode" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-captured-element-old-mix-blend-mode\u2460" }], "title": "7.9. Update pseudo-element styles" }], "url": "#captured-element-old-mix-blend-mode" },
        "captured-element-old-text-orientation": { "dfnID": "captured-element-old-text-orientation", "dfnText": "old text-orientation", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-captured-element-old-text-orientation" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-captured-element-old-text-orientation\u2460" }], "title": "7.9. Update pseudo-element styles" }], "url": "#captured-element-old-text-orientation" },
        "captured-element-old-transform": { "dfnID": "captured-element-old-transform", "dfnText": "old transform", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-captured-element-old-transform" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-captured-element-old-transform\u2460" }], "title": "7.3.3. Setup transition pseudo-elements" }, { "refs": [{ "id": "ref-for-captured-element-old-transform\u2461" }], "title": "7.9. Update pseudo-element styles" }], "url": "#captured-element-old-transform" },
        "captured-element-old-width": { "dfnID": "captured-element-old-width", "dfnText": "old width", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-captured-element-old-width" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-captured-element-old-width\u2460" }], "title": "7.3.3. Setup transition pseudo-elements" }, { "refs": [{ "id": "ref-for-captured-element-old-width\u2461" }], "title": "7.9. Update pseudo-element styles" }], "url": "#captured-element-old-width" },
        "captured-element-old-writing-mode": { "dfnID": "captured-element-old-writing-mode", "dfnText": "old writing-mode", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-captured-element-old-writing-mode" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-captured-element-old-writing-mode\u2460" }], "title": "7.9. Update pseudo-element styles" }], "url": "#captured-element-old-writing-mode" },
        "captured-element-style-definitions": { "dfnID": "captured-element-style-definitions", "dfnText": "style definitions", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-captured-element-style-definitions" }], "title": "7.10. Clear view transition" }], "url": "#captured-element-style-definitions" },
        "captured-in-a-view-transition": { "dfnID": "captured-in-a-view-transition", "dfnText": "captured in a view transition", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-captured-in-a-view-transition" }], "title": "2.1. Tagging Individually Transitioning Subtrees: the view-transition-name property" }, { "refs": [{ "id": "ref-for-captured-in-a-view-transition\u2460" }], "title": "2.1.1. Rendering Consolidation" }, { "refs": [{ "id": "ref-for-captured-in-a-view-transition\u2461" }], "title": "4.2. View Transition Painting Order" }, { "refs": [{ "id": "ref-for-captured-in-a-view-transition\u2462" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-captured-in-a-view-transition\u2463" }, { "id": "ref-for-captured-in-a-view-transition\u2464" }, { "id": "ref-for-captured-in-a-view-transition\u2465" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-captured-in-a-view-transition\u2466" }], "title": "7.7.1. Capture rendering characteristics" }, { "refs": [{ "id": "ref-for-captured-in-a-view-transition\u2467" }], "title": "7.9. Update pseudo-element styles" }, { "refs": [{ "id": "ref-for-captured-in-a-view-transition\u2468" }], "title": "7.10. Clear view transition" }, { "refs": [{ "id": "ref-for-captured-in-a-view-transition\u2460\u24ea" }], "title": "\nChanges from 2022-05-30 Working Draft\n" }], "url": "#captured-in-a-view-transition" },
        "clear-view-transition": { "dfnID": "clear-view-transition", "dfnText": "clear view transition", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-clear-view-transition" }], "title": "6.2. The ViewTransition interface" }, { "refs": [{ "id": "ref-for-clear-view-transition\u2460" }], "title": "7.5. Skip the view transition" }, { "refs": [{ "id": "ref-for-clear-view-transition\u2461" }], "title": "7.8. Handle transition frame" }, { "refs": [{ "id": "ref-for-clear-view-transition\u2462" }], "title": "7.10. Clear view transition" }], "url": "#clear-view-transition" },
        "d25dfb2c": { "dfnID": "d25dfb2c", "dfnText": "AbortError", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-aborterror" }], "title": "6.1.1. startViewTransition() Method Steps" }, { "refs": [{ "id": "ref-for-aborterror\u2460" }], "title": "6.2.1. skipTransition() Method Steps" }], "url": "https://webidl.spec.whatwg.org/#aborterror" },
        "d293a05b": { "dfnID": "d293a05b", "dfnText": "CSSStyleRule", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-cssstylerule" }, { "id": "ref-for-cssstylerule\u2460" }, { "id": "ref-for-cssstylerule\u2461" }, { "id": "ref-for-cssstylerule\u2462" }], "title": "7.1.3. Captured elements" }, { "refs": [{ "id": "ref-for-cssstylerule\u2463" }, { "id": "ref-for-cssstylerule\u2464" }, { "id": "ref-for-cssstylerule\u2465" }, { "id": "ref-for-cssstylerule\u2466" }, { "id": "ref-for-cssstylerule\u2467" }], "title": "7.3.3. Setup transition pseudo-elements" }, { "refs": [{ "id": "ref-for-cssstylerule\u2468" }], "title": "7.9. Update pseudo-element styles" }], "url": "https://www.w3.org/TR/cssom-1/#cssstylerule" },
        "d37bcaf0": { "dfnID": "d37bcaf0", "dfnText": "interactive-widget", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-interactive-widget" }], "title": "4.1. The Snapshot Containing Block" }], "url": "https://www.w3.org/TR/css-viewport-1/#interactive-widget" },
        "d3ff9a69": { "dfnID": "d3ff9a69", "dfnText": "visibility", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-visibility" }], "title": "4.2. View Transition Painting Order" }], "url": "https://www.w3.org/TR/css-display-3/#propdef-visibility" },
        "d65c0e81": { "dfnID": "d65c0e81", "dfnText": "box fragment", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-box-fragment" }, { "id": "ref-for-box-fragment\u2460" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-box-fragment\u2461" }], "title": "7.9. Update pseudo-element styles" }], "url": "https://www.w3.org/TR/css-break-4/#box-fragment" },
        "d729a9ff": { "dfnID": "d729a9ff", "dfnText": "parent", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-tree-parent" }], "title": "3.1. Pseudo-element Trees" }, { "refs": [{ "id": "ref-for-concept-tree-parent\u2460" }], "title": "3.2.2. View Transition Tree Root: the ::view-transition pseudo-element" }], "url": "https://dom.spec.whatwg.org/#concept-tree-parent" },
        "da8b8e0e": { "dfnID": "da8b8e0e", "dfnText": "descendant", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-tree-descendant" }, { "id": "ref-for-concept-tree-descendant\u2460" }], "title": "3.1. Pseudo-element Trees" }, { "refs": [{ "id": "ref-for-concept-tree-descendant\u2461" }], "title": "7.7. Capture the image" }], "url": "https://dom.spec.whatwg.org/#concept-tree-descendant" },
        "dacde8b5": { "dfnID": "dacde8b5", "dfnText": "a new promise", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-a-new-promise" }, { "id": "ref-for-a-new-promise\u2460" }, { "id": "ref-for-a-new-promise\u2461" }], "title": "6.2. The ViewTransition interface" }], "url": "https://webidl.spec.whatwg.org/#a-new-promise" },
        "dca2de17": { "dfnID": "dca2de17", "dfnText": "DOMException", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-DOMException" }, { "id": "ref-for-idl-DOMException\u2460" }], "title": "6.1.1. startViewTransition() Method Steps" }, { "refs": [{ "id": "ref-for-idl-DOMException\u2461" }], "title": "6.2.1. skipTransition() Method Steps" }, { "refs": [{ "id": "ref-for-idl-DOMException\u2462" }, { "id": "ref-for-idl-DOMException\u2463" }, { "id": "ref-for-idl-DOMException\u2464" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-idl-DOMException\u2465" }], "title": "7.4. Call the update callback" }, { "refs": [{ "id": "ref-for-idl-DOMException\u2466" }], "title": "7.6. View transition page-visibility change steps" }, { "refs": [{ "id": "ref-for-idl-DOMException\u2467" }], "title": "7.8. Handle transition frame" }], "url": "https://webidl.spec.whatwg.org/#idl-DOMException" },
        "dfd67b05": { "dfnID": "dfd67b05", "dfnText": "*", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-x" }, { "id": "ref-for-x\u2460" }], "title": "3.2.1. Named View Transition Pseudo-elements" }], "url": "https://www.w3.org/TR/selectors-3/#x" },
        "document-active-view-transition": { "dfnID": "document-active-view-transition", "dfnText": "active view transition", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-document-active-view-transition" }], "title": "4.2. View Transition Painting Order" }, { "refs": [{ "id": "ref-for-document-active-view-transition\u2460" }], "title": "6.1. Additions to Document" }, { "refs": [{ "id": "ref-for-document-active-view-transition\u2461" }, { "id": "ref-for-document-active-view-transition\u2462" }, { "id": "ref-for-document-active-view-transition\u2463" }], "title": "6.1.1. startViewTransition() Method Steps" }, { "refs": [{ "id": "ref-for-document-active-view-transition\u2464" }], "title": "7.1.1. Additions to Document" }, { "refs": [{ "id": "ref-for-document-active-view-transition\u2465" }, { "id": "ref-for-document-active-view-transition\u2466" }, { "id": "ref-for-document-active-view-transition\u2467" }, { "id": "ref-for-document-active-view-transition\u2468" }, { "id": "ref-for-document-active-view-transition\u2460\u24ea" }], "title": "7.2. Perform pending transition operations" }, { "refs": [{ "id": "ref-for-document-active-view-transition\u2460\u2460" }], "title": "7.5. Skip the view transition" }, { "refs": [{ "id": "ref-for-document-active-view-transition\u2460\u2461" }, { "id": "ref-for-document-active-view-transition\u2460\u2462" }, { "id": "ref-for-document-active-view-transition\u2460\u2463" }], "title": "7.6. View transition page-visibility change steps" }, { "refs": [{ "id": "ref-for-document-active-view-transition\u2460\u2464" }, { "id": "ref-for-document-active-view-transition\u2460\u2465" }], "title": "7.10. Clear view transition" }], "url": "#document-active-view-transition" },
        "document-dynamic-view-transition-style-sheet": { "dfnID": "document-dynamic-view-transition-style-sheet", "dfnText": "dynamic view transition style sheet", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-document-dynamic-view-transition-style-sheet" }], "title": "3.2.3. View Transition Named Subtree Root: the ::view-transition-group() pseudo-element" }, { "refs": [{ "id": "ref-for-document-dynamic-view-transition-style-sheet\u2460" }], "title": "3.2.5. View Transition Old State Image: the ::view-transition-old() pseudo-element" }, { "refs": [{ "id": "ref-for-document-dynamic-view-transition-style-sheet\u2461" }, { "id": "ref-for-document-dynamic-view-transition-style-sheet\u2462" }], "title": "5. User Agent Stylesheet" }, { "refs": [{ "id": "ref-for-document-dynamic-view-transition-style-sheet\u2463" }], "title": "7.1.3. Captured elements" }, { "refs": [{ "id": "ref-for-document-dynamic-view-transition-style-sheet\u2464" }, { "id": "ref-for-document-dynamic-view-transition-style-sheet\u2465" }, { "id": "ref-for-document-dynamic-view-transition-style-sheet\u2466" }, { "id": "ref-for-document-dynamic-view-transition-style-sheet\u2467" }, { "id": "ref-for-document-dynamic-view-transition-style-sheet\u2468" }, { "id": "ref-for-document-dynamic-view-transition-style-sheet\u2460\u24ea" }], "title": "7.3.3. Setup transition pseudo-elements" }, { "refs": [{ "id": "ref-for-document-dynamic-view-transition-style-sheet\u2460\u2460" }], "title": "7.9. Update pseudo-element styles" }, { "refs": [{ "id": "ref-for-document-dynamic-view-transition-style-sheet\u2460\u2461" }, { "id": "ref-for-document-dynamic-view-transition-style-sheet\u2460\u2462" }], "title": "7.10. Clear view transition" }, { "refs": [{ "id": "ref-for-document-dynamic-view-transition-style-sheet\u2460\u2463" }], "title": "\nChanges from 2022-10-25 Working Draft (FPWD)\n" }], "url": "#document-dynamic-view-transition-style-sheet" },
        "document-rendering-suppression-for-view-transitions": { "dfnID": "document-rendering-suppression-for-view-transitions", "dfnText": "rendering suppression for view transitions", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-document-rendering-suppression-for-view-transitions" }], "title": "7.1.1. Additions to Document" }, { "refs": [{ "id": "ref-for-document-rendering-suppression-for-view-transitions\u2460" }, { "id": "ref-for-document-rendering-suppression-for-view-transitions\u2461" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-document-rendering-suppression-for-view-transitions\u2462" }], "title": "7.5. Skip the view transition" }], "url": "#document-rendering-suppression-for-view-transitions" },
        "document-show-view-transition-tree": { "dfnID": "document-show-view-transition-tree", "dfnText": "show view transition tree", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-document-show-view-transition-tree" }], "title": "7.3.3. Setup transition pseudo-elements" }, { "refs": [{ "id": "ref-for-document-show-view-transition-tree\u2460" }], "title": "7.10. Clear view transition" }], "url": "#document-show-view-transition-tree" },
        "dom-document-startviewtransition": { "dfnID": "dom-document-startviewtransition", "dfnText": "startViewTransition(updateCallback)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-document-startviewtransition" }], "title": "1.2. View Transition Customization" }, { "refs": [{ "id": "ref-for-dom-document-startviewtransition\u2460" }], "title": "1.3. View Transition Lifecycle" }, { "refs": [{ "id": "ref-for-dom-document-startviewtransition\u2461" }, { "id": "ref-for-dom-document-startviewtransition\u2462" }], "title": "6.1. Additions to Document" }, { "refs": [{ "id": "ref-for-dom-document-startviewtransition\u2463" }], "title": "6.1.1. startViewTransition() Method Steps" }, { "refs": [{ "id": "ref-for-dom-document-startviewtransition\u2464" }], "title": "\nChanges from 2022-05-30 Working Draft\n" }], "url": "#dom-document-startviewtransition" },
        "dom-document-startviewtransition-updatecallback-updatecallback": { "dfnID": "dom-document-startviewtransition-updatecallback-updatecallback", "dfnText": "updateCallback", "external": false, "refSections": [], "url": "#dom-document-startviewtransition-updatecallback-updatecallback" },
        "dom-viewtransition-finished": { "dfnID": "dom-viewtransition-finished", "dfnText": "finished", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-viewtransition-finished" }], "title": "1.3. View Transition Lifecycle" }, { "refs": [{ "id": "ref-for-dom-viewtransition-finished\u2460" }, { "id": "ref-for-dom-viewtransition-finished\u2461" }, { "id": "ref-for-dom-viewtransition-finished\u2462" }, { "id": "ref-for-dom-viewtransition-finished\u2463" }], "title": "6.2. The ViewTransition interface" }], "url": "#dom-viewtransition-finished" },
        "dom-viewtransition-ready": { "dfnID": "dom-viewtransition-ready", "dfnText": "ready", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-viewtransition-ready" }], "title": "1.3. View Transition Lifecycle" }, { "refs": [{ "id": "ref-for-dom-viewtransition-ready\u2460" }, { "id": "ref-for-dom-viewtransition-ready\u2461" }, { "id": "ref-for-dom-viewtransition-ready\u2462" }, { "id": "ref-for-dom-viewtransition-ready\u2463" }, { "id": "ref-for-dom-viewtransition-ready\u2464" }], "title": "6.2. The ViewTransition interface" }], "url": "#dom-viewtransition-ready" },
        "dom-viewtransition-skiptransition": { "dfnID": "dom-viewtransition-skiptransition", "dfnText": "skipTransition()", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-viewtransition-skiptransition" }], "title": "1.4. Transitions as an enhancement" }, { "refs": [{ "id": "ref-for-dom-viewtransition-skiptransition\u2460" }, { "id": "ref-for-dom-viewtransition-skiptransition\u2461" }, { "id": "ref-for-dom-viewtransition-skiptransition\u2462" }], "title": "6.2. The ViewTransition interface" }, { "refs": [{ "id": "ref-for-dom-viewtransition-skiptransition\u2463" }], "title": "6.2.1. skipTransition() Method Steps" }, { "refs": [{ "id": "ref-for-dom-viewtransition-skiptransition\u2464" }], "title": "7.5. Skip the view transition" }], "url": "#dom-viewtransition-skiptransition" },
        "dom-viewtransition-updatecallbackdone": { "dfnID": "dom-viewtransition-updatecallbackdone", "dfnText": "updateCallbackDone", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-viewtransition-updatecallbackdone" }], "title": "1.3. View Transition Lifecycle" }, { "refs": [{ "id": "ref-for-dom-viewtransition-updatecallbackdone\u2460" }, { "id": "ref-for-dom-viewtransition-updatecallbackdone\u2461" }, { "id": "ref-for-dom-viewtransition-updatecallbackdone\u2462" }, { "id": "ref-for-dom-viewtransition-updatecallbackdone\u2463" }, { "id": "ref-for-dom-viewtransition-updatecallbackdone\u2464" }, { "id": "ref-for-dom-viewtransition-updatecallbackdone\u2465" }], "title": "6.2. The ViewTransition interface" }], "url": "#dom-viewtransition-updatecallbackdone" },
        "e10e7eb7": { "dfnID": "e10e7eb7", "dfnText": "dom manipulation task source", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-manipulation-task-source" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-dom-manipulation-task-source\u2460" }], "title": "7.4. Call the update callback" }, { "refs": [{ "id": "ref-for-dom-manipulation-task-source\u2461" }], "title": "7.5. Skip the view transition" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" },
        "e26aa9bf": { "dfnID": "e26aa9bf", "dfnText": "initial containing block", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-initial-containing-block" }], "title": "4. View Transition Layout" }, { "refs": [{ "id": "ref-for-initial-containing-block\u2460" }], "title": "4.1. The Snapshot Containing Block" }], "url": "https://www.w3.org/TR/css-display-3/#initial-containing-block" },
        "e2b06daa": { "dfnID": "e2b06daa", "dfnText": "clip-path", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-clip-path" }], "title": "1.5. Rendering Model" }], "url": "https://www.w3.org/TR/css-masking-1/#propdef-clip-path" },
        "e6cc3311": { "dfnID": "e6cc3311", "dfnText": "tree", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-tree" }], "title": "3.1. Pseudo-element Trees" }], "url": "https://dom.spec.whatwg.org/#concept-tree" },
        "e7c6bf78": { "dfnID": "e7c6bf78", "dfnText": "transform", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-transform" }], "title": "3.2.3. View Transition Named Subtree Root: the ::view-transition-group() pseudo-element" }], "url": "https://www.w3.org/TR/css-transforms-1/#propdef-transform" },
        "e8b75507": { "dfnID": "e8b75507", "dfnText": "element", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-element" }, { "id": "ref-for-element\u2460" }, { "id": "ref-for-element\u2461" }], "title": "2.1. Tagging Individually Transitioning Subtrees: the view-transition-name property" }, { "refs": [{ "id": "ref-for-element\u2462" }], "title": "2.1.1. Rendering Consolidation" }, { "refs": [{ "id": "ref-for-element\u2463" }], "title": "7.1.1. Additions to Document" }, { "refs": [{ "id": "ref-for-element\u2464" }, { "id": "ref-for-element\u2465" }], "title": "7.1.2. Additions to Elements" }, { "refs": [{ "id": "ref-for-element\u2466" }], "title": "7.1.3. Captured elements" }, { "refs": [{ "id": "ref-for-element\u2467" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-element\u2468" }], "title": "7.3.2. Capture the new state" }, { "refs": [{ "id": "ref-for-element\u2460\u24ea" }], "title": "7.7. Capture the image" }], "url": "https://drafts.csswg.org/css2/#element" },
        "e99bd18e": { "dfnID": "e99bd18e", "dfnText": "relevant global object", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-relevant-global" }], "title": "6.1.1. startViewTransition() Method Steps" }, { "refs": [{ "id": "ref-for-concept-relevant-global\u2460" }, { "id": "ref-for-concept-relevant-global\u2461" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-concept-relevant-global\u2462" }, { "id": "ref-for-concept-relevant-global\u2463" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-concept-relevant-global\u2464" }], "title": "7.3.2. Capture the new state" }, { "refs": [{ "id": "ref-for-concept-relevant-global\u2465" }], "title": "7.3.3. Setup transition pseudo-elements" }, { "refs": [{ "id": "ref-for-concept-relevant-global\u2466" }], "title": "7.4. Call the update callback" }, { "refs": [{ "id": "ref-for-concept-relevant-global\u2467" }, { "id": "ref-for-concept-relevant-global\u2468" }], "title": "7.5. Skip the view transition" }, { "refs": [{ "id": "ref-for-concept-relevant-global\u2460\u24ea" }], "title": "7.8. Handle transition frame" }, { "refs": [{ "id": "ref-for-concept-relevant-global\u2460\u2460" }], "title": "7.9. Update pseudo-element styles" }, { "refs": [{ "id": "ref-for-concept-relevant-global\u2460\u2461" }], "title": "7.10. Clear view transition" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" },
        "e9f6aadb": { "dfnID": "e9f6aadb", "dfnText": "filter", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-filter" }], "title": "1.5. Rendering Model" }, { "refs": [{ "id": "ref-for-propdef-filter\u2460" }], "title": "7.7.1. Capture rendering characteristics" }], "url": "https://www.w3.org/TR/filter-effects-1/#propdef-filter" },
        "ecfe8e64": { "dfnID": "ecfe8e64", "dfnText": "isolation", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-isolation" }], "title": "3.2.4. View Transition Image Pair Isolation: the ::view-transition-image-pair() pseudo-element" }], "url": "https://www.w3.org/TR/compositing-1/#propdef-isolation" },
        "f0ba495b": { "dfnID": "f0ba495b", "dfnText": "TimeoutError", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-timeouterror" }], "title": "7.4. Call the update callback" }], "url": "https://webidl.spec.whatwg.org/#timeouterror" },
        "f1041b37": { "dfnID": "f1041b37", "dfnText": "unhandledrejection", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-unhandledrejection" }, { "id": "ref-for-event-unhandledrejection\u2460" }], "title": "6.2. The ViewTransition interface" }, { "refs": [{ "id": "ref-for-event-unhandledrejection\u2461" }], "title": "7.4. Call the update callback" }], "url": "https://html.spec.whatwg.org/multipage/indices.html#event-unhandledrejection" },
        "f3133dfc": { "dfnID": "f3133dfc", "dfnText": "associated effect", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-animation-associated-effect" }], "title": "7.8. Handle transition frame" }], "url": "https://www.w3.org/TR/web-animations-1/#animation-associated-effect" },
        "f72f5cb4": { "dfnID": "f72f5cb4", "dfnText": "content box", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-content-box" }], "title": "7.7. Capture the image" }], "url": "https://www.w3.org/TR/css-box-4/#content-box" },
        "f7960529": { "dfnID": "f7960529", "dfnText": "root", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-tree-root" }], "title": "3.1. Pseudo-element Trees" }], "url": "https://dom.spec.whatwg.org/#concept-tree-root" },
        "f937b7b6": { "dfnID": "f937b7b6", "dfnText": "continue", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-iteration-continue" }, { "id": "ref-for-iteration-continue\u2460" }, { "id": "ref-for-iteration-continue\u2461" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-iteration-continue\u2462" }, { "id": "ref-for-iteration-continue\u2463" }], "title": "7.3.2. Capture the new state" }], "url": "https://infra.spec.whatwg.org/#iteration-continue" },
        "f9d909f7": { "dfnID": "f9d909f7", "dfnText": "inclusive descendant", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-tree-inclusive-descendant" }], "title": "4.2. View Transition Painting Order" }, { "refs": [{ "id": "ref-for-concept-tree-inclusive-descendant\u2460" }], "title": "7.8. Handle transition frame" }], "url": "https://dom.spec.whatwg.org/#concept-tree-inclusive-descendant" },
        "fafa15bc": { "dfnID": "fafa15bc", "dfnText": "layout viewport", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-layout-viewport" }], "title": "7.7. Capture the image" }], "url": "https://drafts.csswg.org/cssom-view-1/#layout-viewport" },
        "fb688f4f": { "dfnID": "fb688f4f", "dfnText": "direction", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-direction" }], "title": "7.1.3. Captured elements" }, { "refs": [{ "id": "ref-for-propdef-direction\u2460" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-propdef-direction\u2461" }], "title": "7.9. Update pseudo-element styles" }], "url": "https://www.w3.org/TR/css-writing-modes-3/#propdef-direction" },
        "fc8ac26a": { "dfnID": "fc8ac26a", "dfnText": "ultimate originating element", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-ultimate-originating-element" }], "title": "3.2. View Transition Pseudo-elements" }], "url": "https://www.w3.org/TR/selectors-4/#ultimate-originating-element" },
        "fd32e3c9": { "dfnID": "fd32e3c9", "dfnText": "shadow-including descendant", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-shadow-including-descendant" }], "title": "7.7.1. Capture rendering characteristics" }], "url": "https://dom.spec.whatwg.org/#concept-shadow-including-descendant" },
        "fd42d148": { "dfnID": "fd42d148", "dfnText": "canvas background", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-canvas-background" }, { "id": "ref-for-canvas-background\u2460" }], "title": "7.7. Capture the image" }], "url": "https://www.w3.org/TR/css-backgrounds-3/#canvas-background" },
        "fe9b8cc4": { "dfnID": "fe9b8cc4", "dfnText": "document timeline", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-document-timeline" }], "title": "7.8. Handle transition frame" }], "url": "https://www.w3.org/TR/web-animations-1/#document-timeline" },
        "global-view-transition-user-agent-style-sheet": { "dfnID": "global-view-transition-user-agent-style-sheet", "dfnText": "global view transition user agent style sheet", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-global-view-transition-user-agent-style-sheet" }], "title": "7.1.1. Additions to Document" }], "url": "#global-view-transition-user-agent-style-sheet" },
        "handle-transition-frame": { "dfnID": "handle-transition-frame", "dfnText": "handle transition frame", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-handle-transition-frame" }], "title": "7.2. Perform pending transition operations" }, { "refs": [{ "id": "ref-for-handle-transition-frame\u2460" }], "title": "7.8. Handle transition frame" }], "url": "#handle-transition-frame" },
        "named-view-transition-pseudo-elements": { "dfnID": "named-view-transition-pseudo-elements", "dfnText": "named view transition pseudo-elements", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-named-view-transition-pseudo-elements" }, { "id": "ref-for-named-view-transition-pseudo-elements\u2460" }, { "id": "ref-for-named-view-transition-pseudo-elements\u2461" }], "title": "3.2.1. Named View Transition Pseudo-elements" }, { "refs": [{ "id": "ref-for-named-view-transition-pseudo-elements\u2462" }], "title": "3.2.3. View Transition Named Subtree Root: the ::view-transition-group() pseudo-element" }, { "refs": [{ "id": "ref-for-named-view-transition-pseudo-elements\u2463" }], "title": "3.2.4. View Transition Image Pair Isolation: the ::view-transition-image-pair() pseudo-element" }, { "refs": [{ "id": "ref-for-named-view-transition-pseudo-elements\u2464" }], "title": "3.2.5. View Transition Old State Image: the ::view-transition-old() pseudo-element" }, { "refs": [{ "id": "ref-for-named-view-transition-pseudo-elements\u2465" }], "title": "3.2.6. View Transition New State Image: the ::view-transition-new() pseudo-element" }], "url": "#named-view-transition-pseudo-elements" },
        "perform-pending-transition-operations": { "dfnID": "perform-pending-transition-operations", "dfnText": "perform pending transition operations", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-perform-pending-transition-operations" }], "title": "6.1.1. startViewTransition() Method Steps" }, { "refs": [{ "id": "ref-for-perform-pending-transition-operations\u2460" }], "title": "7.2. Perform pending transition operations" }], "url": "#perform-pending-transition-operations" },
        "propdef-view-transition-name": { "dfnID": "propdef-view-transition-name", "dfnText": "view-transition-name", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-propdef-view-transition-name" }], "title": "1.2. View Transition Customization" }, { "refs": [{ "id": "ref-for-propdef-view-transition-name\u2460" }, { "id": "ref-for-propdef-view-transition-name\u2461" }, { "id": "ref-for-propdef-view-transition-name\u2462" }, { "id": "ref-for-propdef-view-transition-name\u2463" }], "title": "2.1. Tagging Individually Transitioning Subtrees: the view-transition-name property" }, { "refs": [{ "id": "ref-for-propdef-view-transition-name\u2464" }], "title": "2.1.1. Rendering Consolidation" }, { "refs": [{ "id": "ref-for-propdef-view-transition-name\u2465" }, { "id": "ref-for-propdef-view-transition-name\u2466" }, { "id": "ref-for-propdef-view-transition-name\u2467" }], "title": "3.2. View Transition Pseudo-elements" }, { "refs": [{ "id": "ref-for-propdef-view-transition-name\u2468" }], "title": "3.2.1. Named View Transition Pseudo-elements" }, { "refs": [{ "id": "ref-for-propdef-view-transition-name\u2460\u24ea" }, { "id": "ref-for-propdef-view-transition-name\u2460\u2460" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-propdef-view-transition-name\u2460\u2461" }], "title": "7.3.2. Capture the new state" }, { "refs": [{ "id": "ref-for-propdef-view-transition-name\u2460\u2462" }], "title": "\nChanges from 2022-05-30 Working Draft\n" }], "url": "#propdef-view-transition-name" },
        "pseudo-element-root": { "dfnID": "pseudo-element-root", "dfnText": "pseudo-element root", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-pseudo-element-root" }], "title": "3.1. Pseudo-element Trees" }, { "refs": [{ "id": "ref-for-pseudo-element-root\u2460" }], "title": "3.2.2. View Transition Tree Root: the ::view-transition pseudo-element" }, { "refs": [{ "id": "ref-for-pseudo-element-root\u2461" }], "title": "\nChanges from 2022-11-24 Working Draft\n" }], "url": "#pseudo-element-root" },
        "pseudo-element-tree": { "dfnID": "pseudo-element-tree", "dfnText": "pseudo-element tree", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-pseudo-element-tree" }, { "id": "ref-for-pseudo-element-tree\u2460" }], "title": "3.1. Pseudo-element Trees" }, { "refs": [{ "id": "ref-for-pseudo-element-tree\u2461" }], "title": "3.2. View Transition Pseudo-elements" }], "url": "#pseudo-element-tree" },
        "selectordef-view-transition": { "dfnID": "selectordef-view-transition", "dfnText": "::view-transition", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-selectordef-view-transition" }, { "id": "ref-for-selectordef-view-transition\u2460" }], "title": "3.2. View Transition Pseudo-elements" }, { "refs": [{ "id": "ref-for-selectordef-view-transition\u2461" }], "title": "3.2.2. View Transition Tree Root: the ::view-transition pseudo-element" }, { "refs": [{ "id": "ref-for-selectordef-view-transition\u2462" }], "title": "3.2.3. View Transition Named Subtree Root: the ::view-transition-group() pseudo-element" }, { "refs": [{ "id": "ref-for-selectordef-view-transition\u2463" }], "title": "4.1. The Snapshot Containing Block" }, { "refs": [{ "id": "ref-for-selectordef-view-transition\u2464" }], "title": "4.2. View Transition Painting Order" }, { "refs": [{ "id": "ref-for-selectordef-view-transition\u2465" }], "title": "5. User Agent Stylesheet" }, { "refs": [{ "id": "ref-for-selectordef-view-transition\u2466" }, { "id": "ref-for-selectordef-view-transition\u2467" }], "title": "6.2. The ViewTransition interface" }], "url": "#selectordef-view-transition" },
        "selectordef-view-transition-group": { "dfnID": "selectordef-view-transition-group", "dfnText": "::view-transition-group()", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-selectordef-view-transition-group" }, { "id": "ref-for-selectordef-view-transition-group\u2460" }, { "id": "ref-for-selectordef-view-transition-group\u2461" }, { "id": "ref-for-selectordef-view-transition-group\u2462" }], "title": "1.5. Rendering Model" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-group\u2463" }], "title": "1.6. Examples" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-group\u2464" }, { "id": "ref-for-selectordef-view-transition-group\u2465" }], "title": "3.2. View Transition Pseudo-elements" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-group\u2466" }], "title": "3.2.2. View Transition Tree Root: the ::view-transition pseudo-element" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-group\u2467" }, { "id": "ref-for-selectordef-view-transition-group\u2468" }], "title": "3.2.3. View Transition Named Subtree Root: the ::view-transition-group() pseudo-element" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-group\u2460\u24ea" }, { "id": "ref-for-selectordef-view-transition-group\u2460\u2460" }], "title": "3.2.4. View Transition Image Pair Isolation: the ::view-transition-image-pair() pseudo-element" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-group\u2460\u2461" }, { "id": "ref-for-selectordef-view-transition-group\u2460\u2462" }, { "id": "ref-for-selectordef-view-transition-group\u2460\u2463" }, { "id": "ref-for-selectordef-view-transition-group\u2460\u2464" }], "title": "5. User Agent Stylesheet" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-group\u2460\u2465" }], "title": "7.3.3. Setup transition pseudo-elements" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-group\u2460\u2466" }], "title": "\nChanges from 2022-05-30 Working Draft\n" }], "url": "#selectordef-view-transition-group" },
        "selectordef-view-transition-image-pair": { "dfnID": "selectordef-view-transition-image-pair", "dfnText": "::view-transition-image-pair()", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-selectordef-view-transition-image-pair" }], "title": "3.2.3. View Transition Named Subtree Root: the ::view-transition-group() pseudo-element" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-image-pair\u2460" }], "title": "3.2.4. View Transition Image Pair Isolation: the ::view-transition-image-pair() pseudo-element" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-image-pair\u2461" }, { "id": "ref-for-selectordef-view-transition-image-pair\u2462" }], "title": "3.2.5. View Transition Old State Image: the ::view-transition-old() pseudo-element" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-image-pair\u2463" }], "title": "3.2.6. View Transition New State Image: the ::view-transition-new() pseudo-element" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-image-pair\u2464" }], "title": "5. User Agent Stylesheet" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-image-pair\u2465" }], "title": "7.3.3. Setup transition pseudo-elements" }], "url": "#selectordef-view-transition-image-pair" },
        "selectordef-view-transition-new": { "dfnID": "selectordef-view-transition-new", "dfnText": "::view-transition-new()", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-selectordef-view-transition-new" }], "title": "3.2. View Transition Pseudo-elements" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-new\u2460" }], "title": "3.2.4. View Transition Image Pair Isolation: the ::view-transition-image-pair() pseudo-element" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-new\u2461" }, { "id": "ref-for-selectordef-view-transition-new\u2462" }], "title": "3.2.6. View Transition New State Image: the ::view-transition-new() pseudo-element" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-new\u2463" }, { "id": "ref-for-selectordef-view-transition-new\u2464" }], "title": "4.2. View Transition Painting Order" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-new\u2465" }, { "id": "ref-for-selectordef-view-transition-new\u2466" }], "title": "5. User Agent Stylesheet" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-new\u2467" }], "title": "7.3.3. Setup transition pseudo-elements" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-new\u2468" }], "title": "7.9. Update pseudo-element styles" }], "url": "#selectordef-view-transition-new" },
        "selectordef-view-transition-old": { "dfnID": "selectordef-view-transition-old", "dfnText": "::view-transition-old()", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-selectordef-view-transition-old" }], "title": "3.2. View Transition Pseudo-elements" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-old\u2460" }], "title": "3.2.4. View Transition Image Pair Isolation: the ::view-transition-image-pair() pseudo-element" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-old\u2461" }, { "id": "ref-for-selectordef-view-transition-old\u2462" }], "title": "3.2.5. View Transition Old State Image: the ::view-transition-old() pseudo-element" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-old\u2463" }], "title": "3.2.6. View Transition New State Image: the ::view-transition-new() pseudo-element" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-old\u2464" }], "title": "4.2. View Transition Painting Order" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-old\u2465" }, { "id": "ref-for-selectordef-view-transition-old\u2466" }], "title": "5. User Agent Stylesheet" }, { "refs": [{ "id": "ref-for-selectordef-view-transition-old\u2467" }], "title": "7.3.3. Setup transition pseudo-elements" }], "url": "#selectordef-view-transition-old" },
        "setup-transition-pseudo-elements": { "dfnID": "setup-transition-pseudo-elements", "dfnText": "setup transition pseudo-elements", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-setup-transition-pseudo-elements" }], "title": "3.2. View Transition Pseudo-elements" }, { "refs": [{ "id": "ref-for-setup-transition-pseudo-elements\u2460" }, { "id": "ref-for-setup-transition-pseudo-elements\u2461" }], "title": "3.2.5. View Transition Old State Image: the ::view-transition-old() pseudo-element" }, { "refs": [{ "id": "ref-for-setup-transition-pseudo-elements\u2462" }], "title": "3.2.6. View Transition New State Image: the ::view-transition-new() pseudo-element" }, { "refs": [{ "id": "ref-for-setup-transition-pseudo-elements\u2463" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-setup-transition-pseudo-elements\u2464" }], "title": "7.3.3. Setup transition pseudo-elements" }], "url": "#setup-transition-pseudo-elements" },
        "setup-view-transition": { "dfnID": "setup-view-transition", "dfnText": "setup view transition", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-setup-view-transition" }], "title": "6.1.1. startViewTransition() Method Steps" }, { "refs": [{ "id": "ref-for-setup-view-transition\u2460" }], "title": "7.2. Perform pending transition operations" }, { "refs": [{ "id": "ref-for-setup-view-transition\u2461" }], "title": "7.3. Setup view transition" }], "url": "#setup-view-transition" },
        "skip-the-view-transition": { "dfnID": "skip-the-view-transition", "dfnText": "skip the view transition", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-skip-the-view-transition" }, { "id": "ref-for-skip-the-view-transition\u2460" }], "title": "6.1.1. startViewTransition() Method Steps" }, { "refs": [{ "id": "ref-for-skip-the-view-transition\u2461" }], "title": "6.2. The ViewTransition interface" }, { "refs": [{ "id": "ref-for-skip-the-view-transition\u2462" }], "title": "6.2.1. skipTransition() Method Steps" }, { "refs": [{ "id": "ref-for-skip-the-view-transition\u2463" }, { "id": "ref-for-skip-the-view-transition\u2464" }, { "id": "ref-for-skip-the-view-transition\u2465" }, { "id": "ref-for-skip-the-view-transition\u2466" }, { "id": "ref-for-skip-the-view-transition\u2467" }, { "id": "ref-for-skip-the-view-transition\u2468" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-skip-the-view-transition\u2460\u24ea" }, { "id": "ref-for-skip-the-view-transition\u2460\u2460" }, { "id": "ref-for-skip-the-view-transition\u2460\u2461" }, { "id": "ref-for-skip-the-view-transition\u2460\u2462" }, { "id": "ref-for-skip-the-view-transition\u2460\u2463" }], "title": "7.4. Call the update callback" }, { "refs": [{ "id": "ref-for-skip-the-view-transition\u2460\u2464" }], "title": "7.5. Skip the view transition" }, { "refs": [{ "id": "ref-for-skip-the-view-transition\u2460\u2465" }], "title": "7.6. View transition page-visibility change steps" }, { "refs": [{ "id": "ref-for-skip-the-view-transition\u2460\u2466" }, { "id": "ref-for-skip-the-view-transition\u2460\u2467" }], "title": "7.8. Handle transition frame" }], "url": "#skip-the-view-transition" },
        "snapshot-containing-block": { "dfnID": "snapshot-containing-block", "dfnText": "snapshot containing block", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-snapshot-containing-block" }], "title": "3.2.2. View Transition Tree Root: the ::view-transition pseudo-element" }, { "refs": [{ "id": "ref-for-snapshot-containing-block\u2460" }], "title": "4. View Transition Layout" }, { "refs": [{ "id": "ref-for-snapshot-containing-block\u2461" }, { "id": "ref-for-snapshot-containing-block\u2462" }, { "id": "ref-for-snapshot-containing-block\u2463" }, { "id": "ref-for-snapshot-containing-block\u2464" }, { "id": "ref-for-snapshot-containing-block\u2465" }, { "id": "ref-for-snapshot-containing-block\u2466" }], "title": "4.1. The Snapshot Containing Block" }, { "refs": [{ "id": "ref-for-snapshot-containing-block\u2467" }], "title": "5. User Agent Stylesheet" }, { "refs": [{ "id": "ref-for-snapshot-containing-block\u2468" }], "title": "7.1.1. Additions to Document" }, { "refs": [{ "id": "ref-for-snapshot-containing-block\u2460\u24ea" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-snapshot-containing-block\u2460\u2460" }, { "id": "ref-for-snapshot-containing-block\u2460\u2461" }, { "id": "ref-for-snapshot-containing-block\u2460\u2462" }], "title": "7.7. Capture the image" }, { "refs": [{ "id": "ref-for-snapshot-containing-block\u2460\u2463" }], "title": "7.7.1. Capture rendering characteristics" }, { "refs": [{ "id": "ref-for-snapshot-containing-block\u2460\u2464" }], "title": "\nChanges from 2022-11-24 Working Draft\n" }], "url": "#snapshot-containing-block" },
        "snapshot-containing-block-origin": { "dfnID": "snapshot-containing-block-origin", "dfnText": "snapshot containing block origin", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-snapshot-containing-block-origin" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-snapshot-containing-block-origin\u2460" }], "title": "7.9. Update pseudo-element styles" }], "url": "#snapshot-containing-block-origin" },
        "snapshot-containing-block-size": { "dfnID": "snapshot-containing-block-size", "dfnText": "snapshot containing block size", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-snapshot-containing-block-size" }], "title": "6.2. The ViewTransition interface" }, { "refs": [{ "id": "ref-for-snapshot-containing-block-size\u2460" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-snapshot-containing-block-size\u2461" }, { "id": "ref-for-snapshot-containing-block-size\u2462" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-snapshot-containing-block-size\u2463" }], "title": "7.8. Handle transition frame" }], "url": "#snapshot-containing-block-size" },
        "typedef-pt-name-selector": { "dfnID": "typedef-pt-name-selector", "dfnText": "<pt-name-selector>", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-typedef-pt-name-selector" }, { "id": "ref-for-typedef-pt-name-selector\u2460" }, { "id": "ref-for-typedef-pt-name-selector\u2461" }, { "id": "ref-for-typedef-pt-name-selector\u2462" }], "title": "3.2.1. Named View Transition Pseudo-elements" }], "url": "#typedef-pt-name-selector" },
        "update-pseudo-element-styles": { "dfnID": "update-pseudo-element-styles", "dfnText": "update pseudo-element styles", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-update-pseudo-element-styles" }], "title": "3.2.5. View Transition Old State Image: the ::view-transition-old() pseudo-element" }, { "refs": [{ "id": "ref-for-update-pseudo-element-styles\u2460" }], "title": "3.2.6. View Transition New State Image: the ::view-transition-new() pseudo-element" }, { "refs": [{ "id": "ref-for-update-pseudo-element-styles\u2461" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-update-pseudo-element-styles\u2462" }], "title": "7.3.3. Setup transition pseudo-elements" }, { "refs": [{ "id": "ref-for-update-pseudo-element-styles\u2463" }], "title": "7.8. Handle transition frame" }, { "refs": [{ "id": "ref-for-update-pseudo-element-styles\u2464" }], "title": "7.9. Update pseudo-element styles" }], "url": "#update-pseudo-element-styles" },
        "valdef-view-transition-name-custom-ident": { "dfnID": "valdef-view-transition-name-custom-ident", "dfnText": "<custom-ident>", "external": false, "refSections": [], "url": "#valdef-view-transition-name-custom-ident" },
        "valdef-view-transition-name-none": { "dfnID": "valdef-view-transition-name-none", "dfnText": "none", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-view-transition-name-none" }], "title": "2.1.1. Rendering Consolidation" }, { "refs": [{ "id": "ref-for-valdef-view-transition-name-none\u2460" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-valdef-view-transition-name-none\u2461" }], "title": "7.3.2. Capture the new state" }], "url": "#valdef-view-transition-name-none" },
        "view-transition-layer": { "dfnID": "view-transition-layer", "dfnText": "view transition layer", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-view-transition-layer" }], "title": "4. View Transition Layout" }, { "refs": [{ "id": "ref-for-view-transition-layer\u2460" }, { "id": "ref-for-view-transition-layer\u2461" }, { "id": "ref-for-view-transition-layer\u2462" }], "title": "4.2. View Transition Painting Order" }], "url": "#view-transition-layer" },
        "view-transition-name": { "dfnID": "view-transition-name", "dfnText": "view transition name", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-view-transition-name" }, { "id": "ref-for-view-transition-name\u2460" }, { "id": "ref-for-view-transition-name\u2461" }, { "id": "ref-for-view-transition-name\u2462" }], "title": "2.1. Tagging Individually Transitioning Subtrees: the view-transition-name property" }, { "refs": [{ "id": "ref-for-view-transition-name\u2463" }, { "id": "ref-for-view-transition-name\u2464" }, { "id": "ref-for-view-transition-name\u2465" }, { "id": "ref-for-view-transition-name\u2466" }], "title": "3.2.1. Named View Transition Pseudo-elements" }, { "refs": [{ "id": "ref-for-view-transition-name\u2467" }], "title": "3.2.3. View Transition Named Subtree Root: the ::view-transition-group() pseudo-element" }, { "refs": [{ "id": "ref-for-view-transition-name\u2468" }], "title": "5. User Agent Stylesheet" }, { "refs": [{ "id": "ref-for-view-transition-name\u2460\u24ea" }], "title": "6.2. The ViewTransition interface" }, { "refs": [{ "id": "ref-for-view-transition-name\u2460\u2460" }, { "id": "ref-for-view-transition-name\u2460\u2461" }, { "id": "ref-for-view-transition-name\u2460\u2462" }, { "id": "ref-for-view-transition-name\u2460\u2463" }], "title": "7.3.3. Setup transition pseudo-elements" }, { "refs": [{ "id": "ref-for-view-transition-name\u2460\u2464" }], "title": "7.9. Update pseudo-element styles" }], "url": "#view-transition-name" },
        "view-transition-page-visibility-change-steps": { "dfnID": "view-transition-page-visibility-change-steps", "dfnText": "view transition page-visibility change steps", "external": false, "refSections": [], "url": "#view-transition-page-visibility-change-steps" },
        "view-transition-pseudo-elements": { "dfnID": "view-transition-pseudo-elements", "dfnText": "view transition pseudo-elements", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-view-transition-pseudo-elements" }], "title": "3.2. View Transition Pseudo-elements" }, { "refs": [{ "id": "ref-for-view-transition-pseudo-elements\u2460" }, { "id": "ref-for-view-transition-pseudo-elements\u2461" }, { "id": "ref-for-view-transition-pseudo-elements\u2462" }], "title": "3.2.1. Named View Transition Pseudo-elements" }, { "refs": [{ "id": "ref-for-view-transition-pseudo-elements\u2463" }], "title": "4. View Transition Layout" }, { "refs": [{ "id": "ref-for-view-transition-pseudo-elements\u2464" }], "title": "6.2. The ViewTransition interface" }], "url": "#view-transition-pseudo-elements" },
        "view-transition-tree": { "dfnID": "view-transition-tree", "dfnText": "view transition tree", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-view-transition-tree" }], "title": "1.4. Transitions as an enhancement" }, { "refs": [{ "id": "ref-for-view-transition-tree\u2460" }, { "id": "ref-for-view-transition-tree\u2461" }], "title": "2.1. Tagging Individually Transitioning Subtrees: the view-transition-name property" }, { "refs": [{ "id": "ref-for-view-transition-tree\u2462" }], "title": "3.2. View Transition Pseudo-elements" }, { "refs": [{ "id": "ref-for-view-transition-tree\u2463" }], "title": "\nChanges from 2022-05-30 Working Draft\n" }], "url": "#view-transition-tree" },
        "view-transitions": { "dfnID": "view-transitions", "dfnText": "view transitions", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-view-transitions" }], "title": "1.1. Separating Visual Transitions from DOM Updates" }, { "refs": [{ "id": "ref-for-view-transitions\u2460" }], "title": "1.2. View Transition Customization" }, { "refs": [{ "id": "ref-for-view-transitions\u2461" }], "title": "1.3. View Transition Lifecycle" }, { "refs": [{ "id": "ref-for-view-transitions\u2462" }], "title": "1.6. Examples" }, { "refs": [{ "id": "ref-for-view-transitions\u2463" }], "title": "2.1. Tagging Individually Transitioning Subtrees: the view-transition-name property" }, { "refs": [{ "id": "ref-for-view-transitions\u2464" }], "title": "2.1.1. Rendering Consolidation" }, { "refs": [{ "id": "ref-for-view-transitions\u2465" }], "title": "3.2. View Transition Pseudo-elements" }, { "refs": [{ "id": "ref-for-view-transitions\u2466" }], "title": "3.2.3. View Transition Named Subtree Root: the ::view-transition-group() pseudo-element" }, { "refs": [{ "id": "ref-for-view-transitions\u2467" }], "title": "3.2.4. View Transition Image Pair Isolation: the ::view-transition-image-pair() pseudo-element" }, { "refs": [{ "id": "ref-for-view-transitions\u2468" }], "title": "5. User Agent Stylesheet" }, { "refs": [{ "id": "ref-for-view-transitions\u2460\u24ea" }], "title": "6.1. Additions to Document" }, { "refs": [{ "id": "ref-for-view-transitions\u2460\u2460" }], "title": "6.1.1. startViewTransition() Method Steps" }, { "refs": [{ "id": "ref-for-view-transitions\u2460\u2461" }], "title": "6.2. The ViewTransition interface" }, { "refs": [{ "id": "ref-for-view-transitions\u2460\u2462" }], "title": "\nChanges from 2022-05-30 Working Draft\n" }], "url": "#view-transitions" },
        "viewtransition": { "dfnID": "viewtransition", "dfnText": "ViewTransition", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-viewtransition" }], "title": "1.3. View Transition Lifecycle" }, { "refs": [{ "id": "ref-for-viewtransition\u2460" }, { "id": "ref-for-viewtransition\u2461" }], "title": "6.1. Additions to Document" }, { "refs": [{ "id": "ref-for-viewtransition\u2462" }], "title": "6.1.1. startViewTransition() Method Steps" }, { "refs": [{ "id": "ref-for-viewtransition\u2463" }, { "id": "ref-for-viewtransition\u2464" }, { "id": "ref-for-viewtransition\u2465" }, { "id": "ref-for-viewtransition\u2466" }, { "id": "ref-for-viewtransition\u2467" }, { "id": "ref-for-viewtransition\u2468" }, { "id": "ref-for-viewtransition\u2460\u24ea" }, { "id": "ref-for-viewtransition\u2460\u2460" }], "title": "6.2. The ViewTransition interface" }, { "refs": [{ "id": "ref-for-viewtransition\u2460\u2461" }], "title": "7.1.1. Additions to Document" }, { "refs": [{ "id": "ref-for-viewtransition\u2460\u2462" }, { "id": "ref-for-viewtransition\u2460\u2463" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-viewtransition\u2460\u2464" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-viewtransition\u2460\u2465" }], "title": "7.3.2. Capture the new state" }, { "refs": [{ "id": "ref-for-viewtransition\u2460\u2466" }], "title": "7.3.3. Setup transition pseudo-elements" }, { "refs": [{ "id": "ref-for-viewtransition\u2460\u2467" }, { "id": "ref-for-viewtransition\u2460\u2468" }], "title": "7.4. Call the update callback" }, { "refs": [{ "id": "ref-for-viewtransition\u2461\u24ea" }], "title": "7.5. Skip the view transition" }, { "refs": [{ "id": "ref-for-viewtransition\u2461\u2460" }], "title": "7.8. Handle transition frame" }, { "refs": [{ "id": "ref-for-viewtransition\u2461\u2461" }], "title": "7.9. Update pseudo-element styles" }, { "refs": [{ "id": "ref-for-viewtransition\u2461\u2462" }], "title": "7.10. Clear view transition" }], "url": "#viewtransition" },
        "viewtransition-finished-promise": { "dfnID": "viewtransition-finished-promise", "dfnText": "finished promise", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-viewtransition-finished-promise" }], "title": "6.2. The ViewTransition interface" }, { "refs": [{ "id": "ref-for-viewtransition-finished-promise\u2460" }, { "id": "ref-for-viewtransition-finished-promise\u2461" }], "title": "7.5. Skip the view transition" }, { "refs": [{ "id": "ref-for-viewtransition-finished-promise\u2462" }], "title": "7.8. Handle transition frame" }], "url": "#viewtransition-finished-promise" },
        "viewtransition-initial-snapshot-containing-block-size": { "dfnID": "viewtransition-initial-snapshot-containing-block-size", "dfnText": "initial snapshot containing block size", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-viewtransition-initial-snapshot-containing-block-size" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-viewtransition-initial-snapshot-containing-block-size\u2460" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-viewtransition-initial-snapshot-containing-block-size\u2461" }], "title": "7.8. Handle transition frame" }], "url": "#viewtransition-initial-snapshot-containing-block-size" },
        "viewtransition-named-elements": { "dfnID": "viewtransition-named-elements", "dfnText": "named elements", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-viewtransition-named-elements" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-viewtransition-named-elements\u2460" }], "title": "7.3.1. Capture the old state" }, { "refs": [{ "id": "ref-for-viewtransition-named-elements\u2461" }], "title": "7.3.2. Capture the new state" }, { "refs": [{ "id": "ref-for-viewtransition-named-elements\u2462" }], "title": "7.3.3. Setup transition pseudo-elements" }, { "refs": [{ "id": "ref-for-viewtransition-named-elements\u2463" }], "title": "7.9. Update pseudo-element styles" }, { "refs": [{ "id": "ref-for-viewtransition-named-elements\u2464" }], "title": "7.10. Clear view transition" }], "url": "#viewtransition-named-elements" },
        "viewtransition-phase": { "dfnID": "viewtransition-phase", "dfnText": "phase", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-viewtransition-phase" }], "title": "4.2. View Transition Painting Order" }, { "refs": [{ "id": "ref-for-viewtransition-phase\u2460" }], "title": "6.2.1. skipTransition() Method Steps" }, { "refs": [{ "id": "ref-for-viewtransition-phase\u2461" }, { "id": "ref-for-viewtransition-phase\u2462" }], "title": "7.2. Perform pending transition operations" }, { "refs": [{ "id": "ref-for-viewtransition-phase\u2463" }, { "id": "ref-for-viewtransition-phase\u2464" }, { "id": "ref-for-viewtransition-phase\u2465" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-viewtransition-phase\u2466" }, { "id": "ref-for-viewtransition-phase\u2467" }, { "id": "ref-for-viewtransition-phase\u2468" }, { "id": "ref-for-viewtransition-phase\u2460\u24ea" }, { "id": "ref-for-viewtransition-phase\u2460\u2460" }], "title": "7.4. Call the update callback" }, { "refs": [{ "id": "ref-for-viewtransition-phase\u2460\u2461" }, { "id": "ref-for-viewtransition-phase\u2460\u2462" }, { "id": "ref-for-viewtransition-phase\u2460\u2463" }], "title": "7.5. Skip the view transition" }, { "refs": [{ "id": "ref-for-viewtransition-phase\u2460\u2464" }], "title": "7.8. Handle transition frame" }], "url": "#viewtransition-phase" },
        "viewtransition-ready-promise": { "dfnID": "viewtransition-ready-promise", "dfnText": "ready promise", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-viewtransition-ready-promise" }, { "id": "ref-for-viewtransition-ready-promise\u2460" }], "title": "6.2. The ViewTransition interface" }, { "refs": [{ "id": "ref-for-viewtransition-ready-promise\u2461" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-viewtransition-ready-promise\u2462" }], "title": "7.4. Call the update callback" }, { "refs": [{ "id": "ref-for-viewtransition-ready-promise\u2463" }, { "id": "ref-for-viewtransition-ready-promise\u2464" }], "title": "7.5. Skip the view transition" }], "url": "#viewtransition-ready-promise" },
        "viewtransition-transition-root-pseudo-element": { "dfnID": "viewtransition-transition-root-pseudo-element", "dfnText": "transition root pseudo-element", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-viewtransition-transition-root-pseudo-element" }], "title": "4.2. View Transition Painting Order" }, { "refs": [{ "id": "ref-for-viewtransition-transition-root-pseudo-element\u2460" }, { "id": "ref-for-viewtransition-transition-root-pseudo-element\u2461" }, { "id": "ref-for-viewtransition-transition-root-pseudo-element\u2462" }], "title": "7.1.1. Additions to Document" }, { "refs": [{ "id": "ref-for-viewtransition-transition-root-pseudo-element\u2463" }], "title": "7.3.3. Setup transition pseudo-elements" }, { "refs": [{ "id": "ref-for-viewtransition-transition-root-pseudo-element\u2464" }], "title": "7.8. Handle transition frame" }], "url": "#viewtransition-transition-root-pseudo-element" },
        "viewtransition-update-callback": { "dfnID": "viewtransition-update-callback", "dfnText": "update callback", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-viewtransition-update-callback" }, { "id": "ref-for-viewtransition-update-callback\u2460" }], "title": "6.1.1. startViewTransition() Method Steps" }, { "refs": [{ "id": "ref-for-viewtransition-update-callback\u2461" }, { "id": "ref-for-viewtransition-update-callback\u2462" }], "title": "7.4. Call the update callback" }], "url": "#viewtransition-update-callback" },
        "viewtransition-update-callback-done-promise": { "dfnID": "viewtransition-update-callback-done-promise", "dfnText": "update callback done promise", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-viewtransition-update-callback-done-promise" }, { "id": "ref-for-viewtransition-update-callback-done-promise\u2460" }, { "id": "ref-for-viewtransition-update-callback-done-promise\u2461" }], "title": "6.2. The ViewTransition interface" }, { "refs": [{ "id": "ref-for-viewtransition-update-callback-done-promise\u2462" }], "title": "7.3. Setup view transition" }, { "refs": [{ "id": "ref-for-viewtransition-update-callback-done-promise\u2463" }, { "id": "ref-for-viewtransition-update-callback-done-promise\u2464" }, { "id": "ref-for-viewtransition-update-callback-done-promise\u2465" }], "title": "7.4. Call the update callback" }, { "refs": [{ "id": "ref-for-viewtransition-update-callback-done-promise\u2466" }, { "id": "ref-for-viewtransition-update-callback-done-promise\u2467" }, { "id": "ref-for-viewtransition-update-callback-done-promise\u2468" }], "title": "7.5. Skip the view transition" }], "url": "#viewtransition-update-callback-done-promise" },
      };

      document.addEventListener("DOMContentLoaded", () => {
        genAllDfnPanels();

        document.body.addEventListener("click", (e) => {
          // If not handled already, just hide all dfn panels.
          hideAllDfnPanels();
        });
      });

      window.addEventListener("resize", () => {
        // Pin any visible dfn panel
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el => positionDfnPanel(el));
      });

      function genAllDfnPanels() {
        for (const panelData of Object.values(dfnPanelData)) {
          const dfnID = panelData.dfnID;
          const dfn = document.getElementById(dfnID);
          if (!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
          }
          dfn.panelData = panelData;
          insertDfnPopupAction(dfn);
        }
      }

      function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
        const dfnPanel = mk.aside({
          class: "dfn-panel on",
          id: `infopanel-for-${dfnID}`,
          "data-for": dfnID,
          "aria-labelled-by": `infopaneltitle-for-${dfnID}`,
        },
          mk.span({ id: `infopaneltitle-for-${dfnID}`, style: "display:none" },
            `Info about the '${dfnText}' ${external ? "external" : ""} reference.`),
          mk.a({ href: url, class: "dfn-link" }, url),
          refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
          mk.ul({},
            ...refSections.map(section =>
              mk.li({},
                ...section.refs.map((ref, refI) =>
                  [
                    mk.a({ href: `#${ref.id}` },
                      (refI == 0) ? section.title : `(${refI + 1})`
                    ),
                    " ",
                  ]
                ),
              ),
            ),
          ),
          genLinkingSyntaxes(dfn),
        );

        dfnPanel.addEventListener('click', (event) => {
          if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
          }
          event.stopPropagation();
          refocusOnTarget(event);
        });
        dfnPanel.addEventListener('keydown', (event) => {
          if (event.keyCode == 27) { // Escape key
            hideDfnPanel({ dfnPanel });
            event.stopPropagation();
            event.preventDefault();
          }
        });

        dfnPanel.dfn = dfn;
        dfn.dfnPanel = dfnPanel;
        return dfnPanel;
      }



      function hideAllDfnPanels() {
        // Delete the currently-active dfn panel.
        queryAll(".dfn-panel").forEach(dfnPanel => hideDfnPanel({ dfnPanel }));
      }

      function showDfnPanel(dfn) {
        hideAllDfnPanels(); // Only display one at a time.

        dfn.setAttribute("aria-expanded", "true");

        const dfnPanel = genDfnPanel(dfn, dfn.panelData);

        // Give the dfn a unique tabindex, and then
        // give all the tabbable panel bits successive indexes.
        let tabIndex = 100;
        dfn.tabIndex = tabIndex++;
        const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
        for (const el of tabbable) {
          el.tabIndex = tabIndex++;
        }

        append(document.body, dfnPanel);
        positionDfnPanel(dfnPanel);
      }

      function positionDfnPanel(dfnPanel) {
        const dfn = dfnPanel.dfn;
        const dfnPos = getBounds(dfn);
        dfnPanel.style.top = dfnPos.bottom + "px";
        dfnPanel.style.left = dfnPos.left + "px";

        const panelPos = dfnPanel.getBoundingClientRect();
        const panelMargin = 8;
        const maxRight = document.body.parentNode.clientWidth - panelMargin;
        if (panelPos.right > maxRight) {
          const overflowAmount = panelPos.right - maxRight;
          const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
          dfnPanel.style.left = newLeft + "px";
        }
      }

      function pinDfnPanel(dfnPanel) {
        // Switch it to "activated" state, which pins it.
        dfnPanel.classList.add("activated");
        dfnPanel.style.position = "fixed";
        dfnPanel.style.left = null;
        dfnPanel.style.top = null;
      }

      function hideDfnPanel({ dfn, dfnPanel }) {
        if (!dfnPanel) dfnPanel = dfn.dfnPanel;
        if (!dfn) dfn = dfnPanel.dfn;
        dfn.dfnPanel = undefined;
        dfnPanel.dfn = undefined;
        dfn.setAttribute("aria-expanded", "false");
        dfn.tabIndex = undefined;
        dfnPanel.remove()
      }

      function toggleDfnPanel(dfn) {
        if (dfn.dfnPanel) {
          hideDfnPanel(dfn);
        } else {
          showDfnPanel(dfn);
        }
      }

      function insertDfnPopupAction(dfn) {
        dfn.setAttribute('role', 'button');
        dfn.setAttribute('aria-expanded', 'false')
        dfn.tabIndex = 0;
        dfn.classList.add('has-dfn-panel');
        dfn.addEventListener('click', (event) => {
          toggleDfnPanel(dfn);
          event.stopPropagation();
        });
        dfn.addEventListener('keypress', (event) => {
          const kc = event.keyCode;
          // 32->Space, 13->Enter
          if (kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
          }
        });
      }

      function refocusOnTarget(event) {
        const target = event.target;
        setTimeout(() => {
          // Refocus on the event.target element.
          // This is needed after browser scrolls to the destination.
          target.focus();
        });
      }

      // TODO: shared util
      // Returns the root-level absolute position {left and top} of element.
      function getBounds(el, relativeTo = document.body) {
        const relativeRect = relativeTo.getBoundingClientRect();
        const elRect = el.getBoundingClientRect();
        const top = elRect.top - relativeRect.top;
        const left = elRect.left - relativeRect.left;
        return {
          top,
          left,
          bottom: top + elRect.height,
          right: left + elRect.width,
        }
      }

      function scrollToTargetAndHighlight(event) {
        let hash = event.target.hash;
        if (hash) {
          hash = decodeURIComponent(hash.substring(1));
          const dest = document.getElementById(hash);
          if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
          }
        }
      }

      // Functions, divided by link type, that wrap an autolink's
      // contents with the appropriate outer syntax.
      // Alternately, a string naming another type they format
      // the same as.
      function needsFor(type) {
        switch (type) {
          case "descriptor":
          case "value":
          case "element-attr":
          case "attr-value":
          case "element-state":
          case "method":
          case "constructor":
          case "argument":
          case "attribute":
          case "const":
          case "dict-member":
          case "event":
          case "enum-value":
          case "stringifier":
          case "serializer":
          case "iterator":
          case "maplike":
          case "setlike":
          case "state":
          case "mode":
          case "context":
          case "facet": return true;

          default: return false;
        }
      }
      function refusesFor(type) {
        switch (type) {
          case "property":
          case "element":
          case "interface":
          case "namespace":
          case "callback":
          case "dictionary":
          case "enum":
          case "exception":
          case "typedef":
          case "http-header":
          case "permission": return true;

          default: return false;
        }
      }
      function linkFormatterFromType(type) {
        switch (type) {
          case 'scheme':
          case 'permission':
          case 'dfn': return (text) => `[=${text}=]`;

          case 'abstract-op': return (text) => `[\$${text}\$]`;

          case 'function':
          case 'at-rule':
          case 'selector':
          case 'value': return (text) => `''${text}''`;

          case 'http-header': return (text) => `[:${text}:]`;

          case 'interface':
          case 'constructor':
          case 'method':
          case 'argument':
          case 'attribute':
          case 'callback':
          case 'dictionary':
          case 'dict-member':
          case 'enum':
          case 'enum-value':
          case 'exception':
          case 'const':
          case 'typedef':
          case 'stringifier':
          case 'serializer':
          case 'iterator':
          case 'maplike':
          case 'setlike':
          case 'extended-attribute':
          case 'event':
          case 'idl': return (text) => `{{${text}}}`;

          case 'element-state':
          case 'element-attr':
          case 'attr-value':
          case 'element': return (element) => `<{${element}}>`;

          case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

          case 'type': return (text) => `<<${text}>>`;

          case 'descriptor':
          case 'property': return (text) => `'${text}'`;

          default: return;
        };
      };

      function genLinkingSyntaxes(dfn) {
        if (dfn.tagName != "DFN") return;

        const type = dfn.getAttribute('data-dfn-type');
        if (!type) {
          console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
          return [];
        }

        // Return a function that wraps link text based on the type
        const linkFormatter = linkFormatterFromType(type);
        if (!linkFormatter) {
          console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
          return [];
        }

        let ltAlts;
        if (dfn.hasAttribute('data-lt')) {
          ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x => x.trim());
        } else {
          ltAlts = [dfn.textContent.trim()];
        }
        if (type == "type") {
          // lt of "<foo>", but "foo" is the interior;
          // <<foo/bar>> is how you write it with a for,
          // not <foo/<bar>> or whatever.
          for (var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if (match) { ltAlts[i] = match[1]; }
          }
        }

        let forAlts;
        if (dfn.hasAttribute('data-dfn-for')) {
          forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x => x.trim());
        } else {
          forAlts = [''];
        }

        let linkingSyntaxes = [];
        if (!needsFor(type)) {
          for (const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
          }
        }
        if (!refusesFor(type)) {
          for (const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
          }
        }
        return [
          mk.b({}, 'Possible linking syntaxes:'),
          mk.ul({},
            ...linkingSyntaxes.map(link => {
              const copyLink = async () =>
                await navigator.clipboard.writeText(link);
              return mk.li({},
                mk.div({ class: 'link-item' },
                  mk.button({
                    class: 'copy-icon', title: 'Copy',
                    type: 'button',
                    _onclick: copyLink,
                    tabindex: 0,
                  }, mk.span({ class: 'icon' })),
                  mk.span({}, link)
                )
              );
            })
          )
        ];
      }
    }
  </script>
  <script>/* Boilerplate: script-ref-hints */
    "use strict";
    {
      let refsData = {
        "#activate-view-transition": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "activate view transition", "type": "dfn", "url": "#activate-view-transition" },
        "#call-the-update-callback": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "call the update callback", "type": "dfn", "url": "#call-the-update-callback" },
        "#callbackdef-updatecallback": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "UpdateCallback", "type": "callback", "url": "#callbackdef-updatecallback" },
        "#capture-rendering-characteristics": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "capture rendering characteristics", "type": "dfn", "url": "#capture-rendering-characteristics" },
        "#capture-the-image": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "capture the image", "type": "dfn", "url": "#capture-the-image" },
        "#capture-the-new-state": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "capture the new state", "type": "dfn", "url": "#capture-the-new-state" },
        "#capture-the-old-state": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "capture the old state", "type": "dfn", "url": "#capture-the-old-state" },
        "#captured-element": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "captured element", "type": "dfn", "url": "#captured-element" },
        "#captured-element-group-animation-name-rule": { "export": true, "for_": ["captured element"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "group animation name rule", "type": "dfn", "url": "#captured-element-group-animation-name-rule" },
        "#captured-element-group-keyframes": { "export": true, "for_": ["captured element"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "group keyframes", "type": "dfn", "url": "#captured-element-group-keyframes" },
        "#captured-element-group-styles-rule": { "export": true, "for_": ["captured element"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "group styles rule", "type": "dfn", "url": "#captured-element-group-styles-rule" },
        "#captured-element-image-animation-name-rule": { "export": true, "for_": ["captured element"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "image animation name rule", "type": "dfn", "url": "#captured-element-image-animation-name-rule" },
        "#captured-element-image-pair-isolation-rule": { "export": true, "for_": ["captured element"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "image pair isolation rule", "type": "dfn", "url": "#captured-element-image-pair-isolation-rule" },
        "#captured-element-new-element": { "export": true, "for_": ["captured element"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "new element", "type": "dfn", "url": "#captured-element-new-element" },
        "#captured-element-old-backdrop-filter": { "export": true, "for_": ["captured element"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "old backdrop-filter", "type": "dfn", "url": "#captured-element-old-backdrop-filter" },
        "#captured-element-old-color-scheme": { "export": true, "for_": ["captured element"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "old color-scheme", "type": "dfn", "url": "#captured-element-old-color-scheme" },
        "#captured-element-old-direction": { "export": true, "for_": ["captured element"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "old direction", "type": "dfn", "url": "#captured-element-old-direction" },
        "#captured-element-old-height": { "export": true, "for_": ["captured element"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "old height", "type": "dfn", "url": "#captured-element-old-height" },
        "#captured-element-old-image": { "export": true, "for_": ["captured element"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "old image", "type": "dfn", "url": "#captured-element-old-image" },
        "#captured-element-old-mix-blend-mode": { "export": true, "for_": ["captured element"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "old mix-blend-mode", "type": "dfn", "url": "#captured-element-old-mix-blend-mode" },
        "#captured-element-old-text-orientation": { "export": true, "for_": ["captured element"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "old text-orientation", "type": "dfn", "url": "#captured-element-old-text-orientation" },
        "#captured-element-old-transform": { "export": true, "for_": ["captured element"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "old transform", "type": "dfn", "url": "#captured-element-old-transform" },
        "#captured-element-old-width": { "export": true, "for_": ["captured element"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "old width", "type": "dfn", "url": "#captured-element-old-width" },
        "#captured-element-old-writing-mode": { "export": true, "for_": ["captured element"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "old writing-mode", "type": "dfn", "url": "#captured-element-old-writing-mode" },
        "#captured-element-style-definitions": { "export": true, "for_": ["captured element"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "style definitions", "type": "dfn", "url": "#captured-element-style-definitions" },
        "#captured-in-a-view-transition": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "captured in a view transition", "type": "dfn", "url": "#captured-in-a-view-transition" },
        "#clear-view-transition": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "clear view transition", "type": "dfn", "url": "#clear-view-transition" },
        "#document-active-view-transition": { "export": true, "for_": ["document"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "active view transition", "type": "dfn", "url": "#document-active-view-transition" },
        "#document-dynamic-view-transition-style-sheet": { "export": true, "for_": ["document"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "dynamic view transition style sheet", "type": "dfn", "url": "#document-dynamic-view-transition-style-sheet" },
        "#document-rendering-suppression-for-view-transitions": { "export": true, "for_": ["document"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "rendering suppression for view transitions", "type": "dfn", "url": "#document-rendering-suppression-for-view-transitions" },
        "#document-show-view-transition-tree": { "export": true, "for_": ["document"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "show view transition tree", "type": "dfn", "url": "#document-show-view-transition-tree" },
        "#dom-document-startviewtransition": { "export": true, "for_": ["Document"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "startViewTransition()", "type": "method", "url": "#dom-document-startviewtransition" },
        "#dom-viewtransition-finished": { "export": true, "for_": ["ViewTransition"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "finished", "type": "attribute", "url": "#dom-viewtransition-finished" },
        "#dom-viewtransition-ready": { "export": true, "for_": ["ViewTransition"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "ready", "type": "attribute", "url": "#dom-viewtransition-ready" },
        "#dom-viewtransition-skiptransition": { "export": true, "for_": ["ViewTransition"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "skipTransition()", "type": "method", "url": "#dom-viewtransition-skiptransition" },
        "#dom-viewtransition-updatecallbackdone": { "export": true, "for_": ["ViewTransition"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "updateCallbackDone", "type": "attribute", "url": "#dom-viewtransition-updatecallbackdone" },
        "#global-view-transition-user-agent-style-sheet": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "global view transition user agent style sheet", "type": "dfn", "url": "#global-view-transition-user-agent-style-sheet" },
        "#handle-transition-frame": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "handle transition frame", "type": "dfn", "url": "#handle-transition-frame" },
        "#named-view-transition-pseudo-elements": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "named view transition pseudo-elements", "type": "dfn", "url": "#named-view-transition-pseudo-elements" },
        "#perform-pending-transition-operations": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "perform pending transition operations", "type": "dfn", "url": "#perform-pending-transition-operations" },
        "#propdef-view-transition-name": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "view-transition-name", "type": "property", "url": "#propdef-view-transition-name" },
        "#pseudo-element-root": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "pseudo-element root", "type": "dfn", "url": "#pseudo-element-root" },
        "#pseudo-element-tree": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "pseudo-element tree", "type": "dfn", "url": "#pseudo-element-tree" },
        "#selectordef-view-transition": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "::view-transition", "type": "selector", "url": "#selectordef-view-transition" },
        "#selectordef-view-transition-group": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "::view-transition-group()", "type": "selector", "url": "#selectordef-view-transition-group" },
        "#selectordef-view-transition-image-pair": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "::view-transition-image-pair()", "type": "selector", "url": "#selectordef-view-transition-image-pair" },
        "#selectordef-view-transition-new": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "::view-transition-new()", "type": "selector", "url": "#selectordef-view-transition-new" },
        "#selectordef-view-transition-old": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "::view-transition-old()", "type": "selector", "url": "#selectordef-view-transition-old" },
        "#setup-transition-pseudo-elements": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "setup transition pseudo-elements", "type": "dfn", "url": "#setup-transition-pseudo-elements" },
        "#setup-view-transition": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "setup view transition", "type": "dfn", "url": "#setup-view-transition" },
        "#skip-the-view-transition": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "skip the view transition", "type": "dfn", "url": "#skip-the-view-transition" },
        "#snapshot-containing-block": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "snapshot containing block", "type": "dfn", "url": "#snapshot-containing-block" },
        "#snapshot-containing-block-origin": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "snapshot containing block origin", "type": "dfn", "url": "#snapshot-containing-block-origin" },
        "#snapshot-containing-block-size": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "snapshot containing block size", "type": "dfn", "url": "#snapshot-containing-block-size" },
        "#typedef-pt-name-selector": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "<pt-name-selector>", "type": "type", "url": "#typedef-pt-name-selector" },
        "#update-pseudo-element-styles": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "update pseudo-element styles", "type": "dfn", "url": "#update-pseudo-element-styles" },
        "#valdef-view-transition-name-none": { "export": true, "for_": ["view-transition-name"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "none", "type": "value", "url": "#valdef-view-transition-name-none" },
        "#view-transition-layer": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "view transition layer", "type": "dfn", "url": "#view-transition-layer" },
        "#view-transition-name": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "view transition name", "type": "dfn", "url": "#view-transition-name" },
        "#view-transition-pseudo-elements": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "view transition pseudo-elements", "type": "dfn", "url": "#view-transition-pseudo-elements" },
        "#view-transition-tree": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "view transition tree", "type": "dfn", "url": "#view-transition-tree" },
        "#view-transitions": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "view transitions", "type": "dfn", "url": "#view-transitions" },
        "#viewtransition": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "ViewTransition", "type": "interface", "url": "#viewtransition" },
        "#viewtransition-finished-promise": { "export": true, "for_": ["ViewTransition"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "finished promise", "type": "dfn", "url": "#viewtransition-finished-promise" },
        "#viewtransition-initial-snapshot-containing-block-size": { "export": true, "for_": ["ViewTransition"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "initial snapshot containing block size", "type": "dfn", "url": "#viewtransition-initial-snapshot-containing-block-size" },
        "#viewtransition-named-elements": { "export": true, "for_": ["ViewTransition"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "named elements", "type": "dfn", "url": "#viewtransition-named-elements" },
        "#viewtransition-phase": { "export": true, "for_": ["ViewTransition"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "phase", "type": "dfn", "url": "#viewtransition-phase" },
        "#viewtransition-ready-promise": { "export": true, "for_": ["ViewTransition"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "ready promise", "type": "dfn", "url": "#viewtransition-ready-promise" },
        "#viewtransition-transition-root-pseudo-element": { "export": true, "for_": ["ViewTransition"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "transition root pseudo-element", "type": "dfn", "url": "#viewtransition-transition-root-pseudo-element" },
        "#viewtransition-update-callback": { "export": true, "for_": ["ViewTransition"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "update callback", "type": "dfn", "url": "#viewtransition-update-callback" },
        "#viewtransition-update-callback-done-promise": { "export": true, "for_": ["ViewTransition"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "css-view-transitions-1", "status": "local", "text": "update callback done promise", "type": "dfn", "url": "#viewtransition-update-callback-done-promise" },
        "https://dom.spec.whatwg.org/#concept-document": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "document", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-document" },
        "https://dom.spec.whatwg.org/#concept-node-document": { "export": true, "for_": ["Node"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "node document", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-node-document" },
        "https://dom.spec.whatwg.org/#concept-shadow-including-descendant": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "shadow-including descendant", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-shadow-including-descendant" },
        "https://dom.spec.whatwg.org/#concept-tree": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "tree", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-tree" },
        "https://dom.spec.whatwg.org/#concept-tree-child": { "export": true, "for_": ["tree"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "child", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-tree-child" },
        "https://dom.spec.whatwg.org/#concept-tree-descendant": { "export": true, "for_": ["tree"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "descendant", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-tree-descendant" },
        "https://dom.spec.whatwg.org/#concept-tree-inclusive-descendant": { "export": true, "for_": ["tree"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "inclusive descendant", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-tree-inclusive-descendant" },
        "https://dom.spec.whatwg.org/#concept-tree-parent": { "export": true, "for_": ["tree"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "parent", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-tree-parent" },
        "https://dom.spec.whatwg.org/#concept-tree-participate": { "export": true, "for_": ["tree"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "participate", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-tree-participate" },
        "https://dom.spec.whatwg.org/#concept-tree-root": { "export": true, "for_": ["tree"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "root", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-tree-root" },
        "https://dom.spec.whatwg.org/#concept-tree-sibling": { "export": true, "for_": ["tree"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "sibling", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-tree-sibling" },
        "https://dom.spec.whatwg.org/#connected": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "connected", "type": "dfn", "url": "https://dom.spec.whatwg.org/#connected" },
        "https://dom.spec.whatwg.org/#document": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "Document", "type": "interface", "url": "https://dom.spec.whatwg.org/#document" },
        "https://dom.spec.whatwg.org/#document-element": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "document element", "type": "dfn", "url": "https://dom.spec.whatwg.org/#document-element" },
        "https://dom.spec.whatwg.org/#element": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "Element", "type": "interface", "url": "https://dom.spec.whatwg.org/#element" },
        "https://drafts.csswg.org/css-contain-2/#element-contents": { "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css-contain", "spec": "css-contain-2", "status": "current", "text": "element contents", "type": "dfn", "url": "https://drafts.csswg.org/css-contain-2/#element-contents" },
        "https://drafts.csswg.org/css-position-4/#document-top-layer": { "export": true, "for_": ["Document"], "level": "4", "normative": true, "shortname": "css-position", "spec": "css-position-4", "status": "current", "text": "top layer", "type": "dfn", "url": "https://drafts.csswg.org/css-position-4/#document-top-layer" },
        "https://drafts.csswg.org/css-scoping-1/#flat-tree": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-scoping", "spec": "css-scoping-1", "status": "current", "text": "flat tree", "type": "dfn", "url": "https://drafts.csswg.org/css-scoping-1/#flat-tree" },
        "https://drafts.csswg.org/css-ui-4/#propdef-pointer-events": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-ui", "spec": "css-ui-4", "status": "current", "text": "pointer-events", "type": "property", "url": "https://drafts.csswg.org/css-ui-4/#propdef-pointer-events" },
        "https://drafts.csswg.org/css2/#element": { "export": false, "for_": [], "level": "1", "normative": true, "shortname": "css", "spec": "css22", "status": "current", "text": "element", "type": "dfn", "url": "https://drafts.csswg.org/css2/#element" },
        "https://drafts.csswg.org/cssom-view-1/#layout-viewport": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "cssom-view", "spec": "cssom-view-1", "status": "current", "text": "layout viewport", "type": "dfn", "url": "https://drafts.csswg.org/cssom-view-1/#layout-viewport" },
        "https://drafts.csswg.org/cssom-view-1/#scrolling-box": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "cssom-view", "spec": "cssom-view-1", "status": "current", "text": "scrolling box", "type": "dfn", "url": "https://drafts.csswg.org/cssom-view-1/#scrolling-box" },
        "https://drafts.csswg.org/selectors-4/#functional-pseudo-element": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "selectors", "spec": "selectors-4", "status": "current", "text": "functional pseudo-element", "type": "dfn", "url": "https://drafts.csswg.org/selectors-4/#functional-pseudo-element" },
        "https://drafts.fxtf.org/filter-effects-2/#backdrop-root": { "export": true, "for_": [], "level": "2", "normative": true, "shortname": "filter-effects", "spec": "filter-effects-2", "status": "current", "text": "backdrop root", "type": "dfn", "url": "https://drafts.fxtf.org/filter-effects-2/#backdrop-root" },
        "https://drafts.fxtf.org/filter-effects-2/#propdef-backdrop-filter": { "export": true, "for_": [], "level": "2", "normative": true, "shortname": "filter-effects", "spec": "filter-effects-2", "status": "current", "text": "backdrop-filter", "type": "property", "url": "https://drafts.fxtf.org/filter-effects-2/#propdef-backdrop-filter" },
        "https://html.spec.whatwg.org/multipage/indices.html#event-unhandledrejection": { "export": true, "for_": ["Window", "WorkerGlobalScope"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "unhandledrejection", "type": "event", "url": "https://html.spec.whatwg.org/multipage/indices.html#event-unhandledrejection" },
        "https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "in parallel", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" },
        "https://html.spec.whatwg.org/multipage/interaction.html#visibility-state": { "export": true, "for_": ["Document"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "visibility state", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/interaction.html#visibility-state" },
        "https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "associated document", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" },
        "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "relevant global object", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" },
        "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "relevant realm", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" },
        "https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "dom manipulation task source", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" },
        "https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "queue a global task", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" },
        "https://infra.spec.whatwg.org/#assert": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "assert", "type": "dfn", "url": "https://infra.spec.whatwg.org/#assert" },
        "https://infra.spec.whatwg.org/#implementation-defined": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "implementation-defined", "type": "dfn", "url": "https://infra.spec.whatwg.org/#implementation-defined" },
        "https://infra.spec.whatwg.org/#iteration-continue": { "export": true, "for_": ["iteration"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "continue", "type": "dfn", "url": "https://infra.spec.whatwg.org/#iteration-continue" },
        "https://infra.spec.whatwg.org/#list": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "list", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list" },
        "https://infra.spec.whatwg.org/#list-append": { "export": true, "for_": ["list"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "append", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list-append" },
        "https://infra.spec.whatwg.org/#list-contain": { "export": true, "for_": ["list", "stack", "queue", "set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "contain", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list-contain" },
        "https://infra.spec.whatwg.org/#list-iterate": { "export": true, "for_": ["list", "set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "for each", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list-iterate" },
        "https://infra.spec.whatwg.org/#map-exists": { "export": true, "for_": ["map"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "exist", "type": "dfn", "url": "https://infra.spec.whatwg.org/#map-exists" },
        "https://infra.spec.whatwg.org/#map-getting-the-values": { "export": true, "for_": ["map"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "values", "type": "dfn", "url": "https://infra.spec.whatwg.org/#map-getting-the-values" },
        "https://infra.spec.whatwg.org/#map-iterate": { "export": true, "for_": ["map"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "for each", "type": "dfn", "url": "https://infra.spec.whatwg.org/#map-iterate" },
        "https://infra.spec.whatwg.org/#ordered-map": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "map", "type": "dfn", "url": "https://infra.spec.whatwg.org/#ordered-map" },
        "https://infra.spec.whatwg.org/#ordered-set": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "set", "type": "dfn", "url": "https://infra.spec.whatwg.org/#ordered-set" },
        "https://infra.spec.whatwg.org/#set-append": { "export": true, "for_": ["set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "append", "type": "dfn", "url": "https://infra.spec.whatwg.org/#set-append" },
        "https://infra.spec.whatwg.org/#struct": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "struct", "type": "dfn", "url": "https://infra.spec.whatwg.org/#struct" },
        "https://infra.spec.whatwg.org/#tuple": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "tuple", "type": "dfn", "url": "https://infra.spec.whatwg.org/#tuple" },
        "https://webidl.spec.whatwg.org/#Exposed": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "Exposed", "type": "extended-attribute", "url": "https://webidl.spec.whatwg.org/#Exposed" },
        "https://webidl.spec.whatwg.org/#a-new-promise": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "a new promise", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#a-new-promise" },
        "https://webidl.spec.whatwg.org/#a-promise-resolved-with": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "a promise resolved with", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#a-promise-resolved-with" },
        "https://webidl.spec.whatwg.org/#aborterror": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "AbortError", "type": "exception", "url": "https://webidl.spec.whatwg.org/#aborterror" },
        "https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled": { "export": true, "for_": ["promise"], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "react", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled" },
        "https://webidl.spec.whatwg.org/#getter-steps": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "getter steps", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#getter-steps" },
        "https://webidl.spec.whatwg.org/#idl-DOMException": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "DOMException", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-DOMException" },
        "https://webidl.spec.whatwg.org/#idl-any": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "any", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-any" },
        "https://webidl.spec.whatwg.org/#idl-promise": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "Promise", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-promise" },
        "https://webidl.spec.whatwg.org/#idl-undefined": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "undefined", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-undefined" },
        "https://webidl.spec.whatwg.org/#idl-unrestricted-double": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "unrestricted double", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-unrestricted-double" },
        "https://webidl.spec.whatwg.org/#invalidstateerror": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "InvalidStateError", "type": "exception", "url": "https://webidl.spec.whatwg.org/#invalidstateerror" },
        "https://webidl.spec.whatwg.org/#invoke-a-callback-function": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "invoke", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#invoke-a-callback-function" },
        "https://webidl.spec.whatwg.org/#mark-a-promise-as-handled": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "mark as handled", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#mark-a-promise-as-handled" },
        "https://webidl.spec.whatwg.org/#method-steps": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "method steps", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#method-steps" },
        "https://webidl.spec.whatwg.org/#reject": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "reject", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#reject" },
        "https://webidl.spec.whatwg.org/#resolve": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "resolve", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#resolve" },
        "https://webidl.spec.whatwg.org/#this": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "this", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#this" },
        "https://webidl.spec.whatwg.org/#timeouterror": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "TimeoutError", "type": "exception", "url": "https://webidl.spec.whatwg.org/#timeouterror" },
        "https://wicg.github.io/navigation-api/#navigateevent": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "", "status": "anchor-block", "text": "NavigateEvent", "type": "interface", "url": "https://wicg.github.io/navigation-api/#navigateevent" },
        "https://wicg.github.io/navigation-api/#ref-for-dom-navigateevent-signal①": { "export": true, "for_": ["NavigateEvent"], "level": "1", "normative": true, "shortname": "css-view-transitions", "spec": "", "status": "anchor-block", "text": "signal", "type": "interface", "url": "https://wicg.github.io/navigation-api/#ref-for-dom-navigateevent-signal\u2460" },
        "https://www.w3.org/TR/CSS21/selector.html#x22": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css", "spec": "css2", "status": "snapshot", "text": "pseudo-elements", "type": "dfn", "url": "https://www.w3.org/TR/CSS21/selector.html#x22" },
        "https://www.w3.org/TR/CSS21/visuren.html#x43": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css", "spec": "css2", "status": "snapshot", "text": "stacking context", "type": "dfn", "url": "https://www.w3.org/TR/CSS21/visuren.html#x43" },
        "https://www.w3.org/TR/compositing-1/#propdef-isolation": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "snapshot", "text": "isolation", "type": "property", "url": "https://www.w3.org/TR/compositing-1/#propdef-isolation" },
        "https://www.w3.org/TR/compositing-1/#propdef-mix-blend-mode": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "snapshot", "text": "mix-blend-mode", "type": "property", "url": "https://www.w3.org/TR/compositing-1/#propdef-mix-blend-mode" },
        "https://www.w3.org/TR/css-2022/#style-sheet": { "export": true, "for_": [], "level": "2022", "normative": true, "shortname": "css", "spec": "css-2022", "status": "snapshot", "text": "style sheet", "type": "dfn", "url": "https://www.w3.org/TR/css-2022/#style-sheet" },
        "https://www.w3.org/TR/css-animations-1/#csskeyframesrule": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-animations", "spec": "css-animations-1", "status": "snapshot", "text": "CSSKeyframesRule", "type": "interface", "url": "https://www.w3.org/TR/css-animations-1/#csskeyframesrule" },
        "https://www.w3.org/TR/css-backgrounds-3/#canvas-background": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-backgrounds", "spec": "css-backgrounds-3", "status": "snapshot", "text": "canvas background", "type": "dfn", "url": "https://www.w3.org/TR/css-backgrounds-3/#canvas-background" },
        "https://www.w3.org/TR/css-box-4/#border-box": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-box", "spec": "css-box-4", "status": "snapshot", "text": "border box", "type": "dfn", "url": "https://www.w3.org/TR/css-box-4/#border-box" },
        "https://www.w3.org/TR/css-box-4/#content-box": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-box", "spec": "css-box-4", "status": "snapshot", "text": "content box", "type": "dfn", "url": "https://www.w3.org/TR/css-box-4/#content-box" },
        "https://www.w3.org/TR/css-break-4/#box-fragment": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-break", "spec": "css-break-4", "status": "snapshot", "text": "box fragment", "type": "dfn", "url": "https://www.w3.org/TR/css-break-4/#box-fragment" },
        "https://www.w3.org/TR/css-break-4/#fragment": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-break", "spec": "css-break-4", "status": "snapshot", "text": "fragment", "type": "dfn", "url": "https://www.w3.org/TR/css-break-4/#fragment" },
        "https://www.w3.org/TR/css-cascade-5/#cascade-origin-ua": { "export": true, "for_": [], "level": "5", "normative": true, "shortname": "css-cascade", "spec": "css-cascade-5", "status": "snapshot", "text": "user-agent origin", "type": "dfn", "url": "https://www.w3.org/TR/css-cascade-5/#cascade-origin-ua" },
        "https://www.w3.org/TR/css-cascade-5/#computed-value": { "export": true, "for_": [], "level": "5", "normative": true, "shortname": "css-cascade", "spec": "css-cascade-5", "status": "snapshot", "text": "computed value", "type": "dfn", "url": "https://www.w3.org/TR/css-cascade-5/#computed-value" },
        "https://www.w3.org/TR/css-color-4/#propdef-opacity": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-color", "spec": "css-color-4", "status": "snapshot", "text": "opacity", "type": "property", "url": "https://www.w3.org/TR/css-color-4/#propdef-opacity" },
        "https://www.w3.org/TR/css-color-adjust-1/#propdef-color-scheme": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-color-adjust", "spec": "css-color-adjust-1", "status": "snapshot", "text": "color-scheme", "type": "property", "url": "https://www.w3.org/TR/css-color-adjust-1/#propdef-color-scheme" },
        "https://www.w3.org/TR/css-contain-2/#skips-its-contents": { "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css-contain", "spec": "css-contain-2", "status": "snapshot", "text": "skips its contents", "type": "dfn", "url": "https://www.w3.org/TR/css-contain-2/#skips-its-contents" },
        "https://www.w3.org/TR/css-display-3/#containing-block": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-display", "spec": "css-display-3", "status": "snapshot", "text": "containing block", "type": "dfn", "url": "https://www.w3.org/TR/css-display-3/#containing-block" },
        "https://www.w3.org/TR/css-display-3/#initial-containing-block": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-display", "spec": "css-display-3", "status": "snapshot", "text": "initial containing block", "type": "dfn", "url": "https://www.w3.org/TR/css-display-3/#initial-containing-block" },
        "https://www.w3.org/TR/css-display-3/#principal-box": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-display", "spec": "css-display-3", "status": "snapshot", "text": "principal box", "type": "dfn", "url": "https://www.w3.org/TR/css-display-3/#principal-box" },
        "https://www.w3.org/TR/css-display-3/#propdef-visibility": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-display", "spec": "css-display-3", "status": "snapshot", "text": "visibility", "type": "property", "url": "https://www.w3.org/TR/css-display-3/#propdef-visibility" },
        "https://www.w3.org/TR/css-display-3/#replaced-element": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-display", "spec": "css-display-3", "status": "snapshot", "text": "replaced element", "type": "dfn", "url": "https://www.w3.org/TR/css-display-3/#replaced-element" },
        "https://www.w3.org/TR/css-display-3/#root-element": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-display", "spec": "css-display-3", "status": "snapshot", "text": "root element", "type": "dfn", "url": "https://www.w3.org/TR/css-display-3/#root-element" },
        "https://www.w3.org/TR/css-images-3/#natural-dimensions": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-images", "spec": "css-images-3", "status": "snapshot", "text": "natural dimension", "type": "dfn", "url": "https://www.w3.org/TR/css-images-3/#natural-dimensions" },
        "https://www.w3.org/TR/css-images-3/#natural-size": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-images", "spec": "css-images-3", "status": "snapshot", "text": "natural size", "type": "dfn", "url": "https://www.w3.org/TR/css-images-3/#natural-size" },
        "https://www.w3.org/TR/css-images-4/#element-not-rendered": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-images", "spec": "css-images-4", "status": "snapshot", "text": "element-not-rendered", "type": "dfn", "url": "https://www.w3.org/TR/css-images-4/#element-not-rendered" },
        "https://www.w3.org/TR/css-masking-1/#propdef-clip-path": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-masking", "spec": "css-masking-1", "status": "snapshot", "text": "clip-path", "type": "property", "url": "https://www.w3.org/TR/css-masking-1/#propdef-clip-path" },
        "https://www.w3.org/TR/css-overflow-3/#ink-overflow": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-3", "status": "snapshot", "text": "ink overflow", "type": "dfn", "url": "https://www.w3.org/TR/css-overflow-3/#ink-overflow" },
        "https://www.w3.org/TR/css-overflow-3/#ink-overflow-rectangle": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-3", "status": "snapshot", "text": "ink overflow rectangle", "type": "dfn", "url": "https://www.w3.org/TR/css-overflow-3/#ink-overflow-rectangle" },
        "https://www.w3.org/TR/css-overflow-3/#ink-overflow-region": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-3", "status": "snapshot", "text": "ink overflow area", "type": "dfn", "url": "https://www.w3.org/TR/css-overflow-3/#ink-overflow-region" },
        "https://www.w3.org/TR/css-overflow-3/#propdef-overflow": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-3", "status": "snapshot", "text": "overflow", "type": "property", "url": "https://www.w3.org/TR/css-overflow-3/#propdef-overflow" },
        "https://www.w3.org/TR/css-position-3/#absolute-positioning-containing-block": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-position", "spec": "css-position-3", "status": "snapshot", "text": "absolute positioning containing block", "type": "dfn", "url": "https://www.w3.org/TR/css-position-3/#absolute-positioning-containing-block" },
        "https://www.w3.org/TR/css-position-3/#fixed-positioning-containing-block": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-position", "spec": "css-position-3", "status": "snapshot", "text": "fixed positioning containing block", "type": "dfn", "url": "https://www.w3.org/TR/css-position-3/#fixed-positioning-containing-block" },
        "https://www.w3.org/TR/css-pseudo-4/#tree-abiding": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-pseudo", "spec": "css-pseudo-4", "status": "snapshot", "text": "tree-abiding pseudo-element", "type": "dfn", "url": "https://www.w3.org/TR/css-pseudo-4/#tree-abiding" },
        "https://www.w3.org/TR/css-sizing-3/#propdef-height": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-sizing", "spec": "css-sizing-3", "status": "snapshot", "text": "height", "type": "property", "url": "https://www.w3.org/TR/css-sizing-3/#propdef-height" },
        "https://www.w3.org/TR/css-sizing-3/#propdef-width": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-sizing", "spec": "css-sizing-3", "status": "snapshot", "text": "width", "type": "property", "url": "https://www.w3.org/TR/css-sizing-3/#propdef-width" },
        "https://www.w3.org/TR/css-transforms-1/#identity-transform-function": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-transforms", "spec": "css-transforms-1", "status": "snapshot", "text": "identity transform function", "type": "dfn", "url": "https://www.w3.org/TR/css-transforms-1/#identity-transform-function" },
        "https://www.w3.org/TR/css-transforms-1/#propdef-transform": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-transforms", "spec": "css-transforms-1", "status": "snapshot", "text": "transform", "type": "property", "url": "https://www.w3.org/TR/css-transforms-1/#propdef-transform" },
        "https://www.w3.org/TR/css-transforms-2/#typedef-transform-function": { "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css-transforms", "spec": "css-transforms-2", "status": "snapshot", "text": "<transform-function>", "type": "type", "url": "https://www.w3.org/TR/css-transforms-2/#typedef-transform-function" },
        "https://www.w3.org/TR/css-values-4/#comb-one": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-values", "spec": "css-values-4", "status": "snapshot", "text": "|", "type": "grammar", "url": "https://www.w3.org/TR/css-values-4/#comb-one" },
        "https://www.w3.org/TR/css-values-4/#identifier-value": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-values", "spec": "css-values-4", "status": "snapshot", "text": "<custom-ident>", "type": "type", "url": "https://www.w3.org/TR/css-values-4/#identifier-value" },
        "https://www.w3.org/TR/css-viewport-1/#interactive-widget": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-viewport", "spec": "css-viewport-1", "status": "snapshot", "text": "interactive-widget", "type": "dfn", "url": "https://www.w3.org/TR/css-viewport-1/#interactive-widget" },
        "https://www.w3.org/TR/css-writing-modes-3/#propdef-direction": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-writing-modes", "spec": "css-writing-modes-3", "status": "snapshot", "text": "direction", "type": "property", "url": "https://www.w3.org/TR/css-writing-modes-3/#propdef-direction" },
        "https://www.w3.org/TR/css-writing-modes-4/#propdef-text-orientation": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-writing-modes", "spec": "css-writing-modes-4", "status": "snapshot", "text": "text-orientation", "type": "property", "url": "https://www.w3.org/TR/css-writing-modes-4/#propdef-text-orientation" },
        "https://www.w3.org/TR/css-writing-modes-4/#propdef-writing-mode": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-writing-modes", "spec": "css-writing-modes-4", "status": "snapshot", "text": "writing-mode", "type": "property", "url": "https://www.w3.org/TR/css-writing-modes-4/#propdef-writing-mode" },
        "https://www.w3.org/TR/cssom-1/#cssstylerule": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "cssom", "spec": "cssom-1", "status": "snapshot", "text": "CSSStyleRule", "type": "interface", "url": "https://www.w3.org/TR/cssom-1/#cssstylerule" },
        "https://www.w3.org/TR/filter-effects-1/#propdef-filter": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "filter-effects", "spec": "filter-effects-1", "status": "snapshot", "text": "filter", "type": "property", "url": "https://www.w3.org/TR/filter-effects-1/#propdef-filter" },
        "https://www.w3.org/TR/geometry-1/#dom-domrect-height": { "export": true, "for_": ["DOMRect"], "level": "1", "normative": true, "shortname": "geometry", "spec": "geometry-1", "status": "snapshot", "text": "height", "type": "attribute", "url": "https://www.w3.org/TR/geometry-1/#dom-domrect-height" },
        "https://www.w3.org/TR/geometry-1/#dom-domrect-width": { "export": true, "for_": ["DOMRect"], "level": "1", "normative": true, "shortname": "geometry", "spec": "geometry-1", "status": "snapshot", "text": "width", "type": "attribute", "url": "https://www.w3.org/TR/geometry-1/#dom-domrect-width" },
        "https://www.w3.org/TR/hr-time-3/#dfn-duration": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "hr-time", "spec": "hr-time-3", "status": "snapshot", "text": "duration", "type": "dfn", "url": "https://www.w3.org/TR/hr-time-3/#dfn-duration" },
        "https://www.w3.org/TR/intersection-observer/#intersectionobserver": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "intersection-observer", "spec": "intersection-observer", "status": "snapshot", "text": "IntersectionObserver", "type": "interface", "url": "https://www.w3.org/TR/intersection-observer/#intersectionobserver" },
        "https://www.w3.org/TR/pointerevents3/#dfn-pointer-capture": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "pointerevents", "spec": "pointerevents3", "status": "snapshot", "text": "pointer capture", "type": "dfn", "url": "https://www.w3.org/TR/pointerevents3/#dfn-pointer-capture" },
        "https://www.w3.org/TR/scroll-animations-1/#scroll-driven-animations": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "scroll-animations", "spec": "scroll-animations-1", "status": "snapshot", "text": "scroll-driven animations", "type": "dfn", "url": "https://www.w3.org/TR/scroll-animations-1/#scroll-driven-animations" },
        "https://www.w3.org/TR/selectors-3/#x": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "selectors", "spec": "selectors-3", "status": "snapshot", "text": "*", "type": "selector", "url": "https://www.w3.org/TR/selectors-3/#x" },
        "https://www.w3.org/TR/selectors-4/#only-child-pseudo": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "selectors", "spec": "selectors-4", "status": "snapshot", "text": ":only-child", "type": "selector", "url": "https://www.w3.org/TR/selectors-4/#only-child-pseudo" },
        "https://www.w3.org/TR/selectors-4/#originating-element": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "selectors", "spec": "selectors-4", "status": "snapshot", "text": "originating element", "type": "dfn", "url": "https://www.w3.org/TR/selectors-4/#originating-element" },
        "https://www.w3.org/TR/selectors-4/#originating-pseudo-element": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "selectors", "spec": "selectors-4", "status": "snapshot", "text": "originating pseudo-element", "type": "dfn", "url": "https://www.w3.org/TR/selectors-4/#originating-pseudo-element" },
        "https://www.w3.org/TR/selectors-4/#pseudo-element": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "selectors", "spec": "selectors-4", "status": "snapshot", "text": "pseudo-element", "type": "dfn", "url": "https://www.w3.org/TR/selectors-4/#pseudo-element" },
        "https://www.w3.org/TR/selectors-4/#selector": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "selectors", "spec": "selectors-4", "status": "snapshot", "text": "selector", "type": "dfn", "url": "https://www.w3.org/TR/selectors-4/#selector" },
        "https://www.w3.org/TR/selectors-4/#type-selector": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "selectors", "spec": "selectors-4", "status": "snapshot", "text": "type selector", "type": "dfn", "url": "https://www.w3.org/TR/selectors-4/#type-selector" },
        "https://www.w3.org/TR/selectors-4/#ultimate-originating-element": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "selectors", "spec": "selectors-4", "status": "snapshot", "text": "ultimate originating element", "type": "dfn", "url": "https://www.w3.org/TR/selectors-4/#ultimate-originating-element" },
        "https://www.w3.org/TR/web-animations-1/#animation-associated-effect": { "export": true, "for_": ["animation"], "level": "1", "normative": true, "shortname": "web-animations", "spec": "web-animations-1", "status": "snapshot", "text": "associated effect", "type": "dfn", "url": "https://www.w3.org/TR/web-animations-1/#animation-associated-effect" },
        "https://www.w3.org/TR/web-animations-1/#animation-play-state": { "export": true, "for_": ["animation"], "level": "1", "normative": true, "shortname": "web-animations", "spec": "web-animations-1", "status": "snapshot", "text": "play state", "type": "dfn", "url": "https://www.w3.org/TR/web-animations-1/#animation-play-state" },
        "https://www.w3.org/TR/web-animations-1/#discrete": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "web-animations", "spec": "web-animations-1", "status": "snapshot", "text": "discrete", "type": "dfn", "url": "https://www.w3.org/TR/web-animations-1/#discrete" },
        "https://www.w3.org/TR/web-animations-1/#document-timeline": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "web-animations", "spec": "web-animations-1", "status": "snapshot", "text": "document timeline", "type": "dfn", "url": "https://www.w3.org/TR/web-animations-1/#document-timeline" },
        "https://www.w3.org/TR/web-animations-1/#keyframe-effect-effect-target": { "export": true, "for_": ["keyframe effect"], "level": "1", "normative": true, "shortname": "web-animations", "spec": "web-animations-1", "status": "snapshot", "text": "effect target", "type": "dfn", "url": "https://www.w3.org/TR/web-animations-1/#keyframe-effect-effect-target" },
        "https://www.w3.org/TR/web-animations-1/#pending-animation-event-queue": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "web-animations", "spec": "web-animations-1", "status": "snapshot", "text": "pending animation event queue", "type": "dfn", "url": "https://www.w3.org/TR/web-animations-1/#pending-animation-event-queue" },
        "https://www.w3.org/TR/web-animations-1/#play-state-paused": { "export": true, "for_": ["play state"], "level": "1", "normative": true, "shortname": "web-animations", "spec": "web-animations-1", "status": "snapshot", "text": "paused", "type": "dfn", "url": "https://www.w3.org/TR/web-animations-1/#play-state-paused" },
        "https://www.w3.org/TR/web-animations-1/#play-state-running": { "export": true, "for_": ["play state"], "level": "1", "normative": true, "shortname": "web-animations", "spec": "web-animations-1", "status": "snapshot", "text": "running", "type": "dfn", "url": "https://www.w3.org/TR/web-animations-1/#play-state-running" },
        "https://www.w3.org/TR/web-animations-1/#timeline": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "web-animations", "spec": "web-animations-1", "status": "snapshot", "text": "timeline", "type": "dfn", "url": "https://www.w3.org/TR/web-animations-1/#timeline" },
      };

      function mkRefHint(link, ref) {
        const linkText = link.textContent;
        let dfnTextElements = '';
        if (ref.text != linkText) {
          dfnTextElements =
            mk.li({},
              mk.b({}, "Term: "),
              mk.span({}, ref.text)
            );
        }
        const forList = ref.for_;
        let forListElements;
        if (forList.length == 0) {
          forListElements = [];
        } else if (forList.length == 1) {
          forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
          );
        } else {
          forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
              ...forList.map(forItem =>
                mk.li({},
                  mk.span({}, forItem)
                ),
              ),
            ),
          );
        }
        const url = ref.url;
        const safeUrl = encodeURIComponent(url);
        const hintPanel = mk.aside({
          class: "ref-hint",
          id: `ref-hint-for-${safeUrl}`,
          "data-for": url,
          "aria-labelled-by": `ref-hint-for-${safeUrl}`,
        },
          mk.ul({},
            dfnTextElements,
            mk.li({},
              mk.b({}, "URL: "),
              mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
              mk.b({}, "Type: "),
              mk.span({}, `${ref.type}`),
            ),
            mk.li({},
              mk.b({}, "Spec: "),
              mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
          ),
        );
        hintPanel.forLink = link;
        setupRefHintEventListeners(link, hintPanel);
        return hintPanel;
      }

      function hideAllRefHints() {
        queryAll(".ref-hint").forEach(el => hideRefHint(el));
      }

      function hideRefHint(refHint) {
        const link = refHint.forLink;
        link.setAttribute("aria-expanded", "false");
        if (refHint.teardownEventListeners) {
          refHint.teardownEventListeners();
        }
        refHint.remove();
      }

      function showRefHint(link) {
        if (link.classList.contains("dfn-link")) return;
        const url = link.getAttribute("href");
        const ref = refsData[url];
        if (!ref) return;

        hideAllRefHints(); // Only display one at this time.

        const refHint = mkRefHint(link, ref);
        append(document.body, refHint);
        link.setAttribute("aria-expanded", "true");
        positionRefHint(refHint);
      }

      function setupRefHintEventListeners(link, refHint) {
        if (refHint.teardownEventListeners) return;
        // Add event handlers to hide the refHint after the user moves away
        // from both the link and refHint, if not hovering either within one second.
        let timeout = null;
        const startHidingRefHint = (event) => {
          if (timeout) {
            clearTimeout(timeout);
          }
          timeout = setTimeout(() => {
            hideRefHint(refHint);
          }, 1000);
        }
        const resetHidingRefHint = (event) => {
          if (timeout) clearTimeout(timeout);
          timeout = null;
        };
        link.addEventListener("mouseleave", startHidingRefHint);
        link.addEventListener("mouseenter", resetHidingRefHint);
        link.addEventListener("blur", startHidingRefHint);
        link.addEventListener("focus", resetHidingRefHint);
        refHint.addEventListener("mouseleave", startHidingRefHint);
        refHint.addEventListener("mouseenter", resetHidingRefHint);
        refHint.addEventListener("blur", startHidingRefHint);
        refHint.addEventListener("focus", resetHidingRefHint);

        refHint.teardownEventListeners = () => {
          // remove event listeners
          resetHidingRefHint();
          link.removeEventListener("mouseleave", startHidingRefHint);
          link.removeEventListener("mouseenter", resetHidingRefHint);
          link.removeEventListener("blur", startHidingRefHint);
          link.removeEventListener("focus", resetHidingRefHint);
          refHint.removeEventListener("mouseleave", startHidingRefHint);
          refHint.removeEventListener("mouseenter", resetHidingRefHint);
          refHint.removeEventListener("blur", startHidingRefHint);
          refHint.removeEventListener("focus", resetHidingRefHint);
        };
      }

      function positionRefHint(refHint) {
        const link = refHint.forLink;
        const linkPos = getBounds(link);
        refHint.style.top = linkPos.bottom + "px";
        refHint.style.left = linkPos.left + "px";

        const panelPos = refHint.getBoundingClientRect();
        const panelMargin = 8;
        const maxRight = document.body.parentNode.clientWidth - panelMargin;
        if (panelPos.right > maxRight) {
          const overflowAmount = panelPos.right - maxRight;
          const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
          refHint.style.left = newLeft + "px";
        }
      }

      // TODO: shared util
      // Returns the root-level absolute position {left and top} of element.
      function getBounds(el, relativeTo = document.body) {
        const relativeRect = relativeTo.getBoundingClientRect();
        const elRect = el.getBoundingClientRect();
        const top = elRect.top - relativeRect.top;
        const left = elRect.left - relativeRect.left;
        return {
          top,
          left,
          bottom: top + elRect.height,
          right: left + elRect.width,
        }
      }

      function showRefHintListener(e) {
        // If the target isn't in a link (or is a link),
        // just ignore it.
        let link = e.target.closest("a");
        if (!link) return;

        // If the target is in a ref-hint panel
        // (aka a link in the already-open one),
        // also just ignore it.
        if (link.closest(".ref-hint")) return;

        // Otherwise, show the panel for the link.
        showRefHint(link);
      }

      function hideAllHintsListener(e) {
        // If the click is inside a ref-hint panel, ignore it.
        if (e.target.closest(".ref-hint")) return;
        // Otherwise, close all the current panels.
        hideAllRefHints();
      }

      document.addEventListener("DOMContentLoaded", () => {
        document.body.addEventListener("mousedown", showRefHintListener);
        document.body.addEventListener("focus", showRefHintListener);

        document.body.addEventListener("click", hideAllHintsListener);
      });

      window.addEventListener("resize", () => {
        // Hide any open ref hint.
        hideAllRefHints();
      });
    }
  </script>
  <script>/* Boilerplate: script-var-click-highlighting */
    "use strict";
    {
      /*
      Color-choosing design:
      
      * Colors are ordered by goodness.
      * On clicking a var, give it the earliest color
          with the lowest usage in the algorithm.
      * On re-clicking, re-use the var's most recent color
          if that's not currently being used elsewhere.
      */

      const COLOR_COUNT = 7;

      document.addEventListener("click", e => {
        if (e.target.nodeName == "VAR") {
          highlightSameAlgoVars(e.target);
        }
      });

      function highlightSameAlgoVars(v) {
        // Find the algorithm container.
        let algoContainer = findAlgoContainer(v);

        // Not highlighting document-global vars,
        // too likely to be unrelated.
        if (algoContainer == null) return;

        const varName = nameFromVar(v);
        if (!v.hasAttribute("data-var-color")) {
          const newColor = chooseHighlightColor(algoContainer, v);
          for (const el of algoContainer.querySelectorAll("var")) {
            if (nameFromVar(el) == varName) {
              el.setAttribute("data-var-color", newColor);
              el.setAttribute("data-var-last-color", newColor);
            }
          }
        } else {
          for (const el of algoContainer.querySelectorAll("var")) {
            if (nameFromVar(el) == varName) {
              el.removeAttribute("data-var-color");
            }
          }
        }
      }
      function findAlgoContainer(el) {
        while (el != document.body) {
          if (el.hasAttribute("data-algorithm")) return el;
          el = el.parentNode;
        }
        return null;
      }
      function nameFromVar(el) {
        return el.textContent.replace(/(\s|\xa0)+/g, " ").trim();
      }
      function colorCountsFromContainer(container) {
        const namesFromColor = Array.from({ length: COLOR_COUNT }, x => new Set());
        for (let v of container.querySelectorAll("var[data-var-color]")) {
          let color = +v.getAttribute("data-var-color");
          namesFromColor[color].add(nameFromVar(v));
        }

        return namesFromColor.map(x => x.size);
      }
      function leastUsedColor(colors) {
        // Find the earliest color with the lowest count.
        let minCount = Infinity;
        let minColor = null;
        for (var i = 0; i < colors.length; i++) {
          if (colors[i] < minCount) {
            minColor = i;
            minCount = colors[i];
          }
        }
        return minColor;
      }
      function chooseHighlightColor(container, v) {
        const colorCounts = colorCountsFromContainer(container);
        if (v.hasAttribute("data-var-last-color")) {
          let color = +v.getAttribute("data-var-last-color");
          if (colorCounts[color] == 0) return color;
        }
        return leastUsedColor(colorCounts);
      }
    }
  </script>
  <script src="https://htmlspecs.com/dropdown.js"></script>