<!doctype html>
<html lang="ja-JP">

<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>CSS レイアウト API レベル 1</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <meta content="WD" name="w3c-status">
  <link href="https://www.w3.org/TR/css-layout-api-1/default.css" rel="stylesheet" type="text/css">
  <meta content="Bikeshed version 1760a0346ebf3096d8d47b818b15ffcad41e99a0" name="generator">
  <link href="https://www.w3.org/TR/css-layout-api-1/" rel="canonical">
  <style>
    /* Put nice boxes around each algorithm. */
    [data-algorithm]:not(.heading) {
      padding: .5em;
      border: thin solid #ddd;
      border-radius: .5em;
      margin: .5em calc(-0.5em - 1px);
    }

    [data-algorithm]:not(.heading)> :first-child {
      margin-top: 0;
    }

    [data-algorithm]:not(.heading)> :last-child {
      margin-bottom: 0;
    }
  </style>
  <style>
    /* style-md-lists */

    /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
    [data-md]> :first-child {
      margin-top: 0;
    }

    [data-md]> :last-child {
      margin-bottom: 0;
    }
  </style>
  <style>
    /* style-selflinks */

    .heading,
    .issue,
    .note,
    .example,
    li,
    dt {
      position: relative;
    }

    a.self-link {
      position: absolute;
      top: 0;
      left: calc(-1 * (3.5rem - 26px));
      width: calc(3.5rem - 26px);
      height: 2em;
      text-align: center;
      border: none;
      transition: opacity .2s;
      opacity: .5;
    }

    a.self-link:hover {
      opacity: 1;
    }

    .heading>a.self-link {
      font-size: 83%;
    }

    li>a.self-link {
      left: calc(-1 * (3.5rem - 26px) - 2em);
    }

    dfn>a.self-link {
      top: auto;
      left: auto;
      opacity: 0;
      width: 1.5em;
      height: 1.5em;
      background: gray;
      color: white;
      font-style: normal;
      transition: opacity .2s, background-color .2s, color .2s;
    }

    dfn:hover>a.self-link {
      opacity: 1;
    }

    dfn>a.self-link:hover {
      color: black;
    }

    a.self-link::before {
      content: "¶";
    }

    .heading>a.self-link::before {
      content: "§";
    }

    dfn>a.self-link::before {
      content: "#";
    }
  </style>
  <style>
    /* style-counters */

    body {
      counter-reset: example figure issue;
    }

    .issue {
      counter-increment: issue;
    }

    .issue:not(.no-marker)::before {
      content: "Issue " counter(issue);
    }

    .example {
      counter-increment: example;
    }

    .example:not(.no-marker)::before {
      content: "Example " counter(example);
    }

    .invalid.example:not(.no-marker)::before,
    .illegal.example:not(.no-marker)::before {
      content: "Invalid Example" counter(example);
    }

    figcaption {
      counter-increment: figure;
    }

    figcaption:not(.no-marker)::before {
      content: "Figure " counter(figure) " ";
    }
  </style>
  <style>
    /* style-autolinks */

    .css.css,
    .property.property,
    .descriptor.descriptor {
      color: #005a9c;
      font-size: inherit;
      font-family: inherit;
    }

    .css::before,
    .property::before,
    .descriptor::before {
      content: "‘";
    }

    .css::after,
    .property::after,
    .descriptor::after {
      content: "’";
    }

    .property,
    .descriptor {
      /* Don't wrap property and descriptor names */
      white-space: nowrap;
    }

    .type {
      /* CSS value <type> */
      font-style: italic;
    }

    pre .property::before,
    pre .property::after {
      content: "";
    }

    [data-link-type="property"]::before,
    [data-link-type="propdesc"]::before,
    [data-link-type="descriptor"]::before,
    [data-link-type="value"]::before,
    [data-link-type="function"]::before,
    [data-link-type="at-rule"]::before,
    [data-link-type="selector"]::before,
    [data-link-type="maybe"]::before {
      content: "‘";
    }

    [data-link-type="property"]::after,
    [data-link-type="propdesc"]::after,
    [data-link-type="descriptor"]::after,
    [data-link-type="value"]::after,
    [data-link-type="function"]::after,
    [data-link-type="at-rule"]::after,
    [data-link-type="selector"]::after,
    [data-link-type="maybe"]::after {
      content: "’";
    }

    [data-link-type].production::before,
    [data-link-type].production::after,
    .prod [data-link-type]::before,
    .prod [data-link-type]::after {
      content: "";
    }

    [data-link-type=element],
    [data-link-type=element-attr] {
      font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
      font-size: .9em;
    }

    [data-link-type=element]::before {
      content: "<"
    }

    [data-link-type=element]::after {
      content: ">"
    }

    [data-link-type=biblio] {
      white-space: pre;
    }
  </style>
  <style>
    /* style-dfn-panel */

    .dfn-panel {
      position: absolute;
      z-index: 35;
      height: auto;
      width: -webkit-fit-content;
      width: fit-content;
      max-width: 300px;
      max-height: 500px;
      overflow: auto;
      padding: 0.5em 0.75em;
      font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
      background: #DDDDDD;
      color: black;
      border: outset 0.2em;
    }

    .dfn-panel:not(.on) {
      display: none;
    }

    .dfn-panel * {
      margin: 0;
      padding: 0;
      text-indent: 0;
    }

    .dfn-panel>b {
      display: block;
    }

    .dfn-panel a {
      color: black;
    }

    .dfn-panel a:not(:hover) {
      text-decoration: none !important;
      border-bottom: none !important;
    }

    .dfn-panel>b+b {
      margin-top: 0.25em;
    }

    .dfn-panel ul {
      padding: 0;
    }

    .dfn-panel li {
      list-style: inside;
    }

    .dfn-panel.activated {
      display: inline-block;
      position: fixed;
      left: .5em;
      bottom: 2em;
      margin: 0 auto;
      max-width: calc(100vw - 1.5em - .4em - .5em);
      max-height: 30vh;
    }

    .dfn-paneled {
      cursor: pointer;
    }
  </style>
  <style>
    /* style-syntax-highlighting */
    pre.idl.highlight {
      color: #708090;
    }

    .highlight:not(.idl) {
      background: hsl(24, 20%, 95%);
    }

    code.highlight {
      padding: .1em;
      border-radius: .3em;
    }

    pre.highlight,
    pre>code.highlight {
      display: block;
      padding: 1em;
      margin: .5em 0;
      overflow: auto;
      border-radius: 0;
    }

    .highlight .c {
      color: #708090
    }

    /* Comment */
    .highlight .k {
      color: #990055
    }

    /* Keyword */
    .highlight .l {
      color: #000000
    }

    /* Literal */
    .highlight .n {
      color: #0077aa
    }

    /* Name */
    .highlight .o {
      color: #999999
    }

    /* Operator */
    .highlight .p {
      color: #999999
    }

    /* Punctuation */
    .highlight .cm {
      color: #708090
    }

    /* Comment.Multiline */
    .highlight .cp {
      color: #708090
    }

    /* Comment.Preproc */
    .highlight .c1 {
      color: #708090
    }

    /* Comment.Single */
    .highlight .cs {
      color: #708090
    }

    /* Comment.Special */
    .highlight .kc {
      color: #990055
    }

    /* Keyword.Constant */
    .highlight .kd {
      color: #990055
    }

    /* Keyword.Declaration */
    .highlight .kn {
      color: #990055
    }

    /* Keyword.Namespace */
    .highlight .kp {
      color: #990055
    }

    /* Keyword.Pseudo */
    .highlight .kr {
      color: #990055
    }

    /* Keyword.Reserved */
    .highlight .kt {
      color: #990055
    }

    /* Keyword.Type */
    .highlight .ld {
      color: #000000
    }

    /* Literal.Date */
    .highlight .m {
      color: #000000
    }

    /* Literal.Number */
    .highlight .s {
      color: #a67f59
    }

    /* Literal.String */
    .highlight .na {
      color: #0077aa
    }

    /* Name.Attribute */
    .highlight .nc {
      color: #0077aa
    }

    /* Name.Class */
    .highlight .no {
      color: #0077aa
    }

    /* Name.Constant */
    .highlight .nd {
      color: #0077aa
    }

    /* Name.Decorator */
    .highlight .ni {
      color: #0077aa
    }

    /* Name.Entity */
    .highlight .ne {
      color: #0077aa
    }

    /* Name.Exception */
    .highlight .nf {
      color: #0077aa
    }

    /* Name.Function */
    .highlight .nl {
      color: #0077aa
    }

    /* Name.Label */
    .highlight .nn {
      color: #0077aa
    }

    /* Name.Namespace */
    .highlight .py {
      color: #0077aa
    }

    /* Name.Property */
    .highlight .nt {
      color: #669900
    }

    /* Name.Tag */
    .highlight .nv {
      color: #222222
    }

    /* Name.Variable */
    .highlight .ow {
      color: #999999
    }

    /* Operator.Word */
    .highlight .mb {
      color: #000000
    }

    /* Literal.Number.Bin */
    .highlight .mf {
      color: #000000
    }

    /* Literal.Number.Float */
    .highlight .mh {
      color: #000000
    }

    /* Literal.Number.Hex */
    .highlight .mi {
      color: #000000
    }

    /* Literal.Number.Integer */
    .highlight .mo {
      color: #000000
    }

    /* Literal.Number.Oct */
    .highlight .sb {
      color: #a67f59
    }

    /* Literal.String.Backtick */
    .highlight .sc {
      color: #a67f59
    }

    /* Literal.String.Char */
    .highlight .sd {
      color: #a67f59
    }

    /* Literal.String.Doc */
    .highlight .s2 {
      color: #a67f59
    }

    /* Literal.String.Double */
    .highlight .se {
      color: #a67f59
    }

    /* Literal.String.Escape */
    .highlight .sh {
      color: #a67f59
    }

    /* Literal.String.Heredoc */
    .highlight .si {
      color: #a67f59
    }

    /* Literal.String.Interpol */
    .highlight .sx {
      color: #a67f59
    }

    /* Literal.String.Other */
    .highlight .sr {
      color: #a67f59
    }

    /* Literal.String.Regex */
    .highlight .s1 {
      color: #a67f59
    }

    /* Literal.String.Single */
    .highlight .ss {
      color: #a67f59
    }

    /* Literal.String.Symbol */
    .highlight .vc {
      color: #0077aa
    }

    /* Name.Variable.Class */
    .highlight .vg {
      color: #0077aa
    }

    /* Name.Variable.Global */
    .highlight .vi {
      color: #0077aa
    }

    /* Name.Variable.Instance */
    .highlight .il {
      color: #000000
    }

    /* Literal.Number.Integer.Long */
  </style>
  <link href="https://www.w3.org/StyleSheets/TR/2016/W3C-WD" rel="stylesheet" type="text/css">

<body class="h-entry">
  <div class="head">
    <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
          src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
    <h1 class="p-name no-ref" id="title">CSSレイアウトAPI レベル1</h1>
    <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">W3C 初版公開作業草案,
        <time class="dt-updated" datetime="2018-04-12">2018年4月12日</time></span></h2>
    <div data-fill-with="spec-metadata">
      <dl>
        <dt>このバージョン:
        <dd><a class="u-url"
            href="https://www.w3.org/TR/2018/WD-css-layout-api-1-20180412/">https://www.w3.org/TR/2018/WD-css-layout-api-1-20180412/</a>
        <dt>最新公開バージョン:
        <dd><a href="https://www.w3.org/TR/css-layout-api-1/">https://www.w3.org/TR/css-layout-api-1/</a>
        <dt>編集者草案:
        <dd><a
            href="https://drafts.css-houdini.org/css-layout-api-1/">https://drafts.css-houdini.org/css-layout-api-1/</a>
        <dt>フィードバック:
        <dd><span><a
              href="mailto:public-houdini@w3.org?subject=%5Bcss-layout-api%5D%20YOUR%20TOPIC%20HERE">public-houdini@w3.org</a>
            件名欄に “<kbd>[css-layout-api] <i data-lt="">… メッセージのトピック …</i></kbd>” を記載してください (<a
              href="https://lists.w3.org/Archives/Public/public-houdini/" rel="discussion">アーカイブ</a>)</span>
        <dt>課題追跡:
        <dd><a href="https://github.com/w3c/css-houdini-drafts/issues/">GitHub</a>
        <dd><a href="#issues-index">仕様内インライン</a>
        <dt class="editor">編集者:
        <dd class="editor p-author h-card vcard" data-editor-id="69511"><a class="p-name fn u-email email"
            href="mailto:gwhit@microsoft.com">Greg Whitworth</a> (<span class="p-org org">Microsoft</span>)
        <dd class="editor p-author h-card vcard" data-editor-id="73001"><a class="p-name fn u-email email"
            href="mailto:ikilpatrick@chromium.org">Ian Kilpatrick</a> (<span class="p-org org">Google</span>)
        <dd class="editor p-author h-card vcard" data-editor-id="42199"><a class="p-name fn u-url url"
            href="http://xanthir.com/contact/">Tab Atkins-Bittner</a> (<span class="p-org org">Google</span>)
        <dd class="editor p-author h-card vcard" data-editor-id="47691"><a class="p-name fn u-email email"
            href="mailto:shanestephens@google.com">Shane Stephens</a> (<span class="p-org org">Google</span>)
        <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email"
            href="mailto:robert@ocallahan.org">Robert O'Callahan</a>
        <dd class="editor p-author h-card vcard" data-editor-id="49885"><a class="p-name fn u-email email"
            href="mailto:rossen.atanassov@microsoft.com">Rossen Atanassov</a> (<span class="p-org org">Microsoft</span>)
      </dl>
    </div>
    <div data-fill-with="warning"></div>
    <p class="copyright" data-fill-with="copyright"><a
        href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2018 <a
        href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
        href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a
        href="http://www.ercim.eu/"><abbr
          title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a
        href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a
        href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a
        href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a
        href="https://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply. </p>
    <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
    <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">概要</span></h2>
    <p>本仕様は、開発者が計算済みスタイルや<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box">ボックス</a>ツリーの変更に応じて
      <a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box-tree">ボックスツリー</a>をレイアウトできるAPIについて記述します。
    </p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">この文書のステータス</span></h2>
  <div data-fill-with="status">
    <p><em>このセクションは、公開時点での文書のステータスについて説明します。他の文書が本書に取って代わる場合があります。現在のW3C出版物および本技術報告の最新版は、<a
          href="https://www.w3.org/TR/">W3C技術報告インデックス（https://www.w3.org/TR/）</a>で確認できます。</em> </p>
    <p>本書は<b>初公開作業草案</b>です。</p>
    <p>初公開作業草案として公開されたことは、W3C会員による承認を意味しません。本書は草案であり、随時更新、置換、廃止される可能性があります。進行中の作業以外の文献として本書を引用するのは不適切です。</p>
    <p><a href="https://github.com/w3c/css-houdini-drafts/issues">GitHub Issues</a>にて仕様の議論を推奨します。
      イシュー登録時はタイトルに「css-layout-api」を含め、できれば
      「[css-layout-api] <i>…コメント概要…</i>」の形式でお願いします。
      すべてのイシューやコメントは<a href="https://lists.w3.org/Archives/Public/public-houdini-archive/">アーカイブ</a>されています。
    </p>
    <p>本書は<a href="https://www.w3.org/Style/CSS/members">CSS作業グループ</a>によって作成されました。</p>
    <p>本書は<a href="https://www.w3.org/Consortium/Patent-Policy/">W3C特許ポリシー</a>のもとで運営されるグループによって作成されています。W3Cは<a
        href="https://www.w3.org/2004/01/pp-impl/32061/status"
        rel="disclosure">グループ成果物に関する特許開示の公開リスト</a>を管理しています。このページには特許開示方法も記載されています。該当する特許について知っている場合は、<a
        href="https://www.w3.org/Consortium/Patent-Policy/#def-essential">必須クレーム</a>を含むと考えられる場合、<a
        href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">W3C特許ポリシー第6節</a>に従い開示してください。</p>
    <p>本書は<a id="w3c_process_revision"
        href="https://www.w3.org/2018/Process-20180201/">2018年2月1日版W3Cプロセス文書</a>に従って管理されています。</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
    <h2 class="no-num no-toc no-ref" id="contents">目次</h2>
    <ol class="toc" role="directory">
      <li><a href="#intro"><span class="secno">1</span> <span class="content">はじめに</span></a>
      <li>
        <a href="#layout-api-containers"><span class="secno">2</span> <span class="content">レイアウトAPIコンテナー</span></a>
        <ol class="toc">
          <li><a href="#painting"><span class="secno">2.1</span> <span class="content">レイアウトAPIコンテナーのペインティング</span></a>
          <li><a href="#layout-api-box-tree"><span class="secno">2.2</span> <span class="content">ボックスツリーの変換</span></a>
        </ol>
      <li>
        <a href="#layout-api-model-and-terminology"><span class="secno">3</span> <span
            class="content">レイアウトAPIのモデルと用語</span></a>
        <ol class="toc">
          <li>
            <a href="#layout-children"><span class="secno">3.1</span> <span class="content">レイアウトの子要素</span></a>
            <ol class="toc">
              <li><a href="#layout-child-box-tree"><span class="secno">3.1.1</span> <span
                    class="content">LayoutChildrenとボックスツリー</span></a>
            </ol>
          <li><a href="#layout-fragments"><span class="secno">3.2</span> <span class="content">レイアウトフラグメント</span></a>
          <li><a href="#intrinsic-sizes"><span class="secno">3.3</span> <span class="content">本来サイズ</span></a>
          <li><a href="#layout-constraints"><span class="secno">3.4</span> <span class="content">レイアウト制約</span></a>
          <li><a href="#breaking-and-fragmentation"><span class="secno">3.5</span> <span
                class="content">分割と断片化</span></a>
          <li><a href="#edges"><span class="secno">3.6</span> <span class="content">エッジ</span></a>
        </ol>
      <li>
        <a href="#interactions-with-other-modules"><span class="secno">4</span> <span
            class="content">他のモジュールとの相互作用</span></a>
        <ol class="toc">
          <li>
            <a href="#interaction-sizing"><span class="secno">4.1</span> <span class="content">サイズ指定</span></a>
            <ol class="toc">
              <li><a href="#interaction-sizing-positiong-layout"><span class="secno">4.1.1</span> <span
                    class="content">配置されたレイアウトのサイズ指定</span></a>
            </ol>
          <li><a href="#interaction-positioning"><span class="secno">4.2</span> <span class="content">配置</span></a>
          <li><a href="#interaction-overflow"><span class="secno">4.3</span> <span class="content">オーバーフロー</span></a>
          <li><a href="#interaction-fragmentation"><span class="secno">4.4</span> <span class="content">断片化</span></a>
          <li><a href="#interaction-alignment"><span class="secno">4.5</span> <span class="content">アラインメント</span></a>
        </ol>
      <li>
        <a href="#layout"><span class="secno">5</span> <span class="content">レイアウト</span></a>
        <ol class="toc">
          <li><a href="#concepts"><span class="secno">5.1</span> <span class="content">概念</span></a>
          <li><a href="#layout-invalidation"><span class="secno">5.2</span> <span class="content">レイアウトの無効化</span></a>
          <li><a href="#layout-worklet"><span class="secno">5.3</span> <span class="content">レイアウトワークレット</span></a>
          <li><a href="#registering-layout"><span class="secno">5.4</span> <span class="content">レイアウトの登録</span></a>
          <li>
            <a href="#layout-engine"><span class="secno">5.5</span> <span class="content">レイアウトエンジン</span></a>
            <ol class="toc">
              <li><a href="#request-objects"><span class="secno">5.5.1</span> <span
                    class="content">リクエストオブジェクト</span></a>
            </ol>
          <li>
            <a href="#performing-layout"><span class="secno">5.6</span> <span class="content">レイアウトの実行</span></a>
            <ol class="toc">
              <li><a href="#determining-intrinsic-sizes"><span class="secno">5.6.1</span> <span
                    class="content">内在サイズの決定</span></a>
              <li><a href="#generating-fragments"><span class="secno">5.6.2</span> <span
                    class="content">フラグメント生成</span></a>
              <li><a href="#utility-algorithms"><span class="secno">5.6.3</span> <span
                    class="content">ユーティリティアルゴリズム</span></a>
            </ol>
        </ol>
      <li><a href="#security-considerations"><span class="secno">6</span> <span class="content">セキュリティ考慮事項</span></a>
      <li><a href="#privacy-considerations"><span class="secno">7</span> <span class="content">プライバシー考慮事項</span></a>
      <li>
        <a href="#conformance"><span class="secno"></span> <span class="content">適合性</span></a>
        <ol class="toc">
          <li><a href="#conventions"><span class="secno"></span> <span class="content">文書の規約</span></a>
          <li><a href="#conformance-classes"><span class="secno"></span> <span class="content">適合性クラス</span></a>
          <li>
            <a href="#partial"><span class="secno"></span> <span class="content">部分実装</span></a>
            <ol class="toc">
              <li><a href="#conform-future-proofing"><span class="secno"></span> <span
                    class="content">不安定及び独自機能の実装について</span></a>
            </ol>
          <li><a href="#testing"><span class="secno"></span> <span class="content">非実験的実装</span></a>
        </ol>
      <li>
        <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
        <ol class="toc">
          <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">本仕様で定義されている用語</span></a>
          <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                class="content">参照によって定義される用語</span></a>
        </ol>
      <li>
        <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
        <ol class="toc">
          <li><a href="#normative"><span class="secno"></span> <span class="content">規範参照文献</span></a>
          <li><a href="#informative"><span class="secno"></span> <span class="content">参考情報</span></a>
        </ol>
      <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL索引</span></a>
      <li><a href="#issues-index"><span class="secno"></span> <span class="content">課題索引</span></a>
    </ol>
  </nav>
  <main>
    <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span
        class="content">はじめに</span><a class="self-link" href="#intro"></a></h2>
    <p><em>このセクションは規定的ではありません。</em></p>
    <p>CSSのレイアウト段階は、<a data-link-type="dfn" href="https://www.w3.org/TR/css3-break/#fragment"
        id="ref-for-fragment">フラグメント</a>を<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box-tree"
        id="ref-for-box-tree">ボックスツリー</a>から生成および配置する役割を持ちます。
    </p>
    <p>この仕様は、開発者が計算済みスタイルや<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box"
        id="ref-for-box">ボックス</a>ツリーの変更に応じて
      <a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box-tree"
        id="ref-for-box-tree①">ボックスツリー</a>をレイアウトできるAPIについて記述します。
    </p>
    <h2 class="heading settled" data-level="2" id="layout-api-containers"><span class="secno">2. </span><span
        class="content">レイアウトAPIコンテナー</span><a class="self-link" href="#layout-api-containers"></a></h2>
    <p>新しい<a href="https://www.w3.org/TR/css-values-3/#comb-one">alternative</a>値が
      <a class="production css" data-link-type="type" href="https://www.w3.org/TR/css-display-3/#typedef-display-inside"
        id="ref-for-typedef-display-inside"
        title="Expands to: flex | flow | grid | flow-root | table | ruby">&lt;display-inside></a>生成式に追加されます:
      <code>layout(<a class="production css" data-link-type="type" href="https://www.w3.org/TR/css3-values/#typedef-ident" id="ref-for-typedef-ident">&lt;ident></a>)</code>。
    </p>
    <dl>
      <dt><dfn class="dfn-paneled css" data-dfn-for="display" data-dfn-type="value" data-export=""
          id="valdef-display-layout">layout()</dfn>
      <dd> この値は要素に<a data-link-type="dfn" href="#layout-api-container"
          id="ref-for-layout-api-container">レイアウトAPIコンテナ</a>ボックスを生成させます。
    </dl>
    <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="layout-api-container">レイアウトAPIコンテナ</dfn>は、<a
        class="production css" data-link-type="type" href="https://www.w3.org/TR/css-display-3/#typedef-display-inside"
        id="ref-for-typedef-display-inside①"
        title="Expands to: flex | flow | grid | flow-root | table | ruby">&lt;display-inside></a>の<a
        data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-4/#computed-value"
        id="ref-for-computed-value">計算値</a>として<a class="css" data-link-type="maybe" href="#valdef-display-layout"
        id="ref-for-valdef-display-layout">layout()</a>を持つ要素によって生成されるボックスです。</p>
    <p><a data-link-type="dfn" href="#layout-api-container"
        id="ref-for-layout-api-container①">レイアウトAPIコンテナ</a>はその内容に対して新しい<dfn class="dfn-paneled" data-dfn-type="dfn"
        data-noexport=""
        id="layout-api-formatting-context">レイアウトAPI整形コンテキスト</dfn>を確立します。これはブロック整形コンテキストを確立するのと同様ですが、ブロックレイアウトの代わりに著者提供のレイアウトが使用されます。
      例えば、フロートはレイアウトAPIコンテナに侵入せず、コンテナのマージンは内容のマージンと折り畳まれません。</p>
    <p><a data-link-type="dfn" href="#layout-api-container"
        id="ref-for-layout-api-container②">レイアウトAPIコンテナ</a>の流れの中のすべての子は<dfn class="dfn-paneled" data-dfn-type="dfn"
        data-noexport="" id="layout-api-children">レイアウトAPI子要素</dfn>と呼ばれ、著者定義のレイアウトによってレイアウトされます。</p>
    <p><a data-link-type="dfn" href="#layout-api-container" id="ref-for-layout-api-container③">レイアウトAPIコンテナ</a>は内容に対して<a
        href="https://www.w3.org/TR/CSS2/visudet.html#containing-block-details">ブロックコンテナと全く同じように</a>包含ブロックを形成します。<a
        data-link-type="biblio" href="#biblio-css21">[CSS21]</a></p>
    <p class="note" role="note"><span>注:</span> 将来の仕様レベルでは包含ブロックの挙動を上書きする方法が追加される可能性があります。</p>
    <p><a class="property" data-link-type="propdesc" href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow"
        id="ref-for-propdef-overflow">overflow</a>プロパティは<a data-link-type="dfn" href="#layout-api-container"
        id="ref-for-layout-api-container④">レイアウトAPIコンテナ</a>に適用されます。詳細は<a href="#interaction-overflow">§4.3
        オーバーフロー</a>で説明します。
    </p>
    <p>レイアウトが完全に著者の裁量であるため、他のレイアウトモード（例：フレックス・ブロック）で使用されるプロパティは適用されない場合があります。例えば、著者が子要素の<a class="property"
        data-link-type="propdesc" href="https://www.w3.org/TR/CSS22/box.html#propdef-margin"
        id="ref-for-propdef-margin">margin</a>プロパティを尊重しない場合があります。</p>
    <h3 class="heading settled" data-level="2.1" id="painting"><span class="secno">2.1. </span><span
        class="content">レイアウトAPIコンテナのペインティング</span><a class="self-link" href="#painting"></a></h3>
    <p><a data-link-type="dfn" href="#layout-api-container"
        id="ref-for-layout-api-container⑤">レイアウトAPIコンテナ</a>の子要素は、インラインブロック<a data-link-type="biblio"
        href="#biblio-css21">[CSS21]</a>と全く同じように描画されますが、
      レイアウトメソッドから返される順序（<code
        class="idl"><a data-link-type="idl" href="#dom-fragmentresultoptions-childfragments" id="ref-for-dom-fragmentresultoptions-childfragments">childFragments</a></code>経由）が生の文書順の代わりに使用され、
      <a class="property" data-link-type="propdesc" href="https://www.w3.org/TR/css3-positioning/#propdef-z-index"
        id="ref-for-propdef-z-index">z-index</a>が<a class="css" data-link-type="maybe"
        href="https://www.w3.org/TR/css3-positioning/#valdef-z-index-auto"
        id="ref-for-valdef-z-index-auto">auto</a>以外の場合、<a class="property" data-link-type="propdesc"
        href="https://www.w3.org/TR/css3-positioning/#propdef-position" id="ref-for-propdef-position">position</a>が<a
        class="css" data-link-type="maybe" href="https://www.w3.org/TR/css3-positioning/#valdef-position-static"
        id="ref-for-valdef-position-static">static</a>でもスタッキングコンテキストが作成されます。
    </p>
    <h3 class="heading settled" data-level="2.2" id="layout-api-box-tree"><span class="secno">2.2. </span><span
        class="content">ボックスツリーの変換</span><a class="self-link" href="#layout-api-box-tree"></a></h3>
    <p><a data-link-type="dfn" href="#layout-api-children" id="ref-for-layout-api-children">レイアウトAPI子要素</a>は、<a
        data-link-type="dfn" href="#document-layout-definition-layout-options"
        id="ref-for-document-layout-definition-layout-options">layout
        options'</a>の<code
        class="idl"><a data-link-type="idl" href="#dom-layoutoptions-childdisplay" id="ref-for-dom-layoutoptions-childdisplay">childDisplay</a></code>
      （クラスの<code>layoutOptions</code>で設定）値によって異なる振る舞いをします。</p>
    <p><a data-link-type="dfn" href="#document-layout-definition-layout-options"
        id="ref-for-document-layout-definition-layout-options①">layout options'</a>の<code
        class="idl"><a data-link-type="idl" href="#dom-layoutoptions-childdisplay" id="ref-for-dom-layoutoptions-childdisplay①">childDisplay</a></code>
      の値が<code>"block"</code>の場合、その子の<a class="property" data-link-type="propdesc"
        href="https://www.w3.org/TR/css-ruby-1/#propdef-display" id="ref-for-propdef-display">display</a>値は<a
        data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#blockify"
        id="ref-for-blockify">ブロック化</a>されます。これは<a data-link-type="dfn"
        href="https://www.w3.org/TR/css-flexbox-1/#flex-container" id="ref-for-flex-container">フレックスコンテナ</a>や<a
        data-link-type="dfn" href="https://www.w3.org/TR/css-grid-1/#grid-container"
        id="ref-for-grid-container">グリッドコンテナ</a>の子と似ています。
      詳細は<a data-link-type="biblio" href="#biblio-css3-display">[css3-display]</a>を参照してください。</p>
    <p><a data-link-type="dfn" href="#document-layout-definition-layout-options"
        id="ref-for-document-layout-definition-layout-options②">layout options'</a>の<code
        class="idl"><a data-link-type="idl" href="#dom-layoutoptions-childdisplay" id="ref-for-dom-layoutoptions-childdisplay②">childDisplay</a></code>
      の値が<code>"normal"</code>の場合、<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#blockify"
        id="ref-for-blockify①">ブロック化</a>は行われません。
      代わりに、<a class="production css" data-link-type="type"
        href="https://www.w3.org/TR/css-display-3/#typedef-display-outside" id="ref-for-typedef-display-outside"
        title="Expands to: inline | run-in | block">&lt;display-outside></a>の<a data-link-type="dfn"
        href="https://www.w3.org/TR/css-cascade-4/#computed-value" id="ref-for-computed-value①">計算値</a>が<a class="css"
        data-link-type="maybe" href="https://www.w3.org/TR/css-display-3/#valdef-display-inline"
        id="ref-for-valdef-display-inline">inline</a>（<a data-link-type="dfn"
        href="https://www.w3.org/TR/css-inline-3/#root-inline-box" id="ref-for-root-inline-box">ルートインラインボックス</a>）の場合、
      <code
        class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment">LayoutFragment</a></code>が各行を表す形で
      <code
        class="idl"><a data-link-type="idl" href="#dom-layoutchild-layoutnextfragment" id="ref-for-dom-layoutchild-layoutnextfragment">layoutNextFragment()</a></code>呼び出し時に生成されます。
    </p>
    <p class="note" role="note"><span>注:</span> これにより著者は各行の利用可能なインラインサイズを調整し、個別に行を配置できます。</p>
    <p><code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild">LayoutChild</a></code>が表す<a
        data-link-type="dfn" href="https://www.w3.org/TR/css-inline-3/#root-inline-box"
        id="ref-for-root-inline-box①">ルートインラインボックス</a>の子にも追加の変換があります。</p>
    <ul>
      <li data-md="">
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#block-level"
            id="ref-for-block-level">ブロックレベル</a>ボックスが<a data-link-type="dfn"
            href="https://www.w3.org/TR/css-display-3/#inline-level" id="ref-for-inline-level">インラインレベル</a>ボックス内にある場合、
          <a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#inlinify"
            id="ref-for-inlinify">インライン化</a>されます。つまり、<a class="production css" data-link-type="type"
            href="https://www.w3.org/TR/css-display-3/#typedef-display-outside" id="ref-for-typedef-display-outside①"
            title="Expands to: inline | run-in | block">&lt;display-outside></a>が<a class="css" data-link-type="maybe"
            href="https://www.w3.org/TR/css-display-3/#valdef-display-inline"
            id="ref-for-valdef-display-inline①">inline</a>に設定されます。
        </p>
      <li data-md="">
        <p><a data-link-type="dfn" href="https://drafts.csswg.org/css-page-floats-3/#float"
            id="ref-for-float">float</a>が<a data-link-type="dfn"
            href="https://www.w3.org/TR/css-display-3/#inline-level" id="ref-for-inline-level①">インラインレベル</a>ボックス内にある場合、
          フローから除外されません。代わりに、流れ内として扱われ、<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#inlinify"
            id="ref-for-inlinify①">インライン化</a>されます。</p>
    </ul>
    <p>上記いずれの場合も、子要素は<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#atomic-inline"
        id="ref-for-atomic-inline">アトミックインライン</a>となります。</p>
    <p class="note" role="note"><span>注:</span> ユーザーエージェントは<a data-link-type="dfn"
        href="https://www.w3.org/TR/css-display-3/#block-level"
        id="ref-for-block-level①">ブロックレベル</a>ボックスに遭遇した際、インライン分割や断片化は行いません。</p>
    <div class="note" role="note">
      注: 以下の例では "inline-span" が単一の<code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild①">LayoutChild</a></code>として表され、
      "block"と"float"は両方とも<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#atomic-inline"
        id="ref-for-atomic-inline①">アトミックインライン</a>となります。
      <pre class="lang-html highlight"><span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"inline-span"</span><span class="p">></span>
  Text
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"block"</span><span class="p">>&lt;/</span><span class="nt">div</span><span class="p">></span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"float"</span><span class="p">>&lt;/</span><span class="nt">div</span><span class="p">></span>
  Text
<span class="p">&lt;/</span><span class="nt">span</span><span class="p">></span>
</pre>
    </div>
    <h2 class="heading settled" data-level="3" id="layout-api-model-and-terminology"><span class="secno">3. </span><span
        class="content">レイアウトAPIのモデルと用語</span><a class="self-link" href="#layout-api-model-and-terminology"></a></h2>
    <p>このセクションでは著者が利用できるレイアウトAPIの概要を説明します。</p>
    <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport=""
        id="current-layout">現在のレイアウト</dfn>は、現在レイアウト処理を行っている<a data-link-type="dfn"
        href="https://www.w3.org/TR/css-display-3/#box" id="ref-for-box3">ボックス</a>のレイアウトアルゴリズムです。</p>
    <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="parent-layout">親レイアウト</dfn>は、<a
        data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box"
        id="ref-for-box2">ボックス</a>の直接の親（現在のレイアウトの実行を要求しているレイアウトアルゴリズム）です。</p>
    <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="child-layout">子レイアウト</dfn>は、<code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild②">LayoutChild</a></code>のレイアウトアルゴリズムです。
    </p>
    <h3 class="heading settled" data-level="3.1" id="layout-children"><span class="secno">3.1. </span><span
        class="content">レイアウトの子要素</span><a class="self-link" href="#layout-children"></a></h3>
    <pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="layoutchild"><code>LayoutChild</code></dfn> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/css-typed-om-1/#stylepropertymapreadonly" id="ref-for-stylepropertymapreadonly">StylePropertyMapReadOnly</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="StylePropertyMapReadOnly" href="#dom-layoutchild-stylemap" id="ref-for-dom-layoutchild-stylemap">styleMap</a>;

    <a class="n" data-link-type="idl-name" href="#intrinsicsizesrequest" id="ref-for-intrinsicsizesrequest">IntrinsicSizesRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-layoutchild-intrinsicsizes" id="ref-for-dom-layoutchild-intrinsicsizes">intrinsicSizes</a>();
    <a class="n" data-link-type="idl-name" href="#layoutfragmentrequest" id="ref-for-layoutfragmentrequest">LayoutFragmentRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-layoutchild-layoutnextfragment" id="ref-for-dom-layoutchild-layoutnextfragment①">layoutNextFragment</a>(<a class="n" data-link-type="idl-name" href="#layoutconstraints" id="ref-for-layoutconstraints">LayoutConstraints</a> <dfn class="nv idl-code" data-dfn-for="LayoutChild/layoutNextFragment(constraints, breakToken)" data-dfn-type="argument" data-export="" id="dom-layoutchild-layoutnextfragment-constraints-breaktoken-constraints"><code>constraints</code><a class="self-link" href="#dom-layoutchild-layoutnextfragment-constraints-breaktoken-constraints"></a></dfn>, <a class="n" data-link-type="idl-name" href="#childbreaktoken" id="ref-for-childbreaktoken">ChildBreakToken</a> <dfn class="nv idl-code" data-dfn-for="LayoutChild/layoutNextFragment(constraints, breakToken)" data-dfn-type="argument" data-export="" id="dom-layoutchild-layoutnextfragment-constraints-breaktoken-breaktoken"><code>breakToken</code><a class="self-link" href="#dom-layoutchild-layoutnextfragment-constraints-breaktoken-breaktoken"></a></dfn>);
};
</pre>
    <p><code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild③">LayoutChild</a></code>は内部スロットを持ちます:
    </p>
    <ul>
      <li data-md="">
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="LayoutChild" data-dfn-type="attribute" data-export=""
            id="dom-layoutchild-box-slot"><code>[[box]]</code></dfn> CSS<a data-link-type="dfn"
            href="https://www.w3.org/TR/css-display-3/#box" id="ref-for-box③">ボックス</a>。</p>
      <li data-md="">
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="LayoutChild" data-dfn-type="attribute" data-export=""
            id="dom-layoutchild-stylemap-slot"><code>[[styleMap]]</code></dfn> <code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-typed-om-1/#stylepropertymapreadonly" id="ref-for-stylepropertymapreadonly①">StylePropertyMapReadOnly</a></code>で、
          子要素の計算済みスタイルです。これは<code>childInputProperties</code>に記載されているプロパティのみで構成されます。
        </p>
    </ul>
    <hr>
    <p><code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild④">LayoutChild</a></code>は、CSSによって生成された<a
        data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box"
        id="ref-for-box④">ボックス</a>（レイアウト前）を表します。（ボックスはすべて<a class="property" data-link-type="propdesc"
        href="https://www.w3.org/TR/css-ruby-1/#propdef-display" id="ref-for-propdef-display①">display</a>の計算値が<a
        class="css" data-link-type="maybe" href="https://www.w3.org/TR/css-display-3/#valdef-display-none"
        id="ref-for-valdef-display-none">none</a>以外です）。
    </p>
    <p><code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild⑤">LayoutChild</a></code>は自体にレイアウト情報（インラインサイズやブロックサイズなど）は持たず、<code
        class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment①">LayoutFragment</a></code>（レイアウト情報を持つ）を生成するために使われます。
    </p>
    <p>著者はこのAPIで<code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild⑥">LayoutChild</a></code>を構築することはできません。これはレンダリングエンジンの別の段階（スタイル解決後）で行われます。
    </p>
    <p><code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild⑦">LayoutChild</a></code>は以下によって生成されます:
    </p>
    <ul>
      <li data-md="">
        <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element"
            id="ref-for-concept-element">要素</a>。</p>
      <li data-md="">
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-inline-3/#root-inline-box"
            id="ref-for-root-inline-box②">ルートインラインボックス</a>。</p>
      <li data-md="">
        <p><a class="css" data-link-type="selector" href="https://www.w3.org/TR/css-pseudo-4/#selectordef-before"
            id="ref-for-selectordef-before">::before</a>や<a class="css" data-link-type="selector"
            href="https://www.w3.org/TR/css-pseudo-4/#selectordef-after" id="ref-for-selectordef-after">::after</a>
          疑似要素。</p>
        <p class="note" role="note"><span>注:</span> <a class="css" data-link-type="selector"
            href="https://www.w3.org/TR/css-pseudo-4/#selectordef-first-letter"
            id="ref-for-selectordef-first-letter">::first-letter</a>や<a class="css" data-link-type="selector"
            href="https://www.w3.org/TR/css-pseudo-4/#selectordef-first-line"
            id="ref-for-selectordef-first-line">::first-line</a>のような他の疑似要素は、レイアウト目的の<code
            class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild⑧">LayoutChild</a></code>を生成しません。これらはテキストノードへの追加スタイル情報です。
        </p>
      <li data-md="">
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#anonymous"
            id="ref-for-anonymous">匿名ボックス</a>。例えば、匿名ボックスは以下の結果として挿入される場合があります:</p>
        <ul>
          <li data-md="">
            <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#blockify"
                id="ref-for-blockify②">ブロック化</a>されたテキストノード。（より一般的には、<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-inline-3/#root-inline-box"
                id="ref-for-root-inline-box③">ルートインラインボックス</a>が<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-display-3/#blockify" id="ref-for-blockify③">ブロック化</a>された場合）。</p>
          <li data-md="">
            <p>親に<a class="css" data-link-type="propdesc" href="https://www.w3.org/TR/css-ruby-1/#propdef-display"
                id="ref-for-propdef-display②">display:
                table</a>を持たない<a class="css" data-link-type="propdesc"
                href="https://www.w3.org/TR/css-ruby-1/#propdef-display" id="ref-for-propdef-display③">display:
                table-cell</a>の要素。</p>
        </ul>
    </ul>
    <div class="note" role="note">
      注: 以下の例は3つの<code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild⑨">LayoutChild</a></code>に分割されます:
      <pre class="lang-html highlight"><span class="p">&lt;</span><span class="nt">style</span><span class="p">></span>
  <span class="p">#</span><span class="nn">box</span><span class="p">::</span><span class="nd">before</span> <span class="p">{</span> <span class="k">content</span><span class="p">:</span> <span class="s1">'hello!'</span><span class="p">;</span> <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">></span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"box"</span><span class="p">></span>A block level box with text.<span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
<span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">"..."</span> <span class="p">/></span>
</pre>
    </div>
    <div class="note" role="note">
      注: 以下の例は単一の<code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild①⓪">LayoutChild</a></code>にまとめられます（共通の<a
        data-link-type="dfn" href="https://www.w3.org/TR/css-inline-3/#root-inline-box"
        id="ref-for-root-inline-box④">ルートインラインボックス</a>を共有しているため）:
      <pre class="lang-html highlight">This is a next node, <span class="p">&lt;</span><span class="nt">span</span><span class="p">></span>with some additional styling,
that may<span class="p">&lt;/</span><span class="nt">span</span><span class="p">></span> break over<span class="p">&lt;</span><span class="nt">br</span><span class="p">></span>multiple lines.
</pre>
    </div>
    <p>複数の非<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#atomic-inline"
        id="ref-for-atomic-inline②">アトミックインライン</a>は同じ<code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild①①">LayoutChild</a></code>にまとめられ、レンダリングエンジンが要素間でテキストシェーピングを行えるようにします。
    </p>
    <div class="note" role="note">
      注: 以下の例は1つの<code
        class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment②">LayoutFragment</a></code>を生成しますが、
      3つの非<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#atomic-inline"
        id="ref-for-atomic-inline③">アトミックインライン</a>から構成されます:
      <pre class="lang-html highlight">ع<span class="p">&lt;</span><span class="nt">span</span> <span class="na">style</span><span class="o">=</span><span class="s">"color: blue"</span><span class="p">></span>ع<span class="p">&lt;/</span><span class="nt">span</span><span class="p">></span>ع
</pre>
    </div>
    <p>現在レイアウト中のボックスの子要素を表す<code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild①②">LayoutChild</a></code>の配列がレイアウトメソッドに渡されます。
    </p>
    <div class="algorithm" data-algorithm="styleMap">
      <dfn class="dfn-paneled idl-code" data-dfn-for="LayoutChild" data-dfn-type="attribute" data-export=""
        id="dom-layoutchild-stylemap"><code>styleMap</code></dfn>は、<code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild①③">LayoutChild</a></code>
      <var>this</var>から取得する場合、ユーザーエージェントは以下の手順を実行しなければなりません:
      <ol>
        <li data-md="">
          <p><var>this</var>の<code
              class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-typed-om-1/#stylepropertymapreadonly" id="ref-for-stylepropertymapreadonly②">StylePropertyMapReadOnly</a></code>（<code
              class="idl"><a data-link-type="idl" href="#dom-layoutchild-stylemap-slot" id="ref-for-dom-layoutchild-stylemap-slot">[[styleMap]]</a></code>内部スロット）を返す。
          </p>
      </ol>
    </div>
    <div class="algorithm" data-algorithm="layoutNextFragment(constraints, breakToken)">
      <dfn class="dfn-paneled idl-code" data-dfn-for="LayoutChild" data-dfn-type="method" data-export=""
        id="dom-layoutchild-layoutnextfragment"><code>layoutNextFragment(<var>constraints</var>, <var>breakToken</var>)</code></dfn>
      メソッドが<code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild①④">LayoutChild</a></code>
      <var>this</var>で呼び出された場合、ユーザーエージェントは以下の手順を実行しなければなりません:
      <ol>
        <li data-md="">
          <p><var>request</var>を新しい<code
              class="idl"><a data-link-type="idl" href="#layoutfragmentrequest" id="ref-for-layoutfragmentrequest①">LayoutFragmentRequest</a></code>として生成し、内部スロットを持つ:
          </p>
          <ul>
            <li data-md="">
              <p><code
                  class="idl"><a data-link-type="idl" href="#dom-layoutfragmentrequest-layoutchild-slot" id="ref-for-dom-layoutfragmentrequest-layoutchild-slot">[[layoutChild]]</a></code>
                に<var>this</var>を設定。</p>
            <li data-md="">
              <p><code
                  class="idl"><a data-link-type="idl" href="#dom-layoutfragmentrequest-layoutconstraints-slot" id="ref-for-dom-layoutfragmentrequest-layoutconstraints-slot">[[layoutConstraints]]</a></code>
                に<var>constraints</var>を設定。</p>
            <li data-md="">
              <p><code
                  class="idl"><a data-link-type="idl" href="#dom-layoutfragmentrequest-breaktoken-slot" id="ref-for-dom-layoutfragmentrequest-breaktoken-slot">[[breakToken]]</a></code>
                に<var>breakToken</var>を設定。</p>
          </ul>
        <li data-md="">
          <p><var>request</var>を返す。</p>
      </ol>
    </div>
    <div class="algorithm" data-algorithm="intrinsicSizes()">
      <dfn class="dfn-paneled idl-code" data-dfn-for="LayoutChild" data-dfn-type="method" data-export=""
        id="dom-layoutchild-intrinsicsizes"><code>intrinsicSizes()</code></dfn>メソッドが<code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild①⑤">LayoutChild</a></code>
      <var>this</var>で呼び出された場合、ユーザーエージェントは以下の手順を実行しなければなりません:
      <ol>
        <li data-md="">
          <p><var>request</var>を新しい<code
              class="idl"><a data-link-type="idl" href="#intrinsicsizesrequest" id="ref-for-intrinsicsizesrequest①">IntrinsicSizesRequest</a></code>として生成し、内部スロットを持つ:
          </p>
          <ul>
            <li data-md="">
              <p><code
                  class="idl"><a data-link-type="idl" href="#dom-intrinsicsizesrequest-layoutchild-slot" id="ref-for-dom-intrinsicsizesrequest-layoutchild-slot">[[layoutChild]]</a></code>
                に<var>this</var>を設定。</p>
          </ul>
        <li data-md="">
          <p><var>request</var>を返す。</p>
      </ol>
    </div>
    <p class="note" role="note"><span>注:</span> <code
        class="idl"><a data-link-type="idl" href="#dom-layoutchild-layoutnextfragment" id="ref-for-dom-layoutchild-layoutnextfragment②">layoutNextFragment()</a></code>
      および <code
        class="idl"><a data-link-type="idl" href="#dom-layoutchild-intrinsicsizes" id="ref-for-dom-layoutchild-intrinsicsizes①">intrinsicSizes()</a></code>
      は同期的に実行されません。詳細は<a href="#request-objects">§5.5.1 リクエストオブジェクト</a>を参照してください。</p>
    <h4 class="heading settled" data-level="3.1.1" id="layout-child-box-tree"><span class="secno">3.1.1. </span><span
        class="content">LayoutChildrenとボックスツリー</span><a class="self-link" href="#layout-child-box-tree"></a>
    </h4>
    <p>各<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box" id="ref-for-box⑤">box</a>は、<dfn
        class="dfn-paneled idl-code" data-dfn-for="box" data-dfn-type="attribute" data-export=""
        id="dom-box-layoutchildmap-slot"><code>[[layoutChildMap]]</code></dfn>という内部スロットを持ちます。これは、<a data-link-type="dfn"
        href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map">マップ</a>であり、<code
        class="idl"><a data-link-type="idl" href="#layoutworkletglobalscope" id="ref-for-layoutworkletglobalscope">LayoutWorkletGlobalScope</a></code>から<code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild①⑥">LayoutChild</a></code>への対応関係を保持します。
    </p>
    <div class="algorithm" data-algorithm="get a layout child">
      ユーザーエージェントが<var>workletGlobalScope</var>、<var>name</var>、<var>box</var>を指定して<dfn class="dfn-paneled"
        data-dfn-type="dfn" data-noexport="" id="get-a-layout-child">レイアウト子要素を取得</dfn>したい場合、次の手順を実行しなければなりません:
      <ol>
        <li data-md="">
          <p>以下を確認する:</p>
          <ul>
            <li data-md="">
              <p><var>box</var>が現在<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box-tree"
                  id="ref-for-box-tree②">ボックスツリー</a>に接続されている。</p>
            <li data-md="">
              <p><var>box</var>の<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#containing-block"
                  id="ref-for-containing-block">包含ブロック</a>が<a data-link-type="dfn" href="#layout-api-container"
                  id="ref-for-layout-api-container⑥">レイアウトAPIコンテナ</a>である。</p>
            <li data-md="">
              <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#containing-block"
                  id="ref-for-containing-block①">包含ブロック</a>の<a class="css" data-link-type="maybe"
                  href="#valdef-display-layout"
                  id="ref-for-valdef-display-layout①">layout()</a>関数の第1引数が<var>name</var>である。</p>
          </ul>
        <li data-md="">
          <p><var>layoutChildMap</var>を<var>box</var>の<code
              class="idl"><a data-link-type="idl" href="#dom-box-layoutchildmap-slot" id="ref-for-dom-box-layoutchildmap-slot">[[layoutChildMap]]</a></code>とする。
          </p>
        <li data-md="">
          <p>もし<var>layoutChildMap</var>[<var>workletGlobalScope</var>]が<a data-link-type="dfn"
              href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists">存在しない</a>場合、次の手順を実行する:</p>
          <ol>
            <li data-md="">
              <p><var>definition</var>を<a data-link-type="dfn" href="#get-a-layout-definition"
                  id="ref-for-get-a-layout-definition">レイアウト定義の取得</a>で<var>name</var>と<var>workletGlobalScope</var>を渡して得る。
              </p>
              <p><a data-link-type="dfn" href="#get-a-layout-definition"
                  id="ref-for-get-a-layout-definition①">レイアウト定義の取得</a>が成功し、<var>definition</var>が<code>"invalid"</code>でないことを確認する。
              </p>
            <li data-md="">
              <p><var>childInputProperties</var>を<var>definition</var>の<a data-link-type="dfn"
                  href="#layout-definition-child-input-properties"
                  id="ref-for-layout-definition-child-input-properties">子入力プロパティ</a>とする。</p>
            <li data-md="">
              <p><var>layoutChild</var>を新しい<code
                  class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild①⑦">LayoutChild</a></code>として、以下の内部スロットを持たせて生成する:
              </p>
              <ul>
                <li data-md="">
                  <p><code
                      class="idl"><a data-link-type="idl" href="#dom-layoutchild-box-slot" id="ref-for-dom-layoutchild-box-slot">[[box]]</a></code>
                    に<var>box</var>を設定。</p>
                <li data-md="">
                  <p><code
                      class="idl"><a data-link-type="idl" href="#dom-layoutchild-stylemap-slot" id="ref-for-dom-layoutchild-stylemap-slot①">[[styleMap]]</a></code>
                    に新しい<code
                      class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-typed-om-1/#stylepropertymapreadonly" id="ref-for-stylepropertymapreadonly③">StylePropertyMapReadOnly</a></code>を設定し、<var>childInputProperties</var>に記載されたプロパティの<em>計算値のみ</em>で初期化する。
                  </p>
              </ul>
            <li data-md="">
              <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set" id="ref-for-map-set">セット</a>
                <var>layoutChildMap</var>[<var>workletGlobalScope</var>]に<var>layoutChild</var>を設定する。
              </p>
          </ol>
        <li data-md="">
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-get"
              id="ref-for-map-get">取得</a>した<var>layoutChildMap</var>[<var>workletGlobalScope</var>]を返す。</p>
      </ol>
    </div>
    <p>ユーザーエージェントは、<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box" id="ref-for-box⑥">box</a>が<a
        data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box-tree"
        id="ref-for-box-tree③">ボックスツリー</a>に挿入された際に、すべての<code
        class="idl"><a data-link-type="idl" href="#layoutworkletglobalscope" id="ref-for-layoutworkletglobalscope①">LayoutWorkletGlobalScope</a></code>に対して<code
        class="idl"><a data-link-type="idl" href="#dom-box-layoutchildmap-slot" id="ref-for-dom-box-layoutchildmap-slot①">[[layoutChildMap]]</a></code>を事前に生成してもよい。
    </p>
    <p>ユーザーエージェントは、<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box" id="ref-for-box⑦">box</a>が<a
        data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box-tree"
        id="ref-for-box-tree④">ボックスツリー</a>から削除された際、<code
        class="idl"><a data-link-type="idl" href="#dom-box-layoutchildmap-slot" id="ref-for-dom-box-layoutchildmap-slot②">[[layoutChildMap]]</a></code>を必ずクリアしなければなりません。
    </p>
    <div class="algorithm" data-algorithm="update a layout child style">
      ユーザーエージェントが<var>box</var>を指定して<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport=""
        id="update-a-layout-child-style">レイアウト子要素のスタイル更新</dfn>を行いたい場合、以下の手順を実行しなければなりません:
      <ol>
        <li data-md="">
          <p>以下を確認する:</p>
          <ul>
            <li data-md="">
              <p><var>box</var>が現在<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box-tree"
                  id="ref-for-box-tree⑤">ボックスツリー</a>に接続されている。</p>
          </ul>
        <li data-md="">
          <p>もし<var>box</var>の<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#containing-block"
              id="ref-for-containing-block②">包含ブロック</a>が<a data-link-type="dfn" href="#layout-api-container"
              id="ref-for-layout-api-container⑦">レイアウトAPIコンテナ</a>でない場合、すべての手順を中止する。</p>
        <li data-md="">
          <p><var>layoutChildMap</var>を<var>box</var>の<code
              class="idl"><a data-link-type="idl" href="#dom-box-layoutchildmap-slot" id="ref-for-dom-box-layoutchildmap-slot③">[[layoutChildMap]]</a></code>とする。
          </p>
        <li data-md="">
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate"
              id="ref-for-map-iterate">全ての</a><var>layoutChild</var>について<var>layoutChildMap</var>内を反復する:</p>
          <ol>
            <li data-md="">
              <p><var>styleMap</var>を<var>layoutChild</var>の<code
                  class="idl"><a data-link-type="idl" href="#dom-layoutchild-stylemap-slot" id="ref-for-dom-layoutchild-stylemap-slot②">[[styleMap]]</a></code>とする。
              </p>
            <li data-md="">
              <p><var>styleMap</var>の<a data-link-type="dfn" href="https://drafts.csswg.org/css-syntax-3/#declaration"
                  id="ref-for-declaration">宣言</a>を<var>box</var>の新しい計算済みスタイルに基づき更新する。</p>
          </ol>
      </ol>
    </div>
    <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box"
        id="ref-for-box⑧">box</a>の計算済みスタイルが変更されたとき、ユーザーエージェントは<a data-link-type="dfn"
        href="#update-a-layout-child-style"
        id="ref-for-update-a-layout-child-style">レイアウト子要素のスタイル更新</a>アルゴリズムを実行しなければなりません。</p>
    <h3 class="heading settled" data-level="3.2" id="layout-fragments"><span class="secno">3.2. </span><span
        class="content">レイアウトフラグメント</span><a class="self-link" href="#layout-fragments"></a></h3>
    <pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="layoutfragment"><code>LayoutFragment</code></dfn> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double"><span class="kt">double</span></a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutFragment" data-dfn-type="attribute" data-export="" data-readonly="" data-type="double" id="dom-layoutfragment-inlinesize"><code>inlineSize</code></dfn>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①"><span class="kt">double</span></a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutFragment" data-dfn-type="attribute" data-export="" data-readonly="" data-type="double" id="dom-layoutfragment-blocksize"><code>blockSize</code></dfn>;

    <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②"><span class="kt">double</span></a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutFragment" data-dfn-type="attribute" data-export="" data-type="double" id="dom-layoutfragment-inlineoffset"><code>inlineOffset</code></dfn>;
    <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double③"><span class="kt">double</span></a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutFragment" data-dfn-type="attribute" data-export="" data-type="double" id="dom-layoutfragment-blockoffset"><code>blockOffset</code></dfn>;

    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutFragment" data-dfn-type="attribute" data-export="" data-readonly="" data-type="any" id="dom-layoutfragment-data"><code>data</code></dfn>;

    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#childbreaktoken" id="ref-for-childbreaktoken①">ChildBreakToken</a>? <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutFragment" data-dfn-type="attribute" data-export="" data-readonly="" data-type="ChildBreakToken?" id="dom-layoutfragment-breaktoken"><code>breakToken</code></dfn>;
};
</pre>
    <p><code
        class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment③">LayoutFragment</a></code>は内部スロットを持ちます:
    </p>
    <ul>
      <li data-md="">
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="LayoutFragment" data-dfn-type="attribute" data-export=""
            id="dom-layoutfragment-layoutfragmentrequest-slot"><code>[[layoutFragmentRequest]]</code></dfn> <code
            class="idl"><a data-link-type="idl" href="#layoutfragmentrequest" id="ref-for-layoutfragmentrequest②">LayoutFragmentRequest</a></code>。このフラグメントを生成したフラグメントリクエストです。
        </p>
      <li data-md="">
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="LayoutFragment" data-dfn-type="attribute" data-export=""
            id="dom-layoutfragment-generator-slot"><code>[[generator]]</code></dfn> このフラグメントを生成したジェネレーター。</p>
    </ul>
    <hr>
    <p><code
        class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment④">LayoutFragment</a></code>は、<code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild①⑧">LayoutChild</a></code>のレイアウト後のCSS<a
        data-link-type="dfn" href="https://www.w3.org/TR/css3-break/#fragment"
        id="ref-for-fragment①">フラグメント</a>を表します。これは<code
        class="idl"><a data-link-type="idl" href="#dom-layoutchild-layoutnextfragment" id="ref-for-dom-layoutchild-layoutnextfragment③">layoutNextFragment()</a></code>メソッドによって生成されます。
    </p>
    <p><code
        class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment⑤">LayoutFragment</a></code>には、<code
        class="idl"><a data-link-type="idl" href="#dom-layoutfragment-inlinesize" id="ref-for-dom-layoutfragment-inlinesize">inlineSize</a></code>と<code
        class="idl"><a data-link-type="idl" href="#dom-layoutfragment-blocksize" id="ref-for-dom-layoutfragment-blocksize">blockSize</a></code>属性があり、それぞれ子要素のレイアウトアルゴリズムによって設定されます。これらはCSS<a
        data-link-type="dfn" href="https://www.w3.org/TR/css3-break/#fragment"
        id="ref-for-fragment②">フラグメント</a>の<b>border box</b>サイズであり、<a data-link-type="dfn" href="#current-layout"
        id="ref-for-current-layout②">現在のレイアウト</a>の書字モードに相対的です。</p>
    <p><code
        class="idl"><a data-link-type="idl" href="#dom-layoutfragment-inlinesize" id="ref-for-dom-layoutfragment-inlinesize①">inlineSize</a></code>と<code
        class="idl"><a data-link-type="idl" href="#dom-layoutfragment-blocksize" id="ref-for-dom-layoutfragment-blocksize①">blockSize</a></code>属性は変更できません。
      <a data-link-type="dfn" href="#current-layout" id="ref-for-current-layout③">現在のレイアウト</a>で異なる<code
        class="idl"><a data-link-type="idl" href="#dom-layoutfragment-inlinesize" id="ref-for-dom-layoutfragment-inlinesize②">inlineSize</a></code>または<code
        class="idl"><a data-link-type="idl" href="#dom-layoutfragment-blocksize" id="ref-for-dom-layoutfragment-blocksize②">blockSize</a></code>が必要な場合、著者は異なる引数で<code
        class="idl"><a data-link-type="idl" href="#dom-layoutchild-layoutnextfragment" id="ref-for-dom-layoutchild-layoutnextfragment④">layoutNextFragment()</a></code>を再度実行しなければなりません。
    </p>
    <p>現在のレイアウト内の著者は、生成された<code
        class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment⑥">LayoutFragment</a></code>の<code
        class="idl"><a data-link-type="idl" href="#dom-layoutfragment-inlineoffset" id="ref-for-dom-layoutfragment-inlineoffset">inlineOffset</a></code>と<code
        class="idl"><a data-link-type="idl" href="#dom-layoutfragment-blockoffset" id="ref-for-dom-layoutfragment-blockoffset">blockOffset</a></code>属性を設定することで位置を指定できます。著者が設定しない場合はデフォルトでゼロになります。<code
        class="idl"><a data-link-type="idl" href="#dom-layoutfragment-inlineoffset" id="ref-for-dom-layoutfragment-inlineoffset①">inlineOffset</a></code>と<code
        class="idl"><a data-link-type="idl" href="#dom-layoutfragment-blockoffset" id="ref-for-dom-layoutfragment-blockoffset①">blockOffset</a></code>属性は、<code
        class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment⑦">LayoutFragment</a></code>の親の<b>border
        box</b>に対する位置を表し、transformやpositioning（例えばフラグメントが<a data-link-type="dfn"
        href="https://www.w3.org/TR/css3-positioning/#relative-position"
        id="ref-for-relative-position">相対配置</a>された場合）を適用する前の値です。</p>
    <div class="example" id="example-b52e89c9">
      <a class="self-link" href="#example-b52e89c9"></a>
      レイアウトアルゴリズムはブロック風のレイアウト（フラグメントをブロック方向に順次配置）を実行し、子要素をインライン方向で中央揃えします。
      <pre class="lang-javascript highlight">registerLayout<span class="p">(</span><span class="s1">'block-like'</span><span class="p">,</span> <span class="kr">class</span> <span class="p">{</span>
    <span class="o">*</span>intrinsicSizes<span class="p">(</span>children<span class="p">,</span> edges<span class="p">,</span> styleMap<span class="p">)</span> <span class="p">{</span>
      <span class="kr">const</span> childrenSizes <span class="o">=</span> <span class="k">yield</span> children<span class="p">.</span>map<span class="p">((</span>child<span class="p">)</span> <span class="p">=></span> <span class="p">{</span>
          <span class="k">return</span> child<span class="p">.</span>intrinsicSizes<span class="p">();</span>
      <span class="p">});</span>

      <span class="kr">const</span> maxContentSize <span class="o">=</span> childrenSizes<span class="p">.</span>reduce<span class="p">((</span>max<span class="p">,</span> childSizes<span class="p">)</span> <span class="p">=></span> <span class="p">{</span>
          <span class="k">return</span> Math<span class="p">.</span>max<span class="p">(</span>max<span class="p">,</span> childSizes<span class="p">.</span>maxContentSize<span class="p">);</span>
      <span class="p">},</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> edges<span class="p">.</span>all<span class="p">.</span>inline<span class="p">;</span>

      <span class="kr">const</span> minContentSize <span class="o">=</span> childrenSizes<span class="p">.</span>reduce<span class="p">((</span>max<span class="p">,</span> childSizes<span class="p">)</span> <span class="p">=></span> <span class="p">{</span>
          <span class="k">return</span> Math<span class="p">.</span>max<span class="p">(</span>max<span class="p">,</span> childSizes<span class="p">.</span>minContentSize<span class="p">);</span>
      <span class="p">},</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> edges<span class="p">.</span>all<span class="p">.</span>inline<span class="p">;</span>

      <span class="k">return</span> <span class="p">{</span>maxContentSize<span class="p">,</span> minContentSize<span class="p">};</span>
    <span class="p">}</span>

    <span class="o">*</span>layout<span class="p">(</span>children<span class="p">,</span> edges<span class="p">,</span> constraints<span class="p">,</span> styleMap<span class="p">)</span> <span class="p">{</span>
        <span class="kr">const</span> availableInlineSize <span class="o">=</span> constraints<span class="p">.</span>fixedInlineSize <span class="o">-</span> edges<span class="p">.</span>all<span class="p">.</span>inline<span class="p">;</span>
        <span class="kr">const</span> availableBlockSize <span class="o">=</span> <span class="p">(</span>constraints<span class="p">.</span>fixedBlockSize <span class="o">||</span> <span class="kc">Infinity</span><span class="p">)</span> <span class="o">-</span> edges<span class="p">.</span>all<span class="p">.</span>block<span class="p">;</span>

        <span class="kr">const</span> childFragments <span class="o">=</span> <span class="p">[];</span>
        <span class="kr">const</span> childConstraints <span class="o">=</span> <span class="p">{</span> availableInlineSize<span class="p">,</span> availableBlockSize <span class="p">};</span>

        <span class="kr">const</span> childFragments <span class="o">=</span> <span class="k">yield</span> children<span class="p">.</span>map<span class="p">((</span>child<span class="p">)</span> <span class="p">=></span> <span class="p">{</span>
            <span class="k">return</span> child<span class="p">.</span>layoutNextFragment<span class="p">(</span>childConstraints<span class="p">);</span>
        <span class="p">});</span>

        <span class="kd">let</span> blockOffset <span class="o">=</span> edges<span class="p">.</span>all<span class="p">.</span>blockStart<span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> fragment <span class="k">of</span> childFragments<span class="p">)</span> <span class="p">{</span>
            <span class="c1">// フラグメントをブロック方向に配置し、インライン方向で中央揃えする</span>
<span class="c1"></span>            fragment<span class="p">.</span>blockOffset <span class="o">=</span> blockOffset<span class="p">;</span>
            fragment<span class="p">.</span>inlineOffset <span class="o">=</span> Math<span class="p">.</span>max<span class="p">(</span>
                edges<span class="p">.</span>all<span class="p">.</span>inlineStart<span class="p">,</span>
                <span class="p">(</span>availableInlineSize <span class="o">-</span> fragment<span class="p">.</span>inlineSize<span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>

            blockOffset <span class="o">+=</span> fragment<span class="p">.</span>blockSize<span class="p">;</span>
        <span class="p">}</span>

        <span class="kr">const</span> autoBlockSize <span class="o">=</span> blockOffset <span class="o">+</span> edges<span class="p">.</span>all<span class="p">.</span>blockEnd<span class="p">;</span>

        <span class="k">return</span> <span class="p">{</span>
            autoBlockSize<span class="p">,</span>
            childFragments<span class="p">,</span>
        <span class="p">};</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre>
    </div>
    <p><a data-link-type="dfn" href="#layout-api-container" id="ref-for-layout-api-container⑧">レイアウトAPIコンテナ</a>は、<code
        class="idl"><a data-link-type="idl" href="#dom-layoutfragment-data" id="ref-for-dom-layoutfragment-data">data</a></code>属性を利用して他の<a
        data-link-type="dfn" href="#layout-api-container"
        id="ref-for-layout-api-container⑨">レイアウトAPIコンテナ</a>と通信できます。これは<code
        class="idl"><a data-link-type="idl" href="#dom-fragmentresultoptions-data" id="ref-for-dom-fragmentresultoptions-data">data</a></code>メンバーで<code
        class="idl"><a data-link-type="idl" href="#dictdef-fragmentresultoptions" id="ref-for-dictdef-fragmentresultoptions">FragmentResultOptions</a></code>辞書にセットされます。
    </p>
    <p><code
        class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment⑧">LayoutFragment</a></code>の<code
        class="idl"><a data-link-type="idl" href="#dom-layoutfragment-breaktoken" id="ref-for-dom-layoutfragment-breaktoken">breakToken</a></code>は、<code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild①⑨">LayoutChild</a></code>が最後に断片化された場所を指定します。<code
        class="idl"><a data-link-type="idl" href="#dom-layoutfragment-breaktoken" id="ref-for-dom-layoutfragment-breaktoken①">breakToken</a></code>がnullの場合、その<code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild②⓪">LayoutChild</a></code>はそのトークンチェーンに対してこれ以上<code
        class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment⑨">LayoutFragment</a></code>を生成しません。<code
        class="idl"><a data-link-type="idl" href="#dom-layoutfragment-breaktoken" id="ref-for-dom-layoutfragment-breaktoken②">breakToken</a></code>は、<code
        class="idl"><a data-link-type="idl" href="#dom-layoutchild-layoutnextfragment" id="ref-for-dom-layoutchild-layoutnextfragment⑤">layoutNextFragment()</a></code>関数に渡すことで、特定の子要素の次の<code
        class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment①⓪">LayoutFragment</a></code>を生成できます。<code
        class="idl"><a data-link-type="idl" href="#dom-layoutfragment-breaktoken" id="ref-for-dom-layoutfragment-breaktoken③">breakToken</a></code>は変更できません。
      <a data-link-type="dfn" href="#current-layout" id="ref-for-current-layout④">現在のレイアウト</a>で異なる<code
        class="idl"><a data-link-type="idl" href="#dom-layoutfragment-breaktoken" id="ref-for-dom-layoutfragment-breaktoken④">breakToken</a></code>が必要な場合は、著者は異なる引数で<code
        class="idl"><a data-link-type="idl" href="#dom-layoutchild-layoutnextfragment" id="ref-for-dom-layoutchild-layoutnextfragment⑥">layoutNextFragment()</a></code>を再度実行する必要があります。
    </p>
    <div class="algorithm" data-algorithm="create a layout fragment">
      ユーザーエージェントが<var>generator</var>、<var>layoutFragmentRequest</var>、<var>internalFragment</var>を指定して<dfn
        class="dfn-paneled" data-dfn-type="dfn" data-noexport=""
        id="create-a-layout-fragment">レイアウトフラグメントを生成</dfn>したい場合、次の手順を実行しなければなりません:
      <ol>
        <li data-md="">
          <p><var>targetRealm</var>を<var>generator</var>の<a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm"
              id="ref-for-concept-global-object-realm">Realm</a>とする。</p>
        <li data-md="">
          <p><var>fragment</var>を新しい<code
              class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment①①">LayoutFragment</a></code>として、以下の設定で生成する:
          </p>
          <ul>
            <li data-md="">
              <p><code
                  class="idl"><a data-link-type="idl" href="#dom-layoutfragment-layoutfragmentrequest-slot" id="ref-for-dom-layoutfragment-layoutfragmentrequest-slot">[[layoutFragmentRequest]]</a></code>内部スロットは<var>layoutFragmentRequest</var>。
              </p>
            <li data-md="">
              <p><code
                  class="idl"><a data-link-type="idl" href="#dom-layoutfragment-generator-slot" id="ref-for-dom-layoutfragment-generator-slot">[[generator]]</a></code>内部スロットは<var>generator</var>。
              </p>
            <li data-md="">
              <p><code
                  class="idl"><a data-link-type="idl" href="#dom-layoutfragment-inlinesize" id="ref-for-dom-layoutfragment-inlinesize③">inlineSize</a></code>は<var>internalFragment</var>の<a
                  data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-3/#inline-size"
                  id="ref-for-inline-size">インラインサイズ</a>（<a data-link-type="dfn" href="#current-layout"
                  id="ref-for-current-layout⑤">現在のレイアウト</a>の書字モードに対する相対値）。</p>
            <li data-md="">
              <p><code
                  class="idl"><a data-link-type="idl" href="#dom-layoutfragment-blocksize" id="ref-for-dom-layoutfragment-blocksize③">blockSize</a></code>は<var>internalFragment</var>の<a
                  data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-3/#block-size"
                  id="ref-for-block-size">ブロックサイズ</a>（<a data-link-type="dfn" href="#current-layout"
                  id="ref-for-current-layout⑥">現在のレイアウト</a>の書字モードに対する相対値）。</p>
            <li data-md="">
              <p><code
                  class="idl"><a data-link-type="idl" href="#dom-layoutfragment-inlineoffset" id="ref-for-dom-layoutfragment-inlineoffset②">inlineOffset</a></code>の初期値は0。
              </p>
            <li data-md="">
              <p><code
                  class="idl"><a data-link-type="idl" href="#dom-layoutfragment-blockoffset" id="ref-for-dom-layoutfragment-blockoffset②">blockOffset</a></code>の初期値は0。
              </p>
            <li data-md="">
              <p><code
                  class="idl"><a data-link-type="idl" href="#dom-layoutfragment-breaktoken" id="ref-for-dom-layoutfragment-breaktoken⑤">breakToken</a></code>は、<var>internalFragment</var>の内部ブレークトークンに対応する新しい<code
                  class="idl"><a data-link-type="idl" href="#childbreaktoken" id="ref-for-childbreaktoken②">ChildBreakToken</a></code>。
              </p>
            <li data-md="">
              <p>もし<var>internalFragment</var>に<var>clonedData</var>オブジェクトが格納されていれば、<code
                  class="idl"><a data-link-type="idl" href="#dom-layoutfragment-data" id="ref-for-dom-layoutfragment-data①">data</a></code>は<a
                  data-link-type="dfn" href="https://html.spec.whatwg.org/#structureddeserialize"
                  id="ref-for-structureddeserialize">StructuredDeserialize</a>(<var>clonedData</var>,<var>targetRealm</var>)の結果。なければnull。
              </p>
          </ul>
        <li data-md="">
          <p><var>fragment</var>を返す。</p>
      </ol>
    </div>
    <h3 class="heading settled" data-level="3.3" id="intrinsic-sizes"><span class="secno">3.3. </span><span
        class="content">本来サイズ</span><a class="self-link" href="#intrinsic-sizes"></a></h3>
    <pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed②">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="intrinsicsizes"><code>IntrinsicSizes</code></dfn> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double④"><span class="kt">double</span></a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="IntrinsicSizes" data-dfn-type="attribute" data-export="" data-readonly="" data-type="double" id="dom-intrinsicsizes-mincontentsize"><code>minContentSize</code></dfn>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double⑤"><span class="kt">double</span></a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="IntrinsicSizes" data-dfn-type="attribute" data-export="" data-readonly="" data-type="double" id="dom-intrinsicsizes-maxcontentsize"><code>maxContentSize</code></dfn>;
};
</pre>
    <p><code
        class="idl"><a data-link-type="idl" href="#intrinsicsizes" id="ref-for-intrinsicsizes">IntrinsicSizes</a></code>オブジェクトは内部スロットを持ちます:
    </p>
    <ul>
      <li data-md="">
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="IntrinsicSizes" data-dfn-type="attribute" data-export=""
            id="dom-intrinsicsizes-intrinsicsizesrequest-slot"><code>[[intrinsicSizesRequest]]</code></dfn> <code
            class="idl"><a data-link-type="idl" href="#intrinsicsizesrequest" id="ref-for-intrinsicsizesrequest②">IntrinsicSizesRequest</a></code>。これは本来サイズリクエストであり、この本来サイズ群を生成したものです。
        </p>
    </ul>
    <hr>
    <p>
      <code
        class="idl"><a data-link-type="idl" href="#intrinsicsizes" id="ref-for-intrinsicsizes①">IntrinsicSizes</a></code>オブジェクトは、CSSの<a
        data-link-type="dfn" href="https://www.w3.org/TR/css-sizing-3/#min-content"
        id="ref-for-min-content">min-contentサイズ</a>および<a data-link-type="dfn"
        href="https://www.w3.org/TR/css-sizing-3/#max-content"
        id="ref-for-max-content">max-contentサイズ</a>を表します。これは、<code
        class="idl"><a data-link-type="idl" href="#dom-intrinsicsizes-mincontentsize" id="ref-for-dom-intrinsicsizes-mincontentsize">minContentSize</a></code>属性と<code
        class="idl"><a data-link-type="idl" href="#dom-intrinsicsizes-maxcontentsize" id="ref-for-dom-intrinsicsizes-maxcontentsize">maxContentSize</a></code>属性を持ち、<code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild②①">LayoutChild</a></code>の<b>border
        box</b>のmin/max-content寄与を<a data-link-type="dfn" href="#current-layout"
        id="ref-for-current-layout⑦">現在のレイアウト</a>について表します。これらの属性は、<a data-link-type="dfn" href="#current-layout"
        id="ref-for-current-layout⑧">現在のレイアウト</a>の書字方向のインライン方向に対する相対値です。
    </p>
    <p><code
        class="idl"><a data-link-type="idl" href="#dom-intrinsicsizes-mincontentsize" id="ref-for-dom-intrinsicsizes-mincontentsize①">minContentSize</a></code>と<code
        class="idl"><a data-link-type="idl" href="#dom-intrinsicsizes-maxcontentsize" id="ref-for-dom-intrinsicsizes-maxcontentsize①">maxContentSize</a></code>は変更できません。
      これらは、現在のレイアウトパス内で<code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild②②">LayoutChild</a></code>について変化しないものとします。
    </p>
    <div class="example" id="example-43c1ff85">
      <a class="self-link" href="#example-43c1ff85"></a> 以下は2つの子要素のborder-box本来サイズの例です。
      <pre class="lang-html highlight"><span class="p">&lt;</span><span class="nt">style</span><span class="p">></span>
<span class="p">.</span><span class="nc">child-0</span> <span class="p">{</span>
  <span class="k">width</span><span class="p">:</span> <span class="mi">380</span><span class="kt">px</span><span class="p">;</span>
  <span class="k">border</span><span class="p">:</span> <span class="kc">solid</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">child-1</span> <span class="p">{</span>
  <span class="k">border</span><span class="p">:</span> <span class="kc">solid</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">box</span> <span class="p">{</span>
  <span class="k">display</span><span class="p">:</span> <span class="nf">layout</span><span class="p">(</span><span class="n">intrinsic</span><span class="o">-</span><span class="n">sizes</span><span class="o">-</span><span class="n">example</span><span class="p">);</span>
  <span class="k">font</span><span class="p">:</span> <span class="mi">25</span><span class="kt">px</span><span class="o">/</span><span class="mi">1</span> <span class="n">Ahem</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">></span>

<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"box"</span><span class="p">></span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"child-0"</span><span class="p">>&lt;/</span><span class="nt">div</span><span class="p">></span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"child-1"</span><span class="p">></span>XXX XXXX<span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
</pre>
      <pre class="lang-javascript highlight">registerLayout<span class="p">(</span><span class="s1">'intrinsic-sizes-example'</span><span class="p">,</span> <span class="kr">class</span> <span class="p">{</span>
    <span class="o">*</span>intrinsicSizes<span class="p">(</span>children<span class="p">,</span> edges<span class="p">,</span> styleMap<span class="p">)</span> <span class="p">{</span>
      <span class="kr">const</span> childrenSizes <span class="o">=</span> <span class="k">yield</span> children<span class="p">.</span>map<span class="p">((</span>child<span class="p">)</span> <span class="p">=></span> <span class="p">{</span>
          <span class="k">return</span> child<span class="p">.</span>intrinsicSizes<span class="p">();</span>
      <span class="p">});</span>

      childrenSizes<span class="p">[</span><span class="mi">0</span><span class="p">].</span>minContentSize<span class="p">;</span> <span class="c1">// 400, (380+10+10) 固定サイズの子。</span>
<span class="c1"></span>      childrenSizes<span class="p">[</span><span class="mi">0</span><span class="p">].</span>maxContentSize<span class="p">;</span> <span class="c1">// 400, (380+10+10) 固定サイズの子。</span>
<span class="c1"></span>
      childrenSizes<span class="p">[</span><span class="mi">1</span><span class="p">].</span>minContentSize<span class="p">;</span> <span class="c1">// 100, "XXXX"のサイズ。</span>
<span class="c1"></span>      childrenSizes<span class="p">[</span><span class="mi">1</span><span class="p">].</span>maxContentSize<span class="p">;</span> <span class="c1">// 200, "XXX XXXX"のサイズ。</span>
<span class="c1"></span>    <span class="p">}</span>

    <span class="o">*</span>layout<span class="p">()</span> <span class="p">{}</span>
<span class="p">});</span>
</pre>
    </div>
    <div class="algorithm" data-algorithm="create an intrinsic sizes object">
      ユーザーエージェントが<var>intrinsicSizesRequest</var>と<var>internalIntrinsicSizes</var>を指定して<dfn class="dfn-paneled"
        data-dfn-type="dfn" data-noexport=""
        id="create-an-intrinsic-sizes-object">本来サイズオブジェクトを生成</dfn>したい場合、次の手順を実行しなければなりません:
      <ol>
        <li data-md="">
          <p><var>intrinsicSizes</var>を新しい<code
              class="idl"><a data-link-type="idl" href="#intrinsicsizes" id="ref-for-intrinsicsizes②">IntrinsicSizes</a></code>として、以下の設定で生成する:
          </p>
          <ul>
            <li data-md="">
              <p><code
                  class="idl"><a data-link-type="idl" href="#dom-intrinsicsizes-intrinsicsizesrequest-slot" id="ref-for-dom-intrinsicsizes-intrinsicsizesrequest-slot">[[intrinsicSizesRequest]]</a></code>内部スロットは<var>intrinsicSizesRequest</var>。
              </p>
            <li data-md="">
              <p><code
                  class="idl"><a data-link-type="idl" href="#dom-intrinsicsizes-mincontentsize" id="ref-for-dom-intrinsicsizes-mincontentsize②">minContentSize</a></code>は<var>internalIntrinsicSizes</var>の<b>border
                  box</b>min-content寄与サイズ（<a data-link-type="dfn" href="#current-layout"
                  id="ref-for-current-layout⑨">現在のレイアウト</a>の書字モードに対する相対値）。</p>
            <li data-md="">
              <p><code
                  class="idl"><a data-link-type="idl" href="#dom-intrinsicsizes-maxcontentsize" id="ref-for-dom-intrinsicsizes-maxcontentsize②">maxContentSize</a></code>は<var>internalIntrinsicSizes</var>の<b>border
                  box</b>max-content寄与サイズ（<a data-link-type="dfn" href="#current-layout"
                  id="ref-for-current-layout①⓪">現在のレイアウト</a>の書字モードに対する相対値）。</p>
          </ul>
        <li data-md="">
          <p><var>intrinsicSizes</var>を返す。</p>
      </ol>
    </div>
    <h3 class="heading settled" data-level="3.4" id="layout-constraints"><span class="secno">3.4. </span><span
        class="content">レイアウト制約</span><a class="self-link" href="#layout-constraints"></a></h3>
    <pre class="idl highlight def">[<dfn class="nv idl-code" data-dfn-for="LayoutConstraints" data-dfn-type="constructor" data-export="" data-lt="LayoutConstraints(options)|LayoutConstraints()" id="dom-layoutconstraints-layoutconstraints"><code>Constructor</code><a class="self-link" href="#dom-layoutconstraints-layoutconstraints"></a></dfn>(<span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#dictdef-layoutconstraintsoptions" id="ref-for-dictdef-layoutconstraintsoptions">LayoutConstraintsOptions</a> <dfn class="nv idl-code" data-dfn-for="LayoutConstraints/LayoutConstraints(options)" data-dfn-type="argument" data-export="" id="dom-layoutconstraints-layoutconstraints-options-options"><code>options</code><a class="self-link" href="#dom-layoutconstraints-layoutconstraints-options-options"></a></dfn>),<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed③">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="layoutconstraints"><code>LayoutConstraints</code></dfn> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double⑥"><span class="kt">double</span></a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutConstraints" data-dfn-type="attribute" data-export="" data-readonly="" data-type="double" id="dom-layoutconstraints-availableinlinesize"><code>availableInlineSize</code></dfn>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double⑦"><span class="kt">double</span></a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutConstraints" data-dfn-type="attribute" data-export="" data-readonly="" data-type="double" id="dom-layoutconstraints-availableblocksize"><code>availableBlockSize</code></dfn>;

    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double⑧"><span class="kt">double</span></a>? <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutConstraints" data-dfn-type="attribute" data-export="" data-readonly="" data-type="double?" id="dom-layoutconstraints-fixedinlinesize"><code>fixedInlineSize</code></dfn>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double⑨"><span class="kt">double</span></a>? <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutConstraints" data-dfn-type="attribute" data-export="" data-readonly="" data-type="double?" id="dom-layoutconstraints-fixedblocksize"><code>fixedBlockSize</code></dfn>;

    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①⓪"><span class="kt">double</span></a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutConstraints" data-dfn-type="attribute" data-export="" data-readonly="" data-type="double" id="dom-layoutconstraints-percentageinlinesize"><code>percentageInlineSize</code></dfn>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①①"><span class="kt">double</span></a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutConstraints" data-dfn-type="attribute" data-export="" data-readonly="" data-type="double" id="dom-layoutconstraints-percentageblocksize"><code>percentageBlockSize</code></dfn>;

    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①②"><span class="kt">double</span></a>? <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutConstraints" data-dfn-type="attribute" data-export="" data-readonly="" data-type="double?" id="dom-layoutconstraints-blockfragmentationoffset"><code>blockFragmentationOffset</code></dfn>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-blockfragmentationtype" id="ref-for-enumdef-blockfragmentationtype">BlockFragmentationType</a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutConstraints" data-dfn-type="attribute" data-export="" data-readonly="" data-type="BlockFragmentationType" id="dom-layoutconstraints-blockfragmentationtype"><code>blockFragmentationType</code></dfn>;

    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="LayoutConstraints" data-dfn-type="attribute" data-export="" data-readonly="" data-type="any" id="dom-layoutconstraints-data"><code>data</code><a class="self-link" href="#dom-layoutconstraints-data"></a></dfn>;
};

<span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-layoutconstraintsoptions"><code>LayoutConstraintsOptions</code></dfn> {
    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①③"><span class="kt">double</span></a> <dfn class="nv idl-code" data-default="0" data-dfn-for="LayoutConstraintsOptions" data-dfn-type="dict-member" data-export="" data-type="double " id="dom-layoutconstraintsoptions-availableinlinesize"><code>availableInlineSize</code><a class="self-link" href="#dom-layoutconstraintsoptions-availableinlinesize"></a></dfn> = 0;
    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①④"><span class="kt">double</span></a> <dfn class="nv idl-code" data-default="0" data-dfn-for="LayoutConstraintsOptions" data-dfn-type="dict-member" data-export="" data-type="double " id="dom-layoutconstraintsoptions-availableblocksize"><code>availableBlockSize</code><a class="self-link" href="#dom-layoutconstraintsoptions-availableblocksize"></a></dfn> = 0;

    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①⑤"><span class="kt">double</span></a> <dfn class="nv idl-code" data-dfn-for="LayoutConstraintsOptions" data-dfn-type="dict-member" data-export="" data-type="double " id="dom-layoutconstraintsoptions-fixedinlinesize"><code>fixedInlineSize</code><a class="self-link" href="#dom-layoutconstraintsoptions-fixedinlinesize"></a></dfn>;
    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①⑥"><span class="kt">double</span></a> <dfn class="nv idl-code" data-dfn-for="LayoutConstraintsOptions" data-dfn-type="dict-member" data-export="" data-type="double " id="dom-layoutconstraintsoptions-fixedblocksize"><code>fixedBlockSize</code><a class="self-link" href="#dom-layoutconstraintsoptions-fixedblocksize"></a></dfn>;

    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①⑦"><span class="kt">double</span></a> <dfn class="nv idl-code" data-dfn-for="LayoutConstraintsOptions" data-dfn-type="dict-member" data-export="" data-type="double " id="dom-layoutconstraintsoptions-percentageinlinesize"><code>percentageInlineSize</code><a class="self-link" href="#dom-layoutconstraintsoptions-percentageinlinesize"></a></dfn>;
    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①⑧"><span class="kt">double</span></a> <dfn class="nv idl-code" data-dfn-for="LayoutConstraintsOptions" data-dfn-type="dict-member" data-export="" data-type="double " id="dom-layoutconstraintsoptions-percentageblocksize"><code>percentageBlockSize</code><a class="self-link" href="#dom-layoutconstraintsoptions-percentageblocksize"></a></dfn>;

    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①⑨"><span class="kt">double</span></a> <dfn class="nv idl-code" data-dfn-for="LayoutConstraintsOptions" data-dfn-type="dict-member" data-export="" data-type="double " id="dom-layoutconstraintsoptions-blockfragmentationoffset"><code>blockFragmentationOffset</code><a class="self-link" href="#dom-layoutconstraintsoptions-blockfragmentationoffset"></a></dfn>;
    <a class="n" data-link-type="idl-name" href="#enumdef-blockfragmentationtype" id="ref-for-enumdef-blockfragmentationtype①">BlockFragmentationType</a> <dfn class="nv idl-code" data-default="&quot;none&quot;" data-dfn-for="LayoutConstraintsOptions" data-dfn-type="dict-member" data-export="" data-type="BlockFragmentationType " id="dom-layoutconstraintsoptions-blockfragmentationtype"><code>blockFragmentationType</code><a class="self-link" href="#dom-layoutconstraintsoptions-blockfragmentationtype"></a></dfn> = "none";

    <span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="LayoutConstraintsOptions" data-dfn-type="dict-member" data-export="" data-type="any " id="dom-layoutconstraintsoptions-data"><code>data</code><a class="self-link" href="#dom-layoutconstraintsoptions-data"></a></dfn>;
};

<span class="kt">enum</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="enum" data-export="" id="enumdef-blockfragmentationtype"><code>BlockFragmentationType</code></dfn> { <dfn class="s idl-code" data-dfn-for="BlockFragmentationType" data-dfn-type="enum-value" data-export="" data-lt="&quot;none&quot;|none" id="dom-blockfragmentationtype-none"><code>"none"</code><a class="self-link" href="#dom-blockfragmentationtype-none"></a></dfn>, <dfn class="s idl-code" data-dfn-for="BlockFragmentationType" data-dfn-type="enum-value" data-export="" data-lt="&quot;page&quot;|page" id="dom-blockfragmentationtype-page"><code>"page"</code><a class="self-link" href="#dom-blockfragmentationtype-page"></a></dfn>, <dfn class="s idl-code" data-dfn-for="BlockFragmentationType" data-dfn-type="enum-value" data-export="" data-lt="&quot;column&quot;|column" id="dom-blockfragmentationtype-column"><code>"column"</code><a class="self-link" href="#dom-blockfragmentationtype-column"></a></dfn>, <dfn class="s idl-code" data-dfn-for="BlockFragmentationType" data-dfn-type="enum-value" data-export="" data-lt="&quot;region&quot;|region" id="dom-blockfragmentationtype-region"><code>"region"</code><a class="self-link" href="#dom-blockfragmentationtype-region"></a></dfn> };
</pre>
    <p><code
        class="idl"><a data-link-type="idl" href="#layoutconstraints" id="ref-for-layoutconstraints①">LayoutConstraints</a></code>
      オブジェクトが layout メソッドに渡され、<a data-link-type="dfn" href="#current-layout"
        id="ref-for-current-layout①①">現在のレイアウト</a>がレイアウトを実行するためのすべての制約を表します。また、このオブジェクトは利用可能なスペースの情報を <a
        data-link-type="dfn" href="#child-layout" id="ref-for-child-layout">子レイアウト</a>に渡すためにも使用されます。</p>
    <p><code
        class="idl"><a data-link-type="idl" href="#layoutconstraints" id="ref-for-layoutconstraints②">LayoutConstraints</a></code>
      オブジェクトには <code
        class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-availableinlinesize" id="ref-for-dom-layoutconstraints-availableinlinesize">availableInlineSize</a></code>
      と <code
        class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-availableblocksize" id="ref-for-dom-layoutconstraints-availableblocksize">availableBlockSize</a></code>
      属性があります。これは、レイアウトが尊重すべき <a data-link-type="dfn" href="https://www.w3.org/TR/css-sizing-3/#available"
        id="ref-for-available">利用可能なスペース</a>を <code
        class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment①②">LayoutFragment</a></code>
      のために表します。</p>
    <p class="note" role="note"><span>注:</span> 一部のレイアウトでは、このサイズを超える <code
        class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment①③">LayoutFragment</a></code>
      を生成する必要があります。例えば <a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#replaced-element"
        id="ref-for-replaced-element">置換要素</a> などです。<a data-link-type="dfn" href="#parent-layout"
        id="ref-for-parent-layout">親レイアウト</a>はこれが発生することを想定し、適切に対応する必要があります。</p>
    <p><a data-link-type="dfn" href="#parent-layout" id="ref-for-parent-layout①">親レイアウト</a>は <a data-link-type="dfn"
        href="#current-layout" id="ref-for-current-layout①②">現在のレイアウト</a>が正確に特定のサイズであることを要求する場合があります。<code
        class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-fixedinlinesize" id="ref-for-dom-layoutconstraints-fixedinlinesize">fixedInlineSize</a></code>
      や <code
        class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-fixedblocksize" id="ref-for-dom-layoutconstraints-fixedblocksize">fixedBlockSize</a></code>
      が指定されている場合、<a data-link-type="dfn" href="#current-layout"
        id="ref-for-current-layout①③">現在のレイアウト</a>は指定された方向に指定されたサイズの <code
        class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment①④">LayoutFragment</a></code>
      を生成する必要があります。</p>
    <div class="example" id="example-3e825702">
      <a class="self-link" href="#example-3e825702"></a> レイアウトアルゴリズムは、インライン方向の余分なスペースをフレックスボックスのように分配します。
      子のインラインサイズを固定するような子レイアウト制約を生成します。
      <pre class="lang-javascript highlight">registerLayout<span class="p">(</span><span class="s1">'flex-distribution-like'</span><span class="p">,</span> <span class="kr">class</span> <span class="p">{</span>
    <span class="o">*</span>intrinsicSizes<span class="p">(</span>children<span class="p">,</span> edges<span class="p">,</span> styleMap<span class="p">)</span> <span class="p">{</span>
      <span class="kr">const</span> childrenSizes <span class="o">=</span> <span class="k">yield</span> children<span class="p">.</span>map<span class="p">((</span>child<span class="p">)</span> <span class="p">=></span> <span class="p">{</span>
          <span class="k">return</span> child<span class="p">.</span>intrinsicSizes<span class="p">();</span>
      <span class="p">});</span>

      <span class="kr">const</span> maxContentSize <span class="o">=</span> childrenSizes<span class="p">.</span>reduce<span class="p">((</span>sum<span class="p">,</span> childSizes<span class="p">)</span> <span class="p">=></span> <span class="p">{</span>
          <span class="k">return</span> sum <span class="o">+</span> childSizes<span class="p">.</span>maxContentSize<span class="p">;</span>
      <span class="p">},</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> edges<span class="p">.</span>all<span class="p">.</span>inline<span class="p">;</span>

      <span class="kr">const</span> minContentSize <span class="o">=</span> childrenSizes<span class="p">.</span>reduce<span class="p">((</span>max<span class="p">,</span> childSizes<span class="p">)</span> <span class="p">=></span> <span class="p">{</span>
          <span class="k">return</span> sum <span class="o">+</span> childSizes<span class="p">.</span>minContentSize<span class="p">;</span>
      <span class="p">},</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> edges<span class="p">.</span>all<span class="p">.</span>inline<span class="p">;</span>

      <span class="k">return</span> <span class="p">{</span>maxContentSize<span class="p">,</span> minContentSize<span class="p">};</span>
    <span class="p">}</span>

    <span class="o">*</span>layout<span class="p">(</span>children<span class="p">,</span> edges<span class="p">,</span> constraints<span class="p">,</span> styleMap<span class="p">)</span> <span class="p">{</span>

        <span class="kr">const</span> availableInlineSize <span class="o">=</span>
            constraints<span class="p">.</span>fixedInlineSize <span class="o">-</span> edges<span class="p">.</span>all<span class="p">.</span>inline<span class="p">;</span>
        <span class="kr">const</span> availableBlockSize <span class="o">=</span>
            <span class="p">(</span>constraints<span class="p">.</span>fixedInlineSize <span class="o">||</span> <span class="kc">Infinity</span><span class="p">)</span> <span class="o">-</span> edges<span class="p">.</span>all<span class="p">.</span>block<span class="p">;</span>

        <span class="kr">const</span> childConstraints <span class="o">=</span> <span class="p">{</span> availableInlineSize<span class="p">,</span> availableBlockSize <span class="p">};</span>

        <span class="kr">const</span> unconstrainedChildFragments <span class="o">=</span> <span class="k">yield</span> children<span class="p">.</span>map<span class="p">((</span>child<span class="p">)</span> <span class="p">=></span> <span class="p">{</span>
            <span class="k">return</span> child<span class="p">.</span>layoutNextFragment<span class="p">(</span>childConstraints<span class="p">);</span>
        <span class="p">});</span>

        <span class="kr">const</span> unconstrainedSizes <span class="o">=</span> <span class="p">[];</span>
        <span class="kr">const</span> totalSize <span class="o">=</span> unconstrainedChildFragments<span class="p">.</span>reduce<span class="p">((</span>sum<span class="p">,</span> fragment<span class="p">,</span> i<span class="p">)</span> <span class="p">=></span> <span class="p">{</span>
            unconstrainedSizes<span class="p">[</span>i<span class="p">]</span> <span class="o">=</span> fragment<span class="p">.</span>inlineSize<span class="p">;</span>
            <span class="k">return</span> sum <span class="o">+</span> fragment<span class="p">.</span>inlineSize<span class="p">;</span>
        <span class="p">},</span> <span class="mi">0</span><span class="p">);</span>

        <span class="c1">// 余分なスペースを子要素間で分配する。</span>
<span class="c1"></span>        <span class="kr">const</span> remainingSpace <span class="o">=</span> Math<span class="p">.</span>max<span class="p">(</span><span class="mi">0</span><span class="p">,</span> inlineSize <span class="o">-</span> totalSize<span class="p">);</span>
        <span class="kr">const</span> extraSpace <span class="o">=</span> remainingSpace <span class="o">/</span> children<span class="p">.</span>length<span class="p">;</span>

        <span class="kr">const</span> childFragments <span class="o">=</span> <span class="k">yield</span> children<span class="p">.</span>map<span class="p">((</span>child<span class="p">,</span> i<span class="p">)</span> <span class="p">=></span> <span class="p">{</span>
            <span class="k">return</span> child<span class="p">.</span>layoutNextFragment<span class="p">({</span>
                fixedInlineSize<span class="o">:</span> unconstrainedSizes<span class="p">[</span>i<span class="p">]</span> <span class="o">+</span> extraSpace<span class="p">,</span>
                availableBlockSize
            <span class="p">});</span>
        <span class="p">});</span>

        <span class="c1">// フラグメントの位置決め。</span>
<span class="c1"></span>        <span class="kd">let</span> inlineOffset <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kd">let</span> maxChildBlockSize <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> fragment <span class="k">of</span> childFragments<span class="p">)</span> <span class="p">{</span>
            fragment<span class="p">.</span>inlineOffset <span class="o">=</span> inlineOffset<span class="p">;</span>
            fragment<span class="p">.</span>blockOffset <span class="o">=</span> edges<span class="p">.</span>all<span class="p">.</span>blockStart<span class="p">;</span>

            inlineOffset <span class="o">+=</span> fragment<span class="p">.</span>inlineSize<span class="p">;</span>
            maxChildBlockSize <span class="o">=</span> Math<span class="p">.</span>max<span class="p">(</span>maxChildBlockSize<span class="p">,</span> fragment<span class="p">.</span>blockSize<span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="p">{</span>
            autoBlockSize<span class="o">:</span> maxChildBlockSize <span class="o">+</span> edges<span class="p">.</span>all<span class="p">.</span>block<span class="p">,</span>
            childFragments<span class="p">,</span>
        <span class="p">};</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre>
    </div>
    <p><code
        class="idl"><a data-link-type="idl" href="#layoutconstraints" id="ref-for-layoutconstraints③">LayoutConstraints</a></code>
      オブジェクトには <code
        class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-percentageinlinesize" id="ref-for-dom-layoutconstraints-percentageinlinesize">percentageInlineSize</a></code>
      と <code
        class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-percentageblocksize" id="ref-for-dom-layoutconstraints-percentageblocksize">percentageBlockSize</a></code>
      属性があります。これらは、レイアウトのパーセンテージがレイアウト実行時にどのサイズを基準に解決されるかを表します。</p>
    <p><code
        class="idl"><a data-link-type="idl" href="#layoutconstraints" id="ref-for-layoutconstraints④">LayoutConstraints</a></code>
      には <code
        class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-blockfragmentationtype" id="ref-for-dom-layoutconstraints-blockfragmentationtype">blockFragmentationType</a></code>
      属性があります。<a data-link-type="dfn" href="#current-layout" id="ref-for-current-layout①④">現在のレイアウト</a>は、可能であれば <code
        class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment①⑤">LayoutFragment</a></code>
      を <code
        class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-blockfragmentationoffset" id="ref-for-dom-layoutconstraints-blockfragmentationoffset">blockFragmentationOffset</a></code>
      で断片化する必要があります。</p>
    <p><a data-link-type="dfn" href="#current-layout" id="ref-for-current-layout①⑤">現在のレイアウト</a>は、<code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild②③">LayoutChild</a></code> を
      <code
        class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-blockfragmentationtype" id="ref-for-dom-layoutconstraints-blockfragmentationtype①">blockFragmentationType</a></code>
      に基づき断片化しない選択をすることができます。例えば、子に <a class="css" data-link-type="propdesc"
        href="https://www.w3.org/TR/css3-break/#propdef-break-inside" id="ref-for-propdef-break-inside">break-inside:
        avoid-page;</a> のようなプロパティがある場合です。
    </p>
    <div class="algorithm" data-algorithm="create a layout constraints object">
      ユーザーエージェントが <var>sizingMode</var>、box、および <var>internalLayoutConstraints</var> を指定して<dfn class="dfn-paneled"
        data-dfn-type="dfn" data-noexport=""
        id="create-a-layout-constraints-object">レイアウト制約オブジェクトを作成</dfn>したい場合、次の手順を実行する <em>必要があります</em>:
      <ol>
        <li data-md="">
          <p><var>sizingMode</var> が <code>"block-like"</code> の場合:</p>
          <ol>
            <li data-md="">
              <p><var>fixedInlineSize</var> を <var>box</var> の <b>border-box</b> <a data-link-type="dfn"
                  href="https://www.w3.org/TR/css-writing-modes-3/#inline-size"
                  id="ref-for-inline-size①">インラインサイズ</a>（box の書字モードに対して）を block コンテナと同様に計算した結果とする。</p>
            <li data-md="">
              <p><var>fixedBlockSize</var> を <var>box</var> の <a data-link-type="dfn"
                  href="https://www.w3.org/TR/css-writing-modes-3/#block-size" id="ref-for-block-size①">ブロックサイズ</a> が <a
                  class="css" data-link-type="maybe" href="https://www.w3.org/TR/css-sizing-3/#valdef-width-auto"
                  id="ref-for-valdef-width-auto">auto</a> の場合は null、そうでなければ block コンテナと同様に計算した <var>box</var> の
                <b>border-box</b> <a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-3/#block-size"
                  id="ref-for-block-size②">ブロックサイズ</a> とする。
              </p>
            <li data-md="">
              <p>次の内容で新しい <code
                  class="idl"><a data-link-type="idl" href="#layoutconstraints" id="ref-for-layoutconstraints⑤">LayoutConstraints</a></code>
                オブジェクトを返す:</p>
              <ul>
                <li data-md="">
                  <p><code
                      class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-fixedinlinesize" id="ref-for-dom-layoutconstraints-fixedinlinesize①">fixedInlineSize</a></code>
                    と <code
                      class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-availableinlinesize" id="ref-for-dom-layoutconstraints-availableinlinesize①">availableInlineSize</a></code>
                    を <var>fixedInlineSize</var> に設定。</p>
                <li data-md="">
                  <p><code
                      class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-percentageinlinesize" id="ref-for-dom-layoutconstraints-percentageinlinesize①">percentageInlineSize</a></code>
                    を <var>internalLayoutConstraints</var> のインライン軸（box の書字モードに対して）のパーセンテージ解決サイズに設定。</p>
                <li data-md="">
                  <p><code
                      class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-fixedblocksize" id="ref-for-dom-layoutconstraints-fixedblocksize①">fixedBlockSize</a></code>
                    を <var>fixedBlockSize</var> に設定。</p>
                <li data-md="">
                  <p><code
                      class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-availableblocksize" id="ref-for-dom-layoutconstraints-availableblocksize①">availableBlockSize</a></code>
                    を null でなければ <var>fixedBlockSize</var> に、そうでなければ <var>internalLayoutConstraints</var> のブロック軸（box
                    の書字モードに対して）の <a data-link-type="dfn" href="https://www.w3.org/TR/css-sizing-3/#available"
                      id="ref-for-available①">利用可能なスペース</a> に設定。</p>
                <li data-md="">
                  <p><code
                      class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-percentageblocksize" id="ref-for-dom-layoutconstraints-percentageblocksize①">percentageBlockSize</a></code>
                    を <var>internalLayoutConstraints</var> のブロック軸（box の書字モードに対して）のパーセンテージ解決サイズに設定。</p>
              </ul>
          </ol>
        <li data-md="">
          <p><var>sizingMode</var> が <code>"manual"</code> の場合:</p>
          <ol>
            <li data-md="">
              <p>次の内容で新しい <code
                  class="idl"><a data-link-type="idl" href="#layoutconstraints" id="ref-for-layoutconstraints⑥">LayoutConstraints</a></code>
                オブジェクトを返す:</p>
              <ul>
                <li data-md="">
                  <p><code
                      class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-fixedinlinesize" id="ref-for-dom-layoutconstraints-fixedinlinesize②">fixedInlineSize</a></code>/<code
                      class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-fixedblocksize" id="ref-for-dom-layoutconstraints-fixedblocksize②">fixedBlockSize</a></code>
                    を <var>internalLayoutConstraints</var> の親レイアウトによって強制された（box の書字モードに対しての）固定インライン／ブロックサイズに設定。どちらも null
                    の場合がある。</p>
                  <p class="note" role="note"><span>注:</span> この場合が発生する様々なシナリオについては <a href="#interaction-sizing">§4.1
                      サイズ指定</a> を参照してください。</p>
                <li data-md="">
                  <p><code
                      class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-availableinlinesize" id="ref-for-dom-layoutconstraints-availableinlinesize②">availableInlineSize</a></code>/<code
                      class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-availableblocksize" id="ref-for-dom-layoutconstraints-availableblocksize②">availableBlockSize</a></code>
                    を <var>internalLayoutConstraints</var> の <a data-link-type="dfn"
                      href="https://www.w3.org/TR/css-sizing-3/#available" id="ref-for-available②">利用可能なスペース</a> に設定。
                  </p>
                <li data-md="">
                  <p><code
                      class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-percentageinlinesize" id="ref-for-dom-layoutconstraints-percentageinlinesize②">percentageInlineSize</a></code>/<code
                      class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-percentageblocksize" id="ref-for-dom-layoutconstraints-percentageblocksize②">percentageBlockSize</a></code>
                    を <var>internalLayoutConstraints</var> のパーセンテージ解決サイズに設定。</p>
              </ul>
          </ol>
      </ol>
    </div>
    <h3 class="heading settled" data-level="3.5" id="breaking-and-fragmentation"><span class="secno">3.5. </span><span
        class="content">分割と断片化</span><a class="self-link" href="#breaking-and-fragmentation"></a>
    </h3>
    <pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed④">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="childbreaktoken"><code>ChildBreakToken</code></dfn> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-breaktype" id="ref-for-enumdef-breaktype">BreakType</a> <dfn class="nv idl-code" data-dfn-for="ChildBreakToken" data-dfn-type="attribute" data-export="" data-readonly="" data-type="BreakType" id="dom-childbreaktoken-breaktype"><code>breakType</code><a class="self-link" href="#dom-childbreaktoken-breaktype"></a></dfn>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#layoutchild" id="ref-for-layoutchild②④">LayoutChild</a> <dfn class="nv idl-code" data-dfn-for="ChildBreakToken" data-dfn-type="attribute" data-export="" data-readonly="" data-type="LayoutChild" id="dom-childbreaktoken-child"><code>child</code><a class="self-link" href="#dom-childbreaktoken-child"></a></dfn>;
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed⑤">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="breaktoken"><code>BreakToken</code></dfn> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#childbreaktoken" id="ref-for-childbreaktoken③">ChildBreakToken</a>> <dfn class="nv idl-code" data-dfn-for="BreakToken" data-dfn-type="attribute" data-export="" data-readonly="" data-type="sequence<ChildBreakToken>" id="dom-breaktoken-childbreaktokens"><code>childBreakTokens</code><a class="self-link" href="#dom-breaktoken-childbreaktokens"></a></dfn>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span> <dfn class="nv idl-code" data-dfn-for="BreakToken" data-dfn-type="attribute" data-export="" data-readonly="" data-type="any" id="dom-breaktoken-data"><code>data</code><a class="self-link" href="#dom-breaktoken-data"></a></dfn>;
};

<span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-breaktokenoptions"><code>BreakTokenOptions</code></dfn> {
    <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#childbreaktoken" id="ref-for-childbreaktoken④">ChildBreakToken</a>> <dfn class="nv idl-code" data-dfn-for="BreakTokenOptions" data-dfn-type="dict-member" data-export="" data-type="sequence<ChildBreakToken> " id="dom-breaktokenoptions-childbreaktokens"><code>childBreakTokens</code><a class="self-link" href="#dom-breaktokenoptions-childbreaktokens"></a></dfn>;
    <span class="kt">any</span> <dfn class="nv idl-code" data-default="null" data-dfn-for="BreakTokenOptions" data-dfn-type="dict-member" data-export="" data-type="any " id="dom-breaktokenoptions-data"><code>data</code><a class="self-link" href="#dom-breaktokenoptions-data"></a></dfn> = <span class="kt">null</span>;
};

<span class="kt">enum</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="enum" data-export="" id="enumdef-breaktype"><code>BreakType</code></dfn> { <dfn class="s idl-code" data-dfn-for="BreakType" data-dfn-type="enum-value" data-export="" data-lt="&quot;none&quot;|none" id="dom-breaktype-none"><code>"none"</code><a class="self-link" href="#dom-breaktype-none"></a></dfn>, <dfn class="s idl-code" data-dfn-for="BreakType" data-dfn-type="enum-value" data-export="" data-lt="&quot;line&quot;|line" id="dom-breaktype-line"><code>"line"</code><a class="self-link" href="#dom-breaktype-line"></a></dfn>, <dfn class="s idl-code" data-dfn-for="BreakType" data-dfn-type="enum-value" data-export="" data-lt="&quot;column&quot;|column" id="dom-breaktype-column"><code>"column"</code><a class="self-link" href="#dom-breaktype-column"></a></dfn>, <dfn class="s idl-code" data-dfn-for="BreakType" data-dfn-type="enum-value" data-export="" data-lt="&quot;page&quot;|page" id="dom-breaktype-page"><code>"page"</code><a class="self-link" href="#dom-breaktype-page"></a></dfn>, <dfn class="s idl-code" data-dfn-for="BreakType" data-dfn-type="enum-value" data-export="" data-lt="&quot;region&quot;|region" id="dom-breaktype-region"><code>"region"</code><a class="self-link" href="#dom-breaktype-region"></a></dfn> };
</pre>
    <p><code class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild②⑤">LayoutChild</a></code>
      は複数の <code
        class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment①⑥">LayoutFragment</a></code>
      を生成することができます。
      <code class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild②⑥">LayoutChild</a></code>
      は、<code
        class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-blockfragmentationtype" id="ref-for-dom-layoutconstraints-blockfragmentationtype②">blockFragmentationType</a></code>
      が none でなければブロック方向に断片化する場合があります。さらに、<code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild②⑦">LayoutChild</a></code> が <a
        data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#inline-level"
        id="ref-for-inline-level②">インラインレベル</a> コンテンツを表す場合、<a data-link-type="dfn"
        href="#document-layout-definition-layout-options"
        id="ref-for-document-layout-definition-layout-options③">レイアウトオプション</a> の <code
        class="idl"><a data-link-type="idl" href="#dom-layoutoptions-childdisplay" id="ref-for-dom-layoutoptions-childdisplay③">childDisplay</a></code>（<code>layoutOptions</code>
      により設定）が <code>"normal"</code> の場合、行ごとに断片化することがあります。
    </p>
    <p>後続の <code
        class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment①⑦">LayoutFragment</a></code>
      は、前の <code
        class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment①⑧">LayoutFragment</a></code>
      の <code
        class="idl"><a data-link-type="idl" href="#dom-layoutfragment-breaktoken" id="ref-for-dom-layoutfragment-breaktoken⑥">breakToken</a></code>
      を使用して生成されます。これによって、<a data-link-type="dfn" href="#child-layout" id="ref-for-child-layout①">子レイアウト</a>は <code
        class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment①⑨">LayoutFragment</a></code>
      を <code
        class="idl"><a data-link-type="idl" href="#childbreaktoken" id="ref-for-childbreaktoken⑤">ChildBreakToken</a></code>
      に記録された地点から生成することができます。</p>
    <div class="example" id="example-a07cbd1c">
      <a class="self-link" href="#example-a07cbd1c"></a> この例では、子フラグメントを特定の行数だけインデントする単純なレイアウトを示しています。
      <p>この例はまた、<code
          class="idl"><a data-link-type="idl" href="#dom-layoutfragment-breaktoken" id="ref-for-dom-layoutfragment-breaktoken⑦">breakToken</a></code>
        を用いて <code
          class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment②⓪">LayoutFragment</a></code>
        の次のフラグメントを生成する方法を示しています。</p>
      <p>さらに、<code class="idl"><a data-link-type="idl" href="#breaktoken" id="ref-for-breaktoken">BreakToken</a></code>
        を使用し、<code
          class="idl"><a data-link-type="idl" href="#layoutconstraints" id="ref-for-layoutconstraints⑦">LayoutConstraints</a></code>
        の <code
          class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-blockfragmentationtype" id="ref-for-dom-layoutconstraints-blockfragmentationtype③">blockFragmentationType</a></code>
        を尊重して、前回の <code
          class="idl"><a data-link-type="idl" href="#breaktoken" id="ref-for-breaktoken①">BreakToken</a></code>
        からレイアウトを再開しています。
        <code
          class="idl"><a data-link-type="idl" href="#dictdef-fragmentresultoptions" id="ref-for-dictdef-fragmentresultoptions①">FragmentResultOptions</a></code>
        と <code
          class="idl"><a data-link-type="idl" href="#dom-fragmentresultoptions-breaktoken" id="ref-for-dom-fragmentresultoptions-breaktoken">breakToken</a></code>
        を返し、
        レイアウトの再開に利用します。
      </p>
      <pre class="lang-javascript highlight">registerLayout<span class="p">(</span><span class="s1">'indent-lines'</span><span class="p">,</span> <span class="kr">class</span> <span class="p">{</span>
    <span class="kr">static</span> layoutOptions <span class="o">=</span> <span class="p">{</span>childDisplay<span class="o">:</span> <span class="s1">'normal'</span><span class="p">};</span>
    <span class="kr">static</span> inputProperties <span class="o">=</span> <span class="p">[</span><span class="s1">'--indent'</span><span class="p">,</span> <span class="s1">'--indent-lines'</span><span class="p">];</span>

    <span class="o">*</span>layout<span class="p">(</span>children<span class="p">,</span> edges<span class="p">,</span> constraints<span class="p">,</span> styleMap<span class="p">,</span> breakToken<span class="p">)</span> <span class="p">{</span>

        <span class="c1">// （内側の）利用可能サイズを決定する。</span>
<span class="c1"></span>        <span class="kr">const</span> availableInlineSize <span class="o">=</span>
            constraints<span class="p">.</span>fixedInlineSize <span class="o">-</span> edges<span class="p">.</span>all<span class="p">.</span>inline<span class="p">;</span>
        <span class="kr">const</span> availableBlockSize <span class="o">=</span>
            <span class="p">(</span>constraints<span class="p">.</span>fixedBlockSize <span class="o">||</span> <span class="kc">Infinity</span><span class="p">)</span> <span class="o">-</span> edges<span class="p">.</span>all<span class="p">.</span>block<span class="p">;</span>

        <span class="c1">// インデントする行数とインデント量を決定する。</span>
<span class="c1"></span>        <span class="kr">const</span> indent <span class="o">=</span> resolveLength<span class="p">(</span>constraints<span class="p">,</span> styleMap<span class="p">.</span>get<span class="p">(</span><span class="s1">'--indent'</span><span class="p">));</span>
        <span class="kd">let</span> lines <span class="o">=</span> styleMap<span class="p">.</span>get<span class="p">(</span><span class="s1">'--indent-lines'</span><span class="p">).</span>value<span class="p">;</span>

        <span class="kr">const</span> childFragments <span class="o">=</span> <span class="p">[];</span>

        <span class="kd">let</span> childBreakToken <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span>breakToken<span class="p">)</span> <span class="p">{</span>
            childBreakToken <span class="o">=</span> breakToken<span class="p">.</span>childBreakTokens<span class="p">[</span><span class="mi">0</span><span class="p">];</span>

            <span class="c1">// すでにフラグメントを生成した子要素をすべて削除する。</span>
<span class="c1"></span>            children<span class="p">.</span>splice<span class="p">(</span><span class="mi">0</span><span class="p">,</span> children<span class="p">.</span>indexOf<span class="p">(</span>childBreakToken<span class="p">.</span>child<span class="p">));</span>
        <span class="p">}</span>

        <span class="kd">let</span> blockOffset <span class="o">=</span> edges<span class="p">.</span>all<span class="p">.</span>blockStart<span class="p">;</span>
        <span class="kd">let</span> child <span class="o">=</span> children<span class="p">.</span>shift<span class="p">();</span>
        <span class="k">while</span> <span class="p">(</span>child<span class="p">)</span> <span class="p">{</span>
            <span class="kr">const</span> shouldIndent <span class="o">=</span> lines<span class="o">--</span> <span class="o">></span> <span class="mi">0</span><span class="p">;</span>

            <span class="c1">// インデント分インラインサイズを調整する。</span>
<span class="c1"></span>            <span class="kr">const</span> childAvailableInlineSize <span class="o">=</span> shouldIndent <span class="o">?</span>
                availableInlineSize <span class="o">-</span> indent <span class="o">:</span> availableInlineSize<span class="p">;</span>

            <span class="kr">const</span> childConstraints <span class="o">=</span> <span class="p">{</span>
                availableInlineSize<span class="o">:</span> childAvailableInlineSize<span class="p">,</span>
                availableBlockSize<span class="p">,</span>
                percentageInlineSize<span class="o">:</span> availableInlineSize<span class="p">,</span>
                blockFragmentationType<span class="o">:</span> constraints<span class="p">.</span>blockFragmentationType<span class="p">,</span>
            <span class="p">};</span>

            <span class="kr">const</span> fragment <span class="o">=</span> <span class="k">yield</span> child<span class="p">.</span>layoutNextFragment<span class="p">(</span>childConstraints<span class="p">,</span>
                                                            childBreakToken<span class="p">);</span>
            childFragments<span class="p">.</span>push<span class="p">(</span>fragment<span class="p">);</span>

            <span class="c1">// フラグメントの位置決め。</span>
<span class="c1"></span>            fragment<span class="p">.</span>inlineOffset <span class="o">=</span> shouldIndent <span class="o">?</span>
                edges<span class="p">.</span>all<span class="p">.</span>inlineStart <span class="o">+</span> indent <span class="o">:</span> edges<span class="p">.</span>all<span class="p">.</span>inlineStart<span class="p">;</span>
            fragment<span class="p">.</span>blockOffset <span class="o">=</span> blockOffset<span class="p">;</span>
            blockOffset <span class="o">+=</span> fragment<span class="p">.</span>blockSize<span class="p">;</span>

            <span class="c1">// ブロック断片化の制限を超えたかどうかを確認する。</span>
<span class="c1"></span>            <span class="k">if</span> <span class="p">(</span>constraints<span class="p">.</span>blockFragmentationType <span class="o">!=</span> <span class="s1">'none'</span> <span class="o">&amp;&amp;</span>
                blockOffset <span class="o">></span> constraints<span class="p">.</span>blockSize<span class="p">)</span> <span class="p">{</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span>fragment<span class="p">.</span>breakToken<span class="p">)</span> <span class="p">{</span>
                childBreakToken <span class="o">=</span> fragment<span class="p">.</span>breakToken<span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="c1">// フラグメントに breakToken が無い場合、次の子要素に移る。</span>
<span class="c1"></span>                child <span class="o">=</span> children<span class="p">.</span>shift<span class="p">();</span>
                childBreakToken <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="kr">const</span> autoBlockSize <span class="o">=</span> blockOffset <span class="o">+</span> edges<span class="p">.</span>all<span class="p">.</span>blockEnd<span class="p">;</span>

        <span class="c1">// フラグメントを返す。</span>
<span class="c1"></span>        <span class="kr">const</span> result <span class="o">=</span> <span class="p">{</span>
            autoBlockSize<span class="p">,</span>
            childFragments<span class="o">:</span> childFragments<span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span>childBreakToken<span class="p">)</span> <span class="p">{</span>
            result<span class="p">.</span>breakToken <span class="o">=</span> <span class="p">{</span>
                childBreakTokens<span class="o">:</span> <span class="p">[</span>childBreakToken<span class="p">],</span>
            <span class="p">};</span>
        <span class="p">}</span>

        <span class="k">return</span> result<span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre>
    </div>
    <h3 class="heading settled" data-level="3.6" id="edges"><span class="secno">3.6. </span><span
        class="content">エッジ</span><a class="self-link" href="#edges"></a></h3>
    <pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed⑥">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="layoutedgesizes"><code>LayoutEdgeSizes</code></dfn> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②⓪"><span class="kt">double</span></a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutEdgeSizes" data-dfn-type="attribute" data-export="" data-readonly="" data-type="double" id="dom-layoutedgesizes-inlinestart"><code>inlineStart</code></dfn>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②①"><span class="kt">double</span></a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutEdgeSizes" data-dfn-type="attribute" data-export="" data-readonly="" data-type="double" id="dom-layoutedgesizes-inlineend"><code>inlineEnd</code></dfn>;

  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②②"><span class="kt">double</span></a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutEdgeSizes" data-dfn-type="attribute" data-export="" data-readonly="" data-type="double" id="dom-layoutedgesizes-blockstart"><code>blockStart</code></dfn>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②③"><span class="kt">double</span></a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutEdgeSizes" data-dfn-type="attribute" data-export="" data-readonly="" data-type="double" id="dom-layoutedgesizes-blockend"><code>blockEnd</code></dfn>;

  // Convenience attributes for the sum in one direction.
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②④"><span class="kt">double</span></a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutEdgeSizes" data-dfn-type="attribute" data-export="" data-readonly="" data-type="double" id="dom-layoutedgesizes-inline"><code>inline</code></dfn>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②⑤"><span class="kt">double</span></a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutEdgeSizes" data-dfn-type="attribute" data-export="" data-readonly="" data-type="double" id="dom-layoutedgesizes-block"><code>block</code></dfn>;
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed⑦">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="layoutedges"><code>LayoutEdges</code></dfn> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#layoutedgesizes" id="ref-for-layoutedgesizes">LayoutEdgeSizes</a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutEdges" data-dfn-type="attribute" data-export="" data-readonly="" data-type="LayoutEdgeSizes" id="dom-layoutedges-border"><code>border</code></dfn>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#layoutedgesizes" id="ref-for-layoutedgesizes①">LayoutEdgeSizes</a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutEdges" data-dfn-type="attribute" data-export="" data-readonly="" data-type="LayoutEdgeSizes" id="dom-layoutedges-scrollbar"><code>scrollbar</code></dfn>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#layoutedgesizes" id="ref-for-layoutedgesizes②">LayoutEdgeSizes</a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutEdges" data-dfn-type="attribute" data-export="" data-readonly="" data-type="LayoutEdgeSizes" id="dom-layoutedges-padding"><code>padding</code></dfn>;

  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#layoutedgesizes" id="ref-for-layoutedgesizes③">LayoutEdgeSizes</a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="LayoutEdges" data-dfn-type="attribute" data-export="" data-readonly="" data-type="LayoutEdgeSizes" id="dom-layoutedges-all"><code>all</code></dfn>;
};
</pre>
    <p><code class="idl"><a data-link-type="idl" href="#layoutedges" id="ref-for-layoutedges">LayoutEdges</a></code>
      オブジェクトは layout メソッドに渡されます。これは、現在レイアウトされているボックスの <a data-link-type="dfn"
        href="https://www.w3.org/TR/CSS21/box.html#box-dimensions" id="ref-for-box-dimensions">ボックスモデルのエッジ</a>のサイズを表します。
    </p>
    <p><code class="idl"><a data-link-type="idl" href="#layoutedges" id="ref-for-layoutedges①">LayoutEdges</a></code> には
      <code
        class="idl"><a data-link-type="idl" href="#dom-layoutedges-border" id="ref-for-dom-layoutedges-border">border</a></code>、
      <code
        class="idl"><a data-link-type="idl" href="#dom-layoutedges-scrollbar" id="ref-for-dom-layoutedges-scrollbar">scrollbar</a></code>、
      <code
        class="idl"><a data-link-type="idl" href="#dom-layoutedges-padding" id="ref-for-dom-layoutedges-padding">padding</a></code>
      属性があります。これらはそれぞれのエッジの幅を表します。
    </p>
    <p><code class="idl"><a data-link-type="idl" href="#layoutedges" id="ref-for-layoutedges②">LayoutEdges</a></code> には
      <code
        class="idl"><a data-link-type="idl" href="#dom-layoutedges-all" id="ref-for-dom-layoutedges-all">all</a></code>
      属性があります。これは
      <code
        class="idl"><a data-link-type="idl" href="#dom-layoutedges-border" id="ref-for-dom-layoutedges-border①">border</a></code>、
      <code
        class="idl"><a data-link-type="idl" href="#dom-layoutedges-scrollbar" id="ref-for-dom-layoutedges-scrollbar①">scrollbar</a></code>、
      <code
        class="idl"><a data-link-type="idl" href="#dom-layoutedges-padding" id="ref-for-dom-layoutedges-padding①">padding</a></code>
      エッジの合計値を表す便利な属性です。
    </p>
    <p><code
        class="idl"><a data-link-type="idl" href="#layoutedgesizes" id="ref-for-layoutedgesizes④">LayoutEdgeSizes</a></code>
      オブジェクトは、各 <a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-3/#abstract-dimensions"
        id="ref-for-abstract-dimensions">抽象的な寸法</a>
      (<code
        class="idl"><a data-link-type="idl" href="#dom-layoutedgesizes-inlinestart" id="ref-for-dom-layoutedgesizes-inlinestart">inlineStart</a></code>、
      <code
        class="idl"><a data-link-type="idl" href="#dom-layoutedgesizes-inlineend" id="ref-for-dom-layoutedgesizes-inlineend">inlineEnd</a></code>、
      <code
        class="idl"><a data-link-type="idl" href="#dom-layoutedgesizes-blockstart" id="ref-for-dom-layoutedgesizes-blockstart">blockStart</a></code>、
      <code
        class="idl"><a data-link-type="idl" href="#dom-layoutedgesizes-blockend" id="ref-for-dom-layoutedgesizes-blockend">blockEnd</a></code>)
      のエッジの幅を CSS ピクセル単位で表します。
    </p>
    <p><code
        class="idl"><a data-link-type="idl" href="#dom-layoutedgesizes-inline" id="ref-for-dom-layoutedgesizes-inline">inline</a></code>
      と <code
        class="idl"><a data-link-type="idl" href="#dom-layoutedgesizes-block" id="ref-for-dom-layoutedgesizes-block">block</a></code>
      は <code
        class="idl"><a data-link-type="idl" href="#layoutedgesizes" id="ref-for-layoutedgesizes⑤">LayoutEdgeSizes</a></code>
      オブジェクト上の便利な属性で、その方向の合計値を表します。</p>
    <div class="example" id="example-9efc3451">
      <a class="self-link" href="#example-9efc3451"></a> 次の例は、CSS でスタイルされたノードと、それに対応する <code
        class="idl"><a data-link-type="idl" href="#layoutedges" id="ref-for-layoutedges③">LayoutEdges</a></code>
      の内容を示します。
      <pre class="lang-html highlight"><span class="p">&lt;</span><span class="nt">style</span><span class="p">></span>
<span class="p">.</span><span class="nc">container</span> <span class="p">{</span>
  <span class="k">width</span><span class="p">:</span> <span class="mi">50</span><span class="kt">px</span><span class="p">;</span>
  <span class="k">height</span><span class="p">:</span> <span class="mi">50</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">box</span> <span class="p">{</span>
  <span class="k">display</span><span class="p">:</span> <span class="nf">layout</span><span class="p">(</span><span class="n">box</span><span class="o">-</span><span class="kc">edges</span><span class="p">);</span>

  <span class="k">padding</span><span class="p">:</span> <span class="mi">10</span><span class="kt">%</span><span class="p">;</span>
  <span class="k">border</span><span class="p">:</span> <span class="kc">solid</span> <span class="mi">2</span><span class="kt">px</span><span class="p">;</span>
  <span class="k">overflow-y</span><span class="p">:</span> <span class="kc">scroll</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">></span>

<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"container"</span><span class="p">></span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"box"</span><span class="p">>&lt;/</span><span class="nt">div</span><span class="p">></span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
</pre>
      <pre class="lang-javascript highlight">registerLayout<span class="p">(</span><span class="s1">'box-edges'</span><span class="p">,</span> <span class="kr">class</span> <span class="p">{</span>
    <span class="o">*</span>layout<span class="p">(</span>children<span class="p">,</span> edges<span class="p">,</span> constraints<span class="p">,</span> styleMap<span class="p">,</span> breakToken<span class="p">)</span> <span class="p">{</span>
        edges<span class="p">.</span>padding<span class="p">.</span>inlineStart<span class="p">;</span> <span class="c1">// 5 (10% * 50px = 5px)</span>
<span class="c1"></span>        edges<span class="p">.</span>border<span class="p">.</span>blockEnd<span class="p">;</span> <span class="c1">// 2</span>
<span class="c1"></span>        edges<span class="p">.</span>scrollbar<span class="p">.</span>inlineEnd<span class="p">;</span> <span class="c1">// UA依存、0か16など</span>
<span class="c1"></span>        edges<span class="p">.</span>all<span class="p">.</span>block<span class="p">;</span> <span class="c1">// 14 (2 + 5 + 5 + 2)</span>
<span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span>
</pre>
    </div>
    <h2 class="heading settled" data-level="4" id="interactions-with-other-modules"><span class="secno">4. </span><span
        class="content">他のモジュールとの相互作用</span><a class="self-link" href="#interactions-with-other-modules"></a></h2>
    <p>このセクションでは、他の CSS モジュールが CSS Layout API とどのように相互作用するかを説明します。</p>
    <h3 class="heading settled" data-level="4.1" id="interaction-sizing"><span class="secno">4.1. </span><span
        class="content">サイズ指定</span><a class="self-link" href="#interaction-sizing"></a></h3>
    <p>ユーザーエージェントは <code
        class="idl"><a data-link-type="idl" href="#layoutconstraints" id="ref-for-layoutconstraints⑧">LayoutConstraints</a></code>
      オブジェクトを使って、<a data-link-type="dfn" href="#current-layout"
        id="ref-for-current-layout①⑥">現在のレイアウト</a>にフラグメントの希望サイズを伝えなければなりません。</p>
    <p>ユーザーエージェントがボックスにサイズを強制したい場合、<code
        class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-fixedinlinesize" id="ref-for-dom-layoutconstraints-fixedinlinesize③">fixedInlineSize</a></code>
      と <code
        class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-fixedblocksize" id="ref-for-dom-layoutconstraints-fixedblocksize③">fixedBlockSize</a></code>
      属性を使います。</p>
    <p><a data-link-type="dfn" href="#layout-api-container" id="ref-for-layout-api-container①⓪">レイアウト API コンテナ</a>は、<a
        data-link-type="dfn" href="#document-layout-definition-layout-options"
        id="ref-for-document-layout-definition-layout-options④">レイアウトオプション</a> の <code
        class="idl"><a data-link-type="idl" href="#dom-layoutoptions-sizing" id="ref-for-dom-layoutoptions-sizing">sizing</a></code>
      の値によって、様々な方法でサイズ情報を受け取ることができます（クラスの <code>layoutOptions</code> で設定）。</p>
    <p><a data-link-type="dfn" href="#document-layout-definition-layout-options"
        id="ref-for-document-layout-definition-layout-options⑤">レイアウトオプション</a> の <code
        class="idl"><a data-link-type="idl" href="#dom-layoutoptions-sizing" id="ref-for-dom-layoutoptions-sizing①">sizing</a></code>
      の値が <code>"block-like"</code> の場合、<a data-link-type="dfn" href="#layout-api-container"
        id="ref-for-layout-api-container①①">レイアウト API コンテナ</a>に渡される <code
        class="idl"><a data-link-type="idl" href="#layoutconstraints" id="ref-for-layoutconstraints⑨">LayoutConstraints</a></code>
      は:</p>
    <ul>
      <li data-md="">
        <p><em>必ず</em> <code
            class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-fixedinlinesize" id="ref-for-dom-layoutconstraints-fixedinlinesize④">fixedInlineSize</a></code>
          を <a data-link-type="biblio" href="#biblio-css-sizing-3">[css-sizing-3]</a>
          で指定されたルールと参加している整形コンテキストに基づいて計算・設定しなければなりません。例:</p>
        <ul>
          <li data-md="">
            <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#block-level"
                id="ref-for-block-level②">ブロックレベル</a>ボックスが <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-display-3/#block-formatting-context"
                id="ref-for-block-formatting-context">ブロック整形コンテキスト</a>内にある場合、<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-display-3/#block-box"
                id="ref-for-block-box">ブロックボックス</a>として整形コンテキストを確立し、<a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-sizing-3/#valdef-width-auto" id="ref-for-valdef-width-auto①">auto</a> <a
                data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-3/#inline-size"
                id="ref-for-inline-size②">インラインサイズ</a>は非置換ブロックボックスと同様に計算されます。</p>
          <li data-md="">
            <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#inline-level"
                id="ref-for-inline-level③">インラインレベル</a>ボックスが <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-display-3/#inline-formatting-context"
                id="ref-for-inline-formatting-context">インライン整形コンテキスト</a>内にある場合、インラインブロック等の原子的インラインレベルボックスとしてサイズ指定されます。
            </p>
        </ul>
      <li data-md="">
        <p><em>必ず</em> <code
            class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-fixedblocksize" id="ref-for-dom-layoutconstraints-fixedblocksize④">fixedBlockSize</a></code>
          を <a data-link-type="biblio" href="#biblio-css-sizing-3">[css-sizing-3]</a>
          で指定されたルールと整形コンテキストに基づいて計算・設定しなければなりません。<a data-link-type="dfn" href="#layout-api-container"
            id="ref-for-layout-api-container①②">レイアウト API コンテナ</a> が <a class="css" data-link-type="maybe"
            href="https://www.w3.org/TR/css-sizing-3/#valdef-width-auto" id="ref-for-valdef-width-auto②">auto</a> <a
            data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-3/#block-size"
            id="ref-for-block-size③">ブロックサイズ</a>で事前に決定できない場合、<code
            class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-fixedblocksize" id="ref-for-dom-layoutconstraints-fixedblocksize⑤">fixedBlockSize</a></code>
          は <code>null</code> に設定します。</p>
    </ul>
    <p><a data-link-type="dfn" href="#document-layout-definition-layout-options"
        id="ref-for-document-layout-definition-layout-options⑥">レイアウトオプション</a> の <code
        class="idl"><a data-link-type="idl" href="#dom-layoutoptions-sizing" id="ref-for-dom-layoutoptions-sizing②">sizing</a></code>
      の値が <code>"manual"</code> の場合、ユーザーエージェントは <code
        class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-fixedinlinesize" id="ref-for-dom-layoutconstraints-fixedinlinesize⑤">fixedInlineSize</a></code>
      や <code
        class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-fixedblocksize" id="ref-for-dom-layoutconstraints-fixedblocksize⑥">fixedBlockSize</a></code>
      を事前に計算してはなりません。
      ただし、参加している整形コンテキストによって特定のサイズが強制される場合は例外です。例えば:</p>
    <ul>
      <li data-md="">
        <p><a data-link-type="dfn" href="#layout-api-container" id="ref-for-layout-api-container①③">レイアウト API コンテナ</a>が
          <a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#block-formatting-context"
            id="ref-for-block-formatting-context①">ブロック整形コンテキスト</a>内、inflowで、<a class="css" data-link-type="maybe"
            href="https://www.w3.org/TR/css-sizing-3/#valdef-width-auto" id="ref-for-valdef-width-auto③">auto</a>
          インラインサイズの場合、ユーザーエージェントは <code
            class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-fixedinlinesize" id="ref-for-dom-layoutconstraints-fixedinlinesize⑥">fixedInlineSize</a></code>
          を <a data-link-type="dfn" href="https://www.w3.org/TR/css-sizing-3/#stretch-fit-inline-size"
            id="ref-for-stretch-fit-inline-size">stretch-fit インラインサイズ</a>に設定しなければなりません。
        </p>
    </ul>
    <div class="note" role="note">
      注: 下記の例では <a data-link-type="dfn" href="#layout-api-container" id="ref-for-layout-api-container①④">レイアウト API
        コンテナ</a> のインラインサイズは 50 に設定されています。
      <pre class="lang-html highlight"><span class="p">&lt;</span><span class="nt">style</span><span class="p">></span>
  <span class="p">#</span><span class="nn">container</span> <span class="p">{</span>
    <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">box-sizing</span><span class="p">:</span> <span class="kc">border-box</span><span class="p">;</span>
    <span class="k">padding</span><span class="p">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="p">#</span><span class="nn">layout-api</span> <span class="p">{</span>
    <span class="k">display</span><span class="p">:</span> <span class="nf">layout</span><span class="p">(</span><span class="n">foo</span><span class="p">);</span>
    <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">></span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"container"</span><span class="p">></span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"layout-api"</span><span class="p">>&lt;/</span><span class="nt">div</span><span class="p">></span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
</pre>
    </div>
    <h4 class="heading settled" data-level="4.1.1" id="interaction-sizing-positiong-layout"><span class="secno">4.1.1.
      </span><span class="content">配置されたレイアウトのサイズ指定</span><a class="self-link"
        href="#interaction-sizing-positiong-layout"></a></h4>
    <p><a data-link-type="dfn" href="#layout-api-container" id="ref-for-layout-api-container①⑤">レイアウト API
        コンテナ</a>がフロー外で配置されている場合、ユーザーエージェントは
      配置サイズの方程式（<a href="https://www.w3.org/TR/css3-positioning/#abs-non-replaced-width">CSS Positioned Layout 3 §8.1
        絶対/固定配置非置換要素の幅</a>、
      <a href="https://www.w3.org/TR/css3-positioning/#abs-non-replaced-height">CSS Positioned Layout 3 §8.3
        絶対/固定配置非置換要素の高さ</a>）を解決し、
      適切な <code
        class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-fixedinlinesize" id="ref-for-dom-layoutconstraints-fixedinlinesize⑦">fixedInlineSize</a></code>
      と <code
        class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-fixedblocksize" id="ref-for-dom-layoutconstraints-fixedblocksize⑦">fixedBlockSize</a></code>
      を設定しなければなりません。
    </p>
    <div class="note" role="note">
      注: 下記の例では <a data-link-type="dfn" href="#layout-api-container" id="ref-for-layout-api-container①⑥">レイアウト API
        コンテナ</a> のインラインサイズとブロックサイズは 80 に固定されています。
      <pre class="lang-html highlight"><span class="p">&lt;</span><span class="nt">style</span><span class="p">></span>
  <span class="p">#</span><span class="nn">container</span> <span class="p">{</span>
    <span class="k">position</span><span class="p">:</span> <span class="kc">relative</span><span class="p">;</span>
    <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">px</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="p">#</span><span class="nn">layout-api</span> <span class="p">{</span>
    <span class="k">display</span><span class="p">:</span> <span class="nf">layout</span><span class="p">(</span><span class="n">foo</span><span class="p">);</span>
    <span class="k">top</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">bottom</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">left</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">right</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">></span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"container"</span><span class="p">></span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"layout-api"</span><span class="p">>&lt;/</span><span class="nt">div</span><span class="p">></span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
</pre>
    </div>
    <h3 class="heading settled" data-level="4.2" id="interaction-positioning"><span class="secno">4.2. </span><span
        class="content">配置</span><a class="self-link" href="#interaction-positioning"></a></h3>
    <p>この仕様レベルにおけるすべての配置はユーザーエージェントによって処理されます。</p>
    <p>その結果：</p>
    <ul>
      <li data-md="">
        <p>フロー外の子要素は <code
            class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild②⑨">LayoutChild</a></code>として現れません。
        </p>
      <li data-md="">
        <p><a data-link-type="dfn" href="#layout-api-container" id="ref-for-layout-api-container①⑦">レイアウト API コンテナ</a>は
          <a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#containing-block"
            id="ref-for-containing-block③">包含ブロック</a>を確立します。<a
            href="https://www.w3.org/TR/CSS2/visudet.html#containing-block-details">ブロックコンテナと同様に</a>。<a
            data-link-type="biblio" href="#biblio-css21">[CSS21]</a>
        </p>
      <li data-md="">
        <p><code
            class="idl"><a data-link-type="idl" href="#dom-layoutfragment-inlineoffset" id="ref-for-dom-layoutfragment-inlineoffset③">inlineOffset</a></code>
          と <code
            class="idl"><a data-link-type="idl" href="#dom-layoutfragment-blockoffset" id="ref-for-dom-layoutfragment-blockoffset③">blockOffset</a></code>
          は、
          配置や変形が行われる前のフラグメントの位置を表します。</p>
      <li data-md="">
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/CSS21/visudet.html#static-position"
            id="ref-for-static-position">静的位置</a>は、
          <a data-link-type="dfn" href="#layout-api-container" id="ref-for-layout-api-container①⑧">レイアウト API
            コンテナ</a>の絶対配置子要素の場合、
          <a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-3/#inline-start"
            id="ref-for-inline-start">inline-start</a>、<a data-link-type="dfn"
            href="https://www.w3.org/TR/css-writing-modes-3/#block-start" id="ref-for-block-start">block-start</a>
          のパディングエッジになります。自動マージンは子要素に対してゼロとして扱われます。
        </p>
    </ul>
    <div class="note" role="note">
      注: 下記の例では：
      <ul>
        <li data-md="">
          <p>"child-relative" はレイアウト作者に渡される唯一の子要素です。もし (<code
              class="idl"><a data-link-type="idl" href="#dom-layoutfragment-inlineoffset" id="ref-for-dom-layoutfragment-inlineoffset④">inlineOffset</a></code>
            <code>= 20</code>, <code
              class="idl"><a data-link-type="idl" href="#dom-layoutfragment-blockoffset" id="ref-for-dom-layoutfragment-blockoffset④">blockOffset</a></code>
            <code> = 30</code>) に配置された場合、最終的な位置は (<code>25</code>, <code>40</code>) となり、相対配置はユーザーエージェントによって処理されます。
          </p>
        <li data-md="">
          <p>"child-absolute" は <code
              class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild③⓪">LayoutChild</a></code>としては現れず、
            ユーザーエージェントによってレイアウト・配置されます。</p>
        <li data-md="">
          <p>上記の例は、sticky や固定配置の子要素にも同様に適用されます。</p>
      </ul>
      <pre class="lang-html highlight"><span class="p">&lt;</span><span class="nt">style</span><span class="p">></span>
  <span class="p">#</span><span class="nn">container</span> <span class="p">{</span>
    <span class="k">display</span><span class="p">:</span> <span class="nf">layout</span><span class="p">(</span><span class="n">foo</span><span class="p">);</span>
    <span class="k">position</span><span class="p">:</span> <span class="kc">relative</span><span class="p">;</span> <span class="c">/* container は包含ブロック */</span>
    <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">px</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="p">#</span><span class="nn">child-relative</span> <span class="p">{</span>
    <span class="k">position</span><span class="p">:</span> <span class="kc">relative</span><span class="p">;</span>
    <span class="k">left</span><span class="p">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">top</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">></span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"container"</span><span class="p">></span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"child-relative"</span><span class="p">>&lt;/</span><span class="nt">div</span><span class="p">></span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"child-absolute"</span><span class="p">>&lt;/</span><span class="nt">div</span><span class="p">></span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
</pre>
    </div>
    <h3 class="heading settled" data-level="4.3" id="interaction-overflow"><span class="secno">4.3. </span><span
        class="content">オーバーフロー</span><a class="self-link" href="#interaction-overflow"></a></h3>
    <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scrollable-overflow"
        id="ref-for-scrollable-overflow">スクロール可能オーバーフロー</a>は、<a data-link-type="dfn" href="#layout-api-container"
        id="ref-for-layout-api-container②⓪">レイアウト API コンテナ</a>の場合、この仕様レベルではユーザーエージェントによって処理されます。</p>
    <p>著者の <a data-link-type="dfn" href="#layout-api-container" id="ref-for-layout-api-container②①">レイアウト API コンテナ</a>
      は、ブロックコンテナと同様にスクロール可能オーバーフローを計算するべきです。</p>
    <p>たとえ著者の <a data-link-type="dfn" href="#layout-api-container" id="ref-for-layout-api-container②②">レイアウト API
        コンテナ</a> がフラグメントを <a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scrollable-overflow"
        id="ref-for-scrollable-overflow①">スクロール可能オーバーフロー</a>領域に配置しても、相対位置や変形によってフラグメントが移動し、<a data-link-type="dfn"
        href="https://www.w3.org/TR/css-overflow-3/#scrollable-overflow"
        id="ref-for-scrollable-overflow②">スクロール可能オーバーフロー</a>領域となり、オーバーフローが発生しない場合もあります。</p>
    <h3 class="heading settled" data-level="4.4" id="interaction-fragmentation"><span class="secno">4.4. </span><span
        class="content">断片化</span><a class="self-link" href="#interaction-fragmentation"></a></h3>
    <p><a data-link-type="dfn" href="#parent-layout" id="ref-for-parent-layout③">親レイアウト</a>は、<a data-link-type="dfn"
        href="#current-layout" id="ref-for-current-layout①⑦">現在のレイアウト</a>に <a data-link-type="dfn"
        href="https://www.w3.org/TR/css3-break/#fragment" id="ref-for-fragment③">断片化</a>を要求するために、
      <code
        class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-blockfragmentationtype" id="ref-for-dom-layoutconstraints-blockfragmentationtype④">blockFragmentationType</a></code>
      と <code
        class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-blockfragmentationoffset" id="ref-for-dom-layoutconstraints-blockfragmentationoffset①">blockFragmentationOffset</a></code>
      を設定できます。
    </p>
    <p>例：<a data-link-type="biblio" href="#biblio-css-multicol-1">[css-multicol-1]</a> のレイアウトでは、<code
        class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-blockfragmentationtype" id="ref-for-dom-layoutconstraints-blockfragmentationtype⑤">blockFragmentationType</a></code>
      に <code>"column"</code> を設定し、<code
        class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-blockfragmentationoffset" id="ref-for-dom-layoutconstraints-blockfragmentationoffset②">blockFragmentationOffset</a></code>
      に子要素を断片化したい位置を指定します。</p>
    <h3 class="heading settled" data-level="4.5" id="interaction-alignment"><span class="secno">4.5. </span><span
        class="content">アラインメント</span><a class="self-link" href="#interaction-alignment"></a></h3>
    <p><a data-link-type="dfn" href="#layout-api-container" id="ref-for-layout-api-container②③">レイアウト API
        コンテナ</a>の最初／最後のベースラインセットは、ブロックコンテナと同様に生成されます（<a href="https://www.w3.org/TR/css3-align/#baseline-export">CSS Box
        Alignment 3 §9.1 Determining the Baselines of a Box</a>参照）。ただし、インフロー子要素の順序は、document order ではなく layout
      メソッド（<code
        class="idl"><a data-link-type="idl" href="#dom-fragmentresultoptions-childfragments" id="ref-for-dom-fragmentresultoptions-childfragments①">childFragments</a></code>
      経由）で返された順序で決定されるべきです。</p>
    <div class="note" role="note">
      注: 仕様の将来のレベルでは、著者自身がベースラインを定義できる機能が追加される予定です。これは以下のような形となります：
      <p><code class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild③①">LayoutChild</a></code>
        からベースライン情報を<em>取得する</em>場合：</p>
      <pre class="lang-javascript highlight"><span class="kr">const</span> fragment <span class="o">=</span> <span class="k">yield</span> child<span class="p">.</span>layoutNextFragment<span class="p">({</span>
  fixedInlineSize<span class="o">:</span> availableInlineSize<span class="p">,</span>
  baselineRequests<span class="o">:</span> <span class="p">[</span><span class="s1">'alphabetic'</span><span class="p">,</span> <span class="s1">'middle'</span><span class="p">],</span>
<span class="p">});</span>
fragment<span class="p">.</span>baselines<span class="p">.</span>get<span class="p">(</span><span class="s1">'alphabetic'</span><span class="p">)</span> <span class="o">===</span> <span class="mi">25</span> <span class="cm">/* など */</span><span class="p">;</span>
</pre>
      <p><a data-link-type="dfn" href="#parent-layout"
          id="ref-for-parent-layout④">親レイアウト</a>向けにベースライン情報を<em>生成</em>する場合：</p>
      <pre class="lang-javascript highlight">registerLayout<span class="p">(</span><span class="s1">'baseline-producing'</span><span class="p">,</span> <span class="kr">class</span> <span class="p">{</span>
  <span class="o">*</span>layout<span class="p">(</span>children<span class="p">,</span> edges<span class="p">,</span> constraints<span class="p">,</span> styleMap<span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> result <span class="o">=</span> <span class="p">{</span>baselines<span class="o">:</span> <span class="p">{}};</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> baselineRequest <span class="k">of</span> constraints<span class="p">.</span>baselineRequests<span class="p">)</span> <span class="p">{</span>
      <span class="c1">// baselineRequest === 'alphabetic' など</span>
<span class="c1"></span>      result<span class="p">.</span>baselines<span class="p">[</span>baselineRequest<span class="p">]</span> <span class="o">=</span> <span class="mi">25</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> result<span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre>
    </div>
    <h2 class="heading settled" data-level="5" id="layout"><span class="secno">5. </span><span
        class="content">レイアウト</span><a class="self-link" href="#layout"></a></h2>
    <p>このセクションでは、CSS Layout API がユーザーエージェントのレイアウトエンジンとどのように相互作用するかを説明します。</p>
    <h3 class="heading settled" data-level="5.1" id="concepts"><span class="secno">5.1. </span><span
        class="content">概念</span><a class="self-link" href="#concepts"></a></h3>
    <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport=""
        id="layout-definition">レイアウト定義</dfn>とは、著者が定義したレイアウトについて、<code
        class="idl"><a data-link-type="idl" href="#layoutworkletglobalscope" id="ref-for-layoutworkletglobalscope②">LayoutWorkletGlobalScope</a></code>が必要とする情報を記述する<a
        data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct">構造体</a>です（<a class="css"
        data-link-type="maybe" href="#valdef-display-layout"
        id="ref-for-valdef-display-layout②">layout()</a>関数で参照できます）。次の要素から成ります：</p>
    <ul>
      <li data-md="">
        <p><dfn class="dfn-paneled" data-dfn-for="layout definition" data-dfn-type="dfn" data-noexport=""
            id="layout-definition-class-constructor">クラスコンストラクター</dfn>（クラスの<a data-link-type="dfn"
            href="https://tc39.github.io/ecma262/#sec-constructor" id="ref-for-sec-constructor">コンストラクター</a>）</p>
      <li data-md="">
        <p><dfn class="dfn-paneled" data-dfn-for="layout definition" data-dfn-type="dfn" data-noexport=""
            id="layout-definition-layout-generator-function">レイアウトジェネレーター関数</dfn>（レイアウト<a data-link-type="dfn"
            href="https://tc39.github.io/ecma262/#sec-generatorfunction"
            id="ref-for-sec-generatorfunction">ジェネレーター関数</a>コールバック）</p>
      <li data-md="">
        <p><dfn class="dfn-paneled" data-dfn-for="layout definition" data-dfn-type="dfn" data-noexport=""
            id="layout-definition-intrinsic-sizes-generator-function">内在サイズジェネレーター関数</dfn>（内在サイズ<a data-link-type="dfn"
            href="https://tc39.github.io/ecma262/#sec-generatorfunction"
            id="ref-for-sec-generatorfunction①">ジェネレーター関数</a>コールバック）</p>
      <li data-md="">
        <p><dfn class="dfn-paneled" data-dfn-for="layout definition" data-dfn-type="dfn" data-noexport=""
            id="layout-definition-constructor-valid-flag">コンストラクター有効フラグ</dfn></p>
      <li data-md="">
        <p><dfn class="dfn-paneled" data-dfn-for="layout definition" data-dfn-type="dfn" data-noexport=""
            id="layout-definition-input-properties">入力プロパティ</dfn>（<a data-link-type="dfn"
            href="https://infra.spec.whatwg.org/#list" id="ref-for-list">リスト</a>形式の <code>DOMStrings</code>）</p>
      <li data-md="">
        <p><dfn class="dfn-paneled" data-dfn-for="layout definition" data-dfn-type="dfn" data-noexport=""
            id="layout-definition-child-input-properties">子入力プロパティ</dfn>（<a data-link-type="dfn"
            href="https://infra.spec.whatwg.org/#list" id="ref-for-list①">リスト</a>形式の<code>DOMStrings</code>）</p>
      <li data-md="">
        <p><dfn class="dfn-paneled" data-dfn-for="layout definition" data-dfn-type="dfn" data-noexport=""
            id="layout-definition-layout-options">レイアウトオプション</dfn>（<code
            class="idl"><a data-link-type="idl" href="#dictdef-layoutoptions" id="ref-for-dictdef-layoutoptions">LayoutOptions</a></code>）
        </p>
    </ul>
    <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport=""
        id="document-layout-definition">文書レイアウト定義</dfn>とは、著者が定義したレイアウトについて、<a data-link-type="dfn"
        href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document">文書</a>が必要とする情報を記述する<a
        data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct①">構造体</a>です（<a class="css"
        data-link-type="maybe" href="#valdef-display-layout"
        id="ref-for-valdef-display-layout③">layout()</a>関数で参照できます）。次の要素から成ります：</p>
    <ul>
      <li data-md="">
        <p><dfn class="dfn-paneled" data-dfn-for="document layout definition" data-dfn-type="dfn" data-noexport=""
            id="document-layout-definition-input-properties">入力プロパティ</dfn>（<a data-link-type="dfn"
            href="https://infra.spec.whatwg.org/#list" id="ref-for-list②">リスト</a>形式の <code>DOMStrings</code>）</p>
      <li data-md="">
        <p><dfn class="dfn-paneled" data-dfn-for="document layout definition" data-dfn-type="dfn" data-noexport=""
            id="document-layout-definition-child-input-properties">子入力プロパティ</dfn>（<a data-link-type="dfn"
            href="https://infra.spec.whatwg.org/#list" id="ref-for-list③">リスト</a>形式の<code>DOMStrings</code>）</p>
      <li data-md="">
        <p><dfn class="dfn-paneled" data-dfn-for="document layout definition" data-dfn-type="dfn" data-noexport=""
            id="document-layout-definition-layout-options">レイアウトオプション</dfn>（<code
            class="idl"><a data-link-type="idl" href="#dictdef-layoutoptions" id="ref-for-dictdef-layoutoptions①">LayoutOptions</a></code>）
        </p>
    </ul>
    <h3 class="heading settled" data-level="5.2" id="layout-invalidation"><span class="secno">5.2. </span><span
        class="content">レイアウトの無効化</span><a class="self-link" href="#layout-invalidation"></a></h3>
    <p>各<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box"
        id="ref-for-box①⓪">ボックス</a>には、関連付けられた<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport=""
        id="layout-valid-flag">レイアウト有効フラグ</dfn>があります。これは<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport=""
        id="layout-valid">layout-valid</dfn>または<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport=""
        id="layout-invalid">layout-invalid</dfn>のいずれかになります。初期値は<a data-link-type="dfn" href="#layout-invalid"
        id="ref-for-layout-invalid">layout-invalid</a>です。</p>
    <p>各<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box"
        id="ref-for-box①①">ボックス</a>には、関連付けられた<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport=""
        id="intrinsic-sizes-valid-flag">内在サイズ有効フラグ</dfn>があります。これは<dfn class="dfn-paneled" data-dfn-type="dfn"
        data-noexport="" id="intrinsic-sizes-valid">intrinsic-sizes-valid</dfn>または<dfn class="dfn-paneled"
        data-dfn-type="dfn" data-noexport="" id="intrinsic-sizes-invalid">intrinsic-sizes-invalid</dfn>のいずれかになります。初期値は<a
        data-link-type="dfn" href="#intrinsic-sizes-invalid"
        id="ref-for-intrinsic-sizes-invalid">intrinsic-sizes-invalid</a>です。</p>
    <div class="algorithm" data-algorithm="invalidate layout functions">
      ユーザーエージェントが <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport=""
        id="invalidate-layout-functions">レイアウト関数を無効化する</dfn>場合（<var>box</var>を指定）、ユーザーエージェントは以下の手順を<em>必ず</em>実行します：
      <ol>
        <li data-md="">
          <p><var>layoutFunction</var> を <var>box</var> の計算スタイルの <a class="property" data-link-type="propdesc"
              href="https://www.w3.org/TR/css-ruby-1/#propdef-display" id="ref-for-propdef-display④">display</a> プロパティの
            <a class="css" data-link-type="maybe" href="#valdef-display-layout"
              id="ref-for-valdef-display-layout④">layout()</a> 関数とする（存在する場合）。他の型の値（例：<a class="css"
              data-link-type="maybe" href="https://www.w3.org/TR/css-display-3/#valdef-display-grid"
              id="ref-for-valdef-display-grid">grid</a>）の場合は、これらの手順を中止する。
          </p>
        <li data-md="">
          <p><var>name</var> を <var>layoutFunction</var> の最初の引数とする。</p>
        <li data-md="">
          <p><var>documentDefinition</var> を <a data-link-type="dfn" href="#get-a-document-layout-definition"
              id="ref-for-get-a-document-layout-definition">文書レイアウト定義を取得</a>（<var>name</var>を指定）した結果とする。</p>
          <p><a data-link-type="dfn" href="#get-a-document-layout-definition"
              id="ref-for-get-a-document-layout-definition①">文書レイアウト定義を取得</a>が失敗した場合、または<var>documentDefinition</var> が
            <code>"invalid"</code> の場合は、これらの手順を中止する。
          </p>
        <li data-md="">
          <p><var>inputProperties</var> を <var>documentDefinition</var> の <a data-link-type="dfn"
              href="#document-layout-definition-input-properties"
              id="ref-for-document-layout-definition-input-properties">入力プロパティ</a>とする。</p>
        <li data-md="">
          <p><var>childInputProperties</var> を <var>documentDefinition</var> の <a data-link-type="dfn"
              href="#document-layout-definition-child-input-properties"
              id="ref-for-document-layout-definition-child-input-properties">子入力プロパティ</a>とする。</p>
        <li data-md="">
          <p><var>inputProperties</var> の各 <var>property</var> について、<var>property</var> の <a data-link-type="dfn"
              href="https://www.w3.org/TR/css-cascade-4/#computed-value" id="ref-for-computed-value③">計算値</a>が変化していれば、<a
              data-link-type="dfn" href="#layout-valid-flag"
              id="ref-for-layout-valid-flag">レイアウト有効フラグ</a>を<var>box</var>に対して<a data-link-type="dfn"
              href="#layout-invalid" id="ref-for-layout-invalid①">layout-invalid</a>に設定し、<a data-link-type="dfn"
              href="#intrinsic-sizes-valid-flag" id="ref-for-intrinsic-sizes-valid-flag">内在サイズ有効フラグ</a>を<a
              data-link-type="dfn" href="#intrinsic-sizes-invalid"
              id="ref-for-intrinsic-sizes-invalid①">intrinsic-sizes-invalid</a>に設定する。</p>
        <li data-md="">
          <p><var>childInputProperties</var> の各 <var>property</var> について、<var>property</var> の <a data-link-type="dfn"
              href="https://www.w3.org/TR/css-cascade-4/#computed-value" id="ref-for-computed-value④">計算値</a>が変化していれば、<a
              data-link-type="dfn" href="#layout-valid-flag"
              id="ref-for-layout-valid-flag①">レイアウト有効フラグ</a>を<var>box</var>に対して<a data-link-type="dfn"
              href="#layout-invalid" id="ref-for-layout-invalid②">layout-invalid</a>に設定し、<a data-link-type="dfn"
              href="#intrinsic-sizes-valid-flag" id="ref-for-intrinsic-sizes-valid-flag①">内在サイズ有効フラグ</a>を<a
              data-link-type="dfn" href="#intrinsic-sizes-invalid"
              id="ref-for-intrinsic-sizes-invalid②">intrinsic-sizes-invalid</a>に設定する。</p>
      </ol>
    </div>
    <p><a data-link-type="dfn" href="#invalidate-layout-functions"
        id="ref-for-invalidate-layout-functions">レイアウト関数の無効化</a>は、ユーザーエージェントがボックスの計算スタイルを再計算したとき、またはそのボックスの子の計算スタイルが再計算されたときに<em>必ず</em>実行されます。
    </p>
    <p><code
        class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild③②">LayoutChild</a></code>で表現される子<a
        data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box" id="ref-for-box①④">ボックス</a>が<a
        data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box-tree"
        id="ref-for-box-tree⑥">ボックスツリー</a>に追加・削除された場合、または計算スタイルの変更や子孫の変更によりレイアウトが無効化された場合、<em>かつ</em>その無効化がボックスツリー上位に伝播すべき場合、現在の<a
        data-link-type="dfn" href="#layout-valid-flag" id="ref-for-layout-valid-flag②">レイアウト有効フラグ</a>を<a
        data-link-type="dfn" href="#layout-invalid" id="ref-for-layout-invalid③">layout-invalid</a>に、現在の<a
        data-link-type="dfn" href="#intrinsic-sizes-valid-flag"
        id="ref-for-intrinsic-sizes-valid-flag②">内在サイズ有効フラグ</a>を<a data-link-type="dfn" href="#intrinsic-sizes-invalid"
        id="ref-for-intrinsic-sizes-invalid③">intrinsic-sizes-invalid</a>に設定します。
    </p>
    <p><a data-link-type="dfn" href="#layout-api-container" id="ref-for-layout-api-container②④">レイアウト API
        コンテナ</a>の計算スタイルが変更され、その変更が<code
        class="idl"><a data-link-type="idl" href="#layoutedges" id="ref-for-layoutedges④">LayoutEdges</a></code>オブジェクト内部の値に影響する場合、ボックスの<a
        data-link-type="dfn" href="#layout-valid-flag" id="ref-for-layout-valid-flag③">レイアウト有効フラグ</a>を<a
        data-link-type="dfn" href="#layout-invalid" id="ref-for-layout-invalid④">layout-invalid</a>に、ボックスの<a
        data-link-type="dfn" href="#intrinsic-sizes-valid-flag"
        id="ref-for-intrinsic-sizes-valid-flag③">内在サイズ有効フラグ</a>を<a data-link-type="dfn" href="#intrinsic-sizes-invalid"
        id="ref-for-intrinsic-sizes-invalid④">intrinsic-sizes-invalid</a>に設定します。</p>
    <p>計算スタイルの変更が<code
        class="idl"><a data-link-type="idl" href="#layoutconstraints" id="ref-for-layoutconstraints①⓪">LayoutConstraints</a></code>オブジェクト内部の値に影響する場合は、ボックスの<a
        data-link-type="dfn" href="#intrinsic-sizes-valid-flag"
        id="ref-for-intrinsic-sizes-valid-flag④">内在サイズ有効フラグ</a>のみ<a data-link-type="dfn" href="#intrinsic-sizes-invalid"
        id="ref-for-intrinsic-sizes-invalid⑤">intrinsic-sizes-invalid</a>に設定します。</p>
    <p class="note" role="note"><span>注:</span> <code
        class="idl"><a data-link-type="idl" href="#layoutconstraints" id="ref-for-layoutconstraints①①">LayoutConstraints</a></code>オブジェクトはレイアウト関数だけに渡されるので、内在サイズを無効化する必要はありません。
    </p>
    <div class="note" role="note">
      注: 例として、以下のプロパティは<code
        class="idl"><a data-link-type="idl" href="#layoutedges" id="ref-for-layoutedges⑤">LayoutEdges</a></code>オブジェクトを変更する可能性があります：
      <ul>
        <li data-md="">
          <p><a class="property" data-link-type="propdesc"
              href="https://www.w3.org/TR/CSS22/box.html#propdef-padding-top"
              id="ref-for-propdef-padding-top">padding-top</a></p>
        <li data-md="">
          <p><a class="property" data-link-type="propdesc"
              href="https://www.w3.org/TR/css3-background/#propdef-border-left-width"
              id="ref-for-propdef-border-left-width">border-left-width</a></p>
        <li data-md="">
          <p><a class="property" data-link-type="propdesc"
              href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow-y"
              id="ref-for-propdef-overflow-y">overflow-y</a></p>
      </ul>
      <p>また、以下のプロパティは<code
          class="idl"><a data-link-type="idl" href="#layoutconstraints" id="ref-for-layoutconstraints①②">LayoutConstraints</a></code>オブジェクトを変更する可能性があります：
      </p>
      <ul>
        <li data-md="">
          <p><a class="property" data-link-type="propdesc" href="https://www.w3.org/TR/CSS22/visudet.html#propdef-width"
              id="ref-for-propdef-width">width</a></p>
        <li data-md="">
          <p><a class="property" data-link-type="propdesc"
              href="https://www.w3.org/TR/CSS22/visudet.html#propdef-max-width"
              id="ref-for-propdef-max-width">max-width</a></p>
        <li data-md="">
          <p><a class="property" data-link-type="propdesc"
              href="https://www.w3.org/TR/CSS22/visudet.html#propdef-height" id="ref-for-propdef-height">height</a></p>
      </ul>
    </div>
    <p class="note" role="note"><span>注:</span> これは CSS Layout API に関連するレイアウト無効化のみを説明しています。すべての<a data-link-type="dfn"
        href="https://www.w3.org/TR/css-display-3/#box" id="ref-for-box①⑦">ボックス</a>は概念的に<a data-link-type="dfn"
        href="#layout-valid-flag" id="ref-for-layout-valid-flag④">レイアウト有効フラグ</a>を持ち、これらの変更は<a data-link-type="dfn"
        href="https://www.w3.org/TR/css-display-3/#box-tree" id="ref-for-box-tree⑦">ボックスツリー</a>を通して伝播します。</p>
    <h3 class="heading settled" data-level="5.3" id="layout-worklet"><span class="secno">5.3. </span><span
        class="content">レイアウトワークレット</span><a class="self-link" href="#layout-worklet"></a></h3>
    <p><code
        class="idl"><a data-link-type="idl" href="#dom-css-layoutworklet" id="ref-for-dom-css-layoutworklet">layoutWorklet</a></code>属性は、レイアウトに関連するすべてのクラスを管理する<code
        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/worklets-1/#worklet" id="ref-for-worklet">Worklet</a></code>へアクセスすることができます。
    </p>
    <p><code
        class="idl"><a data-link-type="idl" href="#dom-css-layoutworklet" id="ref-for-dom-css-layoutworklet①">layoutWorklet</a></code>の<a
        data-link-type="dfn" href="https://www.w3.org/TR/worklets-1/#worklet-global-scope-type"
        id="ref-for-worklet-global-scope-type">ワークレットグローバルスコープ型</a>は<code
        class="idl"><a data-link-type="idl" href="#layoutworkletglobalscope" id="ref-for-layoutworkletglobalscope③">LayoutWorkletGlobalScope</a></code>です。
    </p>
    <pre class="idl highlight def"><span class="kt">partial</span> <span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="https://www.w3.org/TR/cssom-1/#css" id="ref-for-css">CSS</a> {
    [<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SameObject" id="ref-for-SameObject">SameObject</a>] <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/worklets-1/#worklet" id="ref-for-worklet①">Worklet</a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="CSS" data-dfn-type="attribute" data-export="" data-readonly="" data-type="Worklet" id="dom-css-layoutworklet"><code>layoutWorklet</code></dfn>;
};
</pre>
    <p><code
        class="idl"><a data-link-type="idl" href="#layoutworkletglobalscope" id="ref-for-layoutworkletglobalscope④">LayoutWorkletGlobalScope</a></code>は、<code
        class="idl"><a data-link-type="idl" href="#dom-css-layoutworklet" id="ref-for-dom-css-layoutworklet②">layoutWorklet</a></code>のグローバル実行コンテキストです。
    </p>
    <pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Global" id="ref-for-Global">Global</a>=(<a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/worklets-1/#worklet" id="ref-for-worklet②">Worklet</a>,<a class="n" data-link-type="idl-name">LayoutWorklet</a>),<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed⑧">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="layoutworkletglobalscope"><code>LayoutWorkletGlobalScope</code></dfn> : <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/worklets-1/#workletglobalscope" id="ref-for-workletglobalscope">WorkletGlobalScope</a> {
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-layoutworkletglobalscope-registerlayout" id="ref-for-dom-layoutworkletglobalscope-registerlayout">registerLayout</a>(<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString"><span class="kt">DOMString</span></a> <dfn class="nv idl-code" data-dfn-for="LayoutWorkletGlobalScope/registerLayout(name, layoutCtor)" data-dfn-type="argument" data-export="" id="dom-layoutworkletglobalscope-registerlayout-name-layoutctor-name"><code>name</code><a class="self-link" href="#dom-layoutworkletglobalscope-registerlayout-name-layoutctor-name"></a></dfn>, <a class="n" data-link-type="idl-name" href="https://heycam.github.io/webidl/#VoidFunction" id="ref-for-VoidFunction">VoidFunction</a> <dfn class="nv idl-code" data-dfn-for="LayoutWorkletGlobalScope/registerLayout(name, layoutCtor)" data-dfn-type="argument" data-export="" id="dom-layoutworkletglobalscope-registerlayout-name-layoutctor-layoutctor"><code>layoutCtor</code><a class="self-link" href="#dom-layoutworkletglobalscope-registerlayout-name-layoutctor-layoutctor"></a></dfn>);
};
</pre>
    <h3 class="heading settled" data-level="5.4" id="registering-layout"><span class="secno">5.4. </span><span
        class="content">レイアウトの登録</span><a class="self-link" href="#registering-layout"></a></h3>
    <pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed⑨">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-layoutoptions"><code>LayoutOptions</code></dfn> {
  <a class="n" data-link-type="idl-name" href="#enumdef-childdisplaytype" id="ref-for-enumdef-childdisplaytype">ChildDisplayType</a> <dfn class="nv dfn-paneled idl-code" data-default="&quot;block&quot;" data-dfn-for="LayoutOptions" data-dfn-type="dict-member" data-export="" data-type="ChildDisplayType " id="dom-layoutoptions-childdisplay"><code>childDisplay</code></dfn> = "block";
  <a class="n" data-link-type="idl-name" href="#enumdef-layoutsizingmode" id="ref-for-enumdef-layoutsizingmode">LayoutSizingMode</a> <dfn class="nv dfn-paneled idl-code" data-default="&quot;block-like&quot;" data-dfn-for="LayoutOptions" data-dfn-type="dict-member" data-export="" data-type="LayoutSizingMode " id="dom-layoutoptions-sizing"><code>sizing</code></dfn> = "block-like";
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①⓪">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">enum</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="enum" data-export="" id="enumdef-childdisplaytype"><code>ChildDisplayType</code></dfn> {
    <dfn class="s idl-code" data-dfn-for="ChildDisplayType" data-dfn-type="enum-value" data-export="" data-lt="&quot;block&quot;|block" id="dom-childdisplaytype-block"><code>"block"</code><a class="self-link" href="#dom-childdisplaytype-block"></a></dfn>,
    <dfn class="s idl-code" data-dfn-for="ChildDisplayType" data-dfn-type="enum-value" data-export="" data-lt="&quot;normal&quot;|normal" id="dom-childdisplaytype-normal"><code>"normal"</code><a class="self-link" href="#dom-childdisplaytype-normal"></a></dfn>,
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①①">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">enum</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="enum" data-export="" id="enumdef-layoutsizingmode"><code>LayoutSizingMode</code></dfn> {
    <dfn class="s idl-code" data-dfn-for="LayoutSizingMode" data-dfn-type="enum-value" data-export="" data-lt="&quot;block-like&quot;|block-like" id="dom-layoutsizingmode-block-like"><code>"block-like"</code><a class="self-link" href="#dom-layoutsizingmode-block-like"></a></dfn>,
    <dfn class="s idl-code" data-dfn-for="LayoutSizingMode" data-dfn-type="enum-value" data-export="" data-lt="&quot;manual&quot;|manual" id="dom-layoutsizingmode-manual"><code>"manual"</code><a class="self-link" href="#dom-layoutsizingmode-manual"></a></dfn>,
};
</pre>
    <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
        id="ref-for-concept-document①">document</a> は <a data-link-type="dfn"
        href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①">map</a> 型の <dfn class="dfn-paneled"
        data-dfn-type="dfn" data-noexport="" id="document-layout-definitions">文書レイアウト定義</dfn> を持ちます。
      最初はこの map は空ですが、<code
        class="idl"><a data-link-type="idl" href="#dom-layoutworkletglobalscope-registerlayout" id="ref-for-dom-layoutworkletglobalscope-registerlayout①">registerLayout(name, layoutCtor)</a></code>
      が呼び出されたときに値が追加されます。</p>
    <p><code
        class="idl"><a data-link-type="idl" href="#layoutworkletglobalscope" id="ref-for-layoutworkletglobalscope⑤">LayoutWorkletGlobalScope</a></code>
      は <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map②">map</a> 型の
      <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="layout-definitions">レイアウト定義</dfn> を持ちます。
      最初はこの map は空ですが、<code
        class="idl"><a data-link-type="idl" href="#dom-layoutworkletglobalscope-registerlayout" id="ref-for-dom-layoutworkletglobalscope-registerlayout②">registerLayout(name, layoutCtor)</a></code>
      が呼び出されたときに値が追加されます。
    </p>
    <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box" id="ref-for-box①⑧">box</a> のうち <a
        data-link-type="dfn" href="#layout-api-container" id="ref-for-layout-api-container②⑤">layout API container</a>
      に該当するものは、 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map"
        id="ref-for-ordered-map③">map</a> 型の <dfn class="dfn-paneled" data-dfn-type="dfn"
        data-lt="layout class instances" data-noexport="" id="layout-class-instances">レイアウトクラスインスタンス</dfn> を持ちます。最初はこの
      map は空ですが、ユーザーエージェントが <a data-link-type="dfn" href="#determine-the-intrinsic-sizes"
        id="ref-for-determine-the-intrinsic-sizes">内在サイズの決定</a> または <a data-link-type="dfn" href="#generate-a-fragment"
        id="ref-for-generate-a-fragment">フラグメント生成</a> を行う際に値が追加されます。</p>
    <div class="algorithm" data-algorithm="registerLayout(name, layoutCtor)">
      <dfn class="dfn-paneled idl-code" data-dfn-for="LayoutWorkletGlobalScope" data-dfn-type="method" data-export=""
        id="dom-layoutworkletglobalscope-registerlayout"><code>registerLayout(<var>name</var>, <var>layoutCtor</var>)</code></dfn>
      メソッドが呼び出されたとき、ユーザーエージェントは以下の手順を<em>必ず</em>実行します：
      <ol>
        <li data-md="">
          <p><var>name</var> が空文字列なら、<a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw"
              id="ref-for-dfn-throw">throw</a> で <a data-link-type="dfn"
              href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"
              id="ref-for-sec-native-error-types-used-in-this-standard-typeerror">TypeError</a> を投げて、以降の手順を中止する。</p>
        <li data-md="">
          <p><var>layoutDefinitionMap</var> を <code
              class="idl"><a data-link-type="idl" href="#layoutworkletglobalscope" id="ref-for-layoutworkletglobalscope⑥">LayoutWorkletGlobalScope</a></code>
            の
            <a data-link-type="dfn" href="#layout-definitions" id="ref-for-layout-definitions">レイアウト定義</a> map とする。
          </p>
        <li data-md="">
          <p><var>layoutDefinitionMap</var>[<var>name</var>] が <a data-link-type="dfn"
              href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①">存在</a>する場合、<a
              data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw" id="ref-for-dfn-throw①">throw</a> で
            "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#invalidmodificationerror"
              id="ref-for-invalidmodificationerror">InvalidModificationError</a>" <a data-link-type="dfn"
              href="https://heycam.github.io/webidl/#es-DOMException" id="ref-for-es-DOMException">DOMException</a>
            を投げて、以降の手順を中止する。</p>
        <li data-md="">
          <p><var>inputProperties</var> を空の <code>sequence&lt;DOMString></code> とする。</p>
        <li data-md="">
          <p><var>inputPropertiesIterable</var> を <a data-link-type="dfn"
              href="https://tc39.github.io/ecma262/#sec-get-o-p" id="ref-for-sec-get-o-p">Get</a>(<var>layoutCtor</var>,
            "inputProperties") の結果とする。</p>
        <li data-md="">
          <p><var>inputPropertiesIterable</var> が undefined でなければ、<var>inputProperties</var> に <a data-link-type="dfn"
              href="https://heycam.github.io/webidl/#es-type-mapping"
              id="ref-for-es-type-mapping">変換</a>した値（<code>sequence&lt;DOMString></code>）を格納する。例外が <a
              data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw" id="ref-for-dfn-throw②">thrown</a>
            された場合は例外を投げて以降の手順を中止する。
          </p>
          <p class="note" role="note"><span>注:</span> input properties getter が返す CSS プロパティのリストは、カスタムもしくはネイティブ CSS
            プロパティどちらでもよい。</p>
          <p class="note" role="note"><span>注:</span> CSS プロパティのリストにはショートハンドも含まれる可能性がある。</p>
          <p class="note" role="note"><span>注:</span> レイアウトクラスを将来互換にするには、ユーザーエージェントで現在無効な CSS
            プロパティも含めることができる（例：<code>margin-bikeshed-property</code>）。</p>
        <li data-md="">
          <p><var>childInputProperties</var> を空の <code>sequence&lt;DOMString></code> とする。</p>
        <li data-md="">
          <p><var>childInputPropertiesIterable</var> を <a data-link-type="dfn"
              href="https://tc39.github.io/ecma262/#sec-get-o-p"
              id="ref-for-sec-get-o-p①">Get</a>(<var>layoutCtor</var>, "childInputProperties") の結果とする。</p>
        <li data-md="">
          <p><var>childInputPropertiesIterable</var> が undefined でなければ、<var>childInputProperties</var> に <a
              data-link-type="dfn" href="https://heycam.github.io/webidl/#es-type-mapping"
              id="ref-for-es-type-mapping①">変換</a>した値（<code>sequence&lt;DOMString></code>）を格納する。例外が <a
              data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw" id="ref-for-dfn-throw③">thrown</a>
            された場合は例外を投げて以降の手順を中止する。
          </p>
        <li data-md="">
          <p><var>layoutOptionsValue</var> を <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-get-o-p"
              id="ref-for-sec-get-o-p②">Get</a>(<var>layoutCtor</var>, "layoutOptions") の結果とする。</p>
        <li data-md="">
          <p><var>layoutOptions</var> を <a data-link-type="dfn" href="https://heycam.github.io/webidl/#es-type-mapping"
              id="ref-for-es-type-mapping②">変換</a>した <code
              class="idl"><a data-link-type="idl" href="#dictdef-layoutoptions" id="ref-for-dictdef-layoutoptions②">LayoutOptions</a></code>
            とする。
            例外が <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw"
              id="ref-for-dfn-throw④">thrown</a> された場合は例外を投げて以降の手順を中止する。
          </p>
        <li data-md="">
          <p><a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-isconstructor"
              id="ref-for-sec-isconstructor">IsConstructor</a>(<var>layoutCtor</var>) が false なら、<a data-link-type="dfn"
              href="https://heycam.github.io/webidl/#dfn-throw" id="ref-for-dfn-throw⑤">throw</a> で <a
              data-link-type="dfn"
              href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"
              id="ref-for-sec-native-error-types-used-in-this-standard-typeerror①">TypeError</a> を投げて以降の手順を中止する。</p>
        <li data-md="">
          <p><var>prototype</var> を <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-get-o-p"
              id="ref-for-sec-get-o-p③">Get</a>(<var>layoutCtor</var>, "prototype") の結果とする。</p>
        <li data-md="">
          <p><a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values"
              id="ref-for-sec-ecmascript-data-types-and-values">Type</a>(<var>prototype</var>) が Object でないなら <a
              data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw" id="ref-for-dfn-throw⑥">throw</a> で
            <a data-link-type="dfn"
              href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"
              id="ref-for-sec-native-error-types-used-in-this-standard-typeerror②">TypeError</a> を投げて以降の手順を中止する。
          </p>
        <li data-md="">
          <p><var>intrinsicSizes</var> を <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-get-o-p"
              id="ref-for-sec-get-o-p④">Get</a>(<var>prototype</var>, <code>"intrinsicSizes"</code>) の結果とする。
          </p>
        <li data-md="">
          <p><a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-iscallable"
              id="ref-for-sec-iscallable">IsCallable</a>(<var>intrinsicSizes</var>) が false なら <a data-link-type="dfn"
              href="https://heycam.github.io/webidl/#dfn-throw" id="ref-for-dfn-throw⑦">throw</a> で <a
              data-link-type="dfn"
              href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"
              id="ref-for-sec-native-error-types-used-in-this-standard-typeerror③">TypeError</a> を投げて以降の手順を中止する。</p>
        <li data-md="">
          <p><var>intrinsicSizes</var> の <code>[[FunctionKind]]</code> 内部スロットが <code>"generator"</code> でないなら <a
              data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw" id="ref-for-dfn-throw⑧">throw</a> で
            <a data-link-type="dfn"
              href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"
              id="ref-for-sec-native-error-types-used-in-this-standard-typeerror④">TypeError</a> を投げて以降の手順を中止する。
          </p>
        <li data-md="">
          <p><var>layout</var> を <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-get-o-p"
              id="ref-for-sec-get-o-p⑤">Get</a>(<var>prototype</var>, <code>"layout"</code>) の結果とする。
          </p>
        <li data-md="">
          <p><a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-iscallable"
              id="ref-for-sec-iscallable①">IsCallable</a>(<var>layout</var>) が false なら <a data-link-type="dfn"
              href="https://heycam.github.io/webidl/#dfn-throw" id="ref-for-dfn-throw⑨">throw</a> で <a
              data-link-type="dfn"
              href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"
              id="ref-for-sec-native-error-types-used-in-this-standard-typeerror⑤">TypeError</a> を投げて以降の手順を中止する。</p>
        <li data-md="">
          <p><var>layout</var> の <code>[[FunctionKind]]</code> 内部スロットが <code>"generator"</code> でないなら <a
              data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw" id="ref-for-dfn-throw①⓪">throw</a>
            で <a data-link-type="dfn"
              href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"
              id="ref-for-sec-native-error-types-used-in-this-standard-typeerror⑥">TypeError</a> を投げて以降の手順を中止する。</p>
        <li data-md="">
          <p><var>definition</var> を新しい <a data-link-type="dfn" href="#layout-definition"
              id="ref-for-layout-definition">レイアウト定義</a>として以下の内容で生成する：</p>
          <ul>
            <li data-md="">
              <p><a data-link-type="dfn" href="#layout-definition-class-constructor"
                  id="ref-for-layout-definition-class-constructor">クラスコンストラクター</a>は <var>layoutCtor</var>。</p>
            <li data-md="">
              <p><a data-link-type="dfn" href="#layout-definition-layout-generator-function"
                  id="ref-for-layout-definition-layout-generator-function">レイアウトジェネレーター関数</a>は <var>layout</var>。</p>
            <li data-md="">
              <p><a data-link-type="dfn" href="#layout-definition-intrinsic-sizes-generator-function"
                  id="ref-for-layout-definition-intrinsic-sizes-generator-function">内在サイズジェネレーター関数</a>は
                <var>intrinsicSizes</var>。
              </p>
            <li data-md="">
              <p><a data-link-type="dfn" href="#layout-definition-constructor-valid-flag"
                  id="ref-for-layout-definition-constructor-valid-flag">コンストラクター有効フラグ</a>は <b>true</b>。</p>
            <li data-md="">
              <p><a data-link-type="dfn" href="#layout-definition-input-properties"
                  id="ref-for-layout-definition-input-properties">入力プロパティ</a>は <var>inputProperties</var>。</p>
            <li data-md="">
              <p><a data-link-type="dfn" href="#layout-definition-child-input-properties"
                  id="ref-for-layout-definition-child-input-properties①">子入力プロパティ</a>は <var>childInputProperties</var>。
              </p>
            <li data-md="">
              <p><a data-link-type="dfn" href="#layout-definition-layout-options"
                  id="ref-for-layout-definition-layout-options">レイアウトオプション</a>は <var>layoutOptions</var>。</p>
          </ul>
        <li data-md="">
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set" id="ref-for-map-set①">Set</a>
            <var>layoutDefinitionMap</var>[<var>name</var>] に <var>definition</var> を設定する。
          </p>
        <li data-md="">
          <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"
              id="ref-for-queue-a-task">Queue a task</a> で以下を実行：</p>
          <ol>
            <li data-md="">
              <p><var>documentLayoutDefinitionMap</var> を関連づけられた <a data-link-type="dfn"
                  href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document②">document</a> の <a
                  data-link-type="dfn" href="#document-layout-definitions"
                  id="ref-for-document-layout-definitions">文書レイアウト定義</a> <a data-link-type="dfn"
                  href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map④">map</a> とする。</p>
            <li data-md="">
              <p><var>documentDefinition</var> を新しい <a data-link-type="dfn" href="#document-layout-definition"
                  id="ref-for-document-layout-definition">文書レイアウト定義</a>として以下の内容で生成する：</p>
              <ul>
                <li data-md="">
                  <p><a data-link-type="dfn" href="#document-layout-definition-input-properties"
                      id="ref-for-document-layout-definition-input-properties①">入力プロパティ</a>は <var>inputProperties</var>。
                  </p>
                <li data-md="">
                  <p><a data-link-type="dfn" href="#document-layout-definition-child-input-properties"
                      id="ref-for-document-layout-definition-child-input-properties①">子入力プロパティ</a>は
                    <var>childInputProperties</var>。
                  </p>
                <li data-md="">
                  <p><a data-link-type="dfn" href="#document-layout-definition-layout-options"
                      id="ref-for-document-layout-definition-layout-options⑦">レイアウトオプション</a>は <var>layoutOptions</var>。
                  </p>
              </ul>
            <li data-md="">
              <p><var>documentLayoutDefinitionMap</var>[<var>name</var>] が <a data-link-type="dfn"
                  href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②">存在</a>する場合、以下を実行：</p>
              <ol>
                <li data-md="">
                  <p><var>existingDocumentDefinition</var> を <a data-link-type="dfn"
                      href="https://infra.spec.whatwg.org/#map-get"
                      id="ref-for-map-get①">get</a>(<var>documentLayoutDefinitionMap</var>[<var>name</var>]) の結果とする。
                  </p>
                <li data-md="">
                  <p><var>existingDocumentDefinition</var> が <code>"invalid"</code> なら以降の手順を中止する。</p>
                <li data-md="">
                  <p><var>existingDocumentDefinition</var> と <var>documentDefinition</var> が等価でない場合
                    （<a data-link-type="dfn" href="#document-layout-definition-input-properties"
                      id="ref-for-document-layout-definition-input-properties②">入力プロパティ</a>、<a data-link-type="dfn"
                      href="#document-layout-definition-child-input-properties"
                      id="ref-for-document-layout-definition-child-input-properties②">子入力プロパティ</a>、<a
                      data-link-type="dfn" href="#document-layout-definition-layout-options"
                      id="ref-for-document-layout-definition-layout-options⑧">レイアウトオプション</a> が異なる場合）、次を行う：
                  </p>
                  <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set" id="ref-for-map-set②">Set</a>
                    <var>documentLayoutDefinitionMap</var>[<var>name</var>] に <code>"invalid"</code> を設定する。
                  </p>
                  <p>同じクラスが異なる <code>inputProperties</code>、<code>childInputProperties</code>、<code>layoutOptions</code>
                    で登録された旨のエラーをデバッグコンソールに出力する。
                  </p>
              </ol>
            <li data-md="">
              <p>それ以外の場合は、<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set"
                  id="ref-for-map-set③">set</a> <var>documentLayoutDefinitionMap</var>[<var>name</var>] に
                <var>documentDefinition</var> を設定する。
              </p>
          </ol>
      </ol>
      <div class="note" role="note">
        注: クラスの形は以下のとおりです：
        <pre class="lang-javascript highlight"><span class="kr">class</span> MyLayout <span class="p">{</span>
    <span class="kr">static</span> get inputProperties<span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="p">[</span><span class="s1">'--foo'</span><span class="p">];</span> <span class="p">}</span>
    <span class="kr">static</span> get childrenInputProperties<span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="p">[</span><span class="s1">'--bar'</span><span class="p">];</span> <span class="p">}</span>
    <span class="kr">static</span> get layoutOptions<span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">{</span>childDisplay<span class="o">:</span> <span class="s1">'normal'</span><span class="p">,</span> sizing<span class="o">:</span> <span class="s1">'block-like'</span><span class="p">}</span>
    <span class="p">}</span>

    <span class="o">*</span>intrinsicSizes<span class="p">(</span>children<span class="p">,</span> edges<span class="p">,</span> styleMap<span class="p">)</span> <span class="p">{</span>
        <span class="c1">// 内在サイズの処理。</span>
<span class="c1"></span>    <span class="p">}</span>

    <span class="o">*</span>layout<span class="p">(</span>children<span class="p">,</span> edges<span class="p">,</span> constraints<span class="p">,</span> styleMap<span class="p">,</span> breakToken<span class="p">)</span> <span class="p">{</span>
        <span class="c1">// レイアウト処理。</span>
<span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span>
</pre>
      </div>
    </div>
    <h3 class="heading settled" data-level="5.5" id="layout-engine"><span class="secno">5.5. </span><span
        class="content">レイアウトエンジン</span><a class="self-link" href="#layout-engine"></a></h3>
    <div class="issue" id="issue-ac1b3ccd">
      <a class="self-link" href="#issue-ac1b3ccd"></a> Issue: 現在 API は generator 形式ですが、実装経験と web 開発者の意見によって、promise ベースの
      API に変更される可能性があります。どちらにも利点と欠点があります。
      <p><em>Promises</em></p>
      <ul>
        <li data-md="">
          <p>エラー報告がより良い。</p>
        <li data-md="">
          <p>開発者体験が向上する可能性。</p>
      </ul>
      <p><em>Generator</em></p>
      <ul>
        <li data-md="">
          <p>より「厳格」— レイアウト操作のみを実行できる。各呼び出しでどの promise API が動作するか制限不要。</p>
        <li data-md="">
          <p>より効率的なバインディング overhead の可能性。</p>
      </ul>
    </div>
    <h4 class="heading settled" data-level="5.5.1" id="request-objects"><span class="secno">5.5.1. </span><span
        class="content">リクエストオブジェクト</span><a class="self-link" href="#request-objects"></a></h4>
    <pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①②">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="intrinsicsizesrequest"><code>IntrinsicSizesRequest</code></dfn> {
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①③">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="layoutfragmentrequest"><code>LayoutFragmentRequest</code></dfn> {
};

<span class="kt">typedef</span> (<a class="n" data-link-type="idl-name" href="#intrinsicsizesrequest" id="ref-for-intrinsicsizesrequest③">IntrinsicSizesRequest</a> <span class="kt">or</span> <a class="n" data-link-type="idl-name" href="#layoutfragmentrequest" id="ref-for-layoutfragmentrequest③">LayoutFragmentRequest</a>)
    <dfn class="nv dfn-paneled idl-code" data-dfn-type="typedef" data-export="" id="typedefdef-layoutfragmentrequestorintrinsicsizesrequest"><code>LayoutFragmentRequestOrIntrinsicSizesRequest</code></dfn>;
</pre>
    <p><code
        class="idl"><a data-link-type="idl" href="#intrinsicsizesrequest" id="ref-for-intrinsicsizesrequest④">IntrinsicSizesRequest</a></code>
      は内部スロット：</p>
    <ul>
      <li data-md="">
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="IntrinsicSizesRequest" data-dfn-type="attribute"
            data-export="" id="dom-intrinsicsizesrequest-layoutchild-slot"><code>[[layoutChild]]</code></dfn> <code
            class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild③③">LayoutChild</a></code>。内在サイズ計算対象の子。
        </p>
    </ul>
    <p><code
        class="idl"><a data-link-type="idl" href="#layoutfragmentrequest" id="ref-for-layoutfragmentrequest④">LayoutFragmentRequest</a></code>
      は内部スロット：</p>
    <ul>
      <li data-md="">
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="LayoutFragmentRequest" data-dfn-type="attribute"
            data-export="" id="dom-layoutfragmentrequest-layoutchild-slot"><code>[[layoutChild]]</code></dfn> <code
            class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild③④">LayoutChild</a></code>。フラグメント生成対象の子。
        </p>
      <li data-md="">
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="LayoutFragmentRequest" data-dfn-type="attribute"
            data-export=""
            id="dom-layoutfragmentrequest-layoutconstraints-slot"><code>[[layoutConstraints]]</code></dfn> <code
            class="idl"><a data-link-type="idl" href="#dictdef-layoutconstraintsoptions" id="ref-for-dictdef-layoutconstraintsoptions①">LayoutConstraintsOptions</a></code>
          辞書。<code
            class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild③⑤">LayoutChild</a></code>
          のレイアウトアルゴリズムへの入力制約。</p>
      <li data-md="">
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="LayoutFragmentRequest" data-dfn-type="attribute"
            data-export="" id="dom-layoutfragmentrequest-breaktoken-slot"><code>[[breakToken]]</code></dfn> <code
            class="idl"><a data-link-type="idl" href="#childbreaktoken" id="ref-for-childbreaktoken⑥">ChildBreakToken</a></code>
          オブジェクト。レイアウト再開時の break token。</p>
    </ul>
    <hr>
    <p>著者定義の layout メソッドと intrinsic sizes メソッドは、通常の javascript 関数ではなく generator
      関数となっています。これはユーザーエージェントが非同期・並列レイアウトエンジンをサポートするためです。</p>
    <p>著者が <code
        class="idl"><a data-link-type="idl" href="#dom-layoutchild-layoutnextfragment" id="ref-for-dom-layoutchild-layoutnextfragment⑦">layoutNextFragment()</a></code>
      を <code class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild③⑥">LayoutChild</a></code>
      に呼び出すと、ユーザーエージェントは <code
        class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment②①">LayoutFragment</a></code>
      を同期的に生成して返すのではなく、<code
        class="idl"><a data-link-type="idl" href="#layoutfragmentrequest" id="ref-for-layoutfragmentrequest⑤">LayoutFragmentRequest</a></code>
      を返します。これは著者には完全に不透明なオブジェクトですが、内部スロットとして <code
        class="idl"><a data-link-type="idl" href="#dom-layoutchild-layoutnextfragment" id="ref-for-dom-layoutchild-layoutnextfragment⑧">layoutNextFragment()</a></code>
      の呼び出し情報を持ちます。</p>
    <p><code
        class="idl"><a data-link-type="idl" href="#layoutfragmentrequest" id="ref-for-layoutfragmentrequest⑥">LayoutFragmentRequest</a></code>
      がレイアウトジェネレーターオブジェクトから yield された場合、ユーザーエージェントのレイアウトエンジンは他の処理と並行して、または別スレッドでこのアルゴリズムを非同期に実行することがあります。エンジンが <code
        class="idl"><a data-link-type="idl" href="#layoutfragment" id="ref-for-layoutfragment②②">LayoutFragment</a></code>
      を生成したら、その結果でジェネレーターオブジェクトを「tick」します。</p>
    <p><code
        class="idl"><a data-link-type="idl" href="#dom-layoutchild-intrinsicsizes" id="ref-for-dom-layoutchild-intrinsicsizes②">intrinsicSizes()</a></code>
      メソッドも同様です。</p>
    <div class="example" id="example-4d7c19cf">
      <a class="self-link" href="#example-4d7c19cf"></a> 以下は javascript で書かれたレイアウトエンジンの例です。
      <pre class="lang-javascript highlight"><span class="kr">class</span> LayoutEngine <span class="p">{</span>
  <span class="c1">// rootBox、LayoutConstraints、BreakToken を受け取って LayoutFragment を生成する。</span>
<span class="c1"></span>  layoutEntry<span class="p">(</span>rootBox<span class="p">,</span> rootPageConstraints<span class="p">,</span> breakToken<span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> layoutFragment<span class="p">({</span>
      box<span class="o">:</span> rootBox<span class="p">,</span>
      layoutConstraints<span class="o">:</span> rootPageConstraints<span class="p">,</span>
      breakToken<span class="o">:</span> breakToken<span class="p">,</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="c1">// LayoutFragmentRequest を受け取り、対応するレイアウトアルゴリズムを呼び出して LayoutFragment を生成する。</span>
<span class="c1"></span>  layoutFragment<span class="p">(</span>fragmentRequest<span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> box <span class="o">=</span> fragmentRequest<span class="p">.</span>layoutChild<span class="p">;</span>
    <span class="kr">const</span> algorithm <span class="o">=</span> selectLayoutAlgorithmForBox<span class="p">(</span>box<span class="p">);</span>
    <span class="kr">const</span> fragmentRequestGenerator <span class="o">=</span> algorithm<span class="p">.</span>layout<span class="p">(</span>
        fragmentRequest<span class="p">.</span>layoutConstraints<span class="p">,</span>
        box<span class="p">.</span>children<span class="p">,</span>
        box<span class="p">.</span>styleMap<span class="p">,</span>
        fragmentRequest<span class="p">.</span>breakToken<span class="p">);</span>

    <span class="kd">let</span> nextFragmentRequest <span class="o">=</span> fragmentRequestGenerator<span class="p">.</span>next<span class="p">();</span>

    <span class="k">while</span> <span class="p">(</span><span class="o">!</span>nextFragmentRequest<span class="p">.</span>done<span class="p">)</span> <span class="p">{</span>
      <span class="c1">// UA はフラグメント生成を並列（別スレッド）で行うこともできる。例は同期処理のみ。</span>
<span class="c1"></span>      <span class="kd">let</span> fragments <span class="o">=</span> nextFragmentRequest<span class="p">.</span>value<span class="p">.</span>map<span class="p">(</span>layoutFragment<span class="p">);</span>

      <span class="c1">// UA は他の処理（GC等）で yield することもできる。例は同期で進める。</span>
<span class="c1"></span>      nextFragmentRequest <span class="o">=</span> fragmentRequestGenerator<span class="p">.</span>next<span class="p">(</span>fragments<span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> nextFragmentRequest<span class="p">.</span>value<span class="p">;</span> <span class="c1">// 最終的な LayoutFragment を返す。</span>
<span class="c1"></span>  <span class="p">}</span>
<span class="p">}</span>
</pre>
    </div>
    <h3 class="heading settled" data-level="5.6" id="performing-layout"><span class="secno">5.6. </span><span
        class="content">レイアウトの実行</span><a class="self-link" href="#performing-layout"></a></h3>
    <pre class="idl highlight def">// 著者定義 layout() メソッドの最終返却値。
<span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-fragmentresultoptions"><code>FragmentResultOptions</code></dfn> {
    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②⑥"><span class="kt">double</span></a> <dfn class="nv dfn-paneled idl-code" data-default="0" data-dfn-for="FragmentResultOptions" data-dfn-type="dict-member" data-export="" data-type="double " id="dom-fragmentresultoptions-inlinesize"><code>inlineSize</code></dfn> = 0;
    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②⑦"><span class="kt">double</span></a> <dfn class="nv dfn-paneled idl-code" data-default="0" data-dfn-for="FragmentResultOptions" data-dfn-type="dict-member" data-export="" data-type="double " id="dom-fragmentresultoptions-blocksize"><code>blockSize</code></dfn> = 0;
    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②⑧"><span class="kt">double</span></a> <dfn class="nv dfn-paneled idl-code" data-default="0" data-dfn-for="FragmentResultOptions" data-dfn-type="dict-member" data-export="" data-type="double " id="dom-fragmentresultoptions-autoblocksize"><code>autoBlockSize</code></dfn> = 0;
    <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#layoutfragment" id="ref-for-layoutfragment②④">LayoutFragment</a>> <dfn class="nv dfn-paneled idl-code" data-default="None" data-dfn-for="FragmentResultOptions" data-dfn-type="dict-member" data-export="" data-type="sequence<LayoutFragment> " id="dom-fragmentresultoptions-childfragments"><code>childFragments</code></dfn> = [];
    <span class="kt">any</span> <dfn class="nv dfn-paneled idl-code" data-default="null" data-dfn-for="FragmentResultOptions" data-dfn-type="dict-member" data-export="" data-type="any " id="dom-fragmentresultoptions-data"><code>data</code></dfn> = <span class="kt">null</span>;
    <a class="n" data-link-type="idl-name" href="#dictdef-breaktokenoptions" id="ref-for-dictdef-breaktokenoptions">BreakTokenOptions</a> <dfn class="nv dfn-paneled idl-code" data-default="null" data-dfn-for="FragmentResultOptions" data-dfn-type="dict-member" data-export="" data-type="BreakTokenOptions " id="dom-fragmentresultoptions-breaktoken"><code>breakToken</code></dfn> = <span class="kt">null</span>;
};

<span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-intrinsicsizesresultoptions"><code>IntrinsicSizesResultOptions</code></dfn> {
    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②⑨"><span class="kt">double</span></a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="IntrinsicSizesResultOptions" data-dfn-type="dict-member" data-export="" data-type="double " id="dom-intrinsicsizesresultoptions-maxcontentsize"><code>maxContentSize</code></dfn>;
    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double③⓪"><span class="kt">double</span></a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="IntrinsicSizesResultOptions" data-dfn-type="dict-member" data-export="" data-type="double " id="dom-intrinsicsizesresultoptions-mincontentsize"><code>minContentSize</code></dfn>;
};
</pre>
    <h4 class="heading settled" data-level="5.6.1" id="determining-intrinsic-sizes"><span class="secno">5.6.1.
      </span><span class="content">内在サイズの決定</span><a class="self-link" href="#determining-intrinsic-sizes"></a></h4>
    <p><a data-link-type="dfn" href="#determine-the-intrinsic-sizes"
        id="ref-for-determine-the-intrinsic-sizes①">内在サイズの決定</a>アルゴリズムは、ユーザーエージェントが著者定義レイアウトから
      <a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box" id="ref-for-box②⓪">box</a> の <a
        data-link-type="dfn" href="https://drafts.csswg.org/css-sizing/#intrinsic-sizes"
        id="ref-for-intrinsic-sizes">内在サイズ</a>情報を取得する方法を定義します。
    </p>
    <p class="note" role="note"><span>注:</span> <a data-link-type="dfn" href="#determine-the-intrinsic-sizes"
        id="ref-for-determine-the-intrinsic-sizes②">内在サイズの決定</a>アルゴリズムは、ユーザーエージェントが過去の呼び出し結果を任意の数キャッシュして再利用できるようにしています。
    </p>
    <div class="algorithm" data-algorithm="determine the intrinsic sizes">
      ユーザーエージェントが、与えられた <var>box</var>, <var>childBoxes</var> の
      <a data-link-type="dfn" href="#layout-api-formatting-context" id="ref-for-layout-api-formatting-context">Layout
        API フォーマッティングコンテキスト</a>の
      <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport=""
        id="determine-the-intrinsic-sizes">内在サイズの決定</dfn>をしたい場合、以下の手順を<em>必ず</em>実行します：
      <ol>
        <li data-md="">
          <p><var>layoutFunction</var> を <var>box</var> の <a class="css" data-link-type="maybe"
              href="#valdef-display-layout" id="ref-for-valdef-display-layout⑤">layout()</a>（<a data-link-type="dfn"
              href="https://www.w3.org/TR/css-cascade-4/#computed-value" id="ref-for-computed-value⑤">計算値</a>の
            <a class="production css" data-link-type="type"
              href="https://www.w3.org/TR/css-display-3/#typedef-display-inside" id="ref-for-typedef-display-inside②"
              title="Expands to: flex | flow | grid | flow-root | table | ruby">&lt;display-inside></a>）とする。
          </p>
        <li data-md="">
          <p><var>layoutFunction</var> の <a data-link-type="dfn" href="#intrinsic-sizes-valid-flag"
              id="ref-for-intrinsic-sizes-valid-flag⑤">内在サイズ有効フラグ</a> が <a data-link-type="dfn"
              href="#intrinsic-sizes-valid" id="ref-for-intrinsic-sizes-valid">intrinsic-sizes-valid</a>
            なら、ユーザーエージェントは前回の内在サイズ値を再利用してもよい。その場合は以降の手順を中止してキャッシュ値を使う。</p>
        <li data-md="">
          <p><var>layoutFunction</var> の <a data-link-type="dfn" href="#intrinsic-sizes-valid-flag"
              id="ref-for-intrinsic-sizes-valid-flag⑥">内在サイズ有効フラグ</a> を <a data-link-type="dfn"
              href="#intrinsic-sizes-valid" id="ref-for-intrinsic-sizes-valid①">intrinsic-sizes-valid</a> に設定する。</p>
        <li data-md="">
          <p><var>name</var> を <var>layoutFunction</var> の第1引数とする。</p>
        <li data-md="">
          <p><var>documentDefinition</var> を <a data-link-type="dfn" href="#get-a-document-layout-definition"
              id="ref-for-get-a-document-layout-definition②">文書レイアウト定義取得</a>（<var>name</var>指定）した結果とする。</p>
          <p>もし <a data-link-type="dfn" href="#get-a-document-layout-definition"
              id="ref-for-get-a-document-layout-definition③">文書レイアウト定義取得</a> が失敗、または <var>documentDefinition</var> が
            <code>"invalid"</code> なら、
            <var>box</var> を <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-3/#flow-layout"
              id="ref-for-flow-layout">flow layout</a> にフォールバックし、以降の手順を中止。
          </p>
        <li data-md="">
          <p><var>workletGlobalScope</var> をレイアウト <code
              class="idl"><a data-link-type="idl" href="#layoutworkletglobalscope" id="ref-for-layoutworkletglobalscope⑦">LayoutWorkletGlobalScope</a></code>（<a
              data-link-type="dfn" href="https://www.w3.org/TR/worklets-1/#worklets-workletglobalscopes"
              id="ref-for-worklets-workletglobalscopes">WorkletGlobalScopes</a>リストから取得）とする。</p>
          <p>ユーザーエージェントは、<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list"
              id="ref-for-list④">リスト</a>に少なくとも2つの
            <code
              class="idl"><a data-link-type="idl" href="#layoutworkletglobalscope" id="ref-for-layoutworkletglobalscope⑧">LayoutWorkletGlobalScope</a></code>
            を持ち、選択しなければならない（メモリ制約下を除く）。
          </p>
          <p class="note" role="note"><span>注:</span> グローバルオブジェクトやクラス上の再生成不可能な状態に依存しないための仕様です。</p>
          <p>また、ユーザーエージェントはこのタイミングでレイアウト <code
              class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/worklets-1/#worklet" id="ref-for-worklet④">Worklet</a></code>に対して
            WorkletGlobalScope を作成してもよい。</p>
        <li data-md="">
          <p><a data-link-type="dfn" href="#invoke-a-intrinsic-sizes-callback"
              id="ref-for-invoke-a-intrinsic-sizes-callback">内在サイズコールバック呼び出し</a>（<var>name</var>, <var>box</var>,
            <var>childBoxes</var>, <var>workletGlobalScope</var>、必要に応じて<a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
              id="ref-for-in-parallel">並列</a>で実行）を実行する。
          </p>
          <p class="note" role="note"><span>注:</span> 並列実行する場合、そのスレッドで使える layout worklet global scope を選ぶべき。</p>
      </ol>
    </div>
    <div class="algorithm" data-algorithm="invoke a intrinsic sizes callback">
      ユーザーエージェントが <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport=""
        id="invoke-a-intrinsic-sizes-callback">内在サイズコールバック呼び出し</dfn>（<var>name</var>,
      <var>box</var>, <var>childBoxes</var>, <var>workletGlobalScope</var>）をしたい場合、以下の手順を<em>必ず</em>実行します：
      <ol>
        <li data-md="">
          <p><var>definition</var> を <a data-link-type="dfn" href="#get-a-layout-definition"
              id="ref-for-get-a-layout-definition②">レイアウト定義取得</a>（<var>name</var>, <var>workletGlobalScope</var>）の結果とする。
          </p>
          <p>失敗なら <var>box</var> を <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-3/#flow-layout"
              id="ref-for-flow-layout①">flow layout</a> にフォールバックし、以降中止。</p>
        <li data-md="">
          <p><var>layoutInstance</var> を <a data-link-type="dfn" href="#get-a-layout-class-instance"
              id="ref-for-get-a-layout-class-instance">レイアウトクラスインスタンス取得</a>（<var>box</var>, <var>definition</var>,
            <var>workletGlobalScope</var>）の結果とする。
          </p>
          <p>失敗なら <var>box</var> を <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-3/#flow-layout"
              id="ref-for-flow-layout②">flow layout</a> にフォールバックし、以降中止。</p>
        <li data-md="">
          <p><var>inputProperties</var> を <var>definition</var> の <a data-link-type="dfn"
              href="#layout-definition-input-properties"
              id="ref-for-layout-definition-input-properties①">入力プロパティ</a>とする。</p>
        <li data-md="">
          <p><var>children</var> を新しい<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list"
              id="ref-for-list⑤">リスト</a>とする。</p>
        <li data-md="">
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate">各</a>
            <var>childBox</var> について：
          </p>
          <ol>
            <li data-md="">
              <p><var>layoutChild</var> を <a data-link-type="dfn" href="#get-a-layout-child"
                  id="ref-for-get-a-layout-child">レイアウト子取得</a>（<var>workletGlobalScope</var>, <var>name</var>,
                <var>childBox</var>）の結果とする。
              </p>
            <li data-md="">
              <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append"
                  id="ref-for-list-append">Append</a> <var>layoutChild</var> を <var>children</var> に追加。</p>
          </ol>
        <li data-md="">
          <p><var>edges</var> を <code
              class="idl"><a data-link-type="idl" href="#layoutedgesizes" id="ref-for-layoutedgesizes⑥">LayoutEdgeSizes</a></code>
            （<var>box</var>の<a data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-4/#computed-value"
              id="ref-for-computed-value⑥">計算値</a>をもとに生成）とする。</p>
        <li data-md="">
          <p><var>styleMap</var> を <code
              class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-typed-om-1/#stylepropertymapreadonly" id="ref-for-stylepropertymapreadonly④">StylePropertyMapReadOnly</a></code>
            （<var>box</var>の<var>inputProperties</var>にあるプロパティのみの計算値で生成）とする。</p>
          <p class="issue" id="issue-233d3cc5"><a class="self-link" href="#issue-233d3cc5"></a>
            <var>styleMap</var>を<var>box</var>に持たせるべきかも。
          </p>
        <li data-md="">
          <p>この段階で、<var>children</var>と<var>styleMap</var>が前回呼び出しと同じなら、キャッシュされた内在サイズを利用して以降の手順を中止してもよい。</p>
        <li data-md="">
          <p><var>intrinsicSizesGeneratorFunction</var> を <var>definition</var> の
            <a data-link-type="dfn" href="#layout-definition-intrinsic-sizes-generator-function"
              id="ref-for-layout-definition-intrinsic-sizes-generator-function①">内在サイズジェネレーター関数</a>とする。
          </p>
        <li data-md="">
          <p><var>intrinsicSizesGenerator</var> を <a data-link-type="dfn"
              href="https://heycam.github.io/webidl/#es-invoking-callback-functions"
              id="ref-for-es-invoking-callback-functions">Invoke</a>(<var>intrinsicSizesGeneratorFunction</var>,
            <var>layoutInstance</var>, «<var>children</var>, <var>edges</var>, <var>styleMap</var>»)の結果とする。
          </p>
          <p>例外発生時は <var>box</var> を <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-3/#flow-layout"
              id="ref-for-flow-layout③">flow layout</a> にフォールバックし、以降中止。</p>
        <li data-md="">
          <p><var>intrinsicSizesValue</var> を <a data-link-type="dfn" href="#run-a-generator"
              id="ref-for-run-a-generator">run a generator</a>（<var>intrinsicSizesGenerator</var>,
            <code>"intrinsic-sizes"</code>）の結果とする。
          </p>
          <p>失敗時は <var>box</var> を <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-3/#flow-layout"
              id="ref-for-flow-layout④">flow layout</a> にフォールバックし、以降中止。</p>
        <li data-md="">
          <p><var>intrinsicSizes</var> を <a data-link-type="dfn" href="https://heycam.github.io/webidl/#es-type-mapping"
              id="ref-for-es-type-mapping③">変換</a>（<var>intrinsicSizesValue</var>を<code
              class="idl"><a data-link-type="idl" href="#dictdef-intrinsicsizesresultoptions" id="ref-for-dictdef-intrinsicsizesresultoptions">IntrinsicSizesResultOptions</a></code>へ）したものとする。
            例外時は <var>box</var> を <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-3/#flow-layout"
              id="ref-for-flow-layout⑤">flow layout</a> にフォールバックし、以降中止。</p>
        <li data-md="">
          <p><var>box</var> の <a data-link-type="dfn" href="https://drafts.csswg.org/css-sizing/#intrinsic-sizes"
              id="ref-for-intrinsic-sizes②">内在サイズ</a>を次のように設定：</p>
          <ul>
            <li data-md="">
              <p><var>intrinsicSizes</var> の <code
                  class="idl"><a data-link-type="idl" href="#dom-intrinsicsizesresultoptions-mincontentsize" id="ref-for-dom-intrinsicsizesresultoptions-mincontentsize">minContentSize</a></code>
                を
                <a data-link-type="dfn" href="https://www.w3.org/TR/css-sizing-3/#min-content"
                  id="ref-for-min-content①">min-content size</a>とする。
              </p>
            <li data-md="">
              <p><var>intrinsicSizes</var> の <code
                  class="idl"><a data-link-type="idl" href="#dom-intrinsicsizesresultoptions-maxcontentsize" id="ref-for-dom-intrinsicsizesresultoptions-maxcontentsize">maxContentSize</a></code>
                を
                <a data-link-type="dfn" href="https://www.w3.org/TR/css-sizing-3/#max-content"
                  id="ref-for-max-content①">max-content size</a>とする。
              </p>
          </ul>
      </ol>
    </div>
    <h4 class="heading settled" data-level="5.6.2" id="generating-fragments"><span class="secno">5.6.2. </span><span
        class="content">フラグメント生成</span><a class="self-link" href="#generating-fragments"></a></h4>
    <p><a data-link-type="dfn" href="#generate-a-fragment"
        id="ref-for-generate-a-fragment①">フラグメント生成</a>アルゴリズムは、ユーザーエージェントが著者定義レイアウト用の
      <a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box" id="ref-for-box②①">box</a> の <a
        data-link-type="dfn" href="https://www.w3.org/TR/css3-break/#fragment" id="ref-for-fragment④">fragment</a>
      を生成する方法を定義します。
    </p>
    <p class="note" role="note"><span>注:</span> <a data-link-type="dfn" href="#generate-a-fragment"
        id="ref-for-generate-a-fragment②">フラグメント生成</a>アルゴリズムも、ユーザーエージェントが過去の呼び出し結果を任意の数キャッシュして再利用できるようになっています。</p>
    <div class="algorithm" data-algorithm="generate a fragment">
      ユーザーエージェントが、与えられた <var>box</var>, <var>childBoxes</var>, <var>internalLayoutConstraints</var>,
      （任意の）<var>internalBreakToken</var> の
      <a data-link-type="dfn" href="#layout-api-formatting-context" id="ref-for-layout-api-formatting-context①">Layout
        API フォーマッティングコンテキスト</a>の
      <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport=""
        id="generate-a-fragment">フラグメント生成</dfn>をしたい場合、以下の手順を<em>必ず</em>実行します：
      <ol>
        <li data-md="">
          <p><var>layoutFunction</var> を <var>box</var> の <a class="css" data-link-type="maybe"
              href="#valdef-display-layout" id="ref-for-valdef-display-layout⑥">layout()</a>（<a data-link-type="dfn"
              href="https://www.w3.org/TR/css-cascade-4/#computed-value" id="ref-for-computed-value⑧">計算値</a>の
            <a class="production css" data-link-type="type"
              href="https://www.w3.org/TR/css-display-3/#typedef-display-inside" id="ref-for-typedef-display-inside③"
              title="Expands to: flex | flow | grid | flow-root | table | ruby">&lt;display-inside></a>）とする。
          </p>
        <li data-md="">
          <p><var>layoutFunction</var> の <a data-link-type="dfn" href="#layout-valid-flag"
              id="ref-for-layout-valid-flag⑤">レイアウト有効フラグ</a> が <a data-link-type="dfn" href="#layout-valid"
              id="ref-for-layout-valid">layout-valid</a> なら、ユーザーエージェントは前回の値を再利用してもよい。その場合は以降の手順を中止してキャッシュ値を使う。</p>
        <li data-md="">
          <p><var>layoutFunction</var> の <a data-link-type="dfn" href="#layout-valid-flag"
              id="ref-for-layout-valid-flag⑥">レイアウト有効フラグ</a> を <a data-link-type="dfn" href="#layout-valid"
              id="ref-for-layout-valid①">layout-valid</a> に設定する。</p>
        <li data-md="">
          <p><var>name</var> を <var>layoutFunction</var> の第1引数とする。</p>
        <li data-md="">
          <p><var>documentDefinition</var> を <a data-link-type="dfn" href="#get-a-document-layout-definition"
              id="ref-for-get-a-document-layout-definition④">文書レイアウト定義取得</a>（<var>name</var>指定）した結果とする。</p>
          <p>失敗、または <var>documentDefinition</var> が <code>"invalid"</code> なら、<var>box</var> を <a data-link-type="dfn"
              href="https://drafts.csswg.org/css-display-3/#flow-layout" id="ref-for-flow-layout⑥">flow layout</a>
            にフォールバックし、以降中止。</p>
        <li data-md="">
          <p><var>workletGlobalScope</var> をレイアウト <code
              class="idl"><a data-link-type="idl" href="#layoutworkletglobalscope" id="ref-for-layoutworkletglobalscope⑨">LayoutWorkletGlobalScope</a></code>（<a
              data-link-type="dfn" href="https://www.w3.org/TR/worklets-1/#worklets-workletglobalscopes"
              id="ref-for-worklets-workletglobalscopes②">WorkletGlobalScopes</a>リストから取得）とする。</p>
          <p>ユーザーエージェントは、<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list"
              id="ref-for-list⑥">リスト</a>に少なくとも2つの
            <code
              class="idl"><a data-link-type="idl" href="#layoutworkletglobalscope" id="ref-for-layoutworkletglobalscope①⓪">LayoutWorkletGlobalScope</a></code>
            を持ち、選択しなければならない（メモリ制約下を除く）。
          </p>
          <p class="note" role="note"><span>注:</span> グローバルオブジェクトやクラス上の再生成不可能な状態に依存しないための仕様です。</p>
          <p>また、ユーザーエージェントはこのタイミングでレイアウト <code
              class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/worklets-1/#worklet" id="ref-for-worklet⑥">Worklet</a></code>に対して
            WorkletGlobalScope を作成してもよい。</p>
        <li data-md="">
          <p><a data-link-type="dfn" href="#invoke-a-layout-callback"
              id="ref-for-invoke-a-layout-callback">レイアウトコールバック呼び出し</a>（<var>name</var>, <var>box</var>,
            <var>childBoxes</var>,
            <var>internalLayoutConstraints</var>, <var>internalBreakToken</var>, <var>workletGlobalScope</var>、必要に応じて<a
              data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
              id="ref-for-in-parallel②">並列</a>で実行）を実行する。
          </p>
          <p class="note" role="note"><span>注:</span> 並列実行する場合、そのスレッドで使える layout worklet global scope を選ぶべき。</p>
      </ol>
    </div>
    <div class="algorithm" data-algorithm="invoke a layout callback">
      ユーザーエージェントが <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport=""
        id="invoke-a-layout-callback">レイアウトコールバック呼び出し</dfn>（<var>name</var>, <var>box</var>,
      <var>childBoxes</var>, <var>internalLayoutConstraints</var>, <var>internalBreakToken</var>,
      <var>workletGlobalScope</var>）をしたい場合、以下の手順を<em>必ず</em>実行します：
      <ol>
        <li data-md="">
          <p><var>definition</var> を <a data-link-type="dfn" href="#get-a-layout-definition"
              id="ref-for-get-a-layout-definition④">レイアウト定義取得</a>（<var>name</var>, <var>workletGlobalScope</var>）の結果とする。
          </p>
          <p>失敗なら <var>box</var> を <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-3/#flow-layout"
              id="ref-for-flow-layout⑦">flow layout</a> にフォールバックし、以降中止。</p>
        <li data-md="">
          <p><var>layoutInstance</var> を <a data-link-type="dfn" href="#get-a-layout-class-instance"
              id="ref-for-get-a-layout-class-instance②">レイアウトクラスインスタンス取得</a>（<var>box</var>, <var>definition</var>,
            <var>workletGlobalScope</var>）の結果とする。
          </p>
          <p>失敗なら <var>box</var> を <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-3/#flow-layout"
              id="ref-for-flow-layout⑧">flow layout</a> にフォールバックし、以降中止。</p>
        <li data-md="">
          <p><var>sizingMode</var> を <var>definition</var> の <a data-link-type="dfn"
              href="#layout-definition-layout-options" id="ref-for-layout-definition-layout-options①">layout options</a>
            の <code
              class="idl"><a data-link-type="idl" href="#dom-layoutoptions-sizing" id="ref-for-dom-layoutoptions-sizing③">sizing</a></code>
            プロパティとする。</p>
        <li data-md="">
          <p><var>inputProperties</var> を <var>definition</var> の <a data-link-type="dfn"
              href="#layout-definition-input-properties"
              id="ref-for-layout-definition-input-properties②">入力プロパティ</a>とする。</p>
        <li data-md="">
          <p><var>children</var> を新しい<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list"
              id="ref-for-list⑦">リスト</a>とする。</p>
        <li data-md="">
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①">各</a>
            <var>childBox</var> について：
          </p>
          <ol>
            <li data-md="">
              <p><var>layoutChild</var> を <a data-link-type="dfn" href="#get-a-layout-child"
                  id="ref-for-get-a-layout-child①">レイアウト子取得</a>（<var>workletGlobalScope</var>, <var>name</var>,
                <var>childBox</var>）の結果とする。
              </p>
            <li data-md="">
              <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append"
                  id="ref-for-list-append①">Append</a> <var>layoutChild</var> を <var>children</var> に追加。</p>
          </ol>
        <li data-md="">
          <p><var>edges</var> を <code
              class="idl"><a data-link-type="idl" href="#layoutedgesizes" id="ref-for-layoutedgesizes⑦">LayoutEdgeSizes</a></code>
            （<var>box</var>の<a data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-4/#computed-value"
              id="ref-for-computed-value⑨">計算値</a>をもとに生成）とする。</p>
        <li data-md="">
          <p><var>layoutConstraints</var> を <a data-link-type="dfn" href="#create-a-layout-constraints-object"
              id="ref-for-create-a-layout-constraints-object">レイアウト制約オブジェクト生成</a>（<var>internalLayoutConstraints</var>,
            <var>box</var>, <var>sizingMode</var>）の結果とする。
          </p>
        <li data-md="">
          <p><var>styleMap</var> を <code
              class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-typed-om-1/#stylepropertymapreadonly" id="ref-for-stylepropertymapreadonly⑤">StylePropertyMapReadOnly</a></code>
            （<var>box</var>の<var>inputProperties</var>にあるプロパティのみの計算値で生成）とする。</p>
          <p class="issue" id="issue-233d3cc5①"><a class="self-link" href="#issue-233d3cc5①"></a>
            <var>styleMap</var>を<var>box</var>に持たせるべきかも。
          </p>
        <li data-md="">
          <p><var>breakToken</var> を <code
              class="idl"><a data-link-type="idl" href="#breaktoken" id="ref-for-breaktoken②">BreakToken</a></code>
            （<var>internalBreakToken</var>から適切な情報で生成）とする。</p>
          <p>もし <var>internalBreakToken</var> が null なら <var>breakToken</var> も null。</p>
        <li data-md="">
          <p>この段階で、<var>children</var>, <var>styleMap</var>, <var>layoutConstraints</var>, <var>breakToken</var>
            が前回呼び出しと同じなら、キャッシュされたフラグメントを利用して以降の手順を中止してもよい。</p>
        <li data-md="">
          <p><var>layoutGeneratorFunction</var> を <var>definition</var> の
            <a data-link-type="dfn" href="#layout-definition-layout-generator-function"
              id="ref-for-layout-definition-layout-generator-function①">レイアウトジェネレーター関数</a>とする。
          </p>
        <li data-md="">
          <p><var>layoutGenerator</var> を <a data-link-type="dfn"
              href="https://heycam.github.io/webidl/#es-invoking-callback-functions"
              id="ref-for-es-invoking-callback-functions①">Invoke</a>(<var>layoutGeneratorFunction</var>,
            <var>layoutInstance</var>, «<var>children</var>, <var>edges</var>, <var>layoutConstraints</var>,
            <var>styleMap</var>, <var>breakToken</var>»)の結果とする。
          </p>
          <p>例外発生時は <var>box</var> を <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-3/#flow-layout"
              id="ref-for-flow-layout⑨">flow layout</a> にフォールバックし、以降中止。</p>
        <li data-md="">
          <p><var>fragmentValue</var> を <a data-link-type="dfn" href="#run-a-generator"
              id="ref-for-run-a-generator②">run a generator</a>（<var>layoutGenerator</var>,
            <code>"layout"</code>）の結果とする。
          </p>
          <p>失敗時は <var>box</var> を <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-3/#flow-layout"
              id="ref-for-flow-layout①⓪">flow layout</a> にフォールバックし、以降中止。</p>
        <li data-md="">
          <p><var>fragment</var> を <a data-link-type="dfn" href="https://heycam.github.io/webidl/#es-type-mapping"
              id="ref-for-es-type-mapping④">変換</a>（<var>fragmentValue</var>を<code
              class="idl"><a data-link-type="idl" href="#dictdef-fragmentresultoptions" id="ref-for-dictdef-fragmentresultoptions②">FragmentResultOptions</a></code>へ）したものとする。
            例外時は <var>box</var> を <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-3/#flow-layout"
              id="ref-for-flow-layout①①">flow layout</a> にフォールバックし、以降中止。</p>
        <li data-md="">
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate②">各</a>
            <var>childFragment</var> （<var>fragment</var> の <code
              class="idl"><a data-link-type="idl" href="#dom-fragmentresultoptions-childfragments" id="ref-for-dom-fragmentresultoptions-childfragments②">childFragments</a></code>）について次を実行：
          </p>
          <ol>
            <li data-md="">
              <p><var>childFragment</var> の <code
                  class="idl"><a data-link-type="idl" href="#dom-layoutfragment-generator-slot" id="ref-for-dom-layoutfragment-generator-slot①">[[generator]]</a></code>
                内部スロットが <var>layoutGenerator</var> と異なる場合、 <var>box</var> を <a data-link-type="dfn"
                  href="https://drafts.csswg.org/css-display-3/#flow-layout" id="ref-for-flow-layout①②">flow layout</a>
                にフォールバックし、以降中止。</p>
          </ol>
        <li data-md="">
          <p><var>sizingMode</var> が <code>"block-like"</code> の場合：</p>
          <ul>
            <li data-md="">
              <p>次の通り：</p>
              <ol>
                <li data-md="">
                  <p><var>inlineSize</var> を <var>layoutConstraints</var> の <code
                      class="idl"><a data-link-type="idl" href="#dom-layoutconstraints-fixedinlinesize" id="ref-for-dom-layoutconstraints-fixedinlinesize⑧">fixedInlineSize</a></code>（必須）とする。
                  </p>
                <li data-md="">
                  <p><var>blockSize</var> を <var>box</var> の <b>border-box</b> <a data-link-type="dfn"
                      href="https://www.w3.org/TR/css-writing-modes-3/#block-size" id="ref-for-block-size④">block
                      size</a>（書字モードに対し、<var>fragment</var> の <code
                      class="idl"><a data-link-type="idl" href="#dom-fragmentresultoptions-autoblocksize" id="ref-for-dom-fragmentresultoptions-autoblocksize">autoBlockSize</a></code>
                    を「内在高さ」として）とする。</p>
              </ol>
            <li data-md="">
              <p>それ以外（<var>sizingMode</var>が<code>"manual"</code>）：</p>
              <ol>
                <li data-md="">
                  <p><var>inlineSize</var> を <var>fragment</var> の <code
                      class="idl"><a data-link-type="idl" href="#dom-fragmentresultoptions-inlinesize" id="ref-for-dom-fragmentresultoptions-inlinesize">inlineSize</a></code>
                    とする。</p>
                <li data-md="">
                  <p><var>blockSize</var> を <var>fragment</var> の <code
                      class="idl"><a data-link-type="idl" href="#dom-fragmentresultoptions-blocksize" id="ref-for-dom-fragmentresultoptions-blocksize">blockSize</a></code>
                    とする。</p>
              </ol>
          </ul>
        <li data-md="">
          <p><var>box</var> の <a data-link-type="dfn" href="https://www.w3.org/TR/css3-break/#fragment"
              id="ref-for-fragment⑥">fragment</a> を次の内容で返す：</p>
          <ul>
            <li data-md="">
              <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-3/#inline-size"
                  id="ref-for-inline-size③">inline size</a> は <var>inlineSize</var>。</p>
            <li data-md="">
              <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-3/#block-size"
                  id="ref-for-block-size⑤">block size</a> は <var>blockSize</var>。</p>
            <li data-md="">
              <p>子フラグメントは <var>fragment</var> の <code
                  class="idl"><a data-link-type="idl" href="#dom-fragmentresultoptions-childfragments" id="ref-for-dom-fragmentresultoptions-childfragments③">childFragments</a></code>
                <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list"
                  id="ref-for-list⑧">リスト</a>とする。その順序は描画順に影響する（<a href="#layout-api-containers">§2 Layout API
                  Containers</a>参照）。<b>border box</b>基準の位置は、著者指定の <code
                  class="idl"><a data-link-type="idl" href="#dom-layoutfragment-inlineoffset" id="ref-for-dom-layoutfragment-inlineoffset⑤">inlineOffset</a></code>
                と <code
                  class="idl"><a data-link-type="idl" href="#dom-layoutfragment-blockoffset" id="ref-for-dom-layoutfragment-blockoffset⑤">blockOffset</a></code>
                に基づく。
              </p>
            <li data-md="">
              <p><a data-link-type="dfn" href="https://drafts.csswg.org/css-break/#fragmentation-break"
                  id="ref-for-fragmentation-break">断片化ブレーク</a>情報は <var>fragment</var> の <code
                  class="idl"><a data-link-type="idl" href="#dom-fragmentresultoptions-breaktoken" id="ref-for-dom-fragmentresultoptions-breaktoken①">breakToken</a></code>。
              </p>
            <li data-md="">
              <p><var>clonedData</var> を <a data-link-type="dfn"
                  href="https://html.spec.whatwg.org/#structuredserializeforstorage"
                  id="ref-for-structuredserializeforstorage">StructuredSerializeForStorage</a>（<var>fragment</var> の
                <code
                  class="idl"><a data-link-type="idl" href="#dom-fragmentresultoptions-data" id="ref-for-dom-fragmentresultoptions-data①">data</a></code>）で生成。
              </p>
              <p>ユーザーエージェントは <var>clonedData</var> を <a data-link-type="dfn"
                  href="https://www.w3.org/TR/css3-break/#fragment" id="ref-for-fragment⑦">fragment</a>とともに保存する必要がある。
              </p>
          </ul>
      </ol>
    </div>
    <h4 class="heading settled" data-level="5.6.3" id="utility-algorithms"><span class="secno">5.6.3. </span><span
        class="content">ユーティリティアルゴリズム</span><a class="self-link" href="#utility-algorithms"></a></h4>
    <p>このセクションでは、<a data-link-type="dfn" href="#determine-the-intrinsic-sizes"
        id="ref-for-determine-the-intrinsic-sizes③">内在サイズの決定</a>アルゴリズムと<a data-link-type="dfn"
        href="#generate-a-fragment" id="ref-for-generate-a-fragment③">フラグメント生成</a>アルゴリズムで共通して使われるアルゴリズムを示します。</p>
    <div class="algorithm" data-algorithm="get a document layout definition">
      ユーザーエージェントが<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport=""
        id="get-a-document-layout-definition">文書レイアウト定義取得</dfn>を<var>name</var>で行いたいとき、以下の手順を<em>必ず</em>実行します：
      <ol>
        <li data-md="">
          <p><var>documentLayoutDefinitionMap</var>を、関連する<a data-link-type="dfn"
              href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document③">document</a>の<a
              data-link-type="dfn" href="#document-layout-definitions"
              id="ref-for-document-layout-definitions①">文書レイアウト定義</a>mapとする。</p>
        <li data-md="">
          <p><var>documentLayoutDefinitionMap</var>[<var>name</var>]が<a data-link-type="dfn"
              href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists③">存在しない</a>場合、失敗を返して以降の手順を中止する。
          </p>
        <li data-md="">
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-get" id="ref-for-map-get②">get</a>
            <var>documentLayoutDefinitionMap</var>[<var>name</var>]の結果を返す。
          </p>
      </ol>
    </div>
    <div class="algorithm" data-algorithm="get a layout definition">
      ユーザーエージェントが<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport=""
        id="get-a-layout-definition">レイアウト定義取得</dfn>を<var>name</var>と<var>workletGlobalScope</var>で行いたいとき、以下の手順を<em>必ず</em>実行します：
      <ol>
        <li data-md="">
          <p><var>layoutDefinitionMap</var>を<var>workletGlobalScope</var> の<a data-link-type="dfn"
              href="#layout-definitions" id="ref-for-layout-definitions①">レイアウト定義</a>mapとする。</p>
        <li data-md="">
          <p><var>layoutDefinitionMap</var>[<var>name</var>]が<a data-link-type="dfn"
              href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists④">存在しない</a>場合、以下を実行：</p>
          <ol>
            <li data-md="">
              <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"
                  id="ref-for-queue-a-task①">Queue a task</a>で以下を実行：</p>
              <ol>
                <li data-md="">
                  <p><var>documentLayoutDefinitionMap</var>を関連する<a data-link-type="dfn"
                      href="https://dom.spec.whatwg.org/#concept-document"
                      id="ref-for-concept-document④">document</a>の<a data-link-type="dfn"
                      href="#document-layout-definition" id="ref-for-document-layout-definition①">文書レイアウト定義</a>mapとする。
                  </p>
                <li data-md="">
                  <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set" id="ref-for-map-set④">Set</a>
                    <var>documentLayoutDefinitionMap</var>[<var>name</var>]に<code>"invalid"</code>を設定する。
                  </p>
                <li data-md="">
                  <p>ユーザーエージェントは、すべての<code
                      class="idl"><a data-link-type="idl" href="#layoutworkletglobalscope" id="ref-for-layoutworkletglobalscope①①">LayoutWorkletGlobalScope</a></code>でクラスが登録されていない旨のエラーをデバッグコンソールに<em>推奨</em>で出力するべきです。
                  </p>
              </ol>
            <li data-md="">
              <p>失敗を返して、以降の手順を中止する。</p>
          </ol>
        <li data-md="">
          <p><a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-get-o-p"
              id="ref-for-sec-get-o-p⑥">get</a> <var>layoutDefinitionMap</var>[<var>name</var>]の結果を返す。</p>
      </ol>
    </div>
    <div class="algorithm" data-algorithm="get a layout class instance">
      ユーザーエージェントが<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport=""
        id="get-a-layout-class-instance">レイアウトクラスインスタンス取得</dfn>を<var>box</var>、<var>definition</var>、<var>workletGlobalScope</var>で行いたいとき、以下の手順を<em>必ず</em>実行します：
      <ol>
        <li data-md="">
          <p><var>layoutClassInstanceMap</var>を<var>box</var>の<a data-link-type="dfn" href="#layout-class-instances"
              id="ref-for-layout-class-instances">レイアウトクラスインスタンス</a>mapとする。</p>
        <li data-md="">
          <p><var>layoutInstance</var>を<a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-get-o-p"
              id="ref-for-sec-get-o-p⑦">get</a>
            <var>layoutClassInstanceMap</var>[<var>workletGlobalScope</var>]の結果とする。<var>layoutInstance</var>がnullの場合、以下を実行：
          </p>
          <ol>
            <li data-md="">
              <p><var>definition</var>の<a data-link-type="dfn" href="#layout-definition-constructor-valid-flag"
                  id="ref-for-layout-definition-constructor-valid-flag①">コンストラクター有効フラグ</a>がfalseの場合、失敗を返して以降の手順を中止する。
              </p>
            <li data-md="">
              <p><var>layoutCtor</var>を<var>definition</var>の<a data-link-type="dfn"
                  href="#layout-definition-class-constructor"
                  id="ref-for-layout-definition-class-constructor①">クラスコンストラクター</a>とする。</p>
            <li data-md="">
              <p><var>layoutInstance</var>を<a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-construct"
                  id="ref-for-sec-construct">Construct</a>(<var>layoutCtor</var>)の結果とする。</p>
              <p><a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-construct"
                  id="ref-for-sec-construct①">construct</a>が例外を投げた場合は<var>definition</var>の<a data-link-type="dfn"
                  href="#layout-definition-constructor-valid-flag"
                  id="ref-for-layout-definition-constructor-valid-flag②">コンストラクター有効フラグ</a>をfalseに設定し、失敗を返して以降の手順を中止する。
              </p>
            <li data-md="">
              <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set" id="ref-for-map-set⑤">Set</a>
                <var>layoutClassInstanceMap</var>[<var>workletGlobalScope</var>]に<var>layoutInstance</var>を設定する。
              </p>
          </ol>
        <li data-md="">
          <p><var>layoutInstance</var>を返す。</p>
      </ol>
    </div>
    <div class="algorithm" data-algorithm="run a generator">
      ユーザーエージェントが<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport=""
        id="run-a-generator">ジェネレーター実行</dfn>を<var>generator</var>、<var>generatorType</var>で行いたいとき、以下の手順を<em>必ず</em>実行します：
      <ol>
        <li data-md="">
          <p><var>done</var>を<code>false</code>で初期化した<a data-link-type="dfn"
              href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean">boolean</a>とする。</p>
        <li data-md="">
          <p><var>nextValue</var>をundefinedとする。</p>
        <li data-md="">
          <p><var>done</var>が<code>true</code>になるまで以下を繰り返す：</p>
          <ol>
            <li data-md="">
              <p><var>nextFunction</var>を<a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-get-o-p"
                  id="ref-for-sec-get-o-p⑧">Get</a>(<var>generator</var>, <code>"next"</code>)の結果とする。</p>
            <li data-md="">
              <p><a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-iscallable"
                  id="ref-for-iscallable②">IsCallable</a>(<var>nextFunction</var>)がfalseなら<a data-link-type="dfn"
                  href="https://heycam.github.io/webidl/#dfn-throw" id="ref-for-dfn-throw①⑤">throw</a>で<a
                  data-link-type="dfn"
                  href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"
                  id="ref-for-sec-native-error-types-used-in-this-standard-typeerror⑦">TypeError</a>を投げて以降の手順を中止する。</p>
            <li data-md="">
              <p><var>nextResult</var>を<a data-link-type="dfn"
                  href="https://heycam.github.io/webidl/#es-invoking-callback-functions"
                  id="ref-for-es-invoking-callback-functions②">Invoke</a>(<var>nextFunction</var>, <var>generator</var>,
                «<var>nextValue</var>»)の結果とする。</p>
              <p>例外発生時は失敗を返して以降の手順を中止する。</p>
            <li data-md="">
              <p><a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values"
                  id="ref-for-sec-ecmascript-data-types-and-values①">Type</a>(<var>nextResult</var>)がObjectでない場合は<a
                  data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw"
                  id="ref-for-dfn-throw①⑦">throw</a>で<a data-link-type="dfn"
                  href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"
                  id="ref-for-sec-native-error-types-used-in-this-standard-typeerror⑧">TypeError</a>を投げて以降の手順を中止する。</p>
            <li data-md="">
              <p><var>requestOrRequests</var>を<a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-get-o-p"
                  id="ref-for-sec-get-o-p⑨">Get</a>(nextResult,
                <code>"value"</code>)の結果とする。
              </p>
            <li data-md="">
              <p><var>done</var>を<a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-get-o-p"
                  id="ref-for-sec-get-o-p①⓪">Get</a>(<var>nextResult</var>, <code>"done"</code>)の結果とする。</p>
            <li data-md="">
              <p><a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-getmethod"
                  id="ref-for-getmethod">GetMethod</a>(<var>requestOrRequests</var>, <code>@@iterable</code>)が存在する場合：
              </p>
              <ol>
                <li data-md="">
                  <p><var>results</var>を<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty"
                      id="ref-for-list-empty">空</a>の<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list"
                      id="ref-for-list⑨">リスト</a>とする。</p>
                <li data-md="">
                  <p><var>requests</var>を<a data-link-type="dfn" href="https://heycam.github.io/webidl/#es-type-mapping"
                      id="ref-for-es-type-mapping⑤">変換</a>(<var>requestOrRequests</var>を<code>sequence&lt;LayoutFragmentRequestOrIntrinsicSizesRequest></code>へ)したものとする。
                  </p>
                  <p>例外発生時は例外を投げて以降の手順を中止する。</p>
                <li data-md="">
                  <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                      id="ref-for-list-iterate③">各</a> <var>request</var> について：</p>
                  <ol>
                    <li data-md="">
                      <p><var>result</var>を<a data-link-type="dfn" href="#produce-a-generator-result"
                          id="ref-for-produce-a-generator-result">ジェネレーター結果生成</a>(<var>request</var>,
                        <var>generator</var>, <var>generatorType</var>)したものとする。
                      </p>
                    <li data-md="">
                      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append"
                          id="ref-for-list-append②">Append</a> <var>result</var> を<var>results</var>に追加。</p>
                  </ol>
                <li data-md="">
                  <p><var>nextValue</var>を<var>results</var>に設定する。</p>
                <li data-md="">
                  <p>続行。</p>
              </ol>
            <li data-md="">
              <p><var>request</var>を<a data-link-type="dfn" href="https://heycam.github.io/webidl/#es-type-mapping"
                  id="ref-for-es-type-mapping⑥">変換</a>(<var>requestOrRequests</var>を<code
                  class="idl"><a data-link-type="idl" href="#typedefdef-layoutfragmentrequestorintrinsicsizesrequest" id="ref-for-typedefdef-layoutfragmentrequestorintrinsicsizesrequest">LayoutFragmentRequestOrIntrinsicSizesRequest</a></code>へ)したものとする。
              </p>
              <p>例外発生時は例外を投げて以降の手順を中止する。</p>
            <li data-md="">
              <p><var>result</var>を<a data-link-type="dfn" href="#produce-a-generator-result"
                  id="ref-for-produce-a-generator-result①">ジェネレーター結果生成</a>(<var>request</var>, <var>generator</var>,
                <var>generatorType</var>)したものとする。
              </p>
              <p><a data-link-type="dfn" href="#produce-a-generator-result"
                  id="ref-for-produce-a-generator-result②">ジェネレーター結果生成</a>が失敗を返した場合、失敗を返して以降の手順を中止する。</p>
            <li data-md="">
              <p><var>nextValue</var>を<var>result</var>に設定する。</p>
            <li data-md="">
              <p>続行。</p>
          </ol>
          <p>ユーザーエージェントは上記ループを順不同・<a data-link-type="dfn"
              href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
              id="ref-for-in-parallel④">並列</a>で実行してもよい。ただし<var>requests</var>と<var>results</var>の順序は<em>必ず</em>一貫性が必要。
          </p>
          <p class="note" role="note"><span>注:</span>
            これはユーザーエージェントが適切なレイアウトアルゴリズムを別スレッドや非同期（例えば他の処理とタイムスライス）で実行可能にするためです。並列実行の場合、外側ループは全スレッドの完了を待ってからジェネレーターを再度呼び出す必要があります。著者に部分結果を返してはいけません。
          </p>
        <li data-md="">
          <p><a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-get-o-p"
              id="ref-for-sec-get-o-p①①">Get</a>(<var>nextResult</var>, <code>"value"</code>)の結果を返す。</p>
      </ol>
    </div>
    <div class="algorithm" data-algorithm="produce a generator result">
      ユーザーエージェントが<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport=""
        id="produce-a-generator-result">ジェネレーター結果生成</dfn>を<var>request</var>、<var>generator</var>、<var>generatorType</var>で行いたいとき、以下の手順を<em>必ず</em>実行します：
      <ol>
        <li data-md="">
          <p><var>request</var>が<code
              class="idl"><a data-link-type="idl" href="#intrinsicsizesrequest" id="ref-for-intrinsicsizesrequest⑤">IntrinsicSizesRequest</a></code>なら：
          </p>
          <ol>
            <li data-md="">
              <p><var>layoutChild</var>を<var>request</var>の内部スロット<code
                  class="idl"><a data-link-type="idl" href="#dom-intrinsicsizesrequest-layoutchild-slot" id="ref-for-dom-intrinsicsizesrequest-layoutchild-slot①">[[layoutChild]]</a></code>から取得。
              </p>
            <li data-md="">
              <p><var>box</var>を<var>layoutChild</var>の内部スロット<code
                  class="idl"><a data-link-type="idl" href="#dom-layoutchild-box-slot" id="ref-for-dom-layoutchild-box-slot①">[[box]]</a></code>から取得。
              </p>
            <li data-md="">
              <p><var>box</var>が<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box-tree"
                  id="ref-for-box-tree⑧">box tree</a>に<em>接続されていない</em>なら、失敗を返して中止する。</p>
              <p class="note" role="note"><span>注:</span> 著者は前の呼び出しから<code
                  class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild③⑦">LayoutChild</a></code>を保持する場合がありますが、boxは一度だけbox-treeに接続され、再利用されないことが想定されています。
              </p>
            <li data-md="">
              <p><var>internalIntrinsicSizes</var>をユーザーエージェントが<var>box</var>の<b>border box</b>のmin/max content
                contributionを計算した結果とする。</p>
            <li data-md="">
              <p><a data-link-type="dfn" href="#create-an-intrinsic-sizes-object"
                  id="ref-for-create-an-intrinsic-sizes-object">内在サイズオブジェクト生成</a>(<var>request</var>,
                <var>internalIntrinsicSizes</var>)の結果を返す。
              </p>
          </ol>
        <li data-md="">
          <p><var>request</var>が<code
              class="idl"><a data-link-type="idl" href="#layoutfragmentrequest" id="ref-for-layoutfragmentrequest⑦">LayoutFragmentRequest</a></code>かつ<var>generatorType</var>が<code>"layout"</code>なら：
          </p>
          <ol>
            <li data-md="">
              <p><var>layoutChild</var>を<var>request</var>の内部スロット<code
                  class="idl"><a data-link-type="idl" href="#dom-layoutfragmentrequest-layoutchild-slot" id="ref-for-dom-layoutfragmentrequest-layoutchild-slot①">[[layoutChild]]</a></code>から取得。
              </p>
            <li data-md="">
              <p><var>box</var>を<var>layoutChild</var>の内部スロット<code
                  class="idl"><a data-link-type="idl" href="#dom-layoutchild-box-slot" id="ref-for-dom-layoutchild-box-slot②">[[box]]</a></code>から取得。
              </p>
            <li data-md="">
              <p><var>box</var>が<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box-tree"
                  id="ref-for-box-tree⑨">box tree</a>に<em>接続されていない</em>なら、失敗を返して中止する。</p>
              <p class="note" role="note"><span>注:</span> 著者は前の呼び出しから<code
                  class="idl"><a data-link-type="idl" href="#layoutchild" id="ref-for-layoutchild③⑧">LayoutChild</a></code>を保持する場合がありますが、boxは一度だけbox-treeに接続され、再利用されないことが想定されています。
              </p>
            <li data-md="">
              <p><var>childLayoutConstraints</var>を<var>request</var>の内部スロット<code
                  class="idl"><a data-link-type="idl" href="#dom-layoutfragmentrequest-layoutconstraints-slot" id="ref-for-dom-layoutfragmentrequest-layoutconstraints-slot①">[[layoutConstraints]]</a></code>から取得。
              </p>
            <li data-md="">
              <p><var>childBreakToken</var>を<var>request</var>の内部スロット<code
                  class="idl"><a data-link-type="idl" href="#dom-layoutfragmentrequest-breaktoken-slot" id="ref-for-dom-layoutfragmentrequest-breaktoken-slot①">[[breakToken]]</a></code>から取得。
              </p>
            <li data-md="">
              <p>
                <var>internalFragment</var>をユーザーエージェントが<var>box</var>、<var>childLayoutConstraints</var>、<var>childBreakToken</var>から生成した<a
                  data-link-type="dfn" href="https://www.w3.org/TR/css3-break/#fragment"
                  id="ref-for-fragment⑧">fragment</a>とする。
              </p>
            <li data-md="">
              <p><a data-link-type="dfn" href="#create-a-layout-fragment"
                  id="ref-for-create-a-layout-fragment">レイアウトフラグメント生成</a>(<var>generator</var>, <var>request</var>,
                <var>internalFragment</var>)の結果を返す。
              </p>
          </ol>
        <li data-md="">
          <p>（上記分岐に該当しない場合）失敗を返す。</p>
      </ol>
    </div>
    <h2 class="heading settled" data-level="6" id="security-considerations"><span class="secno">6. </span><span
        class="content">セキュリティ考慮事項</span><a class="self-link" href="#security-considerations"></a></h2>
    <p>これらの機能によって新たなセキュリティ問題は知られていません。</p>
    <h2 class="heading settled" data-level="7" id="privacy-considerations"><span class="secno">7. </span><span
        class="content">プライバシー考慮事項</span><a class="self-link" href="#privacy-considerations"></a></h2>
    <p>これらの機能によって新たなプライバシー問題は知られていません。</p>
  </main>
  <h2 class="no-ref no-num heading settled" id="conformance"><span class="content"> 適合性</span><a class="self-link"
      href="#conformance"></a></h2>
  <h3 class="no-ref heading settled" id="conventions"><span class="content"> 文書の規約</span><a class="self-link"
      href="#conventions"></a></h3>
  <p>適合性要件は、記述的な断言とRFC 2119の用語を組み合わせて表現されています。主要語「MUST」,
    「MUST NOT」, 「REQUIRED」, 「SHALL」, 「SHALL NOT」, 「SHOULD」, 「SHOULD NOT」,
    「RECOMMENDED」, 「MAY」, 「OPTIONAL」は、規範的な部分においてRFC 2119の定義通りに解釈されます。
    ただし、可読性を高めるため、本仕様ではこれらの語はすべて大文字では表記されていません。</p>
  <p>本仕様の全てのテキストは、明示的に非規範的と記載されたセクション、例、および注記を除き規範的です。 <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a>
  </p>
  <p>本仕様の例は、「例えば」という語で始まるか、<code>class="example"</code>を用いて規範的な本文から区別されています。例えば:</p>
  <div class="example" id="example-f839f6c8">
    <a class="self-link" href="#example-f839f6c8"></a>
    <p>これは情報提供的な例です。</p>
  </div>
  <p>情報提供的な注記は「注:」で始まり、<code>class="note"</code>で規範的な本文から区別されています。例えば:</p>
  <p class="note" role="note">注: これは情報提供的な注記です。</p>
  <p>勧告は規範的なセクションであり、特別な注意を喚起するようにスタイリングされ、<code>&lt;strong class="advisement"></code>で他の規範的な本文と区別されます。例えば: <strong
      class="advisement"> UAは必ずアクセシブルな代替手段を提供しなければなりません。 </strong> </p>
  <h3 class="no-ref heading settled" id="conformance-classes"><span class="content"> 適合性クラス</span><a class="self-link"
      href="#conformance-classes"></a></h3>
  <p>本仕様への適合性は、次の三つの適合性クラスで定義されます:</p>
  <dl>
    <dt>スタイルシート
    <dd><a href="https://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
        スタイルシート</a>。
    <dt>レンダラー
    <dd><a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>で、スタイルシートの意味を解釈し、それを用いる文書をレンダリングするもの。
    <dt>オーサリングツール
    <dd><a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>で、スタイルシートを作成するもの。
  </dl>
  <p>本モジュールで定義された構文を用いる全ての文が、汎用CSS文法および各機能の個別文法に従って有効である場合、そのスタイルシートは本仕様に適合しているとみなされます。</p>
  <p>
    レンダラーは、スタイルシートを適切な仕様通りに解釈することに加えて、本仕様で定義された全ての機能を正しく解析し、文書を適切にレンダリングすることで本仕様に適合しているとみなされます。ただし、デバイスの制限によりUAが文書を正しくレンダリングできない場合でも、そのUAは非適合とはなりません。（例えば、UAは白黒モニター上で色を表示する必要はありません。）
  </p>
  <p>オーサリングツールは、汎用CSS文法および本モジュールの各機能ごとの文法に従い構文的に正しいスタイルシートを書き、さらに本モジュールで記載されたスタイルシートの全ての適合性要件を満たしている場合、本仕様に適合しています。</p>
  <h3 class="no-ref heading settled" id="partial"><span class="content"> 部分実装</span><a class="self-link"
      href="#partial"></a></h3>
  <p>著者が将来互換性のあるパース規則を活用してフォールバック値を指定できるよう、CSSレンダラーは<strong>必ず</strong>、有効なレベルのサポートがない
    at-規則、プロパティ、プロパティ値、キーワード、その他の構文を無効として（<a
      href="https://www.w3.org/TR/CSS21/conform.html#ignore">必要に応じて無視</a>）扱う必要があります。特に、ユーザーエージェントは<strong>絶対に</strong>、単一の複数値プロパティ宣言で未サポートの値だけを無視してサポートされている値を適用することをしてはなりません。値の一部が無効とみなされる場合（未サポート値は必ず無効とみなされる）、CSSでは宣言全体を無視する必要があります。
  </p>
  <h4 class="heading settled" id="conform-future-proofing"><span class="content"> 不安定及び独自機能の実装について</span><a
      class="self-link" href="#conform-future-proofing"></a></h4>
  <p>将来の安定したCSS機能との衝突を避けるため、CSSWGは<a href="https://www.w3.org/TR/CSS/#future-proofing">ベストプラクティス</a>に従った<a
      href="https://www.w3.org/TR/CSS/#unstable">不安定</a>機能および<a
      href="https://www.w3.org/TR/CSS/#proprietary-extension">独自拡張</a>機能の実装を推奨します。</p>
  <h3 class="no-ref heading settled" id="testing"><span class="content"> 非実験的実装</span><a class="self-link"
      href="#testing"></a></h3>
  <p>仕様がCandidate Recommendationの段階に到達すると、非実験的な実装が可能となり、実装者は仕様通りに正しく実装できるCRレベルの機能については、ベンダープレフィックスなしの実装をリリースすべきです。</p>
  <p>
    CSSの実装間で相互運用性を確立・維持するため、CSSワーキンググループは、非実験的なCSSレンダラーが実装レポート（必要に応じてそのテストケースも含む）をW3Cに提出することを推奨します。W3Cに提出されたテストケースはCSSワーキンググループによってレビュー・修正される場合があります。
  </p>
  <p>
    テストケースおよび実装レポートの提出方法については、CSSワーキンググループのウェブサイト <a
      href="https://www.w3.org/Style/CSS/Test/">https://www.w3.org/Style/CSS/Test/</a> を参照してください。
    質問は <a href="https://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a> メーリングリストまで。
    <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
  </p>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
      href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本仕様で定義されている用語</span><a
      class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
    <li><a href="#dom-layoutedges-all">all</a><span>, §3.6 にて</span>
    <li><a href="#dom-fragmentresultoptions-autoblocksize">autoBlockSize</a><span>, §5.6 にて</span>
    <li>
      availableBlockSize
      <ul>
        <li><a href="#dom-layoutconstraints-availableblocksize">LayoutConstraintsの属性</a><span>, §3.4 にて</span>
        <li><a href="#dom-layoutconstraintsoptions-availableblocksize">LayoutConstraintsOptionsのdict-member</a><span>,
            §3.4 にて</span>
      </ul>
    <li>
      availableInlineSize
      <ul>
        <li><a href="#dom-layoutconstraints-availableinlinesize">LayoutConstraintsの属性</a><span>, §3.4 にて</span>
        <li><a href="#dom-layoutconstraintsoptions-availableinlinesize">LayoutConstraintsOptionsのdict-member</a><span>,
            §3.4 にて</span>
      </ul>
    <li>
      block
      <ul>
        <li><a href="#dom-layoutedgesizes-block">LayoutEdgeSizesの属性</a><span>, §3.6 にて</span>
        <li><a href="#dom-childdisplaytype-block">ChildDisplayTypeのenum値</a><span>, §5.4 にて</span>
      </ul>
    <li><a href="#dom-childdisplaytype-block">"block"</a><span>, §5.4 にて</span>
    <li><a href="#dom-layoutedgesizes-blockend">blockEnd</a><span>, §3.6 にて</span>
    <li>
      blockFragmentationOffset
      <ul>
        <li><a href="#dom-layoutconstraints-blockfragmentationoffset">LayoutConstraintsの属性</a><span>, §3.4 にて</span>
        <li><a
            href="#dom-layoutconstraintsoptions-blockfragmentationoffset">LayoutConstraintsOptionsのdict-member</a><span>,
            §3.4 にて</span>
      </ul>
    <li>
      blockFragmentationType
      <ul>
        <li><a href="#dom-layoutconstraints-blockfragmentationtype">LayoutConstraintsの属性</a><span>, §3.4 にて</span>
        <li><a
            href="#dom-layoutconstraintsoptions-blockfragmentationtype">LayoutConstraintsOptionsのdict-member</a><span>,
            §3.4 にて</span>
      </ul>
    <li><a href="#enumdef-blockfragmentationtype">BlockFragmentationType</a><span>, §3.4 にて</span>
    <li><a href="#dom-layoutsizingmode-block-like">block-like</a><span>, §5.4 にて</span>
    <li><a href="#dom-layoutsizingmode-block-like">"block-like"</a><span>, §5.4 にて</span>
    <li><a href="#dom-layoutfragment-blockoffset">blockOffset</a><span>, §3.2 にて</span>
    <li>
      blockSize
      <ul>
        <li><a href="#dom-layoutfragment-blocksize">LayoutFragmentの属性</a><span>, §3.2 にて</span>
        <li><a href="#dom-fragmentresultoptions-blocksize">FragmentResultOptionsのdict-member</a><span>, §5.6 にて</span>
      </ul>
    <li><a href="#dom-layoutedgesizes-blockstart">blockStart</a><span>, §3.6 にて</span>
    <li><a href="#dom-layoutedges-border">border</a><span>, §3.6 にて</span>
    <li><a href="#dom-layoutchild-box-slot">[[box]]</a><span>, §3.1 にて</span>
    <li>
      breakToken
      <ul>
        <li><a href="#dom-layoutfragment-breaktoken">LayoutFragmentの属性</a><span>, §3.2 にて</span>
        <li><a href="#dom-fragmentresultoptions-breaktoken">FragmentResultOptionsのdict-member</a><span>, §5.6 にて</span>
      </ul>
    <li><a href="#breaktoken">BreakToken</a><span>, §3.5 にて</span>
    <li><a href="#dom-layoutfragmentrequest-breaktoken-slot">[[breakToken]]</a><span>, §5.5.1 にて</span>
    <li><a href="#dictdef-breaktokenoptions">BreakTokenOptions</a><span>, §3.5 にて</span>
    <li><a href="#enumdef-breaktype">BreakType</a><span>, §3.5 にて</span>
    <li><a href="#dom-childbreaktoken-breaktype">breakType</a><span>, §3.5 にて</span>
    <li><a href="#dom-childbreaktoken-child">child</a><span>, §3.5 にて</span>
    <li><a href="#childbreaktoken">ChildBreakToken</a><span>, §3.5 にて</span>
    <li>
      childBreakTokens
      <ul>
        <li><a href="#dom-breaktoken-childbreaktokens">BreakTokenの属性</a><span>, §3.5 にて</span>
        <li><a href="#dom-breaktokenoptions-childbreaktokens">BreakTokenOptionsのdict-member</a><span>, §3.5 にて</span>
      </ul>
    <li><a href="#dom-layoutoptions-childdisplay">childDisplay</a><span>, §5.4 にて</span>
    <li><a href="#enumdef-childdisplaytype">ChildDisplayType</a><span>, §5.4 にて</span>
    <li><a href="#dom-fragmentresultoptions-childfragments">childFragments</a><span>, §5.6 にて</span>
    <li>
      child input properties
      <ul>
        <li><a href="#layout-definition-child-input-properties">layout definitionのdfn</a><span>, §5.1 にて</span>
        <li><a href="#document-layout-definition-child-input-properties">document layout definitionのdfn</a><span>, §5.1
            にて</span>
      </ul>
    <li><a href="#child-layout">child layout</a><span>, §3 にて</span>
    <li><a href="#layout-definition-class-constructor">class constructor</a><span>, §5.1 にて</span>
    <li>
      "column"
      <ul>
        <li><a href="#dom-blockfragmentationtype-column">BlockFragmentationTypeのenum値</a><span>, §3.4 にて</span>
        <li><a href="#dom-breaktype-column">BreakTypeのenum値</a><span>, §3.5 にて</span>
      </ul>
    <li>
      column
      <ul>
        <li><a href="#dom-blockfragmentationtype-column">BlockFragmentationTypeのenum値</a><span>, §3.4 にて</span>
        <li><a href="#dom-breaktype-column">BreakTypeのenum値</a><span>, §3.5 にて</span>
      </ul>
    <li><a href="#layout-definition-constructor-valid-flag">constructor valid flag</a><span>, §5.1 にて</span>
    <li><a href="#create-a-layout-constraints-object">create a layout constraints object</a><span>, §3.4 にて</span>
    <li><a href="#create-a-layout-fragment">create a layout fragment</a><span>, §3.2 にて</span>
    <li><a href="#create-an-intrinsic-sizes-object">create an intrinsic sizes object</a><span>, §3.3 にて</span>
    <li><a href="#current-layout">current layout</a><span>, §3 にて</span>
    <li>
      data
      <ul>
        <li><a href="#dom-layoutfragment-data">LayoutFragmentの属性</a><span>, §3.2 にて</span>
        <li><a href="#dom-layoutconstraints-data">LayoutConstraintsの属性</a><span>, §3.4 にて</span>
        <li><a href="#dom-layoutconstraintsoptions-data">LayoutConstraintsOptionsのdict-member</a><span>, §3.4 にて</span>
        <li><a href="#dom-breaktoken-data">BreakTokenの属性</a><span>, §3.5 にて</span>
        <li><a href="#dom-breaktokenoptions-data">BreakTokenOptionsのdict-member</a><span>, §3.5 にて</span>
        <li><a href="#dom-fragmentresultoptions-data">FragmentResultOptionsのdict-member</a><span>, §5.6 にて</span>
      </ul>
    <li><a href="#determine-the-intrinsic-sizes">determine the intrinsic sizes</a><span>, §5.6.1 にて</span>
    <li><a href="#document-layout-definition">document layout definition</a><span>, §5.1 にて</span>
    <li><a href="#document-layout-definitions">document layout definitions</a><span>, §5.4 にて</span>
    <li>
      fixedBlockSize
      <ul>
        <li><a href="#dom-layoutconstraints-fixedblocksize">LayoutConstraintsの属性</a><span>, §3.4 にて</span>
        <li><a href="#dom-layoutconstraintsoptions-fixedblocksize">LayoutConstraintsOptionsのdict-member</a><span>, §3.4
            にて</span>
      </ul>
    <li>
      fixedInlineSize
      <ul>
        <li><a href="#dom-layoutconstraints-fixedinlinesize">LayoutConstraintsの属性</a><span>, §3.4 にて</span>
        <li><a href="#dom-layoutconstraintsoptions-fixedinlinesize">LayoutConstraintsOptionsのdict-member</a><span>, §3.4
            にて</span>
      </ul>
    <li><a href="#dictdef-fragmentresultoptions">FragmentResultOptions</a><span>, §5.6 にて</span>
    <li><a href="#generate-a-fragment">generate a fragment</a><span>, §5.6.2 にて</span>
    <li><a href="#dom-layoutfragment-generator-slot">[[generator]]</a><span>, §3.2 にて</span>
    <li><a href="#get-a-document-layout-definition">get a document layout definition</a><span>, §5.6.3 にて</span>
    <li><a href="#get-a-layout-child">get a layout child</a><span>, §3.1.1 にて</span>
    <li><a href="#get-a-layout-class-instance">get a layout class instance</a><span>, §5.6.3 にて</span>
    <li><a href="#get-a-layout-definition">get a layout definition</a><span>, §5.6.3 にて</span>
    <li><a href="#dom-layoutedgesizes-inline">inline</a><span>, §3.6 にて</span>
    <li><a href="#dom-layoutedgesizes-inlineend">inlineEnd</a><span>, §3.6 にて</span>
    <li><a href="#dom-layoutfragment-inlineoffset">inlineOffset</a><span>, §3.2 にて</span>
    <li>
      inlineSize
      <ul>
        <li><a href="#dom-layoutfragment-inlinesize">LayoutFragmentの属性</a><span>, §3.2 にて</span>
        <li><a href="#dom-fragmentresultoptions-inlinesize">FragmentResultOptionsのdict-member</a><span>, §5.6 にて</span>
      </ul>
    <li><a href="#dom-layoutedgesizes-inlinestart">inlineStart</a><span>, §3.6 にて</span>
    <li>
      input properties
      <ul>
        <li><a href="#layout-definition-input-properties">layout definitionのdfn</a><span>, §5.1 にて</span>
        <li><a href="#document-layout-definition-input-properties">document layout definitionのdfn</a><span>, §5.1
            にて</span>
      </ul>
    <li><a href="#dom-layoutchild-intrinsicsizes">intrinsicSizes()</a><span>, §3.1 にて</span>
    <li><a href="#intrinsicsizes">IntrinsicSizes</a><span>, §3.3 にて</span>
    <li><a href="#layout-definition-intrinsic-sizes-generator-function">intrinsic sizes generator function</a><span>,
        §5.1 にて</span>
    <li><a href="#intrinsic-sizes-invalid">intrinsic-sizes-invalid</a><span>, §5.2 にて</span>
    <li><a href="#intrinsicsizesrequest">IntrinsicSizesRequest</a><span>, §5.5.1 にて</span>
    <li><a href="#dom-intrinsicsizes-intrinsicsizesrequest-slot">[[intrinsicSizesRequest]]</a><span>, §3.3 にて</span>
    <li><a href="#dictdef-intrinsicsizesresultoptions">IntrinsicSizesResultOptions</a><span>, §5.6 にて</span>
    <li><a href="#intrinsic-sizes-valid">intrinsic-sizes-valid</a><span>, §5.2 にて</span>
    <li><a href="#intrinsic-sizes-valid-flag">intrinsic sizes valid flag</a><span>, §5.2 にて</span>
    <li><a href="#invalidate-layout-functions">invalidate layout functions</a><span>, §5.2 にて</span>
    <li><a href="#invoke-a-intrinsic-sizes-callback">invoke a intrinsic sizes callback</a><span>, §5.6.1 にて</span>
    <li><a href="#invoke-a-layout-callback">invoke a layout callback</a><span>, §5.6.2 にて</span>
    <li><a href="#valdef-display-layout">layout()</a><span>, §2 にて</span>
    <li><a href="#layout-api-children">layout API children</a><span>, §2 にて</span>
    <li><a href="#layout-api-container">layout API container</a><span>, §2 にて</span>
    <li><a href="#layout-api-formatting-context">layout API formatting context</a><span>, §2 にて</span>
    <li><a href="#layoutchild">LayoutChild</a><span>, §3.1 にて</span>
    <li>
      [[layoutChild]]
      <ul>
        <li><a href="#dom-intrinsicsizesrequest-layoutchild-slot">IntrinsicSizesRequestの属性</a><span>, §5.5.1 にて</span>
        <li><a href="#dom-layoutfragmentrequest-layoutchild-slot">LayoutFragmentRequestの属性</a><span>, §5.5.1 にて</span>
      </ul>
    <li><a href="#dom-box-layoutchildmap-slot">[[layoutChildMap]]</a><span>, §3.1.1 にて</span>
    <li><a href="#layout-class-instances">layout class instances</a><span>, §5.4 にて</span>
    <li><a href="#dom-layoutconstraints-layoutconstraints">LayoutConstraints()</a><span>, §3.4 にて</span>
    <li><a href="#layoutconstraints">LayoutConstraints</a><span>, §3.4 にて</span>
    <li><a href="#dom-layoutfragmentrequest-layoutconstraints-slot">[[layoutConstraints]]</a><span>, §5.5.1 にて</span>
    <li><a href="#dictdef-layoutconstraintsoptions">LayoutConstraintsOptions</a><span>, §3.4 にて</span>
    <li><a href="#dom-layoutconstraints-layoutconstraints">LayoutConstraints(options)</a><span>, §3.4 にて</span>
    <li><a href="#layout-definition">layout definition</a><span>, §5.1 にて</span>
    <li><a href="#layout-definitions">layout definitions</a><span>, §5.4 にて</span>
    <li><a href="#layoutedges">LayoutEdges</a><span>, §3.6 にて</span>
    <li><a href="#layoutedgesizes">LayoutEdgeSizes</a><span>, §3.6 にて</span>
    <li><a href="#layoutfragment">LayoutFragment</a><span>, §3.2 にて</span>
    <li><a href="#dom-layoutfragment-layoutfragmentrequest-slot">[[layoutFragmentRequest]]</a><span>, §3.2 にて</span>
    <li><a href="#layoutfragmentrequest">LayoutFragmentRequest</a><span>, §5.5.1 にて</span>
    <li><a
        href="#typedefdef-layoutfragmentrequestorintrinsicsizesrequest">LayoutFragmentRequestOrIntrinsicSizesRequest</a><span>,
        §5.5.1 にて</span>
    <li><a href="#layout-definition-layout-generator-function">layout generator function</a><span>, §5.1 にて</span>
    <li><a href="#layout-invalid">layout-invalid</a><span>, §5.2 にて</span>
    <li><a href="#dom-layoutchild-layoutnextfragment">layoutNextFragment(constraints, breakToken)</a><span>, §3.1
        にて</span>
    <li>
      layout options
      <ul>
        <li><a href="#layout-definition-layout-options">layout definitionのdfn</a><span>, §5.1 にて</span>
        <li><a href="#document-layout-definition-layout-options">document layout definitionのdfn</a><span>, §5.1
            にて</span>
      </ul>
    <li><a href="#dictdef-layoutoptions">LayoutOptions</a><span>, §5.4 にて</span>
    <li><a href="#enumdef-layoutsizingmode">LayoutSizingMode</a><span>, §5.4 にて</span>
    <li><a href="#layout-valid">layout-valid</a><span>, §5.2 にて</span>
    <li><a href="#layout-valid-flag">layout valid flag</a><span>, §5.2 にて</span>
    <li><a href="#dom-css-layoutworklet">layoutWorklet</a><span>, §5.3 にて</span>
    <li><a href="#layoutworkletglobalscope">LayoutWorkletGlobalScope</a><span>, §5.3 にて</span>
    <li><a href="#dom-breaktype-line">"line"</a><span>, §3.5 にて</span>
    <li><a href="#dom-breaktype-line">line</a><span>, §3.5 にて</span>
    <li><a href="#dom-layoutsizingmode-manual">"manual"</a><span>, §5.4 にて</span>
    <li><a href="#dom-layoutsizingmode-manual">manual</a><span>, §5.4 にて</span>
    <li>
      maxContentSize
      <ul>
        <li><a href="#dom-intrinsicsizes-maxcontentsize">IntrinsicSizesの属性</a><span>, §3.3 にて</span>
        <li><a href="#dom-intrinsicsizesresultoptions-maxcontentsize">IntrinsicSizesResultOptionsのdict-member</a><span>,
            §5.6 にて</span>
      </ul>
    <li>
      minContentSize
      <ul>
        <li><a href="#dom-intrinsicsizes-mincontentsize">IntrinsicSizesの属性</a><span>, §3.3 にて</span>
        <li><a href="#dom-intrinsicsizesresultoptions-mincontentsize">IntrinsicSizesResultOptionsのdict-member</a><span>,
            §5.6 にて</span>
      </ul>
    <li>
      "none"
      <ul>
        <li><a href="#dom-blockfragmentationtype-none">BlockFragmentationTypeのenum値</a><span>, §3.4 にて</span>
        <li><a href="#dom-breaktype-none">BreakTypeのenum値</a><span>, §3.5 にて</span>
      </ul>
    <li>
      none
      <ul>
        <li><a href="#dom-blockfragmentationtype-none">BlockFragmentationTypeのenum値</a><span>, §3.4 にて</span>
        <li><a href="#dom-breaktype-none">BreakTypeのenum値</a><span>, §3.5 にて</span>
      </ul>
    <li><a href="#dom-childdisplaytype-normal">"normal"</a><span>, §5.4 にて</span>
    <li><a href="#dom-childdisplaytype-normal">normal</a><span>, §5.4 にて</span>
    <li><a href="#dom-layoutedges-padding">padding</a><span>, §3.6 にて</span>
    <li>
      page
      <ul>
        <li><a href="#dom-blockfragmentationtype-page">BlockFragmentationTypeのenum値</a><span>, §3.4 にて</span>
        <li><a href="#dom-breaktype-page">BreakTypeのenum値</a><span>, §3.5 にて</span>
      </ul>
    <li>
      "page"
      <ul>
        <li><a href="#dom-blockfragmentationtype-page">BlockFragmentationTypeのenum値</a><span>, §3.4 にて</span>
        <li><a href="#dom-breaktype-page">BreakTypeのenum値</a><span>, §3.5 にて</span>
      </ul>
    <li><a href="#parent-layout">parent layout</a><span>, §3 にて</span>
    <li>
      percentageBlockSize
      <ul>
        <li><a href="#dom-layoutconstraints-percentageblocksize">LayoutConstraintsの属性</a><span>, §3.4 にて</span>
        <li><a href="#dom-layoutconstraintsoptions-percentageblocksize">LayoutConstraintsOptionsのdict-member</a><span>,
            §3.4 にて</span>
      </ul>
    <li>
      percentageInlineSize
      <ul>
        <li><a href="#dom-layoutconstraints-percentageinlinesize">LayoutConstraintsの属性</a><span>, §3.4 にて</span>
        <li><a href="#dom-layoutconstraintsoptions-percentageinlinesize">LayoutConstraintsOptionsのdict-member</a><span>,
            §3.4 にて</span>
      </ul>
    <li><a href="#produce-a-generator-result">produce a generator result</a><span>, §5.6.3 にて</span>
    <li>
      "region"
      <ul>
        <li><a href="#dom-blockfragmentationtype-region">BlockFragmentationTypeのenum値</a><span>, §3.4 にて</span>
        <li><a href="#dom-breaktype-region">BreakTypeのenum値</a><span>, §3.5 にて</span>
      </ul>
    <li>
      region
      <ul>
        <li><a href="#dom-blockfragmentationtype-region">BlockFragmentationTypeのenum値</a><span>, §3.4 にて</span>
        <li><a href="#dom-breaktype-region">BreakTypeのenum値</a><span>, §3.5 にて</span>
      </ul>
    <li><a href="#dom-layoutworkletglobalscope-registerlayout">registerLayout(name, layoutCtor)</a><span>, §5.4
        にて</span>
    <li><a href="#run-a-generator">run a generator</a><span>, §5.6.3 にて</span>
    <li><a href="#dom-layoutedges-scrollbar">scrollbar</a><span>, §3.6 にて</span>
    <li><a href="#dom-layoutoptions-sizing">sizing</a><span>, §5.4 にて</span>
    <li><a href="#dom-layoutchild-stylemap-slot">[[styleMap]]</a><span>, §3.1 にて</span>
    <li><a href="#dom-layoutchild-stylemap">styleMap</a><span>, §3.1 にて</span>
    <li><a href="#update-a-layout-child-style">update a layout child style</a><span>, §3.1.1 にて</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">参照によって定義される用語</span><a
      class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
    <li>
      <a data-link-type="biblio">[css-backgrounds-3]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://www.w3.org/TR/css3-background/#propdef-border-left-width">border-left-width</a>
      </ul>
    <li>
      <a data-link-type="biblio">[css-break-3]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://www.w3.org/TR/css3-break/#propdef-break-inside">break-inside</a>
        <li><a href="https://www.w3.org/TR/css3-break/#fragment">fragment</a>
      </ul>
    <li>
      <a data-link-type="biblio">[css-cascade-4]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://www.w3.org/TR/css-cascade-4/#computed-value">computed value</a>
      </ul>
    <li>
      <a data-link-type="biblio">[css-flexbox-1]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://www.w3.org/TR/css-flexbox-1/#flex-container">flex container</a>
      </ul>
    <li>
      <a data-link-type="biblio">[css-grid-1]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://www.w3.org/TR/css-grid-1/#grid-container">grid container</a>
      </ul>
    <li>
      <a data-link-type="biblio">[css-inline-3]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://www.w3.org/TR/css-inline-3/#root-inline-box">root inline box</a>
      </ul>
    <li>
      <a data-link-type="biblio">[css-overflow-3]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow">overflow</a>
        <li><a href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow-y">overflow-y</a>
        <li><a href="https://www.w3.org/TR/css-overflow-3/#scrollable-overflow">scrollable overflow</a>
      </ul>
    <li>
      <a data-link-type="biblio">[css-page-floats-3]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://drafts.csswg.org/css-page-floats-3/#float">float</a>
      </ul>
    <li>
      <a data-link-type="biblio">[css-position-3]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://www.w3.org/TR/css3-positioning/#valdef-z-index-auto">auto</a>
        <li><a href="https://www.w3.org/TR/css3-positioning/#propdef-position">position</a>
        <li><a href="https://www.w3.org/TR/css3-positioning/#relative-position">relatively position</a>
        <li><a href="https://www.w3.org/TR/css3-positioning/#valdef-position-static">static</a>
        <li><a href="https://www.w3.org/TR/css3-positioning/#propdef-z-index">z-index</a>
      </ul>
    <li>
      <a data-link-type="biblio">[css-pseudo-4]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://www.w3.org/TR/css-pseudo-4/#selectordef-after">::after</a>
        <li><a href="https://www.w3.org/TR/css-pseudo-4/#selectordef-before">::before</a>
        <li><a href="https://www.w3.org/TR/css-pseudo-4/#selectordef-first-letter">::first-letter</a>
        <li><a href="https://www.w3.org/TR/css-pseudo-4/#selectordef-first-line">::first-line</a>
      </ul>
    <li>
      <a data-link-type="biblio">[css-ruby-1]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://www.w3.org/TR/css-ruby-1/#propdef-display">display</a>
      </ul>
    <li>
      <a data-link-type="biblio">[css-sizing-3]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://www.w3.org/TR/css-sizing-3/#valdef-width-auto">auto</a>
        <li><a href="https://www.w3.org/TR/css-sizing-3/#available">available space</a>
        <li><a href="https://www.w3.org/TR/css-sizing-3/#max-content">max-content size</a>
        <li><a href="https://www.w3.org/TR/css-sizing-3/#min-content">min-content size</a>
        <li><a href="https://www.w3.org/TR/css-sizing-3/#stretch-fit-inline-size">stretch-fit inline size</a>
      </ul>
    <li>
      <a data-link-type="biblio">[css-syntax-3]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://drafts.csswg.org/css-syntax-3/#declaration">declaration</a>
      </ul>
    <li>
      <a data-link-type="biblio">[css-typed-om-1]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://www.w3.org/TR/css-typed-om-1/#stylepropertymapreadonly">StylePropertyMapReadOnly</a>
      </ul>
    <li>
      <a data-link-type="biblio">[css-values-3]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://www.w3.org/TR/css3-values/#typedef-ident">&lt;ident></a>
      </ul>
    <li>
      <a data-link-type="biblio">[css-writing-modes-3]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://www.w3.org/TR/css-writing-modes-3/#abstract-dimensions">abstract dimensions</a>
        <li><a href="https://www.w3.org/TR/css-writing-modes-3/#block-size">block size</a>
        <li><a href="https://www.w3.org/TR/css-writing-modes-3/#block-start">block-start</a>
        <li><a href="https://www.w3.org/TR/css-writing-modes-3/#inline-size">inline size</a>
        <li><a href="https://www.w3.org/TR/css-writing-modes-3/#inline-start">inline-start</a>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS22]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://www.w3.org/TR/CSS22/visudet.html#propdef-height">height</a>
        <li><a href="https://www.w3.org/TR/CSS22/box.html#propdef-margin">margin</a>
        <li><a href="https://www.w3.org/TR/CSS22/visudet.html#propdef-max-width">max-width</a>
        <li><a href="https://www.w3.org/TR/CSS22/box.html#propdef-padding-top">padding-top</a>
        <li><a href="https://www.w3.org/TR/CSS22/visudet.html#propdef-width">width</a>
      </ul>
    <li>
      <a data-link-type="biblio">[css3-display]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://www.w3.org/TR/css-display-3/#typedef-display-inside">&lt;display-inside></a>
        <li><a href="https://www.w3.org/TR/css-display-3/#typedef-display-outside">&lt;display-outside></a>
        <li><a href="https://www.w3.org/TR/css-display-3/#anonymous">anonymous box</a>
        <li><a href="https://www.w3.org/TR/css-display-3/#atomic-inline">atomic inline</a>
        <li><a href="https://www.w3.org/TR/css-display-3/#block-box">block box</a>
        <li><a href="https://www.w3.org/TR/css-display-3/#block-formatting-context">block formatting context</a>
        <li><a href="https://www.w3.org/TR/css-display-3/#block-level">block-level</a>
        <li><a href="https://www.w3.org/TR/css-display-3/#blockify">blockification</a>
        <li><a href="https://www.w3.org/TR/css-display-3/#blockify">blockify</a>
        <li><a href="https://www.w3.org/TR/css-display-3/#box">box</a>
        <li><a href="https://www.w3.org/TR/css-display-3/#box-tree">box tree</a>
        <li><a href="https://www.w3.org/TR/css-display-3/#containing-block">containing block</a>
        <li><a href="https://www.w3.org/TR/css-display-3/#valdef-display-grid">grid</a>
        <li><a href="https://www.w3.org/TR/css-display-3/#valdef-display-inline">inline</a>
        <li><a href="https://www.w3.org/TR/css-display-3/#inline-formatting-context">inline formatting context</a>
        <li><a href="https://www.w3.org/TR/css-display-3/#inline-level">inline-level</a>
        <li><a href="https://www.w3.org/TR/css-display-3/#inlinify">inlinify</a>
        <li><a href="https://www.w3.org/TR/css-display-3/#valdef-display-none">none</a>
        <li><a href="https://www.w3.org/TR/css-display-3/#replaced-element">replaced element</a>
      </ul>
    <li>
      <a data-link-type="biblio">[cssom-1]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://www.w3.org/TR/cssom-1/#css">CSS</a>
      </ul>
    <li>
      <a data-link-type="biblio">[DOM]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://dom.spec.whatwg.org/#concept-document">document</a>
        <li><a href="https://dom.spec.whatwg.org/#concept-element">element</a>
      </ul>
    <li>
      <a data-link-type="biblio">[HTML]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>
        <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a>
        <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm">realm</a>
      </ul>
    <li>
      <a data-link-type="biblio">[INFRA]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://infra.spec.whatwg.org/#list-append">append</a>
        <li><a href="https://infra.spec.whatwg.org/#list-empty">empty</a>
        <li><a href="https://infra.spec.whatwg.org/#map-exists">exist</a>
        <li><a href="https://infra.spec.whatwg.org/#list-iterate">for each <small>(for list)</small></a>
        <li><a href="https://infra.spec.whatwg.org/#map-iterate">for each <small>(for map)</small></a>
        <li><a href="https://infra.spec.whatwg.org/#map-get">get</a>
        <li><a href="https://infra.spec.whatwg.org/#list">list</a>
        <li><a href="https://infra.spec.whatwg.org/#ordered-map">map</a>
        <li><a href="https://infra.spec.whatwg.org/#map-set">set</a>
        <li><a href="https://infra.spec.whatwg.org/#struct">struct</a>
      </ul>
    <li>
      <a data-link-type="biblio">[WebIDL]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>
        <li><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a>
        <li><a href="https://heycam.github.io/webidl/#Global">Global</a>
        <li><a href="https://heycam.github.io/webidl/#SameObject">SameObject</a>
        <li><a href="https://heycam.github.io/webidl/#VoidFunction">VoidFunction</a>
        <li><a href="https://heycam.github.io/webidl/#idl-double">double</a>
        <li><a href="https://heycam.github.io/webidl/#dfn-throw">throw</a>
      </ul>
    <li>
      <a data-link-type="biblio">[worklets-1]</a> は以下の用語を定義します:
      <ul>
        <li><a href="https://www.w3.org/TR/worklets-1/#worklet">Worklet</a>
        <li><a href="https://www.w3.org/TR/worklets-1/#workletglobalscope">WorkletGlobalScope</a>
        <li><a href="https://www.w3.org/TR/worklets-1/#worklet-global-scope-type">worklet global scope type</a>
        <li><a href="https://www.w3.org/TR/worklets-1/#worklets-workletglobalscopes">worklet's workletglobalscopes</a>
      </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
      href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">規範参照文献</span><a class="self-link"
      href="#normative"></a></h3>
  <dl>
    <dt id="biblio-css-break-3">[CSS-BREAK-3]
    <dd>Rossen Atanassov; Elika Etemad. <a href="https://www.w3.org/TR/css-break-3/">CSS Fragmentation Module Level
        3</a>. 2017年2月9日. CR. URL: <a href="https://www.w3.org/TR/css-break-3/">https://www.w3.org/TR/css-break-3/</a>
    <dt id="biblio-css-cascade-4">[CSS-CASCADE-4]
    <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-cascade-4/">CSS Cascading and Inheritance Level
        4</a>. 2016年1月14日. CR. URL: <a
        href="https://www.w3.org/TR/css-cascade-4/">https://www.w3.org/TR/css-cascade-4/</a>
    <dt id="biblio-css-flexbox-1">[CSS-FLEXBOX-1]
    <dd>Tab Atkins Jr.; Elika Etemad; Rossen Atanassov. <a href="https://www.w3.org/TR/css-flexbox-1/">CSS Flexible Box
        Layout Module Level 1</a>. 2017年10月19日. CR. URL: <a
        href="https://www.w3.org/TR/css-flexbox-1/">https://www.w3.org/TR/css-flexbox-1/</a>
    <dt id="biblio-css-grid-1">[CSS-GRID-1]
    <dd>Tab Atkins Jr.; Elika Etemad; Rossen Atanassov. <a href="https://www.w3.org/TR/css-grid-1/">CSS Grid Layout
        Module Level 1</a>. 2017年12月14日. CR. URL: <a
        href="https://www.w3.org/TR/css-grid-1/">https://www.w3.org/TR/css-grid-1/</a>
    <dt id="biblio-css-inline-3">[CSS-INLINE-3]
    <dd>Dave Cramer; Elika Etemad; Steve Zilles. <a href="https://www.w3.org/TR/css-inline-3/">CSS Inline Layout Module
        Level 3</a>. 2016年5月24日. WD. URL: <a
        href="https://www.w3.org/TR/css-inline-3/">https://www.w3.org/TR/css-inline-3/</a>
    <dt id="biblio-css-overflow-3">[CSS-OVERFLOW-3]
    <dd>David Baron; Florian Rivoal. <a href="https://www.w3.org/TR/css-overflow-3/">CSS Overflow Module Level 3</a>.
      2016年5月31日. WD. URL: <a href="https://www.w3.org/TR/css-overflow-3/">https://www.w3.org/TR/css-overflow-3/</a>
    <dt id="biblio-css-page-floats-3">[CSS-PAGE-FLOATS-3]
    <dd>Johannes Wilm. <a href="https://www.w3.org/TR/css-page-floats-3/">CSS Page Floats</a>. 2015年9月15日. WD.
      URL: <a href="https://www.w3.org/TR/css-page-floats-3/">https://www.w3.org/TR/css-page-floats-3/</a>
    <dt id="biblio-css-position-3">[CSS-POSITION-3]
    <dd>Rossen Atanassov; Arron Eicholz. <a href="https://www.w3.org/TR/css-position-3/">CSS Positioned Layout Module
        Level 3</a>. 2016年5月17日. WD. URL: <a
        href="https://www.w3.org/TR/css-position-3/">https://www.w3.org/TR/css-position-3/</a>
    <dt id="biblio-css-pseudo-4">[CSS-PSEUDO-4]
    <dd>Daniel Glazman; Elika Etemad; Alan Stearns. <a href="https://www.w3.org/TR/css-pseudo-4/">CSS Pseudo-Elements
        Module Level 4</a>. 2016年6月7日. WD. URL: <a
        href="https://www.w3.org/TR/css-pseudo-4/">https://www.w3.org/TR/css-pseudo-4/</a>
    <dt id="biblio-css-ruby-1">[CSS-RUBY-1]
    <dd>Elika Etemad; Koji Ishii. <a href="https://www.w3.org/TR/css-ruby-1/">CSS Ruby Layout Module Level 1</a>.
      2014年8月5日. WD. URL: <a href="https://www.w3.org/TR/css-ruby-1/">https://www.w3.org/TR/css-ruby-1/</a>
    <dt id="biblio-css-sizing-3">[CSS-SIZING-3]
    <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-sizing-3/">CSS Intrinsic &amp; Extrinsic Sizing
        Module Level 3</a>. 2018年3月4日. WD. URL: <a
        href="https://www.w3.org/TR/css-sizing-3/">https://www.w3.org/TR/css-sizing-3/</a>
    <dt id="biblio-css-syntax-3">[CSS-SYNTAX-3]
    <dd>Tab Atkins Jr.; Simon Sapin. <a href="https://www.w3.org/TR/css-syntax-3/">CSS Syntax Module Level 3</a>.
      2014年2月20日. CR. URL: <a href="https://www.w3.org/TR/css-syntax-3/">https://www.w3.org/TR/css-syntax-3/</a>
    <dt id="biblio-css-typed-om-1">[CSS-TYPED-OM-1]
    <dd>Shane Stephens; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-typed-om-1/">CSS Typed OM Level 1</a>.
      2017年8月1日. WD. URL: <a href="https://www.w3.org/TR/css-typed-om-1/">https://www.w3.org/TR/css-typed-om-1/</a>
    <dt id="biblio-css-values-3">[CSS-VALUES-3]
    <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-3/">CSS Values and Units Module Level
        3</a>. 2016年9月29日. CR. URL: <a
        href="https://www.w3.org/TR/css-values-3/">https://www.w3.org/TR/css-values-3/</a>
    <dt id="biblio-css-writing-modes-3">[CSS-WRITING-MODES-3]
    <dd>Elika Etemad; Koji Ishii. <a href="https://www.w3.org/TR/css-writing-modes-3/">CSS Writing Modes Level 3</a>.
      2017年12月7日. CR. URL: <a
        href="https://www.w3.org/TR/css-writing-modes-3/">https://www.w3.org/TR/css-writing-modes-3/</a>
    <dt id="biblio-css21">[CSS21]
    <dd>Bert Bos; et al. <a href="https://www.w3.org/TR/CSS2/">Cascading Style Sheets Level 2 Revision 1 (CSS 2.1)
        Specification</a>. 2011年6月7日. REC. URL: <a href="https://www.w3.org/TR/CSS2/">https://www.w3.org/TR/CSS2/</a>
    <dt id="biblio-css22">[CSS22]
    <dd>Bert Bos. <a href="https://www.w3.org/TR/CSS22/">Cascading Style Sheets Level 2 Revision 2 (CSS 2.2)
        Specification</a>. 2016年4月12日. WD. URL: <a href="https://www.w3.org/TR/CSS22/">https://www.w3.org/TR/CSS22/</a>
    <dt id="biblio-css3-display">[CSS3-DISPLAY]
    <dd>Elika Etemad. <a href="https://www.w3.org/TR/css-display-3/">CSS Display Module Level 3</a>. 2017年7月20日. WD.
      URL: <a href="https://www.w3.org/TR/css-display-3/">https://www.w3.org/TR/css-display-3/</a>
    <dt id="biblio-cssom-1">[CSSOM-1]
    <dd>Simon Pieters; Glenn Adams. <a href="https://www.w3.org/TR/cssom-1/">CSS Object Model (CSSOM)</a>. 2016年3月17日.
      WD. URL: <a href="https://www.w3.org/TR/cssom-1/">https://www.w3.org/TR/cssom-1/</a>
    <dt id="biblio-dom">[DOM]
    <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM Standard</a>. Living Standard. URL: <a
        href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
    <dt id="biblio-html">[HTML]
    <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living Standard.
      URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
    <dt id="biblio-infra">[INFRA]
    <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/">Infra Standard</a>. Living
      Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
    <dt id="biblio-rfc2119">[RFC2119]
    <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement
        Levels</a>. 1997年3月. Best Current Practice. URL: <a
        href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
    <dt id="biblio-webidl">[WebIDL]
    <dd>Cameron McCormack; Boris Zbarsky; Tobie Langel. <a href="https://heycam.github.io/webidl/">Web IDL</a>.
      2016年12月15日. ED. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
    <dt id="biblio-worklets-1">[WORKLETS-1]
    <dd>Ian Kilpatrick. <a href="https://www.w3.org/TR/worklets-1/">Worklets Level 1</a>. 2016年6月7日. WD. URL: <a
        href="https://www.w3.org/TR/worklets-1/">https://www.w3.org/TR/worklets-1/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">参考情報</span><a class="self-link"
      href="#informative"></a></h3>
  <dl>
    <dt id="biblio-css-backgrounds-3">[CSS-BACKGROUNDS-3]
    <dd>Bert Bos; Elika Etemad; Brad Kemper. <a href="https://www.w3.org/TR/css-backgrounds-3/">CSS Backgrounds and
        Borders Module Level 3</a>. 2017年10月17日. CR. URL: <a
        href="https://www.w3.org/TR/css-backgrounds-3/">https://www.w3.org/TR/css-backgrounds-3/</a>
    <dt id="biblio-css-multicol-1">[CSS-MULTICOL-1]
    <dd>Håkon Wium Lie; Florian Rivoal; Rachel Andrew. <a href="https://www.w3.org/TR/css-multicol-1/">CSS Multi-column
        Layout Module Level 1</a>. 2017年10月5日. WD. URL: <a
        href="https://www.w3.org/TR/css-multicol-1/">https://www.w3.org/TR/css-multicol-1/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL索引</span><a class="self-link"
      href="#idl-index"></a></h2>
  <pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①④">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <a class="nv" href="#layoutchild"><code>LayoutChild</code></a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/css-typed-om-1/#stylepropertymapreadonly" id="ref-for-stylepropertymapreadonly⑥">StylePropertyMapReadOnly</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="StylePropertyMapReadOnly" href="#dom-layoutchild-stylemap" id="ref-for-dom-layoutchild-stylemap①">styleMap</a>;

    <a class="n" data-link-type="idl-name" href="#intrinsicsizesrequest" id="ref-for-intrinsicsizesrequest⑥">IntrinsicSizesRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-layoutchild-intrinsicsizes" id="ref-for-dom-layoutchild-intrinsicsizes③">intrinsicSizes</a>();
    <a class="n" data-link-type="idl-name" href="#layoutfragmentrequest" id="ref-for-layoutfragmentrequest⑧">LayoutFragmentRequest</a> <a class="nv idl-code" data-link-type="method" href="#dom-layoutchild-layoutnextfragment" id="ref-for-dom-layoutchild-layoutnextfragment①①">layoutNextFragment</a>(<a class="n" data-link-type="idl-name" href="#layoutconstraints" id="ref-for-layoutconstraints①③">LayoutConstraints</a> <a class="nv" href="#dom-layoutchild-layoutnextfragment-constraints-breaktoken-constraints"><code>constraints</code></a>, <a class="n" data-link-type="idl-name" href="#childbreaktoken" id="ref-for-childbreaktoken⑦">ChildBreakToken</a> <a class="nv" href="#dom-layoutchild-layoutnextfragment-constraints-breaktoken-breaktoken"><code>breakToken</code></a>);
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①⑤">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <a class="nv" href="#layoutfragment"><code>LayoutFragment</code></a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double③②"><span class="kt">double</span></a> <a class="nv" data-readonly="" data-type="double" href="#dom-layoutfragment-inlinesize"><code>inlineSize</code></a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①①⓪"><span class="kt">double</span></a> <a class="nv" data-readonly="" data-type="double" href="#dom-layoutfragment-blocksize"><code>blockSize</code></a>;

    <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②①⓪"><span class="kt">double</span></a> <a class="nv" data-type="double" href="#dom-layoutfragment-inlineoffset"><code>inlineOffset</code></a>;
    <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double③①"><span class="kt">double</span></a> <a class="nv" data-type="double" href="#dom-layoutfragment-blockoffset"><code>blockOffset</code></a>;

    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span> <a class="nv" data-readonly="" data-type="any" href="#dom-layoutfragment-data"><code>data</code></a>;

    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#childbreaktoken" id="ref-for-childbreaktoken①①">ChildBreakToken</a>? <a class="nv" data-readonly="" data-type="ChildBreakToken?" href="#dom-layoutfragment-breaktoken"><code>breakToken</code></a>;
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed②①">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <a class="nv" href="#intrinsicsizes"><code>IntrinsicSizes</code></a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double④①"><span class="kt">double</span></a> <a class="nv" data-readonly="" data-type="double" href="#dom-intrinsicsizes-mincontentsize"><code>minContentSize</code></a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double⑤①"><span class="kt">double</span></a> <a class="nv" data-readonly="" data-type="double" href="#dom-intrinsicsizes-maxcontentsize"><code>maxContentSize</code></a>;
};

[<a class="nv" href="#dom-layoutconstraints-layoutconstraints"><code>Constructor</code></a>(<span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#dictdef-layoutconstraintsoptions" id="ref-for-dictdef-layoutconstraintsoptions②">LayoutConstraintsOptions</a> <a class="nv" href="#dom-layoutconstraints-layoutconstraints-options-options"><code>options</code></a>),<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed③①">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <a class="nv" href="#layoutconstraints"><code>LayoutConstraints</code></a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double⑥①"><span class="kt">double</span></a> <a class="nv" data-readonly="" data-type="double" href="#dom-layoutconstraints-availableinlinesize"><code>availableInlineSize</code></a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double⑦①"><span class="kt">double</span></a> <a class="nv" data-readonly="" data-type="double" href="#dom-layoutconstraints-availableblocksize"><code>availableBlockSize</code></a>;

    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double⑧①"><span class="kt">double</span></a>? <a class="nv" data-readonly="" data-type="double?" href="#dom-layoutconstraints-fixedinlinesize"><code>fixedInlineSize</code></a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double⑨①"><span class="kt">double</span></a>? <a class="nv" data-readonly="" data-type="double?" href="#dom-layoutconstraints-fixedblocksize"><code>fixedBlockSize</code></a>;

    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①⓪①"><span class="kt">double</span></a> <a class="nv" data-readonly="" data-type="double" href="#dom-layoutconstraints-percentageinlinesize"><code>percentageInlineSize</code></a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①①①"><span class="kt">double</span></a> <a class="nv" data-readonly="" data-type="double" href="#dom-layoutconstraints-percentageblocksize"><code>percentageBlockSize</code></a>;

    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①②①"><span class="kt">double</span></a>? <a class="nv" data-readonly="" data-type="double?" href="#dom-layoutconstraints-blockfragmentationoffset"><code>blockFragmentationOffset</code></a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-blockfragmentationtype" id="ref-for-enumdef-blockfragmentationtype②">BlockFragmentationType</a> <a class="nv" data-readonly="" data-type="BlockFragmentationType" href="#dom-layoutconstraints-blockfragmentationtype"><code>blockFragmentationType</code></a>;

    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span> <a class="nv" data-readonly="" data-type="any" href="#dom-layoutconstraints-data"><code>data</code></a>;
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-layoutconstraintsoptions"><code>LayoutConstraintsOptions</code></a> {
    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①③①"><span class="kt">double</span></a> <a class="nv" data-default="0" data-type="double " href="#dom-layoutconstraintsoptions-availableinlinesize"><code>availableInlineSize</code></a> = 0;
    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①④①"><span class="kt">double</span></a> <a class="nv" data-default="0" data-type="double " href="#dom-layoutconstraintsoptions-availableblocksize"><code>availableBlockSize</code></a> = 0;

    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①⑤①"><span class="kt">double</span></a> <a class="nv" data-type="double " href="#dom-layoutconstraintsoptions-fixedinlinesize"><code>fixedInlineSize</code></a>;
    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①⑥①"><span class="kt">double</span></a> <a class="nv" data-type="double " href="#dom-layoutconstraintsoptions-fixedblocksize"><code>fixedBlockSize</code></a>;

    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①⑦①"><span class="kt">double</span></a> <a class="nv" data-type="double " href="#dom-layoutconstraintsoptions-percentageinlinesize"><code>percentageInlineSize</code></a>;
    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①⑧①"><span class="kt">double</span></a> <a class="nv" data-type="double " href="#dom-layoutconstraintsoptions-percentageblocksize"><code>percentageBlockSize</code></a>;

    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①⑨①"><span class="kt">double</span></a> <a class="nv" data-type="double " href="#dom-layoutconstraintsoptions-blockfragmentationoffset"><code>blockFragmentationOffset</code></a>;
    <a class="n" data-link-type="idl-name" href="#enumdef-blockfragmentationtype" id="ref-for-enumdef-blockfragmentationtype①①">BlockFragmentationType</a> <a class="nv" data-default="&quot;none&quot;" data-type="BlockFragmentationType " href="#dom-layoutconstraintsoptions-blockfragmentationtype"><code>blockFragmentationType</code></a> = "none";

    <span class="kt">any</span> <a class="nv" data-type="any " href="#dom-layoutconstraintsoptions-data"><code>data</code></a>;
};

<span class="kt">enum</span> <a class="nv" href="#enumdef-blockfragmentationtype"><code>BlockFragmentationType</code></a> { <a class="s" href="#dom-blockfragmentationtype-none"><code>"none"</code></a>, <a class="s" href="#dom-blockfragmentationtype-page"><code>"page"</code></a>, <a class="s" href="#dom-blockfragmentationtype-column"><code>"column"</code></a>, <a class="s" href="#dom-blockfragmentationtype-region"><code>"region"</code></a> };

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed④①">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <a class="nv" href="#childbreaktoken"><code>ChildBreakToken</code></a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-breaktype" id="ref-for-enumdef-breaktype①">BreakType</a> <a class="nv" data-readonly="" data-type="BreakType" href="#dom-childbreaktoken-breaktype"><code>breakType</code></a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#layoutchild" id="ref-for-layoutchild②④①">LayoutChild</a> <a class="nv" data-readonly="" data-type="LayoutChild" href="#dom-childbreaktoken-child"><code>child</code></a>;
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed⑤①">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <a class="nv" href="#breaktoken"><code>BreakToken</code></a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#childbreaktoken" id="ref-for-childbreaktoken③①">ChildBreakToken</a>> <a class="nv" data-readonly="" data-type="sequence<ChildBreakToken>" href="#dom-breaktoken-childbreaktokens"><code>childBreakTokens</code></a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">any</span> <a class="nv" data-readonly="" data-type="any" href="#dom-breaktoken-data"><code>data</code></a>;
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-breaktokenoptions"><code>BreakTokenOptions</code></a> {
    <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#childbreaktoken" id="ref-for-childbreaktoken④①">ChildBreakToken</a>> <a class="nv" data-type="sequence<ChildBreakToken> " href="#dom-breaktokenoptions-childbreaktokens"><code>childBreakTokens</code></a>;
    <span class="kt">any</span> <a class="nv" data-default="null" data-type="any " href="#dom-breaktokenoptions-data"><code>data</code></a> = <span class="kt">null</span>;
};

<span class="kt">enum</span> <a class="nv" href="#enumdef-breaktype"><code>BreakType</code></a> { <a class="s" href="#dom-breaktype-none"><code>"none"</code></a>, <a class="s" href="#dom-breaktype-line"><code>"line"</code></a>, <a class="s" href="#dom-breaktype-column"><code>"column"</code></a>, <a class="s" href="#dom-breaktype-page"><code>"page"</code></a>, <a class="s" href="#dom-breaktype-region"><code>"region"</code></a> };

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed⑥①">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <a class="nv" href="#layoutedgesizes"><code>LayoutEdgeSizes</code></a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②⓪①"><span class="kt">double</span></a> <a class="nv" data-readonly="" data-type="double" href="#dom-layoutedgesizes-inlinestart"><code>inlineStart</code></a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②①①"><span class="kt">double</span></a> <a class="nv" data-readonly="" data-type="double" href="#dom-layoutedgesizes-inlineend"><code>inlineEnd</code></a>;

  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②②①"><span class="kt">double</span></a> <a class="nv" data-readonly="" data-type="double" href="#dom-layoutedgesizes-blockstart"><code>blockStart</code></a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②③①"><span class="kt">double</span></a> <a class="nv" data-readonly="" data-type="double" href="#dom-layoutedgesizes-blockend"><code>blockEnd</code></a>;

  // Convenience attributes for the sum in one direction.
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②④①"><span class="kt">double</span></a> <a class="nv" data-readonly="" data-type="double" href="#dom-layoutedgesizes-inline"><code>inline</code></a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②⑤①"><span class="kt">double</span></a> <a class="nv" data-readonly="" data-type="double" href="#dom-layoutedgesizes-block"><code>block</code></a>;
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed⑦①">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <a class="nv" href="#layoutedges"><code>LayoutEdges</code></a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#layoutedgesizes" id="ref-for-layoutedgesizes⑧">LayoutEdgeSizes</a> <a class="nv" data-readonly="" data-type="LayoutEdgeSizes" href="#dom-layoutedges-border"><code>border</code></a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#layoutedgesizes" id="ref-for-layoutedgesizes①①">LayoutEdgeSizes</a> <a class="nv" data-readonly="" data-type="LayoutEdgeSizes" href="#dom-layoutedges-scrollbar"><code>scrollbar</code></a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#layoutedgesizes" id="ref-for-layoutedgesizes②①">LayoutEdgeSizes</a> <a class="nv" data-readonly="" data-type="LayoutEdgeSizes" href="#dom-layoutedges-padding"><code>padding</code></a>;

  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#layoutedgesizes" id="ref-for-layoutedgesizes③①">LayoutEdgeSizes</a> <a class="nv" data-readonly="" data-type="LayoutEdgeSizes" href="#dom-layoutedges-all"><code>all</code></a>;
};

<span class="kt">partial</span> <span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="https://www.w3.org/TR/cssom-1/#css" id="ref-for-css①">CSS</a> {
    [<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SameObject" id="ref-for-SameObject①">SameObject</a>] <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/worklets-1/#worklet" id="ref-for-worklet①①">Worklet</a> <a class="nv" data-readonly="" data-type="Worklet" href="#dom-css-layoutworklet"><code>layoutWorklet</code></a>;
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Global" id="ref-for-Global①">Global</a>=(<a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/worklets-1/#worklet" id="ref-for-worklet②①">Worklet</a>,<a class="n" data-link-type="idl-name">LayoutWorklet</a>),<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed⑧①">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <a class="nv" href="#layoutworkletglobalscope"><code>LayoutWorkletGlobalScope</code></a> : <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/worklets-1/#workletglobalscope" id="ref-for-workletglobalscope①">WorkletGlobalScope</a> {
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-layoutworkletglobalscope-registerlayout" id="ref-for-dom-layoutworkletglobalscope-registerlayout③">registerLayout</a>(<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString①"><span class="kt">DOMString</span></a> <a class="nv" href="#dom-layoutworkletglobalscope-registerlayout-name-layoutctor-name"><code>name</code></a>, <a class="n" data-link-type="idl-name" href="https://heycam.github.io/webidl/#VoidFunction" id="ref-for-VoidFunction①">VoidFunction</a> <a class="nv" href="#dom-layoutworkletglobalscope-registerlayout-name-layoutctor-layoutctor"><code>layoutCtor</code></a>);
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed⑨①">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">dictionary</span> <a class="nv" href="#dictdef-layoutoptions"><code>LayoutOptions</code></a> {
  <a class="n" data-link-type="idl-name" href="#enumdef-childdisplaytype" id="ref-for-enumdef-childdisplaytype①">ChildDisplayType</a> <a class="nv" data-default="&quot;block&quot;" data-type="ChildDisplayType " href="#dom-layoutoptions-childdisplay"><code>childDisplay</code></a> = "block";
  <a class="n" data-link-type="idl-name" href="#enumdef-layoutsizingmode" id="ref-for-enumdef-layoutsizingmode①">LayoutSizingMode</a> <a class="nv" data-default="&quot;block-like&quot;" data-type="LayoutSizingMode " href="#dom-layoutoptions-sizing"><code>sizing</code></a> = "block-like";
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①⓪①">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">enum</span> <a class="nv" href="#enumdef-childdisplaytype"><code>ChildDisplayType</code></a> {
    <a class="s" href="#dom-childdisplaytype-block"><code>"block"</code></a>,
    <a class="s" href="#dom-childdisplaytype-normal"><code>"normal"</code></a>,
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①①①">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">enum</span> <a class="nv" href="#enumdef-layoutsizingmode"><code>LayoutSizingMode</code></a> {
    <a class="s" href="#dom-layoutsizingmode-block-like"><code>"block-like"</code></a>,
    <a class="s" href="#dom-layoutsizingmode-manual"><code>"manual"</code></a>,
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①②①">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <a class="nv" href="#intrinsicsizesrequest"><code>IntrinsicSizesRequest</code></a> {
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①③①">Exposed</a>=<span class="n">LayoutWorklet</span>]
<span class="kt">interface</span> <a class="nv" href="#layoutfragmentrequest"><code>LayoutFragmentRequest</code></a> {
};

<span class="kt">typedef</span> (<a class="n" data-link-type="idl-name" href="#intrinsicsizesrequest" id="ref-for-intrinsicsizesrequest③①">IntrinsicSizesRequest</a> <span class="kt">or</span> <a class="n" data-link-type="idl-name" href="#layoutfragmentrequest" id="ref-for-layoutfragmentrequest③①">LayoutFragmentRequest</a>)
    <a class="nv" href="#typedefdef-layoutfragmentrequestorintrinsicsizesrequest"><code>LayoutFragmentRequestOrIntrinsicSizesRequest</code></a>;

// This is the final return value from the author defined layout() method.
<span class="kt">dictionary</span> <a class="nv" href="#dictdef-fragmentresultoptions"><code>FragmentResultOptions</code></a> {
    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②⑥①"><span class="kt">double</span></a> <a class="nv" data-default="0" data-type="double " href="#dom-fragmentresultoptions-inlinesize"><code>inlineSize</code></a> = 0;
    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②⑦①"><span class="kt">double</span></a> <a class="nv" data-default="0" data-type="double " href="#dom-fragmentresultoptions-blocksize"><code>blockSize</code></a> = 0;
    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②⑧①"><span class="kt">double</span></a> <a class="nv" data-default="0" data-type="double " href="#dom-fragmentresultoptions-autoblocksize"><code>autoBlockSize</code></a> = 0;
    <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#layoutfragment" id="ref-for-layoutfragment②④①">LayoutFragment</a>> <a class="nv" data-default="None" data-type="sequence<LayoutFragment> " href="#dom-fragmentresultoptions-childfragments"><code>childFragments</code></a> = [];
    <span class="kt">any</span> <a class="nv" data-default="null" data-type="any " href="#dom-fragmentresultoptions-data"><code>data</code></a> = <span class="kt">null</span>;
    <a class="n" data-link-type="idl-name" href="#dictdef-breaktokenoptions" id="ref-for-dictdef-breaktokenoptions①">BreakTokenOptions</a> <a class="nv" data-default="null" data-type="BreakTokenOptions " href="#dom-fragmentresultoptions-breaktoken"><code>breakToken</code></a> = <span class="kt">null</span>;
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-intrinsicsizesresultoptions"><code>IntrinsicSizesResultOptions</code></a> {
    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②⑨①"><span class="kt">double</span></a> <a class="nv" data-type="double " href="#dom-intrinsicsizesresultoptions-maxcontentsize"><code>maxContentSize</code></a>;
    <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double③⓪①"><span class="kt">double</span></a> <a class="nv" data-type="double " href="#dom-intrinsicsizesresultoptions-mincontentsize"><code>minContentSize</code></a>;
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">課題索引</span><a class="self-link"
      href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
    <div class="issue">
      課題: 現在APIは反復可能なジェネレーター形式です。実装経験やWeb開発者の意見に基づき、将来的にPromiseベースのAPIへ変更される可能性があります。それぞれに長所と短所があります。
      <p><em>Promise</em></p>
      <ul>
        <li data-md="">
          <p>エラー報告がより優れている。</p>
        <li data-md="">
          <p>開発者の使い勝手が向上する可能性。</p>
      </ul>
      <p><em>ジェネレーター</em></p>
      <ul>
        <li data-md="">
          <p>より「厳格」— レイアウト操作のみ実行可能。各呼び出しでどのPromise APIが動作するか制限する必要がない。</p>
        <li data-md="">
          <p>バインディングのオーバーヘッドが軽減される可能性。</p>
      </ul>
      <a href="#issue-ac1b3ccd"> ↵ </a>
    </div>
    <div class="issue"> <var>styleMap</var>を<var>box</var>に保持するべきかもしれません。<var>layoutInstance</var>のように。<a
        href="#issue-233d3cc5"> ↵ </a>
    </div>
    <div class="issue"> <var>styleMap</var>を<var>box</var>に保持するべきかもしれません。<var>layoutInstance</var>のように。<a
        href="#issue-233d3cc5①"> ↵ </a>
    </div>
  </div>
  <aside class="dfn-panel" data-for="valdef-display-layout">
    <b><a href="#valdef-display-layout">#valdef-display-layout</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-valdef-display-layout">2. Layout API Containers</a>
      <li><a href="#ref-for-valdef-display-layout①">3.1.1. LayoutChildren and the Box Tree</a>
      <li><a href="#ref-for-valdef-display-layout②">5.1. Concepts</a> <a href="#ref-for-valdef-display-layout③">(2)</a>
      <li><a href="#ref-for-valdef-display-layout④">5.2. Layout Invalidation</a>
      <li><a href="#ref-for-valdef-display-layout⑤">5.6.1. Determining Intrinsic Sizes</a>
      <li><a href="#ref-for-valdef-display-layout⑥">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layout-api-container">
    <b><a href="#layout-api-container">#layout-api-container</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-layout-api-container">2. Layout API Containers</a> <a
          href="#ref-for-layout-api-container①">(2)</a> <a href="#ref-for-layout-api-container②">(3)</a> <a
          href="#ref-for-layout-api-container③">(4)</a> <a href="#ref-for-layout-api-container④">(5)</a>
      <li><a href="#ref-for-layout-api-container⑤">2.1. Layout API Container Painting</a>
      <li><a href="#ref-for-layout-api-container⑥">3.1.1. LayoutChildren and the Box Tree</a> <a
          href="#ref-for-layout-api-container⑦">(2)</a>
      <li><a href="#ref-for-layout-api-container⑧">3.2. Layout Fragments</a> <a
          href="#ref-for-layout-api-container⑨">(2)</a>
      <li><a href="#ref-for-layout-api-container①⓪">4.1. Sizing</a> <a href="#ref-for-layout-api-container①①">(2)</a> <a
          href="#ref-for-layout-api-container①②">(3)</a> <a href="#ref-for-layout-api-container①③">(4)</a> <a
          href="#ref-for-layout-api-container①④">(5)</a>
      <li><a href="#ref-for-layout-api-container①⑤">4.1.1. Positioned layout sizing</a> <a
          href="#ref-for-layout-api-container①⑥">(2)</a>
      <li><a href="#ref-for-layout-api-container①⑦">4.2. Positioning</a> <a
          href="#ref-for-layout-api-container①⑧">(2)</a> <a href="#ref-for-layout-api-container①⑨">(3)</a>
      <li><a href="#ref-for-layout-api-container②⓪">4.3. Overflow</a> <a href="#ref-for-layout-api-container②①">(2)</a>
        <a href="#ref-for-layout-api-container②②">(3)</a>
      <li><a href="#ref-for-layout-api-container②③">4.5. Alignment</a>
      <li><a href="#ref-for-layout-api-container②④">5.2. Layout Invalidation</a>
      <li><a href="#ref-for-layout-api-container②⑤">5.4. Registering A Layout</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layout-api-formatting-context">
    <b><a href="#layout-api-formatting-context">#layout-api-formatting-context</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-layout-api-formatting-context">5.6.1. Determining Intrinsic Sizes</a>
      <li><a href="#ref-for-layout-api-formatting-context①">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layout-api-children">
    <b><a href="#layout-api-children">#layout-api-children</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-layout-api-children">2.2. Box Tree Transformations</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="current-layout">
    <b><a href="#current-layout">#current-layout</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-current-layout">3. Layout API Model and Terminology</a> <a
          href="#ref-for-current-layout①">(2)</a>
      <li><a href="#ref-for-current-layout②">3.2. Layout Fragments</a> <a href="#ref-for-current-layout③">(2)</a> <a
          href="#ref-for-current-layout④">(3)</a> <a href="#ref-for-current-layout⑤">(4)</a> <a
          href="#ref-for-current-layout⑥">(5)</a>
      <li><a href="#ref-for-current-layout⑦">3.3. Intrinsic Sizes</a> <a href="#ref-for-current-layout⑧">(2)</a> <a
          href="#ref-for-current-layout⑨">(3)</a> <a href="#ref-for-current-layout①⓪">(4)</a>
      <li><a href="#ref-for-current-layout①①">3.4. Layout Constraints</a> <a href="#ref-for-current-layout①②">(2)</a> <a
          href="#ref-for-current-layout①③">(3)</a> <a href="#ref-for-current-layout①④">(4)</a> <a
          href="#ref-for-current-layout①⑤">(5)</a>
      <li><a href="#ref-for-current-layout①⑥">4.1. Sizing</a>
      <li><a href="#ref-for-current-layout①⑦">4.4. Fragmentation</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="parent-layout">
    <b><a href="#parent-layout">#parent-layout</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-parent-layout">3.4. Layout Constraints</a> <a href="#ref-for-parent-layout①">(2)</a> <a
          href="#ref-for-parent-layout②">(3)</a>
      <li><a href="#ref-for-parent-layout③">4.4. Fragmentation</a>
      <li><a href="#ref-for-parent-layout④">4.5. Alignment</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="child-layout">
    <b><a href="#child-layout">#child-layout</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-child-layout">3.4. Layout Constraints</a>
      <li><a href="#ref-for-child-layout①">3.5. Breaking and Fragmentation</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layoutchild">
    <b><a href="#layoutchild">#layoutchild</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-layoutchild">2.2. Box Tree Transformations</a> <a href="#ref-for-layoutchild①">(2)</a>
      <li><a href="#ref-for-layoutchild②">3. Layout API Model and Terminology</a>
      <li><a href="#ref-for-layoutchild③">3.1. Layout Children</a> <a href="#ref-for-layoutchild④">(2)</a> <a
          href="#ref-for-layoutchild⑤">(3)</a> <a href="#ref-for-layoutchild⑥">(4)</a> <a
          href="#ref-for-layoutchild⑦">(5)</a> <a href="#ref-for-layoutchild⑧">(6)</a> <a
          href="#ref-for-layoutchild⑨">(7)</a> <a href="#ref-for-layoutchild①⓪">(8)</a> <a
          href="#ref-for-layoutchild①①">(9)</a> <a href="#ref-for-layoutchild①②">(10)</a> <a
          href="#ref-for-layoutchild①③">(11)</a> <a href="#ref-for-layoutchild①④">(12)</a> <a
          href="#ref-for-layoutchild①⑤">(13)</a>
      <li><a href="#ref-for-layoutchild①⑥">3.1.1. LayoutChildren and the Box Tree</a> <a
          href="#ref-for-layoutchild①⑦">(2)</a>
      <li><a href="#ref-for-layoutchild①⑧">3.2. Layout Fragments</a> <a href="#ref-for-layoutchild①⑨">(2)</a> <a
          href="#ref-for-layoutchild②⓪">(3)</a>
      <li><a href="#ref-for-layoutchild②①">3.3. Intrinsic Sizes</a> <a href="#ref-for-layoutchild②②">(2)</a>
      <li><a href="#ref-for-layoutchild②③">3.4. Layout Constraints</a>
      <li><a href="#ref-for-layoutchild②④">3.5. Breaking and Fragmentation</a> <a href="#ref-for-layoutchild②⑤">(2)</a>
        <a href="#ref-for-layoutchild②⑥">(3)</a> <a href="#ref-for-layoutchild②⑦">(4)</a> <a
          href="#ref-for-layoutchild②⑧">(5)</a>
      <li><a href="#ref-for-layoutchild②⑨">4.2. Positioning</a> <a href="#ref-for-layoutchild③⓪">(2)</a>
      <li><a href="#ref-for-layoutchild③①">4.5. Alignment</a>
      <li><a href="#ref-for-layoutchild③②">5.2. Layout Invalidation</a>
      <li><a href="#ref-for-layoutchild③③">5.5.1. Request Objects</a> <a href="#ref-for-layoutchild③④">(2)</a> <a
          href="#ref-for-layoutchild③⑤">(3)</a> <a href="#ref-for-layoutchild③⑥">(4)</a>
      <li><a href="#ref-for-layoutchild③⑦">5.6.3. Utility Algorithms</a> <a href="#ref-for-layoutchild③⑧">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutchild-box-slot">
    <b><a href="#dom-layoutchild-box-slot">#dom-layoutchild-box-slot</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutchild-box-slot">3.1.1. LayoutChildren and the Box Tree</a>
      <li><a href="#ref-for-dom-layoutchild-box-slot①">5.6.3. Utility Algorithms</a> <a
          href="#ref-for-dom-layoutchild-box-slot②">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutchild-stylemap-slot">
    <b><a href="#dom-layoutchild-stylemap-slot">#dom-layoutchild-stylemap-slot</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutchild-stylemap-slot">3.1. Layout Children</a>
      <li><a href="#ref-for-dom-layoutchild-stylemap-slot①">3.1.1. LayoutChildren and the Box Tree</a> <a
          href="#ref-for-dom-layoutchild-stylemap-slot②">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutchild-stylemap">
    <b><a href="#dom-layoutchild-stylemap">#dom-layoutchild-stylemap</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutchild-stylemap">3.1. Layout Children</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutchild-layoutnextfragment">
    <b><a href="#dom-layoutchild-layoutnextfragment">#dom-layoutchild-layoutnextfragment</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutchild-layoutnextfragment">2.2. Box Tree Transformations</a>
      <li><a href="#ref-for-dom-layoutchild-layoutnextfragment①">3.1. Layout Children</a> <a
          href="#ref-for-dom-layoutchild-layoutnextfragment②">(2)</a>
      <li><a href="#ref-for-dom-layoutchild-layoutnextfragment③">3.2. Layout Fragments</a> <a
          href="#ref-for-dom-layoutchild-layoutnextfragment④">(2)</a> <a
          href="#ref-for-dom-layoutchild-layoutnextfragment⑤">(3)</a> <a
          href="#ref-for-dom-layoutchild-layoutnextfragment⑥">(4)</a>
      <li><a href="#ref-for-dom-layoutchild-layoutnextfragment⑦">5.5.1. Request Objects</a> <a
          href="#ref-for-dom-layoutchild-layoutnextfragment⑧">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutchild-intrinsicsizes">
    <b><a href="#dom-layoutchild-intrinsicsizes">#dom-layoutchild-intrinsicsizes</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutchild-intrinsicsizes">3.1. Layout Children</a> <a
          href="#ref-for-dom-layoutchild-intrinsicsizes①">(2)</a>
      <li><a href="#ref-for-dom-layoutchild-intrinsicsizes②">5.5.1. Request Objects</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-box-layoutchildmap-slot">
    <b><a href="#dom-box-layoutchildmap-slot">#dom-box-layoutchildmap-slot</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-box-layoutchildmap-slot">3.1.1. LayoutChildren and the Box Tree</a> <a
          href="#ref-for-dom-box-layoutchildmap-slot①">(2)</a> <a href="#ref-for-dom-box-layoutchildmap-slot②">(3)</a>
        <a href="#ref-for-dom-box-layoutchildmap-slot③">(4)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="get-a-layout-child">
    <b><a href="#get-a-layout-child">#get-a-layout-child</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-get-a-layout-child">5.6.1. Determining Intrinsic Sizes</a>
      <li><a href="#ref-for-get-a-layout-child①">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="update-a-layout-child-style">
    <b><a href="#update-a-layout-child-style">#update-a-layout-child-style</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-update-a-layout-child-style">3.1.1. LayoutChildren and the Box Tree</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layoutfragment">
    <b><a href="#layoutfragment">#layoutfragment</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-layoutfragment">2.2. Box Tree Transformations</a>
      <li><a href="#ref-for-layoutfragment①">3.1. Layout Children</a> <a href="#ref-for-layoutfragment②">(2)</a>
      <li><a href="#ref-for-layoutfragment③">3.2. Layout Fragments</a> <a href="#ref-for-layoutfragment④">(2)</a> <a
          href="#ref-for-layoutfragment⑤">(3)</a> <a href="#ref-for-layoutfragment⑥">(4)</a> <a
          href="#ref-for-layoutfragment⑦">(5)</a> <a href="#ref-for-layoutfragment⑧">(6)</a> <a
          href="#ref-for-layoutfragment⑨">(7)</a> <a href="#ref-for-layoutfragment①⓪">(8)</a> <a
          href="#ref-for-layoutfragment①①">(9)</a>
      <li><a href="#ref-for-layoutfragment①②">3.4. Layout Constraints</a> <a href="#ref-for-layoutfragment①③">(2)</a> <a
          href="#ref-for-layoutfragment①④">(3)</a> <a href="#ref-for-layoutfragment①⑤">(4)</a>
      <li><a href="#ref-for-layoutfragment①⑥">3.5. Breaking and Fragmentation</a> <a
          href="#ref-for-layoutfragment①⑦">(2)</a> <a href="#ref-for-layoutfragment①⑧">(3)</a> <a
          href="#ref-for-layoutfragment①⑨">(4)</a> <a href="#ref-for-layoutfragment②⓪">(5)</a>
      <li><a href="#ref-for-layoutfragment②①">5.5.1. Request Objects</a> <a href="#ref-for-layoutfragment②②">(2)</a> <a
          href="#ref-for-layoutfragment②③">(3)</a>
      <li><a href="#ref-for-layoutfragment②④">5.6. Performing Layout</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutfragment-inlinesize">
    <b><a href="#dom-layoutfragment-inlinesize">#dom-layoutfragment-inlinesize</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutfragment-inlinesize">3.2. Layout Fragments</a> <a
          href="#ref-for-dom-layoutfragment-inlinesize①">(2)</a> <a
          href="#ref-for-dom-layoutfragment-inlinesize②">(3)</a> <a
          href="#ref-for-dom-layoutfragment-inlinesize③">(4)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutfragment-blocksize">
    <b><a href="#dom-layoutfragment-blocksize">#dom-layoutfragment-blocksize</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutfragment-blocksize">3.2. Layout Fragments</a> <a
          href="#ref-for-dom-layoutfragment-blocksize①">(2)</a> <a href="#ref-for-dom-layoutfragment-blocksize②">(3)</a>
        <a href="#ref-for-dom-layoutfragment-blocksize③">(4)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutfragment-inlineoffset">
    <b><a href="#dom-layoutfragment-inlineoffset">#dom-layoutfragment-inlineoffset</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutfragment-inlineoffset">3.2. Layout Fragments</a> <a
          href="#ref-for-dom-layoutfragment-inlineoffset①">(2)</a> <a
          href="#ref-for-dom-layoutfragment-inlineoffset②">(3)</a>
      <li><a href="#ref-for-dom-layoutfragment-inlineoffset③">4.2. Positioning</a> <a
          href="#ref-for-dom-layoutfragment-inlineoffset④">(2)</a>
      <li><a href="#ref-for-dom-layoutfragment-inlineoffset⑤">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutfragment-blockoffset">
    <b><a href="#dom-layoutfragment-blockoffset">#dom-layoutfragment-blockoffset</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutfragment-blockoffset">3.2. Layout Fragments</a> <a
          href="#ref-for-dom-layoutfragment-blockoffset①">(2)</a> <a
          href="#ref-for-dom-layoutfragment-blockoffset②">(3)</a>
      <li><a href="#ref-for-dom-layoutfragment-blockoffset③">4.2. Positioning</a> <a
          href="#ref-for-dom-layoutfragment-blockoffset④">(2)</a>
      <li><a href="#ref-for-dom-layoutfragment-blockoffset⑤">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutfragment-data">
    <b><a href="#dom-layoutfragment-data">#dom-layoutfragment-data</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutfragment-data">3.2. Layout Fragments</a> <a
          href="#ref-for-dom-layoutfragment-data①">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutfragment-breaktoken">
    <b><a href="#dom-layoutfragment-breaktoken">#dom-layoutfragment-breaktoken</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutfragment-breaktoken">3.2. Layout Fragments</a> <a
          href="#ref-for-dom-layoutfragment-breaktoken①">(2)</a> <a
          href="#ref-for-dom-layoutfragment-breaktoken②">(3)</a> <a
          href="#ref-for-dom-layoutfragment-breaktoken③">(4)</a> <a
          href="#ref-for-dom-layoutfragment-breaktoken④">(5)</a> <a
          href="#ref-for-dom-layoutfragment-breaktoken⑤">(6)</a>
      <li><a href="#ref-for-dom-layoutfragment-breaktoken⑥">3.5. Breaking and Fragmentation</a> <a
          href="#ref-for-dom-layoutfragment-breaktoken⑦">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutfragment-layoutfragmentrequest-slot">
    <b><a
        href="#dom-layoutfragment-layoutfragmentrequest-slot">#dom-layoutfragment-layoutfragmentrequest-slot</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutfragment-layoutfragmentrequest-slot">3.2. Layout Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutfragment-generator-slot">
    <b><a href="#dom-layoutfragment-generator-slot">#dom-layoutfragment-generator-slot</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutfragment-generator-slot">3.2. Layout Fragments</a>
      <li><a href="#ref-for-dom-layoutfragment-generator-slot①">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="create-a-layout-fragment">
    <b><a href="#create-a-layout-fragment">#create-a-layout-fragment</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-create-a-layout-fragment">5.6.3. Utility Algorithms</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="intrinsicsizes">
    <b><a href="#intrinsicsizes">#intrinsicsizes</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-intrinsicsizes">3.3. Intrinsic Sizes</a> <a href="#ref-for-intrinsicsizes①">(2)</a> <a
          href="#ref-for-intrinsicsizes②">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-intrinsicsizes-mincontentsize">
    <b><a href="#dom-intrinsicsizes-mincontentsize">#dom-intrinsicsizes-mincontentsize</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-intrinsicsizes-mincontentsize">3.3. Intrinsic Sizes</a> <a
          href="#ref-for-dom-intrinsicsizes-mincontentsize①">(2)</a> <a
          href="#ref-for-dom-intrinsicsizes-mincontentsize②">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-intrinsicsizes-maxcontentsize">
    <b><a href="#dom-intrinsicsizes-maxcontentsize">#dom-intrinsicsizes-maxcontentsize</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-intrinsicsizes-maxcontentsize">3.3. Intrinsic Sizes</a> <a
          href="#ref-for-dom-intrinsicsizes-maxcontentsize①">(2)</a> <a
          href="#ref-for-dom-intrinsicsizes-maxcontentsize②">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-intrinsicsizes-intrinsicsizesrequest-slot">
    <b><a
        href="#dom-intrinsicsizes-intrinsicsizesrequest-slot">#dom-intrinsicsizes-intrinsicsizesrequest-slot</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-intrinsicsizes-intrinsicsizesrequest-slot">3.3. Intrinsic Sizes</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="create-an-intrinsic-sizes-object">
    <b><a href="#create-an-intrinsic-sizes-object">#create-an-intrinsic-sizes-object</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-create-an-intrinsic-sizes-object">5.6.3. Utility Algorithms</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layoutconstraints">
    <b><a href="#layoutconstraints">#layoutconstraints</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-layoutconstraints">3.1. Layout Children</a>
      <li><a href="#ref-for-layoutconstraints①">3.4. Layout Constraints</a> <a
          href="#ref-for-layoutconstraints②">(2)</a> <a href="#ref-for-layoutconstraints③">(3)</a> <a
          href="#ref-for-layoutconstraints④">(4)</a> <a href="#ref-for-layoutconstraints⑤">(5)</a> <a
          href="#ref-for-layoutconstraints⑥">(6)</a>
      <li><a href="#ref-for-layoutconstraints⑦">3.5. Breaking and Fragmentation</a>
      <li><a href="#ref-for-layoutconstraints⑧">4.1. Sizing</a> <a href="#ref-for-layoutconstraints⑨">(2)</a>
      <li><a href="#ref-for-layoutconstraints①⓪">5.2. Layout Invalidation</a> <a
          href="#ref-for-layoutconstraints①①">(2)</a> <a href="#ref-for-layoutconstraints①②">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutconstraints-availableinlinesize">
    <b><a
        href="#dom-layoutconstraints-availableinlinesize">#dom-layoutconstraints-availableinlinesize</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutconstraints-availableinlinesize">3.4. Layout Constraints</a> <a
          href="#ref-for-dom-layoutconstraints-availableinlinesize①">(2)</a> <a
          href="#ref-for-dom-layoutconstraints-availableinlinesize②">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutconstraints-availableblocksize">
    <b><a
        href="#dom-layoutconstraints-availableblocksize">#dom-layoutconstraints-availableblocksize</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutconstraints-availableblocksize">3.4. Layout Constraints</a> <a
          href="#ref-for-dom-layoutconstraints-availableblocksize①">(2)</a> <a
          href="#ref-for-dom-layoutconstraints-availableblocksize②">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutconstraints-fixedinlinesize">
    <b><a href="#dom-layoutconstraints-fixedinlinesize">#dom-layoutconstraints-fixedinlinesize</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutconstraints-fixedinlinesize">3.4. Layout Constraints</a> <a
          href="#ref-for-dom-layoutconstraints-fixedinlinesize①">(2)</a> <a
          href="#ref-for-dom-layoutconstraints-fixedinlinesize②">(3)</a>
      <li><a href="#ref-for-dom-layoutconstraints-fixedinlinesize③">4.1. Sizing</a> <a
          href="#ref-for-dom-layoutconstraints-fixedinlinesize④">(2)</a> <a
          href="#ref-for-dom-layoutconstraints-fixedinlinesize⑤">(3)</a> <a
          href="#ref-for-dom-layoutconstraints-fixedinlinesize⑥">(4)</a>
      <li><a href="#ref-for-dom-layoutconstraints-fixedinlinesize⑦">4.1.1. Positioned layout sizing</a>
      <li><a href="#ref-for-dom-layoutconstraints-fixedinlinesize⑧">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutconstraints-fixedblocksize">
    <b><a href="#dom-layoutconstraints-fixedblocksize">#dom-layoutconstraints-fixedblocksize</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutconstraints-fixedblocksize">3.4. Layout Constraints</a> <a
          href="#ref-for-dom-layoutconstraints-fixedblocksize①">(2)</a> <a
          href="#ref-for-dom-layoutconstraints-fixedblocksize②">(3)</a>
      <li><a href="#ref-for-dom-layoutconstraints-fixedblocksize③">4.1. Sizing</a> <a
          href="#ref-for-dom-layoutconstraints-fixedblocksize④">(2)</a> <a
          href="#ref-for-dom-layoutconstraints-fixedblocksize⑤">(3)</a> <a
          href="#ref-for-dom-layoutconstraints-fixedblocksize⑥">(4)</a>
      <li><a href="#ref-for-dom-layoutconstraints-fixedblocksize⑦">4.1.1. Positioned layout sizing</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutconstraints-percentageinlinesize">
    <b><a
        href="#dom-layoutconstraints-percentageinlinesize">#dom-layoutconstraints-percentageinlinesize</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutconstraints-percentageinlinesize">3.4. Layout Constraints</a> <a
          href="#ref-for-dom-layoutconstraints-percentageinlinesize①">(2)</a> <a
          href="#ref-for-dom-layoutconstraints-percentageinlinesize②">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutconstraints-percentageblocksize">
    <b><a
        href="#dom-layoutconstraints-percentageblocksize">#dom-layoutconstraints-percentageblocksize</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutconstraints-percentageblocksize">3.4. Layout Constraints</a> <a
          href="#ref-for-dom-layoutconstraints-percentageblocksize①">(2)</a> <a
          href="#ref-for-dom-layoutconstraints-percentageblocksize②">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutconstraints-blockfragmentationoffset">
    <b><a
        href="#dom-layoutconstraints-blockfragmentationoffset">#dom-layoutconstraints-blockfragmentationoffset</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutconstraints-blockfragmentationoffset">3.4. Layout Constraints</a>
      <li><a href="#ref-for-dom-layoutconstraints-blockfragmentationoffset①">4.4. Fragmentation</a> <a
          href="#ref-for-dom-layoutconstraints-blockfragmentationoffset②">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutconstraints-blockfragmentationtype">
    <b><a
        href="#dom-layoutconstraints-blockfragmentationtype">#dom-layoutconstraints-blockfragmentationtype</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutconstraints-blockfragmentationtype">3.4. Layout Constraints</a> <a
          href="#ref-for-dom-layoutconstraints-blockfragmentationtype①">(2)</a>
      <li><a href="#ref-for-dom-layoutconstraints-blockfragmentationtype②">3.5. Breaking and Fragmentation</a> <a
          href="#ref-for-dom-layoutconstraints-blockfragmentationtype③">(2)</a>
      <li><a href="#ref-for-dom-layoutconstraints-blockfragmentationtype④">4.4. Fragmentation</a> <a
          href="#ref-for-dom-layoutconstraints-blockfragmentationtype⑤">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-layoutconstraintsoptions">
    <b><a href="#dictdef-layoutconstraintsoptions">#dictdef-layoutconstraintsoptions</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dictdef-layoutconstraintsoptions">3.4. Layout Constraints</a>
      <li><a href="#ref-for-dictdef-layoutconstraintsoptions①">5.5.1. Request Objects</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-blockfragmentationtype">
    <b><a href="#enumdef-blockfragmentationtype">#enumdef-blockfragmentationtype</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-enumdef-blockfragmentationtype">3.4. Layout Constraints</a> <a
          href="#ref-for-enumdef-blockfragmentationtype①">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="create-a-layout-constraints-object">
    <b><a href="#create-a-layout-constraints-object">#create-a-layout-constraints-object</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-create-a-layout-constraints-object">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="childbreaktoken">
    <b><a href="#childbreaktoken">#childbreaktoken</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-childbreaktoken">3.1. Layout Children</a>
      <li><a href="#ref-for-childbreaktoken①">3.2. Layout Fragments</a> <a href="#ref-for-childbreaktoken②">(2)</a>
      <li><a href="#ref-for-childbreaktoken③">3.5. Breaking and Fragmentation</a> <a
          href="#ref-for-childbreaktoken④">(2)</a> <a href="#ref-for-childbreaktoken⑤">(3)</a>
      <li><a href="#ref-for-childbreaktoken⑥">5.5.1. Request Objects</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="breaktoken">
    <b><a href="#breaktoken">#breaktoken</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-breaktoken">3.5. Breaking and Fragmentation</a> <a href="#ref-for-breaktoken①">(2)</a>
      <li><a href="#ref-for-breaktoken②">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-breaktokenoptions">
    <b><a href="#dictdef-breaktokenoptions">#dictdef-breaktokenoptions</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dictdef-breaktokenoptions">5.6. Performing Layout</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-breaktype">
    <b><a href="#enumdef-breaktype">#enumdef-breaktype</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-enumdef-breaktype">3.5. Breaking and Fragmentation</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layoutedgesizes">
    <b><a href="#layoutedgesizes">#layoutedgesizes</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-layoutedgesizes">3.6. Edges</a> <a href="#ref-for-layoutedgesizes①">(2)</a> <a
          href="#ref-for-layoutedgesizes②">(3)</a> <a href="#ref-for-layoutedgesizes③">(4)</a> <a
          href="#ref-for-layoutedgesizes④">(5)</a> <a href="#ref-for-layoutedgesizes⑤">(6)</a>
      <li><a href="#ref-for-layoutedgesizes⑥">5.6.1. Determining Intrinsic Sizes</a>
      <li><a href="#ref-for-layoutedgesizes⑦">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutedgesizes-inlinestart">
    <b><a href="#dom-layoutedgesizes-inlinestart">#dom-layoutedgesizes-inlinestart</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutedgesizes-inlinestart">3.6. Edges</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutedgesizes-inlineend">
    <b><a href="#dom-layoutedgesizes-inlineend">#dom-layoutedgesizes-inlineend</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutedgesizes-inlineend">3.6. Edges</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutedgesizes-blockstart">
    <b><a href="#dom-layoutedgesizes-blockstart">#dom-layoutedgesizes-blockstart</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutedgesizes-blockstart">3.6. Edges</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutedgesizes-blockend">
    <b><a href="#dom-layoutedgesizes-blockend">#dom-layoutedgesizes-blockend</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutedgesizes-blockend">3.6. Edges</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutedgesizes-inline">
    <b><a href="#dom-layoutedgesizes-inline">#dom-layoutedgesizes-inline</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutedgesizes-inline">3.6. Edges</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutedgesizes-block">
    <b><a href="#dom-layoutedgesizes-block">#dom-layoutedgesizes-block</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutedgesizes-block">3.6. Edges</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layoutedges">
    <b><a href="#layoutedges">#layoutedges</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-layoutedges">3.6. Edges</a> <a href="#ref-for-layoutedges①">(2)</a> <a
          href="#ref-for-layoutedges②">(3)</a> <a href="#ref-for-layoutedges③">(4)</a>
      <li><a href="#ref-for-layoutedges④">5.2. Layout Invalidation</a> <a href="#ref-for-layoutedges⑤">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutedges-border">
    <b><a href="#dom-layoutedges-border">#dom-layoutedges-border</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutedges-border">3.6. Edges</a> <a href="#ref-for-dom-layoutedges-border①">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutedges-scrollbar">
    <b><a href="#dom-layoutedges-scrollbar">#dom-layoutedges-scrollbar</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutedges-scrollbar">3.6. Edges</a> <a
          href="#ref-for-dom-layoutedges-scrollbar①">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutedges-padding">
    <b><a href="#dom-layoutedges-padding">#dom-layoutedges-padding</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutedges-padding">3.6. Edges</a> <a href="#ref-for-dom-layoutedges-padding①">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutedges-all">
    <b><a href="#dom-layoutedges-all">#dom-layoutedges-all</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutedges-all">3.6. Edges</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layout-definition">
    <b><a href="#layout-definition">#layout-definition</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-layout-definition">5.4. Registering A Layout</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layout-definition-class-constructor">
    <b><a href="#layout-definition-class-constructor">#layout-definition-class-constructor</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-layout-definition-class-constructor">5.4. Registering A Layout</a>
      <li><a href="#ref-for-layout-definition-class-constructor①">5.6.3. Utility Algorithms</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layout-definition-layout-generator-function">
    <b><a
        href="#layout-definition-layout-generator-function">#layout-definition-layout-generator-function</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-layout-definition-layout-generator-function">5.4. Registering A Layout</a>
      <li><a href="#ref-for-layout-definition-layout-generator-function①">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layout-definition-intrinsic-sizes-generator-function">
    <b><a
        href="#layout-definition-intrinsic-sizes-generator-function">#layout-definition-intrinsic-sizes-generator-function</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-layout-definition-intrinsic-sizes-generator-function">5.4. Registering A Layout</a>
      <li><a href="#ref-for-layout-definition-intrinsic-sizes-generator-function①">5.6.1. Determining Intrinsic
          Sizes</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layout-definition-constructor-valid-flag">
    <b><a
        href="#layout-definition-constructor-valid-flag">#layout-definition-constructor-valid-flag</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-layout-definition-constructor-valid-flag">5.4. Registering A Layout</a>
      <li><a href="#ref-for-layout-definition-constructor-valid-flag①">5.6.3. Utility Algorithms</a> <a
          href="#ref-for-layout-definition-constructor-valid-flag②">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layout-definition-input-properties">
    <b><a href="#layout-definition-input-properties">#layout-definition-input-properties</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-layout-definition-input-properties">5.4. Registering A Layout</a>
      <li><a href="#ref-for-layout-definition-input-properties①">5.6.1. Determining Intrinsic Sizes</a>
      <li><a href="#ref-for-layout-definition-input-properties②">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layout-definition-child-input-properties">
    <b><a
        href="#layout-definition-child-input-properties">#layout-definition-child-input-properties</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-layout-definition-child-input-properties">3.1.1. LayoutChildren and the Box Tree</a>
      <li><a href="#ref-for-layout-definition-child-input-properties①">5.4. Registering A Layout</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layout-definition-layout-options">
    <b><a href="#layout-definition-layout-options">#layout-definition-layout-options</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-layout-definition-layout-options">5.4. Registering A Layout</a>
      <li><a href="#ref-for-layout-definition-layout-options①">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="document-layout-definition">
    <b><a href="#document-layout-definition">#document-layout-definition</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-document-layout-definition">5.4. Registering A Layout</a>
      <li><a href="#ref-for-document-layout-definition①">5.6.3. Utility Algorithms</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="document-layout-definition-input-properties">
    <b><a
        href="#document-layout-definition-input-properties">#document-layout-definition-input-properties</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-document-layout-definition-input-properties">5.2. Layout Invalidation</a>
      <li><a href="#ref-for-document-layout-definition-input-properties①">5.4. Registering A Layout</a> <a
          href="#ref-for-document-layout-definition-input-properties②">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="document-layout-definition-child-input-properties">
    <b><a
        href="#document-layout-definition-child-input-properties">#document-layout-definition-child-input-properties</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-document-layout-definition-child-input-properties">5.2. Layout Invalidation</a>
      <li><a href="#ref-for-document-layout-definition-child-input-properties①">5.4. Registering A Layout</a> <a
          href="#ref-for-document-layout-definition-child-input-properties②">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="document-layout-definition-layout-options">
    <b><a
        href="#document-layout-definition-layout-options">#document-layout-definition-layout-options</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-document-layout-definition-layout-options">2.2. Box Tree Transformations</a> <a
          href="#ref-for-document-layout-definition-layout-options①">(2)</a> <a
          href="#ref-for-document-layout-definition-layout-options②">(3)</a>
      <li><a href="#ref-for-document-layout-definition-layout-options③">3.5. Breaking and Fragmentation</a>
      <li><a href="#ref-for-document-layout-definition-layout-options④">4.1. Sizing</a> <a
          href="#ref-for-document-layout-definition-layout-options⑤">(2)</a> <a
          href="#ref-for-document-layout-definition-layout-options⑥">(3)</a>
      <li><a href="#ref-for-document-layout-definition-layout-options⑦">5.4. Registering A Layout</a> <a
          href="#ref-for-document-layout-definition-layout-options⑧">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layout-valid-flag">
    <b><a href="#layout-valid-flag">#layout-valid-flag</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-layout-valid-flag">5.2. Layout Invalidation</a> <a
          href="#ref-for-layout-valid-flag①">(2)</a> <a href="#ref-for-layout-valid-flag②">(3)</a> <a
          href="#ref-for-layout-valid-flag③">(4)</a> <a href="#ref-for-layout-valid-flag④">(5)</a>
      <li><a href="#ref-for-layout-valid-flag⑤">5.6.2. Generating Fragments</a> <a
          href="#ref-for-layout-valid-flag⑥">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layout-valid">
    <b><a href="#layout-valid">#layout-valid</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-layout-valid">5.6.2. Generating Fragments</a> <a href="#ref-for-layout-valid①">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layout-invalid">
    <b><a href="#layout-invalid">#layout-invalid</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-layout-invalid">5.2. Layout Invalidation</a> <a href="#ref-for-layout-invalid①">(2)</a> <a
          href="#ref-for-layout-invalid②">(3)</a> <a href="#ref-for-layout-invalid③">(4)</a> <a
          href="#ref-for-layout-invalid④">(5)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="intrinsic-sizes-valid-flag">
    <b><a href="#intrinsic-sizes-valid-flag">#intrinsic-sizes-valid-flag</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-intrinsic-sizes-valid-flag">5.2. Layout Invalidation</a> <a
          href="#ref-for-intrinsic-sizes-valid-flag①">(2)</a> <a href="#ref-for-intrinsic-sizes-valid-flag②">(3)</a> <a
          href="#ref-for-intrinsic-sizes-valid-flag③">(4)</a> <a href="#ref-for-intrinsic-sizes-valid-flag④">(5)</a>
      <li><a href="#ref-for-intrinsic-sizes-valid-flag⑤">5.6.1. Determining Intrinsic Sizes</a> <a
          href="#ref-for-intrinsic-sizes-valid-flag⑥">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="intrinsic-sizes-valid">
    <b><a href="#intrinsic-sizes-valid">#intrinsic-sizes-valid</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-intrinsic-sizes-valid">5.6.1. Determining Intrinsic Sizes</a> <a
          href="#ref-for-intrinsic-sizes-valid①">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="intrinsic-sizes-invalid">
    <b><a href="#intrinsic-sizes-invalid">#intrinsic-sizes-invalid</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-intrinsic-sizes-invalid">5.2. Layout Invalidation</a> <a
          href="#ref-for-intrinsic-sizes-invalid①">(2)</a> <a href="#ref-for-intrinsic-sizes-invalid②">(3)</a> <a
          href="#ref-for-intrinsic-sizes-invalid③">(4)</a> <a href="#ref-for-intrinsic-sizes-invalid④">(5)</a> <a
          href="#ref-for-intrinsic-sizes-invalid⑤">(6)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="invalidate-layout-functions">
    <b><a href="#invalidate-layout-functions">#invalidate-layout-functions</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-invalidate-layout-functions">5.2. Layout Invalidation</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-css-layoutworklet">
    <b><a href="#dom-css-layoutworklet">#dom-css-layoutworklet</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-css-layoutworklet">5.3. Layout Worklet</a> <a
          href="#ref-for-dom-css-layoutworklet①">(2)</a> <a href="#ref-for-dom-css-layoutworklet②">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layoutworkletglobalscope">
    <b><a href="#layoutworkletglobalscope">#layoutworkletglobalscope</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-layoutworkletglobalscope">3.1.1. LayoutChildren and the Box Tree</a> <a
          href="#ref-for-layoutworkletglobalscope①">(2)</a>
      <li><a href="#ref-for-layoutworkletglobalscope②">5.1. Concepts</a>
      <li><a href="#ref-for-layoutworkletglobalscope③">5.3. Layout Worklet</a> <a
          href="#ref-for-layoutworkletglobalscope④">(2)</a>
      <li><a href="#ref-for-layoutworkletglobalscope⑤">5.4. Registering A Layout</a> <a
          href="#ref-for-layoutworkletglobalscope⑥">(2)</a>
      <li><a href="#ref-for-layoutworkletglobalscope⑦">5.6.1. Determining Intrinsic Sizes</a> <a
          href="#ref-for-layoutworkletglobalscope⑧">(2)</a>
      <li><a href="#ref-for-layoutworkletglobalscope⑨">5.6.2. Generating Fragments</a> <a
          href="#ref-for-layoutworkletglobalscope①⓪">(2)</a>
      <li><a href="#ref-for-layoutworkletglobalscope①①">5.6.3. Utility Algorithms</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-layoutoptions">
    <b><a href="#dictdef-layoutoptions">#dictdef-layoutoptions</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dictdef-layoutoptions">5.1. Concepts</a> <a href="#ref-for-dictdef-layoutoptions①">(2)</a>
      <li><a href="#ref-for-dictdef-layoutoptions②">5.4. Registering A Layout</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutoptions-childdisplay">
    <b><a href="#dom-layoutoptions-childdisplay">#dom-layoutoptions-childdisplay</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutoptions-childdisplay">2.2. Box Tree Transformations</a> <a
          href="#ref-for-dom-layoutoptions-childdisplay①">(2)</a> <a
          href="#ref-for-dom-layoutoptions-childdisplay②">(3)</a>
      <li><a href="#ref-for-dom-layoutoptions-childdisplay③">3.5. Breaking and Fragmentation</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutoptions-sizing">
    <b><a href="#dom-layoutoptions-sizing">#dom-layoutoptions-sizing</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutoptions-sizing">4.1. Sizing</a> <a
          href="#ref-for-dom-layoutoptions-sizing①">(2)</a> <a href="#ref-for-dom-layoutoptions-sizing②">(3)</a>
      <li><a href="#ref-for-dom-layoutoptions-sizing③">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-childdisplaytype">
    <b><a href="#enumdef-childdisplaytype">#enumdef-childdisplaytype</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-enumdef-childdisplaytype">5.4. Registering A Layout</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-layoutsizingmode">
    <b><a href="#enumdef-layoutsizingmode">#enumdef-layoutsizingmode</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-enumdef-layoutsizingmode">5.4. Registering A Layout</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="document-layout-definitions">
    <b><a href="#document-layout-definitions">#document-layout-definitions</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-document-layout-definitions">5.4. Registering A Layout</a>
      <li><a href="#ref-for-document-layout-definitions①">5.6.3. Utility Algorithms</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layout-definitions">
    <b><a href="#layout-definitions">#layout-definitions</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-layout-definitions">5.4. Registering A Layout</a>
      <li><a href="#ref-for-layout-definitions①">5.6.3. Utility Algorithms</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layout-class-instances">
    <b><a href="#layout-class-instances">#layout-class-instances</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-layout-class-instances">5.6.3. Utility Algorithms</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutworkletglobalscope-registerlayout">
    <b><a
        href="#dom-layoutworkletglobalscope-registerlayout">#dom-layoutworkletglobalscope-registerlayout</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutworkletglobalscope-registerlayout">5.3. Layout Worklet</a>
      <li><a href="#ref-for-dom-layoutworkletglobalscope-registerlayout①">5.4. Registering A Layout</a> <a
          href="#ref-for-dom-layoutworkletglobalscope-registerlayout②">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="intrinsicsizesrequest">
    <b><a href="#intrinsicsizesrequest">#intrinsicsizesrequest</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-intrinsicsizesrequest">3.1. Layout Children</a> <a
          href="#ref-for-intrinsicsizesrequest①">(2)</a>
      <li><a href="#ref-for-intrinsicsizesrequest②">3.3. Intrinsic Sizes</a>
      <li><a href="#ref-for-intrinsicsizesrequest③">5.5.1. Request Objects</a> <a
          href="#ref-for-intrinsicsizesrequest④">(2)</a>
      <li><a href="#ref-for-intrinsicsizesrequest⑤">5.6.3. Utility Algorithms</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="layoutfragmentrequest">
    <b><a href="#layoutfragmentrequest">#layoutfragmentrequest</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-layoutfragmentrequest">3.1. Layout Children</a> <a
          href="#ref-for-layoutfragmentrequest①">(2)</a>
      <li><a href="#ref-for-layoutfragmentrequest②">3.2. Layout Fragments</a>
      <li><a href="#ref-for-layoutfragmentrequest③">5.5.1. Request Objects</a> <a
          href="#ref-for-layoutfragmentrequest④">(2)</a> <a href="#ref-for-layoutfragmentrequest⑤">(3)</a> <a
          href="#ref-for-layoutfragmentrequest⑥">(4)</a>
      <li><a href="#ref-for-layoutfragmentrequest⑦">5.6.3. Utility Algorithms</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="typedefdef-layoutfragmentrequestorintrinsicsizesrequest">
    <b><a
        href="#typedefdef-layoutfragmentrequestorintrinsicsizesrequest">#typedefdef-layoutfragmentrequestorintrinsicsizesrequest</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-typedefdef-layoutfragmentrequestorintrinsicsizesrequest">5.6.3. Utility Algorithms</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-intrinsicsizesrequest-layoutchild-slot">
    <b><a
        href="#dom-intrinsicsizesrequest-layoutchild-slot">#dom-intrinsicsizesrequest-layoutchild-slot</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-intrinsicsizesrequest-layoutchild-slot">3.1. Layout Children</a>
      <li><a href="#ref-for-dom-intrinsicsizesrequest-layoutchild-slot①">5.6.3. Utility Algorithms</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutfragmentrequest-layoutchild-slot">
    <b><a
        href="#dom-layoutfragmentrequest-layoutchild-slot">#dom-layoutfragmentrequest-layoutchild-slot</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutfragmentrequest-layoutchild-slot">3.1. Layout Children</a>
      <li><a href="#ref-for-dom-layoutfragmentrequest-layoutchild-slot①">5.6.3. Utility Algorithms</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutfragmentrequest-layoutconstraints-slot">
    <b><a
        href="#dom-layoutfragmentrequest-layoutconstraints-slot">#dom-layoutfragmentrequest-layoutconstraints-slot</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutfragmentrequest-layoutconstraints-slot">3.1. Layout Children</a>
      <li><a href="#ref-for-dom-layoutfragmentrequest-layoutconstraints-slot①">5.6.3. Utility Algorithms</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-layoutfragmentrequest-breaktoken-slot">
    <b><a
        href="#dom-layoutfragmentrequest-breaktoken-slot">#dom-layoutfragmentrequest-breaktoken-slot</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-layoutfragmentrequest-breaktoken-slot">3.1. Layout Children</a>
      <li><a href="#ref-for-dom-layoutfragmentrequest-breaktoken-slot①">5.6.3. Utility Algorithms</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-fragmentresultoptions">
    <b><a href="#dictdef-fragmentresultoptions">#dictdef-fragmentresultoptions</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dictdef-fragmentresultoptions">3.2. Layout Fragments</a>
      <li><a href="#ref-for-dictdef-fragmentresultoptions①">3.5. Breaking and Fragmentation</a>
      <li><a href="#ref-for-dictdef-fragmentresultoptions②">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-fragmentresultoptions-inlinesize">
    <b><a href="#dom-fragmentresultoptions-inlinesize">#dom-fragmentresultoptions-inlinesize</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-fragmentresultoptions-inlinesize">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-fragmentresultoptions-blocksize">
    <b><a href="#dom-fragmentresultoptions-blocksize">#dom-fragmentresultoptions-blocksize</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-fragmentresultoptions-blocksize">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-fragmentresultoptions-autoblocksize">
    <b><a href="#dom-fragmentresultoptions-autoblocksize">#dom-fragmentresultoptions-autoblocksize</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-fragmentresultoptions-autoblocksize">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-fragmentresultoptions-childfragments">
    <b><a
        href="#dom-fragmentresultoptions-childfragments">#dom-fragmentresultoptions-childfragments</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-fragmentresultoptions-childfragments">2.1. Layout API Container Painting</a>
      <li><a href="#ref-for-dom-fragmentresultoptions-childfragments①">4.5. Alignment</a>
      <li><a href="#ref-for-dom-fragmentresultoptions-childfragments②">5.6.2. Generating Fragments</a> <a
          href="#ref-for-dom-fragmentresultoptions-childfragments③">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-fragmentresultoptions-data">
    <b><a href="#dom-fragmentresultoptions-data">#dom-fragmentresultoptions-data</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-fragmentresultoptions-data">3.2. Layout Fragments</a>
      <li><a href="#ref-for-dom-fragmentresultoptions-data①">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-fragmentresultoptions-breaktoken">
    <b><a href="#dom-fragmentresultoptions-breaktoken">#dom-fragmentresultoptions-breaktoken</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-fragmentresultoptions-breaktoken">3.5. Breaking and Fragmentation</a>
      <li><a href="#ref-for-dom-fragmentresultoptions-breaktoken①">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-intrinsicsizesresultoptions">
    <b><a href="#dictdef-intrinsicsizesresultoptions">#dictdef-intrinsicsizesresultoptions</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dictdef-intrinsicsizesresultoptions">5.6.1. Determining Intrinsic Sizes</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-intrinsicsizesresultoptions-maxcontentsize">
    <b><a
        href="#dom-intrinsicsizesresultoptions-maxcontentsize">#dom-intrinsicsizesresultoptions-maxcontentsize</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-intrinsicsizesresultoptions-maxcontentsize">5.6.1. Determining Intrinsic Sizes</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-intrinsicsizesresultoptions-mincontentsize">
    <b><a
        href="#dom-intrinsicsizesresultoptions-mincontentsize">#dom-intrinsicsizesresultoptions-mincontentsize</a></b><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-intrinsicsizesresultoptions-mincontentsize">5.6.1. Determining Intrinsic Sizes</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="determine-the-intrinsic-sizes">
    <b><a href="#determine-the-intrinsic-sizes">#determine-the-intrinsic-sizes</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-determine-the-intrinsic-sizes">5.4. Registering A Layout</a>
      <li><a href="#ref-for-determine-the-intrinsic-sizes①">5.6.1. Determining Intrinsic Sizes</a> <a
          href="#ref-for-determine-the-intrinsic-sizes②">(2)</a>
      <li><a href="#ref-for-determine-the-intrinsic-sizes③">5.6.3. Utility Algorithms</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="invoke-a-intrinsic-sizes-callback">
    <b><a href="#invoke-a-intrinsic-sizes-callback">#invoke-a-intrinsic-sizes-callback</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-invoke-a-intrinsic-sizes-callback">5.6.1. Determining Intrinsic Sizes</a> <a
          href="#ref-for-invoke-a-intrinsic-sizes-callback①">(2)</a>
      <li><a href="#ref-for-invoke-a-intrinsic-sizes-callback②">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="generate-a-fragment">
    <b><a href="#generate-a-fragment">#generate-a-fragment</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-generate-a-fragment">5.4. Registering A Layout</a>
      <li><a href="#ref-for-generate-a-fragment①">5.6.2. Generating Fragments</a> <a
          href="#ref-for-generate-a-fragment②">(2)</a>
      <li><a href="#ref-for-generate-a-fragment③">5.6.3. Utility Algorithms</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="invoke-a-layout-callback">
    <b><a href="#invoke-a-layout-callback">#invoke-a-layout-callback</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-invoke-a-layout-callback">5.6.2. Generating Fragments</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="get-a-document-layout-definition">
    <b><a href="#get-a-document-layout-definition">#get-a-document-layout-definition</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-get-a-document-layout-definition">5.2. Layout Invalidation</a> <a
          href="#ref-for-get-a-document-layout-definition①">(2)</a>
      <li><a href="#ref-for-get-a-document-layout-definition②">5.6.1. Determining Intrinsic Sizes</a> <a
          href="#ref-for-get-a-document-layout-definition③">(2)</a>
      <li><a href="#ref-for-get-a-document-layout-definition④">5.6.2. Generating Fragments</a> <a
          href="#ref-for-get-a-document-layout-definition⑤">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="get-a-layout-definition">
    <b><a href="#get-a-layout-definition">#get-a-layout-definition</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-get-a-layout-definition">3.1.1. LayoutChildren and the Box Tree</a> <a
          href="#ref-for-get-a-layout-definition①">(2)</a>
      <li><a href="#ref-for-get-a-layout-definition②">5.6.1. Determining Intrinsic Sizes</a> <a
          href="#ref-for-get-a-layout-definition③">(2)</a>
      <li><a href="#ref-for-get-a-layout-definition④">5.6.2. Generating Fragments</a> <a
          href="#ref-for-get-a-layout-definition⑤">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="get-a-layout-class-instance">
    <b><a href="#get-a-layout-class-instance">#get-a-layout-class-instance</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-get-a-layout-class-instance">5.6.1. Determining Intrinsic Sizes</a> <a
          href="#ref-for-get-a-layout-class-instance①">(2)</a>
      <li><a href="#ref-for-get-a-layout-class-instance②">5.6.2. Generating Fragments</a> <a
          href="#ref-for-get-a-layout-class-instance③">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="run-a-generator">
    <b><a href="#run-a-generator">#run-a-generator</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-run-a-generator">5.6.1. Determining Intrinsic Sizes</a> <a
          href="#ref-for-run-a-generator①">(2)</a>
      <li><a href="#ref-for-run-a-generator②">5.6.2. Generating Fragments</a> <a
          href="#ref-for-run-a-generator③">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="produce-a-generator-result">
    <b><a href="#produce-a-generator-result">#produce-a-generator-result</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-produce-a-generator-result">5.6.3. Utility Algorithms</a> <a
          href="#ref-for-produce-a-generator-result①">(2)</a> <a href="#ref-for-produce-a-generator-result②">(3)</a>
    </ul>
  </aside>
  <p role="navigation" id="back-to-top"><a href="#toc"><abbr title="Back to top">↑</abbr></a></p>
  <script>/* script-dfn-panel */

    document.body.addEventListener("click", function (e) {
      var queryAll = function (sel) { return [].slice.call(document.querySelectorAll(sel)); }
      // Find the dfn element or panel, if any, that was clicked on.
      var el = e.target;
      var target;
      var hitALink = false;
      while (el.parentElement) {
        if (el.tagName == "A") {
          // Clicking on a link in a <dfn> shouldn't summon the panel
          hitALink = true;
        }
        if (el.classList.contains("dfn-paneled")) {
          target = "dfn";
          break;
        }
        if (el.classList.contains("dfn-panel")) {
          target = "dfn-panel";
          break;
        }
        el = el.parentElement;
      }
      if (target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function (el) {
          el.classList.remove("on");
          el.classList.remove("activated");
        });
      }
      if (target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if (dfnPanel) {
          console.log(dfnPanel);
          dfnPanel.classList.add("on");
          var rect = el.getBoundingClientRect();
          dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
          dfnPanel.style.top = window.scrollY + rect.top + "px";
          var panelRect = dfnPanel.getBoundingClientRect();
          var panelWidth = panelRect.right - panelRect.left;
          if (panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
            // Reposition, because the panel is overflowing
            dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
          }
        } else {
          console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
      } else if (target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
      }

    });
  </script>
  <script src="https://htmlspecs.com/dropdown.js"></script>