<!DOCTYPE html>
<html lang=ja-JP>

<head>
    <meta content="text/html; charset=utf-8" http-equiv=Content-Type>
    <title>CSSスコーピングモジュール レベル1</title>
    <link href=https://www.w3.org/TR/css-scoping-1/default.css rel=stylesheet type=text/css>
    <link href="https://www.w3.org/StyleSheets/TR/W3C-WD" rel=stylesheet type=text/css>
</head>

<body class=h-entry>
    <div class=head>
        <p><a href="https://www.w3.org/">
                <img alt=W3C height=48 src="https://www.w3.org/Icons/w3c_home" width=72>
            </a>
        </p>
        <h1 class="p-name no-ref" id=title>CSSスコーピングモジュール レベル1</h1>
        <h2 class="no-num no-toc no-ref heading settled heading" id=subtitle><span class=content>W3C最初の公開ワーキングドラフト、
                <span class=dt-updated><span class=value-title title=20140403>2014年4月3日</span></span></span></h2>
        <div data-fill-with=spec-metadata>
            <dl>
                <dt>このバージョン:
                <dd><a class=u-url
                        href="https://www.w3.org/TR/2014/WD-css-scoping-1-20140403/">http://www.w3.org/TR/2014/WD-css-scoping-1-20140403/</a>
                <dt>最新版:
                <dd><a href="https://www.w3.org/TR/css-scoping-1/">http://www.w3.org/TR/css-scoping-1/</a>
                <dt>エディターズドラフト:
                <dd><a href="http://dev.w3.org/csswg/css-scoping/">http://dev.w3.org/csswg/css-scoping/</a>
                <dt>フィードバック:</dt>
                <dd><a href="mailto:www-style@w3.org?subject=%5Bcss-scoping%5D%20feedback">www-style@w3.org</a>
                    件名:
                    “<kbd>[css-scoping] <var>… message topic …</var></kbd>”（<a
                        href="http://lists.w3.org/Archives/Public/www-style/" rel=discussion>アーカイブ</a>）
                <dt>テストスイート:
                <dd>まだありません
                <dt>編集者:
                <dd class="p-author h-card vcard"><a class="p-name fn u-url url" href="http://xanthir.com/contact">Tab
                        Atkins Jr.</a> (<span class="p-org org">Google</span>)
                <dd class="p-author h-card vcard"><a class="p-name fn u-url url"
                        href=http://fantasai.inkedblade.net/contact>Elika J Etemad</a> (<span
                        class="p-org org">招待専門家</span>)
            </dl>
        </div>
        <div data-fill-with=warning></div>
        <p class=copyright data-fill-with=copyright><a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2014 <a
                href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
                href=http://www.csail.mit.edu><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a
                href=http://www.ercim.eu><abbr
                    title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a
                href=http://www.keio.ac.jp>Keio</a>, <a href=http://ev.buaa.edu.cn>Beihang</a>), All Rights
            Reserved. W3C <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>

    <h2 class="no-num no-toc no-ref heading settled heading" id=abstract><span class=content>概要</span></h2>
    <p class=p-summary data-fill-with=abstract>この仕様書は、スコープ付きスタイルや<a class=css data-link-type=maybe
            href=#at-ruledef-scope title=@scope>@scope</a>規則、Shadow
        DOMセレクタ、ページ／領域ベースのスタイリングなど、CSSの様々なスコーピング／カプセル化メカニズムを定義します。
        <a href="https://www.w3.org/TR/CSS/">CSS</a>は、構造化文書（HTMLやXMLなど）のレンダリングを画面、紙、音声などで記述するための言語です。
    </p>

    <h2 class="no-num no-toc no-ref heading settled heading" id=status><span class=content>この文書のステータス</span></h2>
    <div data-fill-with=status>
        <p><em>このセクションは、公開時点での本書のステータスについて説明します。他の文書が本書に取って代わる場合があります。現在のW3C出版物およびこの技術レポートの最新版は、<a
                    href="https://www.w3.org/TR/">W3C技術レポート一覧 http://www.w3.org/TR/</a>で確認できます。</em>

        <p>本書は<b>最初の公開ワーキングドラフト</b>です。

        <p>最初の公開ワーキングドラフトとしての公開は、W3C会員による承認を意味しません。これはドラフト文書であり、随時更新・差し替え・廃止される可能性があります。本書を進行中の作業以外として引用するのは不適切です。

        <p>本仕様の議論には、(<a href=http://lists.w3.org/Archives/Public/www-style>アーカイブ</a>)のパブリックメーリングリスト<a
                href=mailto:www-style@w3.org>www-style@w3.org</a>（<a
                href="https://www.w3.org/Mail/Request">案内</a>参照）が推奨されます。メール送信時は件名に「css-scoping」と入れてください。推奨例:「[css-scoping]
            <em>…コメント要約…</em>」

        <p>この文書は<a href="https://www.w3.org/Style/CSS/members">CSS作業グループ</a>（<a
                href="https://www.w3.org/Style/">スタイル活動</a>の一部）によって作成されました。

        <p>この文書は、<a href="https://www.w3.org/Consortium/Patent-Policy-20040205/">2004年2月5日
                W3C特許ポリシー</a>の下で運用されているグループによって作成されました。W3Cは、グループの成果物に関連して行われた<a
                href="https://www.w3.org/2004/01/pp-impl/32061/status"
                rel=disclosure>特許開示の公開リスト</a>を管理しています。そのページには特許開示の方法も記載されています。ある特許が<a
                href="https://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">必須請求項</a>を含むと信じる合理的根拠がある場合、<a
                href="https://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">W3C特許ポリシー第6節</a>に従って情報を開示しなければなりません。
        </p>
    </div>
    <div data-fill-with=at-risk></div>

    <h2 class="no-num no-toc no-ref heading settled heading" id=contents><span class=content>目次</span></h2>
    <div data-fill-with=table-of-contents>
        <ul class=toc>
            <li><a href=#intro><span class=secno>1</span> はじめに</a>
            <li><a href=#scope><span class=secno>2</span> スコープ付きスタイル</a>
                <ul class=toc>
                    <li><a href=#scoping-mechanisms><span class=secno>2.1</span> スコーピングメカニズム</a>
                        <ul class=toc>
                            <li><a href=#scoping-markup><span class=secno>2.1.1</span> スコープ指定のための文書マークアップ</a>
                            <li><a href=#scope-atrule><span class=secno>2.1.2</span> CSSスコーピング構文：<span class=css
                                        data-link-type=maybe title=@scope>@scope</span>規則</a>
                        </ul>
                    <li><a href=#scoping-context><span class=secno>2.2</span> スコーピングコンテキストのクエリ</a>
                        <ul class=toc>
                            <li><a href=#scope-pseudo><span class=secno>2.2.1</span> スコーピングルートの選択：<span class=css
                                        data-link-type=maybe title=:scope>:scope</span>疑似クラス</a>
                            <li><a href=#scope-content-pseudo><span class=secno>2.2.2</span> スコープ外の選択：<span class=css
                                        data-link-type=maybe title=:scope-context()>:scope-context()</span>疑似クラス</a>
                        </ul>
                </ul>
            <li><a href=#shadow-dom><span class=secno>3</span> シャドウカプセル化</a>
                <ul class=toc>
                    <li><a href=#selectors-data-model><span class=secno>3.1</span> シャドウDOMの選択モデル</a>
                        <ul class=toc>
                            <li><a href=#host-element><span class=secno>3.1.1</span> シャドウツリー内でのホスト要素</a>
                        </ul>
                    <li><a href=#selectors><span class=secno>3.2</span> シャドウDOM用セレクタ</a>
                        <ul class=toc>
                            <li><a href=#host-selector><span class=secno>3.2.1</span> ライト側の選択：<span class=css
                                        data-link-type=maybe title=:host>:host</span>、<span class=css
                                        data-link-type=maybe title=:host()>:host()</span>、<span class=css
                                        data-link-type=maybe title=:host-context()>:host-context()</span>疑似クラス</a>
                            <li><a href=#shadow-pseudoelement><span class=secno>3.2.2</span> 闇への選択：<span class=css
                                        data-link-type=maybe title=::shadow>::shadow</span>疑似要素</a>
                            <li><a href=#content-combinator><span class=secno>3.2.3</span> シャドウ投影コンテンツの選択：<span
                                        class=css data-link-type=maybe title=::content>::content</span>疑似要素</a>
                            <li><a href=#deep-combinator><span class=secno>3.2.4</span> シャドウ越しの選択：<span class=css
                                        data-link-type=maybe title=/deep>/deep/</span>結合子</a>
                        </ul>
                    <li><a href=#shadow-cascading><span class=secno>3.3</span> シャドウのカスケードと継承</a>
                        <ul class=toc>
                            <li><a href=#cascading><span class=secno>3.3.1</span> カスケーディング</a>
                            <li><a href=#inheritance><span class=secno>3.3.2</span> 継承</a>
                        </ul>
                </ul>
            <li><a href=#fragment-scoping><span class=secno>4</span> フラグメントスタイリング</a>
                <ul class=toc>
                    <li><a href=#the-region-pseudo-element><span class=secno>4.1</span> 領域ベースのスタイリング：<span class=css
                                data-link-type=maybe title=::region>::region</span>疑似要素</a>
                </ul>
            <li><a href=#conformance><span class=secno></span> 適合性</a>
                <ul class=toc>
                    <li><a href=#conventions><span class=secno></span> 文書の記法</a>
                    <li><a href=#conformance-classes><span class=secno></span> 適合クラス</a>
                    <li><a href=#partial><span class=secno></span> 部分的な実装</a>
                    <li><a href=#experimental><span class=secno></span> 実験的な実装</a>
                    <li><a href=#testing><span class=secno></span> 非実験的な実装</a>
                </ul>
            <li><a href=#references><span class=secno></span> 参考文献</a>
                <ul class=toc>
                    <li><a href=#normative><span class=secno></span> 規範的参考文献</a>
                    <li><a href=#informative><span class=secno></span> 参考的参考文献</a>
                </ul>
            <li><a href=#index><span class=secno></span> 索引</a>
            <li><a href=#property-index><span class=secno></span> プロパティ索引</a>
            <li><a href=#issues-index><span class=secno></span>課題索引</a>
        </ul>
    </div>



    <h2 class="heading settled heading" data-level=1 id=intro><span class=secno>1 </span><span class=content>
            はじめに</span><a class=self-link href=#intro></a></h2>

    <p> ...


    <h2 class="heading settled heading" data-level=2 id=scope><span class=secno>2 </span><span class=content>
            スコープ付きスタイル</span><a class=self-link href=#scope></a></h2>

    <p> <a data-link-type=dfn href="https://www.w3.org/TR/css3-cascade/#scoped"
            title=scoped>スコープ付き</a>スタイル規則は、ドキュメント全体ではなく、ドキュメントの部分木内のみに適用されます。
        スコーピングには主に2つの効果があります:
    <ul>
        <li><a data-link-type=dfn href="https://www.w3.org/TR/css3-cascade/#scoped"
                title=scoped>スコープ付き</a>スタイル規則のセレクタは、スコープ内の要素のみにマッチするよう制限されます。
            詳細は<a href="https://www.w3.org/TR/selectors4/#scoping">スコープ付きセレクタ</a>を<a data-biblio-type=informative
                data-link-type=biblio href=#selectors4 title=selectors4>[SELECTORS4]</a>で参照してください。
        <li>カスケードは、どんな詳細度であってもスコープ付き規則を非スコープ規則より優先します。
            詳細は<a href="https://www.w3.org/TR/css-cascade/#cascade-scope">スコープによるカスケード</a>を<a
                data-biblio-type=informative data-link-type=biblio href=#css3cascade
                title=css3cascade>[CSS3CASCADE]</a>で参照してください。
    </ul>

    <h3 class="heading settled heading" data-level=2.1 id=scoping-mechanisms><span class=secno>2.1 </span><span
            class=content>
            スコーピングメカニズム</span><a class=self-link href=#scoping-mechanisms></a></h3>

    <p> スタイル規則は、ドキュメント言語で定義された構造や、CSSの<a class=css data-link-type=maybe href=#at-ruledef-scope
            title=@scope>@scope</a>規則を使ってスコープ化できます。

    <h4 class="heading settled heading" data-level=2.1.1 id=scoping-markup><span class=secno>2.1.1 </span><span
            class=content>
            スコーピングのためのドキュメントマークアップ</span><a class=self-link href=#scoping-markup></a></h4>

    <p> ドキュメント言語は、スタイルシートをドキュメント内の特定要素にスコープする仕組みを定義できる場合があります。
        例えばHTMLでは、<a data-link-type=element href="https://www.w3.org/TR/html5/document-metadata.html#the-style-element"
            title=style>style</a>要素に<a data-link-for=style data-link-type=element-attr
            title=scoped>scoped</a>属性を付けることで、そのスタイルシートを<a data-link-type=element
            href="https://www.w3.org/TR/html5/document-metadata.html#the-style-element"
            title=style>style</a>要素の親要素にスコープします。
        <a data-biblio-type=informative data-link-type=biblio href=#html title=html>[HTML]</a>

    <h4 class="heading settled heading" data-level=2.1.2 id=scope-atrule><span class=secno>2.1.2 </span><span
            class=content>
            CSSのスコーピング構文：<a class=css data-link-type=maybe href=#at-ruledef-scope title=@scope>@scope</a>規則</span><a
            class=self-link href=#scope-atrule></a></h4>

    <p> <dfn class=css-code data-dfn-type=at-rule data-export="" id=at-ruledef-scope>@scope<a class=self-link
                href=#at-ruledef-scope></a></dfn>アットルールは、著者がCSS構文でスコープ付きスタイル規則を作成できるようにします。
        <a class=css data-link-type=maybe href=#at-ruledef-scope title=@scope>@scope</a>規則の構文は次のとおりです:

    <pre class=prod>@scope <a class="production css-code" data-link-type=type href="https://www.w3.org/TR/selectors4/#ltselector" title="<selector>">&lt;selector&gt;</a> {
  <a class="production css-code" data-link-type=type href="https://www.w3.org/TR/css3-syntax/#typedef-stylesheet" title="<stylesheet>">&lt;stylesheet&gt;</a>
}
</pre>
    <p> ここで<a class="production css-code" data-link-type=type href="https://www.w3.org/TR/selectors4/#ltselector"
            title="<selector>">&lt;selector&gt;</a>でマッチした要素が<a data-link-type=dfn
            href=http://dev.w3.org/csswg/selectors-4/#scoping-root title="scoping roots">スコーピングルート</a>となり、<a
            class="production css-code" data-link-type=type href="https://www.w3.org/TR/css3-syntax/#typedef-stylesheet"
            title="<stylesheet>">&lt;stylesheet&gt;</a>内のスタイル規則に対して適用されます。また、<a class=css data-link-type=maybe
            href=#at-ruledef-scope title=@scope>@scope</a>でスコープされたスタイル規則のセレクタは、自身の<a data-link-type=dfn
            href=http://dev.w3.org/csswg/selectors-4/#scoping-root title="scoping root">スコーピングルート</a>に<a
            data-link-type=dfn href=http://dev.w3.org/csswg/selectors-4/#scope-contained-
            title=scope-contained>スコープ制限</a>されます。

    <p class=issue id=issue-5f568f10><a class=self-link href=#issue-5f568f10></a>
        この規則により、著者がスコープ付きスタイルシートを非常に簡単に作成できるため、スコープ付きスタイルの実装における最適化戦略へ影響する可能性があります。

    <p> 複数の要素が<a class="production css-code" data-link-type=type href="https://www.w3.org/TR/selectors4/#ltselector"
            title="<selector>">&lt;selector&gt;</a>にマッチした場合、<a class="production css-code" data-link-type=type
            href="https://www.w3.org/TR/css3-syntax/#typedef-stylesheet"
            title="<stylesheet>">&lt;stylesheet&gt;</a>はそれぞれ独立して複製され、個別にスコープされます。
        著者は、あまりにも一般的なセレクタの利用を避けるべきです。なぜならカスケードとの相互作用で混乱が生じる可能性があるためです。

    <div class=example>
        スコープ付きスタイルシートは最も外側のスコーピング要素だけでなく、マッチしたすべての要素に適用されます。
        例えば、以下のスタイルシートが与えられた場合
        <pre>@scope div {
  span {
    color: blue;
  }
}
@scope section {
  span {
    color: orange;
  }
}
</pre>
        <p> そして次のドキュメント断片があった場合

        <pre>&lt;div&gt;
  &lt;section&gt;
    &lt;div&gt;
      &lt;span&gt;text&lt;/span&gt;
    &lt;/div&gt;
  &lt;/section&gt;
&lt;/div&gt;
</pre>
        <p> テキストは青色になります。
    </div>

    <p> <a class=css data-link-type=maybe href=#at-ruledef-scope title=@scope>@scope</a>規則はネストできます。
        この場合、ネストしたスタイル規則と同様に、外側の<a class=css data-link-type=maybe href=#at-ruledef-scope
            title=@scope>@scope</a>のセレクタが、内側のものをスコープで包含します。

    <p> <a class=css data-link-type=maybe href=#at-ruledef-scope
            title=@scope>@scope</a>規則内のセレクタの詳細度（specificity）はローカルに計算されます。スコーピング要素を指定するセレクタは無視されます。ただし、スコープ付きスタイルは非スコープ付きスタイルよりも優先されるため、<a
            class=css data-link-type=maybe href=#at-ruledef-scope title=@scope>@scope</a>内のスタイル規則は外側の規則を上書きします。

    <div class=example>
        次の例では、テキストは緑色になります:

        <pre>  @scope aside {
    p { color: green; }
  }
  aside#sidebar p { color: red; }
</pre>
    </div>

    <p class=issue id=issue-5c7571b6><a class=self-link href=#issue-5c7571b6></a>
        複数の<a class=css data-link-type=maybe href=#at-ruledef-scope
            title=@scope>@scope</a>規則が要素に適用された場合、それらは詳細度でカスケードされるべきでしょうか？

    <h3 class="heading settled heading" data-level=2.2 id=scoping-context><span class=secno>2.2 </span><span
            class=content>
            スコーピングコンテキストのクエリ</span><a class=self-link href=#scoping-context></a></h3>

    <h4 class="heading settled heading" data-level=2.2.1 id=scope-pseudo><span class=secno>2.2.1 </span><span
            class=content>
            スコーピングルートの選択：<a class=css data-link-type=maybe href="https://www.w3.org/TR/selectors4/#scope-pseudo"
                title=:scope>:scope</a>疑似クラス</span><a class=self-link href=#scope-pseudo></a></h4>

    <p> スコープ付きスタイルシート内では、<a class=css data-link-type=maybe href="https://www.w3.org/TR/selectors4/#scope-pseudo"
            title=:scope>:scope</a>疑似クラス（<a data-biblio-type=informative data-link-type=biblio href=#selectors4
            title=selectors4>[SELECTORS4]</a>で定義）は、<a data-link-type=dfn
            href=http://dev.w3.org/csswg/selectors-4/#scoping-root title="scoping root">スコーピングルート</a>にマッチします。

    <h4 class="heading settled heading" data-level=2.2.2 id=scope-content-pseudo><span class=secno>2.2.2 </span><span
            class=content>
            スコープ外の選択：<span class=css data-link-type=maybe title=:scope-context()>:scope-context()</span>疑似クラス</span><a
            class=self-link href=#scope-content-pseudo></a></h4>

    <div class=issue id=issue-aecbd194><a class=self-link href=#issue-aecbd194></a>
        これは<a class=css data-link-type=maybe href=#selectordef-host-context
            title=:host-context()>:host-context()</a>に似た定義になりますが、<a data-link-type=dfn
            href=http://dev.w3.org/csswg/selectors-4/#scoping-root title="scoping root">スコーピングルート</a>の祖先にマッチします。

        <p> しかし、スコープ付きスタイルシートでは、ツリー外部に対して単一の複合セレクタではなく、複雑なセレクタでマッチさせたい場合もあるため、構文上ツリー要素の順序を反転しない、より一般的な仕組みを使う方がよいかもしれません。

        <p> 考えられる案:

        <pre>:scope-context(<a class="production css-code" data-link-type=type href="https://www.w3.org/TR/selectors4/#ltselector" title="<selector>">&lt;selector&gt;</a>) div {...}
scope(<a class="production css-code" data-link-type=type href="https://www.w3.org/TR/selectors4/#ltselector" title="<selector>">&lt;selector&gt;</a>) div {...}
\scope <a class="production css-code" data-link-type=type href="https://www.w3.org/TR/selectors4/#ltselector" title="<selector>">&lt;selector&gt;</a>\ div {...}
<a class="production css-code" data-link-type=type href="https://www.w3.org/TR/selectors4/#ltselector" title="<selector>">&lt;selector&gt;</a> \scope\ div {...}
</pre>
        <p> この機能は、セレクタとしては適切でない<span class=css data-link-type=maybe title=@global>@global</span>を置き換えることになります。
    </div>

    <h2 class="heading settled heading" data-level=3 id=shadow-dom><span class=secno>3 </span><span class=content>
            シャドウカプセル化</span><a class=self-link href=#shadow-dom></a></h2>

    <p> Shadow DOM仕様は、DOMにいくつかの新しい概念を追加しており、そのうちいくつかはCSSと関連します。

    <p> <dfn data-dfn-type=dfn data-export="" id=shadow-tree>シャドウツリー<a class=self-link
                href=#shadow-tree></a></dfn>は、DOM内のどんな要素にもアタッチできるドキュメントフラグメントです。
        <a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>のルートは<dfn data-dfn-type=dfn
            data-export="" id=shadow-root>シャドウルート<a class=self-link href=#shadow-root></a></dfn>であり、これは<a
            data-link-type=dfn href=#shadow-host title="shadow host">シャドウホスト</a>に関連付けられる非要素ノードです。
        1つの要素は任意の数の<a data-link-type=dfn href=#shadow-tree title="shadow trees">シャドウツリー</a>を持つことができ、それらは作成順に並びます。
        ある要素の直近で作成された<a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>が、その要素にとっての<dfn
            data-dfn-type=dfn data-export="" id=active-shadow-tree>アクティブシャドウツリー<a class=self-link
                href=#active-shadow-tree></a></dfn>です。

    <p> <a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>を持つ要素は<dfn data-dfn-type=dfn
            data-export="" id=shadow-host>シャドウホスト<a class=self-link href=#shadow-host></a></dfn>です。
        それは自身のシャドウツリーに対しての<dfn data-dfn-type=dfn data-export="" id=host-element0>ホスト要素<a class=self-link
                href=#host-element0></a></dfn>となります。

    <p> <a data-link-type=dfn href=#shadow-host title="shadow host">シャドウホスト</a>の子孫は、フォーマットツリーでボックスを生成してはなりません。
        代わりに、<a data-link-type=dfn href=#active-shadow-tree
            title="active shadow tree">アクティブシャドウツリー</a>の内容が、その要素の内容であるかのようにボックスを生成します。

    <p> シャドウDOM内では、要素が要素の親を持たない場合があり（その代わり親が<a data-link-type=dfn href=#shadow-root
            title="shadow root">シャドウルート</a>などの場合があります）、親を持たない、または親が要素でない要素は<dfn data-dfn-type=dfn data-export=""
            id=top-level-element>トップレベル要素<a class=self-link href=#top-level-element></a></dfn>と呼ばれます。

    <p> <a data-link-type=dfn href=#shadow-host title="shadow host">シャドウホスト</a>の子は通常ボックスを生成しませんが、明示的に<a
            data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>へ引き込んで通常通りレンダリングさせることができます。
        これは要素を<dfn data-dfn-type=dfn data-export="" id=distribution-list>配布リスト<a class=self-link
                href=#distribution-list></a></dfn>に割り当てることで行います。
        <a data-link-type=dfn href=#distribution-list title="distribution list">配布リスト</a>を持つ要素は<dfn data-dfn-type=dfn
            data-export="" id=insertion-point>挿入ポイント<a class=self-link href=#insertion-point></a></dfn>となります。

    <p> この仕様では、要素を<a data-link-type=dfn href=#distribution-list
            title="distribution list">配布リスト</a>へ割り当てる方法は定義せず、それはShadow DOM仕様に委ねています。
        この仕様の執筆時点では、<a data-link-type=element title=content>content</a>要素だけが、<a data-link-type=dfn href=#shadow-tree
            title="shadow tree">シャドウツリー</a>内で<a data-link-type=dfn href=#distribution-list
            title="distribution lists">配布リスト</a>を持つことができます。

    <p> <a data-link-type=dfn href=#insertion-point title="insertion point">挿入ポイント</a>自身はボックスを生成してはなりません。
        代わりに、その<a data-link-type=dfn href=#distribution-list
            title="distribution list">配布リスト</a>内の要素が通常通りボックスを生成し、すべての要素が<a data-link-type=dfn href=#insertion-point
            title="insertion point">挿入ポイント</a>の位置に置き換えられるかのように振る舞います。
        <span class=note>（これは<a class=css data-link-type=propdesc
                href=http://dev.w3.org/csswg/css-display-3/#propdef-display-box title=display-box>display-box:
                contents</a>の動作に似ています。）</span>

    <h3 class="heading settled heading" data-level=3.1 id=selectors-data-model><span class=secno>3.1 </span><span
            class=content>
            シャドウDOMの選択モデル</span><a class=self-link href=#selectors-data-model></a></h3>

    <p> <a data-link-type=dfn href=http://dev.w3.org/csswg/selectors-4/#element-tree
            title="element tree">要素ツリー</a>内の要素は、さらに0個以上の<a data-link-type=dfn href=#shadow-tree
            title="shadow trees">シャドウツリー</a>および0個または1個の<a data-link-type=dfn href=#distribution-list
            title="distribution lists">配布リスト</a>を持ちます。

    <p class=note> 注: 要素の「子孫」は、その要素の子を基準にしています。<a data-link-type=dfn href=#shadow-tree
            title="shadow trees">シャドウツリー</a>や<a data-link-type=dfn href=#distribution-list
            title="distribution lists">配布リスト</a>は含みません。

    <p> セレクタが<a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>に対してマッチングされるとき、<a data-link-type=dfn
            href=http://dev.w3.org/csswg/selectors-4/#initial-selector-match-list
            title="initial selector match list">初期セレクタマッチリスト</a>は、<a data-link-type=dfn href=#shadow-host
            title="shadow host">シャドウホスト</a>、続いて<a data-link-type=dfn href=#shadow-tree
            title="shadow tree">シャドウツリー</a>のすべての<a data-link-type=dfn href=#top-level-element
            title="top-level elements">トップレベル要素</a>とその子孫（先行順で並ぶ）となります。

    <h4 class="heading settled heading" data-level=3.1.1 id=host-element><span class=secno>3.1.1 </span><span
            class=content>
            シャドウツリー内でのホスト要素</span><a class=self-link href=#host-element></a></h4>

    <p> <a data-link-type=dfn href=#shadow-host title="shadow host">シャドウホスト</a>は、自身がホストする<a data-link-type=dfn
            href=#shadow-tree title="shadow trees">シャドウツリー</a>の外部にありますが、時には<a data-link-type=dfn href=#shadow-tree
            title="shadow tree">シャドウツリー</a>の文脈からそれをスタイルしたい場合があります。

    <p> セレクタの観点では、<a data-link-type=dfn href=#host-element0 title="host element">ホスト要素</a>もまた、それぞれの<a data-link-type=dfn
            href=#shadow-tree title="shadow trees">シャドウツリー</a>内に現れ、その<a data-link-type=dfn href=#shadow-tree
            title="shadow tree">シャドウツリー</a>の内容が子として扱われます。
        要素が複数の<a data-link-type=dfn href=#shadow-tree title="shadow trees">シャドウツリー</a>を持つ場合、それぞれの<a data-link-type=dfn
            href=#shadow-tree title="shadow tree">シャドウツリー</a>の文脈で独立して現れます。
        各<a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>は<em>自身</em>の内容だけを<a data-link-type=dfn
            href=#host-element0 title="host element">ホスト要素</a>のものとして扱い、他の<a data-link-type=dfn href=#shadow-tree
            title="shadow trees">シャドウツリー</a>は見えません。

    <p> <a data-link-type=dfn href=#host-element0 title="host element">ホスト要素</a>は、<strong>あらゆる手段</strong>でも選択できず、例外は<a
            class=css data-link-type=maybe href=#selectordef-host0 title=:host>:host</a>と<a class=css
            data-link-type=maybe href=#selectordef-host-context title=:host-context()>:host-context()</a>疑似クラスのみです。
        つまり、この文脈で<a data-link-type=dfn href=#shadow-host title="shadow host">シャドウホスト</a>はタグ名、ID、クラス、属性を持たず、追加情報は<a
            class=css data-link-type=maybe href=#selectordef-host0 title=:host>:host</a>疑似クラスが一致することだけです。
        特に、<a data-link-type=dfn href=#host-element0 title="host element">ホスト要素</a>は<span class=css data-link-type=maybe
            title=*>*</span>セレクタでもマッチしません。

    </p>
    <details class=why>
        <summary>なぜシャドウホストはこんなに特殊なのか？</summary>

        <p> <a data-link-type=dfn href=#shadow-host title="shadow host">シャドウホスト</a>は<a data-link-type=dfn
                href=#shadow-tree title="shadow tree">シャドウツリー</a>の外部に存在し、そのマークアップはコンポーネント作者ではなくページ作者の管理下にあります。

        <p> もしコンポーネントがシャドウツリー内で特定のクラス名を使い、ページ作者が偶然同じクラス名を<a data-link-type=dfn href=#host-element0
                title="host element">ホスト要素</a>に付けてしまった場合、コンポーネント作者が予想できず、ページ作者もデバッグが困難な、意図しないスタイリングが発生してしまいます。

        <p> とはいえ、<a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>内のスタイルシートが自分の<a
                data-link-type=dfn href=#host-element0 title="host element">ホスト要素</a>をスタイルしたい合理的なユースケースもあります。
            そのため、この状況を許容しつつ、意図しないスタイリングを防ぐために、<a data-link-type=dfn href=#host-element0
                title="host element">ホスト要素</a>はまったく特徴のないものとして現れ、<a class=css data-link-type=maybe
                href=#selectordef-host0 title=:host>:host</a>以外では選択できません。
    </details>


    <h3 class="heading settled heading" data-level=3.2 id=selectors><span class=secno>3.2 </span><span class=content>
            シャドウDOM用セレクタ</span><a class=self-link href=#selectors></a></h3>

    <p> Shadow DOMは、Shadow DOMに関係した要素を便利に選択できる新しいセレクタをいくつか定義しています。

    <p class=issue id=issue-dea392ae><a class=self-link href=#issue-dea392ae></a>
        このセクションはまだ議論中です。
        以下の機能の直感的な構文について、フィードバックや提案を歓迎します。

    <h4 class="heading settled heading" data-level=3.2.1 id=host-selector><span class=secno>3.2.1 </span><span
            class=content>
            ライト側の選択：<a class=css data-link-type=maybe href=#selectordef-host0 title=:host>:host</a>、<a class=css
                data-link-type=maybe href=#selectordef-host title=:host()>:host()</a>、<a class=css data-link-type=maybe
                href=#selectordef-host-context title=:host-context()>:host-context()</a>疑似クラス</span><a class=self-link
            href=#host-selector></a></h4>

    <p> <dfn class=css-code data-dfn-type=selector data-export="" id=selectordef-host0>:host<a class=self-link
                href=#selectordef-host0></a></dfn>疑似クラスは、<a data-link-type=dfn href=#shadow-tree
            title="shadow tree">シャドウツリー</a>の文脈で評価された場合、その<a data-link-type=dfn href=#shadow-tree
            title="shadow tree’s">シャドウツリー</a>の<a data-link-type=dfn href=#host-element0
            title="host element">ホスト要素</a>にマッチします。
        他の文脈では何にもマッチしません。

    <p> <dfn class=css-code data-dfn-type=selector data-export="" id=selectordef-host>:host()<a class=self-link
                href=#selectordef-host></a></dfn>関数疑似クラスの構文は次の通りです:

    <pre>:host( <a class="production css-code" data-link-type=type href="https://www.w3.org/TR/selectors4/#ltcompound-selector" title="<compound-selector>">&lt;compound-selector&gt;</a> )</pre>
    <p> <a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>の文脈で評価された場合、<a data-link-type=dfn
            href=#shadow-tree title="shadow tree’s">シャドウツリー</a>の<a data-link-type=dfn href=#host-element0
            title="host element">ホスト要素</a>が、通常の文脈でセレクタ引数にマッチした場合に一致します。
        それ以外の文脈では、何にもマッチしません。

    <div class=example>
        たとえば、次のような<a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>を持つコンポーネントがあるとします:

        <pre>  &lt;x-foo class="foo"&gt;
    &lt;"shadow tree"&gt;
      &lt;div class="foo"&gt;...&lt;/div&gt;
    &lt;/&gt;
  &lt;/x-foo&gt;
</pre>
        <p> <a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>内のスタイルシートでは:

        <p>
        <ul>
            <li><a class=css data-link-type=maybe href=#selectordef-host0
                    title=:host>:host</a>は<code>&lt;x-foo&gt;</code>要素にマッチします。
            <li><span class=css data-link-type=maybe title=x-foo>x-foo</span>は何にもマッチしません。
            <li><span class=css data-link-type=maybe title=.foo>.foo</span>は<code>&lt;div&gt;</code>要素のみにマッチします。
            <li><span class=css data-link-type=maybe title=.foo:host>.foo:host</span>は何にもマッチしません
            <li><span class=css data-link-type=maybe
                    title=:host(.foo)>:host(.foo)</span>は<code>&lt;x-foo&gt;</code>要素にマッチします。
        </ul>
    </div>

    <p> 通常、<a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>内のセレクタは、<a data-link-type=dfn
            href=#shadow-tree title="shadow tree">シャドウツリー</a>外の要素を参照できません。
        しかし、時にはシャドウツリーの外側で上位にある祖先要素を選択できると便利な場合があります。

    <div class=example>
        たとえば、複数のコンポーネントが、対応することを知っているカラーテーマをいくつか定義しているとします。
        ページ作者は、そのコンポーネントやさらに上位の要素に特定のクラスを追加することで、特定のテーマを選択できます。
    </div>

    <p> <dfn class=css-code data-dfn-type=selector data-export="" id=selectordef-host-context>:host-context()<a
                class=self-link href=#selectordef-host-context></a></dfn>関数疑似クラスは、シャドウツリー外に条件を満たす祖先が存在するかどうかを判定します。
        構文は次の通りです:

    <pre>:host-context( <a class="production css-code" data-link-type=type href="https://www.w3.org/TR/selectors4/#ltcompound-selector" title="<compound-selector>">&lt;compound-selector&gt;</a> )</pre>
    <p> <a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>の文脈で評価された場合、<a class=css
            data-link-type=maybe href=#selectordef-host-context title=:host-context()>:host-context()</a>疑似クラスは、<a
            data-link-type=dfn href=#host-element0 title="host element">ホスト要素</a>またはその祖先のいずれかが指定された<a
            class="production css-code" data-link-type=type href="https://www.w3.org/TR/selectors4/#ltcompound-selector"
            title="<compound-selector>">&lt;compound-selector&gt;</a>にマッチすれば、<a data-link-type=dfn href=#host-element0
            title="host element">ホスト要素</a>にマッチします。
        この疑似クラスにおける「祖先」は次の通りです:

    <dl>
        <dt>要素が<a data-link-type=dfn href=#distribution-list title="distribution list">配布リスト</a>に配布されている場合
        <dd>
            要素が最終的に配布される<a data-link-type=element title=content>content</a>要素。

        <dt>要素がシャドウツリー内の最上位要素である場合
        <dd>
            <a data-link-type=dfn href=#host-element0 title="host element">ホスト要素</a>

        <dt>それ以外の場合
        <dd>
            要素の親（存在すれば）。
    </dl>

    <p class=note> 注: これは、セレクタが引数にマッチする要素を探しながらシャドウ境界を貫通して上へたどり、ドキュメントルートに到達するまで繰り返すことを意味します。

    <h4 class="heading settled heading" data-level=3.2.2 id=shadow-pseudoelement><span class=secno>3.2.2 </span><span
            class=content>
            闇への選択：<a class=css data-link-type=maybe href=#selectordef-shadow title=::shadow>::shadow</a> 疑似要素</span><a
            class=self-link href=#shadow-pseudoelement></a></h4>

    <p> 要素が1つでも<a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>を持つ場合、<dfn class=css-code
            data-dfn-type=selector data-export="" id=selectordef-shadow>::shadow<a class=self-link
                href=#selectordef-shadow></a></dfn>疑似要素は<a data-link-type=dfn href=#shadow-root
            title="shadow roots">シャドウルート</a>自体にマッチします。
        HTMLにおいて、<a data-link-type=dfn href=#shadow-root title="shadow root">シャドウルート</a>は<a class=idl-code
            data-link-type=interface title=shadowroot>ShadowRoot</a>オブジェクトによって表現されます。

    <p> <a class=css data-link-type=maybe href=#selectordef-shadow
            title=::shadow>::shadow</a>疑似要素は、他の仕様で特に指定されていない限り、ボックスを生成してはなりません。
        ただし、セレクタの観点では、<a class=css data-link-type=maybe href=#selectordef-shadow title=::shadow>::shadow</a>疑似要素は<a
            data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>のルートと見なされ、<a data-link-type=dfn
            href=#shadow-tree title="shadow tree">シャドウツリー</a>内の<a data-link-type=dfn href=#top-level-element
            title="top-level elements">トップレベル要素</a>が<a class=css data-link-type=maybe href=#selectordef-shadow
            title=::shadow>::shadow</a>疑似要素の直接の子となります。

    <div class=example>
        例えば、次のような<a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>を持つコンポーネントがあったとします：

        <pre>  &lt;x-foo&gt;
    &lt;"shadow tree"&gt;
      &lt;div&gt;
        &lt;span id="not-top"&gt;...&lt;/span&gt;
      &lt;/div&gt;
      &lt;span id="top"&gt;...&lt;/span&gt;
    &lt;/&gt;
  &lt;/x-foo&gt;
</pre>
        <p> 外部ドキュメントのスタイルシートでは、
            <span class=css data-link-type=maybe title="x-foo::shadow > span">x-foo::shadow &gt; span</span>は
            <span class=css data-link-type=maybe title=#top>#top</span>にマッチしますが、
            <span class=css data-link-type=maybe title=#not-top>#not-top</span>にはマッチしません。
            これは、#not-topが<a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>の<a data-link-type=dfn
                href=#top-level-element title="top-level element">トップレベル要素</a>ではないためです。

        <p> <span class=css data-link-type=maybe title=#not-top>#not-top</span>を対象にしたい場合、<span class=css
                data-link-type=maybe title="x-foo::shadow > div > span">x-foo::shadow &gt; div &gt;
                span</span>などと書くこともできます。
            しかし、これはコンポーネントの内部構造に強く依存するため、通常は
            <span class=css data-link-type=maybe title="x-foo::shadow span">x-foo::shadow span</span>
            のように子孫結合子を使って、<a data-link-type=dfn href=#shadow-tree
                title="shadow tree">シャドウツリー</a>内のある型のすべての要素を選択する方が良いでしょう。
    </div>

    <div class=example>
        要素が複数の<a data-link-type=dfn href=#shadow-tree title="shadow trees">シャドウツリー</a>を持つ場合、
        <a class=css data-link-type=maybe href=#selectordef-shadow title=::shadow>::shadow</a>疑似要素は該当するすべての<a
            data-link-type=dfn href=#shadow-root title="shadow roots">シャドウルート</a>を選択します。

        <p> 同様に、<a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>内で
            <span class=css data-link-type=maybe title=":host::shadow div">:host::shadow div</span>
            のようなセレクタは、その要素上のすべての<a data-link-type=dfn href=#shadow-tree title="shadow trees">シャドウツリー</a>内の
            <a data-link-type=element href="https://www.w3.org/TR/html5/grouping-content.html#the-div-element"
                title=div>div</a>要素を選択し、
            そのセレクタを含むシャドウツリーだけでなく、すべてに適用されます。
    </div>



    <h4 class="heading settled heading" data-level=3.2.3 id=content-combinator><span class=secno>3.2.3 </span><span
            class=content>
            シャドウ投影コンテンツの選択：<a class=css data-link-type=maybe href=#selectordef-content title=::content>::content</a>
            疑似要素</span><a class=self-link href=#content-combinator></a></h4>

    <p> <dfn class=css-code data-dfn-type=selector data-export="" id=selectordef-content>::content<a class=self-link
                href=#selectordef-content></a></dfn>疑似要素は、<a data-link-type=dfn href=#distribution-list
            title="distribution list">配布リスト</a>を持つ要素において、その配布リスト自体にマッチします。

    <p class=issue id=issue-1b6118ae><a class=self-link href=#issue-1b6118ae></a>
        <a class=css data-link-type=maybe href=#selectordef-content
            title=::content>::content</a>は、シャドウツリーの投影コンテンツ専用であるにもかかわらず、やや一般的過ぎる名前です。

    <p> <a class=css data-link-type=maybe href=#selectordef-content
            title=::content>::content</a>疑似要素は、他の仕様で特に指定されていない限り、ボックスを生成してはなりません。
        ただし、セレクタの観点では、<a class=css data-link-type=maybe href=#selectordef-content title=::content>::content</a>疑似要素は、<a
            data-link-type=dfn href=#distribution-list title="distribution list">配布リスト</a>内の要素たちの親と見なされます。

    <div class=example>
        例えば、次のように子要素とシャドウツリーの両方を持つコンポーネントがあったとします：

        <pre>  &lt;x-foo&gt;
    &lt;div id="one" class="foo"&gt;...&lt;/div&gt;
    &lt;div id="two"&gt;...&lt;/div&gt;
    &lt;div id="three" class="foo"&gt;
      &lt;div id="four"&gt;...&lt;/div&gt;
    &lt;/div&gt;
    &lt;"shadow tree"&gt;
      &lt;div id="five"&gt;...&lt;/div&gt;
      &lt;div id="six"&gt;...&lt;/div&gt;
      &lt;content select=".foo"&gt;&lt;/content&gt;
    &lt;/"shadow tree"&gt;
  &lt;/x-foo&gt;
</pre>
        <p> <a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>内のスタイルシートでは、
            <span class=css data-link-type=maybe title="::content div">::content div</span>
            のようなセレクタは、<span class=css data-link-type=maybe title=#one>#one</span>、<span class=css data-link-type=maybe
                title=#three>#three</span>、および<span class=css data-link-type=maybe title=#four>#four</span>を選択します。
            これらは唯一の<a data-link-type=element title=content>content</a>要素によって配布されている要素だからです。一方で<span class=css
                data-link-type=maybe title=#two>#two</span>は選択されません。

        <p> <a data-link-type=dfn href=#top-level-element title="top-level elements">トップレベル要素</a>によって配布された<a
                data-link-type=element title=content>content</a>要素のみを対象にしたい場合は、<a data-link-type=dfn
                href="https://www.w3.org/TR/selectors4/#child-combinator"
                title="child combinator">子結合子</a>を使うことができます。たとえば <span class=css data-link-type=maybe
                title="::content > div">::content &gt; div</span> のように書くと、<span class=css data-link-type=maybe
                title=#four>#four</span> は<a class=css data-link-type=maybe href=#selectordef-content
                title=::content>::content</a>疑似要素の子と見なされないため除外されます。

        <p class=note> 注：<span class=css data-link-type=maybe title="::content div">::content
                div</span>のようなセレクタは、<span class=css data-link-type=maybe title="*::content div">*::content
                div</span>と等価です。
            <span class=css data-link-type=maybe title=*>*</span>はcontent要素以外も多く選択し得ますが、<a data-link-type=element
                title=content>content</a>要素だけが<a data-link-type=dfn href=#distribution-list
                title="distribution list">配布リスト</a>を持つため、実際に<a class=css data-link-type=maybe href=#selectordef-content
                title=::content>::content</a>疑似要素を持つのはcontent要素だけです。
    </div>


    <h4 class="heading settled heading" data-level=3.2.4 id=deep-combinator><span class=secno>3.2.4 </span><span
            class=content>
            シャドウ越しの選択：<a class=css data-link-type=maybe href=#selectordef-deep title=/deep>/deep/</a>結合子</span><a
            class=self-link href=#deep-combinator></a></h4>

    <p> セレクタ内で<dfn class=css-code data-dfn-type=selector data-export="" id=selectordef-deep>/deep/<a class=self-link
                href=#selectordef-deep></a></dfn>結合子が現れた場合、
        <a data-link-type=dfn href=http://dev.w3.org/csswg/selectors-4/#selector-match-list
            title="selector match list">セレクタマッチリスト</a>内のすべての要素を
        元の要素から子リストやシャドウツリーを任意回数たどって到達可能なすべての要素で置き換えます。

    <div class=example>
        例えば、次のような<a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>を持つコンポーネントがあったとします：

        <pre>  &lt;x-foo&gt;
    &lt;"shadow tree"&gt;
      &lt;div&gt;
        &lt;span id="not-top"&gt;...&lt;/span&gt;
      &lt;/div&gt;
      &lt;span id="top"&gt;...&lt;/span&gt;
      &lt;x-bar&gt;
        &lt;"shadow tree"&gt;
          &lt;span id="nested"&gt;...&lt;/span&gt;
        &lt;/&gt;
      &lt;/x-bar&gt;
    &lt;/&gt;
  &lt;/x-foo&gt;
</pre>
        <p> 外部ドキュメントのスタイルシートでは、
            <span class=css data-link-type=maybe title="x-foo /deep/ span">x-foo /deep/ span</span>
            のセレクタは、3つすべての<code>&lt;span&gt;</code>要素、
            <span class=css data-link-type=maybe title=#top>#top</span>、<span class=css data-link-type=maybe
                title=#not-top>#not-top</span>、および<em><span class=css data-link-type=maybe
                    title=#nested>#nested</span></em>を選択します。
    </div>

    <p class=issue id=issue-250ee37f><a class=self-link href=#issue-250ee37f></a>
        これは基本的にスーパー子孫結合子です。
        子孫結合子に本当の記号があれば、それを単純に2つ重ねるのも面白いかもしれません。
        子孫結合子に<code>&gt;&gt;</code>の別名をつけてもいいかもしれませんが、これはスーパー子結合子なのでしょうか？
        すると<a class=css data-link-type=maybe href=#selectordef-deep
            title=/deep>/deep/</a>は<code>&gt;&gt;&gt;</code>と書けるかもしれません。




    <h3 class="heading settled heading" data-level=3.3 id=shadow-cascading><span class=secno>3.3 </span><span
            class=content>
            シャドウのカスケードと継承</span><a class=self-link href=#shadow-cascading></a></h3>

    <h4 class="heading settled heading" data-level=3.3.1 id=cascading><span class=secno>3.3.1 </span><span
            class=content>
            カスケーディング</span><a class=self-link href=#cascading></a></h4>

    <p> シャドウルート内要素を対象とする規則の期待されるカスケード動作に対応するため、本仕様はカスケード仕様で定義された<a
            href=http://dev.w3.org/csswg/css-cascade/#cascading>カスケード順序</a>を拡張します。<a data-biblio-type=normative
            data-link-type=biblio href=#css3cascade title=css3cascade>[CSS3CASCADE]</a>

    <p> オリジンとスコープの間に「シャドウツリー」という追加のカスケード基準を挿入する必要があります。

    <p>
    <ul>
        <li>
            2つの宣言を比較する場合、
            片方が<a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>内にあり、もう片方がその<a data-link-type=dfn
                href=#shadow-tree title="shadow tree">シャドウツリー</a>を含むドキュメント内にあるとき、
            通常の規則では外部ドキュメント側の宣言が優先され、
            important規則では<a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>側の宣言が優先されます。

            <p class=note> 注：これはスコープ付きスタイルの挙動とは<em>逆</em>です。

        <li>
            2つの宣言が、同じ<a data-link-type=dfn href=#host-element0 title="host element">ホスト要素</a>を持つ<a data-link-type=dfn
                href=#shadow-tree title="shadow trees">シャドウツリー</a>内にある場合、
            通常の規則では、より新しく作成された<a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>側の宣言が優先され、
            important規則では、より古く作成された<a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>側の宣言が優先されます。
    </ul>

    <p> <a href=http://dev.w3.org/csswg/css-cascade/#cascade-order>出現順</a>の計算時には、Shadow DOM仕様で定義されたツリー構造を使って順序を決定します。

    <h4 class="heading settled heading" data-level=3.3.2 id=inheritance><span class=secno>3.3.2 </span><span
            class=content>
            継承</span><a class=self-link href=#inheritance></a></h4>

    <p> <a data-link-type=dfn href=#shadow-tree title="shadow tree">シャドウツリー</a>の<a data-link-type=dfn
            href=#top-level-element title="top-level elements">トップレベル要素</a>は、自身の<a data-link-type=dfn
            href=#host-element0 title="host element">ホスト要素</a>から継承します。

    <p> <a data-link-type=dfn href=#distribution-list title="distribution list">配布リスト</a>内の要素は、最終的に配布される<a
            data-link-type=element title=content>content</a>要素の親から継承し、通常の親からは継承しません。


    <h2 class="heading settled heading" data-level=4 id=fragment-scoping><span class=secno>4 </span><span class=content>
            フラグメントスタイリング</span><a class=self-link href=#fragment-scoping></a></h2>

    <p> フラグメント化されたコンテンツは、その出現する行・列・ページ・領域などに応じて異なるスタイルを適用できます。
        これは、適切な<dfn data-dfn-type=dfn data-export="" id=fragment-pseudo-element>フラグメント疑似要素<a class=self-link
                href=#fragment-pseudo-element></a></dfn>を使うことで実現でき、要素全体ではなく個々のフラグメントをターゲットできます。

    <div class=example>
        例として、デザイナーは
        #region1
        に流し込まれたテキストをダークブルーかつ太字にしたいと考えています。
        このデザインは以下のように記述できます。

        <pre>#region1::region p {
  color: #0C3D5F;
  font-weight: bold;
}
</pre>
        <p> この例では、<span class=css data-link-type=maybe title=::region>::region</span>疑似要素の後に<span class=css
                data-link-type=maybe title=p>p</span>の相対セレクタが来ています。
            color および font-weight の宣言は、<span class=css data-link-type=maybe
                title=#region1>#region1</span>内に表示される段落のフラグメントすべてに適用されます。
            次の図は、<span class=css data-link-type=maybe title=#region1>#region1</span>専用のスタイルを適用した場合のレンダリングの違いを示しています。
            <a class=property data-link-type=propdesc href="https://www.w3.org/TR/css-fonts-3/#propdef-font-weight"
                title=font-weight>font-weight</a>がnormalではなくboldになったことで、
            このボックスに入るテキスト量が減ったことに注目してください。
        </p>

        <figure>
            <img alt="領域のスタイルを変えることでコンテンツの流れがどう変化するかを示す図"
                src=https://www.w3.org/TR/css-scoping-1/images/region-styling.png width=450>

            <figcaption>異なる領域スタイリングによる異なる描画</figcaption>
        </figure>
    </div>

    <p class=note> 注：この機能は<span class=css data-link-type=maybe title=::first-line>::first-line</span>スタイリングの拡張です。

    <h3 class="heading settled heading" data-level=4.1 id=the-region-pseudo-element><span class=secno>4.1 </span><span
            class=content>
            領域ベースのスタイリング：<span class=css data-link-type=maybe title=::region>::region</span>
            疑似要素</span><a class=self-link href=#the-region-pseudo-element></a></h3>

    <div class=issue id=issue-f778a2c0><a class=self-link href=#issue-f778a2c0></a>
        これを以下を指定するよう拡張する:
        <ul>
            <li><span class=css data-link-type=maybe
                    title="<region-element-selector>::region">&lt;region-element-selector&gt;::region</span>
            <li><span class=css data-link-type=maybe
                    title="<paginated-element-selector>::page(<page-selector>)">&lt;paginated-element-selector&gt;::page(&lt;page-selector&gt;)</span>
            <li><span class=css data-link-type=maybe
                    title="<multicol-element>::column(<anb>)">&lt;multicol-element&gt;::column(&lt;AnB&gt;)</span>
            <li><span class=css data-link-type=maybe
                    title="<fragmented-element-selector>::nth-fragment(<anb>)">&lt;fragmented-element-selector&gt;::nth-fragment(&lt;AnB&gt;)</span>
            <li><span class=css data-link-type=maybe title=::first-line>::first-line</span>
        </ul>
    </div>

    <p>::region 疑似要素は、<span>CSS Region</span>にマッチするセレクタと、特定の名前付きフロー内のコンテンツのフラグメントにマッチする相対セレクタとの関係を表します。
        これにより、特定の領域に流れ込む名前付きフローのフラグメントに対してスタイル宣言を適用できます。</p>

    <pre>&lt;region selector&gt;::region &lt;content selector&gt;  {
    ... CSS styling declarations ...
}
</pre>
    <p>::region 疑似要素が1つ以上の<span title="CSS Region">CSS Regions</span>にマッチする
        <a href="https://www.w3.org/TR/css3-selectors/#selector-syntax">セレクタ</a>に付加されると、
        これは「フローフラグメント」セレクタを作成します。
        フローフラグメントセレクタは、相対セレクタがマッチできるフロー内の要素の範囲を指定します。
        相対セレクタは、選択された領域に部分的または完全に表示される名前付きフローの範囲内の要素にマッチできます（詳細は<a data-biblio-type=normative data-link-type=biblio
            href=#dom title=dom>[DOM]</a>を参照）。
    </p>

    <p>フローフラグメント範囲に部分的または完全に含まれる要素は、相対セレクタにマッチする可能性があります。
        ただし、スタイル宣言は対応する領域に表示されるその要素のフラグメントにのみ適用されます。</p>

    <p>::region 疑似要素に適用されるプロパティは限定されたリストのみです：</p>

    <p class=issue id=issue-9b00b7af><a class=self-link href=#issue-9b00b7af></a>
        このリストは機能的に継承可能なすべてのプロパティ、あるいはすべてのプロパティであるべきです。
        なぜボックスプロパティを含むような、任意に見える部分集合なのか？</p>

    <ol>
        <li><a href="https://www.w3.org/TR/CSS2/fonts.html">フォントプロパティ</a></li>
        <li><a href="https://www.w3.org/TR/CSS2/colors.html">color プロパティ</a></li>
        <li><a href="https://www.w3.org/TR/css3-color/#transparency">opacity プロパティ</a></li>
        <li><a href="https://www.w3.org/TR/css3-background/#backgrounds">background プロパティ</a></li>
        <li><a class=property data-link-type=propdesc href="https://www.w3.org/TR/css3-text/#word-spacing"
                title=word-spacing>word-spacing</a></li>
        <li><a class=property data-link-type=propdesc href="https://www.w3.org/TR/css3-text/#letter-spacing"
                title=letter-spacing>letter-spacing</a></li>
        <li><a class=property data-link-type=propdesc href="https://www.w3.org/TR/css-text-decor-3/#text-decoration"
                title=text-decoration>text-decoration</a></li>
        <li><a class=property data-link-type=propdesc href="https://www.w3.org/TR/css3-text/#text-transform"
                title=text-transform>text-transform</a></li>
        <li><a class=property data-link-type=propdesc
                href="https://www.w3.org/TR/CSS21/visudet.html#propdef-line-height" title=line-height>line-height</a>
        </li>
        <li><a href="https://www.w3.org/TR/css3-text/#justification">整列および整形プロパティ</a></li>
        <li><a href="https://www.w3.org/TR/css3-background/#borders">border プロパティ</a></li>
        <li><a href="https://www.w3.org/TR/css3-background/#corners">角丸プロパティ</a></li>
        <li><a href="https://www.w3.org/TR/css3-background/#border-images">border-image プロパティ</a></li>
        <li><a href="https://www.w3.org/TR/CSS2/box.html#margin-properties">margin プロパティ</a></li>
        <li><a href="https://www.w3.org/TR/CSS2/box.html#padding-properties">padding プロパティ</a></li>
        <li><a class=property data-link-type=propdesc href="https://www.w3.org/TR/css-text-decor-3/#text-shadow"
                title=text-shadow>text-shadow</a></li>
        <li><a class=property data-link-type=propdesc href="https://www.w3.org/TR/css3-background/#box-shadow"
                title=box-shadow>box-shadow</a></li>
        <li><a class=property data-link-type=propdesc href="https://www.w3.org/TR/css3-break/#box-decoration-break"
                title=box-decoration-break>box-decoration-break</a></li>
        <li><a class=property data-link-type=propdesc href="https://www.w3.org/TR/CSS21/visudet.html#propdef-width"
                title=width>width</a></li>
    </ol>

    <div class=example id=region-style-example><a class=self-link href=#region-style-example></a>
        <p>次の例では、名前付きフロー “article-flow” が “region-1” と “region-2” に流れ込みます。</p>
        <pre>&lt;style&gt;
  #div-1 {
    <strong>flow-into: article-flow;</strong>
  }

  #region-1, #region-2 {
    <strong>flow-from: article-flow;</strong>
  }

  /* region styling */
  <strong>#region-1::region p </strong> {
    margin-right: 5em;
  }
&lt;/style&gt;

&lt;body&gt;
  &lt;div id="div-1"&gt;
      &lt;p id="p-1"&gt;...&lt;/p&gt;
      &lt;p id="p-2"&gt;...&lt;/p&gt;
  &lt;/div&gt;
  &lt;div id="region-1"&gt;&lt;/div&gt;
  &lt;div id="region-2"&gt;&lt;/div&gt;
&lt;/body&gt;
</pre>
        <div id=region_styling_illustration>
            <img alt="Example showing how a named flow content fits into regions to illustrate region styling."
                id=region_styling_img_2 src=https://www.w3.org/TR/css-scoping-1/images/region-styling-2.png>

            <p>
            <ul class=swatch-list>
                <li><span class=swatch style=background:#1C75BC> </span>div div-1</li>

                <li><span class=swatch style=background:crimson> </span>paragraph p-1</li>

                <li><span class=swatch style=background:white> </span>paragraph p-2</li>

                <li><span class=swatch style=background:#E6E7E8> </span>region-1 に収まるフローの範囲</li>

                <li><span class=swatch style=background:#BCBEC0> </span>region-2 に収まるフローの範囲</li>
            </ul>
        </div>

        <p>領域スタイリングは、<span class=css data-link-type=maybe title=region-1>region-1</span> に収まるフローコンテンツに適用されます。
            相対セレクタは、これらの段落が <span class=css data-link-type=maybe title=region-1>region-1</span> に流れ込むため、
            <span class=css data-link-type=maybe title=p-1>p-1</span> と <span class=css data-link-type=maybe
                title=p-2>p-2</span> にマッチします。
            <span class=css data-link-type=maybe title=p-2>p-2</span> のうち <span class=css data-link-type=maybe
                title=region-1>region-1</span> に流れ込むフラグメントだけが疑似要素によってスタイルされます。
        </p>
    </div>

    <p>::region 疑似要素内のすべてのセレクタはその<a href="https://www.w3.org/TR/css3-selectors/#specificity">特異性</a>に寄与します。
        したがって、上の例の ::region 疑似要素の特異性は、id セレクタの特異性と型セレクタの特異性を組み合わせた、101 になります。</p>

    <p>特定の要素または要素フラグメントにマッチするセレクタ（上記の説明に従う）は、
        <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/cascade.html#cascading-order">CSS カスケーディング順序</a>（<a
            data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>で定義）に従って扱われます。
    </p>

    <div>
        領域スタイリングはネストした領域には適用されません。例えば、ある領域 <span class=css data-link-type=maybe title=a>A</span> が、領域 <span class=css
            data-link-type=maybe title=b>B</span> を含むフローからコンテンツを受け取る場合、<span class=css data-link-type=maybe
            title=b>B</span> に流れ込むコンテンツは、領域 <span class=css data-link-type=maybe title=a>A</span>
        のために指定された領域スタイリングを受けません。
    </div>

    <p class=issue id=issue-5bff6297><a class=self-link href=#issue-5bff6297></a>
        特定の領域におけるフラグメントのスタイルを照会する方法が必要になります。
        <code>getComputedStyle()</code> だけでは不十分です。
        なぜなら要素は複数の領域に存在し得て、それぞれのフラグメントが異なるスタイルを受ける可能性があるからです。
    </p>

    <h2 class="no-ref no-num heading settled heading" id=conformance><span class=content>
            適合性</span><a class=self-link href=#conformance></a></h2>

    <h3 class="no-ref heading settled heading" id=conventions><span class=content>
            文書の記法</span><a class=self-link href=#conventions></a></h3>

    <p>適合要件は、記述的な主張と RFC 2119 用語の組み合わせで表現されます。規範部分におけるキーワード "MUST"、"MUST NOT"、"REQUIRED"、"SHALL"、"SHALL
        NOT"、"SHOULD"、"SHOULD NOT"、"RECOMMENDED"、"MAY"、および "OPTIONAL" は RFC 2119 に従って解釈されます。
        ただし、可読性のために本仕様ではこれらの語をすべて大文字で表記していない場合があります。</p>

    <p>この仕様の本文は、明示的に非規範とマークされた節、例、およびノートを除き、すべて規範的です。<a data-biblio-type=normative data-link-type=biblio href=#rfc2119
            title=rfc2119>[RFC2119]</a></p>

    <p>本仕様の例は "for example" という語で導入されるか、または規範テキストから <code>class="example"</code> で区別されます。次のように:</p>

    <div class=example>
        <p>これは情報的な例の例です。</p>
    </div>

    <p>情報的なノートは "Note" という語で始まり、<code>class="note"</code> で規範テキストと区別されます。</p>

    <p class=note>注：これは情報的なノートです。</p>

    <h3 class="no-ref heading settled heading" id=conformance-classes><span class=content>
            適合クラス</span><a class=self-link href=#conformance-classes></a></h3>

    <p>本仕様への適合性は3つの適合クラスで定義されます：
    <dl>
        <dt>style sheet
        <dd> <a href="https://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS style sheet</a>。
        <dt>renderer
        <dd> スタイルシートの意味を解釈し、文書をレンダリングする <a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>。
        <dt>authoring tool
        <dd> スタイルシートを書く <a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>。
    </dl>

    <p>スタイルシートは、本モジュールで定義された構文を使用するすべての記述が、汎用の CSS 文法および各機能の個別文法に従って有効である場合、本仕様に適合します。</p>

    <p>レンダラーは、適切な仕様によって定義された通りにスタイルシートを解釈することに加えて、本仕様で定義されたすべての機能を解析して正しくレンダリングすることで、本仕様に適合します。ただし、機器の制限により文書を正しくレンダリングできないことは、UA
        を非適合にしません（例えば、モノクロモニタで色をレンダリングする必要はありません）。</p>

    <p>オーサリングツールは、本モジュール内の各機能の汎用 CSS 文法および個別文法に従って構文的に正しいスタイルシートを書き、本モジュールで説明されたスタイルシートの適合要件を満たす場合に本仕様に適合します。</p>

    <h3 class="no-ref heading settled heading" id=partial><span class=content>
            部分的な実装</span><a class=self-link href=#partial></a></h3>

    <p>著者がフォワードコンパチブルなパース規則を利用してフォールバック値を割り当てられるように、CSS レンダラーはサポートがない
        at-rule、プロパティ、プロパティ値、キーワード、その他構文構成を無効として扱い（適切に無視する）必要があります。特に、UA
        はサポートされていない構成値を部分的に無視して、同じ多値プロパティ宣言内のサポートされている値だけを適用してはなりません：いずれかの値が無効と見なされる場合、CSS はその宣言全体を無視することを要求します。</p>

    <h3 class="no-ref heading settled heading" id=experimental><span class=content>
            実験的な実装</span><a class=self-link href=#experimental></a></h3>

    <p>将来の CSS 機能との衝突を避けるため、CSS2.1 仕様はプロプライエタリおよび実験的拡張のためにプレフィックス付き構文を予約しています。</p>

    <p>仕様が W3C の Candidate Recommendation ステージに達する前は、CSS 機能のすべての実装は実験的と見なされます。CSS
        作業部会は、実装者に対してワーキングドラフトの機能を含むような実験的機能についてはベンダープレフィックス付き構文を使用することを推奨します。これにより、ドラフトの将来の変更による非互換を回避できます。</p>

    <h3 class="no-ref heading settled heading" id=testing><span class=content>
            非実験的な実装</span><a class=self-link href=#testing></a></h3>

    <p>仕様が Candidate Recommendation ステージに達すると、非実験的な実装が可能になり、実装者は CR レベルの機能を仕様に従って正しく実装したことを示せる場合、プレフィックスなしの実装を公開するべきです。
    </p>

    <p>CSS の相互運用性を確立・維持するため、CSS 作業部会は非実験的な CSS レンダラーがプレフィックスなし実装を公開する前に実装レポート（必要ならその実装レポートに使用したテストケース）を W3C
        に提出することを要請します。W3C に提出されたテストケースは、CSS 作業部会によるレビューと修正の対象となります。</p>

    <p>テストケースと実装レポートの提出に関する詳しい情報は、CSS 作業部会のウェブサイト（<a
            href="https://www.w3.org/Style/CSS/Test/">http://www.w3.org/Style/CSS/Test/</a>）を参照してください。質問は <a
            href=http://lists.w3.org/Archives/Public/public-css-testsuite>public-css-testsuite@w3.org</a> 宛てに行ってください。
    </p>

    <h2 class="no-num no-ref heading settled heading" id=references><span class=content>
            参考文献</span><a class=self-link href=#references></a></h2>

    <h3 class="no-num no-ref heading settled heading" id=normative><span class=content>
            規範的参考文献</span><a class=self-link href=#normative></a></h3>
    <div data-fill-with=normative-references>
        <dl>
            <dt id=css21 title=CSS21><a class=self-link href=#css21></a>[CSS21]
            <dd>Bert Bos; et al. <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607">Cascading Style Sheets Level 2
                    Revision 1 (CSS 2.1) Specification</a>. 7 June 2011. W3C Recommendation. URL: <a
                    href="https://www.w3.org/TR/2011/REC-CSS2-20110607">http://www.w3.org/TR/2011/REC-CSS2-20110607</a>
            <dt id=css3cascade title=CSS3CASCADE><a class=self-link href=#css3cascade></a>[CSS3CASCADE]
            <dd>Håkon Wium Lie; Elika J. Etemad; Tab Atkins Jr.. <a
                    href="https://www.w3.org/TR/2013/CR-css-cascade-3-20131003/">CSS Cascading and Inheritance Level
                    3</a>. 3 October 2013. W3C Candidate Recommendation. (Work in progress.) URL: <a
                    href="https://www.w3.org/TR/2013/CR-css-cascade-3-20131003/">http://www.w3.org/TR/2013/CR-css-cascade-3-20131003/</a>
            <dt id=dom title=DOM><a class=self-link href=#dom></a>[DOM]
            <dd>Anne van Kesteren; Aryeh Gregor; Ms2ger. <a href="https://dom.spec.whatwg.org/">DOM Living Standard</a>.
                WHATWG Living Standard. (Work in progress.) URL: <a
                    href="https://dom.spec.whatwg.org/">http://dom.spec.whatwg.org/</a>
            <dt id=rfc2119 title=RFC2119><a class=self-link href=#rfc2119></a>[RFC2119]
            <dd>S. Bradner. <a href=http://www.ietf.org/rfc/rfc2119.txt>Key words for use in RFCs to Indicate
                    Requirement Levels</a>. URL: <a
                    href=http://www.ietf.org/rfc/rfc2119.txt>http://www.ietf.org/rfc/rfc2119.txt</a>
        </dl>
    </div>

    <h3 class="no-num no-ref heading settled heading" id=informative><span class=content>
            参考的参考文献</span><a class=self-link href=#informative></a></h3>
    <div data-fill-with=informative-references>
        <dl>
            <dt id=html title=HTML><a class=self-link href=#html></a>[HTML]
            <dd>Ian Hickson. <a href="https://www.whatwg.org/specs/web-apps/current-work/multipage/">HTML</a>. Living
                Standard. URL: <a
                    href="https://www.whatwg.org/specs/web-apps/current-work/multipage/">http://www.whatwg.org/specs/web-apps/current-work/multipage/</a>
            <dt id=selectors4 title=SELECTORS4><a class=self-link href=#selectors4></a>[SELECTORS4]
            <dd>Elika J. Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/2013/WD-selectors4-20130502/">Selectors
                    Level 4</a>. 2 May 2013. W3C Working Draft. (Work in progress.) URL: <a
                    href="https://www.w3.org/TR/2013/WD-selectors4-20130502/">http://www.w3.org/TR/2013/WD-selectors4-20130502/</a>
        </dl>
    </div>

    <h2 class="no-num no-ref heading settled heading" id=index><span class=content>
            索引</span><a class=self-link href=#index></a></h2>
    <div data-fill-with=index>
        <ul class=indexlist>
            <li>active shadow tree, <a href=#active-shadow-tree title="section 3">3</a>
            <li>::content, <a href=#selectordef-content title="section 3.2.3">3.2.3</a>
            <li>/deep/, <a href=#selectordef-deep title="section 3.2.4">3.2.4</a>
            <li>distribution list, <a href=#distribution-list title="section 3">3</a>
            <li>fragment pseudo-element, <a href=#fragment-pseudo-element title="section 4">4</a>
            <li>:host(), <a href=#selectordef-host title="section 3.2.1">3.2.1</a>
            <li>:host, <a href=#selectordef-host0 title="section 3.2.1">3.2.1</a>
            <li>:host-context(), <a href=#selectordef-host-context title="section 3.2.1">3.2.1</a>
            <li>host element, <a href=#host-element0 title="section 3">3</a>
            <li>insertion point, <a href=#insertion-point title="section 3">3</a>
            <li>@scope, <a href=#at-ruledef-scope title="section 2.1.2">2.1.2</a>
            <li>::shadow, <a href=#selectordef-shadow title="section 3.2.2">3.2.2</a>
            <li>shadow host, <a href=#shadow-host title="section 3">3</a>
            <li>shadow root, <a href=#shadow-root title="section 3">3</a>
            <li>shadow tree, <a href=#shadow-tree title="section 3">3</a>
            <li>top-level element, <a href=#top-level-element title="section 3">3</a>
        </ul>
    </div>

    <h2 class="no-num no-ref heading settled heading" id=property-index><span class=content>
            プロパティ索引</span><a class=self-link href=#property-index></a></h2>
    <div data-fill-with=property-index>
        <p>定義されたプロパティはありません。
    </div>


    <h2 class="no-num heading settled" id=issues-index><span class=content>課題索引</span><a class=self-link
            href=#issues-index></a></h2>
    <div style="counter-reset: issue">
        <div class=issue>
            この規則により、著者がスコープ付きスタイルシートを非常に簡単に作成できるため、スコープ付きスタイルの実装における最適化戦略へ影響する可能性があります。

            <a href=#issue-5f568f10> ↵ </a>
        </div>
        <div class=issue>
            複数の <a class=css data-link-type=maybe href=#at-ruledef-scope title=@scope>@scope</a>
            規則が要素に適用された場合、それらは詳細度でカスケードされるべきでしょうか？

            <a href=#issue-5c7571b6> ↵ </a>
        </div>
        <div class=issue>
            これは <a class=css data-link-type=maybe href=#selectordef-host-context
                title=:host-context()>:host-context()</a> に似た定義になりますが、<a data-link-type=dfn
                href=http://dev.w3.org/csswg/selectors-4/#scoping-root title="scoping root">スコーピングルート</a>の祖先にマッチします。

            <p> しかし、スコープ付きスタイルシートでは外部ツリーに対して複雑なセレクタをマッチさせたい場合もあるため、要素の順序を構文的に反転させない、より一般的な仕組みを代わりに使うべきかもしれません。

            <p> 考えられる案:

            <pre>:scope-context(<a class="production css-code" data-link-type=type href="https://www.w3.org/TR/selectors4/#ltselector" title="<selector>">&lt;selector&gt;</a>) div {...}
scope(<a class="production css-code" data-link-type=type href="https://www.w3.org/TR/selectors4/#ltselector" title="<selector>">&lt;selector&gt;</a>) div {...}
\scope <a class="production css-code" data-link-type=type href="https://www.w3.org/TR/selectors4/#ltselector" title="<selector>">&lt;selector&gt;</a>\ div {...}
<a class="production css-code" data-link-type=type href="https://www.w3.org/TR/selectors4/#ltselector" title="<selector>">&lt;selector&gt;</a> \scope\ div {...}
</pre>
            <p> この機能は、セレクタとしては適切でない <span class=css data-link-type=maybe title=@global>@global</span> を置き換えることになります。
            </p><a href=#issue-aecbd194> ↵ </a>
        </div>

        <div class=issue>
            このセクションはまだ議論中です。
            以下の機能の直感的な構文についてのフィードバックや助言を歓迎します。

            <a href=#issue-dea392ae> ↵ </a>
        </div>
        <div class=issue>
            <a class=css data-link-type=maybe href=#selectordef-content title=::content>::content</a> は、
            シャドウツリーの投影コンテンツに特有のものであるにもかかわらず、やや一般的すぎる名前です。

            <a href=#issue-1b6118ae> ↵ </a>
        </div>
        <div class=issue>
            これは基本的にスーパー子孫結合子です。
            子孫結合子に本当の記号があれば、それを単純に2つ重ねるのも面白いかもしれません。
            子孫結合子に <code>&gt;&gt;</code> の別名をつけることも考えられますが、そうすると <a class=css data-link-type=maybe
                href=#selectordef-deep title=/deep>/deep/</a> は <code>&gt;&gt;&gt;</code> と書けるかもしれません。




            <a href=#issue-250ee37f> ↵ </a>
        </div>
        <div class=issue>
            これを指定するよう拡張する:
            <ul>
                <li><span class=css data-link-type=maybe
                        title="<region-element-selector>::region">&lt;region-element-selector&gt;::region</span>
                <li><span class=css data-link-type=maybe
                        title="<paginated-element-selector>::page(<page-selector>)">&lt;paginated-element-selector&gt;::page(&lt;page-selector&gt;)</span>
                <li><span class=css data-link-type=maybe
                        title="<multicol-element>::column(<anb>)">&lt;multicol-element&gt;::column(&lt;AnB&gt;)</span>
                <li><span class=css data-link-type=maybe
                        title="<fragmented-element-selector>::nth-fragment(<anb>)">&lt;fragmented-element-selector&gt;::nth-fragment(&lt;AnB&gt;)</span>
                <li><span class=css data-link-type=maybe title=::first-line>::first-line</span>
            </ul>
            <a href=#issue-f778a2c0> ↵ </a>
        </div>

        <div class=issue>
            このリストは機能的に継承可能なすべてのプロパティ、またはすべてのプロパティであるべきです。
            なぜボックスプロパティを含むような任意に見える部分集合なのか？

            <a href=#issue-9b00b7af> ↵ </a>
        </div>
        <div class=issue>
            特定の領域におけるフラグメントのスタイルを照会する方法が必要になります。
            <code>getComputedStyle()</code> だけでは不十分です。
            なぜなら要素は複数の領域に存在し得て、それぞれのフラグメントが異なるスタイルを受ける可能性があるからです。

            <a href=#issue-5bff6297> ↵ </a>
        </div>
    </div>
    <script src="https://www.w3.org/scripts/TR/fixup.js"></script>
    <script src="https://htmlspecs.com/dropdown.js"></script>