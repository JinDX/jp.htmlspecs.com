<!doctype html>
<html lang="ja-JP">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <title>CSS条件規則モジュール レベル4</title>
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta content="exploring" name="csswg-work-status">
    <meta content="CR" name="w3c-status">
    <meta
        content="このモジュールは、スタイルシートの一部をプロセッサやスタイルシートが適用される環境の機能に基づいて条件付きで処理するCSSの機能を含みます。CSS Conditional 3 [[!css-conditional-3]] の機能を含み、さらに拡張しています。新たな「selector()」記法による[=supports queries=]で特定のセレクターのサポート可否を問い合わせる機能 [[SELECTORS-4]] を追加しています。"
        name="abstract">
    <link href="default.css" rel="stylesheet" type="text/css">
    <meta content="Bikeshed version cace53f8c, updated Tue Dec 7 12:12:54 2021 -0800" name="generator">
    <link href="https://www.w3.org/TR/css-conditional-4/" rel="canonical">
    <meta content="7d62867f3ebbe2edb45f85f06902ab6e4d6acd76" name="document-revision">
    <style>
        /* style-autolinks */

        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }
    </style>
    <style>
        /* style-counters */

        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* style-dfn-panel */

        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0;
        }

        .dfn-panel li {
            list-style: inside;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled {
            cursor: pointer;
        }
    </style>
    <style>
        /* style-issues */

        a[href].issue-return {
            float: right;
            float: inline-end;
            color: var(--issueheading-text);
            font-weight: bold;
            text-decoration: none;
        }
    </style>
    <style>
        /* style-md-lists */

        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* style-selflinks */

        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* style-syntax-highlighting */

        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        .highlight:not(.idl) {
            background: rgba(0, 0, 0, .03);
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */
    </style>
    <style>
        /* style-wpt */

        :root {
            --wpt-border: hsl(0, 0%, 60%);
            --wpt-bg: hsl(0, 0%, 95%);
            --wpt-text: var(--text);
            --wptheading-text: hsl(0, 0%, 30%);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --wpt-border: hsl(0, 0%, 30%);
                --wpt-bg: var(--borderedblock-bg);
                --wpt-text: var(--text);
                --wptheading-text: hsl(0, 0%, 60%);
            }
        }

        .wpt-tests-block {
            list-style: none;
            border-left: .5em solid var(--wpt-border);
            background: var(--wpt-bg);
            color: var(--wpt-text);
            margin: 1em auto;
            padding: .5em;
        }

        .wpt-tests-block summary {
            color: var(--wptheading-text);
            font-weight: normal;
            text-transform: uppercase;
        }

        .wpt-tests-block summary::marker {
            color: var(--wpt-border);
        }

        .wpt-tests-block summary:hover::marker {
            color: var(--wpt-text);
        }

        /*
   The only content  of a wpt test block in its closed state is the <summary>,
   which contains the word TESTS,
   and that is absolutely positioned.
   In that closed state, wpt test blocks are styled
   to have a top margin whose height is exactly equal
   to the height of the absolutely positioned <summary>,
   and no other background/padding/margin/border.
   The wpt test block elements will therefore allow the maring
   of the previous/next block elements
   to collapse through them;
   if this combined margin would be larger than its own top margin,
   it stays as is,
   and therefore the pre-existing vertical rhythm of the document is undisturbed.
   If that combined margin would be smaller, it is grown to that size.
   This means that the wpt test block ensures
   that there's always enough vertical space to insert the summary,
   without adding more than is needed.
*/
        .wpt-tests-block:not([open]) {
            padding: 0;
            border: none;
            background: none;
            font-size: 0.75em;
            line-height: 1;
            position: relative;
            margin: 1em 0 0;
        }

        .wpt-tests-block:not([open]) summary {
            position: absolute;
            right: 0;
            bottom: 0;
        }

        /*
   It is possible that both the last child of a block element
   and the block element itself
   would be annotated with a <wpt> block each.
   If the block element has a padding or a border,
   that's fine, but otherwise
   the bottom margin of the block and of its last child would collapse
   and both <wpt> elements would overlap, being both placed there.
   To avoid that, add 1px of padding to the <wpt> element annotating the last child
   to prevent the bottom margin of the block and of its last child from collapsing
   (and as much negative margin,
   as wel only want to prevent margin collapsing,
   but are not trying to actually take more space).
*/
        .wpt-tests-block:not([open]):last-child {
            padding-bottom: 1px;
            margin-bottom: -1px;
        }

        /*
   Exception to the previous rule:
   don't do that in non-last list items,
   because it's not necessary,
   and would therefore consume more space than strictly needed.
   Lists must have list items as children, not <wpt> elements,
   so a <wpt> element cannot be a sibling of a list item,
   and the collision that the previous rule avoids cannot happen.
*/
        li:not(:last-child)>.wpt-tests-block:not([open]):last-child,
        dd:not(:last-child)>.wpt-tests-block:not([open]):last-child {
            padding-bottom: 0;
            margin-bottom: 0;
        }

        .wpt-tests-block:not([open]):not(:hover) {
            opacity: 0.5;
        }

        .wpt-tests-list {
            list-style: none;
            display: grid;
            margin: 0;
            padding: 0;
            grid-template-columns: 1fr max-content auto auto;
            grid-column-gap: .5em;
        }

        .wpt-tests-block hr:last-child {
            display: none;
        }

        .wpt-test {
            display: contents;
        }

        .wpt-test>a {
            text-decoration: underline;
            border: none;
        }

        .wpt-test>.wpt-name {
            grid-column: 1;
        }

        .wpt-test>.wpt-results {
            grid-column: 2;
        }

        .wpt-test>.wpt-live {
            grid-column: 3;
        }

        .wpt-test>.wpt-source {
            grid-column: 4;
        }

        .wpt-test>.wpt-results {
            display: flex;
            gap: .1em;
        }

        .wpt-test .wpt-result {
            display: inline-block;
            height: 1em;
            width: 1em;
            border-radius: 50%;
            position: relative;
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-CR" rel="stylesheet" type="text/css">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
        <h1 class="p-name no-ref" id="title">CSS条件規則モジュール レベル4</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#CR">W3C 勧告候補スナップショット</a>,
            <time class="dt-updated" datetime="2022-02-17">2022年2月17日</time>
        </p>
        <details open>
            <summary>この文書の詳細情報</summary>
            <div data-fill-with="spec-metadata">
                <dl>
                    <dt>このバージョン:
                    <dd><a class="u-url"
                            href="https://www.w3.org/TR/2022/CR-css-conditional-4-20220217/">https://www.w3.org/TR/2022/CR-css-conditional-4-20220217/</a>
                    <dt>最新版:
                    <dd><a href="https://www.w3.org/TR/css-conditional-4/">https://www.w3.org/TR/css-conditional-4/</a>
                    <dt>編集者草案:
                    <dd><a
                            href="https://drafts.csswg.org/css-conditional-4/">https://drafts.csswg.org/css-conditional-4/</a>
                    <dt>過去のバージョン:
                    <dd><a href="https://www.w3.org/TR/2021/WD-css-conditional-4-20211225/"
                            rel="prev">https://www.w3.org/TR/2021/WD-css-conditional-4-20211225/</a>
                    <dt>履歴:
                    <dd><a class="u-url"
                            href="https://www.w3.org/standards/history/css-conditional-4">https://www.w3.org/standards/history/css-conditional-4</a>
                    <dt>実装報告:
                    <dd><a
                            href="https://wpt.fyi/results/css/css-conditional">https://wpt.fyi/results/css/css-conditional</a>
                    <dt>テストスイート:
                    <dd><a
                            href="https://wpt.fyi/results/css/css-conditional">https://wpt.fyi/results/css/css-conditional</a>
                    <dd class="wpt-overview"><a
                            href="https://wpt.fyi/results/css/css-conditional/">https://wpt.fyi/results/css/css-conditional/</a>
                    <dt>フィードバック:
                    <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-conditional-4">CSSWG イシューレポジトリ</a>
                    <dd><a href="#issues-index">仕様内インライン</a>
                    <dt class="editor">編集者:
                    <dd class="editor p-author h-card vcard" data-editor-id="15393"><a class="p-name fn u-url url"
                            href="https://dbaron.org/">L. David Baron</a> (<a class="p-org org"
                            href="https://www.mozilla.org/">Mozilla</a>)
                    <dd class="editor p-author h-card vcard" data-editor-id="35400"><a class="p-name fn u-url url"
                            href="http://fantasai.inkedblade.net/contact">Elika J. Etemad / fantasai</a> (<span
                            class="p-org org">招待専門家</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="1438"><a class="p-name fn u-url url"
                            href="https://svgees.us/">Chris Lilley</a> (<span class="p-org org">W3C</span>)
                    <dt>この仕様の編集提案:
                    <dd><a href="https://github.com/w3c/csswg-drafts/blob/main/css-conditional-4/Overview.bs">GitHub
                            編集</a>
                    <dt>デルタ仕様:
                    <dd>あり
                </dl>
            </div>
        </details>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2022 <a
                href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
                href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a
                href="https://www.ercim.eu/"><abbr
                    title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a
                href="https://www.keio.ac.jp/">Keio</a>, <a href="https://ev.buaa.edu.cn/">Beihang</a>). W3C <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document" rel="license">permissive
                document license</a> rules apply. </p>
        <hr title="Separator for header">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">概要</span></h2>
        <p>このモジュールは、CSSのスタイルシートの一部を、プロセッサやスタイルシートが適用される環境の能力に基づいて条件付き処理する機能を含みます。
            CSS Conditional 3 <a data-link-type="biblio" href="#biblio-css-conditional-3">[css-conditional-3]</a>
            の機能を含み、さらに拡張しています。
            新しい <a class="css" data-link-type="maybe"
                href="https://drafts.csswg.org/scroll-animations-1/#valdef-scroll-timeline-source-selector"
                id="ref-for-valdef-scroll-timeline-source-selector">selector()</a> 記法による <a data-link-type="dfn"
                href="https://www.w3.org/TR/css3-conditional/#supports-queries" id="ref-for-supports-queries">supports
                queries</a> を使って、特定のセレクターのサポート可否を問い合わせる機能 <a data-link-type="biblio"
                href="#biblio-selectors-4">[SELECTORS-4]</a> を追加しています。</p>
        <a href="https://www.w3.org/TR/CSS/">CSS</a>は、構造化文書（HTMLやXMLなど）の画面・紙などでのレンダリング方法を記述する言語です。
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">この文書のステータス</span>
    </h2>
    <div data-fill-with="status">
        <p><em>このセクションは、公開時点での文書のステータスを説明します。
                現在のW3C出版物一覧および本技術レポートの最新版は
                <a href="https://www.w3.org/TR/">W3C技術レポート一覧（https://www.w3.org/TR/）</a>で確認できます。</em> </p>
        <p> この文書は
            <a href="https://www.w3.org/groups/wg/css">CSSワーキンググループ</a>によって、<strong>勧告候補スナップショット</strong>として<a
                href="https://www.w3.org/2021/Process-20211102/#recs-and-notes">勧告トラック</a>を用いて公開されました。
            勧告候補として公開されたことは、<abbr title="World Wide Web Consortium">W3C</abbr>およびその会員による支持を意味するものではありません。
            勧告候補スナップショットは、<a href="https://www.w3.org/2021/Process-20211102/#dfn-wide-review">広範なレビュー</a>を受けており、
            実装経験の収集を目的とし、ワーキンググループメンバーによる<a
                href="https://www.w3.org/Consortium/Patent-Policy/#sec-Requirements">ロイヤリティフリーライセンス</a>のコミットメントも得られています。
            この文書は最終的にW3C勧告となる予定です。
            追加フィードバックを収集するため、<time class="status-deadline" datetime="2022-04-17">2022年4月17日</time>まで少なくとも勧告候補のままとなります。
        </p>
        <p>フィードバックは
            <a href="https://github.com/w3c/csswg-drafts/issues">GitHubでissue提出</a>（推奨）によりお願いします。
            タイトルに仕様コード「css-conditional」を含めてください（例:「[css-conditional] …コメント概要…」）。
            すべてのissueとコメントは<a href="https://lists.w3.org/Archives/Public/public-css-archive/">アーカイブ</a>されています。
            または、(<a href="https://lists.w3.org/Archives/Public/www-style/">アーカイブ</a>あり) 公開メーリングリスト <a
                href="mailto:www-style@w3.org?Subject=%5Bcss-conditional%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>
            でも受け付けています。
        </p>
        <p>この文書は <a href="https://www.w3.org/2021/Process-20211102/" id="w3c_process_revision">2021年11月2日
                W3Cプロセス文書</a>に従って管理されています。</p>
        <p>この文書は <a href="https://www.w3.org/Consortium/Patent-Policy-20200915/">W3C特許ポリシー</a>の下で活動するグループによって作成されました。
            W3Cは、グループの成果物に関連して公開された<a href="https://www.w3.org/groups/wg/css/ipr" rel="disclosure">特許開示の一覧</a>を維持しています。
            そのページには特許開示の方法も記載されています。
            特定の特許が<em>必須クレーム</em>を含むと考えられる場合、
            <a
                href="https://www.w3.org/Consortium/Patent-Policy-20200915/#sec-Disclosure">W3C特許ポリシー第6節</a>に従って情報を開示する必要があります。
        </p>
        <p></p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目次</h2>
        <ol class="toc" role="directory">
            <li><a href="#introduction"><span class="secno">1</span> <span class="content">導入</span></a>
            <li>
                <a href="#at-supports-ext"><span class="secno">2</span> <span class="content"> <span
                            class="css">@supports</span>規則の拡張</span></a>
                <ol class="toc">
                    <li><a href="#support-definition-ext"><span class="secno">2.1</span> <span class="content">
                                サポート定義の拡張</span></a>
                </ol>
            <li><a href="#security"><span class="secno"></span> <span class="content">セキュリティに関する考慮事項</span></a>
            <li><a href="#privacy"><span class="secno"></span> <span class="content">プライバシーに関する考慮事項</span></a>
            <li><a href="#acknowledgments"><span class="secno"></span> <span class="content">謝辞</span></a>
            <li>
                <a href="#changes"><span class="secno"></span> <span class="content">変更履歴</span></a>
                <ol class="toc">
                    <li><a href="#changes-from-20200303"><span class="secno"></span> <span class="content">2020年3月3日
                                初回公開作業草案以降の変更点</span></a>
                    <li><a href="#changes-from-L4"><span class="secno"></span> <span
                                class="content">レベル3以降の追加点</span></a>
                </ol>
            <li>
                <a href="#w3c-conformance"><span class="secno"></span> <span class="content">適合性</span></a>
                <ol class="toc">
                    <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">文書の慣例</span></a>
                    <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span class="content">
                                適合クラス</span></a>
                    <li>
                        <a href="#w3c-partial"><span class="secno"></span> <span class="content">部分的な実装</span></a>
                        <ol class="toc">
                            <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span
                                        class="content">不安定および独自機能の実装</span></a>
                        </ol>
                    <li><a href="#w3c-testing"><span class="secno"></span> <span class="content">非実験的な実装</span></a>
                    <li><a href="#w3c-cr-exit-criteria"><span class="secno"></span> <span
                                class="content">CR終了基準</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本仕様で定義された用語</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">参照によって定義されている用語</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">規範的参考文献</span></a>
                    <li><a href="#informative"><span class="secno"></span> <span class="content">参考的文献</span></a>
                </ol>
            <li><a href="#issues-index"><span class="secno"></span> <span class="content">課題索引</span></a>
        </ol>
    </nav>
    <main>
        <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span
                class="content">導入</span><a class="self-link" href="#introduction"></a></h2>
        <p class="issue" id="issue-283f0a3c"><a class="self-link" href="#issue-283f0a3c"></a> レベル3の機能は依然として <a
                data-link-type="biblio" href="#biblio-css-conditional-3">[css-conditional-3]</a>
            で定義されており、まだここにはコピーされていません。</p>
        <p>このレベルでは、<a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css3-conditional/#at-ruledef-supports"
                id="ref-for-at-ruledef-supports">@supports</a> 規則に拡張を加え、サポートされているセレクターのテストを可能にします。</p>
        <h2 class="heading settled" data-level="2" id="at-supports-ext"><span class="secno">2. </span><span
                class="content"><a class="css" data-link-type="maybe"
                    href="https://www.w3.org/TR/css3-conditional/#at-ruledef-supports"
                    id="ref-for-at-ruledef-supports①">@supports</a> 規則の拡張</span><a class="self-link"
                href="#at-supports-ext"></a></h2>
        <p>この仕様のレベルでは、<a class="production css" data-link-type="type" href="#typedef-supports-feature"
                id="ref-for-typedef-supports-feature">&lt;supports-feature></a> 構文を次のように拡張します：</p>
        <pre class="prod def"><dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-supports-feature">&lt;supports-feature></dfn> = <a class="production" data-link-type="type" href="#typedef-supports-selector-fn" id="ref-for-typedef-supports-selector-fn">&lt;supports-selector-fn></a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one">|</a> <a class="production" data-link-type="type" href="https://www.w3.org/TR/css3-conditional/#typedef-supports-decl" id="ref-for-typedef-supports-decl">&lt;supports-decl></a>
<dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-supports-selector-fn">&lt;supports-selector-fn></dfn> = selector( <a class="production" data-link-type="type" href="https://www.w3.org/TR/selectors-4/#typedef-complex-selector" id="ref-for-typedef-complex-selector">&lt;complex-selector></a> )
</pre>
        <dl>
            <dt data-md><a class="production css" data-link-type="type" href="#typedef-supports-selector-fn"
                    id="ref-for-typedef-supports-selector-fn①">&lt;supports-selector-fn></a>
            <dd data-md>
                <p>UAが関数の引数として与えられたセレクターを <a href="#dfn-support-selector"
                        id="ref-for-dfn-support-selector">サポートしている</a>場合、結果はtrueとなります。</p>
        </dl>
        <details class="wpt-tests-block" dir="ltr" lang="ja" open>
            <summary>テスト</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-conditional/at-supports-selector-001.html"
                        title="css/css-conditional/at-supports-selector-001.html">at-supports-selector-001.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/css-conditional/at-supports-selector-001.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-conditional/at-supports-selector-001.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-conditional/at-supports-selector-002.html"
                        title="css/css-conditional/at-supports-selector-002.html">at-supports-selector-002.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/css-conditional/at-supports-selector-002.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-conditional/at-supports-selector-002.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-conditional/at-supports-selector-003.html"
                        title="css/css-conditional/at-supports-selector-003.html">at-supports-selector-003.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/css-conditional/at-supports-selector-003.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-conditional/at-supports-selector-003.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-conditional/at-supports-selector-004.html"
                        title="css/css-conditional/at-supports-selector-004.html">at-supports-selector-004.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/css-conditional/at-supports-selector-004.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-conditional/at-supports-selector-004.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-conditional/js/CSS-supports-L4.html"
                        title="css/css-conditional/js/CSS-supports-L4.html">CSS-supports-L4.html</a> <a class="wpt-live"
                        href="http://wpt.live/css/css-conditional/js/CSS-supports-L4.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-conditional/js/CSS-supports-L4.html"><small>（ソース）</small></a>
            </ul>
        </details>
        <div class="example" id="ex-selector">
            <a class="self-link" href="#ex-selector"></a> この例では、<a data-link-type="dfn"
                href="https://www.w3.org/TR/selectors-4/#column-combinator"
                id="ref-for-column-combinator">列結合子</a>（||）がセレクターでサポートされているかどうかをテストし、サポートされていれば特定のテーブルセルのスタイルにそれを利用します。
            <pre class="lang-css highlight"><c- n>@supports</c-> <c- nf>selector</c-><c- p>(</c->col || td<c- p>)</c-> <c- p>{</c->
  col.selected || td <c- p>{</c->
    <c- k>background</c-><c- p>:</c-> tan<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
        </div>
        <p>条件付きグループ規則内で使用されるすべての名前空間プレフィックスは、宣言されていなければなりません。そうでない場合は無効です <a data-link-type="biblio"
                href="#biblio-css-conditional-3">[css-conditional-3]</a>。
            これにはselector関数内の名前空間プレフィックスも含まれます。</p>
        <details class="wpt-tests-block" dir="ltr" lang="ja" open>
            <summary>テスト</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-conditional/at-supports-namespace-002.html"
                        title="css/css-conditional/at-supports-namespace-002.html">at-supports-namespace-002.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/css-conditional/at-supports-namespace-002.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-conditional/at-supports-namespace-002.html"><small>（ソース）</small></a>
            </ul>
        </details>
        <div class="invalid example" id="ex-ns-selector-invalid">
            <a class="self-link" href="#ex-ns-selector-invalid"></a> この例では、<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-namespaces-3/#css-qualified-name"
                id="ref-for-css-qualified-name">CSS修飾名</a>を使った属性セレクターがサポートされているかどうかをチェックしていますが、名前空間プレフィックスが宣言されていないため無効です。
            <pre class="lang-css highlight"><c- n>@supports</c-> <c- nf>selector</c-><c- p>(</c->a<c- p>[</c->xlink|href<c- p>])</c-> <c- p>{</c->
  // do something<c- p>,</c-> but fail
  <c- p>}</c->
<c- p>}</c->
</pre>
        </div>
        <div class="example" id="ex-ns-selector">
            <a class="self-link" href="#ex-ns-selector"></a> この例では、<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-namespaces-3/#css-qualified-name"
                id="ref-for-css-qualified-name①">CSS修飾名</a>を使った属性セレクターがサポートされているかどうかをチェックしています。
            <pre class="lang-css highlight"><c- n>@namespace</c-> x <c- nf>url</c-><c- p>(</c-><c- s>http://www.w3.org/1999/xlink</c-><c- p>);</c->
<c- n>@supports</c-> <c- nf>selector</c-><c- p>(</c->a<c- p>[</c->x|href<c- p>])</c-> <c- p>{</c->
  // do something
  <c- p>}</c->
<c- p>}</c->
</pre>
        </div>
        <h3 class="heading settled" data-level="2.1" id="support-definition-ext"><span class="secno">2.1. </span><span
                class="content">サポート定義の拡張</span><a class="self-link" href="#support-definition-ext"></a></h3>
        <p>CSSプロセッサは、セレクターをパースエラーとして破棄せずに受理し、そのセレクターが<a data-link-type="dfn"
                href="https://drafts.csswg.org/selectors-4/#unknown--webkit--pseudo-elements"
                id="ref-for-unknown--webkit--pseudo-elements">未知の-webkit-疑似要素</a>を含まない場合、<dfn class="dfn-paneled"
                data-dfn-for="CSS" data-dfn-type="dfn" data-export
                id="dfn-support-selector">CSSセレクターをサポートする</dfn>とみなされます。</p>
        <h2 class="no-num heading settled" id="security"><span class="content">セキュリティに関する考慮事項</span><a class="self-link"
                href="#security"></a></h2>
        <p>本書に対してセキュリティ問題は提起されていません。</p>
        <h2 class="no-num heading settled" id="privacy"><span class="content">プライバシーに関する考慮事項</span><a class="self-link"
                href="#privacy"></a></h2>
        <p><a class="css" data-link-type="maybe"
                href="https://drafts.csswg.org/scroll-animations-1/#valdef-scroll-timeline-source-selector"
                id="ref-for-valdef-scroll-timeline-source-selector①">selector()</a>関数は、ユーザーのソフトウェアのバージョンや、特定の機能を有効化・無効化するなどの非デフォルト設定で動作しているかどうかなどの情報を提供する場合があります。
        </p>
        <p>これらの情報は他のAPIからも取得可能です。
            ただし、本仕様の機能もWeb上でこの情報が露出する手段のひとつです。</p>
        <p>また、この情報は集約されることで、ユーザーの<a
                href="https://www.w3.org/2001/tag/doc/unsanctioned-tracking/">フィンガープリンティング</a>の精度向上にも利用される可能性があります。</p>
        <h2 class="no-num heading settled" id="acknowledgments"><span class="content">謝辞</span><a class="self-link"
                href="#acknowledgments"></a></h2>
        <p>編集者は、このモジュールの<a href="https://www.w3.org/TR/css-conditional-3/#acknowledgements">前レベル</a>に貢献したすべての方々に感謝します。
        </p>
        <h2 class="no-num heading settled" id="changes"><span class="content">変更履歴</span><a class="self-link"
                href="#changes"></a></h2>
        <h3 class="no-num heading settled" id="changes-from-20200303"><span class="content">2020年3月3日
                初回公開作業草案以降の変更点</span><a class="self-link" href="#changes-from-20200303"></a></h3>
        <ul>
            <li><a href="#privacy">プライバシー</a>および<a href="#security">セキュリティ</a>セクションを追加
            <li>いくつかの例を追加
            <li>名前空間プレフィックスの宣言要件がselector()内のセレクターにも適用されることを明確化（<a
                    href="https://github.com/w3c/csswg-drafts/issues/3220">Issue 3220</a>）
        </ul>
        <h3 class="no-num heading settled" id="changes-from-L4"><span class="content">レベル3以降の追加点</span><a
                class="self-link" href="#changes-from-L4"></a></h3>
        <ul>
            <li><a class="css" data-link-type="maybe"
                    href="https://drafts.csswg.org/scroll-animations-1/#valdef-scroll-timeline-source-selector"
                    id="ref-for-valdef-scroll-timeline-source-selector②">selector()</a>記法を<a data-link-type="dfn"
                    href="https://www.w3.org/TR/css3-conditional/#supports-queries"
                    id="ref-for-supports-queries①">supports queries</a>に追加
        </ul>
    </main>
    <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">適合性</span><a class="self-link"
            href="#w3c-conformance"></a></h2>
    <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content">文書の慣例</span><a class="self-link"
            href="#w3c-conventions"></a></h3>
    <p>適合要件は記述的な断定とRFC 2119用語の組み合わせで表現されます。規範部分における「MUST」「MUST NOT」「REQUIRED」「SHALL」「SHALL NOT」「SHOULD」「SHOULD
        NOT」「RECOMMENDED」「MAY」「OPTIONAL」という語は、RFC 2119に記載されている通りに解釈されます。
        ただし、可読性のため、これらの語は本仕様書ではすべて大文字では記載されません。</p>
    <p>本仕様書のテキストは、明示的に非規範と示されているセクション、例、および注記を除き、すべて規範的です。<a data-link-type="biblio"
            href="#biblio-rfc2119">[RFC2119]</a></p>
    <p>本仕様書の例は、「for example」という語で始まるか、<code
            class="highlight">class=<c- s>"example"</c-></code>を指定して規範テキストから区別されています。次のような形です：</p>
    <div class="example" id="w3c-example">
        <a class="self-link" href="#w3c-example"></a>
        <p>これは参考例の一例です。</p>
    </div>
    <p>参考注記は「Note」で始まり、<code class="highlight">class=<c- s>"note"</c-></code>を指定して規範テキストから区別されています。次のような形です：</p>
    <p class="note" role="note">注：これは参考注記です。</p>
    <p>助言事項は、特別な注意を喚起するようにスタイルされた規範セクションであり、<code
            class="highlight">&lt;strong class=<c- s>"advisement"</c->></code>を用いて他の規範テキストから区別されます。例：<strong
            class="advisement"> UAはアクセシブルな代替手段を必ず提供しなければなりません。 </strong></p>
    <details class="wpt-tests-block" dir="ltr" lang="ja" open>
        <summary>テスト</summary>
        <p>本仕様の内容に関するテストは、このような「テスト」ブロック内に記載される場合があります。
            このようなブロックは、非規範です。</p>
        <ul class="wpt-tests-list"></ul>
        <hr>
    </details>
    <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content">適合クラス</span><a
            class="self-link" href="#w3c-conformance-classes"></a></h3>
    <p>本仕様への適合は、次の3つの適合クラスに定義されています：</p>
    <dl>
        <dt>スタイルシート
        <dd><a href="https://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
                スタイルシート</a>。
        <dt>レンダラー
        <dd><a
                href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>（ユーザーエージェント）。スタイルシートの意味を解釈し、それらを使用する文書をレンダリングするもの。
        <dt>オーサリングツール
        <dd><a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>（ユーザーエージェント）。スタイルシートを書き出すもの。
    </dl>
    <p>スタイルシートが本仕様に適合しているとは、このモジュールで定義された構文を使用するすべての文が、汎用CSS文法および各機能の個別文法に従って有効である場合を指します。</p>
    <p>レンダラーが本仕様に適合しているとは、スタイルシートを適切な仕様で定義された通りに解釈することに加え、本仕様で定義されたすべての機能を正しくパースし、文書を正しくレンダリングすることです。ただし、デバイスの制限によってUA（ユーザーエージェント）が文書を正しくレンダリングできない場合でも、UAが非適合となるわけではありません。（例：モノクロモニターでは色のレンダリングは要求されません）
    </p>
    <p>オーサリングツールが本仕様に適合しているとは、汎用CSS文法および本モジュールの各機能の個別文法に従って構文的に正しいスタイルシートを書き出し、本モジュールで記述されているスタイルシートのその他の適合要件も満たしている場合です。
    </p>
    <h3 class="no-ref heading settled" id="w3c-partial"><span class="content">部分的な実装</span><a class="self-link"
            href="#w3c-partial"></a></h3>
    <p>著者が前方互換パース規則を利用してフォールバック値を設定できるように、CSSレンダラーは<strong>必ず</strong>使えるレベルのサポートがない@規則、プロパティ、プロパティ値、キーワード、その他の構文要素を無効（<a
            href="https://www.w3.org/TR/CSS21/conform.html#ignore">適切に無視</a>）として扱わなければなりません。特に、ユーザーエージェントは<strong>絶対に</strong>未対応の値を選択的に無視して、複数値プロパティ宣言のうち対応している値だけを適用してはなりません。値のうちいずれかが無効（未対応値は必ず無効）となる場合、CSSは宣言全体を無視する必要があります。
    </p>
    <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content">不安定および独自機能の実装</span><a
            class="self-link" href="#w3c-conform-future-proofing"></a></h4>
    <p>将来の安定したCSS機能との衝突を避けるため、
        CSSWGは<a href="https://www.w3.org/TR/CSS/#future-proofing">ベストプラクティス</a>に従って、<a
            href="https://www.w3.org/TR/CSS/#unstable">不安定</a>な機能や<a
            href="https://www.w3.org/TR/CSS/#proprietary-extension">独自拡張</a>の実装を行うことを推奨します。</p>
    <h3 class="no-ref heading settled" id="w3c-testing"><span class="content">非実験的な実装</span><a class="self-link"
            href="#w3c-testing"></a></h3>
    <p>仕様がCandidate Recommendationに到達した時点で、
        非実験的な実装が可能となり、実装者は正しく仕様通りに実装できるCRレベルの機能についてはプレフィックスなしで公開すべきです。</p>
    <p>CSSの相互運用性を確立・維持するため、CSSワーキンググループは、非実験的なCSSレンダラーがW3Cに実装報告書（必要に応じてその報告に使ったテストケースも）を提出した上で、CSS機能のプレフィックス無し実装を公開することを求めています。W3Cに提出されたテストケースは、CSSワーキンググループによるレビューおよび修正の対象となります。
    </p>
    <p>テストケースや実装報告書の提出に関する詳細は、CSSワーキンググループのWebサイト <a
            href="https://www.w3.org/Style/CSS/Test/">https://www.w3.org/Style/CSS/Test/</a> を参照ください。
        質問は<a href="https://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>
        メーリングリストへ。</p>
    <h3 class="no-ref heading settled" id="w3c-cr-exit-criteria"><span class="content">CR終了基準</span><a class="self-link"
            href="#w3c-cr-exit-criteria"></a></h3>
    <p>この仕様を勧告案へ進めるためには、各機能について少なくとも2つの独立した相互運用可能な実装が必要です。各機能は異なる製品セットで実装されても構いません。すべての機能を単一製品で実装する必要はありません。この基準のために、以下の用語を定義します：
    </p>
    <dl>
        <dt>独立
        <dd>各実装は異なる当事者によって開発され、他の適格な実装で使用されるコードを共有・再利用・派生してはなりません。本仕様の実装に関係しないコード部分はこの要件から除外されます。
        <dt>相互運用可能
        <dd>公式CSSテストスイートの該当テストケースをパスすること、または実装がWebブラウザでない場合は同等のテストをパスすること。同等のテストを用いて相互運用性を主張する場合は、そのテストにパスできる追加のUA（ユーザーエージェント）が同じ方法でパスできることが必要です。同等のテストはピアレビューのために公開されなければなりません。
        <dt>実装
        <dd>
            ユーザーエージェントであり、次を満たすもの：
            <ol class="inline">
                <li>仕様を実装していること。
                <li>一般に公開されていること。実装は出荷製品やその他の公開バージョン（β版、プレビューリリース、ナイトリービルドなど）であってもよい。出荷製品でない場合、該当機能を少なくとも1ヶ月以上実装して安定性を示す必要があります。
                <li>実験的でないこと（テストスイート合格専用に設計されたバージョンや通常利用を想定しないものは不可）。
            </ol>
    </dl>
    <p>仕様は少なくとも6ヶ月間Candidate Recommendationのまま維持されます。</p>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本仕様で定義された用語</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#dfn-support-selector">CSSセレクターをサポートする</a><span>、§ 2.1で</span>
        <li><a href="#typedef-supports-feature">&lt;supports-feature></a><span>、§ 2で</span>
        <li><a href="#typedef-supports-selector-fn">&lt;supports-selector-fn></a><span>、§ 2で</span>
    </ul>
    <aside class="dfn-panel" data-for="term-for-typedef-supports-decl">
        <a
            href="https://www.w3.org/TR/css3-conditional/#typedef-supports-decl">https://www.w3.org/TR/css3-conditional/#typedef-supports-decl</a><b>参照元:</b>
        <ul>
            <li><a href="#ref-for-typedef-supports-decl">2.
                    @supports規則の拡張</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-at-ruledef-supports">
        <a
            href="https://www.w3.org/TR/css3-conditional/#at-ruledef-supports">https://www.w3.org/TR/css3-conditional/#at-ruledef-supports</a><b>参照元:</b>
        <ul>
            <li><a href="#ref-for-at-ruledef-supports">1. 導入</a>
            <li><a href="#ref-for-at-ruledef-supports①">2.
                    @supports規則の拡張</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-conditional-group-rule">
        <a
            href="https://www.w3.org/TR/css3-conditional/#conditional-group-rule">https://www.w3.org/TR/css3-conditional/#conditional-group-rule</a><b>参照元:</b>
        <ul>
            <li><a href="#ref-for-conditional-group-rule">2.
                    @supports規則の拡張</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-supports-queries">
        <a
            href="https://www.w3.org/TR/css3-conditional/#supports-queries">https://www.w3.org/TR/css3-conditional/#supports-queries</a><b>参照元:</b>
        <ul>
            <li><a href="#ref-for-supports-queries">番号なしセクション</a>
            <li><a href="#ref-for-supports-queries①"> レベル3以降の追加点</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-css-qualified-name">
        <a
            href="https://www.w3.org/TR/css-namespaces-3/#css-qualified-name">https://www.w3.org/TR/css-namespaces-3/#css-qualified-name</a><b>参照元:</b>
        <ul>
            <li><a href="#ref-for-css-qualified-name">2.
                    @supports規則の拡張</a> <a href="#ref-for-css-qualified-name①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-comb-one">
        <a
            href="https://www.w3.org/TR/css-values-4/#comb-one">https://www.w3.org/TR/css-values-4/#comb-one</a><b>参照元:</b>
        <ul>
            <li><a href="#ref-for-comb-one">2.
                    @supports規則の拡張</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-scroll-timeline-source-selector">
        <a
            href="https://drafts.csswg.org/scroll-animations-1/#valdef-scroll-timeline-source-selector">https://drafts.csswg.org/scroll-animations-1/#valdef-scroll-timeline-source-selector</a><b>参照元:</b>
        <ul>
            <li><a href="#ref-for-valdef-scroll-timeline-source-selector">番号なしセクション</a>
            <li><a href="#ref-for-valdef-scroll-timeline-source-selector①">プライバシーに関する考慮事項</a>
            <li><a href="#ref-for-valdef-scroll-timeline-source-selector②"> レベル3以降の追加点</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-typedef-complex-selector">
        <a
            href="https://www.w3.org/TR/selectors-4/#typedef-complex-selector">https://www.w3.org/TR/selectors-4/#typedef-complex-selector</a><b>参照元:</b>
        <ul>
            <li><a href="#ref-for-typedef-complex-selector">2.
                    @supports規則の拡張</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-column-combinator">
        <a
            href="https://www.w3.org/TR/selectors-4/#column-combinator">https://www.w3.org/TR/selectors-4/#column-combinator</a><b>参照元:</b>
        <ul>
            <li><a href="#ref-for-column-combinator">2.
                    @supports規則の拡張</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-unknown--webkit--pseudo-elements">
        <a
            href="https://drafts.csswg.org/selectors-4/#unknown--webkit--pseudo-elements">https://drafts.csswg.org/selectors-4/#unknown--webkit--pseudo-elements</a><b>参照元:</b>
        <ul>
            <li><a href="#ref-for-unknown--webkit--pseudo-elements">2.1.
                    サポート定義の拡張</a>
        </ul>
    </aside>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span
            class="content">参照によって定義されている用語</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[css-conditional-3]</a>で定義されている用語:
            <ul>
                <li><span class="dfn-paneled" id="term-for-typedef-supports-decl">&lt;supports-decl></span>
                <li><span class="dfn-paneled" id="term-for-at-ruledef-supports">@supports</span>
                <li><span class="dfn-paneled" id="term-for-conditional-group-rule">条件付きグループ規則</span>
                <li><span class="dfn-paneled" id="term-for-supports-queries">supports queries</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-namespaces-3]</a>で定義されている用語:
            <ul>
                <li><span class="dfn-paneled" id="term-for-css-qualified-name">css修飾名</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-values-4]</a>で定義されている用語:
            <ul>
                <li><span class="dfn-paneled" id="term-for-comb-one">|</span>
            </ul>
        <li>
            <a data-link-type="biblio">[SCROLL-ANIMATIONS]</a>で定義されている用語:
            <ul>
                <li><span class="dfn-paneled" id="term-for-valdef-scroll-timeline-source-selector">selector()</span>
            </ul>
        <li>
            <a data-link-type="biblio">[SELECTORS-4]</a>で定義されている用語:
            <ul>
                <li><span class="dfn-paneled" id="term-for-typedef-complex-selector">&lt;complex-selector></span>
                <li><span class="dfn-paneled" id="term-for-column-combinator">列結合子</span>
                <li><span class="dfn-paneled" id="term-for-unknown--webkit--pseudo-elements">未知の-webkit-疑似要素</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">規範的参考文献</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css-conditional-3">[CSS-CONDITIONAL-3]
        <dd>David Baron; Elika Etemad; Chris Lilley. <a href="https://www.w3.org/TR/css-conditional-3/"><cite>CSS
                    Conditional Rules Module Level 3</cite></a>. 2022年1月13日. CR. URL: <a
                href="https://www.w3.org/TR/css-conditional-3/">https://www.w3.org/TR/css-conditional-3/</a>
        <dt id="biblio-css-values-4">[CSS-VALUES-4]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-4/"><cite>CSS Values and Units
                    Module Level 4</cite></a>. 2021年12月16日. WD. URL: <a
                href="https://www.w3.org/TR/css-values-4/">https://www.w3.org/TR/css-values-4/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to
                    Indicate Requirement Levels</cite></a>. 1997年3月. Best Current Practice. URL: <a
                href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
        <dt id="biblio-scroll-animations">[SCROLL-ANIMATIONS]
        <dd><a href="https://wicg.github.io/scroll-animations/"><cite>Scroll-linked Animations</cite></a>. cg-draft.
            URL: <a href="https://wicg.github.io/scroll-animations/">https://wicg.github.io/scroll-animations/</a>
        <dt id="biblio-selectors-4">[SELECTORS-4]
        <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/selectors-4/"><cite>Selectors Level
                    4</cite></a>. 2018年11月21日. WD. URL: <a
                href="https://www.w3.org/TR/selectors-4/">https://www.w3.org/TR/selectors-4/</a>
    </dl>
    <h3 class="no-num no-ref heading settled" id="informative"><span class="content">参考的文献</span><a class="self-link"
            href="#informative"></a></h3>
    <dl>
        <dt id="biblio-css-namespaces-3">[CSS-NAMESPACES-3]
        <dd>Elika Etemad. <a href="https://www.w3.org/TR/css-namespaces-3/"><cite>CSS Namespaces Module Level
                    3</cite></a>. 2014年3月20日. REC. URL: <a
                href="https://www.w3.org/TR/css-namespaces-3/">https://www.w3.org/TR/css-namespaces-3/</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">課題索引</span><a class="self-link"
            href="#issues-index"></a></h2>
    <div style="counter-reset:issue">
        <div class="issue"> レベル3の機能は依然として<a data-link-type="biblio"
                href="#biblio-css-conditional-3">[css-conditional-3]</a>で定義されており、まだここにはコピーされていません。 <a
                class="issue-return" href="#issue-283f0a3c" title="Jump to section">↵</a></div>
    </div>
    <aside class="dfn-panel" data-for="typedef-supports-feature">
        <b><a href="#typedef-supports-feature">#typedef-supports-feature</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-typedef-supports-feature">2.
                    Extensions to the @supports rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="typedef-supports-selector-fn">
        <b><a href="#typedef-supports-selector-fn">#typedef-supports-selector-fn</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-typedef-supports-selector-fn">2.
                    Extensions to the @supports rule</a> <a href="#ref-for-typedef-supports-selector-fn①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dfn-support-selector">
        <b><a href="#dfn-support-selector">#dfn-support-selector</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dfn-support-selector">2.
                    Extensions to the @supports rule</a>
        </ul>
    </aside>
    <script>/* script-dfn-panel */

        document.body.addEventListener("click", function (e) {
            var queryAll = function (sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while (el.parentElement) {
                if (el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if (el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if (el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if (target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function (el) {
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if (target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if (dfnPanel) {
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if (panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if (target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
    </script>
    <script>/* script-wpt */
        let wptPath = "/css/css-conditional/";
        "use strict";

        document.addEventListener("DOMContentLoaded", async () => {
            if (wptPath == "/") return;

            const runsUrl = "https://wpt.fyi/api/runs?label=master&label=stable&max-count=1&product=chrome&product=firefox&product=safari&product=edge";
            const runs = await (await fetch(runsUrl)).json();

            const testResults = await (await fetch("https://wpt.fyi/api/search", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    "run_ids": runs.map(x => x.id),
                    "query": { "path": wptPath },
                })
            })).json();

            const browsers = runs.map(x => ({ name: x.browser_name, version: x.browser_version, passes: 0, total: 0 }));
            const resultsFromPath = new Map(testResults.results.map(result => {
                const testPath = result.test;
                const passes = result.legacy_status.map(x => [x.passes, x.total]);
                return [testPath, passes];
            }));
            document.querySelectorAll(".wpt-name").forEach(nameEl => {
                const passData = resultsFromPath.get("/" + nameEl.getAttribute("title"));
                const numTests = passData[0][1];
                if (numTests > 1) {
                    nameEl.insertAdjacentElement("beforeend",
                        el("small", {}, ` (${numTests} tests)`));
                }
                if (passData == undefined) return;
                passData.forEach((p, i) => {
                    browsers[i].passes += p[0];
                    browsers[i].total += p[1];
                })
                const resultsEl = el("span", { "class": "wpt-results" },
                    ...passData.map((p, i) => el("span",
                        {
                            "title": `${browsers[i].name} ${p[0]}/${p[1]}`,
                            "class": "wpt-result",
                            "style": `background: conic-gradient(forestgreen ${p[0] / p[1] * 360}deg, darkred 0deg);`,
                        })),
                );
                nameEl.insertAdjacentElement("afterend", resultsEl);
            });
            const overview = document.querySelector(".wpt-overview");
            if (overview) {
                overview.appendChild(el('ul', {}, ...browsers.map(formatWptResult)));
                document.head.appendChild(el('style', {},
                    `.wpt-overview ul { display: flex; flex-flow: row wrap; gap: .2em; justify-content: start; list-style: none; padding: 0; margin: 0;}
             .wpt-overview li { padding: .25em 1em; color: black; text-align: center; }
             .wpt-overview img { height: 1.5em; height: max(1.5em, 32px); background: transparent; }
             .wpt-overview .browser { font-weight: bold; }
             .wpt-overview .passes-none { background: #e57373; }
             .wpt-overview .passes-hardly { background: #ffb74d; }
             .wpt-overview .passes-a-few { background: #ffd54f; }
             .wpt-overview .passes-half { background: #fff176; }
             .wpt-overview .passes-lots { background: #dce775; }
             .wpt-overview .passes-most { background: #aed581; }
             .wpt-overview .passes-all { background: #81c784; }`));
            }
        });
        function el(name, attrs, ...content) {
            const x = document.createElement(name);
            for (const [k, v] of Object.entries(attrs)) {
                x.setAttribute(k, v);
            }
            for (let child of content) {
                if (typeof child == "string") child = document.createTextNode(child);
                try {
                    x.appendChild(child);
                } catch (e) { console.log({ x, child }); }
            }
            return x;
        }
        function formatWptResult({ name, version, passes, total }) {
            const passRate = passes / total;
            let passClass = "";
            if (passRate == 0) passClass = "passes-none";
            else if (passRate < .2) passClass = "passes-hardly";
            else if (passRate < .4) passClass = "passes-a-few";
            else if (passRate < .6) passClass = "passes-half";
            else if (passRate < .8) passClass = "passes-lots";
            else if (passRate < 1) passClass = "passes-most";
            else passClass = "passes-all";

            name = name[0].toUpperCase() + name.slice(1);
            const shortVersion = /^\d+/.exec(version);
            const icon = []

            if (name == "Chrome") icon.push(el('img', { alt: "", src: "https://wpt.fyi/static/chrome-dev_64x64.png" }));
            if (name == "Edge") icon.push(el('img', { alt: "", src: "https://wpt.fyi/static/edge-dev_64x64.png" }));
            if (name == "Safari") icon.push(el('img', { alt: "", src: "https://wpt.fyi/static/safari-preview_64x64.png" }));
            if (name == "Firefox") icon.push(el('img', { alt: "", src: "https://wpt.fyi/static/firefox-nightly_64x64.png" }));

            return el('li', { "class": passClass },
                el('nobr', { 'class': 'browser' }, ...icon, ` ${name} ${shortVersion}`),
                el('br', {}),
                el('nobr', { 'class': 'pass-rate' }, `${passes}/${total}`)
            );
        }</script>
    <script src="https://htmlspecs.com/dropdown.js"></script>