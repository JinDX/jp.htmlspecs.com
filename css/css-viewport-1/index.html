<!doctype html>
<html lang="ja-JP">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>CSS ビューポート モジュール レベル 1</title>
    <meta content="WD" name="w3c-status">
    <!-- <meta content="Bikeshed version 82ce88815, updated Thu Sep 7 16:33:55 2023 -0700" name="generator"> -->
    <link href="https://www.w3.org/TR/css-viewport-1/" rel="canonical">
    <!-- <meta content="a5cb08fc8af009aacf2aaa95525f906ca3b0dd15" name="document-revision"> -->
    <style>
        /* Style for algorithm pseudo code. */

        #algorithm {
            font-family: serif;
            font-size: 1em;
            white-space: pre;
            margin: 1em;
            padding: 1em;
        }

        #algorithm .method {
            counter-reset: statement;
            line-height: 1.5em;
        }

        #algorithm .method-name {
            font-variant: small-caps;
        }

        #algorithm .statement {
            counter-increment: statement;
        }

        #algorithm .statement:before {
            content: counter(statement) "   ";
            display: inline-block;
            width: 2em;
        }

        #algorithm .keyword {
            font-weight: bold;
        }
    </style>
    <style>
        /* Boilerplate: style-autolinks */
        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --selflink-text: black;
                --selflink-bg: silver;
                --selflink-hover-text: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-colors */

        /* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
        :root {
            color-scheme: light dark;

            --text: black;
            --bg: white;

            --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

            --logo-bg: #1a5e9a;
            --logo-active-bg: #c00;
            --logo-text: white;

            --tocnav-normal-text: #707070;
            --tocnav-normal-bg: var(--bg);
            --tocnav-hover-text: var(--tocnav-normal-text);
            --tocnav-hover-bg: #f8f8f8;
            --tocnav-active-text: #c00;
            --tocnav-active-bg: var(--tocnav-normal-bg);

            --tocsidebar-text: var(--text);
            --tocsidebar-bg: #f7f8f9;
            --tocsidebar-shadow: rgba(0, 0, 0, .1);
            --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

            --toclink-text: var(--text);
            --toclink-underline: #3980b5;
            --toclink-visited-text: var(--toclink-text);
            --toclink-visited-underline: #054572;

            --heading-text: #005a9c;

            --hr-text: var(--text);

            --algo-border: #def;

            --del-text: red;
            --del-bg: transparent;
            --ins-text: #080;
            --ins-bg: transparent;

            --a-normal-text: #034575;
            --a-normal-underline: #bbb;
            --a-visited-text: var(--a-normal-text);
            --a-visited-underline: #707070;
            --a-hover-bg: rgba(75%, 75%, 75%, .25);
            --a-active-text: #c00;
            --a-active-underline: #c00;

            --blockquote-border: silver;
            --blockquote-bg: transparent;
            --blockquote-text: currentcolor;

            --issue-border: #e05252;
            --issue-bg: #fbe9e9;
            --issue-text: var(--text);
            --issueheading-text: #831616;

            --example-border: #e0cb52;
            --example-bg: #fcfaee;
            --example-text: var(--text);
            --exampleheading-text: #574b0f;

            --note-border: #52e052;
            --note-bg: #e9fbe9;
            --note-text: var(--text);
            --noteheading-text: hsl(120, 70%, 30%);
            --notesummary-underline: silver;

            --assertion-border: #aaa;
            --assertion-bg: #eee;
            --assertion-text: black;

            --advisement-border: orange;
            --advisement-bg: #fec;
            --advisement-text: var(--text);
            --advisementheading-text: #b35f00;

            --warning-border: red;
            --warning-bg: hsla(40, 100%, 50%, 0.95);
            --warning-text: var(--text);

            --amendment-border: #330099;
            --amendment-bg: #F5F0FF;
            --amendment-text: var(--text);
            --amendmentheading-text: #220066;

            --def-border: #8ccbf2;
            --def-bg: #def;
            --def-text: var(--text);
            --defrow-border: #bbd7e9;

            --datacell-border: silver;

            --indexinfo-text: #707070;

            --indextable-hover-text: black;
            --indextable-hover-bg: #f7f8f9;

            --outdatedspec-bg: rgba(0, 0, 0, .5);
            --outdatedspec-text: black;
            --outdated-bg: maroon;
            --outdated-text: white;
            --outdated-shadow: red;

            --editedrec-bg: darkorange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --text: #ddd;
                --bg: black;

                --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

                --logo-bg: #1a5e9a;
                --logo-active-bg: #c00;
                --logo-text: white;

                --tocnav-normal-text: #999;
                --tocnav-normal-bg: var(--bg);
                --tocnav-hover-text: var(--tocnav-normal-text);
                --tocnav-hover-bg: #080808;
                --tocnav-active-text: #f44;
                --tocnav-active-bg: var(--tocnav-normal-bg);

                --tocsidebar-text: var(--text);
                --tocsidebar-bg: #080808;
                --tocsidebar-shadow: rgba(255, 255, 255, .1);
                --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

                --toclink-text: var(--text);
                --toclink-underline: #6af;
                --toclink-visited-text: var(--toclink-text);
                --toclink-visited-underline: #054572;

                --heading-text: #8af;

                --hr-text: var(--text);

                --algo-border: #456;

                --del-text: #f44;
                --del-bg: transparent;
                --ins-text: #4a4;
                --ins-bg: transparent;

                --a-normal-text: #6af;
                --a-normal-underline: #555;
                --a-visited-text: var(--a-normal-text);
                --a-visited-underline: var(--a-normal-underline);
                --a-hover-bg: rgba(25%, 25%, 25%, .2);
                --a-active-text: #f44;
                --a-active-underline: var(--a-active-text);

                --borderedblock-bg: rgba(255, 255, 255, .05);

                --blockquote-border: silver;
                --blockquote-bg: var(--borderedblock-bg);
                --blockquote-text: currentcolor;

                --issue-border: #e05252;
                --issue-bg: var(--borderedblock-bg);
                --issue-text: var(--text);
                --issueheading-text: hsl(0deg, 70%, 70%);

                --example-border: hsl(50deg, 90%, 60%);
                --example-bg: var(--borderedblock-bg);
                --example-text: var(--text);
                --exampleheading-text: hsl(50deg, 70%, 70%);

                --note-border: hsl(120deg, 100%, 35%);
                --note-bg: var(--borderedblock-bg);
                --note-text: var(--text);
                --noteheading-text: hsl(120, 70%, 70%);
                --notesummary-underline: silver;

                --assertion-border: #444;
                --assertion-bg: var(--borderedblock-bg);
                --assertion-text: var(--text);

                --advisement-border: orange;
                --advisement-bg: #222218;
                --advisement-text: var(--text);
                --advisementheading-text: #f84;

                --warning-border: red;
                --warning-bg: hsla(40, 100%, 20%, 0.95);
                --warning-text: var(--text);

                --amendment-border: #330099;
                --amendment-bg: #080010;
                --amendment-text: var(--text);
                --amendmentheading-text: #cc00ff;

                --def-border: #8ccbf2;
                --def-bg: #080818;
                --def-text: var(--text);
                --defrow-border: #136;

                --datacell-border: silver;

                --indexinfo-text: #aaa;

                --indextable-hover-text: var(--text);
                --indextable-hover-bg: #181818;

                --outdatedspec-bg: rgba(255, 255, 255, .5);
                --outdatedspec-text: black;
                --outdated-bg: maroon;
                --outdated-text: white;
                --outdated-shadow: red;

                --editedrec-bg: darkorange;
            }

            /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
            img {
                background: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-counters */
        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* Boilerplate: style-dfn-panel */
        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dfnpanel-bg: #222;
                --dfnpanel-text: var(--text);
            }
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0 0 0 1em;
            list-style: none;
        }

        .dfn-panel li a {
            white-space: pre;
            display: inline-block;
            max-width: calc(300px - 1.5em - 1em);
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled[role="button"] {
            cursor: pointer;
        }
    </style>
    <style>
        /* Boilerplate: style-dfn-panel */
        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dfnpanel-bg: #222;
                --dfnpanel-text: var(--text);
            }
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0 0 0 1em;
            list-style: none;
        }

        .dfn-panel li a {
            white-space: pre;
            display: inline-block;
            max-width: calc(300px - 1.5em - 1em);
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled[role="button"] {
            cursor: pointer;
        }
    </style>
    <style>
        /* Boilerplate: style-issues */
        a[href].issue-return {
            float: right;
            float: inline-end;
            color: var(--issueheading-text);
            font-weight: bold;
            text-decoration: none;
        }
    </style>
    <style>
        /* Boilerplate: style-md-lists */
        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* Boilerplate: style-selflinks */

        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        .example>a.self-link,
        .note>a.self-link,
        .issue>a.self-link {
            /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
            left: auto;
            right: 0;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD" rel="stylesheet">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
        <h1 class="p-name no-ref" id="title">CSSビューポート・モジュール レベル1</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#FPWD">W3C 初回公開ワーキングドラフト</a>、<time
                class="dt-updated" datetime="2024-01-25">2024年1月25日</time></p>
        <details open>
            <summary>この文書の詳細</summary>
            <div data-fill-with="spec-metadata">
                <dl>
                    <dt>このバージョン:
                    <dd><a class="u-url"
                            href="https://www.w3.org/TR/2024/WD-css-viewport-1-20240125/">https://www.w3.org/TR/2024/WD-css-viewport-1-20240125/</a>
                    <dt>最新版公開バージョン:
                    <dd><a href="https://www.w3.org/TR/css-viewport-1/">https://www.w3.org/TR/css-viewport-1/</a>
                    <dt>編集者ドラフト:
                    <dd><a href="https://drafts.csswg.org/css-viewport/">https://drafts.csswg.org/css-viewport/</a>
                    <dt>以前のバージョン:
                    <dd><a href="https://www.w3.org/TR/2016/WD-css-device-adapt-1-20160329/"
                            rel="prev">https://www.w3.org/TR/2016/WD-css-device-adapt-1-20160329/</a>
                    <dt>履歴:
                    <dd><a class="u-url"
                            href="https://www.w3.org/standards/history/css-viewport-1/">https://www.w3.org/standards/history/css-viewport-1/</a>
                    <dt>フィードバック:
                    <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-viewport-1">CSSWG イシューレポジトリ</a>
                    <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-viewport-1">CSSWG GitHub</a>
                    <dd><a href="#issues-index">仕様内インライン</a>
                    <dt class="editor">編集者:
                    <dd class="editor p-author h-card vcard" data-editor-id="43241"><a class="p-name fn u-url url"
                            href="https://florian.rivoal.net">Florian Rivoal</a> (<span class="p-org org">招待専門家</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="106537"><a class="p-name fn u-email email"
                            href="mailto:emilio@mozilla.com">Emilio Cobos Álvarez</a> (<span
                            class="p-org org">Mozilla</span>)
                    <dt class="editor">以前の編集者:
                    <dd class="editor p-author h-card vcard" data-editor-id="62267"><span class="p-name fn">Matt
                            Rakow</span> (<span class="p-org org">Microsoft</span>)
                    <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email"
                            href="mailto:rune@opera.com">Rune Lillesveen</a> (<span class="p-org org">Opera
                            Software</span>)
                    <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email"
                            href="mailto:rbetts@adobe.com">Ryan Betts</a> (<span class="p-org org">Adobe Systems</span>)
                    <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email"
                            href="mailto:oyvinds@opera.com">Øyvind Stenhaug</a> (<span class="p-org org">Opera
                            Software</span>)
                    <dt>この仕様への編集提案:
                    <dd><a href="https://github.com/w3c/csswg-drafts/blob/main/css-viewport/Overview.bs">GitHub
                            エディター</a>
                </dl>
            </div>
        </details>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> ©
            2024 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr
                title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a
                href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/copyright/software-license/" rel="license"
                title="W3C Software and Document License">permissive document license</a> rules apply. </p>
        <hr title="Separator for header">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">概要</span></h2>
        <p>この仕様は、著者がCSSで初期包含ブロックの基準となるビューポートのサイズ、ズーム係数、および向きを指定する方法を提供します。</p>
        <a href="https://www.w3.org/TR/CSS/">CSS</a> は、構造化文書（HTMLやXMLなど）の画面、紙などでのレンダリングを記述する言語です。
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">この文書の位置付け</span></h2>
    <div data-fill-with="status">
        <p><em>このセクションは、この文書の発行時点での位置付けを説明します。
                現在のW3C出版物の一覧と、この技術報告書の最新版は
                <a href="https://www.w3.org/TR/">W3C技術報告一覧 https://www.w3.org/TR/</a> で確認できます。</em></p>
        <p> この文書は <a href="https://www.w3.org/groups/wg/css">CSSワーキンググループ</a> により、<strong>初回公開ワーキングドラフト</strong>として <a
                href="https://www.w3.org/2023/Process-20231103/#recs-and-notes">勧告ルート</a>を用いて発行されました。
            初回公開ワーキングドラフトとしての公開は、<abbr title="World Wide Web Consortium">W3C</abbr>およびそのメンバーによる支持を意味するものではありません。
        </p>
        <p> この文書はドラフトであり、随時更新・置換・廃止される可能性があります。
            この文書を進行中の作業以外のものとして引用するのは適切ではありません。</p>
        <p>ご意見は、<a href="https://github.com/w3c/csswg-drafts/issues">GitHubでIssueを登録</a>（推奨）してお寄せください。その際、タイトルに仕様コード
            “css-viewport” を含めて、
            例えば “[css-viewport] <i>…コメントの要約…</i>” のようにしてください。
            すべてのIssueとコメントは<a href="https://lists.w3.org/Archives/Public/public-css-archive/">アーカイブ</a>されます。
            または、（<a href="https://lists.w3.org/Archives/Public/www-style/">アーカイブ</a>付き）公開メーリングリスト
            <a href="mailto:www-style@w3.org?Subject=%5Bcss-viewport%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>
            へフィードバックを送っていただくこともできます。
        </p>
        <p>この文書は、<a href="https://www.w3.org/2023/Process-20231103/"
                id="w3c_process_revision">2023年11月3日W3Cプロセス文書</a>に従って管理されています。</p>
        <p>この文書は、<a href="https://www.w3.org/Consortium/Patent-Policy-20200915/">W3C特許ポリシー</a>の下で運用されているグループによって作成されました。
            W3Cは、グループの成果物に関連した<a href="https://www.w3.org/groups/wg/css/ipr" rel="disclosure">公開特許開示リスト</a>を管理しています。
            そのページでは、特許開示の方法も案内しています。
            実際に特許を知っており、それが<a
                href="https://www.w3.org/Consortium/Patent-Policy-20200915/#def-essential">必須クレーム</a>を含むと考える個人は、
            <a
                href="https://www.w3.org/Consortium/Patent-Policy-20200915/#sec-Disclosure">W3C特許ポリシー6節</a>に従って情報開示を行う必要があります。
        </p>
        <p></p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目次</h2>
        <ol class="toc" role="directory">
            <li><a href="#intro"><span class="secno">1</span> <span class="content"> はじめに</span></a>
            <li><a href="#the-viewport"><span class="secno">2</span> <span class="content"> ビューポート</span></a>
            <li>
                <a href="#viewport-meta"><span class="secno">3</span> <span class="content"> ビューポート <code
                            class="html">&lt;meta></code> 要素</span></a>
                <ol class="toc">
                    <li><a href="#meta-properties"><span class="secno">3.1</span> <span class="content">
                                プロパティ</span></a>
                    <li><a href="#parsing-algorithm"><span class="secno">3.2</span> <span class="content">
                                パースアルゴリズム</span></a>
                    <li><a href="#extend-to-zoom"><span class="secno">3.3</span> <span class="content"><span
                                    class="css">extend-to-zoom</span></span></a>
                    <li>
                        <a href="#interactive-widget-section"><span class="secno">3.4</span> <span class="content"><span
                                    class="css">interactive-widget</span></span></a>
                        <ol class="toc">
                            <li><a href="#interaction-with-virtualkeyboard-overlayscontent"><span
                                        class="secno">3.4.1</span> <span class="content">
                                        virtualKeyboard.overlaysContent との連携</span></a>
                        </ol>
                </ol>
            <li>
                <a href="#changes"><span class="secno"></span> <span class="content">付録A. 変更点</span></a>
                <ol class="toc">
                    <li><a href="#since-the-29-march-2016-working-draft"><span class="secno"></span> <span
                                class="content">2016年3月29日ワーキングドラフト以降</span></a>
                    <li><a href="#since-the-15-september-2011-first-public-working-draft"><span class="secno"></span>
                            <span class="content">2011年9月15日初回公開ワーキングドラフト以降</span></a>
                </ol>
            <li>
                <a href="#w3c-conformance"><span class="secno"></span> <span class="content">適合性</span></a>
                <ol class="toc">
                    <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content"> 文書上の規約</span></a>
                    <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span class="content">
                                適合クラス</span></a>
                    <li>
                        <a href="#w3c-partial"><span class="secno"></span> <span class="content"> 部分実装</span></a>
                        <ol class="toc">
                            <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span
                                        class="content">不安定・独自機能の実装について</span></a>
                        </ol>
                    <li><a href="#w3c-testing"><span class="secno"></span> <span class="content"> 非実験的実装</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本仕様で定義されている用語</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">参照により定義されている用語</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">規範的参考文献</span></a>
                    <li><a href="#informative"><span class="secno"></span> <span class="content">参考情報的参考文献</span></a>
                </ol>
            <li><a href="#issues-index"><span class="secno"></span> <span class="content">課題一覧</span></a>
        </ol>
    </nav>
    <main>
        <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">
                はじめに</span><a class="self-link" href="#intro"></a></h2>
        <div class="non-normative">
            <em>このセクションは規範的ではありません。</em>
            <p>CSS 2.1 <a data-link-type="biblio" href="#biblio-css21"
                    title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS21]</a> では、
                <a href="https://www.w3.org/TR/CSS21/visudet.html#containing-block-details">初期包含ブロック</a>が
                <a data-link-type="dfn" href="https://www.w3.org/TR/mediaqueries-5/#continuous-media"
                    id="ref-for-continuous-media">連続メディア</a>の場合に
                <a href="https://www.w3.org/TR/CSS21/visuren.html#viewport">ビューポート</a>のサイズで定義されます。
                ビューポートは一般的に表示領域以上になることはないため、スマートフォンやタブレットのような小さな画面を持つデバイスは、
                デスクトップやノートPCなどの大きなデバイスよりも小さなビューポートを持つことになります。
            </p>
            <p>しかし、多くのドキュメントは歴史的に大きなビューポートを前提に設計されてきたため、
                小さなビューポートで表示した際に様々な不具合が発生します。
                これには、意図しないレイアウトの折り返し、コンテンツの切り捨て、スクロール範囲の問題、
                スクリプトエラーなどが含まれます。これらの問題を回避するため、モバイルブラウザは一般的に
                デスクトップブラウザのウィンドウサイズ（おおよそ980～1024px）を模倣した
                固定の初期包含ブロック幅を使用します。この結果、レイアウトは画面に収まるよう縮小されます。</p>
            <p>この方法は上述の問題を緩和しますが、縮小されることでCSSピクセルサイズは
                CSS 2.1で推奨される値より小さくなります。
                ユーザーは快適に閲覧するためにコンテンツを拡大表示（ズーム）する必要がある場合があります。</p>
            <p>このような対策は、小さなビューポートでも適切に動作するように設計されたサイトでは不要です。</p>
            <p class="issue" id="issue-6c09d247"><a class="self-link" href="#issue-6c09d247"></a>
                この仕様書は実装者視点から記述されており、読みづらい部分があります。
                異なる読者層のためにも理解しやすくするための編集作業が必要かもしれません。
                また、各種JS APIがどのビューポートを指しているかも明確化すべきです。
                これらの課題の詳細な議論は<a
                    href="http://www.quirksmode.org/blog/archives/2015/09/a_new_device_ad.html">ppkのこのブログ記事</a>にあります。
            </p>
            <p class="issue" id="issue-212a8da7"><a class="self-link" href="#issue-212a8da7"></a> この仕様や関連仕様に関する様々な課題は
                <a
                    href="https://www.w3.org/Graphics/SVG/WG/wiki/Proposals/Investigation_of_APIs_for_Level_of_detail#The_issues_on_existing_APIs">このレポート</a>
                にリストされています。
            </p>
        </div>
        <h2 class="heading settled" data-level="2" id="the-viewport"><span class="secno">2. </span><span
                class="content"> ビューポート</span><a class="self-link" href="#the-viewport"></a></h2>
        <p>CSS 2.1 において <a href="https://www.w3.org/TR/CSS21/visuren.html#viewport">ビューポート</a>は、
            <a data-link-type="dfn" href="https://www.w3.org/TR/mediaqueries-5/#continuous-media"
                id="ref-for-continuous-media①">連続メディア</a>のためのユーザーエージェントの機能であり、
            <span id="ref-for-continuous-media②">連続メディア</span>の初期包含ブロックの基準として使われます。
            <a data-link-type="dfn" href="https://www.w3.org/TR/mediaqueries-5/#paged-media"
                id="ref-for-paged-media">ページメディア</a>では、初期包含ブロックはページ領域を基準とします。
            ページ領域は<a class="css" data-link-type="maybe" href="https://www.w3.org/TR/css-page-3/#at-ruledef-page"
                id="ref-for-at-ruledef-page">@page</a>ルールで設定できます。
        </p>
        <p>本仕様は、ユーザーエージェント（UA）が提供するビューポートのサイズを上書きする方法を示します。
            そのため、<span class="css">初期ビューポート</span>と<span class="css">実際のビューポート</span>の違いについて説明する必要があります。</p>
        <dl>
            <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="initial-viewport">初期ビューポート</dfn>
            <dd> これはUAのウィンドウや表示領域によって与えられるビューポートが、
                UAや著者のスタイルによって上書きされる前の状態を指します。
                <span class="css">初期ビューポート</span>のサイズはウィンドウや表示領域のサイズが変化すると連動して変化します。
            <dt><dfn data-dfn-type="dfn" data-noexport id="actual-viewport">実際のビューポート<a class="self-link"
                        href="#actual-viewport"></a></dfn>
            <dd> これはビューポートの<code>&lt;meta></code>タグの処理後に得られるビューポートを指します。
        </dl>
        <p class="issue" id="issue-44630653"><a class="self-link" href="#issue-44630653"></a> <span
                class="css">実際のビューポート</span>をレイアウトビューポートとし、「visual viewport」を定義する。</p>
        <p><span class="css">実際のビューポート</span>がウィンドウや表示領域に収まらない場合、つまり
            <span class="css">実際のビューポート</span>が<span class="css">初期ビューポート</span>より大きい場合や
            ズーム係数により<span class="css">実際のビューポート</span>の一部のみが表示される場合、UAはスクロール・パン操作を提供すべきです。
        </p>
        <p>文書の基本方向がltrの場合は、最初は<span class="css">実際のビューポート</span>と
            ウィンドウまたは表示領域の左上を揃えることが推奨されます。rtlの場合は右上を揃えます。
            文書の基本方向は、HTMLやXHTML文書では最初の<code class="html">&lt;BODY></code>要素の<a class="property css"
                data-link-type="property" href="https://www.w3.org/TR/css-writing-modes-3/#propdef-direction"
                id="ref-for-propdef-direction">direction</a>プロパティの計算値とし、他の文書型ではルート要素の
            <span class="property" id="ref-for-propdef-direction①">direction</span>プロパティの計算値です。
        </p>
        <h2 class="heading settled" data-level="3" id="viewport-meta"><span class="secno">3. </span><span
                class="content"> ビューポート <code class="html">&lt;meta></code> 要素</span><a class="self-link"
                href="#viewport-meta"></a></h2>
        <p class="issue" id="issue-76355744"><a class="self-link" href="#issue-76355744"></a> 詳細な仕様を書くこと</p>
        <h3 class="heading settled" data-level="3.1" id="meta-properties"><span class="secno">3.1. </span><span
                class="content"> プロパティ</span><a class="self-link" href="#meta-properties"></a></h3>
        <p>ビューポートの<code class="html">&lt;meta></code>要素で認識されるプロパティは以下の通りです：</p>
        <ul>
            <li><code class="index" data-lt="width!!viewport meta">width</code>
            <li><code class="index" data-lt="height!!viewport meta">height</code>
            <li><code class="index">initial-scale</code>
            <li><code class="index">minimum-scale</code>
            <li><code class="index">maximum-scale</code>
            <li><code class="index">user-scalable</code>
            <li><code class="index">interactive-widget</code>
        </ul>
        <h3 class="heading settled" data-level="3.2" id="parsing-algorithm"><span class="secno">3.2. </span><span
                class="content"> パースアルゴリズム</span><a class="self-link" href="#parsing-algorithm"></a></h3>
        <p>以下は、iPhoneのSafariでテストした<code class="html">&lt;meta></code>タグの<code class="html">content</code>属性の
            パースアルゴリズムです。<span class="note">テスト環境はiPhone OS 4搭載iPod touch。
                ブラウザUA文字列:
                <code>"Mozilla/5.0 (iPod; U; CPU iPhone OS 4_0 like Mac OS X;
en-us) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5
Mobile/8A293 Safari/6531.22.7"</code>
                です。</span>
            疑似コード表記は<a data-link-type="biblio" href="#biblio-algorithms"
                title="Introduction to Algorithms, Second Edition, MIT Press">[Algorithms]</a>の記法に基づいています。</p>
        <p>whitespaceクラスには以下（ascii）の文字が含まれます：</p>
        <ul>
            <li>水平タブ (0x09)
            <li>改行 (0x0a)
            <li>復帰 (0x0d)
            <li>スペース (0x20)
        </ul>
        <p>プロパティ/値ペアの区切りとしてSafari実装ではカンマを認識します。
            一部実装ではカンマとセミコロン両方がサポートされてきました。
            そのため既存コンテンツにはセミコロンが使われることがありますが、
            著者はすべてのUAで意図通り動作するようカンマを用いるべきです。
            実装者側では互換性のため両方の区切り文字をサポートしても構いません。</p>
        <p>separatorクラスには以下（ascii）の文字が含まれます。推奨区切りはカンマ、セミコロンは任意：</p>
        <ul>
            <li>カンマ (0x2c)
            <li>セミコロン (0x3b)
        </ul>
        <pre id="algorithm"><span class="method"><span class="method-name">Parse-Content</span>(<span class="variable">S</span>)</span>
<span class="statement"><span class="variable">i</span> ← 1</span>
<span class="statement"><span class="keyword">while</span> <span class="variable">i</span> ≤ <span class="op">length</span>[<span class="variable">S</span>]</span>
<span class="statement">  <span class="keyword">do</span> <span class="keyword">while</span> <span class="variable">i</span> ≤ <span class="op">length</span>[<span class="variable">S</span>] and <span class="variable">S</span>[<span class="variable">i</span>] in [whitespace, separator, '=']</span>
<span class="statement">    <span class="keyword">do</span> <span class="variable">i</span> ← <span class="variable">i</span> + 1</span>
<span class="statement">  <span class="keyword">if</span> <span class="variable">i</span> ≤ <span class="op">length</span>[<span class="variable">S</span>]</span>
<span class="statement">    <span class="keyword">then</span> <span class="variable">i</span> ← <span class="method-name">Parse-Property</span>(<span class="variable">S</span>, <span class="variable">i</span>)</span>

<span class="method"><span class="method-name">Parse-Property</span>(<span class="variable">S</span>, <span class="variable">i</span>)</span>
<span class="statement"><span class="variable">start</span> ← <span class="variable">i</span></span>
<span class="statement"><span class="keyword">while</span> <span class="variable">i</span> ≤ <span class="op">length</span>[<span class="variable">S</span>] and <span class="variable">S</span>[<span class="variable">i</span>] <span class="keyword">not</span> in [whitespace, separator, '=']</span>
<span class="statement">  <span class="keyword">do</span> <span class="variable">i</span> ← <span class="variable">i</span> + 1</span>
<span class="statement"><span class="keyword">if</span> <span class="variable">i</span> > <span class="op">length</span>[<span class="variable">S</span>] or <span class="variable">S</span>[<span class="variable">i</span>] in [separator]</span>
<span class="statement">  <span class="keyword">then</span> <span class="keyword">return</span> <span class="variable">i</span></span>
<span class="statement"><span class="variable">property-name</span> ← <span class="variable">S</span>[<span class="variable">start</span> .. (<span class="variable">i</span> - 1)]</span>
<span class="statement"><span class="keyword">while</span> <span class="variable">i</span> ≤ <span class="op">length</span>[<span class="variable">S</span>] and <span class="variable">S</span>[<span class="variable">i</span>] <span class="keyword">not</span> in [separator, '=']</span>
<span class="statement">  <span class="keyword">do</span> <span class="variable">i</span> ← <span class="variable">i</span> + 1</span>
<span class="statement"><span class="keyword">if</span> <span class="variable">i</span> > <span class="op">length</span>[<span class="variable">S</span>] or <span class="variable">S</span>[<span class="variable">i</span>] in [separator]</span>
<span class="statement">  <span class="keyword">then</span> <span class="keyword">return</span> <span class="variable">i</span></span>
<span class="statement"><span class="keyword">while</span> <span class="variable">i</span> ≤ <span class="op">length</span>[<span class="variable">S</span>] and <span class="variable">S</span>[<span class="variable">i</span>] in [whitespace, '=']</span>
<span class="statement">  <span class="keyword">do</span> <span class="variable">i</span> ← <span class="variable">i</span> + 1</span>
<span class="statement"><span class="keyword">if</span> <span class="variable">i</span> > <span class="op">length</span>[<span class="variable">S</span>] or <span class="variable">S</span>[<span class="variable">i</span>] in [separator]</span>
<span class="statement">  <span class="keyword">then</span> <span class="keyword">return</span> <span class="variable">i</span></span>
<span class="statement"><span class="variable">start</span> ← <span class="variable">i</span></span>
<span class="statement"><span class="keyword">while</span> <span class="variable">i</span> ≤ <span class="op">length</span>[<span class="variable">S</span>] and <span class="variable">S</span>[<span class="variable">i</span>] <span class="keyword">not</span> in [whitespace, separator, '=']</span>
<span class="statement">  <span class="keyword">do</span> <span class="variable">i</span> ← <span class="variable">i</span> + 1</span>
<span class="statement"><span class="variable">property-value</span> ← <span class="variable">S</span>[<span class="variable">start</span> .. (<span class="variable">i</span> - 1)]</span>
<span class="statement"><span class="method-name">Set-Property</span>(<span class="variable">property-name</span>, <span class="variable">property-value</span>)</span>
<span class="statement"><span class="keyword">return</span> <span class="variable">i</span></span>
</pre>
        <p><span class="method-name">Set-Property</span> は<a href="#meta-properties">リストされたプロパティ名</a>と
            大文字小文字を区別せずに一致します。
            <code class="variable">property-value</code>の解釈は次の通りです：
        </p>
        <ol>
            <li><code class="variable">property-value</code>の先頭が<code>strtod</code>で数値に変換できる場合、
                その値を使用します。残りの文字列は無視します。
            <li>上記で数値に変換できない場合は
                <code class="variable">property-value</code>文字列全体を以下の文字列と大文字小文字区別せず
                比較します：
                <code class="index">yes</code>、<code class="index">no</code>、
                <code class="index" data-lt="device-width!!viewport meta">device-width</code>、
                <code class="index" data-lt="device-height!!viewport meta">device-height</code>
            <li>いずれとも一致しなかった場合、その値は未知とみなします。
        </ol>
        <h3 class="heading settled" data-level="3.3" id="extend-to-zoom"><span class="secno">3.3. </span><span
                class="content"><span class="css">extend-to-zoom</span></span><a class="self-link"
                href="#extend-to-zoom"></a></h3>
        <p class="issue" id="issue-275fe943"><a class="self-link" href="#issue-275fe943"></a> viewport
            metaタグによるextend-to-zoomの動作仕様の記述</p>
        <h3 class="heading settled" data-level="3.4" id="interactive-widget-section"><span class="secno">3.4.
            </span><span class="content"><span class="css">interactive-widget</span></span><a class="self-link"
                href="#interactive-widget-section"></a></h3>
        <p class="issue" id="issue-e08318e1"><a class="self-link" href="#issue-e08318e1"></a> <span class="css">visual
                viewport</span>の定義をCSSOM-Viewからこの仕様へ移動</p>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export
                id="interactive-widget"><code>interactive-widget</code></dfn>プロパティは、インタラクティブなUIウィジェットがページのビューポートに対して与える影響を指定します。
            このプロパティで、ウィジェットが指定ビューポートと重なるのか、それともウィジェットが表示されている間もビューポート全体が見えるように縮小するのか決定できます。
            インタラクティブUIウィジェットは、ユーザーが入力できる一時的なユーザーエージェントまたはOSのUIです。</p>
        <div class="note" role="note">最も一般的なこの種のUIウィジェットは仮想キーボードです。</div>
        <p><a data-link-type="dfn" href="#interactive-widget"
                id="ref-for-interactive-widget">interactive-widget</a>の有効な値とそのビューポートリサイズ動作の一覧：</p>
        <dl>
            <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                    id="overlays-content"><code>overlays-content</code></dfn>
            <dd> インタラクティブUIウィジェットは<a data-link-type="dfn" href="#resize" id="ref-for-resize">リサイズ</a>してはならず、<a
                    data-link-type="dfn" href="#initial-viewport" id="ref-for-initial-viewport">初期ビューポート</a>や
                <a data-link-type="dfn" href="https://drafts.csswg.org/cssom-view-1/#visual-viewport"
                    id="ref-for-visual-viewport">visual viewport</a>には影響しません。ユーザーエージェントは
                <code
                    class="idl"><a data-link-type="idl" href="https://w3c.github.io/virtual-keyboard#dom-virtualkeyboard-overlayscontent" id="ref-for-dom-virtualkeyboard-overlayscontent">VirtualKeyboard.overlaysContent</a></code>
                が<code>true</code>の場合と同様の手順を踏みます。
            <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                    id="resizes-content"><code>resizes-content</code></dfn>
            <dd>
                インタラクティブUIウィジェットは<a data-link-type="dfn" href="#resize" id="ref-for-resize①">リサイズ</a>して
                <a data-link-type="dfn" href="#initial-viewport" id="ref-for-initial-viewport①">初期ビューポート</a>に影響を与えます。
                <div class="note" role="note"> <a data-link-type="dfn"
                        href="https://drafts.csswg.org/cssom-view-1/#visual-viewport"
                        id="ref-for-visual-viewport①">visual viewport</a>のサイズは<a data-link-type="dfn"
                        href="#initial-viewport" id="ref-for-initial-viewport②">初期ビューポート</a>から導かれるため、
                    <a data-link-type="dfn" href="#resizes-content"
                        id="ref-for-resizes-content">resizes-content</a>では初期ビューポート・visual viewport両方がリサイズされます。
                </div>
            <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                    id="resizes-visual"><code>resizes-visual</code></dfn>
            <dd> インタラクティブUIウィジェットは<a data-link-type="dfn" href="#resize" id="ref-for-resize②">リサイズ</a>で
                <a data-link-type="dfn" href="https://drafts.csswg.org/cssom-view-1/#visual-viewport"
                    id="ref-for-visual-viewport②">visual viewport</a>にのみ影響を与え、
                <span id="ref-for-resize③">リサイズ</span>で<a data-link-type="dfn"
                    href="https://drafts.csswg.org/css-viewport/#initial-viewport"
                    id="ref-for-initial-viewport③">初期ビューポート</a>には影響しません。
        </dl>
        <p><a data-link-type="dfn" href="#interactive-widget"
                id="ref-for-interactive-widget①">interactive-widget</a>に値が指定されていない、または無効値の場合は、
            <a data-link-type="dfn" href="#resizes-visual"
                id="ref-for-resizes-visual">resizes-visual</a>の動作がデフォルトとして使われます。
        </p>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="resize" data-noexport
                id="resize">インタラクティブウィジェットによるビューポートのリサイズ</dfn>とは、
            ビューポート矩形とウィジェットのOSが報告する外接矩形との交差領域を差し引くことです。
            この結果ビューポートが長方形でなくなる場合、挙動はユーザーエージェント任意とされます。</p>
        <div class="note" role="note"> 長方形にならない一例：<a
                href="https://support.apple.com/en-ca/HT207521">フローティングまたは分割キーボード</a>や、<a
                href="https://github.com/MicrosoftEdge/MSEdgeExplainers/blob/main/VirtualKeyboardAPI/explainer.md#motivation">
                ビューポートの一部のみを占有する</a>キーボードなど。</div>
        <h4 class="heading settled" data-level="3.4.1" id="interaction-with-virtualkeyboard-overlayscontent"><span
                class="secno">3.4.1. </span><span class="content"> virtualKeyboard.overlaysContent との連携
            </span><a class="self-link" href="#interaction-with-virtualkeyboard-overlayscontent"></a></h4>
        <p><a data-link-type="biblio" href="#biblio-virtual-keyboard"
                title="VirtualKeyboard API">[VIRTUAL-KEYBOARD]</a>は
            <a data-link-type="dfn" href="#overlays-content"
                id="ref-for-overlays-content">overlays-content</a>挙動を適用するAPIを提供します。
            これは<code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/virtual-keyboard#dom-virtualkeyboard-overlayscontent" id="ref-for-dom-virtualkeyboard-overlayscontent①">VirtualKeyboard.overlaysContent</a></code>
            属性で操作可能です。この属性は<a data-link-type="dfn" href="#interactive-widget"
                id="ref-for-interactive-widget②">interactive-widget</a>で設定された値より優先され、以下の通り動作します：
        </p>
        <p><code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/virtual-keyboard#dom-virtualkeyboard-overlayscontent" id="ref-for-dom-virtualkeyboard-overlayscontent②">VirtualKeyboard.overlaysContent</a></code>
            が<code>true</code>の場合、UAはインタラクティブウィジェットのリサイズ判断時に
            <a data-link-type="dfn" href="#interactive-widget"
                id="ref-for-interactive-widget③">interactive-widget</a>で指定した値を無視しなければなりません。
        </p>
        <p><code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/virtual-keyboard#dom-virtualkeyboard-overlayscontent" id="ref-for-dom-virtualkeyboard-overlayscontent③">VirtualKeyboard.overlaysContent</a></code>
            が<code>false</code>の場合、UAは
            <a data-link-type="dfn" href="#interactive-widget"
                id="ref-for-interactive-widget④">interactive-widget</a>で指定された値、または指定がなければデフォルト挙動を
            用いてインタラクティブウィジェットのリサイズ挙動を決定しなければなりません。
        </p>
        <p><code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/virtual-keyboard#dom-virtualkeyboard-overlayscontent" id="ref-for-dom-virtualkeyboard-overlayscontent④">VirtualKeyboard.overlaysContent</a></code>
            の値取得は、以前に設定された値のみ返さなければなりません。</p>
        <div class="note" role="note"> つまり、明示的に設定されていなければ、
            <code>VirtualKeyboard.overlaysContent</code>は
            <code>&lt;meta></code>タグで<code>interactive-widget=overlays-content</code>が設定されていてもfalseを返します。
        </div>
        <h2 class="no-num heading settled" id="changes"><span class="content">付録A. 変更点</span><a class="self-link"
                href="#changes"></a></h2>
        <p>この付録は<em>参考情報</em>です。</p>
        <h3 class="no-num heading settled" id="since-the-29-march-2016-working-draft"><span class="content"><a
                    href="https://www.w3.org/TR/2016/WD-css-device-adapt-1-20160329/">2016年3月29日ワーキングドラフト以降</a>
            </span><a class="self-link" href="#since-the-29-march-2016-working-draft"></a></h3>
        <ul>
            <li>ビューポートメタに<a class="property css" data-link-type="property">interactive-widgets</a>プロパティを追加
            <li>@viewportルールを削除
            <li>仕様名をdevice-adaptからcss-viewportに改名
            <li>CSSViewportRuleをWindowに公開
        </ul>
        <h3 class="no-num heading settled" id="since-the-15-september-2011-first-public-working-draft"><span
                class="content"><a
                    href="https://www.w3.org/TR/2011/WD-css-device-adapt-20110915/">2011年9月15日初回公開ワーキングドラフト以降</a>
            </span><a class="self-link" href="#since-the-15-september-2011-first-public-working-draft"></a></h3>
        <ul>
            <li>様々な編集的修正と明確化の実施
            <li>OMインターフェース追加
            <li>メタビューポートにセミコロン区切り追加
            <li>UAスタイルシートの章追加
            <li>orientationプロパティを尊重する場面の推奨追加
            <li>resolutionデスクリプタ廃止
            <li>width/heightとzoomを分離し、メタビューポート変換用に<span class="css">extend-to-zoom</span>値を導入
            <li>@viewportと@mediaの連携に関する規範的なルール追加
            <li><a class="production css" data-link-type="type">&lt;viewport-length></a>や<span
                    class="property">zoom</span>値に0を許容
            <li>device-width/heightサポートを削除
            <li>@viewportはトップレベル文書のみに適用
            <li><a data-link-type="biblio" href="#biblio-css3-conditional"
                    title="CSS Conditional Rules Module Level 3">[CSS3-CONDITIONAL]</a>拡張部分を@mediaの入れ子用に採用し、CSS21には依存しない形に
            <li>@viewport 削除
        </ul>
    </main>
    <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">適合性</span><a class="self-link"
            href="#w3c-conformance"></a></h2>
    <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content"> 文書上の規約</span><a class="self-link"
            href="#w3c-conventions"></a></h3>
    <p>適合要件は記述的な主張とRFC 2119用語の組み合わせで表現されています。 重要な語句 “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”,
        “SHOULD NOT”, “RECOMMENDED”, “MAY”, “OPTIONAL” の本仕様での解釈は RFC 2119 に記載された通りとなります。
        ただし、可読性のため、これらの語句はすべて大文字で表記されているわけではありません。</p>
    <p>本仕様のテキストは、非規範的と明記されたセクション、例、および注記を除き、すべて規範的です。<a data-link-type="biblio" href="#biblio-rfc2119"
            title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a></p>
    <p>本仕様の例は「例えば」で始めるか、<code>class="example"</code>でマークされ、このように表示されます：</p>
    <div class="example" id="w3c-example">
        <a class="self-link" href="#w3c-example"></a>
        <p>これは参考的な例のひとつです。</p>
    </div>
    <p>参考情報的な注記は「注意」で始まり、規範的テキストと区別するため<code>class="note"</code>で装飾され、このように表示されます：</p>
    <p class="note" role="note">注意：これは参考情報的な注記です。</p>
    <p>勧告事項（advisements）は規範的セクションであり、特に注意を促すため<code>&lt;strong class="advisement"></code>で装飾されます。例：
        <strong class="advisement"> ユーザーエージェントは代替手段を必ず提供しなければなりません。 </strong>
    </p>
    <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content">適合クラス</span><a
            class="self-link" href="#w3c-conformance-classes"></a></h3>
    <p>本仕様への適合性は3つのクラスで定義されます：</p>
    <dl>
        <dt>スタイルシート
        <dd><a href="https://www.w3.org/TR/CSS21/conform.html#style-sheet">CSSスタイルシート</a>。
        <dt>レンダラー
        <dd><a
                href="https://www.w3.org/TR/CSS21/conform.html#user-agent">ユーザーエージェント（UA）</a>で、スタイルシートのセマンティクスを解釈し、それを利用する文書を描画します。
        <dt>オーサリングツール
        <dd><a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">ユーザーエージェント（UA）</a>で、スタイルシートを作成します。
    </dl>
    <p>スタイルシートが本仕様に適合しているとは、本モジュールで定義された構文を使う記述がすべて、CSS一般文法及び本モジュールで個別に定義された文法上の定義に従って有効である場合を指します。</p>
    <p>レンダラーが本仕様に適合しているとは、本仕様および関連仕様に従ってスタイルシートを解釈するだけでなく、
        本仕様で定義されるすべての機能を正しくパースし、文書を適切に描画する場合です。
        ただし、デバイスの制約によりUAが文書を正しく表示できなくても、それだけでUAが非適合とはみなされません（例：モノクロモニターで色を表示する必要はない）。</p>
    <p>オーサリングツールが本仕様に適合しているとは、CSS 一般文法及び
        本モジュールで個別に定義された文法に従って正しい構文のスタイルシートを出力し、
        本モジュールでスタイルシートに関して記載された他の適合要件も満たしている場合です。</p>
    <h3 class="no-ref heading settled" id="w3c-partial"><span class="content">部分実装</span><a class="self-link"
            href="#w3c-partial"></a></h3>
    <p>著者が将来互換のパース規則を活用してフォールバック値を指定できるよう、CSSレンダラーは、サポートできないatルール・プロパティ・値・キーワードその他
        の構文要素を<strong>無効</strong>として（<a href="https://www.w3.org/TR/CSS21/conform.html#ignore">適切に無視</a>しなければなりません。
        特に、ユーザーエージェントはサポートしていない値のあるプロパティ宣言で、サポートしている値だけを部分的に適用しては<strong>なりません</strong>。
        いずれか一部の値が無効（サポート外）と見なされる場合、その宣言全体をCSSは無視します。</p>
    <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content">不安定・独自機能の実装について</span><a
            class="self-link" href="#w3c-conform-future-proofing"></a></h4>
    <p>将来の安定版CSS機能との競合を避けるために、CSSWGは
        <a href="https://www.w3.org/TR/CSS/#future-proofing">ベストプラクティス</a>に従い、<a
            href="https://www.w3.org/TR/CSS/#unstable">不安定</a>な機能や<a
            href="https://www.w3.org/TR/CSS/#proprietary-extension">独自拡張</a>の実装を行うことを推奨します。
    </p>
    <h3 class="no-ref heading settled" id="w3c-testing"><span class="content">非実験的実装</span><a class="self-link"
            href="#w3c-testing"></a></h3>
    <p>仕様がCandidate Recommendation段階に達したら、非実験的（実用的）実装が可能となります。
        実装者は仕様通りに正しく動作することを示せるCRレベル機能について、
        プレフィックスなしの実装リリースを推奨します。</p>
    <p>CSSの実装間で相互運用性を確立・維持するため、CSSワーキンググループは非実験的なCSSレンダラーが
        実装レポート（と必要ならそのテストケース）を公開前にW3Cに提出することを求めています。提出テストケースは
        CSSワーキンググループによるレビュー・修正を受けることがあります。</p>
    <p>テストケースおよび実装レポート提出についての詳細は
        CSSワーキンググループWebサイト <a href="https://www.w3.org/Style/CSS/Test/">https://www.w3.org/Style/CSS/Test/</a>
        を参照ください。
        質問は<a
            href="https://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>宛で受け付けています。
    </p>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本仕様で定義されている用語</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#actual-viewport">actual viewport</a><span>, § 2</span>
        <li><a href="#initial-viewport">initial viewport</a><span>, § 2</span>
        <li><a href="#interactive-widget">interactive-widget</a><span>, § 3.4</span>
        <li><a href="#overlays-content">overlays-content</a><span>, § 3.4</span>
        <li><a href="#resize">resize</a><span>, § 3.4</span>
        <li><a href="#resizes-content">resizes-content</a><span>, § 3.4</span>
        <li><a href="#resizes-visual">resizes-visual</a><span>, § 3.4</span>
    </ul>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">参照により定義されている用語</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[CSS-PAGE-3]</a>が定義する用語：
            <ul>
                <li><span class="dfn-paneled" id="2c5a261b">@page</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-VIEWPORT]</a>が定義する用語：
            <ul>
                <li><span class="dfn-paneled" id="f242baf0">initial viewport</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-WRITING-MODES-3]</a>が定義する用語：
            <ul>
                <li><span class="dfn-paneled" id="fb688f4f">direction</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSSOM-VIEW-1]</a>が定義する用語：
            <ul>
                <li><span class="dfn-paneled" id="6c514f92">visual viewport</span>
            </ul>
        <li>
            <a data-link-type="biblio">[MEDIAQUERIES-5]</a>が定義する用語：
            <ul>
                <li><span class="dfn-paneled" id="9e462db5">continuous media</span>
                <li><span class="dfn-paneled" id="23af89d0">paged media</span>
            </ul>
        <li>
            <a data-link-type="biblio">[VIRTUAL-KEYBOARD]</a>が定義する用語：
            <ul>
                <li><span class="dfn-paneled" id="e3fe45c5">overlaysContent</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">規範的参考文献</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css-page-3">[CSS-PAGE-3]
        <dd>Elika Etemad. <a href="https://www.w3.org/TR/css-page-3/"><cite>CSS Paged Media Module Level 3</cite></a>．
            2023年9月14日．WD．URL: <a href="https://www.w3.org/TR/css-page-3/">https://www.w3.org/TR/css-page-3/</a>
        <dt id="biblio-css-viewport">[CSS-VIEWPORT]
        <dd><a href="https://drafts.csswg.org/css-viewport/"><cite>CSS Viewport Module Level 1</cite></a>．編集者ドラフト．URL:
            <a href="https://drafts.csswg.org/css-viewport/">https://drafts.csswg.org/css-viewport/</a>
        <dt id="biblio-css-writing-modes-3">[CSS-WRITING-MODES-3]
        <dd>Elika Etemad; Koji Ishii. <a href="https://www.w3.org/TR/css-writing-modes-3/"><cite>CSS Writing Modes Level
                    3</cite></a>．2019年12月10日．REC．URL: <a
                href="https://www.w3.org/TR/css-writing-modes-3/">https://www.w3.org/TR/css-writing-modes-3/</a>
        <dt id="biblio-css21">[CSS21]
        <dd>Bert Bos; et al. <a href="https://www.w3.org/TR/CSS21/"><cite>Cascading Style Sheets Level 2 Revision 1 (CSS
                    2.1) Specification</cite></a>．2011年6月7日．REC．URL: <a
                href="https://www.w3.org/TR/CSS21/">https://www.w3.org/TR/CSS21/</a>
        <dt id="biblio-css3-conditional">[CSS3-CONDITIONAL]
        <dd>David Baron; Elika Etemad; Chris Lilley. <a href="https://www.w3.org/TR/css-conditional-3/"><cite>CSS
                    Conditional Rules Module Level 3</cite></a>．2022年1月13日．CR．URL: <a
                href="https://www.w3.org/TR/css-conditional-3/">https://www.w3.org/TR/css-conditional-3/</a>
        <dt id="biblio-cssom-view-1">[CSSOM-VIEW-1]
        <dd>Simon Pieters. <a href="https://www.w3.org/TR/cssom-view-1/"><cite>CSSOM View
                    Module</cite></a>．2016年3月17日．WD．URL: <a
                href="https://www.w3.org/TR/cssom-view-1/">https://www.w3.org/TR/cssom-view-1/</a>
        <dt id="biblio-mediaqueries-5">[MEDIAQUERIES-5]
        <dd>Dean Jackson; et al. <a href="https://www.w3.org/TR/mediaqueries-5/"><cite>Media Queries Level 5</cite></a>．
            2021年12月18日．WD．URL: <a
                href="https://www.w3.org/TR/mediaqueries-5/">https://www.w3.org/TR/mediaqueries-5/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to
                    Indicate Requirement Levels</cite></a>．1997年3月．Best Current Practice．URL: <a
                href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
        <dt id="biblio-virtual-keyboard">[VIRTUAL-KEYBOARD]
        <dd>Anupam Snigdha. <a href="https://www.w3.org/TR/virtual-keyboard/"><cite>VirtualKeyboard
                    API</cite></a>．2022年5月5日．WD．URL: <a
                href="https://www.w3.org/TR/virtual-keyboard/">https://www.w3.org/TR/virtual-keyboard/</a>
    </dl>
    <h3 class="no-num no-ref heading settled" id="informative"><span class="content">参考情報的参考文献</span><a
            class="self-link" href="#informative"></a></h3>
    <dl>
        <dt id="biblio-algorithms">[Algorithms]
        <dd>Thomas H. Cormen; et al. <cite>Introduction to Algorithms, Second Edition, MIT Press</cite>．
    </dl>
    <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">課題一覧</span><a class="self-link"
            href="#issues-index"></a></h2>
    <div style="counter-reset:issue">
        <div class="issue"> この仕様書は実装者目線で記載されているため読みにくくなっています。
            異なる読者層向けにはさらなる編集作業が必要となる可能性があります。
            また、さまざまなJS APIが参照するビューポートがどれであるかを明確にする必要もあります。
            これら課題の詳細は <a href="http://www.quirksmode.org/blog/archives/2015/09/a_new_device_ad.html">ppkのこのブログ記事</a>
            でも議論されています。 <a class="issue-return" href="#issue-6c09d247" title="Jump to section">↵</a></div>
        <div class="issue"> この仕様や関連仕様に関する課題が
            <a
                href="https://www.w3.org/Graphics/SVG/WG/wiki/Proposals/Investigation_of_APIs_for_Level_of_detail#The_issues_on_existing_APIs">このレポート</a>
            に列記されています。 <a class="issue-return" href="#issue-212a8da7" title="Jump to section">↵</a>
        </div>
        <div class="issue"> <span class="css">actual viewport</span>をレイアウトビューポートとし、visual viewportを定義する。 <a
                class="issue-return" href="#issue-44630653" title="Jump to section">↵</a>
        </div>
        <div class="issue"> 仕様を具体的に記述すること <a class="issue-return" href="#issue-76355744" title="Jump to section">↵</a>
        </div>
        <div class="issue"> viewport metaタグによるextend-to-zoom動作仕様記述 <a class="issue-return" href="#issue-275fe943"
                title="Jump to section">↵</a></div>
        <div class="issue"> <span class="css">visual viewport</span>定義をCSSOM-Viewからこの仕様へ移すこと <a class="issue-return"
                href="#issue-e08318e1" title="Jump to section">↵</a></div>
    </div>
    <script>/* Boilerplate: script-dfn-panel */
        "use strict";
        {
            const dfnsJson = window.dfnsJson || {};

            function genDfnPanel({ dfnID, url, dfnText, refSections, external }) {
                return mk.aside({
                    class: "dfn-panel",
                    id: `infopanel-for-${dfnID}`,
                    "data-for": dfnID,
                    "aria-labelled-by": `infopaneltitle-for-${dfnID}`,
                },
                    mk.span({ id: `infopaneltitle-for-${dfnID}`, style: "display:none" },
                        `Info about the '${dfnText}' ${external ? "external" : ""} reference.`),
                    mk.a({ href: url }, url),
                    mk.b({}, "Referenced in:"),
                    mk.ul({},
                        ...refSections.map(section =>
                            mk.li({},
                                ...section.refs.map((ref, refI) =>
                                    [
                                        mk.a({
                                            href: `#${ref.id}`
                                        },
                                            (refI == 0) ? section.title : `(${refI + 1})`
                                        ),
                                        " ",
                                    ]
                                ),
                            ),
                        ),
                    ),
                );
            }

            function genAllDfnPanels() {
                for (const panelData of Object.values(window.dfnpanelData)) {
                    const dfnID = panelData.dfnID;
                    const dfn = document.getElementById(dfnID);
                    if (!dfn) {
                        console.log(`Can't find dfn#${dfnID}.`, panelData);
                    } else {
                        const panel = genDfnPanel(panelData);
                        append(document.body, panel);
                        insertDfnPopupAction(dfn, panel)
                    }
                }
            }

            document.addEventListener("DOMContentLoaded", () => {
                genAllDfnPanels();

                // Add popup behavior to all dfns to show the corresponding dfn-panel.
                var dfns = queryAll('.dfn-paneled');
                for (let dfn of dfns) { ; }

                document.body.addEventListener("click", (e) => {
                    // If not handled already, just hide all dfn panels.
                    hideAllDfnPanels();
                });
            })


            function hideAllDfnPanels() {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el => hideDfnPanel(el));
            }

            function showDfnPanel(dfnPanel, dfn) {
                hideAllDfnPanels(); // Only display one at this time.
                dfn.setAttribute("aria-expanded", "true");
                dfnPanel.classList.add("on");
                dfnPanel.style.left = "5px";
                dfnPanel.style.top = "0px";
                const panelRect = dfnPanel.getBoundingClientRect();
                const panelWidth = panelRect.right - panelRect.left;
                if (panelRect.right > document.body.scrollWidth) {
                    // Panel's overflowing the screen.
                    // Just drop it below the dfn and flip it rightward instead.
                    // This still wont' fix things if the screen is *really* wide,
                    // but fixing that's a lot harder without 'anchor()'.
                    dfnPanel.style.top = "1.5em";
                    dfnPanel.style.left = "auto";
                    dfnPanel.style.right = "0px";
                }
            }

            function pinDfnPanel(dfnPanel) {
                // Switch it to "activated" state, which pins it.
                dfnPanel.classList.add("activated");
                dfnPanel.style.left = null;
                dfnPanel.style.top = null;
            }

            function hideDfnPanel(dfnPanel, dfn) {
                if (!dfn) {
                    dfn = document.getElementById(dfnPanel.getAttribute("data-for"));
                }
                dfn.setAttribute("aria-expanded", "false")
                dfnPanel.classList.remove("on");
                dfnPanel.classList.remove("activated");
            }

            function toggleDfnPanel(dfnPanel, dfn) {
                if (dfnPanel.classList.contains("on")) {
                    hideDfnPanel(dfnPanel, dfn);
                } else {
                    showDfnPanel(dfnPanel, dfn);
                }
            }

            function insertDfnPopupAction(dfn, dfnPanel) {
                // Find dfn panel
                const panelWrapper = document.createElement('span');
                panelWrapper.appendChild(dfnPanel);
                panelWrapper.style.position = "relative";
                panelWrapper.style.height = "0px";
                dfn.insertAdjacentElement("afterend", panelWrapper);
                dfn.setAttribute('role', 'button');
                dfn.setAttribute('aria-expanded', 'false')
                dfn.tabIndex = 0;
                dfn.classList.add('has-dfn-panel');
                dfn.addEventListener('click', (event) => {
                    showDfnPanel(dfnPanel, dfn);
                    event.stopPropagation();
                });
                dfn.addEventListener('keypress', (event) => {
                    const kc = event.keyCode;
                    // 32->Space, 13->Enter
                    if (kc == 32 || kc == 13) {
                        toggleDfnPanel(dfnPanel, dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });

                dfnPanel.addEventListener('click', (event) => {
                    if (event.target.nodeName == 'A') {
                        pinDfnPanel(dfnPanel);
                    }
                    event.stopPropagation();
                });

                dfnPanel.addEventListener('keydown', (event) => {
                    if (event.keyCode == 27) { // Escape key
                        hideDfnPanel(dfnPanel, dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                })
            }
        }
    </script>
    <script>/* Boilerplate: script-dfn-panel */
        "use strict";
        {
            const dfnsJson = window.dfnsJson || {};

            function genDfnPanel({ dfnID, url, dfnText, refSections, external }) {
                return mk.aside({
                    class: "dfn-panel",
                    id: `infopanel-for-${dfnID}`,
                    "data-for": dfnID,
                    "aria-labelled-by": `infopaneltitle-for-${dfnID}`,
                },
                    mk.span({ id: `infopaneltitle-for-${dfnID}`, style: "display:none" },
                        `Info about the '${dfnText}' ${external ? "external" : ""} reference.`),
                    mk.a({ href: url }, url),
                    mk.b({}, "Referenced in:"),
                    mk.ul({},
                        ...refSections.map(section =>
                            mk.li({},
                                ...section.refs.map((ref, refI) =>
                                    [
                                        mk.a({
                                            href: `#${ref.id}`
                                        },
                                            (refI == 0) ? section.title : `(${refI + 1})`
                                        ),
                                        " ",
                                    ]
                                ),
                            ),
                        ),
                    ),
                );
            }

            function genAllDfnPanels() {
                for (const panelData of Object.values(window.dfnpanelData)) {
                    const dfnID = panelData.dfnID;
                    const dfn = document.getElementById(dfnID);
                    if (!dfn) {
                        console.log(`Can't find dfn#${dfnID}.`, panelData);
                    } else {
                        const panel = genDfnPanel(panelData);
                        append(document.body, panel);
                        insertDfnPopupAction(dfn, panel)
                    }
                }
            }

            document.addEventListener("DOMContentLoaded", () => {
                genAllDfnPanels();

                // Add popup behavior to all dfns to show the corresponding dfn-panel.
                var dfns = queryAll('.dfn-paneled');
                for (let dfn of dfns) { ; }

                document.body.addEventListener("click", (e) => {
                    // If not handled already, just hide all dfn panels.
                    hideAllDfnPanels();
                });
            })


            function hideAllDfnPanels() {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el => hideDfnPanel(el));
            }

            function showDfnPanel(dfnPanel, dfn) {
                hideAllDfnPanels(); // Only display one at this time.
                dfn.setAttribute("aria-expanded", "true");
                dfnPanel.classList.add("on");
                dfnPanel.style.left = "5px";
                dfnPanel.style.top = "0px";
                const panelRect = dfnPanel.getBoundingClientRect();
                const panelWidth = panelRect.right - panelRect.left;
                if (panelRect.right > document.body.scrollWidth) {
                    // Panel's overflowing the screen.
                    // Just drop it below the dfn and flip it rightward instead.
                    // This still wont' fix things if the screen is *really* wide,
                    // but fixing that's a lot harder without 'anchor()'.
                    dfnPanel.style.top = "1.5em";
                    dfnPanel.style.left = "auto";
                    dfnPanel.style.right = "0px";
                }
            }

            function pinDfnPanel(dfnPanel) {
                // Switch it to "activated" state, which pins it.
                dfnPanel.classList.add("activated");
                dfnPanel.style.left = null;
                dfnPanel.style.top = null;
            }

            function hideDfnPanel(dfnPanel, dfn) {
                if (!dfn) {
                    dfn = document.getElementById(dfnPanel.getAttribute("data-for"));
                }
                dfn.setAttribute("aria-expanded", "false")
                dfnPanel.classList.remove("on");
                dfnPanel.classList.remove("activated");
            }

            function toggleDfnPanel(dfnPanel, dfn) {
                if (dfnPanel.classList.contains("on")) {
                    hideDfnPanel(dfnPanel, dfn);
                } else {
                    showDfnPanel(dfnPanel, dfn);
                }
            }

            function insertDfnPopupAction(dfn, dfnPanel) {
                // Find dfn panel
                const panelWrapper = document.createElement('span');
                panelWrapper.appendChild(dfnPanel);
                panelWrapper.style.position = "relative";
                panelWrapper.style.height = "0px";
                dfn.insertAdjacentElement("afterend", panelWrapper);
                dfn.setAttribute('role', 'button');
                dfn.setAttribute('aria-expanded', 'false')
                dfn.tabIndex = 0;
                dfn.classList.add('has-dfn-panel');
                dfn.addEventListener('click', (event) => {
                    showDfnPanel(dfnPanel, dfn);
                    event.stopPropagation();
                });
                dfn.addEventListener('keypress', (event) => {
                    const kc = event.keyCode;
                    // 32->Space, 13->Enter
                    if (kc == 32 || kc == 13) {
                        toggleDfnPanel(dfnPanel, dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });

                dfnPanel.addEventListener('click', (event) => {
                    if (event.target.nodeName == 'A') {
                        pinDfnPanel(dfnPanel);
                    }
                    event.stopPropagation();
                });

                dfnPanel.addEventListener('keydown', (event) => {
                    if (event.keyCode == 27) { // Escape key
                        hideDfnPanel(dfnPanel, dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                })
            }
        }
    </script>
    <script>/* Boilerplate: script-dfn-panel-json */
        window.dfnpanelData = {};
        window.dfnpanelData['2c5a261b'] = { "dfnID": "2c5a261b", "url": "https://www.w3.org/TR/css-page-3/#at-ruledef-page", "dfnText": "@page", "refSections": [{ "refs": [{ "id": "ref-for-at-ruledef-page" }], "title": "2. \nThe viewport" }], "external": true };
        window.dfnpanelData['f242baf0'] = { "dfnID": "f242baf0", "url": "https://drafts.csswg.org/css-viewport/#initial-viewport", "dfnText": "initial viewport", "refSections": [{ "refs": [{ "id": "ref-for-initial-viewport\u2462" }], "title": "3.4. interactive-widget" }], "external": true };
        window.dfnpanelData['fb688f4f'] = { "dfnID": "fb688f4f", "url": "https://www.w3.org/TR/css-writing-modes-3/#propdef-direction", "dfnText": "direction", "refSections": [{ "refs": [{ "id": "ref-for-propdef-direction" }, { "id": "ref-for-propdef-direction\u2460" }], "title": "2. \nThe viewport" }], "external": true };
        window.dfnpanelData['6c514f92'] = { "dfnID": "6c514f92", "url": "https://drafts.csswg.org/cssom-view-1/#visual-viewport", "dfnText": "visual viewport", "refSections": [{ "refs": [{ "id": "ref-for-visual-viewport" }, { "id": "ref-for-visual-viewport\u2460" }, { "id": "ref-for-visual-viewport\u2461" }], "title": "3.4. interactive-widget" }], "external": true };
        window.dfnpanelData['9e462db5'] = { "dfnID": "9e462db5", "url": "https://www.w3.org/TR/mediaqueries-5/#continuous-media", "dfnText": "continuous media", "refSections": [{ "refs": [{ "id": "ref-for-continuous-media" }], "title": "1. \nIntroduction" }, { "refs": [{ "id": "ref-for-continuous-media\u2460" }, { "id": "ref-for-continuous-media\u2461" }], "title": "2. \nThe viewport" }], "external": true };
        window.dfnpanelData['23af89d0'] = { "dfnID": "23af89d0", "url": "https://www.w3.org/TR/mediaqueries-5/#paged-media", "dfnText": "paged media", "refSections": [{ "refs": [{ "id": "ref-for-paged-media" }], "title": "2. \nThe viewport" }], "external": true };
        window.dfnpanelData['e3fe45c5'] = { "dfnID": "e3fe45c5", "url": "https://w3c.github.io/virtual-keyboard#dom-virtualkeyboard-overlayscontent", "dfnText": "overlaysContent", "refSections": [{ "refs": [{ "id": "ref-for-dom-virtualkeyboard-overlayscontent" }], "title": "3.4. interactive-widget" }, { "refs": [{ "id": "ref-for-dom-virtualkeyboard-overlayscontent\u2460" }, { "id": "ref-for-dom-virtualkeyboard-overlayscontent\u2461" }, { "id": "ref-for-dom-virtualkeyboard-overlayscontent\u2462" }, { "id": "ref-for-dom-virtualkeyboard-overlayscontent\u2463" }], "title": "3.4.1. \n\tInteraction with virtualKeyboard.overlaysContent\n" }], "external": true };
        window.dfnpanelData['initial-viewport'] = { "dfnID": "initial-viewport", "url": "#initial-viewport", "dfnText": "initial viewport", "refSections": [{ "refs": [{ "id": "ref-for-initial-viewport" }, { "id": "ref-for-initial-viewport\u2460" }, { "id": "ref-for-initial-viewport\u2461" }], "title": "3.4. interactive-widget" }], "external": false };
        window.dfnpanelData['interactive-widget'] = { "dfnID": "interactive-widget", "url": "#interactive-widget", "dfnText": "interactive-widget", "refSections": [{ "refs": [{ "id": "ref-for-interactive-widget" }, { "id": "ref-for-interactive-widget\u2460" }], "title": "3.4. interactive-widget" }, { "refs": [{ "id": "ref-for-interactive-widget\u2461" }, { "id": "ref-for-interactive-widget\u2462" }, { "id": "ref-for-interactive-widget\u2463" }], "title": "3.4.1. \n\tInteraction with virtualKeyboard.overlaysContent\n" }], "external": false };
        window.dfnpanelData['overlays-content'] = { "dfnID": "overlays-content", "url": "#overlays-content", "dfnText": "overlays-content", "refSections": [{ "refs": [{ "id": "ref-for-overlays-content" }], "title": "3.4.1. \n\tInteraction with virtualKeyboard.overlaysContent\n" }], "external": false };
        window.dfnpanelData['resizes-content'] = { "dfnID": "resizes-content", "url": "#resizes-content", "dfnText": "resizes-content", "refSections": [{ "refs": [{ "id": "ref-for-resizes-content" }], "title": "3.4. interactive-widget" }], "external": false };
        window.dfnpanelData['resizes-visual'] = { "dfnID": "resizes-visual", "url": "#resizes-visual", "dfnText": "resizes-visual", "refSections": [{ "refs": [{ "id": "ref-for-resizes-visual" }], "title": "3.4. interactive-widget" }], "external": false };
        window.dfnpanelData['resize'] = { "dfnID": "resize", "url": "#resize", "dfnText": "resize a viewport by an interactive widget", "refSections": [{ "refs": [{ "id": "ref-for-resize" }, { "id": "ref-for-resize\u2460" }, { "id": "ref-for-resize\u2461" }, { "id": "ref-for-resize\u2462" }], "title": "3.4. interactive-widget" }], "external": false };
    </script>
    <script>/* Boilerplate: script-dom-helper */
        function query(sel) { return document.querySelector(sel); }

        function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

        function iter(obj) {
            if (!obj) return [];
            var it = obj[Symbol.iterator];
            if (it) return it;
            return Object.entries(obj);
        }

        function mk(tagname, attrs, ...children) {
            const el = document.createElement(tagname);
            for (const [k, v] of iter(attrs)) {
                if (k.slice(0, 3) == "_on") {
                    const eventName = k.slice(3);
                    el.addEventListener(eventName, v);
                } else if (k[0] == "_") {
                    // property, not attribute
                    el[k.slice(1)] = v;
                } else {
                    if (v === false || v == null) {
                        continue;
                    } else if (v === true) {
                        el.setAttribute(k, "");
                        continue;
                    } else {
                        el.setAttribute(k, v);
                    }
                }
            }
            append(el, children);
            return el;
        }

        /* Create shortcuts for every known HTML element */
        [
            "a",
            "abbr",
            "acronym",
            "address",
            "applet",
            "area",
            "article",
            "aside",
            "audio",
            "b",
            "base",
            "basefont",
            "bdo",
            "big",
            "blockquote",
            "body",
            "br",
            "button",
            "canvas",
            "caption",
            "center",
            "cite",
            "code",
            "col",
            "colgroup",
            "datalist",
            "dd",
            "del",
            "details",
            "dfn",
            "dialog",
            "div",
            "dl",
            "dt",
            "em",
            "embed",
            "fieldset",
            "figcaption",
            "figure",
            "font",
            "footer",
            "form",
            "frame",
            "frameset",
            "head",
            "header",
            "h1",
            "h2",
            "h3",
            "h4",
            "h5",
            "h6",
            "hr",
            "html",
            "i",
            "iframe",
            "img",
            "input",
            "ins",
            "kbd",
            "label",
            "legend",
            "li",
            "link",
            "main",
            "map",
            "mark",
            "meta",
            "meter",
            "nav",
            "nobr",
            "noscript",
            "object",
            "ol",
            "optgroup",
            "option",
            "output",
            "p",
            "param",
            "pre",
            "progress",
            "q",
            "s",
            "samp",
            "script",
            "section",
            "select",
            "small",
            "source",
            "span",
            "strike",
            "strong",
            "style",
            "sub",
            "summary",
            "sup",
            "table",
            "tbody",
            "td",
            "template",
            "textarea",
            "tfoot",
            "th",
            "thead",
            "time",
            "title",
            "tr",
            "u",
            "ul",
            "var",
            "video",
            "wbr",
            "xmp",
        ].forEach(tagname => {
            mk[tagname] = (...args) => mk(tagname, ...args);
        });

        function* nodesFromChildList(children) {
            for (const child of children.flat(Infinity)) {
                if (child instanceof Node) {
                    yield child;
                } else {
                    yield new Text(child);
                }
            }
        }
        function append(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                if (el instanceof Node) el.appendChild(child);
                else el.push(child);
            }
            return el;
        }

        function insertAfter(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                el.parentNode.insertBefore(child, el.nextSibling);
            }
            return el;
        }

        function clearContents(el) {
            el.innerHTML = "";
            return el;
        }

        function parseHTML(markup) {
            if (markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
                const doc = document.implementation.createHTMLDocument("");
                doc.documentElement.innerHTML = markup;
                return doc;
            } else {
                const el = mk.template({});
                el.innerHTML = markup;
                return el.content;
            }
        }
    </script>
    <script src="https://htmlspecs.com/dropdown.js"></script>