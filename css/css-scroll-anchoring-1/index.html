<!doctype html>
<html lang="ja-JP">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <title>CSSスクロールアンカリングモジュール レベル1</title>
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta content="revising" name="csswg-work-status">
    <meta content="WD" name="w3c-status">
    <meta
        content="可視領域より上にある<a>スクロールボックス</a>内のDOM要素に変更があると、ユーザーがコンテンツを閲覧している途中でページが移動してしまう可能性があります。本仕様では、アンカーノードの位置を追跡し、スクロールオフセットを調整することで、この不快なユーザー体験を軽減する仕組みを提案します。また、本仕様では、ウェブ開発者がこの挙動をオプトアウトできるAPIも提案します。"
        name="abstract">
    <link href="https://www.w3.org/TR/css-scroll-anchoring-1/default.css" rel="stylesheet" type="text/css">
    <meta content="Bikeshed version fbed39c2, updated Wed Nov 11 14:55:37 2020 -0800" name="generator">
    <link href="https://www.w3.org/TR/css-scroll-anchoring-1/" rel="canonical">
    <meta content="18d8f5166269ff804d40a23723861bc27208771d" name="document-revision">
    <style>
        /* style-autolinks */

        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }
    </style>
    <style>
        /* style-counters */

        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* style-dfn-panel */

        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0;
        }

        .dfn-panel li {
            list-style: inside;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled {
            cursor: pointer;
        }
    </style>
    <style>
        /* style-md-lists */

        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* style-selflinks */

        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* style-var-click-highlighting */

        var {
            cursor: pointer;
        }

        var.selected0 {
            background-color: #F4D200;
            box-shadow: 0 0 0 2px #F4D200;
        }

        var.selected1 {
            background-color: #FF87A2;
            box-shadow: 0 0 0 2px #FF87A2;
        }

        var.selected2 {
            background-color: #96E885;
            box-shadow: 0 0 0 2px #96E885;
        }

        var.selected3 {
            background-color: #3EEED2;
            box-shadow: 0 0 0 2px #3EEED2;
        }

        var.selected4 {
            background-color: #EACFB6;
            box-shadow: 0 0 0 2px #EACFB6;
        }

        var.selected5 {
            background-color: #82DDFF;
            box-shadow: 0 0 0 2px #82DDFF;
        }

        var.selected6 {
            background-color: #FFBCF2;
            box-shadow: 0 0 0 2px #FFBCF2;
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2016/W3C-WD" rel="stylesheet" type="text/css">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
        <h1 class="p-name no-ref" id="title">CSSスクロールアンカリングモジュール レベル1</h1>
        <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">W3C作業草案, <time
                    class="dt-updated" datetime="2020-11-11">2020年11月11日</time></span></h2>
        <div data-fill-with="spec-metadata">
            <dl>
                <dt>このバージョン:
                <dd><a class="u-url"
                        href="https://www.w3.org/TR/2020/WD-css-scroll-anchoring-1-20201111/">https://www.w3.org/TR/2020/WD-css-scroll-anchoring-1-20201111/</a>
                <dt>最新公開バージョン:
                <dd><a
                        href="https://www.w3.org/TR/css-scroll-anchoring-1/">https://www.w3.org/TR/css-scroll-anchoring-1/</a>
                <dt>編集者草案:
                <dd><a
                        href="https://drafts.csswg.org/css-scroll-anchoring">https://drafts.csswg.org/css-scroll-anchoring</a>
                <dt>以前のバージョン:
                <dd><a href="https://www.w3.org/TR/2020/WD-css-scroll-anchoring-1-20200211/"
                        rel="prev">https://www.w3.org/TR/2020/WD-css-scroll-anchoring-1-20200211/</a>
                <dt>課題追跡:
                <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-scroll-anchoring-1">CSSWG課題リポジトリ</a>
                <dt class="editor">編集者:
                <dd class="editor p-author h-card vcard"><span class="p-name fn">Steve Kobes</span> (<span
                        class="p-org org">Google</span>)
                <dd class="editor p-author h-card vcard" data-editor-id="42199"><a class="p-name fn u-url url"
                        href="http://xanthir.com/contact/">Tab Atkins-Bittner</a> (<span
                        class="p-org org">Google</span>)
                <dt>この仕様への編集提案:
                <dd><a href="https://github.com/w3c/csswg-drafts/blob/master/css-scroll-anchoring-1/Overview.bs">GitHub
                        エディター</a>
            </dl>
        </div>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2020 <a
                href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
                href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a
                href="https://www.ercim.eu/"><abbr
                    title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a
                href="https://www.keio.ac.jp/">Keio</a>, <a href="https://ev.buaa.edu.cn/">Beihang</a>). W3C <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document" rel="license">permissive
                document license</a> rules apply. </p>
        <hr title="Separator for header">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">概要</span></h2>
        <p>可視領域より上にある<a data-link-type="dfn" href="https://drafts.csswg.org/cssom-view-1/#scrolling-box"
                id="ref-for-scrolling-box">スクロールボックス</a>内のDOM要素に変更があると、
            ユーザーがコンテンツを閲覧している途中でページが移動してしまう可能性があります。</p>
        <p>本仕様では、アンカーノードの位置を追跡し、スクロールオフセットを調整することで、この不快なユーザー体験を軽減する仕組みを提案します。</p>
        <p>また、本仕様では、ウェブ開発者がこの挙動をオプトアウトできるAPIも提案します。</p>
        <a href="https://www.w3.org/TR/CSS/">CSS</a>は、構造化文書（HTMLやXMLなど）の描画を画面や紙などで記述するための言語です。
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">この文書のステータス</span>
    </h2>
    <div data-fill-with="status">
        <p><em>このセクションは、公開時点でのこの文書のステータスを説明しています。
                他の文書がこの文書に取って代わる場合があります。
                現在のW3Cの出版物一覧や、この技術レポートの最新版は
                <a href="https://www.w3.org/TR/">https://www.w3.org/TR/ のW3C技術レポートインデックス</a>で確認できます。</em> </p>
        <p>この文書は、<a href="https://www.w3.org/Style/CSS/">CSSワーキンググループ</a>によって<strong>作業草案</strong>として公開されました。
            作業草案として公開されたことは、W3C会員による承認を意味するものではありません。</p>
        <p>この文書はドラフトであり、随時更新・差替え・廃止される可能性があります。
            進行中の作業以外の文献としてこの文書を引用するのは適切ではありません。</p>
        <p>ご意見は、<a href="https://github.com/w3c/csswg-drafts/issues">GitHubで課題を提出</a>（推奨）するか、
            仕様コード「css-scroll-anchoring」をタイトルに含めてください。例: “[css-scroll-anchoring] <i>…コメント要約…</i>”。
            すべての課題とコメントは<a href="https://lists.w3.org/Archives/Public/public-css-archive/">アーカイブ</a>されています。
            または、フィードバックは<a href="https://lists.w3.org/Archives/Public/public-css-archive/">アーカイブ</a>される公開メーリングリスト
            <a
                href="mailto:www-style@w3.org?Subject=%5Bcss-scroll-anchoring%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>へ送信できます。
        </p>
        <p>この文書は <a href="https://www.w3.org/2020/Process-20200915/"
                id="w3c_process_revision">2020年9月15日付W3Cプロセス文書</a>に従って管理されています。</p>
        <p>この文書は、<a href="https://www.w3.org/Consortium/Patent-Policy-20170801/">W3C特許ポリシー</a>の下で活動するグループによって作成されました。
            W3Cは、グループの成果物に関連して行われた<a href="https://www.w3.org/2004/01/pp-impl/32061/status"
                rel="disclosure">特許開示の公開リスト</a>を管理しています。
            このページには特許開示方法の説明も記載されています。
            個人が特許の実際の知識を有し、その特許が<a
                href="https://www.w3.org/Consortium/Patent-Policy-20170801/#def-essential">必須クレーム</a>を含むと考える場合は、
            <a
                href="https://www.w3.org/Consortium/Patent-Policy-20170801/#sec-Disclosure">W3C特許ポリシー第6節</a>に従って情報を開示する必要があります。
        </p>
        <p></p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目次</h2>
        <ol class="toc" role="directory">
            <li>
                <a href="#intro"><span class="secno">1</span> <span class="content"> はじめに</span></a>
                <ol class="toc">
                    <li><a href="#values"><span class="secno">1.1</span> <span class="content"> 値の定義</span></a>
                </ol>
            <li>
                <a href="#description"><span class="secno">2</span> <span class="content"> 説明</span></a>
                <ol class="toc">
                    <li><a href="#anchor-node-selection"><span class="secno">2.1</span> <span class="content">
                                アンカーノードの選択</span></a>
                    <li>
                        <a href="#scroll-adjustment"><span class="secno">2.2</span> <span class="content">
                                スクロール調整</span></a>
                        <ol class="toc">
                            <li><a href="#suppression-windows"><span class="secno">2.2.1</span> <span class="content">
                                        抑制ウィンドウ</span></a>
                            <li><a href="#suppression-triggers"><span class="secno">2.2.2</span> <span class="content">
                                        抑制トリガー</span></a>
                        </ol>
                </ol>
            <li><a href="#exclusion-api"><span class="secno">3</span> <span class="content"> 除外API</span></a>
            <li><a href="#priv-sec"><span class="secno">4</span> <span class="content"> プライバシーとセキュリティの考慮事項</span></a>
            <li>
                <a href="#changes"><span class="secno"></span> <span class="content">変更点</span></a>
                <ol class="toc">
                    <li><a href="#changes-20200211"><span class="secno"></span> <span
                                class="content">2020年2月11日作業草案以降の変更点</span></a>
                </ol>
            <li>
                <a href="#conformance"><span class="secno"></span> <span class="content">適合性</span></a>
                <ol class="toc">
                    <li><a href="#conventions"><span class="secno"></span> <span class="content">文書規約</span></a>
                    <li><a href="#conformance-classes"><span class="secno"></span> <span
                                class="content">適合クラス</span></a>
                    <li>
                        <a href="#partial"><span class="secno"></span> <span class="content">部分的実装</span></a>
                        <ol class="toc">
                            <li><a href="#conform-future-proofing"><span class="secno"></span> <span class="content">
                                        不安定・独自機能の実装</span></a>
                        </ol>
                    <li><a href="#testing"><span class="secno"></span> <span class="content">非実験的実装</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本仕様で定義されている用語</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">参照によって定義されている用語</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">規範的参考文献</span></a>
                </ol>
            <li><a href="#property-index"><span class="secno"></span> <span class="content">プロパティ一覧</span></a>
        </ol>
    </nav>
    <main>
        <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">
                はじめに</span><a class="self-link" href="#intro"></a></h2>
        <p>現在、ウェブの利用者は、ビューポート外で発生する変更によって
            コンテンツが移動し、注意がそがれることがよくあります。
            例としては、スクリプトが広告を含むiframeを挿入したり、
            サイズ指定されていない画像が遅いネットワークで読み込まれる場合などです。</p>
        <p>従来、ブラウザーのデフォルトの挙動は
            このような変更が発生した際に絶対的なスクロール位置を維持することでした。
            つまり、コンテンツのずれを防ぐには、
            ウェブページが後で読み込まれるもののために
            ページ上にスペースを確保する必要があります。
            実際には、このような対応を一貫して行っているサイトは少数です。</p>
        <p>スクロールアンカリングは、意外なコンテンツのずれを最小限に抑えることを目的としています。
            ビューポート外の変更に対してスクロール位置を調整することで
            これを実現します。</p>
        <p><a href="https://github.com/WICG/ScrollAnchoring/blob/master/explainer.md">説明文書</a>では
            スクロールアンカリングの概要を非公式に説明しています。</p>
        <h3 class="heading settled" data-level="1.1" id="values"><span class="secno">1.1. </span><span class="content">
                値の定義</span><a class="self-link" href="#values"></a></h3>
        <p>この仕様は、<a href="https://www.w3.org/TR/CSS2/about.html#property-defs">CSSプロパティ定義の規約</a>（<a
                data-link-type="biblio" href="#biblio-css2">[CSS2]</a>）に従い、
            <a href="https://www.w3.org/TR/css-values-3/#value-defs">値の定義構文</a>（<a data-link-type="biblio"
                href="#biblio-css-values-3">[CSS-VALUES-3]</a>）を使用しています。
            この仕様で定義されていない値型は CSS Values &amp; Units
            <span>[CSS-VALUES-3]</span> で定義されています。
            他のCSSモジュールと組み合わせることで、これらの値型の定義が拡張される場合があります。
        </p>
        <p>各プロパティ固有の値に加え、
            この仕様で定義されるすべてのプロパティは
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-values-4/#css-wide-keywords"
                id="ref-for-css-wide-keywords">CSS全体キーワード</a>もプロパティ値として受け付けます。
            可読性のため、これらは明示的に繰り返していません。
        </p>
        <h2 class="heading settled" data-level="2" id="description"><span class="secno">2. </span><span class="content">
                説明</span><a class="self-link" href="#description"></a></h2>
        <p>スクロールアンカリングは、レイアウト変更にまたがってユーザーの文書表示を安定させることを目指します。
            DOMノード（<dfn class="dfn-paneled" data-dfn-for="scroll-anchoring" data-dfn-type="dfn" data-export
                id="scroll-anchoring-anchor-node">アンカーノード</dfn>）を選択し、
            その移動をもとにスクロール位置の調整を行います。</p>
        <p>ただし、スクロールコンテナーが現在<a data-link-type="dfn">スナップ</a>されている場合
            （<a data-link-type="biblio" href="#biblio-css-scroll-snap-1">[CSS-SCROLL-SNAP-1]</a>参照）、
            スクロールアンカリングは<span>再スナップ</span>で許容される調整に限定されます。</p>
        <h3 class="heading settled" data-level="2.1" id="anchor-node-selection"><span class="secno">2.1. </span><span
                class="content">アンカーノードの選択</span><a class="self-link" href="#anchor-node-selection"></a>
        </h3>
        <p>各<a data-link-type="dfn" href="https://drafts.csswg.org/cssom-view-1/#scrolling-box"
                id="ref-for-scrolling-box①">スクロールボックス</a>は
            DOM内で深い位置にあり、重要なDOMノードとして優先されるべきか、
            または<a data-link-type="dfn" href="https://www.w3.org/TR/css-scroll-snap-1/#optimal-viewing-region"
                id="ref-for-optimal-viewing-region">最適表示領域</a>のブロック開始端に近い
            <a data-link-type="dfn" href="#scroll-anchoring-anchor-node"
                id="ref-for-scroll-anchoring-anchor-node">アンカーノード</a>を選択しようとします。
        </p>
        <p class="note" role="note"><span>注:</span> ユーザーエージェントが<a class="property" data-link-type="propdesc"
                href="https://www.w3.org/TR/css-scroll-snap-1/#propdef-scroll-padding"
                id="ref-for-propdef-scroll-padding">scroll-padding</a>プロパティに対応していない場合、
            スクロールボックスの最適表示領域はその<a data-link-type="dfn" href="https://www.w3.org/TR/css-box-4/#content-area"
                id="ref-for-content-area">内容領域</a>と同じです。</p>
        <p>アンカーノードは、非<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#atomic-inline"
                id="ref-for-atomic-inline">アトミックインライン</a>以外の
            どの<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box" id="ref-for-box">ボックス</a>でもかまいません。
            アンカーノードは常に<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-descendant"
                id="ref-for-concept-tree-descendant">スクロールボックスの子孫</a>です。
            場合によっては、スクロールボックスがアンカーノードを選択しないこともあります。</p>
        <p>要素<var>C</var>がスクロールボックス<var>S</var>のスクロールアンカーとなる
            <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="anchor-viable-candidate">有効な候補</dfn>となるには、以下のすべての条件を満たす必要があります:
        </p>
        <ul>
            <li data-md>
                <p><var>C</var>は非<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#atomic-inline"
                        id="ref-for-atomic-inline①">アトミックインライン</a>な要素である。</p>
            <li data-md>
                <p><var>C</var>は<var>S</var>内で<a data-link-type="dfn" href="#partially-visible"
                        id="ref-for-partially-visible">部分的に表示</a>または<a data-link-type="dfn" href="#fully-visible"
                        id="ref-for-fully-visible">完全に表示</a>されている。</p>
            <li data-md>
                <p><var>C</var>は<var>S</var>の子孫である。</p>
            <li data-md>
                <p><var>C</var>は<a data-link-type="dfn" href="#excluded-subtree"
                        id="ref-for-excluded-subtree">除外サブツリー</a>内にない。</p>
            <li data-md>
                <p><var>C</var>の祖先のうち<var>S</var>までのいずれも<a data-link-type="dfn" href="#excluded-subtree"
                        id="ref-for-excluded-subtree①">除外サブツリー</a>内にない。</p>
        </ul>
        <p>一部の要素は、アンカー選択のための<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="anchor-priority-candidates">優先候補</dfn>とみなされます:</p>
        <ol>
            <li data-md>
                <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-anchor"
                        id="ref-for-dom-anchor">文書のフォーカス領域</a>のDOMアンカー。</p>
            <li data-md>
                <p>find-in-pageユーザーエージェントアルゴリズムの
                    現在アクティブな選択一致を含む要素。
                    一致が複数の要素にまたがる場合は、最初の要素のみを考慮します。</p>
        </ol>
        <p>なお、<a data-link-type="dfn" href="#anchor-priority-candidates"
                id="ref-for-anchor-priority-candidates">優先候補</a>が非<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-display-3/#atomic-inline"
                id="ref-for-atomic-inline②">アトミックインライン</a>要素の場合は、
            その最も近い非アトミックインラインな祖先要素を優先候補として扱います。</p>
        <div class="algorithm" data-algorithm="anchor node selection algorithm">
            <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="anchoring-algorithm">アンカーノード選択アルゴリズム</dfn>は、スクロールボックス<var>S</var>に対して以下の通りです:
            <ol>
                <li data-md>
                    <p><var>S</var>が、<a class="property" data-link-type="propdesc" href="#propdef-overflow-anchor"
                            id="ref-for-propdef-overflow-anchor">overflow-anchor</a>プロパティの算出値が
                        <a class="css" data-link-type="maybe" href="#valdef-overflow-anchor-none"
                            id="ref-for-valdef-overflow-anchor-none">none</a>
                        となる要素に関連付けられている場合は、<var>S</var>のアンカーノードを選択しません。
                    </p>
                <li data-md>
                    <p>それ以外の場合は、指定された順序で各<a data-link-type="dfn" href="#anchor-priority-candidates"
                            id="ref-for-anchor-priority-candidates①">優先候補</a><var>PC</var>について、
                        <var>PC</var>が<var>S</var>の<a data-link-type="dfn" href="#anchor-viable-candidate"
                            id="ref-for-anchor-viable-candidate">有効な候補</a>であれば、アンカーノードとして選択し、終了します。
                    </p>
                <li data-md>
                    <p>それ以外の場合、<var>S</var>に関連付けられた要素または文書の各DOM子<var>N</var>について、
                        <a data-link-type="dfn" href="#candidate-examination"
                            id="ref-for-candidate-examination">候補調査アルゴリズム</a>を<var>N</var>と<var>S</var>で実行し、
                        アンカーノードが選択された場合は終了します。
                    </p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="candidate examination algorithm">
            <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="candidate-examination">候補調査アルゴリズム</dfn>は、候補DOMノード<var>N</var>とスクロールボックス<var>S</var>に対して以下の通りです:
            <ol>
                <li data-md>
                    <p><var>N</var>が<a data-link-type="dfn" href="#excluded-subtree"
                            id="ref-for-excluded-subtree②">除外サブツリー</a>である場合、または<var>N</var>が<var>S</var>内で
                        <a data-link-type="dfn" href="#fully-clipped"
                            id="ref-for-fully-clipped">完全にクリップ</a>されている場合は、何もしません（<var>N</var>とその子孫はスキップされます）。
                    </p>
                <li data-md>
                    <p><var>N</var>が<var>S</var>内で<a data-link-type="dfn" href="#fully-visible"
                            id="ref-for-fully-visible①">完全に表示</a>されている場合は、<var>N</var>をアンカーノードとして選択します。</p>
                <li data-md>
                    <p>Nが<a data-link-type="dfn" href="#partially-visible"
                            id="ref-for-partially-visible①">部分的に表示</a>の場合:</p>
                    <ol>
                        <li data-md>
                            <p><var>N</var>の各DOM子<var>C</var>について、
                                <a data-link-type="dfn" href="#candidate-examination"
                                    id="ref-for-candidate-examination①">候補調査アルゴリズム</a>を<var>C</var>と<var>S</var>で実行し、
                                アンカーノードが選択された場合は終了します。
                            </p>
                        <li data-md>
                            <p><var>N</var>をDOM親としないが、
                                <var>N</var>を<a data-link-type="dfn"
                                    href="https://www.w3.org/TR/css-display-3/#containing-block"
                                    id="ref-for-containing-block">包含ブロック</a>とする絶対位置指定要素<var>A</var>についても、
                                <a data-link-type="dfn" href="#candidate-examination"
                                    id="ref-for-candidate-examination②">候補調査アルゴリズム</a>を<var>A</var>と<var>S</var>で実行し、
                                アンカーノードが選択された場合は終了します。
                            </p>
                        <li data-md>
                            <p><var>N</var>をアンカーノードとして選択します。
                                （このステップに達した場合、
                                <var>N</var>の子孫の中に適切なアンカーノードが見つからなかったことを意味します。）
                            </p>
                    </ol>
                    <p class="note" role="note"><span>注:</span> より深いノードを選択することで、
                        アンカーノード内でビューポート外のコンテンツが変更されて表示がずれても、
                        スクロールアンカリングによる調整が発生しないという事態を最小限に抑えられます。</p>
            </ol>
        </div>
        <p>概念的には、スクロールボックスのスクロール位置が変更されるたびに
            新しいアンカーノードが計算されます。
            （パフォーマンス最適化のため、
            実装ではアンカーノードが必要になるまで計算を遅らせる場合があります。）</p>
        <div class="algorithm" data-algorithm="excluded subtree">
            DOMノード<var>N</var>は、以下のいずれかの条件に該当する場合、<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="excluded-subtree">除外サブツリー</dfn>です:
            <ul>
                <li data-md>
                    <p><var>N</var>の<a class="property" data-link-type="propdesc"
                            href="https://www.w3.org/TR/css-display-3/#propdef-display"
                            id="ref-for-propdef-display">display</a>プロパティの算出値が
                        <a class="css" data-link-type="maybe"
                            href="https://www.w3.org/TR/css-display-3/#valdef-display-none"
                            id="ref-for-valdef-display-none">none</a>である。
                    </p>
                <li data-md>
                    <p><var>N</var>の<a class="property" data-link-type="propdesc"
                            href="https://www.w3.org/TR/css-position-3/#propdef-position"
                            id="ref-for-propdef-position">position</a>プロパティの算出値が
                        <a class="css" data-link-type="maybe"
                            href="https://www.w3.org/TR/css-position-3/#valdef-position-fixed"
                            id="ref-for-valdef-position-fixed">fixed</a>である。
                    </p>
                <li data-md>
                    <p><var>N</var>の<a class="property" data-link-type="propdesc"
                            href="https://www.w3.org/TR/css-position-3/#propdef-position"
                            id="ref-for-propdef-position①">position</a>プロパティの算出値が
                        <a class="css" data-link-type="maybe"
                            href="https://www.w3.org/TR/css-position-3/#valdef-position-absolute"
                            id="ref-for-valdef-position-absolute">absolute</a>であり、
                        <var>N</var>の<a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-display-3/#containing-block"
                            id="ref-for-containing-block①">包含ブロック</a>がスクロールボックスの祖先である。
                    </p>
                <li data-md>
                    <p><var>N</var>の<a class="property" data-link-type="propdesc" href="#propdef-overflow-anchor"
                            id="ref-for-propdef-overflow-anchor①">overflow-anchor</a>プロパティの算出値が
                        <a class="css" data-link-type="maybe" href="#valdef-overflow-anchor-none"
                            id="ref-for-valdef-overflow-anchor-none①">none</a>である。
                    </p>
            </ul>
        </div>
        <div class="algorithm" data-algorithm="fully visible"> DOMノード<var>N</var>は、スクロールボックス<var>S</var>内で
            <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fully-visible">完全に表示</dfn>されているとは、
            <var>N</var>の<a data-link-type="dfn" href="#scroll-anchoring-bounding-rect"
                id="ref-for-scroll-anchoring-bounding-rect">スクロールアンカリング境界矩形</a>が
            <var>S</var>の<a data-link-type="dfn" href="https://www.w3.org/TR/css-scroll-snap-1/#optimal-viewing-region"
                id="ref-for-optimal-viewing-region①">最適表示領域</a>内に完全に含まれている場合です。
        </div>
        <div class="algorithm" data-algorithm="fully clipped"> DOMノード<var>N</var>は、スクロールボックス<var>S</var>内で
            <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fully-clipped">完全にクリップ</dfn>されているとは、
            <var>N</var>の<a data-link-type="dfn" href="#scroll-anchoring-bounding-rect"
                id="ref-for-scroll-anchoring-bounding-rect①">スクロールアンカリング境界矩形</a>が
            <var>S</var>の<a data-link-type="dfn" href="https://www.w3.org/TR/css-scroll-snap-1/#optimal-viewing-region"
                id="ref-for-optimal-viewing-region②">最適表示領域</a>の外側に完全にある場合です。
        </div>
        <div class="algorithm" data-algorithm="partially visible"> DOMノード<var>N</var>は、スクロールボックス<var>S</var>内で
            <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="partially-visible">部分的に表示</dfn>されているとは、
            <var>N</var>が<var>S</var>で<a data-link-type="dfn" href="#fully-visible"
                id="ref-for-fully-visible②">完全に表示</a>でも<a data-link-type="dfn" href="#fully-clipped"
                id="ref-for-fully-clipped①">完全にクリップ</a>でもない場合です。
        </div>
        <div class="algorithm" data-algorithm="scroll anchoring bounding rect"> DOMノード<var>N</var>の
            <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="scroll-anchoring-bounding-rect">スクロールアンカリング境界矩形</dfn>は、
            <var>N</var>の<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-overflow-3/#scrollable-overflow-rectangle"
                id="ref-for-scrollable-overflow-rectangle">スクロール可能なオーバーフロー矩形</a>です。
        </div>
        <h3 class="heading settled" data-level="2.2" id="scroll-adjustment"><span class="secno">2.2. </span><span
                class="content">スクロール調整</span><a class="self-link" href="#scroll-adjustment"></a></h3>
        <p>アンカーノードが選択された場合、
            アンカーノードが移動すると、
            ブラウザーはアンカーノードの<a data-link-type="dfn" href="#scroll-anchoring-bounding-rect"
                id="ref-for-scroll-anchoring-bounding-rect②">スクロールアンカリング境界矩形</a>のブロック開始端の
            前回のオフセット<code>y0</code>と現在のオフセット<code>y1</code>を、
            スクロール対象のコンテンツのブロックフロー方向のブロック開始端に対して計算します。</p>
        <p>そして、スクロール位置に対し、ブロックフロー方向に<code>y1 - y0</code>の調整を
            <a data-link-type="dfn" href="#suppression-window"
                id="ref-for-suppression-window">抑制ウィンドウ</a>の終了時に実行するようキューに入れます。
        </p>
        <p>スクロール調整は、<a data-link-type="biblio"
                href="#biblio-cssom-view">[CSSOM-VIEW]</a>で定義される[[cssom-view-1#scrolling-events#scrolling]]の一種であり、
            そこで記載されている方法で<a class="idl-code" data-link-type="event"
                href="https://www.w3.org/TR/cssom-view/#eventdef-document-scroll"
                id="ref-for-eventdef-document-scroll">scrollイベント</a>を生成します。</p>
        <h4 class="heading settled" data-level="2.2.1" id="suppression-windows"><span class="secno">2.2.1. </span><span
                class="content">抑制ウィンドウ</span><a class="self-link" href="#suppression-windows"></a></h4>
        <p>アンカーノードの各移動は
            <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="suppression-window">抑制ウィンドウ</dfn>と呼ばれる
            一定時間内で発生します。抑制ウィンドウは次のように定義されます:
        </p>
        <ul>
            <li data-md>
                <p>抑制ウィンドウは、現在の<a
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#processing-model-8">HTML処理モデル</a>の
                    イベントループの開始時、または直前の抑制ウィンドウ終了時のうち新しい方で開始します。</p>
            <li data-md>
                <p>抑制ウィンドウは、現在の<a
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#processing-model-8">HTML処理モデル</a>
                    イベントループの終了時、またはスクロール位置の変化により結果や副作用が異なる次の操作の直前
                    （例：<code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-view/#dom-element-getboundingclientrect" id="ref-for-dom-element-getboundingclientrect">getBoundingClientRect()</a></code>の呼び出し）、
                    どちらか早い方で終了します。</p>
        </ul>
        <p class="note" role="note"><span>注:</span> 抑制ウィンドウの境界は、スクロールアンカリングAPIが安定したら
            HTML標準に組み込まれるべきです。</p>
        <p>同じ抑制ウィンドウ内で複数回アンカーノードの移動が発生する場合があります。</p>
        <p>抑制ウィンドウの終了時、
            ユーザーエージェントはウィンドウ中にキューされた全てのスクロール調整を、
            ウィンドウ中に<a data-link-type="dfn" href="#suppression-trigger"
                id="ref-for-suppression-trigger">抑制トリガー</a>によって抑制されなかったものについて実行します。</p>
        <h4 class="heading settled" data-level="2.2.2" id="suppression-triggers"><span class="secno">2.2.2. </span><span
                class="content">抑制トリガー</span><a class="self-link" href="#suppression-triggers"></a></h4>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="suppression-trigger">抑制トリガー</dfn>は、
            アンカーノードの移動に対するスクロールアンカリング調整を
            その移動の抑制ウィンドウ内で発生した場合に抑制する操作です。
            抑制トリガーは以下の通りです:</p>
        <ul>
            <li data-md>
                <p>アンカーノードからスクロール要素（または文書）までの経路上のいずれかの要素（両端含む）で、
                    以下のプロパティの算出値を変更すること:</p>
                <ul>
                    <li data-md>
                        <p><a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-position-3/#propdef-top"
                                id="ref-for-propdef-top">top</a>、<a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-position-3/#propdef-left"
                                id="ref-for-propdef-left">left</a>、<a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-position-3/#propdef-right"
                                id="ref-for-propdef-right">right</a>、<a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-position-3/#propdef-bottom"
                                id="ref-for-propdef-bottom">bottom</a></p>
                    <li data-md>
                        <p><a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-box-4/#propdef-margin"
                                id="ref-for-propdef-margin">margin</a>およびそのロングハンド</p>
                    <li data-md>
                        <p><a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-box-4/#propdef-padding"
                                id="ref-for-propdef-padding">padding</a>およびそのロングハンド</p>
                    <li data-md>
                        <p><a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-sizing-3/#propdef-width"
                                id="ref-for-propdef-width">width</a>、<a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-sizing-3/#propdef-height"
                                id="ref-for-propdef-height">height</a>、<a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-sizing-3/#propdef-min-width"
                                id="ref-for-propdef-min-width">min-width</a>、<a class="property"
                                data-link-type="propdesc" href="https://www.w3.org/TR/css-sizing-3/#propdef-max-width"
                                id="ref-for-propdef-max-width">max-width</a>、<a class="property"
                                data-link-type="propdesc" href="https://www.w3.org/TR/css-sizing-3/#propdef-min-height"
                                id="ref-for-propdef-min-height">min-height</a>、<a class="property"
                                data-link-type="propdesc" href="https://www.w3.org/TR/css-sizing-3/#propdef-max-height"
                                id="ref-for-propdef-max-height">max-height</a></p>
                    <li data-md>
                        <p><a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-position-3/#propdef-position"
                                id="ref-for-propdef-position②">position</a></p>
                    <li data-md>
                        <p><a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-transforms-1/#propdef-transform"
                                id="ref-for-propdef-transform">transform</a></p>
                </ul>
            <li data-md>
                <p>スクロール要素（または文書）内の任意の要素で
                    <a class="property" data-link-type="propdesc"
                        href="https://www.w3.org/TR/css-position-3/#propdef-position"
                        id="ref-for-propdef-position③">position</a>プロパティの算出値を変更し、
                    その要素が絶対位置指定になったり、絶対位置指定でなくなったりすること。
                    このトリガーは、変更された要素がアンカーノードからスクロール要素までの経路上か否かに関わらず適用されます。
                </p>
            <li data-md>
                <p>スクロール要素のスクロールオフセットがゼロになること。</p>
        </ul>
        <p class="note" role="note"><span>注:</span> 抑制トリガーは、スクロールイベントハンドラでコンテンツが移動する既存Webコンテンツとの互換性のために存在します。</p>
        <h2 class="heading settled" data-level="3" id="exclusion-api"><span class="secno">3. </span><span
                class="content">除外API</span><a class="self-link" href="#exclusion-api"></a></h2>
        <p>スクロールアンカリングは、導入時にデフォルトの動作となることを目指しており、
            ユーザーがレガシーコンテンツでも恩恵を受けられるようにしています。<a class="property" data-link-type="propdesc"
                href="#propdef-overflow-anchor" id="ref-for-propdef-overflow-anchor②">overflow-anchor</a>は、
            ページの一部または全体でスクロールアンカリングを無効化したり（オプトアウト）、
            DOMの一部をアンカーノード選択アルゴリズムから除外することができます。</p>
        <table class="def propdef" data-link-for-hint="overflow-anchor">
            <tbody>
                <tr>
                    <th>名前:
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-overflow-anchor">overflow-anchor</dfn>
                <tr class="value">
                    <th><a href="https://www.w3.org/TR/css-values/#value-defs">値:</a>
                    <td class="prod">auto <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one">|</a> none
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">初期値:</a>
                    <td>auto
                <tr>
                    <th>適用対象:
                    <td><a href="https://www.w3.org/TR/css-pseudo/#generated-content"
                            title="Includes ::before and ::after pseudo-elements.">全要素</a>
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">継承:</a>
                    <td>no
                <tr>
                    <th><a href="https://www.w3.org/TR/css-values/#percentages">パーセンテージ:</a>
                    <td>n/a
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#computed">算出値:</a>
                    <td>指定キーワード
                <tr>
                    <th>正規順序:
                    <td>文法通り
                <tr>
                    <th><a href="https://www.w3.org/TR/web-animations/#animation-type">アニメーション型:</a>
                    <td>離散
        </table>
        <p>値の定義は以下の通りです:</p>
        <dl>
            <dt data-md><dfn class="css" data-dfn-for="overflow-anchor" data-dfn-type="value" data-export
                    id="valdef-overflow-anchor-auto">auto<a class="self-link"
                        href="#valdef-overflow-anchor-auto"></a></dfn>
            <dd data-md>
                <p>要素が自身または祖先によって作成されたスクロールボックスの
                    <a data-link-type="dfn" href="#anchoring-algorithm"
                        id="ref-for-anchoring-algorithm">アンカーノード選択アルゴリズム</a>に
                    参加する資格があることを宣言します。
                </p>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="overflow-anchor" data-dfn-type="value" data-export
                    id="valdef-overflow-anchor-none">none</dfn>
            <dd data-md>
                <p>要素およびその子孫（他のスクロール要素内に入れ子になっていないもの）は、
                    自身または祖先によって作成されたスクロールボックスの
                    <a data-link-type="dfn" href="#anchoring-algorithm"
                        id="ref-for-anchoring-algorithm①">アンカーノード選択アルゴリズム</a>に
                    <em>参加しない</em>ことを宣言します。
                </p>
        </dl>
        <p class="note" role="note"><span>注:</span> <a class="css" data-link-type="propdesc"
                href="#propdef-overflow-anchor" id="ref-for-propdef-overflow-anchor③">overflow-anchor: none</a>要素の子孫に対して
            スクロールアンカリングを「再度有効化」することはできません。
            ただし、子孫の<a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                id="ref-for-scroll-container">スクロールコンテナー</a>は（自身のスクロールボックスに対して）
            明示的に<span class="css" id="ref-for-propdef-overflow-anchor④">overflow-anchor: none</span>が設定されていなければ
            自動的に「再度有効化」されます。</p>
        <p class="note" role="note"><span>注:</span> <code>overflow-anchor</code>プロパティは
            （異なる値で）<a href="http://tabatkins.github.io/specs/css-sticky-scrollbars/">CSS Sticky
                Scrollbars</a>向けにも提案されましたが、
            現在は<a href="https://tabatkins.github.io/specs/css-sticky-scrollbars/#intro">廃止</a>されています。
        </p>
        <h2 class="heading settled" data-level="4" id="priv-sec"><span class="secno">4. </span><span class="content">
                プライバシーとセキュリティの考慮事項</span><a class="self-link" href="#priv-sec"></a></h2>
        <p>本仕様はスクロール位置の計算方法のみ調整するものであり、
            新たなプライバシーやセキュリティ上の考慮事項を導入しません。</p>
        <h2 class="no-num heading settled" id="changes"><span class="content">変更点</span><a class="self-link"
                href="#changes"></a></h2>
        <h3 class="heading settled" id="changes-20200211"><span class="content">2020年2月11日作業草案以降の変更点</span><a
                class="self-link" href="#changes-20200211"></a></h3>
        <ul>
            <li data-md>
                <p><a data-link-type="dfn" href="#anchor-viable-candidate"
                        id="ref-for-anchor-viable-candidate①">有効な候補</a>および<a data-link-type="dfn"
                        href="#anchor-priority-candidates" id="ref-for-anchor-priority-candidates②">優先候補</a>の定義を追加。</p>
            <li data-md>
                <p>スクロールアンカリングと<a data-link-type="dfn">スクロールスナップ</a>の相互作用を明確化。</p>
        </ul>
    </main>
    <h2 class="no-ref no-num heading settled" id="conformance"><span class="content">適合性</span><a class="self-link"
            href="#conformance"></a></h2>
    <h3 class="no-ref heading settled" id="conventions"><span class="content">文書規約</span><a class="self-link"
            href="#conventions"></a></h3>
    <p>適合要件は、記述的断定とRFC 2119用語の組み合わせで表現されます。規範部分で使われる「MUST」「MUST NOT」「REQUIRED」「SHALL」「SHALL NOT」「SHOULD」「SHOULD
        NOT」「RECOMMENDED」「MAY」「OPTIONAL」はRFC 2119の定義に従って解釈してください。ただし、可読性のため、本仕様ではこれらの語句をすべて大文字にはしていません。</p>
    <p>本仕様の全てのテキストは、明示的に非規範的とされたセクション・例・注を除き規範的です。<a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a></p>
    <p>この仕様の例は「for example」で始まるか、次のように<code>class="example"</code>で規範テキストと区別されます:</p>
    <div class="example" id="example-ae2b6bc0">
        <a class="self-link" href="#example-ae2b6bc0"></a>
        <p>これは説明用の例です。</p>
    </div>
    <p>説明用の注は「Note」で始まり、次のように<code>class="note"</code>で規範テキストと区別されます:</p>
    <p class="note" role="note">注: これは説明用の注です。</p>
    <p>助言は規範的なセクションで、特別な注意を喚起するようスタイリングされ、<code>&lt;strong class="advisement"></code>で他の規範テキストと区別されます。例: <strong
            class="advisement"> UAはアクセシブルな代替手段を提供<strong>しなければならない</strong>。</strong></p>
    <h3 class="no-ref heading settled" id="conformance-classes"><span class="content">適合クラス</span><a class="self-link"
            href="#conformance-classes"></a></h3>
    <p>本仕様への適合は、以下の3つの適合クラスで定義されます:</p>
    <dl>
        <dt>スタイルシート
        <dd><a href="https://www.w3.org/TR/CSS21/conform.html#style-sheet">CSSスタイルシート</a>。
        <dt>レンダラー
        <dd>スタイルシートの意味を解釈して、利用する文書をレンダリングする<a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>。
        <dt>著作ツール
        <dd>スタイルシートを書く<a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>。
    </dl>
    <p>スタイルシートが本仕様に適合するためには、
        このモジュールで定義された構文を使った全ての文が
        汎用CSS文法および各機能の個別文法に従って有効である必要があります。</p>
    <p>レンダラーが本仕様に適合するためには、
        適切な仕様に従ってスタイルシートを解釈することに加え、
        本仕様で定義された全ての機能を正しくパースし、
        文書をそれに従ってレンダリングする必要があります。ただし、UAがデバイスの制約により文書を正しくレンダリングできない場合でも、UAは非適合とはなりません（例: UAはモノクロモニターで色を表示する必要はない）。</p>
    <p>著作ツールが本仕様に適合するためには、
        汎用CSS文法および各機能の個別文法に従って構文的に正しいスタイルシートを書き、
        本モジュールで記載されたスタイルシートのその他すべての適合要件を満たす必要があります。</p>
    <h3 class="no-ref heading settled" id="partial"><span class="content">部分的実装</span><a class="self-link"
            href="#partial"></a></h3>
    <p>作者が前方互換性のあるパース規則を利用してフォールバック値を割り当てられるようにするため、
        CSSレンダラーは、利用可能なレベルのサポートがない@規則・プロパティ・プロパティ値・キーワード・その他構文構成要素を無効（および<a
            href="https://www.w3.org/TR/CSS21/conform.html#ignore">適切に無視する</a>）として扱<strong>わなければなりません</strong>。特に、ユーザーエージェントは、マルチ値プロパティ宣言の中でサポートされない値だけを選択的に無視してサポートされる値のみを反映しては<strong>なりません</strong>。いずれかの値が無効と判断（サポートされない値は必ず）された場合、CSSは宣言全体を無視する必要があります。
    </p>
    <h4 class="heading settled" id="conform-future-proofing"><span class="content">不安定・独自機能の実装</span><a
            class="self-link" href="#conform-future-proofing"></a></h4>
    <p>将来の安定したCSS機能との衝突を避けるため、
        CSSWGは<a href="https://www.w3.org/TR/CSS/#future-proofing">ベストプラクティス</a>に従って、
        <a href="https://www.w3.org/TR/CSS/#unstable">不安定</a>な機能や<a
            href="https://www.w3.org/TR/CSS/#proprietary-extension">独自拡張</a>の実装をすることを推奨します。
    </p>
    <h3 class="no-ref heading settled" id="testing"><span class="content">非実験的実装</span><a class="self-link"
            href="#testing"></a></h3>
    <p>仕様が候補勧告段階に達したら、
        非実験的な実装が可能となり、実装者は仕様に従って正しく実装できるCRレベルの機能について
        プレフィックスなしでリリースすべきです。</p>
    <p>CSSの相互運用性を確保・維持するため、
        CSSワーキンググループは非実験的CSSレンダラーに対し、実装報告（必要に応じてその実装報告で使ったテストケース）をW3Cへ提出するよう求めています。W3Cへ提出されたテストケースはCSSワーキンググループによるレビュー・修正の対象になります。
    </p>
    <p>テストケースや実装報告提出の詳細はCSSワーキンググループのウェブサイト<a
            href="https://www.w3.org/Style/CSS/Test/">https://www.w3.org/Style/CSS/Test/</a>で確認できます。
        質問は<a
            href="https://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>メーリングリストまで。
    </p>
    <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本仕様で定義されている用語</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#scroll-anchoring-anchor-node">アンカーノード</a><span>（§2）</span>
        <li><a href="#anchoring-algorithm">アンカーノード選択アルゴリズム</a><span>（§2.1）</span>
        <li><a href="#valdef-overflow-anchor-auto">auto</a><span>（§3）</span>
        <li><a href="#candidate-examination">候補調査アルゴリズム</a><span>（§2.1）</span>
        <li><a href="#excluded-subtree">除外サブツリー</a><span>（§2.1）</span>
        <li><a href="#fully-clipped">完全にクリップ</a><span>（§2.1）</span>
        <li><a href="#fully-visible">完全に表示</a><span>（§2.1）</span>
        <li><a href="#valdef-overflow-anchor-none">none</a><span>（§3）</span>
        <li><a href="#propdef-overflow-anchor">overflow-anchor</a><span>（§3）</span>
        <li><a href="#partially-visible">部分的に表示</a><span>（§2.1）</span>
        <li><a href="#anchor-priority-candidates">優先候補</a><span>（§2.1）</span>
        <li><a href="#scroll-anchoring-bounding-rect">スクロールアンカリング境界矩形</a><span>（§2.1）</span>
        <li><a href="#suppression-trigger">抑制トリガー</a><span>（§2.2.2）</span>
        <li><a href="#suppression-window">抑制ウィンドウ</a><span>（§2.2.1）</span>
        <li><a href="#anchor-viable-candidate">有効な候補</a><span>（§2.1）</span>
    </ul>
    <aside class="dfn-panel" data-for="term-for-content-area">
        <a href="https://www.w3.org/TR/css-box-4/#content-area">https://www.w3.org/TR/css-box-4/#content-area</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-content-area">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-margin">
        <a href="https://www.w3.org/TR/css-box-4/#propdef-margin">https://www.w3.org/TR/css-box-4/#propdef-margin</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-margin">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-padding">
        <a
            href="https://www.w3.org/TR/css-box-4/#propdef-padding">https://www.w3.org/TR/css-box-4/#propdef-padding</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-padding">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-atomic-inline">
        <a
            href="https://www.w3.org/TR/css-display-3/#atomic-inline">https://www.w3.org/TR/css-display-3/#atomic-inline</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-atomic-inline">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-atomic-inline①">(2)</a> <a
                    href="#ref-for-atomic-inline②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-box">
        <a href="https://www.w3.org/TR/css-display-3/#box">https://www.w3.org/TR/css-display-3/#box</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-box">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-containing-block">
        <a
            href="https://www.w3.org/TR/css-display-3/#containing-block">https://www.w3.org/TR/css-display-3/#containing-block</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-containing-block">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-containing-block①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-display">
        <a
            href="https://www.w3.org/TR/css-display-3/#propdef-display">https://www.w3.org/TR/css-display-3/#propdef-display</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-display">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-display-none">
        <a
            href="https://www.w3.org/TR/css-display-3/#valdef-display-none">https://www.w3.org/TR/css-display-3/#valdef-display-none</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-display-none">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-scroll-container">
        <a
            href="https://www.w3.org/TR/css-overflow-3/#scroll-container">https://www.w3.org/TR/css-overflow-3/#scroll-container</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-scroll-container">3.
                    Exclusion API</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-scrollable-overflow-rectangle">
        <a
            href="https://www.w3.org/TR/css-overflow-3/#scrollable-overflow-rectangle">https://www.w3.org/TR/css-overflow-3/#scrollable-overflow-rectangle</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-scrollable-overflow-rectangle">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-position-absolute">
        <a
            href="https://www.w3.org/TR/css-position-3/#valdef-position-absolute">https://www.w3.org/TR/css-position-3/#valdef-position-absolute</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-position-absolute">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-bottom">
        <a
            href="https://www.w3.org/TR/css-position-3/#propdef-bottom">https://www.w3.org/TR/css-position-3/#propdef-bottom</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-bottom">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-position-fixed">
        <a
            href="https://www.w3.org/TR/css-position-3/#valdef-position-fixed">https://www.w3.org/TR/css-position-3/#valdef-position-fixed</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-position-fixed">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-left">
        <a
            href="https://www.w3.org/TR/css-position-3/#propdef-left">https://www.w3.org/TR/css-position-3/#propdef-left</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-left">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-position">
        <a
            href="https://www.w3.org/TR/css-position-3/#propdef-position">https://www.w3.org/TR/css-position-3/#propdef-position</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-position">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-propdef-position①">(2)</a>
            <li><a href="#ref-for-propdef-position②">2.2.2.
                    Suppression Triggers</a> <a href="#ref-for-propdef-position③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-right">
        <a
            href="https://www.w3.org/TR/css-position-3/#propdef-right">https://www.w3.org/TR/css-position-3/#propdef-right</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-right">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-top">
        <a
            href="https://www.w3.org/TR/css-position-3/#propdef-top">https://www.w3.org/TR/css-position-3/#propdef-top</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-top">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-optimal-viewing-region">
        <a
            href="https://www.w3.org/TR/css-scroll-snap-1/#optimal-viewing-region">https://www.w3.org/TR/css-scroll-snap-1/#optimal-viewing-region</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-optimal-viewing-region">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-optimal-viewing-region①">(2)</a> <a
                    href="#ref-for-optimal-viewing-region②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-scroll-padding">
        <a
            href="https://www.w3.org/TR/css-scroll-snap-1/#propdef-scroll-padding">https://www.w3.org/TR/css-scroll-snap-1/#propdef-scroll-padding</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-scroll-padding">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-height">
        <a
            href="https://www.w3.org/TR/css-sizing-3/#propdef-height">https://www.w3.org/TR/css-sizing-3/#propdef-height</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-height">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-max-height">
        <a
            href="https://www.w3.org/TR/css-sizing-3/#propdef-max-height">https://www.w3.org/TR/css-sizing-3/#propdef-max-height</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-max-height">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-max-width">
        <a
            href="https://www.w3.org/TR/css-sizing-3/#propdef-max-width">https://www.w3.org/TR/css-sizing-3/#propdef-max-width</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-max-width">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-min-height">
        <a
            href="https://www.w3.org/TR/css-sizing-3/#propdef-min-height">https://www.w3.org/TR/css-sizing-3/#propdef-min-height</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-min-height">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-min-width">
        <a
            href="https://www.w3.org/TR/css-sizing-3/#propdef-min-width">https://www.w3.org/TR/css-sizing-3/#propdef-min-width</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-min-width">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-width">
        <a
            href="https://www.w3.org/TR/css-sizing-3/#propdef-width">https://www.w3.org/TR/css-sizing-3/#propdef-width</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-width">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-transform">
        <a
            href="https://www.w3.org/TR/css-transforms-1/#propdef-transform">https://www.w3.org/TR/css-transforms-1/#propdef-transform</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-transform">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-css-wide-keywords">
        <a
            href="https://www.w3.org/TR/css-values-4/#css-wide-keywords">https://www.w3.org/TR/css-values-4/#css-wide-keywords</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-css-wide-keywords">1.1.
                    Value Definitions</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-comb-one">
        <a href="https://www.w3.org/TR/css-values-4/#comb-one">https://www.w3.org/TR/css-values-4/#comb-one</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-comb-one">3.
                    Exclusion API</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-block-flow-direction">
        <a
            href="https://www.w3.org/TR/css-writing-modes-4/#block-flow-direction">https://www.w3.org/TR/css-writing-modes-4/#block-flow-direction</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-block-flow-direction">2.2.
                    Scroll Adjustment</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-element-getboundingclientrect">
        <a
            href="https://www.w3.org/TR/cssom-view/#dom-element-getboundingclientrect">https://www.w3.org/TR/cssom-view/#dom-element-getboundingclientrect</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-element-getboundingclientrect">2.2.1.
                    Suppression Window</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-eventdef-document-scroll">
        <a
            href="https://www.w3.org/TR/cssom-view/#eventdef-document-scroll">https://www.w3.org/TR/cssom-view/#eventdef-document-scroll</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-eventdef-document-scroll">2.2.
                    Scroll Adjustment</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-scrolling-box">
        <a
            href="https://drafts.csswg.org/cssom-view-1/#scrolling-box">https://drafts.csswg.org/cssom-view-1/#scrolling-box</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-scrolling-box">Unnumbered Section</a>
            <li><a href="#ref-for-scrolling-box①">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-scrolling-box②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-tree-descendant">
        <a
            href="https://dom.spec.whatwg.org/#concept-tree-descendant">https://dom.spec.whatwg.org/#concept-tree-descendant</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-tree-descendant">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-anchor">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#dom-anchor">https://html.spec.whatwg.org/multipage/interaction.html#dom-anchor</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-anchor">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-focused-area-of-the-document">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#focused-area-of-the-document">https://html.spec.whatwg.org/multipage/interaction.html#focused-area-of-the-document</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-focused-area-of-the-document">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span
            class="content">参照によって定義されている用語</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[css-box-4]</a> で次の用語が定義されています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-content-area">内容領域</span>
                <li><span class="dfn-paneled" id="term-for-propdef-margin">余白（margin）</span>
                <li><span class="dfn-paneled" id="term-for-propdef-padding">パディング（padding）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-display-3]</a> で次の用語が定義されています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-atomic-inline">アトミックインライン</span>
                <li><span class="dfn-paneled" id="term-for-box">ボックス</span>
                <li><span class="dfn-paneled" id="term-for-containing-block">包含ブロック</span>
                <li><span class="dfn-paneled" id="term-for-propdef-display">display</span>
                <li><span class="dfn-paneled" id="term-for-valdef-display-none">none</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-overflow-3]</a> で次の用語が定義されています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-scroll-container">スクロールコンテナー</span>
                <li><span class="dfn-paneled" id="term-for-scrollable-overflow-rectangle">スクロール可能なオーバーフロー矩形</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-position-3]</a> で次の用語が定義されています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-valdef-position-absolute">absolute</span>
                <li><span class="dfn-paneled" id="term-for-propdef-bottom">bottom</span>
                <li><span class="dfn-paneled" id="term-for-valdef-position-fixed">fixed</span>
                <li><span class="dfn-paneled" id="term-for-propdef-left">left</span>
                <li><span class="dfn-paneled" id="term-for-propdef-position">position</span>
                <li><span class="dfn-paneled" id="term-for-propdef-right">right</span>
                <li><span class="dfn-paneled" id="term-for-propdef-top">top</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-SCROLL-SNAP-1]</a> で次の用語が定義されています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-optimal-viewing-region">最適表示領域</span>
                <li><span class="dfn-paneled" id="term-for-propdef-scroll-padding">scroll-padding</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-sizing-3]</a> で次の用語が定義されています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-height">高さ（height）</span>
                <li><span class="dfn-paneled" id="term-for-propdef-max-height">最大高さ（max-height）</span>
                <li><span class="dfn-paneled" id="term-for-propdef-max-width">最大幅（max-width）</span>
                <li><span class="dfn-paneled" id="term-for-propdef-min-height">最小高さ（min-height）</span>
                <li><span class="dfn-paneled" id="term-for-propdef-min-width">最小幅（min-width）</span>
                <li><span class="dfn-paneled" id="term-for-propdef-width">幅（width）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-transforms-1]</a> で次の用語が定義されています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-transform">transform</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-values-4]</a> で次の用語が定義されています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-css-wide-keywords">CSS全体キーワード</span>
                <li><span class="dfn-paneled" id="term-for-comb-one">|</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-writing-modes-4]</a> で次の用語が定義されています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-block-flow-direction">ブロックフロー方向</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSSOM-VIEW]</a> で次の用語が定義されています:
            <ul>
                <li><span class="dfn-paneled"
                        id="term-for-dom-element-getboundingclientrect">getBoundingClientRect()</span>
                <li><span class="dfn-paneled" id="term-for-eventdef-document-scroll">scroll</span>
                <li><span class="dfn-paneled" id="term-for-scrolling-box">スクロールボックス</span>
            </ul>
        <li>
            <a data-link-type="biblio">[DOM]</a> で次の用語が定義されています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-concept-tree-descendant">子孫</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a> で次の用語が定義されています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-dom-anchor">DOMアンカー</span>
                <li><span class="dfn-paneled" id="term-for-focused-area-of-the-document">文書のフォーカス領域</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">規範的参考文献</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css-box-4">[CSS-BOX-4]
        <dd>Elika Etemad. <a href="https://www.w3.org/TR/css-box-4/">CSS Box Model Module Level 4</a>. 2020年4月21日. WD.
            URL: <a href="https://www.w3.org/TR/css-box-4/">https://www.w3.org/TR/css-box-4/</a>
        <dt id="biblio-css-display-3">[CSS-DISPLAY-3]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-display-3/">CSS Display Module Level 3</a>.
            2020年5月19日. CR. URL: <a href="https://www.w3.org/TR/css-display-3/">https://www.w3.org/TR/css-display-3/</a>
        <dt id="biblio-css-overflow-3">[CSS-OVERFLOW-3]
        <dd>David Baron; Elika Etemad; Florian Rivoal. <a href="https://www.w3.org/TR/css-overflow-3/">CSS Overflow
                Module Level 3</a>. 2020年6月3日. WD. URL: <a
                href="https://www.w3.org/TR/css-overflow-3/">https://www.w3.org/TR/css-overflow-3/</a>
        <dt id="biblio-css-position-3">[CSS-POSITION-3]
        <dd>Elika Etemad; 他. <a href="https://www.w3.org/TR/css-position-3/">CSS Positioned Layout Module Level
                3</a>. 2020年5月19日. WD. URL: <a
                href="https://www.w3.org/TR/css-position-3/">https://www.w3.org/TR/css-position-3/</a>
        <dt id="biblio-css-scroll-snap-1">[CSS-SCROLL-SNAP-1]
        <dd>Matt Rakow; 他. <a href="https://www.w3.org/TR/css-scroll-snap-1/">CSS Scroll Snap Module Level 1</a>.
            2019年3月19日. CR. URL: <a
                href="https://www.w3.org/TR/css-scroll-snap-1/">https://www.w3.org/TR/css-scroll-snap-1/</a>
        <dt id="biblio-css-sizing-3">[CSS-SIZING-3]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-sizing-3/">CSS Box Sizing Module Level
                3</a>. 2020年10月23日. WD. URL: <a
                href="https://www.w3.org/TR/css-sizing-3/">https://www.w3.org/TR/css-sizing-3/</a>
        <dt id="biblio-css-transforms-1">[CSS-TRANSFORMS-1]
        <dd>Simon Fraser; 他. <a href="https://www.w3.org/TR/css-transforms-1/">CSS Transforms Module Level 1</a>.
            2019年2月14日. CR. URL: <a
                href="https://www.w3.org/TR/css-transforms-1/">https://www.w3.org/TR/css-transforms-1/</a>
        <dt id="biblio-css-values-3">[CSS-VALUES-3]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-3/">CSS Values and Units Module
                Level 3</a>. 2019年6月6日. CR. URL: <a
                href="https://www.w3.org/TR/css-values-3/">https://www.w3.org/TR/css-values-3/</a>
        <dt id="biblio-css-values-4">[CSS-VALUES-4]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-4/">CSS Values and Units Module
                Level 4</a>. 2019年1月31日. WD. URL: <a
                href="https://www.w3.org/TR/css-values-4/">https://www.w3.org/TR/css-values-4/</a>
        <dt id="biblio-css-writing-modes-4">[CSS-WRITING-MODES-4]
        <dd>Elika Etemad; Koji Ishii. <a href="https://www.w3.org/TR/css-writing-modes-4/">CSS Writing Modes Level
                4</a>. 2019年7月30日. CR. URL: <a
                href="https://www.w3.org/TR/css-writing-modes-4/">https://www.w3.org/TR/css-writing-modes-4/</a>
        <dt id="biblio-css2">[CSS2]
        <dd>Bert Bos; 他. <a href="https://www.w3.org/TR/CSS21/">Cascading Style Sheets Level 2 Revision 1 (CSS 2.1)
                Specification</a>. 2011年6月7日. REC. URL: <a
                href="https://www.w3.org/TR/CSS21/">https://www.w3.org/TR/CSS21/</a>
        <dt id="biblio-cssom-view">[CSSOM-VIEW]
        <dd>Simon Pieters. <a href="https://www.w3.org/TR/cssom-view-1/">CSSOM View Module</a>. 2016年3月17日. WD. URL:
            <a href="https://www.w3.org/TR/cssom-view-1/">https://www.w3.org/TR/cssom-view-1/</a>
        <dt id="biblio-dom">[DOM]
        <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM Standard</a>. Living Standard. URL: <a
                href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren; 他. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living
            Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement
                Levels</a>. 1997年3月. Best Current Practice. URL: <a
                href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="property-index"><span class="content">プロパティ一覧</span><a
            class="self-link" href="#property-index"></a></h2>
    <div class="big-element-wrapper">
        <table class="index">
            <thead>
                <tr>
                    <th scope="col">名前
                    <th scope="col">値
                    <th scope="col">初期値
                    <th scope="col">適用対象
                    <th scope="col">継承
                    <th scope="col">パーセンテージ
                    <th scope="col">アニメーション型
                    <th scope="col">正規順序
                    <th scope="col">算出値
            <tbody>
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-overflow-anchor"
                            id="ref-for-propdef-overflow-anchor⑤">overflow-anchor</a>
                    <td>auto | none
                    <td>auto
                    <td>全要素
                    <td>no
                    <td>n/a
                    <td>離散
                    <td>文法通り
                    <td>指定キーワード
        </table>
    </div>
    <aside class="dfn-panel" data-for="scroll-anchoring-anchor-node">
        <b><a href="#scroll-anchoring-anchor-node">#scroll-anchoring-anchor-node</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-scroll-anchoring-anchor-node">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="anchor-viable-candidate">
        <b><a href="#anchor-viable-candidate">#anchor-viable-candidate</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-anchor-viable-candidate">2.1.
                    Anchor Node Selection</a>
            <li><a href="#ref-for-anchor-viable-candidate①"> Changes Since the Feb 11 2020 Working Draft</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="anchor-priority-candidates">
        <b><a href="#anchor-priority-candidates">#anchor-priority-candidates</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-anchor-priority-candidates">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-anchor-priority-candidates①">(2)</a>
            <li><a href="#ref-for-anchor-priority-candidates②"> Changes Since the Feb 11 2020 Working Draft</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="anchoring-algorithm">
        <b><a href="#anchoring-algorithm">#anchoring-algorithm</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-anchoring-algorithm">3.
                    Exclusion API</a> <a href="#ref-for-anchoring-algorithm①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="candidate-examination">
        <b><a href="#candidate-examination">#candidate-examination</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-candidate-examination">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-candidate-examination①">(2)</a> <a
                    href="#ref-for-candidate-examination②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="excluded-subtree">
        <b><a href="#excluded-subtree">#excluded-subtree</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-excluded-subtree">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-excluded-subtree①">(2)</a> <a
                    href="#ref-for-excluded-subtree②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="fully-visible">
        <b><a href="#fully-visible">#fully-visible</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-fully-visible">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-fully-visible①">(2)</a> <a
                    href="#ref-for-fully-visible②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="fully-clipped">
        <b><a href="#fully-clipped">#fully-clipped</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-fully-clipped">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-fully-clipped①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="partially-visible">
        <b><a href="#partially-visible">#partially-visible</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-partially-visible">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-partially-visible①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="scroll-anchoring-bounding-rect">
        <b><a href="#scroll-anchoring-bounding-rect">#scroll-anchoring-bounding-rect</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-scroll-anchoring-bounding-rect">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-scroll-anchoring-bounding-rect①">(2)</a>
            <li><a href="#ref-for-scroll-anchoring-bounding-rect②">2.2.
                    Scroll Adjustment</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="suppression-window">
        <b><a href="#suppression-window">#suppression-window</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-suppression-window">2.2.
                    Scroll Adjustment</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="suppression-trigger">
        <b><a href="#suppression-trigger">#suppression-trigger</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-suppression-trigger">2.2.1.
                    Suppression Window</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="propdef-overflow-anchor">
        <b><a href="#propdef-overflow-anchor">#propdef-overflow-anchor</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-propdef-overflow-anchor">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-propdef-overflow-anchor①">(2)</a>
            <li><a href="#ref-for-propdef-overflow-anchor②">3.
                    Exclusion API</a> <a href="#ref-for-propdef-overflow-anchor③">(2)</a> <a
                    href="#ref-for-propdef-overflow-anchor④">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="valdef-overflow-anchor-none">
        <b><a href="#valdef-overflow-anchor-none">#valdef-overflow-anchor-none</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-valdef-overflow-anchor-none">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-valdef-overflow-anchor-none①">(2)</a>
        </ul>
    </aside>
    <script>/* script-dfn-panel */

        document.body.addEventListener("click", function (e) {
            var queryAll = function (sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while (el.parentElement) {
                if (el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if (el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if (el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if (target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function (el) {
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if (target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if (dfnPanel) {
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if (panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if (target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
    </script>
    <script>/* script-var-click-highlighting */

        document.addEventListener("click", e => {
            if (e.target.nodeName == "VAR") {
                highlightSameAlgoVars(e.target);
            }
        });
        {
            const indexCounts = new Map();
            const indexNames = new Map();
            function highlightSameAlgoVars(v) {
                // Find the algorithm container.
                let algoContainer = null;
                let searchEl = v;
                while (algoContainer == null && searchEl != document.body) {
                    searchEl = searchEl.parentNode;
                    if (searchEl.hasAttribute("data-algorithm")) {
                        algoContainer = searchEl;
                    }
                }

                // Not highlighting document-global vars,
                // too likely to be unrelated.
                if (algoContainer == null) return;

                const algoName = algoContainer.getAttribute("data-algorithm");
                const varName = getVarName(v);
                const addClass = !v.classList.contains("selected");
                let highlightClass = null;
                if (addClass) {
                    const index = chooseHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] += 1;
                    indexNames.set(algoName + "///" + varName, index);
                    highlightClass = nameFromIndex(index);
                } else {
                    const index = previousHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] -= 1;
                    highlightClass = nameFromIndex(index);
                }

                // Find all same-name vars, and toggle their class appropriately.
                for (const el of algoContainer.querySelectorAll("var")) {
                    if (getVarName(el) == varName) {
                        el.classList.toggle("selected", addClass);
                        el.classList.toggle(highlightClass, addClass);
                    }
                }
            }
            function getVarName(el) {
                return el.textContent.replace(/(\s| )+/, " ").trim();
            }
            function chooseHighlightIndex(algoName, varName) {
                let indexes = null;
                if (indexCounts.has(algoName)) {
                    indexes = indexCounts.get(algoName);
                } else {
                    // 7 classes right now
                    indexes = [0, 0, 0, 0, 0, 0, 0];
                    indexCounts.set(algoName, indexes);
                }

                // If the element was recently unclicked,
                // *and* that color is still unclaimed,
                // give it back the same color.
                const lastIndex = previousHighlightIndex(algoName, varName);
                if (indexes[lastIndex] === 0) return lastIndex;

                // Find the earliest index with the lowest count.
                const minCount = Math.min.apply(null, indexes);
                let index = null;
                for (var i = 0; i < indexes.length; i++) {
                    if (indexes[i] == minCount) {
                        return i;
                    }
                }
            }
            function previousHighlightIndex(algoName, varName) {
                return indexNames.get(algoName + "///" + varName);
            }
            function nameFromIndex(index) {
                return "selected" + index;
            }
        }
    </script>
    <script src="https://htmlspecs.com/dropdown.js"></script>