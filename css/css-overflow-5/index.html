<!doctype html>
<html lang="ja-JP">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>CSSオーバーフローモジュール レベル5</title>
    <meta content="FPWD" name="w3c-status">
    <meta content="Bikeshed version ac5ea272d, updated Fri Dec 6 15:45:15 2024 -0800" name="generator">
    <link href="https://www.w3.org/TR/css-overflow-5/" rel="canonical">
    <meta content="8bd3177e7135460e31016be1684138993b1b852b" name="revision">
    <meta content="dark light" name="color-scheme">
    <style>
        table.source-demo-pair {
            width: 100%;
        }

        .in-cards-demo {
            width: 13em;
            height: 8em;

            padding: 4px;
            border: medium solid blue;
            margin: 6px;

            font: medium/1.3 Times New Roman, Times, serif;
            white-space: nowrap;
        }

        .bouncy-columns-demo {
            width: 6em;
            height: 10em;
            float: left;
            margin: 1em;
            font: medium/1.25 Times New Roman, Times, serif;
            white-space: nowrap;
        }

        .bouncy-columns-demo.one {
            background: aqua;
            color: black;
            transform: rotate(-3deg);
        }

        .bouncy-columns-demo.two {
            background: yellow;
            color: black;
            transform: rotate(3deg);
        }

        .article-font-inherit-demo {
            font: 1em/1.25 Times New Roman, Times, serif;
            white-space: nowrap;
        }

        .article-font-inherit-demo.one {
            width: 12em;
            font-size: 1.5em;
            margin-bottom: 1em;
            height: 4em;
        }

        .article-font-inherit-demo.two {
            width: 11em;
            margin-left: 5em;
            margin-right: 2em;
        }

        .dark-columns-demo {
            width: 6em;
            height: 10em;
            float: left;
            margin-right: 1em;
            font: medium/1.25 Times New Roman, Times, serif;
            white-space: nowrap;
        }

        .dark-columns-demo.one {
            background: aqua;
            color: black;
        }

        .dark-columns-demo.one :link {
            color: blue;
        }

        .dark-columns-demo.one :visited {
            color: purple;
        }

        .dark-columns-demo.two {
            background: navy;
            color: white;
        }

        .dark-columns-demo.two :link {
            color: aqua;
        }

        .dark-columns-demo.two :visited {
            color: fuchsia;
        }

        .article-max-lines-demo {
            font: 1em/1.25 Times New Roman, Times, serif;
            white-space: nowrap;
        }

        .article-max-lines-demo.one::first-letter {
            font-size: 2em;
            line-height: 0.9;
        }

        .article-max-lines-demo.one {
            font-size: 1.5em;
            width: 16em;
        }

        .article-max-lines-demo.two {
            width: 11.5em;
            float: left;
            margin-right: 1em;
        }

        .article-max-lines-demo.three {
            width: 11.5em;
            float: left;
        }

        .awesome-table td {
            padding: 5px;
        }

        .awesome-table {
            color: #000;
            background: #fff;
            margin: auto;
        }
    </style>
    <style>
        /* Boilerplate: style-autolinks */
        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --selflink-text: black;
                --selflink-bg: silver;
                --selflink-hover-text: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-colors */
        /* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
        :root {
            color-scheme: light dark;

            --text: black;
            --bg: white;

            --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

            --logo-bg: #1a5e9a;
            --logo-active-bg: #c00;
            --logo-text: white;

            --tocnav-normal-text: #707070;
            --tocnav-normal-bg: var(--bg);
            --tocnav-hover-text: var(--tocnav-normal-text);
            --tocnav-hover-bg: #f8f8f8;
            --tocnav-active-text: #c00;
            --tocnav-active-bg: var(--tocnav-normal-bg);

            --tocsidebar-text: var(--text);
            --tocsidebar-bg: #f7f8f9;
            --tocsidebar-shadow: rgba(0, 0, 0, .1);
            --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

            --toclink-text: var(--text);
            --toclink-underline: #3980b5;
            --toclink-visited-text: var(--toclink-text);
            --toclink-visited-underline: #054572;

            --heading-text: #005a9c;

            --hr-text: var(--text);

            --algo-border: #def;

            --del-text: red;
            --del-bg: transparent;
            --ins-text: #080;
            --ins-bg: transparent;

            --a-normal-text: #034575;
            --a-normal-underline: #bbb;
            --a-visited-text: var(--a-normal-text);
            --a-visited-underline: #707070;
            --a-hover-bg: rgba(75%, 75%, 75%, .25);
            --a-active-text: #c00;
            --a-active-underline: #c00;

            --blockquote-border: silver;
            --blockquote-bg: transparent;
            --blockquote-text: currentcolor;

            --issue-border: #e05252;
            --issue-bg: #fbe9e9;
            --issue-text: var(--text);
            --issueheading-text: #831616;

            --example-border: #e0cb52;
            --example-bg: #fcfaee;
            --example-text: var(--text);
            --exampleheading-text: #574b0f;

            --note-border: #52e052;
            --note-bg: #e9fbe9;
            --note-text: var(--text);
            --noteheading-text: hsl(120, 70%, 30%);
            --notesummary-underline: silver;

            --assertion-border: #aaa;
            --assertion-bg: #eee;
            --assertion-text: black;

            --advisement-border: orange;
            --advisement-bg: #fec;
            --advisement-text: var(--text);
            --advisementheading-text: #b35f00;

            --warning-border: red;
            --warning-bg: hsla(40, 100%, 50%, 0.95);
            --warning-text: var(--text);

            --amendment-border: #330099;
            --amendment-bg: #F5F0FF;
            --amendment-text: var(--text);
            --amendmentheading-text: #220066;

            --def-border: #8ccbf2;
            --def-bg: #def;
            --def-text: var(--text);
            --defrow-border: #bbd7e9;

            --datacell-border: silver;

            --indexinfo-text: #707070;

            --indextable-hover-text: black;
            --indextable-hover-bg: #f7f8f9;

            --outdatedspec-bg: rgba(0, 0, 0, .5);
            --outdatedspec-text: black;
            --outdated-bg: maroon;
            --outdated-text: white;
            --outdated-shadow: red;

            --editedrec-bg: darkorange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --text: #ddd;
                --bg: black;

                --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

                --logo-bg: #1a5e9a;
                --logo-active-bg: #c00;
                --logo-text: white;

                --tocnav-normal-text: #999;
                --tocnav-normal-bg: var(--bg);
                --tocnav-hover-text: var(--tocnav-normal-text);
                --tocnav-hover-bg: #080808;
                --tocnav-active-text: #f44;
                --tocnav-active-bg: var(--tocnav-normal-bg);

                --tocsidebar-text: var(--text);
                --tocsidebar-bg: #080808;
                --tocsidebar-shadow: rgba(255, 255, 255, .1);
                --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

                --toclink-text: var(--text);
                --toclink-underline: #6af;
                --toclink-visited-text: var(--toclink-text);
                --toclink-visited-underline: #054572;

                --heading-text: #8af;

                --hr-text: var(--text);

                --algo-border: #456;

                --del-text: #f44;
                --del-bg: transparent;
                --ins-text: #4a4;
                --ins-bg: transparent;

                --a-normal-text: #6af;
                --a-normal-underline: #555;
                --a-visited-text: var(--a-normal-text);
                --a-visited-underline: var(--a-normal-underline);
                --a-hover-bg: rgba(25%, 25%, 25%, .2);
                --a-active-text: #f44;
                --a-active-underline: var(--a-active-text);

                --borderedblock-bg: rgba(255, 255, 255, .05);

                --blockquote-border: silver;
                --blockquote-bg: var(--borderedblock-bg);
                --blockquote-text: currentcolor;

                --issue-border: #e05252;
                --issue-bg: var(--borderedblock-bg);
                --issue-text: var(--text);
                --issueheading-text: hsl(0deg, 70%, 70%);

                --example-border: hsl(50deg, 90%, 60%);
                --example-bg: var(--borderedblock-bg);
                --example-text: var(--text);
                --exampleheading-text: hsl(50deg, 70%, 70%);

                --note-border: hsl(120deg, 100%, 35%);
                --note-bg: var(--borderedblock-bg);
                --note-text: var(--text);
                --noteheading-text: hsl(120, 70%, 70%);
                --notesummary-underline: silver;

                --assertion-border: #444;
                --assertion-bg: var(--borderedblock-bg);
                --assertion-text: var(--text);

                --advisement-border: orange;
                --advisement-bg: #222218;
                --advisement-text: var(--text);
                --advisementheading-text: #f84;

                --warning-border: red;
                --warning-bg: hsla(40, 100%, 20%, 0.95);
                --warning-text: var(--text);

                --amendment-border: #330099;
                --amendment-bg: #080010;
                --amendment-text: var(--text);
                --amendmentheading-text: #cc00ff;

                --def-border: #8ccbf2;
                --def-bg: #080818;
                --def-text: var(--text);
                --defrow-border: #136;

                --datacell-border: silver;

                --indexinfo-text: #aaa;

                --indextable-hover-text: var(--text);
                --indextable-hover-bg: #181818;

                --outdatedspec-bg: rgba(255, 255, 255, .5);
                --outdatedspec-text: black;
                --outdated-bg: maroon;
                --outdated-text: white;
                --outdated-shadow: red;

                --editedrec-bg: darkorange;
            }

            /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
            img {
                background: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-counters */
        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* Boilerplate: style-dfn-panel */
        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
            --dfnpanel-target-bg: #ffc;
            --dfnpanel-target-outline: orange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dfnpanel-bg: #222;
                --dfnpanel-text: var(--text);
                --dfnpanel-target-bg: #333;
                --dfnpanel-target-outline: silver;
            }
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel a:focus {
            outline: 5px auto Highlight;
            outline: 5px auto -webkit-focus-ring-color;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0 0 0 1em;
            list-style: none;
        }

        .dfn-panel li a {
            max-width: calc(300px - 1.5em - 1em);
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: 8px;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
            transition: left 1s ease-out, bottom 1s ease-out;
        }

        .dfn-panel .link-item:hover {
            text-decoration: underline;
        }

        .dfn-panel .link-item .copy-icon {
            opacity: 0;
        }

        .dfn-panel .link-item:hover .copy-icon,
        .dfn-panel .link-item .copy-icon:focus {
            opacity: 1;
        }

        .dfn-panel .copy-icon {
            display: inline-block;
            margin-right: 0.5em;
            width: 0.85em;
            height: 1em;
            border-radius: 3px;
            background-color: #ccc;
            cursor: pointer;
        }

        .dfn-panel .copy-icon .icon {
            width: 100%;
            height: 100%;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .dfn-panel .copy-icon .icon::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 1px solid black;
            background-color: #ccc;
            opacity: 0.25;
            transform: translate(3px, -3px);
        }

        .dfn-panel .copy-icon:active .icon::before {
            opacity: 1;
        }

        .dfn-paneled[role="button"] {
            cursor: help;
        }

        .highlighted {
            animation: target-fade 3s;
        }

        @keyframes target-fade {
            from {
                background-color: var(--dfnpanel-target-bg);
                outline: 5px solid var(--dfnpanel-target-outline);
            }

            to {
                color: var(--a-normal-text);
                background-color: transparent;
                outline: transparent;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-issues */
        a[href].issue-return {
            float: right;
            float: inline-end;
            color: var(--issueheading-text);
            font-weight: bold;
            text-decoration: none;
        }
    </style>
    <style>
        /* Boilerplate: style-md-lists */
        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* Boilerplate: style-ref-hints */
        :root {
            --ref-hint-bg: #ddd;
            --ref-hint-text: var(--text);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --ref-hint-bg: #222;
                --ref-hint-text: var(--text);
            }
        }

        .ref-hint {
            display: inline-block;
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.5em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--ref-hint-bg);
            color: var(--ref-hint-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .ref-hint * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .ref-hint ul {
            padding: 0 0 0 1em;
            list-style: none;
        }
    </style>
    <style>
        /* Boilerplate: style-selflinks */
        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        .example>a.self-link,
        .note>a.self-link,
        .issue>a.self-link {
            /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
            left: auto;
            right: 0;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* Boilerplate: style-syntax-highlighting */
        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        .highlight:not(.idl) {
            background: rgba(0, 0, 0, .03);
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */

        @media (prefers-color-scheme: dark) {
            .highlight:not(.idl) {
                background: rgba(255, 255, 255, .05);
            }

            c-[a] {
                color: #d33682
            }

            /* Keyword.Declaration */
            c-[b] {
                color: #d33682
            }

            /* Keyword.Type */
            c-[c] {
                color: #2aa198
            }

            /* Comment */
            c-[d] {
                color: #2aa198
            }

            /* Comment.Multiline */
            c-[e] {
                color: #268bd2
            }

            /* Name.Attribute */
            c-[f] {
                color: #b58900
            }

            /* Name.Tag */
            c-[g] {
                color: #cb4b16
            }

            /* Name.Variable */
            c-[k] {
                color: #d33682
            }

            /* Keyword */
            c-[l] {
                color: #657b83
            }

            /* Literal */
            c-[m] {
                color: #657b83
            }

            /* Literal.Number */
            c-[n] {
                color: #268bd2
            }

            /* Name */
            c-[o] {
                color: #657b83
            }

            /* Operator */
            c-[p] {
                color: #657b83
            }

            /* Punctuation */
            c-[s] {
                color: #6c71c4
            }

            /* Literal.String */
            c-[t] {
                color: #6c71c4
            }

            /* Literal.String.Single */
            c-[u] {
                color: #6c71c4
            }

            /* Literal.String.Double */
            c-[ch] {
                color: #2aa198
            }

            /* Comment.Hashbang */
            c-[cp] {
                color: #2aa198
            }

            /* Comment.Preproc */
            c-[cpf] {
                color: #2aa198
            }

            /* Comment.PreprocFile */
            c-[c1] {
                color: #2aa198
            }

            /* Comment.Single */
            c-[cs] {
                color: #2aa198
            }

            /* Comment.Special */
            c-[kc] {
                color: #d33682
            }

            /* Keyword.Constant */
            c-[kn] {
                color: #d33682
            }

            /* Keyword.Namespace */
            c-[kp] {
                color: #d33682
            }

            /* Keyword.Pseudo */
            c-[kr] {
                color: #d33682
            }

            /* Keyword.Reserved */
            c-[ld] {
                color: #657b83
            }

            /* Literal.Date */
            c-[nc] {
                color: #268bd2
            }

            /* Name.Class */
            c-[no] {
                color: #268bd2
            }

            /* Name.Constant */
            c-[nd] {
                color: #268bd2
            }

            /* Name.Decorator */
            c-[ni] {
                color: #268bd2
            }

            /* Name.Entity */
            c-[ne] {
                color: #268bd2
            }

            /* Name.Exception */
            c-[nf] {
                color: #268bd2
            }

            /* Name.Function */
            c-[nl] {
                color: #268bd2
            }

            /* Name.Label */
            c-[nn] {
                color: #268bd2
            }

            /* Name.Namespace */
            c-[py] {
                color: #268bd2
            }

            /* Name.Property */
            c-[ow] {
                color: #657b83
            }

            /* Operator.Word */
            c-[mb] {
                color: #657b83
            }

            /* Literal.Number.Bin */
            c-[mf] {
                color: #657b83
            }

            /* Literal.Number.Float */
            c-[mh] {
                color: #657b83
            }

            /* Literal.Number.Hex */
            c-[mi] {
                color: #657b83
            }

            /* Literal.Number.Integer */
            c-[mo] {
                color: #657b83
            }

            /* Literal.Number.Oct */
            c-[sa] {
                color: #6c71c4
            }

            /* Literal.String.Affix */
            c-[sb] {
                color: #6c71c4
            }

            /* Literal.String.Backtick */
            c-[sc] {
                color: #6c71c4
            }

            /* Literal.String.Char */
            c-[dl] {
                color: #6c71c4
            }

            /* Literal.String.Delimiter */
            c-[sd] {
                color: #6c71c4
            }

            /* Literal.String.Doc */
            c-[se] {
                color: #6c71c4
            }

            /* Literal.String.Escape */
            c-[sh] {
                color: #6c71c4
            }

            /* Literal.String.Heredoc */
            c-[si] {
                color: #6c71c4
            }

            /* Literal.String.Interpol */
            c-[sx] {
                color: #6c71c4
            }

            /* Literal.String.Other */
            c-[sr] {
                color: #6c71c4
            }

            /* Literal.String.Regex */
            c-[ss] {
                color: #6c71c4
            }

            /* Literal.String.Symbol */
            c-[fm] {
                color: #268bd2
            }

            /* Name.Function.Magic */
            c-[vc] {
                color: #cb4b16
            }

            /* Name.Variable.Class */
            c-[vg] {
                color: #cb4b16
            }

            /* Name.Variable.Global */
            c-[vi] {
                color: #cb4b16
            }

            /* Name.Variable.Instance */
            c-[vm] {
                color: #cb4b16
            }

            /* Name.Variable.Magic */
            c-[il] {
                color: #657b83
            }

            /* Literal.Number.Integer.Long */
        }
    </style>
    <style>
        /* Boilerplate: style-var-click-highlighting */
        /*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)

For darkmode:
0 = oklab(50%   0%  108%)
1 = oklab(50% -51%   51%)
2 = oklab(50% -64%  -20%)
3 = oklab(50%   6%   19%)
4 = oklab(50% -12%  -64%)
5 = oklab(50%  44%  -19%)  
6 = oklab(50% 102%   38%)
*/

        [data-algorithm] var {
            cursor: pointer;
        }

        var[data-var-color] {
            background-color: var(--var-bg);
            box-shadow: 0 0 0 2px var(--var-bg);
        }

        var[data-var-color] {
            --var-bg: #F4D200;
        }

        var[data-var-color="1"] {
            --var-bg: #FF87A2;
        }

        var[data-var-color="2"] {
            --var-bg: #96E885;
        }

        var[data-var-color="3"] {
            --var-bg: #3EEED2;
        }

        var[data-var-color="4"] {
            --var-bg: #EACFB6;
        }

        var[data-var-color="5"] {
            --var-bg: #82DDFF;
        }

        var[data-var-color="6"] {
            --var-vg: #FFBCF2;
        }

        @media (prefers-color-scheme: dark) {
            var[data-var-color] {
                --var-bg: #bc1a00;
            }

            var[data-var-color="1"] {
                --var-bg: #007f00;
            }

            var[data-var-color="2"] {
                --var-bg: #008698;
            }

            var[data-var-color="3"] {
                --var-bg: #7f5b2b;
            }

            var[data-var-color="4"] {
                --var-bg: #004df3;
            }

            var[data-var-color="5"] {
                --var-bg: #a1248a;
            }

            var[data-var-color="6"] {
                --var-vg: #ff0000;
            }
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD" rel="stylesheet">
    <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet"
        type="text/css">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
        <h1 class="p-name no-ref" id="title">CSSオーバーフローモジュール レベル5</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types/#FPWD">W3C 初回公開作業草案</a>, <time class="dt-updated"
                datetime="2024-12-17">2024年12月17日</time></p>
        <details open>
            <summary>この文書の詳細</summary>
            <div data-fill-with="spec-metadata">
                <dl>
                    <dt>このバージョン:
                    <dd><a class="u-url"
                            href="https://www.w3.org/TR/2024/WD-css-overflow-5-20241217/">https://www.w3.org/TR/2024/WD-css-overflow-5-20241217/</a>
                    <dt>最新版:
                    <dd><a href="https://www.w3.org/TR/css-overflow-5/">https://www.w3.org/TR/css-overflow-5/</a>
                    <dt>編集者草案:
                    <dd><a href="https://drafts.csswg.org/css-overflow-5/">https://drafts.csswg.org/css-overflow-5/</a>
                    <dt>履歴:
                    <dd><a class="u-url"
                            href="https://www.w3.org/standards/history/css-overflow-5/">https://www.w3.org/standards/history/css-overflow-5/</a>
                    <dt>フィードバック:
                    <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-overflow-5">CSSWG課題リポジトリ</a>
                    <dd><a href="#issues-index">仕様内インライン</a>
                    <dt class="editor">編集者:
                    <dd class="editor p-author h-card vcard" data-editor-id="43241"><a class="p-name fn u-url url"
                            href="http://florian.rivoal.net/">Florian Rivoal</a> (<span
                            class="p-org org">Bloomberg代表</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="35400"><a class="p-name fn u-url url"
                            href="http://fantasai.inkedblade.net/contact">Elika J. Etemad / fantasai</a> (<span
                            class="p-org org">Apple</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="98451"><a class="p-name fn u-email email"
                            href="mailto:flackr@google.com">Robert Flack</a> (<span class="p-org org">Google</span>)
                    <dt>この仕様の編集提案:
                    <dd><a href="https://github.com/w3c/csswg-drafts/blob/main/css-overflow-5/Overview.bs">GitHub
                            エディター</a>
                </dl>
            </div>
        </details>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> ©
            2024 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr
                title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a
                href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/copyright/software-license/" rel="license"
                title="W3C Software and Document License">permissive document license</a> rules apply. </p>
        <hr title="Separator for header">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">概要</span></h2>
        <p>このモジュールは、視覚メディアにおけるスクロール可能なオーバーフロー処理に関するCSSの機能を含みます。
            <a href="https://www.w3.org/TR/css-overflow-4/">CSS Overflow Module Level 4</a>を基盤とし、
            様々なスクロール制御（スクロール進行状況を示すマーカーや、スクロールをトリガーするボタンなど）を生成・関連付ける機能を追加し、
            <a href="#fragmentation">断片化によるオーバーフローの転送</a>の実験的な検討を含む付録を追加しています。
        </p>
        <a href="https://www.w3.org/TR/CSS/">CSS</a>は、構造化文書（HTMLやXMLなど）のレンダリングを
        画面や紙などで記述するための言語です。
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">この文書の位置付け</span></h2>
    <div data-fill-with="status">
        <p><em>このセクションは、公開時点での本書の位置付けについて説明します。
                現在のW3C出版物一覧や最新バージョンは
                <a href="https://www.w3.org/TR/">W3C技術レポートインデックス https://www.w3.org/TR/</a> にてご覧いただけます。</em> </p>
        <p> この文書は<a href="https://www.w3.org/groups/wg/css">CSS作業部会</a>によって、<strong>初回公開作業草案</strong>として<a
                href="https://www.w3.org/policies/process/20231103/#recs-and-notes">勧告トラック</a>を用いて公開されました。
            初回公開作業草案としての公開は、<abbr title="World Wide Web Consortium">W3C</abbr>およびそのメンバーによる承認を意味するものではありません。</p>
        <p> この文書はドラフトであり、
            随時更新、置換、または他の文書により廃止される可能性があります。
            本文書を進行中の作業以外として引用することは不適切です。</p>
        <p>ご意見・フィードバックは
            <a href="https://github.com/w3c/csswg-drafts/issues">GitHubでIssueを提出</a>（推奨）してください。
            タイトルに仕様コード「css-overflow」を含め、次のようにしてください：
            「[css-overflow] <i>…コメントの要約…</i>」
            すべてのIssueやコメントは<a href="https://lists.w3.org/Archives/Public/public-css-archive/">アーカイブ</a>されています。
            または、(<a href="https://lists.w3.org/Archives/Public/www-style/">アーカイブ</a>されます) 公開メーリングリスト <a
                href="mailto:www-style@w3.org?Subject=%5Bcss-overflow%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>
            へ送信も可能です。
        </p>
        <p>この文書は、<a href="https://www.w3.org/policies/process/20231103/"
                id="w3c_process_revision">2023年11月3日版W3Cプロセス文書</a>に準拠しています。</p>
        <p>この文書は、<a href="https://www.w3.org/policies/patent-policy/20200915/">W3C特許ポリシー</a>の下で活動するグループによって作成されました。
            W3Cは、グループの成果物に関連して行われた<a href="https://www.w3.org/groups/wg/css/ipr"
                rel="disclosure">特許開示の公開リスト</a>を管理しています。
            そのページには特許開示の方法も記載されています。
            個人が特許について実際に知っていて、
            <a href="https://www.w3.org/policies/patent-policy/20200915/#def-essential">必須クレーム</a>が含まれていると信じる場合は、<a
                href="https://www.w3.org/policies/patent-policy/20200915/#sec-Disclosure">W3C特許ポリシー第6節</a>に従い、情報開示しなければなりません。
        </p>
        <p></p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目次</h2>
        <ol class="toc" role="directory">
            <li><a href="#intro"><span class="secno">1</span> <span class="content"> はじめに</span></a>
            <li>
                <a href="#overflow-concepts"><span class="secno">2</span> <span class="content">
                        オーバーフローの概念と用語</span></a>
                <ol class="toc">
                    <li><a href="#scrolling"><span class="secno">2.1</span> <span
                                class="content">スクロールオーバーフロー</span></a>
                </ol>
            <li>
                <a href="#scroll-navigation"><span class="secno">3</span> <span class="content">
                        スクロールナビゲーション制御</span></a>
                <ol class="toc">
                    <li>
                        <a href="#scroll-markers"><span class="secno">3.1</span> <span class="content">
                                スクロールマーカー</span></a>
                        <ol class="toc">
                            <li><a href="#scroll-marker-grouping"><span class="secno">3.1.1</span> <span
                                        class="content"> スクロールマーカーのグループ化</span></a>
                            <li><a href="#scroll-marker-group-property"><span class="secno">3.1.2</span> <span
                                        class="content"> <span class="property">scroll-marker-group</span>
                                        プロパティ</span></a>
                            <li><a href="#scroll-marker-group-pseudo"><span class="secno">3.1.3</span> <span
                                        class="content"><span class="css">::scroll-marker-group</span> 疑似要素</span></a>
                            <li><a href="#scroll-marker-pseudo"><span class="secno">3.1.4</span> <span
                                        class="content"><span class="css">::scroll-marker</span> 疑似要素</span></a>
                            <li><a href="#active-scroll-marker"><span class="secno">3.1.5</span> <span class="content">
                                        アクティブスクロールマーカーの選択：<span class="css">:target-current</span> 疑似クラス</span></a>
                            <li><a href="#scroll-marker-activation"><span class="secno">3.1.6</span> <span
                                        class="content">アクティベーションの挙動</span></a>
                            <li><a href="#scroll-target-focus"><span class="secno">3.1.7</span> <span
                                        class="content">フォーカスの挙動</span></a>
                        </ol>
                    <li><a href="#scroll-buttons"><span class="secno">3.2</span> <span class="content">
                                スクロールボタン</span></a>
                    <li><a href="#focus-order"><span class="secno">3.3</span> <span class="content">
                                フォーカスナビゲーション順序</span></a>
                </ol>
            <li>
                <a href="#fragmentation"><span class="secno"></span> <span class="content"> 付録A: オーバーフローの転送</span></a>
                <ol class="toc">
                    <li><a href="#channelling-overflow"><span class="secno"></span> <span class="content">
                                オーバーフローのチャンネリング：<span class="property">continue</span> プロパティ</span></a>
                    <li><a href="#paginated-overflow"><span class="secno"></span> <span class="content">
                                ページ分割オーバーフロー</span></a>
                    <li><a href="#fragment-overflow"><span class="secno"></span> <span class="content">
                                断片化オーバーフロー</span></a>
                    <li>
                        <a href="#fragment-styling"><span class="secno"></span> <span
                                class="content">断片のスタイリング</span></a>
                        <ol class="toc">
                            <li><a href="#fragment-pseudo-element"><span class="secno"></span> <span class="content">
                                        <span class="css">::nth-fragment()</span> 疑似要素</span></a>
                            <li><a href="#style-of-fragments"><span class="secno"></span> <span class="content">
                                        断片のスタイル</span></a>
                            <li><a href="#style-in-fragments"><span class="secno"></span> <span
                                        class="content">断片内のスタイリング</span></a>
                        </ol>
                </ol>
            <li><a href="#privacy"><span class="secno"></span> <span class="content"> 付録C: プライバシーに関する考慮事項</span></a>
            <li><a href="#security"><span class="secno"></span> <span class="content"> 付録D: セキュリティに関する考慮事項</span></a>
            <li><a href="#changes-l4"><span class="secno"></span> <span class="content"> レベル4からの変更点</span></a>
            <li><a href="#acknowledgments"><span class="secno"></span> <span class="content"> 謝辞</span></a>
            <li>
                <a href="#w3c-conformance"><span class="secno"></span> <span class="content">適合性</span></a>
                <ol class="toc">
                    <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content"> 文書の慣例</span></a>
                    <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span class="content">
                                適合クラス</span></a>
                    <li>
                        <a href="#w3c-partial"><span class="secno"></span> <span class="content"> 部分実装</span></a>
                        <ol class="toc">
                            <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span
                                        class="content"> 不安定および独自機能の実装</span></a>
                        </ol>
                    <li><a href="#w3c-testing"><span class="secno"></span> <span class="content"> 実験的でない実装</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本仕様で定義された用語</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">参照で定義された用語</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">規定参考文献</span></a>
                    <li><a href="#informative"><span class="secno"></span> <span class="content">参考情報文献</span></a>
                </ol>
            <li><a href="#property-index"><span class="secno"></span> <span class="content">プロパティ索引</span></a>
            <li><a href="#issues-index"><span class="secno"></span> <span class="content">課題索引</span></a>
        </ol>
    </nav>
    <main>
        <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">
                はじめに</span><a class="self-link" href="#intro"></a></h2>
        <p>この仕様は <a data-link-type="biblio" href="#biblio-css-overflow-4"
                title="CSS Overflow Module Level 4">[CSS-OVERFLOW-4]</a> を拡張します。
            現時点では差分仕様であり、
            新しい機能のみをいくつか定義しています。
            オーバーフローに関連するその他の機能については <span title="CSS Overflow Module Level 4">[CSS-OVERFLOW-4]</span> を参照してください。</p>
        <dl>
            <dt data-md><a href="#scroll-navigation">スクロールナビゲーション制御</a>
            <dd data-md>
                <p>このセクションでは、スクローラー内の要素に <a data-link-type="dfn" href="#scroll-marker"
                        id="ref-for-scroll-marker">スクロールマーカー</a> を関連付ける機能
                    （または <a class="css" data-link-type="maybe" href="#selectordef-scroll-marker"
                        id="ref-for-selectordef-scroll-marker">::scroll-marker</a> 疑似要素として自動生成し、
                    ユーザーの自動動作やアクセシブルラベルを付与）の定義を行います。
                    これらは、関連する要素へスクロールしたり、
                    <a class="css" data-link-type="maybe" href="#selectordef-target-current"
                        id="ref-for-selectordef-target-current">:target-current</a> 疑似クラスを通じて
                    スクロール位置の進行状況を反映したりできます。
                </p>
                <p>また、<a class="css" data-link-type="maybe" href="#selectordef-scroll-button-scroll-button-direction"
                        id="ref-for-selectordef-scroll-button-scroll-button-direction">::scroll-button()</a>
                    疑似要素も定義されており、
                    これをアクティブ化することで、対応するスクローラーが指定した方向に「ページ」単位でスクロールします。</p>
            <dt data-md><a href="#fragmentation">オーバーフローの転送</a>
            <dd data-md>
                <p>このセクションでは、オーバーフローを新たに生成された <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-break-4/#fragmentation-container"
                        id="ref-for-fragmentation-container">断片化コンテナ</a> に転送して処理する
                    非常に実験的かつ探索的な新モデルを定義します。</p>
        </dl>
        <h2 class="heading settled" data-level="2" id="overflow-concepts"><span class="secno">2. </span><span
                class="content"> オーバーフローの概念と用語</span><a class="self-link" href="#overflow-concepts"></a></h2>
        <p class="issue" id="issue-50246bc5"><a class="self-link" href="#issue-50246bc5"></a> <a
                href="https://www.w3.org/TR/css-overflow-3/#overflow-concepts">Level 3の内容</a>は最終化時にコピーすること。</p>
        <h3 class="heading settled" data-level="2.1" id="scrolling"><span class="secno">2.1. </span><span
                class="content">スクロールオーバーフロー</span><a class="self-link" href="#scrolling"></a></h3>
        <p>スクロールオーバーフローの概念に、以下が追加されます：</p>
        <p>すべての <a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                id="ref-for-scroll-container">スクロールコンテナ</a> は <dfn class="dfn-paneled" data-dfn-type="dfn" data-export
                id="current-scroll-target">現在のスクロールターゲット</dfn> を保持します。
            初期値は <code>null</code> であり、
            ユーザーによるその <span id="ref-for-scroll-container①">スクロールコンテナ</span> でのスクロール操作、
            またはターゲットのないスクリプトによる操作、
            あるいはターゲットが文書から削除された場合には <code>null</code> にリセットされます。
            <span id="ref-for-scroll-container②">スクロールコンテナ</span> でターゲットElementやPseudoElementを指定してスクロール操作を行った場合、
            <a data-link-type="dfn" href="#current-scroll-target" id="ref-for-current-scroll-target">現在のスクロールターゲット</a>
            がそのElementまたはPseudoElementに設定されます。
        </p>
        <p class="issue" id="issue-fc26a707"><a class="self-link" href="#issue-fc26a707"></a> 現在のスクロールターゲットの設定は <a
                data-link-type="dfn" href="https://drafts.csswg.org/cssom-view-1/#scroll-a-target-into-view"
                id="ref-for-scroll-a-target-into-view">ターゲットを表示範囲にスクロール</a> する方法で定義されるべきです。</p>
        <p class="issue" id="issue-e9bdeb4d"><a class="self-link" href="#issue-e9bdeb4d"></a> 現在のスクロールターゲットを <a
                data-link-type="dfn" href="https://drafts.csswg.org/css-scroll-anchoring-1/#anchor-priority-candidates"
                id="ref-for-anchor-priority-candidates">スクロールアンカー優先候補</a> として利用すること。</p>
        <h2 class="heading settled" data-level="3" id="scroll-navigation"><span class="secno">3. </span><span
                class="content">スクロールナビゲーション制御</span><a class="self-link" href="#scroll-navigation"></a>
        </h2>
        <h3 class="heading settled" data-level="3.1" id="scroll-markers"><span class="secno">3.1. </span><span
                class="content">スクロールマーカー</span><a class="self-link" href="#scroll-markers"></a></h3>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="scroll-marker">スクロールマーカー</dfn> とは、
            <a data-link-type="dfn" href="#scroll-target" id="ref-for-scroll-target">スクロールターゲット</a> を持つ要素または疑似要素です。
            要素または疑似要素の <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="scroll-target">スクロールターゲット</dfn> は、
            <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element">Element</a></code>
            であり、<a data-link-type="dfn" href="#scroll-marker" id="ref-for-scroll-marker①">スクロールマーカー</a> により示されます。
            どの要素が <span id="ref-for-scroll-marker②">スクロールマーカー</span> となるか、
            その <span id="ref-for-scroll-target①">スクロールターゲット</span> が何かは、ホスト言語定義です。
            <a href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element">HTML &lt;a> 要素</a>
            や <a href="https://www.w3.org/TR/SVG2/linking.html#Links">SVG &lt;a> 要素</a> は <span
                id="ref-for-scroll-marker③">スクロールマーカー</span> であり、
            その <span id="ref-for-scroll-target②">スクロールターゲット</span> は <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#the-indicated-part-of-the-document"
                id="ref-for-the-indicated-part-of-the-document">示された文書部分</a> です。
            これらのナビゲーションリンクは現在でも作成可能ですが、
            ユーザーに対して現在表示中のコンテンツに関するフィードバックがほとんどなく、
            インタラクションモデルは多くの最新アクセシブルUIコンポーネントの期待と一致しません。
        </p>
        <p>この仕様では、<a data-link-type="dfn" href="#scroll-marker" id="ref-for-scroll-marker④">スクロールマーカー</a> のグループ化機構と、
            <a class="css" data-link-type="maybe" href="#selectordef-scroll-marker"
                id="ref-for-selectordef-scroll-marker①">::scroll-marker</a> 疑似要素の自動生成機構を追加します。
            各グループ内で、アクティブなマーカーが現在のスクロール位置を反映し、
            ユーザーにどのセクションにいるかを示すスタイルを適用できます。
        </p>
        <p>ユースケースには、目次リンク、カルーセルページのマーカー、スクロール可能なタブパネルなどが含まれます。</p>
        <p class="issue" id="issue-41eecb3e"><a class="self-link" href="#issue-41eecb3e"></a> これらの例を表現する画像を追加すること。</p>
        <h4 class="heading settled" data-level="3.1.1" id="scroll-marker-grouping"><span class="secno">3.1.1.
            </span><span class="content">スクロールマーカーのグループ化</span><a class="self-link" href="#scroll-marker-grouping"></a>
        </h4>
        <p><a href="https://open-ui.org/components/focusgroup.explainer/">focusgroup</a> 属性を持つ要素は、
            <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="scroll-marker-group-container">スクロールマーカーグループコンテナ</dfn> を定義し、
            その <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="scroll-marker-group">スクロールマーカーグループ</dfn> に
            最も近い祖先 <a data-link-type="dfn" href="#scroll-marker-group-container"
                id="ref-for-scroll-marker-group-container">スクロールマーカーグループコンテナ</a> を持つ
            <a data-link-type="dfn" href="#scroll-marker" id="ref-for-scroll-marker⑤">スクロールマーカー</a> 要素すべてが含まれます。
        </p>
        <p class="issue" id="issue-a5475f7a"><a class="self-link" href="#issue-a5475f7a"></a>
            スクロール進行状況追跡のためのマーカーグループ化は、focusgroupのフォーカス挙動へのオプトインと分離すべきです。</p>
        <p><a class="css" data-link-type="maybe" href="#selectordef-scroll-marker-group"
                id="ref-for-selectordef-scroll-marker-group">::scroll-marker-group</a> 疑似要素は、
            その中の <a class="css" data-link-type="maybe" href="#selectordef-scroll-marker"
                id="ref-for-selectordef-scroll-marker②">::scroll-marker</a> 疑似要素の <a data-link-type="dfn"
                href="#scroll-marker-group" id="ref-for-scroll-marker-group">スクロールマーカーグループ</a> を形成する <a
                data-link-type="dfn" href="#scroll-marker-group-container"
                id="ref-for-scroll-marker-group-container①">スクロールマーカーグループコンテナ</a> です。</p>
        <h4 class="heading settled" data-level="3.1.2" id="scroll-marker-group-property"><span class="secno">3.1.2.
            </span><span class="content"> <a class="property css" data-link-type="property"
                    href="#propdef-scroll-marker-group" id="ref-for-propdef-scroll-marker-group">scroll-marker-group</a>
                プロパティ</span><a class="self-link" href="#scroll-marker-group-property"></a></h4>
        <table class="def propdef" data-link-for-hint="scroll-marker-group">
            <tbody>
                <tr>
                    <th>名前:
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-scroll-marker-group">scroll-marker-group</dfn>
                <tr class="value">
                    <th><a href="https://www.w3.org/TR/css-values/#value-defs">値:</a>
                    <td class="prod">none <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one">|</a> before <span
                            id="ref-for-comb-one①">|</span> after
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">初期値:</a>
                    <td>none
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">適用対象:</a>
                    <td><a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                            id="ref-for-scroll-container③">スクロールコンテナ</a>
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">継承:</a>
                    <td>no
                <tr>
                    <th><a href="https://www.w3.org/TR/css-values/#percentages">パーセンテージ:</a>
                    <td>n/a
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#computed">算出値:</a>
                    <td>指定値
                <tr>
                    <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">正規順序:</a>
                    <td>文法順
                <tr>
                    <th><a href="https://www.w3.org/TR/web-animations/#animation-type">アニメーションタイプ:</a>
                    <td>離散
        </table>
        <p><a class="property css" data-link-type="property" href="#propdef-scroll-marker-group"
                id="ref-for-propdef-scroll-marker-group①">scroll-marker-group</a> プロパティは、
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                id="ref-for-scroll-container④">スクロールコンテナ</a> に '::scroll-marker-group' 疑似要素を生成するか、
            その位置をスクロールコンテナに対してどこにするかを指定します。
        </p>
        <dl>
            <dt><dfn class="dfn-paneled css" data-dfn-for="scroll-marker-group" data-dfn-type="value" data-export
                    id="valdef-scroll-marker-group-none">none</dfn>
            <dd> <a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                    id="ref-for-scroll-container⑤">スクロールコンテナ</a> は '::scroll-marker-group' 疑似要素を生成しません。
            <dt><dfn class="dfn-paneled css" data-dfn-for="scroll-marker-group" data-dfn-type="value" data-export
                    id="valdef-scroll-marker-group-before">before</dfn>
            <dd> <a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                    id="ref-for-scroll-container⑥">スクロールコンテナ</a> は <a class="css" data-link-type="maybe"
                    href="#selectordef-scroll-marker-group"
                    id="ref-for-selectordef-scroll-marker-group①">::scroll-marker-group</a> 疑似要素を生成し、
                そのボックスは <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#originating-element"
                    id="ref-for-originating-element">生成元要素</a> の直前の兄弟要素となります。
            <dt><dfn class="dfn-paneled css" data-dfn-for="scroll-marker-group" data-dfn-type="value" data-export
                    id="valdef-scroll-marker-group-after">after</dfn>
            <dd> <a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                    id="ref-for-scroll-container⑦">スクロールコンテナ</a> は <a class="css" data-link-type="maybe"
                    href="#selectordef-scroll-marker-group"
                    id="ref-for-selectordef-scroll-marker-group②">::scroll-marker-group</a> 疑似要素を生成し、
                そのボックスは <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#originating-element"
                    id="ref-for-originating-element①">生成元要素</a> の直後の兄弟要素となります。
        </dl>
        <h4 class="heading settled" data-level="3.1.3" id="scroll-marker-group-pseudo"><span class="secno">3.1.3.
            </span><span class="content"><a class="css" data-link-type="maybe" href="#selectordef-scroll-marker-group"
                    id="ref-for-selectordef-scroll-marker-group③">::scroll-marker-group</a> 疑似要素</span><a
                class="self-link" href="#scroll-marker-group-pseudo"></a></h4>
        <p><dfn class="dfn-paneled css" data-dfn-type="selector" data-export
                id="selectordef-scroll-marker-group">::scroll-marker-group</dfn> <a data-link-type="dfn"
                href="https://drafts.csswg.org/css-pseudo-4/#fully-styleable"
                id="ref-for-fully-styleable">完全にスタイル可能な疑似要素</a> は、
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                id="ref-for-scroll-container⑧">スクロールコンテナ</a> 要素によって生成されます。
            この要素の <a class="property css" data-link-type="property" href="#propdef-scroll-marker-group"
                id="ref-for-propdef-scroll-marker-group②">scroll-marker-group</a> プロパティの算出値が <a class="css"
                data-link-type="maybe" href="#valdef-scroll-marker-group-none"
                id="ref-for-valdef-scroll-marker-group-none">none</a> でない場合に生成されます。
        </p>
        <p><a class="css" data-link-type="maybe" href="#selectordef-scroll-marker-group"
                id="ref-for-selectordef-scroll-marker-group④">::scroll-marker-group</a> は、
            <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#originating-element"
                id="ref-for-originating-element②">生成元要素</a> の <em>兄弟要素</em>としてボックスを生成し、
            （<a class="css" data-link-type="propdesc" href="#propdef-scroll-marker-group"
                id="ref-for-propdef-scroll-marker-group③">scroll-marker-group: before</a> の場合は直前に、
            <span class="css" id="ref-for-propdef-scroll-marker-group④">scroll-marker-group: after</span>
            の場合は直後に）配置されます。
        </p>
        <p>スクロールマーカー疑似要素の生成がサイトのレイアウトを壊さないよう、デフォルトUAスタイルシートには次の追加が推奨されます：</p>
        <pre class="lang-css highlight"><c- c>/* ::scroll-marker 疑似要素の生成は</c->
<c- c> * この疑似要素の外のレイアウトを壊すべきではありません。 */</c->
::scroll-marker-group <c- p>{</c-> <c- k>contain</c-><c- p>:</c-> size !important<c- p>;</c-> <c- p>}</c->
</pre>
        <p><a class="property css" data-link-type="property" href="#propdef-scroll-marker-group"
                id="ref-for-propdef-scroll-marker-group⑤">scroll-marker-group</a> は暗黙的に単一のフォーカス可能なコンポーネントとして振る舞い、
            <a href="https://open-ui.org/components/focusgroup.explainer/">focusgroup</a> を確立します。
        </p>
        <h4 class="heading settled" data-level="3.1.4" id="scroll-marker-pseudo"><span class="secno">3.1.4. </span><span
                class="content"><a class="css" data-link-type="maybe" href="#selectordef-scroll-marker"
                    id="ref-for-selectordef-scroll-marker③">::scroll-marker</a> 疑似要素</span><a class="self-link"
                href="#scroll-marker-pseudo"></a></h4>
        <p><a class="css" data-link-type="maybe" href="https://www.w3.org/TR/css-pseudo-4/#selectordef-before"
                id="ref-for-selectordef-before">::before</a> や <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-pseudo-4/#selectordef-after" id="ref-for-selectordef-after">::after</a>
            と同様に、
            すべての要素は <a class="css" data-link-type="maybe" href="#selectordef-scroll-marker"
                id="ref-for-selectordef-scroll-marker④">::scroll-marker</a> 疑似要素を持つことができ、
            これは最も近い祖先 <a class="css" data-link-type="maybe" href="#selectordef-scroll-marker-group"
                id="ref-for-selectordef-scroll-marker-group⑤">::scroll-marker-group</a> のグループに集められ、
            アクティブ化するとその要素へスクロールします。</p>
        <p>最も近い祖先 <a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                id="ref-for-scroll-container①⓪">スクロールコンテナ</a> <span id="ref-for-scroll-container①①">スクロールコンテナ</span> の
            <a class="property css" data-link-type="property" href="#propdef-scroll-marker-group"
                id="ref-for-propdef-scroll-marker-group⑥">scroll-marker-group</a> プロパティが <a class="css"
                data-link-type="maybe" href="#valdef-scroll-marker-group-none"
                id="ref-for-valdef-scroll-marker-group-none①">none</a> でなく、
            <dfn class="dfn-paneled css" data-dfn-type="selector" data-export
                id="selectordef-scroll-marker">::scroll-marker</dfn> 疑似要素の <a class="property css"
                data-link-type="property" href="https://www.w3.org/TR/css-content-3/#propdef-content"
                id="ref-for-propdef-content">content</a> の算出値が <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-content-3/#valdef-content-none"
                id="ref-for-valdef-content-none">none</a> でない場合、
            疑似要素は、最も近い祖先 <span id="ref-for-scroll-container①②">スクロールコンテナ</span> の
            <a class="css" data-link-type="maybe" href="#selectordef-scroll-marker-group"
                id="ref-for-selectordef-scroll-marker-group⑥">::scroll-marker-group</a> 疑似要素の生成ボックスの子としてボックスを生成します。
            これらのボックスは、<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-order"
                id="ref-for-concept-tree-order">ツリー順</a>で <a data-link-type="dfn"
                href="https://www.w3.org/TR/selectors-4/#originating-element"
                id="ref-for-originating-element③">生成元要素</a> に追加されます。
        </p>
        <p>これらの疑似要素の <a data-link-type="dfn" href="#scroll-target" id="ref-for-scroll-target③">スクロールターゲット</a> は <a
                data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#originating-element"
                id="ref-for-originating-element④">生成元要素</a> です。
            これらは <a
                href="https://html.spec.whatwg.org/multipage/interaction.html#attr-tabindex"><code>tabindex</code></a>
            が "-1" の要素として振る舞い、
            グループ内で矢印キーによるナビゲーションや、
            現在アクティブな場合、または他にアクティブな <a class="css" data-link-type="maybe" href="#selectordef-scroll-marker"
                id="ref-for-selectordef-scroll-marker⑤">::scroll-marker</a> がなくグループの最初のマーカーである場合にタブキーでフォーカス可能となり、
            グループに <a href="https://open-ui.org/components/focusgroup.explainer/#guaranteed-tab-stop">保証されたタブストップ</a>
            を提供します。
        </p>
        <h4 class="heading settled" data-level="3.1.5" id="active-scroll-marker"><span class="secno">3.1.5. </span><span
                class="content">アクティブなスクロールマーカーの選択：<a class="css" data-link-type="maybe"
                    href="#selectordef-target-current" id="ref-for-selectordef-target-current①">:target-current</a>
                疑似クラス</span><a class="self-link" href="#active-scroll-marker"></a></h4>
        <p>各<a data-link-type="dfn" href="#scroll-marker"
                id="ref-for-scroll-marker⑥">スクロールマーカー</a>グループ内では、常に1つだけ「アクティブ」なスクロールマーカーが決定されます。
            この「アクティブ」な<span id="ref-for-scroll-marker⑦">スクロールマーカー</span>は<dfn class="dfn-paneled css"
                data-dfn-type="selector" data-export id="selectordef-target-current">:target-current</dfn>疑似クラスに一致します。
        </p>
        <div class="example" id="example-7a0e4019">
            <a class="self-link" href="#example-7a0e4019"></a> 次のコード例は、現在スクロール中のセクションへのリンクをハイライトする方法を示します：
            <pre class="highlight"><c- k>a</c-><c- p>:</c->target-current <c- p>{</c->
  <c- k>font-weight</c-><c- p>:</c-> bold<c- p>;</c->
<c- p>}</c->
</pre>
        </div>
        <p>スクロール操作は、特定の位置へアニメーションする場合（例：スクロールバーの矢印クリック、矢印キー、"behavior: smooth"なプログラムスクロール）や、
            ユーザーの入力を直接追従する場合（例：タッチスクロール、スクロールバーのドラッグ）があります。
            いずれの場合も、ユーザーエージェントはスクローラーが到達する「最終スクロール位置」を選択します。これにより、関連するマーカーが即座にアクティブになります。</p>
        <p>この「最終スクロール位置」が各<a data-link-type="dfn" href="#scroll-marker-group"
                id="ref-for-scroll-marker-group②">スクロールマーカーグループ</a>内のアクティブマーカーを判定するために使われます。
            マーカー自体はコンテンツの開始（例：見出し）を示すだけの場合もあるため、アクティブなマーカーは、現在地またはそれ以降のスクロール位置にある最初のマーカーとみなします。</p>
        <p>1つ以上の<a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                id="ref-for-scroll-container①③">スクロールコンテナ</a>がスクロールされる、またはレイアウト変更により最終スクロール位置が変化した際、
            ユーザーエージェントは、ターゲットスクロール位置をもとに各<span
                id="ref-for-scroll-marker-group④">スクロールマーカーグループ</span>のアクティブマーカーを決定・更新すべきです。</p>
        <div class="example algorithm" data-algorithm="scroll tracking" id="example-d2ca6884">
            <a class="self-link" href="#example-d2ca6884"></a> 指定したスクロールマーカー<var>group</var>のアクティブマーカーを決定するアルゴリズム例：
            <ol>
                <li data-md>
                    <p><var>scroller</var>を、<var>group</var>内の全<a data-link-type="dfn" href="#scroll-marker"
                            id="ref-for-scroll-marker⑧">スクロールマーカー</a>要素の最も近い共通祖先<a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                            id="ref-for-scroll-container①④">スクロールコンテナ</a>とする。
                    </p>
                <li data-md>
                    <p><var>active</var>をscrollerとする。</p>
                <li data-md>
                    <p><var>active</var>が<var>group</var>でターゲットとなる<a data-link-type="dfn" href="#scroll-target"
                            id="ref-for-scroll-target④">スクロールターゲット</a>要素を含む<a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                            id="ref-for-scroll-container①⑤">スクロールコンテナ</a>である間：
                    </p>
                    <ol>
                        <li data-md>
                            <p><var>scroller</var>を<var>active</var>とする。</p>
                        <li data-md>
                            <p><var>targets</var>を、最も近い祖先<a data-link-type="dfn"
                                    href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                                    id="ref-for-scroll-container①⑥">スクロールコンテナ</a>が<var>scroller</var>である<a
                                    data-link-type="dfn" href="#scroll-target"
                                    id="ref-for-scroll-target⑤">スクロールターゲット</a>要素と、<var>scroller</var>を祖先とする<a
                                    data-link-type="dfn" href="#scroll-marker-group"
                                    id="ref-for-scroll-marker-group⑤">スクロールマーカーグループ</a>がターゲットにしている要素群とする。
                            </p>
                        <li data-md>
                            <dl>
                                <dt data-md>scrollerが非nullな<a data-link-type="dfn" href="#current-scroll-target"
                                        id="ref-for-current-scroll-target①">現在のスクロールターゲット</a>を持つ場合
                                <dd data-md>
                                    <p>activeを、<a data-link-type="dfn" href="#current-scroll-target"
                                            id="ref-for-current-scroll-target②">現在のスクロールターゲット</a>から逆順ツリー探索で最初に見つかる<var>targets</var>の項目、なければツリー順で最初の項目とする。
                                    </p>
                                <dt data-md>それ以外の場合
                                <dd data-md>
                                    <ol>
                                        <li data-md>
                                            <p><var>primary</var>を、コンテナのwriting-modeのブロック方向とみなす主要スクロール軸とする。</p>
                                        <li data-md>
                                            <p><var>secondary</var>を、primaryと直交する軸とする。</p>
                                        <li data-md>
                                            <p><var>position</var>を、現在のスクロール操作を含む「最終スクロール位置」とする。</p>
                                        <li data-md>
                                            <p><var>primary</var>・<var>secondary</var>両軸について次を行う：</p>
                                            <ol>
                                                <li data-md>
                                                    <p><var>scrollport
                                                            size</var>を<var>scroller</var>の<var>axis</var>方向のクライアントサイズとする。
                                                    </p>
                                                <li data-md>
                                                    <p><var>targets</var>の各<var>target</var>について、<a data-link-type="dfn"
                                                            href="https://drafts.csswg.org/cssom-view-1/#determine-the-scroll-into-view-position"
                                                            id="ref-for-determine-the-scroll-into-view-position">スクロールインビュー位置を決定</a>し、これを<var>target
                                                            position</var>として記録する。</p>
                                                <li data-md>
                                                    <p><var>scroll size</var>を、<a data-link-type="dfn"
                                                            href="https://www.w3.org/TR/css-overflow-3/#scrollable-overflow-region"
                                                            id="ref-for-scrollable-overflow-region">スクロール可能オーバーフロー領域</a>の長さとする。
                                                    </p>
                                                <li data-md>
                                                    <p><var>scroll
                                                            range</var>を<code><var>scroll size</var> - <var>scrollport size</var></code>とする。
                                                    </p>
                                                <li data-md>
                                                    <p>scroll rangeが0より大きい場合、到達不能なターゲット位置を分布調整：</p>
                                                    <ol>
                                                        <li data-md>
                                                            <p><var>distribute
                                                                    range</var>を<code>min(1/8 * <var>scrollport size</var>, <var>scroll range</var> / 2)</code>とする。
                                                            </p>
                                                        <li data-md>
                                                            <p><var>before targets</var>を、<var>target
                                                                    position</var>が<code><var>distribute range</var></code>未満の<var>targets</var>とする。
                                                            </p>
                                                        <li data-md>
                                                            <p><var>minimum position</var>を<var>before
                                                                    targets</var>の最小<var>target position</var>とする。</p>
                                                        <li data-md>
                                                            <p>各<var>before targets</var>の<var>target
                                                                    position</var>を<code>(<var>target position</var> - <var>minimum position</var>) / (<var>distribute range</var> - <var>minimum position</var>) * <var>distribute range</var></code>で更新。
                                                            </p>
                                                        <li data-md>
                                                            <p><var>after targets</var>を、<var>target
                                                                    position</var>が<code><var>scroll range</var> - <var>distribute range</var></code>超の<var>targets</var>とする。
                                                            </p>
                                                        <li data-md>
                                                            <p><var>maximum position</var>を<var>after
                                                                    targets</var>の最大<var>target position</var>とする。</p>
                                                        <li data-md>
                                                            <p>各<var>after targets</var>の<var>target
                                                                    position</var>を<code>(<var>target position</var> - (<var>scroll range</var> - <var>distribute range</var>)) / (<var>maximum position</var> - (<var>scroll range</var> - <var>distribute range</var>)) * <var>distribute range</var> + (<var>scroll range</var> - <var>distribute range</var>)</code>で更新。
                                                            </p>
                                                    </ol>
                                                <li data-md>
                                                    <p><var>selected position</var>を、<var>axis</var>方向で<var>target
                                                            position</var>が<var>position</var>以下かつ最大のもの、
                                                        または最も近い小さい<var>target position</var>が<var>position</var> -
                                                        <var>scrollport size</var> / 2未満で、
                                                        その<var>target position</var>が<var>position</var> +
                                                        <var>scrollport size</var> / 2未満であるものとする。
                                                    </p>
                                                <li data-md>
                                                    <dl>
                                                        <dt data-md>該当位置がない場合
                                                        <dd data-md>
                                                            <p>selected positionを最初のものに設定。</p>
                                                    </dl>
                                                <li data-md>
                                                    <p><var>active</var>を、<var>selected
                                                            position</var>に一致する<var>targets</var>全てとする。</p>
                                            </ol>
                                        <li data-md>
                                            <p>activeが複数候補の場合は、最初の項目を採用する。</p>
                                    </ol>
                            </dl>
                    </ol>
                <li data-md>
                    <p><var>selected marker</var>を<var>active</var>に関連付けられた<a data-link-type="dfn" href="#scroll-marker"
                            id="ref-for-scroll-marker⑨">スクロールマーカー</a>とする。
                        もし複数の<span id="ref-for-scroll-marker①⓪">スクロールマーカー</span>要素が<var>active</var>に関連付けられている場合、
                        <var>selected marker</var>をツリー順で最も早いものに設定する。
                    </p>
                <li data-md>
                    <p><var>selected marker</var>を返す。</p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="update active marker">
            ユーザーエージェントが新しいマーカーを<var>active marker</var>と決定した場合、<a data-link-type="dfn" href="#scroll-marker-group"
                id="ref-for-scroll-marker-group⑥">スクロールマーカーグループ</a><var>group</var>について次を実行する：
            <ol>
                <li data-md>
                    <p><var>active marker</var>のアクティブ状態をtrueに設定する。</p>
                <li data-md>
                    <dl>
                        <dt data-md>
                            <p><var>active marker</var>が<var>group</var>内で<a
                                    href="https://open-ui.org/components/focusgroup.explainer/#last-focused-memory">最後にフォーカスされた要素</a>であった場合
                            </p>
                        <dd data-md>
                            <p><var>active marker</var>にフォーカスする。</p>
                    </dl>
                <li data-md>
                    <p><var>group</var>の<a
                            href="https://open-ui.org/components/focusgroup.explainer/#last-focused-memory">最後にフォーカスされた要素</a>を<var>active
                            marker</var>に更新する。</p>
                <li data-md>
                    <p><var>group</var>内の他の全<a data-link-type="dfn" href="#scroll-marker"
                            id="ref-for-scroll-marker①①">スクロールマーカー</a>要素のアクティブ状態をfalseに設定する。</p>
            </ol>
        </div>
        <h4 class="heading settled" data-level="3.1.6" id="scroll-marker-activation"><span class="secno">3.1.6.
            </span><span class="content">アクティベーションの挙動</span><a class="self-link" href="#scroll-marker-activation"></a>
        </h4>
        <div class="algorithm" data-algorithm="scrollTargetElement activation">
            <a data-link-type="dfn" href="#scroll-marker" id="ref-for-scroll-marker①②">スクロールマーカー</a>が非nullな<a
                data-link-type="dfn" href="#scroll-target"
                id="ref-for-scroll-target⑦">スクロールターゲット</a>を持ち、明示的な呼び出しまたは矢印キーによるフォーカスでアクティブ化された場合：
            <ol>
                <li data-md>
                    <p><var>element</var>を、このコントロールの<a data-link-type="dfn" href="#scroll-target"
                            id="ref-for-scroll-target⑧">スクロールターゲット</a>とする。</p>
                <li data-md>
                    <p><var>block</var>を"<code>start</code>"とする。</p>
                <li data-md>
                    <p><var>inline</var>を"<code>start</code>"とする。</p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://drafts.csswg.org/cssom-view-1/#scroll-a-target-into-view"
                            id="ref-for-scroll-a-target-into-view①">elementをスクロールインビュー</a>する（block, inline指定）。</p>
                <li data-md>
                    <dl>
                        <dt data-md>呼び出しによってアクティベーションされた場合
                        <dd data-md>
                            <ol>
                                <li data-md>
                                    <p><a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2"
                                            id="ref-for-following-hyperlinks-2">ハイパーリンクをたどり</a>URLを更新するが、マーカー要素へのフォーカスは維持する。
                                    </p>
                            </ol>
                            <p class="note" role="note"><span class="marker">注:</span>
                                ユーザーがタブで移動した場合、フォーカス挙動により関連コンテンツへタブ移動されます。</p>
                    </dl>
            </ol>
        </div>
        <h4 class="heading settled" data-level="3.1.7" id="scroll-target-focus"><span class="secno">3.1.7. </span><span
                class="content">フォーカスの挙動</span><a class="self-link" href="#scroll-target-focus"></a></h4>
        <p><a data-link-type="dfn" href="#scroll-marker" id="ref-for-scroll-marker①③">スクロールマーカー</a>がアクティブ化された場合、
            次のtabindex順フォーカスナビゲーションは、<a data-link-type="dfn" href="#scroll-target"
                id="ref-for-scroll-target⑨">スクロールターゲット</a>がフォーカス可能ならそれにフォーカスし、
            そうでなければ<span id="ref-for-scroll-target①⓪">スクロールターゲット</span>から次のフォーカス可能要素を探してフォーカスします。</p>
        <h3 class="heading settled" data-level="3.2" id="scroll-buttons"><span class="secno">3.2. </span><span
                class="content">スクロールボタン</span><a class="self-link" href="#scroll-buttons"></a></h3>
        <p><dfn class="dfn-paneled css" data-dfn-type="selector" data-export
                id="selectordef-scroll-button-scroll-button-direction">::scroll-button( <a class="production css"
                    data-link-type="type" href="#typedef-scroll-button-direction"
                    id="ref-for-typedef-scroll-button-direction">&lt;scroll-button-direction></a> )</dfn>
            疑似要素は、
            算出された<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-content-3/#propdef-content"
                id="ref-for-propdef-content①">content</a>値が<a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-content-3/#valdef-content-none"
                id="ref-for-valdef-content-none①">none</a>以外の場合に
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                id="ref-for-scroll-container①⑨">スクロールコンテナ</a>上で生成されます。
            これらは自身の<a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#originating-element"
                id="ref-for-originating-element⑤">生成元要素</a>の直前の<em>兄弟要素</em>としてボックスを生成し、
            内容は<span class="property" id="ref-for-propdef-content②">content</span>で指定された通りとなります。
            <a class="css" data-link-type="maybe" href="#selectordef-scroll-marker-group"
                id="ref-for-selectordef-scroll-marker-group⑦">::scroll-marker-group</a>疑似要素
            （<a class="css" data-link-type="propdesc" href="#propdef-scroll-marker-group"
                id="ref-for-propdef-scroll-marker-group⑦">scroll-marker-group: before</a>使用時）の後に存在します。
        </p>
        <p>最大4つの<a class="css" data-link-type="maybe" href="#selectordef-scroll-button-scroll-button-direction"
                id="ref-for-selectordef-scroll-button-scroll-button-direction①">::scroll-button()</a>疑似要素が
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                id="ref-for-scroll-container②⓪">スクロールコンテナ</a>上に存在でき、
            それぞれが<a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#flow-relative"
                id="ref-for-flow-relative">フロー相対</a>方向に対応します。
            <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#originating-element"
                id="ref-for-originating-element⑦">生成元要素</a>の<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-writing-modes-4/#writing-mode"
                id="ref-for-writing-mode">writing-mode</a>
            に基づき、順番は
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#block-start"
                id="ref-for-block-start">block-start</a>、
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#inline-start"
                id="ref-for-inline-start">inline-start</a>、
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#block-end"
                id="ref-for-block-end">block-end</a>、
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#inline-end"
                id="ref-for-inline-end">inline-end</a>です。
            <span class="css"
                id="ref-for-selectordef-scroll-button-scroll-button-direction②">::scroll-button()</span>疑似要素はデフォルトでフォーカス可能かつアクティブ化可能であり、
            アクティベーション時はその<a id="ref-for-originating-element⑧">生成元要素</a>を対応する方向に「1ページ」スクロールします。
            （PgUp/PgDnキーの動作に類似。<span class="note">通常は<a data-link-type="dfn"
                    href="https://www.w3.org/TR/css-overflow-3/#scrollport"
                    id="ref-for-scrollport">scrollport</a>サイズの約85%のスクロールです。</span>）
            これらのキーと同様に、スクロールには<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-scroll-snap-1/#intended-direction-and-end-position"
                id="ref-for-intended-direction-and-end-position">意図された方向と終了位置</a>があります。
        </p>
        <p class="issue" id="issue-086bdb0b"><a class="self-link" href="#issue-086bdb0b"></a> <a data-link-type="biblio"
                href="#biblio-cssom-view-1" title="CSSOM View Module">[CSSOM-VIEW-1]</a>に「ページ単位スクロール」アルゴリズムが追加予定です。
            追加された時点で本仕様から参照可能になります。
            <a href="https://github.com/w3c/csswg-drafts/issues/10914#issuecomment-2380139977">10914号の解決案参照</a>。
        </p>
        <p class="issue" id="issue-cdbe0ac3"><a class="self-link" href="#issue-cdbe0ac3"></a> ボタンの順序はこれが最適か？
            CSSの論理方向の通常順には合致しますが、手動で作成される類似ボタンは
            縦横でグループ化（block-start/block-end→inline-start/inline-end）や
            縦を横の「周り」に配置（block-start/inline-start/inline-end/block-end）することも多いです。</p>
        <p>4つの<a class="css" data-link-type="maybe" href="#selectordef-scroll-button-scroll-button-direction"
                id="ref-for-selectordef-scroll-button-scroll-button-direction③">::scroll-button()</a>疑似要素は
            セレクタの引数で個別に選択できます。
            <dfn class="dfn-paneled css" data-dfn-type="type" data-export id="typedef-scroll-button-direction"><a
                    class="production css" data-link-type="type" href="#typedef-scroll-button-direction"
                    id="ref-for-typedef-scroll-button-direction①">&lt;scroll-button-direction></a></dfn>の値は次の通りです：
        </p>
        <dl>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="<scroll-button-direction>, ::scroll-button()"
                    data-dfn-type="value" data-export id="valdef-scroll-button-direction-up">up</dfn>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="<scroll-button-direction>, ::scroll-button()"
                    data-dfn-type="value" data-export id="valdef-scroll-button-direction-down">down</dfn>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="<scroll-button-direction>, ::scroll-button()"
                    data-dfn-type="value" data-export id="valdef-scroll-button-direction-left">left</dfn>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="<scroll-button-direction>, ::scroll-button()"
                    data-dfn-type="value" data-export id="valdef-scroll-button-direction-right">right</dfn>
            <dd data-md>
                <p>物理的な方向に対応する<a class="css" data-link-type="maybe"
                        href="#selectordef-scroll-button-scroll-button-direction"
                        id="ref-for-selectordef-scroll-button-scroll-button-direction④">::scroll-button()</a>を選択します。</p>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="<scroll-button-direction>, ::scroll-button()"
                    data-dfn-type="value" data-export id="valdef-scroll-button-direction-block-start">block-start</dfn>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="<scroll-button-direction>, ::scroll-button()"
                    data-dfn-type="value" data-export id="valdef-scroll-button-direction-block-end">block-end</dfn>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="<scroll-button-direction>, ::scroll-button()"
                    data-dfn-type="value" data-export
                    id="valdef-scroll-button-direction-inline-start">inline-start</dfn>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="<scroll-button-direction>, ::scroll-button()"
                    data-dfn-type="value" data-export id="valdef-scroll-button-direction-inline-end">inline-end</dfn>
            <dd data-md>
                <p>指定された<a class="css" data-link-type="maybe" href="#selectordef-scroll-button-scroll-button-direction"
                        id="ref-for-selectordef-scroll-button-scroll-button-direction⑤">::scroll-button()</a>疑似要素を選択します。
                </p>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="<scroll-button-direction>, ::scroll-button()"
                    data-dfn-type="value" data-export id="valdef-scroll-button-direction-prev">prev</dfn>
            <dd data-md>
                <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#block-start"
                        id="ref-for-block-start①">block-start</a>または<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-writing-modes-4/#inline-start"
                        id="ref-for-inline-start①">inline-start</a>のうち、
                    <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#originating-element"
                        id="ref-for-originating-element⑨">生成元要素</a>の軸で「スクロール可能なページ数」が多い方の
                    <span class="css" data-link-type="maybe" href="#selectordef-scroll-button-scroll-button-direction"
                        id="ref-for-selectordef-scroll-button-scroll-button-direction⑥">::scroll-button()</span>を選択します。
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scrollable-overflow-region"
                        id="ref-for-scrollable-overflow-region①">スクロール可能オーバーフローの高さ</a>を
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scrollport"
                        id="ref-for-scrollport①">scrollport</a>の高さで割った値、
                    または幅の場合も同様です。
                </p>
                <p>両方向が同じサイズの場合は、<a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#block-start"
                        id="ref-for-block-start②">block-start</a>の
                    <span class="css" data-link-type="maybe" href="#selectordef-scroll-button-scroll-button-direction"
                        id="ref-for-selectordef-scroll-button-scroll-button-direction⑦">::scroll-button()</span>を選択します。
                </p>
                <p class="example" id="example-af1a5884"><a class="self-link" href="#example-af1a5884"></a> 例えば<a
                        data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#originating-element"
                        id="ref-for-originating-element①①">生成元要素</a>が幅800px・高さ500px、
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scrollable-overflow-region"
                        id="ref-for-scrollable-overflow-region②">スクロール可能領域</a>が幅1200px・高さ1000pxの場合、
                    水平スクロールは1.5ページ（1200/800）、垂直スクロールは2ページ（1000/500）なので（英語としての例）、
                    <span class="css">::scroll-button(prev)</span>セレクタは<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-writing-modes-4/#block-start"
                        id="ref-for-block-start③">block-start</a>ボタンを選択します。
                </p>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="<scroll-button-direction>, ::scroll-button()"
                    data-dfn-type="value" data-export id="valdef-scroll-button-direction-next">next</dfn>
            <dd data-md>
                <p><a class="css" data-link-type="maybe" href="#valdef-scroll-button-direction-prev"
                        id="ref-for-valdef-scroll-button-direction-prev">prev</a>と同様ですが、
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#block-end"
                        id="ref-for-block-end①">block-end</a>または<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-writing-modes-4/#inline-end"
                        id="ref-for-inline-end①">inline-end</a>の
                    <span class="css" data-link-type="maybe" href="#selectordef-scroll-button-scroll-button-direction"
                        id="ref-for-selectordef-scroll-button-scroll-button-direction⑧">::scroll-button()</span>を
                    選択します。
                </p>
        </dl>
        <p class="issue" id="issue-62e6d969"><a class="self-link" href="#issue-62e6d969"></a> 複数ボタンを同じスタイルにしやすいような
            キーワード追加（all/horizontal/vertical/block/inlineなど）が必要か検討。</p>
        <p><a class="css" data-link-type="maybe" href="#selectordef-scroll-button-scroll-button-direction"
                id="ref-for-selectordef-scroll-button-scroll-button-direction⑨">::scroll-button()</a>は
            <a data-link-type="dfn" href="https://drafts.csswg.org/css-pseudo-4/#fully-styleable"
                id="ref-for-fully-styleable①">完全スタイル可能な疑似要素</a>です：適用プロパティに制限はありません。
        </p>
        <p><a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#disabled-pseudo"
                id="ref-for-disabled-pseudo">:disabled</a>疑似クラスは
            <a class="css" data-link-type="maybe" href="#selectordef-scroll-button-scroll-button-direction"
                id="ref-for-selectordef-scroll-button-scroll-button-direction①⓪">::scroll-button()</a>にも適用可能です。
            これは、そのボタンの<a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#originating-element"
                id="ref-for-originating-element①②">生成元要素</a>が関連方向にスクロールできない場合に一致します。
        </p>
        <p class="issue" id="issue-c93cbaf3"><a class="self-link" href="#issue-c93cbaf3"></a> UAスタイルシートで
            <a class="css" data-link-type="maybe" href="#selectordef-scroll-button-scroll-button-direction"
                id="ref-for-selectordef-scroll-button-scroll-button-direction①①">::scroll-button()</a>は
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/form-elements.html#the-button-element" id="ref-for-the-button-element">button</a></code>
            要素と同じスタイル（disabled含む）にすべき。
        </p>
        <p class="issue" id="issue-894e4eee"><a class="self-link" href="#issue-894e4eee"></a> <a class="css"
                data-link-type="maybe" href="#selectordef-scroll-button-scroll-button-direction"
                id="ref-for-selectordef-scroll-button-scroll-button-direction①②">::scroll-button()</a>は
            ボタンの完全なUAスタイル（appearance:button）を使うべきか？それとも非ネイティブ（appearance:none）か？
            前者の場合、<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-ui-4/#propdef-appearance"
                id="ref-for-propdef-appearance">appearance</a>との相互作用定義が必要。</p>
        <h3 class="heading settled" data-level="3.3" id="focus-order"><span class="secno">3.3. </span><span
                class="content">フォーカスナビゲーション順序</span><a class="self-link" href="#focus-order"></a></h3>
        <p>上記の機能は複数のフォーカス可能疑似要素を生成します。
            これら疑似要素は要素ツリー内で位置が定義されていますが、
            フォーカスナビゲーション（タブ順）として最適な位置ではありません。</p>
        <p>代わりに、
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                id="ref-for-scroll-container②①">スクロールコンテナ</a>と
            本章で定義された各種疑似要素間のフォーカスナビゲーション順序は次の通りです：
        </p>
        <ol>
            <li data-md>
                <p><a class="css" data-link-type="maybe" href="#selectordef-scroll-marker-group"
                        id="ref-for-selectordef-scroll-marker-group⑧">::scroll-marker-group</a>疑似要素
                    （<a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                        id="ref-for-scroll-container②②">スクロールコンテナ</a>が<a class="css" data-link-type="propdesc"
                        href="#propdef-scroll-marker-group"
                        id="ref-for-propdef-scroll-marker-group⑧">scroll-marker-group: before</a>の場合）</p>
                <p class="note" role="note"><span class="marker">注:</span> <a class="css" data-link-type="maybe"
                        href="#selectordef-scroll-marker"
                        id="ref-for-selectordef-scroll-marker⑥">::scroll-marker</a>疑似要素は
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                        id="ref-for-scroll-container②③">スクロールコンテナ</a>子孫として生成され、
                    この<a class="css" data-link-type="maybe" href="#selectordef-scroll-marker-group"
                        id="ref-for-selectordef-scroll-marker-group⑨">::scroll-marker-group</a>下に再配置され、
                    「フォーカスグループ」としてまとめてナビゲートされます。
                </p>
            <li data-md>
                <p><a class="css" data-link-type="maybe" href="#selectordef-scroll-button-scroll-button-direction"
                        id="ref-for-selectordef-scroll-button-scroll-button-direction①③">::scroll-button()</a>疑似要素（定義順）
                </p>
            <li data-md>
                <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                        id="ref-for-scroll-container②④">スクロールコンテナ</a>自身とその内容（通常のフォーカス順）</p>
            <li data-md>
                <p><a class="css" data-link-type="maybe" href="#selectordef-scroll-marker-group"
                        id="ref-for-selectordef-scroll-marker-group①⓪">::scroll-marker-group</a>疑似要素
                    （<a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                        id="ref-for-scroll-container②⑤">スクロールコンテナ</a>が<a class="css" data-link-type="propdesc"
                        href="#propdef-scroll-marker-group"
                        id="ref-for-propdef-scroll-marker-group⑨">scroll-marker-group: after</a>の場合）</p>
        </ol>
        <h2 class="no-num heading settled" id="fragmentation"><span class="content">付録A: オーバーフローの転送</span><a
                class="self-link" href="#fragmentation"></a></h2>
        <p class="issue" id="issue-3406e15b"><a class="self-link" href="#issue-3406e15b"></a> 本セクションは非常に実験的です。
            <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-overflow-4/#propdef-continue" id="ref-for-propdef-continue">continue</a>
            プロパティの拡張で追加ユースケースを解決する試みを記述していますが、
            現時点で合意はありません。
            議論促進のため提示していますが、実験的でない実装は推奨されません。
        </p>
        <p>CSS Level 1 <a data-link-type="biblio" href="#biblio-css1" title="Cascading Style Sheets, level 1">[CSS1]</a>
            では、指定サイズの要素に内容が収まりきらない場合、
            それは一般的に著者のミスでした。
            内容は要素外に拡張され、他の要素と重なることがありました。</p>
        <p>CSS Level 2 <a data-link-type="biblio" href="#biblio-css2"
                title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS2]</a>では
            <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow" id="ref-for-propdef-overflow">overflow</a>
            プロパティが導入され、
            オーバーフローをスクロールで処理できるようになりました（著者ミスではなくなる）。
            また、クリッピングで処理する指定も可能となり、
            内容を表示しない意図の場合に有用です。
            これはCSS Overflow Module Level 3 <a data-link-type="biblio" href="#biblio-css-overflow-3"
                title="CSS Overflow Module Level 3">[CSS-OVERFLOW-3]</a>でさらに洗練されました。
        </p>
        <p>しかし、スクロールは多量の内容を提示する唯一の方法ではなく、
            最適とも限りません。
            コーデックスが巻物に代わったのも、その利点ゆえです。</p>
        <p>本仕様は、ページの要素がオーバーフローをスクロールでなく
            ページ分割で処理するよう指定する仕組みを導入します。</p>
        <p>さらに本仕様はオーバーフローの概念を拡張します。
            著者が一つの領域だけを指定せず、
            複数の断片（各自の寸法とスタイル）を指定でき、
            要素内容が必要なだけ断片を使って流れる（オーバーフローしない）ようにできます。</p>
        <p>いずれの場合も、実装はブロック進行方向で内容を分割する必要があります。
            その方法はCSS Fragmentation Module <a data-link-type="biblio" href="#biblio-css-break-3"
                title="CSS Fragmentation Module Level 3">[CSS-BREAK-3]</a>で説明されています。</p>
        <h3 class="heading settled" id="channelling-overflow"><span class="content">オーバーフローのチャンネリング：<a
                    class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-overflow-4/#propdef-continue"
                    id="ref-for-propdef-continue①">continue</a>プロパティ</span><a class="self-link"
                href="#channelling-overflow"></a></h3>
        <p><a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-overflow-4/#propdef-continue"
                id="ref-for-propdef-continue②">continue</a>プロパティは、
            要素内に収まりきらない内容を断片化（<a data-link-type="biblio" href="#biblio-css-break-3"
                title="CSS Fragmentation Module Level 3">[CSS-BREAK-3]</a>の意味）し、
            残り内容の継続先を指定できます。</p>
        <p>このプロパティは伝統的なページ分割を説明し、さらに拡張します。</p>
        <table class="def propdef partial" data-link-for-hint="continue">
            <tbody>
                <tr>
                    <th>名前:
                    <td><a class="css" data-link-type="property"
                            href="https://www.w3.org/TR/css-overflow-4/#propdef-continue"
                            id="ref-for-propdef-continue③">continue</a>
                <tr class="value">
                    <th><a href="https://www.w3.org/TR/css-values/#value-defs">新しい値:</a>
                    <td class="prod">overflow <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one②">|</a> paginate
                        <span id="ref-for-comb-one③">|</span> fragments
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">初期値:</a>
                    <td>auto
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">適用対象:</a>
                    <td>ブロックコンテナ<a data-link-type="biblio" href="#biblio-css2"
                            title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS2]</a>、flexコンテナ<a
                            data-link-type="biblio" href="#biblio-css3-flexbox"
                            title="CSS Flexible Box Layout Module Level 1">[CSS3-FLEXBOX]</a>、gridコンテナ<a
                            data-link-type="biblio" href="#biblio-css3-grid-layout"
                            title="CSS Grid Layout Module Level 1">[CSS3-GRID-LAYOUT]</a>
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">継承:</a>
                    <td>no
                <tr>
                    <th><a href="https://www.w3.org/TR/css-values/#percentages">パーセンテージ:</a>
                    <td>N/A
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#computed">算出値:</a>
                    <td>下記参照
                <tr>
                    <th><a href="https://www.w3.org/TR/web-animations/#animation-type">アニメーションタイプ:</a>
                    <td>離散
        </table>
        <p class="issue" id="issue-70dec9cf"><a class="self-link" href="#issue-70dec9cf"></a> このプロパティと値の命名は暫定です。
            当初は
            "fragmentation: auto | none | break | clone | page"
            として提案されました（<a
                href="https://lists.w3.org/Archives/Public/www-style/2015Jan/0357.html">https://lists.w3.org/Archives/Public/www-style/2015Jan/0357.html</a>）、
            まだどちらが良いか広く合意されていません。</p>
        <p class="issue" id="issue-b201bbf9"><a class="self-link" href="#issue-b201bbf9"></a> このプロパティは<a
                class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-regions-1/#propdef-region-fragment"
                id="ref-for-propdef-region-fragment">region-fragment</a>の一般化・置換を意図しています。
            本仕様で十分安定したら、<span class="property"
                id="ref-for-propdef-region-fragment①">region-fragment</span>はregions仕様から削除されるべきです。</p>
        <p class="note" role="note"><span class="marker">注:</span> <a class="css" data-link-type="propdesc"
                href="https://www.w3.org/TR/css-overflow-4/#propdef-continue" id="ref-for-propdef-continue④">continue:
                fragments</a>は、仕様初期の"overflow:fragments"を置換します。
            <span class="css" id="ref-for-propdef-continue⑤">continue: paginate</span>は
            "overflow: paged-x | paged-y | paged-x-controls | paged-y-controls"を置換します。
        </p>
        <dl>
            <dt>auto
            <dd>
                <a class="css" data-link-type="maybe" href="https://www.w3.org/TR/css-overflow-4/#valdef-continue-auto"
                    id="ref-for-valdef-continue-auto">auto</a>は、
                <a data-link-type="dfn" href="https://www.w3.org/TR/css-regions-1/#css-region"
                    id="ref-for-css-region">CSS Region</a>（リージョンチェーンの最後以外）でのみ算出値になりえます。
                収まりきらない内容は次のリージョンへ送られます。
                <p>その他の場合、<a class="css" data-link-type="maybe"
                        href="https://www.w3.org/TR/css-overflow-4/#valdef-continue-auto"
                        id="ref-for-valdef-continue-auto①">auto</a>は他の値に算出されます。</p>
                <p class="issue" id="issue-cb5399d1"><a class="self-link" href="#issue-cb5399d1"></a> <a
                        href="https://www.w3.org/TR/css-overflow-4/#continue"><cite>CSS Overflow 4</cite> § 5.3
                        Fragmentation of Overflow: the continue property</a>の定義とは異なり、指定値が算出値となります。どちらのモデルが良いか？</p>
            <dt><dfn class="dfn-paneled css" data-dfn-for="continue" data-dfn-type="value" data-export
                    id="valdef-continue-overflow">overflow</dfn>
            <dd>収まりきらない内容は<a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow"
                    id="ref-for-propdef-overflow①">overflow</a>プロパティに従ってオーバーフローします。
            <dt><dfn class="dfn-paneled css" data-dfn-for="continue" data-dfn-type="value" data-export
                    id="valdef-continue-paginate">paginate</dfn>
            <dd>
                収まりきらない内容はページ分割されます。
                要素内でページ送りビューを作成し、'overflow: scroll'によるスクロールビューに似ています。
                <p><a href="#paginated-overflow">ページ分割オーバーフロー</a>参照</p>
                <p class="note" role="note"><span class="marker">注:</span> 印刷は事実上ルートで"continue: paginate"です。</p>
            <dt><dfn class="dfn-paneled css" data-dfn-for="continue" data-dfn-type="value" data-export
                    id="valdef-continue-fragments">fragments</dfn>
            <dd>
                収まりきらない内容は要素自身を複製し、配置を続行します。
                <p><a href="#fragment-overflow">断片化オーバーフロー</a>参照。</p>
        </dl>
        <p>指定要素や疑似要素の<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-overflow-4/#propdef-continue"
                id="ref-for-propdef-continue⑥">continue</a>の算出値は次の通りです：</p>
        <ol>
            <li data-md>
                <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-contain-2/#layout-containment"
                        id="ref-for-layout-containment">layout containment</a>を持つ要素・疑似要素（<a data-link-type="biblio"
                        href="#biblio-css-contain-1" title="CSS Containment Module Level 1">[CSS-CONTAIN-1]</a>参照）で、
                    指定値が<a class="css" data-link-type="maybe"
                        href="https://www.w3.org/TR/css-overflow-4/#valdef-continue-auto"
                        id="ref-for-valdef-continue-auto②">auto</a>または<a class="css" data-link-type="maybe"
                        href="#valdef-continue-fragments" id="ref-for-valdef-continue-fragments">fragments</a>の場合、
                    算出値は<a class="css" data-link-type="maybe" href="#valdef-continue-overflow"
                        id="ref-for-valdef-continue-overflow">overflow</a>です。</p>
            <li data-md>
                <p>それ以外で指定値が<a class="css" data-link-type="maybe"
                        href="https://www.w3.org/TR/css-overflow-4/#valdef-continue-auto"
                        id="ref-for-valdef-continue-auto③">auto</a>の場合</p>
                <ol>
                    <li data-md>
                        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-regions-1/#css-region"
                                id="ref-for-css-region①">CSS Region</a>（リージョンチェーンの最後以外）なら算出値は<a class="css"
                                data-link-type="maybe" href="https://www.w3.org/TR/css-overflow-4/#valdef-continue-auto"
                                id="ref-for-valdef-continue-auto④">auto</a></p>
                    <li data-md>
                        <p>ページ上なら算出値は<a class="css" data-link-type="maybe" href="#valdef-continue-paginate"
                                id="ref-for-valdef-continue-paginate">paginate</a></p>
                    <li data-md>
                        <p><a data-link-type="dfn" href="#fragment-box" id="ref-for-fragment-box">fragment
                                box</a>なら算出値は<a class="css" data-link-type="maybe" href="#valdef-continue-fragments"
                                id="ref-for-valdef-continue-fragments①">fragments</a></p>
                    <li data-md>
                        <p>それ以外は算出値は<a class="css" data-link-type="maybe" href="#valdef-continue-overflow"
                                id="ref-for-valdef-continue-overflow①">overflow</a></p>
                </ol>
            <li data-md>
                <p>指定値が<a class="css" data-link-type="maybe" href="#valdef-continue-fragments"
                        id="ref-for-valdef-continue-fragments②">fragments</a>の場合</p>
                <ol>
                    <li data-md>
                        <p>ページ上なら算出値は<a class="css" data-link-type="maybe" href="#valdef-continue-paginate"
                                id="ref-for-valdef-continue-paginate①">paginate</a></p>
                    <li data-md>
                        <p>それ以外は算出値は指定値と同じ</p>
                </ol>
            <li data-md>
                <p>その他は算出値は指定値と同じ</p>
        </ol>
        <p class="issue" id="issue-7e96806f"><a class="self-link" href="#issue-7e96806f"></a>
            multicolのカラムを選択できる疑似要素追加時はauto算出値をautoにするか、
            新値を導入してautoがそれに算出されるようにする必要があるかも（他要素での算出値は？）。</p>
        <p class="note" role="note"><span class="marker">注:</span> このプロパティに至る議論は
            <a
                href="https://lists.w3.org/Archives/Public/www-style/2012May/1197.html">overflow/overflow-x/overflow-y/overflow-styleの議論</a>や
            <a href="https://lists.w3.org/Archives/Public/www-style/2015Jan/0357.html">fragmentationプロパティの提案</a>を参照。
        </p>
        <h3 class="heading settled" id="paginated-overflow"><span class="content">ページ分割オーバーフロー</span><a
                class="self-link" href="#paginated-overflow"></a></h3>
        <p>このセクションでは、<a class="css" data-link-type="maybe" href="#valdef-continue-paginate"
                id="ref-for-valdef-continue-paginate②">paginate</a>値の<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-overflow-4/#propdef-continue"
                id="ref-for-propdef-continue⑦">continue</a>プロパティの意味を導入・定義します。</p>
        <p class="issue" id="issue-001d5014"><a class="self-link" href="#issue-001d5014"></a>このセクションは執筆中です</p>
        <p class="issue" id="issue-338ad0f3"><a class="self-link"
                href="#issue-338ad0f3"></a>ページは@page規則でスタイル可能であるべきです。ネストしたページの場合はどうなる？</p>
        <div class="issue" id="issue-20e2f78e">
            <a class="self-link" href="#issue-20e2f78e"></a>従来のページ分割（例:印刷時）は、<a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-overflow-4/#valdef-continue-auto"
                id="ref-for-valdef-continue-auto⑤">auto</a>の算出値のマジックで表現すべきか、
            それともUAスタイルシートに次を挿入することで実現すべきか:
            <pre><code class="lang-css highlight"><c- n>@media</c-> <c- p>(</c->overflow-block: paged<c- p>),</c-> <c- p>(</c->overflow-block: optional-paged<c- p>)</c-> <c- p>{</c->
  :root <c- p>{</c->
    <c- k>continue</c-><c- p>:</c-> paginate<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->
</code></pre>
        </div>
        <p class="issue" id="issue-87a37458"><a class="self-link" href="#issue-87a37458"></a>従来のページ分割（印刷時など）は
            :rootがページボックス内に含まれていることを仮定していますが、
            ページボックスが:rootの子として疑似要素になるのではなく、
            fragment boxのような何かで回避できるか？
            それとも:root内にページボックス内にfragment box（:rootの複製）を置くべき？</p>
        <p class="issue" id="issue-64583cf9"><a class="self-link"
                href="#issue-64583cf9"></a>ページボックスモデルが通常のCSSボックスの子の場合、その振る舞いは？</p>
        <p class="issue" id="issue-c27ed5ea"><a class="self-link" href="#issue-c27ed5ea"></a><a data-link-type="biblio"
                href="#biblio-css3gcpm"
                title="CSS Generated Content for Paged Media Module">[CSS3GCPM]</a>の初期案やOperaの実装では
            <a class="css" data-link-type="maybe" href="#valdef-continue-paginate"
                id="ref-for-valdef-continue-paginate③">paginate</a>の代わりに
            "paged-x | paged-y | paged-x-controls | paged-y-controls"の4値を使っていました。
            このプロパティもこれらの値を含むべきか、あるいは別プロパティで扱うべきか？
            （例："pagination-layout: auto | horizontal | vertical", "pagination-controls: auto | none"）
        </p>
        <p class="issue" id="issue-e78fc89d"><a class="self-link" href="#issue-e78fc89d"></a>一度にNページを表示する能力は？
            "pagination-layout: horizontal 2;"のような値で指定できる？</p>
        <p class="issue" id="issue-2261daab"><a class="self-link" href="#issue-2261daab"></a>Brad Kemperがページ分割と
            断片オーバーフローを組み合わせるモデル（複数ページ表示対応）を提案しています。<a
                href="https://lists.w3.org/Archives/Public/www-style/2015Mar/0241.html">https://lists.w3.org/Archives/Public/www-style/2015Mar/0241.html</a>
        </p>
        <p class="issue" id="issue-6bc0b289"><a class="self-link" href="#issue-6bc0b289"></a>ページ分割オーバーフローの現実装は
            <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-overflow-4/#propdef-continue"
                id="ref-for-propdef-continue⑧">continue</a>プロパティではなく、
            <a data-link-type="biblio" href="#biblio-css3gcpm"
                title="CSS Generated Content for Paged Media Module">[CSS3GCPM]</a>ドラフトや
            <a data-link-type="biblio" href="#biblio-css3-marquee"
                title="CSS Marquee Module Level 3">[CSS3-MARQUEE]</a>案で提案された
            overflow/overflow-x/overflow-yプロパティを使っています。
        </p>
        <h3 class="heading settled" id="fragment-overflow"><span class="content">断片化オーバーフロー</span><a class="self-link"
                href="#fragment-overflow"></a></h3>
        <p>このセクションでは<a class="css" data-link-type="maybe" href="#valdef-continue-fragments"
                id="ref-for-valdef-continue-fragments③">fragments</a>値の<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-overflow-4/#propdef-continue"
                id="ref-for-propdef-continue⑨">continue</a>プロパティの意味を導入・定義します。</p>
        <p>要素の<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-overflow-4/#propdef-continue"
                id="ref-for-propdef-continue①⓪">continue</a>の算出値が<a class="css" data-link-type="maybe"
                href="#valdef-continue-fragments" id="ref-for-valdef-continue-fragments④">fragments</a>の場合、
            実装はその要素のために<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fragment-box">fragment
                box</dfn>の列を生成しなければなりません。
            （<span class="css" id="ref-for-propdef-continue①①">continue:
                fragments</span>を持つ要素が1つだけ<a data-link-type="dfn" href="#fragment-box"
                id="ref-for-fragment-box①">fragment box</a>を生成することも可能です。
            ただし、要素の算出<span class="property" id="ref-for-propdef-continue①②">continue</span>が
            <span class="css" id="ref-for-valdef-continue-fragments⑤">fragments</span>でない場合、
            そのボックスは<span id="ref-for-fragment-box②">fragment box</span>ではありません。）
            すべての<span id="ref-for-fragment-box③">fragment box</span>は断片化コンテナであり、
            その断片化コンテナが断片化を引き起こすオーバーフローがある場合、
            さらに別の<span id="ref-for-fragment-box④">fragment box</span>が前のものの次の兄弟として生成されます。
            <span class="issue" id="issue-c87585cb"><a class="self-link"
                    href="#issue-c87585cb"></a>もしくは要素の次の兄弟として扱うべき？他のボックスレベル修正との相互作用を明確にする必要があります。</span>
            さらに、<span id="ref-for-fragment-box⑤">fragment box</span>が
            <a data-link-type="biblio" href="#biblio-css-multicol-1"
                title="CSS Multi-column Layout Module Level 1">[css-multicol-1]</a>で定義される
            マルチカラムボックスの場合<span class="issue" id="issue-6629852d"><a class="self-link"
                    href="#issue-6629852d"></a>（multi-column containerの定義）</span>、
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-multicol-1/#overflow-columns"
                id="ref-for-overflow-columns">overflow columns</a>
            <span title="CSS Multi-column Layout Module Level 1">[css-multicol-1]</span>が作られるはずの内容は
            代わりに追加のfragment boxへ流れます。
            ただし、fragment box自体も外部の断片化コンテキスト（ページ・カラム・他のfragment boxなど）で分割されることがあり、
            その場合は複数のfragment boxではなく、1つのfragment boxの複数断片となります。
            （これはfragment boxがインデックスでスタイル指定可能なため重要です。
            ページをまたいでfragment boxが分割されても、インデックスと内容の対応が崩れないようにする設計です。）
            <span class="issue" id="issue-74cf5d92"><a class="self-link"
                    href="#issue-74cf5d92"></a>外部断片化コンテキストへの強制ブレーク時はfragment boxの新断片か新fragment boxか？</span>
            <span class="issue" id="issue-ca84b506"><a class="self-link" href="#issue-ca84b506"></a>ここでfragment
                box以外の用語にした方が混乱が減る？</span>
        </p>
        <p class="issue" id="issue-82870b15"><a class="self-link"
                href="#issue-82870b15"></a>他種類の断片化コンテキスト内で分割された要素断片をスタイルしたい場合は？
            これらのルールにより<a class="css" data-link-type="maybe" href="#selectordef-nth-fragment"
                id="ref-for-selectordef-nth-fragment">::nth-fragment()</a>はその用途に使えないが、
            名前自体はその用途に最も合理的に見える。</p>
        <div class="example" id="example-e465abc6">
            <a class="self-link" href="#example-e465abc6"></a>
            <table class="source-demo-pair">
                <tbody>
                    <tr>
                        <td>
                            <pre><code class="highlight"><c- cp>&lt;!DOCTYPE HTML></c->
<c- p>&lt;</c-><c- f>title</c-><c- p>></c->内容を
  同じサイズのカードに分割<c- p>&lt;/</c-><c- f>title</c-><c- p>></c->
<c- p>&lt;</c-><c- f>style</c-><c- p>></c->
  <c- p>.</c-><c- nc>in-cards</c-> <c- p>{</c->
    <c- k>continue</c-><c- p>:</c-> <c- n>fragments</c-><c- p>;</c->

    <c- k>width</c-><c- p>:</c-> <c- mi>13</c-><c- b>em</c-><c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <c- mi>8</c-><c- b>em</c-><c- p>;</c->

    <c- k>padding</c-><c- p>:</c-> <c- mi>4</c-><c- b>px</c-><c- p>;</c->
    <c- k>border</c-><c- p>:</c-> <c- kc>medium</c-> <c- kc>solid</c-> <c- kc>blue</c-><c- p>;</c->
    <c- k>margin</c-><c- p>:</c-> <c- mi>6</c-><c- b>px</c-><c- p>;</c->

    <c- k>font</c-><c- p>:</c-> <c- kc>medium</c-><c- o>/</c-><c- mf>1.3</c-> <c- n>Times</c-> <c- n>New</c->
      <c- n>Roman</c-><c- p>,</c-> <c- n>Times</c-><c- p>,</c-> <c- kc>serif</c-><c- p>;</c->
  <c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->
<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"in-cards"</c-><c- p>></c->
  この例では、div内のテキストが
  一連のカードに分割されます。
  これらのカードはすべて同じスタイルです。
  内容がカードをオーバーフローするほど十分にある場合、
  さらにカードが生成されます。2つめのカードは
  まさに最初のカードの次の兄弟として生成されます。
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</code></pre>
                        <td>
                            <div class="in-cards-demo">
                                この例では、div内の<br>テキストが一連のカードに<br>分割されます。これらのカードは<br>すべて同じスタイルです。内容が<br>カードをオーバーフローするほど<br>十分にある場合、さらにカードが<br>生成されます。2つめのカードは<br>まさに最初のカードの次の兄弟<br>として生成されます。
                            </div>
                            <div class="in-cards-demo"> </div>
            </table>
        </div>
        <div class="example" id="example-7bf90bf1">
            <a class="self-link" href="#example-7bf90bf1"></a>著者は要素の冒頭の数行のみを他と異なるスタイルにしたい場合、
            それらを別断片に分けてスタイルします。
            ただし、その行が占める正確な高さを予測して最初の断片に制限するのは困難なため、
            <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-overflow-4/#propdef-max-lines"
                id="ref-for-propdef-max-lines">max-lines</a>プロパティを使う方が便利です。
            これにより、指定した行数後に断片が強制的に分割されます。
            この分割は、要素またはその子孫に含まれる行数で判定されます（同じブロック整形コンテキスト内に限る）。
            <table class="source-demo-pair">
                <tbody>
                    <tr>
                        <td>
                            <pre><code class="highlight"><c- cp>&lt;!DOCTYPE HTML></c->
<c- p>&lt;</c-><c- f>style</c-><c- p>></c->
  <c- p>.</c-><c- nc>article</c-> <c- p>{</c->
    <c- k>continue</c-><c- p>:</c-> <c- n>fragments</c-><c- p>;</c->
  <c- p>}</c->
  <c- p>.</c-><c- nc>article</c-><c- p>::</c-><c- nd>first-letter</c-> <c- p>{</c->
    <c- k>font-size</c-><c- p>:</c-> <c- mi>2</c-><c- b>em</c-><c- p>;</c->
    <c- k>line-height</c-><c- p>:</c-> <c- mf>0.9</c-><c- p>;</c->
  <c- p>}</c->
  <c- p>.</c-><c- nc>article</c-><c- p>::</c-><c- nd>nth-fragment</c-><c- o>(</c-><c- f>1</c-><c- o>)</c-> <c- p>{</c->
    <c- k>font-size</c-><c- p>:</c-> <c- mf>1.5</c-><c- b>em</c-><c- p>;</c->
    <c- k>max-lines</c-><c- p>:</c-> <c- mi>3</c-><c- p>;</c->
  <c- p>}</c->
  <c- p>.</c-><c- nc>article</c-><c- p>::</c-><c- nd>nth-fragment</c-><c- o>(</c-><c- f>2</c-><c- o>)</c-> <c- p>{</c->
    <c- k>column-count</c-><c- p>:</c-> <c- mi>2</c-><c- p>;</c->
  <c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->
<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"article"</c-><c- p>></c->
  <i>...</i>
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c-></code>
</pre>
                        <td>
                            <div class="article-max-lines-demo one">
                                max-linesプロパティを使うことで<br>記事冒頭の数行だけ大きなフォントに<br>できます。max-linesがない場合</div>
                            <div class="article-max-lines-demo two">著者は<br><a class="property css"
                                    data-link-type="property" href="https://www.w3.org/TR/css-sizing-3/#propdef-height"
                                    id="ref-for-propdef-height">height</a>プロパティを使う必要が<br>あり、誤差があると<br>ほんの少しの隙間ができてしまう<br>可能性があります（何行分の<br>高さになるか正確に予測しづらい）
                            </div>
                            <div class="article-max-lines-demo three">
                                特にどのテキストが<br>入るか分からない場合や<br>フォント指定や<br>プラットフォームごとの<br>レンダリングの違いがある場合<br>は困難です。</div>
            </table>
        </div>
        <p class="issue" id="issue-4d452eb2"><a class="self-link" href="#issue-4d452eb2"></a><a class="css"
                data-link-type="propdesc" href="https://www.w3.org/TR/css-overflow-4/#propdef-continue"
                id="ref-for-propdef-continue①③">continue: fragments</a>は少なくとも一部のtable部品、
            そして他の要素にも適用されないことを指定すべき。どれに適用しないか明確にする必要がある。</p>
        <p class="issue" id="issue-0df4918a"><a class="self-link" href="#issue-0df4918a"></a>この仕様は
            どの種類の断片化コンテキストが作られるか明示すべき。
            どの<a class="property css" data-link-type="property">break-*</a>プロパティ値が
            このコンテキスト内で分割を引き起こすか分かるようにする。
            おそらく<span class="css">break-*: region</span>が適用されるべき。</p>
        <p class="issue" id="issue-1d1c38d2"><a class="self-link" href="#issue-1d1c38d2"></a>この仕様は
            レイアウトが断片の本来的サイズによって利用可能空間を変える場合（例:<a data-link-type="biblio" href="#biblio-css3-grid-layout"
                title="CSS Grid Layout Module Level 1">[CSS3-GRID-LAYOUT]</a>）の処理モデルが必要。
            <a data-link-type="biblio" href="#biblio-css-regions-1"
                title="CSS Regions Module Level 1">[CSS-REGIONS-1]</a>で既に処理モデル案があり、
            その内容や編集者は本仕様にも参考になるはず。
        </p>
        <h3 class="heading settled" id="fragment-styling"><span class="content">断片のスタイリング</span><a class="self-link"
                href="#fragment-styling"></a></h3>
        <h4 class="heading settled" id="fragment-pseudo-element"><span class="content"> <a class="css"
                    data-link-type="maybe" href="#selectordef-nth-fragment"
                    id="ref-for-selectordef-nth-fragment①">::nth-fragment()</a> 疑似要素</span><a class="self-link"
                href="#fragment-pseudo-element"></a></h4>
        <p><dfn class="dfn-paneled css" data-dfn-type="selector" data-export
                id="selectordef-nth-fragment">::nth-fragment()</dfn>疑似要素は、
            要素によって生成された<a data-link-type="dfn" href="#fragment-box" id="ref-for-fragment-box⑦">fragment
                box</a>の一部を記述するための疑似要素です。
            この疑似要素の引数は<a data-link-type="biblio" href="#biblio-select" title="Selectors Level 3">[SELECT]</a>で定義される
            :nth-child()疑似クラスの引数と同じ構文を取り、意味も同じですが
            番号は兄弟でなくその要素が生成した<span id="ref-for-fragment-box⑧">fragment box</span>を基準に数えます。</p>
        <p class="note" role="note"><span class="marker">注:</span>断片を最後から数えて指定するセレクタは意図的に提供されていません。
            そのようなセレクタは断片数の決定に影響を与えるためです。</p>
        <p class="issue" id="issue-978c73c1"><a class="self-link" href="#issue-978c73c1"></a>将来の議論次第で、
            <span class="css">::nth-fragment(<var>an+b</var>)</span>構文が
            <span class="css">::fragment:nth(<var>an+b</var>)</span>構文に置き換わる可能性があります。
        </p>
        <h4 class="heading settled" id="style-of-fragments"><span class="content">断片のスタイル</span><a class="self-link"
                href="#style-of-fragments"></a></h4>
        <p class="issue" id="issue-ce652c3d"><a class="self-link"
                href="#issue-ce652c3d"></a>これはcontinue:fragmentsのみに適用すべきか、continue:paginateにも適用すべきか？
            （適用するなら、continue:paginateへのより厳しいプロパティ制限が必要になる。）</p>
        <p><a class="css" data-link-type="maybe" href="#selectordef-nth-fragment"
                id="ref-for-selectordef-nth-fragment②">::nth-fragment()</a>疑似要素規則がない場合、
            各<a data-link-type="dfn" href="#fragment-box" id="ref-for-fragment-box⑨">fragment box</a>の算出スタイルは
            その<span id="ref-for-fragment-box①⓪">fragment box</span>が生成された要素の算出スタイルとなります。
            ただし、<span id="ref-for-fragment-box①①">fragment box</span>のスタイルは、
            セレクタの<a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#selector-subject"
                id="ref-for-selector-subject">主部</a>が<span class="css"
                id="ref-for-selectordef-nth-fragment③">::nth-fragment()</span>疑似要素を含む規則にも影響されます。
            その断片boxの1始まり番号が<span class="css" id="ref-for-selectordef-nth-fragment④">::nth-fragment()</span>疑似要素と一致し、
            セレクタ（<span class="css"
                id="ref-for-selectordef-nth-fragment⑤">::nth-fragment()</span>疑似要素除く）が断片生成要素と一致する場合です。</p>
        <p><a data-link-type="dfn" href="#fragment-box" id="ref-for-fragment-box①③">fragment box</a>のスタイル決定時、
            断片疑似要素に一致する規則と要素自体に一致する規則がカスケードされ、
            断片疑似要素は疑似クラス並の特異性を加算します。
            <span class="issue" id="issue-40daaa94"><a class="self-link"
                    href="#issue-40daaa94"></a>これもカスケーディングモジュールで明記必要？</span>
        </p>
        <div class="example" id="example-9b7707f8">
            <a class="self-link" href="#example-9b7707f8"></a>
            <table class="source-demo-pair">
                <tbody>
                    <tr>
                        <td>
                            <pre><code class="highlight"><c- cp>&lt;!DOCTYPE HTML></c->
<c- p>&lt;</c-><c- f>style</c-><c- p>></c->
  <c- p>.</c-><c- nc>bouncy-columns</c-> <c- p>{</c->
    <c- k>continue</c-><c- p>:</c-> <c- n>fragments</c-><c- p>;</c->
    <c- k>width</c-><c- p>:</c-> <c- mi>6</c-><c- b>em</c-><c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <c- mi>10</c-><c- b>em</c-><c- p>;</c->
    <c- k>float</c-><c- p>:</c-> <c- kc>left</c-><c- p>;</c->
    <c- k>margin</c-><c- p>:</c-> <c- mi>1</c-><c- b>em</c-><c- p>;</c->
    <c- k>font</c-><c- p>:</c-> <c- kc>medium</c-><c- o>/</c-><c- mf>1.25</c-> <c- n>Times</c-> <c- n>New</c->
      <c- n>Roman</c-><c- p>,</c-> <c- n>Times</c-><c- p>,</c-> <c- kc>serif</c-><c- p>;</c->
  <c- p>}</c->
  <c- p>.</c-><c- nc>bouncy-columns</c-><c- p>::</c-><c- nd>nth-fragment</c-><c- o>(</c-><c- f>1</c-><c- o>)</c-> <c- p>{</c->
    <c- k>background</c-><c- p>:</c-> <c- kc>aqua</c-><c- p>;</c-> <c- k>color</c-><c- p>:</c-> <c- kc>black</c-><c- p>;</c->
    <c- k>transform</c-><c- p>:</c-> rotate<c- p>(</c-><c- mi>-3</c-><c- b>deg</c-><c- p>);</c->
  <c- p>}</c->
  <c- p>.</c-><c- nc>bouncy-columns</c-><c- p>::</c-><c- nd>nth-fragment</c-><c- o>(</c-><c- f>2</c-><c- o>)</c-> <c- p>{</c->
    <c- k>background</c-><c- p>:</c-> <c- kc>yellow</c-><c- p>;</c-> <c- k>color</c-><c- p>:</c-> <c- kc>black</c-><c- p>;</c->
    <c- k>transform</c-><c- p>:</c-> rotate<c- p>(</c-><c- mi>3</c-><c- b>deg</c-><c- p>);</c->
  <c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->
<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"bouncy-columns"</c-><c- p>></c->
  <i>...</i>
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</code></pre>
                        <td>
                            <div class="bouncy-columns-demo one">
                                この例ではdiv内の<br>テキストが一連のカラムに<br>分割されます。著者は<br>2カラムになることを<br>想定していたかもしれません。</div>
                            <div class="bouncy-columns-demo two">もし3カラムになるほど<br>内容が多くても、3つめのカラムも<br>生成されます。ただし</div>
                            <div class="bouncy-columns-demo">著者が<br>スタイル指定していなければ、<br>断片専用のスタイルは<br>ありません。</div>
            </table>
        </div>
        <p><a class="css" data-link-type="maybe" href="#selectordef-nth-fragment"
                id="ref-for-selectordef-nth-fragment⑥">::nth-fragment()</a>疑似要素に<a class="property css"
                data-link-type="property" href="https://www.w3.org/TR/css-overflow-4/#propdef-continue"
                id="ref-for-propdef-continue①④">continue</a>プロパティでスタイル指定すると効果があります。
            <a data-link-type="dfn" href="#fragment-box" id="ref-for-fragment-box①④">fragment box</a>の算出値が
            <span class="property" id="ref-for-propdef-continue①⑤">continue</span>で<a class="css" data-link-type="maybe"
                href="#valdef-continue-fragments"
                id="ref-for-valdef-continue-fragments⑥">fragments</a>以外になった場合、そのfragment boxは最後の断片です。
            ただし、最初の断片へのoverrideは、そのfragment boxが存在しないことにはなりません。
            fragment boxの有無は要素のoverflow算出値で決まります。
        </p>
        <p><a class="css" data-link-type="maybe" href="#selectordef-nth-fragment"
                id="ref-for-selectordef-nth-fragment⑦">::nth-fragment()</a>疑似要素に<a class="property css"
                data-link-type="property" href="https://www.w3.org/TR/css-content-3/#propdef-content"
                id="ref-for-propdef-content③">content</a>プロパティでスタイル指定しても効果はありません。
            断片boxの<span class="property" id="ref-for-propdef-content④">content</span>算出値は
            要素のcontent算出値と同じです。</p>
        <p><a class="css" data-link-type="propdesc" href="https://www.w3.org/TR/css-display-3/#propdef-display"
                id="ref-for-propdef-display">display:
                none</a>を<a data-link-type="dfn" href="#fragment-box" id="ref-for-fragment-box①⑥">fragment box</a>に指定すると
            そのインデックスのfragment boxは生成されません。
            ただし、後続断片boxの<a class="css" data-link-type="maybe" href="#selectordef-nth-fragment"
                id="ref-for-selectordef-nth-fragment⑧">::nth-fragment()</a>疑似要素一致判定のための
            インデックスとしては生成されるものとして数えます。
            ただし生成されないため内容は含みません。</p>
        <p>他の<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-display-3/#propdef-display" id="ref-for-propdef-display①">display</a>値や
            <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-position-3/#propdef-position"
                id="ref-for-propdef-position">position</a>、
            <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css2/#propdef-float"
                id="ref-for-propdef-float">float</a>を指定することは許されますが、
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#inner-display-type"
                id="ref-for-inner-display-type">内部display型</a>は変更できません。
            （<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-overflow-4/#propdef-continue"
                id="ref-for-propdef-continue①⑦">continue</a>は
            ブロック・flex・gridコンテナにのみ適用されます。）
            <span class="issue" id="issue-d723335f"><a class="self-link" href="#issue-d723335f"></a>この挙動の詳細仕様が必要</span>
        </p>
        <p>他の疑似要素同様、疑似要素は対応する要素内に属するモデルに合わせて、
            <a class="css" data-link-type="maybe" href="#selectordef-nth-fragment"
                id="ref-for-selectordef-nth-fragment⑨">::nth-fragment()</a>疑似要素宣言は
            疑似要素なし規則の宣言を上書きします。
            優先順位は通常のカスケード順（<a data-link-type="biblio" href="#biblio-css2"
                title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS2]</a>参照）で決定されます。
        </p>
        <p><a class="css" data-link-type="maybe" href="#selectordef-nth-fragment"
                id="ref-for-selectordef-nth-fragment①⓪">::nth-fragment()</a>疑似要素へのスタイル指定は
            <a data-link-type="dfn" href="#fragment-box" id="ref-for-fragment-box①⑦">fragment box</a>内の内容への継承に影響します。
            つまり、<span id="ref-for-fragment-box①⑧">fragment box</span>内の内容は
            要素自身でなく疑似要素スタイル（fragment boxスタイル）から継承されます。
            そのため、断片box間で分割された要素はそれぞれ異なるスタイルになることがあります。
        </p>
        <p class="issue" id="issue-0fc783b4"><a class="self-link" href="#issue-0fc783b4"></a>この継承ルールにより、
            <a class="css" data-link-type="maybe" href="https://www.w3.org/TR/css-cascade-5/#valdef-all-inherit"
                id="ref-for-valdef-all-inherit">inherit</a>や
            <a class="css" data-link-type="maybe" href="https://www.w3.org/TR/css-pseudo-4/#selectordef-first-letter"
                id="ref-for-selectordef-first-letter">::first-letter</a>など
            直接指定できないプロパティも間接指定できてしまうが、
            断片内スタイルの制限は継承にも適用すべき。
        </p>
        <div class="example" id="example-aa99a4f4">
            <a class="self-link" href="#example-aa99a4f4"></a>
            <table class="source-demo-pair">
                <tbody>
                    <tr>
                        <td>
                            <pre><code class="highlight"><c- cp>&lt;!DOCTYPE HTML></c->
<c- p>&lt;</c-><c- f>style</c-><c- p>></c->
  <c- p>.</c-><c- nc>article</c-> <c- p>{</c->
    <c- k>continue</c-><c- p>:</c-> <c- n>fragments</c-><c- p>;</c->
  <c- p>}</c->
  <c- p>.</c-><c- nc>article</c-><c- p>::</c-><c- nd>nth-fragment</c-><c- o>(</c-><c- f>1</c-><c- o>)</c-> <c- p>{</c->
    <c- k>font-size</c-><c- p>:</c-> <c- mf>1.5</c-><c- b>em</c-><c- p>;</c->
    <c- k>margin-bottom</c-><c- p>:</c-> <c- mi>1</c-><c- b>em</c-><c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <c- mi>4</c-><c- b>em</c-><c- p>;</c->
  <c- p>}</c->
  <c- p>.</c-><c- nc>article</c-><c- p>::</c-><c- nd>nth-fragment</c-><c- o>(</c-><c- f>2</c-><c- o>)</c-> <c- p>{</c->
    <c- k>margin-left</c-><c- p>:</c-> <c- mi>5</c-><c- b>em</c-><c- p>;</c->
    <c- k>margin-right</c-><c- p>:</c-> <c- mi>2</c-><c- b>em</c-><c- p>;</c->
  <c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->
<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"article"</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>code</c-><c- p>></c->font-size<c- p>&lt;/</c-><c- f>code</c-><c- p>></c-> プロパティ<i>...</i>
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</code></pre>
                        <td>
                            <div class="article-font-inherit-demo one"><code>font-size</code>プロパティが<br>断片に指定されると</div>
                            <div class="article-font-inherit-demo two">
                                断片内の子孫へ継承されます。<br>このため断片で継承プロパティを<br>安全に使えるようになります。<br>この例のように。</div>
            </table>
        </div>
        <h4 class="heading settled" id="style-in-fragments"><span class="content">Styling inside fragments</span><a
                class="self-link" href="#style-in-fragments"></a></h4>
        <p class="issue" id="issue-4a9707fc"><a class="self-link" href="#issue-4a9707fc"></a> Should this apply to
            continue:fragments only,
            or also to continue:paginate?</p>
        <p>The <a class="css" data-link-type="maybe" href="#selectordef-nth-fragment"
                id="ref-for-selectordef-nth-fragment①①">::nth-fragment()</a> pseudo-element
            can also be used to style
            content inside of a <a data-link-type="dfn" href="#fragment-box" id="ref-for-fragment-box①⑨">fragment
                box</a>.
            Unlike the <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-pseudo-4/#selectordef-first-line"
                id="ref-for-selectordef-first-line">::first-line</a> and <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-pseudo-4/#selectordef-first-letter"
                id="ref-for-selectordef-first-letter①">::first-letter</a> pseudo-elements,
            the <span class="css" id="ref-for-selectordef-nth-fragment①②">::nth-fragment()</span> pseudo-element can be
            applied
            to parts of the selector other than the subject:
            in particular, it can match ancestors of the subject.
            However, the only CSS properties applied
            by rules with such selectors
            are those that apply
            to the <span class="css" id="ref-for-selectordef-first-letter②">::first-letter</span> pseudo-element.</p>
        <p>To be more precise,
            when a rule’s selector has <a class="css" data-link-type="maybe" href="#selectordef-nth-fragment"
                id="ref-for-selectordef-nth-fragment①③">::nth-fragment()</a> pseudo-elements
            attached to parts of the selector other than the subject,
            the declarations in that rule apply to
            a fragment (or pseudo-element thereof) when:</p>
        <ol>
            <li data-md>
                <p>the declarations are for properties that apply to the <a class="css" data-link-type="maybe"
                        href="https://www.w3.org/TR/css-pseudo-4/#selectordef-first-letter"
                        id="ref-for-selectordef-first-letter③">::first-letter</a> pseudo-element,</p>
            <li data-md>
                <p>the declarations would apply to
                    that fragment (or pseudo-element thereof)
                    had those <a class="css" data-link-type="maybe" href="#selectordef-nth-fragment"
                        id="ref-for-selectordef-nth-fragment①④">::nth-fragment()</a> pseudo-elements been removed,
                    with a particular association between
                    each sequence of simple selectors and the element it matched,
                    and</p>
            <li data-md>
                <p>for each removed <a class="css" data-link-type="maybe" href="#selectordef-nth-fragment"
                        id="ref-for-selectordef-nth-fragment①⑤">::nth-fragment()</a> pseudo-element,
                    the fragment lives within a <a data-link-type="dfn" href="#fragment-box"
                        id="ref-for-fragment-box②⓪">fragment box</a> of the element associated in that association
                    with the selector that the pseudo-element was attached to,
                    and whose index matches the pseudo-element.</p>
        </ol>
        <div class="example" id="example-ddb63e18">
            <a class="self-link" href="#example-ddb63e18"></a>
            <table class="source-demo-pair">
                <tbody>
                    <tr>
                        <td>
                            <pre><code class="highlight"><c- cp>&lt;!DOCTYPE HTML></c->
<c- p>&lt;</c-><c- f>style</c-><c- p>></c->
  <c- p>.</c-><c- nc>dark-columns</c-> <c- p>{</c->
    <c- k>continue</c-><c- p>:</c-> <c- n>fragments</c-><c- p>;</c->
    <c- k>width</c-><c- p>:</c-> <c- mi>6</c-><c- b>em</c-><c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <c- mi>10</c-><c- b>em</c-><c- p>;</c->
    <c- k>float</c-><c- p>:</c-> <c- kc>left</c-><c- p>;</c->
    <c- k>margin-right</c-><c- p>:</c-> <c- mi>1</c-><c- b>em</c-><c- p>;</c->
    <c- k>font</c-><c- p>:</c-> <c- kc>medium</c-><c- o>/</c-><c- mf>1.25</c-> <c- n>Times</c-> <c- n>New</c->
      <c- n>Roman</c-><c- p>,</c-> <c- n>Times</c-><c- p>,</c-> <c- kc>serif</c-><c- p>;</c->
  <c- p>}</c->
  <c- p>.</c-><c- nc>dark-columns</c-><c- p>::</c-><c- nd>nth-fragment</c-><c- o>(</c-><c- f>1</c-><c- o>)</c-> <c- p>{</c->
    <c- k>background</c-><c- p>:</c-> <c- kc>aqua</c-><c- p>;</c-> <c- k>color</c-><c- p>:</c-> <c- kc>black</c-><c- p>;</c->
  <c- p>}</c->
  <c- p>.</c-><c- nc>dark-columns</c-><c- p>::</c-><c- nd>nth-fragment</c-><c- o>(</c-><c- f>1</c-><c- o>)</c-> <c- p>:</c-><c- nd>link</c-> <c- p>{</c->
    <c- k>color</c-><c- p>:</c-> <c- kc>blue</c-><c- p>;</c->
  <c- p>}</c->
  <c- p>.</c-><c- nc>dark-columns</c-><c- p>::</c-><c- nd>nth-fragment</c-><c- o>(</c-><c- f>1</c-><c- o>)</c-> <c- p>:</c-><c- nd>visited</c-> <c- p>{</c->
    <c- k>color</c-><c- p>:</c-> <c- kc>purple</c-><c- p>;</c->
  <c- p>}</c->
  <c- p>.</c-><c- nc>dark-columns</c-><c- p>::</c-><c- nd>nth-fragment</c-><c- o>(</c-><c- f>2</c-><c- o>)</c-> <c- p>{</c->
    <c- k>background</c-><c- p>:</c-> <c- kc>navy</c-><c- p>;</c-> <c- k>color</c-><c- p>:</c-> <c- kc>white</c-><c- p>;</c->
  <c- p>}</c->
  <c- p>.</c-><c- nc>dark-columns</c-><c- p>::</c-><c- nd>nth-fragment</c-><c- o>(</c-><c- f>2</c-><c- o>)</c-> <c- p>:</c-><c- nd>link</c-> <c- p>{</c->
    <c- k>color</c-><c- p>:</c-> <c- kc>aqua</c-><c- p>;</c->
  <c- p>}</c->
  <c- p>.</c-><c- nc>dark-columns</c-><c- p>::</c-><c- nd>nth-fragment</c-><c- o>(</c-><c- f>2</c-><c- o>)</c-> <c- p>:</c-><c- nd>visited</c-> <c- p>{</c->
    <c- k>color</c-><c- p>:</c-> <c- kc>fuchsia</c-><c- p>;</c->
  <c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->
<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"dark-columns"</c-><c- p>></c->
  <i>...</i>
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</code></pre>
                        <td>
                            <div class="dark-columns-demo one">In this<br><a
                                    href="https://en.wiktionary.org/wiki/example">example</a>, the<br>text flows<br>from
                                one<br>light-colored<br>fragment into<br>another<br>dark-colored</div>
                            <div class="dark-columns-demo two">fragment. We<br>therefore want<br>different styles<br>for
                                <a href="https://www.w3.org/Provider/Style/IntoContext.html">hyperlinks</a><br>in the
                                different<br>fragments.
                            </div>
            </table>
        </div>
        <h2 class="no-num heading settled" id="privacy"><span class="content"> Appendix C: Privacy
                Considerations</span><a class="self-link" href="#privacy"></a></h2>
        <p>This specification introduces no new privacy considerations.</p>
        <h2 class="no-num heading settled" id="security"><span class="content"> Appendix D: Security
                Considerations</span><a class="self-link" href="#security"></a></h2>
        <p>This specification introduces no new security considerations.</p>
        <h2 class="no-num heading settled" id="changes-l4"><span class="content"> Changes Since Level 4</span><a
                class="self-link" href="#changes-l4"></a></h2>
        <p class="issue" id="issue-d4908b1e"><a class="self-link" href="#issue-d4908b1e"></a> TBD</p>
        <h2 class="no-num heading settled" id="acknowledgments"><span class="content"> Acknowledgments</span><a
                class="self-link" href="#acknowledgments"></a></h2>
        <p> Thanks especially to the feedback from
            Rossen Atanassov,
            Bert Bos,
            Tantek Çelik,
            John Daggett,
            fantasai,
            Daniel Glazman,
            Vincent Hardy,
            Håkon Wium Lie,
            Peter Linss,
            Robert O’Callahan,
            Florian Rivoal,
            Alan Stearns,
            Steve Zilles,
            and all the rest of the <a href="https://lists.w3.org/Archives/Public/www-style/">www-style</a> community.
        </p>
    </main>
    <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content"> Conformance</span><a
            class="self-link" href="#w3c-conformance"></a></h2>
    <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content"> Document conventions</span><a
            class="self-link" href="#w3c-conventions"></a></h3>
    <p>Conformance requirements are expressed with a combination of
        descriptive assertions and RFC 2119 terminology. The key words “MUST”,
        “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
        “RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative parts of this
        document are to be interpreted as described in RFC 2119.
        However, for readability, these words do not appear in all uppercase
        letters in this specification. </p>
    <p>All of the text of this specification is normative except sections
        explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119"
            title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a></p>
    <p>Examples in this specification are introduced with the words “for example”
        or are set apart from the normative text with <code>class="example"</code>,
        like this: </p>
    <div class="example" id="w3c-example">
        <a class="self-link" href="#w3c-example"></a>
        <p>This is an example of an informative example.</p>
    </div>
    <p>Informative notes begin with the word “Note” and are set apart from the
        normative text with <code>class="note"</code>, like this: </p>
    <p class="note" role="note">Note, this is an informative note.</p>
    <p>Advisements are normative sections styled to evoke special attention and are
        set apart from other normative text with <code>&lt;strong class="advisement"></code>, like
        this: <strong class="advisement"> UAs MUST provide an accessible alternative. </strong></p>
    <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content"> Conformance classes</span><a
            class="self-link" href="#w3c-conformance-classes"></a></h3>
    <p>Conformance to this specification
        is defined for three conformance classes: </p>
    <dl>
        <dt>style sheet
        <dd>A <a href="https://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
                style sheet</a>.
        <dt>renderer
        <dd>A <a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that interprets the semantics of a
            style sheet and renders
            documents that use them.
        <dt>authoring tool
        <dd>A <a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that writes a style sheet.
    </dl>
    <p>A style sheet is conformant to this specification
        if all of its statements that use syntax defined in this module are valid
        according to the generic CSS grammar and the individual grammars of each
        feature defined in this module. </p>
    <p>A renderer is conformant to this specification
        if, in addition to interpreting the style sheet as defined by the
        appropriate specifications, it supports all the features defined
        by this specification by parsing them correctly
        and rendering the document accordingly. However, the inability of a
        UA to correctly render a document due to limitations of the device
        does not make the UA non-conformant. (For example, a UA is not
        required to render color on a monochrome monitor.) </p>
    <p>An authoring tool is conformant to this specification
        if it writes style sheets that are syntactically correct according to the
        generic CSS grammar and the individual grammars of each feature in
        this module, and meet all other conformance requirements of style sheets
        as described in this module. </p>
    <h3 class="no-ref heading settled" id="w3c-partial"><span class="content"> Partial implementations</span><a
            class="self-link" href="#w3c-partial"></a></h3>
    <p>So that authors can exploit the forward-compatible parsing rules to
        assign fallback values, CSS renderers <strong>must</strong> treat as invalid (and <a
            href="https://www.w3.org/TR/CSS21/conform.html#ignore">ignore
            as appropriate</a>) any at-rules, properties, property values, keywords,
        and other syntactic constructs for which they have no usable level of
        support. In particular, user agents <strong>must not</strong> selectively
        ignore unsupported component values and honor supported values in a single
        multi-value property declaration: if any value is considered invalid
        (as unsupported values must be), CSS requires that the entire declaration
        be ignored.</p>
    <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content"> Implementations of Unstable and
            Proprietary Features</span><a class="self-link" href="#w3c-conform-future-proofing"></a></h4>
    <p>To avoid clashes with future stable CSS features,
        the CSSWG recommends <a href="https://www.w3.org/TR/CSS/#future-proofing">following best practices</a> for the
        implementation of <a href="https://www.w3.org/TR/CSS/#unstable">unstable</a> features and <a
            href="https://www.w3.org/TR/CSS/#proprietary-extension">proprietary extensions</a> to CSS. </p>
    <h3 class="no-ref heading settled" id="w3c-testing"><span class="content"> Non-experimental implementations</span><a
            class="self-link" href="#w3c-testing"></a></h3>
    <p>Once a specification reaches the Candidate Recommendation stage,
        non-experimental implementations are possible, and implementors should
        release an unprefixed implementation of any CR-level feature they
        can demonstrate to be correctly implemented according to spec. </p>
    <p>To establish and maintain the interoperability of CSS across
        implementations, the CSS Working Group requests that non-experimental
        CSS renderers submit an implementation report (and, if necessary, the
        testcases used for that implementation report) to the W3C before
        releasing an unprefixed implementation of any CSS features. Testcases
        submitted to W3C are subject to review and correction by the CSS
        Working Group. </p>
    <p>Further information on submitting testcases and implementation reports
        can be found from on the CSS Working Group’s website at <a
            href="https://www.w3.org/Style/CSS/Test/">https://www.w3.org/Style/CSS/Test/</a>.
        Questions should be directed to the <a
            href="https://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a> mailing
        list.</p>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this
            specification</span><a class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#valdef-scroll-marker-group-after">after</a><span>, in § 3.1.2</span>
        <li><a href="#valdef-scroll-marker-group-before">before</a><span>, in § 3.1.2</span>
        <li><a href="#valdef-scroll-button-direction-block-end">block-end</a><span>, in § 3.2</span>
        <li><a href="#valdef-scroll-button-direction-block-start">block-start</a><span>, in § 3.2</span>
        <li><a href="#current-scroll-target">current scroll target</a><span>, in § 2.1</span>
        <li><a href="#valdef-scroll-button-direction-down">down</a><span>, in § 3.2</span>
        <li><a href="#fragment-box">fragment box</a><span>, in § Unnumbered section</span>
        <li><a href="#valdef-continue-fragments">fragments</a><span>, in § Unnumbered section</span>
        <li><a href="#valdef-scroll-button-direction-inline-end">inline-end</a><span>, in § 3.2</span>
        <li><a href="#valdef-scroll-button-direction-inline-start">inline-start</a><span>, in § 3.2</span>
        <li><a href="#valdef-scroll-button-direction-left">left</a><span>, in § 3.2</span>
        <li><a href="#valdef-scroll-button-direction-next">next</a><span>, in § 3.2</span>
        <li><a href="#valdef-scroll-marker-group-none">none</a><span>, in § 3.1.2</span>
        <li><a href="#selectordef-nth-fragment">::nth-fragment()</a><span>, in § Unnumbered section</span>
        <li><a href="#valdef-continue-overflow">overflow</a><span>, in § Unnumbered section</span>
        <li><a href="#valdef-continue-paginate">paginate</a><span>, in § Unnumbered section</span>
        <li><a href="#valdef-scroll-button-direction-prev">prev</a><span>, in § 3.2</span>
        <li><a href="#valdef-scroll-button-direction-right">right</a><span>, in § 3.2</span>
        <li><a href="#typedef-scroll-button-direction">&lt;scroll-button-direction></a><span>, in § 3.2</span>
        <li><a href="#selectordef-scroll-button-scroll-button-direction">::scroll-button( &lt;scroll-button-direction>
                )</a><span>, in § 3.2</span>
        <li><a href="#selectordef-scroll-marker">::scroll-marker</a><span>, in § 3.1.4</span>
        <li><a href="#scroll-marker">scroll marker</a><span>, in § 3.1</span>
        <li><a href="#selectordef-scroll-marker-group">::scroll-marker-group</a><span>, in § 3.1.3</span>
        <li><a href="#scroll-marker-group">scroll marker group</a><span>, in § 3.1.1</span>
        <li><a href="#propdef-scroll-marker-group">scroll-marker-group</a><span>, in § 3.1.2</span>
        <li><a href="#scroll-marker-group-container">scroll marker group container</a><span>, in § 3.1.1</span>
        <li><a href="#scroll-target">scroll target</a><span>, in § 3.1</span>
        <li><a href="#selectordef-target-current">:target-current</a><span>, in § 3.1.5</span>
        <li><a href="#valdef-scroll-button-direction-up">up</a><span>, in § 3.2</span>
    </ul>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by
            reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[CSS-BREAK-4]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="4904f647">fragmentation container</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-CASCADE-5]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="d0dc95c3">inherit</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-CONTAIN-2]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="7507b495">layout containment</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-CONTENT-3]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="f3e8378c">content</span>
                <li><span class="dfn-paneled" id="85ca4a34">none</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-DISPLAY-3]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="2ccfe434">display</span>
                <li><span class="dfn-paneled" id="b7bfe5ca">inner display type</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-MULTICOL-1]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="bb384093">overflow columns</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-OVERFLOW-3]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="add377f4">overflow</span>
                <li><span class="dfn-paneled" id="a3cabdb1">scroll container</span>
                <li><span class="dfn-paneled" id="3ed7991e">scrollable overflow area</span>
                <li><span class="dfn-paneled" id="700ea31d">scrollport</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-OVERFLOW-4]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="072002d2">auto</span>
                <li><span class="dfn-paneled" id="42ff6ed0">continue</span>
                <li><span class="dfn-paneled" id="072f08da">max-lines</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-POSITION-3]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="b8c34db8">position</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-PSEUDO-4]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="70503bd6">::after</span>
                <li><span class="dfn-paneled" id="7c6f51b7">::before</span>
                <li><span class="dfn-paneled" id="63b59bd9">::first-letter</span>
                <li><span class="dfn-paneled" id="4bda66a9">::first-line</span>
                <li><span class="dfn-paneled" id="3b733e03">fully styleable pseudo-elements</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-REGIONS-1]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="6ff64730">CSS Region</span>
                <li><span class="dfn-paneled" id="9b457f64">region chain</span>
                <li><span class="dfn-paneled" id="8ddccf89">region-fragment</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-SCROLL-ANCHORING-1]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="df83f8bf">anchor priority candidate</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-SCROLL-SNAP-1]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="6292f440">intended direction and end position</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-SIZING-3]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="5ad01cca">height</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-UI-4]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="727bd17b">appearance</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-VALUES-4]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="4eb9d37e">|</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-WRITING-MODES-4]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="83d2ef35">block-end</span>
                <li><span class="dfn-paneled" id="1118d052">block-start</span>
                <li><span class="dfn-paneled" id="303c8d41">flow-relative</span>
                <li><span class="dfn-paneled" id="4da3b716">inline-end</span>
                <li><span class="dfn-paneled" id="0da67e16">inline-start</span>
                <li><span class="dfn-paneled" id="eb6008ce">writing mode</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS22]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="0570259e">float</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSSOM-VIEW-1]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="0cda95c2">determine the scroll-into-view position</span>
                <li><span class="dfn-paneled" id="2cbb079e">scroll a target into view</span>
            </ul>
        <li>
            <a data-link-type="biblio">[DOM]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="296f3551">Element</span>
                <li><span class="dfn-paneled" id="25538777">tree order</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="bfff6250">button</span>
                <li><span class="dfn-paneled" id="f0246dc8">follow the hyperlink</span>
                <li><span class="dfn-paneled" id="9ea68b61">indicated part</span>
            </ul>
        <li>
            <a data-link-type="biblio">[SELECTORS-4]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="86538792">:disabled</span>
                <li><span class="dfn-paneled" id="7b5d8638">originating element</span>
                <li><span class="dfn-paneled" id="aa4e3328">subject</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a
            class="self-link" href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a
            class="self-link" href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css-break-3">[CSS-BREAK-3]
        <dd>Rossen Atanassov; Elika Etemad. <a href="https://www.w3.org/TR/css-break-3/"><cite>CSS Fragmentation Module
                    Level 3</cite></a>. 4 December 2018. CR. URL: <a
                href="https://www.w3.org/TR/css-break-3/">https://www.w3.org/TR/css-break-3/</a>
        <dt id="biblio-css-break-4">[CSS-BREAK-4]
        <dd>Rossen Atanassov; Elika Etemad. <a href="https://www.w3.org/TR/css-break-4/"><cite>CSS Fragmentation Module
                    Level 4</cite></a>. 18 December 2018. WD. URL: <a
                href="https://www.w3.org/TR/css-break-4/">https://www.w3.org/TR/css-break-4/</a>
        <dt id="biblio-css-cascade-5">[CSS-CASCADE-5]
        <dd>Elika Etemad; Miriam Suzanne; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-cascade-5/"><cite>CSS
                    Cascading and Inheritance Level 5</cite></a>. 13 January 2022. CR. URL: <a
                href="https://www.w3.org/TR/css-cascade-5/">https://www.w3.org/TR/css-cascade-5/</a>
        <dt id="biblio-css-contain-1">[CSS-CONTAIN-1]
        <dd>Tab Atkins Jr.; Florian Rivoal. <a href="https://www.w3.org/TR/css-contain-1/"><cite>CSS Containment Module
                    Level 1</cite></a>. 25 June 2024. REC. URL: <a
                href="https://www.w3.org/TR/css-contain-1/">https://www.w3.org/TR/css-contain-1/</a>
        <dt id="biblio-css-contain-2">[CSS-CONTAIN-2]
        <dd>Tab Atkins Jr.; Florian Rivoal; Vladimir Levin. <a href="https://www.w3.org/TR/css-contain-2/"><cite>CSS
                    Containment Module Level 2</cite></a>. 17 September 2022. WD. URL: <a
                href="https://www.w3.org/TR/css-contain-2/">https://www.w3.org/TR/css-contain-2/</a>
        <dt id="biblio-css-content-3">[CSS-CONTENT-3]
        <dd>Elika Etemad; Dave Cramer. <a href="https://www.w3.org/TR/css-content-3/"><cite>CSS Generated Content Module
                    Level 3</cite></a>. 2 August 2019. WD. URL: <a
                href="https://www.w3.org/TR/css-content-3/">https://www.w3.org/TR/css-content-3/</a>
        <dt id="biblio-css-display-3">[CSS-DISPLAY-3]
        <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-display-3/"><cite>CSS Display Module Level
                    3</cite></a>. 30 March 2023. CR. URL: <a
                href="https://www.w3.org/TR/css-display-3/">https://www.w3.org/TR/css-display-3/</a>
        <dt id="biblio-css-multicol-1">[CSS-MULTICOL-1]
        <dd>Florian Rivoal; Rachel Andrew. <a href="https://www.w3.org/TR/css-multicol-1/"><cite>CSS Multi-column Layout
                    Module Level 1</cite></a>. 16 May 2024. CR. URL: <a
                href="https://www.w3.org/TR/css-multicol-1/">https://www.w3.org/TR/css-multicol-1/</a>
        <dt id="biblio-css-overflow-3">[CSS-OVERFLOW-3]
        <dd>Elika Etemad; Florian Rivoal. <a href="https://www.w3.org/TR/css-overflow-3/"><cite>CSS Overflow Module
                    Level 3</cite></a>. 29 March 2023. WD. URL: <a
                href="https://www.w3.org/TR/css-overflow-3/">https://www.w3.org/TR/css-overflow-3/</a>
        <dt id="biblio-css-overflow-4">[CSS-OVERFLOW-4]
        <dd>David Baron; Florian Rivoal; Elika Etemad. <a href="https://www.w3.org/TR/css-overflow-4/"><cite>CSS
                    Overflow Module Level 4</cite></a>. 21 March 2023. WD. URL: <a
                href="https://www.w3.org/TR/css-overflow-4/">https://www.w3.org/TR/css-overflow-4/</a>
        <dt id="biblio-css-position-3">[CSS-POSITION-3]
        <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-position-3/"><cite>CSS Positioned Layout
                    Module Level 3</cite></a>. 10 August 2024. WD. URL: <a
                href="https://www.w3.org/TR/css-position-3/">https://www.w3.org/TR/css-position-3/</a>
        <dt id="biblio-css-pseudo-4">[CSS-PSEUDO-4]
        <dd>Daniel Glazman; Elika Etemad; Alan Stearns. <a href="https://www.w3.org/TR/css-pseudo-4/"><cite>CSS
                    Pseudo-Elements Module Level 4</cite></a>. 30 December 2022. WD. URL: <a
                href="https://www.w3.org/TR/css-pseudo-4/">https://www.w3.org/TR/css-pseudo-4/</a>
        <dt id="biblio-css-regions-1">[CSS-REGIONS-1]
        <dd>Rossen Atanassov; Alan Stearns. <a href="https://www.w3.org/TR/css-regions-1/"><cite>CSS Regions Module
                    Level 1</cite></a>. 9 October 2014. WD. URL: <a
                href="https://www.w3.org/TR/css-regions-1/">https://www.w3.org/TR/css-regions-1/</a>
        <dt id="biblio-css-scroll-anchoring-1">[CSS-SCROLL-ANCHORING-1]
        <dd>Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-scroll-anchoring-1/"><cite>CSS Scroll Anchoring Module
                    Level 1</cite></a>. 11 November 2020. WD. URL: <a
                href="https://www.w3.org/TR/css-scroll-anchoring-1/">https://www.w3.org/TR/css-scroll-anchoring-1/</a>
        <dt id="biblio-css-scroll-snap-1">[CSS-SCROLL-SNAP-1]
        <dd>Matt Rakow; et al. <a href="https://www.w3.org/TR/css-scroll-snap-1/"><cite>CSS Scroll Snap Module Level
                    1</cite></a>. 11 March 2021. CR. URL: <a
                href="https://www.w3.org/TR/css-scroll-snap-1/">https://www.w3.org/TR/css-scroll-snap-1/</a>
        <dt id="biblio-css-ui-4">[CSS-UI-4]
        <dd>Florian Rivoal. <a href="https://www.w3.org/TR/css-ui-4/"><cite>CSS Basic User Interface Module Level
                    4</cite></a>. 16 March 2021. WD. URL: <a
                href="https://www.w3.org/TR/css-ui-4/">https://www.w3.org/TR/css-ui-4/</a>
        <dt id="biblio-css-values-4">[CSS-VALUES-4]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-4/"><cite>CSS Values and Units
                    Module Level 4</cite></a>. 12 March 2024. WD. URL: <a
                href="https://www.w3.org/TR/css-values-4/">https://www.w3.org/TR/css-values-4/</a>
        <dt id="biblio-css-writing-modes-4">[CSS-WRITING-MODES-4]
        <dd>Elika Etemad; Koji Ishii. <a href="https://www.w3.org/TR/css-writing-modes-4/"><cite>CSS Writing Modes Level
                    4</cite></a>. 30 July 2019. CR. URL: <a
                href="https://www.w3.org/TR/css-writing-modes-4/">https://www.w3.org/TR/css-writing-modes-4/</a>
        <dt id="biblio-css2">[CSS2]
        <dd>Bert Bos; et al. <a href="https://www.w3.org/TR/CSS21/"><cite>Cascading Style Sheets Level 2 Revision 1 (CSS
                    2.1) Specification</cite></a>. 7 June 2011. REC. URL: <a
                href="https://www.w3.org/TR/CSS21/">https://www.w3.org/TR/CSS21/</a>
        <dt id="biblio-css22">[CSS22]
        <dd>Bert Bos. <a href="https://www.w3.org/TR/CSS22/"><cite>Cascading Style Sheets Level 2 Revision 2 (CSS 2.2)
                    Specification</cite></a>. 12 April 2016. WD. URL: <a
                href="https://www.w3.org/TR/CSS22/">https://www.w3.org/TR/CSS22/</a>
        <dt id="biblio-css3-flexbox">[CSS3-FLEXBOX]
        <dd>Tab Atkins Jr.; et al. <a href="https://www.w3.org/TR/css-flexbox-1/"><cite>CSS Flexible Box Layout Module
                    Level 1</cite></a>. 19 November 2018. CR. URL: <a
                href="https://www.w3.org/TR/css-flexbox-1/">https://www.w3.org/TR/css-flexbox-1/</a>
        <dt id="biblio-css3-grid-layout">[CSS3-GRID-LAYOUT]
        <dd>Tab Atkins Jr.; et al. <a href="https://www.w3.org/TR/css-grid-1/"><cite>CSS Grid Layout Module Level
                    1</cite></a>. 18 December 2020. CR. URL: <a
                href="https://www.w3.org/TR/css-grid-1/">https://www.w3.org/TR/css-grid-1/</a>
        <dt id="biblio-cssom-view-1">[CSSOM-VIEW-1]
        <dd>Simon Pieters. <a href="https://www.w3.org/TR/cssom-view-1/"><cite>CSSOM View Module</cite></a>. 17 March
            2016. WD. URL: <a href="https://www.w3.org/TR/cssom-view-1/">https://www.w3.org/TR/cssom-view-1/</a>
        <dt id="biblio-dom">[DOM]
        <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard.
            URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>.
            Living Standard. URL: <a
                href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to
                    Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a
                href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
        <dt id="biblio-select">[SELECT]
        <dd>Tantek Çelik; et al. <a href="https://www.w3.org/TR/selectors-3/"><cite>Selectors Level 3</cite></a>. 6
            November 2018. REC. URL: <a href="https://www.w3.org/TR/selectors-3/">https://www.w3.org/TR/selectors-3/</a>
        <dt id="biblio-selectors-4">[SELECTORS-4]
        <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/selectors-4/"><cite>Selectors Level
                    4</cite></a>. 11 November 2022. WD. URL: <a
                href="https://www.w3.org/TR/selectors-4/">https://www.w3.org/TR/selectors-4/</a>
        <dt id="biblio-svg2">[SVG2]
        <dd>Amelia Bellamy-Royds; et al. <a href="https://www.w3.org/TR/SVG2/"><cite>Scalable Vector Graphics (SVG)
                    2</cite></a>. 4 October 2018. CR. URL: <a
                href="https://www.w3.org/TR/SVG2/">https://www.w3.org/TR/SVG2/</a>
    </dl>
    <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a
            class="self-link" href="#informative"></a></h3>
    <dl>
        <dt id="biblio-css-sizing-3">[CSS-SIZING-3]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-sizing-3/"><cite>CSS Box Sizing Module
                    Level 3</cite></a>. 17 December 2021. WD. URL: <a
                href="https://www.w3.org/TR/css-sizing-3/">https://www.w3.org/TR/css-sizing-3/</a>
        <dt id="biblio-css1">[CSS1]
        <dd>Håkon Wium Lie; Bert Bos. <a href="https://www.w3.org/TR/CSS1/"><cite>Cascading Style Sheets, level
                    1</cite></a>. 13 September 2018. REC. URL: <a
                href="https://www.w3.org/TR/CSS1/">https://www.w3.org/TR/CSS1/</a>
        <dt id="biblio-css3-marquee">[CSS3-MARQUEE]
        <dd>Bert Bos. <a href="https://www.w3.org/TR/css3-marquee/"><cite>CSS Marquee Module Level 3</cite></a>. 14
            October 2014. NOTE. URL: <a
                href="https://www.w3.org/TR/css3-marquee/">https://www.w3.org/TR/css3-marquee/</a>
        <dt id="biblio-css3gcpm">[CSS3GCPM]
        <dd>Rachel Andrew; Mike Bremford. <a href="https://www.w3.org/TR/css-gcpm-3/"><cite>CSS Generated Content for
                    Paged Media Module</cite></a>. 25 January 2024. WD. URL: <a
                href="https://www.w3.org/TR/css-gcpm-3/">https://www.w3.org/TR/css-gcpm-3/</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="property-index"><span class="content">Property Index</span><a
            class="self-link" href="#property-index"></a></h2>
    <div class="big-element-wrapper">
        <table class="index">
            <thead>
                <tr>
                    <th scope="col">Name
                    <th scope="col">Value
                    <th scope="col">Initial
                    <th scope="col">Applies to
                    <th scope="col">Inh.
                    <th scope="col">%ages
                    <th scope="col">Anim­ation type
                    <th scope="col">Canonical order
                    <th scope="col">Com­puted value
            <tbody>
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-scroll-marker-group"
                            id="ref-for-propdef-scroll-marker-group①⓪">scroll-marker-group</a>
                    <td>none | before | after
                    <td>none
                    <td>scroll containers
                    <td>no
                    <td>n/a
                    <td>discrete
                    <td>per grammar
                    <td>specified value
        </table>
    </div>
    <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a
            class="self-link" href="#issues-index"></a></h2>
    <div style="counter-reset:issue">
        <div class="issue"> Copy <a href="https://www.w3.org/TR/css-overflow-3/#overflow-concepts">Level 3 content</a>
            when final. <a class="issue-return" href="#issue-50246bc5" title="Jump to section">↵</a></div>
        <div class="issue"> Setting the current scroll target should be defined in how to <a data-link-type="dfn"
                href="https://drafts.csswg.org/cssom-view-1/#scroll-a-target-into-view">scroll a target into view</a>.
            <a class="issue-return" href="#issue-fc26a707" title="Jump to section">↵</a>
        </div>
        <div class="issue"> Use the current scroll target as an <a data-link-type="dfn"
                href="https://drafts.csswg.org/css-scroll-anchoring-1/#anchor-priority-candidates">anchor priority
                candidate</a> for scroll anchoring. <a class="issue-return" href="#issue-e9bdeb4d"
                title="Jump to section">↵</a></div>
        <div class="issue"> Add images representing these examples. <a class="issue-return" href="#issue-41eecb3e"
                title="Jump to section">↵</a></div>
        <div class="issue"> The grouping of markers for scroll progress tracking should be separated from opting into
            focusgroup focus behavior. <a class="issue-return" href="#issue-a5475f7a" title="Jump to section">↵</a>
        </div>
        <div class="issue"> <a data-link-type="biblio" href="#biblio-cssom-view-1"
                title="CSSOM View Module">[CSSOM-VIEW-1]</a> will grow a "scroll by pages" algorithm,
            at which point this can reference that.
            See <a href="https://github.com/w3c/csswg-drafts/issues/10914#issuecomment-2380139977"> the resolution on
                issue #10914</a>. <a class="issue-return" href="#issue-086bdb0b" title="Jump to section">↵</a></div>
        <div class="issue"> Is this the best order for the buttons?
            This does match the usual ordering of logical directions in CSS,
            but similar buttons created manually
            are usually either ordered with verticals and horizontals each grouped together
            (aka block-start/block-end then inline-start/inline-end)
            or the verticals "around" the horizontals
            (aka block-start/inline-start/inline-end/block-end). <a class="issue-return" href="#issue-cdbe0ac3"
                title="Jump to section">↵</a></div>
        <div class="issue"> Do we want to add some multi-button keywords
            to make it easier to style several buttons the same way?
            In particular, <span class="css">all</span> is probably useful,
            but maybe also <span class="css">horizontal</span>/<span class="css">vertical</span>/<span
                class="css">block</span>/<span class="css">inline</span>. <a class="issue-return" href="#issue-62e6d969"
                title="Jump to section">↵</a></div>
        <div class="issue"> The UA stylesheet needs to specify that <a class="css" data-link-type="maybe"
                href="#selectordef-scroll-button-scroll-button-direction">::scroll-button()</a>s
            are styled identically to the
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/form-elements.html#the-button-element">button</a></code>
            element,
            including disabled styles. <a class="issue-return" href="#issue-c93cbaf3" title="Jump to section">↵</a>
        </div>
        <div class="issue"> Should <a class="css" data-link-type="maybe"
                href="#selectordef-scroll-button-scroll-button-direction">::scroll-button()</a> use the *full* UA
            styling of buttons,
            aka <span class="css">appearance:button</span>?
            Or the non-native rendering, aka <span class="css">appearance:none</span>?
            If the former, we’ll obviously need to define the interaction with <a class="property css"
                data-link-type="property" href="https://www.w3.org/TR/css-ui-4/#propdef-appearance">appearance</a>. <a
                class="issue-return" href="#issue-894e4eee" title="Jump to section">↵</a></div>
        <div class="issue"> This section is highly experimental.
            It documents current attempts
            at extending the capabilities of the <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-overflow-4/#propdef-continue">continue</a> property
            to solve additional use cases.
            However, it does not currently have consensus.
            It is presented here to encourage discussion,
            but non-experimental implementation is not recommended. <a class="issue-return" href="#issue-3406e15b"
                title="Jump to section">↵</a></div>
        <div class="issue"> The naming of this property and its values is preliminary.
            This was initially proposed as
            "fragmentation: auto | none | break | clone | page"
            in <a
                href="https://lists.w3.org/Archives/Public/www-style/2015Jan/0357.html">https://lists.w3.org/Archives/Public/www-style/2015Jan/0357.html</a>,
            and there is not yet wide agreement as to which naming is better. <a class="issue-return"
                href="#issue-70dec9cf" title="Jump to section">↵</a></div>
        <div class="issue"> This property is meant to generalize and replace <a class="property css"
                data-link-type="property"
                href="https://www.w3.org/TR/css-regions-1/#propdef-region-fragment">region-fragment</a>.
            Once it is sufficiently stable in this specification, <span class="property">region-fragment</span> should
            be removed from the regions specification in favor of this. <a class="issue-return" href="#issue-b201bbf9"
                title="Jump to section">↵</a></div>
        <div class="issue"> this is different from the definition in <a
                href="https://www.w3.org/TR/css-overflow-4/#continue"><cite>CSS Overflow 4</cite> § 5.3 Fragmentation of
                Overflow: the continue property</a>,
            where the specified value is the computed value.
            Which is model better? <a class="issue-return" href="#issue-cb5399d1" title="Jump to section">↵</a></div>
        <div class="issue"> If we introduce a pseudo element that can select columns in a multicol,
            we would need to specify that auto computes to auto on it,
            or introduce a new value and have auto compute to that
            (but what would that value compute to on things that aren’t columns?). <a class="issue-return"
                href="#issue-7e96806f" title="Jump to section">↵</a></div>
        <div class="issue"> Write this section <a class="issue-return" href="#issue-001d5014"
                title="Jump to section">↵</a></div>
        <div class="issue"> Pages should be possible to style with @page rules. How does that work for nested pages? <a
                class="issue-return" href="#issue-338ad0f3" title="Jump to section">↵</a></div>
        <div class="issue">
            Should traditional pagination (e.g. when printing)
            be expressed through some magic in the computed value of <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-overflow-4/#valdef-continue-auto">auto</a>,
            or by inserting this in the UA stylesheet:
            <pre><code class="lang-css highlight"><c- n>@media</c-> <c- p>(</c->overflow-block: paged<c- p>),</c-> <c- p>(</c->overflow-block: optional-paged<c- p>)</c-> <c- p>{</c->
  :root <c- p>{</c->
    <c- k>continue</c-><c- p>:</c-> paginate<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->
</code></pre>
            <a class="issue-return" href="#issue-20e2f78e" title="Jump to section">↵</a>
        </div>
        <div class="issue"> Traditional pagination (e.g. when printing) assumes that
            :root is contained in the page box,
            rather than having the page box be a pseudo element child of :root.
            Can we work around that using something similar to fragment boxes?
            Or maybe by having a fragment box (reproducing :root) inside a page box inside :root? <a
                class="issue-return" href="#issue-87a37458" title="Jump to section">↵</a></div>
        <div class="issue"> How does the page box model work when it is a child of a regular css box? <a
                class="issue-return" href="#issue-64583cf9" title="Jump to section">↵</a></div>
        <div class="issue"> The initial proposal in <a data-link-type="biblio" href="#biblio-css3gcpm"
                title="CSS Generated Content for Paged Media Module">[CSS3GCPM]</a> and implementation from Opera
            used 4 values instead of <a class="css" data-link-type="maybe"
                href="#valdef-continue-paginate">paginate</a>:
            "paged-x | paged-y | paged-x-controls | paged-y-controls".
            Should this property also include these values,
            or are they better handled as separate properties?
            (e.g.: "pagination-layout: auto | horizontal | vertical", "pagination-controls: auto | none") <a
                class="issue-return" href="#issue-c27ed5ea" title="Jump to section">↵</a></div>
        <div class="issue"> Ability to display N pages at once
            rather than just one page at once?
            Could this be a value of "pagination-layout", such as:
            "pagination-layout: horizontal 2;" <a class="issue-return" href="#issue-e78fc89d"
                title="Jump to section">↵</a></div>
        <div class="issue"> Brad Kemper has proposed a model for combining pagination and
            fragment overflow, which also deals with displaying multiple pages. <a
                href="https://lists.w3.org/Archives/Public/www-style/2015Mar/0241.html">https://lists.w3.org/Archives/Public/www-style/2015Mar/0241.html</a>
            <a class="issue-return" href="#issue-2261daab" title="Jump to section">↵</a>
        </div>
        <div class="issue"> The current implementation of paginated overflow uses
            the overflow/overflow-x/overflow-y properties
            rather than the overflow-style property as proposed
            in the <a data-link-type="biblio" href="#biblio-css3gcpm"
                title="CSS Generated Content for Paged Media Module">[CSS3GCPM]</a> draft
            (which also matches the <a data-link-type="biblio" href="#biblio-css3-marquee"
                title="CSS Marquee Module Level 3">[CSS3-MARQUEE]</a> proposal).
            or the <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-overflow-4/#propdef-continue">continue</a> property as described here.
            <a class="issue-return" href="#issue-6bc0b289" title="Jump to section">↵</a>
        </div>
        <div class="issue">Or is it as though it’s a next sibling of
            the element? Need to figure out exactly how this interacts with
            other box-level fixup. <a class="issue-return" href="#issue-c87585cb" title="Jump to section">↵</a></div>
        <div class="issue">though it defines <i>multi-column container</i> <a class="issue-return"
                href="#issue-6629852d" title="Jump to section">↵</a></div>
        <div class="issue">Should a forced break that breaks to
            an outer fragmentation context cause a new fragment of a single
            fragment box or a new fragment box? <a class="issue-return" href="#issue-74cf5d92"
                title="Jump to section">↵</a></div>
        <div class="issue">Should we find a term other than <a data-link-type="dfn" href="#fragment-box">fragment
                box</a> here to make this a little less confusing? <a class="issue-return" href="#issue-ca84b506"
                title="Jump to section">↵</a></div>
        <div class="issue"> What if we want to be able to style the pieces of an element
            split within another type of fragmentation context?
            These rules prevent ever using <a class="css" data-link-type="maybe"
                href="#selectordef-nth-fragment">::nth-fragment()</a> for that,
            despite that the name seems the most logical name for such a feature. <a class="issue-return"
                href="#issue-82870b15" title="Jump to section">↵</a></div>
        <div class="issue"> We should specify that <a class="css" data-link-type="propdesc"
                href="https://www.w3.org/TR/css-overflow-4/#propdef-continue">continue: fragments</a> does not apply
            to at least some table parts,
            and perhaps other elements as well.
            We need to determine exactly which ones. <a class="issue-return" href="#issue-4d452eb2"
                title="Jump to section">↵</a></div>
        <div class="issue"> This specification needs to say which type of
            fragmentation context is created
            so that it’s clear which values of the <a class="property css" data-link-type="property">break-*</a>
            properties
            cause breaks within this context.
            We probably want <span class="css">break-*: region</span> to apply. <a class="issue-return"
                href="#issue-0df4918a" title="Jump to section">↵</a></div>
        <div class="issue"> This specification needs a processing model
            that will apply in cases where the layout containing the
            fragments has characteristics that use the intrinsic size of the fragments
            to change the amount of space available for them,
            such as <a data-link-type="biblio" href="#biblio-css3-grid-layout"
                title="CSS Grid Layout Module Level 1">[CSS3-GRID-LAYOUT]</a>.
            There has already been some work on such a processing model
            in <a data-link-type="biblio" href="#biblio-css-regions-1"
                title="CSS Regions Module Level 1">[CSS-REGIONS-1]</a>,
            and the work done on a model there,
            and the editors of that specification,
            should inform what happens in this specification. <a class="issue-return" href="#issue-1d1c38d2"
                title="Jump to section">↵</a></div>
        <div class="issue"> Depending on future discussions,
            this <span class="css">::nth-fragment(<var>an+b</var>)</span> syntax
            may be replaced with
            the new <span class="css">::fragment:nth(<var>an+b</var>)</span> syntax. <a class="issue-return"
                href="#issue-978c73c1" title="Jump to section">↵</a></div>
        <div class="issue"> Should this apply to continue:fragments only,
            or also to continue:paginate?
            (If it applies,
            then stricter property restrictions would be needed
            for continue:paginate.) <a class="issue-return" href="#issue-ce652c3d" title="Jump to section">↵</a></div>
        <div class="issue">Does this need to be specified in
            the cascading module as well? <a class="issue-return" href="#issue-40daaa94" title="Jump to section">↵</a>
        </div>
        <div class="issue">Need to specify exactly how this works <a class="issue-return" href="#issue-d723335f"
                title="Jump to section">↵</a></div>
        <div class="issue"> This inheritance rule allows specifying styles indirectly
            (by using explicit <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-cascade-5/#valdef-all-inherit">inherit</a> or using default inheritance
            on properties that don’t apply to <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-pseudo-4/#selectordef-first-letter">::first-letter</a>)
            that can’t be specified directly
            (based on the rules in the next section).
            This is a problem.
            The restrictions that apply to styling inside fragments
            should also apply to inheritance from fragments. <a class="issue-return" href="#issue-0fc783b4"
                title="Jump to section">↵</a></div>
        <div class="issue"> Should this apply to continue:fragments only,
            or also to continue:paginate? <a class="issue-return" href="#issue-4a9707fc" title="Jump to section">↵</a>
        </div>
        <div class="issue"> TBD <a class="issue-return" href="#issue-d4908b1e" title="Jump to section">↵</a></div>
    </div>
    <script>/* Boilerplate: script-dom-helper */
        "use strict";
        function query(sel) { return document.querySelector(sel); }

        function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

        function iter(obj) {
            if (!obj) return [];
            var it = obj[Symbol.iterator];
            if (it) return it;
            return Object.entries(obj);
        }

        function mk(tagname, attrs, ...children) {
            const el = document.createElement(tagname);
            for (const [k, v] of iter(attrs)) {
                if (k.slice(0, 3) == "_on") {
                    const eventName = k.slice(3);
                    el.addEventListener(eventName, v);
                } else if (k[0] == "_") {
                    // property, not attribute
                    el[k.slice(1)] = v;
                } else {
                    if (v === false || v == null) {
                        continue;
                    } else if (v === true) {
                        el.setAttribute(k, "");
                        continue;
                    } else {
                        el.setAttribute(k, v);
                    }
                }
            }
            append(el, children);
            return el;
        }

        /* Create shortcuts for every known HTML element */
        [
            "a",
            "abbr",
            "acronym",
            "address",
            "applet",
            "area",
            "article",
            "aside",
            "audio",
            "b",
            "base",
            "basefont",
            "bdo",
            "big",
            "blockquote",
            "body",
            "br",
            "button",
            "canvas",
            "caption",
            "center",
            "cite",
            "code",
            "col",
            "colgroup",
            "datalist",
            "dd",
            "del",
            "details",
            "dfn",
            "dialog",
            "div",
            "dl",
            "dt",
            "em",
            "embed",
            "fieldset",
            "figcaption",
            "figure",
            "font",
            "footer",
            "form",
            "frame",
            "frameset",
            "head",
            "header",
            "h1",
            "h2",
            "h3",
            "h4",
            "h5",
            "h6",
            "hr",
            "html",
            "i",
            "iframe",
            "img",
            "input",
            "ins",
            "kbd",
            "label",
            "legend",
            "li",
            "link",
            "main",
            "map",
            "mark",
            "meta",
            "meter",
            "nav",
            "nobr",
            "noscript",
            "object",
            "ol",
            "optgroup",
            "option",
            "output",
            "p",
            "param",
            "pre",
            "progress",
            "q",
            "s",
            "samp",
            "script",
            "section",
            "select",
            "small",
            "source",
            "span",
            "strike",
            "strong",
            "style",
            "sub",
            "summary",
            "sup",
            "table",
            "tbody",
            "td",
            "template",
            "textarea",
            "tfoot",
            "th",
            "thead",
            "time",
            "title",
            "tr",
            "u",
            "ul",
            "var",
            "video",
            "wbr",
            "xmp",
        ].forEach(tagname => {
            mk[tagname] = (...args) => mk(tagname, ...args);
        });

        function* nodesFromChildList(children) {
            for (const child of children.flat(Infinity)) {
                if (child instanceof Node) {
                    yield child;
                } else {
                    yield new Text(child);
                }
            }
        }
        function append(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                if (el instanceof Node) el.appendChild(child);
                else el.push(child);
            }
            return el;
        }

        function insertAfter(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                el.parentNode.insertBefore(child, el.nextSibling);
            }
            return el;
        }

        function clearContents(el) {
            el.innerHTML = "";
            return el;
        }

        function parseHTML(markup) {
            if (markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
                const doc = document.implementation.createHTMLDocument("");
                doc.documentElement.innerHTML = markup;
                return doc;
            } else {
                const el = mk.template({});
                el.innerHTML = markup;
                return el.content;
            }
        }</script>
    <script>/* Boilerplate: script-dfn-panel */
        "use strict";
        {
            let dfnPanelData = {
                "0570259e": { "dfnID": "0570259e", "dfnText": "float", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-float" }], "title": "\nStyling of fragments" }], "url": "https://drafts.csswg.org/css2/#propdef-float" },
                "072002d2": { "dfnID": "072002d2", "dfnText": "auto", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-valdef-continue-auto" }, { "id": "ref-for-valdef-continue-auto\u2460" }, { "id": "ref-for-valdef-continue-auto\u2461" }, { "id": "ref-for-valdef-continue-auto\u2462" }, { "id": "ref-for-valdef-continue-auto\u2463" }], "title": "\nChanneling Overflow: the continue property" }, { "refs": [{ "id": "ref-for-valdef-continue-auto\u2464" }], "title": "\nPaginated overflow" }], "url": "https://www.w3.org/TR/css-overflow-4/#valdef-continue-auto" },
                "072f08da": { "dfnID": "072f08da", "dfnText": "max-lines", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-max-lines" }], "title": "\nFragmented Overflow" }], "url": "https://www.w3.org/TR/css-overflow-4/#propdef-max-lines" },
                "0cda95c2": { "dfnID": "0cda95c2", "dfnText": "determine the scroll-into-view position", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-determine-the-scroll-into-view-position" }], "title": "3.1.5. \nSelecting The Active Scroll Marker: the :target-current pseudo-class" }], "url": "https://drafts.csswg.org/cssom-view-1/#determine-the-scroll-into-view-position" },
                "0da67e16": { "dfnID": "0da67e16", "dfnText": "inline-start", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-inline-start" }, { "id": "ref-for-inline-start\u2460" }], "title": "3.2. \nScroll Buttons" }], "url": "https://www.w3.org/TR/css-writing-modes-4/#inline-start" },
                "1118d052": { "dfnID": "1118d052", "dfnText": "block-start", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-block-start" }, { "id": "ref-for-block-start\u2460" }, { "id": "ref-for-block-start\u2461" }, { "id": "ref-for-block-start\u2462" }], "title": "3.2. \nScroll Buttons" }], "url": "https://www.w3.org/TR/css-writing-modes-4/#block-start" },
                "25538777": { "dfnID": "25538777", "dfnText": "tree order", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-tree-order" }], "title": "3.1.4. The ::scroll-marker pseudo-element" }], "url": "https://dom.spec.whatwg.org/#concept-tree-order" },
                "296f3551": { "dfnID": "296f3551", "dfnText": "Element", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-element" }], "title": "3.1. \nScroll markers" }], "url": "https://dom.spec.whatwg.org/#element" },
                "2cbb079e": { "dfnID": "2cbb079e", "dfnText": "scroll a target into view", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-scroll-a-target-into-view" }], "title": "2.1. Scrolling overflow" }, { "refs": [{ "id": "ref-for-scroll-a-target-into-view\u2460" }], "title": "3.1.6. Activation behavior" }], "url": "https://drafts.csswg.org/cssom-view-1/#scroll-a-target-into-view" },
                "2ccfe434": { "dfnID": "2ccfe434", "dfnText": "display", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-display" }, { "id": "ref-for-propdef-display\u2460" }], "title": "\nStyling of fragments" }], "url": "https://www.w3.org/TR/css-display-3/#propdef-display" },
                "303c8d41": { "dfnID": "303c8d41", "dfnText": "flow-relative", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-flow-relative" }], "title": "3.2. \nScroll Buttons" }], "url": "https://www.w3.org/TR/css-writing-modes-4/#flow-relative" },
                "3b733e03": { "dfnID": "3b733e03", "dfnText": "fully styleable pseudo-elements", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-fully-styleable" }], "title": "3.1.3. The ::scroll-marker-group pseudo-element" }, { "refs": [{ "id": "ref-for-fully-styleable\u2460" }], "title": "3.2. \nScroll Buttons" }], "url": "https://drafts.csswg.org/css-pseudo-4/#fully-styleable" },
                "3ed7991e": { "dfnID": "3ed7991e", "dfnText": "scrollable overflow area", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-scrollable-overflow-region" }], "title": "3.1.5. \nSelecting The Active Scroll Marker: the :target-current pseudo-class" }, { "refs": [{ "id": "ref-for-scrollable-overflow-region\u2460" }, { "id": "ref-for-scrollable-overflow-region\u2461" }], "title": "3.2. \nScroll Buttons" }], "url": "https://www.w3.org/TR/css-overflow-3/#scrollable-overflow-region" },
                "42ff6ed0": { "dfnID": "42ff6ed0", "dfnText": "continue", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-continue" }], "title": "\nAppendix A: Redirection of Overflow" }, { "refs": [{ "id": "ref-for-propdef-continue\u2460" }, { "id": "ref-for-propdef-continue\u2461" }, { "id": "ref-for-propdef-continue\u2462" }, { "id": "ref-for-propdef-continue\u2463" }, { "id": "ref-for-propdef-continue\u2464" }, { "id": "ref-for-propdef-continue\u2465" }], "title": "\nChanneling Overflow: the continue property" }, { "refs": [{ "id": "ref-for-propdef-continue\u2466" }, { "id": "ref-for-propdef-continue\u2467" }], "title": "\nPaginated overflow" }, { "refs": [{ "id": "ref-for-propdef-continue\u2468" }, { "id": "ref-for-propdef-continue\u2460\u24ea" }, { "id": "ref-for-propdef-continue\u2460\u2460" }, { "id": "ref-for-propdef-continue\u2460\u2461" }, { "id": "ref-for-propdef-continue\u2460\u2462" }], "title": "\nFragmented Overflow" }, { "refs": [{ "id": "ref-for-propdef-continue\u2460\u2463" }, { "id": "ref-for-propdef-continue\u2460\u2464" }, { "id": "ref-for-propdef-continue\u2460\u2465" }, { "id": "ref-for-propdef-continue\u2460\u2466" }], "title": "\nStyling of fragments" }], "url": "https://www.w3.org/TR/css-overflow-4/#propdef-continue" },
                "4904f647": { "dfnID": "4904f647", "dfnText": "fragmentation container", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-fragmentation-container" }], "title": "1. \nIntroduction" }], "url": "https://www.w3.org/TR/css-break-4/#fragmentation-container" },
                "4bda66a9": { "dfnID": "4bda66a9", "dfnText": "::first-line", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-selectordef-first-line" }], "title": "Styling inside fragments" }], "url": "https://www.w3.org/TR/css-pseudo-4/#selectordef-first-line" },
                "4da3b716": { "dfnID": "4da3b716", "dfnText": "inline-end", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-inline-end" }, { "id": "ref-for-inline-end\u2460" }], "title": "3.2. \nScroll Buttons" }], "url": "https://www.w3.org/TR/css-writing-modes-4/#inline-end" },
                "4eb9d37e": { "dfnID": "4eb9d37e", "dfnText": "|", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-comb-one" }, { "id": "ref-for-comb-one\u2460" }], "title": "3.1.2. \nThe scroll-marker-group property" }, { "refs": [{ "id": "ref-for-comb-one\u2461" }, { "id": "ref-for-comb-one\u2462" }], "title": "\nChanneling Overflow: the continue property" }], "url": "https://www.w3.org/TR/css-values-4/#comb-one" },
                "5ad01cca": { "dfnID": "5ad01cca", "dfnText": "height", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-height" }], "title": "\nFragmented Overflow" }], "url": "https://www.w3.org/TR/css-sizing-3/#propdef-height" },
                "6292f440": { "dfnID": "6292f440", "dfnText": "intended direction and end position", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-intended-direction-and-end-position" }], "title": "3.2. \nScroll Buttons" }], "url": "https://www.w3.org/TR/css-scroll-snap-1/#intended-direction-and-end-position" },
                "63b59bd9": { "dfnID": "63b59bd9", "dfnText": "::first-letter", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-selectordef-first-letter" }], "title": "\nStyling of fragments" }, { "refs": [{ "id": "ref-for-selectordef-first-letter\u2460" }, { "id": "ref-for-selectordef-first-letter\u2461" }, { "id": "ref-for-selectordef-first-letter\u2462" }], "title": "Styling inside fragments" }], "url": "https://www.w3.org/TR/css-pseudo-4/#selectordef-first-letter" },
                "6ff64730": { "dfnID": "6ff64730", "dfnText": "CSS Region", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-css-region" }, { "id": "ref-for-css-region\u2460" }], "title": "\nChanneling Overflow: the continue property" }], "url": "https://www.w3.org/TR/css-regions-1/#css-region" },
                "700ea31d": { "dfnID": "700ea31d", "dfnText": "scrollport", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-scrollport" }, { "id": "ref-for-scrollport\u2460" }], "title": "3.2. \nScroll Buttons" }], "url": "https://www.w3.org/TR/css-overflow-3/#scrollport" },
                "70503bd6": { "dfnID": "70503bd6", "dfnText": "::after", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-selectordef-after" }], "title": "3.1.4. The ::scroll-marker pseudo-element" }], "url": "https://www.w3.org/TR/css-pseudo-4/#selectordef-after" },
                "727bd17b": { "dfnID": "727bd17b", "dfnText": "appearance", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-appearance" }], "title": "3.2. \nScroll Buttons" }], "url": "https://www.w3.org/TR/css-ui-4/#propdef-appearance" },
                "7507b495": { "dfnID": "7507b495", "dfnText": "layout containment", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-layout-containment" }], "title": "\nChanneling Overflow: the continue property" }], "url": "https://www.w3.org/TR/css-contain-2/#layout-containment" },
                "7b5d8638": { "dfnID": "7b5d8638", "dfnText": "originating element", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-originating-element" }, { "id": "ref-for-originating-element\u2460" }], "title": "3.1.2. \nThe scroll-marker-group property" }, { "refs": [{ "id": "ref-for-originating-element\u2461" }], "title": "3.1.3. The ::scroll-marker-group pseudo-element" }, { "refs": [{ "id": "ref-for-originating-element\u2462" }, { "id": "ref-for-originating-element\u2463" }], "title": "3.1.4. The ::scroll-marker pseudo-element" }, { "refs": [{ "id": "ref-for-originating-element\u2464" }, { "id": "ref-for-originating-element\u2465" }, { "id": "ref-for-originating-element\u2466" }, { "id": "ref-for-originating-element\u2467" }, { "id": "ref-for-originating-element\u2468" }, { "id": "ref-for-originating-element\u2460\u24ea" }, { "id": "ref-for-originating-element\u2460\u2460" }, { "id": "ref-for-originating-element\u2460\u2461" }], "title": "3.2. \nScroll Buttons" }], "url": "https://www.w3.org/TR/selectors-4/#originating-element" },
                "7c6f51b7": { "dfnID": "7c6f51b7", "dfnText": "::before", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-selectordef-before" }], "title": "3.1.4. The ::scroll-marker pseudo-element" }], "url": "https://www.w3.org/TR/css-pseudo-4/#selectordef-before" },
                "83d2ef35": { "dfnID": "83d2ef35", "dfnText": "block-end", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-block-end" }, { "id": "ref-for-block-end\u2460" }], "title": "3.2. \nScroll Buttons" }], "url": "https://www.w3.org/TR/css-writing-modes-4/#block-end" },
                "85ca4a34": { "dfnID": "85ca4a34", "dfnText": "none", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-valdef-content-none" }], "title": "3.1.4. The ::scroll-marker pseudo-element" }, { "refs": [{ "id": "ref-for-valdef-content-none\u2460" }], "title": "3.2. \nScroll Buttons" }], "url": "https://www.w3.org/TR/css-content-3/#valdef-content-none" },
                "86538792": { "dfnID": "86538792", "dfnText": ":disabled", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-disabled-pseudo" }], "title": "3.2. \nScroll Buttons" }], "url": "https://www.w3.org/TR/selectors-4/#disabled-pseudo" },
                "8ddccf89": { "dfnID": "8ddccf89", "dfnText": "region-fragment", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-region-fragment" }, { "id": "ref-for-propdef-region-fragment\u2460" }], "title": "\nChanneling Overflow: the continue property" }], "url": "https://www.w3.org/TR/css-regions-1/#propdef-region-fragment" },
                "9b457f64": { "dfnID": "9b457f64", "dfnText": "region chain", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-region-chain" }, { "id": "ref-for-region-chain\u2460" }], "title": "\nChanneling Overflow: the continue property" }], "url": "https://www.w3.org/TR/css-regions-1/#region-chain" },
                "9ea68b61": { "dfnID": "9ea68b61", "dfnText": "indicated part", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-indicated-part-of-the-document" }], "title": "3.1. \nScroll markers" }], "url": "https://html.spec.whatwg.org/multipage/browsing-the-web.html#the-indicated-part-of-the-document" },
                "a3cabdb1": { "dfnID": "a3cabdb1", "dfnText": "scroll container", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-scroll-container" }, { "id": "ref-for-scroll-container\u2460" }, { "id": "ref-for-scroll-container\u2461" }], "title": "2.1. Scrolling overflow" }, { "refs": [{ "id": "ref-for-scroll-container\u2462" }, { "id": "ref-for-scroll-container\u2463" }, { "id": "ref-for-scroll-container\u2464" }, { "id": "ref-for-scroll-container\u2465" }, { "id": "ref-for-scroll-container\u2466" }], "title": "3.1.2. \nThe scroll-marker-group property" }, { "refs": [{ "id": "ref-for-scroll-container\u2467" }], "title": "3.1.3. The ::scroll-marker-group pseudo-element" }, { "refs": [{ "id": "ref-for-scroll-container\u2468" }, { "id": "ref-for-scroll-container\u2460\u24ea" }, { "id": "ref-for-scroll-container\u2460\u2460" }, { "id": "ref-for-scroll-container\u2460\u2461" }], "title": "3.1.4. The ::scroll-marker pseudo-element" }, { "refs": [{ "id": "ref-for-scroll-container\u2460\u2462" }, { "id": "ref-for-scroll-container\u2460\u2463" }, { "id": "ref-for-scroll-container\u2460\u2464" }, { "id": "ref-for-scroll-container\u2460\u2465" }, { "id": "ref-for-scroll-container\u2460\u2466" }, { "id": "ref-for-scroll-container\u2460\u2467" }], "title": "3.1.5. \nSelecting The Active Scroll Marker: the :target-current pseudo-class" }, { "refs": [{ "id": "ref-for-scroll-container\u2460\u2468" }, { "id": "ref-for-scroll-container\u2461\u24ea" }], "title": "3.2. \nScroll Buttons" }, { "refs": [{ "id": "ref-for-scroll-container\u2461\u2460" }, { "id": "ref-for-scroll-container\u2461\u2461" }, { "id": "ref-for-scroll-container\u2461\u2462" }, { "id": "ref-for-scroll-container\u2461\u2463" }, { "id": "ref-for-scroll-container\u2461\u2464" }], "title": "3.3. \nFocus Navigation Order" }], "url": "https://www.w3.org/TR/css-overflow-3/#scroll-container" },
                "aa4e3328": { "dfnID": "aa4e3328", "dfnText": "subject", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-selector-subject" }], "title": "\nStyling of fragments" }], "url": "https://www.w3.org/TR/selectors-4/#selector-subject" },
                "add377f4": { "dfnID": "add377f4", "dfnText": "overflow", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-overflow" }], "title": "\nAppendix A: Redirection of Overflow" }, { "refs": [{ "id": "ref-for-propdef-overflow\u2460" }], "title": "\nChanneling Overflow: the continue property" }], "url": "https://www.w3.org/TR/css-overflow-3/#propdef-overflow" },
                "b7bfe5ca": { "dfnID": "b7bfe5ca", "dfnText": "inner display type", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-inner-display-type" }], "title": "\nStyling of fragments" }], "url": "https://www.w3.org/TR/css-display-3/#inner-display-type" },
                "b8c34db8": { "dfnID": "b8c34db8", "dfnText": "position", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-position" }], "title": "\nStyling of fragments" }], "url": "https://www.w3.org/TR/css-position-3/#propdef-position" },
                "bb384093": { "dfnID": "bb384093", "dfnText": "overflow columns", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-overflow-columns" }], "title": "\nFragmented Overflow" }], "url": "https://www.w3.org/TR/css-multicol-1/#overflow-columns" },
                "bfff6250": { "dfnID": "bfff6250", "dfnText": "button", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-button-element" }], "title": "3.2. \nScroll Buttons" }], "url": "https://html.spec.whatwg.org/multipage/form-elements.html#the-button-element" },
                "current-scroll-target": { "dfnID": "current-scroll-target", "dfnText": "current scroll target", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-current-scroll-target" }], "title": "2.1. Scrolling overflow" }, { "refs": [{ "id": "ref-for-current-scroll-target\u2460" }, { "id": "ref-for-current-scroll-target\u2461" }], "title": "3.1.5. \nSelecting The Active Scroll Marker: the :target-current pseudo-class" }], "url": "#current-scroll-target" },
                "d0dc95c3": { "dfnID": "d0dc95c3", "dfnText": "inherit", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-valdef-all-inherit" }], "title": "\nStyling of fragments" }], "url": "https://www.w3.org/TR/css-cascade-5/#valdef-all-inherit" },
                "df83f8bf": { "dfnID": "df83f8bf", "dfnText": "anchor priority candidate", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-anchor-priority-candidates" }], "title": "2.1. Scrolling overflow" }], "url": "https://drafts.csswg.org/css-scroll-anchoring-1/#anchor-priority-candidates" },
                "eb6008ce": { "dfnID": "eb6008ce", "dfnText": "writing mode", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-writing-mode" }], "title": "3.2. \nScroll Buttons" }], "url": "https://www.w3.org/TR/css-writing-modes-4/#writing-mode" },
                "f0246dc8": { "dfnID": "f0246dc8", "dfnText": "follow the hyperlink", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-following-hyperlinks-2" }], "title": "3.1.6. Activation behavior" }], "url": "https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2" },
                "f3e8378c": { "dfnID": "f3e8378c", "dfnText": "content", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-content" }], "title": "3.1.4. The ::scroll-marker pseudo-element" }, { "refs": [{ "id": "ref-for-propdef-content\u2460" }, { "id": "ref-for-propdef-content\u2461" }], "title": "3.2. \nScroll Buttons" }, { "refs": [{ "id": "ref-for-propdef-content\u2462" }, { "id": "ref-for-propdef-content\u2463" }], "title": "\nStyling of fragments" }], "url": "https://www.w3.org/TR/css-content-3/#propdef-content" },
                "fragment-box": { "dfnID": "fragment-box", "dfnText": "fragment box", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-fragment-box" }], "title": "\nChanneling Overflow: the continue property" }, { "refs": [{ "id": "ref-for-fragment-box\u2460" }, { "id": "ref-for-fragment-box\u2461" }, { "id": "ref-for-fragment-box\u2462" }, { "id": "ref-for-fragment-box\u2463" }, { "id": "ref-for-fragment-box\u2464" }, { "id": "ref-for-fragment-box\u2465" }], "title": "\nFragmented Overflow" }, { "refs": [{ "id": "ref-for-fragment-box\u2466" }, { "id": "ref-for-fragment-box\u2467" }], "title": "\nThe ::nth-fragment() pseudo-element" }, { "refs": [{ "id": "ref-for-fragment-box\u2468" }, { "id": "ref-for-fragment-box\u2460\u24ea" }, { "id": "ref-for-fragment-box\u2460\u2460" }, { "id": "ref-for-fragment-box\u2460\u2461" }, { "id": "ref-for-fragment-box\u2460\u2462" }, { "id": "ref-for-fragment-box\u2460\u2463" }, { "id": "ref-for-fragment-box\u2460\u2464" }, { "id": "ref-for-fragment-box\u2460\u2465" }, { "id": "ref-for-fragment-box\u2460\u2466" }, { "id": "ref-for-fragment-box\u2460\u2467" }], "title": "\nStyling of fragments" }, { "refs": [{ "id": "ref-for-fragment-box\u2460\u2468" }, { "id": "ref-for-fragment-box\u2461\u24ea" }], "title": "Styling inside fragments" }], "url": "#fragment-box" },
                "propdef-scroll-marker-group": { "dfnID": "propdef-scroll-marker-group", "dfnText": "scroll-marker-group", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-propdef-scroll-marker-group" }, { "id": "ref-for-propdef-scroll-marker-group\u2460" }], "title": "3.1.2. \nThe scroll-marker-group property" }, { "refs": [{ "id": "ref-for-propdef-scroll-marker-group\u2461" }, { "id": "ref-for-propdef-scroll-marker-group\u2462" }, { "id": "ref-for-propdef-scroll-marker-group\u2463" }, { "id": "ref-for-propdef-scroll-marker-group\u2464" }], "title": "3.1.3. The ::scroll-marker-group pseudo-element" }, { "refs": [{ "id": "ref-for-propdef-scroll-marker-group\u2465" }], "title": "3.1.4. The ::scroll-marker pseudo-element" }, { "refs": [{ "id": "ref-for-propdef-scroll-marker-group\u2466" }], "title": "3.2. \nScroll Buttons" }, { "refs": [{ "id": "ref-for-propdef-scroll-marker-group\u2467" }, { "id": "ref-for-propdef-scroll-marker-group\u2468" }], "title": "3.3. \nFocus Navigation Order" }], "url": "#propdef-scroll-marker-group" },
                "scroll-marker": { "dfnID": "scroll-marker", "dfnText": "scroll marker", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-scroll-marker" }], "title": "1. \nIntroduction" }, { "refs": [{ "id": "ref-for-scroll-marker\u2460" }, { "id": "ref-for-scroll-marker\u2461" }, { "id": "ref-for-scroll-marker\u2462" }, { "id": "ref-for-scroll-marker\u2463" }], "title": "3.1. \nScroll markers" }, { "refs": [{ "id": "ref-for-scroll-marker\u2464" }], "title": "3.1.1. \nScroll marker grouping" }, { "refs": [{ "id": "ref-for-scroll-marker\u2465" }, { "id": "ref-for-scroll-marker\u2466" }, { "id": "ref-for-scroll-marker\u2467" }, { "id": "ref-for-scroll-marker\u2468" }, { "id": "ref-for-scroll-marker\u2460\u24ea" }, { "id": "ref-for-scroll-marker\u2460\u2460" }], "title": "3.1.5. \nSelecting The Active Scroll Marker: the :target-current pseudo-class" }, { "refs": [{ "id": "ref-for-scroll-marker\u2460\u2461" }], "title": "3.1.6. Activation behavior" }, { "refs": [{ "id": "ref-for-scroll-marker\u2460\u2462" }], "title": "3.1.7. Focus behavior" }], "url": "#scroll-marker" },
                "scroll-marker-group": { "dfnID": "scroll-marker-group", "dfnText": "scroll marker group", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-scroll-marker-group" }], "title": "3.1.1. \nScroll marker grouping" }, { "refs": [{ "id": "ref-for-scroll-marker-group\u2460" }, { "id": "ref-for-scroll-marker-group\u2461" }, { "id": "ref-for-scroll-marker-group\u2462" }, { "id": "ref-for-scroll-marker-group\u2463" }, { "id": "ref-for-scroll-marker-group\u2464" }, { "id": "ref-for-scroll-marker-group\u2465" }], "title": "3.1.5. \nSelecting The Active Scroll Marker: the :target-current pseudo-class" }], "url": "#scroll-marker-group" },
                "scroll-marker-group-container": { "dfnID": "scroll-marker-group-container", "dfnText": "scroll marker group container", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-scroll-marker-group-container" }, { "id": "ref-for-scroll-marker-group-container\u2460" }], "title": "3.1.1. \nScroll marker grouping" }], "url": "#scroll-marker-group-container" },
                "scroll-target": { "dfnID": "scroll-target", "dfnText": "scroll target", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-scroll-target" }, { "id": "ref-for-scroll-target\u2460" }, { "id": "ref-for-scroll-target\u2461" }], "title": "3.1. \nScroll markers" }, { "refs": [{ "id": "ref-for-scroll-target\u2462" }], "title": "3.1.4. The ::scroll-marker pseudo-element" }, { "refs": [{ "id": "ref-for-scroll-target\u2463" }, { "id": "ref-for-scroll-target\u2464" }, { "id": "ref-for-scroll-target\u2465" }], "title": "3.1.5. \nSelecting The Active Scroll Marker: the :target-current pseudo-class" }, { "refs": [{ "id": "ref-for-scroll-target\u2466" }, { "id": "ref-for-scroll-target\u2467" }], "title": "3.1.6. Activation behavior" }, { "refs": [{ "id": "ref-for-scroll-target\u2468" }, { "id": "ref-for-scroll-target\u2460\u24ea" }], "title": "3.1.7. Focus behavior" }], "url": "#scroll-target" },
                "selectordef-nth-fragment": { "dfnID": "selectordef-nth-fragment", "dfnText": "::nth-fragment()", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-selectordef-nth-fragment" }], "title": "\nFragmented Overflow" }, { "refs": [{ "id": "ref-for-selectordef-nth-fragment\u2460" }], "title": "\nThe ::nth-fragment() pseudo-element" }, { "refs": [{ "id": "ref-for-selectordef-nth-fragment\u2461" }, { "id": "ref-for-selectordef-nth-fragment\u2462" }, { "id": "ref-for-selectordef-nth-fragment\u2463" }, { "id": "ref-for-selectordef-nth-fragment\u2464" }, { "id": "ref-for-selectordef-nth-fragment\u2465" }, { "id": "ref-for-selectordef-nth-fragment\u2466" }, { "id": "ref-for-selectordef-nth-fragment\u2467" }, { "id": "ref-for-selectordef-nth-fragment\u2468" }, { "id": "ref-for-selectordef-nth-fragment\u2460\u24ea" }], "title": "\nStyling of fragments" }, { "refs": [{ "id": "ref-for-selectordef-nth-fragment\u2460\u2460" }, { "id": "ref-for-selectordef-nth-fragment\u2460\u2461" }, { "id": "ref-for-selectordef-nth-fragment\u2460\u2462" }, { "id": "ref-for-selectordef-nth-fragment\u2460\u2463" }, { "id": "ref-for-selectordef-nth-fragment\u2460\u2464" }], "title": "Styling inside fragments" }], "url": "#selectordef-nth-fragment" },
                "selectordef-scroll-button-scroll-button-direction": { "dfnID": "selectordef-scroll-button-scroll-button-direction", "dfnText": "::scroll-button( <scroll-button-direction> )", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-selectordef-scroll-button-scroll-button-direction" }], "title": "1. \nIntroduction" }, { "refs": [{ "id": "ref-for-selectordef-scroll-button-scroll-button-direction\u2460" }, { "id": "ref-for-selectordef-scroll-button-scroll-button-direction\u2461" }, { "id": "ref-for-selectordef-scroll-button-scroll-button-direction\u2462" }, { "id": "ref-for-selectordef-scroll-button-scroll-button-direction\u2463" }, { "id": "ref-for-selectordef-scroll-button-scroll-button-direction\u2464" }, { "id": "ref-for-selectordef-scroll-button-scroll-button-direction\u2465" }, { "id": "ref-for-selectordef-scroll-button-scroll-button-direction\u2466" }, { "id": "ref-for-selectordef-scroll-button-scroll-button-direction\u2467" }, { "id": "ref-for-selectordef-scroll-button-scroll-button-direction\u2468" }, { "id": "ref-for-selectordef-scroll-button-scroll-button-direction\u2460\u24ea" }, { "id": "ref-for-selectordef-scroll-button-scroll-button-direction\u2460\u2460" }, { "id": "ref-for-selectordef-scroll-button-scroll-button-direction\u2460\u2461" }], "title": "3.2. \nScroll Buttons" }, { "refs": [{ "id": "ref-for-selectordef-scroll-button-scroll-button-direction\u2460\u2462" }], "title": "3.3. \nFocus Navigation Order" }], "url": "#selectordef-scroll-button-scroll-button-direction" },
                "selectordef-scroll-marker": { "dfnID": "selectordef-scroll-marker", "dfnText": "::scroll-marker", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-selectordef-scroll-marker" }], "title": "1. \nIntroduction" }, { "refs": [{ "id": "ref-for-selectordef-scroll-marker\u2460" }], "title": "3.1. \nScroll markers" }, { "refs": [{ "id": "ref-for-selectordef-scroll-marker\u2461" }], "title": "3.1.1. \nScroll marker grouping" }, { "refs": [{ "id": "ref-for-selectordef-scroll-marker\u2462" }, { "id": "ref-for-selectordef-scroll-marker\u2463" }, { "id": "ref-for-selectordef-scroll-marker\u2464" }], "title": "3.1.4. The ::scroll-marker pseudo-element" }, { "refs": [{ "id": "ref-for-selectordef-scroll-marker\u2465" }], "title": "3.3. \nFocus Navigation Order" }], "url": "#selectordef-scroll-marker" },
                "selectordef-scroll-marker-group": { "dfnID": "selectordef-scroll-marker-group", "dfnText": "::scroll-marker-group", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-selectordef-scroll-marker-group" }], "title": "3.1.1. \nScroll marker grouping" }, { "refs": [{ "id": "ref-for-selectordef-scroll-marker-group\u2460" }, { "id": "ref-for-selectordef-scroll-marker-group\u2461" }], "title": "3.1.2. \nThe scroll-marker-group property" }, { "refs": [{ "id": "ref-for-selectordef-scroll-marker-group\u2462" }, { "id": "ref-for-selectordef-scroll-marker-group\u2463" }], "title": "3.1.3. The ::scroll-marker-group pseudo-element" }, { "refs": [{ "id": "ref-for-selectordef-scroll-marker-group\u2464" }, { "id": "ref-for-selectordef-scroll-marker-group\u2465" }], "title": "3.1.4. The ::scroll-marker pseudo-element" }, { "refs": [{ "id": "ref-for-selectordef-scroll-marker-group\u2466" }], "title": "3.2. \nScroll Buttons" }, { "refs": [{ "id": "ref-for-selectordef-scroll-marker-group\u2467" }, { "id": "ref-for-selectordef-scroll-marker-group\u2468" }, { "id": "ref-for-selectordef-scroll-marker-group\u2460\u24ea" }], "title": "3.3. \nFocus Navigation Order" }], "url": "#selectordef-scroll-marker-group" },
                "selectordef-target-current": { "dfnID": "selectordef-target-current", "dfnText": ":target-current", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-selectordef-target-current" }], "title": "1. \nIntroduction" }, { "refs": [{ "id": "ref-for-selectordef-target-current\u2460" }], "title": "3.1.5. \nSelecting The Active Scroll Marker: the :target-current pseudo-class" }], "url": "#selectordef-target-current" },
                "typedef-scroll-button-direction": { "dfnID": "typedef-scroll-button-direction", "dfnText": "<scroll-button-direction>", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-typedef-scroll-button-direction" }, { "id": "ref-for-typedef-scroll-button-direction\u2460" }], "title": "3.2. \nScroll Buttons" }], "url": "#typedef-scroll-button-direction" },
                "valdef-continue-fragments": { "dfnID": "valdef-continue-fragments", "dfnText": "fragments", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-continue-fragments" }, { "id": "ref-for-valdef-continue-fragments\u2460" }, { "id": "ref-for-valdef-continue-fragments\u2461" }], "title": "\nChanneling Overflow: the continue property" }, { "refs": [{ "id": "ref-for-valdef-continue-fragments\u2462" }, { "id": "ref-for-valdef-continue-fragments\u2463" }, { "id": "ref-for-valdef-continue-fragments\u2464" }], "title": "\nFragmented Overflow" }, { "refs": [{ "id": "ref-for-valdef-continue-fragments\u2465" }], "title": "\nStyling of fragments" }], "url": "#valdef-continue-fragments" },
                "valdef-continue-overflow": { "dfnID": "valdef-continue-overflow", "dfnText": "overflow", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-continue-overflow" }, { "id": "ref-for-valdef-continue-overflow\u2460" }], "title": "\nChanneling Overflow: the continue property" }], "url": "#valdef-continue-overflow" },
                "valdef-continue-paginate": { "dfnID": "valdef-continue-paginate", "dfnText": "paginate", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-continue-paginate" }, { "id": "ref-for-valdef-continue-paginate\u2460" }], "title": "\nChanneling Overflow: the continue property" }, { "refs": [{ "id": "ref-for-valdef-continue-paginate\u2461" }, { "id": "ref-for-valdef-continue-paginate\u2462" }], "title": "\nPaginated overflow" }], "url": "#valdef-continue-paginate" },
                "valdef-scroll-button-direction-block-end": { "dfnID": "valdef-scroll-button-direction-block-end", "dfnText": "block-end", "external": false, "refSections": [], "url": "#valdef-scroll-button-direction-block-end" },
                "valdef-scroll-button-direction-block-start": { "dfnID": "valdef-scroll-button-direction-block-start", "dfnText": "block-start", "external": false, "refSections": [], "url": "#valdef-scroll-button-direction-block-start" },
                "valdef-scroll-button-direction-down": { "dfnID": "valdef-scroll-button-direction-down", "dfnText": "down", "external": false, "refSections": [], "url": "#valdef-scroll-button-direction-down" },
                "valdef-scroll-button-direction-inline-end": { "dfnID": "valdef-scroll-button-direction-inline-end", "dfnText": "inline-end", "external": false, "refSections": [], "url": "#valdef-scroll-button-direction-inline-end" },
                "valdef-scroll-button-direction-inline-start": { "dfnID": "valdef-scroll-button-direction-inline-start", "dfnText": "inline-start", "external": false, "refSections": [], "url": "#valdef-scroll-button-direction-inline-start" },
                "valdef-scroll-button-direction-left": { "dfnID": "valdef-scroll-button-direction-left", "dfnText": "left", "external": false, "refSections": [], "url": "#valdef-scroll-button-direction-left" },
                "valdef-scroll-button-direction-next": { "dfnID": "valdef-scroll-button-direction-next", "dfnText": "next", "external": false, "refSections": [], "url": "#valdef-scroll-button-direction-next" },
                "valdef-scroll-button-direction-prev": { "dfnID": "valdef-scroll-button-direction-prev", "dfnText": "prev", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-scroll-button-direction-prev" }], "title": "3.2. \nScroll Buttons" }], "url": "#valdef-scroll-button-direction-prev" },
                "valdef-scroll-button-direction-right": { "dfnID": "valdef-scroll-button-direction-right", "dfnText": "right", "external": false, "refSections": [], "url": "#valdef-scroll-button-direction-right" },
                "valdef-scroll-button-direction-up": { "dfnID": "valdef-scroll-button-direction-up", "dfnText": "up", "external": false, "refSections": [], "url": "#valdef-scroll-button-direction-up" },
                "valdef-scroll-marker-group-after": { "dfnID": "valdef-scroll-marker-group-after", "dfnText": "after", "external": false, "refSections": [], "url": "#valdef-scroll-marker-group-after" },
                "valdef-scroll-marker-group-before": { "dfnID": "valdef-scroll-marker-group-before", "dfnText": "before", "external": false, "refSections": [], "url": "#valdef-scroll-marker-group-before" },
                "valdef-scroll-marker-group-none": { "dfnID": "valdef-scroll-marker-group-none", "dfnText": "none", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-scroll-marker-group-none" }], "title": "3.1.3. The ::scroll-marker-group pseudo-element" }, { "refs": [{ "id": "ref-for-valdef-scroll-marker-group-none\u2460" }], "title": "3.1.4. The ::scroll-marker pseudo-element" }], "url": "#valdef-scroll-marker-group-none" },
            };

            document.addEventListener("DOMContentLoaded", () => {
                genAllDfnPanels();

                document.body.addEventListener("click", (e) => {
                    // If not handled already, just hide all dfn panels.
                    hideAllDfnPanels();
                });
            });

            window.addEventListener("resize", () => {
                // Pin any visible dfn panel
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el => positionDfnPanel(el));
            });

            function genAllDfnPanels() {
                for (const panelData of Object.values(dfnPanelData)) {
                    const dfnID = panelData.dfnID;
                    const dfn = document.getElementById(dfnID);
                    if (!dfn) {
                        console.log(`Can't find dfn#${dfnID}.`, panelData);
                        continue;
                    }
                    dfn.panelData = panelData;
                    insertDfnPopupAction(dfn);
                }
            }

            function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
                const dfnPanel = mk.aside({
                    class: "dfn-panel on",
                    id: `infopanel-for-${dfnID}`,
                    "data-for": dfnID,
                    "aria-labelled-by": `infopaneltitle-for-${dfnID}`,
                },
                    mk.span({ id: `infopaneltitle-for-${dfnID}`, style: "display:none" },
                        `Info about the '${dfnText}' ${external ? "external" : ""} reference.`),
                    mk.a({ href: url, class: "dfn-link" }, url),
                    refSections.length == 0 ? [] :
                        mk.b({}, "Referenced in:"),
                    mk.ul({},
                        ...refSections.map(section =>
                            mk.li({},
                                ...section.refs.map((ref, refI) =>
                                    [
                                        mk.a({ href: `#${ref.id}` },
                                            (refI == 0) ? section.title : `(${refI + 1})`
                                        ),
                                        " ",
                                    ]
                                ),
                            ),
                        ),
                    ),
                    genLinkingSyntaxes(dfn),
                );

                dfnPanel.addEventListener('click', (event) => {
                    if (event.target.nodeName == 'A') {
                        scrollToTargetAndHighlight(event);
                        pinDfnPanel(dfnPanel);
                    }
                    event.stopPropagation();
                    refocusOnTarget(event);
                });
                dfnPanel.addEventListener('keydown', (event) => {
                    if (event.keyCode == 27) { // Escape key
                        hideDfnPanel({ dfnPanel });
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });

                dfnPanel.dfn = dfn;
                dfn.dfnPanel = dfnPanel;
                return dfnPanel;
            }



            function hideAllDfnPanels() {
                // Delete the currently-active dfn panel.
                queryAll(".dfn-panel").forEach(dfnPanel => hideDfnPanel({ dfnPanel }));
            }

            function showDfnPanel(dfn) {
                hideAllDfnPanels(); // Only display one at a time.

                dfn.setAttribute("aria-expanded", "true");

                const dfnPanel = genDfnPanel(dfn, dfn.panelData);

                // Give the dfn a unique tabindex, and then
                // give all the tabbable panel bits successive indexes.
                let tabIndex = 100;
                dfn.tabIndex = tabIndex++;
                const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
                for (const el of tabbable) {
                    el.tabIndex = tabIndex++;
                }

                append(document.body, dfnPanel);
                positionDfnPanel(dfnPanel);
            }

            function positionDfnPanel(dfnPanel) {
                const dfn = dfnPanel.dfn;
                const dfnPos = getBounds(dfn);
                dfnPanel.style.top = dfnPos.bottom + "px";
                dfnPanel.style.left = dfnPos.left + "px";

                const panelPos = dfnPanel.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
                    dfnPanel.style.left = newLeft + "px";
                }
            }

            function pinDfnPanel(dfnPanel) {
                // Switch it to "activated" state, which pins it.
                dfnPanel.classList.add("activated");
                dfnPanel.style.position = "fixed";
                dfnPanel.style.left = null;
                dfnPanel.style.top = null;
            }

            function hideDfnPanel({ dfn, dfnPanel }) {
                if (!dfnPanel) dfnPanel = dfn.dfnPanel;
                if (!dfn) dfn = dfnPanel.dfn;
                dfn.dfnPanel = undefined;
                dfnPanel.dfn = undefined;
                dfn.setAttribute("aria-expanded", "false");
                dfn.tabIndex = undefined;
                dfnPanel.remove()
            }

            function toggleDfnPanel(dfn) {
                if (dfn.dfnPanel) {
                    hideDfnPanel(dfn);
                } else {
                    showDfnPanel(dfn);
                }
            }

            function insertDfnPopupAction(dfn) {
                dfn.setAttribute('role', 'button');
                dfn.setAttribute('aria-expanded', 'false')
                dfn.tabIndex = 0;
                dfn.classList.add('has-dfn-panel');
                dfn.addEventListener('click', (event) => {
                    toggleDfnPanel(dfn);
                    event.stopPropagation();
                });
                dfn.addEventListener('keypress', (event) => {
                    const kc = event.keyCode;
                    // 32->Space, 13->Enter
                    if (kc == 32 || kc == 13) {
                        toggleDfnPanel(dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });
            }

            function refocusOnTarget(event) {
                const target = event.target;
                setTimeout(() => {
                    // Refocus on the event.target element.
                    // This is needed after browser scrolls to the destination.
                    target.focus();
                });
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function scrollToTargetAndHighlight(event) {
                let hash = event.target.hash;
                if (hash) {
                    hash = decodeURIComponent(hash.substring(1));
                    const dest = document.getElementById(hash);
                    if (dest) {
                        dest.classList.add('highlighted');
                        setTimeout(() => dest.classList.remove('highlighted'), 1000);
                    }
                }
            }

            // Functions, divided by link type, that wrap an autolink's
            // contents with the appropriate outer syntax.
            // Alternately, a string naming another type they format
            // the same as.
            function needsFor(type) {
                switch (type) {
                    case "descriptor":
                    case "value":
                    case "element-attr":
                    case "attr-value":
                    case "element-state":
                    case "method":
                    case "constructor":
                    case "argument":
                    case "attribute":
                    case "const":
                    case "dict-member":
                    case "event":
                    case "enum-value":
                    case "stringifier":
                    case "serializer":
                    case "iterator":
                    case "maplike":
                    case "setlike":
                    case "state":
                    case "mode":
                    case "context":
                    case "facet": return true;

                    default: return false;
                }
            }
            function refusesFor(type) {
                switch (type) {
                    case "property":
                    case "element":
                    case "interface":
                    case "namespace":
                    case "callback":
                    case "dictionary":
                    case "enum":
                    case "exception":
                    case "typedef":
                    case "http-header":
                    case "permission": return true;

                    default: return false;
                }
            }
            function linkFormatterFromType(type) {
                switch (type) {
                    case 'scheme':
                    case 'permission':
                    case 'dfn': return (text) => `[=${text}=]`;

                    case 'abstract-op': return (text) => `[\$${text}\$]`;

                    case 'function':
                    case 'at-rule':
                    case 'selector':
                    case 'value': return (text) => `''${text}''`;

                    case 'http-header': return (text) => `[:${text}:]`;

                    case 'interface':
                    case 'constructor':
                    case 'method':
                    case 'argument':
                    case 'attribute':
                    case 'callback':
                    case 'dictionary':
                    case 'dict-member':
                    case 'enum':
                    case 'enum-value':
                    case 'exception':
                    case 'const':
                    case 'typedef':
                    case 'stringifier':
                    case 'serializer':
                    case 'iterator':
                    case 'maplike':
                    case 'setlike':
                    case 'extended-attribute':
                    case 'event':
                    case 'idl': return (text) => `{{${text}}}`;

                    case 'element-state':
                    case 'element-attr':
                    case 'attr-value':
                    case 'element': return (element) => `<{${element}}>`;

                    case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

                    case 'type': return (text) => `<<${text}>>`;

                    case 'descriptor':
                    case 'property': return (text) => `'${text}'`;

                    default: return;
                };
            };

            function genLinkingSyntaxes(dfn) {
                if (dfn.tagName != "DFN") return;

                const type = dfn.getAttribute('data-dfn-type');
                if (!type) {
                    console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
                    return [];
                }

                // Return a function that wraps link text based on the type
                const linkFormatter = linkFormatterFromType(type);
                if (!linkFormatter) {
                    console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
                    return [];
                }

                let ltAlts;
                if (dfn.hasAttribute('data-lt')) {
                    ltAlts = dfn.getAttribute('data-lt')
                        .split("|")
                        .map(x => x.trim());
                } else {
                    ltAlts = [dfn.textContent.trim()];
                }
                if (type == "type") {
                    // lt of "<foo>", but "foo" is the interior;
                    // <<foo/bar>> is how you write it with a for,
                    // not <foo/<bar>> or whatever.
                    for (var i = 0; i < ltAlts.length; i++) {
                        const lt = ltAlts[i];
                        const match = /<(.*)>/.exec(lt);
                        if (match) { ltAlts[i] = match[1]; }
                    }
                }

                let forAlts;
                if (dfn.hasAttribute('data-dfn-for')) {
                    forAlts = dfn.getAttribute('data-dfn-for')
                        .split(",")
                        .map(x => x.trim());
                } else {
                    forAlts = [''];
                }

                let linkingSyntaxes = [];
                if (!needsFor(type)) {
                    for (const lt of ltAlts) {
                        linkingSyntaxes.push(linkFormatter(lt));
                    }
                }
                if (!refusesFor(type)) {
                    for (const f of forAlts) {
                        linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
                    }
                }
                return [
                    mk.b({}, 'Possible linking syntaxes:'),
                    mk.ul({},
                        ...linkingSyntaxes.map(link => {
                            const copyLink = async () =>
                                await navigator.clipboard.writeText(link);
                            return mk.li({},
                                mk.div({ class: 'link-item' },
                                    mk.button({
                                        class: 'copy-icon', title: 'Copy',
                                        type: 'button',
                                        _onclick: copyLink,
                                        tabindex: 0,
                                    }, mk.span({ class: 'icon' })),
                                    mk.span({}, link)
                                )
                            );
                        })
                    )
                ];
            }
        }
    </script>
    <script>/* Boilerplate: script-link-titles */
        "use strict";
        {
            let linkTitleData = {
                "#typedef-scroll-button-direction": "Expands to: block-end | block-start | down | inline-end | inline-start | left | next | prev | right | up",
            };

            function setTypeTitles() {
                for (let el of document.querySelectorAll("a[href]")) {
                    if (el.href in linkTitleData && !el.hasAttribute("title")) {
                        el.setAttribute("title", linkTitleData[el.href]);
                    }
                }
            }

            document.addEventListener("DOMContentLoaded", setTypeTitles);
        }
    </script>
    <script>/* Boilerplate: script-ref-hints */
        "use strict";
        {
            let refsData = {
                "#current-scroll-target": { "displayText": "current scroll target", "export": true, "for_": [], "level": "5", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-5", "status": "local", "text": "current scroll target", "type": "dfn", "url": "#current-scroll-target" },
                "#fragment-box": { "displayText": "fragment box", "export": true, "for_": [], "level": "5", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-5", "status": "local", "text": "fragment box", "type": "dfn", "url": "#fragment-box" },
                "#propdef-scroll-marker-group": { "displayText": "scroll-marker-group", "export": true, "for_": [], "level": "5", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-5", "status": "local", "text": "scroll-marker-group", "type": "property", "url": "#propdef-scroll-marker-group" },
                "#scroll-marker": { "displayText": "scroll marker", "export": true, "for_": [], "level": "5", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-5", "status": "local", "text": "scroll marker", "type": "dfn", "url": "#scroll-marker" },
                "#scroll-marker-group": { "displayText": "scroll marker group", "export": true, "for_": [], "level": "5", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-5", "status": "local", "text": "scroll marker group", "type": "dfn", "url": "#scroll-marker-group" },
                "#scroll-marker-group-container": { "displayText": "scroll marker group container", "export": true, "for_": [], "level": "5", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-5", "status": "local", "text": "scroll marker group container", "type": "dfn", "url": "#scroll-marker-group-container" },
                "#scroll-target": { "displayText": "scroll target", "export": true, "for_": [], "level": "5", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-5", "status": "local", "text": "scroll target", "type": "dfn", "url": "#scroll-target" },
                "#selectordef-nth-fragment": { "displayText": "::nth-fragment()", "export": true, "for_": [], "level": "5", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-5", "status": "local", "text": "::nth-fragment()", "type": "selector", "url": "#selectordef-nth-fragment" },
                "#selectordef-scroll-button-scroll-button-direction": { "displayText": "::scroll-button( <scroll-button-direction> )", "export": true, "for_": [], "level": "5", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-5", "status": "local", "text": "::scroll-button( <scroll-button-direction> )", "type": "selector", "url": "#selectordef-scroll-button-scroll-button-direction" },
                "#selectordef-scroll-marker": { "displayText": "::scroll-marker", "export": true, "for_": [], "level": "5", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-5", "status": "local", "text": "::scroll-marker", "type": "selector", "url": "#selectordef-scroll-marker" },
                "#selectordef-scroll-marker-group": { "displayText": "::scroll-marker-group", "export": true, "for_": [], "level": "5", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-5", "status": "local", "text": "::scroll-marker-group", "type": "selector", "url": "#selectordef-scroll-marker-group" },
                "#selectordef-target-current": { "displayText": ":target-current", "export": true, "for_": [], "level": "5", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-5", "status": "local", "text": ":target-current", "type": "selector", "url": "#selectordef-target-current" },
                "#typedef-scroll-button-direction": { "displayText": "<scroll-button-direction>", "export": true, "for_": [], "level": "5", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-5", "status": "local", "text": "<scroll-button-direction>", "type": "type", "url": "#typedef-scroll-button-direction" },
                "#valdef-continue-fragments": { "displayText": "fragments", "export": true, "for_": ["continue"], "level": "5", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-5", "status": "local", "text": "fragments", "type": "value", "url": "#valdef-continue-fragments" },
                "#valdef-continue-overflow": { "displayText": "overflow", "export": true, "for_": ["continue"], "level": "5", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-5", "status": "local", "text": "overflow", "type": "value", "url": "#valdef-continue-overflow" },
                "#valdef-continue-paginate": { "displayText": "paginate", "export": true, "for_": ["continue"], "level": "5", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-5", "status": "local", "text": "paginate", "type": "value", "url": "#valdef-continue-paginate" },
                "#valdef-scroll-button-direction-prev": { "displayText": "prev", "export": true, "for_": ["::scroll-button()", "<scroll-button-direction>"], "level": "5", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-5", "status": "local", "text": "prev", "type": "value", "url": "#valdef-scroll-button-direction-prev" },
                "#valdef-scroll-marker-group-none": { "displayText": "none", "export": true, "for_": ["scroll-marker-group"], "level": "5", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-5", "status": "local", "text": "none", "type": "value", "url": "#valdef-scroll-marker-group-none" },
                "https://dom.spec.whatwg.org/#concept-tree-order": { "displayText": "tree order", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "tree order", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-tree-order" },
                "https://dom.spec.whatwg.org/#element": { "displayText": "Element", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "Element", "type": "interface", "url": "https://dom.spec.whatwg.org/#element" },
                "https://drafts.csswg.org/css-pseudo-4/#fully-styleable": { "displayText": "fully styleable pseudo-elements", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-pseudo", "spec": "css-pseudo-4", "status": "current", "text": "fully styleable pseudo-elements", "type": "dfn", "url": "https://drafts.csswg.org/css-pseudo-4/#fully-styleable" },
                "https://drafts.csswg.org/css-scroll-anchoring-1/#anchor-priority-candidates": { "displayText": "anchor priority candidate", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-scroll-anchoring", "spec": "css-scroll-anchoring-1", "status": "current", "text": "anchor priority candidate", "type": "dfn", "url": "https://drafts.csswg.org/css-scroll-anchoring-1/#anchor-priority-candidates" },
                "https://drafts.csswg.org/css2/#propdef-float": { "displayText": "float", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css", "spec": "css22", "status": "current", "text": "float", "type": "property", "url": "https://drafts.csswg.org/css2/#propdef-float" },
                "https://drafts.csswg.org/cssom-view-1/#determine-the-scroll-into-view-position": { "displayText": "determine the scroll-into-view position", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "cssom-view", "spec": "cssom-view-1", "status": "current", "text": "determine the scroll-into-view position", "type": "dfn", "url": "https://drafts.csswg.org/cssom-view-1/#determine-the-scroll-into-view-position" },
                "https://drafts.csswg.org/cssom-view-1/#scroll-a-target-into-view": { "displayText": "scroll a target into view", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "cssom-view", "spec": "cssom-view-1", "status": "current", "text": "scroll a target into view", "type": "dfn", "url": "https://drafts.csswg.org/cssom-view-1/#scroll-a-target-into-view" },
                "https://html.spec.whatwg.org/multipage/browsing-the-web.html#the-indicated-part-of-the-document": { "displayText": "indicated part", "export": false, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "indicated part", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/browsing-the-web.html#the-indicated-part-of-the-document" },
                "https://html.spec.whatwg.org/multipage/form-elements.html#the-button-element": { "displayText": "button", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "button", "type": "element", "url": "https://html.spec.whatwg.org/multipage/form-elements.html#the-button-element" },
                "https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2": { "displayText": "follow the hyperlink", "export": false, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "follow the hyperlink", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2" },
                "https://www.w3.org/TR/css-break-4/#fragmentation-container": { "displayText": "fragmentation container", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-break", "spec": "css-break-4", "status": "snapshot", "text": "fragmentation container", "type": "dfn", "url": "https://www.w3.org/TR/css-break-4/#fragmentation-container" },
                "https://www.w3.org/TR/css-cascade-5/#valdef-all-inherit": { "displayText": "inherit", "export": true, "for_": ["all"], "level": "5", "normative": true, "shortname": "css-cascade", "spec": "css-cascade-5", "status": "snapshot", "text": "inherit", "type": "value", "url": "https://www.w3.org/TR/css-cascade-5/#valdef-all-inherit" },
                "https://www.w3.org/TR/css-contain-2/#layout-containment": { "displayText": "layout containment", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css-contain", "spec": "css-contain-2", "status": "snapshot", "text": "layout containment", "type": "dfn", "url": "https://www.w3.org/TR/css-contain-2/#layout-containment" },
                "https://www.w3.org/TR/css-content-3/#propdef-content": { "displayText": "content", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-content", "spec": "css-content-3", "status": "snapshot", "text": "content", "type": "property", "url": "https://www.w3.org/TR/css-content-3/#propdef-content" },
                "https://www.w3.org/TR/css-content-3/#valdef-content-none": { "displayText": "none", "export": true, "for_": ["content"], "level": "3", "normative": true, "shortname": "css-content", "spec": "css-content-3", "status": "snapshot", "text": "none", "type": "value", "url": "https://www.w3.org/TR/css-content-3/#valdef-content-none" },
                "https://www.w3.org/TR/css-display-3/#inner-display-type": { "displayText": "inner display type", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-display", "spec": "css-display-3", "status": "snapshot", "text": "inner display type", "type": "dfn", "url": "https://www.w3.org/TR/css-display-3/#inner-display-type" },
                "https://www.w3.org/TR/css-display-3/#propdef-display": { "displayText": "display", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-display", "spec": "css-display-3", "status": "snapshot", "text": "display", "type": "property", "url": "https://www.w3.org/TR/css-display-3/#propdef-display" },
                "https://www.w3.org/TR/css-multicol-1/#overflow-columns": { "displayText": "overflow columns", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-multicol", "spec": "css-multicol-1", "status": "snapshot", "text": "overflow columns", "type": "dfn", "url": "https://www.w3.org/TR/css-multicol-1/#overflow-columns" },
                "https://www.w3.org/TR/css-overflow-3/#propdef-overflow": { "displayText": "overflow", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-3", "status": "snapshot", "text": "overflow", "type": "property", "url": "https://www.w3.org/TR/css-overflow-3/#propdef-overflow" },
                "https://www.w3.org/TR/css-overflow-3/#scroll-container": { "displayText": "scroll container", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-3", "status": "snapshot", "text": "scroll container", "type": "dfn", "url": "https://www.w3.org/TR/css-overflow-3/#scroll-container" },
                "https://www.w3.org/TR/css-overflow-3/#scrollable-overflow-region": { "displayText": "scrollable overflow area", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-3", "status": "snapshot", "text": "scrollable overflow area", "type": "dfn", "url": "https://www.w3.org/TR/css-overflow-3/#scrollable-overflow-region" },
                "https://www.w3.org/TR/css-overflow-3/#scrollport": { "displayText": "scrollport", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-3", "status": "snapshot", "text": "scrollport", "type": "dfn", "url": "https://www.w3.org/TR/css-overflow-3/#scrollport" },
                "https://www.w3.org/TR/css-overflow-4/#propdef-continue": { "displayText": "continue", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-4", "status": "snapshot", "text": "continue", "type": "property", "url": "https://www.w3.org/TR/css-overflow-4/#propdef-continue" },
                "https://www.w3.org/TR/css-overflow-4/#propdef-max-lines": { "displayText": "max-lines", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-4", "status": "snapshot", "text": "max-lines", "type": "property", "url": "https://www.w3.org/TR/css-overflow-4/#propdef-max-lines" },
                "https://www.w3.org/TR/css-overflow-4/#valdef-continue-auto": { "displayText": "auto", "export": true, "for_": ["continue"], "level": "4", "normative": true, "shortname": "css-overflow", "spec": "css-overflow-4", "status": "snapshot", "text": "auto", "type": "value", "url": "https://www.w3.org/TR/css-overflow-4/#valdef-continue-auto" },
                "https://www.w3.org/TR/css-position-3/#propdef-position": { "displayText": "position", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-position", "spec": "css-position-3", "status": "snapshot", "text": "position", "type": "property", "url": "https://www.w3.org/TR/css-position-3/#propdef-position" },
                "https://www.w3.org/TR/css-pseudo-4/#selectordef-after": { "displayText": "::after", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-pseudo", "spec": "css-pseudo-4", "status": "snapshot", "text": "::after", "type": "selector", "url": "https://www.w3.org/TR/css-pseudo-4/#selectordef-after" },
                "https://www.w3.org/TR/css-pseudo-4/#selectordef-before": { "displayText": "::before", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-pseudo", "spec": "css-pseudo-4", "status": "snapshot", "text": "::before", "type": "selector", "url": "https://www.w3.org/TR/css-pseudo-4/#selectordef-before" },
                "https://www.w3.org/TR/css-pseudo-4/#selectordef-first-letter": { "displayText": "::first-letter", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-pseudo", "spec": "css-pseudo-4", "status": "snapshot", "text": "::first-letter", "type": "selector", "url": "https://www.w3.org/TR/css-pseudo-4/#selectordef-first-letter" },
                "https://www.w3.org/TR/css-pseudo-4/#selectordef-first-line": { "displayText": "::first-line", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-pseudo", "spec": "css-pseudo-4", "status": "snapshot", "text": "::first-line", "type": "selector", "url": "https://www.w3.org/TR/css-pseudo-4/#selectordef-first-line" },
                "https://www.w3.org/TR/css-regions-1/#css-region": { "displayText": "CSS Region", "export": false, "for_": [], "level": "1", "normative": true, "shortname": "css-regions", "spec": "css-regions-1", "status": "snapshot", "text": "css region", "type": "dfn", "url": "https://www.w3.org/TR/css-regions-1/#css-region" },
                "https://www.w3.org/TR/css-regions-1/#propdef-region-fragment": { "displayText": "region-fragment", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-regions", "spec": "css-regions-1", "status": "snapshot", "text": "region-fragment", "type": "property", "url": "https://www.w3.org/TR/css-regions-1/#propdef-region-fragment" },
                "https://www.w3.org/TR/css-regions-1/#region-chain": { "displayText": "region chain", "export": false, "for_": [], "level": "1", "normative": true, "shortname": "css-regions", "spec": "css-regions-1", "status": "snapshot", "text": "region chain", "type": "dfn", "url": "https://www.w3.org/TR/css-regions-1/#region-chain" },
                "https://www.w3.org/TR/css-scroll-snap-1/#intended-direction-and-end-position": { "displayText": "intended direction and end position", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-scroll-snap", "spec": "css-scroll-snap-1", "status": "snapshot", "text": "intended direction and end position", "type": "dfn", "url": "https://www.w3.org/TR/css-scroll-snap-1/#intended-direction-and-end-position" },
                "https://www.w3.org/TR/css-sizing-3/#propdef-height": { "displayText": "height", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-sizing", "spec": "css-sizing-3", "status": "snapshot", "text": "height", "type": "property", "url": "https://www.w3.org/TR/css-sizing-3/#propdef-height" },
                "https://www.w3.org/TR/css-ui-4/#propdef-appearance": { "displayText": "appearance", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-ui", "spec": "css-ui-4", "status": "snapshot", "text": "appearance", "type": "property", "url": "https://www.w3.org/TR/css-ui-4/#propdef-appearance" },
                "https://www.w3.org/TR/css-values-4/#comb-one": { "displayText": "|", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-values", "spec": "css-values-4", "status": "snapshot", "text": "|", "type": "grammar", "url": "https://www.w3.org/TR/css-values-4/#comb-one" },
                "https://www.w3.org/TR/css-writing-modes-4/#block-end": { "displayText": "block-end", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-writing-modes", "spec": "css-writing-modes-4", "status": "snapshot", "text": "block-end", "type": "dfn", "url": "https://www.w3.org/TR/css-writing-modes-4/#block-end" },
                "https://www.w3.org/TR/css-writing-modes-4/#block-start": { "displayText": "block-start", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-writing-modes", "spec": "css-writing-modes-4", "status": "snapshot", "text": "block-start", "type": "dfn", "url": "https://www.w3.org/TR/css-writing-modes-4/#block-start" },
                "https://www.w3.org/TR/css-writing-modes-4/#flow-relative": { "displayText": "flow-relative", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-writing-modes", "spec": "css-writing-modes-4", "status": "snapshot", "text": "flow-relative", "type": "dfn", "url": "https://www.w3.org/TR/css-writing-modes-4/#flow-relative" },
                "https://www.w3.org/TR/css-writing-modes-4/#inline-end": { "displayText": "inline-end", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-writing-modes", "spec": "css-writing-modes-4", "status": "snapshot", "text": "inline-end", "type": "dfn", "url": "https://www.w3.org/TR/css-writing-modes-4/#inline-end" },
                "https://www.w3.org/TR/css-writing-modes-4/#inline-start": { "displayText": "inline-start", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-writing-modes", "spec": "css-writing-modes-4", "status": "snapshot", "text": "inline-start", "type": "dfn", "url": "https://www.w3.org/TR/css-writing-modes-4/#inline-start" },
                "https://www.w3.org/TR/css-writing-modes-4/#writing-mode": { "displayText": "writing mode", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-writing-modes", "spec": "css-writing-modes-4", "status": "snapshot", "text": "writing mode", "type": "dfn", "url": "https://www.w3.org/TR/css-writing-modes-4/#writing-mode" },
                "https://www.w3.org/TR/selectors-4/#disabled-pseudo": { "displayText": ":disabled", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "selectors", "spec": "selectors-4", "status": "snapshot", "text": ":disabled", "type": "selector", "url": "https://www.w3.org/TR/selectors-4/#disabled-pseudo" },
                "https://www.w3.org/TR/selectors-4/#originating-element": { "displayText": "originating element", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "selectors", "spec": "selectors-4", "status": "snapshot", "text": "originating element", "type": "dfn", "url": "https://www.w3.org/TR/selectors-4/#originating-element" },
                "https://www.w3.org/TR/selectors-4/#selector-subject": { "displayText": "subject", "export": true, "for_": ["selector"], "level": "4", "normative": true, "shortname": "selectors", "spec": "selectors-4", "status": "snapshot", "text": "subject", "type": "dfn", "url": "https://www.w3.org/TR/selectors-4/#selector-subject" },
            };

            function mkRefHint(link, ref) {
                const linkText = link.textContent;
                let dfnTextElements = '';
                if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
                    // Give the original term if it's being displayed in a different way.
                    // But allow casing differences, they're insignificant.
                    dfnTextElements =
                        mk.li({},
                            mk.b({}, "Term: "),
                            mk.span({}, ref.displayText)
                        );
                }
                const forList = ref.for_;
                let forListElements;
                if (forList.length == 0) {
                    forListElements = [];
                } else if (forList.length == 1) {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.span({}, forList[0]),
                    );
                } else {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.ul({},
                            ...forList.map(forItem =>
                                mk.li({},
                                    mk.span({}, forItem)
                                ),
                            ),
                        ),
                    );
                }
                const url = ref.url;
                const safeUrl = encodeURIComponent(url);
                const hintPanel = mk.aside({
                    class: "ref-hint",
                    id: `ref-hint-for-${safeUrl}`,
                    "data-for": url,
                    "aria-labelled-by": `ref-hint-for-${safeUrl}`,
                },
                    mk.ul({},
                        dfnTextElements,
                        mk.li({},
                            mk.b({}, "URL: "),
                            mk.a({ href: url, class: "ref" }, url),
                        ),
                        mk.li({},
                            mk.b({}, "Type: "),
                            mk.span({}, `${ref.type}`),
                        ),
                        mk.li({},
                            mk.b({}, "Spec: "),
                            mk.span({}, `${ref.spec ? ref.spec : ''}`),
                        ),
                        forListElements
                    ),
                );
                hintPanel.forLink = link;
                setupRefHintEventListeners(link, hintPanel);
                return hintPanel;
            }

            function hideAllRefHints() {
                queryAll(".ref-hint").forEach(el => hideRefHint(el));
            }

            function hideRefHint(refHint) {
                const link = refHint.forLink;
                link.setAttribute("aria-expanded", "false");
                if (refHint.teardownEventListeners) {
                    refHint.teardownEventListeners();
                }
                refHint.remove();
            }

            function showRefHint(link) {
                if (link.classList.contains("dfn-link")) return;
                const url = link.getAttribute("href");
                const ref = refsData[url];
                if (!ref) return;

                hideAllRefHints(); // Only display one at this time.

                const refHint = mkRefHint(link, ref);
                append(document.body, refHint);
                link.setAttribute("aria-expanded", "true");
                positionRefHint(refHint);
            }

            function setupRefHintEventListeners(link, refHint) {
                if (refHint.teardownEventListeners) return;
                // Add event handlers to hide the refHint after the user moves away
                // from both the link and refHint, if not hovering either within one second.
                let timeout = null;
                const startHidingRefHint = (event) => {
                    if (timeout) {
                        clearTimeout(timeout);
                    }
                    timeout = setTimeout(() => {
                        hideRefHint(refHint);
                    }, 1000);
                }
                const resetHidingRefHint = (event) => {
                    if (timeout) clearTimeout(timeout);
                    timeout = null;
                };
                link.addEventListener("mouseleave", startHidingRefHint);
                link.addEventListener("mouseenter", resetHidingRefHint);
                link.addEventListener("blur", startHidingRefHint);
                link.addEventListener("focus", resetHidingRefHint);
                refHint.addEventListener("mouseleave", startHidingRefHint);
                refHint.addEventListener("mouseenter", resetHidingRefHint);
                refHint.addEventListener("blur", startHidingRefHint);
                refHint.addEventListener("focus", resetHidingRefHint);

                refHint.teardownEventListeners = () => {
                    // remove event listeners
                    resetHidingRefHint();
                    link.removeEventListener("mouseleave", startHidingRefHint);
                    link.removeEventListener("mouseenter", resetHidingRefHint);
                    link.removeEventListener("blur", startHidingRefHint);
                    link.removeEventListener("focus", resetHidingRefHint);
                    refHint.removeEventListener("mouseleave", startHidingRefHint);
                    refHint.removeEventListener("mouseenter", resetHidingRefHint);
                    refHint.removeEventListener("blur", startHidingRefHint);
                    refHint.removeEventListener("focus", resetHidingRefHint);
                };
            }

            function positionRefHint(refHint) {
                const link = refHint.forLink;
                const linkPos = getBounds(link);
                refHint.style.top = linkPos.bottom + "px";
                refHint.style.left = linkPos.left + "px";

                const panelPos = refHint.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
                    refHint.style.left = newLeft + "px";
                }
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function showRefHintListener(e) {
                // If the target isn't in a link (or is a link),
                // just ignore it.
                let link = e.target.closest("a");
                if (!link) return;

                // If the target is in a ref-hint panel
                // (aka a link in the already-open one),
                // also just ignore it.
                if (link.closest(".ref-hint")) return;

                // Otherwise, show the panel for the link.
                showRefHint(link);
            }

            function hideAllHintsListener(e) {
                // If the click is inside a ref-hint panel, ignore it.
                if (e.target.closest(".ref-hint")) return;
                // Otherwise, close all the current panels.
                hideAllRefHints();
            }

            document.addEventListener("DOMContentLoaded", () => {
                document.body.addEventListener("mousedown", showRefHintListener);
                document.body.addEventListener("focus", showRefHintListener);

                document.body.addEventListener("click", hideAllHintsListener);
            });

            window.addEventListener("resize", () => {
                // Hide any open ref hint.
                hideAllRefHints();
            });
        }
    </script>
    <script>/* Boilerplate: script-var-click-highlighting */
        "use strict";
        {
            /*
            Color-choosing design:
            
            * Colors are ordered by goodness.
            * On clicking a var, give it the earliest color
                with the lowest usage in the algorithm.
            * On re-clicking, re-use the var's most recent color
                if that's not currently being used elsewhere.
            */

            const COLOR_COUNT = 7;

            document.addEventListener("click", e => {
                if (e.target.nodeName == "VAR") {
                    highlightSameAlgoVars(e.target);
                }
            });

            function highlightSameAlgoVars(v) {
                // Find the algorithm container.
                let algoContainer = findAlgoContainer(v);

                // Not highlighting document-global vars,
                // too likely to be unrelated.
                if (algoContainer == null) return;

                const varName = nameFromVar(v);
                if (!v.hasAttribute("data-var-color")) {
                    const newColor = chooseHighlightColor(algoContainer, v);
                    for (const el of algoContainer.querySelectorAll("var")) {
                        if (nameFromVar(el) == varName) {
                            el.setAttribute("data-var-color", newColor);
                            el.setAttribute("data-var-last-color", newColor);
                        }
                    }
                } else {
                    for (const el of algoContainer.querySelectorAll("var")) {
                        if (nameFromVar(el) == varName) {
                            el.removeAttribute("data-var-color");
                        }
                    }
                }
            }
            function findAlgoContainer(el) {
                while (el != document.body) {
                    if (el.hasAttribute("data-algorithm")) return el;
                    el = el.parentNode;
                }
                return null;
            }
            function nameFromVar(el) {
                return el.textContent.replace(/(\s|\xa0)+/g, " ").trim();
            }
            function colorCountsFromContainer(container) {
                const namesFromColor = Array.from({ length: COLOR_COUNT }, x => new Set());
                for (let v of container.querySelectorAll("var[data-var-color]")) {
                    let color = +v.getAttribute("data-var-color");
                    namesFromColor[color].add(nameFromVar(v));
                }

                return namesFromColor.map(x => x.size);
            }
            function leastUsedColor(colors) {
                // Find the earliest color with the lowest count.
                let minCount = Infinity;
                let minColor = null;
                for (var i = 0; i < colors.length; i++) {
                    if (colors[i] < minCount) {
                        minColor = i;
                        minCount = colors[i];
                    }
                }
                return minColor;
            }
            function chooseHighlightColor(container, v) {
                const colorCounts = colorCountsFromContainer(container);
                if (v.hasAttribute("data-var-last-color")) {
                    let color = +v.getAttribute("data-var-last-color");
                    if (colorCounts[color] == 0) return color;
                }
                return leastUsedColor(colorCounts);
            }
        }
    </script>