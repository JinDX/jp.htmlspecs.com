<!doctype html>
<html lang="ja-JP">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>CSS グリッドレイアウトモジュール レベル 3</title>
    <meta content="WD" name="w3c-status">
    <meta content="Bikeshed version 73459e519, updated Fri Feb 7 15:39:03 2025 -0800" name="generator">
    <link href="https://www.w3.org/TR/css-grid-3/" rel="canonical">
    <meta content="916308452cfa4b3f70d97ae16374fd23c232d1bc" name="revision">
    <meta content="dark light" name="color-scheme">
    <style>
        :is(section, p).option {
            border-right: 1em double;
            padding-right: 1em;
        }

        :is(section, p).option.grid {
            border-right-color: #be2596;
        }

        :is(section, p).option.masonry {
            border-right-color: #96be25;
        }

        :is(span, a).option {
            font-weight: bold;
        }

        :is(span, a).option * {
            color: inherit;
        }

        :is(span, a).option.grid {
            color: #be2596;
        }

        :is(span, a).option.masonry {
            color: #658118
        }
    </style>
    <style>
        /* Boilerplate: style-autolinks */
        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --selflink-text: black;
                --selflink-bg: silver;
                --selflink-hover-text: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-colors */
        /* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
        :root {
            color-scheme: light dark;

            --text: black;
            --bg: white;

            --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

            --logo-bg: #1a5e9a;
            --logo-active-bg: #c00;
            --logo-text: white;

            --tocnav-normal-text: #707070;
            --tocnav-normal-bg: var(--bg);
            --tocnav-hover-text: var(--tocnav-normal-text);
            --tocnav-hover-bg: #f8f8f8;
            --tocnav-active-text: #c00;
            --tocnav-active-bg: var(--tocnav-normal-bg);

            --tocsidebar-text: var(--text);
            --tocsidebar-bg: #f7f8f9;
            --tocsidebar-shadow: rgba(0, 0, 0, .1);
            --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

            --toclink-text: var(--text);
            --toclink-underline: #3980b5;
            --toclink-visited-text: var(--toclink-text);
            --toclink-visited-underline: #054572;

            --heading-text: #005a9c;

            --hr-text: var(--text);

            --algo-border: #def;

            --del-text: red;
            --del-bg: transparent;
            --ins-text: #080;
            --ins-bg: transparent;

            --a-normal-text: #034575;
            --a-normal-underline: #bbb;
            --a-visited-text: var(--a-normal-text);
            --a-visited-underline: #707070;
            --a-hover-bg: rgba(75%, 75%, 75%, .25);
            --a-active-text: #c00;
            --a-active-underline: #c00;

            --blockquote-border: silver;
            --blockquote-bg: transparent;
            --blockquote-text: currentcolor;

            --issue-border: #e05252;
            --issue-bg: #fbe9e9;
            --issue-text: var(--text);
            --issueheading-text: #831616;

            --example-border: #e0cb52;
            --example-bg: #fcfaee;
            --example-text: var(--text);
            --exampleheading-text: #574b0f;

            --note-border: #52e052;
            --note-bg: #e9fbe9;
            --note-text: var(--text);
            --noteheading-text: hsl(120, 70%, 30%);
            --notesummary-underline: silver;

            --assertion-border: #aaa;
            --assertion-bg: #eee;
            --assertion-text: black;

            --advisement-border: orange;
            --advisement-bg: #fec;
            --advisement-text: var(--text);
            --advisementheading-text: #b35f00;

            --warning-border: red;
            --warning-bg: hsla(40, 100%, 50%, 0.95);
            --warning-text: var(--text);

            --amendment-border: #330099;
            --amendment-bg: #F5F0FF;
            --amendment-text: var(--text);
            --amendmentheading-text: #220066;

            --def-border: #8ccbf2;
            --def-bg: #def;
            --def-text: var(--text);
            --defrow-border: #bbd7e9;

            --datacell-border: silver;

            --indexinfo-text: #707070;

            --indextable-hover-text: black;
            --indextable-hover-bg: #f7f8f9;

            --outdatedspec-bg: rgba(0, 0, 0, .5);
            --outdatedspec-text: black;
            --outdated-bg: maroon;
            --outdated-text: white;
            --outdated-shadow: red;

            --editedrec-bg: darkorange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --text: #ddd;
                --bg: black;

                --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

                --logo-bg: #1a5e9a;
                --logo-active-bg: #c00;
                --logo-text: white;

                --tocnav-normal-text: #999;
                --tocnav-normal-bg: var(--bg);
                --tocnav-hover-text: var(--tocnav-normal-text);
                --tocnav-hover-bg: #080808;
                --tocnav-active-text: #f44;
                --tocnav-active-bg: var(--tocnav-normal-bg);

                --tocsidebar-text: var(--text);
                --tocsidebar-bg: #080808;
                --tocsidebar-shadow: rgba(255, 255, 255, .1);
                --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

                --toclink-text: var(--text);
                --toclink-underline: #6af;
                --toclink-visited-text: var(--toclink-text);
                --toclink-visited-underline: #054572;

                --heading-text: #8af;

                --hr-text: var(--text);

                --algo-border: #456;

                --del-text: #f44;
                --del-bg: transparent;
                --ins-text: #4a4;
                --ins-bg: transparent;

                --a-normal-text: #6af;
                --a-normal-underline: #555;
                --a-visited-text: var(--a-normal-text);
                --a-visited-underline: var(--a-normal-underline);
                --a-hover-bg: rgba(25%, 25%, 25%, .2);
                --a-active-text: #f44;
                --a-active-underline: var(--a-active-text);

                --borderedblock-bg: rgba(255, 255, 255, .05);

                --blockquote-border: silver;
                --blockquote-bg: var(--borderedblock-bg);
                --blockquote-text: currentcolor;

                --issue-border: #e05252;
                --issue-bg: var(--borderedblock-bg);
                --issue-text: var(--text);
                --issueheading-text: hsl(0deg, 70%, 70%);

                --example-border: hsl(50deg, 90%, 60%);
                --example-bg: var(--borderedblock-bg);
                --example-text: var(--text);
                --exampleheading-text: hsl(50deg, 70%, 70%);

                --note-border: hsl(120deg, 100%, 35%);
                --note-bg: var(--borderedblock-bg);
                --note-text: var(--text);
                --noteheading-text: hsl(120, 70%, 70%);
                --notesummary-underline: silver;

                --assertion-border: #444;
                --assertion-bg: var(--borderedblock-bg);
                --assertion-text: var(--text);

                --advisement-border: orange;
                --advisement-bg: #222218;
                --advisement-text: var(--text);
                --advisementheading-text: #f84;

                --warning-border: red;
                --warning-bg: hsla(40, 100%, 20%, 0.95);
                --warning-text: var(--text);

                --amendment-border: #330099;
                --amendment-bg: #080010;
                --amendment-text: var(--text);
                --amendmentheading-text: #cc00ff;

                --def-border: #8ccbf2;
                --def-bg: #080818;
                --def-text: var(--text);
                --defrow-border: #136;

                --datacell-border: silver;

                --indexinfo-text: #aaa;

                --indextable-hover-text: var(--text);
                --indextable-hover-bg: #181818;

                --outdatedspec-bg: rgba(255, 255, 255, .5);
                --outdatedspec-text: black;
                --outdated-bg: maroon;
                --outdated-text: white;
                --outdated-shadow: red;

                --editedrec-bg: darkorange;
            }

            /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
            img {
                background: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-counters */
        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* Boilerplate: style-dfn-panel */
        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
            --dfnpanel-target-bg: #ffc;
            --dfnpanel-target-outline: orange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dfnpanel-bg: #222;
                --dfnpanel-text: var(--text);
                --dfnpanel-target-bg: #333;
                --dfnpanel-target-outline: silver;
            }
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel a:focus {
            outline: 5px auto Highlight;
            outline: 5px auto -webkit-focus-ring-color;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0 0 0 1em;
            list-style: none;
        }

        .dfn-panel li a {
            max-width: calc(300px - 1.5em - 1em);
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: 8px;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
            transition: left 1s ease-out, bottom 1s ease-out;
        }

        .dfn-panel .link-item:hover {
            text-decoration: underline;
        }

        .dfn-panel .link-item .copy-icon {
            opacity: 0;
        }

        .dfn-panel .link-item:hover .copy-icon,
        .dfn-panel .link-item .copy-icon:focus {
            opacity: 1;
        }

        .dfn-panel .copy-icon {
            display: inline-block;
            margin-right: 0.5em;
            width: 0.85em;
            height: 1em;
            border-radius: 3px;
            background-color: #ccc;
            cursor: pointer;
        }

        .dfn-panel .copy-icon .icon {
            width: 100%;
            height: 100%;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .dfn-panel .copy-icon .icon::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 1px solid black;
            background-color: #ccc;
            opacity: 0.25;
            transform: translate(3px, -3px);
        }

        .dfn-panel .copy-icon:active .icon::before {
            opacity: 1;
        }

        .dfn-paneled[role="button"] {
            cursor: help;
        }

        .highlighted {
            animation: target-fade 3s;
        }

        @keyframes target-fade {
            from {
                background-color: var(--dfnpanel-target-bg);
                outline: 5px solid var(--dfnpanel-target-outline);
            }

            to {
                color: var(--a-normal-text);
                background-color: transparent;
                outline: transparent;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-issues */
        a[href].issue-return {
            float: right;
            float: inline-end;
            color: var(--issueheading-text);
            font-weight: bold;
            text-decoration: none;
        }
    </style>
    <style>
        /* Boilerplate: style-md-lists */
        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* Boilerplate: style-ref-hints */
        :root {
            --ref-hint-bg: #ddd;
            --ref-hint-text: var(--text);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --ref-hint-bg: #222;
                --ref-hint-text: var(--text);
            }
        }

        .ref-hint {
            display: inline-block;
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.5em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--ref-hint-bg);
            color: var(--ref-hint-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .ref-hint * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .ref-hint ul {
            padding: 0 0 0 1em;
            list-style: none;
        }
    </style>
    <style>
        /* Boilerplate: style-selflinks */
        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        .example>a.self-link,
        .note>a.self-link,
        .issue>a.self-link {
            /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
            left: auto;
            right: 0;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* Boilerplate: style-syntax-highlighting */
        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        .highlight:not(.idl) {
            background: rgba(0, 0, 0, .03);
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */

        @media (prefers-color-scheme: dark) {
            .highlight:not(.idl) {
                background: rgba(255, 255, 255, .05);
            }

            c-[a] {
                color: #d33682
            }

            /* Keyword.Declaration */
            c-[b] {
                color: #d33682
            }

            /* Keyword.Type */
            c-[c] {
                color: #2aa198
            }

            /* Comment */
            c-[d] {
                color: #2aa198
            }

            /* Comment.Multiline */
            c-[e] {
                color: #268bd2
            }

            /* Name.Attribute */
            c-[f] {
                color: #b58900
            }

            /* Name.Tag */
            c-[g] {
                color: #cb4b16
            }

            /* Name.Variable */
            c-[k] {
                color: #d33682
            }

            /* Keyword */
            c-[l] {
                color: #657b83
            }

            /* Literal */
            c-[m] {
                color: #657b83
            }

            /* Literal.Number */
            c-[n] {
                color: #268bd2
            }

            /* Name */
            c-[o] {
                color: #657b83
            }

            /* Operator */
            c-[p] {
                color: #657b83
            }

            /* Punctuation */
            c-[s] {
                color: #6c71c4
            }

            /* Literal.String */
            c-[t] {
                color: #6c71c4
            }

            /* Literal.String.Single */
            c-[u] {
                color: #6c71c4
            }

            /* Literal.String.Double */
            c-[ch] {
                color: #2aa198
            }

            /* Comment.Hashbang */
            c-[cp] {
                color: #2aa198
            }

            /* Comment.Preproc */
            c-[cpf] {
                color: #2aa198
            }

            /* Comment.PreprocFile */
            c-[c1] {
                color: #2aa198
            }

            /* Comment.Single */
            c-[cs] {
                color: #2aa198
            }

            /* Comment.Special */
            c-[kc] {
                color: #d33682
            }

            /* Keyword.Constant */
            c-[kn] {
                color: #d33682
            }

            /* Keyword.Namespace */
            c-[kp] {
                color: #d33682
            }

            /* Keyword.Pseudo */
            c-[kr] {
                color: #d33682
            }

            /* Keyword.Reserved */
            c-[ld] {
                color: #657b83
            }

            /* Literal.Date */
            c-[nc] {
                color: #268bd2
            }

            /* Name.Class */
            c-[no] {
                color: #268bd2
            }

            /* Name.Constant */
            c-[nd] {
                color: #268bd2
            }

            /* Name.Decorator */
            c-[ni] {
                color: #268bd2
            }

            /* Name.Entity */
            c-[ne] {
                color: #268bd2
            }

            /* Name.Exception */
            c-[nf] {
                color: #268bd2
            }

            /* Name.Function */
            c-[nl] {
                color: #268bd2
            }

            /* Name.Label */
            c-[nn] {
                color: #268bd2
            }

            /* Name.Namespace */
            c-[py] {
                color: #268bd2
            }

            /* Name.Property */
            c-[ow] {
                color: #657b83
            }

            /* Operator.Word */
            c-[mb] {
                color: #657b83
            }

            /* Literal.Number.Bin */
            c-[mf] {
                color: #657b83
            }

            /* Literal.Number.Float */
            c-[mh] {
                color: #657b83
            }

            /* Literal.Number.Hex */
            c-[mi] {
                color: #657b83
            }

            /* Literal.Number.Integer */
            c-[mo] {
                color: #657b83
            }

            /* Literal.Number.Oct */
            c-[sa] {
                color: #6c71c4
            }

            /* Literal.String.Affix */
            c-[sb] {
                color: #6c71c4
            }

            /* Literal.String.Backtick */
            c-[sc] {
                color: #6c71c4
            }

            /* Literal.String.Char */
            c-[dl] {
                color: #6c71c4
            }

            /* Literal.String.Delimiter */
            c-[sd] {
                color: #6c71c4
            }

            /* Literal.String.Doc */
            c-[se] {
                color: #6c71c4
            }

            /* Literal.String.Escape */
            c-[sh] {
                color: #6c71c4
            }

            /* Literal.String.Heredoc */
            c-[si] {
                color: #6c71c4
            }

            /* Literal.String.Interpol */
            c-[sx] {
                color: #6c71c4
            }

            /* Literal.String.Other */
            c-[sr] {
                color: #6c71c4
            }

            /* Literal.String.Regex */
            c-[ss] {
                color: #6c71c4
            }

            /* Literal.String.Symbol */
            c-[fm] {
                color: #268bd2
            }

            /* Name.Function.Magic */
            c-[vc] {
                color: #cb4b16
            }

            /* Name.Variable.Class */
            c-[vg] {
                color: #cb4b16
            }

            /* Name.Variable.Global */
            c-[vi] {
                color: #cb4b16
            }

            /* Name.Variable.Instance */
            c-[vm] {
                color: #cb4b16
            }

            /* Name.Variable.Magic */
            c-[il] {
                color: #657b83
            }

            /* Literal.Number.Integer.Long */
        }
    </style>
    <style>
        /* Boilerplate: style-wpt */
        :root {
            --wpt-border: hsl(0, 0%, 60%);
            --wpt-bg: hsl(0, 0%, 95%);
            --wpt-text: var(--text);
            --wptheading-text: hsl(0, 0%, 30%);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --wpt-border: hsl(0, 0%, 30%);
                --wpt-bg: var(--borderedblock-bg);
                --wpt-text: var(--text);
                --wptheading-text: hsl(0, 0%, 60%);
            }
        }

        .wpt-tests-block {
            list-style: none;
            border-left: .5em solid var(--wpt-border);
            background: var(--wpt-bg);
            color: var(--wpt-text);
            margin: 1em auto;
            padding: .5em;
        }

        .wpt-tests-block summary {
            color: var(--wptheading-text);
            font-weight: normal;
            text-transform: uppercase;
        }

        .wpt-tests-block summary::marker {
            color: var(--wpt-border);
        }

        .wpt-tests-block summary:hover::marker {
            color: var(--wpt-text);
        }

        /*
   The only content  of a wpt test block in its closed state is the <summary>,
   which contains the word TESTS,
   and that is absolutely positioned.
   In that closed state, wpt test blocks are styled
   to have a top margin whose height is exactly equal
   to the height of the absolutely positioned <summary>,
   and no other background/padding/margin/border.
   The wpt test block elements will therefore allow the maring
   of the previous/next block elements
   to collapse through them;
   if this combined margin would be larger than its own top margin,
   it stays as is,
   and therefore the pre-existing vertical rhythm of the document is undisturbed.
   If that combined margin would be smaller, it is grown to that size.
   This means that the wpt test block ensures
   that there's always enough vertical space to insert the summary,
   without adding more than is needed.
*/
        .wpt-tests-block:not([open]) {
            padding: 0;
            border: none;
            background: none;
            font-size: 0.75em;
            line-height: 1;
            position: relative;
            margin: 1em 0 0;
        }

        .wpt-tests-block:not([open]) summary {
            position: absolute;
            right: 0;
            bottom: 0;
        }

        /*
   It is possible that both the last child of a block element
   and the block element itself
   would be annotated with a <wpt> block each.
   If the block element has a padding or a border,
   that's fine, but otherwise
   the bottom margin of the block and of its last child would collapse
   and both <wpt> elements would overlap, being both placed there.
   To avoid that, add 1px of padding to the <wpt> element annotating the last child
   to prevent the bottom margin of the block and of its last child from collapsing
   (and as much negative margin,
   as wel only want to prevent margin collapsing,
   but are not trying to actually take more space).
*/
        .wpt-tests-block:not([open]):last-child {
            padding-bottom: 1px;
            margin-bottom: -1px;
        }

        /*
   Exception to the previous rule:
   don't do that in non-last list items,
   because it's not necessary,
   and would therefore consume more space than strictly needed.
   Lists must have list items as children, not <wpt> elements,
   so a <wpt> element cannot be a sibling of a list item,
   and the collision that the previous rule avoids cannot happen.
*/
        li:not(:last-child)>.wpt-tests-block:not([open]):last-child,
        dd:not(:last-child)>.wpt-tests-block:not([open]):last-child {
            padding-bottom: 0;
            margin-bottom: 0;
        }

        .wpt-tests-block:not([open]):not(:hover) {
            opacity: 0.5;
        }

        .wpt-tests-list {
            list-style: none;
            display: grid;
            margin: 0;
            padding: 0;
            grid-template-columns: 1fr max-content auto auto;
            grid-column-gap: .5em;
        }

        .wpt-tests-block hr:last-child {
            display: none;
        }

        .wpt-test {
            display: contents;
        }

        .wpt-test>a {
            text-decoration: underline;
            border: none;
        }

        .wpt-test>.wpt-name {
            grid-column: 1;
        }

        .wpt-test>.wpt-results {
            grid-column: 2;
        }

        .wpt-test>.wpt-live {
            grid-column: 3;
        }

        .wpt-test>.wpt-source {
            grid-column: 4;
        }

        .wpt-test>.wpt-results {
            display: flex;
            gap: .1em;
        }

        .wpt-test .wpt-result {
            display: inline-block;
            height: 1em;
            width: 1em;
            border-radius: 50%;
            position: relative;
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD" rel="stylesheet">
    <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet"
        type="text/css">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
        <h1 class="p-name no-ref" id="title">CSSグリッドレイアウトモジュール レベル3</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types/#WD">W3C作業草案</a>、<time class="dt-updated"
                datetime="2025-02-07">2025年2月7日</time></p>
        <details open>
            <summary>この文書の詳細</summary>
            <div data-fill-with="spec-metadata">
                <dl>
                    <dt>このバージョン:
                    <dd><a class="u-url"
                            href="https://www.w3.org/TR/2025/WD-css-grid-3-20250207/">https://www.w3.org/TR/2025/WD-css-grid-3-20250207/</a>
                    <dt>最新公開バージョン:
                    <dd><a href="https://www.w3.org/TR/css-grid-3/">https://www.w3.org/TR/css-grid-3/</a>
                    <dt>編集者草案:
                    <dd><a href="https://drafts.csswg.org/css-grid-3/">https://drafts.csswg.org/css-grid-3/</a>
                    <dt>履歴:
                    <dd><a class="u-url"
                            href="https://www.w3.org/standards/history/css-grid-3/">https://www.w3.org/standards/history/css-grid-3/</a>
                    <dt>フィードバック:
                    <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-grid-3">CSSWG課題リポジトリ</a>
                    <dd><a href="#issues-index">仕様内インライン</a>
                    <dt class="editor">編集者:
                    <dd class="editor p-author h-card vcard" data-editor-id="42199"><a class="p-name fn u-url url"
                            href="http://www.xanthir.com/contact/">Tab Atkins Jr.</a> (<span
                            class="p-org org">Google</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="35400"><a class="p-name fn u-url url"
                            href="http://fantasai.inkedblade.net/contact">Elika J. Etemad / fantasai</a> (<span
                            class="p-org org">Apple</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="52801"><a class="p-name fn u-url url"
                            href="http://jensimmons.com/">Jen Simmons</a> (<span class="p-org org">Apple</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="138640"><a class="p-name fn u-url url"
                            href="https://brandonstewart.net">Brandon Stewart</a> (<span class="p-org org">Apple</span>)
                    <dt class="editor">前編集者:
                    <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email"
                            href="mailto:mailto:mats@mozilla.com">Mats Palmgren</a> (<span
                            class="p-org org">Mozilla</span>)
                    <dt>この仕様への編集提案:
                    <dd><a href="https://github.com/w3c/csswg-drafts/blob/main/css-grid-3/Overview.bs">GitHub編集者</a>
                </dl>
            </div>
        </details>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> ©
            2025 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr
                title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a
                href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/copyright/software-license/" rel="license"
                title="W3C Software and Document License">permissive document license</a> rules apply. </p>
        <hr title="Separator for header">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">概要</span></h2>
        <p>このモジュールは、<a href="https://www.w3.org/TR/css-grid-2/">CSS Grid</a>コンテナーに追加のレイアウトモードとしてメイソンリーレイアウトを導入します。</p>
        <a href="https://www.w3.org/TR/CSS/">CSS</a>は、構造化文書（HTMLやXMLなど）のレンダリングを画面や紙などで記述するための言語です。
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">この文書のステータス</span></h2>
    <div data-fill-with="status">
        <p><em>このセクションは、公開時点でのこの文書のステータスについて説明しています。現在のW3C出版物の一覧や、この技術レポートの最新リビジョンは、<a
                    href="https://www.w3.org/TR/">W3C技術レポート一覧 https://www.w3.org/TR/</a>で確認できます。</em></p>
        <p>この文書は<a href="https://www.w3.org/groups/wg/css">CSSワーキンググループ</a>によって、<strong>作業草案</strong>として<a
                href="https://www.w3.org/policies/process/20231103/#recs-and-notes">勧告トラック</a>を使って公開されました。
            作業草案として公開されても、<abbr title="World Wide Web Consortium">W3C</abbr>およびそのメンバーによる承認を意味するものではありません。</p>
        <p>この文書は草案であり、随時更新、置換、または他文書により廃止される可能性があります。
            進行中の作業以外としてこの文書を引用するのは適切ではありません。</p>
        <p>フィードバックは、<a
                href="https://github.com/w3c/csswg-drafts/issues">GitHubで課題を提出</a>（推奨）するか、タイトルに仕様コード「css-grid」を含めてください（例:
            “[css-grid] <i>…コメント概要…</i>”）。
            すべての課題とコメントは<a href="https://lists.w3.org/Archives/Public/public-css-archive/">アーカイブ</a>されています。
            または、(<a href="https://lists.w3.org/Archives/Public/www-style/">アーカイブあり</a>) 公共メーリングリスト<a
                href="mailto:www-style@w3.org?Subject=%5Bcss-grid%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>へ送信することもできます。
        </p>
        <p>この文書は<a href="https://www.w3.org/policies/process/20231103/"
                id="w3c_process_revision">2023年11月3日W3Cプロセス文書</a>に従って管理されています。</p>
        <p>この文書は<a href="https://www.w3.org/policies/patent-policy/20200915/">W3C特許ポリシー</a>の下で運営されているグループによって作成されました。
            W3Cは、グループの成果物に関連して行われた特許開示の<a href="https://www.w3.org/groups/wg/css/ipr" rel="disclosure">公開一覧</a>を維持しています。
            そのページには特許開示の手順も記載されています。
            特許に関する実際の知識を持つ個人は、<a
                href="https://www.w3.org/policies/patent-policy/20200915/#def-essential">必須クレーム</a>を含むと信じる場合、<a
                href="https://www.w3.org/policies/patent-policy/20200915/#sec-Disclosure">W3C特許ポリシー第6節</a>に従って情報を開示する必要があります。
        </p>
        <p><strong>この仕様は、メイソンリーレイアウトの2つの提案バリエーションを示しています。代替案についてのフィードバックを歓迎します。</strong></p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目次</h2>
        <ol class="toc" role="directory">
            <li>
                <a href="#intro"><span class="secno">1</span> <span class="content">はじめに</span></a>
                <ol class="toc">
                    <li>
                        <a href="#background"><span class="secno">1.1</span> <span class="content">背景と動機</span></a>
                        <ol class="toc">
                            <li><a href="#waterfall"><span class="secno">1.1.1</span> <span
                                        class="content">自動配置アイテムによるウォーターフォールレイアウト</span></a>
                            <li><a href="#collapse"><span class="secno">1.1.2</span> <span
                                        class="content">一次元グリッドレイアウト</span></a>
                        </ol>
                    <li><a href="#values"><span class="secno">1.2</span> <span class="content">値の定義</span></a>
                </ol>
            <li>
                <a href="#masonry-model"><span class="secno">2</span> <span class="content">メイソンリーレイアウトモデル</span></a>
                <ol class="toc">
                    <li><a href="#order-accessibility"><span class="secno">2.1</span> <span
                                class="content">並べ替えとアクセシビリティ</span></a>
                    <li><a href="#masonry-switch"><span class="secno">2.2</span> <span
                                class="content">メイソンリーレイアウトの確立</span></a>
                </ol>
            <li>
                <a href="#masonry-track-templates"><span class="secno">3</span> <span
                        class="content">メイソンリートラックの仕様</span></a>
                <ol class="toc">
                    <li>
                        <a href="#masonry-track-grid-option"><span class="secno">3.1</span> <span class="content">
                                メイソンリートラックテンプレートの宣言：<span class="css">grid-template-*</span>プロパティ</span></a>
                        <ol class="toc">
                            <li><a href="#masonry-intrinsic-repeat"><span class="secno">3.1.1</span> <span
                                        class="content">固有トラックとrepeat()</span></a>
                        </ol>
                    <li><a href="#subgrids"><span class="secno">3.2</span> <span class="content">サブグリッド</span></a>
                    <li>
                        <a href="#repeat-notation"><span class="secno">3.3</span> <span class="content">トラックの繰り返し：<span
                                    class="css">repeat()</span>記法</span></a>
                        <ol class="toc">
                            <li><a href="#repeat-auto-areas"><span class="secno">3.3.1</span> <span
                                        class="content">repeat(auto-areas)</span></a>
                            <li><a href="#repeat-auto-fit"><span class="secno">3.3.2</span> <span
                                        class="content">repeat(auto-fit)</span></a>
                        </ol>
                    <li>
                        <a href="#track-sizing"><span class="secno">3.4</span> <span
                                class="content">グリッド軸トラックのサイズ指定</span></a>
                        <ol class="toc">
                            <li><a href="#track-sizing-subgrid"><span class="secno">3.4.1</span> <span
                                        class="content">サブグリッドアイテムの寄与</span></a>
                            <li><a href="#track-sizing-performance"><span class="secno">3.4.2</span> <span
                                        class="content">最適化されたトラックサイズ指定</span></a>
                        </ol>
                </ol>
            <li>
                <a href="#masonry-track-placement"><span class="secno">4</span> <span
                        class="content">メイソンリー配置</span></a>
                <ol class="toc">
                    <li><a href="#masonry-placement-grid-option"><span class="secno">4.1</span> <span class="content">
                                メイソンリーアイテムの配置指定：<span class="css">grid-column-*</span>および<span
                                    class="css">grid-row-*</span>プロパティ</span></a>
                    <li><a href="#item-slack"><span class="secno">4.2</span> <span class="content">配置精度：<span
                                    class="property">item-slack</span>プロパティ</span></a>
                    <li>
                        <a href="#masonry-layout-algorithm"><span class="secno">4.3</span> <span class="content">
                                メイソンリーレイアウトと配置アルゴリズム</span></a>
                        <ol class="toc">
                            <li><a href="#containing-block"><span class="secno">4.3.1</span> <span
                                        class="content">包含ブロック</span></a>
                            <li><a href="#rtl-example"><span class="secno">4.3.2</span> <span
                                        class="content">配置と書字モード</span></a>
                        </ol>
                </ol>
            <li><a href="#intrinsic-sizes"><span class="secno">5</span> <span class="content">グリッドコンテナーのサイズ指定</span></a>
            <li>
                <a href="#alignment"><span class="secno">6</span> <span class="content">整列と間隔</span></a>
                <ol class="toc">
                    <li><a href="#masonry-axis-baseline-alignment"><span class="secno">6.1</span> <span
                                class="content">積み重ね軸でのベースライン整列</span></a>
                </ol>
            <li>
                <a href="#pagination"><span class="secno">7</span> <span class="content">分断</span></a>
                <ol class="toc">
                    <li><a href="#masonry-axis-pagination"><span class="secno">7.1</span> <span
                                class="content">積み重ね軸での分断</span></a>
                    <li><a href="#grid-axis-pagination"><span class="secno">7.2</span> <span
                                class="content">グリッド軸での分断</span></a>
                </ol>
            <li><a href="#abspos"><span class="secno">8</span> <span class="content">絶対位置指定</span></a>
            <li><a href="#graceful-degradation"><span class="secno">9</span> <span
                        class="content">グレースフルデグラデーション</span></a>
            <li>
                <a href="#flow-control"><span class="secno"></span> <span class="content">付録A：汎用レイアウトアイテムフロー制御：<span
                            class="css">item-*</span>プロパティ</span></a>
                <ol class="toc">
                    <li><a href="#item-primary-axis"><span class="secno"></span> <span class="content">アイテムフロー軸：<span
                                    class="property">item-track</span>/<span
                                    class="property">item-direction</span></span></a>
                    <li><a href="#item-secondary-axis"><span class="secno"></span> <span
                                class="content">アイテムクロス軸配置モード：<span class="property">item-cross</span>/<span
                                    class="property">item-wrap</span></span></a>
                    <li><a href="#item-pack-options"><span class="secno"></span> <span
                                class="content">アイテム配置パッキングモード：<span class="property">item-pack</span>プロパティ</span></a>
                    <li><a href="#item-flow"><span class="secno"></span> <span class="content">アイテム配置ショートハンド：<span
                                    class="property">item-flow</span>ショートハンド</span></a>
                </ol>
            <li><a href="#acknowledgements"><span class="secno">10</span> <span class="content">謝辞</span></a>
            <li><a href="#security"><span class="secno">11</span> <span class="content">セキュリティの考慮事項</span></a>
            <li><a href="#privacy"><span class="secno">12</span> <span class="content">プライバシーの考慮事項</span></a>
            <li>
                <a href="#changes"><span class="secno"></span> <span class="content">変更点</span></a>
                <ol class="toc">
                    <li><a href="#changes-3"><span class="secno"></span> <span class="content">レベル2以降の追加点</span></a>
                    <li><a href="#recent-changes"><span class="secno"></span> <span class="content">最近の変更</span></a>
                </ol>
            <li>
                <a href="#w3c-conformance"><span class="secno"></span> <span class="content">適合性</span></a>
                <ol class="toc">
                    <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">文書の慣例</span></a>
                    <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span
                                class="content">適合クラス</span></a>
                    <li>
                        <a href="#w3c-partial"><span class="secno"></span> <span class="content">部分的な実装</span></a>
                        <ol class="toc">
                            <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span
                                        class="content">不安定・独自機能の実装</span></a>
                        </ol>
                    <li><a href="#w3c-testing"><span class="secno"></span> <span class="content">非実験的な実装</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本仕様で定義された用語</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">参照で定義された用語</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">規範的参考文献</span></a>
                    <li><a href="#informative"><span class="secno"></span> <span class="content">参考情報文献</span></a>
                </ol>
            <li><a href="#property-index"><span class="secno"></span> <span class="content">プロパティ一覧</span></a>
            <li><a href="#issues-index"><span class="secno"></span> <span class="content">課題一覧</span></a>
        </ol>
    </nav>
    <main>
        <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">
                はじめに</span><a class="self-link" href="#intro"></a></h2>
        <p><em>このセクションは規範的ではありません。</em></p>
        <p>グリッドレイアウトは、CSSのレイアウトモデルであり、
            ボックスやその内容のサイズや位置を強力に制御できます。
            グリッドレイアウトは二次元レイアウト向けに最適化されています。
            つまり、内容の両軸で整列が求められる場合に適しています。</p>
        <figure>
            <img alt="グリッドレイアウトの例：
		     2行のアイテム、
		     1行目は4つのアイテムで、最後のアイテムは2行にまたがる、
		     2行目は2つのアイテム—
		     1つ目は最初の2列にまたがる—
		     さらに1行目からのスパンアイテム。" height="70" src="https://www.w3.org/TR/css-grid-3/images/grid-layout.png" width="486">
            <figcaption>代表的なグリッドレイアウト例</figcaption>
        </figure>
        <p>多くのレイアウトは通常のグリッドレイアウトで表現できますが、
            両軸でアイテムをグリッドに制限すると、
            Web上でよくあるレイアウトの一部は表現できなくなります。</p>
        <p>このモジュールは、その制限を取り除いたレイアウトシステムを定義します。
            アイテムは一方の軸だけでグリッド状のトラックに配置でき、
            もう一方の軸では順番に積み重ねられます。
            アイテムはこれまでに配置されたアイテムのレイアウトサイズに基づき、
            最も空きスペースが多い列（または行）に配置されます。
            このモジュールはまた、<a href="https://www.w3.org/TR/css-grid-2/">CSS Grid</a>に新しいグリッドアイテム配置戦略を追加し、
            <a href="https://drafts.csswg.org/css-align">CSS Box Alignment</a>に新たな整列機能を拡張します。
        </p>
        <h3 class="heading settled" data-level="1.1" id="background"><span class="secno">1.1. </span><span
                class="content"> 背景と動機</span><a class="self-link" href="#background"></a></h3>
        <h4 class="heading settled" data-level="1.1.1" id="waterfall"><span class="secno">1.1.1. </span><span
                class="content"> 自動配置アイテムによるウォーターフォールレイアウト</span><a class="self-link" href="#waterfall"></a></h4>
        <p><a data-link-type="dfn" href="#masonry-layout"
                id="ref-for-masonry-layout">メイソンリーレイアウト</a>は、時に「ウォーターフォールレイアウト」とも呼ばれ、
            複数のアイテム（主に画像や短い記事概要など）を
            列へ順番に配置する一般的なWebデザインパターンです。
            石積み（masonry）に似た配置になります。
            <a data-link-type="biblio" href="#biblio-css-multicol-1"
                title="CSS Multi-column Layout Module Level 1">マルチカラムレイアウト</a>とは異なり、
            コンテンツが最初の列に垂直に配置され、
            次の列に溢れるまで続くのではなく、<span id="ref-for-masonry-layout①">メイソンリーレイアウト</span>では、
            新しいアイテムごとに列を選択し、
            後に配置されたアイテムよりもレイアウトの上部に近くなるようにします。
        </p>
        <div class="example" id="example-38d5cc14">
            <a class="self-link" href="#example-38d5cc14"></a> Pinterestの検索結果ページはこのレイアウトの代表例です：
            <figure>
                <img alt="メイソンリーレイアウトの例：
			          4列のアイテムで、
			          各アイテムはこれまでで最も高さが低い列に配置される。" height="867" src="https://www.w3.org/TR/css-grid-3/images/pinterest.png"
                    width="1105">
                <figcaption>代表的なメイソンリーレイアウト例</figcaption>
            </figure>
            <p>ここでは各アイテムの高さが異なり
                （内容や列の幅によって異なる）、
                DOMを検証すると
                （視覚的な内容だけでは順序は分からない）、
                各アイテムがその時点で最も高さが低い列に配置されていることが分かります。</p>
        </div>
        <p>このレイアウトは一見マルチカラムレイアウトに似ていますが、
            下にスクロールすると
            レイアウト上で「後」のアイテム
            （つまり検索結果であまり関連性のないもの）に自然にアクセスできるという利点があります。</p>
        <p>このレイアウトは、以前のCSSレイアウトモデルでは実現できません。
            事前に各アイテムの高さが分かっているか、
            JavaScriptで内容の計測や配置を行わない限り不可能です。</p>
        <p><a data-link-type="dfn" href="#masonry-container" id="ref-for-masonry-container">メイソンリーコンテナー</a>と<span
                class="css">auto</span>配置アイテムを組み合わせることで、
            このようなメイソンリーレイアウトが実現できます。</p>
        <h4 class="heading settled" data-level="1.1.2" id="collapse"><span class="secno">1.1.2. </span><span
                class="content"> 一次元グリッドレイアウト</span><a class="self-link" href="#collapse"></a></h4>
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-layout"
                id="ref-for-grid-layout">グリッドレイアウト</a>は二軸での強力なトラックサイズ指定や明示的配置が可能ですが、
            レイアウトによっては一軸のみでアイテムの整列が必要な場合もあります。</p>
        <p><a data-link-type="dfn" href="#masonry-container"
                id="ref-for-masonry-container①">メイソンリーコンテナー</a>と明示的配置アイテムを組み合わせることで、
            このような一次元グリッドレイアウトが可能です。</p>
        <div class="example" id="example-a1b07c6f">
            <a class="self-link" href="#example-a1b07c6f"></a> この例は <a
                href="https://github.com/w3c/csswg-drafts/issues/10233#issuecomment-2071279204">Douglas
                Graham</a>によるもので、
            明示的な配置によって各アイテムを指定した列に配置しています。
            ただし、行はありません。
            各列のアイテムは順に積み重ねられます。
            このレイアウトは<a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-layout"
                id="ref-for-grid-layout①">グリッドレイアウト</a>でも再現できません。
            隣接する列のアイテム間の「スパン」関係が固定されておらず、
            アイテムの高さやバナー・広告の有無によって変化するためです。
            また、<a data-link-type="dfn" href="https://www.w3.org/TR/css-flexbox-1/#flex-layout"
                id="ref-for-flex-layout">フレックスレイアウト</a>でも再現できません。
            アイテムのソース順
            （読み順、逐次ナビゲーション、1カラムのスマホレイアウト用）
            が2つの列間で行ったり来たりするためです。
            <figure>
                <img alt="1カラムレイアウトでは：
			          ヘッダー、オプションバナー、セカンダリナビゲーション、
			          メインコンテンツ、広告ブロック、フッター。
			          2カラムレイアウトでは：
			          ヘッダーが両列を上部でスパン、
			          フッターが両列を下部でスパン、
			          幅広い左列にオプションバナーとメインコンテンツ、
			          狭い左列にセカンダリナビゲーションと広告ブロック。" height="492"
                    src="https://www.w3.org/TR/css-grid-3/images/masonry-page-layout.png" width="731">
                <figcaption>一次元グリッドレイアウトの1カラム・2カラム比較</figcaption>
            </figure>
        </div>
        <h3 class="heading settled" data-level="1.2" id="values"><span class="secno">1.2. </span><span class="content">
                値の定義</span><a class="self-link" href="#values"></a></h3>
        <p>この仕様は、<a href="https://www.w3.org/TR/CSS2/about.html#property-defs">CSSプロパティ定義の慣例</a>（<a
                data-link-type="biblio" href="#biblio-css2"
                title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS2]</a>）に従い、
            <a href="https://www.w3.org/TR/css-values-3/#value-defs">値定義構文</a>（<a data-link-type="biblio"
                href="#biblio-css-values-3" title="CSS Values and Units Module Level 3">[CSS-VALUES-3]</a>）を使用しています。
            この仕様で定義されていない値型はCSS Values &amp; Units <span
                title="CSS Values and Units Module Level 3">[CSS-VALUES-3]</span>で定義されています。
            他のCSSモジュールとの組み合わせにより、これらの値型の定義が拡張されることがあります。
        </p>
        <p>プロパティ固有の値に加え、
            この仕様で定義されたすべてのプロパティは
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-values-4/#css-wide-keywords"
                id="ref-for-css-wide-keywords">CSS全体キーワード</a>もプロパティ値として受け付けます。
            可読性のため明示的には繰り返していません。
        </p>
        <h2 class="heading settled" data-level="2" id="masonry-model"><span class="secno">2. </span><span
                class="content">メイソンリーレイアウトモデル</span><a class="self-link" href="#masonry-model"></a></h2>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="masonry-layout">メイソンリーレイアウト</dfn>は、
            アイテムを事前定義されたトラック（<a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-layout"
                id="ref-for-grid-layout②">グリッドレイアウト</a>のように）で
            一方の軸（<dfn class="dfn-paneled" data-dfn-type="dfn" data-local-lt="grid-axis" data-noexport
                id="grid-axis">グリッド軸</dfn>）に配置し、
            もう一方の軸では<a data-link-type="dfn" href="https://www.w3.org/TR/css-flexbox-1/#flex-layout"
                id="ref-for-flex-layout①">フレックスレイアウト</a>のように自由に流します
            （<dfn class="dfn-paneled" data-dfn-type="dfn" data-local-lt="stacking-axis" data-noexport
                id="stacking-axis">積み重ね軸</dfn>）。
            <span id="ref-for-grid-layout③">グリッドレイアウト</span>と似ていて、<span id="ref-for-flex-layout②">フレックスレイアウト</span>とは違い、
            <a data-link-type="dfn" href="#masonry-layout" id="ref-for-masonry-layout②">メイソンリーレイアウト</a>の自動配置は、
            トラック間の長さをできるだけ揃えるようアイテムを分配します。
        </p>
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-item"
                id="ref-for-grid-item">グリッドアイテム</a>は、
            通常の<a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-container"
                id="ref-for-grid-container">グリッドコンテナー</a>と全く同じ方法で生成・<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-display-4/#blockify" id="ref-for-blockify">ブロック化</a>されます。
        </p>
        <p>（分かりやすくするため、<a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-item"
                id="ref-for-grid-item①">グリッドアイテム</a>や<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-grid-2/#grid-track" id="ref-for-grid-track">グリッドトラック</a>は、<a
                data-link-type="dfn" href="#masonry-container" id="ref-for-masonry-container②">メイソンリーコンテナー</a>の場合、
            <dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-lt="masonry item"
                id="masonry-item">メイソンリーアイテム</dfn>や<dfn class="dfn-paneled" data-dfn-type="dfn" data-export
                data-lt="masonry track" id="masonry-track">メイソンリートラック</dfn>と呼ぶことができます。）
        </p>
        <p>CSSプロパティは、特にこの仕様で指定がない限り、通常の<a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-container"
                id="ref-for-grid-container①">グリッドコンテナー</a>と同様に動作します。
            例えば、<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-flexbox-1/#propdef-order" id="ref-for-propdef-order">order</a>プロパティを使って、
            アイテムのレイアウト順を指定できます。</p>
        <p class="note" role="note"><span class="marker">注:</span> サブグリッドアイテムもサポートされていますが、
            サブグリッドは<a data-link-type="dfn" href="#grid-axis" id="ref-for-grid-axis">グリッド軸</a>のみで発生します。
            詳細は<a href="#subgrids">§ 3.2 サブグリッド</a>をご参照ください。</p>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="masonry-container">メイソンリーコンテナー</dfn>は、
            内容が<a data-link-type="dfn" href="#masonry-layout" id="ref-for-masonry-layout③">メイソンリーレイアウト</a>に参加するボックスです。
            <a data-link-type="dfn" href="#masonry-container" id="ref-for-masonry-container③">メイソンリーコンテナー</a>は、
            <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="column-masonry-container">カラムメイソンリーコンテナー</dfn>（
            <a data-link-type="dfn" href="#stacking-axis" id="ref-for-stacking-axis">積み重ね軸</a>が
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#block-axis"
                id="ref-for-block-axis">ブロック軸</a>の場合）
            または<dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="row-masonry-container">ロウメイソンリーコンテナー</dfn>（
            <span id="ref-for-stacking-axis①">積み重ね軸</span>が
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#inline-axis"
                id="ref-for-inline-axis">インライン軸</a>の場合）となります。
        </p>
        <table class="data">
            <caption>メイソンリーコンテナーの比較</caption>
            <tbody>
                <tr>
                    <th style="writing-mode: vertical-rl; writing-mode: sideways-lr"> カラムメイソンリー
                    <td>
                        <pre>grid-template-columns: 1fr 2fr 3fr;
</pre>
                    <td> <img alt="カラムメイソンリーはアイテムを列に配置し、
					     列間で順に配置し、
					     各アイテムはその時点で最も短い列に配置されます。" height="146" src="https://www.w3.org/TR/css-grid-3/images/masonry-columns.png"
                            width="216">
                <tr>
                    <th style="writing-mode: vertical-rl; writing-mode: sideways-lr"> ロウメイソンリー
                    <td>
                        <pre>grid-template-rows: 1fr 2fr 3fr;
</pre>
                    <td> <img alt="ロウメイソンリーはアイテムを行に配置し、
					     行間で下へ順に配置し、
					     各アイテムはその時点で最も短い行に配置されます。" height="214" src="https://www.w3.org/TR/css-grid-3/images/masonry-rows.png"
                            width="143">
        </table>
        <h3 class="heading settled" data-level="2.1" id="order-accessibility"><span class="secno">2.1. </span><span
                class="content">並べ替えとアクセシビリティ</span><a class="self-link" href="#order-accessibility"></a></h3>
        <p><a data-link-type="dfn" href="#masonry-layout" id="ref-for-masonry-layout④">メイソンリーレイアウト</a>は通常、
            前進する形で進行します
            （次のアイテムを現在のアイテムの下や終端側に配置し、
            自然な「読み順」に合わせる）、
            しかしこれら2つの配置を見かけ上任意に切り替える場合があります。
            単純なケースでは、<a class="property css" data-link-type="property" href="#propdef-item-slack"
                id="ref-for-propdef-item-slack">item-slack</a>プロパティを使うことで、
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#block-axis"
                id="ref-for-block-axis①">ブロック軸</a>での
            自動配置アイテムの小さなサイズ差による「逆戻り感」を減らすことができます。
            しかし、<a href="#masonry-layout-algorithm">自動配置</a>と
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#definite-grid-position"
                id="ref-for-definite-grid-position">明示的配置</a>やスパンアイテムが混在すると、
            ある程度の逆戻りが発生する場合があります。
        </p>
        <div class="example" id="example-81eafd45">
            <a class="self-link" href="#example-81eafd45"></a> 例えば次のマークアップ例では、
            4つ目のアイテムがスパンアイテムであり、
            1行目の残りの空き列には収まりません。
            結果的に、最も高い空きスペースがある最初の列に配置されます。
            spanが1の次のアイテムは、
            空いている列の「上」に配置され、
            自然な読み順を壊してしまいます。
            <pre class="highlight"><c- p>&lt;</c-><c- f>section</c-> <c- e>class</c-><c- o>=</c-><c- s>masonry</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>item</c-><c- p>></c->1<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>item</c-><c- p>></c->2<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"item tall"</c-><c- p>></c->3<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"item wide"</c-><c- p>></c->4<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>item</c-><c- p>></c->5<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>item</c-><c- p>></c->6/div>
  <c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>item</c-><c- p>></c->7<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>section</c-><c- p>></c->
<c- p>&lt;</c-><c- f>style</c-><c- p>></c->
<c- p>.</c-><c- nc>masonry</c-> <c- p>{</c->
  //FIXME <c- k>display</c-><c- p>:</c-><c- n>masonry</c-> <c- n>or</c-> <c- n>something</c->
  <c- k>grid-template-columns</c-><c- o>:</c-> <c- nf>repeat</c-><c- p>(</c-><c- mi>5</c-><c- p>,</c-> <c- kc>auto</c-><c- p>);</c->
<c- p>}</c->
<c- p>.</c-><c- nc>item</c-> <c- p>{</c-> <c- k>height</c-><c- p>:</c-> <c- mi>50</c-><c- b>px</c-><c- p>;</c-> <c- p>}</c->
<c- p>.</c-><c- nc>item</c-><c- p>.</c-><c- nc>wide</c-> <c- p>{</c-> <c- k>grid-column</c-><c- p>:</c-> <c- n>span</c-> <c- mi>3</c-><c- p>;</c-> <c- p>}</c->
<c- p>.</c-><c- nc>item</c-><c- p>.</c-><c- nc>tall</c-> <c- p>{</c-> <c- k>height</c-><c- p>:</c-> <c- mi>90</c-><c- b>px</c-><c- p>;</c-> <c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->
</pre>
            <figure>
                <img alt="この例では、1行目は1,2,3,5,6で、
			          3番が他より少し高い。
			          4番は最初の3列にまたがり、
			          3番の直下に配置され、7番は5番の下に潜り込む。" height="214"
                    src="https://www.w3.org/TR/css-grid-3/images/masonry-reorder-span.png" width="514">
                <figcaption>高さやスパンが混在する自動配置メイソンリーレイアウト</figcaption>
            </figure>
            同様に、特定トラックへの明示的配置アイテムは後ろにギャップを残し、
            後続の自動配置アイテムが視覚的に順不同で配置される場合があります。
        </div>
        <p>著者はこれらの可能性を認識し、
            逆戻りを最小限に抑え、
            フォーカスや読み順が追いやすいレイアウトを設計すべきです。
            あるいは、アイテムに固有の順序がない場合は、
            <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-display-4/#propdef-reading-flow"
                id="ref-for-propdef-reading-flow">reading-flow</a>プロパティを使い、
            UAが読みやすさや線形ナビゲーションのためにアイテムを並べ替えられるようにします。
        </p>
        <p class="issue" id="issue-f3901e05"><a class="self-link" href="#issue-f3901e05"></a>
            自動配置アイテムの場合、並べ替えをデフォルト動作にすべきか？</p>
        <div class="note" role="note">
            逆戻りを減らすテクニックには以下があります：
            <ul>
                <li data-md>
                    <p><a class="property css" data-link-type="property" href="#propdef-item-slack"
                            id="ref-for-propdef-item-slack①">item-slack</a>の値を適切に設定する（
                        似たサイズのトラック間で不要な違いが出ないよう十分大きく、
                        ただし意味ある差が無視されない程度にする）。</p>
                <li data-md>
                    <p>明示的配置を、関連アイテム同士をまとめる方向で使い、
                        アイテムの自然な順序を乱さないようにする</p>
                <li data-md>
                    <p><a data-link-type="dfn" href="#grid-axis" id="ref-for-grid-axis①">グリッド軸</a>でスパンサイズが混在し、
                        <a data-link-type="dfn" href="#stacking-axis"
                            id="ref-for-stacking-axis②">積み重ね軸</a>でアイテムサイズが異なる場合の組み合わせを避ける（順序が乱れる原因、上記例参照）。
                    </p>
            </ul>
        </div>
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-layout"
                id="ref-for-grid-layout④">グリッドレイアウト</a>や<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-flexbox-1/#flex-layout" id="ref-for-flex-layout③">フレックスレイアウト</a>と同様に、
            <a class="property css" data-link-type="property" href="https://www.w3.org/TR/css-flexbox-1/#propdef-order"
                id="ref-for-propdef-order①">order</a>プロパティでアイテムを並べ替え可能です。
            注意点も同じです。
            <a href="https://www.w3.org/TR/css-grid-2/#order-accessibility"><cite>CSS Grid Layout 2</cite> § 4
                並べ替えとアクセシビリティ</a>、
            <a href="https://www.w3.org/TR/css-flexbox-1/#order-accessibility"><cite>CSS Flexbox 1</cite> § 5.4.1
                並べ替えとアクセシビリティ</a>も参照してください。
        </p>
        <h3 class="heading settled" data-level="2.2" id="masonry-switch"><span class="secno">2.2. </span><span
                class="content">メイソンリーレイアウトの確立</span><a class="self-link" href="#masonry-switch"></a></h3>
        <div class="issue" id="issue-65868180">
            <a class="self-link" href="#issue-65868180"></a> ISSUE(11593): どの構文スイッチで<a data-link-type="dfn"
                href="#masonry-layout" id="ref-for-masonry-layout⑤">メイソンリーレイアウト</a>を確立するか、まだ議論中です。
            これまでの提案案：
            <ul>
                <li data-md>
                    <p><a class="css" data-link-type="propdesc"
                            href="https://www.w3.org/TR/CSS21/visuren.html#propdef-display"
                            id="ref-for-propdef-display">display: masonry</a>（または同義語、例：<span class="css"
                            id="ref-for-propdef-display①">display: stack</span>）</p>
                <li data-md>
                    <p><a class="css" data-link-type="propdesc" href="#propdef-item-pack"
                            id="ref-for-propdef-item-pack">item-pack: collapse</a>（<span class="property"
                            id="ref-for-propdef-item-pack①">item-pack</span>参照）</p>
                <li data-md>
                    <p><a class="property css" data-link-type="property"
                            href="https://www.w3.org/TR/css-grid-2/#propdef-grid-template-rows"
                            id="ref-for-propdef-grid-template-rows">grid-template-rows</a>/<a class="property css"
                            data-link-type="property"
                            href="https://www.w3.org/TR/css-grid-2/#propdef-grid-template-columns"
                            id="ref-for-propdef-grid-template-columns">grid-template-columns</a>の値として<span
                            class="css">collapse</span>を使用し、その軸を<a data-link-type="dfn" href="#stacking-axis"
                            id="ref-for-stacking-axis③">積み重ね軸</a>とする<a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-grid-2/#grid-container"
                            id="ref-for-grid-container②">グリッドコンテナー</a>を示す</p>
            </ul>
        </div>
        <h2 class="heading settled" data-level="3" id="masonry-track-templates"><span class="secno">3. </span><span
                class="content">メイソンリートラックの仕様</span><a class="self-link" href="#masonry-track-templates"></a></h2>
        <p><a data-link-type="dfn" href="#grid-axis" id="ref-for-grid-axis②">グリッド軸</a>では、
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-layout"
                id="ref-for-grid-layout⑤">グリッドレイアウト</a>によるトラック指定の全機能が利用可能です：
        </p>
        <ul>
            <li data-md>
                <p>トラックサイズ、ライン名、エリアは<a data-link-type="dfn" href="#masonry-container"
                        id="ref-for-masonry-container④">メイソンリーコンテナー</a>の<a data-link-type="dfn" href="#grid-axis"
                        id="ref-for-grid-axis③">グリッド軸</a>上で指定できます。
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-layout"
                        id="ref-for-grid-layout⑥">グリッドレイアウト</a>と同様です。
                </p>
            <li data-md>
                <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#explicit-grid"
                        id="ref-for-explicit-grid">明示的グリッド</a>と<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-grid-2/#implicit-grid"
                        id="ref-for-implicit-grid">暗黙的グリッド</a>は、通常の<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-grid-2/#grid-container"
                        id="ref-for-grid-container③">グリッドコンテナー</a>同様に形成されます。</p>
            <li data-md>
                <p>アイテムはこれらのグリッドテンプレートに対して<a href="#masonry-track-placement">配置</a>できます。<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-grid-2/#grid-layout"
                        id="ref-for-grid-layout⑦">グリッドレイアウト</a>と同じ方法です。</p>
        </ul>
        <p>ただし、自動配置アイテムは、最終的に配置されるトラックだけでなく、すべてのトラックにサイズ指定の寄与をします。
            <a href="#track-sizing">§ 3.4 グリッド軸トラックサイズ指定</a>参照。
        </p>
        <p class="note" role="note"><span class="marker">注:</span> 自動配置アイテムは配置時に直ちにレイアウトされる必要があるため、
            各トラックがどれだけ「埋まっているか」を把握する必要があります（次の自動配置アイテムをどのトラックに入れるか判断するため）。
            そのため、トラック自体はすでに明確なサイズを持っている必要があり、
            アイテムはレイアウト中に<a data-link-type="dfn" href="https://www.w3.org/TR/css-sizing-3/#available"
                id="ref-for-available">利用可能なスペース</a>を把握できます。
        </p>
        <h3 class="heading settled" data-level="3.1" id="masonry-track-grid-option"><span class="secno">3.1.
            </span><span class="content">メイソンリートラックテンプレートの宣言：<span class="css">grid-template-*</span>プロパティ</span><a
                class="self-link" href="#masonry-track-grid-option"></a></h3>
        <p><span class="css">grid-template-*</span>および<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-grid-2/#propdef-grid-auto-rows"
                id="ref-for-propdef-grid-auto-rows">grid-auto-rows</a>/<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-grid-2/#propdef-grid-auto-columns"
                id="ref-for-propdef-grid-auto-columns">grid-auto-columns</a>プロパティ
            （およびそのショートハンド）は、
            <a data-link-type="dfn" href="#masonry-container" id="ref-for-masonry-container⑤">メイソンリーコンテナー</a>の<a
                data-link-type="dfn" href="#grid-axis" id="ref-for-grid-axis④">グリッド軸</a>で適用され、
            通常の<a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-container"
                id="ref-for-grid-container④">グリッドコンテナー</a>と同様にトラックを確立します。
            （<a data-link-type="dfn" href="#stacking-axis" id="ref-for-stacking-axis④">積み重ね軸</a>では無視されます。）
        </p>
        <p class="issue" id="issue-f0b2f95f"><a class="self-link" href="#issue-f0b2f95f"></a> 初期トラックリストはどうあるべきか？ <a
                href="https://github.com/w3c/csswg-drafts/issues/10869">[Issue #10869]</a></p>
        <h4 class="heading settled" data-level="3.1.1" id="masonry-intrinsic-repeat"><span class="secno">3.1.1.
            </span><span class="content">固有トラックとrepeat()</span><a class="self-link"
                href="#masonry-intrinsic-repeat"></a></h4>
        <p class="issue" id="issue-b1e94dcd"><a class="self-link" href="#issue-b1e94dcd"></a> 内容ベースの自動繰り返しトラックは許可すべきか？
            その定義は合理的か？
            グリッドレイアウトでも何らかの形で動作すべきか？ <a href="https://github.com/w3c/csswg-drafts/issues/10915">[Issue #10915]</a></p>
        <p>グリッドレイアウトでは、
            すべての<a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-item"
                id="ref-for-grid-item②">グリッドアイテム</a>は、グリッドトラックのサイズ指定の<em>前</em>にグリッドに配置されます。
            これは、<a class="css" data-link-type="maybe" href="https://www.w3.org/TR/css-grid-2/#valdef-repeat-auto-fill"
                id="ref-for-valdef-repeat-auto-fill">auto-fill</a>/<a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-grid-2/#valdef-repeat-auto-fit"
                id="ref-for-valdef-repeat-auto-fit">auto-fit</a>の繰り返しは、
            <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-grid-2/#valdef-grid-template-columns-auto"
                id="ref-for-valdef-grid-template-columns-auto">auto</a>などの固有サイズトラックを含められないことを意味します（
            <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-gaps-1/#funcdef-repeat"
                id="ref-for-funcdef-repeat">repeat()</a>関数内でも、
            トラックリストの固定部分でも）、
            それらにはどのアイテムが配置されるか、
            トラックのサイズがどうなるか、
            いくつ繰り返し可能か、をレイアウトアルゴリズムが事前に決定している必要があるためです。
        </p>
        <p>メイソンリーレイアウトでは、
            <a data-link-type="dfn" href="#masonry-item"
                id="ref-for-masonry-item">メイソンリーアイテム</a>の配置とレイアウトが密接に絡み合い、単純化されているため、
            この制約は厳密には不要です。
            サイズ指定の定義はややヒューリスティックになりますが、
            自動繰り返しは<a data-link-type="dfn" href="#masonry-container"
                id="ref-for-masonry-container⑥">メイソンリーコンテナー</a>内で固有サイズトラックを<em>含めることができます</em>（
            <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-grid-3/#propdef-masonry-template-tracks"
                id="ref-for-propdef-masonry-template-tracks">masonry-template-tracks</a>の初期値でも使われます）。
        </p>
        <div class="algorithm" data-algorithm="determine intrinsic repetitions">
            固有繰り返し回数を決定するには、
            <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-gaps-1/#funcdef-repeat"
                id="ref-for-funcdef-repeat①">repeat()</a>関数が解決する回数を、
            <a href="#track-sizing-performance">§ 3.4.2 最適化されたトラックサイズ指定</a>に従ってレイアウトを実行し、
            以下を変更として加えます：
            <ul>
                <li data-md>
                    <p><a class="css" data-link-type="maybe"
                            href="https://www.w3.org/TR/css-grid-2/#valdef-repeat-auto-fill"
                            id="ref-for-valdef-repeat-auto-fill①">auto-fill</a>/<a class="css" data-link-type="maybe"
                            href="https://www.w3.org/TR/css-grid-2/#valdef-repeat-auto-fit"
                            id="ref-for-valdef-repeat-auto-fit①">auto-fit</a>の繰り返し関数を一度展開する。</p>
                <li data-md>
                    <p>アイテム配置は無視する。
                        （つまり全アイテムが<a class="css" data-link-type="propdesc"
                            href="https://www.w3.org/TR/css-grid-3/#propdef-masonry-track"
                            id="ref-for-propdef-masonry-track">masonry-track: auto</a>を持つとみなす。）</p>
                <li data-md>
                    <p>ある<a data-link-type="dfn" href="#masonry-item"
                            id="ref-for-masonry-item①">メイソンリーアイテム</a>がspan>1の場合、
                        それが<a data-link-type="dfn" href="#virtual-masonry-item"
                            id="ref-for-virtual-masonry-item">仮想メイソンリーアイテム</a>に寄与する各固有サイズごとに、
                        まずスパンするギャップの合計サイズを引き、
                        spanで割る。
                        その後、span-1アイテムとしてそのサイズで扱う。</p>
            </ul>
            <p>その後、固有サイズトラックは、この単純化レイアウトで算出されたサイズ
                （<a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-gaps-1/#funcdef-repeat"
                    id="ref-for-funcdef-repeat②">repeat()</a>
                引数内を含む。対応する単一繰り返しから取得）
                を持つものとして扱い、
                <span class="css" id="ref-for-funcdef-repeat③">repeat()</span>関数が解決する繰り返し回数算定に用いる。
            </p>
        </div>
        <details class="note">
            <summary>動機</summary>
            <p>この単純化レイアウトヒューリスティックは「十分良い」ものとし、
                高速で一貫性を保つよう定義されています。</p>
            <p>配置を無視するのは、概念の整合性のため必須です；
                必要な繰り返し回数が分かる前に、
                明示的配置アイテムがどのトラックに入るか決定できません。</p>
            <p>スパンアイテムをspan-1に分割することで、
                repeat()展開回数を増やす必要がなくなり、
                同一キーワードで繰り返しごとにサイズが異なるという一貫性のない事態も防げます。</p>
            <p>全体としてレイアウトの計算量も大幅に減り、
                各固有トラックサイズだけ考慮すればよいことになります；
                実際にはrepeat()展開すら不要です。
                つまり、<span class="css">auto repeat(auto-fill, min-content auto)</span>では、
                両方の<a class="css" data-link-type="maybe"
                    href="https://www.w3.org/TR/css-grid-2/#valdef-grid-template-columns-auto"
                    id="ref-for-valdef-grid-template-columns-auto①">auto</a>キーワードはこのヒューリスティックレイアウトで同じサイズとなり、
                <a class="css" data-link-type="propdesc"
                    href="https://www.w3.org/TR/css-grid-3/#propdef-masonry-template-tracks"
                    id="ref-for-propdef-masonry-template-tracks①">masonry-template-tracks: auto</a>や<span class="css"
                    id="ref-for-propdef-masonry-template-tracks②">masonry-template-tracks:
                    min-content</span>の結果サイズをそれぞれ使えばよいのです。
            </p>
        </details>
        <h3 class="heading settled" data-level="3.2" id="subgrids"><span class="secno">3.2. </span><span
                class="content">サブグリッド</span><a class="self-link" href="#subgrids"></a></h3>
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#subgrid" id="ref-for-subgrid">サブグリッド</a>は、
            ネストされた<a data-link-type="dfn" href="#masonry-container" id="ref-for-masonry-container⑦">メイソンリーコンテナー</a>や<a
                data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-container"
                id="ref-for-grid-container⑤">グリッドコンテナー</a>でトラックサイズを共有できます。
            親の対応軸が<a data-link-type="dfn" href="#grid-axis" id="ref-for-grid-axis⑤">グリッド軸</a>の場合、
            サブグリッド軸は親コンテナーから<a href="https://www.w3.org/TR/css-grid-2/#subgrids">グリッドコンテナー規定通り</a>で取得します。
            親の対応軸が<a data-link-type="dfn" href="#stacking-axis" id="ref-for-stacking-axis⑤">積み重ね軸</a>の場合、
            サブグリッド軸は<a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-grid-3/#valdef-display-masonry"
                id="ref-for-valdef-display-masonry">masonry</a>として動作します。</p>
        <p class="note" role="note"><span class="marker">注:</span> これにより両軸が<span class="css">masonry</span>になった場合、
            <a data-link-type="dfn" href="#masonry-container" id="ref-for-masonry-container⑧">メイソンリーコンテナー</a>の両軸<span
                class="css">masonry</span>テンプレートとして通常通り解決されます。
            すなわち、<a class="css" data-link-type="propdesc"
                href="https://www.w3.org/TR/css-grid-2/#propdef-grid-template-columns"
                id="ref-for-propdef-grid-template-columns①">grid-template-columns: none; grid-template-rows:
                masonry</a>のような挙動です。
        </p>
        <p><a data-link-type="dfn" href="#masonry-layout" id="ref-for-masonry-layout⑥">メイソンリーレイアウト</a>では、
            自動配置された<a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#subgrid"
                id="ref-for-subgrid①">サブグリッド</a>は親グリッドのライン名を継承しません。
            これはアイテムの配置がレイアウト結果に依存してしまうためですが、
            サブグリッドのトラック自体は親のトラックに通常通り揃えられます。</p>
        <div class="example" id="example-1cdd55da">
            <a class="self-link" href="#example-1cdd55da"></a> サブグリッド<a href="examples/subgrid-example-1.html">例</a>：
            <pre class="language-css highlight">&lt;style>
.grid <c- p>{</c->
  //FIXME: display: inline-grid<c- p>;</c-> or something
  grid-template-rows: auto auto <c- m>100</c-><c- k>px</c-><c- p>;</c->
  <c- k>align-content</c-><c- p>:</c-> center<c- p>;</c->
  <c- k>height</c-><c- p>:</c-> <c- m>300</c-><c- k>px</c-><c- p>;</c->
  <c- k>border</c-><c- p>:</c-> <c- m>1</c-><c- k>px</c-> solid<c- p>;</c->
<c- p>}</c->

.grid > * <c- p>{</c->
  <c- k>margin</c-><c- p>:</c-> <c- m>5</c-><c- k>px</c-><c- p>;</c->
  <c- k>background</c-><c- p>:</c-> silver<c- p>;</c->
<c- p>}</c->
.grid > <c- nf>:nth-child</c-><c- p>(</c-><c- m>2</c-><c- k>n</c-><c- p>)</c-> <c- p>{</c->
  <c- k>background</c-><c- p>:</c-> pink<c- p>;</c->
<c- p>}</c->

.grid subgrid <c- p>{</c->
  <c- k>display</c-><c- p>:</c-> grid<c- p>;</c->
  <c- k>grid</c-><c- p>:</c-> subgrid / subgrid<c- p>;</c->
  <c- k>grid-row</c-><c- p>:</c-> <c- m>2</c-> / span <c- m>2</c-><c- p>;</c->
  <c- k>grid-gap</c-><c- p>:</c-> <c- m>30</c-><c- k>px</c-><c- p>;</c->
<c- p>}</c->
.grid subgrid > * <c- p>{</c-> <c- k>background</c-><c- p>:</c-> cyan<c- p>;</c-> <c- p>}</c->
&lt;/style>
</pre>
            <pre class="language-html highlight"><c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"grid"</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>item</c-><c- p>></c->1<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>item</c-><c- p>></c->2<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>item</c-><c- p>></c->3<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>subgrid</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>item</c-> <c- e>style</c-><c- o>=</c-><c- s>"height:100px"</c-><c- p>></c->subgrid.1<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>item</c-><c- p>></c->sub.2<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>item</c-><c- p>></c->s.3<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
  <c- p>&lt;/</c-><c- f>subgrid</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>item</c-><c- p>></c->4<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>item</c-><c- p>></c->5<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>item</c-> <c- e>style</c-><c- o>=</c-><c- s>"width: 80px"</c-><c- p>></c->6<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>item</c-><c- p>></c->7<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</pre>
            <figure>
                <img height="315" src="https://www.w3.org/TR/css-grid-3/images/subgrid-example-1.png" width="162">
                <figcaption>上記サブグリッド例のレンダリング。</figcaption>
            </figure>
            <p>サブグリッドの最初のアイテム（"subgrid.1"）が親グリッド2行目の固有サイズに寄与していることに注目してください。
                サブグリッドが明確な位置を指定しているため、どのトラックを占めるか分かります。
                親の<a data-link-type="dfn" href="#stacking-axis"
                    id="ref-for-stacking-axis⑥">積み重ね軸</a>をサブグリッド化しようとすると、サブグリッドの<a data-link-type="dfn"
                    href="#masonry-layout" id="ref-for-masonry-layout⑦">メイソンリーレイアウト</a>が<a data-link-type="dfn"
                    href="https://www.w3.org/TR/css-writing-modes-4/#inline-axis"
                    id="ref-for-inline-axis①">インライン軸</a>で発生することにも注目。</p>
        </div>
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#subgrid" id="ref-for-subgrid②">サブグリッド</a>で<a
                data-link-type="dfn" href="#masonry-container" id="ref-for-masonry-container⑨">メイソンリーコンテナー</a>なら、<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-export id="submasonry">サブメイソンリー</dfn>と呼べます。</p>
        <h3 class="heading settled" data-level="3.3" id="repeat-notation"><span class="secno">3.3. </span><span
                class="content"> トラックの繰り返し：<a class="css" data-link-type="maybe"
                    href="https://drafts.csswg.org/css-gaps-1/#funcdef-repeat" id="ref-for-funcdef-repeat④">repeat()</a>
                記法</span><a class="self-link" href="#repeat-notation"></a></h3>
        <p>この仕様では、<a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-gaps-1/#funcdef-repeat"
                id="ref-for-funcdef-repeat⑤">repeat()</a>記法に新しいキーワードとメイソンリー固有の挙動を導入します。</p>
        <h4 class="heading settled" data-level="3.3.1" id="repeat-auto-areas"><span class="secno">3.3.1. </span><span
                class="content"> repeat(auto-areas)</span><a class="self-link" href="#repeat-auto-areas"></a></h4>
        <p>新しい<a class="dfn-paneled css" data-dfn-for="repeat()" data-dfn-type="value" data-export
                id="valdef-repeat-auto-areas">auto-areas</a>値は、<a class="css" data-link-type="maybe"
                href="https://drafts.csswg.org/css-gaps-1/#funcdef-repeat"
                id="ref-for-funcdef-repeat⑥">repeat()</a>記法において、
            対応する軸の<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-grid-2/#propdef-grid-template-areas"
                id="ref-for-propdef-grid-template-areas">grid-template-areas</a> / <a class="property css"
                data-link-type="property" href="https://www.w3.org/TR/css-grid-3/#propdef-masonry-template-areas"
                id="ref-for-propdef-masonry-template-areas">masonry-template-areas</a>値と
            明示的トラックの合計数が一致するために必要な繰り返し回数を表します。
            複数トラックが繰り返しリストに含まれる場合、正しいトラック数になるよう最後の繰り返しは切り詰められます。</p>
        <p class="note" role="note"><span class="marker">注:</span> <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-grid-2/#valdef-repeat-auto-fit"
                id="ref-for-valdef-repeat-auto-fit②">auto-fit</a>とは異なり—必ず1回以上繰り返し、リスト全体を繰り返す—<a class="css"
                data-link-type="maybe" href="#valdef-repeat-auto-areas"
                id="ref-for-valdef-repeat-auto-areas">auto-areas</a>の繰り返し回数は0になることもあり（すでに十分な明示的トラックがある場合）、
            最後の繰り返しは部分的になることもあります。</p>
        <p>もし<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-grid-2/#propdef-grid-template-areas"
                id="ref-for-propdef-grid-template-areas①">grid-template-areas</a> / <a class="property css"
                data-link-type="property" href="https://www.w3.org/TR/css-grid-3/#propdef-masonry-template-areas"
                id="ref-for-propdef-masonry-template-areas①">masonry-template-areas</a>が<a class="css"
                data-link-type="maybe" href="https://www.w3.org/TR/css-grid-2/#valdef-grid-template-areas-none"
                id="ref-for-valdef-grid-template-areas-none">none</a>の場合、
            この値は<a class="css" data-link-type="maybe" href="https://www.w3.org/TR/css-grid-2/#valdef-repeat-auto-fit"
                id="ref-for-valdef-repeat-auto-fit③">auto-fit</a>と同じ動作になります。</p>
        <p class="note" role="note"><span class="marker">注:</span> この値は通常の<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-grid-2/#grid-container" id="ref-for-grid-container⑥">グリッドコンテナー</a>にも<a
                data-link-type="dfn" href="#masonry-container" id="ref-for-masonry-container①⓪">メイソンリーコンテナー</a>にも適用されます。
        </p>
        <p class="issue" id="issue-33a96346"><a class="self-link" href="#issue-33a96346"></a> 実際にこの値が必要かは不明です。
            明示的グリッドは既に<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-grid-2/#propdef-grid-auto-columns"
                id="ref-for-propdef-grid-auto-columns①">grid-auto-columns</a>/<a class="property css"
                data-link-type="property" href="https://www.w3.org/TR/css-grid-2/#propdef-grid-auto-rows"
                id="ref-for-propdef-grid-auto-rows①">grid-auto-rows</a>/<a class="property css"
                data-link-type="property" href="https://www.w3.org/TR/css-grid-3/#propdef-masonry-auto-tracks"
                id="ref-for-propdef-masonry-auto-tracks">masonry-auto-tracks</a>の値をテンプレートエリア数に合わせて取得しています。<a
                href="https://github.com/w3c/csswg-drafts/issues/10854">[Issue #10854]</a></p>
        <h4 class="heading settled" data-level="3.3.2" id="repeat-auto-fit"><span class="secno">3.3.2. </span><span
                class="content"> repeat(auto-fit)</span><a class="self-link" href="#repeat-auto-fit"></a></h4>
        <p><a data-link-type="dfn" href="#masonry-container" id="ref-for-masonry-container①①">メイソンリーコンテナー</a>（通常の<a
                data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-container"
                id="ref-for-grid-container⑦">グリッドコンテナー</a>同様）では<a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-grid-2/#valdef-repeat-auto-fit"
                id="ref-for-valdef-repeat-auto-fit④">auto-fit</a>は<a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-grid-2/#valdef-repeat-auto-fill"
                id="ref-for-valdef-repeat-auto-fill②">auto-fill</a>のように動作しますが、
            空のトラックは<a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#collapsed-track"
                id="ref-for-collapsed-track">折り畳まれ</a>ます。
            ただし、配置はトラックサイズ指定の後に発生するため、<span id="ref-for-masonry-container①②">メイソンリーコンテナー</span>は
            トラックが埋まるかどうかを判定するためにヒューリスティックを使います：</p>
        <ul>
            <li data-md>
                <p>明示的配置されたアイテムが占めるトラックはすべて「埋まっている」とみなします。</p>
            <li data-md>
                <p>自動配置アイテムのspan合計を<var>N</var>とし、未占有トラックのうち<var>N</var>番目までのトラックを「埋まっている」とみなします。</p>
        </ul>
        <p><a class="css" data-link-type="maybe" href="https://www.w3.org/TR/css-grid-2/#valdef-repeat-auto-fit"
                id="ref-for-valdef-repeat-auto-fit⑤">auto-fit</a>の繰り返しで生成され、上記ヒューリスティックにより「未占有」とみなされたトラックは「空」とされ、<a
                data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#collapsed-track"
                id="ref-for-collapsed-track①">折り畳まれ</a>ます。
            <span id="ref-for-collapsed-track②">折り畳まれたトラック</span>には自動配置アイテムを配置できません。
        </p>
        <p class="note" role="note"><span class="marker">注:</span> <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-grid-2/#valdef-repeat-auto-fill"
                id="ref-for-valdef-repeat-auto-fill③">auto-fill</a>で配置された自動配置アイテムが、
            <a class="css" data-link-type="maybe" href="https://www.w3.org/TR/css-grid-2/#valdef-repeat-auto-fit"
                id="ref-for-valdef-repeat-auto-fit⑥">auto-fit</a>なら折り畳まれるトラックに配置されることもあります。
            これはspan>1の自動配置アイテムと、隙間の小さい明示的配置アイテムが混在する場合に起こり得ます。
        </p>
        <h3 class="heading settled" data-level="3.4" id="track-sizing"><span class="secno">3.4. </span><span
                class="content"> グリッド軸トラックサイズ指定</span><a class="self-link" href="#track-sizing"></a></h3>
        <p>トラックサイズ指定は<a href="https://www.w3.org/TR/css-grid-2/#algo-track-sizing">CSS Grid</a>と同様に動作しますが、
            固有サイズへの寄与アイテムを考慮する際：</p>
        <ul>
            <li data-md>
                <p>そのトラックに明示的配置されたすべてのアイテムが寄与します</p>
            <li data-md>
                <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#automatic-grid-position"
                        id="ref-for-automatic-grid-position">自動グリッド位置</a>のアイテムも（最終的にそのトラックに配置されるか否かに関係なく）すべて寄与します。</p>
        </ul>
        <div class="example" id="example-6d22f73d">
            <a class="self-link" href="#example-6d22f73d"></a> 例えば、<a data-link-type="dfn" href="#grid-axis"
                id="ref-for-grid-axis⑥">グリッド軸</a>に2列あるとします。
            <ul>
                <li data-md>
                    <p>A、B、Cアイテムは明示的な位置指定なし。</p>
                <li data-md>
                    <p>Dアイテムは1列目に明示的配置。</p>
            </ul>
            <p>この場合、A、B、C、Dの全てが1列目のサイズ指定に寄与し、2列目にはA、B、Cのみ（Dは寄与しない）となります。</p>
        </div>
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#automatic-grid-position"
                id="ref-for-automatic-grid-position①">自動グリッド位置</a>でスパンするアイテムの場合、
            配置可能な全ての開始位置に配置されたとみなして寄与します。</p>
        <div class="example" id="example-f3e866aa">
            <a class="self-link" href="#example-f3e866aa"></a> 例えば、<a data-link-type="dfn" href="#grid-axis"
                id="ref-for-grid-axis⑦">グリッド軸</a>に5列あり、
            中央が<span class="css">100px</span>で固定サイズ、他2つが<span class="css">auto</span>サイズの場合。
            トラックサイズ指定のため、
            2トラックをスパンし、固有寄与220pxのアイテムは、
            実質的にコピーされ、以下のように存在するものとします：
            <ul>
                <li data-md>
                    <p>グリッドライン1：最初の2トラックにそれぞれ110px寄与</p>
                <li data-md>
                    <p>グリッドライン2：2番目のトラックに120px寄与</p>
                <li data-md>
                    <p>グリッドライン3：4番目のトラックに120px寄与</p>
                <li data-md>
                    <p>グリッドライン4：4・5番目のトラックにそれぞれ110px寄与</p>
            </ul>
        </div>
        <p class="note" role="note"><span class="marker">注:</span> このアルゴリズムにより、各トラックは最終的に配置されるアイテムを十分に収容できるサイズになります。
            配置とサイズ指定間の依存サイクルは生じません。
            ただし、サイズのばらつきによってはトラックが必要以上に大きくなる場合があり、
            厳密なフィットが保証されるのは
            全アイテムが<a data-link-type="dfn" href="#grid-axis"
                id="ref-for-grid-axis⑧">グリッド軸</a>に明示的配置される場合や、全アイテムのサイズが同じ場合（またはスパンアイテムはその倍数の場合）のみです。</p>
        <h4 class="heading settled" data-level="3.4.1" id="track-sizing-subgrid"><span class="secno">3.4.1. </span><span
                class="content"> サブグリッドアイテムの寄与</span><a class="self-link" href="#track-sizing-subgrid"></a>
        </h4>
        <p>通常の<a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-container"
                id="ref-for-grid-container⑧">グリッドコンテナー</a>や<a data-link-type="dfn" href="#masonry-container"
                id="ref-for-masonry-container①③">メイソンリーコンテナー</a>のトラックサイズ指定時、
            <a data-link-type="dfn" href="#submasonry" id="ref-for-submasonry">サブメイソンリー</a>は、<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-grid-2/#automatic-grid-position"
                id="ref-for-automatic-grid-position②">自動グリッド位置</a>アイテムに対して特別な扱いをします：
        </p>
        <ul>
            <li data-md>
                <p>このようなアイテムは、<a data-link-type="dfn" href="#submasonry"
                        id="ref-for-submasonry①">サブメイソンリー</a>でスパン可能な全トラックに配置されます。
                    （サブメイソンリーが<a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#definite-grid-position"
                        id="ref-for-definite-grid-position①">明示的グリッド位置</a>なら、そのスパンするトラックのみ、
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#automatic-grid-position"
                        id="ref-for-automatic-grid-position③">自動グリッド位置</a>なら親グリッドの全トラック）
                </p>
            <li data-md>
                <p>このようなアイテムは、仮に配置される各エッジで最大のmargin/border/padding寄与を受けます。
                    アイテムがサブグリッド全体をスパンする場合は両方受けます。
                    （<a href="https://www.w3.org/TR/css-grid-2/#subgrid-item-contribution">CSS Grid Layout §9</a>参照）</p>
        </ul>
        <h4 class="heading settled" data-level="3.4.2" id="track-sizing-performance"><span class="secno">3.4.2.
            </span><span class="content"> 最適化されたトラックサイズ指定</span><a class="self-link"
                href="#track-sizing-performance"></a></h4>
        <p>同じスパンサイズ・配置を持つアイテムをまとめて、
            仮想アイテムとして集約することでトラックサイズ指定の最適化が可能です：</p>
        <ol>
            <li>
                以下のプロパティごとに、すべての<a data-link-type="dfn" href="#masonry-item"
                    id="ref-for-masonry-item②">メイソンリーアイテム</a>を<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                    id="item-groups">アイテムグループ</dfn>に分けます：
                <ul>
                    <li data-md>
                        <p>アイテムのスパン数</p>
                    <li data-md>
                        <p>アイテムの配置（どのトラックに配置可能か）</p>
                    <li data-md>
                        <p>アイテムの<a data-link-type="dfn" href="https://www.w3.org/TR/css-align-3/#baseline-sharing-group"
                                id="ref-for-baseline-sharing-group">ベースライン共有グループ</a></p>
                </ul>
                <p class="note" role="note"><span class="marker">注:</span> 例：span 2で2番目トラックに配置のアイテムは、span 2で<a
                        data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#automatic-grid-position"
                        id="ref-for-automatic-grid-position④">自動グリッド位置</a>のアイテムとは異なるグループになります。</p>
            <li>
                各<a data-link-type="dfn" href="#item-groups" id="ref-for-item-groups">アイテムグループ</a>について、
                グループ内の全アイテムの固有サイズ寄与の最大値を持つ<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                    id="virtual-masonry-item">仮想メイソンリーアイテム</dfn>を合成します。
                <p>アイテムが<a data-link-type="dfn" href="https://www.w3.org/TR/css-align-3/#baseline-alignment"
                        id="ref-for-baseline-alignment">ベースライン整列</a>を適用する場合、
                    <a data-link-type="dfn" href="#virtual-masonry-item"
                        id="ref-for-virtual-masonry-item①">仮想メイソンリーアイテム</a>のベースラインは、全アイテムを仮想グリッドトラックに配置して共有ベースライン・shimを求め、
                    グループの固有サイズ寄与を増加させます。
                </p>
            <li> 各<a data-link-type="dfn" href="#virtual-masonry-item"
                    id="ref-for-virtual-masonry-item②">仮想メイソンリーアイテム</a>の仮想コピーを、
                配置可能なすべての位置に<a data-link-type="dfn" href="#grid-axis" id="ref-for-grid-axis⑨">グリッド軸</a>トラックに配置し、
                <a href="https://www.w3.org/TR/css-grid-2/#algo-track-sizing">トラックサイズ指定アルゴリズム</a>を実行します。
                得られたトラックサイズが<a data-link-type="dfn" href="#masonry-container"
                    id="ref-for-masonry-container①④">メイソンリーコンテナー</a>のトラックサイズです。
        </ol>
        <p class="note" role="note"><span class="marker">注:</span> この最適化は<a
                href="#track-sizing">上記</a>のトラックサイズ指定と同じ結果になるはずです。
            そうでなければ仕様の誤りなので、<a href="https://github.com/w3c/csswg-drafts/issues">CSSWGへ報告してください</a>。</p>
        <h2 class="heading settled" data-level="4" id="masonry-track-placement"><span class="secno">4. </span><span
                class="content">メイソンリー配置</span><a class="self-link" href="#masonry-track-placement"></a></h2>
        <p><a data-link-type="dfn" href="#grid-axis" id="ref-for-grid-axis①⓪">グリッド軸</a>では、
            アイテムをトラックに<span>明示的配置</span>し、スパンする場合は<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-grid-2/#grid-placement-property"
                id="ref-for-grid-placement-property">grid-placementプロパティ</a>の構文を使います。
            一方、自動配置は<a href="#masonry-layout-algorithm">§ 4.3 メイソンリーレイアウトと配置アルゴリズム</a>を使い、
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#automatic-grid-position"
                id="ref-for-automatic-grid-position⑤">自動グリッド位置</a>を持つアイテムを、利用可能な「最も短い」メイソンリートラックへ配置します。
        </p>
        <div class="example" id="example-26ddc5f7">
            <a class="self-link" href="#example-26ddc5f7"></a> 配置・スパンアイテムを示すメイソンリーレイアウト<a
                href="examples/pinterest-with-span.html">例</a>：
            <figure>
                <img height="885" src="https://www.w3.org/TR/css-grid-3/images/example-pinterest-with-span.png"
                    width="902">
                <figcaption>上記例のレンダリング。</figcaption>
            </figure>
            <p class="issue" id="issue-33788d66"><a class="self-link" href="#issue-33788d66"></a> より良い例が必要!!!</p>
        </div>
        <h3 class="heading settled" data-level="4.1" id="masonry-placement-grid-option"><span class="secno">4.1.
            </span><span class="content">メイソンリーアイテムの配置指定：<span class="css">grid-column-*</span>
                および<span class="css">grid-row-*</span>プロパティ</span><a class="self-link"
                href="#masonry-placement-grid-option"></a></h3>
        <p><span class="css">grid-column-*</span>および<span class="css">grid-row-*</span>プロパティ（およびショートハンド）は、
            アイテムの<a data-link-type="dfn" href="#grid-axis" id="ref-for-grid-axis①①">グリッド軸</a>で適用され、
            通常の<a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-layout"
                id="ref-for-grid-layout⑧">グリッドレイアウト</a>と同様に配置されます。</p>
        <h3 class="heading settled" data-level="4.2" id="item-slack"><span class="secno">4.2. </span><span
                class="content">配置精度：<a class="property css" data-link-type="property" href="#propdef-item-slack"
                    id="ref-for-propdef-item-slack②">item-slack</a>プロパティ</span><a class="self-link"
                href="#item-slack"></a></h3>
        <table class="def propdef" data-link-for-hint="item-slack">
            <tbody>
                <tr>
                    <th>名前:
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-item-slack">item-slack</dfn>
                <tr class="value">
                    <th><a href="https://www.w3.org/TR/css-values/#value-defs">値:</a>
                    <td class="prod"><a class="production css" data-link-type="type"
                            href="https://www.w3.org/TR/css-values-4/#typedef-length-percentage"
                            id="ref-for-typedef-length-percentage">&lt;length-percentage></a> <a
                            data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one"
                            id="ref-for-comb-one">|</a> infinite
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">初期値:</a>
                    <td>1em
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">適用対象:</a>
                    <td><a data-link-type="dfn" href="#masonry-container"
                            id="ref-for-masonry-container①⑤">メイソンリーコンテナー</a>
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">継承:</a>
                    <td>no
                <tr>
                    <th><a href="https://www.w3.org/TR/css-values/#percentages">パーセンテージ:</a>
                    <td><a data-link-type="dfn" href="#grid-axis" id="ref-for-grid-axis①②">グリッド軸</a>の<a
                            data-link-type="dfn" href="https://www.w3.org/TR/CSS21/box.html#x10"
                            id="ref-for-x10">内容ボックス</a>サイズに対して
                        <a data-link-type="dfn" href="#masonry-container"
                            id="ref-for-masonry-container①⑥">メイソンリーコンテナー</a>のサイズ
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#computed">算出値:</a>
                    <td>算出された<a class="production css" data-link-type="type"
                            href="https://www.w3.org/TR/css-values-4/#typedef-length-percentage"
                            id="ref-for-typedef-length-percentage①">&lt;length-percentage></a>値
                <tr>
                    <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">正規順序:</a>
                    <td>文法通り
                <tr>
                    <th><a href="https://www.w3.org/TR/web-animations/#animation-type">アニメーション型:</a>
                    <td>length型
        </table>
        <p><a data-link-type="dfn" href="#masonry-container" id="ref-for-masonry-container①⑦">メイソンリーコンテナー</a>は、
            各<a data-link-type="dfn" href="#masonry-item" id="ref-for-masonry-item③">メイソンリーアイテム</a>を現在最も埋まっていない<a
                data-link-type="dfn" href="#masonry-track" id="ref-for-masonry-track">メイソンリートラック</a>へ配置することで埋めていきます。
            複数トラックが最も埋まっていない場合、順番に配置すると見栄えが良いですが、
            高さ差が<em>ごくわずか</em>だと、順番通りに埋まらないと違和感が生じます。
            この高さ差が<em>意味のある</em>違いと認識されないためです。</p>
        <p><a class="property css" data-link-type="property" href="#propdef-item-slack"
                id="ref-for-propdef-item-slack③">item-slack</a>プロパティは、「同じ高さ」とみなすしきい値を指定し、
            順番通りに埋める挙動をもたらします。</p>
        <dl>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="item-slack" data-dfn-type="value" data-export
                    id="valdef-item-slack-length-percentage"><a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-values-4/#typedef-length-percentage"
                        id="ref-for-typedef-length-percentage②">&lt;length-percentage></a></dfn>
            <dd data-md>
                <p><a data-link-type="dfn" href="#masonry-container"
                        id="ref-for-masonry-container①⑧">メイソンリーコンテナー</a>の<dfn class="dfn-paneled" data-dfn-for="masonry"
                        data-dfn-type="dfn" data-noexport id="masonry-tie-threshold">同点しきい値</dfn>を指定します。
                    配置位置が最短位置から指定距離以内なら「同点」とみなし、どちらでも良いと判定します。</p>
                <p class="note" role="note"><span class="marker">注:</span> 初期値は「小さい」距離（<span
                        class="css">1em</span>）で、「十分近い」を表現するのに適切です。</p>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="item-slack" data-dfn-type="value" data-export
                    id="valdef-item-slack-infinite">infinite</dfn>
            <dd data-md>
                <p>無限の<a data-link-type="dfn" href="#masonry-tie-threshold"
                        id="ref-for-masonry-tie-threshold">同点しきい値</a>を指定します。
                    アイテムはトラック長さを考慮せず、厳密に順番通りに配置されます。</p>
                <p class="note" role="note"><span class="marker">注:</span> この値だと、連続アイテムが<a data-link-type="dfn"
                        href="#stacking-axis" id="ref-for-stacking-axis⑦">積み重ね軸</a>で大きく異なる位置に配置されることもあり、読者が混乱することがあります。
                    初期値（`1em`）が小さすぎる場合は、`10em`や`50vh`など大きめの値を使うことを推奨します。</p>
        </dl>
        <p class="issue" id="issue-7bbfe9d5"><a class="self-link" href="#issue-7bbfe9d5"></a> <span
                class="css">1em</span>はデフォルトとして適切か？</p>
        <h3 class="heading settled" data-level="4.3" id="masonry-layout-algorithm"><span class="secno">4.3. </span><span
                class="content">メイソンリーレイアウトと配置アルゴリズム</span><a class="self-link" href="#masonry-layout-algorithm"></a>
        </h3>
        <p><a data-link-type="dfn" href="#grid-axis" id="ref-for-grid-axis①③">グリッド軸</a>の各トラックごとに、
            0で初期化された<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="running-position">進行位置</dfn>を保持します。
            また、<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="auto-placement-cursor">自動配置カーソル</dfn>も管理し、
            初期状態では最初のラインを指します。</p>
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-flexbox-1/#order-modified-document-order"
                id="ref-for-order-modified-document-order">順序修正済み文書順</a>の各アイテムについて：</p>
        <ol>
            <li>
                アイテムが<a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#definite-grid-position"
                    id="ref-for-definite-grid-position②">明示的グリッド位置</a>を<a data-link-type="dfn" href="#grid-axis"
                    id="ref-for-grid-axis①④">グリッド軸</a>で持つ場合、
                その配置を使用します。
                <p class="issue" id="issue-9c647ef6"><a class="self-link" href="#issue-9c647ef6"></a>
                    この場合、配置カーソルも更新すべきか？</p>
                <p>それ以外の場合、次のサブステップで<a data-link-type="dfn" href="#grid-axis"
                        id="ref-for-grid-axis①⑤">グリッド軸</a>の配置を解決します：</p>
                <ol>
                    <li>最初の<a data-link-type="dfn" href="#grid-axis" id="ref-for-grid-axis①⑥">グリッド軸</a>ラインから<a
                            data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#implicit-grid"
                            id="ref-for-implicit-grid①">暗黙グリッド</a>で開始し、
                        その位置にアイテムを置いた場合にスパンする<a data-link-type="dfn" href="#running-position"
                            id="ref-for-running-position">進行位置</a>の最大値を見つけ、
                        これを<var>max_pos</var>とします。
                    <li>前ステップを次のライン番号ごとにアイテムがグリッド内に収まらなくなるまで繰り返す。
                    <li>最小の<var>max_pos</var>となったライン、およびその<var>max_pos</var>から<a data-link-type="dfn"
                            href="#masonry-tie-threshold"
                            id="ref-for-masonry-tie-threshold①">同点しきい値</a>以内となる全ラインを<var>possible lines</var>とする。
                    <li><var>possible lines</var>内で<a data-link-type="dfn" href="#auto-placement-cursor"
                            id="ref-for-auto-placement-cursor">自動配置カーソル</a>以上の最初のラインをアイテムの<a data-link-type="dfn"
                            href="#grid-axis" id="ref-for-grid-axis①⑧">グリッド軸</a>の位置とする。
                        なければ最初のものを選ぶ。
                    <li><a data-link-type="dfn" href="#auto-placement-cursor"
                            id="ref-for-auto-placement-cursor①">自動配置カーソル</a>をアイテムの最終ラインに更新する。
                </ol>
            <li> アイテムをその<a data-link-type="dfn" href="#grid-axis" id="ref-for-grid-axis①⑨">グリッド軸</a>トラックの、
                スパンするトラックの<a data-link-type="dfn" href="#running-position"
                    id="ref-for-running-position①">進行位置</a>の最大値で配置する。
            <li> アイテムの<a href="#containing-block">包含ブロック</a>のサイズを計算し、レイアウトする。
                スパンした<a data-link-type="dfn" href="#grid-axis" id="ref-for-grid-axis②⓪">グリッド軸</a>トラックの<a
                    data-link-type="dfn" href="#running-position" id="ref-for-running-position②">進行位置</a>を
                <code><var>max_pos</var> + <a data-link-type="dfn" href="https://www.w3.org/TR/css-sizing-3/#outer-size" id="ref-for-outer-size">outer size</a> + <a class="property css" data-link-type="property" href="https://www.w3.org/TR/css-align-3/#propdef-grid-gap" id="ref-for-propdef-grid-gap">grid-gap</a></code>
                にセットする。
        </ol>
        <p class="note" role="note"><span class="marker">注:</span> このアルゴリズムは、アイテムができるだけ高い位置に配置されるようトラックを選びます。
            同点の場合は、可能なら直前のアイテムより後の最も早いトラックを選ぶことで、必ず「前進」する動作となります。</p>
        <h4 class="heading settled" data-level="4.3.1" id="containing-block"><span class="secno">4.3.1. </span><span
                class="content">包含ブロック</span><a class="self-link" href="#containing-block"></a></h4>
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-item"
                id="ref-for-grid-item③">グリッドアイテム</a>が<a data-link-type="dfn" href="#masonry-layout"
                id="ref-for-masonry-layout⑧">メイソンリーレイアウト</a>に参加する場合の<a data-link-type="dfn"
                href="https://www.w3.org/TR/CSS21/visuren.html#containing-block"
                id="ref-for-containing-block">包含ブロック</a>は、
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-area"
                id="ref-for-grid-area">グリッドエリア</a>（<a data-link-type="dfn" href="#grid-axis"
                id="ref-for-grid-axis②①">グリッド軸</a>）と、
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-container"
                id="ref-for-grid-container⑨">グリッドコンテナー</a>の<a data-link-type="dfn"
                href="https://www.w3.org/TR/CSS21/box.html#x10" id="ref-for-x10①">内容ボックス</a>（<a data-link-type="dfn"
                href="#stacking-axis" id="ref-for-stacking-axis⑧">積み重ね軸</a>）によって構成されます。
        </p>
        <h4 class="heading settled" data-level="4.3.2" id="rtl-example"><span class="secno">4.3.2. </span><span
                class="content">配置と書字モード</span><a class="self-link" href="#rtl-example"></a></h4>
        <p class="note" role="note"><span class="marker">注:</span> <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-grid-2/#grid-layout" id="ref-for-grid-layout⑨">グリッドレイアウト</a>全体と同様、
            メイソンリーレイアウトや配置も<a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#writing-mode"
                id="ref-for-writing-mode">書字モード</a>に依存します。
            たとえば<a class="css" data-link-type="propdesc"
                href="https://www.w3.org/TR/css-writing-modes-3/#propdef-direction"
                id="ref-for-propdef-direction">direction: rtl</a>の場合、
            インライン軸が<a data-link-type="dfn" href="#grid-axis" id="ref-for-grid-axis②②">グリッド軸</a>でも<a data-link-type="dfn"
                href="#stacking-axis" id="ref-for-stacking-axis⑨">積み重ね軸</a>でも、
            アイテムは左から右でなく右から左に配置されます。</p>
        <div class="example" id="example-f7337db7">
            <a class="self-link" href="#example-f7337db7"></a> <a href="examples/rtl-grid-axis.html">例</a>：<a
                class="css" data-link-type="propdesc"
                href="https://www.w3.org/TR/css-writing-modes-3/#propdef-direction"
                id="ref-for-propdef-direction①">direction: rtl</a>を<a data-link-type="dfn" href="#grid-axis"
                id="ref-for-grid-axis②③">グリッド軸</a>で使う場合：
            <pre class="language-css highlight">&lt;style>
  .grid <c- p>{</c->
    //FIXME display: inline-grid<c- p>;</c-> or something
    direction: rtl<c- p>;</c->
    <c- k>grid-template-columns</c-><c- p>:</c-> <c- nf>repeat</c-><c- p>(</c-><c- m>4</c-><c- p>,</c-> <c- m>2</c-><c- k>ch</c-><c- p>);</c->
    <c- k>border</c-><c- p>:</c-> <c- m>1</c-><c- k>px</c-> solid<c- p>;</c->
  <c- p>}</c->

  item <c- p>{</c-> <c- k>background</c-><c- p>:</c-> silver <c- p>}</c->
  item<c- nf>:nth-child</c-><c- p>(</c-><c- m>2</c-><c- k>n</c-><c- m>+1</c-><c- p>)</c-> <c- p>{</c->
    <c- k>background</c-><c- p>:</c-> pink<c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <c- m>4</c-><c- k>em</c-><c- p>;</c->
  <c- p>}</c->
  &lt;/style>
</pre>
            <pre class="language-html highlight"><c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"grid"</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>item</c-><c- p>></c->1<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>item</c-> <c- e>style</c-><c- o>=</c-><c- s>"grid-column:span 2"</c-><c- p>></c->2<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>item</c-><c- p>></c->3<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>item</c-><c- p>></c->4<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</pre>
            <figure>
                <img height="107" src="https://www.w3.org/TR/css-grid-3/images/rtl-grid-axis.png" width="128">
                <figcaption>上記<a class="css" data-link-type="propdesc"
                        href="https://www.w3.org/TR/css-writing-modes-3/#propdef-direction"
                        id="ref-for-propdef-direction②">direction: rtl</a>例のレンダリング。</figcaption>
            </figure>
        </div>
        <div class="example" id="example-e0fb18a7">
            <a class="self-link" href="#example-e0fb18a7"></a> <a href="examples/rtl-masonry-axis.html">例</a>：<a
                class="css" data-link-type="propdesc"
                href="https://www.w3.org/TR/css-writing-modes-3/#propdef-direction"
                id="ref-for-propdef-direction③">direction: rtl</a>を<a data-link-type="dfn" href="#stacking-axis"
                id="ref-for-stacking-axis①⓪">積み重ね軸</a>で使う場合：
            <pre class="language-css highlight">&lt;style>
.grid <c- p>{</c->
  //FIXME display: inline-grid<c- p>;</c-> or something
  direction: rtl<c- p>;</c->
  <c- k>width</c-><c- p>:</c-> <c- m>10</c-><c- k>ch</c-><c- p>;</c->
  <c- k>column-gap</c-><c- p>:</c-> <c- m>1</c-><c- k>ch</c-><c- p>;</c->
  <c- k>grid-template-rows</c-><c- p>:</c-> <c- nf>repeat</c-><c- p>(</c-><c- m>4</c-><c- p>,</c-> <c- m>2</c-><c- k>em</c-><c- p>);</c->
  <c- k>border</c-><c- p>:</c-> <c- m>1</c-><c- k>px</c-> solid<c- p>;</c->
<c- p>}</c->

item <c- p>{</c-> <c- k>background</c-><c- p>:</c-> silver <c- p>}</c->
item<c- nf>:nth-child</c-><c- p>(</c-><c- m>2</c-><c- k>n</c-><c- m>+1</c-><c- p>)</c-> <c- p>{</c->
  <c- k>background</c-><c- p>:</c-> pink<c- p>;</c->
  <c- k>width</c-><c- p>:</c-> <c- m>4</c-><c- k>ch</c-><c- p>;</c->
<c- p>}</c->
&lt;/style>
</pre>
            <pre class="language-html highlight"><c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"grid"</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>item</c-><c- p>></c->1<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>item</c-> <c- e>style</c-><c- o>=</c-><c- s>"grid-row:span 2"</c-><c- p>></c->2<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>item</c-><c- p>></c->3<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>item</c-><c- p>></c->4<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</pre>
            <figure>
                <img height="203" src="https://www.w3.org/TR/css-grid-3/images/rtl-masonry-axis.png" width="161">
                <figcaption>上記<a class="css" data-link-type="propdesc"
                        href="https://www.w3.org/TR/css-writing-modes-3/#propdef-direction"
                        id="ref-for-propdef-direction④">direction: rtl</a>例のレンダリング。</figcaption>
            </figure>
        </div>
        <h2 class="heading settled" data-level="5" id="intrinsic-sizes"><span class="secno">5. </span><span
                class="content">グリッドコンテナーのサイズ指定</span><a class="self-link" href="#intrinsic-sizes"></a></h2>
        <p><a href="https://www.w3.org/TR/css-grid-2/#intrinsic-sizes">グリッドコンテナーのサイズ指定</a>は、通常の<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-grid-2/#grid-container"
                id="ref-for-grid-container①⓪">グリッドコンテナー</a>と同様に動作しますが、<a data-link-type="dfn" href="#stacking-axis"
                id="ref-for-stacking-axis①①">積み重ね軸</a>に関しては次の追加があります：
            <span id="ref-for-stacking-axis①②">積み重ね軸</span>における<span id="ref-for-grid-container①①">グリッドコンテナー</span>の<a
                data-link-type="dfn" href="https://www.w3.org/TR/css-sizing-3/#max-content"
                id="ref-for-max-content">max-contentサイズ</a>（<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-sizing-3/#min-content" id="ref-for-min-content">min-contentサイズ</a>）は、
            その軸で<a data-link-type="dfn" href="#masonry-box" id="ref-for-masonry-box">メイソンリーボックス</a>を<a
                data-link-type="dfn" href="https://www.w3.org/TR/css-sizing-3/#max-content-constraint"
                id="ref-for-max-content-constraint">max-content制約</a>（<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-sizing-3/#min-content-constraint"
                id="ref-for-min-content-constraint">min-content制約</a>）下でサイズ指定したときのサイズです。
        </p>
        <div class="example" id="example-867932d9">
            <a class="self-link" href="#example-867932d9"></a> <a
                href="examples/grid-intrinsic-sizing-example-1.html">例</a>：
            <pre class="language-css highlight">&lt;style>
.grid <c- p>{</c->
  //FIXME display: inline-grid<c- p>;</c-> or something
  grid-template-columns: <c- m>50</c-><c- k>px</c-> <c- m>100</c-><c- k>px</c-> auto<c- p>;</c->
  <c- k>grid-gap</c-><c- p>:</c-> <c- m>10</c-><c- k>px</c-><c- p>;</c->
  <c- k>border</c-><c- p>:</c-> <c- m>1</c-><c- k>px</c-> solid<c- p>;</c->
<c- p>}</c->
item <c- p>{</c-> <c- k>background</c-><c- p>:</c-> silver<c- p>;</c-> <c- k>margin</c-><c- p>:</c-> <c- m>5</c-><c- k>px</c-><c- p>;</c-> <c- p>}</c->
&lt;/style>
</pre>
            <pre class="language-html highlight"><c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"grid"</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>item</c-> <c- e>style</c-><c- o>=</c-><c- s>"border:10px solid"</c-><c- p>></c->1<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>item</c-><c- p>></c->2<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>item</c-><c- p>></c->3<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>item</c-> <c- e>style</c-><c- o>=</c-><c- s>"height:50px"</c-><c- p>></c->4<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>item</c-><c- p>></c->5<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>item</c-><c- p>></c->6<c- p>&lt;/</c-><c- f>item</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</pre>
            <figure>
                <img height="158" src="https://www.w3.org/TR/css-grid-3/images/grid-intrinsic-sizing-example-1.png"
                    width="294">
                <figcaption>上記<a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-container"
                        id="ref-for-grid-container①②">グリッドコンテナー</a>の固有サイズ指定例のレンダリング。</figcaption>
            </figure>
        </div>
        <h2 class="heading settled" data-level="6" id="alignment"><span class="secno">6. </span><span class="content">
                整列と間隔</span><a class="self-link" href="#alignment"></a></h2>
        <p><a href="https://www.w3.org/TR/css-grid-2/#gutters">ガター</a>は両軸でサポートされます。
            <a data-link-type="dfn" href="#stacking-axis" id="ref-for-stacking-axis①③">積み重ね軸</a>では、
            隣接するアイテムのmarginボックス間にギャップが適用されます。
            マージンはどちらの軸でも折り畳みされません。
        </p>
        <p><a data-link-type="dfn" href="#grid-axis" id="ref-for-grid-axis②④">グリッド軸</a>では、<a
                href="https://www.w3.org/TR/css-grid-2/#alignment">整列</a>は通常の<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-grid-2/#grid-container"
                id="ref-for-grid-container①③">グリッドコンテナー</a>と同じです。</p>
        <p><a data-link-type="dfn" href="#stacking-axis" id="ref-for-stacking-axis①④">積み重ね軸</a>では、<a
                href="https://www.w3.org/TR/css-align-3/#content-distribution">コンテンツ分布</a>が
            ブロックコンテナーと同様に内容全体に適用されます。
            より具体的には、<a data-link-type="dfn" href="https://www.w3.org/TR/css-align-3/#alignment-subject"
                id="ref-for-alignment-subject">整列対象</a>は<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="masonry-box">メイソンリーボックス</dfn>で、
            これは全<a data-link-type="dfn" href="https://www.w3.org/TR/CSS21/box.html#x17"
                id="ref-for-x17">marginボックス</a>を含む最小の矩形です。</p>
        <figure>
            <img height="136" src="https://www.w3.org/TR/css-grid-3/images/masonry-box.png" width="166">
            <figcaption><a data-link-type="dfn" href="#masonry-box"
                    id="ref-for-masonry-box①">メイソンリーボックス</a>の範囲は破線で示されています。
                （ここでitem 1は5pxの下マージンを持っています）</figcaption>
        </figure>
        <p class="note" role="note"><span class="marker">注:</span> <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-align-3/#alignment-subject" id="ref-for-alignment-subject①">整列対象</a>は、<a
                data-link-type="dfn" href="#stacking-axis"
                id="ref-for-stacking-axis①⑤">積み重ね軸</a>のこれらのプロパティに対して常に1つだけ存在します。
            そのため、<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-align-3/#propdef-align-content"
                id="ref-for-propdef-align-content">align-content</a> / <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-align-3/#propdef-justify-content"
                id="ref-for-propdef-justify-content">justify-content</a>の値は、<a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-align-3/#valdef-self-position-start"
                id="ref-for-valdef-self-position-start">start</a>、<a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-align-3/#valdef-self-position-center"
                id="ref-for-valdef-self-position-center">center</a>、<a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-align-3/#valdef-self-position-end"
                id="ref-for-valdef-self-position-end">end</a>、
            および<a data-link-type="dfn" href="https://www.w3.org/TR/css-align-3/#baseline-alignment"
                id="ref-for-baseline-alignment①">ベースライン整列</a>に集約されます。
            （<a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-align-3/#valdef-justify-content-normal"
                id="ref-for-valdef-justify-content-normal">normal</a>や<a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-align-3/#valdef-align-content-stretch"
                id="ref-for-valdef-align-content-stretch">stretch</a>の挙動は<span class="css"
                id="ref-for-valdef-self-position-start①">start</span>と同じです。
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-align-3/#distributed-alignment"
                id="ref-for-distributed-alignment">分布整列</a>値は<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-align-3/#fallback-alignment"
                id="ref-for-fallback-alignment">フォールバック整列</a>の挙動になります。）
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-item"
                id="ref-for-grid-item⑤">グリッドアイテム</a>が<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-grid-2/#grid-container" id="ref-for-grid-container①④">グリッドコンテナー</a>の<a
                data-link-type="dfn" href="https://www.w3.org/TR/CSS21/box.html#x10" id="ref-for-x10②">内容ボックス</a>（<span
                id="ref-for-stacking-axis①⑥">積み重ね軸</span>）をオーバーフローした場合、
            <a data-link-type="dfn" href="#masonry-box" id="ref-for-masonry-box②">メイソンリーボックス</a>は<span
                id="ref-for-grid-container①⑤">グリッドコンテナー</span>の<span id="ref-for-x10③">内容ボックス</span>より大きくなります。
        </p>
        <p class="issue" id="issue-491b71c9"><a class="self-link" href="#issue-491b71c9"></a> 積み重ね軸の整列はもっと高度なことをするべきか？
            どうすべきか？</p>
        <h3 class="heading settled" data-level="6.1" id="masonry-axis-baseline-alignment"><span class="secno">6.1.
            </span><span class="content">積み重ね軸でのベースライン整列</span><a class="self-link"
                href="#masonry-axis-baseline-alignment"></a></h3>
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-align-3/#baseline-alignment"
                id="ref-for-baseline-alignment②">ベースライン整列</a>は、<a data-link-type="dfn" href="#grid-axis"
                id="ref-for-grid-axis②⑤">グリッド軸</a>トラック内では通常の<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-grid-2/#grid-container"
                id="ref-for-grid-container①⑥">グリッドコンテナー</a>と同様に動作し、
            <span id="ref-for-grid-container①⑦">グリッドコンテナー</span>のベースラインもその軸で通常の<span
                id="ref-for-grid-container①⑧">グリッドコンテナー</span>と同じ方法で決まります。
        </p>
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-align-3/#baseline-alignment"
                id="ref-for-baseline-alignment③">ベースライン整列</a>は<a data-link-type="dfn" href="#stacking-axis"
                id="ref-for-stacking-axis①⑦">積み重ね軸</a>ではサポートされません。
            この軸での<a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-container"
                id="ref-for-grid-container①⑨">グリッドコンテナー</a>の最初のベースラインセットは、
            最初に配置されたトラック内最初の<a data-link-type="dfn" href="https://www.w3.org/TR/css-align-3/#alignment-baseline"
                id="ref-for-alignment-baseline">整列ベースライン</a>から生成され、
            最後のベースラインセットは最後に配置された<span id="ref-for-grid-item⑦">グリッドアイテム</span>から生成されます。</p>
        <p class="issue" id="issue-4a2d589c"><a class="self-link" href="#issue-4a2d589c"></a>
            最初の行でベースライン整列をサポートできるが、望むか？</p>
        <p class="issue" id="issue-f1320409"><a class="self-link" href="#issue-f1320409"></a>
            最後のベースラインは最後に一番下に配置されたアイテムから取得すべきか？</p>
        <h2 class="heading settled" data-level="7" id="pagination"><span class="secno">7. </span><span class="content">
                分断</span><a class="self-link" href="#pagination"></a></h2>
        <h3 class="heading settled" data-level="7.1" id="masonry-axis-pagination"><span class="secno">7.1. </span><span
                class="content">積み重ね軸での分断</span><a class="self-link" href="#masonry-axis-pagination"></a></h3>
        <p>各<a data-link-type="dfn" href="#grid-axis" id="ref-for-grid-axis②⑥">グリッド軸</a>トラックは、<a data-link-type="dfn"
                href="#stacking-axis" id="ref-for-stacking-axis①⑧">積み重ね軸</a>で独立して分断されます。
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-item"
                id="ref-for-grid-item⑧">グリッドアイテム</a>が分断された場合や、前後に<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-break-4/#forced-break" id="ref-for-forced-break">強制改ページ</a>がある場合、
            そのアイテムがスパンするトラックの<a data-link-type="dfn" href="#running-position"
                id="ref-for-running-position③">進行位置</a>は、<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-break-4/#fragmentainer"
                id="ref-for-fragmentainer">フラグメンテイナー</a>のサイズにセットされ、それ以降のアイテムはそのトラックに配置されません。
            複数フラグメントに分割されたアイテムは、すべてのフラグメントで<span id="ref-for-grid-axis②⑧">グリッド軸</span>の配置を保持します。
            押し出されたグリッドアイテムは、次の<a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-container"
                id="ref-for-grid-container②⓪">グリッドコンテナー</a>フラグメントで再配置されます。
            すべてのアイテムが配置されるか新しいフラグメントに押し出されるまで、配置は続行されます。
        </p>
        <div class="example" id="example-d9ac598c">
            <a class="self-link" href="#example-d9ac598c"></a> <a
                href="examples/fragmentation-block-axis-example.html">例</a>：<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-writing-modes-4/#block-axis"
                id="ref-for-block-axis②">ブロック軸</a>でメイソンリーレイアウトのグリッド分断を示します。
            このようにレンダリングされます:
            <figure style="max-width:100%">
                <video controls src="https://www.w3.org/TR/css-grid-3/images/fragmentation-block-axis-example.mp4"
                    style="max-width:100%"></video>
                <figcaption> <a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#block-axis"
                        id="ref-for-block-axis③">ブロック軸</a>の<a data-link-type="dfn" href="#masonry-layout"
                        id="ref-for-masonry-layout⑨">メイソンリーレイアウト</a>での分断の可視化。 </figcaption>
            </figure>
        </div>
        <h3 class="heading settled" data-level="7.2" id="grid-axis-pagination"><span class="secno">7.2. </span><span
                class="content">グリッド軸での分断</span><a class="self-link" href="#grid-axis-pagination"></a></h3>
        <p>他方の軸で<a data-link-type="dfn" href="#masonry-layout"
                id="ref-for-masonry-layout①⓪">メイソンリーレイアウト</a>が使われている場合でも、<a data-link-type="dfn" href="#grid-axis"
                id="ref-for-grid-axis②⑨">グリッド軸</a>での分断はサポートされています。
            この場合、分断は通常の<a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-container"
                id="ref-for-grid-container②①">グリッドコンテナー</a>のように動作しますが、
            分断の前に各アイテムがどの<span id="ref-for-grid-axis③⓪">グリッド軸</span>トラックに配置されるかを決定するステップが追加されます。</p>
        <div class="example" id="example-62d55948">
            <a class="self-link" href="#example-62d55948"></a> <a
                href="examples/fragmentation-inline-axis-example.html">例</a>：<a data-link-type="dfn"
                href="#masonry-layout" id="ref-for-masonry-layout①①">メイソンリーレイアウト</a>が<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-writing-modes-4/#inline-axis"
                id="ref-for-inline-axis②">インライン軸</a>で使われているグリッドの分断を示します。
            この場合、改ページは<a data-link-type="dfn" href="#grid-axis" id="ref-for-grid-axis③①">グリッド軸</a>の行間で発生します。
            このようにレンダリングされます:
            <figure style="max-width:100%">
                <video controls src="https://www.w3.org/TR/css-grid-3/images/fragmentation-inline-axis-example.mp4"
                    style="max-width:100%"></video>
                <figcaption> <a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#block-axis"
                        id="ref-for-block-axis④">ブロック軸</a>における<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-writing-modes-4/#inline-axis"
                        id="ref-for-inline-axis③">インライン軸</a>の<a data-link-type="dfn" href="#masonry-layout"
                        id="ref-for-masonry-layout①②">メイソンリーレイアウト</a>での分断の可視化。 </figcaption>
            </figure>
        </div>
        <h2 class="heading settled" data-level="8" id="abspos"><span class="secno">8. </span><span class="content">
                絶対位置指定</span><a class="self-link" href="#abspos"></a></h2>
        <p><a href="https://www.w3.org/TR/css-grid-1/#abspos-items">グリッド揃えの絶対位置指定された子孫</a>は、
            <a data-link-type="dfn" href="#masonry-container" id="ref-for-masonry-container①⑨">メイソンリーコンテナー</a>でも通常の<a
                data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-container"
                id="ref-for-grid-container②②">グリッドコンテナー</a>と同様にサポートされますが、
            <a data-link-type="dfn" href="#stacking-axis" id="ref-for-stacking-axis①⑨">積み重ね軸</a>では配置用に2つのライン（<span
                class="css">auto</span>ラインを除く）のみ存在します：
        </p>
        <ul>
            <li data-md>
                <p>line 1（line -2）は<a data-link-type="dfn" href="#masonry-box"
                        id="ref-for-masonry-box③">メイソンリーボックス</a>の開始端に対応します</p>
            <li data-md>
                <p>line 2（line -1）は<a data-link-type="dfn" href="#masonry-box"
                        id="ref-for-masonry-box④">メイソンリーボックス</a>の終了端に対応します</p>
        </ul>
        <p class="issue" id="issue-4007c2e6"><a class="self-link" href="#issue-4007c2e6"></a> <a data-link-type="dfn"
                href="#stacking-axis" id="ref-for-stacking-axis②⓪">積み重ね軸</a>でstatic positionを定義すると便利かもしれません。
            その時点の<a data-link-type="dfn" href="#grid-axis" id="ref-for-grid-axis③②">グリッド軸</a>トラックの<a
                data-link-type="dfn" href="#running-position"
                id="ref-for-running-position④">進行位置</a>の最大値（または最小値？）や、直前のアイテムの末端などが定義できるかも？</p>
        <h2 class="heading settled" data-level="9" id="graceful-degradation"><span class="secno">9. </span><span
                class="content">グレースフルデグラデーション</span><a class="self-link" href="#graceful-degradation"></a></h2>
        <p>一般的に、グリッドレイアウトはサポートされているがメイソンリーレイアウトは未サポートのUAでも、メイソンリーデザインは比較的きれいに劣化することが期待できます。</p>
        <div class="example" id="example-51b24037">
            <a class="self-link" href="#example-51b24037"></a>
            <p><a href="examples/graceful-degradation-example.html">例</a>：この挙動を示します。</p>
            <pre class="language-css highlight"><c- k>display</c-><c- p>:</c-> grid<c- p>;</c->
//FIXME item-flow: collapse<c- p>;</c-> <c- c>/* メイソンリーレイアウト未サポートUAでは無視 */</c->
grid-template-columns: <c- m>150</c-><c- k>px</c-> <c- m>100</c-><c- k>px</c-> <c- m>50</c-><c- k>px</c-><c- p>;</c->
</pre>
            <p>これで3列レイアウトが作成されますが、
                UAがメイソンリーレイアウト非対応の場合<a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#block-axis"
                    id="ref-for-block-axis⑤">ブロック軸</a>に「ギャップ」が多くなります。
                メイソンリー対応UAでのレンダリング例はこちら：</p>
            <figure>
                <video controls src="https://www.w3.org/TR/css-grid-3/images/graceful-degradation-example.mp4"></video>
                <figcaption> メイソンリー対応UAでの例のレンダリング。 </figcaption>
            </figure>
        </div>
        <h2 class="heading settled" id="flow-control"><span class="content"> 付録A：汎用レイアウトアイテムフロー制御：<span
                    class="css">item-*</span>プロパティ</span><a class="self-link" href="#flow-control"></a></h2>
        <p class="issue" id="issue-fd53eff2"><a class="self-link" href="#issue-fd53eff2"></a> このセクションは他仕様（<a
                data-link-type="biblio" href="#biblio-css-display-4"
                title="CSS Display Module Level 4">[css-display-4]</a>など）に移動の可能性あり。
            複数displayタイプに影響するため。</p>
        <p>CSSの複数レイアウトモードは、子要素を行や列の「アイテム」としてコンテナー内で配置し、
            著者がその順序や配置を設定できます。
            <span class="css">item-*</span>プロパティはこれらの順序付け・配置オプションを汎用的に制御し、
            レイアウト固有の<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-flexbox-1/#propdef-flex-flow"
                id="ref-for-propdef-flex-flow">flex-flow</a>や<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-grid-3/#propdef-grid-auto-flow"
                id="ref-for-propdef-grid-auto-flow">grid-auto-flow</a>プロパティを内包します。
        </p>
        <table class="data">
            <caption>アイテムフロー制御の概要</caption>
            <thead>
                <tr>
                    <th>フロー指向提案
                    <th>トラック指向提案
                    <th>値空間
                    <th>説明
                    <th>既存flexプロパティ
                    <th>既存gridプロパティ
            <tbody>
                <tr>
                    <td><a class="property css" data-link-type="property" href="#propdef-item-direction"
                            id="ref-for-propdef-item-direction">item-direction</a>
                    <td><a class="property css" data-link-type="property" href="#propdef-item-track"
                            id="ref-for-propdef-item-track">item-track</a>
                    <td>auto | row | column | row-reverse | column-reverse
                    <td> アイテムを行または列に配置するか、およびトラック内でstart-to-endまたはend-to-start順序にするかを制御します。
                    <td>flex-direction
                    <td>grid-auto-flow
                <tr>
                    <td><a class="property css" data-link-type="property" href="#propdef-item-wrap"
                            id="ref-for-propdef-item-wrap">item-wrap</a>
                    <td><a class="property css" data-link-type="property" href="#propdef-item-cross"
                            id="ref-for-propdef-item-cross">item-cross</a>
                    <td>[ auto | nowrap | wrap ] || [ normal | reverse ] | wrap-reverse
                    <td> アイテムを、row/columnプロパティで制御される軸の逆方向でラップするかどうか、
                        ラップ時はstart-to-endかend-to-startかを制御します。
                    <td>flex-wrap
                    <td>本レベルで<a class="property css" data-link-type="property"
                            href="https://www.w3.org/TR/css-grid-3/#propdef-grid-auto-flow"
                            id="ref-for-propdef-grid-auto-flow①">grid-auto-flow</a>に導入
                <tr>
                    <td><a class="property css" data-link-type="property" href="#propdef-item-pack"
                            id="ref-for-propdef-item-pack②">item-pack</a>
                    <td><a class="property css" data-link-type="property" href="#propdef-item-pack"
                            id="ref-for-propdef-item-pack③">item-pack</a>
                    <td>normal | dense || balance
                    <td> アイテムをトラックへどのように詰めるかを設定します。
                    <td>
                    <td><a class="property css" data-link-type="property"
                            href="https://www.w3.org/TR/css-grid-3/#propdef-grid-auto-flow"
                            id="ref-for-propdef-grid-auto-flow②">grid-auto-flow</a>
                <tr>
                    <td><a class="property css" data-link-type="property" href="#propdef-item-slack"
                            id="ref-for-propdef-item-slack④">item-slack</a>
                    <td><a class="property css" data-link-type="property" href="#propdef-item-slack"
                            id="ref-for-propdef-item-slack⑤">item-slack</a>
                    <td>normal | <a class="production css" data-link-type="type"
                            href="https://www.w3.org/TR/css-values-4/#typedef-length-percentage"
                            id="ref-for-typedef-length-percentage③">&lt;length-percentage></a> | infinite
                    <td> 配置判断時のレイアウト固有の「余裕」量を定義します。
                    <td>
                    <td>
        </table>
        <p class="issue" id="issue-c971c9c1"><a class="self-link" href="#issue-c971c9c1"></a>
            CSSWGはこれらのプロパティ名や関係の整理を検討中です。<a href="https://github.com/w3c/csswg-drafts/issues/11480">[Issue #11480]</a>
        </p>
        <h3 class="heading settled" id="item-primary-axis"><span class="content"> アイテムフロー軸：<a class="property css"
                    data-link-type="property" href="#propdef-item-track"
                    id="ref-for-propdef-item-track①">item-track</a>/<a class="property css" data-link-type="property"
                    href="#propdef-item-direction" id="ref-for-propdef-item-direction①">item-direction</a></span><a
                class="self-link" href="#item-primary-axis"></a></h3>
        <table class="def propdef" data-link-for-hint="item-direction">
            <tbody>
                <tr>
                    <th>名前:
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-item-direction">item-direction</dfn>, <dfn class="dfn-paneled css"
                            data-dfn-type="property" data-export id="propdef-item-track">item-track</dfn>
                <tr class="value">
                    <th><a href="https://www.w3.org/TR/css-values/#value-defs">値:</a>
                    <td class="prod">auto <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one①">|</a> row <span
                            id="ref-for-comb-one②">|</span> column <span id="ref-for-comb-one③">|</span> row-reverse
                        <span id="ref-for-comb-one④">|</span> column-reverse
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">初期値:</a>
                    <td>auto
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">適用対象:</a>
                    <td><a data-link-type="dfn" href="https://www.w3.org/TR/css-flexbox-1/#flex-container"
                            id="ref-for-flex-container">flexコンテナー</a>, <a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-grid-2/#grid-container"
                            id="ref-for-grid-container②③">グリッドコンテナー</a>, <a data-link-type="dfn"
                            href="#masonry-container" id="ref-for-masonry-container②⓪">メイソンリーコンテナー</a>
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">継承:</a>
                    <td>no
                <tr>
                    <th><a href="https://www.w3.org/TR/css-values/#percentages">パーセンテージ:</a>
                    <td>N/A
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#computed">算出値:</a>
                    <td>指定通り
                <tr>
                    <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">正規順序:</a>
                    <td>文法どおり
                <tr>
                    <th><a href="https://www.w3.org/TR/web-animations/#animation-type">アニメーション型:</a>
                    <td>離散
        </table>
        <p>このプロパティは、アイテムを行または列として配置するか、またトラック内でstart-to-endまたはend-to-start順序にするかを制御します。</p>
        <p class="issue" id="issue-80d7796e"><a class="self-link" href="#issue-80d7796e"></a> このプロパティについて議論中の点が2つあります:
            a) 名前をどうするか
            b) 配置の主要方向を示すのか、アイテムを配置するトラックの向きを示すものか
            つまり、ここで定義される<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="primary-axis">主要軸</dfn>は<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="primary-placement-axis">主要配置軸</dfn>か、<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="primary-track-axis">主要トラック軸</dfn>か。
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-flexbox-1/#flex-layout"
                id="ref-for-flex-layout④">flexレイアウト</a>や<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-grid-2/#grid-layout" id="ref-for-grid-layout①⓪">グリッドレイアウト</a>では一致しますが、
            <a data-link-type="dfn" href="#masonry-layout"
                id="ref-for-masonry-layout①③">メイソンリーレイアウト</a>では、主要配置方向はトラックを横断します。<a
                href="https://github.com/w3c/csswg-drafts/issues/11480">[Issue #11480]</a>
        </p>
        <dl>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="item-direction, item-track" data-dfn-type="value"
                    data-export id="valdef-item-direction-auto">auto</dfn>
            <dd data-md>
                <p>レイアウトモードに応じて<a class="css" data-link-type="maybe" href="#valdef-item-direction-row"
                        id="ref-for-valdef-item-direction-row">row</a>または<a class="css" data-link-type="maybe"
                        href="#valdef-item-direction-column"
                        id="ref-for-valdef-item-direction-column">column</a>に算出されます：</p>
                <ul>
                    <li data-md>
                        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-flexbox-1/#flex-container"
                                id="ref-for-flex-container①">flexコンテナー</a>や<a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-grid-2/#grid-container"
                                id="ref-for-grid-container②④">グリッドコンテナー</a>の場合は、<a class="css" data-link-type="maybe"
                                href="#valdef-item-direction-row"
                                id="ref-for-valdef-item-direction-row①">row</a>に算出されます。</p>
                    <li data-md>
                        <p><a data-link-type="dfn" href="#masonry-container"
                                id="ref-for-masonry-container②①">メイソンリーコンテナー</a>では、
                            <a class="property css" data-link-type="property"
                                href="https://www.w3.org/TR/css-grid-2/#propdef-grid-template-rows"
                                id="ref-for-propdef-grid-template-rows①">grid-template-rows</a>が<a class="css"
                                data-link-type="maybe"
                                href="https://www.w3.org/TR/css-grid-2/#valdef-grid-template-rows-none"
                                id="ref-for-valdef-grid-template-rows-none">none</a>でなく、<a class="property css"
                                data-link-type="property"
                                href="https://www.w3.org/TR/css-grid-2/#propdef-grid-template-columns"
                                id="ref-for-propdef-grid-template-columns②">grid-template-columns</a>が<span class="css"
                                id="ref-for-valdef-grid-template-rows-none①">none</span>の場合は行トラックを表す値に算出され、
                            それ以外は列トラックを表す値に算出されます。
                        </p>
                </ul>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="item-direction, item-track" data-dfn-type="value"
                    data-export id="valdef-item-direction-row">row</dfn>
            <dd data-md>
                <p><span class="option masonry">トラック指向オプション</span>：行への配置（<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-writing-modes-4/#inline-axis"
                        id="ref-for-inline-axis④">インライン軸</a>と平行なトラックやライン）。
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-flexbox-1/#flex-layout"
                        id="ref-for-flex-layout⑤">flexレイアウト</a>や<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-grid-2/#grid-layout"
                        id="ref-for-grid-layout①①">グリッドレイアウト</a>ではインライン軸でstart-to-end順序で配置され、
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#block-axis"
                        id="ref-for-block-axis⑥">ブロック軸</a>で<a data-link-type="dfn" href="#masonry-layout"
                        id="ref-for-masonry-layout①④">メイソンリーレイアウト</a>の場合はstart-to-end順序で配置されます。
                </p>
                <p><span class="option grid">フロー指向オプション</span>：row優先配置（<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-writing-modes-4/#inline-axis"
                        id="ref-for-inline-axis⑤">インライン軸</a>でstart-to-endに配置し、
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-flexbox-1/#flex-layout"
                        id="ref-for-flex-layout⑥">flexレイアウト</a>ではflex rowライン、
                    <a data-link-type="dfn" href="#masonry-layout"
                        id="ref-for-masonry-layout①⑤">メイソンリーレイアウト</a>ではカラムグリッドトラックを生成します。
                </p>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="item-direction, item-track" data-dfn-type="value"
                    data-export id="valdef-item-direction-column">column</dfn>
            <dd data-md>
                <p><span class="option masonry">トラック指向オプション</span>：行への配置（<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-writing-modes-4/#inline-axis"
                        id="ref-for-inline-axis⑥">インライン軸</a>と平行なトラックやライン）。
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-flexbox-1/#flex-layout"
                        id="ref-for-flex-layout⑦">flexレイアウト</a>や<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-grid-2/#grid-layout"
                        id="ref-for-grid-layout①②">グリッドレイアウト</a>ではインライン軸でstart-to-end順序で配置され、
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#block-axis"
                        id="ref-for-block-axis⑦">ブロック軸</a>で<a data-link-type="dfn" href="#masonry-layout"
                        id="ref-for-masonry-layout①⑥">メイソンリーレイアウト</a>の場合はstart-to-end順序で配置されます。
                </p>
                <p><span class="option grid">フロー指向オプション</span>：row優先配置（<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-writing-modes-4/#inline-axis"
                        id="ref-for-inline-axis⑦">インライン軸</a>でstart-to-endに配置し、
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-flexbox-1/#flex-layout"
                        id="ref-for-flex-layout⑧">flexレイアウト</a>ではflex rowライン、
                    <a data-link-type="dfn" href="#masonry-layout"
                        id="ref-for-masonry-layout①⑦">メイソンリーレイアウト</a>ではカラムグリッドトラックを生成します。
                </p>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="item-direction, item-track" data-dfn-type="value"
                    data-export id="valdef-item-direction-row-reverse">row-reverse</dfn>
            <dd data-md>
                <p><a class="css" data-link-type="maybe" href="#valdef-item-direction-row"
                        id="ref-for-valdef-item-direction-row②">row</a>と同じですが、end-to-start配置順となります。</p>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="item-direction, item-track" data-dfn-type="value"
                    data-export id="valdef-item-direction-column-reverse">column-reverse</dfn>
            <dd data-md>
                <p><a class="css" data-link-type="maybe" href="#valdef-item-direction-column"
                        id="ref-for-valdef-item-direction-column①">column</a>と同じですが、end-to-start配置順となります。</p>
        </dl>
        <h3 class="heading settled" id="item-secondary-axis"><span class="content"> アイテムクロス軸配置モード：<a
                    class="property css" data-link-type="property" href="#propdef-item-cross"
                    id="ref-for-propdef-item-cross①">item-cross</a>/<a class="property css" data-link-type="property"
                    href="#propdef-item-wrap" id="ref-for-propdef-item-wrap①">item-wrap</a></span><a class="self-link"
                href="#item-secondary-axis"></a></h3>
        <table class="def propdef" data-link-for-hint="item-wrap">
            <tbody>
                <tr>
                    <th>名前:
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-item-wrap">item-wrap</dfn>, <dfn class="dfn-paneled css"
                            data-dfn-type="property" data-export id="propdef-item-cross">item-cross</dfn>
                <tr class="value">
                    <th><a href="https://www.w3.org/TR/css-values/#value-defs">値:</a>
                    <td class="prod">[ auto <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one⑤">|</a> nowrap
                        <span id="ref-for-comb-one⑥">|</span> wrap ] <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-any" id="ref-for-comb-any">||</a> [ normal
                        <span id="ref-for-comb-one⑦">|</span> reverse ] <span id="ref-for-comb-one⑧">|</span>
                        wrap-reverse
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">初期値:</a>
                    <td>auto
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">適用対象:</a>
                    <td><a data-link-type="dfn" href="https://www.w3.org/TR/css-flexbox-1/#flex-container"
                            id="ref-for-flex-container②">flexコンテナー</a>, <a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-grid-2/#grid-container"
                            id="ref-for-grid-container②⑤">グリッドコンテナー</a>, <a data-link-type="dfn"
                            href="#masonry-container" id="ref-for-masonry-container②②">メイソンリーコンテナー</a>
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">継承:</a>
                    <td>no
                <tr>
                    <th><a href="https://www.w3.org/TR/css-values/#percentages">パーセンテージ:</a>
                    <td>N/A
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#computed">算出値:</a>
                    <td>指定通り
                <tr>
                    <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">正規順序:</a>
                    <td>文法どおり
                <tr>
                    <th><a href="https://www.w3.org/TR/web-animations/#animation-type">アニメーション型:</a>
                    <td>離散
        </table>
        <p>このプロパティは<a data-link-type="dfn" href="#primary-axis" id="ref-for-primary-axis">主要軸</a>と逆方向の軸での配置を制御します。</p>
        <dl>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="item-wrap,item-cross" data-dfn-type="value"
                    data-export id="valdef-item-wrap-auto">auto</dfn>
            <dd data-md>
                <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-flexbox-1/#flex-container"
                        id="ref-for-flex-container③">flexコンテナー</a>では<a class="css" data-link-type="maybe"
                        href="#valdef-item-wrap-nowrap" id="ref-for-valdef-item-wrap-nowrap">nowrap</a>に算出され、
                    それ以外では<a class="css" data-link-type="maybe" href="#valdef-item-wrap-wrap"
                        id="ref-for-valdef-item-wrap-wrap">wrap</a>に算出されます。</p>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="item-wrap,item-cross" data-dfn-type="value"
                    data-export id="valdef-item-wrap-nowrap">nowrap</dfn>
            <dd data-md>
                <p>アイテムは<a data-link-type="dfn" href="#primary-placement-axis"
                        id="ref-for-primary-placement-axis">主要配置軸</a>上に、スペースがなくなっても配置され続けます。
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-flexbox-1/#flex-layout"
                        id="ref-for-flex-layout⑨">flexレイアウト</a>では<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-flexbox-1/#single-line-flex-container"
                        id="ref-for-single-line-flex-container">単一行flexコンテナー</a>となり、
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-layout"
                        id="ref-for-grid-layout①③">グリッドレイアウト</a>では、必要に応じて<span
                        id="ref-for-primary-placement-axis①">主要配置軸</span>に<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-grid-2/#implicit-grid-track"
                        id="ref-for-implicit-grid-track">暗黙トラック</a>を生成します。
                </p>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="item-wrap,item-cross" data-dfn-type="value"
                    data-export id="valdef-item-wrap-wrap">wrap</dfn>
            <dd data-md>
                <p><a data-link-type="dfn" href="#primary-placement-axis"
                        id="ref-for-primary-placement-axis②">主要配置軸</a>のスペースがなくなったときにアイテムが折り返されます。
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-flexbox-1/#flex-layout"
                        id="ref-for-flex-layout①⓪">flexレイアウト</a>では<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-flexbox-1/#multi-line-flex-container"
                        id="ref-for-multi-line-flex-container">複数行flexコンテナー</a>となり、
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-layout"
                        id="ref-for-grid-layout①④">グリッドレイアウト</a>では、<span
                        id="ref-for-primary-placement-axis③">主要配置軸</span>の明示的トラックがなくなったときに次の行/列へ自動配置アルゴリズムが移動します。
                </p>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="item-wrap,item-cross" data-dfn-type="value"
                    data-export id="valdef-item-wrap-normal">normal</dfn>
            <dd data-md>
                <p><a data-link-type="dfn" href="#primary-track-axis"
                        id="ref-for-primary-track-axis">主要トラック軸</a>と逆方向の軸で、start-to-end順序でアイテムを配置します。</p>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="item-wrap,item-cross" data-dfn-type="value"
                    data-export id="valdef-item-wrap-reverse">reverse</dfn>
            <dd data-md>
                <p><a data-link-type="dfn" href="#primary-track-axis"
                        id="ref-for-primary-track-axis①">主要トラック軸</a>と逆方向の軸で、end-to-start順序でアイテムを配置します。</p>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="item-wrap,item-cross" data-dfn-type="value"
                    data-export id="valdef-item-wrap-wrap-reverse">wrap-reverse</dfn>
            <dd data-md>
                <p><span class="css">wrap reverse</span>に算出されます。</p>
                <p class="note" role="note"><span class="marker">注:</span> この値は既存の<a class="property css"
                        data-link-type="property" href="https://www.w3.org/TR/css-flexbox-1/#propdef-flex-wrap"
                        id="ref-for-propdef-flex-wrap">flex-wrap</a>値と一貫性を持たせるために存在します。</p>
        </dl>
        <p class="issue" id="issue-b3c639a9"><a class="self-link" href="#issue-b3c639a9"></a> このプロパティの解釈と命名は<a
                class="property css" data-link-type="property" href="#propdef-item-direction"
                id="ref-for-propdef-item-direction②">item-direction</a>/<a class="property css"
                data-link-type="property" href="#propdef-item-track"
                id="ref-for-propdef-item-track②">item-track</a>における軸の解釈に依存します。<a
                href="https://github.com/w3c/csswg-drafts/issues/11480">[Issue #11480]</a></p>
        <h3 class="heading settled" id="item-pack-options"><span class="content"> アイテム配置パッキングモード：<a class="property css"
                    data-link-type="property" href="#propdef-item-pack"
                    id="ref-for-propdef-item-pack④">item-pack</a>プロパティ</span><a class="self-link"
                href="#item-pack-options"></a></h3>
        <table class="def propdef" data-link-for-hint="item-pack">
            <tbody>
                <tr>
                    <th>名前:
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-item-pack">item-pack</dfn>
                <tr class="value">
                    <th><a href="https://www.w3.org/TR/css-values/#value-defs">値:</a>
                    <td class="prod">normal <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one⑨">|</a> dense <a
                            data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-any"
                            id="ref-for-comb-any①">||</a> balance
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">初期値:</a>
                    <td>normal
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">適用対象:</a>
                    <td><a data-link-type="dfn" href="https://www.w3.org/TR/css-flexbox-1/#flex-container"
                            id="ref-for-flex-container④">flexコンテナー</a>, <a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-grid-2/#grid-container"
                            id="ref-for-grid-container②⑥">グリッドコンテナー</a>, <a data-link-type="dfn"
                            href="#masonry-container" id="ref-for-masonry-container②③">メイソンリーコンテナー</a>
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">継承:</a>
                    <td>no
                <tr>
                    <th><a href="https://www.w3.org/TR/css-values/#percentages">パーセンテージ:</a>
                    <td>N/A
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#computed">算出値:</a>
                    <td>指定通り
                <tr>
                    <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">正規順序:</a>
                    <td>文法どおり
                <tr>
                    <th><a href="https://www.w3.org/TR/web-animations/#animation-type">アニメーション型:</a>
                    <td>離散
        </table>
        <p>このプロパティは、レイアウト固有の方法でアイテムをトラック間に分配する方法を制御します。</p>
        <dl>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="item-pack" data-dfn-type="value" data-export
                    id="valdef-item-pack-normal">normal</dfn>
            <dd data-md>
                <p>レイアウトモードのデフォルトのパッキング戦略を使用します。</p>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="item-pack" data-dfn-type="value" data-export
                    id="valdef-item-pack-dense">dense</dfn>
            <dd data-md>
                <p>前の空きスペースに戻って、アイテムを配置できるようにします。
                    （前のアイテムがそのスペースに入りきらず、空きが残った場合に発生することがあります。）</p>
                <p>例として、
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-flexbox-1/#flex-layout"
                        id="ref-for-flex-layout①①">flexレイアウト</a>では、空きが残った前の行にアイテムを配置できます。
                </p>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="item-pack" data-dfn-type="value" data-export
                    id="valdef-item-pack-balance">balance</dfn>
            <dd data-md>
                <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-flexbox-1/#flex-layout"
                        id="ref-for-flex-layout①②">flexレイアウト</a>では、
                    各行（最終行含む）のコンテンツ量を均等に分散します。
                    <a class="css" data-link-type="propdesc"
                        href="https://www.w3.org/TR/css-text-4/#propdef-text-wrap-style"
                        id="ref-for-propdef-text-wrap-style">text-wrap-style: balance</a>に似ています。
                </p>
        </dl>
        <p class="issue" id="issue-1efcc181"><a class="self-link" href="#issue-1efcc181"></a> <a data-link-type="dfn"
                href="#masonry-layout" id="ref-for-masonry-layout①⑧">メイソンリーレイアウト</a>のスイッチ案の一つとして、この<a
                class="property css" data-link-type="property" href="#propdef-item-pack"
                id="ref-for-propdef-item-pack⑤">item-pack</a>プロパティに<dfn class="dfn-paneled css" data-dfn-for="item-pack"
                data-dfn-type="value" data-export id="valdef-item-pack-collapse">collapse</dfn>値を追加する案もあります。<a
                href="https://github.com/w3c/csswg-drafts/issues/11243">[Issue #11243]</a></p>
        <p class="issue" id="issue-152d283d"><a class="self-link" href="#issue-152d283d"></a> <span
                class="css">dense</span>パッキングはメイソンリーにも適用すべきか？
            メイソンリーでは格段にコストが高く、すべての隙間候補に要素を配置してみて収まるか確認しなければならないため。
            Gridは単に整数を調整するだけです。<a href="https://github.com/w3c/csswg-drafts/issues/9326">[Issue
                #9326]</a></p>
        <h3 class="heading settled" id="item-flow"><span class="content"> アイテム配置ショートハンド：<a class="property css"
                    data-link-type="property" href="#propdef-item-flow"
                    id="ref-for-propdef-item-flow">item-flow</a>ショートハンド</span><a class="self-link"
                href="#item-flow"></a></h3>
        <table class="def propdef" data-link-for-hint="item-flow">
            <tbody>
                <tr>
                    <th>名前:
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-item-flow">item-flow</dfn>
                <tr class="value">
                    <th><a href="https://www.w3.org/TR/css-values/#value-defs">値:</a>
                    <td class="prod"><a class="production css" data-link-type="property" href="#propdef-item-direction"
                            id="ref-for-propdef-item-direction③">&lt;'item-direction'></a> <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-any" id="ref-for-comb-any②">||</a> <a
                            class="production css" data-link-type="property" href="#propdef-item-wrap"
                            id="ref-for-propdef-item-wrap②">&lt;'item-wrap'></a> <span id="ref-for-comb-any③">||</span>
                        <a class="production css" data-link-type="property" href="#propdef-item-pack"
                            id="ref-for-propdef-item-pack⑥">&lt;'item-pack'></a> <span id="ref-for-comb-any④">||</span>
                        <a class="production css" data-link-type="property" href="#propdef-item-slack"
                            id="ref-for-propdef-item-slack⑥">&lt;'item-slack'></a>
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">初期値:</a>
                    <td>各プロパティ参照
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">適用対象:</a>
                    <td>各プロパティ参照
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">継承:</a>
                    <td>各プロパティ参照
                <tr>
                    <th><a href="https://www.w3.org/TR/css-values/#percentages">パーセンテージ:</a>
                    <td>各プロパティ参照
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#computed">算出値:</a>
                    <td>各プロパティ参照
                <tr>
                    <th><a href="https://www.w3.org/TR/web-animations/#animation-type">アニメーション型:</a>
                    <td>各プロパティ参照
                <tr>
                    <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">正規順序:</a>
                    <td>文法どおり
        </table>
        <p>この<a data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-5/#shorthand-property"
                id="ref-for-shorthand-property">ショートハンドプロパティ</a>は、すべての<span class="css">item-*</span><a
                data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-5/#longhand"
                id="ref-for-longhand">ロングハンドプロパティ</a>を一括指定します。</p>
        <h2 class="heading settled" data-level="10" id="acknowledgements"><span class="secno">10. </span><span
                class="content"> 謝辞</span><a class="self-link" href="#acknowledgements"></a></h2>
        <p>Cameron McCormack氏（masonry layoutの解説文書執筆、背景章はそこから引用）、CSSWGへの提案、Mats Palmgren氏（本仕様の初期バージョン開発）に感謝します。
            また、この機能の<a href="https://github.com/w3c/csswg-drafts/issues/4650">最初の提案</a>にフィードバックを寄せてくださった皆様にも感謝します。</p>
        <h2 class="heading settled" data-level="11" id="security"><span class="secno">11. </span><span class="content">
                セキュリティの考慮事項</span><a class="self-link" href="#security"></a></h2>
        <p>本仕様はレイアウト仕様であり、
            CSSレイアウト一般によるもの以外に新たなセキュリティ考慮事項はありません。</p>
        <h2 class="heading settled" data-level="12" id="privacy"><span class="secno">12. </span><span class="content">
                プライバシーの考慮事項</span><a class="self-link" href="#privacy"></a></h2>
        <p>本仕様はレイアウト仕様であり、
            CSSレイアウト一般によるもの以外に新たなプライバシー考慮事項はありません。</p>
        <h2 class="no-num heading settled" id="changes"><span class="content"> 変更点</span><a class="self-link"
                href="#changes"></a></h2>
        <h3 class="heading settled" id="changes-3"><span class="content"> レベル2以降の追加点</span><a class="self-link"
                href="#changes-3"></a></h3>
        <p><a href="https://www.w3.org/TR/css-grid-2/">レベル2</a>以降に追加された機能：</p>
        <ul>
            <li><a data-link-type="dfn" href="#masonry-layout" id="ref-for-masonry-layout①⑨">メイソンリーレイアウト</a>追加
            <li><a class="property css" data-link-type="property" href="#propdef-item-flow"
                    id="ref-for-propdef-item-flow①">item-flow</a>プロパティとそのロングハンドを追加。
                アイテムの順序と配置の汎用制御。<a href="#flow-control">付録A：汎用レイアウトアイテムフロー制御：item-*プロパティ</a>参照。
                (<a href="https://github.com/w3c/csswg-drafts/issues/11480">Issue 11480</a>)
        </ul>
        <h3 class="no-num heading settled" id="recent-changes"><span class="content"> 最近の変更</span><a class="self-link"
                href="#recent-changes"></a></h3>
        <p><a href="https://www.w3.org/TR/2024/WD-css-grid-3-20241003/">2024年10月3日 作業草案</a>以降の変更：</p>
        <ul>
            <li data-md>
                <p>メイソンリー固有のトラックテンプレート・配置プロパティを削除。
                    (<a href="https://github.com/w3c/csswg-drafts/issues/11243">Issue 11243</a>)</p>
            <li data-md>
                <p><a class="property css" data-link-type="property" href="#propdef-item-flow"
                        id="ref-for-propdef-item-flow②">item-flow</a>と<span class="css">item-*</span>ロングハンドを導入し、
                    <span class="css">masonry-flow</span>や関連プロパティを置き換え。
                    (<a href="https://github.com/w3c/csswg-drafts/issues/11480">Issue 11480</a>)
                </p>
            <li data-md>
                <p><span class="css">masonry-slack</span>を<a class="property css" data-link-type="property"
                        href="#propdef-item-slack" id="ref-for-propdef-item-slack⑦">item-slack</a>に改名。</p>
        </ul>
    </main>
    <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content"> 適合性</span><a class="self-link"
            href="#w3c-conformance"></a></h2>
    <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content"> 文書の慣例</span><a class="self-link"
            href="#w3c-conventions"></a></h3>
    <p>適合要件は、記述的な断定とRFC 2119の用語の組み合わせで表現されます。規範的な部分で使われるキーワード “MUST”（〜しなければならない）、 “MUST NOT”（〜してはならない）、 “REQUIRED”（必要）、
        “SHALL”（〜すべき）、 “SHALL NOT”（〜すべきでない）、 “SHOULD”（〜することが望ましい）、 “SHOULD NOT”（〜しないことが望ましい）、 “RECOMMENDED”（推奨）、
        “MAY”（〜してもよい）、 “OPTIONAL”（任意）はRFC 2119で定義された通りに解釈してください。ただし、可読性を考慮し、本仕様ではこれらの単語はすべて大文字では記載されていません。</p>
    <p>本仕様のテキストは、明示的に非規範的と記載されたセクション、例、および注釈を除き、すべて規範的です。<a data-link-type="biblio" href="#biblio-rfc2119"
            title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a></p>
    <p>本仕様の例は「例えば」などの語句で導入されるか、 <code>class="example"</code> で規範的なテキストから切り離して示されます。例えば次のようになります：</p>
    <div class="example" id="w3c-example">
        <a class="self-link" href="#w3c-example"></a>
        <p>これは参考例の例です。</p>
    </div>
    <p>参考注釈は「注：」で始まり、 <code>class="note"</code> で規範的テキストから切り離して示されます。例えば：</p>
    <p class="note" role="note">注：これは参考注釈です。</p>
    <p>注意事項は規範的なセクションで特に注意を促すようにスタイルされ、 <code>&lt;strong class="advisement"></code> で他の規範的テキストから分けて示されます。例えば：<strong
            class="advisement"> UAはアクセシブルな代替手段を必ず提供しなければなりません。 </strong></p>
    <details class="wpt-tests-block" dir="ltr" lang="en" open>
        <summary>テスト</summary>
        <p>本仕様の内容に関連するテストは、このような「テスト」ブロックで記載される場合があります。
            これらのブロックは非規範的です。</p>
        <ul class="wpt-tests-list"></ul>
        <hr>
    </details>
    <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content"> 適合クラス</span><a
            class="self-link" href="#w3c-conformance-classes"></a></h3>
    <p>本仕様への適合性は、3つの適合クラスについて定義されます：</p>
    <dl>
        <dt>スタイルシート
        <dd><a href="https://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
                スタイルシート</a>。
        <dt>レンダラー
        <dd><a
                href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>（ユーザーエージェント）。スタイルシートのセマンティクスを解釈し、それを用いる文書をレンダリングします。
        <dt>オーサリングツール
        <dd><a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>（ユーザーエージェント）。スタイルシートを作成します。
    </dl>
    <p>スタイルシートが本仕様に適合するのは、当モジュールで定義された構文を使うすべての文が、汎用CSS文法および本モジュールで定義された各機能の個別文法に従って有効である場合です。</p>
    <p>レンダラーが本仕様に適合するのは、スタイルシートを適用仕様通りに解釈することに加え、本仕様で定義されたすべての機能を正しくパースし、文書をそれに従ってレンダリングする場合です。ただし、デバイスの制限によりUAが文書を正しくレンダリングできない場合でも、UAが非適合となるわけではありません（例：UAはモノクロモニターで色をレンダリングする必要はありません）。
    </p>
    <p>オーサリングツールが本仕様に適合するのは、汎用CSS文法および本モジュールで定義された各機能の個別文法に従って構文的に正しいスタイルシートを書き、本モジュールで説明されているスタイルシートの他の適合要件をすべて満たす場合です。
    </p>
    <h3 class="no-ref heading settled" id="w3c-partial"><span class="content"> 部分的な実装</span><a class="self-link"
            href="#w3c-partial"></a></h3>
    <p>著者が前方互換のパース規則を利用してフォールバック値を指定できるよう、CSSレンダラーは未対応のat-rule、プロパティ、プロパティ値、キーワード、その他構文要素を<strong>無効</strong>として（<a
            href="https://www.w3.org/TR/CSS21/conform.html#ignore">適切に無視</a>）扱わなければなりません。特に、ユーザーエージェントは<strong>未対応の値のみ無視し、対応値だけを同じ複数値プロパティ宣言で利用することをしてはなりません</strong>。値が無効（未対応の場合は必ず無効）と見なされた場合、CSSでは宣言全体を無視する必要があります。
    </p>
    <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content"> 不安定・独自機能の実装</span><a
            class="self-link" href="#w3c-conform-future-proofing"></a></h4>
    <p>将来の安定CSS機能との衝突を避けるため、CSSWGは<a href="https://www.w3.org/TR/CSS/#future-proofing">ベストプラクティス</a>に従い、<a
            href="https://www.w3.org/TR/CSS/#unstable">不安定な機能</a>や<a
            href="https://www.w3.org/TR/CSS/#proprietary-extension">独自拡張</a>の実装を推奨します。</p>
    <h3 class="no-ref heading settled" id="w3c-testing"><span class="content"> 非実験的な実装</span><a class="self-link"
            href="#w3c-testing"></a></h3>
    <p>仕様がCandidate Recommendation段階に達すると、非実験的な実装が可能となり、実装者は仕様に従って正しく実装できるCRレベル機能については、プレフィックスなしの実装を公開するべきです。</p>
    <p>CSSの実装間の相互運用性を確立・維持するため、CSSワーキンググループは非実験的なCSSレンダラーに対し、実装報告書（必要ならそのテストケースも）をW3Cに提出するよう依頼しています。W3Cに提出されたテストケースは、CSSワーキンググループによるレビューと修正の対象となります。
    </p>
    <p>テストケースと実装報告書の提出方法の詳細は、CSSワーキンググループのウェブサイト <a
            href="https://www.w3.org/Style/CSS/Test/">https://www.w3.org/Style/CSS/Test/</a> を参照してください。
        質問は <a href="https://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>
        メーリングリストへ。</p>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本仕様で定義された用語</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li>
            auto
            <ul>
                <li><a href="#valdef-item-direction-auto">item-direction, item-trackの値</a><span>, § 番号なしセクション</span>
                <li><a href="#valdef-item-wrap-auto">item-wrap, item-crossの値</a><span>, § 番号なしセクション</span>
            </ul>
        <li><a href="#valdef-repeat-auto-areas">auto-areas</a><span>, § 3.3.1</span>
        <li><a href="#auto-placement-cursor">auto-placement cursor</a><span>, § 4.3</span>
        <li><a href="#valdef-item-pack-balance">balance</a><span>, § 番号なしセクション</span>
        <li><a href="#valdef-item-pack-collapse">collapse</a><span>, § 番号なしセクション</span>
        <li><a href="#valdef-item-direction-column">column</a><span>, § 番号なしセクション</span>
        <li><a href="#column-masonry-container">column masonry container</a><span>, § 2</span>
        <li><a href="#valdef-item-direction-column-reverse">column-reverse</a><span>, § 番号なしセクション</span>
        <li><a href="#valdef-item-pack-dense">dense</a><span>, § 番号なしセクション</span>
        <li><a href="#grid-axis">grid axis</a><span>, § 2</span>
        <li><a href="#grid-axis">grid-axis</a><span>, § 2</span>
        <li><a href="#valdef-item-slack-infinite">infinite</a><span>, § 4.2</span>
        <li><a href="#propdef-item-cross">item-cross</a><span>, § 番号なしセクション</span>
        <li><a href="#propdef-item-direction">item-direction</a><span>, § 番号なしセクション</span>
        <li><a href="#propdef-item-flow">item-flow</a><span>, § 番号なしセクション</span>
        <li><a href="#item-groups">item groups</a><span>, § 3.4.2</span>
        <li><a href="#propdef-item-pack">item-pack</a><span>, § 番号なしセクション</span>
        <li><a href="#propdef-item-slack">item-slack</a><span>, § 4.2</span>
        <li><a href="#propdef-item-track">item-track</a><span>, § 番号なしセクション</span>
        <li><a href="#propdef-item-wrap">item-wrap</a><span>, § 番号なしセクション</span>
        <li><a href="#valdef-item-slack-length-percentage">&lt;length-percentage></a><span>, § 4.2</span>
        <li><a href="#masonry-box">masonry box</a><span>, § 6</span>
        <li><a href="#masonry-container">masonry container</a><span>, § 2</span>
        <li><a href="#masonry-item">masonry item</a><span>, § 2</span>
        <li><a href="#masonry-layout">Masonry layout</a><span>, § 2</span>
        <li><a href="#masonry-track">masonry track</a><span>, § 2</span>
        <li>
            normal
            <ul>
                <li><a href="#valdef-item-pack-normal">item-packの値</a><span>, § 番号なしセクション</span>
                <li><a href="#valdef-item-wrap-normal">item-wrap, item-crossの値</a><span>, § 番号なしセクション</span>
            </ul>
        <li><a href="#valdef-item-wrap-nowrap">nowrap</a><span>, § 番号なしセクション</span>
        <li><a href="#primary-axis">primary axis</a><span>, § 番号なしセクション</span>
        <li><a href="#primary-placement-axis">primary placement axis</a><span>, § 番号なしセクション</span>
        <li><a href="#primary-track-axis">primary track axis</a><span>, § 番号なしセクション</span>
        <li><a href="#valdef-item-wrap-reverse">reverse</a><span>, § 番号なしセクション</span>
        <li><a href="#valdef-item-direction-row">row</a><span>, § 番号なしセクション</span>
        <li><a href="#row-masonry-container">row masonry container</a><span>, § 2</span>
        <li><a href="#valdef-item-direction-row-reverse">row-reverse</a><span>, § 番号なしセクション</span>
        <li><a href="#running-position">running position</a><span>, § 4.3</span>
        <li><a href="#stacking-axis">stacking axis</a><span>, § 2</span>
        <li><a href="#stacking-axis">stacking-axis</a><span>, § 2</span>
        <li><a href="#submasonry">submasonry</a><span>, § 3.2</span>
        <li><a href="#masonry-tie-threshold">tie threshold</a><span>, § 4.2</span>
        <li><a href="#virtual-masonry-item">virtual masonry item</a><span>, § 3.4.2</span>
        <li><a href="#valdef-item-wrap-wrap">wrap</a><span>, § 番号なしセクション</span>
        <li><a href="#valdef-item-wrap-wrap-reverse">wrap-reverse</a><span>, § 番号なしセクション</span>
    </ul>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">参照で定義された用語</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[CSS-ALIGN-3]</a> で定義されている用語：
            <ul>
                <li><span class="dfn-paneled" id="fde954ee">align-content</span>
                <li><span class="dfn-paneled" id="73f86444">alignment baseline</span>
                <li><span class="dfn-paneled" id="dc2ecc7a">alignment subject</span>
                <li><span class="dfn-paneled" id="4d2cf2cf">baseline alignment</span>
                <li><span class="dfn-paneled" id="207a83d3">baseline-sharing group</span>
                <li><span class="dfn-paneled" id="515ec31f">center</span>
                <li><span class="dfn-paneled" id="da7c24e2">distributed alignment</span>
                <li><span class="dfn-paneled" id="020c3333">end</span>
                <li><span class="dfn-paneled" id="3c3b0bc2">fallback alignment</span>
                <li><span class="dfn-paneled" id="6f9416f0">grid-gap</span>
                <li><span class="dfn-paneled" id="de6bd31b">justify-content</span>
                <li><span class="dfn-paneled" id="50284573">normal</span>
                <li><span class="dfn-paneled" id="35e80fd9">start</span>
                <li><span class="dfn-paneled" id="ec67a9e7">stretch</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-BREAK-4]</a> で定義されている用語：
            <ul>
                <li><span class="dfn-paneled" id="2218854e">forced break</span>
                <li><span class="dfn-paneled" id="872c3891">fragmentainer</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-CASCADE-5]</a> で定義されている用語：
            <ul>
                <li><span class="dfn-paneled" id="8f27be0f">longhand property</span>
                <li><span class="dfn-paneled" id="980ac56a">shorthand property</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-DISPLAY-4]</a> で定義されている用語：
            <ul>
                <li><span class="dfn-paneled" id="431a9cad">blockify</span>
                <li><span class="dfn-paneled" id="4edc72b0">reading-flow</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-FLEXBOX-1]</a> で定義されている用語：
            <ul>
                <li><span class="dfn-paneled" id="cc7f0a64">flex container</span>
                <li><span class="dfn-paneled" id="07e702cf">flex layout</span>
                <li><span class="dfn-paneled" id="546f7867">flex-flow</span>
                <li><span class="dfn-paneled" id="b70fab87">flex-wrap</span>
                <li><span class="dfn-paneled" id="97651ccf">multi-line flex container</span>
                <li><span class="dfn-paneled" id="7a8d5db2">order</span>
                <li><span class="dfn-paneled" id="11b7dd33">order-modified document order</span>
                <li><span class="dfn-paneled" id="b55ea3dd">single-line flex container</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-GAPS-1]</a> で定義されている用語：
            <ul>
                <li><span class="dfn-paneled" id="481f5c73">repeat()</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-GRID-2]</a> で定義されている用語：
            <ul>
                <li><span class="dfn-paneled" id="5b3e1fb0">auto</span>
                <li><span class="dfn-paneled" id="da3291f7">auto-fill</span>
                <li><span class="dfn-paneled" id="7b233769">auto-fit</span>
                <li><span class="dfn-paneled" id="bdee6ddc">automatic grid position</span>
                <li><span class="dfn-paneled" id="17638765">collapsed track</span>
                <li><span class="dfn-paneled" id="d911d74f">definite grid position</span>
                <li><span class="dfn-paneled" id="fdfd719c">definite position</span>
                <li><span class="dfn-paneled" id="57b234bc">explicit grid</span>
                <li><span class="dfn-paneled" id="7086fc61">grid area</span>
                <li><span class="dfn-paneled" id="df72a52c">grid container</span>
                <li><span class="dfn-paneled" id="ba30fc9a">grid item</span>
                <li><span class="dfn-paneled" id="db4ae04f">grid layout</span>
                <li><span class="dfn-paneled" id="b4a14210">grid track</span>
                <li><span class="dfn-paneled" id="228fb890">grid-auto-columns</span>
                <li><span class="dfn-paneled" id="6cc286fe">grid-auto-rows</span>
                <li><span class="dfn-paneled" id="88fad469">grid-placement property</span>
                <li><span class="dfn-paneled" id="a9860e91">grid-template-areas</span>
                <li><span class="dfn-paneled" id="354cf3be">grid-template-columns</span>
                <li><span class="dfn-paneled" id="25d528b6">grid-template-rows</span>
                <li><span class="dfn-paneled" id="3208cbb5">implicit grid</span>
                <li><span class="dfn-paneled" id="564e922b">implicit grid track</span>
                <li><span class="dfn-paneled" id="6540f072">none <small>(for grid-template-areas)</small></span>
                <li><span class="dfn-paneled" id="9edcd4ef">none <small>(for grid-template-rows)</small></span>
                <li><span class="dfn-paneled" id="bbc693a1">subgrid</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-GRID-3]</a> で定義されている用語：
            <ul>
                <li><span class="dfn-paneled" id="d4d84650">grid-auto-flow</span>
                <li><span class="dfn-paneled" id="d909e27a">masonry</span>
                <li><span class="dfn-paneled" id="0b7a6d57">masonry-auto-tracks</span>
                <li><span class="dfn-paneled" id="e1e1764e">masonry-template-areas</span>
                <li><span class="dfn-paneled" id="edecaf14">masonry-template-tracks</span>
                <li><span class="dfn-paneled" id="b93bc3b3">masonry-track</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-SIZING-3]</a> で定義されている用語：
            <ul>
                <li><span class="dfn-paneled" id="c1c732b9">available space</span>
                <li><span class="dfn-paneled" id="a47902ec">max-content constraint</span>
                <li><span class="dfn-paneled" id="8a39af7f">max-content size</span>
                <li><span class="dfn-paneled" id="451a41ae">min-content constraint</span>
                <li><span class="dfn-paneled" id="6a444fd6">min-content size</span>
                <li><span class="dfn-paneled" id="47ea2436">outer size</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-TEXT-4]</a> で定義されている用語：
            <ul>
                <li><span class="dfn-paneled" id="7801e50a">text-wrap-style</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-VALUES-4]</a> で定義されている用語：
            <ul>
                <li><span class="dfn-paneled" id="4fd7e54f">&lt;length-percentage></span>
                <li><span class="dfn-paneled" id="8a110a7b">CSS-wide keywords</span>
                <li><span class="dfn-paneled" id="4eb9d37e">|</span>
                <li><span class="dfn-paneled" id="a0336d84">||</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-WRITING-MODES-3]</a> で定義されている用語：
            <ul>
                <li><span class="dfn-paneled" id="fb688f4f">direction</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-WRITING-MODES-4]</a> で定義されている用語：
            <ul>
                <li><span class="dfn-paneled" id="b8dade0f">block axis</span>
                <li><span class="dfn-paneled" id="599428b5">block-axis</span>
                <li><span class="dfn-paneled" id="a6eb24bb">inline axis</span>
                <li><span class="dfn-paneled" id="82ddda8c">inline-axis</span>
                <li><span class="dfn-paneled" id="eb6008ce">writing mode</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS2]</a> で定義されている用語：
            <ul>
                <li><span class="dfn-paneled" id="c16a1180">containing block</span>
                <li><span class="dfn-paneled" id="088aa1a3">content box</span>
                <li><span class="dfn-paneled" id="ef9e6926">display</span>
                <li><span class="dfn-paneled" id="197337f9">margin box</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">規範的参考文献</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css-align-3">[CSS-ALIGN-3]
        <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-align-3/"><cite>CSSボックス整列モジュール
                    レベル3</cite></a>. 2023年2月17日. 作業草案. URL: <a
                href="https://www.w3.org/TR/css-align-3/">https://www.w3.org/TR/css-align-3/</a>
        <dt id="biblio-css-break-4">[CSS-BREAK-4]
        <dd>Rossen Atanassov; Elika Etemad. <a href="https://www.w3.org/TR/css-break-4/"><cite>CSS分断モジュール
                    レベル4</cite></a>. 2018年12月18日. 最初の作業草案. URL: <a
                href="https://www.w3.org/TR/css-break-4/">https://www.w3.org/TR/css-break-4/</a>
        <dt id="biblio-css-cascade-5">[CSS-CASCADE-5]
        <dd>Elika Etemad; Miriam Suzanne; Tab Atkins Jr.. <a
                href="https://www.w3.org/TR/css-cascade-5/"><cite>CSSカスケーディングと継承 レベル5</cite></a>. 2022年1月13日. 勧告候補. URL:
            <a href="https://www.w3.org/TR/css-cascade-5/">https://www.w3.org/TR/css-cascade-5/</a>
        <dt id="biblio-css-display-4">[CSS-DISPLAY-4]
        <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-display-4/"><cite>CSS表示モジュール
                    レベル4</cite></a>. 2024年12月19日. 最初の作業草案. URL: <a
                href="https://www.w3.org/TR/css-display-4/">https://www.w3.org/TR/css-display-4/</a>
        <dt id="biblio-css-flexbox-1">[CSS-FLEXBOX-1]
        <dd>Tab Atkins Jr.; 他. <a href="https://www.w3.org/TR/css-flexbox-1/"><cite>CSSフレキシブルボックスレイアウトモジュール
                    レベル1</cite></a>. 2018年11月19日. 勧告候補. URL: <a
                href="https://www.w3.org/TR/css-flexbox-1/">https://www.w3.org/TR/css-flexbox-1/</a>
        <dt id="biblio-css-gaps-1">[CSS-GAPS-1]
        <dd><a href="https://drafts.csswg.org/css-gaps-1/"><cite>CSSギャップ装飾モジュール レベル1</cite></a>. 編集者草案. URL: <a
                href="https://drafts.csswg.org/css-gaps-1/">https://drafts.csswg.org/css-gaps-1/</a>
        <dt id="biblio-css-grid-1">[CSS-GRID-1]
        <dd>Tab Atkins Jr.; 他. <a href="https://www.w3.org/TR/css-grid-1/"><cite>CSSグリッドレイアウトモジュール レベル1</cite></a>.
            2020年12月18日. 勧告候補ドラフト. URL: <a
                href="https://www.w3.org/TR/css-grid-1/">https://www.w3.org/TR/css-grid-1/</a>
        <dt id="biblio-css-grid-2">[CSS-GRID-2]
        <dd>Tab Atkins Jr.; Elika Etemad; Rossen Atanassov. <a
                href="https://www.w3.org/TR/css-grid-2/"><cite>CSSグリッドレイアウトモジュール レベル2</cite></a>. 2020年12月18日. 勧告候補ドラフト.
            URL: <a href="https://www.w3.org/TR/css-grid-2/">https://www.w3.org/TR/css-grid-2/</a>
        <dt id="biblio-css-grid-3">[CSS-GRID-3]
        <dd>Tab Atkins Jr.; 他. <a href="https://www.w3.org/TR/css-grid-3/"><cite>CSSグリッドレイアウトモジュール レベル3</cite></a>.
            2024年10月3日. 作業草案. URL: <a href="https://www.w3.org/TR/css-grid-3/">https://www.w3.org/TR/css-grid-3/</a>
        <dt id="biblio-css-sizing-3">[CSS-SIZING-3]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-sizing-3/"><cite>CSSボックスサイズ指定モジュール
                    レベル3</cite></a>. 2021年12月17日. 作業草案. URL: <a
                href="https://www.w3.org/TR/css-sizing-3/">https://www.w3.org/TR/css-sizing-3/</a>
        <dt id="biblio-css-text-4">[CSS-TEXT-4]
        <dd>Elika Etemad; 他. <a href="https://www.w3.org/TR/css-text-4/"><cite>CSSテキストモジュール レベル4</cite></a>. 2024年5月29日.
            作業草案. URL: <a href="https://www.w3.org/TR/css-text-4/">https://www.w3.org/TR/css-text-4/</a>
        <dt id="biblio-css-values-3">[CSS-VALUES-3]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-3/"><cite>CSS値と単位モジュール
                    レベル3</cite></a>. 2024年3月22日. 勧告候補ドラフト. URL: <a
                href="https://www.w3.org/TR/css-values-3/">https://www.w3.org/TR/css-values-3/</a>
        <dt id="biblio-css-values-4">[CSS-VALUES-4]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-4/"><cite>CSS値と単位モジュール
                    レベル4</cite></a>. 2024年3月12日. 作業草案. URL: <a
                href="https://www.w3.org/TR/css-values-4/">https://www.w3.org/TR/css-values-4/</a>
        <dt id="biblio-css-writing-modes-4">[CSS-WRITING-MODES-4]
        <dd>Elika Etemad; Koji Ishii. <a href="https://www.w3.org/TR/css-writing-modes-4/"><cite>CSS書字モード
                    レベル4</cite></a>. 2019年7月30日. 勧告候補. URL: <a
                href="https://www.w3.org/TR/css-writing-modes-4/">https://www.w3.org/TR/css-writing-modes-4/</a>
        <dt id="biblio-css2">[CSS2]
        <dd>Bert Bos; 他. <a href="https://www.w3.org/TR/CSS21/"><cite>カスケーディングスタイルシート レベル2改訂1 (CSS 2.1) 仕様</cite></a>.
            2011年6月7日. 勧告. URL: <a href="https://www.w3.org/TR/CSS21/">https://www.w3.org/TR/CSS21/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>RFCで要求レベルを示すキーワード</cite></a>.
            1997年3月. 現行ベストプラクティス. URL: <a
                href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
    </dl>
    <h3 class="no-num no-ref heading settled" id="informative"><span class="content">参考情報文献</span><a class="self-link"
            href="#informative"></a></h3>
    <dl>
        <dt id="biblio-css-multicol-1">[CSS-MULTICOL-1]
        <dd>Florian Rivoal; Rachel Andrew. <a href="https://www.w3.org/TR/css-multicol-1/"><cite>CSSマルチカラムレイアウトモジュール
                    レベル1</cite></a>. 2024年5月16日. 勧告候補. URL: <a
                href="https://www.w3.org/TR/css-multicol-1/">https://www.w3.org/TR/css-multicol-1/</a>
        <dt id="biblio-css-writing-modes-3">[CSS-WRITING-MODES-3]
        <dd>Elika Etemad; Koji Ishii. <a href="https://www.w3.org/TR/css-writing-modes-3/"><cite>CSS書字モード
                    レベル3</cite></a>. 2019年12月10日. 勧告. URL: <a
                href="https://www.w3.org/TR/css-writing-modes-3/">https://www.w3.org/TR/css-writing-modes-3/</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="property-index"><span class="content">プロパティ一覧</span><a
            class="self-link" href="#property-index"></a></h2>
    <div class="big-element-wrapper">
        <table class="index">
            <thead>
                <tr>
                    <th scope="col">名前
                    <th scope="col">値
                    <th scope="col">初期値
                    <th scope="col">適用対象
                    <th scope="col">継承
                    <th scope="col">%値
                    <th scope="col">アニメーション型
                    <th scope="col">正規順序
                    <th scope="col">算出値
            <tbody>
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-item-cross"
                            id="ref-for-propdef-item-cross②">item-cross</a>
                    <td>[ auto | nowrap | wrap ] || [ normal | reverse ] | wrap-reverse
                    <td>auto
                    <td>flexコンテナー, グリッドコンテナー, メイソンリーコンテナー
                    <td>no
                    <td>N/A
                    <td>離散
                    <td>文法どおり
                    <td>指定通り
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-item-direction"
                            id="ref-for-propdef-item-direction④">item-direction</a>
                    <td>auto | row | column | row-reverse | column-reverse
                    <td>auto
                    <td>flexコンテナー, グリッドコンテナー, メイソンリーコンテナー
                    <td>no
                    <td>N/A
                    <td>離散
                    <td>文法どおり
                    <td>指定通り
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-item-flow"
                            id="ref-for-propdef-item-flow③">item-flow</a>
                    <td>&lt;'item-direction'> || &lt;'item-wrap'> || &lt;'item-pack'> || &lt;'item-slack'>
                    <td>各プロパティ参照
                    <td>各プロパティ参照
                    <td>各プロパティ参照
                    <td>各プロパティ参照
                    <td>各プロパティ参照
                    <td>文法どおり
                    <td>各プロパティ参照
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-item-pack"
                            id="ref-for-propdef-item-pack⑦">item-pack</a>
                    <td>normal | dense || balance
                    <td>normal
                    <td>flexコンテナー, グリッドコンテナー, メイソンリーコンテナー
                    <td>no
                    <td>N/A
                    <td>離散
                    <td>文法どおり
                    <td>指定通り
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-item-slack"
                            id="ref-for-propdef-item-slack⑧">item-slack</a>
                    <td>&lt;length-percentage> | infinite
                    <td>1em
                    <td>メイソンリーコンテナー
                    <td>no
                    <td>グリッド軸内容ボックスサイズ（メイソンリーコンテナー）に対して
                    <td>長さ型
                    <td>文法どおり
                    <td>算出された&lt;length-percentage>値
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-item-track"
                            id="ref-for-propdef-item-track③">item-track</a>
                    <td>auto | row | column | row-reverse | column-reverse
                    <td>auto
                    <td>flexコンテナー, グリッドコンテナー, メイソンリーコンテナー
                    <td>no
                    <td>N/A
                    <td>離散
                    <td>文法どおり
                    <td>指定通り
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-item-wrap"
                            id="ref-for-propdef-item-wrap③">item-wrap</a>
                    <td>[ auto | nowrap | wrap ] || [ normal | reverse ] | wrap-reverse
                    <td>auto
                    <td>flexコンテナー, グリッドコンテナー, メイソンリーコンテナー
                    <td>no
                    <td>N/A
                    <td>離散
                    <td>文法どおり
                    <td>指定通り
        </table>
    </div>
    <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">課題一覧</span><a class="self-link"
            href="#issues-index"></a></h2>
    <div style="counter-reset:issue">
        <div class="issue"> ここで自動配置アイテムの並べ替えをデフォルト動作にすべきか？ <a class="issue-return" href="#issue-f3901e05"
                title="Jump to section">↵</a></div>
        <div class="issue">
            ISSUE(11593)：どの構文スイッチで<a data-link-type="dfn" href="#masonry-layout">メイソンリーレイアウト</a>を確立するか、まだ議論中。
            これまでの提案案：
            <ul>
                <li data-md>
                    <p><a class="css" data-link-type="propdesc"
                            href="https://www.w3.org/TR/CSS21/visuren.html#propdef-display">display:
                            masonry</a>（または同義語、例：<span class="css">display: stack</span>）</p>
                <li data-md>
                    <p><a class="css" data-link-type="propdesc" href="#propdef-item-pack">item-pack: collapse</a>（<span
                            class="property">item-pack</span>参照）</p>
                <li data-md>
                    <p><a class="property css" data-link-type="property"
                            href="https://www.w3.org/TR/css-grid-2/#propdef-grid-template-rows">grid-template-rows</a>/<a
                            class="property css" data-link-type="property"
                            href="https://www.w3.org/TR/css-grid-2/#propdef-grid-template-columns">grid-template-columns</a>の値として<span
                            class="css">collapse</span>を使用し、その軸を<a data-link-type="dfn"
                            href="#stacking-axis">積み重ね軸</a>とする<a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-grid-2/#grid-container">グリッドコンテナー</a>を示す</p>
            </ul>
            <a class="issue-return" href="#issue-65868180" title="Jump to section">↵</a>
        </div>
        <div class="issue"> 初期トラックリストはどうあるべきか？ <a href="https://github.com/w3c/csswg-drafts/issues/10869">[Issue
                #10869]</a> <a class="issue-return" href="#issue-f0b2f95f" title="Jump to section">↵</a></div>
        <div class="issue"> 内容ベースの自動繰り返しトラックは許可すべきか？
            その定義は合理的か？
            グリッドレイアウトでも何らかの形で動作すべきか？ <a href="https://github.com/w3c/csswg-drafts/issues/10915">[Issue #10915]</a> <a
                class="issue-return" href="#issue-b1e94dcd" title="Jump to section">↵</a></div>
        <div class="issue"> 実際にこの値が必要かは不明です。
            明示的グリッドは既に<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-grid-2/#propdef-grid-auto-columns">grid-auto-columns</a>/<a
                class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-grid-2/#propdef-grid-auto-rows">grid-auto-rows</a>/<a
                class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-grid-3/#propdef-masonry-auto-tracks">masonry-auto-tracks</a>の値をテンプレートエリア数に合わせて取得しています。<a
                href="https://github.com/w3c/csswg-drafts/issues/10854">[Issue #10854]</a> <a class="issue-return"
                href="#issue-33a96346" title="Jump to section">↵</a></div>
        <div class="issue"> より良い例が必要!!! <a class="issue-return" href="#issue-33788d66" title="Jump to section">↵</a>
        </div>
        <div class="issue"> <span class="css">1em</span>はデフォルトとして適切か？ <a class="issue-return" href="#issue-7bbfe9d5"
                title="Jump to section">↵</a></div>
        <div class="issue"> この場合、配置カーソルも更新すべきか？ <a class="issue-return" href="#issue-9c647ef6"
                title="Jump to section">↵</a></div>
        <div class="issue"> 積み重ね軸の整列はもっと高度なことをするべきか？
            どうすべきか？ <a class="issue-return" href="#issue-491b71c9" title="Jump to section">↵</a></div>
        <div class="issue"> 最初の行でベースライン整列をサポートできるが、望むか？ <a class="issue-return" href="#issue-4a2d589c"
                title="Jump to section">↵</a></div>
        <div class="issue"> 最後のベースラインは最後に一番下に配置されたアイテムから取得すべきか？ <a class="issue-return" href="#issue-f1320409"
                title="Jump to section">↵</a></div>
        <div class="issue"> <a data-link-type="dfn" href="#stacking-axis">積み重ね軸</a>でstatic positionを定義すると便利かもしれません。
            その時点の<a data-link-type="dfn" href="#grid-axis">グリッド軸</a>トラックの<a data-link-type="dfn"
                href="#running-position">進行位置</a>の最大値（または最小値？）や、直前のアイテムの末端などが定義できるかも？ <a class="issue-return"
                href="#issue-4007c2e6" title="Jump to section">↵</a>
        </div>
        <div class="issue"> このセクションは他仕様（<a data-link-type="biblio" href="#biblio-css-display-4"
                title="CSS Display Module Level 4">[css-display-4]</a>など）に移動の可能性あり。
            複数displayタイプに影響するため。 <a class="issue-return" href="#issue-fd53eff2" title="Jump to section">↵</a></div>
        <div class="issue"> CSSWGはこれらのプロパティ名や関係の整理を検討中です。<a
                href="https://github.com/w3c/csswg-drafts/issues/11480">[Issue #11480]</a> <a class="issue-return"
                href="#issue-c971c9c1" title="Jump to section">↵</a></div>
        <div class="issue"> このプロパティについて議論中の点が2つあります:
            a) 名前をどうするか
            b) 配置の主要方向を示すのか、アイテムを配置するトラックの向きを示すものか
            つまり、ここで定義される<span>主要軸</span>は<span>主要配置軸</span>か、<span>主要トラック軸</span>か。
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-flexbox-1/#flex-layout">flexレイアウト</a>や<a
                data-link-type="dfn" href="https://www.w3.org/TR/css-grid-2/#grid-layout">グリッドレイアウト</a>では一致しますが、
            <a data-link-type="dfn" href="#masonry-layout">メイソンリーレイアウト</a>では主要配置方向はトラックを横断します。<a
                href="https://github.com/w3c/csswg-drafts/issues/11480">[Issue #11480]</a> <a class="issue-return"
                href="#issue-80d7796e" title="Jump to section">↵</a>
        </div>
        <div class="issue"> このプロパティの解釈と命名は<a class="property css" data-link-type="property"
                href="#propdef-item-direction">item-direction</a>/<a class="property css" data-link-type="property"
                href="#propdef-item-track">item-track</a>における軸の解釈に依存します。<a
                href="https://github.com/w3c/csswg-drafts/issues/11480">[Issue #11480]</a> <a class="issue-return"
                href="#issue-b3c639a9" title="Jump to section">↵</a></div>
        <div class="issue"> <a data-link-type="dfn" href="#masonry-layout">メイソンリーレイアウト</a>のスイッチ案の一つとして、この<a
                class="property css" data-link-type="property"
                href="#propdef-item-pack">item-pack</a>プロパティに<span>collapse</span>値を追加する案もあります。<a
                href="https://github.com/w3c/csswg-drafts/issues/11243">[Issue #11243]</a> <a class="issue-return"
                href="#issue-1efcc181" title="Jump to section">↵</a></div>
        <div class="issue"> <span class="css">dense</span>パッキングはメイソンリーにも適用すべきか？
            メイソンリーでは格段にコストが高く、すべての隙間候補に要素を配置してみて収まるか確認しなければならないため。
            Gridは単に整数を調整するだけです。<a href="https://github.com/w3c/csswg-drafts/issues/9326">[Issue
                #9326]</a> <a class="issue-return" href="#issue-152d283d" title="Jump to section">↵</a></div>
    </div>
    <script>/* Boilerplate: script-dom-helper */
        "use strict";
        function query(sel) { return document.querySelector(sel); }

        function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

        function iter(obj) {
            if (!obj) return [];
            var it = obj[Symbol.iterator];
            if (it) return it;
            return Object.entries(obj);
        }

        function mk(tagname, attrs, ...children) {
            const el = document.createElement(tagname);
            for (const [k, v] of iter(attrs)) {
                if (k.slice(0, 3) == "_on") {
                    const eventName = k.slice(3);
                    el.addEventListener(eventName, v);
                } else if (k[0] == "_") {
                    // property, not attribute
                    el[k.slice(1)] = v;
                } else {
                    if (v === false || v == null) {
                        continue;
                    } else if (v === true) {
                        el.setAttribute(k, "");
                        continue;
                    } else {
                        el.setAttribute(k, v);
                    }
                }
            }
            append(el, children);
            return el;
        }

        /* Create shortcuts for every known HTML element */
        [
            "a",
            "abbr",
            "acronym",
            "address",
            "applet",
            "area",
            "article",
            "aside",
            "audio",
            "b",
            "base",
            "basefont",
            "bdo",
            "big",
            "blockquote",
            "body",
            "br",
            "button",
            "canvas",
            "caption",
            "center",
            "cite",
            "code",
            "col",
            "colgroup",
            "datalist",
            "dd",
            "del",
            "details",
            "dfn",
            "dialog",
            "div",
            "dl",
            "dt",
            "em",
            "embed",
            "fieldset",
            "figcaption",
            "figure",
            "font",
            "footer",
            "form",
            "frame",
            "frameset",
            "head",
            "header",
            "h1",
            "h2",
            "h3",
            "h4",
            "h5",
            "h6",
            "hr",
            "html",
            "i",
            "iframe",
            "img",
            "input",
            "ins",
            "kbd",
            "label",
            "legend",
            "li",
            "link",
            "main",
            "map",
            "mark",
            "meta",
            "meter",
            "nav",
            "nobr",
            "noscript",
            "object",
            "ol",
            "optgroup",
            "option",
            "output",
            "p",
            "param",
            "pre",
            "progress",
            "q",
            "s",
            "samp",
            "script",
            "section",
            "select",
            "small",
            "source",
            "span",
            "strike",
            "strong",
            "style",
            "sub",
            "summary",
            "sup",
            "table",
            "tbody",
            "td",
            "template",
            "textarea",
            "tfoot",
            "th",
            "thead",
            "time",
            "title",
            "tr",
            "u",
            "ul",
            "var",
            "video",
            "wbr",
            "xmp",
        ].forEach(tagname => {
            mk[tagname] = (...args) => mk(tagname, ...args);
        });

        function* nodesFromChildList(children) {
            for (const child of children.flat(Infinity)) {
                if (child instanceof Node) {
                    yield child;
                } else {
                    yield new Text(child);
                }
            }
        }
        function append(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                if (el instanceof Node) el.appendChild(child);
                else el.push(child);
            }
            return el;
        }

        function insertAfter(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                el.parentNode.insertBefore(child, el.nextSibling);
            }
            return el;
        }

        function clearContents(el) {
            el.innerHTML = "";
            return el;
        }

        function parseHTML(markup) {
            if (markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
                const doc = document.implementation.createHTMLDocument("");
                doc.documentElement.innerHTML = markup;
                return doc;
            } else {
                const el = mk.template({});
                el.innerHTML = markup;
                return el.content;
            }
        }</script>
    <script>/* Boilerplate: script-dfn-panel */
        "use strict";
        {
            let dfnPanelData = {
                "020c3333": { "dfnID": "020c3333", "dfnText": "end", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-valdef-self-position-end" }], "title": "6. \nAlignment and Spacing" }], "url": "https://www.w3.org/TR/css-align-3/#valdef-self-position-end" },
                "07e702cf": { "dfnID": "07e702cf", "dfnText": "flex layout", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-flex-layout" }], "title": "1.1.2. \nOne-dimensional Grid Layout" }, { "refs": [{ "id": "ref-for-flex-layout\u2460" }, { "id": "ref-for-flex-layout\u2461" }], "title": "2. \nMasonry Layout Model" }, { "refs": [{ "id": "ref-for-flex-layout\u2462" }], "title": "2.1. \nReordering and Accessibility" }, { "refs": [{ "id": "ref-for-flex-layout\u2463" }, { "id": "ref-for-flex-layout\u2464" }, { "id": "ref-for-flex-layout\u2465" }, { "id": "ref-for-flex-layout\u2466" }, { "id": "ref-for-flex-layout\u2467" }], "title": "\nItem Flow Axis: item-track/item-direction" }, { "refs": [{ "id": "ref-for-flex-layout\u2468" }, { "id": "ref-for-flex-layout\u2460\u24ea" }], "title": "\nItem Cross Axis Placement Mode: item-cross/item-wrap" }, { "refs": [{ "id": "ref-for-flex-layout\u2460\u2460" }, { "id": "ref-for-flex-layout\u2460\u2461" }], "title": "\nItem Placement Packing Mode: the item-pack property" }], "url": "https://www.w3.org/TR/css-flexbox-1/#flex-layout" },
                "088aa1a3": { "dfnID": "088aa1a3", "dfnText": "content box", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-x10" }], "title": "4.2. \nPlacement Precision: the item-slack property" }, { "refs": [{ "id": "ref-for-x10\u2460" }], "title": "4.3.1. \nContaining Block" }, { "refs": [{ "id": "ref-for-x10\u2461" }, { "id": "ref-for-x10\u2462" }], "title": "6. \nAlignment and Spacing" }], "url": "https://www.w3.org/TR/CSS21/box.html#x10" },
                "0b7a6d57": { "dfnID": "0b7a6d57", "dfnText": "masonry-auto-tracks", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-masonry-auto-tracks" }], "title": "3.3.1. \nrepeat(auto-areas)" }], "url": "https://www.w3.org/TR/css-grid-3/#propdef-masonry-auto-tracks" },
                "11b7dd33": { "dfnID": "11b7dd33", "dfnText": "order-modified document order", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-order-modified-document-order" }], "title": "4.3. \nMasonry Layout and Placement Algorithm" }], "url": "https://www.w3.org/TR/css-flexbox-1/#order-modified-document-order" },
                "17638765": { "dfnID": "17638765", "dfnText": "collapsed track", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-collapsed-track" }, { "id": "ref-for-collapsed-track\u2460" }, { "id": "ref-for-collapsed-track\u2461" }], "title": "3.3.2. \nrepeat(auto-fit)" }], "url": "https://www.w3.org/TR/css-grid-2/#collapsed-track" },
                "197337f9": { "dfnID": "197337f9", "dfnText": "margin box", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-x17" }], "title": "6. \nAlignment and Spacing" }], "url": "https://www.w3.org/TR/CSS21/box.html#x17" },
                "207a83d3": { "dfnID": "207a83d3", "dfnText": "baseline-sharing group", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-baseline-sharing-group" }], "title": "3.4.2. \nOptimized Track Sizing" }], "url": "https://www.w3.org/TR/css-align-3/#baseline-sharing-group" },
                "2218854e": { "dfnID": "2218854e", "dfnText": "forced break", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-forced-break" }], "title": "7.1. \nFragmentation in the stacking axis" }], "url": "https://www.w3.org/TR/css-break-4/#forced-break" },
                "228fb890": { "dfnID": "228fb890", "dfnText": "grid-auto-columns", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-grid-auto-columns" }], "title": "3.1. \nDeclaring Masonry Track Templates: the grid-template-* properties" }, { "refs": [{ "id": "ref-for-propdef-grid-auto-columns\u2460" }], "title": "3.3.1. \nrepeat(auto-areas)" }], "url": "https://www.w3.org/TR/css-grid-2/#propdef-grid-auto-columns" },
                "25d528b6": { "dfnID": "25d528b6", "dfnText": "grid-template-rows", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-grid-template-rows" }], "title": "2.2. \nEstablishing Masonry Layout" }, { "refs": [{ "id": "ref-for-propdef-grid-template-rows\u2460" }], "title": "\nItem Flow Axis: item-track/item-direction" }], "url": "https://www.w3.org/TR/css-grid-2/#propdef-grid-template-rows" },
                "3208cbb5": { "dfnID": "3208cbb5", "dfnText": "implicit grid", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-implicit-grid" }], "title": "3. \nMasonry Track Specification" }, { "refs": [{ "id": "ref-for-implicit-grid\u2460" }], "title": "4.3. \nMasonry Layout and Placement Algorithm" }], "url": "https://www.w3.org/TR/css-grid-2/#implicit-grid" },
                "354cf3be": { "dfnID": "354cf3be", "dfnText": "grid-template-columns", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-grid-template-columns" }], "title": "2.2. \nEstablishing Masonry Layout" }, { "refs": [{ "id": "ref-for-propdef-grid-template-columns\u2460" }], "title": "3.2. \nSubgrids" }, { "refs": [{ "id": "ref-for-propdef-grid-template-columns\u2461" }], "title": "\nItem Flow Axis: item-track/item-direction" }], "url": "https://www.w3.org/TR/css-grid-2/#propdef-grid-template-columns" },
                "35e80fd9": { "dfnID": "35e80fd9", "dfnText": "start", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-valdef-self-position-start" }, { "id": "ref-for-valdef-self-position-start\u2460" }], "title": "6. \nAlignment and Spacing" }], "url": "https://www.w3.org/TR/css-align-3/#valdef-self-position-start" },
                "3c3b0bc2": { "dfnID": "3c3b0bc2", "dfnText": "fallback alignment", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-fallback-alignment" }], "title": "6. \nAlignment and Spacing" }], "url": "https://www.w3.org/TR/css-align-3/#fallback-alignment" },
                "431a9cad": { "dfnID": "431a9cad", "dfnText": "blockify", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-blockify" }], "title": "2. \nMasonry Layout Model" }], "url": "https://www.w3.org/TR/css-display-4/#blockify" },
                "451a41ae": { "dfnID": "451a41ae", "dfnText": "min-content constraint", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-min-content-constraint" }], "title": "5. \nSizing Grid Containers" }], "url": "https://www.w3.org/TR/css-sizing-3/#min-content-constraint" },
                "47ea2436": { "dfnID": "47ea2436", "dfnText": "outer size", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-outer-size" }], "title": "4.3. \nMasonry Layout and Placement Algorithm" }], "url": "https://www.w3.org/TR/css-sizing-3/#outer-size" },
                "481f5c73": { "dfnID": "481f5c73", "dfnText": "repeat()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-funcdef-repeat" }, { "id": "ref-for-funcdef-repeat\u2460" }, { "id": "ref-for-funcdef-repeat\u2461" }, { "id": "ref-for-funcdef-repeat\u2462" }], "title": "3.1.1. \nIntrinsic Tracks and repeat()" }, { "refs": [{ "id": "ref-for-funcdef-repeat\u2463" }, { "id": "ref-for-funcdef-repeat\u2464" }], "title": "3.3. \nTrack Repetition: the repeat() notation" }, { "refs": [{ "id": "ref-for-funcdef-repeat\u2465" }], "title": "3.3.1. \nrepeat(auto-areas)" }], "url": "https://drafts.csswg.org/css-gaps-1/#funcdef-repeat" },
                "4d2cf2cf": { "dfnID": "4d2cf2cf", "dfnText": "baseline alignment", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-baseline-alignment" }], "title": "3.4.2. \nOptimized Track Sizing" }, { "refs": [{ "id": "ref-for-baseline-alignment\u2460" }], "title": "6. \nAlignment and Spacing" }, { "refs": [{ "id": "ref-for-baseline-alignment\u2461" }, { "id": "ref-for-baseline-alignment\u2462" }], "title": "6.1. \nBaseline Alignment in the stacking axis" }], "url": "https://www.w3.org/TR/css-align-3/#baseline-alignment" },
                "4eb9d37e": { "dfnID": "4eb9d37e", "dfnText": "|", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-comb-one" }], "title": "4.2. \nPlacement Precision: the item-slack property" }, { "refs": [{ "id": "ref-for-comb-one\u2460" }, { "id": "ref-for-comb-one\u2461" }, { "id": "ref-for-comb-one\u2462" }, { "id": "ref-for-comb-one\u2463" }], "title": "\nItem Flow Axis: item-track/item-direction" }, { "refs": [{ "id": "ref-for-comb-one\u2464" }, { "id": "ref-for-comb-one\u2465" }, { "id": "ref-for-comb-one\u2466" }, { "id": "ref-for-comb-one\u2467" }], "title": "\nItem Cross Axis Placement Mode: item-cross/item-wrap" }, { "refs": [{ "id": "ref-for-comb-one\u2468" }], "title": "\nItem Placement Packing Mode: the item-pack property" }], "url": "https://www.w3.org/TR/css-values-4/#comb-one" },
                "4edc72b0": { "dfnID": "4edc72b0", "dfnText": "reading-flow", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-reading-flow" }], "title": "2.1. \nReordering and Accessibility" }], "url": "https://www.w3.org/TR/css-display-4/#propdef-reading-flow" },
                "4fd7e54f": { "dfnID": "4fd7e54f", "dfnText": "<length-percentage>", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-typedef-length-percentage" }, { "id": "ref-for-typedef-length-percentage\u2460" }, { "id": "ref-for-typedef-length-percentage\u2461" }], "title": "4.2. \nPlacement Precision: the item-slack property" }, { "refs": [{ "id": "ref-for-typedef-length-percentage\u2462" }], "title": "\nAppendix A: Generic Layout Item Flow Controls: the item-* properties" }], "url": "https://www.w3.org/TR/css-values-4/#typedef-length-percentage" },
                "50284573": { "dfnID": "50284573", "dfnText": "normal", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-valdef-justify-content-normal" }], "title": "6. \nAlignment and Spacing" }], "url": "https://www.w3.org/TR/css-align-3/#valdef-justify-content-normal" },
                "515ec31f": { "dfnID": "515ec31f", "dfnText": "center", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-valdef-self-position-center" }], "title": "6. \nAlignment and Spacing" }], "url": "https://www.w3.org/TR/css-align-3/#valdef-self-position-center" },
                "546f7867": { "dfnID": "546f7867", "dfnText": "flex-flow", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-flex-flow" }], "title": "\nAppendix A: Generic Layout Item Flow Controls: the item-* properties" }], "url": "https://www.w3.org/TR/css-flexbox-1/#propdef-flex-flow" },
                "564e922b": { "dfnID": "564e922b", "dfnText": "implicit grid track", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-implicit-grid-track" }], "title": "\nItem Cross Axis Placement Mode: item-cross/item-wrap" }], "url": "https://www.w3.org/TR/css-grid-2/#implicit-grid-track" },
                "57b234bc": { "dfnID": "57b234bc", "dfnText": "explicit grid", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-explicit-grid" }], "title": "3. \nMasonry Track Specification" }], "url": "https://www.w3.org/TR/css-grid-2/#explicit-grid" },
                "599428b5": { "dfnID": "599428b5", "dfnText": "block-axis", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-block-axis" }], "title": "2. \nMasonry Layout Model" }, { "refs": [{ "id": "ref-for-block-axis\u2460" }], "title": "2.1. \nReordering and Accessibility" }, { "refs": [{ "id": "ref-for-block-axis\u2461" }, { "id": "ref-for-block-axis\u2462" }], "title": "7.1. \nFragmentation in the stacking axis" }, { "refs": [{ "id": "ref-for-block-axis\u2463" }], "title": "7.2. \nFragmentation in the Grid Axis" }, { "refs": [{ "id": "ref-for-block-axis\u2464" }], "title": "9. \nGraceful Degradation" }, { "refs": [{ "id": "ref-for-block-axis\u2465" }, { "id": "ref-for-block-axis\u2466" }], "title": "\nItem Flow Axis: item-track/item-direction" }], "url": "https://www.w3.org/TR/css-writing-modes-4/#block-axis" },
                "5b3e1fb0": { "dfnID": "5b3e1fb0", "dfnText": "auto", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-valdef-grid-template-columns-auto" }, { "id": "ref-for-valdef-grid-template-columns-auto\u2460" }], "title": "3.1.1. \nIntrinsic Tracks and repeat()" }], "url": "https://www.w3.org/TR/css-grid-2/#valdef-grid-template-columns-auto" },
                "6540f072": { "dfnID": "6540f072", "dfnText": "none (for grid-template-areas)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-valdef-grid-template-areas-none" }], "title": "3.3.1. \nrepeat(auto-areas)" }], "url": "https://www.w3.org/TR/css-grid-2/#valdef-grid-template-areas-none" },
                "6a444fd6": { "dfnID": "6a444fd6", "dfnText": "min-content size", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-min-content" }], "title": "5. \nSizing Grid Containers" }], "url": "https://www.w3.org/TR/css-sizing-3/#min-content" },
                "6cc286fe": { "dfnID": "6cc286fe", "dfnText": "grid-auto-rows", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-grid-auto-rows" }], "title": "3.1. \nDeclaring Masonry Track Templates: the grid-template-* properties" }, { "refs": [{ "id": "ref-for-propdef-grid-auto-rows\u2460" }], "title": "3.3.1. \nrepeat(auto-areas)" }], "url": "https://www.w3.org/TR/css-grid-2/#propdef-grid-auto-rows" },
                "6f9416f0": { "dfnID": "6f9416f0", "dfnText": "grid-gap", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-grid-gap" }], "title": "4.3. \nMasonry Layout and Placement Algorithm" }], "url": "https://www.w3.org/TR/css-align-3/#propdef-grid-gap" },
                "7086fc61": { "dfnID": "7086fc61", "dfnText": "grid area", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-grid-area" }], "title": "4.3.1. \nContaining Block" }], "url": "https://www.w3.org/TR/css-grid-2/#grid-area" },
                "73f86444": { "dfnID": "73f86444", "dfnText": "alignment baseline", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-alignment-baseline" }], "title": "6.1. \nBaseline Alignment in the stacking axis" }], "url": "https://www.w3.org/TR/css-align-3/#alignment-baseline" },
                "7801e50a": { "dfnID": "7801e50a", "dfnText": "text-wrap-style", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-text-wrap-style" }], "title": "\nItem Placement Packing Mode: the item-pack property" }], "url": "https://www.w3.org/TR/css-text-4/#propdef-text-wrap-style" },
                "7a8d5db2": { "dfnID": "7a8d5db2", "dfnText": "order", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-order" }], "title": "2. \nMasonry Layout Model" }, { "refs": [{ "id": "ref-for-propdef-order\u2460" }], "title": "2.1. \nReordering and Accessibility" }], "url": "https://www.w3.org/TR/css-flexbox-1/#propdef-order" },
                "7b233769": { "dfnID": "7b233769", "dfnText": "auto-fit", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-valdef-repeat-auto-fit" }, { "id": "ref-for-valdef-repeat-auto-fit\u2460" }], "title": "3.1.1. \nIntrinsic Tracks and repeat()" }, { "refs": [{ "id": "ref-for-valdef-repeat-auto-fit\u2461" }, { "id": "ref-for-valdef-repeat-auto-fit\u2462" }], "title": "3.3.1. \nrepeat(auto-areas)" }, { "refs": [{ "id": "ref-for-valdef-repeat-auto-fit\u2463" }, { "id": "ref-for-valdef-repeat-auto-fit\u2464" }, { "id": "ref-for-valdef-repeat-auto-fit\u2465" }], "title": "3.3.2. \nrepeat(auto-fit)" }], "url": "https://www.w3.org/TR/css-grid-2/#valdef-repeat-auto-fit" },
                "82ddda8c": { "dfnID": "82ddda8c", "dfnText": "inline-axis", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-inline-axis" }], "title": "2. \nMasonry Layout Model" }, { "refs": [{ "id": "ref-for-inline-axis\u2460" }], "title": "3.2. \nSubgrids" }, { "refs": [{ "id": "ref-for-inline-axis\u2461" }, { "id": "ref-for-inline-axis\u2462" }], "title": "7.2. \nFragmentation in the Grid Axis" }, { "refs": [{ "id": "ref-for-inline-axis\u2463" }, { "id": "ref-for-inline-axis\u2464" }, { "id": "ref-for-inline-axis\u2465" }, { "id": "ref-for-inline-axis\u2466" }], "title": "\nItem Flow Axis: item-track/item-direction" }], "url": "https://www.w3.org/TR/css-writing-modes-4/#inline-axis" },
                "872c3891": { "dfnID": "872c3891", "dfnText": "fragmentainer", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-fragmentainer" }], "title": "7.1. \nFragmentation in the stacking axis" }], "url": "https://www.w3.org/TR/css-break-4/#fragmentainer" },
                "88fad469": { "dfnID": "88fad469", "dfnText": "grid-placement property", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-grid-placement-property" }], "title": "4. \nMasonry Placement" }], "url": "https://www.w3.org/TR/css-grid-2/#grid-placement-property" },
                "8a110a7b": { "dfnID": "8a110a7b", "dfnText": "CSS-wide keywords", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-css-wide-keywords" }], "title": "1.2. \nValue Definitions" }], "url": "https://www.w3.org/TR/css-values-4/#css-wide-keywords" },
                "8a39af7f": { "dfnID": "8a39af7f", "dfnText": "max-content size", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-max-content" }], "title": "5. \nSizing Grid Containers" }], "url": "https://www.w3.org/TR/css-sizing-3/#max-content" },
                "8f27be0f": { "dfnID": "8f27be0f", "dfnText": "longhand property", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-longhand" }], "title": "\nItem Placement Shorthand: the item-flow shorthand" }], "url": "https://www.w3.org/TR/css-cascade-5/#longhand" },
                "97651ccf": { "dfnID": "97651ccf", "dfnText": "multi-line flex container", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-multi-line-flex-container" }], "title": "\nItem Cross Axis Placement Mode: item-cross/item-wrap" }], "url": "https://www.w3.org/TR/css-flexbox-1/#multi-line-flex-container" },
                "980ac56a": { "dfnID": "980ac56a", "dfnText": "shorthand property", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-shorthand-property" }], "title": "\nItem Placement Shorthand: the item-flow shorthand" }], "url": "https://www.w3.org/TR/css-cascade-5/#shorthand-property" },
                "9edcd4ef": { "dfnID": "9edcd4ef", "dfnText": "none (for grid-template-rows)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-valdef-grid-template-rows-none" }, { "id": "ref-for-valdef-grid-template-rows-none\u2460" }], "title": "\nItem Flow Axis: item-track/item-direction" }], "url": "https://www.w3.org/TR/css-grid-2/#valdef-grid-template-rows-none" },
                "a0336d84": { "dfnID": "a0336d84", "dfnText": "||", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-comb-any" }], "title": "\nItem Cross Axis Placement Mode: item-cross/item-wrap" }, { "refs": [{ "id": "ref-for-comb-any\u2460" }], "title": "\nItem Placement Packing Mode: the item-pack property" }, { "refs": [{ "id": "ref-for-comb-any\u2461" }, { "id": "ref-for-comb-any\u2462" }, { "id": "ref-for-comb-any\u2463" }], "title": "\nItem Placement Shorthand: the item-flow shorthand" }], "url": "https://www.w3.org/TR/css-values-4/#comb-any" },
                "a47902ec": { "dfnID": "a47902ec", "dfnText": "max-content constraint", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-max-content-constraint" }], "title": "5. \nSizing Grid Containers" }], "url": "https://www.w3.org/TR/css-sizing-3/#max-content-constraint" },
                "a6eb24bb": { "dfnID": "a6eb24bb", "dfnText": "inline axis", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-inline-axis" }], "title": "2. \nMasonry Layout Model" }, { "refs": [{ "id": "ref-for-inline-axis\u2460" }], "title": "3.2. \nSubgrids" }, { "refs": [{ "id": "ref-for-inline-axis\u2461" }, { "id": "ref-for-inline-axis\u2462" }], "title": "7.2. \nFragmentation in the Grid Axis" }, { "refs": [{ "id": "ref-for-inline-axis\u2463" }, { "id": "ref-for-inline-axis\u2464" }, { "id": "ref-for-inline-axis\u2465" }, { "id": "ref-for-inline-axis\u2466" }], "title": "\nItem Flow Axis: item-track/item-direction" }], "url": "https://www.w3.org/TR/css-writing-modes-4/#inline-axis" },
                "a9860e91": { "dfnID": "a9860e91", "dfnText": "grid-template-areas", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-grid-template-areas" }, { "id": "ref-for-propdef-grid-template-areas\u2460" }], "title": "3.3.1. \nrepeat(auto-areas)" }], "url": "https://www.w3.org/TR/css-grid-2/#propdef-grid-template-areas" },
                "auto-placement-cursor": { "dfnID": "auto-placement-cursor", "dfnText": "auto-placement cursor", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-auto-placement-cursor" }, { "id": "ref-for-auto-placement-cursor\u2460" }], "title": "4.3. \nMasonry Layout and Placement Algorithm" }], "url": "#auto-placement-cursor" },
                "b4a14210": { "dfnID": "b4a14210", "dfnText": "grid track", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-grid-track" }], "title": "2. \nMasonry Layout Model" }], "url": "https://www.w3.org/TR/css-grid-2/#grid-track" },
                "b55ea3dd": { "dfnID": "b55ea3dd", "dfnText": "single-line flex container", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-single-line-flex-container" }], "title": "\nItem Cross Axis Placement Mode: item-cross/item-wrap" }], "url": "https://www.w3.org/TR/css-flexbox-1/#single-line-flex-container" },
                "b70fab87": { "dfnID": "b70fab87", "dfnText": "flex-wrap", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-flex-wrap" }], "title": "\nItem Cross Axis Placement Mode: item-cross/item-wrap" }], "url": "https://www.w3.org/TR/css-flexbox-1/#propdef-flex-wrap" },
                "b8dade0f": { "dfnID": "b8dade0f", "dfnText": "block axis", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-block-axis" }], "title": "2. \nMasonry Layout Model" }, { "refs": [{ "id": "ref-for-block-axis\u2460" }], "title": "2.1. \nReordering and Accessibility" }, { "refs": [{ "id": "ref-for-block-axis\u2461" }, { "id": "ref-for-block-axis\u2462" }], "title": "7.1. \nFragmentation in the stacking axis" }, { "refs": [{ "id": "ref-for-block-axis\u2463" }], "title": "7.2. \nFragmentation in the Grid Axis" }, { "refs": [{ "id": "ref-for-block-axis\u2464" }], "title": "9. \nGraceful Degradation" }, { "refs": [{ "id": "ref-for-block-axis\u2465" }, { "id": "ref-for-block-axis\u2466" }], "title": "\nItem Flow Axis: item-track/item-direction" }], "url": "https://www.w3.org/TR/css-writing-modes-4/#block-axis" },
                "b93bc3b3": { "dfnID": "b93bc3b3", "dfnText": "masonry-track", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-masonry-track" }], "title": "3.1.1. \nIntrinsic Tracks and repeat()" }], "url": "https://www.w3.org/TR/css-grid-3/#propdef-masonry-track" },
                "ba30fc9a": { "dfnID": "ba30fc9a", "dfnText": "grid item", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-grid-item" }, { "id": "ref-for-grid-item\u2460" }], "title": "2. \nMasonry Layout Model" }, { "refs": [{ "id": "ref-for-grid-item\u2461" }], "title": "3.1.1. \nIntrinsic Tracks and repeat()" }, { "refs": [{ "id": "ref-for-grid-item\u2462" }], "title": "4.3.1. \nContaining Block" }, { "refs": [{ "id": "ref-for-grid-item\u2463" }, { "id": "ref-for-grid-item\u2464" }], "title": "6. \nAlignment and Spacing" }, { "refs": [{ "id": "ref-for-grid-item\u2465" }, { "id": "ref-for-grid-item\u2466" }], "title": "6.1. \nBaseline Alignment in the stacking axis" }, { "refs": [{ "id": "ref-for-grid-item\u2467" }], "title": "7.1. \nFragmentation in the stacking axis" }], "url": "https://www.w3.org/TR/css-grid-2/#grid-item" },
                "bbc693a1": { "dfnID": "bbc693a1", "dfnText": "subgrid", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-subgrid" }, { "id": "ref-for-subgrid\u2460" }, { "id": "ref-for-subgrid\u2461" }], "title": "3.2. \nSubgrids" }], "url": "https://www.w3.org/TR/css-grid-2/#subgrid" },
                "bdee6ddc": { "dfnID": "bdee6ddc", "dfnText": "automatic grid position", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-automatic-grid-position" }, { "id": "ref-for-automatic-grid-position\u2460" }], "title": "3.4. \nGrid Axis Track Sizing" }, { "refs": [{ "id": "ref-for-automatic-grid-position\u2461" }, { "id": "ref-for-automatic-grid-position\u2462" }], "title": "3.4.1. \nSubgrid Item Contributions" }, { "refs": [{ "id": "ref-for-automatic-grid-position\u2463" }], "title": "3.4.2. \nOptimized Track Sizing" }, { "refs": [{ "id": "ref-for-automatic-grid-position\u2464" }], "title": "4. \nMasonry Placement" }], "url": "https://www.w3.org/TR/css-grid-2/#automatic-grid-position" },
                "c16a1180": { "dfnID": "c16a1180", "dfnText": "containing block", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-containing-block" }], "title": "4.3.1. \nContaining Block" }], "url": "https://www.w3.org/TR/CSS21/visuren.html#containing-block" },
                "c1c732b9": { "dfnID": "c1c732b9", "dfnText": "available space", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-available" }], "title": "3. \nMasonry Track Specification" }], "url": "https://www.w3.org/TR/css-sizing-3/#available" },
                "cc7f0a64": { "dfnID": "cc7f0a64", "dfnText": "flex container", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-flex-container" }, { "id": "ref-for-flex-container\u2460" }], "title": "\nItem Flow Axis: item-track/item-direction" }, { "refs": [{ "id": "ref-for-flex-container\u2461" }, { "id": "ref-for-flex-container\u2462" }], "title": "\nItem Cross Axis Placement Mode: item-cross/item-wrap" }, { "refs": [{ "id": "ref-for-flex-container\u2463" }], "title": "\nItem Placement Packing Mode: the item-pack property" }], "url": "https://www.w3.org/TR/css-flexbox-1/#flex-container" },
                "column-masonry-container": { "dfnID": "column-masonry-container", "dfnText": "column masonry container", "external": false, "refSections": [], "url": "#column-masonry-container" },
                "d4d84650": { "dfnID": "d4d84650", "dfnText": "grid-auto-flow", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-grid-auto-flow" }, { "id": "ref-for-propdef-grid-auto-flow\u2460" }, { "id": "ref-for-propdef-grid-auto-flow\u2461" }], "title": "\nAppendix A: Generic Layout Item Flow Controls: the item-* properties" }], "url": "https://www.w3.org/TR/css-grid-3/#propdef-grid-auto-flow" },
                "d909e27a": { "dfnID": "d909e27a", "dfnText": "masonry", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-valdef-display-masonry" }], "title": "3.2. \nSubgrids" }], "url": "https://www.w3.org/TR/css-grid-3/#valdef-display-masonry" },
                "d911d74f": { "dfnID": "d911d74f", "dfnText": "definite grid position", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-definite-grid-position" }], "title": "2.1. \nReordering and Accessibility" }, { "refs": [{ "id": "ref-for-definite-grid-position\u2460" }], "title": "3.4.1. \nSubgrid Item Contributions" }, { "refs": [{ "id": "ref-for-definite-grid-position\u2461" }], "title": "4.3. \nMasonry Layout and Placement Algorithm" }], "url": "https://www.w3.org/TR/css-grid-2/#definite-grid-position" },
                "da3291f7": { "dfnID": "da3291f7", "dfnText": "auto-fill", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-valdef-repeat-auto-fill" }, { "id": "ref-for-valdef-repeat-auto-fill\u2460" }], "title": "3.1.1. \nIntrinsic Tracks and repeat()" }, { "refs": [{ "id": "ref-for-valdef-repeat-auto-fill\u2461" }, { "id": "ref-for-valdef-repeat-auto-fill\u2462" }], "title": "3.3.2. \nrepeat(auto-fit)" }], "url": "https://www.w3.org/TR/css-grid-2/#valdef-repeat-auto-fill" },
                "da7c24e2": { "dfnID": "da7c24e2", "dfnText": "distributed alignment", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-distributed-alignment" }], "title": "6. \nAlignment and Spacing" }], "url": "https://www.w3.org/TR/css-align-3/#distributed-alignment" },
                "db4ae04f": { "dfnID": "db4ae04f", "dfnText": "grid layout", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-grid-layout" }, { "id": "ref-for-grid-layout\u2460" }], "title": "1.1.2. \nOne-dimensional Grid Layout" }, { "refs": [{ "id": "ref-for-grid-layout\u2461" }, { "id": "ref-for-grid-layout\u2462" }], "title": "2. \nMasonry Layout Model" }, { "refs": [{ "id": "ref-for-grid-layout\u2463" }], "title": "2.1. \nReordering and Accessibility" }, { "refs": [{ "id": "ref-for-grid-layout\u2464" }, { "id": "ref-for-grid-layout\u2465" }, { "id": "ref-for-grid-layout\u2466" }], "title": "3. \nMasonry Track Specification" }, { "refs": [{ "id": "ref-for-grid-layout\u2467" }], "title": "4.1. \nSpecifying Masonry Item Placement: the grid-column-* and grid-row-* properties" }, { "refs": [{ "id": "ref-for-grid-layout\u2468" }], "title": "4.3.2. \nPlacement and Writing Modes" }, { "refs": [{ "id": "ref-for-grid-layout\u2460\u24ea" }, { "id": "ref-for-grid-layout\u2460\u2460" }, { "id": "ref-for-grid-layout\u2460\u2461" }], "title": "\nItem Flow Axis: item-track/item-direction" }, { "refs": [{ "id": "ref-for-grid-layout\u2460\u2462" }, { "id": "ref-for-grid-layout\u2460\u2463" }], "title": "\nItem Cross Axis Placement Mode: item-cross/item-wrap" }], "url": "https://www.w3.org/TR/css-grid-2/#grid-layout" },
                "dc2ecc7a": { "dfnID": "dc2ecc7a", "dfnText": "alignment subject", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-alignment-subject" }, { "id": "ref-for-alignment-subject\u2460" }], "title": "6. \nAlignment and Spacing" }], "url": "https://www.w3.org/TR/css-align-3/#alignment-subject" },
                "de6bd31b": { "dfnID": "de6bd31b", "dfnText": "justify-content", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-justify-content" }], "title": "6. \nAlignment and Spacing" }], "url": "https://www.w3.org/TR/css-align-3/#propdef-justify-content" },
                "df72a52c": { "dfnID": "df72a52c", "dfnText": "grid container", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-grid-container" }, { "id": "ref-for-grid-container\u2460" }], "title": "2. \nMasonry Layout Model" }, { "refs": [{ "id": "ref-for-grid-container\u2461" }], "title": "2.2. \nEstablishing Masonry Layout" }, { "refs": [{ "id": "ref-for-grid-container\u2462" }], "title": "3. \nMasonry Track Specification" }, { "refs": [{ "id": "ref-for-grid-container\u2463" }], "title": "3.1. \nDeclaring Masonry Track Templates: the grid-template-* properties" }, { "refs": [{ "id": "ref-for-grid-container\u2464" }], "title": "3.2. \nSubgrids" }, { "refs": [{ "id": "ref-for-grid-container\u2465" }], "title": "3.3.1. \nrepeat(auto-areas)" }, { "refs": [{ "id": "ref-for-grid-container\u2466" }], "title": "3.3.2. \nrepeat(auto-fit)" }, { "refs": [{ "id": "ref-for-grid-container\u2467" }], "title": "3.4.1. \nSubgrid Item Contributions" }, { "refs": [{ "id": "ref-for-grid-container\u2468" }], "title": "4.3.1. \nContaining Block" }, { "refs": [{ "id": "ref-for-grid-container\u2460\u24ea" }, { "id": "ref-for-grid-container\u2460\u2460" }, { "id": "ref-for-grid-container\u2460\u2461" }], "title": "5. \nSizing Grid Containers" }, { "refs": [{ "id": "ref-for-grid-container\u2460\u2462" }, { "id": "ref-for-grid-container\u2460\u2463" }, { "id": "ref-for-grid-container\u2460\u2464" }], "title": "6. \nAlignment and Spacing" }, { "refs": [{ "id": "ref-for-grid-container\u2460\u2465" }, { "id": "ref-for-grid-container\u2460\u2466" }, { "id": "ref-for-grid-container\u2460\u2467" }, { "id": "ref-for-grid-container\u2460\u2468" }], "title": "6.1. \nBaseline Alignment in the stacking axis" }, { "refs": [{ "id": "ref-for-grid-container\u2461\u24ea" }], "title": "7.1. \nFragmentation in the stacking axis" }, { "refs": [{ "id": "ref-for-grid-container\u2461\u2460" }], "title": "7.2. \nFragmentation in the Grid Axis" }, { "refs": [{ "id": "ref-for-grid-container\u2461\u2461" }], "title": "8. \nAbsolute Positioning" }, { "refs": [{ "id": "ref-for-grid-container\u2461\u2462" }, { "id": "ref-for-grid-container\u2461\u2463" }], "title": "\nItem Flow Axis: item-track/item-direction" }, { "refs": [{ "id": "ref-for-grid-container\u2461\u2464" }], "title": "\nItem Cross Axis Placement Mode: item-cross/item-wrap" }, { "refs": [{ "id": "ref-for-grid-container\u2461\u2465" }], "title": "\nItem Placement Packing Mode: the item-pack property" }], "url": "https://www.w3.org/TR/css-grid-2/#grid-container" },
                "e1e1764e": { "dfnID": "e1e1764e", "dfnText": "masonry-template-areas", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-masonry-template-areas" }, { "id": "ref-for-propdef-masonry-template-areas\u2460" }], "title": "3.3.1. \nrepeat(auto-areas)" }], "url": "https://www.w3.org/TR/css-grid-3/#propdef-masonry-template-areas" },
                "eb6008ce": { "dfnID": "eb6008ce", "dfnText": "writing mode", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-writing-mode" }], "title": "4.3.2. \nPlacement and Writing Modes" }], "url": "https://www.w3.org/TR/css-writing-modes-4/#writing-mode" },
                "ec67a9e7": { "dfnID": "ec67a9e7", "dfnText": "stretch", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-valdef-align-content-stretch" }], "title": "6. \nAlignment and Spacing" }], "url": "https://www.w3.org/TR/css-align-3/#valdef-align-content-stretch" },
                "edecaf14": { "dfnID": "edecaf14", "dfnText": "masonry-template-tracks", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-masonry-template-tracks" }, { "id": "ref-for-propdef-masonry-template-tracks\u2460" }, { "id": "ref-for-propdef-masonry-template-tracks\u2461" }], "title": "3.1.1. \nIntrinsic Tracks and repeat()" }], "url": "https://www.w3.org/TR/css-grid-3/#propdef-masonry-template-tracks" },
                "ef9e6926": { "dfnID": "ef9e6926", "dfnText": "display", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-display" }, { "id": "ref-for-propdef-display\u2460" }], "title": "2.2. \nEstablishing Masonry Layout" }], "url": "https://www.w3.org/TR/CSS21/visuren.html#propdef-display" },
                "fb688f4f": { "dfnID": "fb688f4f", "dfnText": "direction", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-direction" }, { "id": "ref-for-propdef-direction\u2460" }, { "id": "ref-for-propdef-direction\u2461" }, { "id": "ref-for-propdef-direction\u2462" }, { "id": "ref-for-propdef-direction\u2463" }], "title": "4.3.2. \nPlacement and Writing Modes" }], "url": "https://www.w3.org/TR/css-writing-modes-3/#propdef-direction" },
                "fde954ee": { "dfnID": "fde954ee", "dfnText": "align-content", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-align-content" }], "title": "6. \nAlignment and Spacing" }], "url": "https://www.w3.org/TR/css-align-3/#propdef-align-content" },
                "fdfd719c": { "dfnID": "fdfd719c", "dfnText": "definite position", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-definite-grid-position" }], "title": "2.1. \nReordering and Accessibility" }, { "refs": [{ "id": "ref-for-definite-grid-position\u2460" }], "title": "3.4.1. \nSubgrid Item Contributions" }, { "refs": [{ "id": "ref-for-definite-grid-position\u2461" }], "title": "4.3. \nMasonry Layout and Placement Algorithm" }], "url": "https://www.w3.org/TR/css-grid-2/#definite-grid-position" },
                "grid-axis": { "dfnID": "grid-axis", "dfnText": "grid axis", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-grid-axis" }], "title": "2. \nMasonry Layout Model" }, { "refs": [{ "id": "ref-for-grid-axis\u2460" }], "title": "2.1. \nReordering and Accessibility" }, { "refs": [{ "id": "ref-for-grid-axis\u2461" }, { "id": "ref-for-grid-axis\u2462" }], "title": "3. \nMasonry Track Specification" }, { "refs": [{ "id": "ref-for-grid-axis\u2463" }], "title": "3.1. \nDeclaring Masonry Track Templates: the grid-template-* properties" }, { "refs": [{ "id": "ref-for-grid-axis\u2464" }], "title": "3.2. \nSubgrids" }, { "refs": [{ "id": "ref-for-grid-axis\u2465" }, { "id": "ref-for-grid-axis\u2466" }, { "id": "ref-for-grid-axis\u2467" }], "title": "3.4. \nGrid Axis Track Sizing" }, { "refs": [{ "id": "ref-for-grid-axis\u2468" }], "title": "3.4.2. \nOptimized Track Sizing" }, { "refs": [{ "id": "ref-for-grid-axis\u2460\u24ea" }], "title": "4. \nMasonry Placement" }, { "refs": [{ "id": "ref-for-grid-axis\u2460\u2460" }], "title": "4.1. \nSpecifying Masonry Item Placement: the grid-column-* and grid-row-* properties" }, { "refs": [{ "id": "ref-for-grid-axis\u2460\u2461" }], "title": "4.2. \nPlacement Precision: the item-slack property" }, { "refs": [{ "id": "ref-for-grid-axis\u2460\u2462" }, { "id": "ref-for-grid-axis\u2460\u2463" }, { "id": "ref-for-grid-axis\u2460\u2464" }, { "id": "ref-for-grid-axis\u2460\u2465" }, { "id": "ref-for-grid-axis\u2460\u2466" }, { "id": "ref-for-grid-axis\u2460\u2467" }, { "id": "ref-for-grid-axis\u2460\u2468" }, { "id": "ref-for-grid-axis\u2461\u24ea" }], "title": "4.3. \nMasonry Layout and Placement Algorithm" }, { "refs": [{ "id": "ref-for-grid-axis\u2461\u2460" }], "title": "4.3.1. \nContaining Block" }, { "refs": [{ "id": "ref-for-grid-axis\u2461\u2461" }, { "id": "ref-for-grid-axis\u2461\u2462" }], "title": "4.3.2. \nPlacement and Writing Modes" }, { "refs": [{ "id": "ref-for-grid-axis\u2461\u2463" }], "title": "6. \nAlignment and Spacing" }, { "refs": [{ "id": "ref-for-grid-axis\u2461\u2464" }], "title": "6.1. \nBaseline Alignment in the stacking axis" }, { "refs": [{ "id": "ref-for-grid-axis\u2461\u2465" }, { "id": "ref-for-grid-axis\u2461\u2466" }, { "id": "ref-for-grid-axis\u2461\u2467" }], "title": "7.1. \nFragmentation in the stacking axis" }, { "refs": [{ "id": "ref-for-grid-axis\u2461\u2468" }, { "id": "ref-for-grid-axis\u2462\u24ea" }, { "id": "ref-for-grid-axis\u2462\u2460" }], "title": "7.2. \nFragmentation in the Grid Axis" }, { "refs": [{ "id": "ref-for-grid-axis\u2462\u2461" }], "title": "8. \nAbsolute Positioning" }], "url": "#grid-axis" },
                "item-groups": { "dfnID": "item-groups", "dfnText": "item groups", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-item-groups" }], "title": "3.4.2. \nOptimized Track Sizing" }], "url": "#item-groups" },
                "masonry-box": { "dfnID": "masonry-box", "dfnText": "masonry box", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-masonry-box" }], "title": "5. \nSizing Grid Containers" }, { "refs": [{ "id": "ref-for-masonry-box\u2460" }, { "id": "ref-for-masonry-box\u2461" }], "title": "6. \nAlignment and Spacing" }, { "refs": [{ "id": "ref-for-masonry-box\u2462" }, { "id": "ref-for-masonry-box\u2463" }], "title": "8. \nAbsolute Positioning" }], "url": "#masonry-box" },
                "masonry-container": { "dfnID": "masonry-container", "dfnText": "masonry container", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-masonry-container" }], "title": "1.1.1. \nWaterfall Layout with Auto-placed Items" }, { "refs": [{ "id": "ref-for-masonry-container\u2460" }], "title": "1.1.2. \nOne-dimensional Grid Layout" }, { "refs": [{ "id": "ref-for-masonry-container\u2461" }, { "id": "ref-for-masonry-container\u2462" }], "title": "2. \nMasonry Layout Model" }, { "refs": [{ "id": "ref-for-masonry-container\u2463" }], "title": "3. \nMasonry Track Specification" }, { "refs": [{ "id": "ref-for-masonry-container\u2464" }], "title": "3.1. \nDeclaring Masonry Track Templates: the grid-template-* properties" }, { "refs": [{ "id": "ref-for-masonry-container\u2465" }], "title": "3.1.1. \nIntrinsic Tracks and repeat()" }, { "refs": [{ "id": "ref-for-masonry-container\u2466" }, { "id": "ref-for-masonry-container\u2467" }, { "id": "ref-for-masonry-container\u2468" }], "title": "3.2. \nSubgrids" }, { "refs": [{ "id": "ref-for-masonry-container\u2460\u24ea" }], "title": "3.3.1. \nrepeat(auto-areas)" }, { "refs": [{ "id": "ref-for-masonry-container\u2460\u2460" }, { "id": "ref-for-masonry-container\u2460\u2461" }], "title": "3.3.2. \nrepeat(auto-fit)" }, { "refs": [{ "id": "ref-for-masonry-container\u2460\u2462" }], "title": "3.4.1. \nSubgrid Item Contributions" }, { "refs": [{ "id": "ref-for-masonry-container\u2460\u2463" }], "title": "3.4.2. \nOptimized Track Sizing" }, { "refs": [{ "id": "ref-for-masonry-container\u2460\u2464" }, { "id": "ref-for-masonry-container\u2460\u2465" }, { "id": "ref-for-masonry-container\u2460\u2466" }, { "id": "ref-for-masonry-container\u2460\u2467" }], "title": "4.2. \nPlacement Precision: the item-slack property" }, { "refs": [{ "id": "ref-for-masonry-container\u2460\u2468" }], "title": "8. \nAbsolute Positioning" }, { "refs": [{ "id": "ref-for-masonry-container\u2461\u24ea" }, { "id": "ref-for-masonry-container\u2461\u2460" }], "title": "\nItem Flow Axis: item-track/item-direction" }, { "refs": [{ "id": "ref-for-masonry-container\u2461\u2461" }], "title": "\nItem Cross Axis Placement Mode: item-cross/item-wrap" }, { "refs": [{ "id": "ref-for-masonry-container\u2461\u2462" }], "title": "\nItem Placement Packing Mode: the item-pack property" }], "url": "#masonry-container" },
                "masonry-item": { "dfnID": "masonry-item", "dfnText": "masonry items", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-masonry-item" }, { "id": "ref-for-masonry-item\u2460" }], "title": "3.1.1. \nIntrinsic Tracks and repeat()" }, { "refs": [{ "id": "ref-for-masonry-item\u2461" }], "title": "3.4.2. \nOptimized Track Sizing" }, { "refs": [{ "id": "ref-for-masonry-item\u2462" }], "title": "4.2. \nPlacement Precision: the item-slack property" }], "url": "#masonry-item" },
                "masonry-layout": { "dfnID": "masonry-layout", "dfnText": "Masonry layout", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-masonry-layout" }, { "id": "ref-for-masonry-layout\u2460" }], "title": "1.1.1. \nWaterfall Layout with Auto-placed Items" }, { "refs": [{ "id": "ref-for-masonry-layout\u2461" }, { "id": "ref-for-masonry-layout\u2462" }], "title": "2. \nMasonry Layout Model" }, { "refs": [{ "id": "ref-for-masonry-layout\u2463" }], "title": "2.1. \nReordering and Accessibility" }, { "refs": [{ "id": "ref-for-masonry-layout\u2464" }], "title": "2.2. \nEstablishing Masonry Layout" }, { "refs": [{ "id": "ref-for-masonry-layout\u2465" }, { "id": "ref-for-masonry-layout\u2466" }], "title": "3.2. \nSubgrids" }, { "refs": [{ "id": "ref-for-masonry-layout\u2467" }], "title": "4.3.1. \nContaining Block" }, { "refs": [{ "id": "ref-for-masonry-layout\u2468" }], "title": "7.1. \nFragmentation in the stacking axis" }, { "refs": [{ "id": "ref-for-masonry-layout\u2460\u24ea" }, { "id": "ref-for-masonry-layout\u2460\u2460" }, { "id": "ref-for-masonry-layout\u2460\u2461" }], "title": "7.2. \nFragmentation in the Grid Axis" }, { "refs": [{ "id": "ref-for-masonry-layout\u2460\u2462" }, { "id": "ref-for-masonry-layout\u2460\u2463" }, { "id": "ref-for-masonry-layout\u2460\u2464" }, { "id": "ref-for-masonry-layout\u2460\u2465" }, { "id": "ref-for-masonry-layout\u2460\u2466" }], "title": "\nItem Flow Axis: item-track/item-direction" }, { "refs": [{ "id": "ref-for-masonry-layout\u2460\u2467" }], "title": "\nItem Placement Packing Mode: the item-pack property" }, { "refs": [{ "id": "ref-for-masonry-layout\u2460\u2468" }], "title": "\nAdditions Since Level 2" }], "url": "#masonry-layout" },
                "masonry-tie-threshold": { "dfnID": "masonry-tie-threshold", "dfnText": "tie threshold", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-masonry-tie-threshold" }], "title": "4.2. \nPlacement Precision: the item-slack property" }, { "refs": [{ "id": "ref-for-masonry-tie-threshold\u2460" }], "title": "4.3. \nMasonry Layout and Placement Algorithm" }], "url": "#masonry-tie-threshold" },
                "masonry-track": { "dfnID": "masonry-track", "dfnText": "masonry tracks", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-masonry-track" }], "title": "4.2. \nPlacement Precision: the item-slack property" }], "url": "#masonry-track" },
                "primary-axis": { "dfnID": "primary-axis", "dfnText": "primary axis", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-primary-axis" }], "title": "\nItem Cross Axis Placement Mode: item-cross/item-wrap" }], "url": "#primary-axis" },
                "primary-placement-axis": { "dfnID": "primary-placement-axis", "dfnText": "primary placement axis", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-primary-placement-axis" }, { "id": "ref-for-primary-placement-axis\u2460" }, { "id": "ref-for-primary-placement-axis\u2461" }, { "id": "ref-for-primary-placement-axis\u2462" }], "title": "\nItem Cross Axis Placement Mode: item-cross/item-wrap" }], "url": "#primary-placement-axis" },
                "primary-track-axis": { "dfnID": "primary-track-axis", "dfnText": "primary track axis", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-primary-track-axis" }, { "id": "ref-for-primary-track-axis\u2460" }], "title": "\nItem Cross Axis Placement Mode: item-cross/item-wrap" }], "url": "#primary-track-axis" },
                "propdef-item-cross": { "dfnID": "propdef-item-cross", "dfnText": "item-cross", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-propdef-item-cross" }], "title": "\nAppendix A: Generic Layout Item Flow Controls: the item-* properties" }, { "refs": [{ "id": "ref-for-propdef-item-cross\u2460" }], "title": "\nItem Cross Axis Placement Mode: item-cross/item-wrap" }], "url": "#propdef-item-cross" },
                "propdef-item-direction": { "dfnID": "propdef-item-direction", "dfnText": "item-direction", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-propdef-item-direction" }], "title": "\nAppendix A: Generic Layout Item Flow Controls: the item-* properties" }, { "refs": [{ "id": "ref-for-propdef-item-direction\u2460" }], "title": "\nItem Flow Axis: item-track/item-direction" }, { "refs": [{ "id": "ref-for-propdef-item-direction\u2461" }], "title": "\nItem Cross Axis Placement Mode: item-cross/item-wrap" }, { "refs": [{ "id": "ref-for-propdef-item-direction\u2462" }], "title": "\nItem Placement Shorthand: the item-flow shorthand" }], "url": "#propdef-item-direction" },
                "propdef-item-flow": { "dfnID": "propdef-item-flow", "dfnText": "item-flow", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-propdef-item-flow" }], "title": "\nItem Placement Shorthand: the item-flow shorthand" }, { "refs": [{ "id": "ref-for-propdef-item-flow\u2460" }], "title": "\nAdditions Since Level 2" }, { "refs": [{ "id": "ref-for-propdef-item-flow\u2461" }], "title": "\nRecent Changes" }], "url": "#propdef-item-flow" },
                "propdef-item-pack": { "dfnID": "propdef-item-pack", "dfnText": "item-pack", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-propdef-item-pack" }, { "id": "ref-for-propdef-item-pack\u2460" }], "title": "2.2. \nEstablishing Masonry Layout" }, { "refs": [{ "id": "ref-for-propdef-item-pack\u2461" }, { "id": "ref-for-propdef-item-pack\u2462" }], "title": "\nAppendix A: Generic Layout Item Flow Controls: the item-* properties" }, { "refs": [{ "id": "ref-for-propdef-item-pack\u2463" }, { "id": "ref-for-propdef-item-pack\u2464" }], "title": "\nItem Placement Packing Mode: the item-pack property" }, { "refs": [{ "id": "ref-for-propdef-item-pack\u2465" }], "title": "\nItem Placement Shorthand: the item-flow shorthand" }], "url": "#propdef-item-pack" },
                "propdef-item-slack": { "dfnID": "propdef-item-slack", "dfnText": "item-slack", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-propdef-item-slack" }, { "id": "ref-for-propdef-item-slack\u2460" }], "title": "2.1. \nReordering and Accessibility" }, { "refs": [{ "id": "ref-for-propdef-item-slack\u2461" }, { "id": "ref-for-propdef-item-slack\u2462" }], "title": "4.2. \nPlacement Precision: the item-slack property" }, { "refs": [{ "id": "ref-for-propdef-item-slack\u2463" }, { "id": "ref-for-propdef-item-slack\u2464" }], "title": "\nAppendix A: Generic Layout Item Flow Controls: the item-* properties" }, { "refs": [{ "id": "ref-for-propdef-item-slack\u2465" }], "title": "\nItem Placement Shorthand: the item-flow shorthand" }, { "refs": [{ "id": "ref-for-propdef-item-slack\u2466" }], "title": "\nRecent Changes" }], "url": "#propdef-item-slack" },
                "propdef-item-track": { "dfnID": "propdef-item-track", "dfnText": "item-track", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-propdef-item-track" }], "title": "\nAppendix A: Generic Layout Item Flow Controls: the item-* properties" }, { "refs": [{ "id": "ref-for-propdef-item-track\u2460" }], "title": "\nItem Flow Axis: item-track/item-direction" }, { "refs": [{ "id": "ref-for-propdef-item-track\u2461" }], "title": "\nItem Cross Axis Placement Mode: item-cross/item-wrap" }], "url": "#propdef-item-track" },
                "propdef-item-wrap": { "dfnID": "propdef-item-wrap", "dfnText": "item-wrap", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-propdef-item-wrap" }], "title": "\nAppendix A: Generic Layout Item Flow Controls: the item-* properties" }, { "refs": [{ "id": "ref-for-propdef-item-wrap\u2460" }], "title": "\nItem Cross Axis Placement Mode: item-cross/item-wrap" }, { "refs": [{ "id": "ref-for-propdef-item-wrap\u2461" }], "title": "\nItem Placement Shorthand: the item-flow shorthand" }], "url": "#propdef-item-wrap" },
                "row-masonry-container": { "dfnID": "row-masonry-container", "dfnText": "row masonry container", "external": false, "refSections": [], "url": "#row-masonry-container" },
                "running-position": { "dfnID": "running-position", "dfnText": "running position", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-running-position" }, { "id": "ref-for-running-position\u2460" }, { "id": "ref-for-running-position\u2461" }], "title": "4.3. \nMasonry Layout and Placement Algorithm" }, { "refs": [{ "id": "ref-for-running-position\u2462" }], "title": "7.1. \nFragmentation in the stacking axis" }, { "refs": [{ "id": "ref-for-running-position\u2463" }], "title": "8. \nAbsolute Positioning" }], "url": "#running-position" },
                "stacking-axis": { "dfnID": "stacking-axis", "dfnText": "stacking axis", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-stacking-axis" }, { "id": "ref-for-stacking-axis\u2460" }], "title": "2. \nMasonry Layout Model" }, { "refs": [{ "id": "ref-for-stacking-axis\u2461" }], "title": "2.1. \nReordering and Accessibility" }, { "refs": [{ "id": "ref-for-stacking-axis\u2462" }], "title": "2.2. \nEstablishing Masonry Layout" }, { "refs": [{ "id": "ref-for-stacking-axis\u2463" }], "title": "3.1. \nDeclaring Masonry Track Templates: the grid-template-* properties" }, { "refs": [{ "id": "ref-for-stacking-axis\u2464" }, { "id": "ref-for-stacking-axis\u2465" }], "title": "3.2. \nSubgrids" }, { "refs": [{ "id": "ref-for-stacking-axis\u2466" }], "title": "4.2. \nPlacement Precision: the item-slack property" }, { "refs": [{ "id": "ref-for-stacking-axis\u2467" }], "title": "4.3.1. \nContaining Block" }, { "refs": [{ "id": "ref-for-stacking-axis\u2468" }, { "id": "ref-for-stacking-axis\u2460\u24ea" }], "title": "4.3.2. \nPlacement and Writing Modes" }, { "refs": [{ "id": "ref-for-stacking-axis\u2460\u2460" }, { "id": "ref-for-stacking-axis\u2460\u2461" }], "title": "5. \nSizing Grid Containers" }, { "refs": [{ "id": "ref-for-stacking-axis\u2460\u2462" }, { "id": "ref-for-stacking-axis\u2460\u2463" }, { "id": "ref-for-stacking-axis\u2460\u2464" }, { "id": "ref-for-stacking-axis\u2460\u2465" }], "title": "6. \nAlignment and Spacing" }, { "refs": [{ "id": "ref-for-stacking-axis\u2460\u2466" }], "title": "6.1. \nBaseline Alignment in the stacking axis" }, { "refs": [{ "id": "ref-for-stacking-axis\u2460\u2467" }], "title": "7.1. \nFragmentation in the stacking axis" }, { "refs": [{ "id": "ref-for-stacking-axis\u2460\u2468" }, { "id": "ref-for-stacking-axis\u2461\u24ea" }], "title": "8. \nAbsolute Positioning" }], "url": "#stacking-axis" },
                "submasonry": { "dfnID": "submasonry", "dfnText": "submasonry", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-submasonry" }, { "id": "ref-for-submasonry\u2460" }], "title": "3.4.1. \nSubgrid Item Contributions" }], "url": "#submasonry" },
                "valdef-item-direction-auto": { "dfnID": "valdef-item-direction-auto", "dfnText": "auto", "external": false, "refSections": [], "url": "#valdef-item-direction-auto" },
                "valdef-item-direction-column": { "dfnID": "valdef-item-direction-column", "dfnText": "column", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-item-direction-column" }, { "id": "ref-for-valdef-item-direction-column\u2460" }], "title": "\nItem Flow Axis: item-track/item-direction" }], "url": "#valdef-item-direction-column" },
                "valdef-item-direction-column-reverse": { "dfnID": "valdef-item-direction-column-reverse", "dfnText": "column-reverse", "external": false, "refSections": [], "url": "#valdef-item-direction-column-reverse" },
                "valdef-item-direction-row": { "dfnID": "valdef-item-direction-row", "dfnText": "row", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-item-direction-row" }, { "id": "ref-for-valdef-item-direction-row\u2460" }, { "id": "ref-for-valdef-item-direction-row\u2461" }], "title": "\nItem Flow Axis: item-track/item-direction" }], "url": "#valdef-item-direction-row" },
                "valdef-item-direction-row-reverse": { "dfnID": "valdef-item-direction-row-reverse", "dfnText": "row-reverse", "external": false, "refSections": [], "url": "#valdef-item-direction-row-reverse" },
                "valdef-item-pack-balance": { "dfnID": "valdef-item-pack-balance", "dfnText": "balance", "external": false, "refSections": [], "url": "#valdef-item-pack-balance" },
                "valdef-item-pack-collapse": { "dfnID": "valdef-item-pack-collapse", "dfnText": "collapse", "external": false, "refSections": [], "url": "#valdef-item-pack-collapse" },
                "valdef-item-pack-dense": { "dfnID": "valdef-item-pack-dense", "dfnText": "dense", "external": false, "refSections": [], "url": "#valdef-item-pack-dense" },
                "valdef-item-pack-normal": { "dfnID": "valdef-item-pack-normal", "dfnText": "normal", "external": false, "refSections": [], "url": "#valdef-item-pack-normal" },
                "valdef-item-slack-infinite": { "dfnID": "valdef-item-slack-infinite", "dfnText": "infinite", "external": false, "refSections": [], "url": "#valdef-item-slack-infinite" },
                "valdef-item-slack-length-percentage": { "dfnID": "valdef-item-slack-length-percentage", "dfnText": "<length-percentage>", "external": false, "refSections": [], "url": "#valdef-item-slack-length-percentage" },
                "valdef-item-wrap-auto": { "dfnID": "valdef-item-wrap-auto", "dfnText": "auto", "external": false, "refSections": [], "url": "#valdef-item-wrap-auto" },
                "valdef-item-wrap-normal": { "dfnID": "valdef-item-wrap-normal", "dfnText": "normal", "external": false, "refSections": [], "url": "#valdef-item-wrap-normal" },
                "valdef-item-wrap-nowrap": { "dfnID": "valdef-item-wrap-nowrap", "dfnText": "nowrap", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-item-wrap-nowrap" }], "title": "\nItem Cross Axis Placement Mode: item-cross/item-wrap" }], "url": "#valdef-item-wrap-nowrap" },
                "valdef-item-wrap-reverse": { "dfnID": "valdef-item-wrap-reverse", "dfnText": "reverse", "external": false, "refSections": [], "url": "#valdef-item-wrap-reverse" },
                "valdef-item-wrap-wrap": { "dfnID": "valdef-item-wrap-wrap", "dfnText": "wrap", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-item-wrap-wrap" }], "title": "\nItem Cross Axis Placement Mode: item-cross/item-wrap" }], "url": "#valdef-item-wrap-wrap" },
                "valdef-item-wrap-wrap-reverse": { "dfnID": "valdef-item-wrap-wrap-reverse", "dfnText": "wrap-reverse", "external": false, "refSections": [], "url": "#valdef-item-wrap-wrap-reverse" },
                "valdef-repeat-auto-areas": { "dfnID": "valdef-repeat-auto-areas", "dfnText": "auto-areas", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-repeat-auto-areas" }], "title": "3.3.1. \nrepeat(auto-areas)" }], "url": "#valdef-repeat-auto-areas" },
                "virtual-masonry-item": { "dfnID": "virtual-masonry-item", "dfnText": "virtual masonry item", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-virtual-masonry-item" }], "title": "3.1.1. \nIntrinsic Tracks and repeat()" }, { "refs": [{ "id": "ref-for-virtual-masonry-item\u2460" }, { "id": "ref-for-virtual-masonry-item\u2461" }], "title": "3.4.2. \nOptimized Track Sizing" }], "url": "#virtual-masonry-item" },
            };

            document.addEventListener("DOMContentLoaded", () => {
                genAllDfnPanels();

                document.body.addEventListener("click", (e) => {
                    // If not handled already, just hide all dfn panels.
                    hideAllDfnPanels();
                });
            });

            window.addEventListener("resize", () => {
                // Pin any visible dfn panel
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el => positionDfnPanel(el));
            });

            function genAllDfnPanels() {
                for (const panelData of Object.values(dfnPanelData)) {
                    const dfnID = panelData.dfnID;
                    const dfn = document.getElementById(dfnID);
                    if (!dfn) {
                        console.log(`Can't find dfn#${dfnID}.`, panelData);
                        continue;
                    }
                    dfn.panelData = panelData;
                    insertDfnPopupAction(dfn);
                }
            }

            function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
                const dfnPanel = mk.aside({
                    class: "dfn-panel on",
                    id: `infopanel-for-${dfnID}`,
                    "data-for": dfnID,
                    "aria-labelled-by": `infopaneltitle-for-${dfnID}`,
                },
                    mk.span({ id: `infopaneltitle-for-${dfnID}`, style: "display:none" },
                        `Info about the '${dfnText}' ${external ? "external" : ""} reference.`),
                    mk.a({ href: url, class: "dfn-link" }, url),
                    refSections.length == 0 ? [] :
                        mk.b({}, "Referenced in:"),
                    mk.ul({},
                        ...refSections.map(section =>
                            mk.li({},
                                ...section.refs.map((ref, refI) =>
                                    [
                                        mk.a({ href: `#${ref.id}` },
                                            (refI == 0) ? section.title : `(${refI + 1})`
                                        ),
                                        " ",
                                    ]
                                ),
                            ),
                        ),
                    ),
                    genLinkingSyntaxes(dfn),
                );

                dfnPanel.addEventListener('click', (event) => {
                    if (event.target.nodeName == 'A') {
                        scrollToTargetAndHighlight(event);
                        pinDfnPanel(dfnPanel);
                    }
                    event.stopPropagation();
                    refocusOnTarget(event);
                });
                dfnPanel.addEventListener('keydown', (event) => {
                    if (event.keyCode == 27) { // Escape key
                        hideDfnPanel({ dfnPanel });
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });

                dfnPanel.dfn = dfn;
                dfn.dfnPanel = dfnPanel;
                return dfnPanel;
            }



            function hideAllDfnPanels() {
                // Delete the currently-active dfn panel.
                queryAll(".dfn-panel").forEach(dfnPanel => hideDfnPanel({ dfnPanel }));
            }

            function showDfnPanel(dfn) {
                hideAllDfnPanels(); // Only display one at a time.

                dfn.setAttribute("aria-expanded", "true");

                const dfnPanel = genDfnPanel(dfn, dfn.panelData);

                // Give the dfn a unique tabindex, and then
                // give all the tabbable panel bits successive indexes.
                let tabIndex = 100;
                dfn.tabIndex = tabIndex++;
                const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
                for (const el of tabbable) {
                    el.tabIndex = tabIndex++;
                }

                append(document.body, dfnPanel);
                positionDfnPanel(dfnPanel);
            }

            function positionDfnPanel(dfnPanel) {
                const dfn = dfnPanel.dfn;
                const dfnPos = getBounds(dfn);
                dfnPanel.style.top = dfnPos.bottom + "px";
                dfnPanel.style.left = dfnPos.left + "px";

                const panelPos = dfnPanel.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
                    dfnPanel.style.left = newLeft + "px";
                }
            }

            function pinDfnPanel(dfnPanel) {
                // Switch it to "activated" state, which pins it.
                dfnPanel.classList.add("activated");
                dfnPanel.style.position = "fixed";
                dfnPanel.style.left = null;
                dfnPanel.style.top = null;
            }

            function hideDfnPanel({ dfn, dfnPanel }) {
                if (!dfnPanel) dfnPanel = dfn.dfnPanel;
                if (!dfn) dfn = dfnPanel.dfn;
                dfn.dfnPanel = undefined;
                dfnPanel.dfn = undefined;
                dfn.setAttribute("aria-expanded", "false");
                dfn.tabIndex = undefined;
                dfnPanel.remove()
            }

            function toggleDfnPanel(dfn) {
                if (dfn.dfnPanel) {
                    hideDfnPanel(dfn);
                } else {
                    showDfnPanel(dfn);
                }
            }

            function insertDfnPopupAction(dfn) {
                dfn.setAttribute('role', 'button');
                dfn.setAttribute('aria-expanded', 'false')
                dfn.tabIndex = 0;
                dfn.classList.add('has-dfn-panel');
                dfn.addEventListener('click', (event) => {
                    toggleDfnPanel(dfn);
                    event.stopPropagation();
                });
                dfn.addEventListener('keypress', (event) => {
                    const kc = event.keyCode;
                    // 32->Space, 13->Enter
                    if (kc == 32 || kc == 13) {
                        toggleDfnPanel(dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });
            }

            function refocusOnTarget(event) {
                const target = event.target;
                setTimeout(() => {
                    // Refocus on the event.target element.
                    // This is needed after browser scrolls to the destination.
                    target.focus();
                });
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function scrollToTargetAndHighlight(event) {
                let hash = event.target.hash;
                if (hash) {
                    hash = decodeURIComponent(hash.substring(1));
                    const dest = document.getElementById(hash);
                    if (dest) {
                        dest.classList.add('highlighted');
                        setTimeout(() => dest.classList.remove('highlighted'), 1000);
                    }
                }
            }

            // Functions, divided by link type, that wrap an autolink's
            // contents with the appropriate outer syntax.
            // Alternately, a string naming another type they format
            // the same as.
            function needsFor(type) {
                switch (type) {
                    case "descriptor":
                    case "value":
                    case "element-attr":
                    case "attr-value":
                    case "element-state":
                    case "method":
                    case "constructor":
                    case "argument":
                    case "attribute":
                    case "const":
                    case "dict-member":
                    case "event":
                    case "enum-value":
                    case "stringifier":
                    case "serializer":
                    case "iterator":
                    case "maplike":
                    case "setlike":
                    case "state":
                    case "mode":
                    case "context":
                    case "facet": return true;

                    default: return false;
                }
            }
            function refusesFor(type) {
                switch (type) {
                    case "property":
                    case "element":
                    case "interface":
                    case "namespace":
                    case "callback":
                    case "dictionary":
                    case "enum":
                    case "exception":
                    case "typedef":
                    case "http-header":
                    case "permission": return true;

                    default: return false;
                }
            }
            function linkFormatterFromType(type) {
                switch (type) {
                    case 'scheme':
                    case 'permission':
                    case 'dfn': return (text) => `[=${text}=]`;

                    case 'abstract-op': return (text) => `[\$${text}\$]`;

                    case 'function':
                    case 'at-rule':
                    case 'selector':
                    case 'value': return (text) => `''${text}''`;

                    case 'http-header': return (text) => `[:${text}:]`;

                    case 'interface':
                    case 'constructor':
                    case 'method':
                    case 'argument':
                    case 'attribute':
                    case 'callback':
                    case 'dictionary':
                    case 'dict-member':
                    case 'enum':
                    case 'enum-value':
                    case 'exception':
                    case 'const':
                    case 'typedef':
                    case 'stringifier':
                    case 'serializer':
                    case 'iterator':
                    case 'maplike':
                    case 'setlike':
                    case 'extended-attribute':
                    case 'event':
                    case 'idl': return (text) => `{{${text}}}`;

                    case 'element-state':
                    case 'element-attr':
                    case 'attr-value':
                    case 'element': return (element) => `<{${element}}>`;

                    case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

                    case 'type': return (text) => `<<${text}>>`;

                    case 'descriptor':
                    case 'property': return (text) => `'${text}'`;

                    default: return;
                };
            };

            function genLinkingSyntaxes(dfn) {
                if (dfn.tagName != "DFN") return;

                const type = dfn.getAttribute('data-dfn-type');
                if (!type) {
                    console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
                    return [];
                }

                // Return a function that wraps link text based on the type
                const linkFormatter = linkFormatterFromType(type);
                if (!linkFormatter) {
                    console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
                    return [];
                }

                let ltAlts;
                if (dfn.hasAttribute('data-lt')) {
                    ltAlts = dfn.getAttribute('data-lt')
                        .split("|")
                        .map(x => x.trim());
                } else {
                    ltAlts = [dfn.textContent.trim()];
                }
                if (type == "type") {
                    // lt of "<foo>", but "foo" is the interior;
                    // <<foo/bar>> is how you write it with a for,
                    // not <foo/<bar>> or whatever.
                    for (var i = 0; i < ltAlts.length; i++) {
                        const lt = ltAlts[i];
                        const match = /<(.*)>/.exec(lt);
                        if (match) { ltAlts[i] = match[1]; }
                    }
                }

                let forAlts;
                if (dfn.hasAttribute('data-dfn-for')) {
                    forAlts = dfn.getAttribute('data-dfn-for')
                        .split(",")
                        .map(x => x.trim());
                } else {
                    forAlts = [''];
                }

                let linkingSyntaxes = [];
                if (!needsFor(type)) {
                    for (const lt of ltAlts) {
                        linkingSyntaxes.push(linkFormatter(lt));
                    }
                }
                if (!refusesFor(type)) {
                    for (const f of forAlts) {
                        linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
                    }
                }
                return [
                    mk.b({}, 'Possible linking syntaxes:'),
                    mk.ul({},
                        ...linkingSyntaxes.map(link => {
                            const copyLink = async () =>
                                await navigator.clipboard.writeText(link);
                            return mk.li({},
                                mk.div({ class: 'link-item' },
                                    mk.button({
                                        class: 'copy-icon', title: 'Copy',
                                        type: 'button',
                                        _onclick: copyLink,
                                        tabindex: 0,
                                    }, mk.span({ class: 'icon' })),
                                    mk.span({}, link)
                                )
                            );
                        })
                    )
                ];
            }
        }
    </script>
    <script>/* Boilerplate: script-ref-hints */
        "use strict";
        {
            let refsData = {
                "#auto-placement-cursor": { "displayText": "auto-placement cursor", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "auto-placement cursor", "type": "dfn", "url": "#auto-placement-cursor" },
                "#grid-axis": { "displayText": "grid axis", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "grid axis", "type": "dfn", "url": "#grid-axis" },
                "#item-groups": { "displayText": "item groups", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "item groups", "type": "dfn", "url": "#item-groups" },
                "#masonry-box": { "displayText": "masonry box", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "masonry box", "type": "dfn", "url": "#masonry-box" },
                "#masonry-container": { "displayText": "masonry container", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "masonry container", "type": "dfn", "url": "#masonry-container" },
                "#masonry-item": { "displayText": "masonry item", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "masonry item", "type": "dfn", "url": "#masonry-item" },
                "#masonry-layout": { "displayText": "masonry layout", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "masonry layout", "type": "dfn", "url": "#masonry-layout" },
                "#masonry-tie-threshold": { "displayText": "tie threshold", "export": true, "for_": ["masonry"], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "tie threshold", "type": "dfn", "url": "#masonry-tie-threshold" },
                "#masonry-track": { "displayText": "masonry track", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "masonry track", "type": "dfn", "url": "#masonry-track" },
                "#primary-axis": { "displayText": "primary axis", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "primary axis", "type": "dfn", "url": "#primary-axis" },
                "#primary-placement-axis": { "displayText": "primary placement axis", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "primary placement axis", "type": "dfn", "url": "#primary-placement-axis" },
                "#primary-track-axis": { "displayText": "primary track axis", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "primary track axis", "type": "dfn", "url": "#primary-track-axis" },
                "#propdef-item-cross": { "displayText": "item-cross", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "item-cross", "type": "property", "url": "#propdef-item-cross" },
                "#propdef-item-direction": { "displayText": "item-direction", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "item-direction", "type": "property", "url": "#propdef-item-direction" },
                "#propdef-item-flow": { "displayText": "item-flow", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "item-flow", "type": "property", "url": "#propdef-item-flow" },
                "#propdef-item-pack": { "displayText": "item-pack", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "item-pack", "type": "property", "url": "#propdef-item-pack" },
                "#propdef-item-slack": { "displayText": "item-slack", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "item-slack", "type": "property", "url": "#propdef-item-slack" },
                "#propdef-item-track": { "displayText": "item-track", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "item-track", "type": "property", "url": "#propdef-item-track" },
                "#propdef-item-wrap": { "displayText": "item-wrap", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "item-wrap", "type": "property", "url": "#propdef-item-wrap" },
                "#running-position": { "displayText": "running position", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "running position", "type": "dfn", "url": "#running-position" },
                "#stacking-axis": { "displayText": "stacking axis", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "stacking axis", "type": "dfn", "url": "#stacking-axis" },
                "#submasonry": { "displayText": "submasonry", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "submasonry", "type": "dfn", "url": "#submasonry" },
                "#valdef-item-direction-column": { "displayText": "column", "export": true, "for_": ["item-direction", "item-track"], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "column", "type": "value", "url": "#valdef-item-direction-column" },
                "#valdef-item-direction-row": { "displayText": "row", "export": true, "for_": ["item-direction", "item-track"], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "row", "type": "value", "url": "#valdef-item-direction-row" },
                "#valdef-item-wrap-nowrap": { "displayText": "nowrap", "export": true, "for_": ["item-cross", "item-wrap"], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "nowrap", "type": "value", "url": "#valdef-item-wrap-nowrap" },
                "#valdef-item-wrap-wrap": { "displayText": "wrap", "export": true, "for_": ["item-cross", "item-wrap"], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "wrap", "type": "value", "url": "#valdef-item-wrap-wrap" },
                "#valdef-repeat-auto-areas": { "displayText": "auto-areas", "export": true, "for_": ["repeat()"], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "auto-areas", "type": "value", "url": "#valdef-repeat-auto-areas" },
                "#virtual-masonry-item": { "displayText": "virtual masonry item", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "local", "text": "virtual masonry item", "type": "dfn", "url": "#virtual-masonry-item" },
                "https://drafts.csswg.org/css-gaps-1/#funcdef-repeat": { "displayText": "repeat()", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-gaps", "spec": "css-gaps-1", "status": "current", "text": "repeat()", "type": "function", "url": "https://drafts.csswg.org/css-gaps-1/#funcdef-repeat" },
                "https://www.w3.org/TR/CSS21/box.html#x10": { "displayText": "content box", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css", "spec": "css21", "status": "snapshot", "text": "content box", "type": "dfn", "url": "https://www.w3.org/TR/CSS21/box.html#x10" },
                "https://www.w3.org/TR/CSS21/box.html#x17": { "displayText": "margin box", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css", "spec": "css21", "status": "snapshot", "text": "margin box", "type": "dfn", "url": "https://www.w3.org/TR/CSS21/box.html#x17" },
                "https://www.w3.org/TR/CSS21/visuren.html#containing-block": { "displayText": "containing block", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css", "spec": "css21", "status": "snapshot", "text": "containing block", "type": "dfn", "url": "https://www.w3.org/TR/CSS21/visuren.html#containing-block" },
                "https://www.w3.org/TR/CSS21/visuren.html#propdef-display": { "displayText": "display", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css", "spec": "css21", "status": "snapshot", "text": "display", "type": "property", "url": "https://www.w3.org/TR/CSS21/visuren.html#propdef-display" },
                "https://www.w3.org/TR/css-align-3/#alignment-baseline": { "displayText": "alignment baseline", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-align", "spec": "css-align-3", "status": "snapshot", "text": "alignment baseline", "type": "dfn", "url": "https://www.w3.org/TR/css-align-3/#alignment-baseline" },
                "https://www.w3.org/TR/css-align-3/#alignment-subject": { "displayText": "alignment subject", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-align", "spec": "css-align-3", "status": "snapshot", "text": "alignment subject", "type": "dfn", "url": "https://www.w3.org/TR/css-align-3/#alignment-subject" },
                "https://www.w3.org/TR/css-align-3/#baseline-alignment": { "displayText": "baseline alignment", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-align", "spec": "css-align-3", "status": "snapshot", "text": "baseline alignment", "type": "dfn", "url": "https://www.w3.org/TR/css-align-3/#baseline-alignment" },
                "https://www.w3.org/TR/css-align-3/#baseline-sharing-group": { "displayText": "baseline-sharing group", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-align", "spec": "css-align-3", "status": "snapshot", "text": "baseline-sharing group", "type": "dfn", "url": "https://www.w3.org/TR/css-align-3/#baseline-sharing-group" },
                "https://www.w3.org/TR/css-align-3/#distributed-alignment": { "displayText": "distributed alignment", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-align", "spec": "css-align-3", "status": "snapshot", "text": "distributed alignment", "type": "dfn", "url": "https://www.w3.org/TR/css-align-3/#distributed-alignment" },
                "https://www.w3.org/TR/css-align-3/#fallback-alignment": { "displayText": "fallback alignment", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-align", "spec": "css-align-3", "status": "snapshot", "text": "fallback alignment", "type": "dfn", "url": "https://www.w3.org/TR/css-align-3/#fallback-alignment" },
                "https://www.w3.org/TR/css-align-3/#propdef-align-content": { "displayText": "align-content", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-align", "spec": "css-align-3", "status": "snapshot", "text": "align-content", "type": "property", "url": "https://www.w3.org/TR/css-align-3/#propdef-align-content" },
                "https://www.w3.org/TR/css-align-3/#propdef-grid-gap": { "displayText": "grid-gap", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-align", "spec": "css-align-3", "status": "snapshot", "text": "grid-gap", "type": "property", "url": "https://www.w3.org/TR/css-align-3/#propdef-grid-gap" },
                "https://www.w3.org/TR/css-align-3/#propdef-justify-content": { "displayText": "justify-content", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-align", "spec": "css-align-3", "status": "snapshot", "text": "justify-content", "type": "property", "url": "https://www.w3.org/TR/css-align-3/#propdef-justify-content" },
                "https://www.w3.org/TR/css-align-3/#valdef-align-content-stretch": { "displayText": "stretch", "export": true, "for_": ["align-content", "justify-content", "<content-distribution>"], "level": "3", "normative": true, "shortname": "css-align", "spec": "css-align-3", "status": "snapshot", "text": "stretch", "type": "value", "url": "https://www.w3.org/TR/css-align-3/#valdef-align-content-stretch" },
                "https://www.w3.org/TR/css-align-3/#valdef-justify-content-normal": { "displayText": "normal", "export": true, "for_": ["justify-content", "align-content"], "level": "3", "normative": true, "shortname": "css-align", "spec": "css-align-3", "status": "snapshot", "text": "normal", "type": "value", "url": "https://www.w3.org/TR/css-align-3/#valdef-justify-content-normal" },
                "https://www.w3.org/TR/css-align-3/#valdef-self-position-center": { "displayText": "center", "export": true, "for_": ["<self-position>", "<content-position>", "justify-self", "align-self", "justify-content", "align-content"], "level": "3", "normative": true, "shortname": "css-align", "spec": "css-align-3", "status": "snapshot", "text": "center", "type": "value", "url": "https://www.w3.org/TR/css-align-3/#valdef-self-position-center" },
                "https://www.w3.org/TR/css-align-3/#valdef-self-position-end": { "displayText": "end", "export": true, "for_": ["<self-position>", "<content-position>", "justify-self", "align-self", "justify-content", "align-content"], "level": "3", "normative": true, "shortname": "css-align", "spec": "css-align-3", "status": "snapshot", "text": "end", "type": "value", "url": "https://www.w3.org/TR/css-align-3/#valdef-self-position-end" },
                "https://www.w3.org/TR/css-align-3/#valdef-self-position-start": { "displayText": "start", "export": true, "for_": ["<self-position>", "<content-position>", "justify-self", "align-self", "justify-content", "align-content"], "level": "3", "normative": true, "shortname": "css-align", "spec": "css-align-3", "status": "snapshot", "text": "start", "type": "value", "url": "https://www.w3.org/TR/css-align-3/#valdef-self-position-start" },
                "https://www.w3.org/TR/css-break-4/#forced-break": { "displayText": "forced break", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-break", "spec": "css-break-4", "status": "snapshot", "text": "forced break", "type": "dfn", "url": "https://www.w3.org/TR/css-break-4/#forced-break" },
                "https://www.w3.org/TR/css-break-4/#fragmentainer": { "displayText": "fragmentainer", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-break", "spec": "css-break-4", "status": "snapshot", "text": "fragmentainer", "type": "dfn", "url": "https://www.w3.org/TR/css-break-4/#fragmentainer" },
                "https://www.w3.org/TR/css-cascade-5/#longhand": { "displayText": "longhand property", "export": true, "for_": [], "level": "5", "normative": true, "shortname": "css-cascade", "spec": "css-cascade-5", "status": "snapshot", "text": "longhand property", "type": "dfn", "url": "https://www.w3.org/TR/css-cascade-5/#longhand" },
                "https://www.w3.org/TR/css-cascade-5/#shorthand-property": { "displayText": "shorthand property", "export": true, "for_": [], "level": "5", "normative": true, "shortname": "css-cascade", "spec": "css-cascade-5", "status": "snapshot", "text": "shorthand property", "type": "dfn", "url": "https://www.w3.org/TR/css-cascade-5/#shorthand-property" },
                "https://www.w3.org/TR/css-display-4/#blockify": { "displayText": "blockify", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-display", "spec": "css-display-4", "status": "snapshot", "text": "blockify", "type": "dfn", "url": "https://www.w3.org/TR/css-display-4/#blockify" },
                "https://www.w3.org/TR/css-display-4/#propdef-reading-flow": { "displayText": "reading-flow", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-display", "spec": "css-display-4", "status": "snapshot", "text": "reading-flow", "type": "property", "url": "https://www.w3.org/TR/css-display-4/#propdef-reading-flow" },
                "https://www.w3.org/TR/css-flexbox-1/#flex-container": { "displayText": "flex container", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-flexbox", "spec": "css-flexbox-1", "status": "snapshot", "text": "flex container", "type": "dfn", "url": "https://www.w3.org/TR/css-flexbox-1/#flex-container" },
                "https://www.w3.org/TR/css-flexbox-1/#flex-layout": { "displayText": "flex layout", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-flexbox", "spec": "css-flexbox-1", "status": "snapshot", "text": "flex layout", "type": "dfn", "url": "https://www.w3.org/TR/css-flexbox-1/#flex-layout" },
                "https://www.w3.org/TR/css-flexbox-1/#multi-line-flex-container": { "displayText": "multi-line flex container", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-flexbox", "spec": "css-flexbox-1", "status": "snapshot", "text": "multi-line flex container", "type": "dfn", "url": "https://www.w3.org/TR/css-flexbox-1/#multi-line-flex-container" },
                "https://www.w3.org/TR/css-flexbox-1/#order-modified-document-order": { "displayText": "order-modified document order", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-flexbox", "spec": "css-flexbox-1", "status": "snapshot", "text": "order-modified document order", "type": "dfn", "url": "https://www.w3.org/TR/css-flexbox-1/#order-modified-document-order" },
                "https://www.w3.org/TR/css-flexbox-1/#propdef-flex-flow": { "displayText": "flex-flow", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-flexbox", "spec": "css-flexbox-1", "status": "snapshot", "text": "flex-flow", "type": "property", "url": "https://www.w3.org/TR/css-flexbox-1/#propdef-flex-flow" },
                "https://www.w3.org/TR/css-flexbox-1/#propdef-flex-wrap": { "displayText": "flex-wrap", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-flexbox", "spec": "css-flexbox-1", "status": "snapshot", "text": "flex-wrap", "type": "property", "url": "https://www.w3.org/TR/css-flexbox-1/#propdef-flex-wrap" },
                "https://www.w3.org/TR/css-flexbox-1/#propdef-order": { "displayText": "order", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-flexbox", "spec": "css-flexbox-1", "status": "snapshot", "text": "order", "type": "property", "url": "https://www.w3.org/TR/css-flexbox-1/#propdef-order" },
                "https://www.w3.org/TR/css-flexbox-1/#single-line-flex-container": { "displayText": "single-line flex container", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-flexbox", "spec": "css-flexbox-1", "status": "snapshot", "text": "single-line flex container", "type": "dfn", "url": "https://www.w3.org/TR/css-flexbox-1/#single-line-flex-container" },
                "https://www.w3.org/TR/css-grid-2/#automatic-grid-position": { "displayText": "automatic grid position", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "automatic grid position", "type": "dfn", "url": "https://www.w3.org/TR/css-grid-2/#automatic-grid-position" },
                "https://www.w3.org/TR/css-grid-2/#collapsed-track": { "displayText": "collapsed track", "export": false, "for_": [], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "collapsed track", "type": "dfn", "url": "https://www.w3.org/TR/css-grid-2/#collapsed-track" },
                "https://www.w3.org/TR/css-grid-2/#definite-grid-position": { "displayText": "definite position", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "definite position", "type": "dfn", "url": "https://www.w3.org/TR/css-grid-2/#definite-grid-position" },
                "https://www.w3.org/TR/css-grid-2/#explicit-grid": { "displayText": "explicit grid", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "explicit grid", "type": "dfn", "url": "https://www.w3.org/TR/css-grid-2/#explicit-grid" },
                "https://www.w3.org/TR/css-grid-2/#grid-area": { "displayText": "grid area", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "grid area", "type": "dfn", "url": "https://www.w3.org/TR/css-grid-2/#grid-area" },
                "https://www.w3.org/TR/css-grid-2/#grid-container": { "displayText": "grid container", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "grid container", "type": "dfn", "url": "https://www.w3.org/TR/css-grid-2/#grid-container" },
                "https://www.w3.org/TR/css-grid-2/#grid-item": { "displayText": "grid item", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "grid item", "type": "dfn", "url": "https://www.w3.org/TR/css-grid-2/#grid-item" },
                "https://www.w3.org/TR/css-grid-2/#grid-layout": { "displayText": "grid layout", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "grid layout", "type": "dfn", "url": "https://www.w3.org/TR/css-grid-2/#grid-layout" },
                "https://www.w3.org/TR/css-grid-2/#grid-placement-property": { "displayText": "grid-placement property", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "grid-placement property", "type": "dfn", "url": "https://www.w3.org/TR/css-grid-2/#grid-placement-property" },
                "https://www.w3.org/TR/css-grid-2/#grid-track": { "displayText": "grid track", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "grid track", "type": "dfn", "url": "https://www.w3.org/TR/css-grid-2/#grid-track" },
                "https://www.w3.org/TR/css-grid-2/#implicit-grid": { "displayText": "implicit grid", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "implicit grid", "type": "dfn", "url": "https://www.w3.org/TR/css-grid-2/#implicit-grid" },
                "https://www.w3.org/TR/css-grid-2/#implicit-grid-track": { "displayText": "implicit grid track", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "implicit grid track", "type": "dfn", "url": "https://www.w3.org/TR/css-grid-2/#implicit-grid-track" },
                "https://www.w3.org/TR/css-grid-2/#propdef-grid-auto-columns": { "displayText": "grid-auto-columns", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "grid-auto-columns", "type": "property", "url": "https://www.w3.org/TR/css-grid-2/#propdef-grid-auto-columns" },
                "https://www.w3.org/TR/css-grid-2/#propdef-grid-auto-rows": { "displayText": "grid-auto-rows", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "grid-auto-rows", "type": "property", "url": "https://www.w3.org/TR/css-grid-2/#propdef-grid-auto-rows" },
                "https://www.w3.org/TR/css-grid-2/#propdef-grid-template-areas": { "displayText": "grid-template-areas", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "grid-template-areas", "type": "property", "url": "https://www.w3.org/TR/css-grid-2/#propdef-grid-template-areas" },
                "https://www.w3.org/TR/css-grid-2/#propdef-grid-template-columns": { "displayText": "grid-template-columns", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "grid-template-columns", "type": "property", "url": "https://www.w3.org/TR/css-grid-2/#propdef-grid-template-columns" },
                "https://www.w3.org/TR/css-grid-2/#propdef-grid-template-rows": { "displayText": "grid-template-rows", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "grid-template-rows", "type": "property", "url": "https://www.w3.org/TR/css-grid-2/#propdef-grid-template-rows" },
                "https://www.w3.org/TR/css-grid-2/#subgrid": { "displayText": "subgrid", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "subgrid", "type": "dfn", "url": "https://www.w3.org/TR/css-grid-2/#subgrid" },
                "https://www.w3.org/TR/css-grid-2/#valdef-grid-template-areas-none": { "displayText": "none", "export": true, "for_": ["grid-template-areas"], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "none", "type": "value", "url": "https://www.w3.org/TR/css-grid-2/#valdef-grid-template-areas-none" },
                "https://www.w3.org/TR/css-grid-2/#valdef-grid-template-columns-auto": { "displayText": "auto", "export": true, "for_": ["grid-template-columns", "grid-template-rows"], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "auto", "type": "value", "url": "https://www.w3.org/TR/css-grid-2/#valdef-grid-template-columns-auto" },
                "https://www.w3.org/TR/css-grid-2/#valdef-grid-template-rows-none": { "displayText": "none", "export": true, "for_": ["grid-template-rows", "grid-template-columns"], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "none", "type": "value", "url": "https://www.w3.org/TR/css-grid-2/#valdef-grid-template-rows-none" },
                "https://www.w3.org/TR/css-grid-2/#valdef-repeat-auto-fill": { "displayText": "auto-fill", "export": true, "for_": ["repeat()"], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "auto-fill", "type": "value", "url": "https://www.w3.org/TR/css-grid-2/#valdef-repeat-auto-fill" },
                "https://www.w3.org/TR/css-grid-2/#valdef-repeat-auto-fit": { "displayText": "auto-fit", "export": true, "for_": ["repeat()"], "level": "2", "normative": true, "shortname": "css-grid", "spec": "css-grid-2", "status": "snapshot", "text": "auto-fit", "type": "value", "url": "https://www.w3.org/TR/css-grid-2/#valdef-repeat-auto-fit" },
                "https://www.w3.org/TR/css-grid-3/#propdef-grid-auto-flow": { "displayText": "grid-auto-flow", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "snapshot", "text": "grid-auto-flow", "type": "property", "url": "https://www.w3.org/TR/css-grid-3/#propdef-grid-auto-flow" },
                "https://www.w3.org/TR/css-grid-3/#propdef-masonry-auto-tracks": { "displayText": "masonry-auto-tracks", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "snapshot", "text": "masonry-auto-tracks", "type": "property", "url": "https://www.w3.org/TR/css-grid-3/#propdef-masonry-auto-tracks" },
                "https://www.w3.org/TR/css-grid-3/#propdef-masonry-template-areas": { "displayText": "masonry-template-areas", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "snapshot", "text": "masonry-template-areas", "type": "property", "url": "https://www.w3.org/TR/css-grid-3/#propdef-masonry-template-areas" },
                "https://www.w3.org/TR/css-grid-3/#propdef-masonry-template-tracks": { "displayText": "masonry-template-tracks", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "snapshot", "text": "masonry-template-tracks", "type": "property", "url": "https://www.w3.org/TR/css-grid-3/#propdef-masonry-template-tracks" },
                "https://www.w3.org/TR/css-grid-3/#propdef-masonry-track": { "displayText": "masonry-track", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "snapshot", "text": "masonry-track", "type": "property", "url": "https://www.w3.org/TR/css-grid-3/#propdef-masonry-track" },
                "https://www.w3.org/TR/css-grid-3/#valdef-display-masonry": { "displayText": "masonry", "export": true, "for_": ["display"], "level": "3", "normative": true, "shortname": "css-grid", "spec": "css-grid-3", "status": "snapshot", "text": "masonry", "type": "value", "url": "https://www.w3.org/TR/css-grid-3/#valdef-display-masonry" },
                "https://www.w3.org/TR/css-sizing-3/#available": { "displayText": "available space", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-sizing", "spec": "css-sizing-3", "status": "snapshot", "text": "available space", "type": "dfn", "url": "https://www.w3.org/TR/css-sizing-3/#available" },
                "https://www.w3.org/TR/css-sizing-3/#max-content": { "displayText": "max-content size", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-sizing", "spec": "css-sizing-3", "status": "snapshot", "text": "max-content size", "type": "dfn", "url": "https://www.w3.org/TR/css-sizing-3/#max-content" },
                "https://www.w3.org/TR/css-sizing-3/#max-content-constraint": { "displayText": "max-content constraint", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-sizing", "spec": "css-sizing-3", "status": "snapshot", "text": "max-content constraint", "type": "dfn", "url": "https://www.w3.org/TR/css-sizing-3/#max-content-constraint" },
                "https://www.w3.org/TR/css-sizing-3/#min-content": { "displayText": "min-content size", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-sizing", "spec": "css-sizing-3", "status": "snapshot", "text": "min-content size", "type": "dfn", "url": "https://www.w3.org/TR/css-sizing-3/#min-content" },
                "https://www.w3.org/TR/css-sizing-3/#min-content-constraint": { "displayText": "min-content constraint", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-sizing", "spec": "css-sizing-3", "status": "snapshot", "text": "min-content constraint", "type": "dfn", "url": "https://www.w3.org/TR/css-sizing-3/#min-content-constraint" },
                "https://www.w3.org/TR/css-sizing-3/#outer-size": { "displayText": "outer size", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-sizing", "spec": "css-sizing-3", "status": "snapshot", "text": "outer size", "type": "dfn", "url": "https://www.w3.org/TR/css-sizing-3/#outer-size" },
                "https://www.w3.org/TR/css-text-4/#propdef-text-wrap-style": { "displayText": "text-wrap-style", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-text", "spec": "css-text-4", "status": "snapshot", "text": "text-wrap-style", "type": "property", "url": "https://www.w3.org/TR/css-text-4/#propdef-text-wrap-style" },
                "https://www.w3.org/TR/css-values-4/#comb-any": { "displayText": "||", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-values", "spec": "css-values-4", "status": "snapshot", "text": "||", "type": "grammar", "url": "https://www.w3.org/TR/css-values-4/#comb-any" },
                "https://www.w3.org/TR/css-values-4/#comb-one": { "displayText": "|", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-values", "spec": "css-values-4", "status": "snapshot", "text": "|", "type": "grammar", "url": "https://www.w3.org/TR/css-values-4/#comb-one" },
                "https://www.w3.org/TR/css-values-4/#css-wide-keywords": { "displayText": "CSS-wide keywords", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-values", "spec": "css-values-4", "status": "snapshot", "text": "css-wide keywords", "type": "dfn", "url": "https://www.w3.org/TR/css-values-4/#css-wide-keywords" },
                "https://www.w3.org/TR/css-values-4/#typedef-length-percentage": { "displayText": "<length-percentage>", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-values", "spec": "css-values-4", "status": "snapshot", "text": "<length-percentage>", "type": "type", "url": "https://www.w3.org/TR/css-values-4/#typedef-length-percentage" },
                "https://www.w3.org/TR/css-writing-modes-3/#propdef-direction": { "displayText": "direction", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-writing-modes", "spec": "css-writing-modes-3", "status": "snapshot", "text": "direction", "type": "property", "url": "https://www.w3.org/TR/css-writing-modes-3/#propdef-direction" },
                "https://www.w3.org/TR/css-writing-modes-4/#block-axis": { "displayText": "block axis", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-writing-modes", "spec": "css-writing-modes-4", "status": "snapshot", "text": "block axis", "type": "dfn", "url": "https://www.w3.org/TR/css-writing-modes-4/#block-axis" },
                "https://www.w3.org/TR/css-writing-modes-4/#inline-axis": { "displayText": "inline axis", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-writing-modes", "spec": "css-writing-modes-4", "status": "snapshot", "text": "inline axis", "type": "dfn", "url": "https://www.w3.org/TR/css-writing-modes-4/#inline-axis" },
                "https://www.w3.org/TR/css-writing-modes-4/#writing-mode": { "displayText": "writing mode", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-writing-modes", "spec": "css-writing-modes-4", "status": "snapshot", "text": "writing mode", "type": "dfn", "url": "https://www.w3.org/TR/css-writing-modes-4/#writing-mode" },
            };

            function mkRefHint(link, ref) {
                const linkText = link.textContent;
                let dfnTextElements = '';
                if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
                    // Give the original term if it's being displayed in a different way.
                    // But allow casing differences, they're insignificant.
                    dfnTextElements =
                        mk.li({},
                            mk.b({}, "Term: "),
                            mk.span({}, ref.displayText)
                        );
                }
                const forList = ref.for_;
                let forListElements;
                if (forList.length == 0) {
                    forListElements = [];
                } else if (forList.length == 1) {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.span({}, forList[0]),
                    );
                } else {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.ul({},
                            ...forList.map(forItem =>
                                mk.li({},
                                    mk.span({}, forItem)
                                ),
                            ),
                        ),
                    );
                }
                const url = ref.url;
                const safeUrl = encodeURIComponent(url);
                const hintPanel = mk.aside({
                    class: "ref-hint",
                    id: `ref-hint-for-${safeUrl}`,
                    "data-for": url,
                    "aria-labelled-by": `ref-hint-for-${safeUrl}`,
                },
                    mk.ul({},
                        dfnTextElements,
                        mk.li({},
                            mk.b({}, "URL: "),
                            mk.a({ href: url, class: "ref" }, url),
                        ),
                        mk.li({},
                            mk.b({}, "Type: "),
                            mk.span({}, `${ref.type}`),
                        ),
                        mk.li({},
                            mk.b({}, "Spec: "),
                            mk.span({}, `${ref.spec ? ref.spec : ''}`),
                        ),
                        forListElements
                    ),
                );
                hintPanel.forLink = link;
                setupRefHintEventListeners(link, hintPanel);
                return hintPanel;
            }

            function hideAllRefHints() {
                queryAll(".ref-hint").forEach(el => hideRefHint(el));
            }

            function hideRefHint(refHint) {
                const link = refHint.forLink;
                link.setAttribute("aria-expanded", "false");
                if (refHint.teardownEventListeners) {
                    refHint.teardownEventListeners();
                }
                refHint.remove();
            }

            function showRefHint(link) {
                if (link.classList.contains("dfn-link")) return;
                const url = link.getAttribute("href");
                const ref = refsData[url];
                if (!ref) return;

                hideAllRefHints(); // Only display one at this time.

                const refHint = mkRefHint(link, ref);
                append(document.body, refHint);
                link.setAttribute("aria-expanded", "true");
                positionRefHint(refHint);
            }

            function setupRefHintEventListeners(link, refHint) {
                if (refHint.teardownEventListeners) return;
                // Add event handlers to hide the refHint after the user moves away
                // from both the link and refHint, if not hovering either within one second.
                let timeout = null;
                const startHidingRefHint = (event) => {
                    if (timeout) {
                        clearTimeout(timeout);
                    }
                    timeout = setTimeout(() => {
                        hideRefHint(refHint);
                    }, 1000);
                }
                const resetHidingRefHint = (event) => {
                    if (timeout) clearTimeout(timeout);
                    timeout = null;
                };
                link.addEventListener("mouseleave", startHidingRefHint);
                link.addEventListener("mouseenter", resetHidingRefHint);
                link.addEventListener("blur", startHidingRefHint);
                link.addEventListener("focus", resetHidingRefHint);
                refHint.addEventListener("mouseleave", startHidingRefHint);
                refHint.addEventListener("mouseenter", resetHidingRefHint);
                refHint.addEventListener("blur", startHidingRefHint);
                refHint.addEventListener("focus", resetHidingRefHint);

                refHint.teardownEventListeners = () => {
                    // remove event listeners
                    resetHidingRefHint();
                    link.removeEventListener("mouseleave", startHidingRefHint);
                    link.removeEventListener("mouseenter", resetHidingRefHint);
                    link.removeEventListener("blur", startHidingRefHint);
                    link.removeEventListener("focus", resetHidingRefHint);
                    refHint.removeEventListener("mouseleave", startHidingRefHint);
                    refHint.removeEventListener("mouseenter", resetHidingRefHint);
                    refHint.removeEventListener("blur", startHidingRefHint);
                    refHint.removeEventListener("focus", resetHidingRefHint);
                };
            }

            function positionRefHint(refHint) {
                const link = refHint.forLink;
                const linkPos = getBounds(link);
                refHint.style.top = linkPos.bottom + "px";
                refHint.style.left = linkPos.left + "px";

                const panelPos = refHint.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
                    refHint.style.left = newLeft + "px";
                }
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function showRefHintListener(e) {
                // If the target isn't in a link (or is a link),
                // just ignore it.
                let link = e.target.closest("a");
                if (!link) return;

                // If the target is in a ref-hint panel
                // (aka a link in the already-open one),
                // also just ignore it.
                if (link.closest(".ref-hint")) return;

                // Otherwise, show the panel for the link.
                showRefHint(link);
            }

            function hideAllHintsListener(e) {
                // If the click is inside a ref-hint panel, ignore it.
                if (e.target.closest(".ref-hint")) return;
                // Otherwise, close all the current panels.
                hideAllRefHints();
            }

            document.addEventListener("DOMContentLoaded", () => {
                document.body.addEventListener("mousedown", showRefHintListener);
                document.body.addEventListener("focus", showRefHintListener);

                document.body.addEventListener("click", hideAllHintsListener);
            });

            window.addEventListener("resize", () => {
                // Hide any open ref hint.
                hideAllRefHints();
            });
        }
    </script>
    <script src="https://htmlspecs.com/dropdown.js"></script>