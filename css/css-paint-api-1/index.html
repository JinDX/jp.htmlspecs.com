<!doctype html>
<html lang="ja-JP">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>CSS ペインティング API レベル 1</title>
    <meta content="CRD" name="w3c-status">
    <meta content="Bikeshed version a79b33ea8, updated Tue Dec 14 10:19:29 2021 -0800" name="generator">
    <link href="https://www.w3.org/TR/css-paint-api-1/" rel="canonical">
    <meta content="32fccc11cf21835e6cc18487bd099cef8234215d" name="document-revision">
    <style>
        /* Put nice boxes around each algorithm. */
        [data-algorithm]:not(.heading) {
            padding: .5em;
            border: thin solid #ddd;
            border-radius: .5em;
            margin: .5em calc(-0.5em - 1px);
        }

        [data-algorithm]:not(.heading)> :first-child {
            margin-top: 0;
        }

        [data-algorithm]:not(.heading)> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* style-autolinks */

        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }
    </style>
    <style>
        /* style-counters */

        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* style-dfn-panel */

        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0;
        }

        .dfn-panel li {
            list-style: inside;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled {
            cursor: pointer;
        }
    </style>
    <style>
        /* style-issues */

        a[href].issue-return {
            float: right;
            float: inline-end;
            color: var(--issueheading-text);
            font-weight: bold;
            text-decoration: none;
        }
    </style>
    <style>
        /* style-md-lists */

        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* style-mdn-anno */

        @media (max-width: 767px) {
            .mdn-anno {
                opacity: .1
            }
        }

        .mdn-anno {
            font: 1em sans-serif;
            padding: 0.3em;
            position: absolute;
            z-index: 8;
            right: 0.3em;
            background: #EEE;
            color: black;
            box-shadow: 0 0 3px #999;
            overflow: hidden;
            border-collapse: initial;
            border-spacing: initial;
            min-width: 9em;
            max-width: min-content;
            white-space: nowrap;
            word-wrap: normal;
            hyphens: none
        }

        .mdn-anno:not(.wrapped) {
            opacity: 1
        }

        .mdn-anno:hover {
            z-index: 9
        }

        .mdn-anno.wrapped {
            min-width: 0
        }

        .mdn-anno.wrapped> :not(button) {
            display: none;
        }

        .mdn-anno>.mdn-anno-btn {
            cursor: pointer;
            border: none;
            color: #000;
            background: transparent;
            margin: -8px;
            float: right;
            padding: 10px 8px 8px 8px;
            outline: none;
        }

        .mdn-anno>.mdn-anno-btn>.less-than-two-engines-flag {
            color: red;
            padding-right: 2px;
        }

        .mdn-anno>.mdn-anno-btn>.all-engines-flag {
            color: green;
            padding-right: 2px;
        }

        .mdn-anno>.mdn-anno-btn>span {
            color: #fff;
            background-color: #000;
            font-weight: normal;
            font-family: zillaslab, Palatino, "Palatino Linotype", serif;
            padding: 2px 3px 0px 3px;
            line-height: 1.3em;
            vertical-align: top;
        }

        .mdn-anno>.feature {
            margin-top: 20px;
        }

        .mdn-anno>.feature:not(:first-of-type) {
            border-top: 1px solid #999;
            margin-top: 6px;
            padding-top: 2px;
        }

        .mdn-anno>.feature>.less-than-two-engines-text {
            color: red
        }

        .mdn-anno>.feature>.all-engines-text {
            color: green
        }

        .mdn-anno>.feature>p {
            font-size: .75em;
            margin-top: 6px;
            margin-bottom: 0;
        }

        .mdn-anno>.feature>p+p {
            margin-top: 3px;
        }

        .mdn-anno>.feature>.support {
            display: block;
            font-size: 0.6em;
            margin: 0;
            padding: 0;
            margin-top: 2px
        }

        .mdn-anno>.feature>.support+div {
            padding-top: 0.5em;
        }

        .mdn-anno>.feature>.support>hr {
            display: block;
            border: none;
            border-top: 1px dotted #999;
            padding: 3px 0px 0px 0px;
            margin: 2px 3px 0px 3px;
        }

        .mdn-anno>.feature>.support>hr::before {
            content: "";
        }

        .mdn-anno>.feature>.support>span {
            padding: 0.2em 0;
            display: block;
            display: table;
        }

        .mdn-anno>.feature>.support>span.no {
            color: #CCCCCC;
            filter: grayscale(100%);
        }

        .mdn-anno>.feature>.support>span.no::before {
            opacity: 0.5;
        }

        .mdn-anno>.feature>.support>span:first-of-type {
            padding-top: 0.5em;
        }

        .mdn-anno>.feature>.support>span>span {
            padding: 0 0.5em;
            display: table-cell;
        }

        .mdn-anno>.feature>.support>span>span:first-child {
            width: 100%;
        }

        .mdn-anno>.feature>.support>span>span:last-child {
            width: 100%;
            white-space: pre;
            padding: 0;
        }

        .mdn-anno>.feature>.support>span::before {
            content: ' ';
            display: table-cell;
            min-width: 1.5em;
            height: 1.5em;
            background: no-repeat center center;
            background-size: contain;
            text-align: right;
            font-size: 0.75em;
            font-weight: bold;
        }

        .mdn-anno>.feature>.support>.chrome_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
        }

        .mdn-anno>.feature>.support>.firefox_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
        }

        .mdn-anno>.feature>.support>.chrome::before {
            background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
        }

        .mdn-anno>.feature>.support>.edge_blink::before {
            background-image: url(https://resources.whatwg.org/browser-logos/edge.svg);
        }

        .mdn-anno>.feature>.support>.edge::before {
            background-image: url(https://resources.whatwg.org/browser-logos/edge_legacy.svg);
        }

        .mdn-anno>.feature>.support>.firefox::before {
            background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
        }

        .mdn-anno>.feature>.support>.ie::before {
            background-image: url(https://resources.whatwg.org/browser-logos/ie.png);
        }

        .mdn-anno>.feature>.support>.safari_ios::before {
            background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg);
        }

        .mdn-anno>.feature>.support>.nodejs::before {
            background-image: url(https://nodejs.org/static/images/favicons/favicon.ico);
        }

        .mdn-anno>.feature>.support>.opera_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
        }

        .mdn-anno>.feature>.support>.opera::before {
            background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
        }

        .mdn-anno>.feature>.support>.safari::before {
            background-image: url(https://resources.whatwg.org/browser-logos/safari.png);
        }

        .mdn-anno>.feature>.support>.samsunginternet_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/samsung.svg);
        }

        .mdn-anno>.feature>.support>.webview_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/android-webview.png);
        }

        .name-slug-mismatch {
            color: red
        }

        .caniuse-status:hover {
            z-index: 9;
        }

        /* dt, li, .issue, .note, and .example are "position: relative", so to put annotation at right margin, must move to right of containing block */
        .h-entry:not(.status-LS) dt>.mdn-anno,
        .h-entry:not(.status-LS) li>.mdn-anno,
        .h-entry:not(.status-LS) .issue>.mdn-anno,
        .h-entry:not(.status-LS) .note>.mdn-anno,
        .h-entry:not(.status-LS) .example>.mdn-anno {
            right: -6.7em;
        }

        .h-entry p+.mdn-anno {
            margin-top: 0;
        }

        h2+.mdn-anno.after {
            margin: -48px 0 0 0;
        }

        h3+.mdn-anno.after {
            margin: -46px 0 0 0;
        }

        h4+.mdn-anno.after {
            margin: -42px 0 0 0;
        }

        h5+.mdn-anno.after {
            margin: -40px 0 0 0;
        }

        h6+.mdn-anno.after {
            margin: -40px 0 0 0;
        }
    </style>
    <style>
        /* style-selflinks */

        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* style-syntax-highlighting */

        pre.idl.highlight {
            background: var(--borderedblock-bg, var(--def-bg));
        }

        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        .highlight:not(.idl) {
            background: rgba(0, 0, 0, .03);
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */
    </style>
    <style>
        /* style-var-click-highlighting */

        var {
            cursor: pointer;
        }

        var.selected0 {
            background-color: #F4D200;
            box-shadow: 0 0 0 2px #F4D200;
        }

        var.selected1 {
            background-color: #FF87A2;
            box-shadow: 0 0 0 2px #FF87A2;
        }

        var.selected2 {
            background-color: #96E885;
            box-shadow: 0 0 0 2px #96E885;
        }

        var.selected3 {
            background-color: #3EEED2;
            box-shadow: 0 0 0 2px #3EEED2;
        }

        var.selected4 {
            background-color: #EACFB6;
            box-shadow: 0 0 0 2px #EACFB6;
        }

        var.selected5 {
            background-color: #82DDFF;
            box-shadow: 0 0 0 2px #82DDFF;
        }

        var.selected6 {
            background-color: #FFBCF2;
            box-shadow: 0 0 0 2px #FFBCF2;
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-CRD" rel="stylesheet">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
        <h1 class="p-name no-ref" id="title">CSS ペインティング API レベル 1</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#CRD">W3C 候補勧告草案</a>, <time class="dt-updated"
                datetime="2021-12-16">2021年12月16日</time></p>
        <details open>
            <summary>この文書の詳細情報</summary>
            <div data-fill-with="spec-metadata">
                <dl>
                    <dt>このバージョン:
                    <dd><a class="u-url"
                            href="https://www.w3.org/TR/2021/CRD-css-paint-api-1-20211216/">https://www.w3.org/TR/2021/CRD-css-paint-api-1-20211216/</a>
                    <dt>最新公開バージョン:
                    <dd><a href="https://www.w3.org/TR/css-paint-api-1/">https://www.w3.org/TR/css-paint-api-1/</a>
                    <dt>編集者草案:
                    <dd><a
                            href="https://drafts.css-houdini.org/css-paint-api-1/">https://drafts.css-houdini.org/css-paint-api-1/</a>
                    <dt>以前のバージョン:
                    <dd><a href="https://www.w3.org/TR/2018/WD-css-paint-api-1-20180410/"
                            rel="prev">https://www.w3.org/TR/2018/WD-css-paint-api-1-20180410/</a>
                    <dd><a href="https://www.w3.org/TR/2016/WD-css-paint-api-1-20160607/"
                            rel="prev">https://www.w3.org/TR/2016/WD-css-paint-api-1-20160607/</a>
                    <dt>履歴:
                    <dd><a class="u-url"
                            href="https://www.w3.org/standards/history/css-paint-api-1">https://www.w3.org/standards/history/css-paint-api-1</a>
                    <dt>フィードバック:
                    <dd><span><a
                                href="mailto:public-houdini@w3.org?subject=%5Bcss-paint-api%5D%20YOUR%20TOPIC%20HERE">public-houdini@w3.org</a>
                            件名 “<kbd>[css-paint-api] <i data-lt>… メッセージのトピック …</i></kbd>” (<a
                                href="https://lists.w3.org/Archives/Public/public-houdini/"
                                rel="discussion">アーカイブ</a>)</span>
                    <dd><a href="https://github.com/w3c/css-houdini-drafts/issues/">GitHub</a>
                    <dt>実装レポート:
                    <dd><a
                            href="https://wpt.fyi/results/css/css-paint-api">https://wpt.fyi/results/css/css-paint-api</a>
                    <dt class="editor">編集者:
                    <dd class="editor p-author h-card vcard" data-editor-id="73001"><a class="p-name fn u-email email"
                            href="mailto:ikilpatrick@chromium.org">Ian Kilpatrick</a>
                    <dd class="editor p-author h-card vcard" data-editor-id="42080"><a class="p-name fn u-email email"
                            href="mailto:dino@apple.com">Dean Jackson</a>
                    <dt class="editor">前編集者:
                    <dd class="editor p-author h-card vcard" data-editor-id="47691"><a class="p-name fn u-email email"
                            href="mailto:shanestephens@google.com">Shane Stephens</a>
                </dl>
            </div>
        </details>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2021 <a
                href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
                href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a
                href="https://www.ercim.eu/"><abbr
                    title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a
                href="https://www.keio.ac.jp/">Keio</a>, <a href="https://ev.buaa.edu.cn/">Beihang</a>). W3C <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document" rel="license">permissive
                document license</a> rules apply. </p>
        <hr title="Separator for header">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">概要</span></h2>
        <p>ウェブ開発者が javascript を使ってカスタム CSS <a class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-images-3/#typedef-image" id="ref-for-typedef-image">&lt;image></a>
            を定義できる API であり、

            スタイルやサイズの変更にも対応します。
            詳細は <a
                href="https://github.com/w3c/css-houdini-drafts/blob/master/css-paint-api/EXPLAINER.md">EXPLAINER（解説）</a>
            を参照してください。
        </p>
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">この文書のステータス</span></h2>
    <div data-fill-with="status">
        <p><em>このセクションは、公開時点での文書のステータスについて説明します。
                現在の W3C 公開リストや
                この技術報告書の最新リビジョンは
                <a href="https://www.w3.org/TR/">W3C 技術報告書インデックス（https://www.w3.org/TR/）</a> で確認できます。</em> </p>
        <p> この文書は <a href="https://www.w3.org/groups/wg/css">CSS ワーキンググループ</a> により <strong>候補勧告草案（Candidate
                Recommendation Draft）</strong> として <a
                href="https://www.w3.org/2021/Process-20211102/#recs-and-notes">勧告トラック</a>を用いて公開されました。
            候補勧告として公開されたことは <abbr title="World Wide Web Consortium">W3C</abbr> およびその会員による承認を意味するものではありません。
            候補勧告草案は、
            ワーキンググループが次の候補勧告スナップショットに含める予定の
            以前の候補勧告からの変更を統合したものです。 </p>
        <p> この文書はドラフトであり、
            今後更新、置き換え、
            または他文書によって廃止される可能性があります。
            この文書を進行中の作業以外のものとして引用することは適切ではありません。 </p>
        <p>ご意見は
            <a href="https://github.com/w3c/css-houdini-drafts/issues">GitHub で Issue を提出</a>（推奨）
            してください。その際、タイトルに仕様コード “css-paint-api” を含めてください（例: “[css-paint-api] <i>…コメント要約…</i>”）。
            すべての Issue やコメントは <a href="https://lists.w3.org/Archives/Public/public-houdini-archive/">アーカイブ</a>されています。
            または、（<a href="https://lists.w3.org/Archives/Public/www-style/">アーカイブ</a>）パブリックメーリングリスト <a
                href="mailto:www-style@w3.org?Subject=%5Bcss-paint-api%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>
            へ送信することもできます。
        </p>
        <p>この文書は <a href="https://www.w3.org/2021/Process-20211102/" id="w3c_process_revision">2021年11月2日版 W3C
                プロセス文書</a> によって管理されています。</p>
        <p>この文書は <a href="https://www.w3.org/Consortium/Patent-Policy-20200915/">W3C 特許ポリシー</a>の下で運営されるグループによって作成されました。
            W3C は、グループの成果物に関連する<a href="https://www.w3.org/2004/01/pp-impl/32061/status"
                rel="disclosure">公開特許開示リスト</a>を維持しています。
            このページには特許開示方法も記載されています。
            個人が特許について実際に知っており、その特許に<a
                href="https://www.w3.org/Consortium/Patent-Policy-20200915/#def-essential">必須クレーム</a>が含まれると考える場合は、
            <a href="https://www.w3.org/Consortium/Patent-Policy-20200915/#sec-Disclosure">W3C
                特許ポリシー第6節</a>に従って情報を開示する必要があります。
        </p>
        <p></p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目次</h2>
        <ol class="toc" role="directory">
            <li><a href="#intro"><span class="secno">1</span> <span class="content">はじめに</span></a>
            <li><a href="#paint-worklet"><span class="secno">2</span> <span class="content">ペイントワークレット</span></a>
            <li><a href="#concepts"><span class="secno">3</span> <span class="content">概念</span></a>
            <li><a href="#registering-custom-paint"><span class="secno">4</span> <span
                        class="content">カスタムペイントの登録</span></a>
            <li><a href="#paint-notation"><span class="secno">5</span> <span class="content">ペイント記法</span></a>
            <li>
                <a href="#2d-rendering-context"><span class="secno">6</span> <span
                        class="content">2Dレンダリングコンテキスト</span></a>
                <ol class="toc">
                    <li><a href="#drawing-a-cssimagevalue"><span class="secno">6.1</span> <span
                                class="content">CSSImageValue の描画</span></a>
                </ol>
            <li>
                <a href="#drawing-an-image"><span class="secno">7</span> <span class="content">画像の描画</span></a>
                <ol class="toc">
                    <li><a href="#global-scope-selection"><span class="secno">7.1</span> <span
                                class="content">グローバルスコープの選択</span></a>
                </ol>
            <li>
                <a href="#examples"><span class="secno">8</span> <span class="content">例</span></a>
                <ol class="toc">
                    <li><a href="#example-1"><span class="secno">8.1</span> <span class="content">例1: 色付き円</span></a>
                    <li><a href="#example-2"><span class="secno">8.2</span> <span class="content">例2:
                                画像プレースホルダー</span></a>
                    <li><a href="#example-3"><span class="secno">8.3</span> <span class="content">例3: 弧（アーク）</span></a>
                    <li><a href="#example-4"><span class="secno">8.4</span> <span class="content">例4:
                                サイズに応じた色の違い</span></a>
                    <li><a href="#example-5"><span class="secno">8.5</span> <span class="content">例5:
                                要素領域外への描画</span></a>
                </ol>
            <li><a href="#security-considerations"><span class="secno">9</span> <span
                        class="content">セキュリティに関する考慮事項</span></a>
            <li><a href="#privacy-considerations"><span class="secno">10</span> <span
                        class="content">プライバシーに関する考慮事項</span></a>
            <li><a href="#changes"><span class="secno">11</span> <span class="content">変更点</span></a>
            <li>
                <a href="#w3c-conformance"><span class="secno"></span> <span class="content">適合性</span></a>
                <ol class="toc">
                    <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">文書の規約</span></a>
                    <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span class="content">
                                適合クラス</span></a>
                    <li>
                        <a href="#w3c-partial"><span class="secno"></span> <span class="content">部分的な実装</span></a>
                        <ol class="toc">
                            <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span
                                        class="content">不安定・独自機能の実装</span></a>
                        </ol>
                    <li><a href="#w3c-testing"><span class="secno"></span> <span class="content">非実験的な実装</span></a>
                    <li><a href="#w3c-cr-exit-criteria"><span class="secno"></span> <span class="content">CR
                                終了基準</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本仕様で定義される用語</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">参照で定義される用語</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">規範的参考文献</span></a>
                </ol>
            <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL 索引</span></a>
        </ol>
    </nav>
    <main>
        <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span
                class="content">はじめに</span><a class="self-link" href="#intro"></a></h2>
        <p>CSSのペイント段階は、レイアウト段階で生成されたボックスのサイズおよび計算されたスタイルに基づいて、ボックスの背景、内容、ハイライトを描画する役割を担っています。</p>
        <p>本仕様は、サイズや計算スタイルの変更に応じて、追加の<a class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-images-3/#typedef-image" id="ref-for-typedef-image①">&lt;image></a>
            関数を用いて、開発者がボックスの一部を描画できるAPIについて記述します。</p>
        <p class="note" role="note"><span>注:</span>
            将来のバージョンの仕様では、クリップ領域やグローバルアルファ、背景レイヤーなどボックスの一部に対してフィルターを定義する機能が追加される可能性があります。</p>
        <h2 class="heading settled" data-level="2" id="paint-worklet"><span class="secno">2. </span><span
                class="content">ペイントワークレット</span><a class="self-link" href="#paint-worklet"></a></h2>
        <div class="mdn-anno wrapped">
            <button class="mdn-anno-btn"><b class="less-than-two-engines-flag"
                    title="この機能は現時点で2つ未満のエンジンで利用可能です。">⚠</b><span>MDN</span></button>
            <div class="feature">
                <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/CSS/paintWorklet"
                        title="paintWorkletはCSSインターフェースの静的な読み取り専用プロパティで、CSSプロパティがファイルを期待する場所に、プログラムで画像を生成するPaintWorkletへのアクセスを提供します。">CSS/paintWorklet</a>
                </p>
                <p class="less-than-two-engines-text">現時点で一つのエンジンのみ対応。</p>
                <div class="support">
                    <span class="firefox no"><span>Firefox</span><span>未対応</span></span><span
                        class="safari no"><span>Safari</span><span>未対応</span></span><span
                        class="chrome yes"><span>Chrome</span><span>65以上</span></span>
                    <hr>
                    <span class="opera yes"><span>Opera</span><span>52以上</span></span><span
                        class="edge_blink yes"><span>Edge</span><span>79以上</span></span>
                    <hr>
                    <span class="edge no"><span>Edge (レガシー)</span><span>未対応</span></span><span
                        class="ie no"><span>IE</span><span>未対応</span></span>
                    <hr>
                    <span class="firefox_android no"><span>Firefox for Android</span><span>未対応</span></span><span
                        class="safari_ios no"><span>iOS Safari</span><span>未対応</span></span><span
                        class="chrome_android yes"><span>Chrome for Android</span><span>65以上</span></span><span
                        class="webview_android yes"><span>Android WebView</span><span>65以上</span></span><span
                        class="samsunginternet_android yes"><span>Samsung Internet</span><span>9.0以上</span></span><span
                        class="opera_android yes"><span>Opera Mobile</span><span>47以上</span></span>
                </div>
            </div>
        </div>
        <p><code
                class="idl"><a data-link-type="idl" href="#dom-css-paintworklet" id="ref-for-dom-css-paintworklet">paintWorklet</a></code>
            属性は、ペイントに関連するすべてのクラスを管理する <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet" id="ref-for-worklet">Worklet</a></code>
            へのアクセスを提供します。</p>
        <p><code
                class="idl"><a data-link-type="idl" href="#dom-css-paintworklet" id="ref-for-dom-css-paintworklet①">paintWorklet</a></code>の
            <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/worklets.html#worklet-global-scope-type"
                id="ref-for-worklet-global-scope-type">workletグローバルスコープ型</a>は <code
                class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope">PaintWorkletGlobalScope</a></code>
            です。
        </p>
        <p><code
                class="idl"><a data-link-type="idl" href="#dom-css-paintworklet" id="ref-for-dom-css-paintworklet②">paintWorklet</a></code>の
            <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet-destination-type"
                id="ref-for-worklet-destination-type">workletデスティネーション型</a>は <code>"paintworklet"</code> です。
        </p>
        <pre class="idl highlight def"><c- b>partial</c-> <c- b>namespace</c-> <a class="idl-code" data-link-type="namespace" href="https://www.w3.org/TR/cssom-1/#namespacedef-css" id="ref-for-namespacedef-css"><c- g>CSS</c-></a> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet" id="ref-for-worklet①"><c- n>Worklet</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CSS" data-dfn-type="attribute" data-export data-readonly data-type="Worklet" id="dom-css-paintworklet"><code><c- g>paintWorklet</c-></code></dfn>;
};
</pre>
        <p><code
                class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope①">PaintWorkletGlobalScope</a></code>
            は、<code
                class="idl"><a data-link-type="idl" href="#dom-css-paintworklet" id="ref-for-dom-css-paintworklet③">paintWorklet</a></code>
            のグローバル実行コンテキストです。
        </p>
        <div class="mdn-anno wrapped">
            <button class="mdn-anno-btn"><b class="less-than-two-engines-flag"
                    title="この機能は現時点で2つ未満のエンジンで利用可能です。">⚠</b><span>MDN</span></button>
            <div class="feature">
                <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/PaintWorklet/devicePixelRatio"
                        title="PaintWorkletGlobalScope.devicePixelRatioは、PaintWorkletインターフェースの読み取り専用プロパティで、現在のデバイスの物理ピクセルと論理ピクセルの比率を返します。">PaintWorklet/devicePixelRatio</a>
                </p>
                <p class="less-than-two-engines-text">現時点で一つのエンジンのみ対応。</p>
                <div class="support">
                    <span class="firefox no"><span>Firefox</span><span>未対応</span></span><span
                        class="safari no"><span>Safari</span><span>未対応</span></span><span
                        class="chrome yes"><span>Chrome</span><span>65以上</span></span>
                    <hr>
                    <span class="opera no"><span>Opera</span><span>?</span></span><span
                        class="edge_blink yes"><span>Edge</span><span>79以上</span></span>
                    <hr>
                    <span class="edge no"><span>Edge (レガシー)</span><span>未対応</span></span><span
                        class="ie no"><span>IE</span><span>未対応</span></span>
                    <hr>
                    <span class="firefox_android no"><span>Firefox for Android</span><span>未対応</span></span><span
                        class="safari_ios no"><span>iOS Safari</span><span>未対応</span></span><span
                        class="chrome_android yes"><span>Chrome for Android</span><span>65以上</span></span><span
                        class="webview_android yes"><span>Android WebView</span><span>65以上</span></span><span
                        class="samsunginternet_android yes"><span>Samsung Internet</span><span>9.0以上</span></span><span
                        class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
                </div>
            </div>
        </div>
        <p><code
                class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope②">PaintWorkletGlobalScope</a></code>
            には <code
                class="idl"><a data-link-type="idl" href="#dom-paintworkletglobalscope-devicepixelratio" id="ref-for-dom-paintworkletglobalscope-devicepixelratio">devicePixelRatio</a></code>
            プロパティがあり、Window.<code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-view/#dom-window-devicepixelratio" id="ref-for-dom-window-devicepixelratio">devicePixelRatio</a></code>
            プロパティと同じ値となります。</p>
        <div class="mdn-anno wrapped">
            <button class="mdn-anno-btn"><b class="less-than-two-engines-flag"
                    title="この機能は現時点で2つ未満のエンジンで利用可能です。">⚠</b><span>MDN</span></button>
            <div class="feature">
                <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/PaintWorklet"
                        title="PaintWorkletはCSSペインティングAPIのインターフェースで、CSSプロパティがファイルを期待する場所にプログラムで画像を生成します。CSS.paintWorkletからこのインターフェースにアクセスできます。">PaintWorklet</a>
                </p>
                <p class="less-than-two-engines-text">現時点で一つのエンジンのみ対応。</p>
                <div class="support">
                    <span class="firefox no"><span>Firefox</span><span>未対応</span></span><span
                        class="safari no"><span>Safari</span><span>未対応</span></span><span
                        class="chrome yes"><span>Chrome</span><span>65以上</span></span>
                    <hr>
                    <span class="opera no"><span>Opera</span><span>?</span></span><span
                        class="edge_blink yes"><span>Edge</span><span>79以上</span></span>
                    <hr>
                    <span class="edge no"><span>Edge (レガシー)</span><span>未対応</span></span><span
                        class="ie no"><span>IE</span><span>未対応</span></span>
                    <hr>
                    <span class="firefox_android no"><span>Firefox for Android</span><span>未対応</span></span><span
                        class="safari_ios no"><span>iOS Safari</span><span>未対応</span></span><span
                        class="chrome_android yes"><span>Chrome for Android</span><span>65以上</span></span><span
                        class="webview_android yes"><span>Android WebView</span><span>65以上</span></span><span
                        class="samsunginternet_android yes"><span>Samsung Internet</span><span>9.0以上</span></span><span
                        class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
                </div>
            </div>
        </div>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Global" id="ref-for-Global"><c- g>Global</c-></a>=(<a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet" id="ref-for-worklet②"><c- n>Worklet</c-></a>,<a data-link-type="idl-name"><c- n>PaintWorklet</c-></a>),<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>PaintWorklet</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="paintworkletglobalscope"><code><c- g>PaintWorkletGlobalScope</c-></code></dfn> : <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/worklets.html#workletglobalscope" id="ref-for-workletglobalscope"><c- n>WorkletGlobalScope</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-paintworkletglobalscope-registerpaint" id="ref-for-dom-paintworkletglobalscope-registerpaint"><c- g>registerPaint</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="PaintWorkletGlobalScope/registerPaint(name, paintCtor)" data-dfn-type="argument" data-export id="dom-paintworkletglobalscope-registerpaint-name-paintctor-name"><code><c- g>name</c-></code><a class="self-link" href="#dom-paintworkletglobalscope-registerpaint-name-paintctor-name"></a></dfn>, <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction" id="ref-for-VoidFunction"><c- n>VoidFunction</c-></a> <dfn class="idl-code" data-dfn-for="PaintWorkletGlobalScope/registerPaint(name, paintCtor)" data-dfn-type="argument" data-export id="dom-paintworkletglobalscope-registerpaint-name-paintctor-paintctor"><code><c- g>paintCtor</c-></code><a class="self-link" href="#dom-paintworkletglobalscope-registerpaint-name-paintctor-paintctor"></a></dfn>);
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double" id="ref-for-idl-unrestricted-double"><c- b>unrestricted</c-> <c- b>double</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PaintWorkletGlobalScope" data-dfn-type="attribute" data-export data-readonly data-type="unrestricted double" id="dom-paintworkletglobalscope-devicepixelratio"><code><c- g>devicePixelRatio</c-></code></dfn>;
};
</pre>
        <p><code
                class="idl"><a data-link-type="idl" href="#dictdef-paintrenderingcontext2dsettings" id="ref-for-dictdef-paintrenderingcontext2dsettings">PaintRenderingContext2DSettings</a></code>
            はペイントキャンバスに関連付けられたレンダリングコンテキストの設定を保持します。<code
                class="idl"><a data-link-type="idl" href="#dictdef-paintrenderingcontext2dsettings" id="ref-for-dictdef-paintrenderingcontext2dsettings①">PaintRenderingContext2DSettings</a></code>
            は、canvasの2Dレンダリングコンテキストのサポートされるサブセットを提供します。将来的にはペイントキャンバスの色管理のサポートなど拡張される可能性があります。</p>
        <pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-paintrenderingcontext2dsettings"><code><c- g>PaintRenderingContext2DSettings</c-></code></dfn> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="true" data-dfn-for="PaintRenderingContext2DSettings" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-paintrenderingcontext2dsettings-alpha"><code><c- g>alpha</c-></code></dfn> = <c- b>true</c->;
};
</pre>
        <div class="note" role="note">
            注: クラスの構造は下記のようになります:
            <pre class="lang-javascript highlight"><c- a>class</c-> MyPaint <c- p>{</c->
    <c- k>static</c-> get inputProperties<c- p>()</c-> <c- p>{</c-> <c- k>return</c-> <c- p>[</c-><c- t>'--foo'</c-><c- p>];</c-> <c- p>}</c->
    <c- k>static</c-> get inputArguments<c- p>()</c-> <c- p>{</c-> <c- k>return</c-> <c- p>[</c-><c- t>'&lt;color>'</c-><c- p>];</c-> <c- p>}</c->
    <c- k>static</c-> get contextOptions<c- p>()</c-> <c- p>{</c-> <c- k>return</c-> <c- p>{</c->alpha<c- o>:</c-> <c- kc>true</c-><c- p>};</c-> <c- p>}</c->

    paint<c- p>(</c->ctx<c- p>,</c-> size<c- p>,</c-> styleMap<c- p>)</c-> <c- p>{</c->
        <c- c1>// ここにペイントコードを記述</c->
    <c- p>}</c->
<c- p>}</c->
</pre>
        </div>
        <h2 class="heading settled" data-level="3" id="concepts"><span class="secno">3. </span><span
                class="content">概念</span><a class="self-link" href="#concepts"></a></h2>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="paint-definition">ペイント定義</dfn>は、
            <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct">構造体</a>であり、作者定義の
            <code
                class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope③">PaintWorkletGlobalScope</a></code>
            に必要な情報を記述します。これは <a class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-images-3/#typedef-image" id="ref-for-typedef-image②">&lt;image></a>
            （<a class="production css" data-link-type="function" href="#funcdef-paint"
                id="ref-for-funcdef-paint">&lt;paint()></a> 関数から参照可能）についての情報です。内容は次の通りです:
        </p>
        <ul>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-for="paint definition" data-dfn-type="dfn" data-noexport
                        id="paint-definition-class-constructor">クラスコンストラクター</dfn>（
                    <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-constructor"
                        id="ref-for-sec-constructor">constructor</a>
                    ）。
                </p>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-for="paint definition" data-dfn-type="dfn" data-noexport
                        id="paint-definition-paint-function">ペイント関数</dfn>（paint
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-syntax-3/#function"
                        id="ref-for-function">関数</a>型、<a data-link-type="dfn"
                        href="https://webidl.spec.whatwg.org/#dfn-callback-function"
                        id="ref-for-dfn-callback-function">コールバック関数</a>型）。
                </p>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-for="paint definition" data-dfn-type="dfn" data-noexport
                        id="paint-definition-constructor-valid-flag">コンストラクター有効フラグ</dfn>。</p>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-for="paint definition" data-dfn-type="dfn" data-noexport
                        id="paint-definition-input-properties">入力プロパティ</dfn>（
                    <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list"
                        id="ref-for-list">DOMStringのリスト</a>）。
                </p>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-for="paint definition" data-dfn-type="dfn" data-noexport
                        id="paint-definition-paintrenderingcontext2dsettings-object">PaintRenderingContext2DSettingsオブジェクト</dfn>。
                </p>
        </ul>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="document-paint-definition">文書ペイント定義</dfn>は、
            <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct①">構造体</a>であり、
            作者定義の <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                id="ref-for-concept-document">文書</a>が必要とする
            <a class="production css" data-link-type="type" href="https://www.w3.org/TR/css-images-3/#typedef-image"
                id="ref-for-typedef-image③">&lt;image></a> 関数（ペイント関数から参照可能）について記述します。内容は次の通りです:
        </p>
        <ul>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-for="document paint definition" data-dfn-type="dfn" data-noexport
                        id="document-paint-definition-input-properties">入力プロパティ</dfn>（
                    <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list"
                        id="ref-for-list①">DOMStringのリスト</a>）。
                </p>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-for="document paint definition" data-dfn-type="dfn" data-noexport
                        id="document-paint-definition-input-argument-syntaxes">入力引数構文</dfn>（
                    <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②">リスト</a>、
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-properties-values-api-1/#syntax-definition"
                        id="ref-for-syntax-definition">構文定義</a>）。
                </p>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-for="document paint definition" data-dfn-type="dfn" data-noexport
                        id="document-paint-definition-paintrenderingcontext2dsettings-object">PaintRenderingContext2DSettingsオブジェクト</dfn>。
                </p>
        </ul>
        <h2 class="heading settled" data-level="4" id="registering-custom-paint"><span class="secno">4. </span><span
                class="content">カスタムペイントの登録</span><a class="self-link" href="#registering-custom-paint"></a></h2>
        <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                id="ref-for-concept-document①">document</a> は <a data-link-type="dfn"
                href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map">document paint
                definitions</a> の <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="document-paint-definitions">マップ</dfn> を持ちます。初期状態ではこのマップは空です。<code
                class="idl"><a data-link-type="idl" href="#dom-paintworkletglobalscope-registerpaint" id="ref-for-dom-paintworkletglobalscope-registerpaint①">registerPaint(name, paintCtor)</a></code>
            が呼び出されるとマップが追加されます。</p>
        <p><code
                class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope④">PaintWorkletGlobalScope</a></code>
            は <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①">paint
                definitions</a> の <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="paint-definitions">マップ</dfn> を持ちます。初期状態ではこのマップは空です。<code
                class="idl"><a data-link-type="idl" href="#dom-paintworkletglobalscope-registerpaint" id="ref-for-dom-paintworkletglobalscope-registerpaint②">registerPaint(name, paintCtor)</a></code>
            が呼び出されるとマップが追加されます。</p>
        <p><code
                class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope⑤">PaintWorkletGlobalScope</a></code>
            は <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map②">paint
                class instances</a> の <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="paint-class-instances">マップ</dfn> を持ちます。初期状態ではこのマップは空です。<a data-link-type="dfn"
                href="#draw-a-paint-image" id="ref-for-draw-a-paint-image">draw a paint image</a>
            がユーザーエージェントにより実行されると追加されます。</p>
        <p><a data-link-type="dfn" href="#paint-class-instances" id="ref-for-paint-class-instances">paint class
                instances</a> マップ内のペイントクラスのインスタンスは、ユーザーエージェントによっていつでも破棄・削除されることがあります。これは <a class="production css"
                data-link-type="function" href="#funcdef-paint" id="ref-for-funcdef-paint①">&lt;paint()></a>
            関数が使用されなくなった場合や、ユーザーエージェントがメモリを回収する必要がある場合などです。</p>
        <div class="mdn-anno wrapped">
            <button class="mdn-anno-btn"><b class="less-than-two-engines-flag"
                    title="この機能は現時点で2つ未満のエンジンで利用可能です。">⚠</b><span>MDN</span></button>
            <div class="feature">
                <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/PaintWorklet/registerPaint"
                        title="PaintWorkletGlobalScope.registerPaint() メソッドは、CSSプロパティがファイルを期待する場所に画像をプログラムで生成するクラスを登録します。">PaintWorklet/registerPaint</a>
                </p>
                <p class="less-than-two-engines-text">現時点で一つのエンジンのみ対応。</p>
                <div class="support">
                    <span class="firefox no"><span>Firefox</span><span>未対応</span></span><span
                        class="safari no"><span>Safari</span><span>未対応</span></span><span
                        class="chrome yes"><span>Chrome</span><span>65以上</span></span>
                    <hr>
                    <span class="opera no"><span>Opera</span><span>?</span></span><span
                        class="edge_blink yes"><span>Edge</span><span>79以上</span></span>
                    <hr>
                    <span class="edge no"><span>Edge (レガシー)</span><span>未対応</span></span><span
                        class="ie no"><span>IE</span><span>未対応</span></span>
                    <hr>
                    <span class="firefox_android no"><span>Firefox for Android</span><span>未対応</span></span><span
                        class="safari_ios no"><span>iOS Safari</span><span>未対応</span></span><span
                        class="chrome_android yes"><span>Chrome for Android</span><span>65以上</span></span><span
                        class="webview_android yes"><span>Android WebView</span><span>65以上</span></span><span
                        class="samsunginternet_android yes"><span>Samsung Internet</span><span>9.0以上</span></span><span
                        class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
                </div>
            </div>
        </div>
        <div class="algorithm" data-algorithm="registerPaint(name, paintCtor)"
            data-algorithm-for="PaintWorkletGlobalScope">
            <dfn class="dfn-paneled idl-code" data-dfn-for="PaintWorkletGlobalScope" data-dfn-type="method" data-export
                id="dom-paintworkletglobalscope-registerpaint"><code>registerPaint(<var>name</var>, <var>paintCtor</var>)</code></dfn>
            メソッドが呼び出された場合、ユーザーエージェントは以下の手順を実行<em>しなければならない</em>:
            <ol>
                <li data-md>
                    <p><var>name</var> が空文字列の場合、<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                            id="ref-for-dfn-throw">throw</a> <a data-link-type="dfn"
                            href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"
                            id="ref-for-sec-native-error-types-used-in-this-standard-typeerror">TypeError</a>
                        を投げて処理を中止する。</p>
                <li data-md>
                    <p><var>paintDefinitionMap</var> を <code
                            class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope⑥">PaintWorkletGlobalScope</a></code>
                        の
                        <a data-link-type="dfn" href="#paint-definitions" id="ref-for-paint-definitions">paint
                            definitions</a> マップとする。
                    </p>
                <li data-md>
                    <p><var>paintDefinitionMap</var>[<var>name</var>] が <a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists">存在する</a>場合は <a
                            data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                            id="ref-for-dfn-throw①">throw</a>
                        "<code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidmodificationerror" id="ref-for-invalidmodificationerror">InvalidModificationError</a></code>"
                        <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code>
                        を投げて処理を中止する。
                    </p>
                <li data-md>
                    <p><var>inputProperties</var> を空の <code>sequence&lt;DOMString></code>とする。</p>
                <li data-md>
                    <p><var>inputPropertiesIterable</var> を <a data-link-type="dfn"
                            href="https://tc39.github.io/ecma262/#sec-get-o-p"
                            id="ref-for-sec-get-o-p">Get</a>(<var>paintCtor</var>, "inputProperties") の結果とする。</p>
                <li data-md>
                    <p><var>inputPropertiesIterable</var> が undefined でなければ <var>inputProperties</var> に <a
                            data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#web-idl-arguments-list-converting"
                            id="ref-for-web-idl-arguments-list-converting">変換</a>した
                        <var>inputPropertiesIterable</var> の <code>sequence&lt;DOMString></code> をセットする。例外が <a
                            data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                            id="ref-for-dfn-throw②">throw</a> された場合は再throwして処理を中止する。
                    </p>
                <li data-md>
                    <p><var>inputProperties</var> をフィルタし、<a data-link-type="dfn"
                            href="https://www.w3.org/TR/cssom-1/#supported-css-property"
                            id="ref-for-supported-css-property">サポートされているCSSプロパティ</a>と<a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-variables-1/#custom-property"
                            id="ref-for-custom-property">カスタムプロパティ</a>のみを含める。</p>
            </ol>
            <p class="note" role="note"><span>注:</span> inputProperties getter
                で提供されるCSSプロパティのリストは、カスタムまたはネイティブCSSプロパティのどちらでもよいです。</p>
            <p class="note" role="note"><span>注:</span> CSSプロパティリストには省略プロパティ（ショートハンド）が含まれる場合があります。</p>
            <p class="note" role="note"><span>注:</span> ペイント画像クラスを将来互換とするため、現在ユーザーエージェントで無効なプロパティ（例:
                <code>margin-bikeshed-property</code>）も含まれる場合があります。
            </p>
            <ol start="8">
                <li data-md>
                    <p><var>inputArguments</var> を空の <code>sequence&lt;DOMString></code>とする。</p>
                <li data-md>
                    <p><var>inputArgumentsIterable</var> を <a data-link-type="dfn"
                            href="https://tc39.github.io/ecma262/#sec-get-o-p"
                            id="ref-for-sec-get-o-p①">Get</a>(<var>paintCtor</var>, "inputArguments") の結果とする。</p>
                <li data-md>
                    <p><var>inputArgumentsIterable</var> が undefined でなければ <var>inputArguments</var> に <a
                            data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#web-idl-arguments-list-converting"
                            id="ref-for-web-idl-arguments-list-converting①">変換</a>した
                        <var>inputArgumentsIterable</var> の <code>sequence&lt;DOMString></code>
                        をセットする。例外が発生した場合は再throwして処理を中止する。
                    </p>
                <li data-md>
                    <p><var>inputArgumentSyntaxes</var> を <a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty">空</a>の <a
                            data-link-type="dfn" href="https://infra.spec.whatwg.org/#list"
                            id="ref-for-list③">リスト</a>とする。
                    </p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                            id="ref-for-list-iterate">inputArguments</a> の各 <var>item</var> について、以下のサブ手順を実行する:</p>
                    <ol>
                        <li data-md>
                            <p><a data-link-type="dfn"
                                    href="https://www.w3.org/TR/css-properties-values-api-1/#consume-a-syntax-definition"
                                    id="ref-for-consume-a-syntax-definition">item から構文定義を消費</a>しようとする。
                                失敗した場合は <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                                    id="ref-for-dfn-throw③">throw</a> <a data-link-type="dfn"
                                    href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"
                                    id="ref-for-sec-native-error-types-used-in-this-standard-typeerror①">TypeError</a>
                                を投げて処理を中止する。
                                成功した場合は <var>parsedSyntax</var> を返された <a data-link-type="dfn"
                                    href="https://www.w3.org/TR/css-properties-values-api-1/#syntax-definition"
                                    id="ref-for-syntax-definition①">構文定義</a>とする。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append"
                                    id="ref-for-list-append">parsedSyntax</a> を <var>inputArgumentSyntaxes</var> に追加する。
                            </p>
                    </ol>
                <li data-md>
                    <p><var>contextOptionsValue</var> を <a data-link-type="dfn"
                            href="https://tc39.github.io/ecma262/#sec-get-o-p"
                            id="ref-for-sec-get-o-p②">Get</a>(<var>paintCtor</var>, "contextOptions") の結果とする。</p>
                <li data-md>
                    <p><var>paintRenderingContext2DSettings</var> を <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#web-idl-arguments-list-converting"
                            id="ref-for-web-idl-arguments-list-converting②">変換</a>した
                        <var>contextOptionsValue</var> の <code
                            class="idl"><a data-link-type="idl" href="#dictdef-paintrenderingcontext2dsettings" id="ref-for-dictdef-paintrenderingcontext2dsettings②">PaintRenderingContext2DSettings</a></code>
                        とする。
                        例外が <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                            id="ref-for-dfn-throw④">throw</a> された場合は再throwして処理を中止する。
                    </p>
                    <p class="note" role="note"><span>注:</span> <code>paintRenderingContext2DSettings.alpha</code> を
                        <code>false</code> に設定すると、ユーザーエージェントはテキストのアンチエイリアスや「可視性」最適化（例：ペイント画像が不透明な場合は背面を描画しない）を行うことができます。
                    </p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-isconstructor"
                            id="ref-for-sec-isconstructor">IsConstructor</a>(<var>paintCtor</var>) の結果が false なら <a
                            data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                            id="ref-for-dfn-throw⑤">throw</a> <a data-link-type="dfn"
                            href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"
                            id="ref-for-sec-native-error-types-used-in-this-standard-typeerror②">TypeError</a>
                        を投げて処理を中止する。</p>
                <li data-md>
                    <p><var>prototype</var> を <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-get-o-p"
                            id="ref-for-sec-get-o-p③">Get</a>(<var>paintCtor</var>, "prototype") の結果とする。</p>
                <li data-md>
                    <p><a data-link-type="dfn"
                            href="https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values"
                            id="ref-for-sec-ecmascript-data-types-and-values">Type</a>(<var>prototype</var>) の結果が Object
                        でない場合は <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                            id="ref-for-dfn-throw⑥">throw</a> <a data-link-type="dfn"
                            href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"
                            id="ref-for-sec-native-error-types-used-in-this-standard-typeerror③">TypeError</a>
                        を投げて処理を中止する。</p>
                <li data-md>
                    <p><var>paintValue</var> を <a data-link-type="dfn"
                            href="https://tc39.github.io/ecma262/#sec-get-o-p"
                            id="ref-for-sec-get-o-p④">Get</a>(<var>prototype</var>, "paint") の結果とする。</p>
                <li data-md>
                    <p><var>paint</var> を <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#web-idl-arguments-list-converting"
                            id="ref-for-web-idl-arguments-list-converting③">変換</a>した <var>paintValue</var> の <a
                            data-link-type="dfn" href="https://www.w3.org/TR/css-syntax-3/#function"
                            id="ref-for-function①">Function</a> <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#dfn-callback-function"
                            id="ref-for-dfn-callback-function①">callback function</a> 型とする。変換時に例外が発生した場合は再throwする。
                    </p>
                <li data-md>
                    <p><var>definition</var> を新しい <a data-link-type="dfn" href="#paint-definition"
                            id="ref-for-paint-definition">ペイント定義</a>として、以下とする:</p>
                    <ul>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#paint-definition-class-constructor"
                                    id="ref-for-paint-definition-class-constructor">クラスコンストラクター</a>は
                                <var>paintCtor</var>。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#paint-definition-paint-function"
                                    id="ref-for-paint-definition-paint-function">ペイント関数</a>は <var>paint</var>。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#paint-definition-constructor-valid-flag"
                                    id="ref-for-paint-definition-constructor-valid-flag">コンストラクター有効フラグ</a>
                                は<b>true</b>。</p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#paint-definition-input-properties"
                                    id="ref-for-paint-definition-input-properties">input properties</a>は
                                <var>inputProperties</var>。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#paint-definition-paintrenderingcontext2dsettings-object"
                                    id="ref-for-paint-definition-paintrenderingcontext2dsettings-object">PaintRenderingContext2DSettingsオブジェクト</a>は
                                <var>paintRenderingContext2DSettings</var>。
                            </p>
                    </ul>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set"
                            id="ref-for-map-set">paintDefinitionMap</a>[<var>name</var>] に <var>definition</var> をセットする。
                    </p>
                <li data-md>
                    <p><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"
                            id="ref-for-queue-a-task">タスクをキューに追加</a>し、以下の手順を実行する:</p>
                    <ol>
                        <li data-md>
                            <p><var>documentPaintDefinitionMap</var> を関連する <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#concept-document"
                                    id="ref-for-concept-document②">document</a> の <a data-link-type="dfn"
                                    href="#document-paint-definitions" id="ref-for-document-paint-definitions">document
                                    paint definitions</a> <a data-link-type="dfn"
                                    href="https://infra.spec.whatwg.org/#ordered-map"
                                    id="ref-for-ordered-map③">マップ</a>とする。
                            </p>
                        <li data-md>
                            <p><var>documentDefinition</var> を新しい <a data-link-type="dfn"
                                    href="#document-paint-definition"
                                    id="ref-for-document-paint-definition">文書ペイント定義</a>として、以下とする:</p>
                            <ul>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="#document-paint-definition-input-properties"
                                            id="ref-for-document-paint-definition-input-properties">input properties</a>
                                        は <var>inputProperties</var>。</p>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="#document-paint-definition-input-argument-syntaxes"
                                            id="ref-for-document-paint-definition-input-argument-syntaxes">input
                                            argument syntaxes</a> は <var>inputArgumentSyntaxes</var>。</p>
                                <li data-md>
                                    <p><a data-link-type="dfn"
                                            href="#document-paint-definition-paintrenderingcontext2dsettings-object"
                                            id="ref-for-document-paint-definition-paintrenderingcontext2dsettings-object">PaintRenderingContext2DSettingsオブジェクト</a>
                                        は <var>paintRenderingContext2DSettings</var>。</p>
                            </ul>
                        <li data-md>
                            <p><var>documentPaintDefinitionMap</var>[<var>name</var>] が <a data-link-type="dfn"
                                    href="https://infra.spec.whatwg.org/#map-exists"
                                    id="ref-for-map-exists①">存在する</a>場合、以下の手順を実行:</p>
                            <ol>
                                <li data-md>
                                    <p><var>existingDocumentDefinition</var> を <a data-link-type="dfn"
                                            href="https://infra.spec.whatwg.org/#map-get" id="ref-for-map-get">get</a>
                                        <var>documentPaintDefinitionMap</var>[<var>name</var>] の結果とする。
                                    </p>
                                <li data-md>
                                    <p><var>existingDocumentDefinition</var> が <code>"invalid"</code> なら、手順を中止する。</p>
                                <li data-md>
                                    <p><var>existingDocumentDefinition</var> と <var>documentDefinition</var>
                                        が等しくない場合（すなわち <a data-link-type="dfn"
                                            href="#document-paint-definition-input-properties"
                                            id="ref-for-document-paint-definition-input-properties①">input
                                            properties</a>・<a data-link-type="dfn"
                                            href="#document-paint-definition-input-argument-syntaxes"
                                            id="ref-for-document-paint-definition-input-argument-syntaxes①">input
                                            argument syntaxes</a>・<a data-link-type="dfn"
                                            href="#document-paint-definition-paintrenderingcontext2dsettings-object"
                                            id="ref-for-document-paint-definition-paintrenderingcontext2dsettings-object①">PaintRenderingContext2DSettingsオブジェクト</a>が異なる場合）、次を実行する:
                                    </p>
                                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set"
                                            id="ref-for-map-set①">documentPaintDefinitionMap</a>[<var>name</var>] に
                                        <code>"invalid"</code> をセットする。
                                    </p>
                                    <p>同じクラスが異なる
                                        <code>inputProperties</code>・<code>inputArguments</code>・<code>paintRenderingContext2DSettings</code>
                                        で登録されたことをデバッグコンソールにエラーとして記録する。
                                    </p>
                            </ol>
                        <li data-md>
                            <p>そうでなければ <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set"
                                    id="ref-for-map-set②">documentPaintDefinitionMap</a>[<var>name</var>] に
                                <var>documentDefinition</var> をセットする。
                            </p>
                    </ol>
            </ol>
            <p class="note" role="note"><span>注:</span> input properties のリストは一度だけ取得されるべきであり、クラスが動的にinput
                propertiesを変更することはできません。</p>
            <p class="note" role="note"><span>注:</span>
                将来の仕様では、作者が異なる種類のRenderingContextを受け取れるようになる可能性があります。特に作者がWebGLレンダリングコンテキストを利用して3D効果を描画したい場合などです。WebGLコンテキストのセットアップには
                <code class="idl"><a data-link-type="idl" href="#paintsize" id="ref-for-paintsize">PaintSize</a></code>
                や <code
                    class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-typed-om-1/#stylepropertymap" id="ref-for-stylepropertymap">StylePropertyMap</a></code>
                を入力として渡すなどの複雑さがあります。
            </p>
        </div>
        <h2 class="heading settled" data-level="5" id="paint-notation"><span class="secno">5. </span><span
                class="content">ペイント記法</span><a class="self-link" href="#paint-notation"></a></h2>
        <div class="mdn-anno wrapped after">
            <button class="mdn-anno-btn"><b class="less-than-two-engines-flag"
                    title="この機能は現時点で2つ未満のエンジンで利用可能です。">⚠</b><span>MDN</span></button>
            <div class="feature">
                <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/image/paint()"
                        title="paint() CSS関数はPaintWorkletで生成された<image>値を定義します。">image/paint()</a>
                </p>
                <p class="less-than-two-engines-text">現時点で一つのエンジンのみ対応。</p>
                <div class="support">
                    <span class="firefox no"><span>Firefox</span><span>未対応</span></span><span
                        class="safari no"><span>Safari</span><span>未対応</span></span><span
                        class="chrome yes"><span>Chrome</span><span>65以上</span></span>
                    <hr>
                    <span class="opera yes"><span>Opera</span><span>52以上</span></span><span
                        class="edge_blink yes"><span>Edge</span><span>79以上</span></span>
                    <hr>
                    <span class="edge no"><span>Edge (レガシー)</span><span>未対応</span></span><span
                        class="ie no"><span>IE</span><span>未対応</span></span>
                    <hr>
                    <span class="firefox_android no"><span>Firefox for Android</span><span>未対応</span></span><span
                        class="safari_ios no"><span>iOS Safari</span><span>未対応</span></span><span
                        class="chrome_android yes"><span>Chrome for Android</span><span>65以上</span></span><span
                        class="webview_android yes"><span>Android WebView</span><span>65以上</span></span><span
                        class="samsunginternet_android yes"><span>Samsung Internet</span><span>9.2以上</span></span><span
                        class="opera_android yes"><span>Opera Mobile</span><span>47以上</span></span>
                </div>
            </div>
        </div>
        <pre class="prod"><dfn class="dfn-paneled" data-dfn-type="function" data-export id="funcdef-paint">paint()</dfn> = paint( <a class="production" data-link-type="type" href="https://www.w3.org/TR/css-values-4/#typedef-ident" id="ref-for-typedef-ident">&lt;ident></a><a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-comma" id="ref-for-comb-comma">,</a> <a class="production" data-link-type="type" href="https://www.w3.org/TR/css-syntax-3/#typedef-declaration-value" id="ref-for-typedef-declaration-value">&lt;declaration-value></a><a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#mult-opt" id="ref-for-mult-opt">?</a> )
</pre>
        <p><a class="production css" data-link-type="function" href="#funcdef-paint"
                id="ref-for-funcdef-paint②">&lt;paint()></a> 関数は <a class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-images-3/#typedef-image" id="ref-for-typedef-image④">&lt;image></a>
            型がサポートする追加の記法です。
        </p>
        <div class="example" id="example-b92885ef">
            <a class="self-link" href="#example-b92885ef"></a>
            <pre class="lang-markup highlight"><c- p>&lt;</c-><c- f>style</c-><c- p>></c->
    <c- p>.</c-><c- nc>logo</c-> <c- p>{</c-> <c- k>background-image</c-><c- p>:</c-> <c- nf>paint</c-><c- p>(</c-><c- n>company</c-><c- g>-logo</c-><c- p>);</c-> <c- p>}</c->
    <c- p>.</c-><c- nc>chat-bubble</c-> <c- p>{</c-> <c- k>background-image</c-><c- p>:</c-> <c- nf>paint</c-><c- p>(</c-><c- n>chat</c-><c- g>-bubble</c-><c- p>,</c-> <c- kc>blue</c-><c- p>);</c-> <c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->
</pre>
        </div>
        <p><a class="property" data-link-type="propdesc" href="https://www.w3.org/TR/css-ui-3/#propdef-cursor"
                id="ref-for-propdef-cursor">cursor</a> プロパティにおいて、<a class="production css" data-link-type="function"
                href="#funcdef-paint" id="ref-for-funcdef-paint③">&lt;paint()></a> 関数は <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-images-4/#invalid-image"
                id="ref-for-invalid-image">無効な画像</a>として扱われ、次のサポートされている <a class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-images-3/#typedef-image" id="ref-for-typedef-image⑤">&lt;image></a>
            にフォールバックします。</p>
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-5/#computed-value"
                id="ref-for-computed-value">computed value</a> の時点では <a class="production css" data-link-type="function"
                href="#funcdef-paint" id="ref-for-funcdef-paint④">&lt;paint()></a> 関数は <code
                class="idl"><a data-link-type="idl" href="#dom-paintworkletglobalscope-registerpaint" id="ref-for-dom-paintworkletglobalscope-registerpaint③">registerPaint()</a></code>
            で登録された文法と一致する必要は<em>ありません</em>。
            その代わり、<a data-link-type="dfn" href="https://www.w3.org/TR/css-images-4/#invalid-image"
                id="ref-for-invalid-image①">無効な画像</a>となり、
            <a data-link-type="dfn" href="#draw-a-paint-image" id="ref-for-draw-a-paint-image①">draw a paint image</a>
            内でパース時に発生します。
        </p>
        <h2 class="heading settled" data-level="6" id="2d-rendering-context"><span class="secno">6. </span><span
                class="content">2Dレンダリングコンテキスト</span><a class="self-link" href="#2d-rendering-context"></a>
        </h2>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>PaintWorklet</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="paintrenderingcontext2d"><code><c- g>PaintRenderingContext2D</c-></code></dfn> {
};
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasstate" id="ref-for-canvasstate"><c- n>CanvasState</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvastransform" id="ref-for-canvastransform"><c- n>CanvasTransform</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d②"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvascompositing" id="ref-for-canvascompositing"><c- n>CanvasCompositing</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d③"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasimagesmoothing" id="ref-for-canvasimagesmoothing"><c- n>CanvasImageSmoothing</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d④"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasfillstrokestyles" id="ref-for-canvasfillstrokestyles"><c- n>CanvasFillStrokeStyles</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d⑤"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasshadowstyles" id="ref-for-canvasshadowstyles"><c- n>CanvasShadowStyles</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d⑥"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasrect" id="ref-for-canvasrect"><c- n>CanvasRect</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d⑦"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasdrawpath" id="ref-for-canvasdrawpath"><c- n>CanvasDrawPath</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d⑧"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasdrawimage" id="ref-for-canvasdrawimage"><c- n>CanvasDrawImage</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d⑨"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvaspathdrawingstyles" id="ref-for-canvaspathdrawingstyles"><c- n>CanvasPathDrawingStyles</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①⓪"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvaspath" id="ref-for-canvaspath"><c- n>CanvasPath</c-></a>;
</pre>
        <p class="note" role="note"><span>注:</span> <code
                class="idl"><a data-link-type="idl" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①①">PaintRenderingContext2D</a></code>
            は <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasrenderingcontext2d" id="ref-for-canvasrenderingcontext2d">CanvasRenderingContext2D</a></code>
            APIのサブセットを実装します。
            具体的には <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasimagedata" id="ref-for-canvasimagedata">CanvasImageData</a></code>、
            <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasuserinterface" id="ref-for-canvasuserinterface">CanvasUserInterface</a></code>、
            <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#canvastext" id="ref-for-canvastext">CanvasText</a></code>、
            <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#canvastextdrawingstyles" id="ref-for-canvastextdrawingstyles">CanvasTextDrawingStyles</a></code>
            APIは実装されません。
        </p>
        <p><code
                class="idl"><a data-link-type="idl" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①②">PaintRenderingContext2D</a></code>
            オブジェクトは <dfn class="dfn-paneled" data-dfn-for="PaintRenderingContext2D" data-dfn-type="dfn" data-noexport
                id="paintrenderingcontext2d-output-bitmap">出力ビットマップ</dfn> を持ちます。
            これはオブジェクト作成時に初期化されます。
            <a data-link-type="dfn" href="#paintrenderingcontext2d-output-bitmap"
                id="ref-for-paintrenderingcontext2d-output-bitmap">出力ビットマップ</a>のサイズは、描画先オブジェクトの<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-images-3/#concrete-object-size"
                id="ref-for-concrete-object-size">具象オブジェクトサイズ</a>です。
        </p>
        <p><code
                class="idl"><a data-link-type="idl" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①③">PaintRenderingContext2D</a></code>
            オブジェクトは <dfn class="dfn-paneled" data-dfn-for="PaintRenderingContext2D" data-dfn-type="dfn" data-noexport
                id="paintrenderingcontext2d-alpha">alpha</dfn> フラグも持ちます。
            このフラグは true または false に設定できます。
            コンテキスト作成時は、alphaフラグはtrueに設定されます。
            <code
                class="idl"><a data-link-type="idl" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①④">PaintRenderingContext2D</a></code>
            オブジェクトのalphaフラグがfalseの場合、
            すべてのピクセルのアルファチャンネルは1.0（完全不透明）に固定され、ピクセルのアルファ成分を変更しようとしても黙って無視されます。
        </p>
        <p><a data-link-type="dfn" href="#paintrenderingcontext2d-output-bitmap"
                id="ref-for-paintrenderingcontext2d-output-bitmap①">出力ビットマップ</a>のサイズは、ユーザーエージェントが内部的または描画時に使用する実際のビットマップサイズを必ずしも表しません。例えば、視覚ビューポートがズームされている場合、ユーザーエージェントは座標空間内のデバイスピクセル数に対応するビットマップを内部で使用し、高品質な描画結果を得ることができます。
        </p>
        <p>さらにユーザーエージェントは、<a data-link-type="dfn" href="#paintrenderingcontext2d-output-bitmap"
                id="ref-for-paintrenderingcontext2d-output-bitmap②">出力ビットマップ</a>に適用された描画操作のシーケンスを記録し、正しい解像度でデバイスビットマップに描画できるようにすることがあります。これにより、例えば視覚ビューポートがズームされている間も同じ<a
                data-link-type="dfn" href="#paintrenderingcontext2d-output-bitmap"
                id="ref-for-paintrenderingcontext2d-output-bitmap③">出力ビットマップ</a>の出力を繰り返し再利用することが可能です。</p>
        <p><code>"currentColor"</code> が <code
                class="idl"><a data-link-type="idl" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①⑤">PaintRenderingContext2D</a></code>
            APIで色として使われた場合は、不透明な黒として扱われます。</p>
        <div class="example" id="example-191bbc01">
            <a class="self-link" href="#example-191bbc01"></a> 下記のコードは真っ黒な矩形を生成します。
            <pre class="lang-javascript highlight">registerPaint<c- p>(</c-><c- t>'currentcolor'</c-><c- p>,</c-> <c- a>class</c-> <c- p>{</c->
    paint<c- p>(</c->ctx<c- p>,</c-> size<c- p>)</c-> <c- p>{</c->
        ctx<c- p>.</c->fillStyle <c- o>=</c-> <c- t>'currentColor'</c-><c- p>;</c->
        ctx<c- p>.</c->fillRect<c- p>(</c-><c- mf>0</c-><c- p>,</c-> <c- mf>0</c-><c- p>,</c-> size<c- p>.</c->width<c- p>,</c-> size<c- p>.</c->height<c- p>);</c->
    <c- p>}</c->
<c- p>});</c->
</pre>
        </div>
        <div class="algorithm" data-algorithm="create a PaintRenderingContext2D object">
            ユーザーエージェントが指定された<var>width</var>、<var>height</var>、<var>paintRenderingContext2DSettings</var>で<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="create-a-paintrenderingcontext2d-object">PaintRenderingContext2Dオブジェクトを作成する</dfn>場合、次の手順を<em>実行しなければならない</em>:
            <ol>
                <li data-md>
                    <p>新しい<code
                            class="idl"><a data-link-type="idl" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①⑥">PaintRenderingContext2D</a></code>を作成する。
                    </p>
                <li data-md>
                    <p>コンテキストの<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/canvas.html#concept-canvas-set-bitmap-dimensions"
                            id="ref-for-concept-canvas-set-bitmap-dimensions">ビットマップ寸法を設定</a>し、<a data-link-type="dfn"
                            href="#paintrenderingcontext2d-output-bitmap"
                            id="ref-for-paintrenderingcontext2d-output-bitmap④">出力ビットマップ</a>のサイズを<var>width</var>と<var>height</var>の丸め値にする。
                    </p>
                <li data-md>
                    <p><code
                            class="idl"><a data-link-type="idl" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①⑦">PaintRenderingContext2D</a></code>の
                        <a data-link-type="dfn" href="#paintrenderingcontext2d-alpha"
                            id="ref-for-paintrenderingcontext2d-alpha">alpha</a>フラグを
                        <var>paintRenderingContext2DSettings</var>の<code
                            class="idl"><a data-link-type="idl" href="#dom-paintrenderingcontext2dsettings-alpha" id="ref-for-dom-paintrenderingcontext2dsettings-alpha">alpha</a></code>で設定する。
                    </p>
                <li data-md>
                    <p>新しい<code
                            class="idl"><a data-link-type="idl" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①⑧">PaintRenderingContext2D</a></code>を返す。
                    </p>
            </ol>
            <p class="note" role="note"><span>注:</span> レンダリングコンテキストの初期状態は<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/canvas.html#concept-canvas-set-bitmap-dimensions"
                    id="ref-for-concept-canvas-set-bitmap-dimensions①">set bitmap dimensions</a>アルゴリズム内部で設定され、<a
                    data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/canvas.html#reset-the-rendering-context-to-its-default-state"
                    id="ref-for-reset-the-rendering-context-to-its-default-state">レンダリングコンテキストをデフォルト状態にリセット</a>し、<a
                    data-link-type="dfn" href="#paintrenderingcontext2d-output-bitmap"
                    id="ref-for-paintrenderingcontext2d-output-bitmap⑤">出力ビットマップ</a>もクリアされます。
            </p>
        </div>
        <h3 class="heading settled" data-level="6.1" id="drawing-a-cssimagevalue"><span class="secno">6.1. </span><span
                class="content">CSSImageValueの描画</span><a class="self-link" href="#drawing-a-cssimagevalue"></a>
        </h3>
        <p><code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasimagesource" id="ref-for-canvasimagesource">CanvasImageSource</a></code>
            型は、画像ソースとして<code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-typed-om-1/#cssimagevalue" id="ref-for-cssimagevalue">CSSImageValue</a></code>
            型も利用できるように拡張されます。</p>
        <p><code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasdrawimage" id="ref-for-canvasdrawimage①">CanvasDrawImage</a></code>
            ミックスインを利用するインターフェースについて:
        </p>
        <ul>
            <li data-md>
                <p><code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasimagesource" id="ref-for-canvasimagesource①">CanvasImageSource</a></code>
                    オブジェクトが<code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-typed-om-1/#cssimagevalue" id="ref-for-cssimagevalue①">CSSImageValue</a></code>を表す場合、
                    その値の基礎画像アルゴリズムの結果が<code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#dom-context-2d-drawimage" id="ref-for-dom-context-2d-drawimage">drawImage</a></code>の画像ソースとして使用されなければなりません。
                </p>
        </ul>
        <p class="note" role="note"><span>注:</span> これは最終的にHTML仕様のcanvasセクションへ移動されるべきです。
            <a href="https://github.com/w3c/css-houdini-drafts/issues/819">Issue 819</a>も参照してください。
        </p>
        <h2 class="heading settled" data-level="7" id="drawing-an-image"><span class="secno">7. </span><span
                class="content">画像の描画</span><a class="self-link" href="#drawing-an-image"></a></h2>
        <p><a class="production css" data-link-type="function" href="#funcdef-paint"
                id="ref-for-funcdef-paint⑤">&lt;paint()></a> 関数の画像が <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-display-3/#box" id="ref-for-box">ボックス</a>内で視覚ビューポート内にある場合、ユーザーエージェントは <a
                data-link-type="dfn" href="#draw-a-paint-image" id="ref-for-draw-a-paint-image②">draw a paint image</a>
            アルゴリズムの呼び出し結果の画像を<em>表示しなければならない</em>。</p>
        <p class="note" role="note"><span>注:</span> ユーザーエージェントは、視覚ビューポート内の <a class="production css"
                data-link-type="function" href="#funcdef-paint" id="ref-for-funcdef-paint⑥">&lt;paint()></a> 関数について毎フレーム
            <a data-link-type="dfn" href="#draw-a-paint-image" id="ref-for-draw-a-paint-image③">draw a paint image</a>
            を実行する必要はありません。結果をキャッシュ（追加の無効化ステップで）して、正しい画像を表示できます。
        </p>
        <p class="note" role="note"><span>注:</span> ユーザーエージェントは視覚ビューポート外の画像描画を遅延させても構いません。</p>
        <div class="example" id="example-b382d1f5">
            <a class="self-link" href="#example-b382d1f5"></a> 例えば、作者が <code>requestAnimationFrame</code> 内でスタイルを更新する場合:
            <pre class="lang-javascript highlight">requestAnimationFrame<c- p>(</c-><c- a>function</c-><c- p>()</c-> <c- p>{</c->
    element<c- p>.</c->styleMap<c- p>.</c->set<c- p>(</c-><c- t>'--custom-prop-invalidates-paint'</c-><c- p>,</c-> <c- mf>42</c-><c- p>);</c->
<c- p>});</c->
</pre>
            <p>そして <code>element</code> が視覚ビューポート内にある場合、ユーザーエージェントは現在のフレームで <a data-link-type="dfn"
                    href="#draw-a-paint-image" id="ref-for-draw-a-paint-image④">draw a paint image</a>
                を実行し、その結果を表示しなければなりません。</p>
        </div>
        <p><a data-link-type="dfn" href="#draw-a-paint-image" id="ref-for-draw-a-paint-image⑤">draw a paint image</a>
            関数は、<a data-link-type="dfn" href="https://www.w3.org/TR/css-images-3/#object-size-negotiation"
                id="ref-for-object-size-negotiation">object size negotiation</a> アルゴリズムの間にユーザーエージェントによって呼び出されます。これは <a
                class="production css" data-link-type="type" href="https://www.w3.org/TR/css-images-3/#typedef-image"
                id="ref-for-typedef-image⑥">&lt;image></a> を描画するためのアルゴリズムです。<var>snappedConcreteObjectSize</var>
            は以下の通り定義されます。<var>concreteObjectSize</var> は <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-images-3/#concrete-object-size"
                id="ref-for-concrete-object-size①">concrete object size</a> です。通常 <var>snappedConcreteObjectSize</var> は
            <var>concreteObjectSize</var> と同じですが、ユーザーエージェントがピクセル境界に合わせてサイズ調整することがあり、その場合は元のサイズからの比率で
            <var>snappedConcreteObjectSize</var> を調整します。<a class="production css" data-link-type="function"
                href="#funcdef-paint" id="ref-for-funcdef-paint⑦">&lt;paint()></a> 関数はこのサイズ調整に応じて描画できます。
        </p>
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-images-3/#object-size-negotiation"
                id="ref-for-object-size-negotiation①">object size negotiation</a> アルゴリズムにおいて、ペイント画像は<a
                data-link-type="dfn" href="https://www.w3.org/TR/css-images-3/#natural-dimensions"
                id="ref-for-natural-dimensions">自然寸法</a>を持ちません。</p>
        <p class="note" role="note"><span>注:</span> 将来の仕様では、作者がペイント画像の<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-images-3/#natural-dimensions"
                id="ref-for-natural-dimensions①">自然寸法</a>を指定できるようになる可能性があります。これはコールバックとして静的な<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-images-3/#natural-dimensions"
                id="ref-for-natural-dimensions②">自然寸法</a>や、計算スタイルやサイズの変化に応じて動的に<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-images-3/#natural-dimensions"
                id="ref-for-natural-dimensions③">自然寸法</a>を定義できる形で公開される見込みです。</p>
        <p><code class="idl"><a data-link-type="idl" href="#paintsize" id="ref-for-paintsize①">PaintSize</a></code>
            オブジェクトは、作者が描画すべき画像のサイズを表します。これはユーザーエージェントから渡される <var>snappedConcreteObjectSize</var> です。</p>
        <p class="note" role="note"><span>注:</span> <a
                href="https://www.w3.org/TR/css-images-3/#object-sizing-examples"><cite>CSS Images 3</cite> § 4.4
                CSSオブジェクトサイズ例</a>を参照すると、<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-images-3/#concrete-object-size"
                id="ref-for-concrete-object-size②">concrete object size</a> の計算方法が分かります。</p>
        <p><a data-link-type="dfn" href="#draw-a-paint-image" id="ref-for-draw-a-paint-image⑥">draw a paint image</a>
            関数は、ユーザーエージェントによって、任意のタイミングで任意の <var>snappedConcreteObjectSize</var> で推測的に呼び出される場合があります。その結果画像は表示されません。</p>
        <p class="note" role="note"><span>注:</span> ユーザーエージェントは、<var>snappedConcreteObjectSize</var>
            の将来的な値（例えばサイズが変わらないと推測するなど）を予測するために、任意のヒューリスティックを用いることができます。</p>
        <p class="note" role="note"><span>注:</span> 画像は表示されませんが、キャッシュされる可能性があり、以降の <a class="production css"
                data-link-type="function" href="#funcdef-paint" id="ref-for-funcdef-paint⑧">&lt;paint()></a>
            の呼び出しでキャッシュ画像が使われる場合があります。</p>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed②"><c- g>Exposed</c-></a>=<c- n>PaintWorklet</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="paintsize"><code><c- g>PaintSize</c-></code></dfn> {
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double"><c- b>double</c-></a> <dfn class="idl-code" data-dfn-for="PaintSize" data-dfn-type="attribute" data-export data-readonly data-type="double" id="dom-paintsize-width"><code><c- g>width</c-></code><a class="self-link" href="#dom-paintsize-width"></a></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double①"><c- b>double</c-></a> <dfn class="idl-code" data-dfn-for="PaintSize" data-dfn-type="attribute" data-export data-readonly data-type="double" id="dom-paintsize-height"><code><c- g>height</c-></code><a class="self-link" href="#dom-paintsize-height"></a></dfn>;
};
</pre>
        <div class="algorithm" data-algorithm="draw a paint image">
            ユーザーエージェントが <a class="production css" data-link-type="function" href="#funcdef-paint"
                id="ref-for-funcdef-paint⑨">&lt;paint()></a> 関数の <var>box</var>
            に適切なスタッキングレベル（関連するCSSプロパティで定義）で画像を描画したい場合、<var>snappedConcreteObjectSize</var>を指定して以下の手順を<em>実行しなければならない</em>:
            <ol>
                <li data-md>
                    <p><var>paintFunction</var> を描画対象の <var>box</var> 上の <a class="production css"
                            data-link-type="function" href="#funcdef-paint"
                            id="ref-for-funcdef-paint①⓪">&lt;paint()></a> 関数とする。</p>
                <li data-md>
                    <p><var>name</var> を <var>paintFunction</var> の第1引数とする。</p>
                <li data-md>
                    <p><var>documentPaintDefinitionMap</var> を関連する <a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#concept-document"
                            id="ref-for-concept-document③">document</a> の <a data-link-type="dfn"
                            href="#document-paint-definitions" id="ref-for-document-paint-definitions①">document paint
                            definitions</a> マップとする。</p>
                <li data-md>
                    <p><var>documentPaintDefinitionMap</var>[<var>name</var>] が <a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②">存在しない</a>場合、画像出力は
                        <a data-link-type="dfn" href="https://www.w3.org/TR/css-images-4/#invalid-image"
                            id="ref-for-invalid-image②">無効な画像</a>とし、以降の手順を中止する。
                    </p>
                <li data-md>
                    <p><var>documentDefinition</var> を <a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#map-get" id="ref-for-map-get①">get</a>
                        <var>documentPaintDefinitionMap</var>[<var>name</var>] の結果とする。
                    </p>
                <li data-md>
                    <p><var>documentDefinition</var> が <code>"invalid"</code> の場合、画像出力は <a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-images-4/#invalid-image"
                            id="ref-for-invalid-image③">無効な画像</a>とし、以降の手順を中止する。</p>
                <li data-md>
                    <p><var>inputArgumentSyntaxes</var> を <var>documentDefinition</var> の <a data-link-type="dfn"
                            href="#document-paint-definition-input-argument-syntaxes"
                            id="ref-for-document-paint-definition-input-argument-syntaxes②">input argument syntaxes</a>
                        とする。
                    </p>
                <li data-md>
                    <p><var>inputArguments</var> を <var>paintFunction</var> の "paint name" 引数以降の全引数の <a
                            data-link-type="dfn" href="https://infra.spec.whatwg.org/#list"
                            id="ref-for-list④">リスト</a>とする。</p>
                <li data-md>
                    <p><var>inputArguments</var> が <var>inputArgumentSyntaxes</var> の登録文法と一致しない場合、画像出力は <a
                            data-link-type="dfn" href="https://www.w3.org/TR/css-images-4/#invalid-image"
                            id="ref-for-invalid-image④">無効な画像</a>とし、以降の手順を中止する。</p>
                    <div class="example" id="example-a43f39b7">
                        <a class="self-link" href="#example-a43f39b7"></a> このステップは以下のような場合に失敗します:
                        <pre class="lang-javascript highlight"><c- c1>// paint.js</c->
registerPaint<c- p>(</c-><c- t>'failing-argument-syntax'</c-><c- p>,</c-> <c- a>class</c-> <c- p>{</c->
    <c- k>static</c-> get inputArguments<c- p>()</c-> <c- p>{</c-> <c- k>return</c-> <c- p>[</c-><c- t>'&lt;length>'</c-><c- p>];</c-> <c- p>}</c->
    paint<c- p>(</c->ctx<c- p>,</c-> size<c- p>,</c-> styleMap<c- p>,</c-> args<c- p>)</c-> <c- p>{</c-> <c- d>/* paint code here. */</c-> <c- p>}</c->
<c- p>});</c->
</pre>
                        <pre class="lang-markup highlight"><c- p>&lt;</c-><c- f>style</c-><c- p>></c->
    <c- p>.</c-><c- nc>example-1</c-> <c- p>{</c->
        <c- k>background-image</c-><c- p>:</c-> <c- nf>paint</c-><c- p>(</c-><c- n>failing</c-><c- g>-argument-syntax</c-><c- p>,</c-> <c- kc>red</c-><c- p>);</c->
    <c- p>}</c->
    <c- p>.</c-><c- nc>example-2</c-> <c- p>{</c->
        <c- k>background-image</c-><c- p>:</c-> <c- nf>paint</c-><c- p>(</c-><c- n>failing</c-><c- g>-argument-syntax</c-><c- p>,</c-> <c- mi>1</c-><c- b>px</c-><c- p>,</c-> <c- mi>2</c-><c- b>px</c-><c- p>);</c->
    <c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->
<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>example-1</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>example-2</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
    CSS<c- p>.</c->paintWorklet<c- p>.</c->addModule<c- p>(</c-><c- t>'paint.js'</c-><c- p>);</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
</pre>
                        <p><code>example-1</code> は <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-images-4/#invalid-image"
                                id="ref-for-invalid-image⑤">無効な画像</a>となります。理由は <code>"red"</code> が登録文法に一致しないためです。</p>
                        <p><code>example-2</code> は <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-images-4/#invalid-image"
                                id="ref-for-invalid-image⑥">無効な画像</a>となります。理由は引数が多すぎるためです。</p>
                    </div>
                <li data-md>
                    <p><var>workletGlobalScope</var> を <code
                            class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope⑦">PaintWorkletGlobalScope</a></code>
                        のいずれかとして、<a href="#global-scope-selection">§ 7.1 グローバルスコープ選択</a>の規則に従う。</p>
                    <p>ユーザーエージェントはこの時点で <code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet" id="ref-for-worklet④">Worklet</a></code>
                        から <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/worklets.html#create-a-worklet-global-scope"
                            id="ref-for-create-a-worklet-global-scope">worklet global scope を作成</a>してもよい。</p>
                <li data-md>
                    <p><a data-link-type="dfn" href="#invoke-a-paint-callback"
                            id="ref-for-invoke-a-paint-callback">invoke a paint callback</a> を
                        <var>name</var>、<var>inputArguments</var>、<var>snappedConcreteObjectSize</var>、<var>workletGlobalScope</var>
                        で実行、必要なら <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                            id="ref-for-in-parallel">並列</a>で。
                    </p>
                    <p class="note" role="note"><span>注:</span> ユーザーエージェントが <a data-link-type="dfn"
                            href="#invoke-a-paint-callback" id="ref-for-invoke-a-paint-callback①">invoke a paint
                            callback</a> をスレッドで並列実行する場合、そのスレッドで使えるペイントワークレットグローバルスコープを選択するべきです。</p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="invoke a paint callback">
            ユーザーエージェントが <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="invoke-a-paint-callback">paint
                callback
                を呼び出す</dfn>場合、<var>name</var>、<var>inputArguments</var>、<var>snappedConcreteObjectSize</var>、<var>workletGlobalScope</var>
            を使い、以下の手順を<em>実行しなければならない</em>:
            <ol>
                <li data-md>
                    <p><var>paintDefinitionMap</var> を <var>workletGlobalScope</var> の <a data-link-type="dfn"
                            href="#paint-definitions" id="ref-for-paint-definitions①">paint definitions</a> マップとする。</p>
                <li data-md>
                    <p><var>paintDefinitionMap</var>[<var>name</var>] が <a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#map-exists"
                            id="ref-for-map-exists③">存在しない</a>場合は、次の手順を実行:</p>
                    <ol>
                        <li data-md>
                            <p><a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"
                                    id="ref-for-queue-a-task①">タスクをキューに追加</a>し、次の手順を実行:</p>
                            <ol>
                                <li data-md>
                                    <p><var>documentPaintDefinitionMap</var> を関連する <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#concept-document"
                                            id="ref-for-concept-document④">document</a> の <a data-link-type="dfn"
                                            href="#document-paint-definitions"
                                            id="ref-for-document-paint-definitions②">document paint definitions</a>
                                        マップとする。</p>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set"
                                            id="ref-for-map-set③">documentPaintDefinitionMap</a>[<var>name</var>] に
                                        <code>"invalid"</code> をセットする。
                                    </p>
                                <li data-md>
                                    <p>ユーザーエージェントは、全 <code
                                            class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope⑧">PaintWorkletGlobalScope</a></code>
                                        でクラスが登録されていない旨をデバッグコンソールにエラーとして<em>記録するべき</em>。</p>
                            </ol>
                        <li data-md>
                            <p>画像出力は <a data-link-type="dfn" href="https://www.w3.org/TR/css-images-4/#invalid-image"
                                    id="ref-for-invalid-image⑦">無効な画像</a>とし、以降の手順を中止する。</p>
                    </ol>
                    <p class="note" role="note"><span>注:</span> これは、あるペイントワークレットグローバルスコープが <code
                            class="idl"><a data-link-type="idl" href="#dom-paintworkletglobalscope-registerpaint" id="ref-for-dom-paintworkletglobalscope-registerpaint④">registerPaint(name, paintCtor)</a></code>
                        を受け取らなかった場合を扱います（他のグローバルスコープが受け取った場合も）。他のグローバルスコープでペイントコールバックが成功しても、以降のフレームで <a
                            data-link-type="dfn" href="#draw-a-paint-image" id="ref-for-draw-a-paint-image⑦">draw a
                            paint image</a> が呼ばれると成功しません。</p>
                <li data-md>
                    <p><var>definition</var> を <a data-link-type="dfn"
                            href="https://tc39.github.io/ecma262/#sec-get-o-p" id="ref-for-sec-get-o-p⑤">get</a>
                        <var>paintDefinitionMap</var>[<var>name</var>] の結果とする。
                    </p>
                <li data-md>
                    <p><var>paintClassInstanceMap</var> を <var>workletGlobalScope</var> の <a data-link-type="dfn"
                            href="#paint-class-instances" id="ref-for-paint-class-instances①">paint class instances</a>
                        マップとする。</p>
                <li data-md>
                    <p><var>paintInstance</var> を <a data-link-type="dfn"
                            href="https://tc39.github.io/ecma262/#sec-get-o-p" id="ref-for-sec-get-o-p⑥">get</a>
                        <var>paintClassInstanceMap</var>[|name|] の結果とする。<var>paintInstance</var> が null の場合は次の手順を実行:
                    </p>
                    <ol>
                        <li data-md>
                            <p><var>definition</var> の <a data-link-type="dfn"
                                    href="#paint-definition-constructor-valid-flag"
                                    id="ref-for-paint-definition-constructor-valid-flag①">constructor valid flag</a> が
                                false の場合、画像出力は <a data-link-type="dfn"
                                    href="https://www.w3.org/TR/css-images-4/#invalid-image"
                                    id="ref-for-invalid-image⑧">無効な画像</a>とし、以降の手順を中止する。</p>
                        <li data-md>
                            <p><var>paintCtor</var> を <var>definition</var> の <a data-link-type="dfn"
                                    href="#paint-definition-class-constructor"
                                    id="ref-for-paint-definition-class-constructor①">class constructor</a> とする。</p>
                        <li data-md>
                            <p><var>paintInstance</var> を <a data-link-type="dfn"
                                    href="https://tc39.github.io/ecma262/#sec-construct"
                                    id="ref-for-sec-construct">Construct</a>(<var>paintCtor</var>) の結果とする。</p>
                            <p>もし <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-construct"
                                    id="ref-for-sec-construct①">construct</a> が例外を投げた場合は、<var>definition</var> の <a
                                    data-link-type="dfn" href="#paint-definition-constructor-valid-flag"
                                    id="ref-for-paint-definition-constructor-valid-flag②">constructor valid flag</a> を
                                false にし、画像出力は <a data-link-type="dfn"
                                    href="https://www.w3.org/TR/css-images-4/#invalid-image"
                                    id="ref-for-invalid-image⑨">無効な画像</a>とし、以降の手順を中止する。</p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set"
                                    id="ref-for-map-set④">paintClassInstanceMap</a>[<var>name</var>] に
                                <var>paintInstance</var> をセットする。
                            </p>
                    </ol>
                <li data-md>
                    <p><var>inputProperties</var> を <var>definition</var> の <a data-link-type="dfn"
                            href="#paint-definition-input-properties"
                            id="ref-for-paint-definition-input-properties①">input properties</a> とする。</p>
                <li data-md>
                    <p><var>styleMap</var> を <code
                            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-typed-om-1/#stylepropertymapreadonly" id="ref-for-stylepropertymapreadonly">StylePropertyMapReadOnly</a></code>
                        の新規インスタンスとして、<var>inputProperties</var> に列挙されるプロパティの <a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-cascade-5/#computed-value"
                            id="ref-for-computed-value①">computed value</a> のみを設定する。</p>
                <li data-md>
                    <p><var>renderingContext</var> を <a data-link-type="dfn"
                            href="#create-a-paintrenderingcontext2d-object"
                            id="ref-for-create-a-paintrenderingcontext2d-object">create a PaintRenderingContext2D
                            object</a> で次を渡して生成する:
                    </p>
                    <ul>
                        <li data-md>
                            <p>"width" - <var>snappedConcreteObjectSize</var> の幅。</p>
                        <li data-md>
                            <p>"height" - <var>snappedConcreteObjectSize</var> の高さ。</p>
                        <li data-md>
                            <p>"paintRenderingContext2DSettings" - <var>definition</var> の <a data-link-type="dfn"
                                    href="#paint-definition-paintrenderingcontext2dsettings-object"
                                    id="ref-for-paint-definition-paintrenderingcontext2dsettings-object①">PaintRenderingContext2DSettings
                                    オブジェクト</a>。</p>
                    </ul>
                    <p class="note" role="note"><span>注:</span> <var>renderingContext</var>
                        はペイントの呼び出し間で再利用されません。つまり、呼び出し間で <var>renderingContext</var>
                        に格納されたデータや状態はありません。例えば、コンテキストにクリップを設定しても、次回のペイントメソッド実行時に同じクリップは適用されません。</p>
                    <p class="note" role="note"><span>注:</span> また、ペイントメソッド終了後は <var>renderingContext</var>
                        は実質的に「無効化」されます。作者コードが <var>renderingContext</var> を参照してメソッドを呼び出しても、現在の画像や以降の画像には影響しません。</p>
                <li data-md>
                    <p><var>paintSize</var> を <code
                            class="idl"><a data-link-type="idl" href="#paintsize" id="ref-for-paintsize②">PaintSize</a></code>
                        の新規インスタンスとして <var>snappedConcreteObjectSize</var> の幅・高さで初期化する。</p>
                <li data-md>
                    <p>この段階で、ユーザーエージェントは <var>paintSize</var>、<var>styleMap</var>、<var>inputArguments</var>
                        が前回と同じなら以前の呼び出しの画像を再利用してもよい。その場合は画像出力をキャッシュ画像とし、以降の手順を中止する。</p>
                    <div class="note" role="note">
                        下記の例では、<code>div-1</code> と <code>div-2</code>
                        はペイント関数のJavaScript引数が同じです。ユーザーエージェントは一方の呼び出し結果をキャッシュし、両方の要素で利用できます。
                        <pre class="lang-javascript highlight"><c- c1>// paint.js</c->
registerPaint<c- p>(</c-><c- t>'simple'</c-><c- p>,</c-> <c- a>class</c-> <c- p>{</c->
    paint<c- p>(</c->ctx<c- p>,</c-> size<c- p>)</c-> <c- p>{</c->
        ctx<c- p>.</c->fillStyle <c- o>=</c-> <c- t>'green'</c-><c- p>;</c->
        ctx<c- p>.</c->fillRect<c- p>(</c-><c- mf>0</c-><c- p>,</c-> <c- mf>0</c-><c- p>,</c-> size<c- p>.</c->width<c- p>,</c-> size<c- p>.</c->height<c- p>);</c->
    <c- p>}</c->
<c- p>});</c->
</pre>
                        <pre class="lang-markup highlight"><c- p>&lt;</c-><c- f>style</c-><c- p>></c->
    <c- p>.</c-><c- nc>div-1</c-> <c- p>{</c->
        <c- k>width</c-><c- p>:</c-> <c- mi>50</c-><c- b>px</c-><c- p>;</c->
        <c- k>height</c-><c- p>:</c-> <c- mi>50</c-><c- b>px</c-><c- p>;</c->
        <c- k>background-image</c-><c- p>:</c-> <c- nf>paint</c-><c- p>(</c-><c- n>simple</c-><c- p>);</c->
    <c- p>}</c->
    <c- p>.</c-><c- nc>div-2</c-> <c- p>{</c->
        <c- k>width</c-><c- p>:</c-> <c- mi>100</c-><c- b>px</c-><c- p>;</c->
        <c- k>height</c-><c- p>:</c-> <c- mi>100</c-><c- b>px</c-><c- p>;</c->

        <c- k>background-size</c-><c- p>:</c-> <c- mi>50</c-><c- b>%</c-> <c- mi>50</c-><c- b>%</c-><c- p>;</c->
        <c- k>background-image</c-><c- p>:</c-> <c- nf>paint</c-><c- p>(</c-><c- n>simple</c-><c- p>);</c->
    <c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->
<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>div-1</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>div-2</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
    CSS<c- p>.</c->paintWorklet<c- p>.</c->addModule<c- p>(</c-><c- t>'paint.js'</c-><c- p>);</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
</pre>
                    </div>
                <li data-md>
                    <p><var>paintFunctionCallback</var> を <var>definition</var> の <a data-link-type="dfn"
                            href="#paint-definition-paint-function" id="ref-for-paint-definition-paint-function①">paint
                            function</a> とする。</p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                            id="ref-for-invoke-a-callback-function">Invoke</a> <var>paintFunctionCallback</var> を引数
                        «<var>renderingContext</var>, <var>paintSize</var>, <var>styleMap</var>,
                        <var>inputArguments</var>» で、<var>paintInstance</var> を <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#dfn-callback-this-value"
                            id="ref-for-dfn-callback-this-value">callback this value</a> として呼び出す。
                    </p>
                    <p>もし <var>paintFunctionCallback</var>
                        が適切な時間内に完了しない場合（ユーザーエージェントが「長時間実行スクリプト」と判断）、ユーザーエージェントはスクリプトを<em>強制終了してもよい</em>。画像出力は <a
                            data-link-type="dfn" href="https://www.w3.org/TR/css-images-4/#invalid-image"
                            id="ref-for-invalid-image①⓪">無効な画像</a>とし、以降の手順を中止する。</p>
                    <p class="note" role="note"><span>注:</span>
                        ユーザーエージェントは、デバッグツールで作者にペイントクラスのコストを可視化したり、「応答しないスクリプト」ダイアログを表示するなどのツールを提供できます。</p>
                <li data-md>
                    <p>画像出力はメソッドに渡された <var>renderingContext</var> から生成する。</p>
                    <p>もし例外が <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                            id="ref-for-dfn-throw⑦">throw</a> された場合、画像出力は <a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-images-4/#invalid-image"
                            id="ref-for-invalid-image①①">無効な画像</a>とする。</p>
            </ol>
            <p class="note" role="note"><span>注:</span> 生成画像の内容はアクセシビリティ目的には設計されていません。作者は必要な情報を標準アクセシビリティAPIで提供してください。
            </p>
        </div>
        <h3 class="heading settled" data-level="7.1" id="global-scope-selection"><span class="secno">7.1. </span><span
                class="content">グローバルスコープの選択</span><a class="self-link" href="#global-scope-selection"></a>
        </h3>
        <p>ユーザーエージェントが paint <code
                class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope⑨">PaintWorkletGlobalScope</a></code>
            を paint <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet" id="ref-for-worklet⑤">Worklet</a></code>
            の
            <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-global-scopes"
                id="ref-for-concept-worklet-global-scopes①">global scopes</a> <a data-link-type="dfn"
                href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑤">リスト</a>から選択する必要がある場合、<em>次を満たす必要がある</em>:
        </p>
        <ul>
            <li data-md>
                <p>ユーザーエージェントがメモリ制約下でない限り、<em>最低でも</em>2つ以上の <code
                        class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope①⓪">PaintWorkletGlobalScope</a></code>
                    から選択する。</p>
            <li data-md>
                <p>同じ <code
                        class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope①①">PaintWorkletGlobalScope</a></code>
                    を1000回以上連続して再利用<em>しない</em>。</p>
                <p class="note" role="note"><span>注:</span> 1000回という上限は高めに設定されていますが、今後この制限は（下方向に）改善される可能性があります。</p>
        </ul>
        <p class="note" role="note"><span>注:</span> これらの規則は、作者がグローバルオブジェクトやクラス上に状態を保存できることに依存しないようにするために存在します。詳細は <a
                href="https://html.spec.whatwg.org/multipage/worklets.html#worklets-idempotent">worklets仕様のコードの冪等性についての議論</a>を参照してください。
        </p>
        <h2 class="heading settled" data-level="8" id="examples"><span class="secno">8. </span><span
                class="content">例</span><a class="self-link" href="#examples"></a></h2>
        <h3 class="heading settled" data-level="8.1" id="example-1"><span class="secno">8.1. </span><span
                class="content">例1: 色付き円</span><a class="self-link" href="#example-1"></a></h3>
        <p>下記の例では <a class="production css" data-link-type="function" href="#funcdef-paint"
                id="ref-for-funcdef-paint①①">&lt;paint()></a> 関数がアニメーション可能であることを利用しています。
            例えば、下記の例で textarea にフォーカスすると <code>--circle-color</code> プロパティが <code>deepskyblue</code> から
            <code>purple</code> へと遷移します。
        </p>
        <p>この機能はトランジションだけでなく、CSSアニメーションやWeb Animations APIにも適用できます。</p>
        <pre class="lang-markup highlight"><c- cp>&lt;!DOCTYPE html></c->
<c- p>&lt;</c-><c- f>style</c-><c- p>></c->
    <c- p>#</c-><c- nn>example</c-> <c- p>{</c->
    <c- g>--circle-color</c-><c- p>:</c-> <c- kc>deepskyblue</c-><c- p>;</c->

    <c- k>background-image</c-><c- p>:</c-> <c- nf>paint</c-><c- p>(</c-><c- kc>circle</c-><c- p>);</c->
    <c- k>font-family</c-><c- p>:</c-> <c- kc>sans-serif</c-><c- p>;</c->
    <c- k>font-size</c-><c- p>:</c-> <c- mi>36</c-><c- b>px</c-><c- p>;</c->
    <c- k>transition</c-><c- p>:</c-> <c- o>--</c-><c- kc>circle</c-><c- o>-</c-><c- kc>color</c-> <c- mi>1</c-><c- b>s</c-><c- p>;</c->
    <c- p>}</c->

    <c- p>#</c-><c- nn>example</c-><c- p>:</c-><c- nd>focus</c-> <c- p>{</c->
    <c- g>--circle-color</c-><c- p>:</c-> <c- kc>purple</c-><c- p>;</c->
    <c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->

<c- p>&lt;</c-><c- f>textarea</c-> <c- e>id</c-><c- o>=</c-><c- s>"example"</c-><c- p>></c->
    CSS is awesome.
<c- p>&lt;/</c-><c- f>textarea</c-><c- p>></c->

<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
    CSS<c- p>.</c->registerProperty<c- p>({</c->
        name<c- o>:</c-> <c- t>'--circle-color'</c-><c- p>,</c->
        syntax<c- o>:</c-> <c- t>'&lt;color>'</c-><c- p>,</c->
        initialValue<c- o>:</c-> <c- t>'black'</c-><c- p>,</c->
        inherits<c- o>:</c-> <c- kc>false</c->
    <c- p>});</c->
    CSS<c- p>.</c->paintWorklet<c- p>.</c->addModule<c- p>(</c-><c- t>'circle.js'</c-><c- p>);</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
</pre>
        <pre class="lang-javascript highlight"><c- c1>// circle.js</c->
registerPaint<c- p>(</c-><c- t>'circle'</c-><c- p>,</c-> <c- a>class</c-> <c- p>{</c->
    <c- k>static</c-> get inputProperties<c- p>()</c-> <c- p>{</c-> <c- k>return</c-> <c- p>[</c-><c- t>'--circle-color'</c-><c- p>];</c-> <c- p>}</c->
    paint<c- p>(</c->ctx<c- p>,</c-> geom<c- p>,</c-> properties<c- p>)</c-> <c- p>{</c->
    <c- c1>// 塗りつぶし色を変更</c->
    <c- a>const</c-> color <c- o>=</c-> properties<c- p>.</c->get<c- p>(</c-><c- t>'--circle-color'</c-><c- p>);</c->
    ctx<c- p>.</c->fillStyle <c- o>=</c-> color<c- p>.</c->cssText<c- p>;</c->

    <c- c1>// 中心点と半径を決定</c->
    <c- a>const</c-> x <c- o>=</c-> geom<c- p>.</c->width <c- o>/</c-> <c- mf>2</c-><c- p>;</c->
    <c- a>const</c-> y <c- o>=</c-> geom<c- p>.</c->height <c- o>/</c-> <c- mf>2</c-><c- p>;</c->
    <c- a>const</c-> radius <c- o>=</c-> Math<c- p>.</c->min<c- p>(</c->x<c- p>,</c-> y<c- p>);</c->

    <c- c1>// 円を描画</c->
    ctx<c- p>.</c->beginPath<c- p>();</c->
    ctx<c- p>.</c->arc<c- p>(</c->x<c- p>,</c-> y<c- p>,</c-> radius<c- p>,</c-> <c- mf>0</c-><c- p>,</c-> <c- mf>2</c-> <c- o>*</c-> Math<c- p>.</c->PI<c- p>,</c-> <c- kc>false</c-><c- p>);</c->
    ctx<c- p>.</c->fill<c- p>();</c->
    <c- p>}</c->
<c- p>});</c->
</pre>
        <h3 class="heading settled" data-level="8.2" id="example-2"><span class="secno">8.2. </span><span
                class="content">例2: 画像プレースホルダー</span><a class="self-link" href="#example-2"></a></h3>
        <p>画像が読み込み中の間、paintを使ってプレースホルダー画像を描画することができます。</p>
        <pre class="lang-markup highlight"><c- cp>&lt;!DOCTYPE html></c->
<c- p>&lt;</c-><c- f>style</c-><c- p>></c->
<c- p>#</c-><c- nn>example</c-> <c- p>{</c->
    <c- g>--image</c-><c- p>:</c-> url<c- p>(</c-><c- t>'#someUrlWhichIsLoading'</c-><c- p>);</c->
    <c- k>background-image</c-><c- p>:</c-> <c- nf>paint</c-><c- p>(</c-><c- n>image</c-><c- g>-with-placeholder</c-><c- p>);</c->
<c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->

<c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>"example"</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->

<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
    CSS<c- p>.</c->registerProperty<c- p>({</c->
        name<c- o>:</c-> <c- t>'--image'</c-><c- p>,</c->
        syntax<c- o>:</c-> <c- t>'&lt;image> | none'</c-><c- p>,</c->
        initialValue<c- o>:</c-> <c- t>'none'</c-><c- p>,</c->
    <c- p>});</c->
    CSS<c- p>.</c->paintWorklet<c- p>.</c->addModule<c- p>(</c-><c- t>'image-placeholder.js'</c-><c- p>);</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
</pre>
        <pre class="lang-javascript highlight"><c- c1>// image-placeholder.js</c->
registerPaint<c- p>(</c-><c- t>'image-with-placeholder'</c-><c- p>,</c-> <c- a>class</c-> <c- p>{</c->
    <c- k>static</c-> get inputProperties<c- p>()</c-> <c- p>{</c-> <c- k>return</c-> <c- p>[</c-><c- t>'--image'</c-><c- p>];</c-> <c- p>}</c->
    paint<c- p>(</c->ctx<c- p>,</c-> geom<c- p>,</c-> properties<c- p>)</c-> <c- p>{</c->
        <c- a>const</c-> img <c- o>=</c-> properties<c- p>.</c->get<c- p>(</c-><c- t>'--image'</c-><c- p>);</c->

        <c- k>switch</c-> <c- p>(</c->img<c- p>.</c->state<c- p>)</c-> <c- p>{</c->
            <c- k>case</c-> <c- t>'ready'</c-><c- o>:</c->
                <c- c1>// 画像が読み込まれた！画像を描画</c->
                ctx<c- p>.</c->drawImage<c- p>(</c->img<c- p>,</c-> <c- mf>0</c-><c- p>,</c-> <c- mf>0</c-><c- p>,</c-> geom<c- p>.</c->width<c- p>,</c-> geom<c- p>.</c->height<c- p>);</c->
                <c- k>break</c-><c- p>;</c->
            <c- k>case</c-> <c- t>'pending'</c-><c- o>:</c->
                <c- c1>// 画像が読み込み中、山のイラストを描画</c->
                drawMountains<c- p>(</c->ctx<c- p>);</c->
                <c- k>break</c-><c- p>;</c->
            <c- k>case</c-> <c- t>'invalid'</c-><c- o>:</c->
            <c- k>default</c-><c- o>:</c->
                <c- c1>// 画像が無効（例: 読み込み失敗）、悲しい顔を描画</c->
                drawSadFace<c- p>(</c->ctx<c- p>);</c->
                <c- k>break</c-><c- p>;</c->
        <c- p>}</c->
    <c- p>}</c->
<c- p>});</c->
</pre>
        <h3 class="heading settled" data-level="8.3" id="example-3"><span class="secno">8.3. </span><span
                class="content">例3: 弧（アーク）</span><a class="self-link" href="#example-3"></a></h3>
        <pre class="lang-markup highlight"><c- cp>&lt;!DOCTYPE html></c->
<c- p>&lt;</c-><c- f>style</c-><c- p>></c->
<c- p>#</c-><c- nn>example</c-> <c- p>{</c->
    <c- k>width</c-><c- p>:</c-> <c- mi>200</c-><c- b>px</c-><c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <c- mi>200</c-><c- b>px</c-><c- p>;</c->

    <c- k>background-image</c-><c- p>:</c->
    <c- nf>paint</c-><c- p>(</c-><c- n>arc</c-><c- p>,</c-> <c- kc>purple</c-><c- p>,</c-> <c- mf>0.4</c-><c- b>turn</c-><c- p>,</c-> <c- mf>0.8</c-><c- b>turn</c-><c- p>,</c-> <c- mi>40</c-><c- b>px</c-><c- p>,</c-> <c- mi>15</c-><c- b>px</c-><c- p>),</c->
    <c- nf>paint</c-><c- p>(</c-><c- n>arc</c-><c- p>,</c-> <c- kc>blue</c-><c- p>,</c-> <c- g>-20deg</c-><c- p>,</c-> <c- mi>170</c-><c- b>deg</c-><c- p>,</c-> <c- mi>30</c-><c- b>px</c-><c- p>,</c-> <c- mi>20</c-><c- b>px</c-><c- p>),</c->
    <c- nf>paint</c-><c- p>(</c-><c- n>arc</c-><c- p>,</c-> <c- kc>red</c-><c- p>,</c-> <c- mi>45</c-><c- b>deg</c-><c- p>,</c-> <c- mi>220</c-><c- b>deg</c-><c- p>,</c-> <c- mi>50</c-><c- b>px</c-><c- p>,</c-> <c- mi>10</c-><c- b>px</c-><c- p>);</c->
<c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->

<c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>"example"</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->

<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
    CSS<c- p>.</c->paintWorklet<c- p>.</c->addModule<c- p>(</c-><c- t>'arc.js'</c-><c- p>);</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
</pre>
        <pre class="lang-javascript highlight"><c- c1>// arc.js</c->
registerPaint<c- p>(</c-><c- t>'arc'</c-><c- p>,</c-> <c- a>class</c-> <c- p>{</c->
    <c- k>static</c-> get inputArguments<c- p>()</c-> <c- p>{</c->
    <c- k>return</c-> <c- p>[</c->
        <c- t>'&lt;color>'</c-><c- p>,</c->
        <c- t>'&lt;angle>'</c-><c- p>,</c->  <c- c1>// 開始角度</c->
        <c- t>'&lt;angle>'</c-><c- p>,</c->  <c- c1>// 終了角度</c->
        <c- t>'&lt;length>'</c-><c- p>,</c-> <c- c1>// 半径</c->
        <c- t>'&lt;length>'</c-><c- p>,</c-> <c- c1>// 線幅</c->
    <c- p>];</c->
    <c- p>}</c->

    paint<c- p>(</c->ctx<c- p>,</c-> geom<c- p>,</c-> _<c- p>,</c-> args<c- p>)</c-> <c- p>{</c->
    ctx<c- p>.</c->strokeStyle <c- o>=</c-> args<c- p>[</c-><c- mf>0</c-><c- p>].</c->cssText<c- p>;</c->

    <c- c1>// 中心点を決定</c->
    <c- a>const</c-> x <c- o>=</c-> geom<c- p>.</c->width <c- o>/</c-> <c- mf>2</c-><c- p>;</c->
    <c- a>const</c-> y <c- o>=</c-> geom<c- p>.</c->height <c- o>/</c-> <c- mf>2</c-><c- p>;</c->

    <c- c1>// 開始角度・終了角度をラジアンに変換</c->
    <c- a>const</c-> startAngle <c- o>=</c-> <c- k>this</c-><c- p>.</c->convertAngle<c- p>(</c->args<c- p>[</c-><c- mf>1</c-><c- p>])</c-> <c- o>-</c-> Math<c- p>.</c->PI <c- o>/</c-> <c- mf>2</c-><c- p>;</c->
    <c- a>const</c-> endAngle <c- o>=</c-> <c- k>this</c-><c- p>.</c->convertAngle<c- p>(</c->args<c- p>[</c-><c- mf>2</c-><c- p>])</c-> <c- o>-</c-> Math<c- p>.</c->PI <c- o>/</c-> <c- mf>2</c-><c- p>;</c->

    <c- c1>// 半径・線幅をpxに変換</c->
    <c- a>const</c-> radius <c- o>=</c-> <c- k>this</c-><c- p>.</c->convertLength<c- p>(</c->args<c- p>[</c-><c- mf>3</c-><c- p>]);</c->
    <c- a>const</c-> lineWidth <c- o>=</c-> <c- k>this</c-><c- p>.</c->convertLength<c- p>(</c->args<c- p>[</c-><c- mf>4</c-><c- p>]);</c->

    ctx<c- p>.</c->lineWidth <c- o>=</c-> lineWidth<c- p>;</c->

    ctx<c- p>.</c->beginPath<c- p>();</c->
    ctx<c- p>.</c->arc<c- p>(</c->x<c- p>,</c-> y<c- p>,</c-> radius<c- p>,</c-> startAngle<c- p>,</c-> endAngle<c- p>,</c-> <c- kc>false</c-><c- p>);</c->
    ctx<c- p>.</c->stroke<c- p>();</c->
    <c- p>}</c->

    convertAngle<c- p>(</c->angle<c- p>)</c-> <c- p>{</c->
    <c- k>switch</c-> <c- p>(</c->angle<c- p>.</c->unit<c- p>)</c-> <c- p>{</c->
        <c- k>case</c-> <c- t>'deg'</c-><c- o>:</c->
        <c- k>return</c-> angle<c- p>.</c->value <c- o>*</c-> Math<c- p>.</c->PI <c- o>/</c-> <c- mf>180</c-><c- p>;</c->
        <c- k>case</c-> <c- t>'rad'</c-><c- o>:</c->
        <c- k>return</c-> angle<c- p>.</c->value<c- p>;</c->
        <c- k>case</c-> <c- t>'grad'</c-><c- o>:</c->
        <c- k>return</c-> angle<c- p>.</c->value <c- o>*</c-> Math<c- p>.</c->PI <c- o>/</c-> <c- mf>200</c-><c- p>;</c->
        <c- k>case</c-> <c- t>'turn'</c-><c- o>:</c->
        <c- k>return</c-> angle<c- p>.</c->value <c- o>*</c-> Math<c- p>.</c->PI <c- o>/</c-> <c- mf>0.5</c-><c- p>;</c->
        <c- k>default</c-><c- o>:</c->
        <c- k>throw</c-> Error<c- p>(</c-><c- sb>`未知の角度単位: </c-><c- si>${</c->angle<c- p>.</c->unit<c- si>}</c-><c- sb>`</c-><c- p>);</c->
    <c- p>}</c->
    <c- p>}</c->

    convertLength<c- p>(</c->length<c- p>)</c-> <c- p>{</c->
    <c- k>switch</c-> <c- p>(</c->length<c- p>.</c->type<c- p>)</c-> <c- p>{</c->
        <c- k>case</c-> <c- t>'px'</c-><c- o>:</c->
        <c- k>return</c-> length<c- p>.</c->value<c- p>;</c->
        <c- k>default</c-><c- o>:</c->
        <c- k>throw</c-> Error<c- p>(</c-><c- sb>`未知の長さタイプ: </c-><c- si>${</c->length<c- p>.</c->type<c- si>}</c-><c- sb>`</c-><c- p>);</c->
    <c- p>}</c->
    <c- p>}</c->
<c- p>});</c->
</pre>
        <h3 class="heading settled" data-level="8.4" id="example-4"><span class="secno">8.4. </span><span
                class="content">例4: サイズに応じた色の違い</span><a class="self-link" href="#example-4"></a></h3>
        <pre class="lang-markup highlight"><c- p>&lt;</c-><c- f>h1</c-><c- p>></c->
    Heading 1
<c- p>&lt;/</c-><c- f>h1</c-><c- p>></c->
<c- p>&lt;</c-><c- f>h1</c-><c- p>></c->
    Another heading
<c- p>&lt;/</c-><c- f>h1</c-><c- p>></c->

<c- p>&lt;</c-><c- f>style</c-><c- p>></c->
<c- f>h1</c-> <c- p>{</c->
    <c- k>background-image</c-><c- p>:</c-> <c- nf>paint</c-><c- p>(</c-><c- n>heading</c-><c- g>-color</c-><c- p>);</c->
<c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->

<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
    CSS<c- p>.</c->paintWorklet<c- p>.</c->addModule<c- p>(</c-><c- t>'heading-color.js'</c-><c- p>);</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
</pre>
        <pre class="lang-javascript highlight"><c- c1>// heading-color.js</c->
registerPaint<c- p>(</c-><c- t>'heading-color'</c-><c- p>,</c-> <c- a>class</c-> <c- p>{</c->
    <c- k>static</c-> get inputProperties<c- p>()</c-> <c- p>{</c-> <c- k>return</c-> <c- p>[];</c-> <c- p>}</c->
    paint<c- p>(</c->ctx<c- p>,</c-> geom<c- p>,</c-> properties<c- p>)</c-> <c- p>{</c->
        <c- c1>// 画像の幅・高さに応じて色を選択</c->
        <c- a>const</c-> width <c- o>=</c-> geom<c- p>.</c->width<c- p>;</c->
        <c- a>const</c-> height <c- o>=</c-> geom<c- p>.</c->height<c- p>;</c->
        <c- a>const</c-> color <c- o>=</c-> colorArray<c- p>[(</c->width <c- o>*</c-> height<c- p>)</c-> <c- o>%</c-> colorArray<c- p>.</c->length<c- p>];</c->

        <c- c1>// 単色で塗りつぶし</c->
        ctx<c- p>.</c->fillStyle <c- o>=</c-> color<c- p>;</c->
        ctx<c- p>.</c->fillRect<c- p>(</c-><c- mf>0</c-><c- p>,</c-> <c- mf>0</c-><c- p>,</c-> width<c- p>,</c-> height<c- p>);</c->
    <c- p>}</c->
<c- p>});</c->
</pre>
        <h3 class="heading settled" data-level="8.5" id="example-5"><span class="secno">8.5. </span><span
                class="content">例5: 要素領域外への描画</span><a class="self-link" href="#example-5"></a></h3>
        <p><a class="property" data-link-type="propdesc"
                href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-image"
                id="ref-for-propdef-border-image">border-image</a> プロパティを使うことで、要素の領域外にも描画することが可能です。</p>
        <pre class="lang-markup highlight"><c- p>&lt;</c-><c- f>style</c-><c- p>></c->
<c- p>#</c-><c- nn>overdraw</c-> <c- p>{</c->
    <c- g>--border-width</c-><c- p>:</c-> <c- mi>10</c-><c- p>;</c->

    <c- k>border-style</c-><c- p>:</c-> <c- kc>solid</c-><c- p>;</c->
    <c- k>border-width</c-><c- p>:</c-> calc<c- p>(</c-><c- nf>var</c-><c- p>(</c-><c- g>--border-width</c-><c- p>)</c-> <c- o>*</c-> <c- mi>1</c-><c- b>px</c-><c- p>);</c->

    <c- k>border-image-source</c-><c- p>:</c-> <c- nf>paint</c-><c- p>(</c-><c- n>overdraw</c-><c- p>);</c->
    <c- k>border-image-slice</c-><c- p>:</c-> <c- mi>0</c-> <c- kc>fill</c-><c- p>;</c->
    <c- k>border-image-outset</c-><c- p>:</c-> calc<c- p>(</c-><c- nf>var</c-><c- p>(</c-><c- g>--border-width</c-><c- p>)</c-> <c- o>*</c-> <c- mi>1</c-><c- b>px</c-><c- p>);</c->

    <c- k>width</c-><c- p>:</c-> <c- mi>200</c-><c- b>px</c-><c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <c- mi>200</c-><c- b>px</c-><c- p>;</c->
<c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->
<c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>"overdraw"</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
    CSS<c- p>.</c->paintWorklet<c- p>.</c->addModule<c- p>(</c-><c- t>'overdraw.js'</c-><c- p>);</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
</pre>
        <pre class="lang-javascript highlight"><c- c1>// overdraw.js</c->
registerPaint<c- p>(</c-><c- t>'overdraw'</c-><c- p>,</c-> <c- a>class</c-> <c- p>{</c->
    <c- k>static</c-> get inputProperties<c- p>()</c-> <c- p>{</c-> <c- k>return</c-> <c- p>[</c-><c- t>'--border-width'</c-><c- p>];</c-> <c- p>}</c->
    paint<c- p>(</c->ctx<c- p>,</c-> geom<c- p>,</c-> properties<c- p>)</c-> <c- p>{</c->
        <c- a>const</c-> borderWidth <c- o>=</c-> parseInt<c- p>(</c->properties<c- p>.</c->get<c- p>(</c-><c- t>'--border-width'</c-><c- p>));</c->
        ctx<c- p>.</c->shadowColor <c- o>=</c-> <c- t>'rgba(0,0,0,0.25)'</c-><c- p>;</c->
        ctx<c- p>.</c->shadowBlur <c- o>=</c-> borderWidth<c- p>;</c->

        ctx<c- p>.</c->fillStyle <c- o>=</c-> <c- t>'rgba(255, 255, 255, 1)'</c-><c- p>;</c->
        ctx<c- p>.</c->fillRect<c- p>(</c->borderWidth<c- p>,</c->
                     borderWidth<c- p>,</c->
                     geom<c- p>.</c->width <c- o>-</c-> <c- mf>2</c-> <c- o>*</c-> borderWidth<c- p>,</c->
                     geom<c- p>.</c->height <c- o>-</c-> <c- mf>2</c-> <c- o>*</c-> borderWidth<c- p>);</c->
    <c- p>}</c->
<c- p>});</c->
</pre>
        <h2 class="heading settled" data-level="9" id="security-considerations"><span class="secno">9. </span><span
                class="content">セキュリティに関する考慮事項</span><a class="self-link" href="#security-considerations"></a>
        </h2>
        <p>これらの機能によって新たなセキュリティ問題は知られていません。</p>
        <h2 class="heading settled" data-level="10" id="privacy-considerations"><span class="secno">10. </span><span
                class="content">プライバシーに関する考慮事項</span><a class="self-link" href="#privacy-considerations"></a>
        </h2>
        <ul>
            <li data-md>
                <p>ペイントコールバックのタイミングは、リンクが「訪問済み」状態かどうかを検出するための高帯域チャネルとして利用できます。
                    (<a href="https://github.com/w3c/css-houdini-drafts/issues/791">詳細</a>)
                    これは本質的に新しいプライバシー漏洩ではなく、
                    訪問済み状態は多くのインタラクションから漏洩しますが、
                    他の緩和策がない場合、
                    これは特に情報の高帯域チャネルとなります。</p>
                <p>現時点では公式な緩和策は計画されていません。
                    このプライバシー漏洩は、すべてのそのようなチャネルを修正するために
                    より直接的に対処する必要があります。</p>
        </ul>
        <h2 class="heading settled" data-level="11" id="changes"><span class="secno">11. </span><span
                class="content">変更点</span><a class="self-link" href="#changes"></a></h2>
        <p><a href="https://www.w3.org/TR/2018/CR-css-paint-api-1-20180809/">2018年8月9日 CR公開</a>以降の変更点：</p>
        <ul>
            <li data-md>
                <p>ペイントワークレットへの入力プロパティのリストを既知またはカスタムプロパティのみになるように絞り込みました。</p>
            <li data-md>
                <p><code
                        class="idl"><a data-link-type="idl" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①⑨">PaintRenderingContext2D</a></code>
                    にアルファフラグを追加し、レンダリングサーフェスが強制的に不透明になるか、透過を許可するかを制御できるようにしました。</p>
            <li data-md>
                <p>出力ビットマップのサイズ定義を修正：</p>
                <blockquote>
                    <p>
                        出力ビットマップのサイズは
                        <ins>レンダリング先オブジェクトの具体的なオブジェクトサイズ</ins>
                        <del>レンダリングしているフラグメントのサイズ</del>
                        です。
                    </p>
                </blockquote>
        </ul>
    </main>
    <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content"> 適合性</span><a class="self-link"
            href="#w3c-conformance"></a></h2>
    <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content"> 文書の規約</span><a class="self-link"
            href="#w3c-conventions"></a></h3>
    <p>適合性要件は、記述的な断定とRFC 2119の用語の組み合わせで表現されます。「MUST」、
        「MUST NOT」、「REQUIRED」、「SHALL」、「SHALL NOT」、「SHOULD」、「SHOULD NOT」、
        「RECOMMENDED」、「MAY」、「OPTIONAL」というキーワードは、
        本仕様の規範的部分においてRFC 2119で説明されている通りに解釈されます。
        ただし、可読性のため、これらの語句は本仕様ではすべて大文字では記載されていません。 </p>
    <p>本仕様のテキストは、非規範的と明示されたセクション、例、および注記を除き、すべて規範的です。 <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a>
    </p>
    <p>本仕様における例は「例えば」で始まるか、<code>class="example"</code>として規範的テキストから区別されます。例えば：</p>
    <div class="example" id="example-ae2b6bc0">
        <a class="self-link" href="#example-ae2b6bc0"></a>
        <p>これは有益な例の一例です。</p>
    </div>
    <p>情報提供的な注記は「注」と始まり、<code>class="note"</code>として規範的テキストから区別されます。例えば：</p>
    <p class="note" role="note">注：これは情報提供的な注記です。</p>
    <p>助言事項は規範的セクションであり、特別な注意を促すために他の規範的テキストと区別され、<code>&lt;strong class="advisement"></code>として示されます。例えば：<strong
            class="advisement"> UAはアクセシブルな代替手段を提供しなければならない。</strong> </p>
    <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content"> 適合クラス</span><a
            class="self-link" href="#w3c-conformance-classes"></a></h3>
    <p>本仕様への適合性は、3つの適合クラスについて定義されます：</p>
    <dl>
        <dt>スタイルシート
        <dd><a href="https://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
                スタイルシート</a>。
        <dt>レンダラー
        <dd><a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>で、スタイルシートの意味を解釈し、
            それらを使用した文書をレンダリングします。
        <dt>オーサリングツール
        <dd><a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>で、スタイルシートを作成します。
    </dl>
    <p>スタイルシートが本仕様に適合するためには、
        本モジュールで定義された構文を使用するすべての文が、汎用CSS文法および本モジュールで定義された各機能の個別文法に従って
        有効である必要があります。 </p>
    <p>レンダラーが本仕様に適合するためには、
        スタイルシートを適切な仕様で定義された通りに解釈することに加えて、
        本仕様で定義されるすべての機能を正しく解析し、
        文書をそれに従ってレンダリングできる必要があります。ただし、UAがデバイスの制限により文書を正しくレンダリングできない場合でも、
        UAは非適合とみなされません。（例えば、UAはモノクロモニター上で色をレンダリングする必要はありません。） </p>
    <p>オーサリングツールが本仕様に適合するためには、
        本モジュールの汎用CSS文法および各機能の個別文法に従って構文的に正しいスタイルシートを書き、
        本モジュールで記載されているスタイルシートの他の適合要件も満たす必要があります。 </p>
    <h3 class="no-ref heading settled" id="w3c-partial"><span class="content"> 部分的な実装</span><a class="self-link"
            href="#w3c-partial"></a></h3>
    <p>著者が将来互換性のある構文解析ルールを活用して
        フォールバック値を指定できるように、CSSレンダラーは<strong>必ず</strong>、利用可能なサポートレベルがない
        atルール、プロパティ、プロパティ値、キーワード、その他の構文構成要素を無効（<a
            href="https://www.w3.org/TR/CSS21/conform.html#ignore">適切に無視</a>）として扱う必要があります。特に、ユーザーエージェントは<strong>決して</strong>、
        サポートされていないコンポーネント値を選択的に無視し、単一の複数値プロパティ宣言でサポートされる値のみを認めてはなりません。値のいずれかが無効とみなされた場合
        （サポートされない値は必ず無効とみなされます）、CSSでは宣言全体が無視されます。</p>
    <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content"> 不安定・独自機能の実装</span><a
            class="self-link" href="#w3c-conform-future-proofing"></a></h4>
    <p>将来の安定したCSS機能と競合しないように、
        CSSWGは<a href="https://www.w3.org/TR/CSS/#future-proofing">ベストプラクティスの遵守</a>を推奨しています。
        <a href="https://www.w3.org/TR/CSS/#unstable">不安定な</a>機能や
        <a href="https://www.w3.org/TR/CSS/#proprietary-extension">独自拡張</a>の実装に関して。
    </p>
    <h3 class="no-ref heading settled" id="w3c-testing"><span class="content"> 非実験的な実装</span><a class="self-link"
            href="#w3c-testing"></a></h3>
    <p>仕様がCandidate Recommendation段階に到達すると、
        非実験的な実装が可能となり、実装者は仕様どおり正しく実装できているCRレベルの機能について
        プレフィックスなしでリリースするべきです。 </p>
    <p>CSSの相互運用性を実装間で確立・維持するため、
        CSSワーキンググループは非実験的なCSSレンダラーが実装レポート（必要に応じてその実装レポートで使用したテストケースも）
        をW3Cに提出することを要請しています。W3Cに提出されたテストケースはCSSワーキンググループによるレビューおよび修正の対象となります。 </p>
    <p>テストケースや実装レポートの提出に関する詳細は、
        CSSワーキンググループのウェブサイト <a href="https://www.w3.org/Style/CSS/Test/">https://www.w3.org/Style/CSS/Test/</a>
        で確認できます。質問は <a href="https://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>
        メーリングリストへお問い合わせください。</p>
    <h3 class="no-ref heading settled" id="w3c-cr-exit-criteria"><span class="content"> CR終了基準</span><a
            class="self-link" href="#w3c-cr-exit-criteria"></a></h3>
    <p>本仕様をProposed Recommendationへ進めるには、
        各機能について少なくとも2つの独立した相互運用可能な実装が必要です。各機能は異なる製品群によって実装されてもよく、
        すべての機能が単一製品で実装される必要はありません。この基準のため、以下の用語を定義します：</p>
    <dl>
        <dt>独立
        <dd>各実装は異なる当事者によって開発され、他の適格な実装で使用されたコードを共有、再利用、派生してはなりません。
            本仕様の実装に影響しないコード部分はこの要件の対象外です。
        <dt>相互運用可能
        <dd>公式CSSテストスイートの該当テストケースに合格すること、
            あるいは実装がWebブラウザでない場合は同等のテストに合格すること。テストスイートの各関連テストには同等のテストが作成されるべきであり、
            そのようなUAで相互運用性を主張する場合は、同様にその同等テストを合格できる追加のUAが一つ以上必要です。これらの同等テストはピアレビューのために公開されなければなりません。
        <dt>実装
        <dd>
            ユーザーエージェントであり、以下を満たします：
            <ol class="inline">
                <li>仕様を実装していること。
                <li>一般公開されていること。実装は製品版、またはその他の公開版（ベータ版、プレビューリリース、「ナイトリービルド」など）でもよい。
                    製品未リリース版の場合は、少なくとも1ヶ月間該当機能を実装して安定性を示している必要があります。
                <li>実験的ではないこと（すなわち、テストスイート合格のためだけに設計されたバージョンで、今後通常利用される予定がないものではない）。
            </ol>
    </dl>
    <p>仕様は少なくとも6ヶ月間Candidate Recommendationとして維持されます。</p>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本仕様で定義される用語</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li>
            alpha
            <ul>
                <li><a href="#paintrenderingcontext2d-alpha">PaintRenderingContext2Dの定義</a><span>、§ 6</span>
                <li><a
                        href="#dom-paintrenderingcontext2dsettings-alpha">PaintRenderingContext2DSettingsのdict-member</a><span>、§ 2</span>
            </ul>
        <li><a href="#paint-definition-class-constructor">クラスコンストラクター</a><span>、§ 3</span>
        <li><a href="#paint-definition-constructor-valid-flag">コンストラクター有効フラグ</a><span>、§ 3</span>
        <li><a href="#create-a-paintrenderingcontext2d-object">PaintRenderingContext2Dオブジェクトの作成</a><span>、§ 6</span>
        <li><a href="#dom-paintworkletglobalscope-devicepixelratio">devicePixelRatio</a><span>、§ 2</span>
        <li><a href="#document-paint-definition">文書ペイント定義</a><span>、§ 3</span>
        <li><a href="#document-paint-definitions">文書ペイント定義群</a><span>、§ 4</span>
        <li><a href="#draw-a-paint-image">ペイント画像の描画</a><span>、§ 7</span>
        <li><a href="#dom-paintsize-height">height</a><span>、§ 7</span>
        <li><a href="#document-paint-definition-input-argument-syntaxes">入力引数構文</a><span>、§ 3</span>
        <li>
            input properties
            <ul>
                <li><a href="#document-paint-definition-input-properties">文書ペイント定義の定義</a><span>、§ 3</span>
                <li><a href="#paint-definition-input-properties">ペイント定義の定義</a><span>、§ 3</span>
            </ul>
        <li><a href="#invoke-a-paint-callback">ペイントコールバックの呼び出し</a><span>、§ 7</span>
        <li><a href="#paintrenderingcontext2d-output-bitmap">出力ビットマップ</a><span>、§ 6</span>
        <li><a href="#funcdef-paint">paint()</a><span>、§ 5</span>
        <li><a href="#paint-class-instances">paintクラスインスタンス</a><span>、§ 4</span>
        <li><a href="#paint-definition">ペイント定義</a><span>、§ 3</span>
        <li><a href="#paint-definitions">ペイント定義群</a><span>、§ 4</span>
        <li><a href="#paint-definition-paint-function">paint関数</a><span>、§ 3</span>
        <li><a href="#paintrenderingcontext2d">PaintRenderingContext2D</a><span>、§ 6</span>
        <li><a href="#dictdef-paintrenderingcontext2dsettings">PaintRenderingContext2DSettings</a><span>、§ 2</span>
        <li>
            PaintRenderingContext2DSettingsオブジェクト
            <ul>
                <li><a
                        href="#document-paint-definition-paintrenderingcontext2dsettings-object">文書ペイント定義の定義</a><span>、§ 3</span>
                <li><a href="#paint-definition-paintrenderingcontext2dsettings-object">ペイント定義の定義</a><span>、§ 3</span>
            </ul>
        <li><a href="#paintsize">PaintSize</a><span>、§ 7</span>
        <li><a href="#dom-css-paintworklet">paintWorklet</a><span>、§ 2</span>
        <li><a href="#paintworkletglobalscope">PaintWorkletGlobalScope</a><span>、§ 2</span>
        <li><a href="#dom-paintworkletglobalscope-registerpaint">registerPaint(name, paintCtor)</a><span>、§ 4</span>
        <li><a href="#dom-paintsize-width">width</a><span>、§ 7</span>
    </ul>
    <aside class="dfn-panel" data-for="term-for-propdef-border-image">
        <a
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-image">https://www.w3.org/TR/css-backgrounds-3/#propdef-border-image</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-image">8.5. Example 5: Drawing outside an element’s area</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-computed-value">
        <a
            href="https://www.w3.org/TR/css-cascade-5/#computed-value">https://www.w3.org/TR/css-cascade-5/#computed-value</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-computed-value">5. Paint Notation</a>
            <li><a href="#ref-for-computed-value①">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-box">
        <a href="https://www.w3.org/TR/css-display-3/#box">https://www.w3.org/TR/css-display-3/#box</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-box">7. Drawing an image</a> <a href="#ref-for-box①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-typedef-image">
        <a
            href="https://www.w3.org/TR/css-images-3/#typedef-image">https://www.w3.org/TR/css-images-3/#typedef-image</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-image">Unnumbered Section</a>
            <li><a href="#ref-for-typedef-image①">1. Introduction</a>
            <li><a href="#ref-for-typedef-image②">3. Concepts</a> <a href="#ref-for-typedef-image③">(2)</a>
            <li><a href="#ref-for-typedef-image④">5. Paint Notation</a> <a href="#ref-for-typedef-image⑤">(2)</a>
            <li><a href="#ref-for-typedef-image⑥">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concrete-object-size">
        <a
            href="https://www.w3.org/TR/css-images-3/#concrete-object-size">https://www.w3.org/TR/css-images-3/#concrete-object-size</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concrete-object-size">6. The 2D rendering context</a>
            <li><a href="#ref-for-concrete-object-size①">7. Drawing an image</a> <a
                    href="#ref-for-concrete-object-size②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-natural-dimensions">
        <a
            href="https://www.w3.org/TR/css-images-3/#natural-dimensions">https://www.w3.org/TR/css-images-3/#natural-dimensions</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-natural-dimensions">7. Drawing an image</a> <a
                    href="#ref-for-natural-dimensions①">(2)</a> <a href="#ref-for-natural-dimensions②">(3)</a> <a
                    href="#ref-for-natural-dimensions③">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-object-size-negotiation">
        <a
            href="https://www.w3.org/TR/css-images-3/#object-size-negotiation">https://www.w3.org/TR/css-images-3/#object-size-negotiation</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-object-size-negotiation">7. Drawing an image</a> <a
                    href="#ref-for-object-size-negotiation①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-invalid-image">
        <a
            href="https://www.w3.org/TR/css-images-4/#invalid-image">https://www.w3.org/TR/css-images-4/#invalid-image</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-invalid-image">5. Paint Notation</a> <a href="#ref-for-invalid-image①">(2)</a>
            <li><a href="#ref-for-invalid-image②">7. Drawing an image</a> <a href="#ref-for-invalid-image③">(2)</a> <a
                    href="#ref-for-invalid-image④">(3)</a> <a href="#ref-for-invalid-image⑤">(4)</a> <a
                    href="#ref-for-invalid-image⑥">(5)</a> <a href="#ref-for-invalid-image⑦">(6)</a> <a
                    href="#ref-for-invalid-image⑧">(7)</a> <a href="#ref-for-invalid-image⑨">(8)</a> <a
                    href="#ref-for-invalid-image①⓪">(9)</a> <a href="#ref-for-invalid-image①①">(10)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-consume-a-syntax-definition">
        <a
            href="https://www.w3.org/TR/css-properties-values-api-1/#consume-a-syntax-definition">https://www.w3.org/TR/css-properties-values-api-1/#consume-a-syntax-definition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-consume-a-syntax-definition">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-syntax-definition">
        <a
            href="https://www.w3.org/TR/css-properties-values-api-1/#syntax-definition">https://www.w3.org/TR/css-properties-values-api-1/#syntax-definition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-syntax-definition">3. Concepts</a>
            <li><a href="#ref-for-syntax-definition①">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-typedef-declaration-value">
        <a
            href="https://www.w3.org/TR/css-syntax-3/#typedef-declaration-value">https://www.w3.org/TR/css-syntax-3/#typedef-declaration-value</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-declaration-value">5. Paint Notation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-function">
        <a href="https://www.w3.org/TR/css-syntax-3/#function">https://www.w3.org/TR/css-syntax-3/#function</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-function">3. Concepts</a>
            <li><a href="#ref-for-function①">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-cssimagevalue">
        <a
            href="https://www.w3.org/TR/css-typed-om-1/#cssimagevalue">https://www.w3.org/TR/css-typed-om-1/#cssimagevalue</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-cssimagevalue">6.1. Drawing a CSSImageValue</a> <a
                    href="#ref-for-cssimagevalue①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-stylepropertymap">
        <a
            href="https://www.w3.org/TR/css-typed-om-1/#stylepropertymap">https://www.w3.org/TR/css-typed-om-1/#stylepropertymap</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-stylepropertymap">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-stylepropertymapreadonly">
        <a
            href="https://www.w3.org/TR/css-typed-om-1/#stylepropertymapreadonly">https://www.w3.org/TR/css-typed-om-1/#stylepropertymapreadonly</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-stylepropertymapreadonly">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-cursor">
        <a href="https://www.w3.org/TR/css-ui-3/#propdef-cursor">https://www.w3.org/TR/css-ui-3/#propdef-cursor</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-cursor">5. Paint Notation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-comb-comma">
        <a href="https://www.w3.org/TR/css-values-4/#comb-comma">https://www.w3.org/TR/css-values-4/#comb-comma</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-comb-comma">5. Paint Notation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-typedef-ident">
        <a
            href="https://www.w3.org/TR/css-values-4/#typedef-ident">https://www.w3.org/TR/css-values-4/#typedef-ident</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-ident">5. Paint Notation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-mult-opt">
        <a href="https://www.w3.org/TR/css-values-4/#mult-opt">https://www.w3.org/TR/css-values-4/#mult-opt</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-mult-opt">5. Paint Notation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-custom-property">
        <a
            href="https://www.w3.org/TR/css-variables-1/#custom-property">https://www.w3.org/TR/css-variables-1/#custom-property</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-custom-property">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-namespacedef-css">
        <a href="https://www.w3.org/TR/cssom-1/#namespacedef-css">https://www.w3.org/TR/cssom-1/#namespacedef-css</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-namespacedef-css">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-supported-css-property">
        <a
            href="https://www.w3.org/TR/cssom-1/#supported-css-property">https://www.w3.org/TR/cssom-1/#supported-css-property</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-supported-css-property">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-window-devicepixelratio">
        <a
            href="https://www.w3.org/TR/cssom-view/#dom-window-devicepixelratio">https://www.w3.org/TR/cssom-view/#dom-window-devicepixelratio</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-window-devicepixelratio">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-document">
        <a href="https://dom.spec.whatwg.org/#concept-document">https://dom.spec.whatwg.org/#concept-document</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-document">3. Concepts</a>
            <li><a href="#ref-for-concept-document①">4. Registering Custom Paint</a> <a
                    href="#ref-for-concept-document②">(2)</a>
            <li><a href="#ref-for-concept-document③">7. Drawing an image</a> <a
                    href="#ref-for-concept-document④">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvascompositing">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvascompositing">https://html.spec.whatwg.org/multipage/canvas.html#canvascompositing</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvascompositing">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasdrawimage">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasdrawimage">https://html.spec.whatwg.org/multipage/canvas.html#canvasdrawimage</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasdrawimage">6. The 2D rendering context</a>
            <li><a href="#ref-for-canvasdrawimage①">6.1. Drawing a CSSImageValue</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasdrawpath">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasdrawpath">https://html.spec.whatwg.org/multipage/canvas.html#canvasdrawpath</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasdrawpath">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasfillstrokestyles">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasfillstrokestyles">https://html.spec.whatwg.org/multipage/canvas.html#canvasfillstrokestyles</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasfillstrokestyles">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasimagedata">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasimagedata">https://html.spec.whatwg.org/multipage/canvas.html#canvasimagedata</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasimagedata">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasimagesmoothing">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasimagesmoothing">https://html.spec.whatwg.org/multipage/canvas.html#canvasimagesmoothing</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasimagesmoothing">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasimagesource">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasimagesource">https://html.spec.whatwg.org/multipage/canvas.html#canvasimagesource</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasimagesource">6.1. Drawing a CSSImageValue</a> <a
                    href="#ref-for-canvasimagesource①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvaspath">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvaspath">https://html.spec.whatwg.org/multipage/canvas.html#canvaspath</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvaspath">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvaspathdrawingstyles">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvaspathdrawingstyles">https://html.spec.whatwg.org/multipage/canvas.html#canvaspathdrawingstyles</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvaspathdrawingstyles">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasrect">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasrect">https://html.spec.whatwg.org/multipage/canvas.html#canvasrect</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasrect">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasrenderingcontext2d">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasrenderingcontext2d">https://html.spec.whatwg.org/multipage/canvas.html#canvasrenderingcontext2d</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasrenderingcontext2d">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasshadowstyles">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasshadowstyles">https://html.spec.whatwg.org/multipage/canvas.html#canvasshadowstyles</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasshadowstyles">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasstate">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasstate">https://html.spec.whatwg.org/multipage/canvas.html#canvasstate</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasstate">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvastext">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvastext">https://html.spec.whatwg.org/multipage/canvas.html#canvastext</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvastext">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvastextdrawingstyles">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvastextdrawingstyles">https://html.spec.whatwg.org/multipage/canvas.html#canvastextdrawingstyles</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvastextdrawingstyles">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvastransform">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvastransform">https://html.spec.whatwg.org/multipage/canvas.html#canvastransform</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvastransform">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasuserinterface">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasuserinterface">https://html.spec.whatwg.org/multipage/canvas.html#canvasuserinterface</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasuserinterface">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-worklet">
        <a
            href="https://html.spec.whatwg.org/multipage/worklets.html#worklet">https://html.spec.whatwg.org/multipage/worklets.html#worklet</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-worklet">2. Paint Worklet</a> <a href="#ref-for-worklet①">(2)</a> <a
                    href="#ref-for-worklet②">(3)</a>
            <li><a href="#ref-for-worklet③">7. Drawing an image</a> <a href="#ref-for-worklet④">(2)</a>
            <li><a href="#ref-for-worklet⑤">7.1. Global Scope Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-workletglobalscope">
        <a
            href="https://html.spec.whatwg.org/multipage/worklets.html#workletglobalscope">https://html.spec.whatwg.org/multipage/worklets.html#workletglobalscope</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-workletglobalscope">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-create-a-worklet-global-scope">
        <a
            href="https://html.spec.whatwg.org/multipage/worklets.html#create-a-worklet-global-scope">https://html.spec.whatwg.org/multipage/worklets.html#create-a-worklet-global-scope</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-create-a-worklet-global-scope">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-context-2d-drawimage">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#dom-context-2d-drawimage">https://html.spec.whatwg.org/multipage/canvas.html#dom-context-2d-drawimage</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-context-2d-drawimage">6.1. Drawing a CSSImageValue</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-worklet-global-scopes">
        <a
            href="https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-global-scopes">https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-global-scopes</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-worklet-global-scopes">7. Drawing an image</a>
            <li><a href="#ref-for-concept-worklet-global-scopes①">7.1. Global Scope Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-in-parallel">
        <a
            href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-in-parallel">7. Drawing an image</a> <a href="#ref-for-in-parallel①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-queue-a-task">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-queue-a-task">4. Registering Custom Paint</a>
            <li><a href="#ref-for-queue-a-task①">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-reset-the-rendering-context-to-its-default-state">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#reset-the-rendering-context-to-its-default-state">https://html.spec.whatwg.org/multipage/canvas.html#reset-the-rendering-context-to-its-default-state</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-reset-the-rendering-context-to-its-default-state">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-canvas-set-bitmap-dimensions">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#concept-canvas-set-bitmap-dimensions">https://html.spec.whatwg.org/multipage/canvas.html#concept-canvas-set-bitmap-dimensions</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-canvas-set-bitmap-dimensions">6. The 2D rendering context</a> <a
                    href="#ref-for-concept-canvas-set-bitmap-dimensions①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-worklet-destination-type">
        <a
            href="https://html.spec.whatwg.org/multipage/worklets.html#worklet-destination-type">https://html.spec.whatwg.org/multipage/worklets.html#worklet-destination-type</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-worklet-destination-type">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-worklet-global-scope-type">
        <a
            href="https://html.spec.whatwg.org/multipage/worklets.html#worklet-global-scope-type">https://html.spec.whatwg.org/multipage/worklets.html#worklet-global-scope-type</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-worklet-global-scope-type">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-append">
        <a href="https://infra.spec.whatwg.org/#list-append">https://infra.spec.whatwg.org/#list-append</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-append">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-empty">
        <a href="https://infra.spec.whatwg.org/#list-empty">https://infra.spec.whatwg.org/#list-empty</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-empty">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-map-exists">
        <a href="https://infra.spec.whatwg.org/#map-exists">https://infra.spec.whatwg.org/#map-exists</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-map-exists">4. Registering Custom Paint</a> <a href="#ref-for-map-exists①">(2)</a>
            <li><a href="#ref-for-map-exists②">7. Drawing an image</a> <a href="#ref-for-map-exists③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-iterate">
        <a href="https://infra.spec.whatwg.org/#list-iterate">https://infra.spec.whatwg.org/#list-iterate</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-iterate">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-map-get">
        <a href="https://infra.spec.whatwg.org/#map-get">https://infra.spec.whatwg.org/#map-get</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-map-get">4. Registering Custom Paint</a>
            <li><a href="#ref-for-map-get①">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list">
        <a href="https://infra.spec.whatwg.org/#list">https://infra.spec.whatwg.org/#list</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-list">3. Concepts</a> <a href="#ref-for-list①">(2)</a> <a
                    href="#ref-for-list②">(3)</a>
            <li><a href="#ref-for-list③">4. Registering Custom Paint</a>
            <li><a href="#ref-for-list④">7. Drawing an image</a>
            <li><a href="#ref-for-list⑤">7.1. Global Scope Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-ordered-map">
        <a href="https://infra.spec.whatwg.org/#ordered-map">https://infra.spec.whatwg.org/#ordered-map</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-ordered-map">4. Registering Custom Paint</a> <a href="#ref-for-ordered-map①">(2)</a>
                <a href="#ref-for-ordered-map②">(3)</a> <a href="#ref-for-ordered-map③">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-map-set">
        <a href="https://infra.spec.whatwg.org/#map-set">https://infra.spec.whatwg.org/#map-set</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-map-set">4. Registering Custom Paint</a> <a href="#ref-for-map-set①">(2)</a> <a
                    href="#ref-for-map-set②">(3)</a>
            <li><a href="#ref-for-map-set③">7. Drawing an image</a> <a href="#ref-for-map-set④">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-struct">
        <a href="https://infra.spec.whatwg.org/#struct">https://infra.spec.whatwg.org/#struct</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-struct">3. Concepts</a> <a href="#ref-for-struct①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-DOMException">
        <a
            href="https://webidl.spec.whatwg.org/#idl-DOMException">https://webidl.spec.whatwg.org/#idl-DOMException</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-DOMException">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-DOMString">
        <a href="https://webidl.spec.whatwg.org/#idl-DOMString">https://webidl.spec.whatwg.org/#idl-DOMString</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-DOMString">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-Exposed">
        <a href="https://webidl.spec.whatwg.org/#Exposed">https://webidl.spec.whatwg.org/#Exposed</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-Exposed">2. Paint Worklet</a>
            <li><a href="#ref-for-Exposed①">6. The 2D rendering context</a>
            <li><a href="#ref-for-Exposed②">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-Global">
        <a href="https://webidl.spec.whatwg.org/#Global">https://webidl.spec.whatwg.org/#Global</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-Global">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-invalidmodificationerror">
        <a
            href="https://webidl.spec.whatwg.org/#invalidmodificationerror">https://webidl.spec.whatwg.org/#invalidmodificationerror</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-invalidmodificationerror">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-SameObject">
        <a href="https://webidl.spec.whatwg.org/#SameObject">https://webidl.spec.whatwg.org/#SameObject</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-SameObject">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-VoidFunction">
        <a href="https://webidl.spec.whatwg.org/#VoidFunction">https://webidl.spec.whatwg.org/#VoidFunction</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-VoidFunction">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-boolean">
        <a href="https://webidl.spec.whatwg.org/#idl-boolean">https://webidl.spec.whatwg.org/#idl-boolean</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-boolean">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-callback-function">
        <a
            href="https://webidl.spec.whatwg.org/#dfn-callback-function">https://webidl.spec.whatwg.org/#dfn-callback-function</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-callback-function">3. Concepts</a>
            <li><a href="#ref-for-dfn-callback-function①">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-callback-this-value">
        <a
            href="https://webidl.spec.whatwg.org/#dfn-callback-this-value">https://webidl.spec.whatwg.org/#dfn-callback-this-value</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-callback-this-value">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-web-idl-arguments-list-converting">
        <a
            href="https://webidl.spec.whatwg.org/#web-idl-arguments-list-converting">https://webidl.spec.whatwg.org/#web-idl-arguments-list-converting</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-web-idl-arguments-list-converting">4. Registering Custom Paint</a> <a
                    href="#ref-for-web-idl-arguments-list-converting①">(2)</a> <a
                    href="#ref-for-web-idl-arguments-list-converting②">(3)</a> <a
                    href="#ref-for-web-idl-arguments-list-converting③">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-double">
        <a href="https://webidl.spec.whatwg.org/#idl-double">https://webidl.spec.whatwg.org/#idl-double</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-double">7. Drawing an image</a> <a href="#ref-for-idl-double①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-invoke-a-callback-function">
        <a
            href="https://webidl.spec.whatwg.org/#invoke-a-callback-function">https://webidl.spec.whatwg.org/#invoke-a-callback-function</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-invoke-a-callback-function">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-throw">
        <a href="https://webidl.spec.whatwg.org/#dfn-throw">https://webidl.spec.whatwg.org/#dfn-throw</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-throw">4. Registering Custom Paint</a> <a href="#ref-for-dfn-throw①">(2)</a> <a
                    href="#ref-for-dfn-throw②">(3)</a> <a href="#ref-for-dfn-throw③">(4)</a> <a
                    href="#ref-for-dfn-throw④">(5)</a> <a href="#ref-for-dfn-throw⑤">(6)</a> <a
                    href="#ref-for-dfn-throw⑥">(7)</a>
            <li><a href="#ref-for-dfn-throw⑦">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-undefined">
        <a href="https://webidl.spec.whatwg.org/#idl-undefined">https://webidl.spec.whatwg.org/#idl-undefined</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-undefined">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-unrestricted-double">
        <a
            href="https://webidl.spec.whatwg.org/#idl-unrestricted-double">https://webidl.spec.whatwg.org/#idl-unrestricted-double</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-unrestricted-double">2. Paint Worklet</a>
        </ul>
    </aside>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">参照で定義される用語</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[css-backgrounds-3]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-border-image">border-image</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-cascade-5]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="term-for-computed-value">computed value</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-display-3]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="term-for-box">box</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-images-3]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="term-for-typedef-image">&lt;image></span>
                <li><span class="dfn-paneled" id="term-for-concrete-object-size">concrete object size</span>
                <li><span class="dfn-paneled" id="term-for-natural-dimensions">natural dimension</span>
                <li><span class="dfn-paneled" id="term-for-object-size-negotiation">object size negotiation</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-images-4]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="term-for-invalid-image">invalid image</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-properties-values-api-1]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="term-for-consume-a-syntax-definition">consume a syntax
                        definition</span>
                <li><span class="dfn-paneled" id="term-for-syntax-definition">syntax definition</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-syntax-3]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="term-for-typedef-declaration-value">&lt;declaration-value></span>
                <li><span class="dfn-paneled" id="term-for-function">function</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-typed-om-1]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="term-for-cssimagevalue">CSSImageValue</span>
                <li><span class="dfn-paneled" id="term-for-stylepropertymap">StylePropertyMap</span>
                <li><span class="dfn-paneled" id="term-for-stylepropertymapreadonly">StylePropertyMapReadOnly</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-ui-3]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-cursor">cursor</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-values-4]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="term-for-comb-comma">,</span>
                <li><span class="dfn-paneled" id="term-for-typedef-ident">&lt;ident></span>
                <li><span class="dfn-paneled" id="term-for-mult-opt">?</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-variables-1]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="term-for-custom-property">custom property</span>
            </ul>
        <li>
            <a data-link-type="biblio">[cssom-1]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="term-for-namespacedef-css">CSS</span>
                <li><span class="dfn-paneled" id="term-for-supported-css-property">supported css property</span>
            </ul>
        <li>
            <a data-link-type="biblio">[cssom-view-1]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="term-for-dom-window-devicepixelratio">devicePixelRatio</span>
            </ul>
        <li>
            <a data-link-type="biblio">[DOM]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="term-for-concept-document">document</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="term-for-canvascompositing">CanvasCompositing</span>
                <li><span class="dfn-paneled" id="term-for-canvasdrawimage">CanvasDrawImage</span>
                <li><span class="dfn-paneled" id="term-for-canvasdrawpath">CanvasDrawPath</span>
                <li><span class="dfn-paneled" id="term-for-canvasfillstrokestyles">CanvasFillStrokeStyles</span>
                <li><span class="dfn-paneled" id="term-for-canvasimagedata">CanvasImageData</span>
                <li><span class="dfn-paneled" id="term-for-canvasimagesmoothing">CanvasImageSmoothing</span>
                <li><span class="dfn-paneled" id="term-for-canvasimagesource">CanvasImageSource</span>
                <li><span class="dfn-paneled" id="term-for-canvaspath">CanvasPath</span>
                <li><span class="dfn-paneled" id="term-for-canvaspathdrawingstyles">CanvasPathDrawingStyles</span>
                <li><span class="dfn-paneled" id="term-for-canvasrect">CanvasRect</span>
                <li><span class="dfn-paneled" id="term-for-canvasrenderingcontext2d">CanvasRenderingContext2D</span>
                <li><span class="dfn-paneled" id="term-for-canvasshadowstyles">CanvasShadowStyles</span>
                <li><span class="dfn-paneled" id="term-for-canvasstate">CanvasState</span>
                <li><span class="dfn-paneled" id="term-for-canvastext">CanvasText</span>
                <li><span class="dfn-paneled" id="term-for-canvastextdrawingstyles">CanvasTextDrawingStyles</span>
                <li><span class="dfn-paneled" id="term-for-canvastransform">CanvasTransform</span>
                <li><span class="dfn-paneled" id="term-for-canvasuserinterface">CanvasUserInterface</span>
                <li><span class="dfn-paneled" id="term-for-worklet">Worklet</span>
                <li><span class="dfn-paneled" id="term-for-workletglobalscope">WorkletGlobalScope</span>
                <li><span class="dfn-paneled" id="term-for-create-a-worklet-global-scope">create a worklet global
                        scope</span>
                <li><span class="dfn-paneled" id="term-for-dom-context-2d-drawimage">drawImage</span>
                <li><span class="dfn-paneled" id="term-for-concept-worklet-global-scopes">global scopes</span>
                <li><span class="dfn-paneled" id="term-for-in-parallel">in parallel</span>
                <li><span class="dfn-paneled" id="term-for-queue-a-task">queue a task</span>
                <li><span class="dfn-paneled" id="term-for-reset-the-rendering-context-to-its-default-state">reset the
                        rendering context to its default state</span>
                <li><span class="dfn-paneled" id="term-for-concept-canvas-set-bitmap-dimensions">set bitmap
                        dimensions</span>
                <li><span class="dfn-paneled" id="term-for-worklet-destination-type">worklet destination type</span>
                <li><span class="dfn-paneled" id="term-for-worklet-global-scope-type">worklet global scope type</span>
            </ul>
        <li>
            <a data-link-type="biblio">[INFRA]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="term-for-list-append">append</span>
                <li><span class="dfn-paneled" id="term-for-list-empty">empty</span>
                <li><span class="dfn-paneled" id="term-for-map-exists">exist</span>
                <li><span class="dfn-paneled" id="term-for-list-iterate">for each</span>
                <li><span class="dfn-paneled" id="term-for-map-get">get</span>
                <li><span class="dfn-paneled" id="term-for-list">list</span>
                <li><span class="dfn-paneled" id="term-for-ordered-map">map</span>
                <li><span class="dfn-paneled" id="term-for-map-set">set</span>
                <li><span class="dfn-paneled" id="term-for-struct">struct</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEBIDL]</a> は以下の用語を定義しています：
            <ul>
                <li><span class="dfn-paneled" id="term-for-idl-DOMException">DOMException</span>
                <li><span class="dfn-paneled" id="term-for-idl-DOMString">DOMString</span>
                <li><span class="dfn-paneled" id="term-for-Exposed">Exposed</span>
                <li><span class="dfn-paneled" id="term-for-Global">Global</span>
                <li><span class="dfn-paneled" id="term-for-invalidmodificationerror">InvalidModificationError</span>
                <li><span class="dfn-paneled" id="term-for-SameObject">SameObject</span>
                <li><span class="dfn-paneled" id="term-for-VoidFunction">VoidFunction</span>
                <li><span class="dfn-paneled" id="term-for-idl-boolean">boolean</span>
                <li><span class="dfn-paneled" id="term-for-dfn-callback-function">callback function</span>
                <li><span class="dfn-paneled" id="term-for-dfn-callback-this-value">callback this value</span>
                <li><span class="dfn-paneled" id="term-for-web-idl-arguments-list-converting">converting</span>
                <li><span class="dfn-paneled" id="term-for-idl-double">double</span>
                <li><span class="dfn-paneled" id="term-for-invoke-a-callback-function">invoke</span>
                <li><span class="dfn-paneled" id="term-for-dfn-throw">throw</span>
                <li><span class="dfn-paneled" id="term-for-idl-undefined">undefined</span>
                <li><span class="dfn-paneled" id="term-for-idl-unrestricted-double">unrestricted double</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">規範的参考文献</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css-backgrounds-3">[CSS-BACKGROUNDS-3]
        <dd>Bert Bos; Elika Etemad; Brad Kemper. <a href="https://www.w3.org/TR/css-backgrounds-3/"><cite>CSS
                    Backgrounds and Borders Module Level 3</cite></a>. 2021年7月26日. CR. URL: <a
                href="https://www.w3.org/TR/css-backgrounds-3/">https://www.w3.org/TR/css-backgrounds-3/</a>
        <dt id="biblio-css-cascade-5">[CSS-CASCADE-5]
        <dd>Elika Etemad; Miriam Suzanne; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-cascade-5/"><cite>CSS
                    Cascading and Inheritance Level 5</cite></a>. 2021年12月3日. WD. URL: <a
                href="https://www.w3.org/TR/css-cascade-5/">https://www.w3.org/TR/css-cascade-5/</a>
        <dt id="biblio-css-display-3">[CSS-DISPLAY-3]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-display-3/"><cite>CSS Display Module Level
                    3</cite></a>. 2021年9月3日. CR. URL: <a
                href="https://www.w3.org/TR/css-display-3/">https://www.w3.org/TR/css-display-3/</a>
        <dt id="biblio-css-images-3">[CSS-IMAGES-3]
        <dd>Tab Atkins Jr.; Elika Etemad; Lea Verou. <a href="https://www.w3.org/TR/css-images-3/"><cite>CSS Images
                    Module Level 3</cite></a>. 2020年12月17日. CR. URL: <a
                href="https://www.w3.org/TR/css-images-3/">https://www.w3.org/TR/css-images-3/</a>
        <dt id="biblio-css-images-4">[CSS-IMAGES-4]
        <dd>Tab Atkins Jr.; Elika Etemad; Lea Verou. <a href="https://www.w3.org/TR/css-images-4/"><cite>CSS Image
                    Values and Replaced Content Module Level 4</cite></a>. 2017年4月13日. WD. URL: <a
                href="https://www.w3.org/TR/css-images-4/">https://www.w3.org/TR/css-images-4/</a>
        <dt id="biblio-css-properties-values-api-1">[CSS-PROPERTIES-VALUES-API-1]
        <dd>Tab Atkins Jr.; 他. <a href="https://www.w3.org/TR/css-properties-values-api-1/"><cite>CSS Properties and
                    Values API Level 1</cite></a>. 2020年10月13日. WD. URL: <a
                href="https://www.w3.org/TR/css-properties-values-api-1/">https://www.w3.org/TR/css-properties-values-api-1/</a>
        <dt id="biblio-css-syntax-3">[CSS-SYNTAX-3]
        <dd>Tab Atkins Jr.; Simon Sapin. <a href="https://www.w3.org/TR/css-syntax-3/"><cite>CSS Syntax Module Level
                    3</cite></a>. 2019年7月16日. CR. URL: <a
                href="https://www.w3.org/TR/css-syntax-3/">https://www.w3.org/TR/css-syntax-3/</a>
        <dt id="biblio-css-typed-om-1">[CSS-TYPED-OM-1]
        <dd>Shane Stephens; Tab Atkins Jr.; Naina Raisinghani. <a href="https://www.w3.org/TR/css-typed-om-1/"><cite>CSS
                    Typed OM Level 1</cite></a>. 2018年4月10日. WD. URL: <a
                href="https://www.w3.org/TR/css-typed-om-1/">https://www.w3.org/TR/css-typed-om-1/</a>
        <dt id="biblio-css-ui-3">[CSS-UI-3]
        <dd>Tantek Çelik; Florian Rivoal. <a href="https://www.w3.org/TR/css-ui-3/"><cite>CSS Basic User Interface
                    Module Level 3 (CSS3 UI)</cite></a>. 2018年6月21日. REC. URL: <a
                href="https://www.w3.org/TR/css-ui-3/">https://www.w3.org/TR/css-ui-3/</a>
        <dt id="biblio-css-values-4">[CSS-VALUES-4]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-4/"><cite>CSS Values and Units
                    Module Level 4</cite></a>. 2021年10月16日. WD. URL: <a
                href="https://www.w3.org/TR/css-values-4/">https://www.w3.org/TR/css-values-4/</a>
        <dt id="biblio-css-variables-1">[CSS-VARIABLES-1]
        <dd>Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-variables-1/"><cite>CSS Custom Properties for Cascading
                    Variables Module Level 1</cite></a>. 2021年11月11日. CR. URL: <a
                href="https://www.w3.org/TR/css-variables-1/">https://www.w3.org/TR/css-variables-1/</a>
        <dt id="biblio-cssom-1">[CSSOM-1]
        <dd>Daniel Glazman; Emilio Cobos Álvarez. <a href="https://www.w3.org/TR/cssom-1/"><cite>CSS Object Model
                    (CSSOM)</cite></a>. 2021年8月26日. WD. URL: <a
                href="https://www.w3.org/TR/cssom-1/">https://www.w3.org/TR/cssom-1/</a>
        <dt id="biblio-cssom-view-1">[CSSOM-VIEW-1]
        <dd>Simon Pieters. <a href="https://www.w3.org/TR/cssom-view-1/"><cite>CSSOM View Module</cite></a>. 2016年3月17日.
            WD. URL: <a href="https://www.w3.org/TR/cssom-view-1/">https://www.w3.org/TR/cssom-view-1/</a>
        <dt id="biblio-dom">[DOM]
        <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard.
            URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren; 他. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>.
            Living Standard. URL: <a
                href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-infra">[INFRA]
        <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra
                    Standard</cite></a>. Living Standard. URL: <a
                href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to
                    Indicate Requirement Levels</cite></a>. 1997年3月. Best Current Practice. URL: <a
                href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
        <dt id="biblio-webidl">[WEBIDL]
        <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living
            Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL索引</span><a class="self-link"
            href="#idl-index"></a></h2>
    <pre class="idl highlight def"><c- b>partial</c-> <c- b>namespace</c-> <a class="idl-code" data-link-type="namespace" href="https://www.w3.org/TR/cssom-1/#namespacedef-css"><c- g>CSS</c-></a> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet"><c- n>Worklet</c-></a> <a data-readonly data-type="Worklet" href="#dom-css-paintworklet"><code><c- g>paintWorklet</c-></code></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Global"><c- g>Global</c-></a>=(<a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet"><c- n>Worklet</c-></a>,<a data-link-type="idl-name"><c- n>PaintWorklet</c-></a>),<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>PaintWorklet</c->]
<c- b>interface</c-> <a href="#paintworkletglobalscope"><code><c- g>PaintWorkletGlobalScope</c-></code></a> : <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/worklets.html#workletglobalscope"><c- n>WorkletGlobalScope</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-paintworkletglobalscope-registerpaint"><c- g>registerPaint</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-paintworkletglobalscope-registerpaint-name-paintctor-name"><code><c- g>name</c-></code></a>, <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction"><c- n>VoidFunction</c-></a> <a href="#dom-paintworkletglobalscope-registerpaint-name-paintctor-paintctor"><code><c- g>paintCtor</c-></code></a>);
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double"><c- b>unrestricted</c-> <c- b>double</c-></a> <a data-readonly data-type="unrestricted double" href="#dom-paintworkletglobalscope-devicepixelratio"><code><c- g>devicePixelRatio</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-paintrenderingcontext2dsettings"><code><c- g>PaintRenderingContext2DSettings</c-></code></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="true" data-type="boolean " href="#dom-paintrenderingcontext2dsettings-alpha"><code><c- g>alpha</c-></code></a> = <c- b>true</c->;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>PaintWorklet</c->]
<c- b>interface</c-> <a href="#paintrenderingcontext2d"><code><c- g>PaintRenderingContext2D</c-></code></a> {
};
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasstate"><c- n>CanvasState</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvastransform"><c- n>CanvasTransform</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvascompositing"><c- n>CanvasCompositing</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasimagesmoothing"><c- n>CanvasImageSmoothing</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasfillstrokestyles"><c- n>CanvasFillStrokeStyles</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasshadowstyles"><c- n>CanvasShadowStyles</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasrect"><c- n>CanvasRect</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasdrawpath"><c- n>CanvasDrawPath</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasdrawimage"><c- n>CanvasDrawImage</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvaspathdrawingstyles"><c- n>CanvasPathDrawingStyles</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvaspath"><c- n>CanvasPath</c-></a>;

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>PaintWorklet</c->]
<c- b>interface</c-> <a href="#paintsize"><code><c- g>PaintSize</c-></code></a> {
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a> <a data-readonly data-type="double" href="#dom-paintsize-width"><code><c- g>width</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a> <a data-readonly data-type="double" href="#dom-paintsize-height"><code><c- g>height</c-></code></a>;
};

</pre>
    <aside class="dfn-panel" data-for="dom-css-paintworklet">
        <b><a href="#dom-css-paintworklet">#dom-css-paintworklet</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-css-paintworklet">2. Paint Worklet</a> <a
                    href="#ref-for-dom-css-paintworklet①">(2)</a> <a href="#ref-for-dom-css-paintworklet②">(3)</a> <a
                    href="#ref-for-dom-css-paintworklet③">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paintworkletglobalscope">
        <b><a href="#paintworkletglobalscope">#paintworkletglobalscope</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-paintworkletglobalscope">2. Paint Worklet</a> <a
                    href="#ref-for-paintworkletglobalscope①">(2)</a> <a href="#ref-for-paintworkletglobalscope②">(3)</a>
            <li><a href="#ref-for-paintworkletglobalscope③">3. Concepts</a>
            <li><a href="#ref-for-paintworkletglobalscope④">4. Registering Custom Paint</a> <a
                    href="#ref-for-paintworkletglobalscope⑤">(2)</a> <a href="#ref-for-paintworkletglobalscope⑥">(3)</a>
            <li><a href="#ref-for-paintworkletglobalscope⑦">7. Drawing an image</a> <a
                    href="#ref-for-paintworkletglobalscope⑧">(2)</a>
            <li><a href="#ref-for-paintworkletglobalscope⑨">7.1. Global Scope Selection</a> <a
                    href="#ref-for-paintworkletglobalscope①⓪">(2)</a> <a
                    href="#ref-for-paintworkletglobalscope①①">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-paintworkletglobalscope-devicepixelratio">
        <b><a
                href="#dom-paintworkletglobalscope-devicepixelratio">#dom-paintworkletglobalscope-devicepixelratio</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-paintworkletglobalscope-devicepixelratio">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-paintrenderingcontext2dsettings">
        <b><a
                href="#dictdef-paintrenderingcontext2dsettings">#dictdef-paintrenderingcontext2dsettings</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-paintrenderingcontext2dsettings">2. Paint Worklet</a> <a
                    href="#ref-for-dictdef-paintrenderingcontext2dsettings①">(2)</a>
            <li><a href="#ref-for-dictdef-paintrenderingcontext2dsettings②">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-paintrenderingcontext2dsettings-alpha">
        <b><a
                href="#dom-paintrenderingcontext2dsettings-alpha">#dom-paintrenderingcontext2dsettings-alpha</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-paintrenderingcontext2dsettings-alpha">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paint-definition">
        <b><a href="#paint-definition">#paint-definition</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-paint-definition">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paint-definition-class-constructor">
        <b><a href="#paint-definition-class-constructor">#paint-definition-class-constructor</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-paint-definition-class-constructor">4. Registering Custom Paint</a>
            <li><a href="#ref-for-paint-definition-class-constructor①">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paint-definition-paint-function">
        <b><a href="#paint-definition-paint-function">#paint-definition-paint-function</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-paint-definition-paint-function">4. Registering Custom Paint</a>
            <li><a href="#ref-for-paint-definition-paint-function①">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paint-definition-constructor-valid-flag">
        <b><a
                href="#paint-definition-constructor-valid-flag">#paint-definition-constructor-valid-flag</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-paint-definition-constructor-valid-flag">4. Registering Custom Paint</a>
            <li><a href="#ref-for-paint-definition-constructor-valid-flag①">7. Drawing an image</a> <a
                    href="#ref-for-paint-definition-constructor-valid-flag②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paint-definition-input-properties">
        <b><a href="#paint-definition-input-properties">#paint-definition-input-properties</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-paint-definition-input-properties">4. Registering Custom Paint</a>
            <li><a href="#ref-for-paint-definition-input-properties①">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paint-definition-paintrenderingcontext2dsettings-object">
        <b><a
                href="#paint-definition-paintrenderingcontext2dsettings-object">#paint-definition-paintrenderingcontext2dsettings-object</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-paint-definition-paintrenderingcontext2dsettings-object">4. Registering Custom
                    Paint</a>
            <li><a href="#ref-for-paint-definition-paintrenderingcontext2dsettings-object①">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="document-paint-definition">
        <b><a href="#document-paint-definition">#document-paint-definition</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-document-paint-definition">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="document-paint-definition-input-properties">
        <b><a
                href="#document-paint-definition-input-properties">#document-paint-definition-input-properties</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-paint-definition-input-properties">4. Registering Custom Paint</a> <a
                    href="#ref-for-document-paint-definition-input-properties①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="document-paint-definition-input-argument-syntaxes">
        <b><a
                href="#document-paint-definition-input-argument-syntaxes">#document-paint-definition-input-argument-syntaxes</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-paint-definition-input-argument-syntaxes">4. Registering Custom Paint</a> <a
                    href="#ref-for-document-paint-definition-input-argument-syntaxes①">(2)</a>
            <li><a href="#ref-for-document-paint-definition-input-argument-syntaxes②">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="document-paint-definition-paintrenderingcontext2dsettings-object">
        <b><a
                href="#document-paint-definition-paintrenderingcontext2dsettings-object">#document-paint-definition-paintrenderingcontext2dsettings-object</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-paint-definition-paintrenderingcontext2dsettings-object">4. Registering
                    Custom Paint</a> <a
                    href="#ref-for-document-paint-definition-paintrenderingcontext2dsettings-object①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="document-paint-definitions">
        <b><a href="#document-paint-definitions">#document-paint-definitions</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-document-paint-definitions">4. Registering Custom Paint</a>
            <li><a href="#ref-for-document-paint-definitions①">7. Drawing an image</a> <a
                    href="#ref-for-document-paint-definitions②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paint-definitions">
        <b><a href="#paint-definitions">#paint-definitions</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-paint-definitions">4. Registering Custom Paint</a>
            <li><a href="#ref-for-paint-definitions①">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paint-class-instances">
        <b><a href="#paint-class-instances">#paint-class-instances</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-paint-class-instances">4. Registering Custom Paint</a>
            <li><a href="#ref-for-paint-class-instances①">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-paintworkletglobalscope-registerpaint">
        <b><a
                href="#dom-paintworkletglobalscope-registerpaint">#dom-paintworkletglobalscope-registerpaint</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-paintworkletglobalscope-registerpaint">2. Paint Worklet</a>
            <li><a href="#ref-for-dom-paintworkletglobalscope-registerpaint①">4. Registering Custom Paint</a> <a
                    href="#ref-for-dom-paintworkletglobalscope-registerpaint②">(2)</a>
            <li><a href="#ref-for-dom-paintworkletglobalscope-registerpaint③">5. Paint Notation</a>
            <li><a href="#ref-for-dom-paintworkletglobalscope-registerpaint④">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="funcdef-paint">
        <b><a href="#funcdef-paint">#funcdef-paint</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-funcdef-paint">3. Concepts</a>
            <li><a href="#ref-for-funcdef-paint①">4. Registering Custom Paint</a>
            <li><a href="#ref-for-funcdef-paint②">5. Paint Notation</a> <a href="#ref-for-funcdef-paint③">(2)</a> <a
                    href="#ref-for-funcdef-paint④">(3)</a>
            <li><a href="#ref-for-funcdef-paint⑤">7. Drawing an image</a> <a href="#ref-for-funcdef-paint⑥">(2)</a> <a
                    href="#ref-for-funcdef-paint⑦">(3)</a> <a href="#ref-for-funcdef-paint⑧">(4)</a> <a
                    href="#ref-for-funcdef-paint⑨">(5)</a> <a href="#ref-for-funcdef-paint①⓪">(6)</a>
            <li><a href="#ref-for-funcdef-paint①①">8.1. Example 1: Colored Circle</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paintrenderingcontext2d">
        <b><a href="#paintrenderingcontext2d">#paintrenderingcontext2d</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-paintrenderingcontext2d">6. The 2D rendering context</a> <a
                    href="#ref-for-paintrenderingcontext2d①">(2)</a> <a href="#ref-for-paintrenderingcontext2d②">(3)</a>
                <a href="#ref-for-paintrenderingcontext2d③">(4)</a> <a href="#ref-for-paintrenderingcontext2d④">(5)</a>
                <a href="#ref-for-paintrenderingcontext2d⑤">(6)</a> <a href="#ref-for-paintrenderingcontext2d⑥">(7)</a>
                <a href="#ref-for-paintrenderingcontext2d⑦">(8)</a> <a href="#ref-for-paintrenderingcontext2d⑧">(9)</a>
                <a href="#ref-for-paintrenderingcontext2d⑨">(10)</a> <a
                    href="#ref-for-paintrenderingcontext2d①⓪">(11)</a> <a
                    href="#ref-for-paintrenderingcontext2d①①">(12)</a> <a
                    href="#ref-for-paintrenderingcontext2d①②">(13)</a> <a
                    href="#ref-for-paintrenderingcontext2d①③">(14)</a> <a
                    href="#ref-for-paintrenderingcontext2d①④">(15)</a> <a
                    href="#ref-for-paintrenderingcontext2d①⑤">(16)</a> <a
                    href="#ref-for-paintrenderingcontext2d①⑥">(17)</a> <a
                    href="#ref-for-paintrenderingcontext2d①⑦">(18)</a> <a
                    href="#ref-for-paintrenderingcontext2d①⑧">(19)</a>
            <li><a href="#ref-for-paintrenderingcontext2d①⑨">11. Changes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paintrenderingcontext2d-output-bitmap">
        <b><a href="#paintrenderingcontext2d-output-bitmap">#paintrenderingcontext2d-output-bitmap</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-paintrenderingcontext2d-output-bitmap">6. The 2D rendering context</a> <a
                    href="#ref-for-paintrenderingcontext2d-output-bitmap①">(2)</a> <a
                    href="#ref-for-paintrenderingcontext2d-output-bitmap②">(3)</a> <a
                    href="#ref-for-paintrenderingcontext2d-output-bitmap③">(4)</a> <a
                    href="#ref-for-paintrenderingcontext2d-output-bitmap④">(5)</a> <a
                    href="#ref-for-paintrenderingcontext2d-output-bitmap⑤">(6)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paintrenderingcontext2d-alpha">
        <b><a href="#paintrenderingcontext2d-alpha">#paintrenderingcontext2d-alpha</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-paintrenderingcontext2d-alpha">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="create-a-paintrenderingcontext2d-object">
        <b><a
                href="#create-a-paintrenderingcontext2d-object">#create-a-paintrenderingcontext2d-object</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-create-a-paintrenderingcontext2d-object">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paintsize">
        <b><a href="#paintsize">#paintsize</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-paintsize">4. Registering Custom Paint</a>
            <li><a href="#ref-for-paintsize①">7. Drawing an image</a> <a href="#ref-for-paintsize②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="draw-a-paint-image">
        <b><a href="#draw-a-paint-image">#draw-a-paint-image</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-draw-a-paint-image">4. Registering Custom Paint</a>
            <li><a href="#ref-for-draw-a-paint-image①">5. Paint Notation</a>
            <li><a href="#ref-for-draw-a-paint-image②">7. Drawing an image</a> <a
                    href="#ref-for-draw-a-paint-image③">(2)</a> <a href="#ref-for-draw-a-paint-image④">(3)</a> <a
                    href="#ref-for-draw-a-paint-image⑤">(4)</a> <a href="#ref-for-draw-a-paint-image⑥">(5)</a> <a
                    href="#ref-for-draw-a-paint-image⑦">(6)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="invoke-a-paint-callback">
        <b><a href="#invoke-a-paint-callback">#invoke-a-paint-callback</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-invoke-a-paint-callback">7. Drawing an image</a> <a
                    href="#ref-for-invoke-a-paint-callback①">(2)</a>
        </ul>
    </aside>
    <script>/* script-dfn-panel */

        document.body.addEventListener("click", function (e) {
            var queryAll = function (sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while (el.parentElement) {
                if (el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if (el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if (el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if (target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function (el) {
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if (target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if (dfnPanel) {
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if (panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if (target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
    </script>
    <script>/* script-mdn-anno */

        document.body.addEventListener("click", (e) => {
            if (e.target.closest(".mdn-anno-btn")) {
                e.target.closest(".mdn-anno").classList.toggle("wrapped");
            }
        });
    </script>
    <script>/* script-var-click-highlighting */

        document.addEventListener("click", e => {
            if (e.target.nodeName == "VAR") {
                highlightSameAlgoVars(e.target);
            }
        });
        {
            const indexCounts = new Map();
            const indexNames = new Map();
            function highlightSameAlgoVars(v) {
                // Find the algorithm container.
                let algoContainer = null;
                let searchEl = v;
                while (algoContainer == null && searchEl != document.body) {
                    searchEl = searchEl.parentNode;
                    if (searchEl.hasAttribute("data-algorithm")) {
                        algoContainer = searchEl;
                    }
                }

                // Not highlighting document-global vars,
                // too likely to be unrelated.
                if (algoContainer == null) return;

                const algoName = algoContainer.getAttribute("data-algorithm");
                const varName = getVarName(v);
                const addClass = !v.classList.contains("selected");
                let highlightClass = null;
                if (addClass) {
                    const index = chooseHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] += 1;
                    indexNames.set(algoName + "///" + varName, index);
                    highlightClass = nameFromIndex(index);
                } else {
                    const index = previousHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] -= 1;
                    highlightClass = nameFromIndex(index);
                }

                // Find all same-name vars, and toggle their class appropriately.
                for (const el of algoContainer.querySelectorAll("var")) {
                    if (getVarName(el) == varName) {
                        el.classList.toggle("selected", addClass);
                        el.classList.toggle(highlightClass, addClass);
                    }
                }
            }
            function getVarName(el) {
                return el.textContent.replace(/(\s|\xa0)+/, " ").trim();
            }
            function chooseHighlightIndex(algoName, varName) {
                let indexes = null;
                if (indexCounts.has(algoName)) {
                    indexes = indexCounts.get(algoName);
                } else {
                    // 7 classes right now
                    indexes = [0, 0, 0, 0, 0, 0, 0];
                    indexCounts.set(algoName, indexes);
                }

                // If the element was recently unclicked,
                // *and* that color is still unclaimed,
                // give it back the same color.
                const lastIndex = previousHighlightIndex(algoName, varName);
                if (indexes[lastIndex] === 0) return lastIndex;

                // Find the earliest index with the lowest count.
                const minCount = Math.min.apply(null, indexes);
                let index = null;
                for (var i = 0; i < indexes.length; i++) {
                    if (indexes[i] == minCount) {
                        return i;
                    }
                }
            }
            function previousHighlightIndex(algoName, varName) {
                return indexNames.get(algoName + "///" + varName);
            }
            function nameFromIndex(index) {
                return "selected" + index;
            }
        }
    </script>
    <script src="https://htmlspecs.com/dropdown.js"></script>