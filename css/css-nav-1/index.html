<!doctype html>
<html lang="ja-JP">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <title>CSS 空間ナビゲーション レベル1</title>
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta content="exploring" name="csswg-work-status">
    <meta content="WD" name="w3c-status">
    <meta content="この仕様は、矢印キーを使用してフォーカスをナビゲートするための一般的なモデル、および関連するCSS、JavaScript機能とイベントを定義します。" name="abstract">
    <link href="https://www.w3.org/TR/css-nav-1/default.css" rel="stylesheet" type="text/css">
    <meta content="Bikeshed version 83d3ceadc5400c8422976bbcbe49615aace9cf1e" name="generator">
    <link href="https://www.w3.org/TR/css-nav-1/" rel="canonical">
    <style>
        code.key {
            border: solid 1px;
            border-radius: 0.5ch;
            padding: 1px 5px;
        }

        .output {
            background: white;
            padding: 1em;
        }
    </style>
    <style>
        #api-check:checked~.api,
        #api-check:checked~* .api {
            display: none;
        }

        #cssapi-check:checked~.cssapi,
        #cssapi-check:checked~* .cssapi {
            display: none;
        }

        #verbose-check:checked~.verbose,
        #verbose-check:checked~* .verbose {
            display: none;
        }
    </style>
    <style>
        #example-cal table,
        #example-cal td,
        #example-cal th {
            border-collapse: collapse;
            border: solid 1px;
        }

        #example-cal th {
            text-align: center;
        }

        #example-cal td {
            width: 12.5%;
        }

        #example-cal {
            display: grid;
            grid-template-columns: auto 1fr auto;
        }

        #example-cal button {
            align-self: center;
        }

        /* For browsers that don’t support grid */
        #example-cal table {
            display: inline-table;
            vertical-align: middle;
        }
    </style>
    <style>
        /* style-md-lists */

        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* style-selflinks */

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: gray;
            color: white;
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: black;
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* style-counters */

        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* style-var-click-highlighting */

        var {
            cursor: pointer;
        }

        var.selected0 {
            background-color: #F4D200;
            box-shadow: 0 0 0 2px #F4D200;
        }

        var.selected1 {
            background-color: #FF87A2;
            box-shadow: 0 0 0 2px #FF87A2;
        }

        var.selected2 {
            background-color: #96E885;
            box-shadow: 0 0 0 2px #96E885;
        }

        var.selected3 {
            background-color: #3EEED2;
            box-shadow: 0 0 0 2px #3EEED2;
        }

        var.selected4 {
            background-color: #EACFB6;
            box-shadow: 0 0 0 2px #EACFB6;
        }

        var.selected5 {
            background-color: #82DDFF;
            box-shadow: 0 0 0 2px #82DDFF;
        }

        var.selected6 {
            background-color: #FFBCF2;
            box-shadow: 0 0 0 2px #FFBCF2;
        }
    </style>
    <style>
        /* style-autolinks */

        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: #005a9c;
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }
    </style>
    <style>
        /* style-dfn-panel */

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: #DDDDDD;
            color: black;
            border: outset 0.2em;
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: black;
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0;
        }

        .dfn-panel li {
            list-style: inside;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled {
            cursor: pointer;
        }
    </style>
    <style>
        /* style-syntax-highlighting */
        pre.idl.highlight {
            color: #708090;
        }

        .highlight:not(.idl) {
            background: hsl(24, 20%, 95%);
        }

        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2016/W3C-WD" rel="stylesheet" type="text/css">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
        <h1 class="p-name no-ref" id="title">CSS 空間ナビゲーション レベル1</h1>
        <h2 class="no-num no-toc no-ref heading settled" id="subtitle">W3C 作業草案 2019年11月26日</h2>
        <div data-fill-with="spec-metadata">
            <dl>
                <dt>このバージョン:
                <dd><a class="u-url"
                        href="https://www.w3.org/TR/2019/WD-css-nav-1-20191126/">https://www.w3.org/TR/2019/WD-css-nav-1-20191126/</a>
                <dt>最新公開バージョン:
                <dd><a href="https://www.w3.org/TR/css-nav-1/">https://www.w3.org/TR/css-nav-1/</a>
                <dt>編集者草案:
                <dd><a href="https://drafts.csswg.org/css-nav-1/">https://drafts.csswg.org/css-nav-1/</a>
                <dt>以前のバージョン:
                <dd><a href="https://www.w3.org/TR/2019/WD-css-nav-1-20190423/"
                        rel="prev">https://www.w3.org/TR/2019/WD-css-nav-1-20190423/</a>
                <dt>課題追跡:
                <dd><a href="#issues-index">仕様内インライン</a>
                <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-nav-1">GitHub Issues</a>
                <dt class="editor">編集者:
                <dd class="editor p-author h-card vcard" data-editor-id="79168"><a class="p-name fn u-email email"
                        href="mailto:jh.hong@lge.com">Jihye Hong</a> (<span class="p-org org">LG Electronics</span>)
                <dd class="editor p-author h-card vcard" data-editor-id="43241"><a class="p-name fn u-url url"
                        href="https://florian.rivoal.net">Florian Rivoal</a> (<span class="p-org org">招待専門家</span>)
                <dt>この仕様への編集提案:
                <dd><a href="https://github.com/w3c/csswg-drafts/blob/master/css-nav-1/Overview.bs">GitHub Editor</a>
            </dl>
        </div>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2019 <a
                href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
                href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a
                href="https://www.ercim.eu/"><abbr
                    title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a
                href="https://www.keio.ac.jp/">Keio</a>, <a href="https://ev.buaa.edu.cn/">Beihang</a>). W3C <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">permissive document
                license</a> rules apply. </p>
        <hr title="Separator for header">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">概要</span></h2>
        <p>この仕様は、矢印キーを使ってフォーカスをナビゲートするための一般的なモデルと、関連するCSS、JavaScriptの機能やイベントを定義します。</p>
        <a href="https://www.w3.org/TR/CSS/">CSS</a>は、構造化文書（HTMLやXMLなど）の表示方法を画面や紙など様々な媒体で記述するための言語です。
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">この文書のステータス</span>
    </h2>
    <div data-fill-with="status">
        <p><em>このセクションは、公開時点での文書のステータスを説明しています。他の文書が本書に取って代わる場合があります。現在のW3C出版物の一覧や最新の技術レポートは、<a
                    href="https://www.w3.org/TR/">W3C技術レポートインデックス https://www.w3.org/TR/</a>で確認できます。</em> </p>
        <p>作業草案として公開されても、W3C会員による支持を意味するものではありません。本書はドラフト文書であり、随時更新、置換、廃止される可能性があります。進行中の作業以外として本書を引用することは適切ではありません。
        </p>
        <p><a href="https://github.com/w3c/csswg-drafts/issues">GitHub Issues</a>で本仕様について議論することを推奨します。
            問題を提出する際は、タイトルに「css-nav」という文字列を入れてください。推奨例：
            「[css-nav] <i data-lt>…コメントの要約…</i>」。
            すべての課題とコメントは<a href="https://lists.w3.org/Archives/Public/public-css-archive/">アーカイブ</a>されており、<a
                href="https://lists.w3.org/Archives/Public/www-style/">過去のアーカイブ</a>もあります。 </p>
        <p>この文書は<a href="https://www.w3.org/Style/CSS/">CSS作業グループ</a>によって作成されました。 </p>
        <p>この文書は<a href="https://www.w3.org/Consortium/Patent-Policy/">W3C特許ポリシー</a>の下で活動するグループにより作成されました。
            W3Cは、グループの成果物に関連して提出された<a href="https://www.w3.org/2004/01/pp-impl/32061/status"
                rel="disclosure">特許開示の公開リスト</a>を管理しています。そのページには特許開示の手順も記載されています。ある個人が、本仕様に<a
                href="https://www.w3.org/Consortium/Patent-Policy/#def-essential">必須と考えるクレーム</a>を含む特許を把握した場合、<a
                href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">W3C特許ポリシー第6節</a>に従い情報を開示しなければなりません。
        </p>
        <p>この文書は<a href="https://www.w3.org/2019/Process-20190301/"
                id="w3c_process_revision">2019年3月1日版W3Cプロセス文書</a>に従って管理されています。</p>
        <p></p>
    </div>
    <div data-fill-with="at-risk">
        <p>以下の機能は「リスクあり」とされており、CR期間中に削除される可能性があります：</p>
        <ul>
            <li><code
                    class="idl"><a data-link-type="idl" href="#dom-element-getspatialnavigationcontainer" id="ref-for-dom-element-getspatialnavigationcontainer">getSpatialNavigationContainer()</a></code>
            <li><code
                    class="idl"><a data-link-type="idl" href="#dom-element-focusableareas" id="ref-for-dom-element-focusableareas">focusableAreas()</a></code>
            <li><a class="property" data-link-type="propdesc" href="#propdef-spatial-navigation-contain"
                    id="ref-for-propdef-spatial-navigation-contain">spatial-navigation-contain</a>
            <li><a class="css" data-link-type="propdesc" href="#propdef-spatial-navigation-action"
                    id="ref-for-propdef-spatial-navigation-action">spatial-navigation-action: scroll</a>
            <li><a class="property" data-link-type="propdesc" href="#propdef-spatial-navigation-function"
                    id="ref-for-propdef-spatial-navigation-function">spatial-navigation-function</a>
        </ul>
        <p>「リスクあり」はW3Cプロセス用語であり、必ずしも機能が削除や遅延の危険にあることを示すものではありません。WGは、この機能がタイムリーに相互運用可能な実装が困難である可能性があると考えており、そのためこのようにマークすることで、提案勧告段階への移行時に必要に応じて新たな候補勧告を公開せずに機能を削除できます。
        </p>
    </div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目次</h2>
        <ol class="toc" role="directory">
            <li><a href="#intro"><span class="secno">1</span> <span class="content"> はじめに</span></a>
            <li><a href="#interaction"><span class="secno">2</span> <span class="content"> モジュールの相互作用</span></a>
            <li><a href="#overview"><span class="secno">3</span> <span class="content"> 概要</span></a>
            <li><a href="#triggering"><span class="secno">4</span> <span class="content"> 空間ナビゲーションのトリガー</span></a>
            <li>
                <a href="#js-api"><span class="secno">5</span> <span class="content"> JavaScript API</span></a>
                <ol class="toc">
                    <li><a href="#high-level-api"><span class="secno">5.1</span> <span class="content">
                                プログラムによるナビゲーションのトリガー</span></a>
                    <li><a href="#low-level-api"><span class="secno">5.2</span> <span class="content">
                                低レベルAPI</span></a>
                </ol>
            <li>
                <a href="#events-navigationevent"><span class="secno">6</span> <span class="content">
                        ナビゲーションイベント</span></a>
                <ol class="toc">
                    <li><a href="#interface-focusevent"><span class="secno">6.1</span> <span class="content"> インターフェース
                                NavigationEvent</span></a>
                    <li>
                        <a href="#events-nav-type"><span class="secno">6.2</span> <span class="content">
                                ナビゲーションイベントタイプ</span></a>
                        <ol class="toc">
                            <li><a href="#event-type-navbeforefocus"><span class="secno">6.2.1</span> <span
                                        class="content"> <span><code>navbeforefocus</code></span></span></a>
                            <li><a href="#event-type-navnotarget"><span class="secno">6.2.2</span> <span
                                        class="content"> <span><code>navnotarget</code></span></span></a>
                        </ol>
                </ol>
            <li><a href="#policy-feature"><span class="secno">7</span> <span class="content">
                        <span>navigation-override</span> <span>ポリシー制御機能</span></span></a>
            <li>
                <a href="#processing-model"><span class="secno">8</span> <span class="content"> 処理モデル</span></a>
                <ol class="toc">
                    <li><a href="#glossary"><span class="secno">8.1</span> <span class="content"> 用語集</span></a>
                    <li><a href="#grouping"><span class="secno">8.2</span> <span class="content"> 要素のグループ化</span></a>
                    <li><a href="#nav"><span class="secno">8.3</span> <span class="content"> ナビゲーション</span></a>
                    <li><a href="#heuristics"><span class="secno">8.4</span> <span class="content">
                                フォーカスナビゲーションのヒューリスティクス</span></a>
                </ol>
            <li>
                <a href="#declarative"><span class="secno">9</span> <span class="content">
                        宣言的手法による空間ナビゲーションの制御</span></a>
                <ol class="toc">
                    <li><a href="#container"><span class="secno">9.1</span> <span class="content"> 追加の空間ナビゲーションコンテナの作成：
                                <span class="property">spatial-navigation-contain</span> プロパティ</span></a>
                    <li><a href="#css-property-spatialnavigationaction"><span class="secno">9.2</span> <span
                                class="content"> スクロールとの連携制御： <span class="property">spatial-navigation-action</span>
                                プロパティ</span></a>
                    <li><a href="#css-property-spatialnavigationfunction"><span class="secno">9.3</span> <span
                                class="content"> ナビゲーションアルゴリズムの選択： <span
                                    class="property">spatial-navigation-function</span> プロパティ</span></a>
                </ol>
            <li><a href="#scrolling"><span class="secno"></span> <span class="content">付録A. スクロール拡張</span></a>
            <li><a href="#privsec"><span class="secno"></span> <span class="content">付録B. プライバシーとセキュリティに関する考察</span></a>
            <li><a href="#ack"><span class="secno"></span> <span class="content">謝辞</span></a>
            <li><a href="#changes"><span class="secno"></span> <span class="content">変更履歴</span></a>
            <li>
                <a href="#conformance"><span class="secno"></span> <span class="content">適合性</span></a>
                <ol class="toc">
                    <li><a href="#document-conventions"><span class="secno"></span> <span
                                class="content">ドキュメントの慣例</span></a>
                    <li><a href="#conform-classes"><span class="secno"></span> <span class="content">適合クラス</span></a>
                    <li>
                        <a href="#conform-responsible"><span class="secno"></span> <span
                                class="content">CSSの責任ある実装のための要件</span></a>
                        <ol class="toc">
                            <li><a href="#conform-partial"><span class="secno"></span> <span
                                        class="content">部分的な実装</span></a>
                            <li><a href="#conform-future-proofing"><span class="secno"></span> <span
                                        class="content">不安定・独自機能の実装</span></a>
                            <li><a href="#conform-testing"><span class="secno"></span> <span
                                        class="content">CRレベル機能の実装</span></a>
                        </ol>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本仕様で定義される用語</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">参照定義用語</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">規範参考文献</span></a>
                    <li><a href="#informative"><span class="secno"></span> <span class="content">参考情報文献</span></a>
                </ol>
            <li><a href="#property-index"><span class="secno"></span> <span class="content">プロパティ索引</span></a>
            <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL索引</span></a>
            <li><a href="#issues-index"><span class="secno"></span> <span class="content">課題索引</span></a>
        </ol>
    </nav>
    <main>
        <p>この仕様はかなり長いです。
            特定の領域を読みやすく、集中しやすくするために、
            いくつかのチェックボックスを下に用意しています。
            チェックを入れると仕様の一部が非表示になります。
            これはあくまで読みやすさのための補助機能であり、
            仕様そのものは完全な文書のままです。</p>
        <input id="api-check" type="checkbox">
        <label for="api-check">JavaScript APIおよびイベントを非表示にする</label>
        <br>
        <input id="cssapi-check" type="checkbox">
        <label for="cssapi-check">挙動のバリエーション選択を可能にするCSSプロパティおよび関連情報を非表示にする</label>
        <br>
        <input id="verbose-check" type="checkbox">
        <label for="verbose-check">規範的なセクションを説明・要約し、追加情報を含まない補足的なセクションを非表示にする</label>
        <br>
        <h2 class="non-normative heading settled" data-level="1" id="intro"><span class="secno">1. </span><span
                class="content"> はじめに</span><a class="self-link" href="#intro"></a></h2>
        <p><em>このセクションは規範的ではありません。</em></p>
        <p>従来、多くのブラウザにはフォーカスを方向的に移動する機能がありませんでした。
            一部のTVブラウザなどでは、他の入力手段がないため、矢印キーでフォーカスを移動できるようになっています。</p>
        <p>他にも、<code class="key">Shift</code>キーと矢印キーの組み合わせなど、異なるキー操作で空間ナビゲーションを制御できるものもあります。</p>
        <p>このページ上で方向的に移動できる能力は、<dfn class="dfn-paneled" data-dfn-type="dfn" data-export
                data-lt="spatial navigation | spatialNavigation" id="spatial-navigation">空間ナビゲーション</dfn>と呼ばれます。</p>
        <p><a data-link-type="dfn" href="#spatial-navigation"
                id="ref-for-spatial-navigation">空間ナビゲーション</a>は、グリッド状レイアウトや、
            他の主に非線形レイアウトを使って構築されたウェブページで役立ちます。
            下図はグリッドレイアウトで写真ギャラリーを表しています。
            <code class="key">Tab</code>キーで画像間のフォーカスを移動しようとすると、
            目的の画像要素に到達するまで何度もキーを押す必要があります。
        </p>
        <figure>
            <img alt="要素がグリッドパターンで配置されている場合、空間ナビゲーションはフォーカスの移動先を予測・制御しやすくします。"
                src="https://www.w3.org/TR/css-nav-1/images/gallery-app.png" style="width: 500px;">
            <figcaption>グリッドレイアウトのフォトギャラリーアプリケーション例</figcaption>
        </figure>
        <p>また、<a data-link-type="dfn" href="#spatial-navigation" id="ref-for-spatial-navigation①">空間ナビゲーション</a>は
            フォーカス可能な要素の位置に応じてフォーカスを移動するため、ユーザーにとって予測可能な要素へフォーカスを移動します。
            ページ上の要素がソース順とは独立して配置されている場合もあります。
            そのため、<span id="ref-for-spatial-navigation②">空間ナビゲーション</span>とは異なり、<code
                class="key">Tab</code>キーによる逐次ナビゲーションは
            フォーカス移動が予測しづらくなります。</p>
        <p>矢印キーは空間ナビゲーションの制御に自然に適していますが、
            これまでどの仕様もその動作や制御方法を記述していませんでした。
            <span class="api">この仕様は空間ナビゲーションの処理モデルを導入し、
                著者が空間ナビゲーションの動作を制御・上書きできるAPIも提供します。</span>
        </p>
        <p class="note" role="note"><span>注:</span> この仕様のJavaScriptイベントやAPIなどは、
            逐次ナビゲーションにも拡張できるため、
            キーボードナビゲーション全体で一貫性のある明確なモデルを持つことができます。</p>
        <p class="note" role="note"><span>注:</span> 一般原則として、
            キーボードナビゲーション、とくに空間ナビゲーションはJavaScriptなしでも
            利用・制御できるべきです<span class="cssapi">。
                そのため宣言的な方法が推奨されます。
                空間ナビゲーションはレイアウトに依存するため、
                CSSが空間ナビゲーション関連の制御を定義する適切な仕組みとなります</span>。
            <span class="api">ただし、<a href="https://github.com/extensibleweb/manifesto">Extensible Web Manifesto</a><a
                    data-link-type="biblio" href="#biblio-extensible">[EXTENSIBLE]</a>の精神に則り、
                著者が問題領域の実験や探求を行えるよう適切なJavaScriptプリミティブを提供することも重要だと考えます。
                こうしたJavaScript利用を通じて得られるフィードバックや経験を元に、
                より宣言的な機能を今後追加する可能性もあります。</span>
        </p>
        <p class="note" role="note"><span>注:</span> 一部の機能は<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="at-risk">リスクあり</dfn>とマークされています。
            本仕様の編集者は、これらの機能がユーザーや著者体験の重要な部分を構成すると考えていますが、
            これらを実装せずとも仕様のコア機能は実装可能なため、
            実装者が初期実装の範囲を縮小するため優先度を下げる可能性があります。
            これらの機能も実装されることが望ましいですが、
            最初は実装されない可能性があることを考慮し、リスクありとしています。</p>
        <h2 class="heading settled" data-level="2" id="interaction"><span class="secno">2. </span><span class="content">
                モジュールの相互作用</span><a class="self-link" href="#interaction"></a></h2>
        <p>この文書はInfra Standard<a data-link-type="biblio" href="#biblio-infra">[infra]</a>に依存します。</p>
        <p>キーワード "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED",
            "NOT RECOMMENDED", "MAY", "OPTIONAL" は RFC 2119 <a data-link-type="biblio"
                href="#biblio-rfc2119">[RFC2119]</a>の定義通りに解釈されます。</p>
        <div class="verbose">
            <h2 class="non-normative heading settled" data-level="3" id="overview"><span class="secno">3. </span><span
                    class="content"> 概要</span><a class="self-link" href="#overview"></a></h2>
            <p><em>このセクションは規範的ではありません。</em></p>
            <p>UAで定義された仕組み
                （通常は矢印キー、場合によっては<code class="key">Shift</code>や<code class="key">Control</code>などの修飾キーとの組み合わせ）
                を使い、ユーザーはUser Agentに特定の方向へのナビゲーションを要求できます。
                これにより、
                現在の場所から要求された方向の新しいフォーカス可能な項目へフォーカスが移動するか、
                適切な項目がなければスクロールされます。
            </p>
            <p>より具体的には、
                User Agentはまず、指定された方向の
                現在の<a data-link-type="dfn" href="#spatial-navigation-containers"
                    id="ref-for-spatial-navigation-containers">空間ナビゲーションコンテナ</a>内（<span
                    class="cssapi">初期状態では</span>ルート要素、スクロール可能要素、iframe<span class="cssapi">ですが、<a data-link-type="dfn"
                        href="#spatial-navigation-containers"
                        id="ref-for-spatial-navigation-containers①">空間ナビゲーションコンテナ</a>は<a class="property"
                        data-link-type="propdesc" href="#propdef-spatial-navigation-contain"
                        id="ref-for-propdef-spatial-navigation-contain①">spatial-navigation-contain</a>
                    プロパティを使うことで他の要素にも指定可能です</span>）で、表示されていてフォーカス可能な項目を探します。</p>
            <p>もし見つかった場合は、その方向に最適な項目を選び、フォーカスを移動します。</p>
            <p>見つからなかった場合は、要求された方向に<a data-link-type="dfn" href="#spatial-navigation-containers"
                    id="ref-for-spatial-navigation-containers②">空間ナビゲーションコンテナ</a>をスクロールします。
                これによってフォーカス可能な要素が表示され、
                次回同じ方向への空間ナビゲーション操作時にフォーカスの対象となります。</p>
            <p>もし<a data-link-type="dfn" href="#spatial-navigation-containers"
                    id="ref-for-spatial-navigation-containers③">空間ナビゲーションコンテナ</a>がスクロールできない場合、
                たとえばスクロール可能な要素でない場合や既にその方向の最大までスクロールされている場合は、
                User Agentは次の<span id="ref-for-spatial-navigation-containers④">空間ナビゲーションコンテナ</span>（親要素）を選び、
                上記の処理を再帰的に繰り返して、
                フォーカスまたはスクロールできる要素が見つかるか、ルート要素に到達するまで続けます。</p>
            <p class="note" role="note"><span>注:</span> この処理モデルの結果として、
                逐次ナビゲーションと空間ナビゲーションで到達可能な要素はほぼ同じになります。
                スクロール可能要素のビューポート外にある要素は、
                空間ナビゲーションでスクロールされて表示された場合のみ到達可能となります。
                したがって、デフォルトでスクロールして表示できない要素には到達できません。</p>
            <div class="api">
                空間ナビゲーション要求に対する適切な応答を探す過程の重要なポイントで、
                User Agentはイベントを発火します。
                著者はこれらのイベントで
                （<code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-preventdefault" id="ref-for-dom-event-preventdefault">preventDefault()</a></code>を呼ぶことで）
                直前のアクションを防止したり、
                代替アクション（<code
                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-focus" id="ref-for-dom-focus">focus()</a></code>メソッドで任意の要素にフォーカスするなど）
                を提供できます。
                <p>こうした代替アクション記述を支援し、<a href="https://github.com/extensibleweb/manifesto">Extensible
                        Web</a>原則に沿ってプラットフォームプリミティブを公開する一環として、
                    この仕様では基盤モデルの主要な構成要素にアクセスできるJavaScript APIも定義します。</p>
                <p>JavaScript APIの詳細は<a href="#js-api">§ 5 JavaScript API</a>、
                    各種イベントの詳細は<a href="#events-nav-type">§ 6.2 ナビゲーションイベントタイプ</a>、
                    CSSプロパティの詳細は<a href="#declarative">§ 9 宣言的手法による空間ナビゲーションの制御</a>を参照してください。</p>
            </div>
            <div class="example" id="example-8205e5a4">
                <a class="self-link" href="#example-8205e5a4"></a> この例は、スクロール可能な要素内に整列した一連のフォーカス可能な要素を、
                空間ナビゲーションでどのように移動できるかを示しています。
                説明を簡単にするため、この例では空間ナビゲーションが矢印キーでトリガーされるUser Agentを想定しています。
                <figure>
                    <img alt src="https://www.w3.org/TR/css-nav-1/images/spatnav-scroll-visible-1.png"
                        style="width: 200px;"> <img alt
                        src="https://www.w3.org/TR/css-nav-1/images/spatnav-scroll-visible-2.png" style="width: 200px;">
                    <figcaption><a data-link-type="dfn" href="#spatial-navigation-containers"
                            id="ref-for-spatial-navigation-containers⑤">空間ナビゲーションコンテナ</a>内の表示要素にフォーカスを移動する</figcaption>
                </figure>
                <p>図2の左側では「Box 2」がフォーカスされています。
                    <code class="key">ArrowDown</code>キーを押すと、
                    「Box 3」が<a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scrollport"
                        id="ref-for-scrollport">scrollport</a>
                    内で表示されているため、スクロールせずに<a data-link-type="dfn" href="#spatial-navigation-containers"
                        id="ref-for-spatial-navigation-containers⑥">空間ナビゲーションコンテナ</a>内で「Box 3」にフォーカスが移動します。
                </p>
                <figure>
                    <img alt src="https://www.w3.org/TR/css-nav-1/images/spatnav-scroll-invisible-1.png"
                        style="width: 160px;"> <img alt
                        src="https://www.w3.org/TR/css-nav-1/images/spatnav-scroll-invisible-2.png"
                        style="width: 160px;"> <img alt
                        src="https://www.w3.org/TR/css-nav-1/images/spatnav-scroll-invisible-3.png"
                        style="width: 160px;"> <img alt
                        src="https://www.w3.org/TR/css-nav-1/images/spatnav-scroll-invisible-4.png"
                        style="width: 160px;">
                    <figcaption><a data-link-type="dfn" href="#spatial-navigation-containers"
                            id="ref-for-spatial-navigation-containers⑦">空間ナビゲーションコンテナ</a>内の非表示要素にフォーカスを移動する</figcaption>
                </figure>
                <p>図3の1枚目では「Box 3」の下に<a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scrollport"
                        id="ref-for-scrollport①">scrollport</a>内で表示されている要素はありません。
                    そのため、<code class="key">ArrowDown</code>を押すと2枚目のように下方向にスクロールします。
                    さらに<code class="key">ArrowDown</code>キーを押すことで「Box 4」が<span
                        id="ref-for-scrollport②">scrollport</span>内に現れ、
                    追加でもう一度<code class="key">ArrowDown</code>を押すと4枚目のようにフォーカスが移動します。</p>
                <p>この例のマークアップは次の通りです：</p>
                <pre class="lang-css highlight"><c- f>#scroller </c-><c- p>{</c->
    <c- k>width</c-><c- p>:</c-> <c- m>700</c-><c- l>px</c-><c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <c- m>700</c-><c- l>px</c-><c- p>;</c->
    <c- k>overflow-x</c-><c- p>:</c-> hidden<c- p>;</c->
    <c- k>overflow-y</c-><c- p>:</c-> auto<c- p>;</c->
<c- p>}</c->

<c- f>.box </c-><c- p>{</c->
    <c- k>width</c-><c- p>:</c-> <c- m>150</c-><c- l>px</c-><c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <c- m>110</c-><c- l>px</c-><c- p>;</c->
    <c- k>background-color</c-><c- p>:</c-> blue<c- p>;</c->
<c- p>}</c->

<c- f>.box:focus </c-><c- p>{</c->
    <c- k>background-color</c-><c- p>:</c-> red<c- p>;</c->
<c- p>}</c->
</pre>
                <pre class="lang-html highlight"><c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>"scroller"</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"box"</c-> <c- e>tabindex</c-><c- o>=</c-><c- s>"0"</c-><c- p>></c->Box 1<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"box"</c-> <c- e>tabindex</c-><c- o>=</c-><c- s>"0"</c-><c- p>></c->Box 2<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"box"</c-> <c- e>tabindex</c-><c- o>=</c-><c- s>"0"</c-><c- p>></c->Box 3<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"box"</c-> <c- e>tabindex</c-><c- o>=</c-><c- s>"0"</c-><c- p>></c->Box 4<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</pre>
            </div>
        </div>
        <h2 class="heading settled" data-level="4" id="triggering"><span class="secno">4. </span><span class="content">
                空間ナビゲーションのトリガー</span><a class="self-link" href="#triggering"></a></h2>
        <p>ユーザーが指定した方向に空間ナビゲーションをトリガーした場合、
            ユーザーエージェントはその方向で<a data-link-type="dfn" href="#spatial-navigation-steps"
                id="ref-for-spatial-navigation-steps">空間ナビゲーション手順</a>を実行しなければなりません。</p>
        <p>この仕様では、ユーザーエージェントが空間ナビゲーションをトリガーするために
            ユーザーにどのようなUIメカニズムを提供するべきかは定義しません。
            これは意図的にユーザーエージェント側の判断に委ねられています。</p>
        <div class="note" role="note">注:
            入力機能が限られているデバイス（リモコンで操作するテレビ、フィーチャーフォン、ゲームコントローラーで操作するデバイスなど）のユーザーエージェントは、
            主な、または唯一のナビゲーション手段として空間ナビゲーションを利用することが期待されます。 </div>
        <p>ユーザーエージェントは仕様で定義された処理モデルやAPIを実装できますが、
            この仕様では
            ユーザーエージェントが、APIを使わず直接ユーザーが空間ナビゲーションをトリガーできる手段を
            提供することを推奨しています。</p>
        <p class="note" role="note"><span>注:</span> 逆に、著者は空間ナビゲーションが
            APIを呼び出していなくても
            ユーザーの操作に応じてユーザーエージェントによってトリガーされる可能性があることを
            想定しておくべきです。</p>
        <p>空間ナビゲーションをトリガーするための実際のメカニズムが何であれ、
            以下の要件が適用されます：</p>
        <ul>
            <li data-md>
                <p>ユーザーが空間ナビゲーションをトリガーするために使うメカニズムが
                    通常<code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/uievents/#uievent" id="ref-for-uievent">UIEvent</a></code>を発火する場合は、
                    <a data-link-type="dfn" href="#spatial-navigation-steps"
                        id="ref-for-spatial-navigation-steps①">空間ナビゲーション手順</a>を実行する前に
                    イベントを発火し、そのイベントの<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#canceled-flag"
                        id="ref-for-canceled-flag">canceled flag</a>
                    が設定された場合は手順を実行してはなりません。
                </p>
                <div class="example" id="example-71b5d5f5">
                    <a class="self-link" href="#example-71b5d5f5"></a> ゲーム機ではDパッドを押すことで空間ナビゲーションがトリガーされる場合があります。
                    このとき<code class="key">ArrowDown</code>、<code class="key">ArrowLeft</code>、<code
                        class="key">ArrowRight</code>、
                    <code class="key">ArrowUp</code>のいずれかにキーが設定された<a class="idl-code" data-link-type="event"
                        href="https://w3c.github.io/uievents/#keydown" id="ref-for-keydown">keydown</a>イベントが発火し、
                    キャンセルされなければ<a data-link-type="dfn" href="#spatial-navigation-steps"
                        id="ref-for-spatial-navigation-steps②">空間ナビゲーション手順</a><span class="api">（関連する<code
                            class="idl"><a data-link-type="idl" href="#navigationevent" id="ref-for-navigationevent">NavigationEvent</a></code>の発火も含む）</span>が実行されます。
                    <p>デスクトップPCのユーザーエージェントがキーボードの矢印キーで空間ナビゲーションをトリガーする場合も、同じシーケンスになります。</p>
                </div>
            <li data-md>
                <p>ユーザーが空間ナビゲーションをトリガーするために使うメカニズムが
                    文脈によって他の動作も実行する場合、
                    その文脈ではユーザーエージェントは他の動作を優先し、
                    空間ナビゲーションの代わりにそれを実行すべきです。
                    両方を同時にトリガーしてはなりません。</p>
                <div class="example" id="example-2ce7f9b0"><a class="self-link" href="#example-2ce7f9b0"></a>
                    ユーザーエージェントが修飾キーなしの矢印キーで空間ナビゲーションをトリガーし、
                    編集可能な要素がフォーカスされている場合は同じ矢印キーでテキストカーソルの移動を行う場合、
                    デフォルトでは矢印キーによるカーソル移動を優先すべきです。
                    フォーカスされた要素が編集不可か、編集可能でもカーソルが指定方向にこれ以上移動できない場合のみ
                    空間ナビゲーションがトリガーされます。 </div>
                <p>スクロールについては例外です：
                    空間ナビゲーション自体がスクロール（およびフォーカス移動）を扱うため、
                    ユーザーエージェントは空間ナビゲーションとスクロール動作を
                    別々のメカニズムで同時にトリガーしてはなりません。
                    ただし、異なるモード間の切り替えや異なるUIメカニズムで両方を提供することは可能です。</p>
                <div class="example" id="example-812cd513"><a class="self-link" href="#example-812cd513"></a>
                    ユーザーエージェントが、修飾キーなしの矢印キーを空間ナビゲーションまたはスクロールのいずれかに使う設定を
                    ユーザーに選択させる場合もあります。
                    また、修飾キーなしの矢印キーでスクロールを、<code class="key">Shift</code>キーと矢印キーの組み合わせで空間ナビゲーションを、
                    あるいは<code class="key">W</code> <code class="key">A</code> <code class="key">S</code> <code
                        class="key">D</code>キーで空間ナビゲーションを提供する場合もあります。
                    矢印キー押下に対して空間ナビゲーションのみ、あるいはスクロールのみを提供することも可能です。 </div>
        </ul>
        <div class="api">
            <h2 class="heading settled" data-level="5" id="js-api"><span class="secno">5. </span><span class="content">
                    JavaScript API</span><a class="self-link" href="#js-api"></a></h2>
            <h3 class="heading settled" data-level="5.1" id="high-level-api"><span class="secno">5.1. </span><span
                    class="content"> プログラムによるナビゲーションのトリガー</span><a class="self-link" href="#high-level-api"></a></h3>
            <p><code
                    class="idl"><a data-link-type="idl" href="#dom-window-navigate" id="ref-for-dom-window-navigate">navigate()</a></code>
                メソッドは、著者がプログラムから空間ナビゲーションをトリガーできるようにします。
                これは、ユーザーが手動で（例えばブラウザで矢印キーを押すなど）空間ナビゲーションをトリガーしたのと同じように動作します。</p>
            <p class="note" role="note"><span>注:</span> このメソッドは手動ナビゲーションと同じ処理モデルをトリガーするため、
                同じ結果が得られるはずです。
                同じイベントチェーンが発火し、同じ要素がスクロールまたはフォーカスされます。</p>
            <p class="note" role="note"><span>注:</span> 著者はこれを使って、
                ユーザーエージェントで割り当てられたUIメカニズム以外（異なるキーへの割り当てや
                画面上のクリック可能な方向パッド、UIイベント以外のイベントなど）で空間ナビゲーションを
                トリガーすることもできます。
                また、無限スクロールのように非同期操作のため途中でナビゲーションを中断し、
                その後再開したい場合にも利用できます。</p>
            <p class="note" role="note"><span>注:</span> このAPIはテスト用途にも便利です。
                ベンダー固有のUI慣習に依存しない空間ナビゲーションをトリガーするのは困難なためです。</p>
            <pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-spatialnavigationdirection"><code><c- g>SpatialNavigationDirection</c-></code></dfn> {
    <dfn class="dfn-paneled idl-code" data-dfn-for="SpatialNavigationDirection" data-dfn-type="enum-value" data-export id="dom-spatialnavigationdirection-up"><code><c- s>"up"</c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="SpatialNavigationDirection" data-dfn-type="enum-value" data-export id="dom-spatialnavigationdirection-down"><code><c- s>"down"</c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="SpatialNavigationDirection" data-dfn-type="enum-value" data-export id="dom-spatialnavigationdirection-left"><code><c- s>"left"</c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="SpatialNavigationDirection" data-dfn-type="enum-value" data-export id="dom-spatialnavigationdirection-right"><code><c- s>"right"</c-></code></dfn>,
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/window-object.html#window" id="ref-for-window"><c- g>Window</c-></a> {
    <c- b>void</c-> <a class="idl-code" data-link-type="method" href="#dom-window-navigate" id="ref-for-dom-window-navigate①"><c- g>navigate</c-></a>(<a class="n" data-link-type="idl-name" href="#enumdef-spatialnavigationdirection" id="ref-for-enumdef-spatialnavigationdirection"><c- n>SpatialNavigationDirection</c-></a> <dfn class="idl-code" data-dfn-for="Window/navigate(dir)" data-dfn-type="argument" data-export id="dom-window-navigate-dir-dir"><code><c- g>dir</c-></code><a class="self-link" href="#dom-window-navigate-dir-dir"></a></dfn>);
};
</pre>
            <div class="algorithm" data-algorithm="windowNavigate steps">
                <code>navigate(dir)</code>メソッドが呼ばれたとき、
                ユーザーエージェントは次の手順を実行しなければなりません：
                <ul>
                    <li data-md>
                        <p>方向<var>dir</var>が<code>"up"</code>、<code>"down"</code>、<code>"left"</code>、<code>"right"</code>のいずれかであれば、
                            <var>dir</var>で<a data-link-type="dfn" href="#spatial-navigation-steps"
                                id="ref-for-spatial-navigation-steps③">空間ナビゲーション手順</a>を実行する。
                        </p>
                </ul>
                <p class="issue" id="issue-a5a227c8"><a class="self-link" href="#issue-a5a227c8"></a> このAPIの名称は議論中です <a
                        href="https://github.com/w3c/csswg-drafts/issues/3387">&lt;https://github.com/w3c/csswg-drafts/issues/3387></a>
                </p>
            </div>
            <h3 class="heading settled" data-level="5.2" id="low-level-api"><span class="secno">5.2. </span><span
                    class="content"> 低レベルAPI</span><a class="self-link" href="#low-level-api"></a></h3>
            <p>これらのAPIは、処理モデルに密接に従った低レベルの構造体として設計されています。
                そのため、空間ナビゲーションの動作を拡張・上書きしたい著者にとって使いやすくなっています。</p>
            <pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-focusableareasearchmode"><code><c- g>FocusableAreaSearchMode</c-></code></dfn> {
    <dfn class="idl-code" data-dfn-for="FocusableAreaSearchMode" data-dfn-type="enum-value" data-export id="dom-focusableareasearchmode-visible"><code><c- s>"visible"</c-></code><a class="self-link" href="#dom-focusableareasearchmode-visible"></a></dfn>,
    <dfn class="idl-code" data-dfn-for="FocusableAreaSearchMode" data-dfn-type="enum-value" data-export id="dom-focusableareasearchmode-all"><code><c- s>"all"</c-></code><a class="self-link" href="#dom-focusableareasearchmode-all"></a></dfn>
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-focusableareasoption"><code><c- g>FocusableAreasOption</c-></code></dfn> {
    <a class="n" data-link-type="idl-name" href="#enumdef-focusableareasearchmode" id="ref-for-enumdef-focusableareasearchmode"><c- n>FocusableAreaSearchMode</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FocusableAreasOption" data-dfn-type="dict-member" data-export data-type="FocusableAreaSearchMode " id="dom-focusableareasoption-mode"><code><c- g>mode</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-spatialnavigationsearchoptions"><code><c- g>SpatialNavigationSearchOptions</c-></code></dfn> {
    <c- b>sequence</c->&lt;<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node"><c- n>Node</c-></a>>? <dfn class="dfn-paneled idl-code" data-dfn-for="SpatialNavigationSearchOptions" data-dfn-type="dict-member" data-export data-type="sequence<Node>? " id="dom-spatialnavigationsearchoptions-candidates"><code><c- g>candidates</c-></code></dfn>;
    <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node①"><c- n>Node</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="SpatialNavigationSearchOptions" data-dfn-type="dict-member" data-export data-type="Node? " id="dom-spatialnavigationsearchoptions-container"><code><c- g>container</c-></code></dfn>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#element" id="ref-for-element"><c- g>Element</c-></a> {
    <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node②"><c- n>Node</c-></a> <a class="idl-code" data-link-type="method" href="#dom-element-getspatialnavigationcontainer" id="ref-for-dom-element-getspatialnavigationcontainer①"><c- g>getSpatialNavigationContainer</c-></a>();
    <c- b>sequence</c->&lt;<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node③"><c- n>Node</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-element-focusableareas" id="ref-for-dom-element-focusableareas①"><c- g>focusableAreas</c-></a>(<c- b>optional</c-> <a class="n" data-link-type="idl-name" href="#dictdef-focusableareasoption" id="ref-for-dictdef-focusableareasoption"><c- n>FocusableAreasOption</c-></a> <dfn class="idl-code" data-dfn-for="Element/focusableAreas(option), Element/focusableAreas()" data-dfn-type="argument" data-export id="dom-element-focusableareas-option-option"><code><c- g>option</c-></code><a class="self-link" href="#dom-element-focusableareas-option-option"></a></dfn>);
    <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node④"><c- n>Node</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="Element" data-dfn-type="method" data-export data-lt="spatialNavigationSearch(dir, options)|spatialNavigationSearch(dir)" id="dom-element-spatialnavigationsearch"><code><c- g>spatialNavigationSearch</c-></code></dfn>(<a class="n" data-link-type="idl-name" href="#enumdef-spatialnavigationdirection" id="ref-for-enumdef-spatialnavigationdirection①"><c- n>SpatialNavigationDirection</c-></a> <dfn class="idl-code" data-dfn-for="Element/spatialNavigationSearch(dir, options), Element/spatialNavigationSearch(dir)" data-dfn-type="argument" data-export id="dom-element-spatialnavigationsearch-dir-options-dir"><code><c- g>dir</c-></code><a class="self-link" href="#dom-element-spatialnavigationsearch-dir-options-dir"></a></dfn>, <c- b>optional</c-> <a class="n" data-link-type="idl-name" href="#dictdef-spatialnavigationsearchoptions" id="ref-for-dictdef-spatialnavigationsearchoptions"><c- n>SpatialNavigationSearchOptions</c-></a> <dfn class="idl-code" data-dfn-for="Element/spatialNavigationSearch(dir, options), Element/spatialNavigationSearch(dir)" data-dfn-type="argument" data-export id="dom-element-spatialnavigationsearch-dir-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-element-spatialnavigationsearch-dir-options-options"></a></dfn>);
};
</pre>
            <p class="note" role="note"><span>注:</span> 方向の表現方法は、今後必要に応じて4方向以上への拡張が可能です。
                より多くの方向キーワードや数値による角度指定も追加できます。</p>
            <p class="note" role="note"><span>注:</span> <code
                    class="idl"><a data-link-type="idl" href="#dom-element-focusableareas" id="ref-for-dom-element-focusableareas②">focusableAreas()</a></code>
                および<code
                    class="idl"><a data-link-type="idl" href="#dom-element-getspatialnavigationcontainer" id="ref-for-dom-element-getspatialnavigationcontainer②">getSpatialNavigationContainer()</a></code>
                メソッドは<a data-link-type="dfn" href="#at-risk" id="ref-for-at-risk">リスクあり</a>です。</p>
            <p>これらのメソッドが呼び出されたとき、
                ユーザーエージェントは以下に示す手順を実行しなければなりません：</p>
            <div class="algorithm" data-algorithm="getSpatialNavigationContainer steps">
                <dl>
                    <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Element" data-dfn-type="method"
                            data-export
                            id="dom-element-getspatialnavigationcontainer"><code>getSpatialNavigationContainer()</code></dfn>
                    <dd data-md>
                        <ol>
                            <li data-md>
                                <p>要素の最も近い祖先である<a data-link-type="dfn" href="#spatial-navigation-containers"
                                        id="ref-for-spatial-navigation-containers⑧">空間ナビゲーションコンテナ</a>を返す。
                                    ただし、最も近い<span
                                        id="ref-for-spatial-navigation-containers⑨">空間ナビゲーションコンテナ</span>がビューポートである場合は<a
                                        data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                                        id="ref-for-concept-document">document</a>を返す。</p>
                        </ol>
                        <p class="note" role="note"><span>注:</span> 要素自体が<a data-link-type="dfn"
                                href="#spatial-navigation-containers"
                                id="ref-for-spatial-navigation-containers①⓪">空間ナビゲーションコンテナ</a>の場合も、<code
                                class="idl"><a data-link-type="idl" href="#dom-element-getspatialnavigationcontainer" id="ref-for-dom-element-getspatialnavigationcontainer③">getSpatialNavigationContainer()</a></code>
                            は最も近い<span id="ref-for-spatial-navigation-containers①①">空間ナビゲーションコンテナ</span>（要素自身ではない）を返します。
                        </p>
                </dl>
            </div>
            <div class="algorithm" data-algorithm="focusableAreas steps">
                <dl>
                    <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Element" data-dfn-type="method"
                            data-export data-lt="focusableAreas(option)|focusableAreas()"
                            id="dom-element-focusableareas"><code>focusableAreas(<var>option</var>)</code></dfn>
                    <dd data-md>
                        <ol>
                            <li data-md>
                                <p><var>option</var>が存在し、その値が
                                    <code><a class="property" data-link-type="propdesc" href="https://www.w3.org/TR/css-cascade-4/#propdef-all" id="ref-for-propdef-all">all</a></code>と等しい場合は
                                    <var>visibleOnly</var>を<code>false</code>に、そうでなければ<code>true</code>にする。
                                </p>
                            <li data-md>
                                <p>要素内で<var>visibleOnly</var>を引数として<a data-link-type="dfn" href="#find-focusable-areas"
                                        id="ref-for-find-focusable-areas">フォーカス可能エリアの検索</a>を行い、その結果を<var>areas</var>とする。
                                </p>
                            <li data-md>
                                <p><var>areas</var>を返す。</p>
                        </ol>
                </dl>
            </div>
            <div class="example" id="focusAreas-visible">
                <a class="self-link" href="#focusAreas-visible"></a> 以下のコードは、現在のページ内で表示されている全てのフォーカス可能要素を<code
                    class="idl"><a data-link-type="idl" href="#dom-element-focusableareas" id="ref-for-dom-element-focusableareas③">focusableAreas()</a></code>で取得する方法を示します。
                メソッドが<a data-link-type="dfn" href="#spatial-navigation-containers"
                    id="ref-for-spatial-navigation-containers①②">空間ナビゲーションコンテナ</a>を見つけた場合、その内部のフォーカス可能エリアも再帰的に検索します。
                このメソッドの<code
                    class="idl"><a data-link-type="idl" href="#dom-focusableareasoption-mode" id="ref-for-dom-focusableareasoption-mode">mode</a></code>属性値が<code>visible</code>なので、
                <a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scrollport"
                    id="ref-for-scrollport③">scrollport</a>の外にある要素は結果から除外されます。
                <pre><code class="highlight"><c- p>&lt;</c-><c- f>body</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>button</c-><c- p>>&lt;/</c-><c- f>button</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>div</c-> <c- e>style</c-><c- o>=</c-><c- s>"width:300px; height:200px; overflow-x: scroll;"</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>button</c-> <c- e>style</c-><c- o>=</c-><c- s>"left:25px;"</c-><c- p>>&lt;/</c-><c- f>button</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>button</c-> <c- e>style</c-><c- o>=</c-><c- s>"left:150px;"</c-><c- p>>&lt;/</c-><c- f>button</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>button</c-> <c- e>style</c-><c- o>=</c-><c- s>"left:350px;"</c-><c- p>>&lt;/</c-><c- f>button</c-><c- p>></c->
    <c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>body</c-><c- p>></c->
</code></pre>
                <pre><code class="highlight"><c- kr>const</c-> focusableAreas <c- o>=</c-> document<c- p>.</c->body<c- p>.</c->focusableAreas<c- p>({</c->mode<c- o>:</c-> <c- t>'visible'</c-><c- p>});</c->
focusableAreas <c- o>&amp;&amp;</c-> focusableAreas<c- p>.</c->forEach<c- p>(</c->focusable <c- p>=></c-> <c- p>{</c->
  focusable<c- p>.</c->style<c- p>.</c->outline <c- o>=</c-> <c- t>'5px solid red'</c-><c- p>;</c->
<c- p>});</c->
</code></pre>
                <p>下図はこのコードの実行結果です。</p>
                <figure>
                    <img alt="An image about focusableAreas()"
                        src="https://www.w3.org/TR/css-nav-1/images/focusableareas-visible-example.png"
                        style="width: 450px;">
                    <figcaption>ドキュメント内の全ての表示フォーカス可能エリアを検索する。</figcaption>
                </figure>
            </div>
            <div class="algorithm" data-algorithm="spatialNavigationSearch steps">
                <dl>
                    <dt data-md><dfn class="idl-code" data-dfn-for="Element" data-dfn-type="method" data-export
                            data-lt="spatialNavigationSearch(options)"
                            id="dom-element-spatialnavigationsearch-options"><code>spatialNavigationSearch(<var>dir</var>, <var>options</var>)</code><a
                                class="self-link" href="#dom-element-spatialnavigationsearch-options"></a></dfn>
                    <dd data-md>
                        <ol>
                            <li data-md>
                                <p><var>direction</var>を<var>dir</var>の値とする。</p>
                            <li data-md>
                                <p><var>container</var>を以下のように決定する：</p>
                                <ul>
                                    <li data-md>
                                        <p><var>options</var>の<code
                                                class="idl"><a data-link-type="idl" href="#dom-spatialnavigationsearchoptions-container" id="ref-for-dom-spatialnavigationsearchoptions-container">container</a></code>属性値がnullでない場合、
                                        </p>
                                        <ul>
                                            <li data-md>
                                                <p>自身が<a data-link-type="dfn" href="#spatial-navigation-containers"
                                                        id="ref-for-spatial-navigation-containers①③">空間ナビゲーションコンテナ</a>であれば自身。
                                                </p>
                                            <li data-md>
                                                <p>そうでなければ最も近い<a data-link-type="dfn"
                                                        href="#spatial-navigation-containers"
                                                        id="ref-for-spatial-navigation-containers①④">空間ナビゲーションコンテナ</a>祖先。
                                                </p>
                                        </ul>
                                    <li data-md>
                                        <p>そうでない場合は、要素の最も近い<a data-link-type="dfn" href="#spatial-navigation-containers"
                                                id="ref-for-spatial-navigation-containers①⑤">空間ナビゲーションコンテナ</a>祖先。</p>
                                </ul>
                            <li data-md>
                                <p><var>areas</var>を以下のように決定する：</p>
                                <ul>
                                    <li data-md>
                                        <p><var>options</var>の<code
                                                class="idl"><a data-link-type="idl" href="#dom-spatialnavigationsearchoptions-candidates" id="ref-for-dom-spatialnavigationsearchoptions-candidates">candidates</a></code>属性値が<code>null</code>でなければその値、
                                        </p>
                                    <li data-md>
                                        <p>そうでなければ<var>container</var>内で<a data-link-type="dfn"
                                                href="#find-focusable-areas"
                                                id="ref-for-find-focusable-areas①">フォーカス可能エリアの検索</a>の結果。</p>
                                </ul>
                            <li data-md>
                                <p>要素から<var>direction</var>方向で<var>container</var>内の<var>areas</var>の中から<a
                                        data-link-type="dfn" href="#select-the-best-candidate"
                                        id="ref-for-select-the-best-candidate">最適な候補の選択</a>の結果を返す。</p>
                        </ol>
                </dl>
                <p class="note" role="note"><span>注:</span> containerも候補リストも指定されていない場合は、
                    最も近い<a data-link-type="dfn" href="#spatial-navigation-containers"
                        id="ref-for-spatial-navigation-containers①⑥">空間ナビゲーションコンテナ</a>祖先内の
                    表示フォーカス可能エリアのみを検索します。<em>もし存在しない場合は祖先チェーンをさらに遡らず、結果は<code>null</code>になります。</em></p>
            </div>
        </div>
        <div class="api">
            <h2 class="heading settled" data-level="6" id="events-navigationevent"><span class="secno">6. </span><span
                    class="content">ナビゲーションイベント</span><a class="self-link" href="#events-navigationevent"></a>
            </h2>
            <h3 class="heading settled" data-level="6.1" id="interface-focusevent"><span class="secno">6.1. </span><span
                    class="content">インターフェース NavigationEvent</span><a class="self-link"
                    href="#interface-focusevent"></a></h3>
            <p><code
                    class="idl"><a data-link-type="idl" href="#navigationevent" id="ref-for-navigationevent①">NavigationEvent</a></code>
                インターフェースは、空間ナビゲーションに関連した特定のコンテキスト情報を提供します。</p>
            <p><code
                    class="idl"><a data-link-type="idl" href="#navigationevent" id="ref-for-navigationevent②">NavigationEvent</a></code>
                インターフェースのインスタンスを作成するには、<code
                    class="idl"><a data-link-type="idl" href="#navigationevent" id="ref-for-navigationevent③">NavigationEvent</a></code>
                コンストラクターを使用し、
                オプションの <code
                    class="idl"><a data-link-type="idl" href="#dictdef-navigationeventinit" id="ref-for-dictdef-navigationeventinit">NavigationEventInit</a></code>
                辞書を渡します。</p>
            <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="navigationevent"><code><c- g>NavigationEvent</c-></code></dfn> : <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/uievents/#uievent" id="ref-for-uievent①"><c- n>UIEvent</c-></a> {
    <dfn class="idl-code" data-dfn-for="NavigationEvent" data-dfn-type="constructor" data-export data-lt="NavigationEvent(type, eventInitDict)|constructor(type, eventInitDict)|NavigationEvent(type)|constructor(type)" id="dom-navigationevent-navigationevent"><code><c- g>constructor</c-></code><a class="self-link" href="#dom-navigationevent-navigationevent"></a></dfn>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="NavigationEvent/constructor(type, eventInitDict), NavigationEvent/constructor(type)" data-dfn-type="argument" data-export id="dom-navigationevent-constructor-type-eventinitdict-type"><code><c- g>type</c-></code><a class="self-link" href="#dom-navigationevent-constructor-type-eventinitdict-type"></a></dfn>,
                <c- b>optional</c-> <a class="n" data-link-type="idl-name" href="#dictdef-navigationeventinit" id="ref-for-dictdef-navigationeventinit①"><c- n>NavigationEventInit</c-></a> <dfn class="idl-code" data-dfn-for="NavigationEvent/constructor(type, eventInitDict), NavigationEvent/constructor(type)" data-dfn-type="argument" data-export id="dom-navigationevent-constructor-type-eventinitdict-eventinitdict"><code><c- g>eventInitDict</c-></code><a class="self-link" href="#dom-navigationevent-constructor-type-eventinitdict-eventinitdict"></a></dfn>);
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="n" data-link-type="idl-name" href="#enumdef-spatialnavigationdirection" id="ref-for-enumdef-spatialnavigationdirection②"><c- n>SpatialNavigationDirection</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="NavigationEvent" data-dfn-type="attribute" data-export data-readonly data-type="SpatialNavigationDirection" id="dom-navigationevent-dir"><code><c- g>dir</c-></code></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget"><c- n>EventTarget</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="NavigationEvent" data-dfn-type="attribute" data-export data-readonly data-type="EventTarget?" id="dom-navigationevent-relatedtarget"><code><c- g>relatedTarget</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-navigationeventinit"><code><c- g>NavigationEventInit</c-></code></dfn> : <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/uievents/#dictdef-uieventinit" id="ref-for-dictdef-uieventinit"><c- n>UIEventInit</c-></a> {
    <a class="n" data-link-type="idl-name" href="#enumdef-spatialnavigationdirection" id="ref-for-enumdef-spatialnavigationdirection③"><c- n>SpatialNavigationDirection</c-></a> <dfn class="idl-code" data-dfn-for="NavigationEventInit" data-dfn-type="dict-member" data-export data-type="SpatialNavigationDirection " id="dom-navigationeventinit-dir"><code><c- g>dir</c-></code><a class="self-link" href="#dom-navigationeventinit-dir"></a></dfn>;
    <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget①"><c- n>EventTarget</c-></a>? <dfn class="idl-code" data-default="null" data-dfn-for="NavigationEventInit" data-dfn-type="dict-member" data-export data-type="EventTarget? " id="dom-navigationeventinit-relatedtarget"><code><c- g>relatedTarget</c-></code><a class="self-link" href="#dom-navigationeventinit-relatedtarget"></a></dfn> = <c- b>null</c->;
};
</pre>
            <div class="verbose">
                <h3 class="non-normative heading settled" data-level="6.2" id="events-nav-type"><span class="secno">6.2.
                    </span><span class="content">ナビゲーションイベントタイプ</span><a class="self-link" href="#events-nav-type"></a>
                </h3>
                <p><em>このセクションおよびそのサブセクションは規範的ではありません。</em></p>
                <p>ナビゲーションイベントタイプの概要は以下の通りです。
                    詳細な規範的記述は <a href="#processing-model">§ 8 処理モデル</a> を参照してください。</p>
                <h4 class="non-normative heading settled" data-level="6.2.1" id="event-type-navbeforefocus"><span
                        class="secno">6.2.1. </span><span class="content"> <dfn class="dfn-paneled idl-code"
                            data-dfn-for="NavigationEvent" data-dfn-type="event" data-export
                            id="eventdef-navigationevent-navbeforefocus"><code>navbeforefocus</code></dfn></span><a
                        class="self-link" href="#event-type-navbeforefocus"></a></h4>
                <p>このイベントは、<a data-link-type="dfn" href="#select-the-best-candidate"
                        id="ref-for-select-the-best-candidate①">最適な候補の選択</a>結果が有効な場合に発生します。</p>
                <table class="def">
                    <tbody>
                        <tr>
                            <th>タイプ
                            <td><strong><code>navbeforefocus</code></strong>
                        <tr>
                            <th>インターフェース
                            <td><code
                                    class="idl"><a data-link-type="idl" href="#navigationevent" id="ref-for-navigationevent④">NavigationEvent</a></code>
                        <tr>
                            <th>バブル
                            <td>はい
                        <tr>
                            <th>キャンセル可能
                            <td>はい
                        <tr>
                            <th>イベントの属性
                            <td>
                                <dl>
                                    <dt><code
                                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event">Event</a></code>.<code
                                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-target" id="ref-for-dom-event-target">target</a></code>
                                    <dd>フォーカスされた要素、または要素がフォーカスされていない場合は
                                        <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/dom.html#the-body-element-2"
                                            id="ref-for-the-body-element-2">body要素</a>（利用可能であれば）、そうでなければルート要素
                                    <dt><code
                                            class="idl"><a data-link-type="idl" href="#navigationevent" id="ref-for-navigationevent⑤">NavigationEvent</a></code>.<code
                                            class="idl"><a data-link-type="idl" href="#dom-navigationevent-relatedtarget" id="ref-for-dom-navigationevent-relatedtarget">relatedTarget</a></code>
                                    <dd>フォーカスされる予定のフォーカス可能エリアのDOMアンカー
                                    <dt><code
                                            class="idl"><a data-link-type="idl" href="#navigationevent" id="ref-for-navigationevent⑥">NavigationEvent</a></code>.<code
                                            class="idl"><a data-link-type="idl" href="#dom-navigationevent-dir" id="ref-for-dom-navigationevent-dir">dir</a></code>
                                    <dd>ユーザーが要求したナビゲーションの方向
                                </dl>
                </table>
                <p>ユーザーエージェントは、空間ナビゲーションがフォーカスを移動する前に <dfn class="dfn-paneled" data-dfn-type="dfn"
                        data-lt="dispatches navbeforefocus event | dispatching navbeforefocus event" data-noexport
                        id="dispatches-navbeforefocus-event"> <a class="idl-code" data-link-type="event"
                            href="#eventdef-navigationevent-navbeforefocus"
                            id="ref-for-eventdef-navigationevent-navbeforefocus">navbeforefocus</a> イベントを発火します</dfn>。
                    <a data-link-type="dfn" href="https://w3c.github.io/uievents/#event-target"
                        id="ref-for-event-target">イベントターゲット</a>は現在フォーカスされている要素であり、
                    <code
                        class="idl"><a data-link-type="idl" href="#dom-navigationevent-relatedtarget" id="ref-for-dom-navigationevent-relatedtarget①">relatedTarget</a></code>
                    はこれからフォーカスされる要素です。
                </p>
                <p><a data-link-type="dfn" href="#navigation-override"
                        id="ref-for-navigation-override">navigation-override</a> が <var>eventTarget</var> の
                    <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document"
                        id="ref-for-concept-node-document">ノードドキュメント</a>で無効な場合、
                    <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin"
                        id="ref-for-concept-origin">アクティブドキュメント</a>の
                    <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context"
                        id="ref-for-top-level-browsing-context">トップレベル閲覧コンテキスト</a>のオリジンに対して、このイベントは発火されません。
                </p>
                <div class="example" id="example-feaa7715">
                    <a class="self-link" href="#example-feaa7715"></a> この例は <a
                        href="https://www.w3.org/TR/uievents/#event-order">UI Events §event-order</a> で <code
                        class="key">ArrowRight</code> キーを押した場合の挙動を示します。
                    説明を簡単にするため、この例では空間ナビゲーションが矢印キーでトリガーされるユーザーエージェントを想定しています。
                    <table class="complex data">
                        <thead>
                            <tr>
                                <th>
                                <th>イベントタイプ
                                <th><code
                                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/uievents/#keyboardevent" id="ref-for-keyboardevent">KeyboardEvent</a></code>.<code
                                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/uievents/#dom-keyboardevent-key" id="ref-for-dom-keyboardevent-key">key</a></code>
                                <th>備考
                        <tbody>
                            <tr>
                                <td>1
                                <td>keydown
                                <td><code class="key">ArrowRight</code>
                                <td>空間ナビゲーションを有効化できるキー（矢印キーなど）でなければならない。そうでなければ空間ナビゲーションは発動しない。
                            <tr>
                                <td>2
                                <td>navbeforefocus
                                <td>
                                <td>空間ナビゲーションの候補が <code>null</code> でなければ送信され、そうでなければ生成されない。
                            <tr>
                                <td>3
                                <td>focusin
                                <td>
                                <td>ターゲット要素がフォーカスを受ける直前に送信される。
                            <tr>
                                <td>4
                                <td>focus
                                <td>
                                <td>ターゲット要素がフォーカスを受けた後に送信される。
                    </table>
                </div>
                <div class="example" id="delegation">
                    <a class="self-link" href="#delegation"></a> 以下のコードは空間ナビゲーションの挙動を変更し、
                    スクロールコンテナがフォーカスされる場合、少なくとも1つの表示フォーカス可能な子孫要素があれば
                    フォーカスがそれに（再帰的に）移動するようにしています。
                    <pre><code class="highlight">document<c- p>.</c->addEventListener<c- p>(</c-><c- t>'navbeforefocus'</c-><c- p>,</c-> e <c- p>=></c-> <c- p>{</c->
    e<c- p>.</c->preventDefault<c- p>();</c->

    <c- a>let</c-> nextTarget <c- o>=</c-> e<c- p>.</c->relatedTarget<c- p>;</c->
    <c- k>if</c-> <c- p>(</c->isSpatialNavigationContainer<c- p>(</c->nextTarget<c- p>))</c-> <c- p>{</c->
        <c- kr>const</c-> areas <c- o>=</c-> nextTarget<c- p>.</c->focusableAreas<c- p>();</c->

        <c- k>if</c-> <c- p>(</c->areas<c- p>.</c->length <c- o>></c-> <c- mi>0</c-><c- p>)</c-> <c- p>{</c->
            nextTarget <c- o>=</c-> nextTarget<c- p>.</c->spatialNavigationSearch<c- p>(</c->e<c- p>.</c->dir<c- p>,</c-> <c- p>{</c-> candidates<c- o>:</c-> areas <c- p>});</c->
        <c- p>}</c->
    <c- p>}</c->
    nextTarget<c- p>.</c->focus<c- p>();</c->
<c- p>});</c->

<c- a>function</c-> isSpatialNavigationContainer<c- p>(</c->element<c- p>)</c-> <c- p>{</c->
    <c- k>return</c-> <c- p>(</c-><c- o>!</c->element<c- p>.</c->parentElement<c- p>)</c-> <c- o>||</c->
        <c- p>(</c->element<c- p>.</c->nodeName <c- o>===</c-> <c- t>'IFRAME'</c-><c- p>)</c-> <c- o>||</c->
        <c- p>(</c->isScrollContainer<c- p>(</c->element<c- p>))</c-> <c- o>||</c->
        <c- p>(</c->isCSSSpatNavContain<c- p>(</c->element<c- p>));</c->
<c- p>}</c->
</code></pre>
                </div>
                <h4 class="non-normative heading settled" data-level="6.2.2" id="event-type-navnotarget"><span
                        class="secno">6.2.2. </span><span class="content"> <dfn class="dfn-paneled idl-code"
                            data-dfn-for="NavigationEvent" data-dfn-type="event" data-export
                            id="eventdef-navigationevent-navnotarget"><code>navnotarget</code></dfn></span><a
                        class="self-link" href="#event-type-navnotarget"></a></h4>
                <p>このイベントは、空間ナビゲーションが現在の<span
                        id="ref-for-spatial-navigation-containers①⑧">空間ナビゲーションコンテナ</span>内で候補を見つけられなかった場合に
                    最も近い祖先<a data-link-type="dfn" href="#spatial-navigation-containers"
                        id="ref-for-spatial-navigation-containers①⑦">空間ナビゲーションコンテナ</a>で候補を検索するために
                    ツリーを上がる直前、または<span id="ref-for-spatial-navigation-containers①⑨">空間ナビゲーションコンテナ</span>がスクロール可能で
                    それ以上スクロールできない場合に発生します。</p>
                <table class="def">
                    <tbody>
                        <tr>
                            <th>タイプ
                            <td><strong><code>navnotarget</code></strong>
                        <tr>
                            <th>インターフェース
                            <td><code
                                    class="idl"><a data-link-type="idl" href="#navigationevent" id="ref-for-navigationevent⑦">NavigationEvent</a></code>
                        <tr>
                            <th>バブル
                            <td>はい
                        <tr>
                            <th>キャンセル可能
                            <td>はい
                        <tr>
                            <th>イベントの属性
                            <td>
                                <dl>
                                    <dt><code
                                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event①">Event</a></code>.<code
                                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-target" id="ref-for-dom-event-target①">target</a></code>
                                    <dd>フォーカスされた要素、または要素がフォーカスされていない場合は
                                        <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/dom.html#the-body-element-2"
                                            id="ref-for-the-body-element-2①">body要素</a>（利用可能であれば）、そうでなければルート要素
                                    <dt><code
                                            class="idl"><a data-link-type="idl" href="#navigationevent" id="ref-for-navigationevent⑧">NavigationEvent</a></code>.<code
                                            class="idl"><a data-link-type="idl" href="#dom-navigationevent-relatedtarget" id="ref-for-dom-navigationevent-relatedtarget②">relatedTarget</a></code>
                                    <dd>検索対象となった<a data-link-type="dfn" href="#spatial-navigation-containers"
                                            id="ref-for-spatial-navigation-containers②⓪">空間ナビゲーションコンテナ</a>
                                    <dt><code
                                            class="idl"><a data-link-type="idl" href="#navigationevent" id="ref-for-navigationevent⑨">NavigationEvent</a></code>.<code
                                            class="idl"><a data-link-type="idl" href="#dom-navigationevent-dir" id="ref-for-dom-navigationevent-dir①">dir</a></code>
                                    <dd>ユーザーが要求したナビゲーションの方向
                                </dl>
                </table>
                <p>ユーザーエージェントは、<a data-link-type="dfn" href="https://w3c.github.io/uievents/#event-target"
                        id="ref-for-event-target①">イベントターゲット</a>を現在フォーカスされている要素、
                    <code
                        class="idl"><a data-link-type="idl" href="#dom-navigationevent-relatedtarget" id="ref-for-dom-navigationevent-relatedtarget③">relatedTarget</a></code>
                    を<span id="ref-for-event-target②">イベントターゲット</span>の<a data-link-type="dfn"
                        href="#spatial-navigation-containers"
                        id="ref-for-spatial-navigation-containers②①">空間ナビゲーションコンテナ</a>として初期化し <dfn class="dfn-paneled"
                        data-dfn-type="dfn" data-lt="dispatches navnotarget event | dispatching navnotarget event"
                        data-noexport id="dispatches-navnotarget-event"><a class="idl-code" data-link-type="event"
                            href="#eventdef-navigationevent-navnotarget"
                            id="ref-for-eventdef-navigationevent-navnotarget">navnotarget</a>イベントを発火します</dfn>。
                </p>
                <p><a data-link-type="dfn" href="#navigation-override"
                        id="ref-for-navigation-override①">navigation-override</a> が <var>eventTarget</var> の
                    <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document"
                        id="ref-for-concept-node-document①">ノードドキュメント</a>で無効な場合、
                    <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin"
                        id="ref-for-concept-origin①">アクティブドキュメント</a>の
                    <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context"
                        id="ref-for-top-level-browsing-context①">トップレベル閲覧コンテキスト</a>のオリジンに対して、このイベントは発火されません。
                </p>
                <div class="example" id="example-e7e46248">
                    <a class="self-link" href="#example-e7e46248"></a> この例は、次の図のような状況で <code
                        class="key">ArrowDown</code> キーを押した際の <a href="https://www.w3.org/TR/uievents/#event-order">UI
                        Events §event-order</a> の挙動を示します。
                    説明を簡単にするため、この例では空間ナビゲーションが矢印キーでトリガーされるユーザーエージェントを想定しています。
                    <figure>
                        <img alt="An image about navnotarget"
                            src="https://www.w3.org/TR/css-nav-1/images/navnotarget-example-1.png"
                            style="width: 200px;">
                        <figcaption><a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                                id="ref-for-scroll-container">スクロールコンテナ</a>内に候補がない場合のフォーカス移動</figcaption>
                    </figure>
                    <table class="complex data">
                        <thead>
                            <tr>
                                <th>
                                <th>イベントタイプ
                                <th>イベントターゲット
                                <th><code>relatedTarget</code>
                                <th>備考
                        <tbody>
                            <tr>
                                <td>1
                                <td>keydown
                                <td><code>#box2</code>
                                <td>N/A
                                <td>空間ナビゲーションを有効化できるキー（矢印キーなど）でなければならない。そうでなければ空間ナビゲーションは発動しない。
                            <tr>
                                <td>2
                                <td>navnotarget
                                <td><code>#box2</code>
                                <td><code>#scrollContainer</code>
                                <td><code>#scrollContainer</code> に候補が存在せず、スクロールもできない場合に送信される。そうでなければ生成されない。
                            <tr>
                                <td>3
                                <td>navbeforefocus
                                <td><code>#box2</code>
                                <td><code>#box3</code>
                                <td><code>#container</code> 内の候補が <code>null</code> でなければ送信され、そうでなければ発火しない。
                            <tr>
                                <td>4
                                <td>focusin
                                <td><code>#box3</code>
                                <td><code>#box2</code>
                                <td>ターゲット要素がフォーカスを受ける直前に送信される。
                            <tr>
                                <td>5
                                <td>focus
                                <td><code>#box3</code>
                                <td><code>#box2</code>
                                <td>ターゲット要素がフォーカスを受けた後に送信される。
                    </table>
                    <p>この例の結果は次の図の通りです：</p>
                    <figure>
                        <img alt="An image of the result about navnotarget"
                            src="https://www.w3.org/TR/css-nav-1/images/navnotarget-example-2.png"
                            style="width: 200px;">
                        <figcaption><a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scrollport"
                                id="ref-for-scrollport④">scrollport</a> や <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                                id="ref-for-scroll-container①">スクロールコンテナ</a>内に候補がなく、スクロールできない場合のフォーカス移動結果</figcaption>
                    </figure>
                    <p>この例のマークアップ：</p>
                    <pre class="lang-css highlight"><c- f>#container </c-><c- p>{</c->
    <c- k>width</c-><c- p>:</c-> <c- m>900</c-><c- l>px</c-><c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <c- m>1400</c-><c- l>px</c-><c- p>;</c->
<c- p>}</c->

<c- f>#scrollContainer </c-><c- p>{</c->
    <c- k>width</c-><c- p>:</c-> <c- m>700</c-><c- l>px</c-><c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <c- m>700</c-><c- l>px</c-><c- p>;</c->
    <c- k>overflow-x</c-><c- p>:</c-> hidden<c- p>;</c->
    <c- k>overflow-y</c-><c- p>:</c-> auto<c- p>;</c->
<c- p>}</c->

<c- f>.item </c-><c- p>{</c->
    <c- k>width</c-><c- p>:</c-> <c- m>150</c-><c- l>px</c-><c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <c- m>110</c-><c- l>px</c-><c- p>;</c->
    <c- k>background-color</c-><c- p>:</c-> blue<c- p>;</c->
<c- p>}</c->

<c- f>.item:focus </c-><c- p>{</c->
    <c- k>background-color</c-><c- p>:</c-> red<c- p>;</c->
<c- p>}</c->
</pre>
                    <pre class="lang-html highlight"><c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>"container"</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>"scrollContainer"</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>"box1"</c-> <c- e>class</c-><c- o>=</c-><c- s>"item"</c-> <c- e>tabindex</c-><c- o>=</c-><c- s>"0"</c-><c- p>></c->Box 1<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>"box2"</c-> <c- e>class</c-><c- o>=</c-><c- s>"item"</c-> <c- e>tabindex</c-><c- o>=</c-><c- s>"0"</c-><c- p>></c->Box 2<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
    <c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>"box3"</c-> <c- e>class</c-><c- o>=</c-><c- s>"item"</c-> <c- e>tabindex</c-><c- o>=</c-><c- s>"0"</c-><c- p>></c->Box 3<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</pre>
                </div>
                <div class="example" id="loop">
                    <a class="self-link" href="#loop"></a> 以下のコードは、<a data-link-type="dfn"
                        href="#spatial-navigation-containers"
                        id="ref-for-spatial-navigation-containers②②">垂直スクロール可能な空間ナビゲーションコンテナ</a>内で
                    フォーカスを閉じ込めるよう空間ナビゲーションの挙動を変更します。
                    要求された方向にこれ以上フォーカス可能な要素がなく、
                    <span id="ref-for-spatial-navigation-containers②③">空間ナビゲーションコンテナ</span>がそれ以上スクロールできない場合、
                    フォーカスは外に出ず反対側にループします。
                    <p>ただし、逐次ナビゲーションやマウス操作、
                        <code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-focus" id="ref-for-dom-focus①">focus()</a></code>
                        のプログラム呼び出しでは外にフォーカス移動できます。
                    </p>
                    <pre><code class="highlight">scrollContainer<c- p>.</c->addEventListener<c- p>(</c-><c- t>'navnotarget'</c-><c- p>,</c-> e <c- p>=></c-> <c- p>{</c->
    <c- a>let</c-> nextTarget <c- o>=</c-> <c- kc>null</c-><c- p>;</c->
    <c- kr>const</c-> verticalDir <c- o>=</c-> <c- p>[</c-><c- t>'up'</c-><c- p>,</c-> <c- t>'down'</c-><c- p>];</c->
    <c- kr>const</c-> candidates <c- o>=</c-> e<c- p>.</c->relatedTarget<c- p>.</c->focusableAreas<c- p>({</c-><c- t>'mode'</c-><c- o>:</c-> <c- t>'all'</c-><c- p>});</c->

    <c- c1>// ナビゲーション方向がY軸の場合のみデフォルト動作を防止する</c->
    <c- k>if</c-> <c- p>(</c->verticalDir<c- p>.</c->includes<c- p>(</c->e<c- p>.</c->dir<c- p>)</c-> <c- o>&amp;&amp;</c-> <c- p>(</c->candidates<c- p>.</c->length <c- o>></c-> <c- mi>0</c-><c- p>))</c-> <c- p>{</c->
        e<c- p>.</c->preventDefault<c- p>();</c->

        <c- k>if</c-> <c- p>(</c->e<c- p>.</c->dir <c- o>===</c-> <c- t>'down'</c-><c- p>)</c-> <c- p>{</c->
            nextTarget <c- o>=</c-> candidates<c- p>[</c-><c- mi>0</c-><c- p>];</c->
        <c- p>}</c-> <c- k>else</c-> <c- k>if</c-> <c- p>(</c->e<c- p>.</c->dir <c- o>===</c-> <c- t>'up'</c-><c- p>)</c-> <c- p>{</c->
            nextTarget <c- o>=</c-> candidates<c- p>[</c->candidates<c- p>.</c->length<c- o>-</c-><c- mi>1</c-><c- p>];</c->
        <c- p>}</c->
        nextTarget<c- p>.</c->focus<c- p>();</c->
    <c- p>}</c->
<c- p>});</c->
</code></pre>
                </div>
            </div>
        </div>
        <h2 class="heading settled" data-level="7" id="policy-feature"><span class="secno">7. </span><span
                class="content"> <a data-link-type="dfn" href="#navigation-override"
                    id="ref-for-navigation-override②">navigation-override</a> <a data-link-type="dfn"
                    href="https://w3c.github.io/webappsec-feature-policy/#policy-controlled-feature"
                    id="ref-for-policy-controlled-feature">ポリシー制御機能</a></span><a class="self-link"
                href="#policy-feature"></a></h2>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="navigation-override">navigation-override</dfn>
            <a data-link-type="dfn" href="https://w3c.github.io/webappsec-feature-policy/#policy-controlled-feature"
                id="ref-for-policy-controlled-feature①">ポリシー制御機能</a>は、
            ページ著者が空間ナビゲーションの挙動を制御したり、完全にキャンセルできる仕組みの利用可否を制御します。
        </p>
        <ul>
            <li data-md>
                <p>この機能の名前は "<code>navigation-override</code>" です。</p>
            <li data-md>
                <p><a data-link-type="dfn" href="https://w3c.github.io/webappsec-feature-policy/#default-allowlist"
                        id="ref-for-default-allowlist">デフォルト許可リスト</a>は "<code>self</code>" です。</p>
        </ul>
        <p>詳細は <a href="#nav">§ 8.3 ナビゲーション</a> で定義されていますが、
            ドキュメントで<a data-link-type="dfn" href="#navigation-override"
                id="ref-for-navigation-override④">navigation-override</a>が無効化されている場合、
            ナビゲーションイベント（<a href="#events-navigationevent">§ 6 ナビゲーションイベント</a>参照）は発火しません。</p>
        <p class="note" role="note"><span>注:</span> これは悪意のあるiframeがフォーカスを乗っ取るためにこれらのイベントを利用するのを防ぐためです。
            空間ナビゲーション以前の時代から、著者がユーザーのフォーカス制御を妨害する他の手段が存在することも認識しています。
            それでも攻撃面を広げないようにする試みは価値があると考えますが、
            実際には既にこうした攻撃が容易な可能性もあるため、完全な防止は難しいかもしれません。
            実装や攻撃対策の経験に基づくフィードバックも歓迎します。</p>
        <h2 class="heading settled" data-level="8" id="processing-model"><span class="secno">8. </span><span
                class="content">処理モデル</span><a class="self-link" href="#processing-model"></a></h2>
        <div class="verbose">
            <a href="#overview">§ 3 概要</a>セクションは空間ナビゲーションの動作を高いレベルで説明し、
            この仕様を読む人が全体像をイメージしやすくするためのものです。
            直感的だが厳密でない用語を使い、可読性のため多くの詳細を省略しています。
            <p>このセクションでは対応する規範的な挙動を定義し、
                挙動の完全な定義に必要なだけ詳細に踏み込みます。</p>
        </div>
        <h3 class="heading settled" data-level="8.1" id="glossary"><span class="secno">8.1. </span><span
                class="content">用語集</span><a class="self-link" href="#glossary"></a></h3>
        <p>空間ナビゲーションの処理モデルを説明するために、以下の用語定義が記載されています。
            定義内のリンク先も参照してください。</p>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="boundary-box">boundary
                box</dfn>（境界ボックス）は次のように定義されます：</p>
        <ul>
            <li data-md>
                <p>対象が点の場合、その点自身がboundary boxです。</p>
            <li data-md>
                <p>対象が<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box"
                        id="ref-for-box">ボックス</a>または<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-break-4/#box-fragment"
                        id="ref-for-box-fragment">ボックスフラグメント</a>の場合、
                    そのボックスやフラグメントの<a data-link-type="dfn" href="https://drafts.csswg.org/css2/box.html#x14"
                        id="ref-for-x14">border box</a>です。</p>
            <li data-md>
                <p>対象が<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/interaction.html#focusable-area"
                        id="ref-for-focusable-area">focusable area</a>（要素でない）なら、その<span
                        id="ref-for-focusable-area①">focusable area</span>の軸揃えbounding boxです。</p>
        </ul>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="inside-area">inside
                area</dfn>（内側領域）は次のように定義されます：</p>
        <ul>
            <li data-md>
                <p>対象が<a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                        id="ref-for-scroll-container②">スクロールコンテナ</a>なら、<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-scroll-snap-1/#optimal-viewing-region"
                        id="ref-for-optimal-viewing-region">最適表示領域</a>です。</p>
            <li data-md>
                <p>対象が<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                        id="ref-for-concept-document①">document</a>なら、<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context"
                        id="ref-for-browsing-context">閲覧コンテキスト</a>のビューポートです。</p>
            <li data-md>
                <p>対象が<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box"
                        id="ref-for-box①">ボックス</a>または<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-break-4/#box-fragment"
                        id="ref-for-box-fragment①">ボックスフラグメント</a>なら、<a data-link-type="dfn" href="#boundary-box"
                        id="ref-for-boundary-box">boundary box</a>です。</p>
            <li data-md>
                <p>それ以外の場合は、最も近い祖先<a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                        id="ref-for-scroll-container③">スクロールコンテナ</a>の<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-scroll-snap-1/#optimal-viewing-region"
                        id="ref-for-optimal-viewing-region①">最適表示領域</a>です。</p>
        </ul>
        <p class="note" role="note"><span>注:</span> オブジェクトが画面外の場合、<a data-link-type="dfn" href="#inside-area"
                id="ref-for-inside-area">inside area</a>は最も近い表示中の祖先コンテナとすべきです。</p>
        <p class="issue" id="issue-c7f6d991"><a class="self-link" href="#issue-c7f6d991"></a>
            CSSは「border-radiusなど角形状プロパティを考慮したborder box」に対応する用語を持つべきです。<a
                href="https://github.com/w3c/csswg-drafts/issues/2324">&lt;https://github.com/w3c/csswg-drafts/issues/2324></a>
        </p>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="search-origin">search
                origin</dfn>は次のターゲット検索の起点です。</p>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="spatial-navigation-starting-point">spatial
                navigation starting point</dfn>は、ユーザーエージェントが設定する次のターゲット検索の起点で、初期状態では未設定です。値は要素または点です。</p>
        <p class="note" role="note"><span>注:</span> 例えば、ユーザーがドキュメント内容をクリックした場合にその位置をstarting
            pointに設定し、空間ナビゲーションや他の手段でフォーカスが移動した際に解除することができます。</p>
        <p>ユーザーエージェントが<a data-link-type="dfn" href="#spatial-navigation-starting-point"
                id="ref-for-spatial-navigation-starting-point">spatial navigation starting point</a>と
            <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/interaction.html#sequential-focus-navigation-starting-point"
                id="ref-for-sequential-focus-navigation-starting-point">逐次フォーカスナビゲーション起点</a>の両方を設定する場合、これらは別々に設定してはなりません。
        </p>
        <h3 class="heading settled" data-level="8.2" id="grouping"><span class="secno">8.2. </span><span
                class="content">要素のグループ化</span><a class="self-link" href="#grouping"></a></h3>
        <p>空間ナビゲーションの処理モデルはドキュメントのレイアウトとフォーカス可能要素の相対位置に基づいて動作しますが、
            ユーザーエージェントはローカルな論理グループ内で要素を優先的に探し、適切なものが見つからない場合のみグループ外も探索する必要があります（詳細は<a href="#nav">§ 8.3 ナビゲーション</a>参照）。
        </p>
        <p>このようなグループ化を <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="spatial-navigation-containers">空間ナビゲーションコンテナ</dfn>と呼びます。</p>
        <p><span class="cssapi">初期状態では</span><a data-link-type="dfn" href="#spatial-navigation-containers"
                id="ref-for-spatial-navigation-containers②④">空間ナビゲーションコンテナ</a>は次によって成立します：</p>
        <ul>
            <li data-md>
                <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context"
                        id="ref-for-browsing-context①">閲覧コンテキスト</a>のビューポート（<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context"
                        id="ref-for-top-level-browsing-context②">トップレベル閲覧コンテキスト</a>に限定されません）</p>
            <li data-md>
                <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                        id="ref-for-scroll-container④">スクロールコンテナ</a></p>
        </ul>
        <div class="cssapi"> <a data-link-type="dfn" href="#spatial-navigation-containers"
                id="ref-for-spatial-navigation-containers②⑤">空間ナビゲーションコンテナ</a>は
            <a class="property" data-link-type="propdesc" href="#propdef-spatial-navigation-contain"
                id="ref-for-propdef-spatial-navigation-contain②">spatial-navigation-contain</a>プロパティ（<a
                href="#container">§ 9.1 空間ナビゲーションコンテナの追加作成：spatial-navigation-containプロパティ</a>参照）で追加作成できます。
        </div>
        <h3 class="heading settled" data-level="8.3" id="nav"><span class="secno">8.3. </span><span class="content">
                ナビゲーション</span><a class="self-link" href="#nav"></a></h3>
        <p>空間ナビゲーションの処理モデルは、空間ナビゲーションの一般的な動作を説明します。</p>
        <figure class="verbose non-normative">
            <object data="images/spatnav_processing_model_diagram.svg" type="image/svg+xml"></object>
            <figcaption> 空間ナビゲーションの処理モデルの概要 <br> この図は規範的なものではありません。
                このセクションでさらに定義される処理モデルの概要を示しています。
                <a class="property" data-link-type="propdesc" href="#propdef-spatial-navigation-action"
                    id="ref-for-propdef-spatial-navigation-action①">spatial-navigation-action</a>プロパティが
                初期値<a class="css" data-link-type="maybe" href="#valdef-spatial-navigation-action-auto"
                    id="ref-for-valdef-spatial-navigation-action-auto">auto</a>である場合を前提としています。
            </figcaption>
        </figure>
        <div class="algorithm" data-algorithm="to run the spatial navigation steps">
            <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="spatial-navigation-steps">空間ナビゲーション手順</dfn>を<var>direction</var>で実行するには、以下を行います：
            <ol>
                <li data-md>
                    <p><var>searchOrigin</var>を<a data-link-type="dfn" href="#set-the-search-origin"
                            id="ref-for-set-the-search-origin">検索起点の設定</a>の結果とする。</p>
                <li data-md>
                    <ul>
                        <li data-md>
                            <p><var>searchOrigin</var>が<a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#boundary-point-node"
                                    id="ref-for-boundary-point-node">node</a>の場合、
                                <var>eventTarget</var>を<var>searchOrigin</var>とする
                            </p>
                        <li data-md>
                            <p>それ以外の場合（<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert"
                                    id="ref-for-assert">assert</a>: <var>searchOrigin</var>はposition）、
                                <var>eventTarget</var>を<var>searchOrigin</var>を含む<a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#boundary-point-node"
                                    id="ref-for-boundary-point-node①">node</a>とする
                            </p>
                    </ul>
                <li data-md>
                    <p><var>eventTarget</var>が<a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#concept-document"
                            id="ref-for-concept-document②">Document</a>または<a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#document-element" id="ref-for-document-element">document
                            element</a>の場合、
                        <var>eventTarget</var>を<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/dom.html#the-body-element-2"
                            id="ref-for-the-body-element-2②">body要素</a>（nullでなければ）または
                        そうでなければ<span id="ref-for-document-element①">document element</span>に設定する。
                    </p>
                <li data-md>
                    <ul>
                        <li class="cssapi"><var>eventTarget</var>が<a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                                id="ref-for-scroll-container⑤">スクロールコンテナ</a>であり、
                            その<a class="property" data-link-type="propdesc" href="#propdef-spatial-navigation-action"
                                id="ref-for-propdef-spatial-navigation-action②">spatial-navigation-action</a>プロパティの算出値が
                            <a class="css" data-link-type="maybe" href="#valdef-spatial-navigation-action-scroll"
                                id="ref-for-valdef-spatial-navigation-action-scroll">scroll</a>かつ
                            <var>eventTarget</var>が<a data-link-type="dfn" href="#can-be-manually-scrolled"
                                id="ref-for-can-be-manually-scrolled">手動スクロール可能</a>である場合、
                            <a data-link-type="dfn" href="#directionally-scroll-an-element"
                                id="ref-for-directionally-scroll-an-element">その要素を方向スクロール</a>し、終了。
                        </li>
                        <li>
                            <span class="cssapi">それ以外の場合</span>、<var>eventTarget</var>が<a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                                id="ref-for-scroll-container⑥">スクロールコンテナ</a>または<a data-link-type="dfn"
                                href="https://dom.spec.whatwg.org/#concept-document"
                                id="ref-for-concept-document③">document</a>の場合
                            <ol>
                                <li data-md>
                                    <p><var>candidates</var>を<a data-link-type="dfn" href="#find-focusable-areas"
                                            id="ref-for-find-focusable-areas②">フォーカス可能エリアの検索</a>を
                                        <var>eventTarget</var>内で実行し、<var>visibleOnly</var>引数は
                                        <span class="cssapi">
                                            <a class="property" data-link-type="propdesc"
                                                href="#propdef-spatial-navigation-action"
                                                id="ref-for-propdef-spatial-navigation-action③">spatial-navigation-action</a>プロパティの算出値が
                                            <a class="css" data-link-type="maybe"
                                                href="#valdef-spatial-navigation-action-focus"
                                                id="ref-for-valdef-spatial-navigation-action-focus">focus</a>なら<code>false</code>、
                                            それ以外なら<code>true</code>
                                        </span>
                                        とする。
                                    </p>
                                <li data-md>
                                    <ul>
                                        <li class="cssapi">
                                            <a class="property" data-link-type="propdesc"
                                                href="#propdef-spatial-navigation-action"
                                                id="ref-for-propdef-spatial-navigation-action④">spatial-navigation-action</a>プロパティの算出値が
                                            <a class="css" data-link-type="maybe"
                                                href="#valdef-spatial-navigation-action-focus"
                                                id="ref-for-valdef-spatial-navigation-action-focus①">focus</a>でなく、
                                            <var>eventTarget</var>が<a data-link-type="dfn"
                                                href="#can-be-manually-scrolled"
                                                id="ref-for-can-be-manually-scrolled①">手動スクロール可能</a>なら、
                                            <a data-link-type="dfn" href="#directionally-scroll-an-element"
                                                id="ref-for-directionally-scroll-an-element①">方向スクロール</a>し、終了。
                                        </li>
                                        <li>
                                            <span class="cssapi">それ以外</span>、<var>candidates</var>が1つ以上ある場合：
                                            <ol>
                                                <li data-md>
                                                    <p><var>bestCandidate</var>を<a data-link-type="dfn"
                                                            href="#select-the-best-candidate"
                                                            id="ref-for-select-the-best-candidate②">最適な候補の選択</a>を
                                                        <var>candidates</var>内で<var>direction</var>と<var>searchOrigin</var>で実行した結果とする。
                                                    </p>
                                                <li data-md>
                                                    <p><a data-link-type="dfn" href="#dispatches-navbeforefocus-event"
                                                            id="ref-for-dispatches-navbeforefocus-event">navbeforefocusイベント発火</a>を
                                                        <var>eventTarget</var>、<var>direction</var>、<var>bestCandidate</var>に対して行う。
                                                    </p>
                                                <li data-md>
                                                    <p><a data-link-type="dfn"
                                                            href="https://html.spec.whatwg.org/multipage/interaction.html#focusing-steps"
                                                            id="ref-for-focusing-steps">フォーカス手順</a>を<var>bestCandidate</var>に対して実行し、終了。
                                                    </p>
                                            </ol>
                                        </li>
                                        <li>それ以外は次のステップへ。
                                    </ul>
                            </ol>
                        <li>それ以外は次のステップへ。
                    </ul>
                <li data-md>
                    <p><var>container</var>を<var>eventTarget</var>の最も近い祖先で<a data-link-type="dfn"
                            href="#spatial-navigation-containers"
                            id="ref-for-spatial-navigation-containers②⑥">空間ナビゲーションコンテナ</a>であるものとする。</p>
                <li data-md>
                    <p><i>ループ</i>: <var>candidates</var>を<a data-link-type="dfn" href="#find-focusable-areas"
                            id="ref-for-find-focusable-areas③">フォーカス可能エリアの検索</a>を
                        <var>container</var>内で実行し、<var>visibleOnly</var>引数は
                        <span class="cssapi">
                            <a class="property" data-link-type="propdesc" href="#propdef-spatial-navigation-action"
                                id="ref-for-propdef-spatial-navigation-action⑤">spatial-navigation-action</a>プロパティの算出値が
                            <a class="css" data-link-type="maybe" href="#valdef-spatial-navigation-action-focus"
                                id="ref-for-valdef-spatial-navigation-action-focus②">focus</a>なら<code>false</code>、それ以外なら<code>true</code>
                            で、<var>eventTarget</var>を除外
                        </span>
                        とする。
                    </p>
                <li data-md>
                    <p><var>candidates</var>が空の場合：</p>
                <li class="cssapi"><a class="property" data-link-type="propdesc"
                        href="#propdef-spatial-navigation-action"
                        id="ref-for-propdef-spatial-navigation-action⑥">spatial-navigation-action</a>プロパティの算出値が
                    <a class="css" data-link-type="maybe" href="#valdef-spatial-navigation-action-focus"
                        id="ref-for-valdef-spatial-navigation-action-focus③">focus</a>でなく、
                    <var>container</var>が<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                        id="ref-for-scroll-container⑦">スクロールコンテナ</a>で
                    <a data-link-type="dfn" href="#can-be-manually-scrolled"
                        id="ref-for-can-be-manually-scrolled②">手動スクロール可能</a>なら、
                    <a data-link-type="dfn" href="#directionally-scroll-an-element"
                        id="ref-for-directionally-scroll-an-element②">方向スクロール</a>し、終了。
                </li>
                <li class="cssapi">それ以外の場合、
                    <ol>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#dispatches-navnotarget-event"
                                    id="ref-for-dispatches-navnotarget-event">navnotargetイベント発火</a>を
                                <var>eventTarget</var>、<var>direction</var>、<var>container</var>に対して行う。
                            </p>
                        <li data-md>
                            <ul>
                                <li data-md>
                                    <p><var>container</var>が<a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#document-element"
                                            id="ref-for-document-element②">document element</a>かつ
                                        <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context"
                                            id="ref-for-top-level-browsing-context③">トップレベル閲覧コンテキスト</a>の場合は終了。
                                        ユーザーエージェントは<var>direction</var>に従い自身のコントロール（あれば）にフォーカスを移してもよい。
                                    </p>
                                <li data-md>
                                    <p>それ以外で<var>container</var>が<a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#document-element"
                                            id="ref-for-document-element③">document element</a>かつ
                                        <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context"
                                            id="ref-for-nested-browsing-context">入れ子閲覧コンテキスト</a>の場合：
                                    </p>
                                    <ol>
                                        <li data-md>
                                            <p><var>searchOrigin</var>を<var>container</var>の<a data-link-type="dfn"
                                                    href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context-container"
                                                    id="ref-for-browsing-context-container">閲覧コンテナ</a>に設定</p>
                                        <li data-md>
                                            <p><var>eventTarget</var>を<var>searchOrigin</var>に設定</p>
                                        <li data-md>
                                            <p><var>container</var>を<var>eventTarget</var>の最も近い祖先で<a
                                                    data-link-type="dfn" href="#spatial-navigation-containers"
                                                    id="ref-for-spatial-navigation-containers②⑦">空間ナビゲーションコンテナ</a>に設定
                                            </p>
                                        <li data-md>
                                            <p><i>ループ</i>のステップに戻る。</p>
                                    </ol>
                                <li data-md>
                                    <p>それ以外は、<var>container</var>を自身の最も近い祖先で<a data-link-type="dfn"
                                            href="#spatial-navigation-containers"
                                            id="ref-for-spatial-navigation-containers②⑧">空間ナビゲーションコンテナ</a>に設定し、<i>ループ</i>に戻る。
                                    </p>
                            </ul>
                    </ol>
                <li data-md>
                    <p><var>bestCandidate</var>を<a data-link-type="dfn" href="#select-the-best-candidate"
                            id="ref-for-select-the-best-candidate③">最適な候補の選択</a>を
                        <var>candidates</var>内で<var>direction</var>と<var>eventTarget</var>で実行した結果とする。
                    </p>
                <li data-md>
                    <p><a data-link-type="dfn" href="#dispatches-navbeforefocus-event"
                            id="ref-for-dispatches-navbeforefocus-event①">navbeforefocusイベント発火</a>を
                        <var>eventTarget</var>、<var>direction</var>、<var>bestCandidate</var>に対して行う。
                    </p>
                <li data-md>
                    <p><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#focusing-steps"
                            id="ref-for-focusing-steps①">フォーカス手順</a>を<var>bestCandidate</var>に対して実行し、終了。</p>
            </ol>
        </div>
        <h3 class="heading settled" data-level="8.4" id="heuristics"><span class="secno">8.4. </span><span
                class="content"> フォーカスナビゲーションのヒューリスティクス</span><a class="self-link" href="#heuristics"></a></h3>
        <p class="note" role="note"><span>注:</span> 以下のアルゴリズムはChromeの実装や<a
                href="https://www.w3.org/TR/WICD/#focus-handling">旧WICD仕様</a>から着想を得ています。
            より良い手法や改良を見つけた実装者は、フィードバックを提供し本仕様の改善に協力することが強く推奨されます。
            特に、ユーザーエージェントごとに<a data-link-type="dfn" href="#find-focusable-areas"
                id="ref-for-find-focusable-areas④">フォーカス可能エリアの検索</a>方法が異なると、
            ある要素が一部のユーザーエージェントでフォーカス可能だが他ではそうでないという状況が生じ、
            これはユーザーにとって望ましくありません。</p>
        <p>このセクションの全ての幾何学的操作は、CSSレイアウトの結果上で定義されており、
            <a data-link-type="dfn" href="https://www.w3.org/TR/css3-positioning/#relative-position"
                id="ref-for-relative-position">相対位置指定</a>や
            <a data-link-type="biblio" href="#biblio-css-transforms-1">[CSS-TRANSFORMS-1]</a>など全てのグラフィック変形を含みます。
        </p>
        <div class="algorithm" data-algorithm="to set the search origin">
            <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="set the search origin | setting the search origin"
                    data-noexport id="set-the-search-origin"><a data-link-type="dfn" href="#search-origin"
                        id="ref-for-search-origin">検索起点</a>を設定する</dfn>には、以下の手順を実行します：</p>
            <ol>
                <li data-md>
                    <p><var>searchOrigin</var>を<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#dom-anchor"
                            id="ref-for-dom-anchor">DOMアンカー</a>（<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#currently-focused-area-of-a-top-level-browsing-context"
                            id="ref-for-currently-focused-area-of-a-top-level-browsing-context">トップレベル閲覧コンテキストの現在フォーカスされている領域</a>）の値とする。
                    </p>
                <li data-md>
                    <p><a data-link-type="dfn" href="#spatial-navigation-starting-point"
                            id="ref-for-spatial-navigation-starting-point①">spatial navigation starting
                            point</a>が<code>null</code>でなく、
                        <var>searchOrigin</var>内にある場合は、それを返す。
                    </p>
                <li data-md>
                    <p>それ以外の場合は<var>searchOrigin</var>を返す。</p>
            </ol>
            <p>フォーカスターゲットの状態がフォーカス移動以外で変化した場合、<dfn class="dfn-paneled" data-dfn-type="dfn"
                    data-lt="update the search origin | updating the search origin" data-noexport
                    id="update-the-search-origin"><a data-link-type="dfn" href="#search-origin"
                        id="ref-for-search-origin①">検索起点</a>を更新する</dfn>手順：</p>
            <ol>
                <li data-md>
                    <p><var>focus target</var>が<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/semantics-other.html#concept-element-disabled"
                            id="ref-for-concept-element-disabled">実際に無効</a>または<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#expressly-inert"
                            id="ref-for-expressly-inert">明示的に非活性</a>、もしくは
                        <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/rendering.html#being-rendered"
                            id="ref-for-being-rendered">レンダリングされていない</a>場合は、
                        <var>searchOrigin</var>を<var>focus target</var>の<a data-link-type="dfn" href="#boundary-box"
                            id="ref-for-boundary-box①">boundary box</a>とする。
                    </p>
                <li data-md>
                    <p><var>focus target</var>が<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/infrastructure.html#nodes-are-removed"
                            id="ref-for-nodes-are-removed">削除された</a>場合は、
                        <var>searchOrigin</var>を<var>focus target</var>が存在していた位置の<a data-link-type="dfn"
                            href="#boundary-box" id="ref-for-boundary-box②">boundary box</a>とする。
                    </p>
                <li data-md>
                    <p><var>focus target</var>が完全に画面外の場合は、
                        <var>searchOrigin</var>を<var>focus target</var>の最も近い表示中の<a data-link-type="dfn"
                            href="#spatial-navigation-containers"
                            id="ref-for-spatial-navigation-containers②⑨">空間ナビゲーションコンテナ</a>のビューポートとする。
                    </p>
            </ol>
            <p class="note" role="note"><span>注:</span> ユーザーエージェントは、例えば
                フォーカス要素がマウススクロールによって画面外に移動したり、ビューポートから消えた時などに
                <a data-link-type="dfn" href="#update-the-search-origin"
                    id="ref-for-update-the-search-origin">検索起点を更新</a>すべきです。
            </p>
        </div>
        <div class="algorithm" data-algorithm="to find focusable areas">
            <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="find focusable areas | finding focusable areas"
                    data-noexport id="find-focusable-areas">フォーカス可能エリアの検索</dfn>：要素<var>C</var>内で
                オプションの<var>visibleOnly</var>引数（デフォルト<code>true</code>）を伴って以下の手順を実行します。
            </p>
            <ol>
                <li data-md>
                    <p><var>focusables</var>を、<var>C</var>の子孫で<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#focusable-area"
                            id="ref-for-focusable-area②">focusable area</a>の<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#dom-anchor"
                            id="ref-for-dom-anchor①">DOMアンカー</a>を持つもの全ての<a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set">集合</a>とする。
                        <a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box"
                            id="ref-for-box②">ボックス</a>が複数の<a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-break-4/#box-fragment"
                            id="ref-for-box-fragment②">ボックスフラグメント</a>を持つ場合は、
                        各<span id="ref-for-box-fragment③">ボックスフラグメント</span>を個別に扱う。
                    </p>
                <li data-md>
                    <p>ユーザーエージェントは、<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove"
                            id="ref-for-list-remove">focusables集合から削除</a>すべき項目は、その<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#dom-anchor"
                            id="ref-for-dom-anchor②">DOMアンカー</a>の<a data-link-type="element-attr"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#attr-tabindex"
                            id="ref-for-attr-tabindex"><code>tabindex</code></a>属性が負値の場合。
                    </p>
                    <p class="note" role="note"><span>注:</span> これは、<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#attr-tabindex"
                            id="ref-for-attr-tabindex①">tabindex</a>で定義される
                        <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#sequential-focus-navigation-order"
                            id="ref-for-sequential-focus-navigation-order">逐次フォーカスナビゲーション順</a>から
                        負のtabindex要素を除外することを反映しています。
                    </p>
                <li data-md>
                    <p><var>visibleOnly</var>が<code>false</code>なら、<var>focusables</var>を返す。</p>
                    <p class="note" role="note"><span>注:</span> <var>focusables</var>は空の場合もある</p>
                <li data-md>
                    <p><var>visibles</var>を、<var>focusables</var>のうち<a data-link-type="dfn" href="#boundary-box"
                            id="ref-for-boundary-box③">boundary box</a>が
                        <var>C</var>の<a data-link-type="dfn" href="#inside-area" id="ref-for-inside-area①">inside
                            area</a>内に少しでも入っている項目の部分集合とする。
                    </p>
                    <div class="advisement non-normative"> 現在スクロール不可部分にある要素以外は、
                        空間ナビゲーションはクリックできない要素（他の要素で覆われている等）を
                        自動的に除外しません。
                        アプリロジックの前提を壊さないためや、
                        ユーザーが見えない・到達不可な要素にフォーカスして混乱しないために、
                        著者は逐次ナビゲーションと同じベストプラクティス（tab-index="-1"や<a
                            href="https://github.com/WICG/inert"><code>inert</code></a>属性利用など）で
                        空間ナビゲーションからも除外すべきです。 </div>
                <li data-md>
                    <p><var>visibles</var>を返す。</p>
                    <p class="note" role="note"><span>注:</span> <var>visibles</var>は空の場合もある</p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="to select the best candidate">
            <p><dfn class="dfn-paneled" data-dfn-type="dfn"
                    data-lt="select the best candidate | selecting the best candidate" data-noexport
                    id="select-the-best-candidate">最適な候補の選択</dfn>：方向<var>dir</var>、<var>searchOrigin</var>を起点として
                <var>candidates</var>集合内で以下の手順を実行します：
            </p>
            <ol>
                <li data-md>
                    <p><var>candidates</var>が<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty"
                            id="ref-for-list-empty">空</a>なら<code>null</code>を返す
                    </p>
                <li data-md>
                    <p><var>candidates</var>が1つだけならそれを返す</p>
                <li data-md>
                    <p><var>insiders</var>を<var>candidates</var>の部分集合とする</p>
                    <ul>
                        <li data-md>
                            <p>boundary boxが<var>searchOrigin</var>の<a data-link-type="dfn" href="#inside-area"
                                    id="ref-for-inside-area②">inside area</a>と完全に重なっているもの</p>
                        <li data-md>
                            <p>boundary boxが部分的に<var>searchOrigin</var>の<a data-link-type="dfn" href="#inside-area"
                                    id="ref-for-inside-area③">inside area</a>と重なっているもの：</p>
                            <ul>
                                <li data-md>
                                    <p><var>dir</var>が<code
                                            class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-down" id="ref-for-dom-spatialnavigationdirection-down">down</a></code>なら
                                        上端が<var>searchOrigin</var>の<a data-link-type="dfn" href="#boundary-box"
                                            id="ref-for-boundary-box④">boundary box</a>の上端より下</p>
                                <li data-md>
                                    <p><var>dir</var>が<code
                                            class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-up" id="ref-for-dom-spatialnavigationdirection-up">up</a></code>なら
                                        下端が<var>searchOrigin</var>の<a data-link-type="dfn" href="#boundary-box"
                                            id="ref-for-boundary-box⑤">boundary box</a>の下端より上</p>
                                <li data-md>
                                    <p><var>dir</var>が<code
                                            class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-left" id="ref-for-dom-spatialnavigationdirection-left">left</a></code>なら
                                        右端が<var>searchOrigin</var>の<a data-link-type="dfn" href="#boundary-box"
                                            id="ref-for-boundary-box⑥">boundary box</a>の右端より左</p>
                                <li data-md>
                                    <p><var>dir</var>が<code
                                            class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-right" id="ref-for-dom-spatialnavigationdirection-right">right</a></code>なら
                                        左端が<var>searchOrigin</var>の<a data-link-type="dfn" href="#boundary-box"
                                            id="ref-for-boundary-box⑦">boundary box</a>の左端より右</p>
                            </ul>
                            <p class="note" role="note"><span>注:</span> 要素が検索起点とどのように重なっているかの詳細条件は
                                フォーカス移動の順序に影響します。順序はUXに関係するため、UA定義の仕組みに依存します。</p>
                    </ul>
                    <p class="note" role="note"><span>注:</span> この部分集合化は要求された方向と逆に進むことを避けるために必要です。</p>
                <li data-md>
                    <ul>
                        <li data-md>
                            <p><var>insiders</var>が空でなければ、</p>
                            <ol>
                                <li data-md>
                                    <p><var>closest subset</var>を<var>insiders</var>の部分集合とし、
                                        <a data-link-type="dfn" href="#boundary-box" id="ref-for-boundary-box⑧">boundary
                                            box</a>の
                                    </p>
                                    <ul>
                                        <li data-md>
                                            <p><var>dir</var>が<code
                                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-down" id="ref-for-dom-spatialnavigationdirection-down①">down</a></code>なら
                                                上端が<var>searchOrigin</var>の<a data-link-type="dfn" href="#inside-area"
                                                    id="ref-for-inside-area④">inside area</a>の上端に最も近いもの</p>
                                        <li data-md>
                                            <p><var>dir</var>が<code
                                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-up" id="ref-for-dom-spatialnavigationdirection-up①">up</a></code>なら
                                                下端が<var>searchOrigin</var>の<a data-link-type="dfn" href="#inside-area"
                                                    id="ref-for-inside-area⑤">inside area</a>の下端に最も近いもの</p>
                                        <li data-md>
                                            <p><var>dir</var>が<code
                                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-left" id="ref-for-dom-spatialnavigationdirection-left①">left</a></code>なら
                                                右端が<var>searchOrigin</var>の<a data-link-type="dfn" href="#inside-area"
                                                    id="ref-for-inside-area⑥">inside area</a>の右端に最も近いもの</p>
                                        <li data-md>
                                            <p><var>dir</var>が<code
                                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-right" id="ref-for-dom-spatialnavigationdirection-right①">right</a></code>なら
                                                左端が<var>searchOrigin</var>の<a data-link-type="dfn" href="#inside-area"
                                                    id="ref-for-inside-area⑦">inside area</a>の左端に最も近いもの</p>
                                    </ul>
                                <li data-md>
                                    <p><var>closest subset</var>が1つならそれを返す。それ以外はドキュメント順の最初の要素を返す。ただしその<a
                                            data-link-type="dfn" href="#boundary-box"
                                            id="ref-for-boundary-box⑨">boundary box</a>が他の要素の<span
                                            id="ref-for-boundary-box①⓪">boundary box</span>と重なり、
                                        その要素がCSS<a data-link-type="dfn"
                                            href="https://drafts.csswg.org/css2/zindex.html#painting-order"
                                            id="ref-for-painting-order">描画順</a>で上なら、その要素を返す。これも上位要素と重なる場合は再帰的に適用。</p>
                            </ol>
                        <li data-md>
                            <p>それ以外の場合</p>
                            <ol>
                                <li data-md>
                                    <p><var>candidates</var>を次の条件を満たす部分集合とする：</p>
                                    <ul>
                                        <li data-md>
                                            <p>要素が<var>searchOrigin</var>と重ならず、その<a data-link-type="dfn"
                                                    href="#boundary-box" id="ref-for-boundary-box①①">boundary box</a>が
                                            <ul>
                                                <li data-md>
                                                    <p><var>dir</var>が<code
                                                            class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-down" id="ref-for-dom-spatialnavigationdirection-down②">down</a></code>
                                                        なら、上端が<var>searchOrigin</var>の<a data-link-type="dfn"
                                                            href="#boundary-box" id="ref-for-boundary-box①②">boundary
                                                            box</a>の下端より下</p>
                                                <li data-md>
                                                    <p><var>dir</var>が<code
                                                            class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-up" id="ref-for-dom-spatialnavigationdirection-up②">up</a></code>
                                                        なら、下端が<var>searchOrigin</var>の<a data-link-type="dfn"
                                                            href="#boundary-box" id="ref-for-boundary-box①③">boundary
                                                            box</a>の上端より上</p>
                                                <li data-md>
                                                    <p><var>dir</var>が<code
                                                            class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-left" id="ref-for-dom-spatialnavigationdirection-left②">left</a></code>
                                                        なら、右端が<var>searchOrigin</var>の<a data-link-type="dfn"
                                                            href="#boundary-box" id="ref-for-boundary-box①④">boundary
                                                            box</a>の左端より左</p>
                                                <li data-md>
                                                    <p><var>dir</var>が<code
                                                            class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-right" id="ref-for-dom-spatialnavigationdirection-right②">right</a></code>
                                                        なら、左端が<var>searchOrigin</var>の<a data-link-type="dfn"
                                                            href="#boundary-box" id="ref-for-boundary-box①⑤">boundary
                                                            box</a>の右端より右</p>
                                            </ul>
                                    </ul>
                                <li data-md>
                                    <p><var>candidates</var>集合内の各<var>candidate</var>について
                                        <a data-link-type="dfn" href="#find-the-shortest-distance"
                                            id="ref-for-find-the-shortest-distance">最短距離を算出</a>する。
                                    </p>
                                <li data-md>
                                    <p>距離が最小の要素を返す。同距離ならドキュメント順の最初の要素。ただしその<a data-link-type="dfn" href="#boundary-box"
                                            id="ref-for-boundary-box①⑥">boundary box</a>が他の要素の<span
                                            id="ref-for-boundary-box①⑦">boundary box</span>と重なり、
                                        その要素がCSS<a data-link-type="dfn"
                                            href="https://drafts.csswg.org/css2/zindex.html#painting-order"
                                            id="ref-for-painting-order①">描画順</a>で上なら、その要素を返す。これも上位要素と重なる場合は再帰的に適用。</p>
                            </ol>
                    </ul>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="to find the shortest the distance">
            <dfn class="dfn-paneled" data-dfn-type="dfn"
                data-lt="find the shortest distance | finding the shortest distance" data-noexport
                id="find-the-shortest-distance">最短距離の算出</dfn>：方向<var>dir</var>で<var>reference</var>と<var>candidate</var>間の距離を求めるには、
            <var>reference</var>と<var>candidate</var>のboundary box内でそれぞれ<var>P1</var>・<var>P2</var>という点を見つけ、
            下記で定義される<var>distance</var>を最小化する：
            <pre class="prod"><var>distance</var> = <var>euclidean</var> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#mult-one-plus" id="ref-for-mult-one-plus">+</a> <var>displacement</var> - <var>alignment</var> - <var>sqrt(Overlap)</var>
</pre>
            <p>各項目の意味：</p>
            <dl>
                <dt><var>euclidean</var>
                <dd> <var>P1</var>と<var>P2</var>間のユークリッド距離
                <dt><var>displacement</var>
                <dd>
                    <var>reference</var>と<var>candidate</var>間で<var>dir</var>に対する変位量。定義：
                    <pre><code><var>displacement</var> = (絶対値で直交軸方向の距離 + <var>orthogonalBias</var>) *
               <var>orthogonalWeight</var>
</code></pre>
                <dt><var>orthogonalBias</var>:
                <dd>
                    <ul>
                        <li data-md>
                            <p><var>dir</var>が<code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-left" id="ref-for-dom-spatialnavigationdirection-left③">left</a></code>
                                または<code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-right" id="ref-for-dom-spatialnavigationdirection-right③">right</a></code>なら
                                <var>reference</var>の軸揃えbounding boxの高さ/2
                            </p>
                        <li data-md>
                            <p>それ以外（<code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-up" id="ref-for-dom-spatialnavigationdirection-up③">up</a></code>
                                または<code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-down" id="ref-for-dom-spatialnavigationdirection-down③">down</a></code>）なら
                                <var>reference</var>の軸揃えbounding boxの幅/2
                            </p>
                    </ul>
                <dt><var>orthogonalWeight</var>:
                <dd>
                    <ul>
                        <li data-md>
                            <p><var>dir</var>が<code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-left" id="ref-for-dom-spatialnavigationdirection-left④">left</a></code>
                                または<code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-right" id="ref-for-dom-spatialnavigationdirection-right④">right</a></code>なら
                                30</p>
                        <li data-md>
                            <p>それ以外（<code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-up" id="ref-for-dom-spatialnavigationdirection-up④">up</a></code>
                                または<code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-down" id="ref-for-dom-spatialnavigationdirection-down④">down</a></code>）なら
                                2</p>
                    </ul>
                <dt><var>alignment</var>
                <dd>
                    <var>reference</var>と<var>candidate</var>の<var>dir</var>方向の整列度。定義：
                    <pre><code><var>alignment</var> = <var>alignBias</var> * <var>alignWeight</var>
</code></pre>
                <dt><var>alignBias</var>:
                <dd>
                    <ul>
                        <li data-md>
                            <p><var>dir</var>が<code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-left" id="ref-for-dom-spatialnavigationdirection-left⑤">left</a></code>
                                または<code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-right" id="ref-for-dom-spatialnavigationdirection-right⑤">right</a></code>なら
                                <var>projectedOverlap</var> / <var>reference</var>の軸揃えbounding boxの高さ
                            </p>
                        <li data-md>
                            <p>それ以外（<code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-up" id="ref-for-dom-spatialnavigationdirection-up⑤">up</a></code>
                                または<code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-down" id="ref-for-dom-spatialnavigationdirection-down⑤">down</a></code>）なら
                                <var>projectedOverlap</var> / <var>reference</var>の軸揃えbounding boxの幅
                            </p>
                    </ul>
                <dt><var>projectedOverlap</var>:
                <dd>
                    <ul>
                        <li data-md>
                            <p><var>dir</var>が<code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-left" id="ref-for-dom-spatialnavigationdirection-left⑥">left</a></code>
                                または<code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-right" id="ref-for-dom-spatialnavigationdirection-right⑥">right</a></code>なら
                                <var>reference</var>と<var>candidate</var>の水平方向投影の垂直軸上での重なり長さ
                            </p>
                        <li data-md>
                            <p>それ以外（<code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-up" id="ref-for-dom-spatialnavigationdirection-up⑥">up</a></code>
                                または<code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-down" id="ref-for-dom-spatialnavigationdirection-down⑥">down</a></code>）なら
                                <var>reference</var>と<var>candidate</var>の垂直方向投影の水平軸上での重なり長さ
                            </p>
                    </ul>
                    <figure>
                        <img alt src="https://www.w3.org/TR/css-nav-1/images/projected_overlap.png"
                            style="width: 500px;">
                        <figcaption>projectedOverlap</figcaption>
                    </figure>
                <dt><var>alignWeight</var>:
                <dd>5
                <dt><var>sqrt(Overlap)</var>
                <dd> <var>reference</var>と<var>candidate</var>の重なり面積の平方根（重ならなければ0）
            </dl>
            <p class="note" role="note"><span>注:</span> この一般式は複数の候補式からUXテストケースで直感に最も合うものを選びました。
                <var>alignWeight</var>や<var>orthogonalWeight</var>の値も同様に実験的に決定しています。
                結果として複雑な式ですが、良好な結果が得られるようです。
                改善や単純化の提案も歓迎します。
            </p>
        </div>
        <div class="cssapi">
            <h2 class="heading settled" data-level="9" id="declarative"><span class="secno">9. </span><span
                    class="content"> 宣言的手法による空間ナビゲーションの制御</span><a class="self-link" href="#declarative"></a></h2>
            <h3 class="heading settled" data-level="9.1" id="container"><span class="secno">9.1. </span><span
                    class="content"> 追加の空間ナビゲーションコンテナの作成： <a class="property" data-link-type="propdesc"
                        href="#propdef-spatial-navigation-contain"
                        id="ref-for-propdef-spatial-navigation-contain③">spatial-navigation-contain</a>
                    プロパティ</span><a class="self-link" href="#container"></a></h3>
            <table class="def propdef" data-link-for-hint="spatial-navigation-contain">
                <tbody>
                    <tr>
                        <th>名前:
                        <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                                id="propdef-spatial-navigation-contain">spatial-navigation-contain</dfn>
                    <tr class="value">
                        <th><a href="https://drafts.csswg.org/css-values/#value-defs">値:</a>
                        <td class="prod">auto <a data-link-type="grammar"
                                href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one">|</a> contain
                    <tr>
                        <th><a href="https://drafts.csswg.org/css-cascade/#initial-values">初期値:</a>
                        <td>auto
                    <tr>
                        <th>適用対象:
                        <td><a href="https://drafts.csswg.org/css-pseudo/#generated-content"
                                title="Includes ::before and ::after pseudo-elements.">すべての要素</a>
                    <tr>
                        <th><a href="https://drafts.csswg.org/css-cascade/#inherited-property">継承:</a>
                        <td>no
                    <tr>
                        <th><a href="https://drafts.csswg.org/css-values/#percentages">パーセンテージ:</a>
                        <td>n/a
                    <tr>
                        <th><a href="https://drafts.csswg.org/css-cascade/#computed">算出値:</a>
                        <td>指定通り
                    <tr>
                        <th>正規順序:
                        <td>文法順
                    <tr>
                        <th><a href="https://drafts.csswg.org/web-animations/#animation-type">アニメーション型:</a>
                        <td>離散
            </table>
            <dl>
                <dt><dfn class="css" data-dfn-for="spatial-navigation-contain" data-dfn-type="value" data-export
                        id="valdef-spatial-navigation-contain-auto">auto<a class="self-link"
                            href="#valdef-spatial-navigation-contain-auto"></a></dfn>
                <dd>要素が<a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                        id="ref-for-scroll-container⑧">スクロールコンテナ</a>の場合、空間ナビゲーションコンテナを確立します。
                    それ以外の場合は確立しません。
                <dt><dfn class="css" data-dfn-for="spatial-navigation-contain" data-dfn-type="value" data-export
                        id="valdef-spatial-navigation-contain-contain">contain<a class="self-link"
                            href="#valdef-spatial-navigation-contain-contain"></a></dfn>
                <dd>この要素は空間ナビゲーションコンテナを確立します。
            </dl>
            <p class="note" role="note"><span>注:</span> さらに <a href="#grouping">§ 8.2 要素のグループ化</a> に従い、
                <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context"
                    id="ref-for-browsing-context②">閲覧コンテキスト</a>のビューポート（<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context"
                    id="ref-for-top-level-browsing-context④">トップレベル閲覧コンテキスト</a>に限定されません）
                も空間ナビゲーションコンテナを確立します。
            </p>
            <div class="example" id="example-6752923a">
                <a class="self-link" href="#example-6752923a"></a> 次の例は、簡易なテレビ番組表やカレンダーの例です。
                グリッド状の要素がテレビ番組や予定を表し、
                その周囲にUIボタンがあります。
                <p>この場合、グリッドがかなりまばらなため、
                    ユーザーが「Foo」から下方向に移動しようとすると、
                    フォーカスは「Next Week」に移動します。
                    これは下方向で客観的に最も近い位置にあるためです。
                    「Bar」から下方向に移動した場合も同様に、
                    フォーカスは「Previous Week」に移動します。</p>
                <div class="output">
                    <div id="example-cal">
                        <button>前週</button>
                        <table>
                            <tbody>
                                <tr>
                                    <td>
                                    <th>M
                                    <th>T
                                    <th>W
                                    <th>T
                                    <th>F
                                    <th>S
                                    <th>S
                                <tr>
                                    <td>0-6
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td><a href="#">Foo</a>
                                <tr>
                                    <td>6-9
                                    <td><a href="#">Bar</a>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                <tr>
                                    <td>9-12
                                    <td>
                                    <td><a href="#">Bat</a>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                <tr>
                                    <td>12-18
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                <tr>
                                    <td>18-21
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td><a href="#">Woo</a>
                                <tr>
                                    <td>21-24
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td><a href="#">Baz</a>
                                    <td>
                        </table>
                        <button>次週</button>
                    </div>
                </div>
                <pre><code class="highlight"><c- p>&lt;</c-><c- f>div</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>button</c-><c- p>></c->前週<c- p>&lt;/</c-><c- f>button</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>table</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>tr</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>th</c-><c- p>></c->M<c- p>&lt;</c-><c- f>th</c-><c- p>></c->T<c- p>&lt;</c-><c- f>th</c-><c- p>></c->W<c- p>&lt;</c-><c- f>th</c-><c- p>></c->T<c- p>&lt;</c-><c- f>th</c-><c- p>></c->F<c- p>&lt;</c-><c- f>th</c-><c- p>></c->S<c- p>&lt;</c-><c- f>th</c-><c- p>></c->S
        <c- p>&lt;</c-><c- f>tr</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>></c->0-6<c- p>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"#"</c-><c- p>></c->Foo<c- p>&lt;/</c-><c- f>a</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>tr</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>></c->6-9<c- p>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"#"</c-><c- p>></c->Bar<c- p>&lt;/</c-><c- f>a</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>tr</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>></c->9-12<c- p>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"#"</c-><c- p>></c->Bat<c- p>&lt;/</c-><c- f>a</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>tr</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>></c->12-18<c- p>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>tr</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>></c->18-21<c- p>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"#"</c-><c- p>></c->Woo<c- p>&lt;/</c-><c- f>a</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>tr</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>></c->21-24<c- p>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"#"</c-><c- p>></c->Baz<c- p>&lt;/</c-><c- f>a</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>></c->
    <c- p>&lt;/</c-><c- f>table</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>button</c-><c- p>></c->次週<c- p>&lt;/</c-><c- f>button</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</code></pre>
                <p>しかし、著者は異なるナビゲーション体験を提供したい場合もあります。
                    たとえば、グリッド内のどれかにフォーカスした後は、
                    テーブル内の動きを優先させたい場合です。
                    これはテーブル内の要素同士が意味的に関連しているためです。</p>
                <p>スタイルシートに
                    <code
                        class="highlight"><c- f>table </c-><c- p>{</c-> <c- k>spatial-navigation-contain</c-><c- p>:</c-> contain<c- p>;</c-> <c- p>}</c-></code>
                    を追加すると、このような挙動となります。
                </p>
                <p>この後、「Foo」から下方向にフォーカスを移動すると「Woo」に、
                    「Bar」から下方向では「Bat」に移動します。
                    「Next Week」や「Previous Week」には移動しません。</p>
                <p>それでもテーブル外にフォーカスを移動することは可能です。
                    たとえば、「Foo」から右に移動するとグリッド右側に要素がないため「Next Week」にフォーカスが移動します。</p>
            </div>
            <p class="note" role="note"><span>注:</span> <a class="property" data-link-type="propdesc"
                    href="#propdef-spatial-navigation-contain"
                    id="ref-for-propdef-spatial-navigation-contain④">spatial-navigation-contain</a>プロパティは<a
                    data-link-type="dfn" href="#at-risk" id="ref-for-at-risk①">リスクあり</a>です。</p>
        </div>
        <h3 class="heading settled" data-level="9.2" id="css-property-spatialnavigationaction"><span class="secno">9.2.
            </span><span class="content"> スクロールとの連携制御： <a class="property" data-link-type="propdesc"
                    href="#propdef-spatial-navigation-action"
                    id="ref-for-propdef-spatial-navigation-action⑦">spatial-navigation-action</a> プロパティ</span><a
                class="self-link" href="#css-property-spatialnavigationaction"></a></h3>
        <table class="def propdef" data-link-for-hint="spatial-navigation-action">
            <tbody>
                <tr>
                    <th>名前:
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-spatial-navigation-action">spatial-navigation-action</dfn>
                <tr class="value">
                    <th><a href="https://drafts.csswg.org/css-values/#value-defs">値:</a>
                    <td class="prod">auto <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one①">|</a> focus <span
                            id="ref-for-comb-one②">|</span> scroll
                <tr>
                    <th><a href="https://drafts.csswg.org/css-cascade/#initial-values">初期値:</a>
                    <td>auto
                <tr>
                    <th>適用対象:
                    <td><a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                            id="ref-for-scroll-container⑨">スクロールコンテナ</a>
                <tr>
                    <th><a href="https://drafts.csswg.org/css-cascade/#inherited-property">継承:</a>
                    <td>no
                <tr>
                    <th><a href="https://drafts.csswg.org/css-values/#percentages">パーセンテージ:</a>
                    <td>n/a
                <tr>
                    <th><a href="https://drafts.csswg.org/css-cascade/#computed">算出値:</a>
                    <td>指定通り
                <tr>
                    <th>正規順序:
                    <td>文法順
                <tr>
                    <th><a href="https://drafts.csswg.org/web-animations/#animation-type">アニメーション型:</a>
                    <td>離散
        </table>
        <p>フォーカスがスクロールコンテナ内にある状態でユーザーが空間ナビゲーションをトリガーすると、
            フォーカスをその方向に移動したいのか、
            ドキュメント自体をその方向にスクロールしたいのかが曖昧になる場合があります。
            デフォルトでは自動的に判定されますが、このプロパティを使うことで、
            フォーカス移動とスクロールのどちらを優先するかを著者が指定できます。</p>
        <p>厳密な挙動は <a href="#nav">§ 8.3 ナビゲーション</a> で定義されていますが、
            各値の効果を高いレベルで説明します。</p>
        <p>空間ナビゲーションがトリガーされると、
            現在フォーカスされている要素が<a class="property" data-link-type="propdesc" href="#propdef-spatial-navigation-action"
                id="ref-for-propdef-spatial-navigation-action⑧">spatial-navigation-action</a>を持ち、
            その要素が<a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                id="ref-for-scroll-container①⓪">スクロールコンテナ</a>の場合はその値が、
            要素がそうでない場合は最も近い<span id="ref-for-scroll-container①①">スクロールコンテナ</span>祖先の値が使われます。</p>
        <dl>
            <dt><dfn class="dfn-paneled css" data-dfn-for="spatial-navigation-action" data-dfn-type="value" data-export
                    id="valdef-spatial-navigation-action-auto">auto</dfn>
            <dd> 指定方向に<a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                    id="ref-for-scroll-container①②">スクロールコンテナ</a>内に
                表示されているフォーカス可能な要素があれば、一番近いものにフォーカスが移動します。
                なければ<span id="ref-for-scroll-container①③">スクロールコンテナ</span>が指定方向にスクロールされます。
            <dt><dfn class="dfn-paneled css" data-dfn-for="spatial-navigation-action" data-dfn-type="value" data-export
                    id="valdef-spatial-navigation-action-focus">focus</dfn>
            <dd>
                表示状態に関係なく、<a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                    id="ref-for-scroll-container①④">スクロールコンテナ</a>内で
                一番近いフォーカス可能要素にフォーカスが移動します。
                要素がなければ、
                スクロールコンテナは<em>スクロールされません</em>。
                代わりに祖先方向の探索が続行されます。
                <p class="note" role="note"><span>注:</span> <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                        id="ref-for-scroll-container①⑤">スクロールコンテナ</a>は、
                    もともと表示されていなかった要素がフォーカスされることで副次的にスクロールされることがありますが、
                    <a data-link-type="dfn" href="#directionally-scroll-an-element"
                        id="ref-for-directionally-scroll-an-element③">方向スクロール</a>は実行されません。
                </p>
                <p class="note" role="note"><span>注:</span> <a class="css" data-link-type="maybe"
                        href="#valdef-spatial-navigation-action-focus"
                        id="ref-for-valdef-spatial-navigation-action-focus④">focus</a>値を
                    <a class="property" data-link-type="propdesc" href="#propdef-spatial-navigation-action"
                        id="ref-for-propdef-spatial-navigation-action⑨">spatial-navigation-action</a>に指定した場合、
                    ビューポート内に表示されている候補がない方向で
                    <a class="idl-code" data-link-type="event" href="#eventdef-navigationevent-navnotarget"
                        id="ref-for-eventdef-navigationevent-navnotarget①">navnotarget</a>イベントが発火します。
                    この場合は、コンテナがさらにスクロール可能でも発火します。
                </p>
            <dt><dfn class="dfn-paneled css" data-dfn-for="spatial-navigation-action" data-dfn-type="value" data-export
                    id="valdef-spatial-navigation-action-scroll">scroll</dfn>
            <dd>
                現在フォーカスされている要素が<a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                    id="ref-for-scroll-container①⑥">スクロールコンテナ</a>でない場合は、
                祖先<span id="ref-for-scroll-container①⑦">スクロールコンテナ</span>のこの値は<a class="css" data-link-type="maybe"
                    href="#valdef-spatial-navigation-action-auto"
                    id="ref-for-valdef-spatial-navigation-action-auto①">auto</a>と同じ動作になります。
                <p>現在フォーカスされている要素が<a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                        id="ref-for-scroll-container①⑧">スクロールコンテナ</a>の場合は、
                    フォーカス可能な子孫の有無に関係なく、フォーカスは変わらず、指定方向にスクロールのみ実行されます。</p>
                <p class="note" role="note"><span>注:</span> この値では空間ナビゲーションでスクロールコンテナにフォーカスを移動し、スクロールすることはできますが、
                    子孫要素へのフォーカス移動はできません。
                    ただし、<span class="key">Tab</span>キーや &lt;<code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-focus" id="ref-for-dom-focus②">focus()</a></code>&gt;
                    メソッドなど
                    他の手段で子孫にフォーカスを移した後は、
                    空間ナビゲーションで他の子孫要素にフォーカス移動できます。</p>
                <p class="note" role="note"><span>注:</span> <span class="css">scroll</span>値は<a data-link-type="dfn"
                        href="#at-risk" id="ref-for-at-risk②">リスクあり</a>です。</p>
        </dl>
        <p class="note" role="note"><span>注:</span> 以前の仕様では<a class="css" data-link-type="maybe"
                href="#valdef-spatial-navigation-action-focus"
                id="ref-for-valdef-spatial-navigation-action-focus⑤">focus</a>動作への宣言的な方法がなく、
            スクロール前に発火するキャンセル可能なイベントを提供し、
            著者自身でその動作を実装できるようにしていました。
            しかし、スクロール関連のキャンセル可能イベントはパフォーマンス問題につながるため、
            このイベントは削除され、代わりに<a class="property" data-link-type="propdesc" href="#propdef-spatial-navigation-action"
                id="ref-for-propdef-spatial-navigation-action①⓪">spatial-navigation-action</a>プロパティが導入されました。</p>
        <div class="example" id="example-59a246d8">
            <a class="self-link" href="#example-59a246d8"></a> この例では、<code
                class="highlight">spatial-navigation-action: focus</code>を指定した
            スクロール可能なコンテナがあります。
            コンテナ内には<a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scrollport"
                id="ref-for-scrollport⑤">scrollport</a>内の表示領域外にある要素があります。
            下矢印キーを押すと、手動スクロールせずに直接その要素にフォーカスが移動します。
            <figure>
                <img alt src="https://www.w3.org/TR/css-nav-1/images/spatnav-action.png" style="width: 500px;">
                <figcaption>「Box 2」から「Box 3」へ手動スクロールせずにフォーカスを移動する例</figcaption>
            </figure>
            <pre><code class="highlight"><c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>'scroller'</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>button</c-> <c- e>class</c-><c- o>=</c-><c- s>'item'</c-><c- p>></c->Box 1<c- p>&lt;/</c-><c- f>button</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>button</c-> <c- e>class</c-><c- o>=</c-><c- s>'item'</c-><c- p>></c->Box 2<c- p>&lt;/</c-><c- f>button</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>button</c-> <c- e>class</c-><c- o>=</c-><c- s>'item'</c-><c- p>></c->Box 3<c- p>&lt;/</c-><c- f>button</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</code></pre>
            <pre><code class="highlight"><c- f>.scroller </c-><c- p>{</c->
    <c- k>display</c-><c- p>:</c-> grid<c- p>;</c->
    <c- k>grid-template-columns</c-><c- p>:</c-> <c- nf>repeat</c-><c- p>(</c-><c- m>1</c-><c- p>,</c-> <c- m>1</c-><c- l>fr</c-><c- p>);</c->
    <c- k>height</c-><c- p>:</c-> <c- m>300</c-><c- l>px</c-><c- p>;</c->
    <c- k>width</c-><c- p>:</c-> <c- m>200</c-><c- l>px</c-><c- p>;</c->
    <c- k>overflow-y</c-><c- p>:</c-> scroll<c- p>;</c->
    <c- k>spatial-navigation-action</c-><c- p>:</c-> focus<c- p>;</c->
<c- p>}</c->
<c- f>.item </c-><c- p>{</c->
    <c- k>height</c-><c- p>:</c-> <c- m>100</c-><c- l>px</c-><c- p>;</c->
    <c- k>width</c-><c- p>:</c-> <c- m>100</c-><c- l>px</c-><c- p>;</c->
    <c- k>margin</c-><c- p>:</c-> <c- m>50</c-><c- l>px</c-> auto<c- p>;</c->
    <c- k>background-color</c-><c- p>:</c-> blue<c- p>;</c->
<c- p>}</c->
<c- f>:focus </c-><c- p>{</c->
    <c- k>background-color</c-><c- p>:</c-> red<c- p>;</c->
<c- p>}</c->
</code></pre>
        </div>
        <h3 class="heading settled" data-level="9.3" id="css-property-spatialnavigationfunction"><span
                class="secno">9.3. </span><span class="content"> ナビゲーションアルゴリズムの選択： <a class="property"
                    data-link-type="propdesc" href="#propdef-spatial-navigation-function"
                    id="ref-for-propdef-spatial-navigation-function①">spatial-navigation-function</a> プロパティ</span><a
                class="self-link" href="#css-property-spatialnavigationfunction"></a></h3>
        <table class="def propdef" data-link-for-hint="spatial-navigation-function">
            <tbody>
                <tr>
                    <th>名前:
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-spatial-navigation-function">spatial-navigation-function</dfn>
                <tr class="value">
                    <th><a href="https://drafts.csswg.org/css-values/#value-defs">値:</a>
                    <td class="prod">normal <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one③">|</a> grid
                <tr>
                    <th><a href="https://drafts.csswg.org/css-cascade/#initial-values">初期値:</a>
                    <td>normal
                <tr>
                    <th>適用対象:
                    <td><a data-link-type="dfn" href="#spatial-navigation-containers"
                            id="ref-for-spatial-navigation-containers③④">空間ナビゲーションコンテナ</a>
                <tr>
                    <th><a href="https://drafts.csswg.org/css-cascade/#inherited-property">継承:</a>
                    <td>no
                <tr>
                    <th><a href="https://drafts.csswg.org/css-values/#percentages">パーセンテージ:</a>
                    <td>n/a
                <tr>
                    <th><a href="https://drafts.csswg.org/css-cascade/#computed">算出値:</a>
                    <td>指定通り
                <tr>
                    <th>正規順序:
                    <td>文法順
                <tr>
                    <th><a href="https://drafts.csswg.org/web-animations/#animation-type">アニメーション型:</a>
                    <td>離散
        </table>
        <p><a href="#processing-model">§ 8 処理モデル</a>で指定されている空間ナビゲーションのデフォルトアルゴリズムは、レイアウトタイプによって微調整が必要な場合があります。
            このプロパティは、著者が空間ナビゲーション動作に対して最適なナビゲーションアルゴリズムを指定できます。</p>
        <p>値の定義は以下の通りです。</p>
        <dl>
            <dt><dfn class="css" data-dfn-for="spatial-navigation-function" data-dfn-type="value" data-export
                    id="valdef-spatial-navigation-function-normal">normal<a class="self-link"
                        href="#valdef-spatial-navigation-function-normal"></a></dfn>
            <dd>
                UAが定義したデフォルトのフォーカスナビゲーションアルゴリズムでフォーカスを移動します。
                <p>一般的には、<a data-link-type="dfn" href="#find-the-shortest-distance"
                        id="ref-for-find-the-shortest-distance①">最短距離の算出</a>で計算された距離が最も近い要素にフォーカスが移動します。</p>
            <dt><dfn class="css" data-dfn-for="spatial-navigation-function" data-dfn-type="value" data-export
                    id="valdef-spatial-navigation-function-grid">grid<a class="self-link"
                        href="#valdef-spatial-navigation-function-grid"></a></dfn>
            <dd>
                ナビゲーション方向に最も揃っている要素にフォーカスが移動します。
                <ul>
                    <li data-md>
                        <p>ナビゲーション方向に揃っている候補が複数ある場合、
                            ナビゲーション方向の軸に沿って距離が最も近い要素を選択します。
                            同じ距離の要素が複数ある場合は、揃い度が最も小さいものを選びます。</p>
                    <li data-md>
                        <p>指定方向に揃っている候補がない場合は、
                            ナビゲーション方向の軸に沿って距離が最も近い要素を選択します。
                            同じ距離の要素が複数ある場合は、ナビゲーション方向と直交する軸の距離が最も小さいものを選びます。</p>
                </ul>
        </dl>
        <p class="note" role="note"><span>注:</span> これらの値は、ユーザーの好みと協調され、各ページで自然な空間ナビゲーション動作になるようにしています。</p>
        <div class="example" id="example-c86d0d36">
            <a class="self-link" href="#example-c86d0d36"></a> この例は、<code
                class="highlight">spatial-navigation-function</code>値によって
            フォーカスの移動がどのように違ってくるかを示しています。
            <figure>
                <img alt src="https://www.w3.org/TR/css-nav-1/images/spatnav-function.png" style="width: 500px;">
                <figcaption>「A」から候補要素へのフォーカス移動例</figcaption>
            </figure>
            <p>「A」「B」「C」を含む要素が<a data-link-type="dfn" href="#spatial-navigation-containers"
                    id="ref-for-spatial-navigation-containers③⑤">空間ナビゲーションコンテナ</a>であるとします。</p>
            <p>ユーザーが下矢印キーを押した場合、
                要素の<code class="highlight">spatial-navigation-function</code>値が<code
                    class="highlight">normal</code>ならフォーカスは「B」に移動します。
                逆に<code class="highlight">grid</code>が指定されていれば、フォーカスは「C」に移動します。</p>
        </div>
        <h2 class="no-num heading settled" id="scrolling"><span class="content">付録A. スクロール拡張</span><a class="self-link"
                href="#scrolling"></a></h2>
        <p>このセクションでは、CSSへのいくつかの拡張案を提案します。
            これらは最終的には公式仕様に統合されるべきですが、それまで暫定的にここで定義しています。</p>
        <div class="algorithm" data-algorithm="can be manually scrolled">
            <p class="issue" id="issue-942e7041"><a class="self-link" href="#issue-942e7041"></a> このような用語は <a
                    data-link-type="biblio" href="#biblio-cssom-view-1">[CSSOM-VIEW-1]</a>、<a data-link-type="biblio"
                    href="#biblio-css-overflow-3">[CSS-OVERFLOW-3]</a>、<a data-link-type="biblio"
                    href="#biblio-css-scroll-snap-1">[CSS-SCROLL-SNAP-1]</a> に含めるべきです。 <a
                    href="https://github.com/w3c/csswg-drafts/issues/2322">&lt;https://github.com/w3c/csswg-drafts/issues/2322></a>
            </p>
            <p>要素 <var>e</var> は、指定された方向 <var>d</var> において <dfn class="dfn-paneled" data-dfn-type="dfn"
                    data-lt="can be manually scrolled | can be scrolled manually | cannot be scrolled manually | cannot be manually scrolled"
                    data-noexport id="can-be-manually-scrolled">手動スクロール可能</dfn> です、条件は以下の通りです:
            </p>
            <ul>
                <li data-md>
                    <p><var>e</var> が確立する <a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-display-3/#principal-box"
                            id="ref-for-principal-box">principal box</a> が <a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                            id="ref-for-scroll-container②⓪">スクロールコンテナ</a>であること</p>
                <li data-md>
                    <p><var>d</var> が <code>up</code> または <code>down</code> の場合、 <a class="property"
                            data-link-type="propdesc" href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow-y"
                            id="ref-for-propdef-overflow-y">overflow-y</a> プロパティの算出値が <a class="css"
                            data-link-type="maybe" href="https://www.w3.org/TR/css-overflow-3/#valdef-overflow-hidden"
                            id="ref-for-valdef-overflow-hidden">hidden</a> ではないこと</p>
                <li data-md>
                    <p><var>d</var> が <code>left</code> または <code>right</code> の場合、 <a class="property"
                            data-link-type="propdesc" href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow-x"
                            id="ref-for-propdef-overflow-x">overflow-x</a> プロパティの算出値が <a class="css"
                            data-link-type="maybe" href="https://www.w3.org/TR/css-overflow-3/#valdef-overflow-hidden"
                            id="ref-for-valdef-overflow-hidden①">hidden</a> ではないこと</p>
                <li data-md>
                    <p><var>e</var> が <a data-link-type="dfn"
                            href="https://drafts.csswg.org/css-overscroll-behavior-1/#scroll-boundary"
                            id="ref-for-scroll-boundary">スクロール境界</a>の方向 <var>d</var> に位置していないこと</p>
                <li data-md>
                    <p><var>e</var> が方向 <var>d</var> の最後の <a class="css" data-link-type="maybe"
                            href="https://www.w3.org/TR/css-scroll-snap-1/#valdef-scroll-snap-type-mandatory"
                            id="ref-for-valdef-scroll-snap-type-mandatory">mandatory</a> スナップポイントにスナップされていないこと</p>
            </ul>
        </div>
        <div class="algorithm" data-algorithm="to directionally scroll an element">
            <p class="issue" id="issue-00706fa4"><a class="self-link" href="#issue-00706fa4"></a> <a
                    data-link-type="biblio" href="#biblio-cssom-view-1">[CSSOM-VIEW-1]</a>
                で明示的な位置指定なしで方向スクロールの方法を定義すべきです。
                それまで、暫定的に独自手法で対応します。 <a
                    href="https://github.com/w3c/csswg-drafts/issues/2323">&lt;https://github.com/w3c/csswg-drafts/issues/2323></a>
            </p>
            <p><dfn class="dfn-paneled" data-dfn-type="dfn"
                    data-lt="directionally scroll an element | directionally scroll the element | be directionally scrolled"
                    data-noexport id="directionally-scroll-an-element">要素の方向スクロール</dfn>
                <var>e</var> を方向 <var>dir</var> へ行う場合:
            </p>
            <ol>
                <li data-md>
                    <p><var>d</var> をユーザーエージェント定義の距離とする。</p>
                <li data-md>
                    <p><var>x</var> を <var>e</var> の x軸の現在のスクロール位置とする。</p>
                <li data-md>
                    <p><var>y</var> を <var>e</var> の y軸の現在のスクロール位置とする。</p>
                <li data-md>
                    <p><var>e</var> に対し <a data-link-type="dfn"
                            href="https://www.w3.org/TR/cssom-view/#scroll-an-element"
                            id="ref-for-scroll-an-element">scroll an element</a> アルゴリズムを用いて</p>
                    <ul>
                        <li data-md>
                            <p><var>dir</var> が <code>up</code> の場合 (<var>x</var>, <var>y</var> - <var>d</var>)</p>
                        <li data-md>
                            <p><var>dir</var> が <code>down</code> の場合 (<var>x</var>, <var>y</var> + <var>d</var>)</p>
                        <li data-md>
                            <p><var>dir</var> が <code>left</code> の場合 (<var>x</var> - <var>d</var>, <var>y</var>)</p>
                        <li data-md>
                            <p><var>dir</var> が <code>right</code> の場合 (<var>x</var> + <var>d</var>, <var>y</var>)</p>
                    </ul>
            </ol>
        </div>
        <h2 class="no-num heading settled" id="privsec"><span class="content">付録B. プライバシーとセキュリティに関する考察</span><a
                class="self-link" href="#privsec"></a></h2>
        <p>この仕様の編集者は、
            仕様に関連する既知の全ての潜在的なセキュリティリスクが十分に対策されていると考えています。
            詳細は下記に記載します。</p>
        <p>TAGは自己レビュー質問票を作成しており、
            編集者やワーキンググループが仕様によるリスクを評価できるようになっています。
            以下に回答します。</p>
        <dl>
            <dt>この仕様は個人識別情報を扱いますか？
            <dd>いいえ。
            <dt>この仕様は高価値データを扱いますか？
            <dd>いいえ。
            <dt>この仕様はOriginごとにブラウジングセッションをまたいで保持される新しい状態を導入しますか？
            <dd>いいえ。
            <dt>この仕様はWebに永続的かつクロスオリジンな状態を公開しますか？
            <dd>いいえ。
            <dt>この仕様はOriginに現在アクセスできない他のデータを公開しますか？
            <dd>
                基本的にいいえ。
                <p>唯一の例外は次のようなシナリオです:
                    著者が `window.navigate` を使い、フォーカスがクロスオリジンiframe内にある場合、
                    もしイベントを受け取れなかった場合は、iframe内にスクロール可能またはフォーカス可能なものがあったことを意味します。
                    なぜなら、イベントが発火される唯一のケースは、何も見つからずツリーを上がった場合のみだからです。</p>
                <p>この情報はごく限定的で、実質的なセキュリティリスクにはならないように見えますが、
                    編集者の知る限りでは著者が他の方法で取得できない情報です。</p>
            <dt>この仕様は新しいスクリプト実行やロード機構を可能にしますか？
            <dd>いいえ。
            <dt>この仕様はOriginにユーザーの位置情報へのアクセスを許可しますか？
            <dd>いいえ。
            <dt>この仕様はOriginにユーザーの端末センサーへのアクセスを許可しますか？
            <dd>いいえ。
            <dt>この仕様はOriginにユーザーのローカル環境の側面へのアクセスを許可しますか？
            <dd>いいえ。
            <dt>この仕様はOriginに他のデバイスへのアクセスを許可しますか？
            <dd>いいえ。
            <dt>この仕様はOriginにユーザーエージェントのネイティブUIの一部を制御可能にしますか？
            <dd> ユーザーエージェントのUI外観に関する制御はありません。
                空間ナビゲーションの挙動に関して一部制御が可能です。
                これは意図的なものであり、著者が空間ナビゲーションの挙動をページごとに調整できるようにしています。
                悪意のある著者がユーザーの意図するフォーカス制御やドキュメントナビゲーションを妨害しないよう、
                この上書き機構はクロスオリジンiframeについてはデフォルトで無効です。
                <a href="#policy-feature">§ 7 navigation-override ポリシー制御機能</a>参照。
            <dt>この仕様はWebに一時的な識別子を公開しますか？
            <dd>いいえ。
            <dt>この仕様はファーストパーティとサードパーティ文脈で動作を区別しますか？
            <dd>いいえ。
            <dt>この仕様はユーザーエージェントの「シークレット」モードでどのように動作すべきですか？
            <dd>違いはありません。
            <dt>この仕様はユーザーのローカル端末にデータを永続化しますか？
            <dd>いいえ。
            <dt>この仕様は「セキュリティに関する考察」と「プライバシーに関する考察」セクションを持っていますか？
            <dd>はい。現在読んでいるこのセクションです。
            <dt>この仕様はデフォルトのセキュリティ特性をダウングレードすることを許可しますか？
            <dd>
                関連しないセキュリティ機構のダウングレードは許可されません。
                <p>ただし、著者が信頼するクロスオリジンiframeで空間ナビゲーションのデフォルト挙動を上書きするための
                    必要なイベントを許可することは可能です。
                    <a data-link-type="biblio" href="#biblio-feature-policy">[feature-policy]</a>参照。
                    <a href="#policy-feature">§ 7 navigation-override ポリシー制御機能</a>参照。
                </p>
        </dl>
        <h2 class="no-num heading settled" id="ack"><span class="content">謝辞</span><a class="self-link" href="#ack"></a>
        </h2>
        <p>この仕様の編集者は、次の方々にフィードバックと貢献（アルファベット順）を感謝します：</p>
        <ul>
            <li data-md>
                <p>Alice Boxhall</p>
            <li data-md>
                <p>Brian Kardell</p>
            <li data-md>
                <p>Elika Etemad</p>
            <li data-md>
                <p>Eric Seong</p>
            <li data-md>
                <p>Hugo Holgersson</p>
            <li data-md>
                <p>Hyojin Song</p>
            <li data-md>
                <p>Jeonghee Ahn</p>
            <li data-md>
                <p>Junho Seo</p>
            <li data-md>
                <p>Rob Dodson</p>
            <li data-md>
                <p>Seungcheon Baek</p>
        </ul>
        <h2 class="no-num heading settled" id="changes"><span class="content">変更履歴</span><a class="self-link"
                href="#changes"></a></h2>
        <p><em>このセクションは規範的ではありません。</em></p>
        <p>以下は、<a href="https://www.w3.org/TR/2019/WD-css-nav-1-20190423/">2019年4月23日 初回公開ワーキングドラフト</a>以降の変更点です。</p>
        <ul>
            <li data-md>
                <p><code
                        class="idl"><a data-link-type="idl" href="#dom-element-getspatialnavigationcontainer" id="ref-for-dom-element-getspatialnavigationcontainer④">getSpatialNavigationContainer()</a></code>
                    の結果を、最も近い<a data-link-type="dfn" href="#spatial-navigation-containers"
                        id="ref-for-spatial-navigation-containers③⑥">空間ナビゲーションコンテナ</a>祖先を返すよう変更</p>
            <li data-md>
                <p><a class="property" data-link-type="propdesc" href="#propdef-spatial-navigation-function"
                        id="ref-for-propdef-spatial-navigation-function②">spatial-navigation-function</a>を追加</p>
            <li data-md>
                <p><a data-link-type="dfn" href="#update-the-search-origin"
                        id="ref-for-update-the-search-origin①">検索起点の更新</a>手順を追加</p>
            <li data-md>
                <p><code
                        class="idl"><a data-link-type="idl" href="#dom-element-spatialnavigationsearch" id="ref-for-dom-element-spatialnavigationsearch">spatialNavigationSearch()</a></code>
                    のIDLを、dir属性を <code
                        class="idl"><a data-link-type="idl" href="#dictdef-spatialnavigationsearchoptions" id="ref-for-dictdef-spatialnavigationsearchoptions①">SpatialNavigationSearchOptions</a></code>
                    から分離する形で変更
                </p>
            <li data-md>
                <p>検索起点と完全に重なるフォーカス可能要素（空間ナビゲーションコンテナではないもの）を候補とすることで到達不可問題への対策を追加</p>
        </ul>
    </main>
    <h2 class="no-ref no-num heading settled" id="conformance"><span class="content">適合性</span><a class="self-link"
            href="#conformance"></a></h2>
    <h3 class="heading settled" id="document-conventions"><span class="content">ドキュメントの慣例</span><a class="self-link"
            href="#document-conventions"></a></h3>
    <p>適合性要件は、記述的な断言とRFC 2119の用語の組み合わせで表現されています。重要な語句「MUST」「MUST NOT」「REQUIRED」「SHALL」「SHALL NOT」「SHOULD」「SHOULD
        NOT」「RECOMMENDED」「MAY」「OPTIONAL」は、この文書の規範的な部分でRFC 2119に記載されている通りに解釈されます。
        ただし、可読性のために、これらの語句はすべて大文字では表示されません。 </p>
    <p>この仕様のすべてのテキストは、明示的に非規範的と示されているセクション、例、および注を除き、規範的です。<a data-link-type="biblio"
            href="#biblio-rfc2119">[RFC2119]</a> </p>
    <p>この仕様の例は「for example」で始まるか、 <code>class="example"</code>で規範テキストから区別されます。例：</p>
    <div class="example" id="example-ae2b6bc0">
        <a class="self-link" href="#example-ae2b6bc0"></a>
        <p>これは情報提供用の例です。</p>
    </div>
    <p>情報提供用の注は「Note」で始まり、 <code>class="note"</code>で規範テキストから区別されます。例：</p>
    <p class="note" role="note">Note, これは情報提供用の注です。</p>
    <p>注意喚起は特別な注意を促すためにスタイルされる規範セクションであり、 <code>&lt;strong class="advisement"></code>で他の規範テキストから区別されます。例：<strong
            class="advisement"> UAはアクセシブルな代替手段を提供しなければならない。</strong> </p>
    <h3 class="heading settled" id="conform-classes"><span class="content">適合クラス</span><a class="self-link"
            href="#conform-classes"></a></h3>
    <p>この仕様への適合性は、3つの適合クラスで定義されます：</p>
    <dl>
        <dt>スタイルシート
        <dd><a href="https://www.w3.org/TR/CSS2/conform.html#style-sheet">CSSスタイルシート</a>。
        <dt>レンダラー
        <dd><a
                href="https://www.w3.org/TR/CSS2/conform.html#user-agent">UA</a>。スタイルシートのセマンティクスを解釈し、それらを使用するドキュメントをレンダリングします。
        <dt>オーサリングツール
        <dd><a href="https://www.w3.org/TR/CSS2/conform.html#user-agent">UA</a>。スタイルシートを書き出します。
    </dl>
    <p>スタイルシートは、このモジュールで定義された構文を使用するすべての文が、汎用CSS文法およびこのモジュールで定義された各機能の個別文法に従って正当である場合、この仕様に適合しています。</p>
    <p>レンダラーは、適切な仕様で定義された通りにスタイルシートを解釈することに加え、この仕様で定義されたすべての機能を正しく解析し、ドキュメントをそれに応じてレンダリングする場合、この仕様に適合しています。ただし、デバイスの制限によりUAがドキュメントを正しくレンダリングできない場合でも、UAが非適合となるわけではありません。（例：UAがモノクロモニターで色を表示する必要はありません。）
    </p>
    <p>オーサリングツールは、汎用CSS文法およびこのモジュールの各機能の個別文法に従って構文的に正しいスタイルシートを書き出し、このモジュールで説明されているスタイルシートの他の適合要件もすべて満たす場合、この仕様に適合しています。
    </p>
    <h3 class="heading settled" id="conform-responsible"><span class="content">CSSの責任ある実装のための要件</span><a
            class="self-link" href="#conform-responsible"></a></h3>
    <p>以下のセクションでは、現時点および将来において相互運用性を促進する形でCSSを責任を持って実装するためのいくつかの適合性要件を定義します。</p>
    <h4 class="heading settled" id="conform-partial"><span class="content">部分的な実装</span><a class="self-link"
            href="#conform-partial"></a></h4>
    <p>著者がフォールバック値を割り当てるために前方互換のパース規則を利用できるよう、<strong>CSSレンダラーは、サポート可能なレベルがないat-rule、プロパティ、プロパティ値、キーワード、その他の構文要素を無効（および<a
                href="https://www.w3.org/TR/CSS2/conform.html#ignore">必要に応じて無視</a>）として扱わなければならない</strong>。
        特に、ユーザーエージェントは、サポートされていないプロパティ値のみを選択的に無視し、複数値プロパティ宣言内のサポートされている値のみを適用しては<em>ならない</em>：
        いずれかの値が無効（サポートされていない値は必ず無効）とみなされる場合、CSSは宣言全体を無視することを要求します。</p>
    <h4 class="heading settled" id="conform-future-proofing"><span class="content">不安定・独自機能の実装</span><a
            class="self-link" href="#conform-future-proofing"></a></h4>
    <p>将来の安定したCSS機能との競合を避けるため、CSSWGは<a href="https://www.w3.org/TR/CSS/#future-proofing">ベストプラクティス</a>に従って、<a
            href="https://www.w3.org/TR/CSS/#unstable">不安定</a>な機能および<a
            href="https://www.w3.org/TR/CSS/#proprietary-extension">独自拡張</a>を実装することを推奨します。</p>
    <h4 class="heading settled" id="conform-testing"><span class="content">CRレベル機能の実装</span><a class="self-link"
            href="#conform-testing"></a></h4>
    <p>仕様がCandidate Recommendation段階に達したら、実装者は、正しく仕様通りに実装できることを示せるCRレベル機能について<a data-link-type="dfn"
            href="https://www.w3.org/TR/CSS/#vendor-prefix">プリフィックスなし</a>の実装をリリースすべきであり、
        その機能のプリフィックス付きバリアントの公開は避けるべきです。</p>
    <p>CSSの相互運用性を確立・維持するため、CSSワーキンググループは、実験的でないCSSレンダラーには、未プリフィックス実装をリリースする前に実装レポート（必要に応じてそのテストケースも）をW3Cに提出することを求めます。W3Cに提出されたテストケースは、CSSワーキンググループによるレビュー・修正の対象となります。
    </p>
    <p>
        テストケースや実装レポートの提出方法については、CSSワーキンググループのWebサイト<a
            href="https://www.w3.org/Style/CSS/Test/">http://www.w3.org/Style/CSS/Test/</a>をご覧ください。
        質問は<a
            href="http://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>メーリングリストにお寄せください。
        <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
    </p>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本仕様で定義される用語</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#dom-focusableareasearchmode-all">"all"</a><span>, §5.2</span>
        <li><a href="#at-risk">at-risk</a><span>, §1</span>
        <li>
            auto
            <ul>
                <li><a href="#valdef-spatial-navigation-action-auto">spatial-navigation-actionの値</a><span>, §9.2</span>
                <li><a href="#valdef-spatial-navigation-contain-auto">spatial-navigation-containの値</a><span>,
                        §9.1</span>
            </ul>
        <li><a href="#directionally-scroll-an-element">be directionally scrolled</a><span>, §番号なしセクション</span>
        <li><a href="#boundary-box">boundary box</a><span>, §8.1</span>
        <li><a href="#can-be-manually-scrolled">can be manually scrolled</a><span>, §番号なしセクション</span>
        <li><a href="#can-be-manually-scrolled">can be scrolled manually</a><span>, §番号なしセクション</span>
        <li><a href="#dom-spatialnavigationsearchoptions-candidates">candidates</a><span>, §5.2</span>
        <li><a href="#can-be-manually-scrolled">cannot be manually scrolled</a><span>, §番号なしセクション</span>
        <li><a href="#can-be-manually-scrolled">cannot be scrolled manually</a><span>, §番号なしセクション</span>
        <li><a href="#dom-navigationevent-navigationevent">constructor(type)</a><span>, §6.1</span>
        <li><a href="#dom-navigationevent-navigationevent">constructor(type, eventInitDict)</a><span>, §6.1</span>
        <li><a href="#valdef-spatial-navigation-contain-contain">contain</a><span>, §9.1</span>
        <li><a href="#dom-spatialnavigationsearchoptions-container">container</a><span>, §5.2</span>
        <li>
            dir
            <ul>
                <li><a href="#dom-navigationevent-dir">NavigationEventの属性</a><span>, §6.1</span>
                <li><a href="#dom-navigationeventinit-dir">NavigationEventInitのdict-member</a><span>, §6.1</span>
            </ul>
        <li><a href="#directionally-scroll-an-element">directionally scroll an element</a><span>, §番号なしセクション</span>
        <li><a href="#directionally-scroll-an-element">directionally scroll the element</a><span>, §番号なしセクション</span>
        <li><a href="#dispatches-navbeforefocus-event">dispatches navbeforefocus event</a><span>, §6.2.1</span>
        <li><a href="#dispatches-navnotarget-event">dispatches navnotarget event</a><span>, §6.2.2</span>
        <li><a href="#dispatches-navbeforefocus-event">dispatching navbeforefocus event</a><span>, §6.2.1</span>
        <li><a href="#dispatches-navnotarget-event">dispatching navnotarget event</a><span>, §6.2.2</span>
        <li><a href="#dom-spatialnavigationdirection-down">"down"</a><span>, §5.1</span>
        <li><a href="#find-focusable-areas">find focusable areas</a><span>, §8.4</span>
        <li><a href="#find-focusable-areas">finding focusable areas</a><span>, §8.4</span>
        <li><a href="#find-the-shortest-distance">finding the shortest distance</a><span>, §8.4</span>
        <li><a href="#find-the-shortest-distance">find the shortest distance</a><span>, §8.4</span>
        <li><a href="#valdef-spatial-navigation-action-focus">focus</a><span>, §9.2</span>
        <li><a href="#dom-element-focusableareas">focusableAreas()</a><span>, §5.2</span>
        <li><a href="#enumdef-focusableareasearchmode">FocusableAreaSearchMode</a><span>, §5.2</span>
        <li><a href="#dictdef-focusableareasoption">FocusableAreasOption</a><span>, §5.2</span>
        <li><a href="#dom-element-focusableareas">focusableAreas(option)</a><span>, §5.2</span>
        <li><a href="#dom-element-getspatialnavigationcontainer">getSpatialNavigationContainer()</a><span>, §5.2</span>
        <li><a href="#valdef-spatial-navigation-function-grid">grid</a><span>, §9.3</span>
        <li><a href="#inside-area">inside area</a><span>, §8.1</span>
        <li><a href="#dom-spatialnavigationdirection-left">"left"</a><span>, §5.1</span>
        <li><a href="#dom-focusableareasoption-mode">mode</a><span>, §5.2</span>
        <li><a href="#eventdef-navigationevent-navbeforefocus">navbeforefocus</a><span>, §6.2.1</span>
        <li><a href="#dom-window-navigate">navigate(dir)</a><span>, §5.1</span>
        <li><a href="#navigationevent">NavigationEvent</a><span>, §6.1</span>
        <li><a href="#dictdef-navigationeventinit">NavigationEventInit</a><span>, §6.1</span>
        <li><a href="#dom-navigationevent-navigationevent">NavigationEvent(type)</a><span>, §6.1</span>
        <li><a href="#dom-navigationevent-navigationevent">NavigationEvent(type, eventInitDict)</a><span>, §6.1</span>
        <li><a href="#navigation-override">navigation-override</a><span>, §7</span>
        <li><a href="#eventdef-navigationevent-navnotarget">navnotarget</a><span>, §6.2.2</span>
        <li><a href="#valdef-spatial-navigation-function-normal">normal</a><span>, §9.3</span>
        <li>
            relatedTarget
            <ul>
                <li><a href="#dom-navigationevent-relatedtarget">NavigationEventの属性</a><span>, §6.1</span>
                <li><a href="#dom-navigationeventinit-relatedtarget">NavigationEventInitのdict-member</a><span>,
                        §6.1</span>
            </ul>
        <li><a href="#dom-spatialnavigationdirection-right">"right"</a><span>, §5.1</span>
        <li><a href="#valdef-spatial-navigation-action-scroll">scroll</a><span>, §9.2</span>
        <li><a href="#search-origin">search origin</a><span>, §8.1</span>
        <li><a href="#select-the-best-candidate">selecting the best candidate</a><span>, §8.4</span>
        <li><a href="#select-the-best-candidate">select the best candidate</a><span>, §8.4</span>
        <li><a href="#set-the-search-origin">set the search origin</a><span>, §8.4</span>
        <li><a href="#set-the-search-origin">setting the search origin</a><span>, §8.4</span>
        <li><a href="#spatial-navigation">spatialNavigation</a><span>, §1</span>
        <li><a href="#spatial-navigation">spatial navigation</a><span>, §1</span>
        <li><a href="#propdef-spatial-navigation-action">spatial-navigation-action</a><span>, §9.2</span>
        <li><a href="#propdef-spatial-navigation-contain">spatial-navigation-contain</a><span>, §9.1</span>
        <li><a href="#spatial-navigation-containers">spatial navigation containers</a><span>, §8.2</span>
        <li><a href="#enumdef-spatialnavigationdirection">SpatialNavigationDirection</a><span>, §5.1</span>
        <li><a href="#propdef-spatial-navigation-function">spatial-navigation-function</a><span>, §9.3</span>
        <li><a href="#dom-element-spatialnavigationsearch">spatialNavigationSearch(dir)</a><span>, §5.2</span>
        <li><a href="#dom-element-spatialnavigationsearch">spatialNavigationSearch(dir, options)</a><span>, §5.2</span>
        <li><a href="#dictdef-spatialnavigationsearchoptions">SpatialNavigationSearchOptions</a><span>, §5.2</span>
        <li><a href="#dom-element-spatialnavigationsearch-options">spatialNavigationSearch(options)</a><span>,
                §5.2</span>
        <li><a href="#spatial-navigation-starting-point">spatial navigation starting point</a><span>, §8.1</span>
        <li><a href="#spatial-navigation-steps">spatial navigation steps</a><span>, §8.3</span>
        <li><a href="#dom-spatialnavigationdirection-up">"up"</a><span>, §5.1</span>
        <li><a href="#update-the-search-origin">update the search origin</a><span>, §8.4</span>
        <li><a href="#update-the-search-origin">updating the search origin</a><span>, §8.4</span>
        <li><a href="#dom-focusableareasearchmode-visible">"visible"</a><span>, §5.2</span>
    </ul>
    <aside class="dfn-panel" data-for="term-for-box-fragment">
        <a href="https://www.w3.org/TR/css-break-4/#box-fragment">https://www.w3.org/TR/css-break-4/#box-fragment</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-box-fragment">8.1.
                    Glossary</a> <a href="#ref-for-box-fragment①">(2)</a>
            <li><a href="#ref-for-box-fragment②">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-box-fragment③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-all">
        <a
            href="https://www.w3.org/TR/css-cascade-4/#propdef-all">https://www.w3.org/TR/css-cascade-4/#propdef-all</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-all">5.2.
                    Low level APIs</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-box">
        <a href="https://www.w3.org/TR/css-display-3/#box">https://www.w3.org/TR/css-display-3/#box</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-box">8.1.
                    Glossary</a> <a href="#ref-for-box①">(2)</a>
            <li><a href="#ref-for-box②">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-principal-box">
        <a
            href="https://www.w3.org/TR/css-display-3/#principal-box">https://www.w3.org/TR/css-display-3/#principal-box</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-principal-box">Appendix A. Scroll extensions</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-overflow-hidden">
        <a
            href="https://www.w3.org/TR/css-overflow-3/#valdef-overflow-hidden">https://www.w3.org/TR/css-overflow-3/#valdef-overflow-hidden</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-overflow-hidden">Appendix A. Scroll extensions</a> <a
                    href="#ref-for-valdef-overflow-hidden①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-overflow-x">
        <a
            href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow-x">https://www.w3.org/TR/css-overflow-3/#propdef-overflow-x</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-overflow-x">Appendix A. Scroll extensions</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-overflow-y">
        <a
            href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow-y">https://www.w3.org/TR/css-overflow-3/#propdef-overflow-y</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-overflow-y">Appendix A. Scroll extensions</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-scroll-container">
        <a
            href="https://www.w3.org/TR/css-overflow-3/#scroll-container">https://www.w3.org/TR/css-overflow-3/#scroll-container</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-scroll-container">6.2.2.
                    navnotarget</a> <a href="#ref-for-scroll-container①">(2)</a>
            <li><a href="#ref-for-scroll-container②">8.1.
                    Glossary</a> <a href="#ref-for-scroll-container③">(2)</a>
            <li><a href="#ref-for-scroll-container④">8.2.
                    Groupings of elements</a>
            <li><a href="#ref-for-scroll-container⑤">8.3.
                    Navigation</a> <a href="#ref-for-scroll-container⑥">(2)</a> <a
                    href="#ref-for-scroll-container⑦">(3)</a>
            <li><a href="#ref-for-scroll-container⑧">9.1.
                    Creating additional spatial navigation containers: the spatial-navigation-contain property</a>
            <li><a href="#ref-for-scroll-container⑨">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a> <a
                    href="#ref-for-scroll-container①⓪">(2)</a> <a href="#ref-for-scroll-container①①">(3)</a> <a
                    href="#ref-for-scroll-container①②">(4)</a> <a href="#ref-for-scroll-container①③">(5)</a> <a
                    href="#ref-for-scroll-container①④">(6)</a> <a href="#ref-for-scroll-container①⑤">(7)</a> <a
                    href="#ref-for-scroll-container①⑥">(8)</a> <a href="#ref-for-scroll-container①⑦">(9)</a> <a
                    href="#ref-for-scroll-container①⑧">(10)</a> <a href="#ref-for-scroll-container①⑨">(11)</a>
            <li><a href="#ref-for-scroll-container②⓪">Appendix A. Scroll extensions</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-scrollport">
        <a
            href="https://www.w3.org/TR/css-overflow-3/#scrollport">https://www.w3.org/TR/css-overflow-3/#scrollport</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-scrollport">3.
                    Overview</a> <a href="#ref-for-scrollport①">(2)</a> <a href="#ref-for-scrollport②">(3)</a>
            <li><a href="#ref-for-scrollport③">5.2.
                    Low level APIs</a>
            <li><a href="#ref-for-scrollport④">6.2.2.
                    navnotarget</a>
            <li><a href="#ref-for-scrollport⑤">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-relative-position">
        <a
            href="https://www.w3.org/TR/css3-positioning/#relative-position">https://www.w3.org/TR/css3-positioning/#relative-position</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-relative-position">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-scroll-snap-type-mandatory">
        <a
            href="https://www.w3.org/TR/css-scroll-snap-1/#valdef-scroll-snap-type-mandatory">https://www.w3.org/TR/css-scroll-snap-1/#valdef-scroll-snap-type-mandatory</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-scroll-snap-type-mandatory">Appendix A. Scroll extensions</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-optimal-viewing-region">
        <a
            href="https://www.w3.org/TR/css-scroll-snap-1/#optimal-viewing-region">https://www.w3.org/TR/css-scroll-snap-1/#optimal-viewing-region</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-optimal-viewing-region">8.1.
                    Glossary</a> <a href="#ref-for-optimal-viewing-region①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-mult-one-plus">
        <a
            href="https://www.w3.org/TR/css-values-4/#mult-one-plus">https://www.w3.org/TR/css-values-4/#mult-one-plus</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-mult-one-plus">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-comb-one">
        <a href="https://www.w3.org/TR/css-values-4/#comb-one">https://www.w3.org/TR/css-values-4/#comb-one</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-comb-one">9.1.
                    Creating additional spatial navigation containers: the spatial-navigation-contain property</a>
            <li><a href="#ref-for-comb-one①">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a> <a
                    href="#ref-for-comb-one②">(2)</a>
            <li><a href="#ref-for-comb-one③">9.3.
                    Selecting the navigation algorithm: the spatial-navigation-function property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-x14">
        <a href="https://drafts.csswg.org/css2/box.html#x14">https://drafts.csswg.org/css2/box.html#x14</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-x14">8.1.
                    Glossary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-painting-order">
        <a
            href="https://drafts.csswg.org/css2/zindex.html#painting-order">https://drafts.csswg.org/css2/zindex.html#painting-order</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-painting-order">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-painting-order①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-scroll-an-element">
        <a
            href="https://www.w3.org/TR/cssom-view/#scroll-an-element">https://www.w3.org/TR/cssom-view/#scroll-an-element</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-scroll-an-element">Appendix A. Scroll extensions</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-element">
        <a href="https://dom.spec.whatwg.org/#element">https://dom.spec.whatwg.org/#element</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-element">5.2.
                    Low level APIs</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-event">
        <a href="https://dom.spec.whatwg.org/#event">https://dom.spec.whatwg.org/#event</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-event">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-event①">6.2.2.
                    navnotarget</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-eventtarget">
        <a href="https://dom.spec.whatwg.org/#eventtarget">https://dom.spec.whatwg.org/#eventtarget</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-eventtarget">6.1.
                    Interface NavigationEvent</a> <a href="#ref-for-eventtarget①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-node">
        <a href="https://dom.spec.whatwg.org/#node">https://dom.spec.whatwg.org/#node</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-node">5.2.
                    Low level APIs</a> <a href="#ref-for-node①">(2)</a> <a href="#ref-for-node②">(3)</a> <a
                    href="#ref-for-node③">(4)</a> <a href="#ref-for-node④">(5)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canceled-flag">
        <a href="https://dom.spec.whatwg.org/#canceled-flag">https://dom.spec.whatwg.org/#canceled-flag</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canceled-flag">4.
                    Triggering Spatial Navigation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-document">
        <a href="https://dom.spec.whatwg.org/#concept-document">https://dom.spec.whatwg.org/#concept-document</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-document">5.2.
                    Low level APIs</a>
            <li><a href="#ref-for-concept-document①">8.1.
                    Glossary</a>
            <li><a href="#ref-for-concept-document②">8.3.
                    Navigation</a> <a href="#ref-for-concept-document③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-document-element">
        <a href="https://dom.spec.whatwg.org/#document-element">https://dom.spec.whatwg.org/#document-element</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-element">8.3.
                    Navigation</a> <a href="#ref-for-document-element①">(2)</a> <a
                    href="#ref-for-document-element②">(3)</a> <a href="#ref-for-document-element③">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-boundary-point-node">
        <a
            href="https://dom.spec.whatwg.org/#boundary-point-node">https://dom.spec.whatwg.org/#boundary-point-node</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-boundary-point-node">8.3.
                    Navigation</a> <a href="#ref-for-boundary-point-node①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-node-document">
        <a
            href="https://dom.spec.whatwg.org/#concept-node-document">https://dom.spec.whatwg.org/#concept-node-document</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-node-document">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-concept-node-document①">6.2.2.
                    navnotarget</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-event-preventdefault">
        <a
            href="https://dom.spec.whatwg.org/#dom-event-preventdefault">https://dom.spec.whatwg.org/#dom-event-preventdefault</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-event-preventdefault">3.
                    Overview</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-event-target">
        <a href="https://dom.spec.whatwg.org/#dom-event-target">https://dom.spec.whatwg.org/#dom-event-target</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-event-target">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-dom-event-target①">6.2.2.
                    navnotarget</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-default-allowlist">
        <a
            href="https://w3c.github.io/webappsec-feature-policy/#default-allowlist">https://w3c.github.io/webappsec-feature-policy/#default-allowlist</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-default-allowlist">7.
                    The navigation-override policy-controlled feature</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-policy-controlled-feature">
        <a
            href="https://w3c.github.io/webappsec-feature-policy/#policy-controlled-feature">https://w3c.github.io/webappsec-feature-policy/#policy-controlled-feature</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-policy-controlled-feature">7.
                    The navigation-override policy-controlled feature</a> <a
                    href="#ref-for-policy-controlled-feature①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-window">
        <a
            href="https://html.spec.whatwg.org/multipage/window-object.html#window">https://html.spec.whatwg.org/multipage/window-object.html#window</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-window">5.1.
                    Triggering Navigation Programmatically</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-active-document">
        <a
            href="https://html.spec.whatwg.org/multipage/browsers.html#active-document">https://html.spec.whatwg.org/multipage/browsers.html#active-document</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-active-document">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-active-document①">6.2.2.
                    navnotarget</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-element-disabled">
        <a
            href="https://html.spec.whatwg.org/multipage/semantics-other.html#concept-element-disabled">https://html.spec.whatwg.org/multipage/semantics-other.html#concept-element-disabled</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-element-disabled">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-being-rendered">
        <a
            href="https://html.spec.whatwg.org/multipage/rendering.html#being-rendered">https://html.spec.whatwg.org/multipage/rendering.html#being-rendered</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-being-rendered">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-browsing-context">
        <a
            href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context">https://html.spec.whatwg.org/multipage/browsers.html#browsing-context</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-browsing-context">8.1.
                    Glossary</a>
            <li><a href="#ref-for-browsing-context①">8.2.
                    Groupings of elements</a>
            <li><a href="#ref-for-browsing-context②">9.1.
                    Creating additional spatial navigation containers: the spatial-navigation-contain property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-browsing-context-container">
        <a
            href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context-container">https://html.spec.whatwg.org/multipage/browsers.html#browsing-context-container</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-browsing-context-container">8.3.
                    Navigation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-currently-focused-area-of-a-top-level-browsing-context">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#currently-focused-area-of-a-top-level-browsing-context">https://html.spec.whatwg.org/multipage/interaction.html#currently-focused-area-of-a-top-level-browsing-context</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-currently-focused-area-of-a-top-level-browsing-context">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-anchor">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#dom-anchor">https://html.spec.whatwg.org/multipage/interaction.html#dom-anchor</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-anchor">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-dom-anchor①">(2)</a> <a
                    href="#ref-for-dom-anchor②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-expressly-inert">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#expressly-inert">https://html.spec.whatwg.org/multipage/interaction.html#expressly-inert</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-expressly-inert">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-focus">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#dom-focus">https://html.spec.whatwg.org/multipage/interaction.html#dom-focus</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-focus">3.
                    Overview</a>
            <li><a href="#ref-for-dom-focus①">6.2.2.
                    navnotarget</a>
            <li><a href="#ref-for-dom-focus②">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-focusable-area">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#focusable-area">https://html.spec.whatwg.org/multipage/interaction.html#focusable-area</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-focusable-area">8.1.
                    Glossary</a> <a href="#ref-for-focusable-area①">(2)</a>
            <li><a href="#ref-for-focusable-area②">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-focusing-steps">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#focusing-steps">https://html.spec.whatwg.org/multipage/interaction.html#focusing-steps</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-focusing-steps">8.3.
                    Navigation</a> <a href="#ref-for-focusing-steps①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-nested-browsing-context">
        <a
            href="https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context">https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-nested-browsing-context">8.3.
                    Navigation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-origin">
        <a
            href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin">https://html.spec.whatwg.org/multipage/origin.html#concept-origin</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-origin">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-concept-origin①">6.2.2.
                    navnotarget</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-nodes-are-removed">
        <a
            href="https://html.spec.whatwg.org/multipage/infrastructure.html#nodes-are-removed">https://html.spec.whatwg.org/multipage/infrastructure.html#nodes-are-removed</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-nodes-are-removed">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-sequential-focus-navigation-order">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#sequential-focus-navigation-order">https://html.spec.whatwg.org/multipage/interaction.html#sequential-focus-navigation-order</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-sequential-focus-navigation-order">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-sequential-focus-navigation-starting-point">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#sequential-focus-navigation-starting-point">https://html.spec.whatwg.org/multipage/interaction.html#sequential-focus-navigation-starting-point</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-sequential-focus-navigation-starting-point">8.1.
                    Glossary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-attr-tabindex">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#attr-tabindex">https://html.spec.whatwg.org/multipage/interaction.html#attr-tabindex</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-attr-tabindex">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-attr-tabindex①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-the-body-element-2">
        <a
            href="https://html.spec.whatwg.org/multipage/dom.html#the-body-element-2">https://html.spec.whatwg.org/multipage/dom.html#the-body-element-2</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-the-body-element-2">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-the-body-element-2①">6.2.2.
                    navnotarget</a>
            <li><a href="#ref-for-the-body-element-2②">8.3.
                    Navigation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-top-level-browsing-context">
        <a
            href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context">https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-top-level-browsing-context">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-top-level-browsing-context①">6.2.2.
                    navnotarget</a>
            <li><a href="#ref-for-top-level-browsing-context②">8.2.
                    Groupings of elements</a>
            <li><a href="#ref-for-top-level-browsing-context③">8.3.
                    Navigation</a>
            <li><a href="#ref-for-top-level-browsing-context④">9.1.
                    Creating additional spatial navigation containers: the spatial-navigation-contain property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-assert">
        <a href="https://infra.spec.whatwg.org/#assert">https://infra.spec.whatwg.org/#assert</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-assert">8.3.
                    Navigation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-empty">
        <a href="https://infra.spec.whatwg.org/#list-empty">https://infra.spec.whatwg.org/#list-empty</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-empty">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-remove">
        <a href="https://infra.spec.whatwg.org/#list-remove">https://infra.spec.whatwg.org/#list-remove</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-remove">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-ordered-set">
        <a href="https://infra.spec.whatwg.org/#ordered-set">https://infra.spec.whatwg.org/#ordered-set</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-ordered-set">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-ordered-set①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-scroll-boundary">
        <a
            href="https://drafts.csswg.org/css-overscroll-behavior-1/#scroll-boundary">https://drafts.csswg.org/css-overscroll-behavior-1/#scroll-boundary</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-scroll-boundary">Appendix A. Scroll extensions</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-keyboardevent">
        <a href="https://www.w3.org/TR/uievents/#keyboardevent">https://www.w3.org/TR/uievents/#keyboardevent</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-keyboardevent">6.2.1.
                    navbeforefocus</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-uievent">
        <a href="https://www.w3.org/TR/uievents/#uievent">https://www.w3.org/TR/uievents/#uievent</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-uievent">4.
                    Triggering Spatial Navigation</a>
            <li><a href="#ref-for-uievent①">6.1.
                    Interface NavigationEvent</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dictdef-uieventinit">
        <a
            href="https://www.w3.org/TR/uievents/#dictdef-uieventinit">https://www.w3.org/TR/uievents/#dictdef-uieventinit</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-uieventinit">6.1.
                    Interface NavigationEvent</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-event-target">
        <a href="https://w3c.github.io/uievents/#event-target">https://w3c.github.io/uievents/#event-target</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-event-target">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-event-target①">6.2.2.
                    navnotarget</a> <a href="#ref-for-event-target②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-keyboardevent-key">
        <a
            href="https://www.w3.org/TR/uievents/#dom-keyboardevent-key">https://www.w3.org/TR/uievents/#dom-keyboardevent-key</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-keyboardevent-key">6.2.1.
                    navbeforefocus</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-keydown">
        <a href="https://w3c.github.io/uievents/#keydown">https://w3c.github.io/uievents/#keydown</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-keydown">4.
                    Triggering Spatial Navigation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-DOMString">
        <a href="https://heycam.github.io/webidl/#idl-DOMString">https://heycam.github.io/webidl/#idl-DOMString</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-DOMString">6.1.
                    Interface NavigationEvent</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-Exposed">
        <a href="https://heycam.github.io/webidl/#Exposed">https://heycam.github.io/webidl/#Exposed</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-Exposed">6.1.
                    Interface NavigationEvent</a>
        </ul>
    </aside>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">参照定義用語</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[css-break-4]</a> は以下の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-box-fragment" style="color:initial">ボックスフラグメント</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-cascade-4]</a> は以下の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-all" style="color:initial">all</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-display-3]</a> は以下の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-box" style="color:initial">ボックス</span>
                <li><span class="dfn-paneled" id="term-for-principal-box" style="color:initial">主要ボックス</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-OVERFLOW-3]</a> は以下の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-valdef-overflow-hidden" style="color:initial">hidden</span>
                <li><span class="dfn-paneled" id="term-for-propdef-overflow-x" style="color:initial">overflow-x</span>
                <li><span class="dfn-paneled" id="term-for-propdef-overflow-y" style="color:initial">overflow-y</span>
                <li><span class="dfn-paneled" id="term-for-scroll-container" style="color:initial">スクロールコンテナ</span>
                <li><span class="dfn-paneled" id="term-for-scrollport" style="color:initial">スクロールポート</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-position-3]</a> は以下の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-relative-position" style="color:initial">相対位置</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-SCROLL-SNAP-1]</a> は以下の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-valdef-scroll-snap-type-mandatory"
                        style="color:initial">mandatory</span>
                <li><span class="dfn-paneled" id="term-for-optimal-viewing-region" style="color:initial">最適表示領域</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-values-4]</a> は以下の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-mult-one-plus" style="color:initial">+</span>
                <li><span class="dfn-paneled" id="term-for-comb-one" style="color:initial">|</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS2]</a> は以下の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-x14" style="color:initial">ボーダーボックス</span>
                <li><span class="dfn-paneled" id="term-for-painting-order" style="color:initial">描画順序</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSSOM-VIEW-1]</a> は以下の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-scroll-an-element" style="color:initial">要素のスクロール</span>
            </ul>
        <li>
            <a data-link-type="biblio">[DOM]</a> は以下の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-element" style="color:initial">Element</span>
                <li><span class="dfn-paneled" id="term-for-event" style="color:initial">Event</span>
                <li><span class="dfn-paneled" id="term-for-eventtarget" style="color:initial">EventTarget</span>
                <li><span class="dfn-paneled" id="term-for-node" style="color:initial">Node</span>
                <li><span class="dfn-paneled" id="term-for-canceled-flag" style="color:initial">canceled flag</span>
                <li><span class="dfn-paneled" id="term-for-concept-document" style="color:initial">document</span>
                <li><span class="dfn-paneled" id="term-for-document-element" style="color:initial">document
                        element</span>
                <li><span class="dfn-paneled" id="term-for-boundary-point-node" style="color:initial">node</span>
                <li><span class="dfn-paneled" id="term-for-concept-node-document" style="color:initial">node
                        document</span>
                <li><span class="dfn-paneled" id="term-for-dom-event-preventdefault"
                        style="color:initial">preventDefault()</span>
                <li><span class="dfn-paneled" id="term-for-dom-event-target" style="color:initial">target</span>
            </ul>
        <li>
            <a data-link-type="biblio">[feature-policy]</a> は以下の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-default-allowlist" style="color:initial">default
                        allowlist</span>
                <li><span class="dfn-paneled" id="term-for-policy-controlled-feature"
                        style="color:initial">ポリシー制御機能</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a> は以下の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-window" style="color:initial">Window</span>
                <li><span class="dfn-paneled" id="term-for-active-document" style="color:initial">アクティブドキュメント</span>
                <li><span class="dfn-paneled" id="term-for-concept-element-disabled" style="color:initial">実際に無効</span>
                <li><span class="dfn-paneled" id="term-for-being-rendered" style="color:initial">レンダリング中</span>
                <li><span class="dfn-paneled" id="term-for-browsing-context" style="color:initial">閲覧コンテキスト</span>
                <li><span class="dfn-paneled" id="term-for-browsing-context-container"
                        style="color:initial">閲覧コンテナ</span>
                <li><span class="dfn-paneled" id="term-for-currently-focused-area-of-a-top-level-browsing-context"
                        style="color:initial">トップレベル閲覧コンテキストの現在フォーカス領域</span>
                <li><span class="dfn-paneled" id="term-for-dom-anchor" style="color:initial">DOMアンカー</span>
                <li><span class="dfn-paneled" id="term-for-expressly-inert" style="color:initial">明示的に非活性</span>
                <li><span class="dfn-paneled" id="term-for-dom-focus" style="color:initial">focus()</span>
                <li><span class="dfn-paneled" id="term-for-focusable-area" style="color:initial">フォーカス可能エリア</span>
                <li><span class="dfn-paneled" id="term-for-focusing-steps" style="color:initial">フォーカス手順</span>
                <li><span class="dfn-paneled" id="term-for-nested-browsing-context"
                        style="color:initial">入れ子閲覧コンテキスト</span>
                <li><span class="dfn-paneled" id="term-for-concept-origin" style="color:initial">オリジン</span>
                <li><span class="dfn-paneled" id="term-for-nodes-are-removed" style="color:initial">削除済み</span>
                <li><span class="dfn-paneled" id="term-for-sequential-focus-navigation-order"
                        style="color:initial">逐次フォーカスナビゲーション順</span>
                <li><span class="dfn-paneled" id="term-for-sequential-focus-navigation-starting-point"
                        style="color:initial">逐次フォーカスナビゲーション起点</span>
                <li><span class="dfn-paneled" id="term-for-attr-tabindex" style="color:initial">tabindex</span>
                <li><span class="dfn-paneled" id="term-for-the-body-element-2" style="color:initial">body要素</span>
                <li><span class="dfn-paneled" id="term-for-top-level-browsing-context"
                        style="color:initial">トップレベル閲覧コンテキスト</span>
            </ul>
        <li>
            <a data-link-type="biblio">[infra]</a> は以下の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-assert" style="color:initial">assert</span>
                <li><span class="dfn-paneled" id="term-for-list-empty" style="color:initial">空</span>
                <li><span class="dfn-paneled" id="term-for-list-remove" style="color:initial">削除</span>
                <li><span class="dfn-paneled" id="term-for-ordered-set" style="color:initial">集合</span>
            </ul>
        <li>
            <a data-link-type="biblio">[overscroll-behavior]</a> は以下の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-scroll-boundary" style="color:initial">スクロール境界</span>
            </ul>
        <li>
            <a data-link-type="biblio">[uievents]</a> は以下の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-keyboardevent" style="color:initial">KeyboardEvent</span>
                <li><span class="dfn-paneled" id="term-for-uievent" style="color:initial">UIEvent</span>
                <li><span class="dfn-paneled" id="term-for-dictdef-uieventinit" style="color:initial">UIEventInit</span>
                <li><span class="dfn-paneled" id="term-for-event-target" style="color:initial">イベントターゲット</span>
                <li><span class="dfn-paneled" id="term-for-dom-keyboardevent-key" style="color:initial">key</span>
                <li><span class="dfn-paneled" id="term-for-keydown" style="color:initial">keydown</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WebIDL]</a> は以下の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="term-for-idl-DOMString" style="color:initial">DOMString</span>
                <li><span class="dfn-paneled" id="term-for-Exposed" style="color:initial">Exposed</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">規範参考文献</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css-break-4">[CSS-BREAK-4]
        <dd>Rossen Atanassov; Elika Etemad. <a href="https://www.w3.org/TR/css-break-4/">CSS Fragmentation Module Level
                4</a>. 2018年12月18日. WD. URL: <a
                href="https://www.w3.org/TR/css-break-4/">https://www.w3.org/TR/css-break-4/</a>
        <dt id="biblio-css-cascade-4">[CSS-CASCADE-4]
        <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-cascade-4/">CSS Cascading and Inheritance
                Level 4</a>. 2018年8月28日. CR. URL: <a
                href="https://www.w3.org/TR/css-cascade-4/">https://www.w3.org/TR/css-cascade-4/</a>
        <dt id="biblio-css-display-3">[CSS-DISPLAY-3]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-display-3/">CSS Display Module Level 3</a>.
            2019年7月11日. CR. URL: <a href="https://www.w3.org/TR/css-display-3/">https://www.w3.org/TR/css-display-3/</a>
        <dt id="biblio-css-overflow-3">[CSS-OVERFLOW-3]
        <dd>David Baron; Elika Etemad; Florian Rivoal. <a href="https://www.w3.org/TR/css-overflow-3/">CSS Overflow
                Module Level 3</a>. 2018年7月31日. WD. URL: <a
                href="https://www.w3.org/TR/css-overflow-3/">https://www.w3.org/TR/css-overflow-3/</a>
        <dt id="biblio-css-position-3">[CSS-POSITION-3]
        <dd>Rossen Atanassov; Arron Eicholz. <a href="https://www.w3.org/TR/css-position-3/">CSS Positioned Layout
                Module Level 3</a>. 2016年5月17日. WD. URL: <a
                href="https://www.w3.org/TR/css-position-3/">https://www.w3.org/TR/css-position-3/</a>
        <dt id="biblio-css-scroll-snap-1">[CSS-SCROLL-SNAP-1]
        <dd>Matt Rakow; et al. <a href="https://www.w3.org/TR/css-scroll-snap-1/">CSS Scroll Snap Module Level 1</a>.
            2019年3月19日. CR. URL: <a
                href="https://www.w3.org/TR/css-scroll-snap-1/">https://www.w3.org/TR/css-scroll-snap-1/</a>
        <dt id="biblio-css-values-4">[CSS-VALUES-4]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-4/">CSS Values and Units Module
                Level 4</a>. 2019年1月31日. WD. URL: <a
                href="https://www.w3.org/TR/css-values-4/">https://www.w3.org/TR/css-values-4/</a>
        <dt id="biblio-css2">[CSS2]
        <dd>Bert Bos; et al. <a href="https://www.w3.org/TR/CSS2/">Cascading Style Sheets Level 2 Revision 1 (CSS 2.1)
                Specification</a>. 2011年6月7日. REC. URL: <a
                href="https://www.w3.org/TR/CSS2/">https://www.w3.org/TR/CSS2/</a>
        <dt id="biblio-cssom-view-1">[CSSOM-VIEW-1]
        <dd>Simon Pieters. <a href="https://www.w3.org/TR/cssom-view-1/">CSSOM View Module</a>. 2016年3月17日. WD. URL: <a
                href="https://www.w3.org/TR/cssom-view-1/">https://www.w3.org/TR/cssom-view-1/</a>
        <dt id="biblio-dom">[DOM]
        <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM Standard</a>. Living Standard. URL: <a
                href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
        <dt id="biblio-feature-policy">[FEATURE-POLICY]
        <dd>Ian Clelland. <a href="https://www.w3.org/TR/feature-policy-1/">Feature Policy</a>. 2019年4月16日. WD. URL: <a
                href="https://www.w3.org/TR/feature-policy-1/">https://www.w3.org/TR/feature-policy-1/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living
            Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-infra">[INFRA]
        <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/">Infra Standard</a>. Living
            Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement
                Levels</a>. 1997年3月. Best Current Practice. URL: <a
                href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
        <dt id="biblio-uievents">[UIEVENTS]
        <dd>Gary Kacmarcik; Travis Leithead; Doug Schepers. <a href="https://www.w3.org/TR/uievents/">UI Events</a>.
            2019年5月30日. WD. URL: <a href="https://www.w3.org/TR/uievents/">https://www.w3.org/TR/uievents/</a>
        <dt id="biblio-webidl">[WebIDL]
        <dd>Boris Zbarsky. <a href="https://heycam.github.io/webidl/">Web IDL</a>. 2016年12月15日. ED. URL: <a
                href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
    </dl>
    <h3 class="no-num no-ref heading settled" id="informative"><span class="content">参考情報文献</span><a class="self-link"
            href="#informative"></a></h3>
    <dl>
        <dt id="biblio-css-transforms-1">[CSS-TRANSFORMS-1]
        <dd>Simon Fraser 他 <a href="https://www.w3.org/TR/css-transforms-1/">CSS Transforms Module Level
                1</a>。2019年2月14日。CR。URL: <a
                href="https://www.w3.org/TR/css-transforms-1/">https://www.w3.org/TR/css-transforms-1/</a>
        <dt id="biblio-extensible">[EXTENSIBLE]
        <dd><a href="https://extensiblewebmanifesto.org/">The Extensible Web Manifesto</a>。2013年6月10日。URL: <a
                href="https://extensiblewebmanifesto.org/">https://extensiblewebmanifesto.org/</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="property-index"><span class="content">プロパティ索引</span><a
            class="self-link" href="#property-index"></a></h2>
    <div class="big-element-wrapper">
        <table class="index">
            <thead>
                <tr>
                    <th scope="col">名前
                    <th scope="col">値
                    <th scope="col">初期値
                    <th scope="col">適用対象
                    <th scope="col">継承
                    <th scope="col">%ages
                    <th scope="col">アニメーション型
                    <th scope="col">正規順序
                    <th scope="col">算出値
            <tbody>
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-spatial-navigation-action"
                            id="ref-for-propdef-spatial-navigation-action①①">spatial-navigation-action</a>
                    <td>auto | focus | scroll
                    <td>auto
                    <td>スクロールコンテナ
                    <td>no
                    <td>n/a
                    <td>離散
                    <td>文法順
                    <td>指定通り
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-spatial-navigation-contain"
                            id="ref-for-propdef-spatial-navigation-contain⑤">spatial-navigation-contain</a>
                    <td>auto | contain
                    <td>auto
                    <td>すべての要素
                    <td>no
                    <td>n/a
                    <td>離散
                    <td>文法順
                    <td>指定通り
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-spatial-navigation-function"
                            id="ref-for-propdef-spatial-navigation-function③">spatial-navigation-function</a>
                    <td>normal | grid
                    <td>normal
                    <td>空間ナビゲーションコンテナ
                    <td>no
                    <td>n/a
                    <td>離散
                    <td>文法順
                    <td>指定通り
        </table>
    </div>
    <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL索引</span><a class="self-link"
            href="#idl-index"></a></h2>
    <pre class="idl highlight def"><c- b>enum</c-> <a href="#enumdef-spatialnavigationdirection"><code><c- g>SpatialNavigationDirection</c-></code></a> {
    <a href="#dom-spatialnavigationdirection-up"><code><c- s>"up"</c-></code></a>,
    <a href="#dom-spatialnavigationdirection-down"><code><c- s>"down"</c-></code></a>,
    <a href="#dom-spatialnavigationdirection-left"><code><c- s>"left"</c-></code></a>,
    <a href="#dom-spatialnavigationdirection-right"><code><c- s>"right"</c-></code></a>,
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/window-object.html#window" id="ref-for-window①"><c- g>Window</c-></a> {
    <c- b>void</c-> <a class="idl-code" data-link-type="method" href="#dom-window-navigate" id="ref-for-dom-window-navigate①①"><c- g>navigate</c-></a>(<a class="n" data-link-type="idl-name" href="#enumdef-spatialnavigationdirection" id="ref-for-enumdef-spatialnavigationdirection④"><c- n>SpatialNavigationDirection</c-></a> <a href="#dom-window-navigate-dir-dir"><code><c- g>dir</c-></code></a>);
};

<c- b>enum</c-> <a href="#enumdef-focusableareasearchmode"><code><c- g>FocusableAreaSearchMode</c-></code></a> {
    <a href="#dom-focusableareasearchmode-visible"><code><c- s>"visible"</c-></code></a>,
    <a href="#dom-focusableareasearchmode-all"><code><c- s>"all"</c-></code></a>
};

<c- b>dictionary</c-> <a href="#dictdef-focusableareasoption"><code><c- g>FocusableAreasOption</c-></code></a> {
    <a class="n" data-link-type="idl-name" href="#enumdef-focusableareasearchmode" id="ref-for-enumdef-focusableareasearchmode①"><c- n>FocusableAreaSearchMode</c-></a> <a data-type="FocusableAreaSearchMode " href="#dom-focusableareasoption-mode"><code><c- g>mode</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-spatialnavigationsearchoptions"><code><c- g>SpatialNavigationSearchOptions</c-></code></a> {
    <c- b>sequence</c->&lt;<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node⑤"><c- n>Node</c-></a>>? <a data-type="sequence<Node>? " href="#dom-spatialnavigationsearchoptions-candidates"><code><c- g>candidates</c-></code></a>;
    <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node①①"><c- n>Node</c-></a>? <a data-type="Node? " href="#dom-spatialnavigationsearchoptions-container"><code><c- g>container</c-></code></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①"><c- g>Element</c-></a> {
    <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node②①"><c- n>Node</c-></a> <a class="idl-code" data-link-type="method" href="#dom-element-getspatialnavigationcontainer" id="ref-for-dom-element-getspatialnavigationcontainer①①"><c- g>getSpatialNavigationContainer</c-></a>();
    <c- b>sequence</c->&lt;<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node③①"><c- n>Node</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-element-focusableareas" id="ref-for-dom-element-focusableareas①①"><c- g>focusableAreas</c-></a>(<c- b>optional</c-> <a class="n" data-link-type="idl-name" href="#dictdef-focusableareasoption" id="ref-for-dictdef-focusableareasoption①"><c- n>FocusableAreasOption</c-></a> <a href="#dom-element-focusableareas-option-option"><code><c- g>option</c-></code></a>);
    <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node④①"><c- n>Node</c-></a>? <a href="#dom-element-spatialnavigationsearch"><code><c- g>spatialNavigationSearch</c-></code></a>(<a class="n" data-link-type="idl-name" href="#enumdef-spatialnavigationdirection" id="ref-for-enumdef-spatialnavigationdirection①①"><c- n>SpatialNavigationDirection</c-></a> <a href="#dom-element-spatialnavigationsearch-dir-options-dir"><code><c- g>dir</c-></code></a>, <c- b>optional</c-> <a class="n" data-link-type="idl-name" href="#dictdef-spatialnavigationsearchoptions" id="ref-for-dictdef-spatialnavigationsearchoptions②"><c- n>SpatialNavigationSearchOptions</c-></a> <a href="#dom-element-spatialnavigationsearch-dir-options-options"><code><c- g>options</c-></code></a>);
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#navigationevent"><code><c- g>NavigationEvent</c-></code></a> : <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/uievents/#uievent" id="ref-for-uievent①①"><c- n>UIEvent</c-></a> {
    <a href="#dom-navigationevent-navigationevent"><code><c- g>constructor</c-></code></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a> <a href="#dom-navigationevent-constructor-type-eventinitdict-type"><code><c- g>type</c-></code></a>,
                <c- b>optional</c-> <a class="n" data-link-type="idl-name" href="#dictdef-navigationeventinit" id="ref-for-dictdef-navigationeventinit①①"><c- n>NavigationEventInit</c-></a> <a href="#dom-navigationevent-constructor-type-eventinitdict-eventinitdict"><code><c- g>eventInitDict</c-></code></a>);
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="n" data-link-type="idl-name" href="#enumdef-spatialnavigationdirection" id="ref-for-enumdef-spatialnavigationdirection②①"><c- n>SpatialNavigationDirection</c-></a> <a data-readonly data-type="SpatialNavigationDirection" href="#dom-navigationevent-dir"><code><c- g>dir</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget②"><c- n>EventTarget</c-></a>? <a data-readonly data-type="EventTarget?" href="#dom-navigationevent-relatedtarget"><code><c- g>relatedTarget</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-navigationeventinit"><code><c- g>NavigationEventInit</c-></code></a> : <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/uievents/#dictdef-uieventinit" id="ref-for-dictdef-uieventinit①"><c- n>UIEventInit</c-></a> {
    <a class="n" data-link-type="idl-name" href="#enumdef-spatialnavigationdirection" id="ref-for-enumdef-spatialnavigationdirection③①"><c- n>SpatialNavigationDirection</c-></a> <a data-type="SpatialNavigationDirection " href="#dom-navigationeventinit-dir"><code><c- g>dir</c-></code></a>;
    <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget①①"><c- n>EventTarget</c-></a>? <a data-default="null" data-type="EventTarget? " href="#dom-navigationeventinit-relatedtarget"><code><c- g>relatedTarget</c-></code></a> = <c- b>null</c->;
};

</pre>
    <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">課題索引</span><a class="self-link"
            href="#issues-index"></a></h2>
    <div style="counter-reset:issue">
        <div class="issue"> このAPIの名称は議論中です <a
                href="https://github.com/w3c/csswg-drafts/issues/3387">&lt;https://github.com/w3c/csswg-drafts/issues/3387></a><a
                href="#issue-a5a227c8"> ↵ </a></div>
        <div class="issue"> CSSは「border-radiusなど角形状プロパティを考慮したボーダーボックス」に対応する用語を持つべきです。 <a
                href="https://github.com/w3c/csswg-drafts/issues/2324">&lt;https://github.com/w3c/csswg-drafts/issues/2324></a><a
                href="#issue-c7f6d991"> ↵ </a></div>
        <div class="issue"> このような用語は <a data-link-type="biblio" href="#biblio-cssom-view-1">[CSSOM-VIEW-1]</a>、<a
                data-link-type="biblio" href="#biblio-css-overflow-3">[CSS-OVERFLOW-3]</a>、<a data-link-type="biblio"
                href="#biblio-css-scroll-snap-1">[CSS-SCROLL-SNAP-1]</a> に含めるべきです。 <a
                href="https://github.com/w3c/csswg-drafts/issues/2322">&lt;https://github.com/w3c/csswg-drafts/issues/2322></a><a
                href="#issue-942e7041"> ↵ </a></div>
        <div class="issue"> <a data-link-type="biblio" href="#biblio-cssom-view-1">[CSSOM-VIEW-1]</a>
            で明示的な位置指定なしで方向スクロールの方法を定義すべきです。
            それまで、暫定的に独自手法で対応します。 <a
                href="https://github.com/w3c/csswg-drafts/issues/2323">&lt;https://github.com/w3c/csswg-drafts/issues/2323></a><a
                href="#issue-00706fa4"> ↵ </a></div>
    </div>
    <aside class="dfn-panel" data-for="spatial-navigation">
        <b><a href="#spatial-navigation">#spatial-navigation</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-spatial-navigation">1.
                    Introduction</a> <a href="#ref-for-spatial-navigation①">(2)</a> <a
                    href="#ref-for-spatial-navigation②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="at-risk">
        <b><a href="#at-risk">#at-risk</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-at-risk">5.2.
                    Low level APIs</a>
            <li><a href="#ref-for-at-risk①">9.1.
                    Creating additional spatial navigation containers: the spatial-navigation-contain property</a>
            <li><a href="#ref-for-at-risk②">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="enumdef-spatialnavigationdirection">
        <b><a href="#enumdef-spatialnavigationdirection">#enumdef-spatialnavigationdirection</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-enumdef-spatialnavigationdirection">5.1.
                    Triggering Navigation Programmatically</a>
            <li><a href="#ref-for-enumdef-spatialnavigationdirection①">5.2.
                    Low level APIs</a>
            <li><a href="#ref-for-enumdef-spatialnavigationdirection②">6.1.
                    Interface NavigationEvent</a> <a href="#ref-for-enumdef-spatialnavigationdirection③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-spatialnavigationdirection-up">
        <b><a href="#dom-spatialnavigationdirection-up">#dom-spatialnavigationdirection-up</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-spatialnavigationdirection-up">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-dom-spatialnavigationdirection-up①">(2)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-up②">(3)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-up③">(4)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-up④">(5)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-up⑤">(6)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-up⑥">(7)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-spatialnavigationdirection-down">
        <b><a href="#dom-spatialnavigationdirection-down">#dom-spatialnavigationdirection-down</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-spatialnavigationdirection-down">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-dom-spatialnavigationdirection-down①">(2)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-down②">(3)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-down③">(4)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-down④">(5)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-down⑤">(6)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-down⑥">(7)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-spatialnavigationdirection-left">
        <b><a href="#dom-spatialnavigationdirection-left">#dom-spatialnavigationdirection-left</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-spatialnavigationdirection-left">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-dom-spatialnavigationdirection-left①">(2)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-left②">(3)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-left③">(4)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-left④">(5)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-left⑤">(6)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-left⑥">(7)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-spatialnavigationdirection-right">
        <b><a href="#dom-spatialnavigationdirection-right">#dom-spatialnavigationdirection-right</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-spatialnavigationdirection-right">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-dom-spatialnavigationdirection-right①">(2)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-right②">(3)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-right③">(4)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-right④">(5)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-right⑤">(6)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-right⑥">(7)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-window-navigate">
        <b><a href="#dom-window-navigate">#dom-window-navigate</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-window-navigate">5.1.
                    Triggering Navigation Programmatically</a> <a href="#ref-for-dom-window-navigate①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="enumdef-focusableareasearchmode">
        <b><a href="#enumdef-focusableareasearchmode">#enumdef-focusableareasearchmode</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-enumdef-focusableareasearchmode">5.2.
                    Low level APIs</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-focusableareasoption">
        <b><a href="#dictdef-focusableareasoption">#dictdef-focusableareasoption</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-focusableareasoption">5.2.
                    Low level APIs</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-focusableareasoption-mode">
        <b><a href="#dom-focusableareasoption-mode">#dom-focusableareasoption-mode</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-focusableareasoption-mode">5.2.
                    Low level APIs</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-spatialnavigationsearchoptions">
        <b><a
                href="#dictdef-spatialnavigationsearchoptions">#dictdef-spatialnavigationsearchoptions</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-spatialnavigationsearchoptions">5.2.
                    Low level APIs</a>
            <li><a href="#ref-for-dictdef-spatialnavigationsearchoptions①">Changes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-spatialnavigationsearchoptions-candidates">
        <b><a
                href="#dom-spatialnavigationsearchoptions-candidates">#dom-spatialnavigationsearchoptions-candidates</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-spatialnavigationsearchoptions-candidates">5.2.
                    Low level APIs</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-spatialnavigationsearchoptions-container">
        <b><a
                href="#dom-spatialnavigationsearchoptions-container">#dom-spatialnavigationsearchoptions-container</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-spatialnavigationsearchoptions-container">5.2.
                    Low level APIs</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-element-spatialnavigationsearch">
        <b><a href="#dom-element-spatialnavigationsearch">#dom-element-spatialnavigationsearch</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-element-spatialnavigationsearch">Changes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-element-getspatialnavigationcontainer">
        <b><a
                href="#dom-element-getspatialnavigationcontainer">#dom-element-getspatialnavigationcontainer</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-element-getspatialnavigationcontainer①">5.2.
                    Low level APIs</a> <a href="#ref-for-dom-element-getspatialnavigationcontainer②">(2)</a> <a
                    href="#ref-for-dom-element-getspatialnavigationcontainer③">(3)</a>
            <li><a href="#ref-for-dom-element-getspatialnavigationcontainer④">Changes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-element-focusableareas">
        <b><a href="#dom-element-focusableareas">#dom-element-focusableareas</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-element-focusableareas①">5.2.
                    Low level APIs</a> <a href="#ref-for-dom-element-focusableareas②">(2)</a> <a
                    href="#ref-for-dom-element-focusableareas③">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="navigationevent">
        <b><a href="#navigationevent">#navigationevent</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-navigationevent">4.
                    Triggering Spatial Navigation</a>
            <li><a href="#ref-for-navigationevent①">6.1.
                    Interface NavigationEvent</a> <a href="#ref-for-navigationevent②">(2)</a> <a
                    href="#ref-for-navigationevent③">(3)</a>
            <li><a href="#ref-for-navigationevent④">6.2.1.
                    navbeforefocus</a> <a href="#ref-for-navigationevent⑤">(2)</a> <a
                    href="#ref-for-navigationevent⑥">(3)</a>
            <li><a href="#ref-for-navigationevent⑦">6.2.2.
                    navnotarget</a> <a href="#ref-for-navigationevent⑧">(2)</a> <a
                    href="#ref-for-navigationevent⑨">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-navigationevent-dir">
        <b><a href="#dom-navigationevent-dir">#dom-navigationevent-dir</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-navigationevent-dir">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-dom-navigationevent-dir①">6.2.2.
                    navnotarget</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-navigationevent-relatedtarget">
        <b><a href="#dom-navigationevent-relatedtarget">#dom-navigationevent-relatedtarget</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-navigationevent-relatedtarget">6.2.1.
                    navbeforefocus</a> <a href="#ref-for-dom-navigationevent-relatedtarget①">(2)</a>
            <li><a href="#ref-for-dom-navigationevent-relatedtarget②">6.2.2.
                    navnotarget</a> <a href="#ref-for-dom-navigationevent-relatedtarget③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-navigationeventinit">
        <b><a href="#dictdef-navigationeventinit">#dictdef-navigationeventinit</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-navigationeventinit">6.1.
                    Interface NavigationEvent</a> <a href="#ref-for-dictdef-navigationeventinit①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="eventdef-navigationevent-navbeforefocus">
        <b><a
                href="#eventdef-navigationevent-navbeforefocus">#eventdef-navigationevent-navbeforefocus</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-eventdef-navigationevent-navbeforefocus">6.2.1.
                    navbeforefocus</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dispatches-navbeforefocus-event">
        <b><a href="#dispatches-navbeforefocus-event">#dispatches-navbeforefocus-event</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dispatches-navbeforefocus-event">8.3.
                    Navigation</a> <a href="#ref-for-dispatches-navbeforefocus-event①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="eventdef-navigationevent-navnotarget">
        <b><a href="#eventdef-navigationevent-navnotarget">#eventdef-navigationevent-navnotarget</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-eventdef-navigationevent-navnotarget">6.2.2.
                    navnotarget</a>
            <li><a href="#ref-for-eventdef-navigationevent-navnotarget①">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dispatches-navnotarget-event">
        <b><a href="#dispatches-navnotarget-event">#dispatches-navnotarget-event</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dispatches-navnotarget-event">8.3.
                    Navigation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="navigation-override">
        <b><a href="#navigation-override">#navigation-override</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-navigation-override">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-navigation-override①">6.2.2.
                    navnotarget</a>
            <li><a href="#ref-for-navigation-override②">7.
                    The navigation-override policy-controlled feature</a> <a
                    href="#ref-for-navigation-override③">(2)</a> <a href="#ref-for-navigation-override④">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="boundary-box">
        <b><a href="#boundary-box">#boundary-box</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-boundary-box">8.1.
                    Glossary</a>
            <li><a href="#ref-for-boundary-box①">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-boundary-box②">(2)</a> <a
                    href="#ref-for-boundary-box③">(3)</a> <a href="#ref-for-boundary-box④">(4)</a> <a
                    href="#ref-for-boundary-box⑤">(5)</a> <a href="#ref-for-boundary-box⑥">(6)</a> <a
                    href="#ref-for-boundary-box⑦">(7)</a> <a href="#ref-for-boundary-box⑧">(8)</a> <a
                    href="#ref-for-boundary-box⑨">(9)</a> <a href="#ref-for-boundary-box①⓪">(10)</a> <a
                    href="#ref-for-boundary-box①①">(11)</a> <a href="#ref-for-boundary-box①②">(12)</a> <a
                    href="#ref-for-boundary-box①③">(13)</a> <a href="#ref-for-boundary-box①④">(14)</a> <a
                    href="#ref-for-boundary-box①⑤">(15)</a> <a href="#ref-for-boundary-box①⑥">(16)</a> <a
                    href="#ref-for-boundary-box①⑦">(17)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="inside-area">
        <b><a href="#inside-area">#inside-area</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-inside-area">8.1.
                    Glossary</a>
            <li><a href="#ref-for-inside-area①">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-inside-area②">(2)</a> <a
                    href="#ref-for-inside-area③">(3)</a> <a href="#ref-for-inside-area④">(4)</a> <a
                    href="#ref-for-inside-area⑤">(5)</a> <a href="#ref-for-inside-area⑥">(6)</a> <a
                    href="#ref-for-inside-area⑦">(7)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="search-origin">
        <b><a href="#search-origin">#search-origin</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-search-origin">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-search-origin①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="spatial-navigation-starting-point">
        <b><a href="#spatial-navigation-starting-point">#spatial-navigation-starting-point</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-spatial-navigation-starting-point">8.1.
                    Glossary</a>
            <li><a href="#ref-for-spatial-navigation-starting-point①">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="spatial-navigation-containers">
        <b><a href="#spatial-navigation-containers">#spatial-navigation-containers</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-spatial-navigation-containers">3.
                    Overview</a> <a href="#ref-for-spatial-navigation-containers①">(2)</a> <a
                    href="#ref-for-spatial-navigation-containers②">(3)</a> <a
                    href="#ref-for-spatial-navigation-containers③">(4)</a> <a
                    href="#ref-for-spatial-navigation-containers④">(5)</a> <a
                    href="#ref-for-spatial-navigation-containers⑤">(6)</a> <a
                    href="#ref-for-spatial-navigation-containers⑥">(7)</a> <a
                    href="#ref-for-spatial-navigation-containers⑦">(8)</a>
            <li><a href="#ref-for-spatial-navigation-containers⑧">5.2.
                    Low level APIs</a> <a href="#ref-for-spatial-navigation-containers⑨">(2)</a> <a
                    href="#ref-for-spatial-navigation-containers①⓪">(3)</a> <a
                    href="#ref-for-spatial-navigation-containers①①">(4)</a> <a
                    href="#ref-for-spatial-navigation-containers①②">(5)</a> <a
                    href="#ref-for-spatial-navigation-containers①③">(6)</a> <a
                    href="#ref-for-spatial-navigation-containers①④">(7)</a> <a
                    href="#ref-for-spatial-navigation-containers①⑤">(8)</a> <a
                    href="#ref-for-spatial-navigation-containers①⑥">(9)</a>
            <li><a href="#ref-for-spatial-navigation-containers①⑦">6.2.2.
                    navnotarget</a> <a href="#ref-for-spatial-navigation-containers①⑧">(2)</a> <a
                    href="#ref-for-spatial-navigation-containers①⑨">(3)</a> <a
                    href="#ref-for-spatial-navigation-containers②⓪">(4)</a> <a
                    href="#ref-for-spatial-navigation-containers②①">(5)</a> <a
                    href="#ref-for-spatial-navigation-containers②②">(6)</a> <a
                    href="#ref-for-spatial-navigation-containers②③">(7)</a>
            <li><a href="#ref-for-spatial-navigation-containers②④">8.2.
                    Groupings of elements</a> <a href="#ref-for-spatial-navigation-containers②⑤">(2)</a>
            <li><a href="#ref-for-spatial-navigation-containers②⑥">8.3.
                    Navigation</a> <a href="#ref-for-spatial-navigation-containers②⑦">(2)</a> <a
                    href="#ref-for-spatial-navigation-containers②⑧">(3)</a>
            <li><a href="#ref-for-spatial-navigation-containers②⑨">8.4.
                    Focus Navigation Heuristics</a>
            <li><a href="#ref-for-spatial-navigation-containers③⓪">9.1.
                    Creating additional spatial navigation containers: the spatial-navigation-contain property</a> <a
                    href="#ref-for-spatial-navigation-containers③①">(2)</a> <a
                    href="#ref-for-spatial-navigation-containers③②">(3)</a>
            <li><a href="#ref-for-spatial-navigation-containers③③">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a>
            <li><a href="#ref-for-spatial-navigation-containers③④">9.3.
                    Selecting the navigation algorithm: the spatial-navigation-function property</a> <a
                    href="#ref-for-spatial-navigation-containers③⑤">(2)</a>
            <li><a href="#ref-for-spatial-navigation-containers③⑥">Changes</a> <a
                    href="#ref-for-spatial-navigation-containers③⑦">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="spatial-navigation-steps">
        <b><a href="#spatial-navigation-steps">#spatial-navigation-steps</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-spatial-navigation-steps">4.
                    Triggering Spatial Navigation</a> <a href="#ref-for-spatial-navigation-steps①">(2)</a> <a
                    href="#ref-for-spatial-navigation-steps②">(3)</a>
            <li><a href="#ref-for-spatial-navigation-steps③">5.1.
                    Triggering Navigation Programmatically</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="set-the-search-origin">
        <b><a href="#set-the-search-origin">#set-the-search-origin</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-set-the-search-origin">8.3.
                    Navigation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="update-the-search-origin">
        <b><a href="#update-the-search-origin">#update-the-search-origin</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-update-the-search-origin">8.4.
                    Focus Navigation Heuristics</a>
            <li><a href="#ref-for-update-the-search-origin①">Changes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="find-focusable-areas">
        <b><a href="#find-focusable-areas">#find-focusable-areas</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-find-focusable-areas">5.2.
                    Low level APIs</a> <a href="#ref-for-find-focusable-areas①">(2)</a>
            <li><a href="#ref-for-find-focusable-areas②">8.3.
                    Navigation</a> <a href="#ref-for-find-focusable-areas③">(2)</a>
            <li><a href="#ref-for-find-focusable-areas④">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="select-the-best-candidate">
        <b><a href="#select-the-best-candidate">#select-the-best-candidate</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-select-the-best-candidate">5.2.
                    Low level APIs</a>
            <li><a href="#ref-for-select-the-best-candidate①">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-select-the-best-candidate②">8.3.
                    Navigation</a> <a href="#ref-for-select-the-best-candidate③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="find-the-shortest-distance">
        <b><a href="#find-the-shortest-distance">#find-the-shortest-distance</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-find-the-shortest-distance">8.4.
                    Focus Navigation Heuristics</a>
            <li><a href="#ref-for-find-the-shortest-distance①">9.3.
                    Selecting the navigation algorithm: the spatial-navigation-function property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="propdef-spatial-navigation-contain">
        <b><a href="#propdef-spatial-navigation-contain">#propdef-spatial-navigation-contain</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-spatial-navigation-contain①">3.
                    Overview</a>
            <li><a href="#ref-for-propdef-spatial-navigation-contain②">8.2.
                    Groupings of elements</a>
            <li><a href="#ref-for-propdef-spatial-navigation-contain③">9.1.
                    Creating additional spatial navigation containers: the spatial-navigation-contain property</a> <a
                    href="#ref-for-propdef-spatial-navigation-contain④">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="propdef-spatial-navigation-action">
        <b><a href="#propdef-spatial-navigation-action">#propdef-spatial-navigation-action</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-propdef-spatial-navigation-action①">8.3.
                    Navigation</a> <a href="#ref-for-propdef-spatial-navigation-action②">(2)</a> <a
                    href="#ref-for-propdef-spatial-navigation-action③">(3)</a> <a
                    href="#ref-for-propdef-spatial-navigation-action④">(4)</a> <a
                    href="#ref-for-propdef-spatial-navigation-action⑤">(5)</a> <a
                    href="#ref-for-propdef-spatial-navigation-action⑥">(6)</a>
            <li><a href="#ref-for-propdef-spatial-navigation-action⑦">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a> <a
                    href="#ref-for-propdef-spatial-navigation-action⑧">(2)</a> <a
                    href="#ref-for-propdef-spatial-navigation-action⑨">(3)</a> <a
                    href="#ref-for-propdef-spatial-navigation-action①⓪">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="valdef-spatial-navigation-action-auto">
        <b><a href="#valdef-spatial-navigation-action-auto">#valdef-spatial-navigation-action-auto</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-spatial-navigation-action-auto">8.3.
                    Navigation</a>
            <li><a href="#ref-for-valdef-spatial-navigation-action-auto①">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="valdef-spatial-navigation-action-focus">
        <b><a
                href="#valdef-spatial-navigation-action-focus">#valdef-spatial-navigation-action-focus</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-spatial-navigation-action-focus">8.3.
                    Navigation</a> <a href="#ref-for-valdef-spatial-navigation-action-focus①">(2)</a> <a
                    href="#ref-for-valdef-spatial-navigation-action-focus②">(3)</a> <a
                    href="#ref-for-valdef-spatial-navigation-action-focus③">(4)</a>
            <li><a href="#ref-for-valdef-spatial-navigation-action-focus④">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a> <a
                    href="#ref-for-valdef-spatial-navigation-action-focus⑤">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="valdef-spatial-navigation-action-scroll">
        <b><a
                href="#valdef-spatial-navigation-action-scroll">#valdef-spatial-navigation-action-scroll</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-spatial-navigation-action-scroll">8.3.
                    Navigation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="propdef-spatial-navigation-function">
        <b><a href="#propdef-spatial-navigation-function">#propdef-spatial-navigation-function</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-spatial-navigation-function①">9.3.
                    Selecting the navigation algorithm: the spatial-navigation-function property</a>
            <li><a href="#ref-for-propdef-spatial-navigation-function②">Changes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="can-be-manually-scrolled">
        <b><a href="#can-be-manually-scrolled">#can-be-manually-scrolled</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-can-be-manually-scrolled">8.3.
                    Navigation</a> <a href="#ref-for-can-be-manually-scrolled①">(2)</a> <a
                    href="#ref-for-can-be-manually-scrolled②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="directionally-scroll-an-element">
        <b><a href="#directionally-scroll-an-element">#directionally-scroll-an-element</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-directionally-scroll-an-element">8.3.
                    Navigation</a> <a href="#ref-for-directionally-scroll-an-element①">(2)</a> <a
                    href="#ref-for-directionally-scroll-an-element②">(3)</a>
            <li><a href="#ref-for-directionally-scroll-an-element③">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a>
        </ul>
    </aside>
    <script>/* script-var-click-highlighting */

        document.addEventListener("click", e => {
            if (e.target.nodeName == "VAR") {
                highlightSameAlgoVars(e.target);
            }
        });
        {
            const indexCounts = new Map();
            const indexNames = new Map();
            function highlightSameAlgoVars(v) {
                // Find the algorithm container.
                let algoContainer = null;
                let searchEl = v;
                while (algoContainer == null && searchEl != document.body) {
                    searchEl = searchEl.parentNode;
                    if (searchEl.hasAttribute("data-algorithm")) {
                        algoContainer = searchEl;
                    }
                }

                // Not highlighting document-global vars,
                // too likely to be unrelated.
                if (algoContainer == null) return;

                const algoName = algoContainer.getAttribute("data-algorithm");
                const varName = getVarName(v);
                const addClass = !v.classList.contains("selected");
                let highlightClass = null;
                if (addClass) {
                    const index = chooseHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] += 1;
                    indexNames.set(algoName + "///" + varName, index);
                    highlightClass = nameFromIndex(index);
                } else {
                    const index = previousHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] -= 1;
                    highlightClass = nameFromIndex(index);
                }

                // Find all same-name vars, and toggle their class appropriately.
                for (const el of algoContainer.querySelectorAll("var")) {
                    if (getVarName(el) == varName) {
                        el.classList.toggle("selected", addClass);
                        el.classList.toggle(highlightClass, addClass);
                    }
                }
            }
            function getVarName(el) {
                return el.textContent.replace(/(\s| )+/, " ").trim();
            }
            function chooseHighlightIndex(algoName, varName) {
                let indexes = null;
                if (indexCounts.has(algoName)) {
                    indexes = indexCounts.get(algoName);
                } else {
                    // 7 classes right now
                    indexes = [0, 0, 0, 0, 0, 0, 0];
                    indexCounts.set(algoName, indexes);
                }

                // If the element was recently unclicked,
                // *and* that color is still unclaimed,
                // give it back the same color.
                const lastIndex = previousHighlightIndex(algoName, varName);
                if (indexes[lastIndex] === 0) return lastIndex;

                // Find the earliest index with the lowest count.
                const minCount = Math.min.apply(null, indexes);
                let index = null;
                for (var i = 0; i < indexes.length; i++) {
                    if (indexes[i] == minCount) {
                        return i;
                    }
                }
            }
            function previousHighlightIndex(algoName, varName) {
                return indexNames.get(algoName + "///" + varName);
            }
            function nameFromIndex(index) {
                return "selected" + index;
            }
        }
    </script>
    <script>/* script-dfn-panel */

        document.body.addEventListener("click", function (e) {
            var queryAll = function (sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while (el.parentElement) {
                if (el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if (el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if (el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if (target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function (el) {
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if (target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if (dfnPanel) {
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if (panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if (target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
    </script>
    <script src="https://htmlspecs.com/dropdown.js"></script>