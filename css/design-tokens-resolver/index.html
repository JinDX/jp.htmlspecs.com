<!DOCTYPE html>
<html lang="ja-JP">

<head>
    <meta charset="UTF-8">
    <!-- <meta name="generator" content="ReSpec 35.6.0"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        span.example-title {
            text-transform: none
        }

        :is(aside, div).example,
        div.illegal-example {
            padding: .5em;
            margin: 1em 0;
            position: relative;
            clear: both
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: #000
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff
        }
    </style>
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-color: var(--warning-border, #f11);
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
            background: var(--warning-bg, #fbe9e9);
            color: #000;
            color: var(--text, #000)
        }

        .warning-title:before {
            content: "⚠";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            background: var(--indextable-hover-bg, #fff);
            color: #000;
            color: var(--text, #000);
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 1em 3em -.4em var(--tocsidebar-shadow, rgba(0, 0, 0, .3)), 0 0 1px 1px var(--tocsidebar-shadow, rgba(0, 0, 0, .05));
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            border-bottom-color: var(--indextable-hover-bg, #fff);
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1;
            border-bottom-color: var(--indextable-hover-bg, #a2a9b1)
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            color: var(--text, #000);
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333;
            color: var(--text, #333)
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>


    <meta name="color-scheme" content="light dark">

    <title>デザイントークン・リゾルバーモジュール 2025.10</title>



    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: italic
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>
    <meta name="description" content="この仕様はフォーマットを拡張し、複数のコンテキスト（例：ライトモードやダークモードのカラーテーマ）でデザイントークンを扱う方法を説明します。">
    <link rel="canonical" href="https://www.designtokens.org/TR/2025.10/resolver/">
    <style>
        .hljs {
            --base: #fafafa;
            --mono-1: #383a42;
            --mono-2: #686b77;
            --mono-3: #717277;
            --hue-1: #0b76c5;
            --hue-2: #336ae3;
            --hue-3: #a626a4;
            --hue-4: #42803c;
            --hue-5: #ca4706;
            --hue-5-2: #c91243;
            --hue-6: #986801;
            --hue-6-2: #9a6a01
        }

        @media (prefers-color-scheme:dark) {
            .hljs {
                --base: #282c34;
                --mono-1: #abb2bf;
                --mono-2: #818896;
                --mono-3: #5c6370;
                --hue-1: #56b6c2;
                --hue-2: #61aeee;
                --hue-3: #c678dd;
                --hue-4: #98c379;
                --hue-5: #e06c75;
                --hue-5-2: #be5046;
                --hue-6: #d19a66;
                --hue-6-2: #e6c07b
            }
        }

        .hljs {
            display: block;
            overflow-x: auto;
            padding: .5em;
            color: #383a42;
            color: var(--mono-1, #383a42);
            background: #fafafa;
            background: var(--base, #fafafa)
        }

        .hljs-comment,
        .hljs-quote {
            color: #717277;
            color: var(--mono-3, #717277);
            font-style: italic
        }

        .hljs-doctag,
        .hljs-formula,
        .hljs-keyword {
            color: #a626a4;
            color: var(--hue-3, #a626a4)
        }

        .hljs-deletion,
        .hljs-name,
        .hljs-section,
        .hljs-selector-tag,
        .hljs-subst {
            color: #ca4706;
            color: var(--hue-5, #ca4706);
            font-weight: 700
        }

        .hljs-literal {
            color: #0b76c5;
            color: var(--hue-1, #0b76c5)
        }

        .hljs-addition,
        .hljs-attribute,
        .hljs-meta-string,
        .hljs-regexp,
        .hljs-string {
            color: #42803c;
            color: var(--hue-4, #42803c)
        }

        .hljs-built_in,
        .hljs-class .hljs-title {
            color: #9a6a01;
            color: var(--hue-6-2, #9a6a01)
        }

        .hljs-attr,
        .hljs-number,
        .hljs-selector-attr,
        .hljs-selector-class,
        .hljs-selector-pseudo,
        .hljs-template-variable,
        .hljs-type,
        .hljs-variable {
            color: #986801;
            color: var(--hue-6, #986801)
        }

        .hljs-bullet,
        .hljs-link,
        .hljs-meta,
        .hljs-selector-id,
        .hljs-symbol,
        .hljs-title {
            color: #336ae3;
            color: var(--hue-2, #336ae3)
        }

        .hljs-emphasis {
            font-style: italic
        }

        .hljs-strong {
            font-weight: 700
        }

        .hljs-link {
            text-decoration: underline
        }
    </style>
    <style>
        var:hover {
            text-decoration: underline;
            cursor: pointer
        }

        var.respec-hl {
            color: var(--color, #000);
            background-color: var(--bg-color);
            box-shadow: 0 0 0 2px var(--bg-color)
        }

        @media (prefers-color-scheme:dark) {
            var.respec-hl {
                filter: saturate(.9) brightness(.9)
            }
        }

        var.respec-hl-c1 {
            --bg-color: #f4d200
        }

        var.respec-hl-c2 {
            --bg-color: #ff87a2
        }

        var.respec-hl-c3 {
            --bg-color: #96e885
        }

        var.respec-hl-c4 {
            --bg-color: #3eeed2
        }

        var.respec-hl-c5 {
            --bg-color: #eacfb6
        }

        var.respec-hl-c6 {
            --bg-color: #82ddff
        }

        var.respec-hl-c7 {
            --bg-color: #ffbcf2
        }

        @media print {
            var.respec-hl {
                background: 0 0;
                color: #000;
                box-shadow: unset
            }
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #222
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #222;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "specStatus": "CG-FINAL",
  "group": "design-tokens",
  "thisVersion": "https://www.w3.org/community/reports/design-tokens/2025.10/resolver/",
  "latestVersion": "https://www.designtokens.org/TR/2025.10/resolver/",
  "prevVersion": null,
  "edDraftURI": null,
  "editors": [
    {
      "name": "Joren Broekema",
      "url": "https://code-workshop-kit.com/"
    },
    {
      "name": "Esther Cheran",
      "url": "https://github.com/esthercheran"
    },
    {
      "name": "Mike Kamminga",
      "url": "https://hyma.io"
    },
    {
      "name": "Andrew L’Homme"
    },
    {
      "name": "Drew Powers",
      "url": "https://pow.rs"
    },
    {
      "name": "Matthew Ström-Awn",
      "url": "https://matthewstrom.com"
    },
    {
      "name": "Lilith Wittmann",
      "url": "https://github.com/LilithWittmann"
    }
  ],
  "authors": [
    {
      "name": "Louis Chenais",
      "url": "https://bsky.app/profile/lucho.cool"
    },
    {
      "name": "James Nash",
      "url": "https://cirrus.twiddles.com"
    }
  ],
  "github": {
    "repoURL": "https://github.com/design-tokens/community-group",
    "branch": "main"
  },
  "tocIntroductory": true,
  "logos": [
    {
      "src": "/assets/dtcg-logo-on-color.svg",
      "url": "https://www.designtokens.org",
      "alt": "Design Tokens Community Group",
      "width": 128,
      "height": 128,
      "id": "dtcg-logo"
    }
  ],
  "publishISODate": "2025-10-28T00:00:00.000Z",
  "generatedSubtitle": "Final Community Group Report 28 October 2025"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/cg-final">
    <link rel="stylesheet" media="(prefers-color-scheme: dark)" href="https://www.w3.org/StyleSheets/TR/2021/dark.css">
</head>

<body class="h-entry">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.designtokens.org"><img alt="デザイントークン コミュニティグループ" height="128"
                    id="dtcg-logo" src="https://www.designtokens.org/assets/dtcg-logo-on-color.svg" width="128">
            </a></p>
        <h1 id="title" class="title">デザイントークンリゾルバーモジュール 2025.10</h1>
        <p id="w3c-state">
            <a href="https://www.w3.org/standards/types#reports">最終コミュニティグループレポート</a>
            <time class="dt-published" datetime="2025-10-28">2025年10月28日</time>
        </p>
        <dl>
            <dt>このバージョン：</dt>
            <dd>
                <a class="u-url"
                    href="https://www.w3.org/community/reports/design-tokens/2025.10/">https://www.w3.org/community/reports/design-tokens/2025.10/</a>
            </dd>
            <dt>最新版：</dt>
            <dd>
                <a
                    href="https://www.designtokens.org/TR/2025.10/resolver/">https://www.designtokens.org/TR/2025.10/resolver/</a>
            </dd>

            <dt>編集者：</dt>
            <dd class="editor p-author h-card vcard">
                <a class="u-url url p-name fn" href="https://code-workshop-kit.com/">Joren Broekema</a>
            </dd>
            <dd class="editor p-author h-card vcard">
                <a class="u-url url p-name fn" href="https://github.com/esthercheran">Esther Cheran</a>
            </dd>
            <dd class="editor p-author h-card vcard">
                <a class="u-url url p-name fn" href="https://hyma.io">Mike Kamminga</a>
            </dd>
            <dd class="editor p-author h-card vcard">
                <span class="p-name fn">Andrew L’Homme</span>
            </dd>
            <dd class="editor p-author h-card vcard">
                <a class="u-url url p-name fn" href="https://pow.rs">Drew Powers</a>
            </dd>
            <dd class="editor p-author h-card vcard">
                <a class="u-url url p-name fn" href="https://matthewstrom.com">Matthew Ström-Awn</a>
            </dd>
            <dd class="editor p-author h-card vcard">
                <a class="u-url url p-name fn" href="https://github.com/LilithWittmann">Lilith Wittmann</a>
            </dd>

            <dt>著者：</dt>
            <dd class="editor p-author h-card vcard">
                <a class="u-url url p-name fn" href="https://bsky.app/profile/lucho.cool">Louis Chenais</a>
            </dd>
            <dd class="editor p-author h-card vcard">
                <a class="u-url url p-name fn" href="https://cirrus.twiddles.com">James Nash</a>
            </dd>
            <dt>フィードバック：</dt>
            <dd>
                <a href="https://github.com/design-tokens/community-group/">GitHub design-tokens/community-group</a>
                (<a href="https://github.com/design-tokens/community-group/pulls/">プルリクエスト</a>,
                <a href="https://github.com/design-tokens/community-group/issues/new/choose">新規課題</a>,
                <a href="https://github.com/design-tokens/community-group/issues/">未解決課題</a>)
            </dd>

        </dl>

        <p class="copyright">
            <a href="https://www.w3.org/policies/#copyright">Copyright</a>
            ©
            2025

            the Contributors to the Design Tokens Resolver Module 2025.10
            Specification, published by the
            <a href="https://www.w3.org/groups/cg/design-tokens">Design Tokens Community Group</a> under the
            <a href="https://www.w3.org/community/about/agreements/fsa/">W3C Community Final Specification Agreement
                (FSA)</a>. A human-readable
            <a href="https://www.w3.org/community/about/agreements/fsa-deed/">summary</a>
            is available.

        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>要約</h2>
        <p>
            この仕様は<a href="../format/">フォーマット</a>を拡張し、
            複数のコンテキスト（例えば「ライトモード」や「ダークモード」などのカラーテーマ）で
            <a href="../">デザイントークン</a>を扱う方法について記述します。
        </p>
    </section>

    <section id="sotd" class="introductory">
        <h2>この文書の位置付け</h2>
        <p>
            この仕様は
            <a href="https://www.w3.org/groups/cg/design-tokens">デザイントークン・コミュニティグループ</a>によって公開されました。
            これは W3C 標準ではなく、また W3C 標準トラックにもありません。

            <a href="https://www.w3.org/community/about/agreements/final/">W3C コミュニティ最終仕様合意書（FSA）</a>
            の下で他の条件が適用されることにご注意ください。

            <a href="https://www.w3.org/community/">W3C コミュニティおよびビジネスグループ</a>について詳しくはそちらをご覧ください。
        </p>
        <p>
            このセクションでは、公開時点でのこの文書のステータスについて説明します。
            他の文書がこの文書に取って代わる場合があります。
            現在の W3C コミュニティグループのレポート一覧や、本レポートの最新版は
            W3C コミュニティグループ レポートインデックス
            <a href="https://www.w3.org/community/reports/">https://www.w3.org/community/reports/</a>
            でご覧いただけます。
        </p>
        <p>
            この文書は DTCG より
            <a href="https://www.w3.org/policies/process/#RecsCR">候補勧告</a>
            として W3C プロセスで定義された説明に従い公開されました。
            このドラフトへの貢献は
            <a href="https://www.w3.org/community/about/process/cla">
                コミュニティ貢献者ライセンス契約（CLA）</a> に従って管理されており、
            <a href="https://www.w3.org/community/about/process/#cgroups">W3C コミュニティグループプロセス</a>
            で規定されています。
        </p>
        <p>
            これは W3C 勧告ではありませんが、
            この分類は徹底的な合意形成の後、この仕様が実装を意図していることを明確にするものです。
        </p>
        <p>
            <strong>この仕様は安定と見なされています</strong>。
            今後の更新は後続の仕様で提供されます。
        </p>
        <p>
            この仕様についての議論には
            <a href="https://github.com/design-tokens/community-group/issues/">GitHub Issues</a>
            の利用が推奨されます。
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">目次</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">要約</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">この文書の位置付け</a></li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>はじめに</a>
            </li>
            <li class="tocline"><a class="tocxref" href="#terminology"><bdi class="secno">2. </bdi>用語</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#orthogonality"><bdi class="secno">2.1
                            </bdi>直交性</a></li>
                    <li class="tocline"><a class="tocxref" href="#permutation"><bdi class="secno">2.2
                            </bdi>順列</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#filetype"><bdi class="secno">3. </bdi>ファイルタイプ</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#format"><bdi class="secno">3.1 </bdi>フォーマット</a></li>
                    <li class="tocline"><a class="tocxref" href="#file-extension"><bdi class="secno">3.2
                            </bdi>ファイル拡張子</a></li>
                    <li class="tocline"><a class="tocxref" href="#mime-type"><bdi class="secno">3.3 </bdi>MIMEタイプ</a>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#syntax"><bdi class="secno">4. </bdi>構文</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#root-level-properties"><bdi class="secno">4.1
                            </bdi>ルートレベルのプロパティ</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#name"><bdi class="secno">4.1.1 </bdi>名前</a>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#version"><bdi class="secno">4.1.2
                                    </bdi>バージョン</a></li>
                            <li class="tocline"><a class="tocxref" href="#description"><bdi class="secno">4.1.3
                                    </bdi>説明</a></li>
                            <li class="tocline"><a class="tocxref" href="#sets"><bdi class="secno">4.1.4 </bdi>セット</a>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#modifiers"><bdi class="secno">4.1.5
                                    </bdi>修飾子</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#contexts"><bdi class="secno">4.1.5.1
                                            </bdi>コンテキスト</a></li>
                                    <li class="tocline"><a class="tocxref" href="#description-0"><bdi
                                                class="secno">4.1.5.2 </bdi>説明</a></li>
                                    <li class="tocline"><a class="tocxref" href="#default"><bdi class="secno">4.1.5.3
                                            </bdi>デフォルト</a></li>
                                    <li class="tocline"><a class="tocxref" href="#resolution-count"><bdi
                                                class="secno">4.1.5.4 </bdi>解決数</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#resolution-order"><bdi class="secno">4.1.6
                                    </bdi>解決順</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#inline-sets-and-modifiers"><bdi
                                                class="secno">4.1.6.1 </bdi>インラインセットと修飾子</a></li>
                                    <li class="tocline"><a class="tocxref" href="#ordering-of-sets-and-modifiers"><bdi
                                                class="secno">4.1.6.2 </bdi>セットと修飾子の順序</a></li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#reference-objects"><bdi class="secno">4.2
                            </bdi>参照オブジェクト</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#invalid-pointers"><bdi class="secno">4.2.1
                                    </bdi>無効なポインタ</a></li>
                            <li class="tocline"><a class="tocxref" href="#extending"><bdi class="secno">4.2.2
                                    </bdi>拡張</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#extensions"><bdi class="secno">4.3
                            </bdi>$extensions</a></li>
                    <li class="tocline"><a class="tocxref" href="#defs"><bdi class="secno">4.4 </bdi>$defs</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#inputs"><bdi class="secno">5. </bdi>入力</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#case-sensitivity"><bdi class="secno">5.1
                            </bdi>大文字・小文字の区別</a></li>
                    <li class="tocline"><a class="tocxref" href="#enforcing-strings"><bdi class="secno">5.2
                            </bdi>文字列の強制</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#resolution-logic"><bdi class="secno">6. </bdi>解決ロジック</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#input-validation"><bdi class="secno">6.1
                            </bdi>入力の検証</a></li>
                    <li class="tocline"><a class="tocxref" href="#ordering"><bdi class="secno">6.2 </bdi>順序付け</a>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#aliases"><bdi class="secno">6.3 </bdi>エイリアス</a></li>
                    <li class="tocline"><a class="tocxref" href="#resolution"><bdi class="secno">6.4
                            </bdi>解決</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#bundling"><bdi class="secno">7. </bdi>バンドル</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#inlining-files"><bdi class="secno">7.1
                            </bdi>ファイルのインライン化</a></li>
                    <li class="tocline"><a class="tocxref" href="#using-defs-for-files"><bdi class="secno">7.2
                            </bdi>ファイルに $defs を使用する</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">8. </bdi>適合性</a></li>
            <li class="tocline"><a class="tocxref" href="#acknowledgements"><bdi class="secno">A.
                    </bdi>謝辞</a></li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">B. </bdi>参考文献</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">B.1
                            </bdi>規範的参照文献</a></li>
                </ol>
            </li>
        </ol>
    </nav>

    <section id="introduction" class="informative">
        <div class="header-wrapper">
            <h2 id="x1-introduction"><bdi class="secno">1. </bdi>はじめに</h2><a class="self-link" href="#introduction"
                aria-label="Permalink for Section 1."></a>
        </div>
        <p><em>このセクションは規範的ではありません。</em></p>
        <p>デザイントークンの利用者は、異なるコンテキストで適用される代替値を表現する必要がよくあります。例として、以下に挙げるものに限定されませんが：</p>
        <ul>
            <li><strong>テーマ設定</strong>（ライトモード、ダークモード、ハイコントラストのカラーモードなど）</li>
            <li><strong>サイズ設定</strong>（モバイル（小）、タブレット（中）、デスクトップ（大）など）</li>
            <li><strong>アクセシビリティモード</strong>（モーション低減、色覚特性への配慮など）</li>
        </ul>
        <p>しかし、これらの代替コンテキストは<a
                href="https://en.wikipedia.org/wiki/Combinatorial_explosion">組合せ爆発</a>の影響を受けやすく、保存や管理が扱いにくくなります。</p>
        <p>このフォーマットは、すべてのコンテキストにわたるトークンの重複する値を排除する仕組みと、すべてのコンテキストの順列を列挙する方法を記述します。</p>
    </section>

    <section id="terminology">
        <div class="header-wrapper">
            <h2 id="x2-terminology"><bdi class="secno">2. </bdi>用語</h2><a class="self-link" href="#terminology"
                aria-label="Permalink for Section 2."></a>
        </div>
        <section class="informative" id="orthogonality">
            <div class="header-wrapper">
                <h3 id="x2-1-orthogonality"><bdi class="secno">2.1 </bdi>直交性</h3><a class="self-link"
                    href="#orthogonality" aria-label="Permalink for Section 2.1"></a>
            </div>
            <p><em>このセクションは規範的ではありません。</em></p>


            <p>各々が排他的なトークン上で動作する、2つ以上のコンテキストを記述する特性、すなわち重なりがないこと。修飾子は<em class="rfc2119">直交してもよい</em>ですが、必須ではありません。</p>
            <p>修飾子を可能な限り直交化することで、認知的負荷を減らし、ユーザーのエラーを減らします。</p>
            <aside class="example" id="example-non-orthogonal-modifiers">
                <div class="marker">
                    <a class="self-link" href="#example-non-orthogonal-modifiers">Example<bdi> 1</bdi></a><span
                        class="example-title">: 非直交の修飾子</span>
                </div>

                <p>次の修飾子があるとします：</p>
                <ol>
                    <li><strong>theme</strong> 修飾子は <strong>light</strong> と <strong>dark</strong>
                        の値を持ちます。これらの値の中で、<code>color.button</code> トークンに対する値を提供します。
                    </li>
                    <li><strong>brand</strong> 修飾子は <strong>brandA</strong> と <strong>brandB</strong>
                        の値を持ちます。これらの値の中で、<code>color.button</code> トークンに対する値を提供します。
                    </li>
                </ol>
                <p>両方の修飾子が <code>color.button</code> トークンの値を提供するため、配列の順序が最終値を決定します。すなわち、<strong>非直交</strong>です。</p>
            </aside>

        </section>

        <section id="permutation">
            <div class="header-wrapper">
                <h3 id="x2-2-permutation"><bdi class="secno">2.2 </bdi>順列</h3><a class="self-link" href="#permutation"
                    aria-label="Permalink for Section 2.2"></a>
            </div>
            <p>順列とは、リゾルバードキュメントの単一の可能な配置のことです。順列は <a href="#inputs">input</a> と 1:1 で対応しますが、「input」は使用される<a
                    href="#modifiers">修飾子</a>コンテキストを強調し、「順列」は最終的なトークン集合を強調します。</p>
        </section>
    </section>

    <section id="filetype">
        <div class="header-wrapper">
            <h2 id="x3-filetype"><bdi class="secno">3. </bdi>ファイルタイプ</h2><a class="self-link" href="#filetype"
                aria-label="Permalink for Section 3."></a>
        </div>
        <section id="format">
            <div class="header-wrapper">
                <h3 id="x3-1-format"><bdi class="secno">3.1 </bdi>フォーマット</h3><a class="self-link" href="#format"
                    aria-label="Permalink for Section 3.1"></a>
            </div>
            <p>リゾルバードキュメントは標準の JSON 構文（[<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8259"
                        title="The JavaScript Object Notation (JSON) Data Interchange Format">RFC8259</a></cite>]）を<em
                    class="rfc2119">必ず</em>使用しなければなりません。</p>
            <p>ツールは、<a href="https://jsonc.org/">JSONC</a> や <a href="https://json5.org/">JSON5</a> といった拡張を<em
                    class="rfc2119">サポートしてもよい</em>ですが、ドキュメントが通常の JSON に変換でき、トークン値に影響しないことが条件です。
            </p>
        </section>
        <section id="file-extension">
            <div class="header-wrapper">
                <h3 id="x3-2-file-extension"><bdi class="secno">3.2 </bdi>ファイル拡張子</h3><a class="self-link"
                    href="#file-extension" aria-label="Permalink for Section 3.2"></a>
            </div>
            <p>ユーザーはリゾルバードキュメントの名前に <code>.resolver.json</code> というファイル拡張子を<em class="rfc2119">使用すべき</em>です。</p>
        </section>
        <section id="mime-type">
            <div class="header-wrapper">
                <h3 id="x3-3-mime-type"><bdi class="secno">3.3 </bdi>MIME タイプ</h3><a class="self-link" href="#mime-type"
                    aria-label="Permalink for Section 3.3"></a>
            </div>
            <p>リゾルバードキュメントを HTTP 経由で送信する際、ユーザーは <code>Content-Type</code> ヘッダー（[<cite><a class="bibref"
                        data-link-type="biblio" href="#bib-rfc1341"
                        title="MIME (Multipurpose Internet Mail Extensions): Mechanisms for Specifying and Describing the Format of Internet Message Bodies">RFC1341</a></cite>]）に期待される
                <code>application/json</code> の MIME タイプ（[<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-rfc6838"
                        title="Media Type Specifications and Registration Procedures">RFC6838</a></cite>]）を<em
                    class="rfc2119">使用すべき</em>です。
                ユーザーは、カスタムまたは予期しない MIME タイプを<em class="rfc2119">使用してはなりません</em>。
            </p>
        </section>
    </section>

    <section id="syntax">
        <div class="header-wrapper">
            <h2 id="x4-syntax"><bdi class="secno">4. </bdi>構文</h2><a class="self-link" href="#syntax"
                aria-label="Permalink for Section 4."></a>
        </div>
        <section id="root-level-properties">
            <div class="header-wrapper">
                <h3 id="x4-1-root-level-properties"><bdi class="secno">4.1 </bdi>ルートレベルのプロパティ</h3><a class="self-link"
                    href="#root-level-properties" aria-label="Permalink for Section 4.1"></a>
            </div>
            <p>リゾルバードキュメントは、ルートレベルで以下のプロパティを含みます：</p>
            <table>
                <thead>
                    <tr>
                        <th align="left">Name</th>
                        <th align="left">Type</th>
                        <th align="center">Required</th>
                        <th align="left">Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td align="left"><a href="#name"><strong>name</strong></a></td>
                        <td align="left"><code>string</code></td>
                        <td align="center"></td>
                        <td align="left">ドキュメントの短い人間可読の名前。</td>
                    </tr>
                    <tr>
                        <td align="left"><a href="#version"><strong>version</strong></a></td>
                        <td align="left"><code>YYYY.MM</code></td>
                        <td align="center">Y</td>
                        <td align="left">バージョン。<code>2025.10</code>でなければなりません。</td>
                    </tr>
                    <tr>
                        <td align="left"><a href="#description"><strong>description</strong></a></td>
                        <td align="left"><code>string</code></td>
                        <td align="center"></td>
                        <td align="left">このドキュメントの人間可読の説明。</td>
                    </tr>
                    <tr>
                        <td align="left"><a href="#sets"><strong>sets</strong></a></td>
                        <td align="left">Map[<code>string</code>, Set]</td>
                        <td align="center"></td>
                        <td align="left">セットの定義。</td>
                    </tr>
                    <tr>
                        <td align="left"><a href="#modifiers"><strong>modifiers</strong></a></td>
                        <td align="left">Map[`string, Modifier]</td>
                        <td align="center"></td>
                        <td align="left">修飾子の定義。</td>
                    </tr>
                    <tr>
                        <td align="left"><a href="#resolution-order"><strong>resolutionOrder</strong></a></td>
                        <td align="left"><code>(ReferenceObject | Set | Modifier)[]</code></td>
                        <td align="center">Y</td>
                        <td align="left">セットと修飾子の解決順。</td>
                    </tr>
                </tbody>
            </table>
            <section id="name">
                <div class="header-wrapper">
                    <h4 id="x4-1-1-name"><bdi class="secno">4.1.1 </bdi>名前</h4><a class="self-link" href="#name"
                        aria-label="Permalink for Section 4.1.1"></a>
                </div>
                <p>ドキュメントはルートレベルに人間可読の <code>name</code> を<em
                        class="rfc2119">提供してもよい</em>です。これは、ファイル名だけでは十分でない場合に、別のリゾルバードキュメントと区別するのに役立ちます。</p>
            </section>
            <section id="version">
                <div class="header-wrapper">
                    <h4 id="x4-1-2-version"><bdi class="secno">4.1.2 </bdi>バージョン</h4><a class="self-link"
                        href="#version" aria-label="Permalink for Section 4.1.2"></a>
                </div>
                <p>ドキュメントはルートレベルにバージョンを<em class="rfc2119">必ず</em>提供しなければならず、<em
                        class="rfc2119">必ず</em><code>2025.10</code> である必要があります。これは、将来破壊的変更が導入された場合に備えた予約です。</p>
            </section>
            <section id="description">
                <div class="header-wrapper">
                    <h4 id="x4-1-3-description"><bdi class="secno">4.1.3 </bdi>説明</h4><a class="self-link"
                        href="#description" aria-label="Permalink for Section 4.1.3"></a>
                </div>
                <p>ドキュメントはルートレベルに <code>description</code> を<em class="rfc2119">提供してもよい</em>です。これは <a
                        href="#name">name</a> に存在しない追加の説明やコンテキストを加えるために使用できます。</p>
            </section>
            <section id="sets">
                <div class="header-wrapper">
                    <h4 id="x4-1-4-sets"><bdi class="secno">4.1.4 </bdi>セット</h4><a class="self-link" href="#sets"
                        aria-label="Permalink for Section 4.1.4"></a>
                </div>
                <p>セットは、<a href="../format/">DTCG フォーマット</a>のデザイントークンの集合です。セットは、直接宣言されたトークンを含む <code>sources</code>
                    配列、またはデザイントークンを含む JSON ファイルを指す<a href="#reference-objects">参照オブジェクト</a>、あるいはその両方の組み合わせを<em
                        class="rfc2119">必ず</em>含まなければなりません。</p>
                <p>セットは、セットの目的を説明する <code>description</code> を<em class="rfc2119">含めてもよい</em>です。</p>
                <p>配列が複数のソースを宣言する場合、それらは配列順にマージされます。つまり、トークンが複数回宣言されている場合、配列内の最後の出現が最終値になります。ツールは配列の順序を<em
                        class="rfc2119">必ず</em>尊重しなければなりません。</p>
                <aside class="example" id="example-sets-comprising-remote-files-and-inline-tokens">
                    <div class="marker">
                        <a class="self-link" href="#example-sets-comprising-remote-files-and-inline-tokens">Example<bdi>
                                2</bdi></a><span class="example-title">: リモートファイルとインライントークンから成るセット</span>
                    </div>

                    <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Color tokens"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"base/legacy.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"base/foundation.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"base/color-ramps.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"base/semantic.json"</span> <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"size"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Dimension, margin, and spacing tokens"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"space"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"base"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
              <span class="hljs-attr">"100"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"$type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dimension"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"$value"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"unit"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rem"</span> <span class="hljs-punctuation">}</span>
              <span class="hljs-punctuation">}</span>
            <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                </aside>

            </section>
            <section id="modifiers">
                <div class="header-wrapper">
                    <h4 id="x4-1-5-modifiers"><bdi class="secno">4.1.5 </bdi>修飾子</h4><a class="self-link"
                        href="#modifiers" aria-label="Permalink for Section 4.1.5"></a>
                </div>
                <p>修飾子は <a href="#sets">set</a> に似ていますが、<a href="#contexts">contexts</a> マップを通じて条件付きの取り込みを可能にします。</p>
                <section id="contexts">
                    <div class="header-wrapper">
                        <h5 id="x4-1-5-1-contexts"><bdi class="secno">4.1.5.1 </bdi>コンテキスト</h5><a class="self-link"
                            href="#contexts" aria-label="Permalink for Section 4.1.5.1"></a>
                    </div>
                    <p>修飾子は、<code>string</code> 値からトークンソースの配列への <code>contexts</code> マップを<em
                            class="rfc2119">必ず</em>宣言しなければなりません。トークンソースの配列は、<a
                            href="#reference-objects">ReferenceObject</a>、インライントークン、またはその両方の組み合わせで<em
                            class="rfc2119">なければなりません</em>。
                    </p>
                    <p>修飾子は 2 つ以上の <code>contexts</code> を<em class="rfc2119">持つべき</em>です。1 つだけだと <a
                            href="#sets">set</a> と同等になるためです。修飾子は空の <code>contexts</code> マップを<em
                            class="rfc2119">持ってはなりません</em>。ツールはコンテキストが 1 つしかない修飾子に対して<em
                            class="rfc2119">エラーを投げるべき</em>です。コンテキストが 0 の修飾子に対しては<em
                            class="rfc2119">必ず</em>エラーを投げなければなりません。</p>
                    <p><a href="#sets">sets</a> と同様に、配列の順序は<em
                            class="rfc2119">必ず</em>尊重され、競合がある場合には配列内の最後のトークンの出現が最終値を生成します。</p>
                    <p>修飾子はコンテキスト値の中で <a href="#sets">set</a> を<em
                            class="rfc2119">参照してもよい</em>です。ただし、修飾子は他の修飾子、同じ修飾子内の別コンテキストを含め、<em
                            class="rfc2119">参照してはなりません</em>。</p>
                    <aside class="example" id="example-color-theme-modifier">
                        <div class="marker">
                            <a class="self-link" href="#example-color-theme-modifier">Example<bdi> 3</bdi></a><span
                                class="example-title">: カラーテーマの修飾子</span>
                        </div>

                        <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"modifiers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Color theme"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"contexts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"light"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/light.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"lightHighContrast"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/light.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark-high-contrast.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"dark"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"darkHighContrast"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark-high-contrast.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"light"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                    </aside>

                    <aside class="example" id="example-modifier-referencing-a-set">
                        <div class="marker">
                            <a class="self-link" href="#example-modifier-referencing-a-set">Example<bdi>
                                    4</bdi></a><span class="example-title">: セットを参照する修飾子</span>
                        </div>

                        <p>修飾子はコンテキスト値の中で <a href="#sets">set</a> を<em class="rfc2119">参照してもよい</em>です。これは
                            <code>sources</code> が同じ配列にインライン化されるのと同等です。例えば、次の例は：
                        </p>
                        <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"baseSize"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"size/base.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"modifiers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"size"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Application size"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"contexts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"small"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/baseSize"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"device/mobile.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"typography/mobile.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"medium"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/baseSize"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"device/tablet.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"typography/base.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"large"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/baseSize"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"device/desktop.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"typography/base.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                        <p>次のようにするのと同等です：</p>
                        <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"baseSize"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-comment">// …</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"modifiers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"size"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Application size"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"contexts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"small"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"size/base.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"device/mobile.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"typography/mobile.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"medium"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"size/base.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"device/tablet.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"typography/base.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"large"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"size/base.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"device/desktop.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"typography/base.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                    </aside>

                </section>
                <section id="description-0">
                    <div class="header-wrapper">
                        <h5 id="x4-1-5-2-description"><bdi class="secno">4.1.5.2 </bdi>説明</h5><a class="self-link"
                            href="#description-0" aria-label="Permalink for Section 4.1.5.2"></a>
                    </div>
                    <p>修飾子は人間可読の <code>description</code> を<em class="rfc2119">宣言してもよい</em>です。</p>
                </section>
                <section id="default">
                    <div class="header-wrapper">
                        <h5 id="x4-1-5-3-default"><bdi class="secno">4.1.5.3 </bdi>デフォルト</h5><a class="self-link"
                            href="#default" aria-label="Permalink for Section 4.1.5.3"></a>
                    </div>
                    <p>修飾子は <code>contexts</code> のキーのいずれかに<em class="rfc2119">必ず</em>一致する <code>default</code> 値を<em
                            class="rfc2119">宣言してもよい</em>です。値が <code>contexts</code> に存在しない場合、ツールは<em
                            class="rfc2119">必ず</em>エラーを投げなければなりません。
                    </p>
                </section>
                <section id="resolution-count">
                    <div class="header-wrapper">
                        <h5 id="x4-1-5-4-resolution-count"><bdi class="secno">4.1.5.4 </bdi>解決数</h5><a class="self-link"
                            href="#resolution-count" aria-label="Permalink for Section 4.1.5.4"></a>
                    </div>
                    <p>ドキュメントが生成し得る<a data-link-type="dfn"
                            href="https://www.w3.org/policies/process/#group-decision">解決</a>の数は、すべての修飾子にわたる
                        <code>contexts</code> の総数の積で予測できます。
                    </p>
                    <aside class="example" id="example-calculating-resolutions">
                        <div class="marker">
                            <a class="self-link" href="#example-calculating-resolutions">Example<bdi> 5</bdi></a><span
                                class="example-title">: 解決数の計算</span>
                        </div>

                        <ul>
                            <li>各々が 2 つの <code>contexts</code> を持つ 2 つの修飾子がある場合、そのリゾルバは 2 × 2 の 4 つの解決を生成し得ます。</li>
                            <li>4、3、2 の <code>contexts</code> をそれぞれ持つ 3 つの修飾子がある場合、そのリゾルバは 4 × 3 × 2 の 24 の解決を生成し得ます。
                            </li>
                        </ul>
                    </aside>

                </section>
            </section>
            <section id="resolution-order">
                <div class="header-wrapper">
                    <h4 id="x4-1-6-resolution-order"><bdi class="secno">4.1.6 </bdi>解決順</h4><a class="self-link"
                        href="#resolution-order" aria-label="Permalink for Section 4.1.6"></a>
                </div>
                <p><code>resolutionOrder</code> キーは、最終的なトークンの結果を生成するために順序付けられた <a href="#sets">sets</a> と <a
                        href="#modifiers">modifiers</a> の配列です。順序は重要で、競合がある場合には配列の後方のトークンが前方のトークンを上書きします。</p>
                <aside class="example" id="example-composing-sets-and-modifiers-together">
                    <div class="marker">
                        <a class="self-link" href="#example-composing-sets-and-modifiers-together">Example<bdi>
                                6</bdi></a><span class="example-title">: セットと修飾子を組み合わせる</span>
                    </div>

                    <p>複数のセットと修飾子からなる <code>resolutionOrder</code> が与えられた場合：</p>
                    <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"size"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation/size.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"typography"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation/typography.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"animation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation/animation.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"modifiers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Color theme"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"contexts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"light"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/light.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"lightHighContrast"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/light.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark-high-contrast.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"dark"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"darkHighContrast"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark-high-contrast.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"light"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"resolutionOrder"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/size"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/typography"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/animation"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/modifiers/theme"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                    <p>これは単に複数の最終的なトークン結果を記述しているに過ぎません。最終的なセットを生成するには <a href="#inputs">input</a> が必要です。</p>
                    <p>次の入力が与えられた場合、以下の解決順になります：</p>
                    <table>
                        <thead>
                            <tr>
                                <th>Input</th>
                                <th>Result</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th>

                                    <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"light"</span> <span class="hljs-punctuation">}</span>
</code></pre>
                                </th>
                                <td>

                                    <ol>
                                        <li><code>foundation/size.json</code></li>
                                        <li><code>foundation/typography.json</code></li>
                                        <li><code>foundation/animation.json</code></li>
                                        <li><code>theme/light.json</code></li>
                                    </ol>
                                </td>
                            </tr>
                            <tr>
                                <th>

                                    <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"lightHighContrast"</span> <span class="hljs-punctuation">}</span>
</code></pre>
                                </th>
                                <td>

                                    <ol>
                                        <li><code>foundation/size.json</code></li>
                                        <li><code>foundation/typography.json</code></li>
                                        <li><code>foundation/animation.json</code></li>
                                        <li><code>theme/light.json</code></li>
                                        <li><code>theme/light-high-contrast.json</code></li>
                                    </ol>
                                </td>
                            </tr>
                            <tr>
                                <th>

                                    <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dark"</span> <span class="hljs-punctuation">}</span>
</code></pre>
                                </th>
                                <td>

                                    <ol>
                                        <li><code>foundation/size.json</code></li>
                                        <li><code>foundation/typography.json</code></li>
                                        <li><code>foundation/animation.json</code></li>
                                        <li><code>theme/dark.json</code></li>
                                    </ol>
                                </td>
                            </tr>
                            <tr>
                                <th>

                                    <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"darkHighContrast"</span> <span class="hljs-punctuation">}</span>
</code></pre>
                                </th>
                                <td>

                                    <ol>
                                        <li><code>foundation/size.json</code></li>
                                        <li><code>foundation/typography.json</code></li>
                                        <li><code>foundation/animation.json</code></li>
                                        <li><code>theme/dark.json</code></li>
                                        <li><code>theme/dark-high-contrast.json</code></li>
                                    </ol>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <p>競合がある場合には、デザイントークンの最後の出現が最終値を生成します。</p>
                </aside>

                <aside class="example" id="example-empty-array-in-modifiers">
                    <div class="marker">
                        <a class="self-link" href="#example-empty-array-in-modifiers">Example<bdi> 7</bdi></a><span
                            class="example-title">: 修飾子の空配列</span>
                    </div>

                    <p>修飾子は空のコンテキスト配列を<em class="rfc2119">含んでもよい</em>です：</p>
                    <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"modifiers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-comment">// …</span>
    <span class="hljs-attr">"debug"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Enable debug mode"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"contexts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"false"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"true"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"debug.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"resolutionOrder"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-comment">// …</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/modifiers/debug"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                    <p>これは <a href="#inputs">input</a> として <code>{ "debug": "true" }</code> を受け取った場合に、追加で
                        <code>debug.json</code> ファイルを読み込みます。
                    </p>
                </aside>

                <section id="inline-sets-and-modifiers">
                    <div class="header-wrapper">
                        <h5 id="x4-1-6-1-inline-sets-and-modifiers"><bdi class="secno">4.1.6.1 </bdi>インラインセットと修飾子</h5><a
                            class="self-link" href="#inline-sets-and-modifiers"
                            aria-label="Permalink for Section 4.1.6.1"></a>
                    </div>
                    <p><code>resolutionOrder</code> において、<a href="#sets">set</a> または <a href="#modifiers">modifier</a>
                        は、<code>name</code> と <code>type</code> キーがオブジェクトに追加される限り、<em
                            class="rfc2119">インラインで宣言してもよい</em>です：
                    </p>
                    <table>
                        <thead>
                            <tr>
                                <th align="left">Property</th>
                                <th align="left">Type</th>
                                <th align="center">Required</th>
                                <th align="left">Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td align="left"><strong>name</strong></td>
                                <td align="left"><code>string</code></td>
                                <td align="center">Y</td>
                                <td align="left"><em class="rfc2119">他の</em><code>resolutionOrder</code> 内のいかなる
                                    <code>name</code> とも<em class="rfc2119">衝突してはならない</em>一意な名前。
                                </td>
                            </tr>
                            <tr>
                                <td align="left"><strong>type</strong></td>
                                <td align="left"><code>"set" | "modifier"</code></td>
                                <td align="center">Y</td>
                                <td align="left">タイプに応じて <code>"set"</code> または <code>"modifier"</code> で<em
                                        class="rfc2119">なければなりません</em>。
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <p>ツールは、インラインオブジェクトから <code>name</code> または <code>type</code> が欠落している場合、または <code>name</code>
                        がいずれかのオブジェクト間で重複している場合には、<em class="rfc2119">必ず</em>エラーを投げなければなりません。
                    </p>
                    <div class="note" id="issue-container-generatedID">
                        <div role="heading" class="ednote-title marker" id="h-ednote" aria-level="6"><span>Editor's
                                note</span><span class="issue-label">: Name</span></div>
                        <aside class="">

                            <p>セットと修飾子がそれぞれのルートレベルの <code>sets</code> と <code>modifiers</code>
                                キーに現れるとき、セットが修飾子と名前を共有することは妥当です。<code>resolutionOrder</code> 配列内で <code>name</code>
                                を重複させることのみが無効です。
                            </p>
                        </aside>
                    </div>

                    <aside class="example" id="example-resolution-order-with-inline-sets-and-modifiers">
                        <div class="marker">
                            <a class="self-link"
                                href="#example-resolution-order-with-inline-sets-and-modifiers">Example<bdi>
                                    8</bdi></a><span class="example-title">: インラインセットと修飾子を用いた解決順</span>
                        </div>

                        <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"resolutionOrder"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"set"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Size"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation/size.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"set"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Typography"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation/typography.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"set"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Animation"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/Animation"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"modifier"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Theme"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Color theme"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"contexts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"light"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/light.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"lightHighContrast"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/light.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark-high-contrast.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"dark"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"darkHighContrast"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark-high-contrast.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"light"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                    </aside>

                    <p>インラインセットと修飾子は、いかなる方法でも<em class="rfc2119">参照してはなりません</em>。<a
                            href="#reference-objects">参照オブジェクト</a>が解決順の項目を指している場合、ツールは<em
                            class="rfc2119">エラーを投げるべき</em>です。</p>
                    <aside class="example" id="example-invalid-inline-set-reference">
                        <div class="marker">
                            <a class="self-link" href="#example-invalid-inline-set-reference">Example<bdi>
                                    9</bdi></a><span class="example-title">: 無効なインラインセット参照</span>
                        </div>

                        <p>次の <a href="#reference-objects">参照オブジェクト</a> ポインタは、どこに現れても無効です：</p>
                        <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/resolutionOrder/4"</span> <span class="hljs-punctuation">}</span>
</code></pre>
                        <p>これは、<a href="#sets">sets</a>（循環依存）、<a href="#modifiers">modifiers</a>（循環依存）、または <a
                                href="#resolution-order">resolutionOrder</a>
                            配列の別の場所（無限再帰）のどこに現れても、無効な参照を生み出す可能性が非常に高いです。これが無効な参照を引き起こさないケースは稀であり、わずかな変更でも循環参照に変わってしまう可能性があります。
                        </p>
                    </aside>

                </section>
                <section class="informative" id="ordering-of-sets-and-modifiers">
                    <div class="header-wrapper">
                        <h5 id="x4-1-6-2-ordering-of-sets-and-modifiers"><bdi class="secno">4.1.6.2 </bdi>セットと修飾子の順序
                        </h5><a class="self-link" href="#ordering-of-sets-and-modifiers"
                            aria-label="Permalink for Section 4.1.6.2"></a>
                    </div>
                    <p><em>このセクションは規範的ではありません。</em></p>


                    <p><code>resolutionOrder</code>
                        配列は、ユーザーの選択による任意のセットと修飾子の順序付けを可能にします。しかし、多くのセットが競合解決のために修飾子の後に置かれなければならないような状況では、予測不能で壊れやすいトークン構成の<a
                            href="https://en.wikipedia.org/wiki/Code_smell">コードスメル</a>である可能性が高いです。理想的には、修飾子は条件付きの値を十分に扱い、上書きがほとんど（あるいは全く）不要となります（<a
                            href="#orthogonality">直交性</a>参照）。実務的には、これは次を意味します</p>
                </section>

            </section>
        </section>
        <section id="reference-objects">
            <div class="header-wrapper">
                <h3 id="x4-2-reference-objects"><bdi class="secno">4.2 </bdi>参照オブジェクト</h3><a class="self-link"
                    href="#reference-objects" aria-label="Permalink for Section 4.2"></a>
            </div>
            <p>別の JSON ドキュメントや同一ドキュメント内の構造を参照する場合、参照オブジェクトを<em class="rfc2119">使用しなければなりません</em>。これは <a
                    href="https://json-schema.org/draft/2020-12/json-schema-core#ref">JSON Schema 2020-12</a>
                において、<code>$ref</code> キーを持ち、その文字列が [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc6901"
                        title="JavaScript Object Notation (JSON) Pointer">RFC6901</a></cite>] に記述された有効な JSON
                ポインタであるオブジェクトとして説明されています。</p>
            <p>ツールはリゾルバードキュメント内のすべての参照オブジェクトを<em class="rfc2119">必ず</em>解決しなければなりません。</p>
            <p>参照オブジェクトは循環しては<em class="rfc2119">なりません</em>。すなわち、自身を参照する他のポインタを参照したり、参照オブジェクトの親ノードを参照したりしては<em
                    class="rfc2119">なりません</em>。</p>
            <p>ツールは同一ドキュメント内参照オブジェクトを<em
                    class="rfc2119">必ず</em>サポートしなければなりません。これはこのリゾルバーモジュールをサポートするための最小要件です。それ以外については、ツールはローカルファイルシステム上のファイルのインポートや
                TCP/IP 経由のリモート URI など、いくつかの URI タイプをサポートしないという個別の判断を行っても構いません。</p>
            <aside class="example" id="example-valid-reference-objects">
                <div class="marker">
                    <a class="self-link" href="#example-valid-reference-objects">Example<bdi> 10</bdi></a><span
                        class="example-title">: 有効な参照オブジェクト</span>
                </div>

                <p>参照オブジェクトの一般的な例：</p>
                <table>
                    <thead>
                        <tr>
                            <th>Code</th>
                            <th>Result</th>
                            <th>Required Support</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th>

                                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/MySet"</span> <span class="hljs-punctuation">}</span>
</code></pre>
                            </th>
                            <td>

                                <p>同一ドキュメント内の <code>sets/MySet</code> を参照します。</p>
                            </td>
                            <td>Y</td>
                        </tr>
                        <tr>
                            <th>

                                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"path/to/example.json"</span> <span class="hljs-punctuation">}</span>
</code></pre>
                            </th>
                            <td>

                                <p>このドキュメントからの相対パスで <code>./path/to/example.json</code> の内容全体を参照します。</p>
                            </td>
                            <td></td>
                        </tr>
                        <tr>
                            <th>

                                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"example.json#sets/MySet"</span> <span class="hljs-punctuation">}</span>
</code></pre>
                            </th>
                            <td>

                                <p><code>example.json</code> の一部、すなわち <code>sets/MySet</code> のみを参照します。</p>
                            </td>
                            <td></td>
                        </tr>
                        <tr>
                            <th>

                                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://my-server.com/tokens.json"</span> <span class="hljs-punctuation">}</span>
</code></pre>
                            </th>
                            <td>

                                <p>公開 URL にホストされたリモートファイルを参照します。</p>
                            </td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>

            </aside>

            <aside class="example" id="example-invalid-reference-objects">
                <div class="marker">
                    <a class="self-link" href="#example-invalid-reference-objects">Example<bdi> 11</bdi></a><span
                        class="example-title">: 無効な参照オブジェクト</span>
                </div>

                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"foo"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"bar"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/baz/bat"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"baz"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"bat"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/foo/bar"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                <p>この例は、<code>foo/bar</code> と <code>baz/bat</code> が互いを参照しており最終値が決まらないため、無効です。</p>
                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"foo"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"bar"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"baz"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/foo/bar"</span> <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                <p>単一の参照オブジェクトが親を参照している場合、それは自分自身を含むことになり、無限再帰を引き起こすため無効です。</p>
            </aside>

            <section id="invalid-pointers">
                <div class="header-wrapper">
                    <h4 id="x4-2-1-invalid-pointers"><bdi class="secno">4.2.1 </bdi>無効なポインタ</h4><a class="self-link"
                        href="#invalid-pointers" aria-label="Permalink for Section 4.2.1"></a>
                </div>
                <p>ポインタは同一ドキュメント内のどこを指しても<em class="rfc2119">よい</em>ですが、次の例外があります：</p>
                <ol>
                    <li><a href="#resolution-order">resolutionOrder</a>
                        のみが修飾子（<code>#/modifiers/…</code>）を参照できます。セットおよび修飾子は他の修飾子を<em class="rfc2119">参照してはなりません</em>。
                        <ul>
                            <li>セットから修飾子を参照すると、<a href="#inputs">inputs</a> が条件ロジックを、対応できない構造に適用してしまう可能性があり、許可されません。
                            </li>
                            <li>修飾子から他の修飾子を参照すると、単一の入力が予期しない修飾子に適用されることになり、許可されません。</li>
                        </ul>
                    </li>
                    <li><a href="#resolution-order">resolutionOrder</a>
                        配列（<code>#/resolutionOrder/…</code>）内のいかなるものも、参照オブジェクトが<em
                            class="rfc2119">指してはなりません</em>。解決順はその性質上、ドキュメントの多くの部分を参照します。これのいかなる部分を複製しても、複雑で予測困難な連鎖を生じます。
                    </li>
                </ol>
                <p>ツールは、無効なポインタに遭遇した場合、<em class="rfc2119">必ず</em>エラーを投げなければなりません。</p>
            </section>
            <section id="extending">
                <div class="header-wrapper">
                    <h4 id="x4-2-2-extending"><bdi class="secno">4.2.2 </bdi>拡張</h4><a class="self-link"
                        href="#extending" aria-label="Permalink for Section 4.2.2"></a>
                </div>
                <p><a href="https://json-schema.org/draft/2020-12/json-schema-core#ref">JSON Schema 2020-12</a>
                    が許すように、参照オブジェクトには <code>$ref</code> と並んで他のキーが<em
                        class="rfc2119">存在してもよい</em>です。このような場合、<code>$ref</code> と並ぶローカルキーは上書きとして<em
                        class="rfc2119">扱わなければなりません</em>。
                </p>
                <aside class="example" id="example-extending-with-ref">
                    <div class="marker">
                        <a class="self-link" href="#example-extending-with-ref">Example<bdi> 12</bdi></a><span
                            class="example-title">: $ref による拡張</span>
                    </div>

                    <p>一般的な例：</p>
                    <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"animal"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"brown"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"legs"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"lizard"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"green"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/animal"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"size"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"small"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                    <p><code>#/lizard</code> の最終値は次と同等になります：</p>
                    <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"green"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"legs"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"size"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"small"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                    <p>キーの順序は問題ではありません。<code>color</code> がローカルで宣言されているため、<code>#/animal</code> の値を置き換えます。また、新しいプロパティ
                        <code>size</code> を追加することで、最終値に付加されます。
                    </p>
                </aside>

                <p><code>$ref</code> と並ぶキーがオブジェクトまたは配列を宣言している場合、ツールはこれらを浅くフラット化し<em
                        class="rfc2119">なければなりません</em>。つまり、オブジェクトや配列はマージされません。</p>
            </section>
        </section>
        <section id="extensions">
            <div class="header-wrapper">
                <h3 id="x4-3-extensions"><bdi class="secno">4.3 </bdi>$extensions</h3><a class="self-link"
                    href="#extensions" aria-label="Permalink for Section 4.3"></a>
            </div>
            <p><code>$extensions</code> オブジェクトは、任意の <a href="#sets">set</a>、<a href="#modifiers">modifier</a>、または <a
                    href="#inline-sets-and-modifiers">インラインの set/modifier</a> に<em
                    class="rfc2119">追加してもよい</em>もので、個々のツールが使用するか無視するかは任意のメタデータを宣言します。
            </p>
            <p>提供される場合、<code>$extensions</code> はベンダー固有の名前空間をキーとするオブジェクトで<em
                    class="rfc2119">なければなりません</em>。これにより、複数のツールがこのメタデータを衝突なく使用できます。</p>
            <aside class="example" id="example-set-with-extensions">
                <div class="marker">
                    <a class="self-link" href="#example-set-with-extensions">Example<bdi> 13</bdi></a><span
                        class="example-title">: $extensions を含むセット</span>
                </div>

                <p>以下は、セットが <code>figma.com</code> ベンダー向けの任意のメタデータを含む例です：</p>
                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"colors/ramps.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"colors/semantic.json"</span> <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"$extensions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"figma.com"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"sourceFile"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://figma.com/file/xxxxxx"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"updatedAt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-11-01"</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
            </aside>

        </section>
        <section id="defs">
            <div class="header-wrapper">
                <h3 id="x4-4-defs"><bdi class="secno">4.4 </bdi>$defs</h3><a class="self-link" href="#defs"
                    aria-label="Permalink for Section 4.4"></a>
            </div>
            <p>ツールは JSON Schema の <a href="https://json-schema.org/understanding-json-schema/structuring#defs">$defs</a>
                で構造を定義することを<em class="rfc2119">許可してもよい</em>ですが、必須ではありません。ただし、ツールは <code>$defs</code> に遭遇した際に<em
                    class="rfc2119">エラーを投げてはなりません</em>。未対応の場合はそのキーを<em class="rfc2119">無視しなければなりません</em>。
            </p>
            <div class="note" id="issue-container-generatedID-0">
                <div role="heading" class="ednote-title marker" id="h-ednote-0" aria-level="4"><span>Editor's
                        note</span><span class="issue-label">: $defs</span></div>
                <aside class="">

                    <p><code>$defs</code>
                        の利用は本仕様の範囲では未定義の挙動であるため、ユーザーとツール作成者が利用方法を定義するか完全に避けるかに委ねられます。仕様は将来の衝突の可能性をゼロにするため、意図的に
                        <code>$defs</code> の使用を避けています。
                    </p>
                </aside>
            </div>
        </section>
    </section>

    <section id="inputs">
        <div class="header-wrapper">
            <h2 id="x5-inputs"><bdi class="secno">5. </bdi>入力</h2><a class="self-link" href="#inputs"
                aria-label="Permalink for Section 5."></a>
        </div>
        <p>リゾルバードキュメントは、条件付きトークン値が<em
                class="rfc2119">生成されてもよい</em>方法のみを記述します。しかし、その条件はどこかで依然として提供される必要があります。「入力」という用語は、ツールに渡されるコンテキスト値の任意の選択を指します。
        </p>
        <p>ツールは、JSON シリアライズ可能なオブジェクト（例えば、<a
                href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">JavaScript
                のオブジェクト</a>や
            <a href="https://docs.python.org/3/tutorial/datastructures.html#dictionaries">Python の辞書</a>）としての入力を<em
                class="rfc2119">必ず</em>受け付けなければなりません。
        </p>
        <p>修飾子を宣言するリゾルバを読み込むツールは、付随する入力が提供されない場合、<em class="rfc2119">エラーを投げるべき</em>です。</p>
        <aside class="example" id="example-inputs">
            <div class="marker">
                <a class="self-link" href="#example-inputs">Example<bdi> 14</bdi></a><span class="example-title">:
                    入力</span>
            </div>

            <p>次の修飾子が与えられた場合：</p>
            <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"resolutionOrder"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"modifier"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"contexts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"light"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"light.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"dark"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dark.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"modifier"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"size"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"context"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"size/default.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"large"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"size/large.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"modifier"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"beta"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"context"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"false"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"true"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"beta.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"false"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
            <p><strong>有効な</strong>入力はスキーマに従います：すべてのキーは各修飾子の<code>name</code>に対応します。値は修飾子によって指定された有効な選択肢です。</p>
            <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"light"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"size"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"large"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"beta"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"true"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
            <p>しかし、<strong>無効な</strong>入力は未知のキー、無効なコンテキスト、または必須の修飾子の欠落を追加します：</p>
            <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"blue"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"foo"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bar"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
            <p>この状況では、ツールは次のような複数のエラーを<em class="rfc2119">投げるべき</em>です：</p>
            <ol>
                <li><code>Error: invalid context "blue" for modifier "theme".</code></li>
                <li><code>Error: missing modifier "size".</code></li>
                <li><code>Error: unknown modifier "foo".</code></li>
                <li>（修飾子 <code>beta</code> については、<code>default</code> を提供しているためエラーは不要）</li>
            </ol>
        </aside>

        <aside class="example" id="example-tool-consuming-input">
            <div class="marker">
                <a class="self-link" href="#example-tool-consuming-input">Example<bdi> 15</bdi></a><span
                    class="example-title">: 入力を消費するツール</span>
            </div>

            <p>JavaScript で書かれた仮想のツールを使って、<a href="#example-inputs">前の例</a>を次のように扱うことができます：</p>
            <pre><code class="js hljs" aria-busy="false"><span class="hljs-keyword">import</span> tokenTool <span class="hljs-keyword">from</span> <span class="hljs-string">'./token-tool.js'</span>;

tokenTool.<span class="hljs-title function_">loadResolver</span>(
  <span class="hljs-comment">/* Path to resolver */</span>
  <span class="hljs-string">'./resolver.json'</span>,

  <span class="hljs-comment">/* Input */</span>
  {
    <span class="hljs-attr">theme</span>: <span class="hljs-string">'dark'</span>,
    <span class="hljs-attr">size</span>: <span class="hljs-string">'default'</span>,
  },
);
</code></pre>
            <p>この仮想のツールには、次の引数を取る <code>loadResolver()</code> メソッドがあります：</p>
            <ol>
                <li>最初の位置にリゾルバへのファイルパス、</li>
                <li>2 番目の位置に入力オブジェクト。</li>
            </ol>
            <p>その後ツールは、リゾルバと入力を組み合わせて最終的な<a data-link-type="dfn"
                    href="https://www.w3.org/policies/process/#group-decision">解決</a>を生成します。</p>
        </aside>

        <section id="case-sensitivity">
            <div class="header-wrapper">
                <h3 id="x5-1-case-sensitivity"><bdi class="secno">5.1 </bdi>大文字・小文字の区別</h3><a class="self-link"
                    href="#case-sensitivity" aria-label="Permalink for Section 5.1"></a>
            </div>
            <p>入力は<em class="rfc2119">大文字・小文字を区別しないべき</em>です。例えば、
                <code>{ "theme": "dark" }</code>、<code>{ "Theme": "Dark" }</code>、<code>{ "THEME": "DARK" }</code> は
                <em class="rfc2119">同等であるべき</em>です。ただし、ツールは大文字・小文字の区別について個別の判断を<em class="rfc2119">してもよい</em>です。
            </p>
        </section>
        <section id="enforcing-strings">
            <div class="header-wrapper">
                <h3 id="x5-2-enforcing-strings"><bdi class="secno">5.2 </bdi>文字列の強制</h3><a class="self-link"
                    href="#enforcing-strings" aria-label="Permalink for Section 5.2"></a>
            </div>
            <p>入力の値は<em class="rfc2119">必ず</em>文字列でなければなりません。入力に <code>{ "beta": true }</code> や
                <code>{ "size": 100 }</code> のような非文字列の値が含まれている場合、ツールは<em class="rfc2119">必ず</em>エラーを投げなければなりません。
            </p>
        </section>
    </section>

    <section id="resolution-logic">
        <div class="header-wrapper">
            <h2 id="x6-resolution-logic"><bdi class="secno">6. </bdi>解決ロジック</h2><a class="self-link"
                href="#resolution-logic" aria-label="Permalink for Section 6."></a>
        </div>
        <p>ツールは正しい出力を得るために、解決の段階を<em class="rfc2119">必ず</em>処理しなければなりません。</p>
        <ol>
            <li><a href="#input-validation">入力の検証</a>：与えられたリゾルバードキュメントに対して<a href="#inputs">入力</a>が有効であることの検証。</li>
            <li><a href="#ordering">順序付け</a>：最終的なトークン構造を生成するための <code>resolutionOrder</code> 配列の追跡。</li>
            <li><a href="#aliases">エイリアス</a>：最終的なトークン構造の中のトークンエイリアスの解決。</li>
            <li><a href="#resolution">解決</a>：最終的な結果</li>
        </ol>
        <section id="input-validation">
            <div class="header-wrapper">
                <h3 id="x6-1-input-validation"><bdi class="secno">6.1 </bdi>入力の検証</h3><a class="self-link"
                    href="#input-validation" aria-label="Permalink for Section 6.1"></a>
            </div>
            <p>ツールは、すべての<a data-link-type="element"
                    href="https://html.spec.whatwg.org/multipage/input.html#the-input-element">入力</a>が、提供された<a
                    href="#modifiers">修飾子</a>のコンテキストに一致することを<em class="rfc2119">必ず</em>要求しなければなりません。</p>
            <p>リゾルバが修飾子を宣言していない場合は、このステップをスキップして<a href="#ordering">順序付け</a>に進みます。</p>
            <ol>
                <li>入力オブジェクトのすべてのキーに対して：<ol>
                        <li>それが有効な修飾子に対応しているか検証します。対応していない場合はエラーを投げます。</li>
                        <li>そのキーの値が、その修飾子の許容値に対応しているか検証します。対応していない場合はエラーを投げます。</li>
                    </ol>
                </li>
                <li>リゾルバ内のすべての修飾子に対して：<ol>
                        <li>そのリゾルバがデフォルト値を宣言していない場合は、入力でキーが提供されているか検証します。提供されていない場合はエラーを投げます。</li>
                    </ol>
                </li>
            </ol>
        </section>
        <section id="ordering">
            <div class="header-wrapper">
                <h3 id="x6-2-ordering"><bdi class="secno">6.2 </bdi>順序付け</h3><a class="self-link" href="#ordering"
                    aria-label="Permalink for Section 6.2"></a>
            </div>
            <p>ツールは<a href="#resolution-order">resolutionOrder</a> 配列を順番に<em class="rfc2119">反復処理しなければなりません</em>。</p>
            <ol>
                <li>
                    <p>配列内の各項目について、それが<a href="#sets">set</a>か<a
                            href="#modifiers">modifier</a>かを判定し、配列順に単一のトークン構造へフラット化します。</p>
                    <ol>
                        <li>項目がセットの場合、配列順に <code>sources</code> を結合して単一のトークン構造を生成します。</li>
                        <li>それ以外で項目が修飾子の場合は、<a
                                href="#inputs">入力</a>に一致する<code>context</code>のみを選択し、配列を順に結合して単一のトークン構造を生成します。
                        </li>
                        <li>競合が発生した場合は、配列中で最も最近の出現を採用します。</li>
                    </ol>
                </li>
                <li>
                    <p><code>resolutionOrder</code> 配列の最後まで到達するまで繰り返します。</p>
                </li>
            </ol>
            <p>最終結果は、最初から単一のソースであったかのように動作するトークン構造になります。</p>
            <aside class="example" id="example-conflict-resolution">
                <div class="marker">
                    <a class="self-link" href="#example-conflict-resolution">Example<bdi> 16</bdi></a><span
                        class="example-title">: 競合解決</span>
                </div>

                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"foundation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
              <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"$value"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"colorSpace"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"srgb"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"components"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"$type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"color"</span>
              <span class="hljs-punctuation">}</span>
            <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
              <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"$value"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                  <span class="hljs-attr">"colorSpace"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"srgb"</span><span class="hljs-punctuation">,</span>
                  <span class="hljs-attr">"components"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0.1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.1</span><span class="hljs-punctuation">]</span>
                <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"$type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"color"</span>
              <span class="hljs-punctuation">}</span>
            <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"resolutionOrder"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/foundation"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                <p>ここでは、2 つの <code>color.text.default</code> トークンが見つかりました。順序が重要であるため、最後の宣言が「勝ち」、最終結果は次のようになります：</p>
                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"$value"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"colorSpace"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"srgb"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"components"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0.1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.1</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"$type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"color"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
            </aside>

        </section>
        <section id="aliases">
            <div class="header-wrapper">
                <h3 id="x6-3-aliases"><bdi class="secno">6.3 </bdi>エイリアス</h3><a class="self-link" href="#aliases"
                    aria-label="Permalink for Section 6.3"></a>
            </div>
            <p>エイリアスはこのステップまで<em class="rfc2119">解決してはなりません</em>。</p>
            <p><a href="#ordering">順序付け</a>が単一のトークン構造にフラット化された後、残る唯一のステップはエイリアスの解決です。エイリアスは <a
                    href="../format/#aliases-references">フォーマット</a>で概説されているのと全く同じ方法で解決されます：</p>
            <ul>
                <li>循環でない限り、深いエイリアスが許可されます</li>
                <li>エイリアスは正しい <code>$type</code> を指していなければなりません。</li>
            </ul>
        </section>
        <section id="resolution">
            <div class="header-wrapper">
                <h3 id="x6-4-resolution"><bdi class="secno">6.4 </bdi>解決</h3><a class="self-link" href="#resolution"
                    aria-label="Permalink for Section 6.4"></a>
            </div>
            <aside class="example" id="example-theme-resolution">
                <div class="marker">
                    <a class="self-link" href="#example-theme-resolution">Example<bdi> 17</bdi></a><span
                        class="example-title">: テーマの解決</span>
                </div>

                <p>以下のファイル構成から始めて、その後に解決の各段階をステップごとに追っていきます。</p>
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Contents</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <th>

                                <p>Resolver</p>
                            </th>
                            <td>

                                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"foundation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"components"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"components/button.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"modifiers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"context"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"light"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"themes/light.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"dark"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"themes/dark.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"resolutionOrder"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/foundation"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/components"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/modifiers/theme"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                            </td>
                        </tr>
                        <tr>
                            <th>

                                <p>入力</p>
                            </th>
                            <td>

                                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dark"</span> <span class="hljs-punctuation">}</span>
</code></pre>
                            </td>
                        </tr>
                        <tr>
                            <th>

                                <p>foundation.json</p>
                            </th>
                            <td>

                                <ul>
                                    <li><code>color.brand.primary</code>（color）</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <th>

                                <p>components/button.json</p>
                            </th>
                            <td>

                                <ul>
                                    <li><code>button.background</code>（color）</li>
                                    <li><code>button.padding</code>（dimension）</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <th>

                                <p>themes/light.json</p>
                            </th>
                            <td>

                                <ul>
                                    <li><code>theme.accent</code></li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <th>

                                <p>themes/dark.json</p>
                            </th>
                            <td>

                                <ul>
                                    <li><code>theme.accent</code>（代替値）</li>
                                </ul>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <ol>
                    <li>入力の検証<ol>
                            <li><code>theme</code> が定義済みの修飾子であることを検証（合格）。</li>
                            <li><code>dark</code> が <code>theme</code> 修飾子に対して有効な値であることを検証（合格）。</li>
                        </ol>
                    </li>
                    <li>順序付け<ol>
                            <li>最初の項目は <code>foundation</code> セットで、<code>color.brand.primary</code> を提供。</li>
                            <li>2 番目の項目は <code>components</code> セットで、<code>button.background</code> と
                                <code>button.padding</code> を提供。
                            </li>
                            <li>3 番目で最後の項目は <code>theme</code> 修飾子で、<code>theme.accent</code> を提供。</li>
                            <li>よって、最終的な解決には 4 つのトークンが含まれます。</li>
                        </ol>
                    </li>
                    <li>エイリアス<ol>
                            <li>任意のトークンがエイリアスを含む場合、解決できるのはこの時点のみ。</li>
                        </ol>
                    </li>
                    <li>解決<ol>
                            <li>最終的なトークンの一覧は次のようになります：<ol>
                                    <li><code>color.brand.primary</code>（<code>foundation.json</code> 由来）</li>
                                    <li><code>button.background</code>（<code>components/button.json</code> 由来）</li>
                                    <li><code>button.padding</code>（<code>components/button.json</code> 由来）</li>
                                    <li><code>theme.accent</code>（<code>themes/dark.json</code> 由来）</li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                </ol>
                <p>重要なポイント：</p>
                <ul>
                    <li>入力が <code>{ "theme": "dark" }</code> であったため、<code>themes/light.json</code> は一度も使用されませんでした。
                    </li>
                </ul>
            </aside>
        </section>
    </section>

    <section class="informative" id="bundling">
        <div class="header-wrapper">
            <h2 id="x7-bundling"><bdi class="secno">7. </bdi>バンドル</h2><a class="self-link" href="#bundling"
                aria-label="Permalink for Section 7."></a>
        </div>
        <p><em>このセクションは規範的ではありません。</em></p>
        <p>リゾルバードキュメントは、整理のためにトークンの使用を複数の JSON ファイルに分散させることを許可します。しかし、移植性の観点からは、単一の JSON ドキュメントのみを扱う方が有利な場合があります。</p>
        <p>「バンドル」は、リゾルバードキュメントを単一ファイルにまで縮約するプロセスを指します。これを達成する戦略は複数あり、本ドキュメントで概説する以上のものがあります。しかし、説明のために、ここでは多数ある可能なアプローチのうち
            2 つを概説します：</p>
        <section id="inlining-files">
            <div class="header-wrapper">
                <h3 id="x7-1-inlining-files"><bdi class="secno">7.1 </bdi>ファイルのインライン化</h3><a class="self-link"
                    href="#inlining-files" aria-label="Permalink for Section 7.1"></a>
            </div>
            <p>インライン化とは、リモートファイルへのすべての<a
                    href="#reference-objects">参照オブジェクト</a>を取り出して、その内容に置き換えることです。これは最終目標を達成する単純な戦略ですが、同じファイルが複数回参照される場合には重複が発生します。ツールは重複したトークンに問題を抱えないかもしれませんが、このドキュメントを読む人間は、おそらく生成されるコード行数の多さに苦労するでしょう。
            </p>
            <aside class="example" id="example-bundling-by-inlining">
                <div class="marker">
                    <a class="self-link" href="#example-bundling-by-inlining">Example<bdi> 18</bdi></a><span
                        class="example-title">: インライン化によるバンドル</span>
                </div>

                <p>5 つのファイルを参照するリゾルバが与えられた場合：</p>
                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"foundation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation/colors.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation/size.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation/typography.json"</span> <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"modifiers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"contexts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"light"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation/colors.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/light.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"dark"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation/colors.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"resolutionOrder"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/foundation"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/modifiers/theme"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                <p>内容をインライン化すると、次のようになります：</p>
                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"foundation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-comment">// (contents of foundation/colors.json)</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-comment">// (contents of foundation/size.json)</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-comment">// (contents of foundation/typography.json)</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"modifiers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"contexts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"light"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-comment">// (contents of foundation/colors.json)</span>
          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-comment">// (contents of theme/light.json)</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"dark"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-comment">// (contents of foundation/colors.json)</span>
          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-comment">// (contents of theme/dark.json)</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"resolutionOrder"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/foundation"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/modifiers/theme"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                <p>可読性のためにファイルの内容は短縮されています。内容は何であってもよく、バンドルのトピックには関係ありません。</p>
                <p><code>foundation/colors.json</code> はドキュメント内で 3 回参照されていたため、インライン化によって同じ内容のコピーが 3 つ生成されたことに注意してください。
                </p>
            </aside>

        </section>
        <section id="using-defs-for-files">
            <div class="header-wrapper">
                <h3 id="x7-2-using-defs-for-files"><bdi class="secno">7.2 </bdi>ファイルに $defs を使用する</h3><a
                    class="self-link" href="#using-defs-for-files" aria-label="Permalink for Section 7.2"></a>
            </div>
            <p><a href="#defs">$defs</a> で説明されているように、<code>$defs</code> はリゾルバードキュメントにおいて定義済みの挙動を持ちません。JSON Schema
                のこの機能をサポートすることをツールが決定した場合にのみ使用できます。</p>
            <p>この戦略は、トップレベルに <code>$defs</code> キーを作成し、各トップレベルキーにそのファイルの内容を含めることを伴います。</p>
            <p><code>$defs</code> を使用する唯一の欠点は、リゾルバードキュメントの最小要件ではないため、一部のツールがそれを無視することを選ぶ場合がある点です。</p>
            <aside class="example" id="example-bundling-by-using-defs">
                <div class="marker">
                    <a class="self-link" href="#example-bundling-by-using-defs">Example<bdi> 19</bdi></a><span
                        class="example-title">: $defs を使ったバンドル</span>
                </div>

                <p><a href="#inlining-files">インライン化のセクション</a>と同じリゾルバが与えられた場合、トップレベルの <code>$defs</code>
                    キーを新規作成し、それぞれファイル名とその内容に対応するキーと値を追加できます：</p>
                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"foundation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/$defs/foundation~1colors.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/$defs/foundation~1size.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/$defs/foundation~1typography.json"</span> <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"modifiers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"contexts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"light"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/$defs/foundation~1colors.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/$defs/theme~1light.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"dark"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/$defs/foundation~1colors.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/$defs/theme~1dark.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"resolutionOrder"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/foundation"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/modifiers/theme"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"$defs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"foundation/colors.json"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-comment">// (contents of foundation/colors.json)</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"foundation/size.json"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-comment">// (contents of foundation/size.json)</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"foundation/typography.json"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-comment">// (contents of foundation/typography.json)</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"theme/light.json"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-comment">// (contents of theme/light.json)</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"theme/dark.json"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-comment">// (contents of theme/dark.json)</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                <p>この方法を使うことで、重複の削減だけでなく、長さを増やすことなく元のリゾルバードキュメントのフォーマットと形状も維持できました。</p>
                <p>名前に「<code>/</code>」文字が使われる場合、それがサブパスとして扱われないように [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-rfc6901" title="JavaScript Object Notation (JSON) Pointer">RFC6901</a></cite>]
                    に従って <code>~1</code> でエスケープしなければならないことに注意してください。また、ファイル名は <code>#</code>
                    フラグメント文字の後に現れるため、「<code>[filename].json</code>」は同一ドキュメント内の位置を指しており、実際のファイルではないこと（そうでなければ「<code>#</code>」の前に現れるはず）にも注意が必要です。
                </p>
            </aside>
        </section>
    </section>

    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x8-conformance"><bdi class="secno">8. </bdi>適合性</h2><a class="self-link" href="#conformance"
                aria-label="Permalink for Section 8."></a>
        </div>
        <p>非規範的とマークされたセクションに加えて、本仕様のすべての執筆ガイドライン、図表、例、および注記は非規範的です。それ以外の本仕様のすべては規範的です。</p>
        <p>
            この文書におけるキーワード <em class="rfc2119">MAY</em>、<em class="rfc2119">MUST</em>、<em class="rfc2119">MUST
                NOT</em>、<em class="rfc2119">SHOULD</em>、<em class="rfc2119">SHOULD NOT</em> は、
            <a href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119"
                    title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc8174"
                    title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
            に記載されているとおり、ここに示すように全面大文字で現れる場合にのみ、解釈されます。
        </p>
        <p>リゾルバ仕様を実装するツールは<em class="rfc2119">必ず</em>次を行わなければなりません：</p>
        <ul>
            <li><strong>解決プロセスのサポート</strong>：<a
                    href="#resolution-logic">解決ロジック</a>を定義どおりに実装し、入力の検証、ベースセットのフラット化、修飾子の適用、エイリアス処理、競合解決を含めます。</li>
            <li><strong>入力の検証</strong>：提供された修飾子入力が定義された修飾子と受け入れ可能な値に一致していることを保証します。</li>
            <li><strong>エイリアスを正しく解決</strong>：<a
                    href="../format/#aliases-references">トークン参照</a>を正確に処理し、再帰的参照および循環依存の検出を含みます。
            </li>
            <li><strong>トークンプロパティの保持</strong>：解決プロセス全体で、追加のトークンプロパティ（例：<a href="#extensions">$extensions</a>）を保持します。
            </li>
            <li><strong>エラーを適切に処理</strong>：無効な入力や循環参照などの問題に対して意味のあるエラーメッセージを提供します。</li>
        </ul>
    </section>

    <section id="acknowledgements" class="appendix informative">
        <div class="header-wrapper">
            <h2 id="a-acknowledgments"><bdi class="secno">A. </bdi>謝辞</h2><a class="self-link" href="#acknowledgements"
                aria-label="Permalink for Appendix A."></a>
        </div>
        <p><em>このセクションは規範的ではありません。</em></p>

        <p>
            このリゾルバ仕様は、Hyma チーム（Mike Kamminga、Andrew L’Homme、Lilith などを含むがこれらに限定されない）の支えなしには実現しませんでした。
            また、Joren Broekema、Louis Chenais による重要な貢献がありました。Design Tokens Community Group のメンバーによる
            貢献とフィードバックに感謝いたします。
        </p>
    </section>


    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="b-references"><bdi class="secno">B. </bdi>参考文献</h2><a class="self-link" href="#references"
                aria-label="Permalink for Appendix B."></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="b-1-normative-references"><bdi class="secno">B.1 </bdi>規範的参照文献</h3><a class="self-link"
                    href="#normative-references" aria-label="Permalink for Appendix B.1"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-html">[html]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>。Anne van Kesteren;
                    Domenic Denicola; Dominic Farolino; Ian Hickson; Philip Jägenstedt; Simon Pieters。WHATWG。Living
                    Standard。URL: <a
                        href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-rfc1341">[RFC1341]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc1341"><cite>MIME (Multipurpose Internet Mail Extensions):
                            Mechanisms for Specifying and Describing the Format of Internet Message Bodies</cite></a>。
                    N. Borenstein; N. Freed。IETF。1992年6月。提案標準。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc1341">https://www.rfc-editor.org/rfc/rfc1341</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>RFCで要求レベルを示すためのキーワード</cite></a>。S.
                    Bradner。IETF。1997年3月。Best Current Practice。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
                </dd>
                <dt id="bib-rfc6838">[RFC6838]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc6838"><cite>Media Type Specifications and Registration
                            Procedures</cite></a>。N. Freed; J. Klensin; T. Hansen。IETF。2013年1月。Best Current
                    Practice。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc6838">https://www.rfc-editor.org/rfc/rfc6838</a>
                </dd>
                <dt id="bib-rfc6901">[RFC6901]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc6901"><cite>JavaScript Object Notation (JSON)
                            Pointer</cite></a>。P. Bryan, Ed.; K. Zyp; M. Nottingham, Ed.。IETF。2013年4月。提案標準。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc6901">https://www.rfc-editor.org/rfc/rfc6901</a>
                </dd>
                <dt id="bib-rfc8174">[RFC8174]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>RFC 2119 キーワードにおける大文字と小文字の曖昧さ</cite></a>。B.
                    Leiba。IETF。2017年5月。Best Current Practice。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
                </dd>
                <dt id="bib-rfc8259">[RFC8259]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8259"><cite>The JavaScript Object Notation (JSON) Data
                            Interchange Format</cite></a>。T. Bray, Ed.。IETF。2017年12月。インターネット標準。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8259">https://www.rfc-editor.org/rfc/rfc8259</a>
                </dd>
                <dt id="bib-w3c-process">[w3c-process]</dt>
                <dd>
                    <a href="https://www.w3.org/policies/process/"><cite>W3C Process Document</cite></a>。Elika J.
                    Etemad (fantasai); Florian Rivoal。W3C。2025年8月18日。URL: <a
                        href="https://www.w3.org/policies/process/">https://www.w3.org/policies/process/</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="Back to Top">↑</abbr></a>
    </p>
    <script id="respec-highlight-vars">(() => {
            // @ts-check

            if (document.respec) {
                document.respec.ready.then(setupVarHighlighter);
            } else {
                setupVarHighlighter();
            }

            function setupVarHighlighter() {
                document
                    .querySelectorAll("var")
                    .forEach(varElem => varElem.addEventListener("click", highlightListener));
            }

            function highlightListener(ev) {
                ev.stopPropagation();
                const { target: varElem } = ev;
                const hightligtedElems = highlightVars(varElem);
                const resetListener = () => {
                    const hlColor = getHighlightColor(varElem);
                    hightligtedElems.forEach(el => removeHighlight(el, hlColor));
                    [...HL_COLORS.keys()].forEach(key => HL_COLORS.set(key, true));
                };
                if (hightligtedElems.length) {
                    document.body.addEventListener("click", resetListener, { once: true });
                }
            }

            // availability of highlight colors. colors from var.css
            const HL_COLORS = new Map([
                ["respec-hl-c1", true],
                ["respec-hl-c2", true],
                ["respec-hl-c3", true],
                ["respec-hl-c4", true],
                ["respec-hl-c5", true],
                ["respec-hl-c6", true],
                ["respec-hl-c7", true],
            ]);

            function getHighlightColor(target) {
                // return current colors if applicable
                const { value } = target.classList;
                const re = /respec-hl-\w+/;
                const activeClass = re.test(value) && value.match(re);
                if (activeClass) return activeClass[0];

                // first color preference
                if (HL_COLORS.get("respec-hl-c1") === true) return "respec-hl-c1";

                // otherwise get some other available color
                return [...HL_COLORS.keys()].find(c => HL_COLORS.get(c)) || "respec-hl-c1";
            }

            function highlightVars(varElem) {
                const textContent = norm(varElem.textContent);
                const parent = varElem.closest(".algorithm, section");
                const highlightColor = getHighlightColor(varElem);

                const varsToHighlight = [...parent.querySelectorAll("var")].filter(
                    el =>
                        norm(el.textContent) === textContent &&
                        el.closest(".algorithm, section") === parent
                );

                // update availability of highlight color
                const colorStatus = varsToHighlight[0].classList.contains("respec-hl");
                HL_COLORS.set(highlightColor, colorStatus);

                // highlight vars
                if (colorStatus) {
                    varsToHighlight.forEach(el => removeHighlight(el, highlightColor));
                    return [];
                } else {
                    varsToHighlight.forEach(el => addHighlight(el, highlightColor));
                }
                return varsToHighlight;
            }

            function removeHighlight(el, highlightColor) {
                el.classList.remove("respec-hl", highlightColor);
                // clean up empty class attributes so they don't come in export
                if (!el.classList.length) el.removeAttribute("class");
            }

            function addHighlight(elem, highlightColor) {
                elem.classList.add("respec-hl", highlightColor);
            }

            /**
             * Same as `norm` from src/core/utils, but our build process doesn't allow
             * imports in runtime scripts, so duplicated here.
             * @param {string} str
             */
            function norm(str) {
                return str.trim().replace(/\s+/g, " ");
            }
        })()</script>
    <script id="respec-dfn-panel">(() => {
                                               // @ts-check
                                               if (document.respec) {
                                                   document.respec.ready.then(setupPanel);
                                               } else {
                                                   setupPanel();
                                               }

                                               function setupPanel() {
                                                   const listener = panelListener();
                                                   document.body.addEventListener("keydown", listener);
                                                   document.body.addEventListener("click", listener);
                                               }

                                               function panelListener() {
                                                   /** @type {HTMLElement} */
                                                   let panel = null;
                                                   return event => {
                                                       const { target, type } = event;

                                                       if (!(target instanceof HTMLElement)) return;

                                                       // For keys, we only care about Enter key to activate the panel
                                                       // otherwise it's activated via a click.
                                                       if (type === "keydown" && event.key !== "Enter") return;

                                                       const action = deriveAction(event);

                                                       switch (action) {
                                                           case "show": {
                                                               hidePanel(panel);
                                                               /** @type {HTMLElement} */
                                                               const dfn = target.closest("dfn, .index-term");
                                                               panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                                                               const coords = deriveCoordinates(event);
                                                               displayPanel(dfn, panel, coords);
                                                               break;
                                                           }
                                                           case "dock": {
                                                               panel.style.left = null;
                                                               panel.style.top = null;
                                                               panel.classList.add("docked");
                                                               break;
                                                           }
                                                           case "hide": {
                                                               hidePanel(panel);
                                                               panel = null;
                                                               break;
                                                           }
                                                       }
                                                   };
                                               }

                                               /**
                                                * @param {MouseEvent|KeyboardEvent} event
                                                */
                                               function deriveCoordinates(event) {
                                                   const target = /** @type HTMLElement */ (event.target);

                                                   // We prevent synthetic AT clicks from putting
                                                   // the dialog in a weird place. The AT events sometimes
                                                   // lack coordinates, so they have clientX/Y = 0
                                                   const rect = target.getBoundingClientRect();
                                                   if (
                                                       event instanceof MouseEvent &&
                                                       event.clientX >= rect.left &&
                                                       event.clientY >= rect.top
                                                   ) {
                                                       // The event probably happened inside the bounding rect...
                                                       return { x: event.clientX, y: event.clientY };
                                                   }

                                                   // Offset to the middle of the element
                                                   const x = rect.x + rect.width / 2;
                                                   // Placed at the bottom of the element
                                                   const y = rect.y + rect.height;
                                                   return { x, y };
                                               }

                                               /**
                                                * @param {Event} event
                                                */
                                               function deriveAction(event) {
                                                   const target = /** @type {HTMLElement} */ (event.target);
                                                   const hitALink = !!target.closest("a");
                                                   if (target.closest("dfn:not([data-cite]), .index-term")) {
                                                       return hitALink ? "none" : "show";
                                                   }
                                                   if (target.closest(".dfn-panel")) {
                                                       if (hitALink) {
                                                           return target.classList.contains("self-link") ? "hide" : "dock";
                                                       }
                                                       const panel = target.closest(".dfn-panel");
                                                       return panel.classList.contains("docked") ? "hide" : "none";
                                                   }
                                                   if (document.querySelector(".dfn-panel:not([hidden])")) {
                                                       return "hide";
                                                   }
                                                   return "none";
                                               }

                                               /**
                                                * @param {HTMLElement} dfn
                                                * @param {HTMLElement} panel
                                                * @param {{ x: number, y: number }} clickPosition
                                                */
                                               function displayPanel(dfn, panel, { x, y }) {
                                                   panel.hidden = false;
                                                   // distance (px) between edge of panel and the pointing triangle (caret)
                                                   const MARGIN = 20;

                                                   const dfnRects = dfn.getClientRects();
                                                   // Find the `top` offset when the `dfn` can be spread across multiple lines
                                                   let closestTop = 0;
                                                   let minDiff = Infinity;
                                                   for (const rect of dfnRects) {
                                                       const { top, bottom } = rect;
                                                       const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                                                       if (diffFromClickY < minDiff) {
                                                           minDiff = diffFromClickY;
                                                           closestTop = top;
                                                       }
                                                   }

                                                   const top = window.scrollY + closestTop + dfnRects[0].height;
                                                   const left = x - MARGIN;
                                                   panel.style.left = `${left}px`;
                                                   panel.style.top = `${top}px`;

                                                   // Find if the panel is flowing out of the window
                                                   const panelRect = panel.getBoundingClientRect();
                                                   const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                                                   if (panelRect.right > SCREEN_WIDTH) {
                                                       const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                                                       const newCaretOffset = left - newLeft;
                                                       panel.style.left = `${newLeft}px`;
                                                       /** @type {HTMLElement} */
                                                       const caret = panel.querySelector(".caret");
                                                       caret.style.left = `${newCaretOffset}px`;
                                                   }

                                                   // As it's a dialog, we trap focus.
                                                   // TODO: when <dialog> becomes a implemented, we should really
                                                   // use that.
                                                   trapFocus(panel, dfn);
                                               }

                                               /**
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function trapFocus(panel, dfn) {
                                                   /** @type NodeListOf<HTMLAnchorElement> elements */
                                                   const anchors = panel.querySelectorAll("a[href]");
                                                   // No need to trap focus
                                                   if (!anchors.length) return;

                                                   // Move focus to first anchor element
                                                   const first = anchors.item(0);
                                                   first.focus();

                                                   const trapListener = createTrapListener(anchors, panel, dfn);
                                                   panel.addEventListener("keydown", trapListener);

                                                   // Hiding the panel releases the trap
                                                   const mo = new MutationObserver(records => {
                                                       const [record] = records;
                                                       const target = /** @type HTMLElement */ (record.target);
                                                       if (target.hidden) {
                                                           panel.removeEventListener("keydown", trapListener);
                                                           mo.disconnect();
                                                       }
                                                   });
                                                   mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
                                               }

                                               /**
                                                *
                                                * @param {NodeListOf<HTMLAnchorElement>} anchors
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function createTrapListener(anchors, panel, dfn) {
                                                   const lastIndex = anchors.length - 1;
                                                   let currentIndex = 0;
                                                   return event => {
                                                       switch (event.key) {
                                                           // Hitting "Tab" traps us in a nice loop around elements.
                                                           case "Tab": {
                                                               event.preventDefault();
                                                               currentIndex += event.shiftKey ? -1 : +1;
                                                               if (currentIndex < 0) {
                                                                   currentIndex = lastIndex;
                                                               } else if (currentIndex > lastIndex) {
                                                                   currentIndex = 0;
                                                               }
                                                               anchors.item(currentIndex).focus();
                                                               break;
                                                           }

                                                           // Hitting "Enter" on an anchor releases the trap.
                                                           case "Enter":
                                                               hidePanel(panel);
                                                               break;

                                                           // Hitting "Escape" returns focus to dfn.
                                                           case "Escape":
                                                               hidePanel(panel);
                                                               dfn.focus();
                                                               return;
                                                       }
                                                   };
                                               }

                                               /** @param {HTMLElement} panel */
                                               function hidePanel(panel) {
                                                   if (!panel) return;
                                                   panel.hidden = true;
                                                   panel.classList.remove("docked");
                                               }
                                           })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <script async id="netlify-rum-container" src="https://www.designtokens.org/.netlify/scripts/rum"
        data-netlify-rum-site-id="665fa8be-0ec2-447d-837a-3a7f6e3f986c" data-netlify-deploy-branch="main"
        data-netlify-deploy-context="production"
        data-netlify-cwv-token="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzaXRlX2lkIjoiNjY1ZmE4YmUtMGVjMi00NDdkLTgzN2EtM2E3ZjZlM2Y5ODZjIiwiYWNjb3VudF9pZCI6IjU5MDkzNjc0YTcwMGM0NWE4YjM2MTM5MSIsImRlcGxveV9pZCI6IjY5MmEyMzE1NGU1YjRjMDAwODkxZDU2NSIsImlzc3VlciI6Im5mc2VydmVyIn0.E7_FJh2KeDBbAIbX3NW_96ncLYcJuQg0XYBjfaETDbU"></script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
</body>

</html>