<!doctype html>
<html lang="ja-JP">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>合成とブレンディング レベル1</title>
    <meta content="CRD" name="w3c-status">
    <meta content="Bikeshed version d5d58a306, updated Fri Jan 26 16:12:28 2024 -0800" name="generator">
    <link href="https://www.w3.org/TR/compositing-1/" rel="canonical">
    <meta content="c2c067e8ed0ba59e04de166bb8cc81eecf6fca02" name="revision">
    <style>
        a[data-link-type=element]::before,
        span[data-link-type=element]::before {
            content: '<';
        }

        a[data-link-type=element]::after,
        span[data-link-type=element]::after {
            content: '>';
        }
    </style>
    <style>
        /* Boilerplate: style-autolinks */
        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --selflink-text: black;
                --selflink-bg: silver;
                --selflink-hover-text: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-colors */
        /* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
        :root {
            color-scheme: light dark;

            --text: black;
            --bg: white;

            --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

            --logo-bg: #1a5e9a;
            --logo-active-bg: #c00;
            --logo-text: white;

            --tocnav-normal-text: #707070;
            --tocnav-normal-bg: var(--bg);
            --tocnav-hover-text: var(--tocnav-normal-text);
            --tocnav-hover-bg: #f8f8f8;
            --tocnav-active-text: #c00;
            --tocnav-active-bg: var(--tocnav-normal-bg);

            --tocsidebar-text: var(--text);
            --tocsidebar-bg: #f7f8f9;
            --tocsidebar-shadow: rgba(0, 0, 0, .1);
            --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

            --toclink-text: var(--text);
            --toclink-underline: #3980b5;
            --toclink-visited-text: var(--toclink-text);
            --toclink-visited-underline: #054572;

            --heading-text: #005a9c;

            --hr-text: var(--text);

            --algo-border: #def;

            --del-text: red;
            --del-bg: transparent;
            --ins-text: #080;
            --ins-bg: transparent;

            --a-normal-text: #034575;
            --a-normal-underline: #bbb;
            --a-visited-text: var(--a-normal-text);
            --a-visited-underline: #707070;
            --a-hover-bg: rgba(75%, 75%, 75%, .25);
            --a-active-text: #c00;
            --a-active-underline: #c00;

            --blockquote-border: silver;
            --blockquote-bg: transparent;
            --blockquote-text: currentcolor;

            --issue-border: #e05252;
            --issue-bg: #fbe9e9;
            --issue-text: var(--text);
            --issueheading-text: #831616;

            --example-border: #e0cb52;
            --example-bg: #fcfaee;
            --example-text: var(--text);
            --exampleheading-text: #574b0f;

            --note-border: #52e052;
            --note-bg: #e9fbe9;
            --note-text: var(--text);
            --noteheading-text: hsl(120, 70%, 30%);
            --notesummary-underline: silver;

            --assertion-border: #aaa;
            --assertion-bg: #eee;
            --assertion-text: black;

            --advisement-border: orange;
            --advisement-bg: #fec;
            --advisement-text: var(--text);
            --advisementheading-text: #b35f00;

            --warning-border: red;
            --warning-bg: hsla(40, 100%, 50%, 0.95);
            --warning-text: var(--text);

            --amendment-border: #330099;
            --amendment-bg: #F5F0FF;
            --amendment-text: var(--text);
            --amendmentheading-text: #220066;

            --def-border: #8ccbf2;
            --def-bg: #def;
            --def-text: var(--text);
            --defrow-border: #bbd7e9;

            --datacell-border: silver;

            --indexinfo-text: #707070;

            --indextable-hover-text: black;
            --indextable-hover-bg: #f7f8f9;

            --outdatedspec-bg: rgba(0, 0, 0, .5);
            --outdatedspec-text: black;
            --outdated-bg: maroon;
            --outdated-text: white;
            --outdated-shadow: red;

            --editedrec-bg: darkorange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --text: #ddd;
                --bg: black;

                --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

                --logo-bg: #1a5e9a;
                --logo-active-bg: #c00;
                --logo-text: white;

                --tocnav-normal-text: #999;
                --tocnav-normal-bg: var(--bg);
                --tocnav-hover-text: var(--tocnav-normal-text);
                --tocnav-hover-bg: #080808;
                --tocnav-active-text: #f44;
                --tocnav-active-bg: var(--tocnav-normal-bg);

                --tocsidebar-text: var(--text);
                --tocsidebar-bg: #080808;
                --tocsidebar-shadow: rgba(255, 255, 255, .1);
                --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

                --toclink-text: var(--text);
                --toclink-underline: #6af;
                --toclink-visited-text: var(--toclink-text);
                --toclink-visited-underline: #054572;

                --heading-text: #8af;

                --hr-text: var(--text);

                --algo-border: #456;

                --del-text: #f44;
                --del-bg: transparent;
                --ins-text: #4a4;
                --ins-bg: transparent;

                --a-normal-text: #6af;
                --a-normal-underline: #555;
                --a-visited-text: var(--a-normal-text);
                --a-visited-underline: var(--a-normal-underline);
                --a-hover-bg: rgba(25%, 25%, 25%, .2);
                --a-active-text: #f44;
                --a-active-underline: var(--a-active-text);

                --borderedblock-bg: rgba(255, 255, 255, .05);

                --blockquote-border: silver;
                --blockquote-bg: var(--borderedblock-bg);
                --blockquote-text: currentcolor;

                --issue-border: #e05252;
                --issue-bg: var(--borderedblock-bg);
                --issue-text: var(--text);
                --issueheading-text: hsl(0deg, 70%, 70%);

                --example-border: hsl(50deg, 90%, 60%);
                --example-bg: var(--borderedblock-bg);
                --example-text: var(--text);
                --exampleheading-text: hsl(50deg, 70%, 70%);

                --note-border: hsl(120deg, 100%, 35%);
                --note-bg: var(--borderedblock-bg);
                --note-text: var(--text);
                --noteheading-text: hsl(120, 70%, 70%);
                --notesummary-underline: silver;

                --assertion-border: #444;
                --assertion-bg: var(--borderedblock-bg);
                --assertion-text: var(--text);

                --advisement-border: orange;
                --advisement-bg: #222218;
                --advisement-text: var(--text);
                --advisementheading-text: #f84;

                --warning-border: red;
                --warning-bg: hsla(40, 100%, 20%, 0.95);
                --warning-text: var(--text);

                --amendment-border: #330099;
                --amendment-bg: #080010;
                --amendment-text: var(--text);
                --amendmentheading-text: #cc00ff;

                --def-border: #8ccbf2;
                --def-bg: #080818;
                --def-text: var(--text);
                --defrow-border: #136;

                --datacell-border: silver;

                --indexinfo-text: #aaa;

                --indextable-hover-text: var(--text);
                --indextable-hover-bg: #181818;

                --outdatedspec-bg: rgba(255, 255, 255, .5);
                --outdatedspec-text: black;
                --outdated-bg: maroon;
                --outdated-text: white;
                --outdated-shadow: red;

                --editedrec-bg: darkorange;
            }

            /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
            img {
                background: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-counters */
        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* Boilerplate: style-dfn-panel */
        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
            --dfnpanel-target-bg: #ffc;
            --dfnpanel-target-outline: orange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dfnpanel-bg: #222;
                --dfnpanel-text: var(--text);
                --dfnpanel-target-bg: #333;
                --dfnpanel-target-outline: silver;
            }
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel a:focus {
            outline: 5px auto Highlight;
            outline: 5px auto -webkit-focus-ring-color;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0 0 0 1em;
            list-style: none;
        }

        .dfn-panel li a {
            max-width: calc(300px - 1.5em - 1em);
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: 8px;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
            transition: left 1s ease-out, bottom 1s ease-out;
        }

        .dfn-panel .link-item:hover {
            text-decoration: underline;
        }

        .dfn-panel .link-item .copy-icon {
            opacity: 0;
        }

        .dfn-panel .link-item:hover .copy-icon,
        .dfn-panel .link-item .copy-icon:focus {
            opacity: 1;
        }

        .dfn-panel .copy-icon {
            display: inline-block;
            margin-right: 0.5em;
            width: 0.85em;
            height: 1em;
            border-radius: 3px;
            background-color: #ccc;
            cursor: pointer;
        }

        .dfn-panel .copy-icon .icon {
            width: 100%;
            height: 100%;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .dfn-panel .copy-icon .icon::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 1px solid black;
            background-color: #ccc;
            opacity: 0.25;
            transform: translate(3px, -3px);
        }

        .dfn-panel .copy-icon:active .icon::before {
            opacity: 1;
        }

        .dfn-paneled[role="button"] {
            cursor: help;
        }

        .highlighted {
            animation: target-fade 3s;
        }

        @keyframes target-fade {
            from {
                background-color: var(--dfnpanel-target-bg);
                outline: 5px solid var(--dfnpanel-target-outline);
            }

            to {
                color: var(--a-normal-text);
                background-color: transparent;
                outline: transparent;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-issues */
        a[href].issue-return {
            float: right;
            float: inline-end;
            color: var(--issueheading-text);
            font-weight: bold;
            text-decoration: none;
        }
    </style>
    <style>
        /* Boilerplate: style-md-lists */
        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* Boilerplate: style-ref-hints */
        :root {
            --ref-hint-bg: #ddd;
            --ref-hint-text: var(--text);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --ref-hint-bg: #222;
                --ref-hint-text: var(--text);
            }
        }

        .ref-hint {
            display: inline-block;
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.5em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--ref-hint-bg);
            color: var(--ref-hint-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .ref-hint * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .ref-hint ul {
            padding: 0 0 0 1em;
            list-style: none;
        }
    </style>
    <style>
        /* Boilerplate: style-selflinks */
        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        .example>a.self-link,
        .note>a.self-link,
        .issue>a.self-link {
            /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
            left: auto;
            right: 0;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* Boilerplate: style-wpt */
        :root {
            --wpt-border: hsl(0, 0%, 60%);
            --wpt-bg: hsl(0, 0%, 95%);
            --wpt-text: var(--text);
            --wptheading-text: hsl(0, 0%, 30%);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --wpt-border: hsl(0, 0%, 30%);
                --wpt-bg: var(--borderedblock-bg);
                --wpt-text: var(--text);
                --wptheading-text: hsl(0, 0%, 60%);
            }
        }

        .wpt-tests-block {
            list-style: none;
            border-left: .5em solid var(--wpt-border);
            background: var(--wpt-bg);
            color: var(--wpt-text);
            margin: 1em auto;
            padding: .5em;
        }

        .wpt-tests-block summary {
            color: var(--wptheading-text);
            font-weight: normal;
            text-transform: uppercase;
        }

        .wpt-tests-block summary::marker {
            color: var(--wpt-border);
        }

        .wpt-tests-block summary:hover::marker {
            color: var(--wpt-text);
        }

        /*
   The only content  of a wpt test block in its closed state is the <summary>,
   which contains the word TESTS,
   and that is absolutely positioned.
   In that closed state, wpt test blocks are styled
   to have a top margin whose height is exactly equal
   to the height of the absolutely positioned <summary>,
   and no other background/padding/margin/border.
   The wpt test block elements will therefore allow the maring
   of the previous/next block elements
   to collapse through them;
   if this combined margin would be larger than its own top margin,
   it stays as is,
   and therefore the pre-existing vertical rhythm of the document is undisturbed.
   If that combined margin would be smaller, it is grown to that size.
   This means that the wpt test block ensures
   that there's always enough vertical space to insert the summary,
   without adding more than is needed.
*/
        .wpt-tests-block:not([open]) {
            padding: 0;
            border: none;
            background: none;
            font-size: 0.75em;
            line-height: 1;
            position: relative;
            margin: 1em 0 0;
        }

        .wpt-tests-block:not([open]) summary {
            position: absolute;
            right: 0;
            bottom: 0;
        }

        /*
   It is possible that both the last child of a block element
   and the block element itself
   would be annotated with a <wpt> block each.
   If the block element has a padding or a border,
   that's fine, but otherwise
   the bottom margin of the block and of its last child would collapse
   and both <wpt> elements would overlap, being both placed there.
   To avoid that, add 1px of padding to the <wpt> element annotating the last child
   to prevent the bottom margin of the block and of its last child from collapsing
   (and as much negative margin,
   as wel only want to prevent margin collapsing,
   but are not trying to actually take more space).
*/
        .wpt-tests-block:not([open]):last-child {
            padding-bottom: 1px;
            margin-bottom: -1px;
        }

        /*
   Exception to the previous rule:
   don't do that in non-last list items,
   because it's not necessary,
   and would therefore consume more space than strictly needed.
   Lists must have list items as children, not <wpt> elements,
   so a <wpt> element cannot be a sibling of a list item,
   and the collision that the previous rule avoids cannot happen.
*/
        li:not(:last-child)>.wpt-tests-block:not([open]):last-child,
        dd:not(:last-child)>.wpt-tests-block:not([open]):last-child {
            padding-bottom: 0;
            margin-bottom: 0;
        }

        .wpt-tests-block:not([open]):not(:hover) {
            opacity: 0.5;
        }

        .wpt-tests-list {
            list-style: none;
            display: grid;
            margin: 0;
            padding: 0;
            grid-template-columns: 1fr max-content auto auto;
            grid-column-gap: .5em;
        }

        .wpt-tests-block hr:last-child {
            display: none;
        }

        .wpt-test {
            display: contents;
        }

        .wpt-test>a {
            text-decoration: underline;
            border: none;
        }

        .wpt-test>.wpt-name {
            grid-column: 1;
        }

        .wpt-test>.wpt-results {
            grid-column: 2;
        }

        .wpt-test>.wpt-live {
            grid-column: 3;
        }

        .wpt-test>.wpt-source {
            grid-column: 4;
        }

        .wpt-test>.wpt-results {
            display: flex;
            gap: .1em;
        }

        .wpt-test .wpt-result {
            display: inline-block;
            height: 1em;
            width: 1em;
            border-radius: 50%;
            position: relative;
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-CRD" rel="stylesheet">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
        <h1>合成とブレンディング レベル1</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#CRD">W3C 勧告候補ドラフト</a>、<time class="dt-updated"
                datetime="2024-03-21">2024年3月21日</time></p>
        <details open>
            <summary>この文書の詳細情報</summary>
            <div data-fill-with="spec-metadata">
                <dl>
                    <dt>このバージョン:
                    <dd><a class="u-url"
                            href="https://www.w3.org/TR/2024/CRD-compositing-1-20240321/">https://www.w3.org/TR/2024/CRD-compositing-1-20240321/</a>
                    <dt>最新の公開バージョン:
                    <dd><a href="https://www.w3.org/TR/compositing-1/">https://www.w3.org/TR/compositing-1/</a>
                    <dt>編集者草案:
                    <dd><a href="https://drafts.fxtf.org/compositing-1/">https://drafts.fxtf.org/compositing-1/</a>
                    <dt>以前のバージョン:
                    <dd><a href="https://www.w3.org/TR/2015/CR-compositing-1-20150113/"
                            rel="prev">https://www.w3.org/TR/2015/CR-compositing-1-20150113/</a>
                    <dt>履歴:
                    <dd><a class="u-url"
                            href="https://www.w3.org/standards/history/compositing-1/">https://www.w3.org/standards/history/compositing-1/</a>
                    <dt>実装レポート:
                    <dd><a href="https://wpt.fyi/results/css/compositing">https://wpt.fyi/results/css/compositing</a>
                    <dt>フィードバック:
                    <dd><a href="https://github.com/w3c/csswg-drafts/labels/compositing-1">CSSWG イシューレポジトリ</a>
                    <dd><a href="https://github.com/w3c/fxtf-drafts/labels/compositing-1">GitHub</a>
                    <dd>https://github.com/w3c/fxtf-drafts/labels/compositing-1
                    <dt class="editor">編集者:
                    <dd class="editor p-author h-card vcard" data-editor-id="90243"><a class="p-name fn u-email email"
                            href="mailto:chrishtr@chromium.org">Chris Harrelson</a> (<span
                            class="p-org org">Google</span>)
                    <dt class="editor">以前の編集者:
                    <dd class="editor p-author h-card vcard" data-editor-id="106988"><span class="p-name fn">Rik
                            Cabanier</span> (<span class="p-org org">当時 Adobe Systems Inc.</span>)
                    <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email"
                            href="mailto:Nikos.Andronikos@cisra.canon.com.au">Nikos Andronikos</a> (<span
                            class="p-org org">Canon Information Systems Research Australia</span>)
                        <!-- <dt>Suggest an Edit for this Spec:
      <dd><a href="https://github.com/w3c/csswg-drafts/blob/main/compositing-1/Overview.bs">GitHub Editor</a> -->
                    <dt>テストスイート:
                    <dd class="wpt-overview"><a
                            href="https://wpt.fyi/results/css/compositing/">https://wpt.fyi/results/css/compositing/</a>
                </dl>
            </div>
        </details>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> ©
            2024 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr
                title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a
                href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/copyright/software-license/" rel="license"
                title="W3C Software and Document License">permissive document license</a> rules apply. </p>
        <hr title="Separator for header">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">概要</span></h2>
        <p>合成は、異なる要素の形状がどのように一つの画像にまとめられるかを説明します。合成には様々な手法があります。従来のSVGおよびCSSでは、<a
                href="https://www.w3.org/TR/SVG11/masking.html#SimpleAlphaBlending">単純アルファ合成</a>が使用されていました。このモデルでは、各要素が自身のバッファに描画され、その後
            <a data-link-type="dfn" href="#backdrop" id="ref-for-backdrop">バックドロップ</a> とPorter Duffの <span
                class="css">source-over</span> 演算子を使って合成されます。本仕様では、単純アルファ合成モデルを拡張し、以下の機能を提供する新しい合成モデルを定義します：
        </p>
        <ul>
            <li>追加のPorter Duff合成演算子
            <li>図形が重なる部分で色の混合方法を制御できる高度なブレンディングモード
            <li>合成グループ
        </ul>
        さらに、本仕様ではブレンディングとグループアイソレーション用のCSSプロパティ、<code
            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#dom-context-2d-globalcompositeoperation" id="ref-for-dom-context-2d-globalcompositeoperation">globalCompositeOperation</a></code>
        属性のプロパティについても定義します。<a href="https://www.w3.org/TR/CSS/">CSS</a>は、構造化文書
        （HTMLやXMLなど）
        の画面表示、印刷などのレンダリング方法を記述する言語です。
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">この文書の位置付け</span></h2>
    <div data-fill-with="status">
        <p><em>このセクションは、本書が公開された時点での文書の位置付けを説明します。
                現在のW3C出版物一覧と本技術レポートの最新版は、<a href="https://www.w3.org/TR/">W3C技術レポートインデックス https://www.w3.org/TR/</a>
                にてご覧いただけます。</em> </p>
        <p> この文書は <a href="https://www.w3.org/groups/wg/css">CSS作業部会</a> により <strong>勧告候補ドラフト</strong> として <a
                href="https://www.w3.org/2023/Process-20231103/#recs-and-notes">勧告トラック</a>を用いて公開されました。
            勧告候補ドラフトとしての公開は、<abbr title="World Wide Web Consortium">W3C</abbr>およびそのメンバーによる支持を示すものではありません。
            勧告候補ドラフトは、作業部会が今後の勧告候補スナップショットに含める予定の、以前の勧告候補からの変更点を統合したものです。 </p>
        <p> この文書はドラフトであり、今後随時更新、置換、または他の文書によって廃止される可能性があります。
            この文書を進行中の作業以外のものとして引用するのは適切ではありません。 </p>
        <p>ご意見・ご要望は、<a href="https://github.com/w3c/csswg-drafts/issues">GitHubでissueを提出</a>（推奨）してください。
            件名に「compositing」を含めて、例：「[compositing] <i>…コメントの概要…</i>」のようにしてください。
            すべてのissueやコメントは<a href="https://lists.w3.org/Archives/Public/public-css-archive/">アーカイブ</a>されています。
            また、（<a href="https://lists.w3.org/Archives/Public/www-style/">アーカイブ</a>）パブリックメーリングリスト <a
                href="mailto:www-style@w3.org?Subject=%5Bcompositing%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>
            に送ることもできます。
        </p>
        <p>この文書は <a href="https://www.w3.org/2023/Process-20231103/" id="w3c_process_revision">2023年11月3日 W3Cプロセス文書</a>
            に準拠しています。 </p>
        <p>この文書は <a href="https://www.w3.org/Consortium/Patent-Policy-20200915/">W3C特許ポリシー</a>の下で運営されているグループによって作成されました。
            W3Cは、グループの成果物に関連して提出された特許開示の<a href="https://www.w3.org/groups/wg/css/ipr"
                rel="disclosure">公開リスト</a>を管理しています。
            そのページには特許開示の手順も記載されています。
            個人が特許について実際の知識を有し、その特許に<a
                href="https://www.w3.org/Consortium/Patent-Policy-20200915/#def-essential">必須クレーム</a>が含まれると考える場合、
            <a
                href="https://www.w3.org/Consortium/Patent-Policy-20200915/#sec-Disclosure">W3C特許ポリシー第6節</a>に従い情報を開示する必要があります。
        </p>
        <p></p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目次</h2>
        <ol class="toc" role="directory">
            <li><a href="#introduction"><span class="secno">1</span> <span class="content">導入</span></a>
            <li>
                <a href="#reading-this-document"><span class="secno">2</span> <span class="content">この文書の読み方</span></a>
                <ol class="toc">
                    <li><a href="#module-interactions"><span class="secno">2.1</span> <span
                                class="content">モジュール間の相互作用</span></a>
                    <li><a href="#values"><span class="secno">2.2</span> <span class="content">値</span></a>
                </ol>
            <li>
                <a href="#csscompositingandblending"><span class="secno">3</span> <span class="content">CSS
                        におけるブレンディングの指定</span></a>
                <ol class="toc">
                    <li><a href="#compositingandblendingorder"><span class="secno">3.1</span> <span
                                class="content">グラフィカル操作の順序</span></a>
                    <li><a href="#csscompositingrules_CSS"><span class="secno">3.2</span> <span class="content">HTML
                                に特有の動作</span></a>
                    <li><a href="#csscompositingrules_SVG"><span class="secno">3.3</span> <span class="content">SVG
                                に特有の動作</span></a>
                    <li>
                        <a href="#csskeywords"><span class="secno">3.4</span> <span class="content">CSS プロパティ</span></a>
                        <ol class="toc">
                            <li><a href="#mix-blend-mode"><span class="secno">3.4.1</span> <span class="content"><span
                                            class="property">mix-blend-mode</span> プロパティ</span></a>
                            <li><a href="#isolation"><span class="secno">3.4.2</span> <span class="content"><span
                                            class="property">isolation</span> プロパティ</span></a>
                            <li><a href="#background-blend-mode"><span class="secno">3.4.3</span> <span
                                        class="content"><span class="property">background-blend-mode</span>
                                        プロパティ</span></a>
                        </ol>
                </ol>
            <li><a href="#canvascompositingandblending"><span class="secno">4</span> <span class="content">Canvas 2D
                        における合成とブレンディングの指定</span></a>
            <li>
                <a href="#whatiscompositing"><span class="secno">5</span> <span class="content">合成の概要</span></a>
                <ol class="toc">
                    <li>
                        <a href="#simplealphacompositing"><span class="secno">5.1</span> <span
                                class="content">単純アルファ合成</span></a>
                        <ol class="toc">
                            <li><a href="#simplealphacompositingexamples"><span class="secno">5.1.1</span> <span
                                        class="content">単純アルファ合成の例</span></a>
                        </ol>
                </ol>
            <li><a href="#generalformula"><span class="secno">6</span> <span class="content">合成とブレンディングの一般式</span></a>
            <li>
                <a href="#backdropCalc"><span class="secno">7</span> <span class="content">バックドロップの計算</span></a>
                <ol class="toc">
                    <li><a href="#backdropexamples"><span class="secno">7.1</span> <span
                                class="content">バックドロップ計算の例</span></a>
                </ol>
            <li>
                <a href="#groups"><span class="secno">8</span> <span class="content">合成グループ</span></a>
                <ol class="toc">
                    <li><a href="#groupinvariance"><span class="secno">8.1</span> <span
                                class="content">グループ不変性</span></a>
                    <li><a href="#isolatedgroups"><span class="secno">8.2</span> <span class="content">isolatedグループ</span></a>
                    <li><a href="#pagebackdrop"><span class="secno">8.3</span> <span
                                class="content">ルート要素グループ</span></a>
                    <li><a href="#rootgroup"><span class="secno">8.4</span> <span class="content">ルートグループ</span></a>
                </ol>
            <li>
                <a href="#advancedcompositing"><span class="secno">9</span> <span class="content">高度な合成機能</span></a>
                <ol class="toc">
                    <li>
                        <a href="#porterduffcompositingoperators"><span class="secno">9.1</span> <span
                                class="content">Porter Duff 合成演算子</span></a>
                        <ol class="toc">
                            <li><a href="#porterduffcompositingoperators_clear"><span class="secno">9.1.1</span> <span
                                        class="content">クリア</span></a>
                            <li><a href="#porterduffcompositingoperators_src"><span class="secno">9.1.2</span> <span
                                        class="content">コピー</span></a>
                            <li><a href="#porterduffcompositingoperators_dst"><span class="secno">9.1.3</span> <span
                                        class="content">デスティネーション</span></a>
                            <li><a href="#porterduffcompositingoperators_srcover"><span class="secno">9.1.4</span> <span
                                        class="content">ソースオーバー</span></a>
                            <li><a href="#porterduffcompositingoperators_dstover"><span class="secno">9.1.5</span> <span
                                        class="content">デスティネーションオーバー</span></a>
                            <li><a href="#porterduffcompositingoperators_srcin"><span class="secno">9.1.6</span> <span
                                        class="content">ソースイン</span></a>
                            <li><a href="#porterduffcompositingoperators_dstin"><span class="secno">9.1.7</span> <span
                                        class="content">デスティネーションイン</span></a>
                            <li><a href="#porterduffcompositingoperators_srcout"><span class="secno">9.1.8</span> <span
                                        class="content">ソースアウト</span></a>
                            <li><a href="#porterduffcompositingoperators_dstout"><span class="secno">9.1.9</span> <span
                                        class="content">デスティネーションアウト</span></a>
                            <li><a href="#porterduffcompositingoperators_srcatop"><span class="secno">9.1.10</span>
                                    <span class="content">ソースアトップ</span></a>
                            <li><a href="#porterduffcompositingoperators_dstatop"><span class="secno">9.1.11</span>
                                    <span class="content">デスティネーションアトップ</span></a>
                            <li><a href="#porterduffcompositingoperators_xor"><span class="secno">9.1.12</span> <span
                                        class="content">XOR</span></a>
                            <li><a href="#porterduffcompositingoperators_plus"><span class="secno">9.1.13</span> <span
                                        class="content">ライター</span></a>
                        </ol>
                    <li><a href="#groupcompositing"><span class="secno">9.2</span> <span class="content">Porter Duff
                                モードによるグループ合成動作</span></a>
                </ol>
            <li>
                <a href="#blending"><span class="secno">10</span> <span class="content">ブレンディング</span></a>
                <ol class="toc">
                    <li>
                        <a href="#blendingseparable"><span class="secno">10.1</span> <span
                                class="content">分離型ブレンドモード</span></a>
                        <ol class="toc">
                            <li><a href="#blendingnormal"><span class="secno">10.1.1</span> <span
                                        class="content"><span>normal</span> ブレンドモード</span></a>
                            <li><a href="#blendingmultiply"><span class="secno">10.1.2</span> <span
                                        class="content"><span>multiply</span> ブレンドモード</span></a>
                            <li><a href="#blendingscreen"><span class="secno">10.1.3</span> <span
                                        class="content"><span>screen</span> ブレンドモード</span></a>
                            <li><a href="#blendingoverlay"><span class="secno">10.1.4</span> <span
                                        class="content"><span>overlay</span> ブレンドモード</span></a>
                            <li><a href="#blendingdarken"><span class="secno">10.1.5</span> <span
                                        class="content"><span>darken</span> ブレンドモード</span></a>
                            <li><a href="#blendinglighten"><span class="secno">10.1.6</span> <span
                                        class="content"><span>lighten</span> ブレンドモード</span></a>
                            <li><a href="#blendingcolordodge"><span class="secno">10.1.7</span> <span
                                        class="content"><span>color-dodge</span> ブレンドモード</span></a>
                            <li><a href="#blendingcolorburn"><span class="secno">10.1.8</span> <span
                                        class="content"><span>color-burn</span> ブレンドモード</span></a>
                            <li><a href="#blendinghardlight"><span class="secno">10.1.9</span> <span
                                        class="content"><span>hard-light</span> ブレンドモード</span></a>
                            <li><a href="#blendingsoftlight"><span class="secno">10.1.10</span> <span
                                        class="content"><span>soft-light</span> ブレンドモード</span></a>
                            <li><a href="#blendingdifference"><span class="secno">10.1.11</span> <span
                                        class="content"><span>difference</span> ブレンドモード</span></a>
                            <li><a href="#blendingexclusion"><span class="secno">10.1.12</span> <span
                                        class="content"><span>exclusion</span> ブレンドモード</span></a>
                        </ol>
                    <li>
                        <a href="#blendingnonseparable"><span class="secno">10.2</span> <span
                                class="content">非分離型ブレンドモード</span></a>
                        <ol class="toc">
                            <li><a href="#blendinghue"><span class="secno">10.2.1</span> <span
                                        class="content"><span>hue</span> ブレンドモード</span></a>
                            <li><a href="#blendingsaturation"><span class="secno">10.2.2</span> <span
                                        class="content"><span>saturation</span> ブレンドモード</span></a>
                            <li><a href="#blendingcolor"><span class="secno">10.2.3</span> <span
                                        class="content"><span>color</span> ブレンドモード</span></a>
                            <li><a href="#blendingluminosity"><span class="secno">10.2.4</span> <span
                                        class="content"><span>luminosity</span> ブレンドモード</span></a>
                        </ol>
                    <li><a href="#isolationblending"><span class="secno">10.3</span> <span
                                class="content">グループアイソレーションによるブレンディングへの影響</span></a>
                </ol>
            <li><a href="#privacy"><span class="secno"></span> <span class="content">プライバシーに関する考慮事項</span></a>
            <li><a href="#security"><span class="secno"></span> <span class="content">セキュリティに関する考慮事項</span></a>
            <li><a href="#changes"><span class="secno"></span> <span class="content">変更履歴</span></a>
            <li>
                <a href="#w3c-conformance"><span class="secno"></span> <span class="content">適合性</span></a>
                <ol class="toc">
                    <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">文書の慣例</span></a>
                    <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span
                                class="content">適合クラス</span></a>
                    <li>
                        <a href="#w3c-partial"><span class="secno"></span> <span class="content">部分的な実装</span></a>
                        <ol class="toc">
                            <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span
                                        class="content">不安定および独自機能の実装</span></a>
                        </ol>
                    <li><a href="#w3c-testing"><span class="secno"></span> <span class="content">非実験的な実装</span></a>
                    <li><a href="#w3c-cr-exit-criteria"><span class="secno"></span> <span class="content">CR
                                終了基準</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本仕様で定義された用語</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">参照によって定義されている用語</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">規範的参考文献</span></a>
                    <li><a href="#informative"><span class="secno"></span> <span class="content">参考的文献</span></a>
                </ol>
            <li><a href="#property-index"><span class="secno"></span> <span class="content">プロパティ索引</span></a>
        </ol>
    </nav>
    <main>
        <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span
                class="content">導入</span><a class="self-link" href="#introduction"></a></h2>
        <p><em>この小節は規範的ではありません。</em><br> 本書の前半では、CSSで合成を制御するために使用されるプロパティについて説明します。
            後半では、Porter Duff合成とブレンディングのアルゴリズムについて説明します。</p>
        <h2 class="heading settled" data-level="2" id="reading-this-document"><span class="secno">2. </span><span
                class="content">この文書の読み方</span><a class="self-link" href="#reading-this-document"></a></h2>
        <p>本書の各セクションは、特に指定がない限り規範的です。</p>
        <h3 class="heading settled" data-level="2.1" id="module-interactions"><span class="secno">2.1. </span><span
                class="content">モジュール間の相互作用</span><a class="self-link" href="#module-interactions"></a></h3>
        <p>この仕様は、これらのプロパティが適用された要素の視覚的レンダリングに影響するCSSプロパティ群を定義します。これらの効果は、要素が<a
                href="https://www.w3.org/TR/CSS2/visuren.html" title="Visual formatting model">視覚フォーマットモデル</a>（<a
                data-link-type="biblio" href="#biblio-css21"
                title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS21]</a>）に従ってサイズや配置が決定された後に適用されます。これらのプロパティの値によっては、<a
                href="https://www.w3.org/TR/CSS2/visuren.html#containing-block"
                title="Visual formatting model">包含ブロック</a>や<a
                href="https://www.w3.org/tr/css21/visuren.html#x43">積み重ねコンテキスト</a>が生成されることがあります。</p>
        <p><a class="property css" data-link-type="property" href="#propdef-background-blend-mode"
                id="ref-for-propdef-background-blend-mode">background-blend-mode</a>プロパティは、<a
                href="https://www.w3.org/TR/css3-background/#placement"
                title="Backgrounds and Borders">CSS背景と境界</a>モジュール<a data-link-type="biblio" href="#biblio-css3bg"
                title="CSS Backgrounds and Borders Module Level 3">[CSS3BG]</a>で定義されたプロパティも拡張します。</p>
        <p>この仕様はまた、<a href="https://www.w3.org/TR/2003/REC-SVG11-20030114/masking.html#SimpleAlphaBlending"
                title="simple alpha blending">SVG 1.1 第14.2節 単純アルファ合成</a>（<a data-link-type="biblio"
                href="#biblio-svg11" title="Scalable Vector Graphics (SVG) 1.1 (Second Edition)">[SVG11]</a>）と、<a
                href="https://www.w3.org/TR/css-color-4/#alpha" title="simple alpha compositing">CSS Color Module Level
                4の単純アルファ合成</a>（<a data-link-type="biblio" href="#biblio-css-color-4"
                title="CSS Color Module Level 4">[CSS-COLOR-4]</a>）で指定されたルールも強化します。</p>
        <p>このモジュールはまた、<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#dom-context-2d-globalcompositeoperation" id="ref-for-dom-context-2d-globalcompositeoperation①">globalCompositeOperation</a></code>
            属性も拡張します。</p>
        <h3 class="heading settled" data-level="2.2" id="values"><span class="secno">2.2. </span><span
                class="content">値</span><a class="self-link" href="#values"></a></h3>
        <p>この仕様は、<a href="https://www.w3.org/TR/CSS21/about.html#property-defs">CSSプロパティ定義の慣例</a>（<a
                data-link-type="biblio" href="#biblio-css21"
                title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS21]</a>）に従います。本仕様で定義されていない値型は、CSS
            Level 2 Revision 1（<span
                title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS21]</span>）で定義されています。他のCSSモジュールは、これらの値型の定義を拡張することがあります。例えば、<a
                data-link-type="biblio" href="#biblio-css-color-4"
                title="CSS Color Module Level 4">[CSS-COLOR-4]</a>は、このモジュールと組み合わせることで、本仕様で使用される&lt;color>値型の定義を拡張します。
        </p>
        <p>プロパティ定義に記載された値に加えて、本仕様で定義される全てのプロパティは<a
                href="https://www.w3.org/TR/CSS21/cascade.html#value-def-inherit">inherit</a>キーワードも値として受け付けます。可読性のため、明示的には繰り返し記載していません。
        </p>
        <h2 class="heading settled" data-level="3" id="csscompositingandblending"><span class="secno">3. </span><span
                class="content">CSSにおけるブレンディングの指定</span><a class="self-link" href="#csscompositingandblending"></a></h2>
        <h3 class="heading settled" data-level="3.1" id="compositingandblendingorder"><span class="secno">3.1.
            </span><span class="content">グラフィカル操作の順序</span><a class="self-link" href="#compositingandblendingorder"></a>
        </h3>
        <p>合成モデルは、<a href="https://www.w3.org/TR/SVG11/render.html#Introduction">SVG合成</a>モデル（<a data-link-type="biblio"
                href="#biblio-svg11"
                title="Scalable Vector Graphics (SVG) 1.1 (Second Edition)">[SVG11]</a>）に従う必要があります：最初にフィルター効果が適用され、その後クリッピング、マスキング、ブレンディング、合成が適用されます。
        </p>
        <h3 class="heading settled" data-level="3.2" id="csscompositingrules_CSS"><span class="secno">3.2. </span><span
                class="content">HTMLに特有の動作</span><a class="self-link" href="#csscompositingrules_CSS"></a></h3>
        <p>CSSで積み重ねコンテキストを作成するすべてのものは、<a href="#isolatedgroups">‘isolated’グループ</a>として扱われる必要があります。HTML要素自体はグループを作成しません。
        </p>
        <p>ブレンディングが適用された要素は、その要素が属する<a href="https://www.w3.org/tr/css21/visuren.html#x43">積み重ねコンテキスト</a>（<a
                data-link-type="biblio" href="#biblio-css21"
                title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS21]</a>）の下層コンテンツ全体とブレンドする必要があります。
        </p>
        <p>HTML文書のルート要素は<a href="https://dom.spec.whatwg.org/#document-element">document element</a>です。</p>
        <h3 class="heading settled" data-level="3.3" id="csscompositingrules_SVG"><span class="secno">3.3. </span><span
                class="content">SVGに特有の動作</span><a class="self-link" href="#csscompositingrules_SVG"></a>
        </h3>
        <p>デフォルトでは、すべての要素は<a href="#isolatedgroups">非isolatedグループ</a>を作成する必要があります。</p>
        <p>ただし、SVGの特定の操作では<a href="#isolatedgroups">isolatedグループ</a>が作成されます。以下の機能のいずれかが使用された場合、グループはisolatedになる必要があります：
        </p>
        <ul>
            <li>opacity（不透明度）
            <li>filters（フィルター）
            <li>3D transforms（2D transformsはisolatedを引き起こしてはならない）
            <li>blending（ブレンディング）
            <li>masking（マスキング）
        </ul>
        <p>SVGのルート要素は<a href="https://www.w3.org/TR/SVG11/struct.html#NewDocument">SVG要素</a>です。</p>
        <h3 class="heading settled" data-level="3.4" id="csskeywords"><span class="secno">3.4. </span><span
                class="content">CSSプロパティ</span><a class="self-link" href="#csskeywords"></a></h3>
        <h4 class="heading settled" data-level="3.4.1" id="mix-blend-mode"><span class="secno">3.4.1. </span><span
                class="content"><a class="property css" data-link-type="property" href="#propdef-mix-blend-mode"
                    id="ref-for-propdef-mix-blend-mode">mix-blend-mode</a>プロパティ</span><a class="self-link"
                href="#mix-blend-mode"></a></h4>
        <p>ブレンドモードは、色とバックドロップを混合するために使用される式を定義します。
            この動作は<a href="#blending">ブレンディング</a>でより詳しく説明されています。</p>
        <table class="def propdef" data-link-for-hint="mix-blend-mode">
            <tbody>
                <tr>
                    <th>名前:
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-mix-blend-mode">mix-blend-mode</dfn>
                <tr class="value">
                    <th><a href="https://www.w3.org/TR/css-values/#value-defs">値:</a>
                    <td class="prod"><a class="production css" data-link-type="type" href="#ltblendmodegt"
                            id="ref-for-ltblendmodegt">&lt;blend-mode></a>
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">初期値:</a>
                    <td>normal
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">適用対象:</a>
                    <td>すべての要素。SVGでは、<a href="https://www.w3.org/TR/SVG11/intro.html#TermContainerElement">コンテナ要素</a>、
                        <a href="https://www.w3.org/TR/SVG11/intro.html#TermGraphicsElement">グラフィックス要素</a>、
                        <a
                            href="https://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsReferencingElement">グラフィックス参照要素</a>に適用されます。<a
                            data-link-type="biblio" href="#biblio-svg11"
                            title="Scalable Vector Graphics (SVG) 1.1 (Second Edition)">[SVG11]</a>
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">継承:</a>
                    <td>no
                <tr>
                    <th><a href="https://www.w3.org/TR/css-values/#percentages">パーセンテージ:</a>
                    <td>N/A
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#computed">算出値:</a>
                    <td>指定通り
                <tr>
                    <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">正規順序:</a>
                    <td>文法通り
                <tr>
                    <th><a href="https://www.w3.org/TR/web-animations/#animation-type">アニメーション型:</a>
                    <td>離散
                <tr>
                    <th>メディア:
                    <td>視覚
        </table>
        <p><a class="production css" data-link-type="type" href="#ltblendmodegt"
                id="ref-for-ltblendmodegt①">&lt;blend-mode></a>プロパティの構文は以下の通りです：</p>
        <pre class="blendmode prod"><dfn class="dfn-paneled" data-dfn-type="type" data-export id="ltblendmodegt">&lt;blend-mode></dfn> =
  <a data-link-type="value" href="#valdef-blend-mode-normal" id="ref-for-valdef-blend-mode-normal">normal</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one">|</a>
  <a data-link-type="value" href="#valdef-blend-mode-darken" id="ref-for-valdef-blend-mode-darken">darken</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one①">|</a> <a data-link-type="value" href="#valdef-blend-mode-multiply" id="ref-for-valdef-blend-mode-multiply">multiply</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one②">|</a> <a data-link-type="value" href="#valdef-blend-mode-color-burn" id="ref-for-valdef-blend-mode-color-burn">color-burn</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one③">|</a>
  <a data-link-type="value" href="#valdef-blend-mode-lighten" id="ref-for-valdef-blend-mode-lighten">lighten</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one④">|</a> <a data-link-type="value" href="#valdef-blend-mode-screen" id="ref-for-valdef-blend-mode-screen">screen</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one⑤">|</a> <a data-link-type="value" href="#valdef-blend-mode-color-dodge" id="ref-for-valdef-blend-mode-color-dodge">color-dodge</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one⑥">|</a>
  <a data-link-type="value" href="#valdef-blend-mode-overlay" id="ref-for-valdef-blend-mode-overlay">overlay</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one⑦">|</a> <a data-link-type="value" href="#valdef-blend-mode-soft-light" id="ref-for-valdef-blend-mode-soft-light">soft-light</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one⑧">|</a> <a data-link-type="value" href="#valdef-blend-mode-hard-light" id="ref-for-valdef-blend-mode-hard-light">hard-light</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one⑨">|</a>
  <a data-link-type="value" href="#valdef-blend-mode-difference" id="ref-for-valdef-blend-mode-difference">difference</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one①⓪">|</a> <a data-link-type="value" href="#valdef-blend-mode-exclusion" id="ref-for-valdef-blend-mode-exclusion">exclusion</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one①①">|</a>
  <a data-link-type="value" href="#valdef-blend-mode-hue" id="ref-for-valdef-blend-mode-hue">hue</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one①②">|</a> <a data-link-type="value" href="#valdef-blend-mode-saturation" id="ref-for-valdef-blend-mode-saturation">saturation</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one①③">|</a> <a data-link-type="value" href="#valdef-blend-mode-color" id="ref-for-valdef-blend-mode-color">color</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one①④">|</a> <a data-link-type="value" href="#valdef-blend-mode-luminosity" id="ref-for-valdef-blend-mode-luminosity">luminosity</a>
</pre>
        <p><a class="css" data-link-type="value" href="#valdef-blend-mode-normal"
                id="ref-for-valdef-blend-mode-normal①">normal</a>以外のblendmodeを要素に適用すると、新たな<a
                href="https://www.w3.org/tr/css21/visuren.html#x43">積み重ねコンテキスト</a>（<a data-link-type="biblio"
                href="#biblio-css21"
                title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS21]</a>）が確立される必要があります。このグループはその後、要素を含む<a
                href="https://www.w3.org/tr/css21/visuren.html#x43">積み重ねコンテキスト</a>とブレンド・合成されます。</p>
        <details class="wpt-tests-block" dir="ltr" lang="ja" open>
            <summary>テスト</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><span class="wpt-name">Blending_in_a_group_with_filter.html（視覚テスト）</span><a
                        class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/Blending_in_a_group_with_filter.html"><small>（ソース）</small></a>
                <li class="wpt-test"><span class="wpt-name">Blending_in_a_group_with_opacity.html（視覚テスト）
                    </span><a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/Blending_in_a_group_with_opacity.html"><small>（ソース）</small></a>
                <li class="wpt-test"><span class="wpt-name">Text_with_SVG_background.html（視覚テスト）</span><a
                        class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/Text_with_SVG_background.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/compositing/inheritance.html"
                        title="css/compositing/inheritance.html">inheritance.html</a> <a class="wpt-live"
                        href="http://wpt.live/css/compositing/inheritance.html"><small>（ライブテスト）</small></a> <a
                        class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/inheritance.html"><small>（ソース）</small></a>
                <li class="wpt-test"><span class="wpt-name">line-with-svg-background.html（視覚テスト）</span><a
                        class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/line-with-svg-background.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/svg/mix-blend-mode-in-svg-image.html"
                        title="css/compositing/svg/mix-blend-mode-in-svg-image.html">mix-blend-mode-in-svg-image.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/svg/mix-blend-mode-in-svg-image.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/svg/mix-blend-mode-in-svg-image.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/svg/mix-blend-mode-svg-rectangle.html"
                        title="css/compositing/svg/mix-blend-mode-svg-rectangle.html">mix-blend-mode-svg-rectangle.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/svg/mix-blend-mode-svg-rectangle.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/svg/mix-blend-mode-svg-rectangle.html"><small>（ソース）</small></a>
                <li class="wpt-test"><span class="wpt-name">text-with-svg-background.html（視覚テスト）</span><a
                        class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/text-with-svg-background.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-animation.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-animation.html">mix-blend-mode-animation.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-animation.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-animation.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-blended-element-interposed.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-blended-element-interposed.html">mix-blend-mode-blended-element-interposed.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-blended-element-interposed.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-blended-element-interposed.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-blended-element-overflow-hidden-and-border-radius.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-blended-element-overflow-hidden-and-border-radius.html">mix-blend-mode-blended-element-overflow-hidden-and-border-radius.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-blended-element-overflow-hidden-and-border-radius.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-blended-element-overflow-hidden-and-border-radius.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-blended-element-overflow-scroll.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-blended-element-overflow-scroll.html">mix-blend-mode-blended-element-overflow-scroll.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-blended-element-overflow-scroll.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-blended-element-overflow-scroll.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-blended-element-with-transparent-pixels.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-blended-element-with-transparent-pixels.html">mix-blend-mode-blended-element-with-transparent-pixels.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-blended-element-with-transparent-pixels.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-blended-element-with-transparent-pixels.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-blended-with-3D-transform.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-blended-with-3D-transform.html">mix-blend-mode-blended-with-3D-transform.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-blended-with-3D-transform.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-blended-with-3D-transform.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-blended-with-transform-and-perspective.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-blended-with-transform-and-perspective.html">mix-blend-mode-blended-with-transform-and-perspective.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-blended-with-transform-and-perspective.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-blended-with-transform-and-perspective.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-blending-with-sibling.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-blending-with-sibling.html">mix-blend-mode-blending-with-sibling.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-blending-with-sibling.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-blending-with-sibling.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-border-image.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-border-image.html">mix-blend-mode-border-image.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-border-image.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-border-image.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-both-parent-and-blended-with-3D-transform.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-both-parent-and-blended-with-3D-transform.html">mix-blend-mode-both-parent-and-blended-with-3D-transform.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-both-parent-and-blended-with-3D-transform.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-both-parent-and-blended-with-3D-transform.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-canvas-parent.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-canvas-parent.html">mix-blend-mode-canvas-parent.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-canvas-parent.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-canvas-parent.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-canvas-sibling.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-canvas-sibling.html">mix-blend-mode-canvas-sibling.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-canvas-sibling.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-canvas-sibling.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-creates-stacking-context.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-creates-stacking-context.html">mix-blend-mode-creates-stacking-context.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-creates-stacking-context.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-creates-stacking-context.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-filter.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-filter.html">mix-blend-mode-filter.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-filter.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-filter.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-iframe-parent.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-iframe-parent.html">mix-blend-mode-iframe-parent.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-iframe-parent.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-iframe-parent.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-iframe-sibling.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-iframe-sibling.html">mix-blend-mode-iframe-sibling.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-iframe-sibling.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-iframe-sibling.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-image.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-image.html">mix-blend-mode-image.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-image.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-image.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-intermediate-element-overflow-hidden-and-border-radius.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-intermediate-element-overflow-hidden-and-border-radius.html">mix-blend-mode-intermediate-element-overflow-hidden-and-border-radius.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-intermediate-element-overflow-hidden-and-border-radius.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-intermediate-element-overflow-hidden-and-border-radius.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-mask.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-mask.html">mix-blend-mode-mask.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-mask.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-mask.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-overflowing-child-of-blended-element.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-overflowing-child-of-blended-element.html">mix-blend-mode-overflowing-child-of-blended-element.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-overflowing-child-of-blended-element.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-overflowing-child-of-blended-element.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-overflowing-child.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-overflowing-child.html">mix-blend-mode-overflowing-child.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-overflowing-child.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-overflowing-child.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-paragraph-background-image.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-paragraph-background-image.html">mix-blend-mode-paragraph-background-image.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-paragraph-background-image.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-paragraph-background-image.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-paragraph.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-paragraph.html">mix-blend-mode-paragraph.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-paragraph.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-paragraph.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-parent-element-overflow-hidden-and-border-radius.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-parent-element-overflow-hidden-and-border-radius.html">mix-blend-mode-parent-element-overflow-hidden-and-border-radius.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-parent-element-overflow-hidden-and-border-radius.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-parent-element-overflow-hidden-and-border-radius.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-parent-element-overflow-scroll-blended-position-fixed.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-parent-element-overflow-scroll-blended-position-fixed.html">mix-blend-mode-parent-element-overflow-scroll-blended-position-fixed.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-parent-element-overflow-scroll-blended-position-fixed.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-parent-element-overflow-scroll-blended-position-fixed.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-parent-element-overflow-scroll.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-parent-element-overflow-scroll.html">mix-blend-mode-parent-element-overflow-scroll.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-parent-element-overflow-scroll.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-parent-element-overflow-scroll.html"><small>（ソース）</small></a>
                <li class="wpt-test"><span
                        class="wpt-name">mix-blend-mode-parent-with-3D-transform-and-transition.html（視覚テスト）</span><a
                        class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-parent-with-3D-transform-and-transition.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-parent-with-3D-transform.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-parent-with-3D-transform.html">mix-blend-mode-parent-with-3D-transform.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-parent-with-3D-transform.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-parent-with-3D-transform.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-parent-with-border-radius.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-parent-with-border-radius.html">mix-blend-mode-parent-with-border-radius.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-parent-with-border-radius.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-parent-with-border-radius.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-parent-with-text.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-parent-with-text.html">mix-blend-mode-parent-with-text.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-parent-with-text.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-parent-with-text.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-parsing.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-parsing.html">mix-blend-mode-parsing.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-parsing.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-parsing.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-plus-lighter-basic.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-plus-lighter-basic.html">mix-blend-mode-plus-lighter-basic.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-plus-lighter-basic.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-plus-lighter-basic.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-plus-lighter-svg-basic.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-plus-lighter-svg-basic.html">mix-blend-mode-plus-lighter-svg-basic.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-plus-lighter-svg-basic.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-plus-lighter-svg-basic.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-plus-lighter-svg.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-plus-lighter-svg.html">mix-blend-mode-plus-lighter-svg.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-plus-lighter-svg.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-plus-lighter-svg.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-plus-lighter.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-plus-lighter.html">mix-blend-mode-plus-lighter.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-plus-lighter.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-plus-lighter.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-root-element-group.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-root-element-group.html">mix-blend-mode-root-element-group.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-root-element-group.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-root-element-group.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-rotated-clip.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-rotated-clip.html">mix-blend-mode-rotated-clip.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-rotated-clip.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-rotated-clip.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-script.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-script.html">mix-blend-mode-script.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-script.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-script.html"><small>（ソース）</small></a>
                <li class="wpt-test"><span
                        class="wpt-name">mix-blend-mode-sibling-with-3D-transform-and-transition.html（視覚テスト）</span><a
                        class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-sibling-with-3D-transform-and-transition.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-sibling-with-3D-transform.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-sibling-with-3D-transform.html">mix-blend-mode-sibling-with-3D-transform.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-sibling-with-3D-transform.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-sibling-with-3D-transform.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-simple.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-simple.html">mix-blend-mode-simple.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-simple.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-simple.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-stacking-context-001.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-stacking-context-001.html">mix-blend-mode-stacking-context-001.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-stacking-context-001.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-stacking-context-001.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-stacking-context-creates-isolation.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-stacking-context-creates-isolation.html">mix-blend-mode-stacking-context-creates-isolation.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-stacking-context-creates-isolation.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-stacking-context-creates-isolation.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-svg.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-svg.html">mix-blend-mode-svg.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-svg.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-svg.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-video-sibling.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-video-sibling.html">mix-blend-mode-video-sibling.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-video-sibling.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-video-sibling.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-video.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-video.html">mix-blend-mode-video.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-video.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-video.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/mix-blend-mode/mix-blend-mode-with-transform-and-preserve-3D.html"
                        title="css/compositing/mix-blend-mode/mix-blend-mode-with-transform-and-preserve-3D.html">mix-blend-mode-with-transform-and-preserve-3D.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/mix-blend-mode/mix-blend-mode-with-transform-and-preserve-3D.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/mix-blend-mode/mix-blend-mode-with-transform-and-preserve-3D.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/parsing/mix-blend-mode-computed.html"
                        title="css/compositing/parsing/mix-blend-mode-computed.html">mix-blend-mode-computed.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/compositing/parsing/mix-blend-mode-computed.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/parsing/mix-blend-mode-computed.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/parsing/mix-blend-mode-invalid.html"
                        title="css/compositing/parsing/mix-blend-mode-invalid.html">mix-blend-mode-invalid.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/compositing/parsing/mix-blend-mode-invalid.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/parsing/mix-blend-mode-invalid.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/parsing/mix-blend-mode-valid.html"
                        title="css/compositing/parsing/mix-blend-mode-valid.html">mix-blend-mode-valid.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/compositing/parsing/mix-blend-mode-valid.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/parsing/mix-blend-mode-valid.html"><small>（ソース）</small></a>
            </ul>
        </details>
        <div class="example" id="ex-duck-on-lime">
            <a class="self-link" href="#ex-duck-on-lime"></a>
            <p>以下のサンプルマークアップを例とします：</p>
            <pre>&lt;body>
  &lt;img src="ducky.png"/>
&lt;/body>
</pre>
            <p>そして、次のスタイルルール：</p>
            <pre>body { background-color: lime; }
</pre>
            <p> ... は以下の結果を生成します：</p>
            <div class="figure">
                <img alt="ライム色のドキュメント上にアヒルの画像の例" height="537" src="https://www.w3.org/TR/compositing-1/examples/ducky_normal.png" style="width:30%"
                    width="489">
                <p class="caption"> ライム色の背景上に部分的に透明な画像 </p>
            </div>
            <p>スタイルルールをブレンディングを含めるよう変更すると：</p>
            <pre>body { background-color: lime; }
img { mix-blend-mode: multiply; }
</pre>
            <p> ... 出力は画像が &lt;body> 要素のライム色背景とブレンドされます。</p>
            <div class="figure">
                <img alt="ライム色のドキュメントとブレンディングしたアヒル画像の例" height="537" src="https://www.w3.org/TR/compositing-1/examples/ducky_multiply.png" style="width:30%"
                    width="489">
                <p class="caption"> ライム色の背景上に透明画像のブレンディング </p>
            </div>
        </div>
        <div class="example" id="ex-svg-screen-mode">
            <a class="self-link" href="#ex-svg-screen-mode"></a>
            <p>次のsvgコードを例とします：</p>
            <pre>&lt;svg>
  &lt;circle cx="40" cy="40" r="40" fill="red"/>
  &lt;circle cx="80" cy="40" r="40" fill="lime"/>
  &lt;circle cx="60" cy="80" r="40" fill="blue"/>
&lt;/svg>
</pre>
            <p>そして、次のスタイルルール：</p>
            <pre>circle { mix-blend-mode: screen; }
</pre>
            <p> ... 出力は3つの円がブレンディングされます。各円は下から上に描画されます。要素が重なる部分では、ブレンドモードによって色が変化します。</p>
            <div class="figure">
                <img alt="screenブレンドモードでブレンディングされた3つの円の例" src="https://www.w3.org/TR/compositing-1/examples/screen_example.svg" style="width:30%">
                <p class="caption"> 3つの円がscreenブレンドモードでブレンディングされる例 </p>
            </div>
        </div>
        <div class="example" id="ex-opacity-stacking">
            <a class="self-link" href="#ex-opacity-stacking"></a>
            <p>次のスタイルシートと文書断片：</p>
            <pre>body { background-color: lime; }
div { background-color: red; width: 200px; opacity: .95}
img { mix-blend-mode: difference; }

&lt;body>
  &lt;div>
     &lt;img src="ducky.png"/>
  &lt;/div>
&lt;/body>
</pre>
            <p> ... &lt;div> 要素の <a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-color-4/#propdef-opacity" id="ref-for-propdef-opacity">opacity</a>
                の設定により積み重ねコンテキストが作成されています。これにより新しいグループが作成され、画像は &lt;body> の色とブレンドされません。</p>
            <div class="figure">
                <img alt="ライム色のドキュメントとdifferenceでブレンディングしたアヒル画像の例" height="537" src="https://www.w3.org/TR/compositing-1/examples/ducky_difference.png"
                    style="width:30%" width="489">
                <p class="caption"> 積み重ねコンテキスト内でのブレンディングの例 </p>
            </div>
            <p>画像がライム色とブレンドされていない点に注目してください。</p>
        </div>
        <div class="example" id="ex-overlay-blend">
            <a class="self-link" href="#ex-overlay-blend"></a>
            <p>以下のサンプルマークアップを例とします：</p>
            <pre>&lt;body>
   &lt;div>
     &lt;p><a class="css" data-link-type="maybe" href="#valdef-blend-mode-overlay" id="ref-for-valdef-blend-mode-overlay①">overlay</a>ブレンディングをテキストに適用&lt;/p>
   &lt;/div>
&lt;/body>
</pre>
            <p>そして、次のスタイルルール：</p>
            <pre>div { background-image: url('texture.png'); }
@font-face {
  font-family: "Mythos Std";
  src: url("http://myfontvendor.com/mythos.otf");
}
p {
  mix-blend-mode: overlay;
  font-family: "Mythos Std"
}
</pre>
            <div class="figure">
                <img alt="テクスチャ画像上にオーバレイブレンドが適用されたテキストの例" height="295" src="https://www.w3.org/TR/compositing-1/examples/overlay_text.png" style="width:75%"
                    width="510">
                <p class="caption"> 画像上にオーバレイブレンドが適用されたテキスト </p>
            </div>
        </div>
        <h4 class="heading settled" data-level="3.4.2" id="isolation"><span class="secno">3.4.2. </span><span
                class="content"><a class="property css" data-link-type="property" href="#propdef-isolation"
                    id="ref-for-propdef-isolation">isolation</a>プロパティ</span><a class="self-link" href="#isolation"></a>
        </h4>
        <p>SVGでは、このプロパティは要素がisolatedかどうかを定義します。<br> CSSでは、<a class="property css" data-link-type="property"
                href="#propdef-isolation" id="ref-for-propdef-isolation①">isolation</a> を <span
                class="css">isolate</span> に設定すると、要素が積み重ねコンテキストになります。
        </p>
        <p>デフォルトでは、要素は <span class="css">auto</span> キーワードを使用し、isolatedではないことを意味します。ただし、積み重ねコンテキストの作成を引き起こす操作 <a
                data-link-type="biblio" href="#biblio-css21"
                title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS21]</a>
            は必ずグループをisolatedにする必要があります。これらの操作については <a href="#csscompositingrules_CSS">「HTMLに特有の動作」</a>および <a
                href="#csscompositingrules_SVG">「SVGに特有の動作」</a>で説明しています。</p>
        <table class="def propdef" data-link-for-hint="isolation">
            <tbody>
                <tr>
                    <th>名前:
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-isolation">isolation</dfn>
                <tr class="value">
                    <th><a href="https://www.w3.org/TR/css-values/#value-defs">値:</a>
                    <td class="prod"><a class="production css" data-link-type="type" href="#isolated-propid"
                            id="ref-for-isolated-propid">&lt;isolation-mode></a>
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">初期値:</a>
                    <td>auto
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">適用対象:</a>
                    <td>すべての要素。SVGでは、<a href="https://www.w3.org/TR/SVG11/intro.html#TermContainerElement">コンテナ要素</a>、
                        <a href="https://www.w3.org/TR/SVG11/intro.html#TermGraphicsElement">グラフィックス要素</a>、
                        <a
                            href="https://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsReferencingElement">グラフィックス参照要素</a>に適用されます。<a
                            data-link-type="biblio" href="#biblio-svg11"
                            title="Scalable Vector Graphics (SVG) 1.1 (Second Edition)">[SVG11]</a>
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">継承:</a>
                    <td>no
                <tr>
                    <th><a href="https://www.w3.org/TR/css-values/#percentages">パーセンテージ:</a>
                    <td>N/A
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#computed">算出値:</a>
                    <td>指定通り
                <tr>
                    <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">正規順序:</a>
                    <td>文法通り
                <tr>
                    <th><a href="https://www.w3.org/TR/web-animations/#animation-type">アニメーション型:</a>
                    <td>離散
                <tr>
                    <th>メディア:
                    <td>視覚
            </tbody>
        </table>
        <p><a class="production css" data-link-type="type" href="#isolated-propid"
                id="ref-for-isolated-propid①">&lt;isolation-mode></a> プロパティの構文は以下の通りです：</p>
        <pre
            class="isolated prod"><dfn class="dfn-paneled" data-dfn-type="type" data-export id="isolated-propid">&lt;isolation-mode></dfn> = auto <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one①⑤">|</a> isolate</pre>
        <details class="wpt-tests-block" dir="ltr" lang="ja" open>
            <summary>テスト</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/compositing/inheritance.html"
                        title="css/compositing/inheritance.html">inheritance.html</a> <a class="wpt-live"
                        href="http://wpt.live/css/compositing/inheritance.html"><small>（ライブテスト）</small></a> <a
                        class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/inheritance.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/isolation/animation/isolation-no-interpolation.html"
                        title="css/compositing/isolation/animation/isolation-no-interpolation.html">isolation-no-interpolation.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/isolation/animation/isolation-no-interpolation.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/isolation/animation/isolation-no-interpolation.html"><small>（ソース）</small></a>
                <li class="wpt-test"><span class="wpt-name">blend-isolation.html（視覚テスト）</span><a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/isolation/blend-isolation.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/parsing/isolation-computed.html"
                        title="css/compositing/parsing/isolation-computed.html">isolation-computed.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/compositing/parsing/isolation-computed.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/parsing/isolation-computed.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/parsing/isolation-invalid.html"
                        title="css/compositing/parsing/isolation-invalid.html">isolation-invalid.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/compositing/parsing/isolation-invalid.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/parsing/isolation-invalid.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/parsing/isolation-valid.html"
                        title="css/compositing/parsing/isolation-valid.html">isolation-valid.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/compositing/parsing/isolation-valid.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/parsing/isolation-valid.html"><small>（ソース）</small></a>
            </ul>
        </details>
        <p id="img_isolation"> CSSでは、背景画像や <a data-link-type="element"
                href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element"
                id="ref-for-the-img-element">img</a> のコンテンツは必ずisolatedグループに描画されます。<br>たとえば、<span
                id="ref-for-the-img-element①">img</span> タグでSVGファイルをリンクした場合、そのSVGのアートワークはコンテンツのバックドロップとブレンドされません。</p>
        <p>SVGでは、<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-masking-1/#propdef-mask" id="ref-for-propdef-mask">mask</a>
            は常にisolatedグループを作成します。</p>
        <h4 class="heading settled" data-level="3.4.3" id="background-blend-mode"><span class="secno">3.4.3.
            </span><span class="content"><a class="property css" data-link-type="property"
                    href="#propdef-background-blend-mode"
                    id="ref-for-propdef-background-blend-mode①">background-blend-mode</a>プロパティ</span><a
                class="self-link" href="#background-blend-mode"></a></h4>
        <p>各背景レイヤーのブレンディングモードを定義します。</p>
        <p>各背景レイヤーは、要素の下にある背景レイヤーおよび要素の背景色とブレンドしなければなりません。背景レイヤーは、要素の背後にあるコンテンツとはブレンドせず、isolated
            groupに描画されたかのように振る舞う必要があります。</p>
        <p><a class="property css" data-link-type="property" href="#propdef-background-blend-mode"
                id="ref-for-propdef-background-blend-mode②">background-blend-mode</a>プロパティの説明は以下の通りです：</p>
        <table class="def propdef" data-link-for-hint="background-blend-mode">
            <tbody>
                <tr>
                    <th>名前:
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-background-blend-mode">background-blend-mode</dfn>
                <tr class="value">
                    <th><a href="https://www.w3.org/TR/css-values/#value-defs">値:</a>
                    <td class="prod"><a class="production css" data-link-type="type" href="#ltblendmodegt"
                            id="ref-for-ltblendmodegt②">&lt;blend-mode></a><a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#mult-comma" id="ref-for-mult-comma">#</a>
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">初期値:</a>
                    <td>normal
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">適用対象:</a>
                    <td>すべてのHTML要素
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">継承:</a>
                    <td>no
                <tr>
                    <th><a href="https://www.w3.org/TR/css-values/#percentages">パーセンテージ:</a>
                    <td>N/A
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#computed">算出値:</a>
                    <td>指定通り
                <tr>
                    <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">正規順序:</a>
                    <td>文法通り
                <tr>
                    <th><a href="https://www.w3.org/TR/web-animations/#animation-type">アニメーション型:</a>
                    <td>離散
                <tr>
                    <th>メディア:
                    <td>視覚
        </table>
        <details class="wpt-tests-block" dir="ltr" lang="ja" open>
            <summary>テスト</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/compositing/inheritance.html"
                        title="css/compositing/inheritance.html">inheritance.html</a> <a class="wpt-live"
                        href="http://wpt.live/css/compositing/inheritance.html"><small>（ライブテスト）</small></a> <a
                        class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/inheritance.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/background-blending/background-blend-mode-gradient-image.html"
                        title="css/compositing/background-blending/background-blend-mode-gradient-image.html">background-blend-mode-gradient-image.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/background-blending/background-blend-mode-gradient-image.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/background-blending/background-blend-mode-gradient-image.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/background-blending/background-blend-mode-plus-lighter.html"
                        title="css/compositing/background-blending/background-blend-mode-plus-lighter.html">background-blend-mode-plus-lighter.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/background-blending/background-blend-mode-plus-lighter.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/background-blending/background-blend-mode-plus-lighter.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/parsing/background-blend-mode-computed-multiple.html"
                        title="css/compositing/parsing/background-blend-mode-computed-multiple.html">background-blend-mode-computed-multiple.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/parsing/background-blend-mode-computed-multiple.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/parsing/background-blend-mode-computed-multiple.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/parsing/background-blend-mode-computed.html"
                        title="css/compositing/parsing/background-blend-mode-computed.html">background-blend-mode-computed.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/parsing/background-blend-mode-computed.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/parsing/background-blend-mode-computed.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/parsing/background-blend-mode-invalid.html"
                        title="css/compositing/parsing/background-blend-mode-invalid.html">background-blend-mode-invalid.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/parsing/background-blend-mode-invalid.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/parsing/background-blend-mode-invalid.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/parsing/background-blend-mode-valid.html"
                        title="css/compositing/parsing/background-blend-mode-valid.html">background-blend-mode-valid.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/parsing/background-blend-mode-valid.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/parsing/background-blend-mode-valid.html"><small>（ソース）</small></a>
            </ul>
        </details>
        <p><a class="property css" data-link-type="property" href="#propdef-background-blend-mode"
                id="ref-for-propdef-background-blend-mode③">background-blend-mode</a>リストは、<a class="property css"
                data-link-type="property" href="https://www.w3.org/TR/css-backgrounds-3/#propdef-background-image"
                id="ref-for-propdef-background-image">background-image</a> <a data-link-type="biblio"
                href="#biblio-css3bg"
                title="CSS Backgrounds and Borders Module Level 3">[CSS3BG]</a>と同じ順序で適用しなければなりません。つまり、リストの最初の要素が一番上のレイヤーに適用されます。プロパティにカンマ区切り値が十分ない場合、UAは値のリストを繰り返して必要数にします。
        </p>
        <p></p>
        <p><a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-backgrounds-3/#propdef-background"
                id="ref-for-propdef-background">background</a> <a data-link-type="biblio" href="#biblio-css3bg"
                title="CSS Backgrounds and Borders Module Level 3">[CSS3BG]</a>ショートハンドが使われた場合、その要素の<a
                class="property css" data-link-type="property" href="#propdef-background-blend-mode"
                id="ref-for-propdef-background-blend-mode④">background-blend-mode</a>プロパティは初期値にリセットされなければなりません。</p>
        <div class="example" id="ex-background-blend">
            <a class="self-link" href="#ex-background-blend"></a>
            <p>以下のサンプルマークアップを例とします：</p>
            <pre>&lt;body>
   &lt;div>&lt;/div>
&lt;/body>
</pre>
            <p>そして次のスタイルルール：</p>
            <pre>body { background-color: lime; }
div {
  width: 200px;
  height: 200px;
  background-size: 200px 200px;
  background-repeat:no-repeat;
  background-image: linear-gradient(to right, #000000 0%,#ffffff 100%), url('ducky.png');
  background-blend-mode: difference, normal;
}
</pre>
            <div class="figure">
                <img alt="グラデーションとアヒル画像の背景がブレンディングされたdivの例" height="576" src="https://www.w3.org/TR/compositing-1/examples/ducky_background_blend.png"
                    style="width:30%" width="504">
                <p class="caption"> 2つの背景画像のブレンディング </p>
            </div>
            <p>グラデーションは<a data-link-type="element"
                    href="https://html.spec.whatwg.org/multipage/sections.html#the-body-element"
                    id="ref-for-the-body-element">body</a>の色とはブレンディングされず、元の色を保持している点に注意してください。</p>
        </div>
        <h2 class="heading settled" data-level="4" id="canvascompositingandblending"><span class="secno">4. </span><span
                class="content">Canvas 2Dにおける合成とブレンディングの指定</span><a class="self-link"
                href="#canvascompositingandblending"></a></h2>
        <p><a href="https://html.spec.whatwg.org/multipage/canvas.html#2dcontext">canvas
                2d</a>コンテキストは、現在の合成・ブレンディング演算子を設定する<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#dom-context-2d-globalcompositeoperation" id="ref-for-dom-context-2d-globalcompositeoperation②">globalCompositeOperation</a></code>
            属性を定義します。
        </p>
        <p>このプロパティは以下の値を取ります：</p>
        <div class="propdef">
            <dl>
                <dt id="propdef-mix"><a class="self-link" href="#propdef-mix"></a><span
                        class="propdef-title prop-name">‘globalCompositeOperation’</span>
                <dd>
                    <table class="propinfo">
                        <tbody>
                            <tr>
                                <td><em>値:</em>
                                <td> <a class="production css" data-link-type="type" href="#ltblendmodegt"
                                        id="ref-for-ltblendmodegt③">&lt;blend-mode></a> | <a class="production css"
                                        data-link-type="type" href="#compositemode"
                                        id="ref-for-compositemode">&lt;composite-mode></a>
                            <tr>
                                <td><em>初期値:</em>
                                <td>source-over
                    </table>
            </dl>
        </div>
        <p><a class="production css" data-link-type="type" href="#compositemode"
                id="ref-for-compositemode①">&lt;composite-mode></a>プロパティの構文は以下の通りです：</p>
        <pre
            class="compositemode prod"><dfn class="dfn-paneled" data-dfn-type="type" data-export id="compositemode">&lt;composite-mode></dfn> = <a href="#porterduffcompositingoperators_clear">clear</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one①⑥">|</a> <a href="#porterduffcompositingoperators_src">copy</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one①⑦">|</a> <a href="#porterduffcompositingoperators_srcover">source-over</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one①⑧">|</a> <a href="#porterduffcompositingoperators_dstover">destination-over</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one①⑨">|</a> <a href="#porterduffcompositingoperators_srcin">source-in</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one②⓪">|</a>    <br><a href="#porterduffcompositingoperators_dstin">destination-in</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one②①">|</a> <a href="#porterduffcompositingoperators_srcout">source-out</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one②②">|</a> <a href="#porterduffcompositingoperators_dstout">destination-out</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one②③">|</a> <a href="#porterduffcompositingoperators_srcatop">source-atop</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one②④">|</a>    <br><a href="#porterduffcompositingoperators_dstatop">destination-atop</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one②⑤">|</a> <a href="#porterduffcompositingoperators_xor">xor</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one②⑥">|</a> <a href="#porterduffcompositingoperators_plus">lighter</a></pre>
        <details class="wpt-tests-block" dir="ltr" lang="ja" open>
            <summary>テスト</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/canvas-composite-modes.html"
                        title="css/compositing/canvas-composite-modes.html">canvas-composite-modes.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/compositing/canvas-composite-modes.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/canvas-composite-modes.html"><small>（ソース）</small></a>
            </ul>
        </details>
        <h2 class="heading settled" data-level="5" id="whatiscompositing"><span class="secno">5. </span><span
                class="content">合成の概要</span><a class="self-link" href="#whatiscompositing"></a>
        </h2>
        <p>合成とは、グラフィック要素をそのバックドロップと組み合わせることです。</p>
        <p>本仕様で記述されるモデルでは、合成操作全体に2つのステップがあります：<a href="#advancedcompositing">Porter-Duff合成</a>と<a
                href="#blending">ブレンディング</a>です。
            ブレンディングステップでは、グラフィック要素とバックドロップの色がどのように相互作用するかが決定されます。</p>
        <p>通常、ブレンディングステップが先に行われ、その後Porter-Duff合成ステップが実行されます。
            ブレンディングステップでは、要素と<a data-link-type="dfn" href="#backdrop"
                id="ref-for-backdrop①">バックドロップ</a>の混合結果の色が計算されます。グラフィック要素の色はこの結果の色に置き換えられます。
            その後、グラフィック要素は指定された合成演算子を使って<span id="ref-for-backdrop②">バックドロップ</span>と合成されます。</p>
        <p class="note" role="note"><span class="marker">注:</span>
            形状は、その数学的な定義によって決まります。ある点が形状の内部かどうかは明確です。段階的な変化はありません。</p>
        <p class="note" role="note"><span class="marker">注:</span> 不透明度はアルファ値によって記述され、各点の色値とともに保存されます。アルファ値は0から1の範囲です。
            0はそのピクセルがカバーされていない、すなわち透明であることを意味します。つまり、ジオメトリがそのピクセルを重ねていないため色の寄与はありません。1はピクセルが完全に不透明であり、ジオメトリが完全に重なっていることを意味します。
        </p>
        <h3 class="heading settled" data-level="5.1" id="simplealphacompositing"><span class="secno">5.1. </span><span
                class="content">単純アルファ合成</span><a class="self-link" href="#simplealphacompositing"></a>
        </h3>
        <p>単純アルファ合成の式は以下の通りです。</p>
        <pre>co = Cs x αs + Cb x αb x (1 - αs)
</pre>
        <p>各変数の意味：</p>
        <ul>
            <li>co: 合成後のプリ乗算済みピクセル値
            <li>Cs: 合成されるソースグラフィック要素の色値
            <li>αs: 合成されるソースグラフィック要素のアルファ値
            <li>Cb: <a data-link-type="dfn" href="#backdrop" id="ref-for-backdrop③">バックドロップ</a>の色値
            <li>αb: <a data-link-type="dfn" href="#backdrop" id="ref-for-backdrop④">バックドロップ</a>のアルファ値
        </ul>
        <p class="note" role="note"><span class="marker">注:</span> すべての値は0以上1以下です。</p>
        <p>合成後のピクセル値（co）は、ソースグラフィック要素の寄与 [Cs x αs] とバックドロップの寄与 [Cb x αb x (1 - αs)] を加算して求めます。
            グラフィック要素・バックドロップそれぞれの色値はアルファ値で乗算され、寄与する色の量が決まります。
            アルファ値が0ならば色は寄与せず、部分的なアルファは色の一部が寄与することを意味します。
            バックドロップの寄与は、グラフィック要素の不透明度によりさらに減少します。
            概念的には、バックドロップの(1 - αs)分がグラフィック要素越しに見えることになり、グラフィック要素が完全不透明（αs=1）の場合は、バックドロップは全く見えません。</p>
        <p>上記の単純アルファ合成式は、バックドロップ色とグラフィック要素色の加重平均としての結果色を与え、その重みは両者のアルファ値で決定されます。
            合成結果のアルファ値は、合成された要素の寄与アルファの単純な和となります。
            合成結果のアルファ値の式は以下の通りです。</p>
        <pre>αo = αs + αb x (1 - αs)
</pre>
        <p>各変数の意味：</p>
        <ul>
            <li>αo: 合成後のアルファ値
            <li>αs: 合成されるグラフィック要素のアルファ値
            <li>αb: <a data-link-type="dfn" href="#backdrop" id="ref-for-backdrop⑤">バックドロップ</a>のアルファ値
        </ul>
        <p></p>
        <div class="note" role="note">
            <p> 多くの場合、色と不透明度の<code>プリ乗算済み値</code>を保存する方が効率的です。プリ乗算済み値は次の式で与えられます。</p>
            <pre>cs = Cs x αs
</pre>
            <p>各変数の意味：</p>
            <ul>
                <li>cs: プリ乗算済み値
                <li>Cs: 色値
                <li>αs: アルファ値
            </ul>
            <p> したがって、プリ乗算済み値を用いた単純アルファ合成の式は次のようになります。</p>
            <pre>co = cs + cb x (1 - αs)
</pre>
            <p></p>
            <p></p>
            <p> プリ乗算済み値から色成分を抽出するには、次の式で逆算します。</p>
            <pre>Co = co / αo
</pre>
            <p></p>
        </div>
        <h4 class="heading settled" data-level="5.1.1" id="simplealphacompositingexamples"><span class="secno">5.1.1.
            </span><span class="content">単純アルファ合成の例</span><a class="self-link"
                href="#simplealphacompositingexamples"></a></h4>
        <div class="example" id="ex-basic-alpha">
            <a class="self-link" href="#ex-basic-alpha"></a>
            <div class="figure">
                <img alt="アルファ合成を示すシンプルなボックス" src="https://www.w3.org/TR/compositing-1/examples/simple_box.svg">
                <p class="caption"></p>
            </div>
            <p> これは最も基本的なケースです。1つの図形が単色（α = 1）で塗りつぶされており、空の背景と合成されます。空の背景は合成結果に影響しません。</p>
            <pre>Cs = RGB(1,0,0)
αs = 1
Cb = RGB(0,0,0)
αb = 0

co = Cs x αs + Cb x αb x (1 - αs)
co = RGB(1,0,0) x 1 + RGB(0,0,0) x 0 x (1 - 1)
co = RGB(1,0,0) x 1
co = RGB(1,0,0)
</pre>
            <p></p>
        </div>
        <div class="example" id="ex-shapes-intersect">
            <a class="self-link" href="#ex-shapes-intersect"></a>
            <div class="figure">
                <img alt="シンプルな図形" src="https://www.w3.org/TR/compositing-1/examples/two_box.svg">
                <p class="caption"></p>
            </div>
            <p> これはより複雑な例です。透明度はありませんが、2つの図形が交差します。</p>
            <p> 合成式を交差部分に適用すると、次のようになります：</p>
            <pre>Cs = RGB(0,0,1)
αs = 1
Cb = RGB(1,0,0)
αb = 1

co = Cs x αs + Cb x αb x (1 - αs)
co = RGB(0,0,1) x 1 + RGB(1,0,0) x 1 x (1 - 1)
co = RGB(0,0,1) x 1 + RGB(1,0,0) x 1 x 0
co = RGB(0,0,1) x 1
co = RGB(0,0,1)
</pre>
            <p>合成結果のアルファ値の計算：</p>
            <pre>αo = αs + αb x (1 - αs)
αo = 1 + 1 x (1 - 1)
αo = 1
</pre>
            <p>合成結果の色成分の計算：</p>
            <pre>Co = co / αo
Co = RGB(0, 0, 1) / 1
Co = RGB(0, 0, 1)
</pre>
            <p></p>
        </div>
        <div class="example" id="ex-transparent-over-opaque">
            <a class="self-link" href="#ex-transparent-over-opaque"></a>
            <div class="figure">
                <img alt="不透明なボックスの上に透明ボックスが重なった場合の相互作用" src="https://www.w3.org/TR/compositing-1/examples/two_box_transparency.svg">
                <p class="caption"></p>
            </div>
            <p> これは図形が一部透明で、<a data-link-type="dfn" href="#backdrop" id="ref-for-backdrop⑥">バックドロップ</a>が完全に不透明な場合の例です。
            </p>
            <p> 合成式を交差部分に適用すると、次のようになります：</p>
            <pre>Cs = RGB(0,0,1)
αs = 0.5
Cb = RGB(1,0,0)
αb = 1

co = Cs x αs + Cb x αb x (1 - αs)
co = RGB(0,0,1) x 0.5 + RGB(1,0,0) x 1 x (1 - 0.5)
co = RGB(0,0,1) x 0.5 + RGB(1,0,0) x 0.5
co = RGB(0.5,0,0.5)
</pre>
            <p>合成結果のアルファ値の計算：</p>
            <pre>αo = αs + αb x (1 - αs)
αo = 0.5 + 1 x (1 - 0.5)
αo = 1
</pre>
            <p>合成結果の色成分の計算：</p>
            <pre>Co = co / αo
Co = RGB(0.5, 0, 0.5) / 1
Co = RGB(0.5, 0, 0.5)
</pre>
            <p></p>
        </div>
        <div class="example" id="ex-two-transparent">
            <a class="self-link" href="#ex-two-transparent"></a>
            <div class="figure">
                <img alt="2つの透明なボックスの相互作用" src="https://www.w3.org/TR/compositing-1/examples/two_box_transparency_both.svg">
                <p class="caption"></p>
            </div>
            <p> 図4は、図形と<a data-link-type="dfn" href="#backdrop" id="ref-for-backdrop⑦">バックドロップ</a>の両方が透明な例です。</p>
            <p> 合成式を交差部分に適用すると、次のようになります：</p>
            <pre>Cs = RGB(0,0,1)
αs = 0.5
Cb = RGB(1,0,0)
αb = 0.5

co = Cs x αs + Cb x αb x (1 - αs)
co = RGB(0,0,1) x 0.5 + RGB(1,0,0) x 0.5 x (1 - 0.5)
co = RGB(0,0,1) x 0.5 + RGB(1,0,0) x 0.25
co = RGB(0.25, 0, 0.5)
</pre>
            <p>合成結果のアルファ値の計算：</p>
            <pre>αo = αs + αb x (1 - αs)
αo = 0.5 + 0.5 x (1 - 0.5)
αo = 0.75
</pre>
            <p>合成結果の色成分の計算：</p>
            <pre>Co = co / αo
Co = RGB(0.25, 0, 0.5) / 0.75
Co = RGB(0.33, 0, 0.66)
</pre>
            <p></p>
        </div>
        <h2 class="heading settled" data-level="6" id="generalformula"><span class="secno">6. </span><span
                class="content">合成とブレンディングの一般式</span><a class="self-link" href="#generalformula"></a></h2>
        <p>合成演算子やブレンディング関数を選択できる合成とブレンディングの一般式は、2つのステップで構成されます。
            これらの関数で使われる用語は、以降のセクションで詳しく説明します。</p>
        <p>まずブレンドを適用します</p>
        <pre>Cs = (1 - αb) x Cs + αb x B(Cb, Cs)
</pre>
        <p>合成</p>
        <pre>Co = αs x Fa x Cs + αb x Fb x Cb
</pre>
        <p>変数の意味：</p>
        <ul>
            <li><strong>Cs</strong>: ソース色
            <li><strong>Cb</strong>: バックドロップ色
            <li><strong>αs</strong>: ソースアルファ
            <li><strong>αb</strong>: バックドロップアルファ
            <li><strong>B(Cb, Cs)</strong>: 混合関数
            <li><strong>Fa</strong>: 使用されるPorter Duff演算子で定義される値
            <li><strong>Fb</strong>: 使用されるPorter Duff演算子で定義される値
        </ul>
        <h2 class="heading settled" data-level="7" id="backdropCalc"><span class="secno">7. </span><span
                class="content">バックドロップの計算</span><a class="self-link" href="#backdropCalc"></a></h2>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export
                id="backdrop">バックドロップ</dfn>は、要素の背後にある内容であり、要素が合成される対象です。
            つまり、バックドロップはそれまでに合成された全ての要素の結果です。</p>
        <h3 class="heading settled" data-level="7.1" id="backdropexamples"><span class="secno">7.1. </span><span
                class="content">バックドロップ計算の例</span><a class="self-link" href="#backdropexamples"></a></h3>
        <div class="example" id="ex-simple-backdrop-calculation">
            <a class="self-link" href="#ex-simple-backdrop-calculation"></a>
            <div class="figure">
                <img alt="単純なバックドロップ計算の例" src="https://www.w3.org/TR/compositing-1/examples/simple_backdrop.svg">
                <p class="caption"></p>
            </div>
            <p> この例ではシンプルな図形が2つあります。青い図形のバックドロップには赤い図形の右下隅が含まれます。
                点線は青い図形の合成時に調査される領域を示しています。 </p>
        </div>
        <div class="example" id="ex-backdrop-with-alpha">
            <a class="self-link" href="#ex-backdrop-with-alpha"></a>
            <div class="figure">
                <img alt="アルファ値付きバックドロップの例" src="https://www.w3.org/TR/compositing-1/examples/simple_backdrop_alpha.svg">
                <p class="caption"></p>
            </div>
            <p> バックドロップ内の図形にはアルファ値があります。バックドロップ計算時、その図形のアルファ値は維持されます。 </p>
        </div>
        <h2 class="heading settled" data-level="8" id="groups"><span class="secno">8. </span><span
                class="content">合成グループ</span><a class="self-link" href="#groups"></a></h2>
        <p>合成グループを使うことで、合成とバックドロップの相互作用をより細かく制御できます。グループは、グループ内の合成効果がシーン（すでに存在するバックドロップ）とどう相互作用するかを指定するために使用できます。</p>
        <p>合成グループは任意の数の要素で構成でき、他の合成グループを含むこともできます。</p>
        <p>合成グループのデフォルトプロパティでは、グループがない場合と視覚的な違いはありません。詳細は<a href="#groupinvariance">グループ不変性</a>を参照してください。</p>
        <p>合成グループは、まずグループ内の要素を初期バックドロップに合成します。その結果は色とアルファ情報を持つ単一の要素となります。この要素はグループバックドロップに合成されます。
            グループバックドロップが最終合成に一度だけ寄与するように注意する必要があります。</p>
        <dl>
            <dt id="initialbackdrop"><a class="self-link" href="#initialbackdrop"></a>初期バックドロップ
            <dd> 初期バックドロップは、グループの最初の要素を合成する際に使われるバックドロップです。非isolatedグループではグループバックドロップと同じですが、isolatedグループでは完全に透明なバックドロップとなります。
            <dt id="groupbackdrop"><a class="self-link" href="#groupbackdrop"></a>グループバックドロップ
            <dd> グループバックドロップは、グループ内の最初の要素以外のすべての要素を合成した結果です。
        </dl>
        <h3 class="heading settled" data-level="8.1" id="groupinvariance"><span class="secno">8.1. </span><span
                class="content">グループ不変性</span><a class="self-link" href="#groupinvariance"></a></h3>
        <p>単純アルファ合成の重要な性質の1つはグループ不変性です。この振る舞いは本仕様で説明されるより複雑なモデルでも保持されています。
            デフォルト属性でグループを追加・削除しても、視覚的な違いはありません。</p>
        <pre>so: A + B + C = A + (B + C) = (A + B) + C</pre>
        <p>グループに<span class="css">isolate</span>や、<a class="css" data-link-type="maybe" href="#valdef-blend-mode-normal"
                id="ref-for-valdef-blend-mode-normal②">normal</a>以外のブレンディングモード、<span
                class="css">source-over</span>以外のPorter Duff合成演算子などの属性を追加すると、グループは不変ではなくなります。</p>
        <h3 class="heading settled" data-level="8.2" id="isolatedgroups"><span class="secno">8.2. </span><span
                class="content">isolatedグループ</span><a class="self-link" href="#isolatedgroups"></a></h3>
        <p>isolatedグループでは、初期バックドロップは黒色で完全に透明です。</p>
        <p>この場合、初期バックドロップはグループバックドロップとは異なります。グループバックドロップとの相互作用は、グループの色・形状・アルファが計算された後に合成される時だけ発生します。</p>
        <p>isolatedグループが合成に与える影響の詳細は「<a href="#groupcompositing">isolatedグループとPorter Duffモード</a>」を参照してください。
            ブレンディングへの影響は「<a href="#isolationblending">グループアイソレーションによるブレンディングへの影響</a>」を参照してください。</p>
        <h3 class="heading settled" data-level="8.3" id="pagebackdrop"><span class="secno">8.3. </span><span
                class="content">ルート要素グループ</span><a class="self-link" href="#pagebackdrop"></a></h3>
        <p>ルート要素の<a
                href="#isolatedgroups">isolatedグループ</a>がルート要素グループです。他の全ての要素・グループはこのグループに合成されます。ルート要素の背景（指定された場合）はルート要素グループに描画され、フィルター、クリップパス、マスク、不透明度などが適用された後に<a
                href="#rootgroup">ルートグループ</a>に合成されます（存在する場合）。</p>
        <details class="wpt-tests-block" dir="ltr" lang="ja" open>
            <summary>テスト</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/root-element-background-image-transparency-001.html"
                        title="css/compositing/root-element-background-image-transparency-001.html">root-element-background-image-transparency-001.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/root-element-background-image-transparency-001.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/root-element-background-image-transparency-001.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/root-element-background-image-transparency-002.html"
                        title="css/compositing/root-element-background-image-transparency-002.html">root-element-background-image-transparency-002.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/root-element-background-image-transparency-002.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/root-element-background-image-transparency-002.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/root-element-background-image-transparency-003.html"
                        title="css/compositing/root-element-background-image-transparency-003.html">root-element-background-image-transparency-003.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/root-element-background-image-transparency-003.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/root-element-background-image-transparency-003.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/root-element-background-image-transparency-004.html"
                        title="css/compositing/root-element-background-image-transparency-004.html">root-element-background-image-transparency-004.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/root-element-background-image-transparency-004.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/root-element-background-image-transparency-004.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/root-element-background-transparency.html"
                        title="css/compositing/root-element-background-transparency.html">root-element-background-transparency.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/root-element-background-transparency.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/root-element-background-transparency.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/root-element-blend-mode.html"
                        title="css/compositing/root-element-blend-mode.html">root-element-blend-mode.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/compositing/root-element-blend-mode.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/root-element-blend-mode.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/root-element-filter-background-clip-text-crash.html"
                        title="css/compositing/root-element-filter-background-clip-text-crash.html">root-element-filter-background-clip-text-crash.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/root-element-filter-background-clip-text-crash.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/root-element-filter-background-clip-text-crash.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/root-element-filter.html"
                        title="css/compositing/root-element-filter.html">root-element-filter.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/compositing/root-element-filter.html"><small>（ライブテスト）</small></a> <a
                        class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/root-element-filter.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/root-element-opacity-change.html"
                        title="css/compositing/root-element-opacity-change.html">root-element-opacity-change.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/compositing/root-element-opacity-change.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/root-element-opacity-change.html"><small>（ソース）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/root-element-opacity.html"
                        title="css/compositing/root-element-opacity.html">root-element-opacity.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/compositing/root-element-opacity.html"><small>（ライブテスト）</small></a> <a
                        class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/root-element-opacity.html"><small>（ソース）</small></a>
            </ul>
        </details>
        <h3 class="heading settled" data-level="8.4" id="rootgroup"><span class="secno">8.4. </span><span
                class="content">ルートグループ</span><a class="self-link" href="#rootgroup"></a></h3>
        ルートグループはキャンバス全体を包含し、ウェブページのルート要素グループを含みます（またはその下に位置します）。
        <p class="note allow-2119" role="note">ブラウザは、最終合成のために無限の<a
                href="https://www.w3.org/TR/css-color-4/#sample">白、100%不透明</a>なルートグループを使うことが多いですが、これは必須ではありません。</p>

        <h2 class="heading settled" data-level="9" id="advancedcompositing"><span class="secno">9. </span><span
                class="content">高度な合成機能</span><a class="self-link" href="#advancedcompositing"></a></h2>
        <p><a href="#simplealphacompositing">単純アルファ合成</a>は<a
                href="#porterduffcompositingoperators_srcover">source-over</a>Porter Duff合成演算子を使用します。</p>
        <p>Porter
            Duff合成は、2つの形状（ソースとデスティネーション）がピクセルの最終色に寄与するモデルに基づいています。ピクセルは4つのサブピクセル領域に分割され、それぞれの領域はソースとデスティネーションの組み合わせを表します。<a
                data-link-type="biblio" href="#biblio-porterduff" title="Compositing digital images">[PORTERDUFF]</a>
        </p>
        <p></p>
        <p>4つの領域は次の通りです：</p>
        <dl>
            <dt>ソースのみ
            <dd>ソースだけがピクセル色に寄与する領域
            <dt>デスティネーションのみ
            <dd>デスティネーションだけがピクセル色に寄与する領域
            <dt>両方
            <dd>ソースとデスティネーションの両方がピクセル色を決定する領域
            <dt>なし
            <dd>ソースもデスティネーションも最終ピクセル色に寄与しない領域
        </dl>
        <p class="note" role="note"><span class="marker">注:</span> デスティネーションはバックドロップと同義です。このセクションではPorter
            Duff合成で標準的とされるためデスティネーションと呼びます。また、合成演算子の名称にも<span class="css">destination</span>が使われています。</p>
        <div class="figure">
            <p style="text-align:center"><img alt="porter duffの影響領域の概要" src="https://www.w3.org/TR/compositing-1/examples/PD_regions.svg"></p>
            <p class="caption"></p>
        </div>
        各領域から最終ピクセル色への寄与は、図形のそのピクセルでのカバレッジと、使用される演算子によって定義されます。
        カバレッジはアルファ値で指定されます。完全なアルファ（1）は完全なカバレッジを意味し、ゼロのアルファ（0）はカバレッジなしを意味します。
        つまり、各領域の面積は、ピクセルに寄与する各形状のカバレッジに依存します。
        各領域の面積は以下の式で計算できます：
        <div class="data">
            <table>
                <tbody>
                    <tr>
                        <th>両方
                        <th>αs x αb
                    <tr>
                        <th>ソースのみ
                        <th>αs x (1 – αb)
                    <tr>
                        <th>デスティネーションのみ
                        <th>αb x (1 – αs)
                    <tr>
                        <th>なし
                        <th>(1 – αs) x (1 – αb)
            </table>
        </div>
        <p>上記の図はソース・デスティネーションの両方のカバレッジが0.5の場合を表します。</p>
        <pre>Both = 0.5 x 0.5 = 0.25
Source Only = 0.5 (1 – 0.5) = 0.25
Destination Only = 0.5(1 – 0.5) = 0.25
None = (1 – 0.5)(1 – 0.5) = 0.25
</pre>
        <p>したがって、この例で各領域のカバレッジは0.25です。</p>
        <h3 class="heading settled" data-level="9.1" id="porterduffcompositingoperators"><span class="secno">9.1.
            </span><span class="content">Porter Duff合成演算子</span><a class="self-link"
                href="#porterduffcompositingoperators"></a></h3>
        <p>LucasfilmのThomas PorterとTom Duffによる画期的な論文では、合成の代数が定義され、12個の「Porter
            Duff」演算子が開発されました。これらの演算子は、アルファやピクセルカバレッジチャンネル／値を持つグラフィカルオブジェクトの重なりによって形成される4つのサブピクセル領域を混合した結果を制御します。演算子は4領域の全ての現実的な組み合わせを使います。
        </p>
        <p>Porter Duff演算子は12種類あり、ソースとデスティネーションの全ての組み合わせを網羅します。</p>
        <p>各演算子の幾何学的表現から、各図形の寄与は出力全体のカバレッジの割合として表現されることが分かります。
            例えばsource overでは、ソースの寄与は最大（1）、デスティネーションの寄与は残り（1 – αs）です。これはソースとデスティネーションのカバレッジによって修正され、最終ピクセルのカバレッジの式となります：
        </p>
        <pre>αo = αs x 1 + αb x (1 – αs)
</pre>
        <p>分数項Fa（この例では1）とFb（この例では1 – αs）は各演算子ごとに定義され、最終ピクセル値に寄与する図形の割合を指定します。
            カバレッジの一般式は：</p>
        <pre>αs x Fa + αb x Fb
</pre>
        <p>さらに色を組み込むと、Porter Duffの一般式は次の通りです。</p>
        <pre>co = αs x Fa x Cs + αb x Fb x Cb
</pre>
        <p>各変数の意味：</p>
        <ul>
            <li>co: 出力アルファでプリ乗算された出力色 [0 &lt;= co &lt;= 1]
            <li>αs: ソースのカバレッジ（Faは演算子で定義され、ソースの寄与を制御）、Csはソースの色（アルファ乗算前）
            <li>αb: デスティネーションのカバレッジ（Fbは演算子で定義され、デスティネーションの寄与を制御）、Cbはデスティネーションの色（アルファ乗算前）
        </ul>
        <h4 class="heading settled" data-level="9.1.1" id="porterduffcompositingoperators_clear"><span
                class="secno">9.1.1. </span><span class="content">クリア</span><a class="self-link"
                href="#porterduffcompositingoperators_clear"></a></h4>
        <p>どの領域も有効ではありません。</p>
        <div class="figure">
            <img alt="porter duffクリアの例" src="https://www.w3.org/TR/compositing-1/examples/PD_clr.svg">
            <p class="caption"></p>
        </div>
        <pre>Fa = 0; Fb = 0
co = 0
αo = 0
</pre>
        <h4 class="heading settled" data-level="9.1.2" id="porterduffcompositingoperators_src"><span
                class="secno">9.1.2. </span><span class="content">コピー</span><a class="self-link"
                href="#porterduffcompositingoperators_src"></a></h4>
        <p>ソースのみが表示されます。</p>
        <div class="figure">
            <img alt="porter duffコピーの例" src="https://www.w3.org/TR/compositing-1/examples/PD_src.svg">
            <p class="caption"></p>
        </div>
        <pre>Fa = 1; Fb = 0
co = αs x Cs
αo = αs
</pre>
        <h4 class="heading settled" data-level="9.1.3" id="porterduffcompositingoperators_dst"><span
                class="secno">9.1.3. </span><span class="content">デスティネーション</span><a class="self-link"
                href="#porterduffcompositingoperators_dst"></a></h4>
        <p>デスティネーションのみが表示されます。</p>
        <div class="figure">
            <img alt="porter duffデスティネーションの例" src="https://www.w3.org/TR/compositing-1/examples/PD_dst.svg">
            <p class="caption"></p>
        </div>
        <pre>Fa = 0; Fb = 1
co = αb x Cb
αo = αb
</pre>
        <h4 class="heading settled" data-level="9.1.4" id="porterduffcompositingoperators_srcover"><span
                class="secno">9.1.4. </span><span class="content">ソースオーバー</span><a class="self-link"
                href="#porterduffcompositingoperators_srcover"></a></h4>
        <p>ソースがデスティネーションの上に配置されます。</p>
        <div class="figure">
            <img alt="porter duffソースオーバーの例" src="https://www.w3.org/TR/compositing-1/examples/PD_src-over.svg">
            <p class="caption"></p>
        </div>
        <pre>Fa = 1; Fb = 1 – αs
co = αs x Cs + αb x Cb x (1 – αs)
αo = αs + αb x (1 – αs)
</pre>
        <h4 class="heading settled" data-level="9.1.5" id="porterduffcompositingoperators_dstover"><span
                class="secno">9.1.5. </span><span class="content">デスティネーションオーバー</span><a class="self-link"
                href="#porterduffcompositingoperators_dstover"></a></h4>
        <p>デスティネーションがソースの上に配置されます。</p>
        <div class="figure">
            <img alt="porter duffデスティネーションオーバーの例" src="https://www.w3.org/TR/compositing-1/examples/PD_dst-over.svg">
            <p class="caption"></p>
        </div>
        <pre>Fa = 1 – αb; Fb = 1
co = αs x Cs x (1 – αb) + αb x Cb
αo = αs x (1 – αb) + αb
</pre>
        <h4 class="heading settled" data-level="9.1.6" id="porterduffcompositingoperators_srcin"><span
                class="secno">9.1.6. </span><span class="content">ソースイン</span><a class="self-link"
                href="#porterduffcompositingoperators_srcin"></a></h4>
        <p>デスティネーションと重なるソースがデスティネーションを置き換えます。</p>
        <div class="figure">
            <img alt="porter duffソースインの例" src="https://www.w3.org/TR/compositing-1/examples/PD_src-in.svg">
            <p class="caption"></p>
        </div>
        <pre>Fa = αb; Fb = 0
co = αs x Cs x αb
αo = αs x αb
</pre>
        <h4 class="heading settled" data-level="9.1.7" id="porterduffcompositingoperators_dstin"><span
                class="secno">9.1.7. </span><span class="content">デスティネーションイン</span><a class="self-link"
                href="#porterduffcompositingoperators_dstin"></a></h4>
        ソースと重なるデスティネーションがソースを置き換えます。
        <div class="figure">
            <img alt="porter duffデスティネーションインの例" src="https://www.w3.org/TR/compositing-1/examples/PD_dst-in.svg">
            <p class="caption"></p>
        </div>
        <pre>Fa = 0; Fb = αs
co = αb x Cb x αs
αo = αb x αs
</pre>
        <h4 class="heading settled" data-level="9.1.8" id="porterduffcompositingoperators_srcout"><span
                class="secno">9.1.8. </span><span class="content">ソースアウト</span><a class="self-link"
                href="#porterduffcompositingoperators_srcout"></a></h4>
        <p>ソースはデスティネーションの外側に配置されます。</p>
        <div class="figure">
            <img alt="porter duffソースアウトの例" src="https://www.w3.org/TR/compositing-1/examples/PD_src-out.svg">
            <p class="caption"></p>
        </div>
        <pre>Fa = 1 – αb; Fb = 0
co = αs x Cs x (1 – αb)
αo = αs x (1 – αb)
</pre>
        <h4 class="heading settled" data-level="9.1.9" id="porterduffcompositingoperators_dstout"><span
                class="secno">9.1.9. </span><span class="content">デスティネーションアウト</span><a class="self-link"
                href="#porterduffcompositingoperators_dstout"></a></h4>
        <p>デスティネーションはソースの外側に配置されます。</p>
        <div class="figure">
            <img alt="porter duffデスティネーションアウトの例" src="https://www.w3.org/TR/compositing-1/examples/PD_dst-out.svg">
            <p class="caption"></p>
        </div>
        <pre>Fa = 0; Fb = 1 – αs
co = αb x Cb x (1 – αs)
αo = αb x (1 – αs)
</pre>
        <h4 class="heading settled" data-level="9.1.10" id="porterduffcompositingoperators_srcatop"><span
                class="secno">9.1.10. </span><span class="content">ソースアトップ</span><a class="self-link"
                href="#porterduffcompositingoperators_srcatop"></a></h4>
        <p>デスティネーションと重なるソースがデスティネーションを置き換え、デスティネーションは他の場所に描画されます。</p>
        <div class="figure">
            <img alt="porter duffソースアトップの例" src="https://www.w3.org/TR/compositing-1/examples/PD_src-atop.svg">
            <p class="caption"></p>
        </div>
        <pre>Fa = αb; Fb = 1 – αs
co = αs x Cs x αb + αb x Cb x (1 – αs)
αo = αs x αb + αb x (1 – αs)
</pre>
        <h4 class="heading settled" data-level="9.1.11" id="porterduffcompositingoperators_dstatop"><span
                class="secno">9.1.11. </span><span class="content">デスティネーションアトップ</span><a class="self-link"
                href="#porterduffcompositingoperators_dstatop"></a></h4>
        <p>ソースと重なるデスティネーションがソースを置き換え、ソースは他の場所に描画されます。</p>
        <div class="figure">
            <img alt="porter duffデスティネーションアトップの例" src="https://www.w3.org/TR/compositing-1/examples/PD_dst-atop.svg">
            <p class="caption"></p>
        </div>
        <pre>Fa = 1 - αb; Fb = αs
co = αs x Cs x (1 - αb) + αb x Cb x αs
αo = αs x (1 - αb) + αb x αs
</pre>
        <h4 class="heading settled" data-level="9.1.12" id="porterduffcompositingoperators_xor"><span
                class="secno">9.1.12. </span><span class="content">XOR</span><a class="self-link"
                href="#porterduffcompositingoperators_xor"></a></h4>
        <p>ソースとデスティネーションの重ならない領域が合成されます。</p>
        <div class="figure">
            <img alt="porter duff XORの例" src="https://www.w3.org/TR/compositing-1/examples/PD_xor.svg">
            <p class="caption"></p>
        </div>
        <pre>Fa = 1 - αb; Fb = 1 – αs
co = αs x Cs x (1 - αb) + αb x Cb x (1 – αs)
αo = αs x (1 - αb) + αb x (1 – αs)
</pre>
        <h4 class="heading settled" data-level="9.1.13" id="porterduffcompositingoperators_plus"><span
                class="secno">9.1.13. </span><span class="content">ライター</span><a class="self-link"
                href="#porterduffcompositingoperators_plus"></a></h4>
        ソース画像とデスティネーション画像の合計を表示します。Porter Duff論文では<span class="css">plus</span>演算子として定義されています。<a data-link-type="biblio"
            href="#biblio-porterduff" title="Compositing digital images">[PORTERDUFF]</a>
        <pre>Fa = 1; Fb = 1
co = αs x Cs + αb x Cb;
αo = αs + αb
</pre>
        <h3 class="heading settled" data-level="9.2" id="groupcompositing"><span class="secno">9.2. </span><span
                class="content">Porter Duffモードによるグループ合成動作</span><a class="self-link" href="#groupcompositing"></a></h3>
        <p>isolatedグループ内の要素を合成する場合、要素は透明な黒の初期バックドロップ上に合成されます。グループの最下層要素が、バックドロップ依存のPorter Duff合成演算子（<a
                href="#porterduffcompositingoperators_dst">デスティネーション</a>、
            <a href="#porterduffcompositingoperators_srcin">ソースイン</a>、<a
                href="#porterduffcompositingoperators_dstin">デスティネーションイン</a>、<a
                href="#porterduffcompositingoperators_dstout">デスティネーションアウト</a>、<a
                href="#porterduffcompositingoperators_srcatop">ソースアトップ</a>など）を使う場合、合成結果は空になります。グループ内の以降の要素は、最初の合成結果と合成されます。
        </p>
        <h2 class="heading settled" data-level="10" id="blending"><span class="secno">10. </span><span
                class="content">ブレンディング</span><a class="self-link" href="#blending"></a></h2>
        <p>ブレンディングは、ソース要素と<a data-link-type="dfn" href="#backdrop"
                id="ref-for-backdrop⑧">バックドロップ</a>が重なる部分の色混合を計算する合成の側面です。<br>概念的には、ソース要素の色がその場でバックドロップとブレンドされます。
            ブレンディング後、修正されたソース要素がバックドロップと合成されます。
            実際には、これらは通常ひとつのステップで行われます。<br>ブレンディングの計算ではプリ乗算済みの色値を使用してはなりません。</p>
        <p>「混合」式は次のように定義されます：</p>
        <pre>Cm = B(Cb, Cs)
</pre>
        <p>意味：</p>
        <ul>
            <li>Cm: ブレンディング後の結果色
            <li>B: ブレンディングを行う式
            <li>Cb: <a data-link-type="dfn" href="#backdrop" id="ref-for-backdrop⑨">バックドロップ</a>の色
            <li>Cs: ソース色
        </ul>
        <p>混合式の結果は、色範囲の最小値・最大値にクランプしなければなりません。</p>
        <p>混合関数の結果はバックドロップのアルファで調整されます。完全に不透明なバックドロップでは混合関数が完全に適用されます。
            バックドロップが透明な場合は、最終結果はソース色と混合色の加重平均となり、重みはバックドロップのアルファ値によって制御されます。
            新しい色の値は次のようになります：</p>
        <pre>Cr = (1 - αb) x Cs + αb x B(Cb, Cs)
</pre>
        <p>意味：</p>
        <ul>
            <li>Cr: 結果色
            <li>B: ブレンディングを行う式
            <li>Cs: ソース色
            <li>Cb: <a data-link-type="dfn" href="#backdrop" id="ref-for-backdrop①⓪">バックドロップ</a>の色
            <li>αb: <a data-link-type="dfn" href="#backdrop" id="ref-for-backdrop①①">バックドロップ</a>のアルファ
        </ul>
        <div class="example" id="ex-blend-with-opacity">
            <a class="self-link" href="#ex-blend-with-opacity"></a>
            <div class="figure">
                <img alt="不透明度のあるブレンディング例" src="https://www.w3.org/TR/compositing-1/examples/blend_background_opacity.svg">
                <p class="caption"></p>
            </div>
            <p> この例では、ブレンディングモードを持つ赤い矩形が、異なる不透明度を持つ緑色の矩形群の上に配置されています。</p>
            <p> 上の矩形が、<a data-link-type="dfn" href="#backdrop"
                    id="ref-for-backdrop①②">バックドロップ</a>の不透明度が低くなるほど赤に近づくことに注目してください。 </p>
        </div>
        <p class="note" role="note"> 注：次の式は、ソースとバックドロップが交差する領域の色値を与え、その後指定されたPorter
            Duff合成式で合成されます。単純アルファブレンディングの場合、式は次のようになります：</p>
        <pre>単純アルファ合成:
    co = cs + cb x (1 - αs)
非プリ乗算で表記:
    αo x Co = αs x Cs + (1 - αs) x αb x Cb
ここでCsにブレンディング結果を代入すると:
    αo x Co = αs x ((1 - αb) x Cs + αb x B(Cb, Cs)) + (1 - αs) x αb x Cb
            = αs x (1 - αb) x Cs + αs x αb x B(Cb, Cs) + (1 - αs) x αb x Cb
</pre>
        <p></p>
        <h3 class="heading settled" data-level="10.1" id="blendingseparable"><span class="secno">10.1. </span><span
                class="content">分離型ブレンドモード</span><a class="self-link" href="#blendingseparable"></a></h3>
        <p>ブレンドモードが分離型と呼ばれるのは、結果色の各成分が、構成する<a data-link-type="dfn" href="#backdrop"
                id="ref-for-backdrop①③">バックドロップ</a>およびソース色の対応する成分によって完全に決定される場合です。つまり、混合式が各成分セットに<strong>個別に</strong>適用されます。
        </p>
        <p>以下の各ブレンドモードは、色成分ごとに混合関数B(Cb, Cs)を適用します。簡単のため、この章の例はすべて<a
                href="#porterduffcompositingoperators_srcover">ソースオーバー</a>合成を使用します。</p>
        <h4 class="heading settled" data-level="10.1.1" id="blendingnormal"><span class="secno">10.1.1. </span><span
                class="content"><dfn class="dfn-paneled css" data-dfn-for="<blend-mode>" data-dfn-type="value"
                    data-export id="valdef-blend-mode-normal">normal</dfn>ブレンドモード</span><a class="self-link"
                href="#blendingnormal"></a></h4>
        <p>これはデフォルトの属性で、ブレンディングなしを指定します。混合式は単にソース色を選択します。</p>
        <pre>B(Cb, Cs) = Cs
</pre>
        <div class="figure">
            <img alt="normalブレンディングの例" height="200" src="https://www.w3.org/TR/compositing-1/examples/normal.png" width="200">
            <p class="caption"></p>
        </div>
        <h4 class="heading settled" data-level="10.1.2" id="blendingmultiply"><span class="secno">10.1.2. </span><span
                class="content"><dfn class="dfn-paneled css" data-dfn-for="<blend-mode>" data-dfn-type="value"
                    data-export id="valdef-blend-mode-multiply">multiply</dfn>ブレンドモード</span><a class="self-link"
                href="#blendingmultiply"></a></h4>
        <p>ソース色がデスティネーション色と乗算され、デスティネーションを置き換えます。</p>
        <p>結果色は、ソースまたはデスティネーション色のいずれよりも必ず暗くなります。任意の色と黒を乗算すると黒になります。任意の色と白を乗算すると元の色が維持されます。</p>
        <pre>B(Cb, Cs) = Cb x Cs
</pre>
        <p></p>
        <div class="figure">
            <img alt="multiplyブレンディングの例" height="200" src="https://www.w3.org/TR/compositing-1/examples/multiply.png" width="200">
            <p class="caption"></p>
        </div>
        <h4 class="heading settled" data-level="10.1.3" id="blendingscreen"><span class="secno">10.1.3. </span><span
                class="content"><dfn class="dfn-paneled css" data-dfn-for="<blend-mode>" data-dfn-type="value"
                    data-export id="valdef-blend-mode-screen">screen</dfn>ブレンドモード</span><a class="self-link"
                href="#blendingscreen"></a></h4>
        <p><a data-link-type="dfn" href="#backdrop" id="ref-for-backdrop①④">バックドロップ</a>およびソース色値の補数を乗算し、結果の補数を取ります。</p>
        <p>結果色は、2つの成分色のいずれよりも必ず明るくなります。白でスクリーンすると白になり、黒でスクリーンすると元の色が維持されます。この効果は複数の写真スライドを同時に1つのスクリーンに投影するのと似ています。</p>
        <pre>B(Cb, Cs) = 1 - [(1 - Cb) x (1 - Cs)]
          = Cb + Cs -(Cb x Cs)
</pre>
        <p></p>
        <div class="figure">
            <img alt="screenブレンディングの例" height="200" src="https://www.w3.org/TR/compositing-1/examples/screen.png" width="200">
            <p class="caption"></p>
        </div>
        <h4 class="heading settled" data-level="10.1.4" id="blendingoverlay"><span class="secno">10.1.4. </span><span
                class="content"><dfn class="dfn-paneled css" data-dfn-for="<blend-mode>" data-dfn-type="value"
                    data-export id="valdef-blend-mode-overlay">overlay</dfn>ブレンドモード</span><a class="self-link"
                href="#blendingoverlay"></a></h4>
        <p><a data-link-type="dfn" href="#backdrop" id="ref-for-backdrop①⑤">バックドロップ</a>色値によって乗算またはスクリーンされます。</p>
        <p>ソース色は<a data-link-type="dfn" href="#backdrop"
                id="ref-for-backdrop①⑥">バックドロップ</a>にオーバーレイされ、ハイライトとシャドウを維持します。<span
                id="ref-for-backdrop①⑦">バックドロップ</span>色は置き換えられるのではなく、ソース色と混合され、<span
                id="ref-for-backdrop①⑧">バックドロップ</span>の明るさや暗さを反映します。</p>
        <pre>B(Cb, Cs) = HardLight(Cs, Cb)
</pre>
        <p>オーバレイは<a class="css" data-link-type="value" href="#valdef-blend-mode-hard-light"
                id="ref-for-valdef-blend-mode-hard-light①">hard-light</a>ブレンドモードの逆です。<span
                id="ref-for-valdef-blend-mode-hard-light②">hard-light</span>の定義を参照してください。</p>
        <div class="figure">
            <img alt="overlayブレンディングの例" height="200" src="https://www.w3.org/TR/compositing-1/examples/overlay.png" width="200">
            <p class="caption"></p>
        </div>
        <h4 class="heading settled" data-level="10.1.5" id="blendingdarken"><span class="secno">10.1.5. </span><span
                class="content"><dfn class="dfn-paneled css" data-dfn-for="<blend-mode>" data-dfn-type="value"
                    data-export id="valdef-blend-mode-darken">darken</dfn>ブレンドモード</span><a class="self-link"
                href="#blendingdarken"></a></h4>
        <p><a data-link-type="dfn" href="#backdrop" id="ref-for-backdrop①⑨">バックドロップ</a>とソース色のうち暗い方を選択します。</p>
        <p><a data-link-type="dfn" href="#backdrop" id="ref-for-backdrop②⓪">バックドロップ</a>はソースが暗い場合に置き換えられ、そうでない場合は変更されません。
        </p>
        <pre>B(Cb, Cs) = min(Cb, Cs)
</pre>
        <div class="figure">
            <img alt="darkenブレンディングの例" height="200" src="https://www.w3.org/TR/compositing-1/examples/darken.png" width="200">
            <p class="caption"></p>
        </div>
        <h4 class="heading settled" data-level="10.1.6" id="blendinglighten"><span class="secno">10.1.6. </span><span
                class="content"><dfn class="dfn-paneled css" data-dfn-for="<blend-mode>" data-dfn-type="value"
                    data-export id="valdef-blend-mode-lighten">lighten</dfn>ブレンドモード</span><a class="self-link"
                href="#blendinglighten"></a></h4>
        <p><a data-link-type="dfn" href="#backdrop" id="ref-for-backdrop②①">バックドロップ</a>とソース色のうち明るい方を選択します。</p>
        <p><a data-link-type="dfn" href="#backdrop"
                id="ref-for-backdrop②②">バックドロップ</a>はソースが明るい場合に置き換えられ、そうでない場合は変更されません。</p>
        <pre>B(Cb, Cs) = max(Cb, Cs)
</pre>
        <p>結果が範囲を超えた場合は切り捨てなければなりません。</p>
        <div class="figure">
            <img alt="lightenブレンディングの例" height="200" src="https://www.w3.org/TR/compositing-1/examples/lighten.png" width="200">
            <p class="caption"></p>
        </div>
        <h4 class="heading settled" data-level="10.1.7" id="blendingcolordodge"><span class="secno">10.1.7. </span><span
                class="content"><dfn class="dfn-paneled css" data-dfn-for="<blend-mode>" data-dfn-type="value"
                    data-export id="valdef-blend-mode-color-dodge">color-dodge</dfn>ブレンドモード</span><a class="self-link"
                href="#blendingcolordodge"></a></h4>
        <p><a data-link-type="dfn" href="#backdrop" id="ref-for-backdrop②③">バックドロップ</a>色を明るくし、ソース色を反映します。黒で塗ると変化はありません。
        </p>
        <pre>if(Cb == 0)
    B(Cb, Cs) = 0
else if(Cs == 1)
    B(Cb, Cs) = 1
else
    B(Cb, Cs) = min(1, Cb / (1 - Cs))
</pre>
        <div class="figure">
            <img alt="color-dodgeブレンディングの例" height="200" src="https://www.w3.org/TR/compositing-1/examples/colordodge.png" width="200">
            <p class="caption"></p>
        </div>
        <h4 class="heading settled" data-level="10.1.8" id="blendingcolorburn"><span class="secno">10.1.8. </span><span
                class="content"><dfn class="dfn-paneled css" data-dfn-for="<blend-mode>" data-dfn-type="value"
                    data-export id="valdef-blend-mode-color-burn">color-burn</dfn>ブレンドモード</span><a class="self-link"
                href="#blendingcolorburn"></a></h4>
        <p><a data-link-type="dfn" href="#backdrop" id="ref-for-backdrop②④">バックドロップ</a>色を暗くし、ソース色を反映します。白で塗ると変化はありません。
        </p>
        <pre>if(Cb == 1)
    B(Cb, Cs) = 1
else if(Cs == 0)
    B(Cb, Cs) = 0
else
    B(Cb, Cs) = 1 - min(1, (1 - Cb) / Cs)
</pre>
        <div class="figure">
            <img alt="color-burnブレンディングの例" height="200" src="https://www.w3.org/TR/compositing-1/examples/colorburn.png" width="200">
            <p class="caption"></p>
        </div>
        <h4 class="heading settled" data-level="10.1.9" id="blendinghardlight"><span class="secno">10.1.9. </span><span
                class="content"><dfn class="dfn-paneled css" data-dfn-for="<blend-mode>" data-dfn-type="value"
                    data-export id="valdef-blend-mode-hard-light">hard-light</dfn>ブレンドモード</span><a class="self-link"
                href="#blendinghardlight"></a></h4>
        <p>ソース色値によって乗算またはスクリーンされます。効果はバックドロップに強いスポットライトを当てたようなものです。</p>
        <pre>if(Cs &lt;= 0.5)
    B(Cb, Cs) = Multiply(Cb, 2 x Cs)
else
    B(Cb, Cs) = Screen(Cb, 2 x Cs -1)
</pre>
        <p><a class="css" data-link-type="value" href="#valdef-blend-mode-multiply"
                id="ref-for-valdef-blend-mode-multiply①">multiply</a>および<a class="css" data-link-type="value"
                href="#valdef-blend-mode-screen" id="ref-for-valdef-blend-mode-screen①">screen</a>の式を参照してください。
        </p>
        <div class="figure">
            <img alt="hard-lightブレンディングの例" height="200" src="https://www.w3.org/TR/compositing-1/examples/hardlight.png" width="200">
            <p class="caption"></p>
        </div>
        <h4 class="heading settled" data-level="10.1.10" id="blendingsoftlight"><span class="secno">10.1.10.
            </span><span class="content"><dfn class="dfn-paneled css" data-dfn-for="<blend-mode>" data-dfn-type="value"
                    data-export id="valdef-blend-mode-soft-light">soft-light</dfn>ブレンドモード</span><a class="self-link"
                href="#blendingsoftlight"></a></h4>
        <p>ソース色値によって暗くまたは明るくします。効果はバックドロップに拡散したスポットライトを当てたようなものです。</p>
        <pre>    if(Cs &lt;= 0.5)
        B(Cb, Cs) = Cb - (1 - 2 x Cs) x Cb x (1 - Cb)
    else
        B(Cb, Cs) = Cb + (2 x Cs - 1) x (D(Cb) - Cb)
with
    if(Cb &lt;= 0.25)
        D(Cb) = ((16 * Cb - 12) x Cb + 4) x Cb
    else
        D(Cb) = sqrt(Cb)
</pre>
        <div class="figure">
            <img alt="soft-lightブレンディングの例" height="200" src="https://www.w3.org/TR/compositing-1/examples/softlight.png" width="200">
            <p class="caption"></p>
        </div>
        <h4 class="heading settled" data-level="10.1.11" id="blendingdifference"><span class="secno">10.1.11.
            </span><span class="content"><dfn class="dfn-paneled css" data-dfn-for="<blend-mode>" data-dfn-type="value"
                    data-export id="valdef-blend-mode-difference">difference</dfn>ブレンドモード</span><a class="self-link"
                href="#blendingdifference"></a></h4>
        <p>2つの成分色のうち暗い方を明るい色から減算します。</p>
        <p>白で塗ると<a data-link-type="dfn" href="#backdrop" id="ref-for-backdrop②⑦">バックドロップ</a>色が反転し、黒で塗ると変化しません。</p>
        <pre>B(Cb, Cs) = | Cb - Cs |
</pre>
        <p></p>
        <div class="figure">
            <img alt="differenceブレンディングの例" height="200" src="https://www.w3.org/TR/compositing-1/examples/difference.png" width="200">
            <p class="caption"></p>
        </div>
        <h4 class="heading settled" data-level="10.1.12" id="blendingexclusion"><span class="secno">10.1.12.
            </span><span class="content"><dfn class="dfn-paneled css" data-dfn-for="<blend-mode>" data-dfn-type="value"
                    data-export id="valdef-blend-mode-exclusion">exclusion</dfn>ブレンドモード</span><a class="self-link"
                href="#blendingexclusion"></a></h4>
        <p>Differenceモードに似た効果ですが、コントラストは低めです。白で塗ると<a data-link-type="dfn" href="#backdrop"
                id="ref-for-backdrop②⑧">バックドロップ</a>色が反転し、黒で塗ると変化しません。</p>
        <pre>B(Cb, Cs) = Cb + Cs - 2 x Cb x Cs
</pre>
        <p></p>
        <div class="figure">
            <img alt="exclusionブレンディングの例" height="200" src="https://www.w3.org/TR/compositing-1/examples/exclusion.png" width="200">
            <p class="caption"></p>
        </div>
        <h3 class="heading settled" data-level="10.2" id="blendingnonseparable"><span class="secno">10.2. </span><span
                class="content">非分離型ブレンドモード</span><a class="self-link" href="#blendingnonseparable"></a>
        </h3>
        <p>非分離型ブレンドモードは、各成分を個別に見る分離型と異なり、すべての色成分を組み合わせて考慮します。
            これらのブレンドモードは概念的に以下の手順を踏みます：</p>
        <ol>
            <li><a data-link-type="dfn" href="#backdrop"
                    id="ref-for-backdrop②⑨">バックドロップ</a>とソース色をブレンディング色空間から中間の色相・彩度・輝度表現へ変換する。
            <li><a data-link-type="dfn" href="#backdrop"
                    id="ref-for-backdrop③⓪">バックドロップ</a>とソース色の色相・彩度・輝度成分を組み合わせて新しい色を作成する。
            <li>結果を元の色空間に変換する。
        </ol>
        <p>非分離型ブレンドモードの数式では、いくつかの補助関数を使用します：</p>
        <pre>    Lum(C) = 0.3 × Cred + 0.59 × Cgreen + 0.11 × Cblue

    ClipColor(C)
        L = Lum(C)
        n = min(Cred, Cgreen, Cblue)
        x = max(Cred, Cgreen, Cblue)
        if(n &lt; 0)
            C = L + (((C - L) × L) / (L - n))

        if(x > 1)
            C = L + (((C - L) × (1 - L)) / (x - L))

        return C

    SetLum(C, l)
        d = l - Lum(C)
        Cred = Cred + d
        Cgreen = Cgreen + d
        Cblue = Cblue + d
        return ClipColor(C)

    Sat(C) = max(Cred, Cgreen, Cblue) - min(Cred, Cgreen, Cblue)

次の関数内のmin, mid, maxの添え字は、関数に入ったときの色成分の最小・中間・最大値を指します。

    SetSat(C, s)
        if(Cmax > Cmin)
            Cmid = (((Cmid - Cmin) × s) / (Cmax - Cmin))
            Cmax = s
        else
            Cmid = Cmax = 0
        Cmin = 0
        return C;
</pre>
        <h4 class="heading settled" data-level="10.2.1" id="blendinghue"><span class="secno">10.2.1. </span><span
                class="content"><dfn class="dfn-paneled css" data-dfn-for="<blend-mode>" data-dfn-type="value"
                    data-export id="valdef-blend-mode-hue">hue</dfn>ブレンドモード</span><a class="self-link"
                href="#blendinghue"></a></h4>
        <p>ソース色の色相と<a data-link-type="dfn" href="#backdrop" id="ref-for-backdrop③①">バックドロップ</a>色の彩度・輝度で新しい色を作成します。</p>
        <pre>B(Cb, Cs) = SetLum(SetSat(Cs, Sat(Cb)), Lum(Cb))
</pre>
        <div class="figure">
            <img alt="hueブレンディングの例" height="200" src="https://www.w3.org/TR/compositing-1/examples/hue.png" width="200">
            <p class="caption"></p>
        </div>
        <h4 class="heading settled" data-level="10.2.2" id="blendingsaturation"><span class="secno">10.2.2. </span><span
                class="content"><dfn class="dfn-paneled css" data-dfn-for="<blend-mode>" data-dfn-type="value"
                    data-export id="valdef-blend-mode-saturation">saturation</dfn>ブレンドモード</span><a class="self-link"
                href="#blendingsaturation"></a></h4>
        <p>ソース色の彩度と<a data-link-type="dfn" href="#backdrop"
                id="ref-for-backdrop③②">バックドロップ</a>色の色相・輝度で新しい色を作成します。このモードで<span
                id="ref-for-backdrop③③">バックドロップ</span>が純粋なグレー（彩度なし）の領域を塗ると変化はありません。</p>
        <pre>B(Cb, Cs) = SetLum(SetSat(Cb, Sat(Cs)), Lum(Cb))
</pre>
        <div class="figure">
            <img alt="saturationブレンディングの例" height="200" src="https://www.w3.org/TR/compositing-1/examples/saturation.png" width="200">
            <p class="caption"></p>
        </div>
        <h4 class="heading settled" data-level="10.2.3" id="blendingcolor"><span class="secno">10.2.3. </span><span
                class="content"><dfn class="dfn-paneled css" data-dfn-for="<blend-mode>" data-dfn-type="value"
                    data-export id="valdef-blend-mode-color">color</dfn>ブレンドモード</span><a class="self-link"
                href="#blendingcolor"></a></h4>
        <p>ソース色の色相・彩度と<a data-link-type="dfn" href="#backdrop"
                id="ref-for-backdrop③④">バックドロップ</a>色の輝度で新しい色を作成します。これにより<span
                id="ref-for-backdrop③⑤">バックドロップ</span>のグレー階調が保持され、モノクロ画像の着色やカラー画像の色合い付けに便利です。</p>
        <pre>B(Cb, Cs) = SetLum(Cs, Lum(Cb))
</pre>
        <div class="figure">
            <img alt="colorブレンディングの例" height="200" src="https://www.w3.org/TR/compositing-1/examples/color.png" width="200">
            <p class="caption"></p>
        </div>
        <h4 class="heading settled" data-level="10.2.4" id="blendingluminosity"><span class="secno">10.2.4. </span><span
                class="content"><dfn class="dfn-paneled css" data-dfn-for="<blend-mode>" data-dfn-type="value"
                    data-export id="valdef-blend-mode-luminosity">luminosity</dfn>ブレンドモード</span><a class="self-link"
                href="#blendingluminosity"></a></h4>
        <p>ソース色の輝度と<a data-link-type="dfn" href="#backdrop"
                id="ref-for-backdrop③⑥">バックドロップ</a>色の色相・彩度で新しい色を作成します。これはColorモードの逆の効果となります。</p>
        <pre>B(Cb, Cs) = SetLum(Cb, Lum(Cs))
</pre>
        <div class="figure">
            <img alt="luminosityブレンディングの例" height="200" src="https://www.w3.org/TR/compositing-1/examples/luminosity.png" width="200">
            <p class="caption"></p>
        </div>
        <h3 class="heading settled" data-level="10.3" id="isolationblending"><span class="secno">10.3. </span><span
                class="content">グループアイソレーションによるブレンディングへの影響</span><a class="self-link" href="#isolationblending"></a>
        </h3>
        <p class="note" role="note"><span class="marker">注:</span>
            次の例では、紙飛行機を構成する要素がグループ内にあり、それぞれの要素にmultiplyブレンドモードが設定されています。</p>
        <div class="example" id="ex-isolated-group">
            <a class="self-link" href="#ex-isolated-group"></a> 左側の飛行機は通常のグループ、右側は<a
                href="#isolatedgroups">isolatedグループ</a>です。
            <p></p>
            <p> isolatedグループでは、グループ内の要素は空の初期バックドロップ上に合成されるため、グループ内の要素はバックドロップとmultiplyしません。
                通常グループでは、グループ内の要素は土地や空を含む初期バックドロップ上に合成されるため、飛行機の各要素が土地や空とmultiplyします。
                どちらの場合も、グループ合成の結果は通常のmix-blend-mode（グループに適用されるデフォルトのmix-blend-mode）で土地や空と合成されます。 </p>
            <div class="figure">
                <img alt="isolatedグループのブレンディング例" height="200" src="https://www.w3.org/TR/compositing-1/examples/isolate_blend_example.png" width="506">
                <p class="caption"></p>
            </div>
        </div>
        <h2 class="no-num heading settled" id="privacy"><span class="content">プライバシーに関する考慮事項</span><a class="self-link"
                href="#privacy"></a></h2>
        <p>本仕様には新たなプライバシーに関する考慮事項は報告されていません。</p>
        <h2 class="no-num heading settled" id="security"><span class="content">セキュリティに関する考慮事項</span><a class="self-link"
                href="#security"></a></h2>
        <p>ブレンディングと合成処理のタイミングは、ソース・デスティネーションピクセルに依存しないことが重要です。処理はピクセル値に関わらず常に同じ時間で実行されるように実装しなければなりません。</p>
        <p></p>
        <div class="note" role="note">
            <p> このルールが守られない場合、攻撃者が情報を推測してタイミング攻撃を仕掛ける可能性があります。 </p>
            <p>タイミング攻撃とは、処理時間の違いを分析することで、本来保護されている内容の情報を取得する手法です。例えば赤いピクセルの描画に緑のピクセルよりも時間がかかる場合、描画される要素の粗い画像を、実際の内容にアクセスすることなく復元できてしまいます。
            </p>
        </div>
        <h2 class="no-num heading settled" id="changes"><span class="content">変更履歴</span><a class="self-link"
                href="#changes"></a></h2>
        <p>この仕様は、<a href="https://www.w3.org/TR/2015/CR-compositing-1-20150113/">2015年1月13日 勧告候補</a>から以下の変更が加えられました：</p>
        <ul>
            <li>プライバシー・セキュリティセクション追加
            <li>Animatable: no を Animation type: discrete に変更
            <li>HTMLおよびSVGのルート要素とルート要素グループを定義
            <li>ルートグループが必ずしも不透明な白である必要がない旨を明記
            <li>ルートグループとisolatingグループの定義を改善
            <li>乗算記号×を一貫して使用し、xや*を使わないよう修正
            <li><a class="css" data-link-type="maybe" href="https://www.w3.org/TR/css-color-4/#valdef-color-green"
                    id="ref-for-valdef-color-green">green</a>ではなく、<a class="css" data-link-type="maybe"
                    href="https://www.w3.org/TR/css-color-4/#valdef-color-lime"
                    id="ref-for-valdef-color-lime">lime</a>が必要な箇所の例を修正
            <li>background-blend-modeの初期値を修正
            <li>様々なマークアップ・リンク修正
        </ul>
        <p>この仕様は、<a href="https://www.w3.org/TR/2014/CR-compositing-1-20140220/">2014年2月20日 勧告候補</a>から以下の変更が加えられました：</p>
        <ul>
            <li>&lt;img>として埋め込まれたSVG画像の強制isolatingは「リスクあり」から除去
            <li><a class="production css" data-link-type="type" href="#compositemode"
                    id="ref-for-compositemode②">&lt;composite-mode></a>のオプションからdestinationを削除
        </ul>
        <p>この仕様は、<a href="https://www.w3.org/TR/2013/WD-compositing-1-20131010/">2014年1月7日 Last Call Working
                draft</a>から以下の変更が加えられました：</p>
        <ul>
            <li>不要な規範的・参考文献を削除
        </ul>
        <p>この仕様は、<a href="https://www.w3.org/TR/2013/WD-compositing-1-20131010/">2013年10月10日 Last Call Working
                draft</a>から以下の変更が加えられました：</p>
        <ul>
            <li>knockoutを非規範セクションから削除
            <li>単純アルファ合成からSVGに関する段落を削除
            <li>abstractをCSS対応・意図明確化のため修正
            <li>clip-to-selfおよびその参照を削除
            <li>セクション5-10を規範的にし、注記・例を明確化
        </ul>
        <p>この仕様は、<a href="https://www.w3.org/TR/2013/WD-compositing-1-20130625/">2013年6月25日 Working
                Draft</a>から以下の変更が加えられました：</p>
        <ul>
            <li>SVGでisolatedグループを作成する演算子からclippingを除去
            <li>background-blend-modeを他のbackground構文の繰り返し動作と一致するよう変更
            <li>mix-compositeプロパティを削除
            <li>すべてのオープンなissueを解決
        </ul>
        <details class="wpt-tests-block" data-var-ignore dir="ltr" lang="ja" open>
            <summary>テスト</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/compositing/opacity-and-transform-animation-crash.html"
                        title="css/compositing/opacity-and-transform-animation-crash.html">opacity-and-transform-animation-crash.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/compositing/opacity-and-transform-animation-crash.html"><small>（ライブテスト）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/compositing/opacity-and-transform-animation-crash.html"><small>（ソース）</small></a>
            </ul>
        </details>
    </main>
    <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">適合性</span><a class="self-link"
            href="#w3c-conformance"></a></h2>
    <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content">文書の慣例</span><a class="self-link"
            href="#w3c-conventions"></a></h3>
    <p>適合要件は記述的な断定とRFC 2119用語の組み合わせで表現されます。規範部分における「MUST」「MUST NOT」「REQUIRED」「SHALL」「SHALL NOT」「SHOULD」「SHOULD
        NOT」「RECOMMENDED」「MAY」「OPTIONAL」という語は、RFC 2119に記載されている通りに解釈されます。
        ただし、可読性のため、これらの語は本仕様書ではすべて大文字では記載されません。</p>
    <p>本仕様書のテキストは、明示的に非規範と示されているセクション、例、および注記を除き、すべて規範的です。<a data-link-type="biblio" href="#biblio-rfc2119"
            title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a></p>
    <p>本仕様書の例は、「for example」という語で始まるか、<code>class="example"</code>を指定して規範テキストから区別されています。次のような形です：</p>
    <div class="example" id="w3c-example">
        <a class="self-link" href="#w3c-example"></a>
        <p>これは参考例の一例です。</p>
    </div>
    <p>参考注記は「Note」で始まり、<code>class="note"</code>を指定して規範テキストから区別されています。次のような形です：</p>
    <p class="note" role="note">注：これは参考注記です。</p>
    <p>助言事項は、特別な注意を喚起するようにスタイルされた規範セクションであり、<code>&lt;strong class="advisement"></code>を用いて他の規範テキストから区別されます。例：<strong
            class="advisement"> UAはアクセシブルな代替手段を必ず提供しなければなりません。 </strong></p>
    <details class="wpt-tests-block" dir="ltr" lang="ja" open>
        <summary>テスト</summary>
        <p>本仕様の内容に関するテストは、このような「テスト」ブロック内に記載される場合があります。
            このようなブロックは、非規範です。</p>
        <ul class="wpt-tests-list"></ul>
        <hr>
    </details>
    <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content">適合クラス</span><a
            class="self-link" href="#w3c-conformance-classes"></a></h3>
    <p>本仕様への適合は、次の3つの適合クラスに定義されています：</p>
    <dl>
        <dt>スタイルシート
        <dd><a href="https://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
                スタイルシート</a>。
        <dt>レンダラー
        <dd><a
                href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>（ユーザーエージェント）。スタイルシートの意味を解釈し、それらを使用する文書をレンダリングするもの。
        <dt>オーサリングツール
        <dd><a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>（ユーザーエージェント）。スタイルシートを書き出すもの。
    </dl>
    <p>スタイルシートが本仕様に適合しているとは、このモジュールで定義された構文を使用するすべての文が、汎用CSS文法および各機能の個別文法に従って有効である場合を指します。</p>
    <p>レンダラーが本仕様に適合しているとは、スタイルシートを適切な仕様で定義された通りに解釈することに加え、本仕様で定義されたすべての機能を正しくパースし、文書を正しくレンダリングすることです。ただし、デバイスの制限によってUA（ユーザーエージェント）が文書を正しくレンダリングできない場合でも、UAが非適合となるわけではありません。（例：モノクロモニターでは色のレンダリングは要求されません）
    </p>
    <p>オーサリングツールが本仕様に適合しているとは、汎用CSS文法および本モジュールの各機能の個別文法に従って構文的に正しいスタイルシートを書き出し、本モジュールで記述されているスタイルシートのその他の適合要件も満たしている場合です。
    </p>
    <h3 class="no-ref heading settled" id="w3c-partial"><span class="content">部分的な実装</span><a class="self-link"
            href="#w3c-partial"></a></h3>
    <p>著者が前方互換パース規則を利用してフォールバック値を設定できるように、CSSレンダラーは<strong>必ず</strong>使えるレベルのサポートがない@規則、プロパティ、プロパティ値、キーワード、その他の構文要素を無効（<a
            href="https://www.w3.org/TR/CSS21/conform.html#ignore">適切に無視</a>）として扱わなければなりません。特に、ユーザーエージェントは<strong>絶対に</strong>未対応の値を選択的に無視して、複数値プロパティ宣言のうち対応している値だけを適用してはなりません。値のうちいずれかが無効（未対応値は必ず無効）となる場合、CSSは宣言全体を無視する必要があります。
    </p>
    <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content">不安定および独自機能の実装</span><a
            class="self-link" href="#w3c-conform-future-proofing"></a></h4>
    <p>将来の安定したCSS機能との衝突を避けるため、
        CSSWGは<a href="https://www.w3.org/TR/CSS/#future-proofing">ベストプラクティス</a>に従って、<a
            href="https://www.w3.org/TR/CSS/#unstable">不安定</a>な機能や<a
            href="https://www.w3.org/TR/CSS/#proprietary-extension">独自拡張</a>の実装を行うことを推奨します。</p>
    <h3 class="no-ref heading settled" id="w3c-testing"><span class="content">非実験的な実装</span><a class="self-link"
            href="#w3c-testing"></a></h3>
    <p>仕様がCandidate Recommendationに到達した時点で、
        非実験的な実装が可能となり、実装者は正しく仕様通りに実装できるCRレベルの機能についてはプレフィックスなしで公開すべきです。</p>
    <p>CSSの相互運用性を確立・維持するため、CSSワーキンググループは、非実験的なCSSレンダラーがW3Cに実装報告書（必要に応じてその報告に使ったテストケースも）を提出した上で、CSS機能のプレフィックス無し実装を公開することを求めています。W3Cに提出されたテストケースは、CSSワーキンググループによるレビューおよび修正の対象となります。
    </p>
    <p>テストケースや実装報告書の提出に関する詳細は、CSSワーキンググループのWebサイト <a
            href="https://www.w3.org/Style/CSS/Test/">https://www.w3.org/Style/CSS/Test/</a> を参照ください。
        質問は<a href="https://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>
        メーリングリストへ。</p>
    <h3 class="no-ref heading settled" id="w3c-cr-exit-criteria"><span class="content">CR終了基準</span><a class="self-link"
            href="#w3c-cr-exit-criteria"></a></h3>
    <p>この仕様を勧告案へ進めるためには、各機能について少なくとも2つの独立した相互運用可能な実装が必要です。各機能は異なる製品セットで実装されても構いません。すべての機能を単一製品で実装する必要はありません。この基準のために、以下の用語を定義します：
    </p>
    <dl>
        <dt>独立
        <dd>各実装は異なる当事者によって開発され、他の適格な実装で使用されるコードを共有・再利用・派生してはなりません。本仕様の実装に関係しないコード部分はこの要件から除外されます。
        <dt>相互運用可能
        <dd>公式CSSテストスイートの該当テストケースをパスすること、または実装がWebブラウザでない場合は同等のテストをパスすること。同等のテストを用いて相互運用性を主張する場合は、そのテストにパスできる追加のUA（ユーザーエージェント）が同じ方法でパスできることが必要です。同等のテストはピアレビューのために公開されなければなりません。
        <dt>実装
        <dd>
            ユーザーエージェントであり、次を満たすもの：
            <ol class="inline">
                <li>仕様を実装していること。
                <li>一般に公開されていること。実装は出荷製品やその他の公開バージョン（β版、プレビューリリース、ナイトリービルドなど）であってもよい。出荷製品でない場合、該当機能を少なくとも1ヶ月以上実装して安定性を示す必要があります。
                <li>実験的でないこと（テストスイート合格専用に設計されたバージョンや通常利用を想定しないものは不可）。
            </ol>
    </dl>
    <p>仕様は少なくとも6ヶ月間Candidate Recommendationのまま維持されます。</p>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本仕様で定義された用語</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#backdrop">backdrop</a><span>（§ 7）</span>
        <li><a href="#propdef-background-blend-mode">background-blend-mode</a><span>（§ 3.4.3）</span>
        <li><a href="#ltblendmodegt">&lt;blend-mode></a><span>（§ 3.4.1）</span>
        <li><a href="#valdef-blend-mode-color">color</a><span>（§ 10.2.3）</span>
        <li><a href="#valdef-blend-mode-color-burn">color-burn</a><span>（§ 10.1.8）</span>
        <li><a href="#valdef-blend-mode-color-dodge">color-dodge</a><span>（§ 10.1.7）</span>
        <li><a href="#compositemode">&lt;composite-mode></a><span>（§ 4）</span>
        <li><a href="#valdef-blend-mode-darken">darken</a><span>（§ 10.1.5）</span>
        <li><a href="#valdef-blend-mode-difference">difference</a><span>（§ 10.1.11）</span>
        <li><a href="#valdef-blend-mode-exclusion">exclusion</a><span>（§ 10.1.12）</span>
        <li><a href="#valdef-blend-mode-hard-light">hard-light</a><span>（§ 10.1.9）</span>
        <li><a href="#valdef-blend-mode-hue">hue</a><span>（§ 10.2.1）</span>
        <li><a href="#propdef-isolation">isolation</a><span>（§ 3.4.2）</span>
        <li><a href="#isolated-propid">&lt;isolation-mode></a><span>（§ 3.4.2）</span>
        <li><a href="#valdef-blend-mode-lighten">lighten</a><span>（§ 10.1.6）</span>
        <li><a href="#valdef-blend-mode-luminosity">luminosity</a><span>（§ 10.2.4）</span>
        <li><a href="#propdef-mix-blend-mode">mix-blend-mode</a><span>（§ 3.4.1）</span>
        <li><a href="#valdef-blend-mode-multiply">multiply</a><span>（§ 10.1.2）</span>
        <li><a href="#valdef-blend-mode-normal">normal</a><span>（§ 10.1.1）</span>
        <li><a href="#valdef-blend-mode-overlay">overlay</a><span>（§ 10.1.4）</span>
        <li><a href="#valdef-blend-mode-saturation">saturation</a><span>（§ 10.2.2）</span>
        <li><a href="#valdef-blend-mode-screen">screen</a><span>（§ 10.1.3）</span>
        <li><a href="#valdef-blend-mode-soft-light">soft-light</a><span>（§ 10.1.10）</span>
    </ul>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span
            class="content">参照によって定義されている用語</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[CSS-COLOR-4]</a>で定義されている用語:
            <ul>
                <li><span class="dfn-paneled" id="45dae945">green</span>
                <li><span class="dfn-paneled" id="f8e15dd7">lime</span>
                <li><span class="dfn-paneled" id="3b7558dc">opacity</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-MASKING-1]</a>で定義されている用語:
            <ul>
                <li><span class="dfn-paneled" id="5b43edf4">mask</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-VALUES-4]</a>で定義されている用語:
            <ul>
                <li><span class="dfn-paneled" id="c297b070">#</span>
                <li><span class="dfn-paneled" id="4eb9d37e">|</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS3BG]</a>で定義されている用語:
            <ul>
                <li><span class="dfn-paneled" id="db6870d5">background</span>
                <li><span class="dfn-paneled" id="5ced56d0">background-image</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a>で定義されている用語:
            <ul>
                <li><span class="dfn-paneled" id="2f0492ac">body</span>
                <li><span class="dfn-paneled" id="33db4476">globalCompositeOperation</span>
                <li><span class="dfn-paneled" id="f0811ff8">img</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">規範的参考文献</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css-color-4">[CSS-COLOR-4]
        <dd>Tab Atkins Jr.; Chris Lilley; Lea Verou. <a href="https://www.w3.org/TR/css-color-4/"><cite>CSS Color Module
                    Level 4</cite></a>. 2022年11月1日. CR. URL: <a
                href="https://www.w3.org/TR/css-color-4/">https://www.w3.org/TR/css-color-4/</a>
        <dt id="biblio-css-masking-1">[CSS-MASKING-1]
        <dd>Dirk Schulze; Brian Birtles; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-masking-1/"><cite>CSS
                    Masking Module Level 1</cite></a>. 2021年8月5日. CR. URL: <a
                href="https://www.w3.org/TR/css-masking-1/">https://www.w3.org/TR/css-masking-1/</a>
        <dt id="biblio-css-values-4">[CSS-VALUES-4]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-4/"><cite>CSS Values and Units
                    Module Level 4</cite></a>. 2023年12月18日. WD. URL: <a
                href="https://www.w3.org/TR/css-values-4/">https://www.w3.org/TR/css-values-4/</a>
        <dt id="biblio-css21">[CSS21]
        <dd>Bert Bos; 他. <a href="https://www.w3.org/TR/CSS21/"><cite>Cascading Style Sheets Level 2 Revision 1 (CSS
                    2.1) Specification</cite></a>. 2011年6月7日. REC. URL: <a
                href="https://www.w3.org/TR/CSS21/">https://www.w3.org/TR/CSS21/</a>
        <dt id="biblio-css3bg">[CSS3BG]
        <dd>Elika Etemad; Brad Kemper. <a href="https://www.w3.org/TR/css-backgrounds-3/"><cite>CSS Backgrounds and
                    Borders Module Level 3</cite></a>. 2023年12月19日. CR. URL: <a
                href="https://www.w3.org/TR/css-backgrounds-3/">https://www.w3.org/TR/css-backgrounds-3/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren; 他. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML標準</cite></a>.
            現行標準. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to
                    Indicate Requirement Levels</cite></a>. 1997年3月. Best Current Practice. URL: <a
                href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
        <dt id="biblio-svg11">[SVG11]
        <dd>Erik Dahlström; 他. <a href="https://www.w3.org/TR/SVG11/"><cite>Scalable Vector Graphics (SVG) 1.1
                    (Second Edition)</cite></a>. 2011年8月16日. REC. URL: <a
                href="https://www.w3.org/TR/SVG11/">https://www.w3.org/TR/SVG11/</a>
    </dl>
    <h3 class="no-num no-ref heading settled" id="informative"><span class="content">参考的文献</span><a class="self-link"
            href="#informative"></a></h3>
    <dl>
        <dt id="biblio-porterduff">[PORTERDUFF]
        <dd>Thomas Porter; Tom Duff. <cite>Compositing digital images</cite>. 1984年7月.
    </dl>
    <h2 class="no-num no-ref heading settled" id="property-index"><span class="content">プロパティ索引</span><a
            class="self-link" href="#property-index"></a></h2>
    <div class="big-element-wrapper">
        <table class="index">
            <thead>
                <tr>
                    <th scope="col">名前
                    <th scope="col">値
                    <th scope="col">初期値
                    <th scope="col">適用対象
                    <th scope="col">継承
                    <th scope="col">パーセンテージ
                    <th scope="col">アニメーション型
                    <th scope="col">正規順序
                    <th scope="col">算出値
                    <th scope="col">メディア
            <tbody>
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-background-blend-mode"
                            id="ref-for-propdef-background-blend-mode⑤">background-blend-mode</a>
                    <td>&lt;blend-mode>#
                    <td>normal
                    <td>すべてのHTML要素
                    <td>no
                    <td>N/A
                    <td>離散
                    <td>文法通り
                    <td>指定通り
                    <td>視覚
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-isolation"
                            id="ref-for-propdef-isolation②">isolation</a>
                    <td>&lt;isolation-mode>
                    <td>auto
                    <td>すべての要素。SVGでは、コンテナ要素、グラフィックス要素、グラフィックス参照要素に適用されます。[SVG11]
                    <td>no
                    <td>N/A
                    <td>離散
                    <td>文法通り
                    <td>指定通り
                    <td>視覚
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-mix-blend-mode"
                            id="ref-for-propdef-mix-blend-mode①">mix-blend-mode</a>
                    <td>&lt;blend-mode>
                    <td>normal
                    <td>すべての要素。SVGでは、コンテナ要素、グラフィックス要素、グラフィックス参照要素に適用されます。[SVG11]
                    <td>no
                    <td>N/A
                    <td>離散
                    <td>文法通り
                    <td>指定通り
                    <td>視覚
        </table>
    </div>
    <script>/* Boilerplate: script-dom-helper */
        "use strict";
        function query(sel) { return document.querySelector(sel); }

        function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

        function iter(obj) {
            if (!obj) return [];
            var it = obj[Symbol.iterator];
            if (it) return it;
            return Object.entries(obj);
        }

        function mk(tagname, attrs, ...children) {
            const el = document.createElement(tagname);
            for (const [k, v] of iter(attrs)) {
                if (k.slice(0, 3) == "_on") {
                    const eventName = k.slice(3);
                    el.addEventListener(eventName, v);
                } else if (k[0] == "_") {
                    // property, not attribute
                    el[k.slice(1)] = v;
                } else {
                    if (v === false || v == null) {
                        continue;
                    } else if (v === true) {
                        el.setAttribute(k, "");
                        continue;
                    } else {
                        el.setAttribute(k, v);
                    }
                }
            }
            append(el, children);
            return el;
        }

        /* Create shortcuts for every known HTML element */
        [
            "a",
            "abbr",
            "acronym",
            "address",
            "applet",
            "area",
            "article",
            "aside",
            "audio",
            "b",
            "base",
            "basefont",
            "bdo",
            "big",
            "blockquote",
            "body",
            "br",
            "button",
            "canvas",
            "caption",
            "center",
            "cite",
            "code",
            "col",
            "colgroup",
            "datalist",
            "dd",
            "del",
            "details",
            "dfn",
            "dialog",
            "div",
            "dl",
            "dt",
            "em",
            "embed",
            "fieldset",
            "figcaption",
            "figure",
            "font",
            "footer",
            "form",
            "frame",
            "frameset",
            "head",
            "header",
            "h1",
            "h2",
            "h3",
            "h4",
            "h5",
            "h6",
            "hr",
            "html",
            "i",
            "iframe",
            "img",
            "input",
            "ins",
            "kbd",
            "label",
            "legend",
            "li",
            "link",
            "main",
            "map",
            "mark",
            "meta",
            "meter",
            "nav",
            "nobr",
            "noscript",
            "object",
            "ol",
            "optgroup",
            "option",
            "output",
            "p",
            "param",
            "pre",
            "progress",
            "q",
            "s",
            "samp",
            "script",
            "section",
            "select",
            "small",
            "source",
            "span",
            "strike",
            "strong",
            "style",
            "sub",
            "summary",
            "sup",
            "table",
            "tbody",
            "td",
            "template",
            "textarea",
            "tfoot",
            "th",
            "thead",
            "time",
            "title",
            "tr",
            "u",
            "ul",
            "var",
            "video",
            "wbr",
            "xmp",
        ].forEach(tagname => {
            mk[tagname] = (...args) => mk(tagname, ...args);
        });

        function* nodesFromChildList(children) {
            for (const child of children.flat(Infinity)) {
                if (child instanceof Node) {
                    yield child;
                } else {
                    yield new Text(child);
                }
            }
        }
        function append(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                if (el instanceof Node) el.appendChild(child);
                else el.push(child);
            }
            return el;
        }

        function insertAfter(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                el.parentNode.insertBefore(child, el.nextSibling);
            }
            return el;
        }

        function clearContents(el) {
            el.innerHTML = "";
            return el;
        }

        function parseHTML(markup) {
            if (markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
                const doc = document.implementation.createHTMLDocument("");
                doc.documentElement.innerHTML = markup;
                return doc;
            } else {
                const el = mk.template({});
                el.innerHTML = markup;
                return el.content;
            }
        }</script>
    <script>/* Boilerplate: script-dfn-panel */
        "use strict";
        {
            let dfnPanelData = {
                "2f0492ac": { "dfnID": "2f0492ac", "dfnText": "body", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-body-element" }], "title": "3.4.3. The background-blend-mode property" }], "url": "https://html.spec.whatwg.org/multipage/sections.html#the-body-element" },
                "33db4476": { "dfnID": "33db4476", "dfnText": "globalCompositeOperation", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-context-2d-globalcompositeoperation" }], "title": "Unnumbered Section" }, { "refs": [{ "id": "ref-for-dom-context-2d-globalcompositeoperation\u2460" }], "title": "2.1. Module interactions" }, { "refs": [{ "id": "ref-for-dom-context-2d-globalcompositeoperation\u2461" }], "title": "4. Specifying Compositing and Blending in Canvas 2D" }], "url": "https://html.spec.whatwg.org/multipage/canvas.html#dom-context-2d-globalcompositeoperation" },
                "3b7558dc": { "dfnID": "3b7558dc", "dfnText": "opacity", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-opacity" }], "title": "3.4.1. The mix-blend-mode property" }], "url": "https://www.w3.org/TR/css-color-4/#propdef-opacity" },
                "45dae945": { "dfnID": "45dae945", "dfnText": "green", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-valdef-color-green" }], "title": "Changes" }], "url": "https://www.w3.org/TR/css-color-4/#valdef-color-green" },
                "4eb9d37e": { "dfnID": "4eb9d37e", "dfnText": "|", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-comb-one" }, { "id": "ref-for-comb-one\u2460" }, { "id": "ref-for-comb-one\u2461" }, { "id": "ref-for-comb-one\u2462" }, { "id": "ref-for-comb-one\u2463" }, { "id": "ref-for-comb-one\u2464" }, { "id": "ref-for-comb-one\u2465" }, { "id": "ref-for-comb-one\u2466" }, { "id": "ref-for-comb-one\u2467" }, { "id": "ref-for-comb-one\u2468" }, { "id": "ref-for-comb-one\u2460\u24ea" }, { "id": "ref-for-comb-one\u2460\u2460" }, { "id": "ref-for-comb-one\u2460\u2461" }, { "id": "ref-for-comb-one\u2460\u2462" }, { "id": "ref-for-comb-one\u2460\u2463" }], "title": "3.4.1. The mix-blend-mode property" }, { "refs": [{ "id": "ref-for-comb-one\u2460\u2464" }], "title": "3.4.2. The isolation property" }, { "refs": [{ "id": "ref-for-comb-one\u2460\u2465" }, { "id": "ref-for-comb-one\u2460\u2466" }, { "id": "ref-for-comb-one\u2460\u2467" }, { "id": "ref-for-comb-one\u2460\u2468" }, { "id": "ref-for-comb-one\u2461\u24ea" }, { "id": "ref-for-comb-one\u2461\u2460" }, { "id": "ref-for-comb-one\u2461\u2461" }, { "id": "ref-for-comb-one\u2461\u2462" }, { "id": "ref-for-comb-one\u2461\u2463" }, { "id": "ref-for-comb-one\u2461\u2464" }, { "id": "ref-for-comb-one\u2461\u2465" }], "title": "4. Specifying Compositing and Blending in Canvas 2D" }], "url": "https://www.w3.org/TR/css-values-4/#comb-one" },
                "5b43edf4": { "dfnID": "5b43edf4", "dfnText": "mask", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-mask" }], "title": "3.4.2. The isolation property" }], "url": "https://www.w3.org/TR/css-masking-1/#propdef-mask" },
                "5ced56d0": { "dfnID": "5ced56d0", "dfnText": "background-image", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-background-image" }], "title": "3.4.3. The background-blend-mode property" }], "url": "https://www.w3.org/TR/css-backgrounds-3/#propdef-background-image" },
                "backdrop": { "dfnID": "backdrop", "dfnText": "backdrop", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-backdrop\u2460" }, { "id": "ref-for-backdrop\u2461" }], "title": "5. Introduction to compositing" }, { "refs": [{ "id": "ref-for-backdrop\u2462" }, { "id": "ref-for-backdrop\u2463" }, { "id": "ref-for-backdrop\u2464" }], "title": "5.1. Simple alpha compositing" }, { "refs": [{ "id": "ref-for-backdrop\u2465" }, { "id": "ref-for-backdrop\u2466" }], "title": "5.1.1. Examples of simple alpha compositing" }, { "refs": [{ "id": "ref-for-backdrop\u2467" }, { "id": "ref-for-backdrop\u2468" }, { "id": "ref-for-backdrop\u2460\u24ea" }, { "id": "ref-for-backdrop\u2460\u2460" }, { "id": "ref-for-backdrop\u2460\u2461" }], "title": "10. Blending" }, { "refs": [{ "id": "ref-for-backdrop\u2460\u2462" }], "title": "10.1. Separable blend modes" }, { "refs": [{ "id": "ref-for-backdrop\u2460\u2463" }], "title": "10.1.3. screen blend mode" }, { "refs": [{ "id": "ref-for-backdrop\u2460\u2464" }, { "id": "ref-for-backdrop\u2460\u2465" }, { "id": "ref-for-backdrop\u2460\u2466" }, { "id": "ref-for-backdrop\u2460\u2467" }], "title": "10.1.4. overlay blend mode" }, { "refs": [{ "id": "ref-for-backdrop\u2460\u2468" }, { "id": "ref-for-backdrop\u2461\u24ea" }], "title": "10.1.5. darken blend mode" }, { "refs": [{ "id": "ref-for-backdrop\u2461\u2460" }, { "id": "ref-for-backdrop\u2461\u2461" }], "title": "10.1.6. lighten blend mode" }, { "refs": [{ "id": "ref-for-backdrop\u2461\u2462" }], "title": "10.1.7. color-dodge blend mode" }, { "refs": [{ "id": "ref-for-backdrop\u2461\u2463" }], "title": "10.1.8. color-burn blend mode" }, { "refs": [{ "id": "ref-for-backdrop\u2461\u2464" }], "title": "10.1.9. hard-light blend mode" }, { "refs": [{ "id": "ref-for-backdrop\u2461\u2465" }], "title": "10.1.10. soft-light blend mode" }, { "refs": [{ "id": "ref-for-backdrop\u2461\u2466" }], "title": "10.1.11. difference blend mode" }, { "refs": [{ "id": "ref-for-backdrop\u2461\u2467" }], "title": "10.1.12. exclusion blend mode" }, { "refs": [{ "id": "ref-for-backdrop\u2461\u2468" }, { "id": "ref-for-backdrop\u2462\u24ea" }], "title": "10.2. Non-separable blend modes" }, { "refs": [{ "id": "ref-for-backdrop\u2462\u2460" }], "title": "10.2.1. hue blend mode" }, { "refs": [{ "id": "ref-for-backdrop\u2462\u2461" }, { "id": "ref-for-backdrop\u2462\u2462" }], "title": "10.2.2. saturation blend mode" }, { "refs": [{ "id": "ref-for-backdrop\u2462\u2463" }, { "id": "ref-for-backdrop\u2462\u2464" }], "title": "10.2.3. color blend mode" }, { "refs": [{ "id": "ref-for-backdrop\u2462\u2465" }], "title": "10.2.4. luminosity blend mode" }], "url": "#backdrop" },
                "c297b070": { "dfnID": "c297b070", "dfnText": "#", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-mult-comma" }], "title": "3.4.3. The background-blend-mode property" }], "url": "https://www.w3.org/TR/css-values-4/#mult-comma" },
                "compositemode": { "dfnID": "compositemode", "dfnText": "<composite-mode>", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-compositemode" }, { "id": "ref-for-compositemode\u2460" }], "title": "4. Specifying Compositing and Blending in Canvas 2D" }, { "refs": [{ "id": "ref-for-compositemode\u2461" }], "title": "Changes" }], "url": "#compositemode" },
                "db6870d5": { "dfnID": "db6870d5", "dfnText": "background", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-background" }], "title": "3.4.3. The background-blend-mode property" }], "url": "https://www.w3.org/TR/css-backgrounds-3/#propdef-background" },
                "f0811ff8": { "dfnID": "f0811ff8", "dfnText": "img", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-img-element" }, { "id": "ref-for-the-img-element\u2460" }], "title": "3.4.2. The isolation property" }], "url": "https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element" },
                "f8e15dd7": { "dfnID": "f8e15dd7", "dfnText": "lime", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-valdef-color-lime" }], "title": "Changes" }], "url": "https://www.w3.org/TR/css-color-4/#valdef-color-lime" },
                "isolated-propid": { "dfnID": "isolated-propid", "dfnText": "<isolation-mode>", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-isolated-propid" }, { "id": "ref-for-isolated-propid\u2460" }], "title": "3.4.2. The isolation property" }], "url": "#isolated-propid" },
                "ltblendmodegt": { "dfnID": "ltblendmodegt", "dfnText": "<blend-mode>", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-ltblendmodegt" }, { "id": "ref-for-ltblendmodegt\u2460" }], "title": "3.4.1. The mix-blend-mode property" }, { "refs": [{ "id": "ref-for-ltblendmodegt\u2461" }], "title": "3.4.3. The background-blend-mode property" }, { "refs": [{ "id": "ref-for-ltblendmodegt\u2462" }], "title": "4. Specifying Compositing and Blending in Canvas 2D" }], "url": "#ltblendmodegt" },
                "propdef-background-blend-mode": { "dfnID": "propdef-background-blend-mode", "dfnText": "background-blend-mode", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-propdef-background-blend-mode" }], "title": "2.1. Module interactions" }, { "refs": [{ "id": "ref-for-propdef-background-blend-mode\u2460" }, { "id": "ref-for-propdef-background-blend-mode\u2461" }, { "id": "ref-for-propdef-background-blend-mode\u2462" }, { "id": "ref-for-propdef-background-blend-mode\u2463" }], "title": "3.4.3. The background-blend-mode property" }], "url": "#propdef-background-blend-mode" },
                "propdef-isolation": { "dfnID": "propdef-isolation", "dfnText": "isolation", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-propdef-isolation" }, { "id": "ref-for-propdef-isolation\u2460" }], "title": "3.4.2. The isolation property" }], "url": "#propdef-isolation" },
                "propdef-mix-blend-mode": { "dfnID": "propdef-mix-blend-mode", "dfnText": "mix-blend-mode", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-propdef-mix-blend-mode" }], "title": "3.4.1. The mix-blend-mode property" }], "url": "#propdef-mix-blend-mode" },
                "valdef-blend-mode-color": { "dfnID": "valdef-blend-mode-color", "dfnText": "color", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-blend-mode-color" }], "title": "3.4.1. The mix-blend-mode property" }], "url": "#valdef-blend-mode-color" },
                "valdef-blend-mode-color-burn": { "dfnID": "valdef-blend-mode-color-burn", "dfnText": "color-burn", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-blend-mode-color-burn" }], "title": "3.4.1. The mix-blend-mode property" }], "url": "#valdef-blend-mode-color-burn" },
                "valdef-blend-mode-color-dodge": { "dfnID": "valdef-blend-mode-color-dodge", "dfnText": "color-dodge", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-blend-mode-color-dodge" }], "title": "3.4.1. The mix-blend-mode property" }], "url": "#valdef-blend-mode-color-dodge" },
                "valdef-blend-mode-darken": { "dfnID": "valdef-blend-mode-darken", "dfnText": "darken", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-blend-mode-darken" }], "title": "3.4.1. The mix-blend-mode property" }], "url": "#valdef-blend-mode-darken" },
                "valdef-blend-mode-difference": { "dfnID": "valdef-blend-mode-difference", "dfnText": "difference", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-blend-mode-difference" }], "title": "3.4.1. The mix-blend-mode property" }], "url": "#valdef-blend-mode-difference" },
                "valdef-blend-mode-exclusion": { "dfnID": "valdef-blend-mode-exclusion", "dfnText": "exclusion", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-blend-mode-exclusion" }], "title": "3.4.1. The mix-blend-mode property" }], "url": "#valdef-blend-mode-exclusion" },
                "valdef-blend-mode-hard-light": { "dfnID": "valdef-blend-mode-hard-light", "dfnText": "hard-light", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-blend-mode-hard-light" }], "title": "3.4.1. The mix-blend-mode property" }, { "refs": [{ "id": "ref-for-valdef-blend-mode-hard-light\u2460" }, { "id": "ref-for-valdef-blend-mode-hard-light\u2461" }], "title": "10.1.4. overlay blend mode" }], "url": "#valdef-blend-mode-hard-light" },
                "valdef-blend-mode-hue": { "dfnID": "valdef-blend-mode-hue", "dfnText": "hue", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-blend-mode-hue" }], "title": "3.4.1. The mix-blend-mode property" }], "url": "#valdef-blend-mode-hue" },
                "valdef-blend-mode-lighten": { "dfnID": "valdef-blend-mode-lighten", "dfnText": "lighten", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-blend-mode-lighten" }], "title": "3.4.1. The mix-blend-mode property" }], "url": "#valdef-blend-mode-lighten" },
                "valdef-blend-mode-luminosity": { "dfnID": "valdef-blend-mode-luminosity", "dfnText": "luminosity", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-blend-mode-luminosity" }], "title": "3.4.1. The mix-blend-mode property" }], "url": "#valdef-blend-mode-luminosity" },
                "valdef-blend-mode-multiply": { "dfnID": "valdef-blend-mode-multiply", "dfnText": "multiply", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-blend-mode-multiply" }], "title": "3.4.1. The mix-blend-mode property" }, { "refs": [{ "id": "ref-for-valdef-blend-mode-multiply\u2460" }], "title": "10.1.9. hard-light blend mode" }], "url": "#valdef-blend-mode-multiply" },
                "valdef-blend-mode-normal": { "dfnID": "valdef-blend-mode-normal", "dfnText": "normal", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-blend-mode-normal" }, { "id": "ref-for-valdef-blend-mode-normal\u2460" }], "title": "3.4.1. The mix-blend-mode property" }, { "refs": [{ "id": "ref-for-valdef-blend-mode-normal\u2461" }], "title": "8.1. Group invariance" }], "url": "#valdef-blend-mode-normal" },
                "valdef-blend-mode-overlay": { "dfnID": "valdef-blend-mode-overlay", "dfnText": "overlay", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-blend-mode-overlay" }, { "id": "ref-for-valdef-blend-mode-overlay\u2460" }], "title": "3.4.1. The mix-blend-mode property" }], "url": "#valdef-blend-mode-overlay" },
                "valdef-blend-mode-saturation": { "dfnID": "valdef-blend-mode-saturation", "dfnText": "saturation", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-blend-mode-saturation" }], "title": "3.4.1. The mix-blend-mode property" }], "url": "#valdef-blend-mode-saturation" },
                "valdef-blend-mode-screen": { "dfnID": "valdef-blend-mode-screen", "dfnText": "screen", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-blend-mode-screen" }], "title": "3.4.1. The mix-blend-mode property" }, { "refs": [{ "id": "ref-for-valdef-blend-mode-screen\u2460" }], "title": "10.1.9. hard-light blend mode" }], "url": "#valdef-blend-mode-screen" },
                "valdef-blend-mode-soft-light": { "dfnID": "valdef-blend-mode-soft-light", "dfnText": "soft-light", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-blend-mode-soft-light" }], "title": "3.4.1. The mix-blend-mode property" }], "url": "#valdef-blend-mode-soft-light" },
            };

            document.addEventListener("DOMContentLoaded", () => {
                genAllDfnPanels();

                document.body.addEventListener("click", (e) => {
                    // If not handled already, just hide all dfn panels.
                    hideAllDfnPanels();
                });
            });

            window.addEventListener("resize", () => {
                // Pin any visible dfn panel
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el => positionDfnPanel(el));
            });

            function genAllDfnPanels() {
                for (const panelData of Object.values(dfnPanelData)) {
                    const dfnID = panelData.dfnID;
                    const dfn = document.getElementById(dfnID);
                    if (!dfn) {
                        console.log(`Can't find dfn#${dfnID}.`, panelData);
                        continue;
                    }
                    dfn.panelData = panelData;
                    insertDfnPopupAction(dfn);
                }
            }

            function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
                const dfnPanel = mk.aside({
                    class: "dfn-panel on",
                    id: `infopanel-for-${dfnID}`,
                    "data-for": dfnID,
                    "aria-labelled-by": `infopaneltitle-for-${dfnID}`,
                },
                    mk.span({ id: `infopaneltitle-for-${dfnID}`, style: "display:none" },
                        `Info about the '${dfnText}' ${external ? "external" : ""} reference.`),
                    mk.a({ href: url, class: "dfn-link" }, url),
                    refSections.length == 0 ? [] :
                        mk.b({}, "Referenced in:"),
                    mk.ul({},
                        ...refSections.map(section =>
                            mk.li({},
                                ...section.refs.map((ref, refI) =>
                                    [
                                        mk.a({ href: `#${ref.id}` },
                                            (refI == 0) ? section.title : `(${refI + 1})`
                                        ),
                                        " ",
                                    ]
                                ),
                            ),
                        ),
                    ),
                    genLinkingSyntaxes(dfn),
                );

                dfnPanel.addEventListener('click', (event) => {
                    if (event.target.nodeName == 'A') {
                        scrollToTargetAndHighlight(event);
                        pinDfnPanel(dfnPanel);
                    }
                    event.stopPropagation();
                    refocusOnTarget(event);
                });
                dfnPanel.addEventListener('keydown', (event) => {
                    if (event.keyCode == 27) { // Escape key
                        hideDfnPanel({ dfnPanel });
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });

                dfnPanel.dfn = dfn;
                dfn.dfnPanel = dfnPanel;
                return dfnPanel;
            }



            function hideAllDfnPanels() {
                // Delete the currently-active dfn panel.
                queryAll(".dfn-panel").forEach(dfnPanel => hideDfnPanel({ dfnPanel }));
            }

            function showDfnPanel(dfn) {
                hideAllDfnPanels(); // Only display one at a time.

                dfn.setAttribute("aria-expanded", "true");

                const dfnPanel = genDfnPanel(dfn, dfn.panelData);

                // Give the dfn a unique tabindex, and then
                // give all the tabbable panel bits successive indexes.
                let tabIndex = 100;
                dfn.tabIndex = tabIndex++;
                const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
                for (const el of tabbable) {
                    el.tabIndex = tabIndex++;
                }

                append(document.body, dfnPanel);
                positionDfnPanel(dfnPanel);
            }

            function positionDfnPanel(dfnPanel) {
                const dfn = dfnPanel.dfn;
                const dfnPos = getBounds(dfn);
                dfnPanel.style.top = dfnPos.bottom + "px";
                dfnPanel.style.left = dfnPos.left + "px";

                const panelPos = dfnPanel.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
                    dfnPanel.style.left = newLeft + "px";
                }
            }

            function pinDfnPanel(dfnPanel) {
                // Switch it to "activated" state, which pins it.
                dfnPanel.classList.add("activated");
                dfnPanel.style.position = "fixed";
                dfnPanel.style.left = null;
                dfnPanel.style.top = null;
            }

            function hideDfnPanel({ dfn, dfnPanel }) {
                if (!dfnPanel) dfnPanel = dfn.dfnPanel;
                if (!dfn) dfn = dfnPanel.dfn;
                dfn.dfnPanel = undefined;
                dfnPanel.dfn = undefined;
                dfn.setAttribute("aria-expanded", "false");
                dfn.tabIndex = undefined;
                dfnPanel.remove()
            }

            function toggleDfnPanel(dfn) {
                if (dfn.dfnPanel) {
                    hideDfnPanel(dfn);
                } else {
                    showDfnPanel(dfn);
                }
            }

            function insertDfnPopupAction(dfn) {
                dfn.setAttribute('role', 'button');
                dfn.setAttribute('aria-expanded', 'false')
                dfn.tabIndex = 0;
                dfn.classList.add('has-dfn-panel');
                dfn.addEventListener('click', (event) => {
                    toggleDfnPanel(dfn);
                    event.stopPropagation();
                });
                dfn.addEventListener('keypress', (event) => {
                    const kc = event.keyCode;
                    // 32->Space, 13->Enter
                    if (kc == 32 || kc == 13) {
                        toggleDfnPanel(dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });
            }

            function refocusOnTarget(event) {
                const target = event.target;
                setTimeout(() => {
                    // Refocus on the event.target element.
                    // This is needed after browser scrolls to the destination.
                    target.focus();
                });
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function scrollToTargetAndHighlight(event) {
                let hash = event.target.hash;
                if (hash) {
                    hash = decodeURIComponent(hash.substring(1));
                    const dest = document.getElementById(hash);
                    if (dest) {
                        dest.classList.add('highlighted');
                        setTimeout(() => dest.classList.remove('highlighted'), 1000);
                    }
                }
            }

            // Functions, divided by link type, that wrap an autolink's
            // contents with the appropriate outer syntax.
            // Alternately, a string naming another type they format
            // the same as.
            function needsFor(type) {
                switch (type) {
                    case "descriptor":
                    case "value":
                    case "element-attr":
                    case "attr-value":
                    case "element-state":
                    case "method":
                    case "constructor":
                    case "argument":
                    case "attribute":
                    case "const":
                    case "dict-member":
                    case "event":
                    case "enum-value":
                    case "stringifier":
                    case "serializer":
                    case "iterator":
                    case "maplike":
                    case "setlike":
                    case "state":
                    case "mode":
                    case "context":
                    case "facet": return true;

                    default: return false;
                }
            }
            function refusesFor(type) {
                switch (type) {
                    case "property":
                    case "element":
                    case "interface":
                    case "namespace":
                    case "callback":
                    case "dictionary":
                    case "enum":
                    case "exception":
                    case "typedef":
                    case "http-header":
                    case "permission": return true;

                    default: return false;
                }
            }
            function linkFormatterFromType(type) {
                switch (type) {
                    case 'scheme':
                    case 'permission':
                    case 'dfn': return (text) => `[=${text}=]`;

                    case 'abstract-op': return (text) => `[\$${text}\$]`;

                    case 'function':
                    case 'at-rule':
                    case 'selector':
                    case 'value': return (text) => `''${text}''`;

                    case 'http-header': return (text) => `[:${text}:]`;

                    case 'interface':
                    case 'constructor':
                    case 'method':
                    case 'argument':
                    case 'attribute':
                    case 'callback':
                    case 'dictionary':
                    case 'dict-member':
                    case 'enum':
                    case 'enum-value':
                    case 'exception':
                    case 'const':
                    case 'typedef':
                    case 'stringifier':
                    case 'serializer':
                    case 'iterator':
                    case 'maplike':
                    case 'setlike':
                    case 'extended-attribute':
                    case 'event':
                    case 'idl': return (text) => `{{${text}}}`;

                    case 'element-state':
                    case 'element-attr':
                    case 'attr-value':
                    case 'element': return (element) => `<{${element}}>`;

                    case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

                    case 'type': return (text) => `<<${text}>>`;

                    case 'descriptor':
                    case 'property': return (text) => `'${text}'`;

                    default: return;
                };
            };

            function genLinkingSyntaxes(dfn) {
                if (dfn.tagName != "DFN") return;

                const type = dfn.getAttribute('data-dfn-type');
                if (!type) {
                    console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
                    return [];
                }

                // Return a function that wraps link text based on the type
                const linkFormatter = linkFormatterFromType(type);
                if (!linkFormatter) {
                    console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
                    return [];
                }

                let ltAlts;
                if (dfn.hasAttribute('data-lt')) {
                    ltAlts = dfn.getAttribute('data-lt')
                        .split("|")
                        .map(x => x.trim());
                } else {
                    ltAlts = [dfn.textContent.trim()];
                }
                if (type == "type") {
                    // lt of "<foo>", but "foo" is the interior;
                    // <<foo/bar>> is how you write it with a for,
                    // not <foo/<bar>> or whatever.
                    for (var i = 0; i < ltAlts.length; i++) {
                        const lt = ltAlts[i];
                        const match = /<(.*)>/.exec(lt);
                        if (match) { ltAlts[i] = match[1]; }
                    }
                }

                let forAlts;
                if (dfn.hasAttribute('data-dfn-for')) {
                    forAlts = dfn.getAttribute('data-dfn-for')
                        .split(",")
                        .map(x => x.trim());
                } else {
                    forAlts = [''];
                }

                let linkingSyntaxes = [];
                if (!needsFor(type)) {
                    for (const lt of ltAlts) {
                        linkingSyntaxes.push(linkFormatter(lt));
                    }
                }
                if (!refusesFor(type)) {
                    for (const f of forAlts) {
                        linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
                    }
                }
                return [
                    mk.b({}, 'Possible linking syntaxes:'),
                    mk.ul({},
                        ...linkingSyntaxes.map(link => {
                            const copyLink = async () =>
                                await navigator.clipboard.writeText(link);
                            return mk.li({},
                                mk.div({ class: 'link-item' },
                                    mk.button({
                                        class: 'copy-icon', title: 'Copy',
                                        type: 'button',
                                        _onclick: copyLink,
                                        tabindex: 0,
                                    }, mk.span({ class: 'icon' })),
                                    mk.span({}, link)
                                )
                            );
                        })
                    )
                ];
            }
        }
    </script>
    <script>/* Boilerplate: script-link-titles */
        "use strict";
        {
            let linkTitleData = {
                "#ltblendmodegt": "Expands to: color | color-burn | color-dodge | darken | difference | exclusion | hard-light | hue | lighten | luminosity | multiply | normal | overlay | saturation | screen | soft-light",
            };

            function setTypeTitles() {
                for (let el of document.querySelectorAll("a[href]")) {
                    if (el.href in linkTitleData && !el.hasAttribute("title")) {
                        el.setAttribute("title", linkTitleData[el.href]);
                    }
                }
            }

            document.addEventListener("DOMContentLoaded", setTypeTitles);
        }
    </script>
    <script>/* Boilerplate: script-ref-hints */
        "use strict";
        {
            let refsData = {
                "#backdrop": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "backdrop", "type": "dfn", "url": "#backdrop" },
                "#compositemode": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "<composite-mode>", "type": "type", "url": "#compositemode" },
                "#isolated-propid": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "<isolation-mode>", "type": "type", "url": "#isolated-propid" },
                "#ltblendmodegt": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "<blend-mode>", "type": "type", "url": "#ltblendmodegt" },
                "#propdef-background-blend-mode": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "background-blend-mode", "type": "property", "url": "#propdef-background-blend-mode" },
                "#propdef-isolation": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "isolation", "type": "property", "url": "#propdef-isolation" },
                "#propdef-mix-blend-mode": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "mix-blend-mode", "type": "property", "url": "#propdef-mix-blend-mode" },
                "#valdef-blend-mode-color": { "export": true, "for_": ["<blend-mode>"], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "color", "type": "value", "url": "#valdef-blend-mode-color" },
                "#valdef-blend-mode-color-burn": { "export": true, "for_": ["<blend-mode>"], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "color-burn", "type": "value", "url": "#valdef-blend-mode-color-burn" },
                "#valdef-blend-mode-color-dodge": { "export": true, "for_": ["<blend-mode>"], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "color-dodge", "type": "value", "url": "#valdef-blend-mode-color-dodge" },
                "#valdef-blend-mode-darken": { "export": true, "for_": ["<blend-mode>"], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "darken", "type": "value", "url": "#valdef-blend-mode-darken" },
                "#valdef-blend-mode-difference": { "export": true, "for_": ["<blend-mode>"], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "difference", "type": "value", "url": "#valdef-blend-mode-difference" },
                "#valdef-blend-mode-exclusion": { "export": true, "for_": ["<blend-mode>"], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "exclusion", "type": "value", "url": "#valdef-blend-mode-exclusion" },
                "#valdef-blend-mode-hard-light": { "export": true, "for_": ["<blend-mode>"], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "hard-light", "type": "value", "url": "#valdef-blend-mode-hard-light" },
                "#valdef-blend-mode-hue": { "export": true, "for_": ["<blend-mode>"], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "hue", "type": "value", "url": "#valdef-blend-mode-hue" },
                "#valdef-blend-mode-lighten": { "export": true, "for_": ["<blend-mode>"], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "lighten", "type": "value", "url": "#valdef-blend-mode-lighten" },
                "#valdef-blend-mode-luminosity": { "export": true, "for_": ["<blend-mode>"], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "luminosity", "type": "value", "url": "#valdef-blend-mode-luminosity" },
                "#valdef-blend-mode-multiply": { "export": true, "for_": ["<blend-mode>"], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "multiply", "type": "value", "url": "#valdef-blend-mode-multiply" },
                "#valdef-blend-mode-normal": { "export": true, "for_": ["<blend-mode>"], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "normal", "type": "value", "url": "#valdef-blend-mode-normal" },
                "#valdef-blend-mode-overlay": { "export": true, "for_": ["<blend-mode>"], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "overlay", "type": "value", "url": "#valdef-blend-mode-overlay" },
                "#valdef-blend-mode-saturation": { "export": true, "for_": ["<blend-mode>"], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "saturation", "type": "value", "url": "#valdef-blend-mode-saturation" },
                "#valdef-blend-mode-screen": { "export": true, "for_": ["<blend-mode>"], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "screen", "type": "value", "url": "#valdef-blend-mode-screen" },
                "#valdef-blend-mode-soft-light": { "export": true, "for_": ["<blend-mode>"], "level": "1", "normative": true, "shortname": "compositing", "spec": "compositing-1", "status": "local", "text": "soft-light", "type": "value", "url": "#valdef-blend-mode-soft-light" },
                "https://html.spec.whatwg.org/multipage/canvas.html#dom-context-2d-globalcompositeoperation": { "export": true, "for_": ["CanvasCompositing"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "globalCompositeOperation", "type": "attribute", "url": "https://html.spec.whatwg.org/multipage/canvas.html#dom-context-2d-globalcompositeoperation" },
                "https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "img", "type": "element", "url": "https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element" },
                "https://html.spec.whatwg.org/multipage/sections.html#the-body-element": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "body", "type": "element", "url": "https://html.spec.whatwg.org/multipage/sections.html#the-body-element" },
                "https://www.w3.org/TR/css-backgrounds-3/#propdef-background": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-backgrounds", "spec": "css-backgrounds-3", "status": "snapshot", "text": "background", "type": "property", "url": "https://www.w3.org/TR/css-backgrounds-3/#propdef-background" },
                "https://www.w3.org/TR/css-backgrounds-3/#propdef-background-image": { "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-backgrounds", "spec": "css-backgrounds-3", "status": "snapshot", "text": "background-image", "type": "property", "url": "https://www.w3.org/TR/css-backgrounds-3/#propdef-background-image" },
                "https://www.w3.org/TR/css-color-4/#propdef-opacity": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-color", "spec": "css-color-4", "status": "snapshot", "text": "opacity", "type": "property", "url": "https://www.w3.org/TR/css-color-4/#propdef-opacity" },
                "https://www.w3.org/TR/css-color-4/#valdef-color-green": { "export": true, "for_": ["<color>", "<named-color>"], "level": "4", "normative": true, "shortname": "css-color", "spec": "css-color-4", "status": "snapshot", "text": "green", "type": "value", "url": "https://www.w3.org/TR/css-color-4/#valdef-color-green" },
                "https://www.w3.org/TR/css-color-4/#valdef-color-lime": { "export": true, "for_": ["<color>", "<named-color>"], "level": "4", "normative": true, "shortname": "css-color", "spec": "css-color-4", "status": "snapshot", "text": "lime", "type": "value", "url": "https://www.w3.org/TR/css-color-4/#valdef-color-lime" },
                "https://www.w3.org/TR/css-masking-1/#propdef-mask": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-masking", "spec": "css-masking-1", "status": "snapshot", "text": "mask", "type": "property", "url": "https://www.w3.org/TR/css-masking-1/#propdef-mask" },
                "https://www.w3.org/TR/css-values-4/#comb-one": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-values", "spec": "css-values-4", "status": "snapshot", "text": "|", "type": "grammar", "url": "https://www.w3.org/TR/css-values-4/#comb-one" },
                "https://www.w3.org/TR/css-values-4/#mult-comma": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-values", "spec": "css-values-4", "status": "snapshot", "text": "#", "type": "grammar", "url": "https://www.w3.org/TR/css-values-4/#mult-comma" },
            };

            function mkRefHint(link, ref) {
                const linkText = link.textContent;
                let dfnTextElements = '';
                if (ref.text != linkText) {
                    dfnTextElements =
                        mk.li({},
                            mk.b({}, "Term: "),
                            mk.span({}, ref.text)
                        );
                }
                const forList = ref.for_;
                let forListElements;
                if (forList.length == 0) {
                    forListElements = [];
                } else if (forList.length == 1) {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.span({}, forList[0]),
                    );
                } else {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.ul({},
                            ...forList.map(forItem =>
                                mk.li({},
                                    mk.span({}, forItem)
                                ),
                            ),
                        ),
                    );
                }
                const url = ref.url;
                const safeUrl = encodeURIComponent(url);
                const hintPanel = mk.aside({
                    class: "ref-hint",
                    id: `ref-hint-for-${safeUrl}`,
                    "data-for": url,
                    "aria-labelled-by": `ref-hint-for-${safeUrl}`,
                },
                    mk.ul({},
                        dfnTextElements,
                        mk.li({},
                            mk.b({}, "URL: "),
                            mk.a({ href: url, class: "ref" }, url),
                        ),
                        mk.li({},
                            mk.b({}, "Type: "),
                            mk.span({}, `${ref.type}`),
                        ),
                        mk.li({},
                            mk.b({}, "Spec: "),
                            mk.span({}, `${ref.spec ? ref.spec : ''}`),
                        ),
                        forListElements
                    ),
                );
                hintPanel.forLink = link;
                setupRefHintEventListeners(link, hintPanel);
                return hintPanel;
            }

            function hideAllRefHints() {
                queryAll(".ref-hint").forEach(el => hideRefHint(el));
            }

            function hideRefHint(refHint) {
                const link = refHint.forLink;
                link.setAttribute("aria-expanded", "false");
                if (refHint.teardownEventListeners) {
                    refHint.teardownEventListeners();
                }
                refHint.remove();
            }

            function showRefHint(link) {
                if (link.classList.contains("dfn-link")) return;
                const url = link.getAttribute("href");
                const ref = refsData[url];
                if (!ref) return;

                hideAllRefHints(); // Only display one at this time.

                const refHint = mkRefHint(link, ref);
                append(document.body, refHint);
                link.setAttribute("aria-expanded", "true");
                positionRefHint(refHint);
            }

            function setupRefHintEventListeners(link, refHint) {
                if (refHint.teardownEventListeners) return;
                // Add event handlers to hide the refHint after the user moves away
                // from both the link and refHint, if not hovering either within one second.
                let timeout = null;
                const startHidingRefHint = (event) => {
                    if (timeout) {
                        clearTimeout(timeout);
                    }
                    timeout = setTimeout(() => {
                        hideRefHint(refHint);
                    }, 1000);
                }
                const resetHidingRefHint = (event) => {
                    if (timeout) clearTimeout(timeout);
                    timeout = null;
                };
                link.addEventListener("mouseleave", startHidingRefHint);
                link.addEventListener("mouseenter", resetHidingRefHint);
                link.addEventListener("blur", startHidingRefHint);
                link.addEventListener("focus", resetHidingRefHint);
                refHint.addEventListener("mouseleave", startHidingRefHint);
                refHint.addEventListener("mouseenter", resetHidingRefHint);
                refHint.addEventListener("blur", startHidingRefHint);
                refHint.addEventListener("focus", resetHidingRefHint);

                refHint.teardownEventListeners = () => {
                    // remove event listeners
                    resetHidingRefHint();
                    link.removeEventListener("mouseleave", startHidingRefHint);
                    link.removeEventListener("mouseenter", resetHidingRefHint);
                    link.removeEventListener("blur", startHidingRefHint);
                    link.removeEventListener("focus", resetHidingRefHint);
                    refHint.removeEventListener("mouseleave", startHidingRefHint);
                    refHint.removeEventListener("mouseenter", resetHidingRefHint);
                    refHint.removeEventListener("blur", startHidingRefHint);
                    refHint.removeEventListener("focus", resetHidingRefHint);
                };
            }

            function positionRefHint(refHint) {
                const link = refHint.forLink;
                const linkPos = getBounds(link);
                refHint.style.top = linkPos.bottom + "px";
                refHint.style.left = linkPos.left + "px";

                const panelPos = refHint.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
                    refHint.style.left = newLeft + "px";
                }
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function showRefHintListener(e) {
                // If the target isn't in a link (or is a link),
                // just ignore it.
                let link = e.target.closest("a");
                if (!link) return;

                // If the target is in a ref-hint panel
                // (aka a link in the already-open one),
                // also just ignore it.
                if (link.closest(".ref-hint")) return;

                // Otherwise, show the panel for the link.
                showRefHint(link);
            }

            function hideAllHintsListener(e) {
                // If the click is inside a ref-hint panel, ignore it.
                if (e.target.closest(".ref-hint")) return;
                // Otherwise, close all the current panels.
                hideAllRefHints();
            }

            document.addEventListener("DOMContentLoaded", () => {
                document.body.addEventListener("mousedown", showRefHintListener);
                document.body.addEventListener("focus", showRefHintListener);

                document.body.addEventListener("click", hideAllHintsListener);
            });

            window.addEventListener("resize", () => {
                // Hide any open ref hint.
                hideAllRefHints();
            });
        }
    </script>
    <script>/* Boilerplate: script-wpt */
        "use strict";
        {
            let wptData = {
                "paths": ["/css/compositing/"],
            };

            document.addEventListener("DOMContentLoaded", async () => {
                if (wptData.paths.length == 0) return;

                const runsUrl = "https://wpt.fyi/api/runs?label=master&label=stable&max-count=1&product=chrome&product=firefox&product=safari&product=edge";
                const runs = await (await fetch(runsUrl)).json();

                let testResults = [];
                for (const pathPrefix of wptData.paths) {
                    const pathResults = await (await fetch("https://wpt.fyi/api/search", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify({
                            "run_ids": runs.map(x => x.id),
                            "query": { "path": pathPrefix },
                        })
                    })).json();
                    testResults = testResults.concat(pathResults.results);
                }

                const browsers = runs.map(x => ({ name: x.browser_name, version: x.browser_version, passes: 0, total: 0 }));
                const resultsFromPath = new Map(testResults.map(result => {
                    const testPath = result.test;
                    const passes = result.legacy_status.map(x => [x.passes, x.total]);
                    return [testPath, passes];
                }));
                const seenTests = new Set();
                document.querySelectorAll(".wpt-name").forEach(nameEl => {
                    const passData = resultsFromPath.get("/" + nameEl.getAttribute("title"));
                    if (!passData) {
                        console.log("Couldn't find test in results:", nameEl);
                        return
                    }
                    const numTests = passData[0][1];
                    if (numTests > 1) {
                        nameEl.insertAdjacentElement("beforeend",
                            mk.small({}, ` (${numTests} tests)`));
                    }
                    if (passData == undefined) return;
                    const resultsEl = mk.span({ "class": "wpt-results" },
                        ...passData.map((p, i) => mk.span(
                            {
                                "title": `${browsers[i].name} ${p[0]}/${p[1]}`,
                                "class": "wpt-result",
                                "style": `background: conic-gradient(forestgreen ${p[0] / p[1] * 360}deg, darkred 0deg);`,
                            })),
                    );
                    nameEl.insertAdjacentElement("afterend", resultsEl);

                    // Only update the summary pass/total count if we haven't seen this
                    // test before, to support authors listing the same test multiple times
                    // in a spec.
                    if (!seenTests.has(nameEl.getAttribute("title"))) {
                        seenTests.add(nameEl.getAttribute("title"));
                        passData.forEach((p, i) => {
                            browsers[i].passes += p[0];
                            browsers[i].total += p[1];
                        });
                    }
                });
                const overview = document.querySelector(".wpt-overview");
                if (overview) {
                    overview.appendChild(mk.ul({}, ...browsers.map(formatWptResult)));
                    document.head.appendChild(mk.style({},
                        `.wpt-overview ul { display: flex; flex-flow: row wrap; gap: .2em; justify-content: start; list-style: none; padding: 0; margin: 0;}
             .wpt-overview li { padding: .25em 1em; color: black; text-align: center; }
             .wpt-overview img { height: 1.5em; height: max(1.5em, 32px); background: transparent; }
             .wpt-overview .browser { font-weight: bold; }
             .wpt-overview .passes-none { background: #e57373; }
             .wpt-overview .passes-hardly { background: #ffb74d; }
             .wpt-overview .passes-a-few { background: #ffd54f; }
             .wpt-overview .passes-half { background: #fff176; }
             .wpt-overview .passes-lots { background: #dce775; }
             .wpt-overview .passes-most { background: #aed581; }
             .wpt-overview .passes-all { background: #81c784; }`));
                }
            });

            function formatWptResult({ name, version, passes, total }) {
                const passRate = passes / total;
                let passClass = "";
                if (passRate == 0) passClass = "passes-none";
                else if (passRate < .2) passClass = "passes-hardly";
                else if (passRate < .4) passClass = "passes-a-few";
                else if (passRate < .6) passClass = "passes-half";
                else if (passRate < .8) passClass = "passes-lots";
                else if (passRate < 1) passClass = "passes-most";
                else passClass = "passes-all";

                name = name[0].toUpperCase() + name.slice(1);
                const shortVersion = /^\d+/.exec(version);
                const icon = []

                if (name == "Chrome") icon.push(mk.img({ alt: "", src: "https://wpt.fyi/static/chrome_64x64.png" }));
                if (name == "Edge") icon.push(mk.img({ alt: "", src: "https://wpt.fyi/static/edge_64x64.png" }));
                if (name == "Safari") icon.push(mk.img({ alt: "", src: "https://wpt.fyi/static/safari_64x64.png" }));
                if (name == "Firefox") icon.push(mk.img({ alt: "", src: "https://wpt.fyi/static/firefox_64x64.png" }));

                return mk.li({ "class": passClass },
                    mk.nobr({ 'class': 'browser' }, ...icon, ` ${name} ${shortVersion}`),
                    mk.br(),
                    mk.nobr({ 'class': 'pass-rate' }, `${passes}/${total}`)
                );
            }
        }
    </script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
