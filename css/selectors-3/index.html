<!DOCTYPE html>

<html lang=ja-JP>

<head>
  <meta charset=utf-8>

  <title>セレクター レベル 3</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link href="https://www.w3.org/TR/2018/REC-selectors-3-20181106/" rel=canonical>
  <!--
  <link href="http://purl.org/dc/terms/" rel="schema.dcterms">
  <link href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright" rel="dcterms.rights">
  -->

  <meta content="Selectors Level 3" name=dcterms.title>
  <meta content=text name=dcterms.type>
  <meta content=2018-01-30 name=dcterms.date>
  <meta content="Tantek Çelik" name=dcterms.creator>
  <meta content="Elika J. Etemad" name=dcterms.creator>
  <meta content="Daniel Glazman" name=dcterms.creator>
  <meta content="Ian Hickson" name=dcterms.creator>
  <meta content="Peter Linss" name=dcterms.creator>
  <meta content="John Williams" name=dcterms.creator>
  <meta content=W3C name=dcterms.publisher>
  <meta content="https://www.w3.org/TR/2018/REC-selectors-3-20181106/" name=dcterms.identifier>
  <link href="https://www.w3.org/TR/selectors-3/default.css" rel=stylesheet type="text/css">
  <link href="https://www.w3.org/StyleSheets/TR/2016/W3C-REC.css" rel=stylesheet type="text/css">
  <script defer="" src="https://test.csswg.org/harness/annotate.js#!selectors-3_dev/selectors-3"
    type="text/javascript"></script>

<body>
  <div class=head> <!--begin-logo-->
    <p><a href="https://www.w3.org/"><img alt=W3C height=48 src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C"
          width=72></a>
      <!--end-logo-->

    <h1 id=title>セレクター レベル 3</h1>

    <h2 class="no-num no-toc">W3C 勧告 2018年11月6日</h2>

    <dl>
      <dt>このバージョン:</dt>

      <dd>
        <a href="https://www.w3.org/TR/2018/REC-selectors-3-20181106/">
          https://www.w3.org/TR/2018/REC-selectors-3-20181106/</a>
      </dd>

      <dt>最新バージョン:</dt>

      <dd><a href="https://www.w3.org/TR/selectors-3/">
          https://www.w3.org/TR/selectors-3/</a></dd>

      <dt>以前のバージョン:</dt>

      <dd><a href="https://www.w3.org/TR/2018/PR-selectors-3-20180911/">
          https://www.w3.org/TR/2018/PR-selectors-3-20180911/</a></dd>

      <dt>セレクターの最新バージョン:</dt>
      <dd><a href="https://www.w3.org/TR/selectors/">https://www.w3.org/TR/selectors/</a></dd>

      <dt>編集者ドラフト:</dt>
      <dd><a href="https://drafts.csswg.org/selectors-3/">https://drafts.csswg.org/selectors-3/</a></dd>

      <dt>フィードバック:</dt>

      <dd><a href="https://github.com/w3c/csswg-drafts/labels/selectors-3">GitHubでissueを提出</a>

      <dt id=editors-list>編集者:</dt>

      <dd class=vcard><a class="url fn" href="http://www.tantek.com/" lang=tr>Tantek Çelik</a>（招待専門家）

      <dd class=vcard><a class="url fn" href="http://fantasai.inkedblade.net/contact">Elika J. Etemad</a>
        （招待専門家）

      <dd class=vcard><span class=fn>Daniel Glazman</span>（Disruptive
        Innovations SARL）

      <dd class=vcard><a class="url fn" href="mailto:ian@hixie.ch">Ian
          Hickson</a>（<span class=company><a href="https://www.google.com/">Google</a></span>）

      <dd class=vcard><span class=fn>Peter Linss</span>（元編集者、<span class=company><a
            href="http://www.netscape.com/">Netscape/AOL</a></span>）

      <dd class=vcard><span class=fn>John Williams</span>（元編集者、<span class=company><a
            href="http://www.quark.com/">Quark, Inc.</a></span>）
    </dl>
    <p>公開後に報告されたエラーや問題については、<a
        href="https://www.w3.org/Style/2018/REC-selectors-3-20181106-errata.html"><strong>正誤表</strong></a>をご確認ください。</p>

    <!--begin-copyright-->
    <p class="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2018 <a
        href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
        href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a
        href="https://www.ercim.eu/"><abbr
          title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a
        href="https://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a
        href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a
        href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a
        href="https://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p>
    <!--end-copyright-->
    <hr title="Separator for header">
  </div>

  <h2 class="no-num no-toc" id=abstract>概要</h2>

  <p><a
      href="#selector"><em>セレクター</em></a>は、ツリー内の要素にマッチするパターンであり、XMLドキュメント内のノードを選択するために使用できる技術のひとつです。セレクターはHTMLやXMLでの使用に最適化されており、パフォーマンスが重要なコードでも利用できるよう設計されています。

  <p><abbr title="Cascading Style Sheets">CSS</abbr>（カスケーディングスタイルシート）は、<abbr
      title="Hypertext Markup Language">HTML</abbr>や<abbr
      title="Extensible Markup Language">XML</abbr>ドキュメントの画面表示、印刷、音声などのレンダリングを記述するための言語です。CSSはセレクターを使って、ドキュメント内の要素にスタイルプロパティを関連付けます。

  <p>本書では、<abbr title="CSS level 1">CSS1</abbr> <a href="#ref-CSS1">[CSS1]<!--{{CSS1}}--></a>や<abbr
      title="CSS level 2">CSS2</abbr> <a href="#ref-CSS21">[CSS21]<!--{{!CSS21}}--></a>ですでに存在するセレクターについて説明し、さらに<abbr
      title="CSS level 3">CSS3</abbr>や他の言語で必要となる新しいセレクターを紹介します。

  <p>セレクターは以下の機能を定義します：

  <pre>expression ∗ element → boolean</pre>

  <p>つまり、要素とセレクターが与えられた場合、この仕様はその要素がセレクターにマッチするかどうかを定義します。

  <p>これらの式は、例えば、サブツリー内のすべての要素に対して式を評価することで、要素の集合や単一の要素を選択するためにも使用できます。<abbr
      title="Simple Tree Transformation Sheets">STTS</abbr>（Simple Tree Transformation
    Sheets）は、XMLツリーを変換するための言語であり、この仕組みを利用します。<a href="#ref-STTS3">[STTS3]<!--{{STTS3}}--></a>

  <h2 class="no-num no-toc" id=status>この文書のステータス</h2>
  <!--begin-status-->

  <p><em>このセクションは、公開時点での文書のステータスを説明します。他の文書が本書に取って代わる場合があります。現在のW3C出版物の一覧および本技術レポートの最新改訂版は、<a
        href="https://www.w3.org/TR/">W3C技術レポート一覧</a>（https://www.w3.org/TR/）で確認できます。</em></p>

  <p>このW3C勧告は、
    <a href="https://www.w3.org/TR/2018/PR-selectors-3-20180911/">
      2018年9月11日付の提案勧告</a>と同一内容ですが、ステータスと定型文がW3C勧告用に更新されています。
  </p>

  <p>
    本書はW3Cメンバー、ソフトウェア開発者、他のW3Cグループや関係者によってレビューされ、ディレクターによりW3C勧告として承認されています。これは安定した文書であり、参考資料や他の文書から引用できます。W3Cの役割は、この勧告に注目を集め、その広範な導入を推進することです。これにより、Webの機能性と相互運用性が向上します。
  </p>

  <p>この文書は、<a href="https://www.w3.org/Style/CSS/members">CSSワーキンググループ</a>によって、<a
      href="https://www.w3.org/2018/Process-20180201/#Reports">W3C勧告</a>として作成されました。</p>

  <p>提案勧告は広くレビューされ、実装の準備ができた文書です。W3Cは、すべての人がこの仕様を実装し、<a
      href="https://github.com/w3c/csswg-drafts/labels/selectors-3">GitHub issue</a>
    として2018年10月11日までにコメントを返すことを推奨します。
    すべてのissueおよびコメントは<a href="https://lists.w3.org/Archives/Public/public-css-archive/">アーカイブ</a>されており、<a
      href="https://lists.w3.org/Archives/Public/www-style/">過去の
      アーカイブ</a>もあります。


  <p>この文書は、<a
      href="https://www.w3.org/Consortium/Patent-Policy/">W3C特許ポリシー</a>に基づき活動するグループによって作成されました。W3Cは、グループの成果物に関連して行われた<a
      href="https://www.w3.org/2004/01/pp-impl/32061/status" rel=disclosure>特許開示の公開リスト</a>を管理しています。
    そのページには特許開示の方法も記載されています。特許について実際の知識があり、その特許が<a
      href="https://www.w3.org/Consortium/Patent-Policy/#def-essential">必須クレーム</a>を含むと考える個人は、<a
      href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">W3C特許ポリシー第6節</a>に従って情報を開示する必要があります。
  </p>

  <p>この文書は、<a id="w3c_process_revision" href="https://www.w3.org/2018/Process-20180201/">2018年2月1日版
      W3Cプロセス文書</a>に従って管理されています。</p>
  <!--end-status-->

  <p>別途、<a href="https://test.csswg.org/harness/suite/selectors-3_dev/">テスト
      スイート</a>および<a href="https://test.csswg.org/harness/results/selectors-3_dev/grouped/">
      実装レポート</a>が公開されています。

  <nav id=toc>
    <h2 class="no-num no-toc" id=contents>目次</h2>
    <!--begin-toc-->
    <ul class=toc>
      <li><a href="#context"><span class=secno>1. </span>はじめに</a>
        <ul class=toc>
          <li><a href="#dependencies"><span class=secno>1.1.
              </span>依存関係</a>

          <li><a href="#terminology"><span class=secno>1.2.
              </span>用語</a>

          <li><a href="#changesFromCSS2"><span class=secno>1.3. </span>CSS2からの変更点</a>
        </ul>

      <li><a href="#selectors"><span class=secno>2. </span>セレクター</a>

      <li><a href="#casesens"><span class=secno>3. </span>大文字小文字の区別</a>

      <li><a href="#selector-syntax"><span class=secno>4. </span>セレクターの構文</a>

      <li><a href="#grouping"><span class=secno>5. </span>セレクターのグループ化</a>

      <li><a href="#simple-selectors"><span class=secno>6. </span>単純セレクター</a>
        <ul class=toc>
          <li><a href="#type-selectors"><span class=secno>6.1. </span>型セレクター</a>
            <ul class=toc>
              <li><a href="#typenmsp"><span class=secno>6.1.1. </span>型セレクターと名前空間</a>
            </ul>

          <li><a href="#universal-selector"><span class=secno>6.2.
              </span>全称セレクター</a>
            <ul class=toc>
              <li><a href="#univnmsp"><span class=secno>6.2.1. </span>全称セレクターと名前空間</a>
            </ul>

          <li><a href="#attribute-selectors"><span class=secno>6.3.
              </span>属性セレクター</a>
            <ul class=toc>
              <li><a href="#attribute-representation"><span class=secno>6.3.1.
                  </span>属性存在・値セレクター</a>

              <li><a href="#attribute-substrings"><span class=secno>6.3.2.
                  </span>部分文字列一致属性セレクター</a>

              <li><a href="#attrnmsp"><span class=secno>6.3.3. </span>属性セレクターと名前空間</a>

              <li><a href="#def-values"><span class=secno>6.3.4. </span>DTDにおける属性のデフォルト値</a>
            </ul>

          <li><a href="#class-html"><span class=secno>6.4. </span>クラスセレクター</a>

          <li><a href="#id-selectors"><span class=secno>6.5. </span>IDセレクター</a>

          <li><a href="#pseudo-classes"><span class=secno>6.6.
              </span>疑似クラス</a>
            <ul class=toc>
              <li><a href="#dynamic-pseudos"><span class=secno>6.6.1.
                  </span>動的疑似クラス</a>
                <ul class=toc>
                  <li><a href="#the-link-pseudo-classes-link-and-visited"><span class=secno>6.6.1.1. </span>リンク疑似クラス:
                      :link および :visited</a>

                  <li><a href="#the-user-action-pseudo-classes-hover-act"><span class=secno>6.6.1.2. </span>ユーザー操作疑似クラス
                      :hover、
                      :active、:focus</a>
                </ul>

              <li><a href="#target-pseudo"><span class=secno>6.6.2. </span>ターゲット疑似クラス :target</a>

              <li><a href="#lang-pseudo"><span class=secno>6.6.3. </span>言語疑似クラス :lang</a>

              <li><a href="#UIstates"><span class=secno>6.6.4. </span>UI要素状態疑似クラス</a>
                <ul class=toc>
                  <li><a href="#enableddisabled"><span class=secno>6.6.4.1.
                      </span>:enabled および :disabled 疑似クラス</a>

                  <li><a href="#checked"><span class=secno>6.6.4.2. </span>:checked 疑似クラス</a>

                  <li><a href="#indeterminate"><span class=secno>6.6.4.3. </span>:indeterminate 疑似クラス</a>
                </ul>

              <li><a href="#structural-pseudos"><span class=secno>6.6.5.
                  </span>構造疑似クラス</a>
                <ul class=toc>
                  <li><a href="#root-pseudo"><span class=secno>6.6.5.1. </span>:root 疑似クラス</a>

                  <li><a href="#nth-child-pseudo"><span class=secno>6.6.5.2.
                      </span>:nth-child() 疑似クラス</a>

                  <li><a href="#nth-last-child-pseudo"><span class=secno>6.6.5.3.
                      </span>:nth-last-child() 疑似クラス</a>

                  <li><a href="#nth-of-type-pseudo"><span class=secno>6.6.5.4.
                      </span>:nth-of-type() 疑似クラス</a>

                  <li><a href="#nth-last-of-type-pseudo"><span class=secno>6.6.5.5.
                      </span>:nth-last-of-type() 疑似クラス</a>

                  <li><a href="#first-child-pseudo"><span class=secno>6.6.5.6.
                      </span>:first-child 疑似クラス</a>

                  <li><a href="#last-child-pseudo"><span class=secno>6.6.5.7.
                      </span>:last-child 疑似クラス</a>

                  <li><a href="#first-of-type-pseudo"><span class=secno>6.6.5.8.
                      </span>:first-of-type 疑似クラス</a>

                  <li><a href="#last-of-type-pseudo"><span class=secno>6.6.5.9.
                      </span>:last-of-type 疑似クラス</a>

                  <li><a href="#only-child-pseudo"><span class=secno>6.6.5.10.
                      </span>:only-child 疑似クラス</a>

                  <li><a href="#only-of-type-pseudo"><span class=secno>6.6.5.11.
                      </span>:only-of-type 疑似クラス</a>

                  <li><a href="#empty-pseudo"><span class=secno>6.6.5.12.
                      </span>:empty 疑似クラス</a>
                </ul>

              <li><a href="#content-selectors"><span class=secno>6.6.6.
                  </span>空白</a>

              <li><a href="#negation"><span class=secno>6.6.7. </span>否定疑似クラス</a>
            </ul>
        </ul>

      <li><a href="#pseudo-elements"><span class=secno>7.
          </span>疑似要素</a>
        <ul class=toc>
          <li><a href="#first-line"><span class=secno>7.1. </span>::first-line 疑似要素</a>
            <ul class=toc>
              <li><a href="#first-formatted-line"><span class=secno>7.1.1.
                  </span>CSSにおける最初の整形行の定義</a>
            </ul>

          <li><a href="#first-letter"><span class=secno>7.2. </span>::first-letter 疑似要素</a>
            <ul class=toc>
              <li><a href="#application-in-css"><span class=secno>7.2.1.
                  </span>CSSでの適用</a>
            </ul>

          <li><a href="#selection"><span class=secno>7.3. </span>空白</a>

          <li><a href="#gen-content"><span class=secno>7.4. </span>::before および ::after 疑似要素</a>
        </ul>

      <li><a href="#combinators"><span class=secno>8. </span>コンビネーター</a>
        <ul class=toc>
          <li><a href="#descendant-combinators"><span class=secno>8.1.
              </span>子孫コンビネーター</a>

          <li><a href="#child-combinators"><span class=secno>8.2. </span>子コンビネーター</a>

          <li><a href="#sibling-combinators"><span class=secno>8.3.
              </span>兄弟コンビネーター</a>
            <ul class=toc>
              <li><a href="#adjacent-sibling-combinators"><span class=secno>8.3.1.
                  </span>隣接兄弟コンビネーター</a>

              <li><a href="#general-sibling-combinators"><span class=secno>8.3.2.
                  </span>後続兄弟コンビネーター</a>
            </ul>
        </ul>

      <li><a href="#specificity"><span class=secno>9. </span>セレクターの詳細度の計算</a>

      <li><a href="#w3cselgrammar"><span class=secno>10. </span>セレクターの文法</a>
        <ul class=toc>
          <li><a href="#grammar"><span class=secno>10.1. </span>文法</a>

          <li><a href="#lex"><span class=secno>10.2. </span>字句スキャナー</a>
        </ul>

      <li><a href="#profiling"><span class=secno>11. </span>プロファイル</a>

      <li><a href="#Conformance"><span class=secno>12. </span>適合性および要件</a>

      <li><a href="#Tests"><span class=secno>13. </span>テスト</a>

      <li><a href="#ACKS"><span class=secno>14. </span>謝辞</a>

      <li><a href="#references"><span class=secno>15. </span>参考文献</a>
        <ul class=toc>
          <li><a href="#normative-references"><span class=secno>15.1.
              </span>規範的参考文献</a>

          <li><a href="#informative-references"><span class=secno>15.2.
              </span>参考情報</a>

          <li><a href="#changes"><span class=secno>15.3. </span>変更点</a>
        </ul>
    </ul>
    <!--end-toc-->
  </nav>

  <h2 id=context><span class=secno>1. </span>はじめに</h2>

  <p>Selectors Level 1 および Selectors Level 2 は、それぞれ <a href="https://www.w3.org/TR/REC-CSS1">CSS1</a> と <a
      href="https://www.w3.org/TR/CSS21/">CSS2.1</a> の仕様で定義されているセレクター機能のサブセットとして定義されます。

  <h3 id=dependencies><span class=secno>1.1. </span>依存関係</h3>

  <p>この仕様のいくつかの機能は CSS に特化しているか、CSS 固有の制限や規則があります。本仕様では、そうした内容は CSS2.1 を基準に記述されています。<a
      href="#ref-CSS21">[CSS21]<!--{{!CSS21}}--></a>

  <h3 id=terminology><span class=secno>1.2. </span>用語</h3>

  <p>この仕様書のすべての本文は規範的ですが、例、注記、および明示的に非規範的と記載されたセクションは除きます。

  <p>追加の用語は <a href="https://www.w3.org/TR/CSS21/conform.html#defs">Definitions</a> セクション（<a
      href="#ref-CSS21">[CSS21]<!--{{!CSS21}}--></a>）で定義されています。ドキュメントのソースコードや断片の例は XML <a
      href="#ref-XML10">[XML10]<!--{{XML10}}--></a> または HTML <a href="#ref-HTML401">[HTML401]<!--{{HTML401}}--></a><a
      href="#ref-HTML5">[HTML5]<!--{{HTML5}}--></a> の構文で示します。

  <h3 id=changesFromCSS2><span class=secno>1.3. </span>CSS2からの変更点</h3>

  <p><em>このセクションは非規範的です。</em>

  <p>CSS2のセレクターとSelectorsの主な違いは以下の通りです：

  <ul>
    <li>基本定義（セレクター、セレクターのグループ、単純セレクターなど）のリストが変更されました。特に、CSS2で単純セレクターと呼ばれていたものは、現在は単純セレクターの並び（sequence of simple
      selectors）と呼ばれ、その構成要素に「単純セレクター」という用語が使われます。

    <li>要素型セレクター、全称セレクター、属性セレクターにおいて、オプションで名前空間コンポーネントが許可されました。

    <li><a href="#general-sibling-combinators">新しいコンビネーター</a>が導入されました。

    <li>部分文字列一致属性セレクターや新しい疑似クラスなど、新しい単純セレクターが追加されました。

    <li>新しい疑似要素、および疑似要素に対する「::」記法の導入。

    <li>文法が書き直されました。

    <li>Selectorsを統合する仕様ごとに、実際にサポートされるセレクターセットを定義するプロファイルが追加されます。

    <li>SelectorsはCSS3モジュールかつ独立した仕様となり、他の仕様がCSSとは独立して本書を参照できるようになりました。

    <li>本仕様は独自のテストスイートを持ちます。
  </ul>

  <h2 id=selectors><span class=secno>2. </span>セレクター</h2>

  <p><em>このセクションは非規範的です。後続のセクションの概要のみをまとめています。</em>

  <p>セレクターは構造を表します。この構造は、（例：CSSルールの条件として）ドキュメントツリー内でどの要素がセレクターに一致するかを決定する条件として、またはその構造に対応するHTMLやXML断片の平坦な記述として利用できます。

  <p>セレクターは単純な要素名から、より豊かな文脈表現まで幅広く記述できます。

  <p>以下の表はセレクター構文のまとめです：

  <table class=selectorsReview>
    <thead>
      <tr>
        <th class=pattern>パターン

        <th class=meaning>表すもの

        <th class=described>説明

        <th class=origin>レベル

    <tbody>
      <tr>
        <td class=pattern>*

        <td class=meaning>すべての要素

        <td class=described><a href="#universal-selector">全称セレクター</a>

        <td class=origin>2

      <tr>
        <td class=pattern>E

        <td class=meaning>E型の要素

        <td class=described><a href="#type-selectors">型セレクター</a>

        <td class=origin>1

      <tr>
        <td class=pattern>E[foo]

        <td class=meaning>"foo"属性を持つE要素

        <td class=described><a href="#attribute-selectors">属性セレクター</a>

        <td class=origin>2

      <tr>
        <td class=pattern>E[foo="bar"]

        <td class=meaning>"foo"属性値が"bar"と完全一致するE要素

        <td class=described><a href="#attribute-selectors">属性セレクター</a>

        <td class=origin>2

      <tr>
        <td class=pattern>E[foo~="bar"]

        <td class=meaning>"foo"属性値が空白区切りの値リストで、その中の1つが"bar"と完全一致するE要素

        <td class=described><a href="#attribute-selectors">属性セレクター</a>

        <td class=origin>2

      <tr>
        <td class=pattern>E[foo^="bar"]

        <td class=meaning>"foo"属性値が"bar"で始まるE要素

        <td class=described><a href="#attribute-selectors">属性セレクター</a>

        <td class=origin>3

      <tr>
        <td class=pattern>E[foo$="bar"]

        <td class=meaning>"foo"属性値が"bar"で終わるE要素

        <td class=described><a href="#attribute-selectors">属性セレクター</a>

        <td class=origin>3

      <tr>
        <td class=pattern>E[foo*="bar"]

        <td class=meaning>"foo"属性値に"bar"という部分文字列が含まれるE要素

        <td class=described><a href="#attribute-selectors">属性セレクター</a>

        <td class=origin>3

      <tr>
        <td class=pattern>E[foo|="en"]

        <td class=meaning>"foo"属性値がハイフン区切りの値リストで、左端が"en"で始まるE要素

        <td class=described><a href="#attribute-selectors">属性セレクター</a>

        <td class=origin>2

      <tr>
        <td class=pattern>E:root

        <td class=meaning>ドキュメントのルートとなるE要素

        <td class=described><a href="#structural-pseudos">構造疑似クラス</a>

        <td class=origin>3

      <tr>
        <td class=pattern>E:nth-child(n)

        <td class=meaning>親のn番目の子となるE要素

        <td class=described><a href="#structural-pseudos">構造疑似クラス</a>

        <td class=origin>3

      <tr>
        <td class=pattern>E:nth-last-child(n)

        <td class=meaning>最後から数えてn番目の子となるE要素

        <td class=described><a href="#structural-pseudos">構造疑似クラス</a>

        <td class=origin>3

      <tr>
        <td class=pattern>E:nth-of-type(n)

        <td class=meaning>同じ型の兄弟のうちn番目となるE要素

        <td class=described><a href="#structural-pseudos">構造疑似クラス</a>

        <td class=origin>3

      <tr>
        <td class=pattern>E:nth-last-of-type(n)

        <td class=meaning>同じ型の兄弟のうち、最後から数えてn番目となるE要素

        <td class=described><a href="#structural-pseudos">構造疑似クラス</a>

        <td class=origin>3

      <tr>
        <td class=pattern>E:first-child

        <td class=meaning>親の最初の子となるE要素

        <td class=described><a href="#structural-pseudos">構造疑似クラス</a>

        <td class=origin>2

      <tr>
        <td class=pattern>E:last-child

        <td class=meaning>親の最後の子となるE要素

        <td class=described><a href="#structural-pseudos">構造疑似クラス</a>

        <td class=origin>3

      <tr>
        <td class=pattern>E:first-of-type

        <td class=meaning>同じ型の兄弟のうち最初のE要素

        <td class=described><a href="#structural-pseudos">構造疑似クラス</a>

        <td class=origin>3

      <tr>
        <td class=pattern>E:last-of-type

        <td class=meaning>同じ型の兄弟のうち最後のE要素

        <td class=described><a href="#structural-pseudos">構造疑似クラス</a>

        <td class=origin>3

      <tr>
        <td class=pattern>E:only-child

        <td class=meaning>親の唯一の子となるE要素

        <td class=described><a href="#structural-pseudos">構造疑似クラス</a>

        <td class=origin>3

      <tr>
        <td class=pattern>E:only-of-type

        <td class=meaning>同じ型の兄弟で唯一のE要素

        <td class=described><a href="#structural-pseudos">構造疑似クラス</a>

        <td class=origin>3

      <tr>
        <td class=pattern>E:empty

        <td class=meaning>子（テキストノードを含む）を持たないE要素

        <td class=described><a href="#structural-pseudos">構造疑似クラス</a>

        <td class=origin>3

      <tr>
        <td class=pattern>E:link<br>
          E:visited

        <td class=meaning>ハイパーリンクのソースアンカーとなり、ターゲットがまだ未訪問（:link）もしくはすでに訪問済み（:visited）のE要素

        <td class=described><a href="#link">リンク疑似クラス</a>

        <td class=origin>1

      <tr>
        <td class=pattern>E:active<br>
          E:hover<br>
          E:focus

        <td class=meaning>特定のユーザー操作中のE要素

        <td class=described><a href="#useraction-pseudos">ユーザー操作疑似クラス</a>

        <td class=origin>1 と 2

      <tr>
        <td class=pattern>E:target

        <td class=meaning>参照URIのターゲットとなるE要素

        <td class=described><a href="#target-pseudo">ターゲット疑似クラス</a>

        <td class=origin>3

      <tr>
        <td class=pattern>E:lang(fr)

        <td class=meaning>言語"fr"のE型要素（ドキュメント言語が言語の判定方法を指定）

        <td class=described><a href="#lang-pseudo">:lang() 疑似クラス</a>

        <td class=origin>2

      <tr>
        <td class=pattern>E:enabled<br>
          E:disabled

        <td class=meaning>有効・無効なユーザーインターフェース要素E

        <td class=described><a href="#UIstates">UI要素状態疑似クラス</a>

        <td class=origin>3

      <tr>
        <td class=pattern>E:checked<!--<br>E:indeterminate-->

        <td class=meaning>チェックされたユーザーインターフェース要素E<!-- または不定状態 -->（例：ラジオボタンやチェックボックス）

        <td class=described><a href="#UIstates">UI要素状態疑似クラス</a>

        <td class=origin>3

      <tr>
        <td class=pattern>E::first-line

        <td class=meaning>E要素の最初の整形行

        <td class=described><a href="#first-line">::first-line 疑似要素</a>

        <td class=origin>1

      <tr>
        <td class=pattern>E::first-letter

        <td class=meaning>E要素の最初の整形文字

        <td class=described><a href="#first-letter">::first-letter 疑似要素</a>

        <td class=origin>1

      <tr>
        <td class=pattern>E::before

        <td class=meaning>E要素の前に生成される内容

        <td class=described><a href="#gen-content">::before 疑似要素</a>

        <td class=origin>2

      <tr>
        <td class=pattern>E::after

        <td class=meaning>E要素の後に生成される内容

        <td class=described><a href="#gen-content">::after 疑似要素</a>

        <td class=origin>2

      <tr>
        <td class=pattern>E.warning

        <td class=meaning>クラスが"warning"であるE要素（クラスの判定方法はドキュメント言語による）

        <td class=described><a href="#class-html">クラスセレクター</a>

        <td class=origin>1

      <tr>
        <td class=pattern>E#myid

        <td class=meaning>IDが"myid"であるE要素

        <td class=described><a href="#id-selectors">IDセレクター</a>

        <td class=origin>1

      <tr>
        <td class=pattern>E:not(s)

        <td class=meaning>単純セレクターsに一致しないE要素

        <td class=described><a href="#negation">否定疑似クラス</a>

        <td class=origin>3

      <tr>
        <td class=pattern>E F

        <td class=meaning>E要素の子孫となるF要素

        <td class=described><a href="#descendant-combinators">子孫コンビネーター</a>

        <td class=origin>1

      <tr>
        <td class=pattern>E &gt; F

        <td class=meaning>E要素の直接の子となるF要素

        <td class=described><a href="#child-combinators">子コンビネーター</a>

        <td class=origin>2

      <tr>
        <td class=pattern>E + F

        <td class=meaning>直前にE要素があるF要素

        <td class=described><a href="#adjacent-sibling-combinators">隣接兄弟コンビネーター</a>

        <td class=origin>2

      <tr>
        <td class=pattern>E ~ F

        <td class=meaning>前にE要素が存在するF要素

        <td class=described><a href="#general-sibling-combinators">後続兄弟コンビネーター</a>

        <td class=origin>3
  </table>

  <h2 id=casesens><span class=secno>3. </span>大文字小文字の区別</h2>

  <p>すべてのセレクターの構文は、ASCII範囲内（つまり [a-z] と [A-Z]
    は同等）で大文字小文字を区別しません。ただし、セレクターの制御外の部分は除きます。セレクター内のドキュメント言語の要素名、属性名、属性値の大文字小文字の区別は、ドキュメント言語によって異なります。たとえば、HTMLでは要素名は大文字小文字を区別しませんが、XMLでは区別されます。名前空間接頭辞の大文字小文字の区別は、<a
      href="#ref-CSS3NAMESPACE">[CSS3NAMESPACE]<!--{{!CSS3NAMESPACE}}--></a> で定義されています。

  <h2 id=selector-syntax><span class=secno>4. </span>セレクターの構文</h2>

  <p><dfn id=selector>セレクター</dfn>とは、<a href="#combinators">コンビネーター</a>で区切られた1つ以上の<a
      href="#sequence">単純セレクターの並び</a>の連鎖です。セレクターの最後の単純セレクターの並びには、1つの<a href="#pseudo-elements">疑似要素</a>を付加できます。

  <p><dfn id=sequence-of-simple-selectors><a name=sequence>単純セレクターの並び</a></dfn>は、<a
      href="#combinators">コンビネーター</a>で区切られていない<a href="#simple-selectors-dfn">単純セレクター</a>の連鎖です。必ず<a
      href="#type-selectors">型セレクター</a>または<a
      href="#universal-selector">全称セレクター</a>から始まります。並びの中に他の型セレクターや全称セレクターは許可されません。

  <p><dfn id=simple-selector><a name=simple-selectors-dfn></a><a href="#simple-selectors">単純セレクター</a></dfn>とは、<a
      href="#type-selectors">型セレクター</a>、<a href="#universal-selector">全称セレクター</a>、<a
      href="#attribute-selectors">属性セレクター</a>、<a href="#class-html">クラスセレクター</a>、<a
      href="#id-selectors">IDセレクター</a>、または<a href="#pseudo-classes">疑似クラス</a>のいずれかです。

  <p><dfn id=combinators0>コンビネーター</dfn>は、空白、「大なり記号」（U+003E, <code>&gt;</code>）、「プラス記号」（U+002B,
    <code>+</code>）、および「チルダ」（U+007E, <code>~</code>）です。コンビネーターの前後には空白が入る場合があります。<a
      name=whitespace></a>空白に含まれる文字は、"space"（U+0020）、"tab"（U+0009）、"line feed"（U+000A）、"carriage
    return"（U+000D）、および"form feed"（U+000C）だけです。"em-space"（U+2003）や"ideographic space"（U+3000）などの他の空白類似文字は空白とはなりません。

  <p>セレクターで表現されるドキュメントツリーの要素は、<dfn id=subjects-of-the-selector><a
        name=subject></a>セレクターの対象</dfn>です。単一の単純セレクターの並びだけからなるセレクターは、その条件を満たすすべての要素を表現します。別の単純セレクターの並びとコンビネーターを前置すると、追加の一致条件が課されるため、セレクターの対象は常に最後の単純セレクターの並びが表す要素の部分集合となります。

  <p>単純セレクターの並びや疑似要素が含まれない空のセレクターは、<a href="#Conformance">不正なセレクター</a>です。

  <p>セレクター内の文字は、CSSと同じ<a href="https://www.w3.org/TR/CSS21/syndata.html#characters">エスケープ規則</a>に従ってバックスラッシュでエスケープできます。<a
      href="#ref-CSS21">[CSS21]<!--{{!CSS21}}--></a>。

  <p id=nsdecl>一部のセレクターは名前空間接頭辞をサポートします。名前空間接頭辞の<dfn
      id=declared>宣言</dfn>方法は、セレクターを利用する言語で規定する必要があります。言語で宣言方法が規定されていない場合、接頭辞は宣言されません。CSSでは、名前空間接頭辞は<a
      href="https://www.w3.org/TR/css3-namespace/#declaration"><code>@namespace</code></a>規則によって宣言します。<a
      href="#ref-CSS3NAMESPACE">[CSS3NAMESPACE]<!--{{!CSS3NAMESPACE}}--></a>

  <h2 id=grouping><span class=secno>5. </span>セレクターのグループ化</h2>

  <p>
    カンマ区切りのセレクターリストは、各セレクターが選択するすべての要素の和集合を表します。（カンマはU+002C。）たとえば、CSSでは複数のセレクターが同じ宣言を持つ場合、カンマ区切りリストでグループ化できます。カンマの前後には空白が入る場合があります。

  <div class=example>
    <p>CSS例：

    <p>この例では、同じ宣言を持つ3つのルールを1つにまとめています。つまり、

    <pre>h1 { font-family: sans-serif }
h2 { font-family: sans-serif }
h3 { font-family: sans-serif }</pre>

    <p>は次のようにまとめることができます：

    <pre>h1, h2, h3 { font-family: sans-serif }</pre>
  </div>

  <p><strong>注意</strong>:
    この例で等価となるのは、すべてのセレクターが有効なセレクターである場合です。もしこの中の1つのセレクターが無効だった場合、セレクターのグループ全体が無効となります。この場合、3つの見出し要素すべてのルールが無効になりますが、個別のルールであれば無効なのは1つだけです。

  <div class=example>
    <p>無効なCSS例：

    <pre>h1 { font-family: sans-serif }
h2..foo { font-family: sans-serif }
h3 { font-family: sans-serif }</pre>

    <p>は次のようにはなりません：

    <pre>h1, h2..foo, h3 { font-family: sans-serif }</pre>

    <p>
      上記のセレクター（<code>h1, h2..foo, h3</code>）は全体として無効であり、スタイル規則全体が破棄されます。（セレクターをグループ化しない場合は、<code>h2..foo</code>のルールだけが破棄されます。）
  </div>

  <h2 id=simple-selectors><span class=secno>6. </span>単純セレクター</h2>

  <h3 id=type-selectors><span class=secno>6.1. </span>型セレクター</h3>

  <p><dfn id=type-selector>型セレクター</dfn>は、<a href="https://www.w3.org/TR/css3-namespace/#css-qnames">CSS修飾名</a>
    <a
      href="#ref-CSS3NAMESPACE">[CSS3NAMESPACE]<!--{{!CSS3NAMESPACE}}--></a>の構文で書かれたドキュメント言語の要素型名です。型セレクターは、ドキュメントツリー内のその要素型のインスタンスを表します。

  <div class=example>
    <p>例：

    <p>次のセレクターは、ドキュメントツリー内の <code>h1</code> 要素を表します：

    <pre>h1</pre>
  </div>

  <h4 id=typenmsp><span class=secno>6.1.1. </span>型セレクターと名前空間</h4>

  <p>型セレクターは、オプションで名前空間コンポーネントを許可します。事前に<a href="#nsdecl">宣言</a>された名前空間接頭辞を、名前空間区切り記号「縦棒」（U+007C,
    <code>|</code>）で要素名の前に付加できます。（XMLにおける名前空間の利用については、例として<a
      href="#ref-XML-NAMES">[XML-NAMES]<!--{{XML-NAMES}}--></a>を参照。）

  <p>名前空間コンポーネントを空（区切り記号の前に接頭辞なし）にすることで、名前空間を持たない要素のみを表すセレクターとなります。

  <p>名前空間接頭辞にアスタリスクを使うと、すべての名前空間（名前空間なしも含む）の要素を表すセレクターとなります。

  <p>名前空間コンポーネントがない（区切り記号なし）型セレクターは、要素の名前空間に関係なく要素を表します（「<code>*|</code>」と同等）。ただし、名前空間付きセレクターのためのデフォルト名前空間が<a
      href="#nsdecl">宣言</a>されている場合は、デフォルト名前空間内の要素のみを表します。

  <p>名前空間接頭辞が事前に<a href="#nsdecl">宣言</a>されていない場合、その型セレクターは<a href="#Conformance">不正</a>なセレクターです。

  <p>名前空間対応のクライアントでは、型セレクターの名前部分（区切り記号の後ろの部分）は、要素の<a href="https://www.w3.org/TR/REC-xml-names/#ns-qualnames">修飾名</a>の<a
      href="https://www.w3.org/TR/REC-xml-names/#NT-LocalPart">ローカル部分</a>とだけ一致します。

  <p>まとめ：

  <dl>
    <dt><code>ns|E</code>

    <dd>名前空間 ns の名前 E の要素

    <dt><code>*|E</code>

    <dd>すべての名前空間（名前空間なしも含む）の名前 E の要素

    <dt><code>|E</code>

    <dd>名前空間なしの名前 E の要素

    <dt><code>E</code>

    <dd>セレクター用デフォルト名前空間が<a href="#nsdecl">宣言</a>されていない場合は *|E と同等。宣言されている場合はデフォルト名前空間 ns の ns|E と同等。
  </dl>

  <div class=example>
    <p>CSS例：

    <pre>@namespace foo url(http://www.example.com);
 foo|h1 { color: blue }  /* 1つ目のルール */
 foo|* { color: yellow } /* 2つ目のルール */
 |h1 { color: red }      /* ...*/
 *|h1 { color: green }
 h1 { color: green }</pre>

    <p>1つ目のルール（<code>@namespace</code>のatルールは除く）は、"http://www.example.com" 名前空間の <code>h1</code> 要素のみに一致します。

    <p>2つ目のルールは、"http://www.example.com" 名前空間内のすべての要素に一致します。

    <p>3つ目のルールは、名前空間なしの <code>h1</code> 要素のみに一致します。

    <p>4つ目のルールは、すべての名前空間（名前空間なしも含む）の <code>h1</code> 要素に一致します。

    <p>最後のルールは、デフォルト名前空間が定義されていないため、4つ目のルールと同等です。
  </div>

  <h3 id=universal-selector><span class=secno>6.2. </span>全称セレクター</h3>

  <p><dfn id=universal-selector0>全称セレクター</dfn>は、CSS修飾名<a href="https://www.w3.org/TR/css3-namespace/#css-qnames">CSS
      qualified name</a> <a href="#ref-CSS3NAMESPACE">[CSS3NAMESPACE]<!--{{!CSS3NAMESPACE}}--></a>でアスタリスク（<dfn
      data-dfn-type=selector data-export=data-export id=x>*</dfn>
    U+002A）をローカル名として書き、任意の要素型の修飾名を表します。デフォルト名前空間が指定されていなければ、どの名前空間（名前空間なしも含む）の任意の要素を表します。デフォルト名前空間が指定されている場合は、<a
      href="#univnmsp">全称セレクターと名前空間</a>を参照してください。

  <p>全称セレクター <code>*</code>（名前空間接頭辞なし）を <a href="#sequence">単純セレクターの並び</a>の唯一の構成要素としない場合、または直後に<a
      href="#pseudo-elements">疑似要素</a>が続く場合、<code>*</code>は省略でき、全称セレクターが暗黙的に存在するとみなします。

  <div class=example>
    <p>例：

    <ul>
      <li><code>*[hreflang|=en]</code> と <code>[hreflang|=en]</code> は同等
      <li><code>*.warning</code> と <code>.warning</code> は同等
      <li><code>*#myid</code> と <code>#myid</code> は同等
    </ul>
  </div>

  <p class=note><strong>注:</strong> <code>*</code>は省略しないことが推奨されます。たとえば <code
      style="white-space: nowrap">div :first-child</code> と <code style="white-space: nowrap">div:first-child</code>
    の混同が減るためです。ここでは <code style="white-space: nowrap">div *:first-child</code> の方が読みやすいです。

  <h4 id=univnmsp><span class=secno>6.2.1. </span>全称セレクターと名前空間</h4>

  <p>全称セレクターはオプションで名前空間コンポーネントを持てます。使用方法は以下のとおりです：

  <dl>
    <dt><code>ns|*</code>
    <dd>名前空間 ns のすべての要素

    <dt><code>*|*</code>
    <dd>すべての要素

    <dt><code>|*</code>
    <dd>名前空間なしのすべての要素

    <dt><code>*</code>
    <dd>デフォルト名前空間が指定されていなければ *|* と同等。指定されていれば ns|*（nsはデフォルト名前空間）と同等。
  </dl>

  <p>事前に<a href="#nsdecl">宣言</a>されていない名前空間接頭辞を含む全称セレクターは、<a href="#Conformance">不正</a>なセレクターです。

  <h3 id=attribute-selectors><span class=secno>6.3. </span>属性セレクター</h3>

  <p>セレクターは要素の属性を表現できます。セレクターが要素と一致するかを判定する式として使われる場合、属性セレクターは、その要素が属性セレクターで表現される属性を持っていれば一致したとみなします。

  <h4 id=attribute-representation><span class=secno>6.3.1. </span>属性存在・値セレクター</h4>

  <p>CSS2では4つの属性セレクターが導入されました：

  <dl>
    <dt><code>[att]</code>
    <dd><code>att</code>属性を持つ要素（値は問わない）を表します。

    <dt><code>[att=val]</code>
    <dd><code>att</code>属性の値が"val"と完全一致する要素を表します。

    <dt><code>[att~=val]</code>
    <dd><code>att</code>属性の値が<a
        href="#whitespace">空白</a>区切りの単語リストで、その中の1つが"val"と完全一致する要素を表します。"val"に空白が含まれている場合は一致しません（単語は空白で区切られるため）。また、"val"が空文字列の場合も一致しません。

    <dt><code>[att|=val]</code>
    <dd>
      <code>att</code>属性の値が"val"と完全一致、または"val"の直後に"-"（U+002D）が続く値である要素を表します。主に言語サブコード（例：HTMLの<code>a</code>要素の<code>hreflang</code>属性）で一致判定用に使われます。BCP
      47 (<a href="#ref-BCP47">[BCP47]<!--{{BCP47}}--></a>)
      などを参照。<code>lang</code>（または<code>xml:lang</code>）の言語サブコード判定については、<a
        href="#lang-pseudo"><code>:lang</code>疑似クラス</a>を参照してください。
  </dl>

  <p>属性値は CSSの<a href="https://www.w3.org/TR/CSS21/syndata.html#value-def-identifier">識別子</a>または<a
      href="https://www.w3.org/TR/CSS21/syndata.html#strings">文字列</a>でなければなりません。<a
      href="#ref-CSS21">[CSS21]<!--{{!CSS21}}--></a> セレクター内の属性名・値の大文字小文字の区別はドキュメント言語によって異なります。

  <div class=example>
    <p>例：

    <p>次の属性セレクターは、<code>title</code>属性を持つ <code>h1</code> 要素（値は問わない）を表します：

    <pre>h1[title]</pre>

    <p>次の例では、<code>class</code>属性値が"example"と完全一致する<code>span</code>要素を表します：

    <pre>span[class="example"]</pre>

    <p>
      複数の属性セレクターで、要素の複数属性や同じ属性への複数条件を表現できます。次のセレクターは、<code>hello</code>属性値が"Cleveland"、<code>goodbye</code>属性値が"Columbus"と完全一致する<code>span</code>要素を表します：

    <pre>span[hello="Cleveland"][goodbye="Columbus"]</pre>

    <p>次のCSS例では、"="と"~="の違いを示します。最初のセレクターは、たとえば <code>a</code> 要素の <code>rel</code>属性値が "copyright copyleft copyeditor"
      の場合に一致します。2つ目のセレクターは <code>href</code>属性値が正確に "http://www.w3.org/" の <code>a</code>要素だけ一致します。

    <pre>a[rel~="copyright"] { ... }
a[href="http://www.w3.org/"] { ... }</pre>

    <p>次のセレクターは、<code>hreflang</code>属性値が正確に"fr"となる<code>a</code>要素を表します。

    <pre>a[hreflang=fr]</pre>

    <p>次のセレクターは、<code>hreflang</code>属性値が"en"で始まる（"en", "en-US", "en-scouse"などを含む）<code>a</code>要素を表します：

    <pre>a[hreflang|="en"]</pre>

    <p>次のセレクターは、属性<code>character</code>値が"romeo"または"juliet"のとき、<code>DIALOGUE</code>要素を表します：

    <pre>DIALOGUE[character=romeo]
DIALOGUE[character=juliet]</pre>
  </div>

  <h4 id=attribute-substrings><span class=secno>6.3.2. </span>部分文字列一致属性セレクター</h4>

  <p>属性値の部分文字列に一致するための属性セレクターが3つ追加されています：

  <dl>
    <dt><code>[att^=val]</code>

    <dd><code>att</code>属性の値が"val"で始まる要素を表します。"val"が空文字列の場合、このセレクターは何も表しません。

    <dt><code>[att$=val]</code>

    <dd><code>att</code>属性の値が"val"で終わる要素を表します。"val"が空文字列の場合、このセレクターは何も表しません。

    <dt><code>[att*=val]</code>

    <dd><code>att</code>属性の値に"val"という部分文字列が1つ以上含まれる要素を表します。"val"が空文字列の場合、このセレクターは何も表しません。
  </dl>

  <p>属性値は CSS の<a href="https://www.w3.org/TR/CSS21/syndata.html#value-def-identifier">識別子</a>または<a
      href="https://www.w3.org/TR/CSS21/syndata.html#strings">文字列</a>でなければなりません。
    <a href="#ref-CSS21">[CSS21]<!--{{!CSS21}}--></a> セレクター内の属性名の大文字小文字の区別はドキュメント言語によって異なります。

  <div class=example>
    <p>例：

    <p>次のセレクターは画像を参照するHTMLの<code>object</code>要素を表します：

    <pre>object[type^="image/"]</pre>

    <p>次のセレクターは、<code>href</code>属性値が".html"で終わるHTMLの<code>a</code>要素を表します：

    <pre>a[href$=".html"]</pre>

    <p>次のセレクターは、<code>title</code>属性値に"hello"という部分文字列が含まれるHTMLの<code>p</code>要素を表します：

    <pre>p[title*="hello"]</pre>
  </div>

  <h4 id=attrnmsp><span class=secno>6.3.3. </span>属性セレクターと名前空間</h4>

  <p>属性セレクター内の属性名は<a href="https://www.w3.org/TR/css3-namespace/#css-qnames">CSS修飾名</a>として記述されます：事前に<a
      href="#nsdecl">宣言</a>された名前空間接頭辞を、名前空間区切り記号「縦棒」（<code>|</code>）で属性名の前に付加できます。XML名前空間勧告に従い、属性にはデフォルト名前空間は適用されません。そのため、名前空間コンポーネントなしの属性セレクターは、名前空間なしの属性だけに適用されます（"<code>|attr</code>"と同等）。名前空間接頭辞にアスタリスクを使うことで、属性の名前空間に関係なくすべての属性名に一致させることができます。

  <p>事前に<a href="#nsdecl">宣言</a>されていない名前空間接頭辞を含む属性名の属性セレクターは、<a href="#Conformance">不正</a>なセレクターです。

  <div class=example>
    <p>CSS例：

    <pre>@namespace foo "http://www.example.com";
[foo|att=val] { color: blue }
[*|att] { color: yellow }
[|att] { color: green }
[att] { color: green }</pre>

    <p>1つ目のルールは、"http://www.example.com"名前空間で値が"val"の<code>att</code>属性を持つ要素だけに一致します。

    <p>2つ目のルールは、属性の名前空間に関係なく（名前空間なしも含む）<code>att</code>属性を持つ要素だけに一致します。

    <p>最後の2つのルールは同等で、名前空間なしの<code>att</code>属性を持つ要素だけに一致します。
  </div>

  <h4 id=def-values><span class=secno>6.3.4. </span>DTDにおける属性のデフォルト値</h4>

  <p>
    属性セレクターはドキュメントツリー内の属性値を表します。そのドキュメントツリーがどのように構築されるかはセレクターの範囲外です。いくつかの文書フォーマットでは、DTD等で属性のデフォルト値を定義できますが、属性セレクターで選択できるのは、それらの値がドキュメントツリーに現れている場合のみです。デフォルト値がツリーに含まれていてもいなくてもセレクターが機能するよう設計されるべきです。

  <p>例えば、XML UAは「外部サブセット」を読むことができますが、必須ではありません。一方「内部サブセット」のデフォルト属性値は必須で確認しなければなりません。（これらのサブセットの定義については<a
      href="#ref-XML10">[XML10]<!--{{XML10}}--></a>参照。）UAによっては、DTDの外部サブセットで定義されたデフォルト属性値がドキュメントツリーに現れない場合もあります。

  <p>XML名前空間を認識するUAは、その名前空間の知識を使ってデフォルト属性値を文書内に存在するかのように扱うことができますが、必須ではありません。（例えば、XHTML UAはXHTML
    DTDの組み込み知識を使う必要はありません。XML 1.0における名前空間の詳細は<a href="#ref-XML-NAMES">[XML-NAMES]<!--{{XML-NAMES}}--></a>参照。）

  <p class=note><strong>注:</strong> 多くの実装は外部サブセットを無視する選択をします。これはXML仕様で定義される非検証処理系の動作に相当します。

  <div class=example>
    <p>例：

    <p>属性<code>radix</code>にデフォルト値<code>"decimal"</code>を持つ<code>EXAMPLE</code>要素を考えます。DTD断片は次のようになるかもしれません：

    <pre class=dtd-example>&lt;!ATTLIST EXAMPLE radix (decimal,octal) "decimal"></pre>

    <p>スタイルシートに次のルールがある場合

    <pre>EXAMPLE[radix=decimal] { /*... デフォルトのプロパティ設定 ...*/ }
EXAMPLE[radix=octal]   { /*... その他の設定 ...*/ }</pre>

    <p>1つ目のルールは、<code>radix</code>属性がデフォルトで設定されていて明示的に指定されていない要素には一致しない場合があります。すべてのケースを網羅するには、デフォルト値用の属性セレクターを外す必要があります：

    <pre>EXAMPLE                { /*... デフォルトのプロパティ設定 ...*/ }
EXAMPLE[radix=octal]   { /*... その他の設定 ...*/ }</pre>

    <p>
      この場合、<code>EXAMPLE[radix=octal]</code>セレクターは型セレクター単体よりも詳細度が高いため、<code>radix</code>属性値が<code>"octal"</code>の要素に対しては2つ目のスタイル宣言が1つ目を上書きします。デフォルトケースだけに適用するプロパティ宣言が、非デフォルトケースのスタイルルールで必ず上書きされるよう注意が必要です。
  </div>

  <h3 id=class-html><span class=secno>6.4. </span>クラスセレクター</h3>

  <p>HTMLを扱う場合、著者は「ピリオド」記法（U+002E, <code>.</code>、full
    stopとも呼ばれる）を<code>class</code>属性表現の<code>~=</code>記法の代替として使うことができます。つまり、HTMLでは<code>div.value</code>と<code>div[class~=value]</code>は同じ意味です。属性値はピリオド（<code>.</code>）の直後に記述する必要があります。

  <p>UAは、該当名前空間の知識によりどの属性が「class」属性か判定できる場合、XML文書でもピリオド記法のセレクターを適用できます。こうした名前空間固有の知識の例としては、特定の名前空間仕様書の記述（例：SVG 1.1 <a
      href="#ref-SVG11">[SVG11]<!--{{SVG11}}--></a>の<a
      href="https://www.w3.org/TR/SVG11/styling.html#ClassAttribute">SVG
      <code>class</code>属性</a>や、MathML <a href="#ref-MATHML3">[MATHML3]<!--{{MATHML3}}--></a>の<a
      href="https://www.w3.org/TR/MathML3/chapter2.html#fund.globatt">MathML
      <code>class</code>属性</a>など）があります。

  <div class=example>
    <p>CSS例：

    <p><code>class~="pastoral"</code>を持つすべての要素にスタイル情報を割り当てる例：

    <pre>*.pastoral { color: green }  /* class~=pastoralを持つすべての要素 */</pre>

    <p>または単に

    <pre>.pastoral { color: green }  /* class~=pastoralを持つすべての要素 */</pre>

    <p>次は<code>class~="pastoral"</code>を持つH1要素だけにスタイルを割り当てます：

    <pre>H1.pastoral { color: green }  /* class~=pastoralを持つH1要素 */</pre>

    <p>これらのルールの場合、下記の最初の<code>H1</code>インスタンスは緑色にならず、2つ目は緑色になります：

    <pre>&lt;H1&gt;Not green&lt;/H1&gt;
&lt;H1 class="pastoral"&gt;Very green&lt;/H1&gt;</pre>

    <p>次のルールは、<code>class</code>属性値が<code>pastoral</code>と<code>marine</code>を両方含む<a
        href="#whitespace">空白区切り</a>値リストに割り当てられている<code>P</code>要素に一致します：

    <pre>p.pastoral.marine { color: green }</pre>

    <p>このルールは、<code>class="pastoral blue aqua marine"</code>の場合は一致しますが、<code>class="pastoral blue"</code>の場合は一致しません。
  </div>

  <p class=note><strong>注:</strong>
    CSSでは<code>class</code>属性に強力な機能があるため、著者が要素（例：HTMLの<code>DIV</code>や<code>SPAN</code>など）にほとんど関連付けられた表示なしで独自の「文書言語」を設計し、<code>class</code>属性でスタイル情報を割り当てることも理論的には可能です。しかし、文書言語の構造要素には一般に認知された意味があるため、著者定義のクラスだけで文書設計することは避けるべきです。

  <p class=note><strong>注:</strong>
    要素が複数のclass属性を持つ場合、それらの値は空白区切りで連結されてからクラス検索が行われます。現時点でこのような状況が発生する方法はワーキンググループでは認識されていませんが、本仕様ではこの挙動を明示的に非規範的としています。

  <h3 id=id-selectors><span class=secno>6.5. </span>IDセレクター</h3>

  <p>
    文書言語にはID型として宣言された属性を含む場合があります。ID型属性が特別なのは、適合する文書では、こうした属性値がどの要素型においても重複してはならない点です。文書言語が何であれ、ID型属性はその要素を一意に識別するために使えます。HTMLのすべてのID属性は"id"という名前ですが、XMLアプリケーションではID属性名が異なる場合もあり、同じ制約が適用されます。

  <p>文書言語のID型属性を使うことで、著者はドキュメントツリー内のある要素インスタンスに識別子を割り当てることができます。IDセレクターは「ナンバーサイン」（U+0023, <code>#</code>）の直後にID値（CSSの<a
      href="https://www.w3.org/TR/CSS21/syndata.html#value-def-identifier">識別子</a>）を記述します。IDセレクターは、IDセレクター内の識別子と一致する識別子を持つ要素インスタンスを表します。

  <p>セレクター仕様はUAが要素のID型属性をどう判定するかを規定しません。UAは、例えば文書のDTDを読む、情報をハードコードする、ユーザーに尋ねる等して判定できます。

  <div class=example>
    <p>例：

    <p>次のIDセレクターは、ID型属性値が"chapter1"の<code>h1</code>要素を表します：

    <pre>h1#chapter1</pre>

    <p>次のIDセレクターは、ID型属性値が"chapter1"のすべての要素を表します：

    <pre>#chapter1</pre>

    <p>次のセレクターは、ID型属性値が"z98y"のすべての要素を表します：

    <pre>*#z98y</pre>
  </div>

  <p class=note><strong>注:</strong> XML 1.0 <a
      href="#ref-XML10">[XML10]<!--{{XML10}}--></a>では、どの属性が要素のIDを含むかの情報はDTDやスキーマに含まれます。XMLをパースするUAは必ずしもDTDを読むとは限らず、要素のIDを認識できない場合もあります（ただし、UAが該当名前空間の知識を持つことでID属性が判定できる場合もあります）。スタイルシート作者がUAがID属性を認識しない可能性を知っている場合、<code>#p371</code>の代わりに通常の属性セレクター<code>[name=p371]</code>を使うべきです。

  <p>要素が複数のID属性を持つ場合、IDセレクターの目的ではすべての属性がその要素のIDとして扱われます。xml:id, DOM, XML DTD, 名前空間固有知識などの混合によりこのような状況が発生し得ます。

  <h3 id=pseudo-classes><span class=secno>6.6. </span>疑似クラス</h3>

  <p>疑似クラスの概念は、ドキュメントツリー外の情報や他の単純セレクターでは表現できない条件に基づく選択を可能にするために導入されました。

  <p>疑似クラスは常に「コロン」（<code>:</code>）の後に疑似クラス名が付き、必要に応じて括弧内に値が続きます。

  <p>
    疑似クラスはセレクター内のすべての単純セレクター並びで使用できます。疑似クラスは、先頭の型セレクターや全称セレクター（省略可能）の後なら、単純セレクター並びのどこでも使用できます。疑似クラス名は大文字小文字を区別しません。一部の疑似クラスは排他的ですが、他のものは同じ要素に同時適用できます。疑似クラスは動的で、ユーザーが文書と対話することで要素が疑似クラスを獲得・喪失する場合があります。

  <h4 id=dynamic-pseudos><span class=secno>6.6.1. </span>動的疑似クラス</h4>

  <p>動的疑似クラスは、名前・属性・内容以外の特徴（原則としてドキュメントツリーから推論できない特徴）で要素を分類します。

  <p>動的疑似クラスは文書ソースやドキュメントツリーには現れません。

  <h5 id=the-link-pseudo-classes-link-and-visited><span class=secno>6.6.1.1.
    </span><a name=link>リンク疑似クラス: :link および :visited</a></h5>

  <p>ユーザーエージェントは通常、未訪問リンクと既訪問リンクを異なる表示にします。Selectorsでは、これらを区別するための疑似クラス<dfn data-dfn-type=selector
      data-export=data-export id=sel-link>:link</dfn>および
    <dfn data-dfn-type=selector data-export=data-export id=sel-visited>:visited</dfn>が提供されています：

  <ul>
    <li><a href="#sel-link"><code>:link</code></a>疑似クラスは、まだ訪問されていないリンクに適用されます。

    <li><a href="#sel-visited"><code>:visited</code></a>疑似クラスは、ユーザーがリンクを訪問した後に適用されます。
  </ul>

  <p>一定時間後、ユーザーエージェントは訪問済みリンクを（未訪問の）‘<a href="#sel-link"><code class=css>:link</code></a>’状態に戻すことができます。

  <p>この2つの状態は相互排他的です。

  <div class=example>
    <p>例：

    <p>次のセレクターは、class<code>external</code>を持ち、既に訪問済みのリンクを表します：

    <pre>a.external:visited</pre>
  </div>

  <p class=note><strong>注:</strong> :link および :visited 疑似クラスを悪用することで、著者がユーザーの同意なしにユーザーが訪問したサイトを判定することが可能です。

  <p>そのため、UAはすべてのリンクを未訪問として扱ったり、訪問済みリンクと未訪問リンクの表示を分けつつプライバシーを保護するための措置を実装することがあります。

  <h5 id=the-user-action-pseudo-classes-hover-act><span class=secno>6.6.1.2.
    </span><a name=useraction-pseudos>ユーザー操作疑似クラス: :hover、:active、:focus</a></h5>

  <p>インタラクティブなユーザーエージェントは、ユーザー操作に応じて表示を変更することがあります。Selectorsでは、ユーザーが操作中の要素を選択するための3つの疑似クラスが提供されています。

  <ul>
    <li><dfn data-dfn-type=selector data-export=data-export
        id=sel-hover>:hover</dfn>疑似クラスは、ユーザーがポインティングデバイスで要素を指定している間に適用されますが、必ずしもその要素をアクティブ化しているとは限りません。例えば、視覚的なユーザーエージェントでは、カーソル（マウスポインタ）が要素の生成ボックス上にあるときにこの疑似クラスが適用されます。<a
        href="https://www.w3.org/TR/CSS21/media.html#interactive-media-group">インタラクティブメディア</a>をサポートしないユーザーエージェントでは、この疑似クラスをサポートする必要はありません。一部の準拠UAでインタラクティブメディアをサポートしていても、この疑似クラスをサポートできない場合があります（例：ホバーを検知しないペンデバイス）。

    <li><dfn data-dfn-type=selector data-export=data-export
        id=sel-active>:active</dfn>疑似クラスは、ユーザーが要素をアクティブ化している間に適用されます。例えば、ユーザーがマウスボタンを押してから離すまでの間です。複数のマウスボタンがあるシステムでは、<a
        href="#sel-active"><code>:active</code></a>は主ボタンまたは主アクティベーションボタン（通常は「左」ボタン）およびそのエイリアスにのみ適用されます。

    <li><dfn data-dfn-type=selector data-export=data-export
        id=sel-focus>:focus</dfn>疑似クラスは、要素がフォーカスを持っている間に適用されます（キーボードやマウスイベント、その他の入力を受け付ける）。
  </ul>

  <p>どの要素が<a href="#sel-active"><code>:active</code></a>や<a
      href="#sel-focus"><code>:focus</code></a>になれるかは、文書言語や実装によって制限がある場合があります。

  <p>これらの疑似クラスは排他的ではありません。要素が複数の疑似クラスに同時一致することもあります。

  <p>Selectorsでは、‘<a href="#sel-active"><code class=css>:active</code></a>’や‘<a href="#sel-hover"><code
        class=css>:hover</code></a>’状態になっている要素の親要素が同じ状態になるかどうかは定義しません。

  <p class=note><strong>注:</strong> ‘<a href="#sel-hover"><code
        class=css>:hover</code></a>’状態が、子要素がポインティングデバイスで指定されたことで親要素に適用される場合、その親要素がポインティングデバイス下にない状態でも‘<a
      href="#sel-hover"><code class=css>:hover</code></a>’が適用される可能性があります。

  <div class=example>
    <p>例：

    <pre>a:link    /* 未訪問リンク */
a:visited /* 訪問済みリンク */
a:hover   /* ホバー中 */
a:active  /* アクティブなリンク */</pre>

    <p>動的疑似クラスの組み合わせ例：

    <pre>a:focus
a:focus:hover</pre>

    <p>最後のセレクターは、:focusと:hoverの両方の疑似クラス状態にある<code>a</code>要素に一致します。
  </div>

  <p class=note><strong>注:</strong> 要素は‘<a href="#sel-link"><code class=css>:visited</code></a>’と‘<a
      href="#sel-active"><code class=css>:active</code></a>’（または‘<a href="#sel-link"><code
        class=css>:link</code></a>’と‘<a href="#sel-active"><code class=css>:active</code></a>’）の両方に一致することができます。
  <h4 id=target-pseudo><span class=secno>6.6.2. </span>ターゲット疑似クラス :target</h4>

  <p>URIの中には、リソース内の位置を示すものがあります。この種のURIは「ナンバーサイン」（#）の後にアンカー識別子（フラグメント識別子と呼ばれる）が続きます。

  <p>フラグメント識別子付きのURIは、文書内の特定の要素（ターゲット要素）へのリンクとなります。例えば、HTML文書内の<code>section_2</code>というアンカーを指すURIは次のようになります：

  <pre>http://example.com/html/top.html#section_2</pre>

  <p>ターゲット要素は、<dfn data-dfn-type=selector data-export=data-export
      id=sel-target>:target</dfn>疑似クラスで表現できます。文書のURIにフラグメント識別子が含まれていない場合、その文書にはターゲット要素が存在しません。

  <div class=example>
    <p>例：

    <pre>p.note:target</pre>

    <p>このセレクターは、参照URIのターゲット要素となっている<code>note</code>クラスの<code>p</code>要素を表します。
  </div>

  <div class=example>
    <p>CSS例：

    <p>ここでは、<a href="#sel-target"><code>:target</code></a>疑似クラスを使い、ターゲット要素を赤色にし、もしあればその前に画像を表示します：

    <pre>*:target { color : red }
*:target::before { content : url(target.png) }</pre>
  </div>

  <h4 id=lang-pseudo><span class=secno>6.6.3. </span>言語疑似クラス :lang</h4>

  <p>文書言語が要素の人間言語の判定方法を指定している場合、要素の言語に基づいて要素を表すセレクターを書くことができます。例えばHTML <a
      href="#ref-HTML401">[HTML401]<!--{{HTML401}}--></a>では、言語は<code>lang</code>属性や、場合によっては<code>meta</code>要素やプロトコル（HTTPヘッダーなど）の情報で決定されます。XMLでは<code>xml:lang</code>属性が使われ、その他にも文書言語ごとに判定方法がある場合があります。

  <p>疑似クラス<dfn data-dfn-type=selector data-export=data-export data-lt=":lang"
      id=sel-lang>:lang(C)</dfn>は、言語Cである要素を表します。<code>:lang()</code>セレクターで要素が表されるかどうかは、その要素の言語値（必要であればBCP
    47構文に正規化）が識別子Cと等しいか、またはCの直後に"-"（U+002D）が続く場合のみです。Cの一致判定はASCII範囲内で大文字小文字を区別せずに行われます。Cは有効な言語名である必要はありません。

  <p>Cは有効なCSS <a href="https://www.w3.org/TR/CSS21/syndata.html#value-def-identifier">識別子</a>
    <a href="#ref-CSS21">[CSS21]<!--{{!CSS21}}--></a>でなければならず、空ではいけません（空の場合、セレクターは無効です）。

  <p class=note><strong>注:</strong> 文書やプロトコルは、BCP 47 <a
      href="#ref-BCP47">[BCP47]<!--{{BCP47}}--></a>やその後継のコード、XML文書の場合は"xml:lang"属性で言語を示すことが推奨されます。<a
      href="#ref-XML10">[XML10]<!--{{XML10}}--></a>も参照。「FAQ: 二文字または三文字の言語コード」も参考にしてください。<a
      href="https://www.w3.org/International/questions/qa-lang-2or3.en.html"> "FAQ: Two-letter or three-letter language
      codes."</a>

  <div class=example>
    <p>例：

    <p>次の2つのセレクターは、ベルギーのフランス語またはドイツ語のHTML文書を表します。次の2つは、ベルギーのフランス語またはドイツ語の任意の要素内にある<code>q</code>引用を表します。

    <pre>html:lang(fr-be)
html:lang(de)
:lang(fr-be) &gt; q
:lang(de) &gt; q</pre>
  </div>

  <p><a href="#sel-lang"><code>:lang(C)</code></a>と‘<code class=css>|=</code>’演算子の違いは、‘<code
      class=css>|=</code>’演算子は指定された属性のみ比較するのに対して、<a
      href="#sel-lang"><code>:lang(C)</code></a>疑似クラスはUAの文書のセマンティクスの知識を使って比較する点です。

  <div class=example>
    <p>
      このHTML例では、<code>[lang|=fr]</code>に一致するのはBODYだけ（LANG属性を持つため）ですが、<code>:lang(fr)</code>にはBODYとPの両方が一致します（両方ともフランス語であるため）。PにはLANG属性がないので<code>[lang|=fr]</code>には一致しません。

    <pre>&lt;body lang=fr>
  &lt;p>Je suis français.&lt;/p>
&lt;/body></pre>
  </div>

  <h4 id=UIstates><span class=secno>6.6.4. </span>UI要素状態疑似クラス</h4>

  <h5 id=enableddisabled><span class=secno>6.6.4.1. </span>:enabled および :disabled 疑似クラス</h5>

  <p><dfn data-dfn-type=selector data-export=data-export
      id=sel-enabled>:enabled</dfn>疑似クラスは、有効状態にあるユーザーインターフェース要素を表します。これらの要素には対応する無効状態があります。

  <p>反対に、<dfn data-dfn-type=selector data-export=data-export
      id=sel-disabled>:disabled</dfn>疑似クラスは、無効状態にあるユーザーインターフェース要素を表します。これらの要素には対応する有効状態があります。

  <p>有効状態・無効状態・ユーザーインターフェース要素が何に該当するかは言語依存です。一般的な文書では、ほとんどの要素は<a href="#sel-enabled"><code>:enabled</code></a>にも<a
      href="#sel-disabled"><code>:disabled</code></a>にも該当しません。

  <p class=note><strong>注:</strong>
    ユーザーがUI要素とやり取りできるかどうかに影響するCSSプロパティ（<code>display</code>や<code>visibility</code>など）は、<a
      href="#sel-enabled"><code>:enabled</code></a>や<a href="#sel-disabled"><code>:disabled</code></a>の一致判定には影響しません。

  <h5 id=checked><span class=secno>6.6.4.2. </span>:checked 疑似クラス</h5>

  <p>ラジオボタンやチェックボックスは、ユーザーによって切り替え可能です。メニュー項目の中には、ユーザーが選択すると「チェック」されるものがあります。このような要素が「オン」になっているとき、<dfn
      data-dfn-type=selector data-export=data-export id=sel-checked>:checked</dfn>疑似クラスが適用されます。<a
      href="#sel-checked"><code>:checked</code></a>疑似クラスは動的で、ユーザーの操作により変化しますが、文書内のセマンティック属性の存在にも基づくため、すべてのメディアに適用されます。例えば、<a
      href="#sel-checked"><code>:checked</code></a>疑似クラスは、HTML4の<code>selected</code>や<a
      href="#sel-checked"><code>checked</code></a>属性を持つ要素（<a
      href="https://www.w3.org/TR/REC-html40/interact/forms.html#h-17.2.1">HTML4
      17.2.1節</a>参照）に最初は適用されますが、ユーザーが「オフ」に切り替えると、<a href="#sel-checked"><code>:checked</code></a>疑似クラスは適用されなくなります。

  <h5 id=indeterminate><span class=secno>6.6.4.3. </span>:indeterminate 疑似クラス</h5>

  <div class=note>
    <p><strong>注:</strong>
      ラジオボタンやチェックボックスはユーザーによって切り替えられますが、属性やDOM操作によって「不定」状態になることがあります（チェック済みでも未チェックでもない）。この仕様の将来のバージョンでは、こうした要素に適用される<code>:indeterminate</code>疑似クラスが導入される可能性があります。
      <!--While the <code>:indeterminate</code> pseudo-class is dynamic in
nature, and is altered by user action, since it can also be based on
the presence of an element attribute, it applies to all media.

Components of a radio-group initialized with no pre-selected choice
are an example of :indeterminate state.-->
  </div>

  <h4 id=structural-pseudos><span class=secno>6.6.5. </span>構造疑似クラス</h4>

  <p>Selectorsは、他の単純セレクターやコンビネーターでは表現できない、ドキュメントツリー内の追加情報に基づく選択を可能にするために<dfn
      id=structural-pseudo-classes>構造疑似クラス</dfn>の概念を導入しています。

  <p>兄弟要素の位置を計算する際、独立したテキストやその他の非要素ノードは数えません。インデックス番号は1から始まります。

  <h5 id=root-pseudo><span class=secno>6.6.5.1. </span>:root 疑似クラス</h5>

  <p><dfn data-dfn-type=selector data-export=data-export
      id=sel-root>:root</dfn>疑似クラスは、文書のルート要素を表します。HTML4の場合、これは常に<code>HTML</code>要素です。

  <h5 id=nth-child-pseudo><span class=secno>6.6.5.2. </span>:nth-child() 疑似クラス</h5>

  <p><dfn data-dfn-type=selector data-export=data-export data-lt=":nth-child()"
      id=sel-nth-child>:nth-child(<var>a</var><code>n</code>+<var>b</var>)</dfn>
    疑似クラス記法は、文書ツリー内でその要素の<strong>前に</strong>
    <var>a</var><code>n</code>+<var>b</var>-1個の兄弟要素が存在する要素を表します（<code>n</code>は0以上の整数）。親要素がなくても構いません。<var>a</var>と<var>b</var>が正の値の場合、要素の子を<var>a</var>個ずつのグループに分け（最後のグループは余り）、各グループの<var>b</var>番目の要素を選択します。例えば、テーブルの奇数行や偶数行、段落の色を4色で交互にする場合などに使えます。<var>a</var>と<var>b</var>は整数（正・負・ゼロ）でなければなりません。最初の子要素のインデックスは1です。

  <p>また、<code>:nth-child()</code>は‘<code class=css><code>odd</code></code>’や‘<code
      class=css><code>even</code></code>’を引数として取ることもできます。‘<code
      class=css><code>odd</code></code>’は<code>2n+1</code>と同じ意味、‘<code
      class=css><code>even</code></code>’は<code>2n</code>と同じ意味です。

  <p><code>:nth-child()</code>の引数は下記の文法に一致しなければなりません。<code>INTEGER</code>は<code>[0-9]+</code>に一致し、残りのトークン化は<a
      href="#lex">10.2節の字句スキャナー</a>を参照してください：

  <pre>nth
  : S* [ ['-'|'+']? INTEGER? {N} [ S* ['-'|'+'] S* INTEGER ]? |
         ['-'|'+']? INTEGER | {O}{D}{D} | {E}{V}{E}{N} ] S*
  ;</pre>

  <div class=example>
    <p>例：

    <pre>tr:nth-child(2n+1) /* HTMLテーブルの奇数行 */
tr:nth-child(odd)  /* 同じ */
tr:nth-child(2n+0) /* HTMLテーブルの偶数行 */
tr:nth-child(even) /* 同じ */

/* 段落の色をCSSで交互にする */
p:nth-child(4n+1) { color: navy; }
p:nth-child(4n+2) { color: green; }
p:nth-child(4n+3) { color: maroon; }
p:nth-child(4n+4) { color: purple; }</pre>
  </div>

  <p><var>b</var>が負の符号のとき、式中の「+」は削除し、負値を示す「-」に置き換えます。

  <div class=example>
    <p>例：

    <pre>:nth-child(10n-1)  /* 9番目、19番目、29番目…の要素 */
:nth-child(10n+9)  /* 同じ */
:nth-child(10n+-1) /* 文法的に無効であり、無視される */</pre>
  </div>

  <p>
    <var>a</var>=0のときは、<var>a</var><code>n</code>部分は省略可能です（<var>b</var>部分が省略されていなければ）。<var>a</var><code>n</code>が省略され、<var>b</var>が非負なら、<var>b</var>の前の<code>+</code>も省略できます。この場合、構文は<code>:nth-child(<var>b</var>)</code>となります。

  <div class=example>
    <p>例：

    <pre>foo:nth-child(0n+5)   /* 親要素の5番目のfoo要素 */
foo:nth-child(5)      /* 同じ */</pre>
  </div>

  <p><var>a</var>=1または<var>a</var>=-1のときは、ルールから<code>1</code>は省略できます。

  <div class=example>
    <p>例：

    <p>次のセレクターはすべて同等です：

    <pre>bar:nth-child(1n+0)   /* すべてのbar要素, 詳細度(0,1,1) */
bar:nth-child(n+0)    /* 同じ */
bar:nth-child(n)      /* 同じ */
bar                   /* ただし詳細度は(0,0,1)で低い */</pre>
  </div>

  <p><var>b</var>=0のとき、<var>a</var>番目ごとに要素を選択します。この場合、+<var>b</var>（または-<var>b</var>）部分は省略可能（<var>a</var>部分が省略されていなければ）。

  <div class=example>
    <p>例：

    <pre>tr:nth-child(2n+0) /* HTMLテーブルの偶数行 */
tr:nth-child(2n) /* 同じ */</pre>
  </div>

  <p>「(」の後、「)」の前、また「+」や「-」の両側に空白を入れることができます。

  <div class=example>
    <p>空白を含む有効な例：

    <pre>
:nth-child( 3n + 1 )
:nth-child( +3n - 2 )
:nth-child( -n+ 6)
:nth-child( +6 )
</pre>

    <p>空白を含む無効な例：

    <pre>
:nth-child(3 n)
:nth-child(+ 2n)
:nth-child(+ 2)
</pre>
  </div>

  <p><var>a</var>も<var>b</var>も0の場合、この疑似クラスは文書ツリー内のいかなる要素も表しません。

  <p><var>a</var>は負の値も取れますが、<code>n</code>≥0のときの正の値のみが文書ツリー内の要素を表すことができます。

  <div class=example>
    <p>例：

    <pre>html|tr:nth-child(-n+6)  /* XHTMLテーブルの最初の6行を表す */</pre>
  </div>

  <h5 id=nth-last-child-pseudo><span class=secno>6.6.5.3.
    </span>:nth-last-child() 疑似クラス</h5>

  <p><dfn data-dfn-type=selector data-export=data-export data-lt=":nth-last-child()"
      id=sel-nth-last-child>:nth-last-child(<var>a</var>n+<var>b</var>)</dfn>
    疑似クラス記法は、ドキュメントツリー内でその要素の<strong>後ろ</strong>に <var>a</var><code>n</code>+<var>b</var>-1
    個の兄弟要素が存在する要素を表します（<code>n</code>は0以上の整数）。親要素がなくても構いません。引数の文法については <a
      href="#nth-child-pseudo"><code>:nth-child()</code></a> 疑似クラスを参照してください。‘<code
      class=css><code>even</code></code>’や‘<code class=css><code>odd</code></code>’も引数として利用できます。

  <div class=example>
    <p>例：

    <pre>tr:nth-last-child(-n+2)    /* HTMLテーブルの最後の2行を表す */

foo:nth-last-child(odd)    /* 親要素の中で、後ろから数えて奇数番目のfoo要素をすべて表す */</pre>
  </div>

  <h5 id=nth-of-type-pseudo><span class=secno>6.6.5.4. </span>:nth-of-type() 疑似クラス</h5>

  <p><dfn data-dfn-type=selector data-export=data-export data-lt=":nth-of-type()"
      id=sel-nth-of-type>:nth-of-type(<var>a</var>n+<var>b</var>)</dfn>
    疑似クラス記法は、ドキュメントツリー内でその要素の<strong>前に</strong>同じ展開要素名を持つ兄弟要素が <var>a</var><code>n</code>+<var>b</var>-1
    個存在する要素を表します（<code>n</code>は0以上の整数）。親要素がなくても構いません。引数の文法については <a
      href="#nth-child-pseudo"><code>:nth-child()</code></a> 疑似クラスを参照してください。‘<code
      class=css><code>even</code></code>’や‘<code class=css><code>odd</code></code>’も利用可能です。

  <div class=example>
    <p>CSS例：

    <p>この疑似クラスを使うことで、浮動画像の位置を交互にすることができます：

    <pre>img:nth-of-type(2n+1) { float: right; }
img:nth-of-type(2n) { float: left; }</pre>
  </div>

  <h5 id=nth-last-of-type-pseudo><span class=secno>6.6.5.5.
    </span>:nth-last-of-type() 疑似クラス</h5>

  <p><dfn data-dfn-type=selector data-export=data-export data-lt=":nth-last-of-type()"
      id=sel-nth-last-of-type>:nth-last-of-type(<var>a</var>n+<var>b</var>)</dfn>
    疑似クラス記法は、ドキュメントツリー内でその要素の<strong>後ろ</strong>に同じ展開要素名を持つ兄弟要素が <var>a</var><code>n</code>+<var>b</var>-1
    個存在する要素を表します（<code>n</code>は0以上の整数）。親要素がなくても構いません。引数の文法については <a
      href="#nth-child-pseudo"><code>:nth-child()</code></a> 疑似クラスを参照してください。‘<code
      class=css><code>even</code></code>’や‘<code class=css><code>odd</code></code>’も利用可能です。

  <div class=example>
    <p>例：

    <p>XHTMLの<code>body</code>のすべての<code>h2</code>子要素のうち、最初と最後以外を表すには、次のようなセレクターが使えます：

    <pre>body &gt; h2:nth-of-type(n+2):nth-last-of-type(n+2)</pre>

    <p>この場合、<code>:not()</code>も使えますが、セレクターはほぼ同じ長さになります：

    <pre>body &gt; h2:not(:first-of-type):not(:last-of-type)</pre>
  </div>

  <h5 id=first-child-pseudo><span class=secno>6.6.5.6. </span>:first-child 疑似クラス</h5>

  <p><code>:nth-child(1)</code>と同じです。<dfn data-dfn-type=selector data-export=data-export
      id=sel-first-child>:first-child</dfn> 疑似クラスは、兄弟リストの最初の要素を表します。

  <div class=example>
    <p>例：

    <p>次のセレクターは、<code>div</code>要素の最初の子となる<code>p</code>要素を表します：

    <pre>div &gt; p:first-child</pre>

    <p>このセレクターは下記フラグメントの<code>div</code>内の<code>p</code>要素を表せます：

    <pre>&lt;p&gt; The last P before the note.&lt;/p&gt;
&lt;div class="note"&gt;
   &lt;p&gt; The first P inside the note.&lt;/p&gt;
&lt;/div&gt;</pre>
    ただし、下記フラグメントの2番目の<code>p</code>要素は表せません：
    <pre>&lt;p&gt; The last P before the note.&lt;/p&gt;
&lt;div class="note"&gt;
   &lt;h2&gt; Note &lt;/h2&gt;
   &lt;p&gt; The first P inside the note.&lt;/p&gt;
&lt;/div&gt;</pre>

    <p>次の2つのセレクターは通常同等です：

    <pre>* &gt; a:first-child /* どの要素でも最初の子となるa要素 */
a:first-child /* 同じ（aがルート要素でない場合） */</pre>
  </div>

  <h5 id=last-child-pseudo><span class=secno>6.6.5.7. </span>:last-child 疑似クラス</h5>

  <p><code>:nth-last-child(1)</code>と同じです。<dfn data-dfn-type=selector data-export=data-export
      id=sel-last-child>:last-child</dfn> 疑似クラスは、兄弟リストの最後の要素を表します。

  <div class=example>
    <p>例：

    <p>次のセレクターは、順序付きリスト<code>ol</code>の最後の子となるリスト項目<code>li</code>要素を表します。

    <pre>ol &gt; li:last-child</pre>
  </div>

  <h5 id=first-of-type-pseudo><span class=secno>6.6.5.8.
    </span>:first-of-type 疑似クラス</h5>

  <p><code>:nth-of-type(1)</code>と同じです。<dfn data-dfn-type=selector data-export=data-export
      id=sel-first-of-type>:first-of-type</dfn>
    疑似クラスは、同じ型の兄弟の中で最初となる要素を表します。

  <div class=example>
    <p>例：

    <p>次のセレクターは、定義リスト<code>dl</code>内の定義タイトル<code>dt</code>要素で、その親要素の子リストの中で最初の<code>dt</code>を表します。

    <pre>dl dt:first-of-type</pre>

    <p>これは次の例の最初の2つの<code>dt</code>要素には有効ですが、3番目には適用されません：

    <pre>&lt;dl&gt;
 &lt;dt&gt;gigogne&lt;/dt&gt;
 &lt;dd&gt;
  &lt;dl&gt;
   &lt;dt&gt;fusée&lt;/dt&gt;
   &lt;dd&gt;multistage rocket&lt;/dd&gt;
   &lt;dt&gt;table&lt;/dt&gt;
   &lt;dd&gt;nest of tables&lt;/dd&gt;
  &lt;/dl&gt;
 &lt;/dd&gt;
&lt;/dl&gt;</pre>
  </div>

  <h5 id=last-of-type-pseudo><span class=secno>6.6.5.9. </span>:last-of-type 疑似クラス</h5>

  <p><code>:nth-last-of-type(1)</code>と同じです。<dfn data-dfn-type=selector data-export=data-export
      id=sel-last-of-type>:last-of-type</dfn> 疑似クラスは、同じ型の兄弟の中で最後となる要素を表します。

  <div class=example>
    <p>例：

    <p>次のセレクターは、テーブル行<code>tr</code>の最後のデータセル<code>td</code>要素を表します。

    <pre>tr &gt; td:last-of-type</pre>
  </div>

  <h5 id=only-child-pseudo><span class=secno>6.6.5.10. </span>:only-child 疑似クラス</h5>

  <p><dfn data-dfn-type=selector data-export=data-export id=sel-only-child>:only-child</dfn>
    疑似クラスは、兄弟を持たない要素を表します。<code>:first-child:last-child</code>や<code>:nth-child(1):nth-last-child(1)</code>と同じですが、詳細度は低くなります。

  <h5 id=only-of-type-pseudo><span class=secno>6.6.5.11. </span>:only-of-type 疑似クラス</h5>

  <p><dfn data-dfn-type=selector data-export=data-export id=sel-only-of-type>:only-of-type</dfn>
    疑似クラスは、同じ展開要素名を持つ兄弟を持たない要素を表します。<code>:first-of-type:last-of-type</code>や<code>:nth-of-type(1):nth-last-of-type(1)</code>と同じですが、詳細度は低くなります。

  <h5 id=empty-pseudo><span class=secno>6.6.5.12. </span>:empty 疑似クラス</h5>

  <p><dfn data-dfn-type=selector data-export=data-export id=sel-empty>:empty</dfn>
    疑似クラスは、まったく子要素を持たない要素を表します。ドキュメントツリー上では、要素ノードと内容ノード（DOM <a
      href="#ref-DOM-LEVEL-3-CORE">[DOM-LEVEL-3-CORE]<!--{{DOM-LEVEL-3-CORE}}--></a>
    のテキストノード、CDATAノード、エンティティ参照など）のデータがゼロ長ではない場合のみ空でないとみなします。コメント、処理命令、その他のノードは要素が空かどうかの判定に影響しません。

  <div class=example>
    <p>例：

    <p><code>p:empty</code>は次のフラグメントに対して有効です：

    <pre>&lt;p&gt;&lt;/p&gt;</pre>

    <p><code>foo:empty</code>は下記フラグメントには有効ではありません：

    <pre>&lt;foo&gt;bar&lt;/foo&gt;</pre>

    <pre>&lt;foo&gt;&lt;bar&gt;bla&lt;/bar&gt;&lt;/foo&gt;</pre>

    <pre>&lt;foo&gt;this is not &lt;bar&gt;:empty&lt;/bar&gt;&lt;/foo&gt;</pre>
  </div>

  <h4 id=content-selectors><span class=secno>6.6.6. </span>空白</h4>
  <!-- It’s the Return of Appendix H!!! Run away! -->

  <p>このセクションは意図的に空白です。（以前は<code>:contains()</code>疑似クラスを定義していました。）</p>
  <!-- (used to be :contains()) -->

  <h4 id=negation><span class=secno>6.6.7. </span>否定疑似クラス</h4>

  <p>否定疑似クラス <dfn data-dfn-type=selector data-export=data-export data-lt=":not()" id=sel-not>:not(<var>X</var>)</dfn>
    は、<a href="#simple-selectors-dfn">単純セレクター</a>（否定疑似クラス自身は除外）を引数に取る関数型記法です。引数に一致しない要素を表します。

  <p>否定は入れ子にできません。<code>:not(:not(...))</code>は無効です。また、疑似要素は単純セレクターではないので、<code>:not()</code>の引数としては無効です。

  <div class=example>
    <p>例：

    <p>次のセレクターは、HTML文書内で無効化されていないすべての<code>button</code>要素に一致します。

    <pre>button:not([DISABLED])</pre>

    <p>次のセレクターは、<code>FOO</code>以外のすべての要素を表します。

    <pre>*:not(FOO)</pre>

    <p>次のセレクター群は、リンク以外のすべてのHTML要素を表します。

    <pre>html|*:not(:link):not(:visited)</pre>
  </div>

  <p>デフォルト名前空間宣言は、引数が全称セレクターまたは型セレクターの場合を除き、否定疑似クラスの引数に影響しません。

  <div class=example>
    <p>例：

    <p>デフォルト名前空間が "http://example.com/" にバインドされていると仮定すると、次のセレクターはその名前空間に属さないすべての要素を表します：

    <pre>*|*:not(*)</pre>

    <p>次のセレクターは、ホバー状態でないすべての要素（名前空間を問わず）に一致します。特に、デフォルト名前空間内の非ホバー要素だけに限定されず、デフォルト名前空間外の要素もホバー状態のときはこのルールに一致しません。

    <pre>*|*:not(:hover)</pre>
  </div>

  <p class=note><strong>注</strong>: :not() 疑似クラスは、無意味なセレクターを書くことも可能です。例えば
    <code>:not(*|*)</code>（どの要素も表さない）、<code>foo:not(bar)</code>（<code>foo</code>と同等だが詳細度が高い）などです。

  <h2 id=pseudo-elements><span class=secno>7. </span>疑似要素</h2>

  <p>
    疑似要素は、ドキュメント言語で規定されたものを超えたドキュメントツリーの抽象的な表現を作成します。例えば、ドキュメント言語では要素内容の最初の文字や最初の行にアクセスする仕組みはありませんが、疑似要素を使えばそれらに参照できます。また、疑似要素は、ソース文書には存在しない内容（例：<a
      href="#sel-before"><code>::before</code></a>や<a href="#sel-after"><code>::after</code></a>疑似要素による生成内容）に対しても参照できます。

  <p>疑似要素はコロン2つ（<code>::</code>）＋疑似要素名で構成されます。

  <p>この<code>::</code>記法は、疑似クラスと疑似要素を区別するために本書で導入されました。既存のスタイルシートとの互換性のため、ユーザーエージェントはCSSレベル1および2で導入された疑似要素（<a
      href="#sel-first-line"><code>:first-line</code></a>、<a href="#first-letter0"><code>:first-letter</code></a>、<a
      href="#sel-before"><code>:before</code></a>、<a
      href="#sel-after"><code>:after</code></a>）については、旧来のコロン1つ記法も許容しなければなりません。この互換性は、本仕様で新しく導入された疑似要素には認められません。

  <p>セレクターごとに1つだけ疑似要素を記述でき、もし使う場合は、そのセレクターの<a href="#subject">対象</a>を表す単純セレクター並びの後に記述します。<span
      class=note><strong>注:</strong> 将来的な仕様では、セレクターごとに複数の疑似要素が許可される可能性もあります。</span>

  <h3 id=first-line><span class=secno>7.1. </span>::first-line 疑似要素</h3>

  <p><dfn data-dfn-type=selector data-export=data-export id=sel-first-line>::first-line</dfn> 疑似要素は、要素の最初の整形行の内容を表します。

  <div class=example>
    <p>CSS例：

    <pre>p::first-line { text-transform: uppercase }</pre>

    <p>このルールは「すべての<code>p</code>要素の最初の行の文字を大文字にする」という意味です。

    <p><code>p::first-line</code>セレクターは実際の文書要素には一致しません。準拠ユーザーエージェントが各<code>p</code>要素の先頭に挿入する疑似要素に一致します。
  </div>

  <p>最初の行の長さは、ページ幅やフォントサイズなど様々な要因によって決まります。したがって、通常のHTML段落は例えば次のようになります：

  <pre>
&lt;P&gt;This is a somewhat long HTML
paragraph that will be broken into several
lines. The first line will be identified
by a fictional tag sequence. The other lines
will be treated as ordinary lines in the
paragraph.&lt;/P&gt;
</pre>

  <p>この段落が次のように改行される場合：

  <pre>
THIS IS A SOMEWHAT LONG HTML PARAGRAPH THAT
will be broken into several lines. The first
line will be identified by a fictional tag
sequence. The other lines will be treated as
ordinary lines in the paragraph.
</pre>

  <p>この段落は、ユーザーエージェントによって<a
      href="#sel-first-line"><code>::first-line</code></a>の<em>仮想タグ列</em>が含まれるよう「書き換え」られることがあります。この仮想タグ列はプロパティの継承を示す助けになります。

  <pre>
&lt;P&gt;<b>&lt;P::first-line&gt;</b> This is a somewhat long HTML
paragraph that <b>&lt;/P::first-line&gt;</b> will be broken into several
lines. The first line will be identified
by a fictional tag sequence. The other lines
will be treated as ordinary lines in the
paragraph.&lt;/P&gt;
</pre>

  <p>疑似要素が実際の要素を分割する場合、目的の効果は、要素を閉じて再度開く仮想タグ列で説明できることがあります。前述の段落を<code>span</code>要素でマークアップした場合：

  <pre>
&lt;P&gt;<b>&lt;SPAN class="test"&gt;</b> This is a somewhat long HTML
paragraph that will be broken into several
lines.<b>&lt;/SPAN&gt;</b> The first line will be identified
by a fictional tag sequence. The other lines
will be treated as ordinary lines in the
paragraph.&lt;/P&gt;
</pre>

  <p>ユーザーエージェントは、<a
      href="#sel-first-line"><code>::first-line</code></a>の仮想タグ列を挿入する際、<code>span</code>の開始・終了タグをシミュレートできます。

  <pre>
&lt;P&gt;&lt;P::first-line&gt;<b>&lt;SPAN class="test"&gt;</b> This is a
somewhat long HTML
paragraph that will <b>&lt;/SPAN&gt;</b>&lt;/P::first-line&gt;<b>&lt;SPAN class="test"&gt;</b> be
broken into several
lines.<b>&lt;/SPAN&gt;</b> The first line will be identified
by a fictional tag sequence. The other lines
will be treated as ordinary lines in the
paragraph.&lt;/P&gt;
</pre>

  <h4 id=first-formatted-line><span class=secno>7.1.1. </span>CSSにおける最初の整形行の定義</h4>

  <p>CSSでは、<a
      href="#sel-first-line"><code>::first-line</code></a>疑似要素は、ブロックボックス、インラインブロック、テーブルキャプション、テーブルセルなどのブロック状コンテナに付加された場合のみ効果があります。この場合、そのコンテナの<dfn
      id=first-formatted-line0>最初の整形行</dfn>を指します。

  <p>要素の最初の整形行は、同じフロー内のブロックレベル子孫内にも現れる場合があります（浮動やポジショニングによりフロー外でない限り）。例えば <code>&lt;DIV>&lt;P>This
   line...&lt;/P>&lt;/DIV></code> の場合、<code>DIV</code>の最初の行は<code>P</code>の最初の行です（両方がブロックレベルと仮定）。

  <p>テーブルセルやインラインブロックの最初の行は、祖先要素の最初の整形行にはなりません。したがって <code>&lt;DIV&gt;&lt;P
   STYLE="display: inline-block">Hello&lt;BR&gt;Goodbye&lt;/P&gt;
   etcetera&lt;/DIV&gt;</code> の場合、<code>DIV</code>の最初の整形行は "Hello" ではありません。

  <p class=note><strong>注:</strong>
    次のフラグメントの<code>p</code>の最初の行は文字を含みません（HTML4の<code>br</code>のデフォルトスタイルを仮定）。"First"は最初の整形行にはありません。

  <p>UAは、<a
      href="#sel-first-line"><code>::first-line</code></a>疑似要素の仮想開始タグが、最も内側のブロックレベル要素のすぐ内側に入れ子になるかのように動作するべきです。（CSS1やCSS2ではこのケースについて明示されていなかったため、著者はこの挙動に依存すべきではありません。）例えば、

  <pre>
&lt;DIV>
  &lt;P>First paragraph&lt;/P>
  &lt;P>Second paragraph&lt;/P>
&lt;/DIV>
</pre>

  <p>の仮想タグ列は

  <pre>
&lt;DIV>
  &lt;P>&lt;DIV::first-line>&lt;P::first-line>First paragraph&lt;/P::first-line>&lt;/DIV::first-line>&lt;/P>
  &lt;P>&lt;P::first-line>Second paragraph&lt;/P::first-line>&lt;/P>
&lt;/DIV>
</pre>

  <p><a href="#sel-first-line"><code>::first-line</code></a>疑似要素はインラインレベル要素に類似していますが、いくつかの制約があります。次のCSSプロパティは <a
      href="#sel-first-line"><code>::first-line</code></a> 疑似要素に適用できます：フォントプロパティ、色プロパティ、背景プロパティ、‘<code
      class=property>word-spacing</code>’、‘<code class=property>letter-spacing</code>’、‘<code
      class=property>text-decoration</code>’、‘<code class=property>text-transform</code>’、‘<code
      class=property>line-height</code>’。UAは他のプロパティも適用して構いません。

  <p>CSS継承時、子要素の最初の行に現れる部分は、<a
      href="#sel-first-line"><code>::first-line</code></a>疑似要素から適用可能なプロパティのみ継承します。他のプロパティはすべて、最初の行疑似要素の非疑似要素の親から継承されます。（子要素の最初の行以外の部分は常にその子要素の親から継承されます。）

  <h3 id=first-letter><span class=secno>7.2. </span>::first-letter 疑似要素</h3>

  <p><dfn data-dfn-type=selector data-export=data-export id=first-letter0>::first-letter</dfn>
    疑似要素は、要素の最初の文字を表します。この文字の前に他のコンテンツ（画像やインラインテーブルなど）が行内に存在しない場合に適用されます。::first-letter
    疑似要素は、初めの一文字やドロップキャップ（飾り文字）など、一般的なタイポグラフィ効果に使用できます。

  <p>最初の文字の前後にある句読点（Unicodeの "open" (Ps), "close" (Pe), "initial" (Pi), "final" (Pf), "other" (Po)
    の句読点クラスで定義された文字）は、含める必要があります。<a href="#ref-UNICODE">[UNICODE]<!--{{!UNICODE}}--></a>

  <div class=figure>
    <p><img alt="最初の文字の前にある引用符も含める必要があります。" src=https://www.w3.org/TR/selectors-3/first-letter2.gif>
  </div>

  <p><a href="#first-letter0"><code>::first-letter</code></a> 疑似要素は、最初の文字が数字の場合（例："67 million dollars is a lot of
    money." の "6"）にも適用されます。

  <p class=note><strong>注:</strong> 場合によっては <a href="#first-letter0"><code>::first-letter</code></a>
    疑似要素は行頭の最初の非句読点文字だけでなく、さらに多くの文字を含めるべきです。例えば、結合文字は基底文字と一緒に扱う必要があります。また、言語によっては特定の文字の組み合わせに固有のルールがある場合があります。UAによる <a
      href="#first-letter0"><code>::first-letter</code></a>
    の定義には、少なくともUAX29で定義されたデフォルトの書記素クラスタを含めるべきであり、必要に応じてそれ以上を含めても構いません。例えばオランダ語では、"ij" という文字の組み合わせが要素の先頭に現れる場合、両方の文字を <a
      href="#first-letter0"><code>::first-letter</code></a> 疑似要素として扱うべきです。<a
      href="#ref-UAX29">[UAX29]<!--{{UAX29}}--></a>

  <p><a href="#first-letter0"><code>::first-letter</code></a> を構成する文字が同じ要素内に存在しない場合（例：<code>&lt;p>‘&lt;em>T...</code> の
    "‘T"）、UAは1つの要素から、両方の要素から、または疑似要素自体を作成しない選択をしても構いません。

  <p>同様に、ブロックの最初の文字が行の先頭にない場合（双方向の並び替えなどで）、UAは疑似要素を作成しなくても構いません。

  <div class=example>
    <p>例：

    <p><a name=overlapping-example>次のCSSとHTMLの例</a>は、疑似要素が重なり合う場合の挙動を示します。各P要素の最初の文字は緑色でフォントサイズが ‘<code
        class=css>24pt</code>’ になります。最初の整形行の残りは ‘<code class=property>blue</code>’、段落の残りは ‘<code
        class=property>red</code>’ になります。

    <pre>p { color: red; font-size: 12pt }
p::first-letter { color: green; font-size: 200% }
p::first-line { color: blue }

&lt;P&gt;Some text that ends up on two lines&lt;/P&gt;</pre>

    <p>改行が "ends" の前で起こると仮定すると、このフラグメントの <span class=index-inst id=fictional-tag-sequence
        title="fictional tag sequence">仮想タグ列</span> は次のようになります：

    <pre>&lt;P&gt;
&lt;P::first-line&gt;
&lt;P::first-letter&gt;
S
&lt;/P::first-letter&gt;ome text that
&lt;/P::first-line&gt;
ends up on two lines
&lt;/P&gt;</pre>

    <p><a href="#first-letter0"><code>::first-letter</code></a> 要素は <a
        href="#sel-first-line"><code>::first-line</code></a> 要素の内側にあることに注意してください。<a
        href="#sel-first-line"><code>::first-line</code></a> に設定されたプロパティは <a
        href="#first-letter0"><code>::first-letter</code></a> に継承されますが、同じプロパティが <a
        href="#first-letter0"><code>::first-letter</code></a> に設定されていれば上書きされます。
  </div>

  <p>最初の文字は <a href="#first-formatted-line">最初の整形行</a> に現れていなければなりません。例えばHTMLフラグメント
    <code>&lt;p&gt;&lt;br&gt;First...</code> では、最初の行に文字がないため <a href="#first-letter0"><code>::first-letter</code></a>
    は何にも一致しません（HTML 4の <code>br</code> のデフォルトスタイルの場合）。特に "First" の "F" は一致しません。

  <h4 id=application-in-css><span class=secno>7.2.1. </span>CSSでの適用</h4>

  <p>CSSでは <a href="#first-letter0"><code>::first-letter</code></a> 疑似要素は、block, list-item, table-cell, table-caption,
    inline-block などのブロック状コンテナに適用されます。<span class=note><strong>注:</strong>
      将来の仕様では、より多くのdisplay型に適用できるようになる可能性があります。</span>

  <p><a href="#first-letter0"><code>::first-letter</code></a> 疑似要素は、テキストを含むすべての要素、または同じフロー内にテキストを含む子孫を持つ要素に使用できます。UAは
    ::first-letter 疑似要素の仮想開始タグが、最初のテキストの直前に入るかのように振る舞うべきです（そのテキストが子孫要素内であっても）。

  <div class=example>
    <p>例：

    <p>このHTMLフラグメントの仮想タグ列は：

    <pre>&lt;div>
&lt;p>The first text.</pre>

    <p>次のようになります：

    <pre>&lt;div>
&lt;p>&lt;div::first-letter>&lt;p::first-letter>T&lt;/...>&lt;/...>he first text.</pre>
  </div>

  <p>CSSでは、table-cell や inline-block の最初の文字は祖先要素の first-letter にはなりません。つまり <code>&lt;DIV&gt;&lt;P
   STYLE="display: inline-block">Hello&lt;BR&gt;Goodbye&lt;/P&gt;
   etcetera&lt;/DIV&gt;</code> の場合、DIVの最初の文字は "H" ではありません。実際、DIVには first-letter がありません。

  <p>要素がリスト項目（‘<code class=css>display:
   list-item</code>’）の場合、<a href="#first-letter0"><code>::first-letter</code></a> はマーカーの後の主ボックス内の最初の文字に適用されます。UAは
    ‘<code class=css>list-style-position: inside</code>’ のリスト項目では <a
      href="#first-letter0"><code>::first-letter</code></a> を無視しても構いません。要素に <a
      href="#sel-before"><code>::before</code></a> や <a href="#sel-after"><code>::after</code></a> の内容がある場合、<a
      href="#first-letter0"><code>::first-letter</code></a> はそれらを含めた最初の文字に適用されます。

  <div class=example>
    <p>例：

    <p><code>p::before {content: "Note: "}</code> のルールの後、<code>p::first-letter</code> セレクターは "Note" の "N" に一致します。
  </div>

  <p>CSSでは ::first-line 疑似要素は ‘<code class=property>float</code>’ プロパティが ‘<code class=property>none</code>’
    の場合はインラインレベル要素に似ています。それ以外の場合は浮動要素に似ています。<a href="#first-letter0"><code>::first-letter</code></a>
    疑似要素に適用できるプロパティは次のとおりです：フォントプロパティ、‘<code class=property>text-decoration</code>’、‘<code
      class=property>text-transform</code>’、‘<code class=property>letter-spacing</code>’、‘<code
      class=property>word-spacing</code>’（適切な場合）、‘<code class=property>line-height</code>’、‘<code
      class=property>float</code>’、‘<code class=property>vertical-align</code>’（‘<code
      class=property>float</code>’が‘none’の時のみ）、マージンプロパティ、パディングプロパティ、ボーダープロパティ、色プロパティ、背景プロパティ。UAは他のプロパティも適用して構いません。タイポグラフィ的に正しいドロップキャップやイニシャルキャップを表示できるよう、UAは文字の形状に基づいて
    line-height, 幅, 高さを通常の要素とは異なる計算で選択しても構いません。

  <div class=example>
    <p>例：

    <p>このCSSとHTMLの例は、イニシャルキャップの表示例です。‘<code class=property>line-height</code>’（1.1）が <a
        href="#first-letter0"><code>::first-letter</code></a>
      疑似要素に継承されていますが、この例のUAは最初の文字の高さを異なる方法で計算しているため、最初の2行の間に不要な空間が生じません。また、first-letter の仮想開始タグは <span>span</span>
      の内側にあり、最初の文字のフォントウェイトは normal で、<span>span</span> の bold ではありません：

    <pre>
p { line-height: 1.1 }
p::first-letter { font-size: 3em; font-weight: normal }
span { font-weight: bold }
...
&lt;p>&lt;span>Het hemelsche&lt;/span> gerecht heeft zich ten lange lesten&lt;br>
Erbarremt over my en mijn benaeuwde vesten&lt;br>
En arme burgery, en op mijn volcx gebed&lt;br>
En dagelix geschrey de bange stad ontzet.
</pre>

    <div class=figure>
      <p><img alt="::first-letter 疑似要素の画像例" src=https://www.w3.org/TR/selectors-3/initial-cap.png>
    </div>
  </div>

  <div class=example>
    <p>次のCSSでは、ドロップキャップの文字が2行分の高さになります：

    <pre>
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"&gt;
&lt;HTML&gt;
 &lt;HEAD&gt;
  &lt;TITLE&gt;Drop cap initial letter&lt;/TITLE&gt;
  &lt;STYLE type="text/css"&gt;
   P               { font-size: 12pt; line-height: 1.2 }
   P::first-letter { font-size: 200%; font-weight: bold; float: left }
   SPAN            { text-transform: uppercase }
  &lt;/STYLE&gt;
 &lt;/HEAD&gt;
 &lt;BODY&gt;
  &lt;P&gt;&lt;SPAN&gt;The first&lt;/SPAN&gt; few words of an article
    in The Economist.&lt;/P&gt;
 &lt;/BODY&gt;
&lt;/HTML&gt;
</pre>

    <p>この例のレンダリングは次の通りです：

    <div class=figure>
      <p><img alt="::first-letter と ::first-line 疑似要素の効果例" src=https://www.w3.org/TR/selectors-3/first-letter.gif>
    </div>

    <p><span class=index-inst id=fictional-tag-sequence0 title="fictional tag sequence">仮想タグ列</span>は次の通りです：

    <pre>
&lt;P&gt;
&lt;SPAN&gt;
&lt;P::first-letter&gt;
T
&lt;/P::first-letter&gt;he first
&lt;/SPAN&gt;
few words of an article in the Economist.
&lt;/P&gt;
</pre>

    <p><a href="#first-letter0"><code>::first-letter</code></a> 疑似要素のタグは内容（つまり最初の文字）に隣接しており、::first-line
      疑似要素の開始タグはブロック要素の開始タグの直後に挿入されることに注意してください。
  </div>

  <p>伝統的なドロップキャップのレイアウトを実現するために、UAはベースラインの揃えなどでフォントサイズを調整しても構いません。また、グリフのアウトラインをレイアウト時に考慮しても構いません。

  <h3 id=selection><span class=secno>7.3. </span>空白</h3>

  <p>このセクションは意図的に空白です。（以前は <code>::selection</code> 疑似要素を定義していました。）

  <h3 id=gen-content><span class=secno>7.4. </span>::before および ::after 疑似要素</h3>

  <p><dfn data-dfn-type=selector data-export=data-export id=sel-before>::before</dfn> および <dfn data-dfn-type=selector
      data-export=data-export id=sel-after>::after</dfn> 疑似要素は、要素内容の前後に生成される内容を記述するために使用できます。詳細は CSS 2.1 <a
      href="#ref-CSS21">[CSS21]<!--{{!CSS21}}--></a> を参照してください。

  <p><a href="#first-letter0"><code>::first-letter</code></a> や <a href="#sel-first-line"><code>::first-line</code></a>
    疑似要素が <a href="#sel-before"><code>::before</code></a> や <a href="#sel-after"><code>::after</code></a>
    で生成された内容を持つ要素に適用された場合、生成内容も含めて最初の文字・最初の行に適用されます。

  <h2 id=combinators><span class=secno>8. </span>コンビネーター</h2>

  <h3 id=descendant-combinators><span class=secno>8.1. </span>子孫コンビネーター</h3>

  <p>
    著者は、ある要素が文書ツリー内の別の要素の子孫である場合（例："H1要素内に含まれるEM要素"）についてセレクターで記述したい場合があります。子孫コンビネーターはこの関係を表します。子孫コンビネーターは2つの単純セレクター並びを区切る
    <a href="#whitespace">空白</a>です。"A B" という形のセレクターは、祖先要素Aの任意の子孫である要素Bを表します。

  <div class=example>
    <p>例：

    <p>例えば、次のセレクター：

    <pre>h1 em</pre>

    <p>これは、H1要素の子孫である EM 要素を表します。次のフラグメントの部分的な説明として、正しく有効ですが完全ではありません：

    <pre>&lt;h1&gt;This &lt;span class="myclass"&gt;headline
is &lt;em&gt;very&lt;/em&gt; important&lt;/span&gt;&lt;/h1&gt;</pre>

    <p>次のセレクター：

    <pre>div * p</pre>

    <p>これは、DIV要素の孫（またはそれ以降の子孫）となるP要素を表します。*の前後の空白は全称セレクターの一部ではなく、DIVが祖先で、何かの要素を介してPの祖先となる必要があることを示すコンビネーターです。

    <p>次のセレクターは、子孫コンビネーターと <a href="#attribute-selectors">属性セレクター</a> を組み合わせており、(1) href属性を持つ要素、(2) div内のp内にある要素を表します：

    <pre>div p *[href]</pre>
  </div>

  <h3 id=child-combinators><span class=secno>8.2. </span>子コンビネーター</h3>

  <p><dfn id=child-combinator>子コンビネーター</dfn>は、2つの要素間の親子関係を表します。子コンビネーターは「大なり記号」（U+003E,
    <code>&gt;</code>）で、2つの単純セレクター並びを区切ります。

  <div class=example>
    <p>例：

    <p>次のセレクターは、body要素の子であるp要素を表します：

    <pre>body &gt; p</pre>

    <p>次の例は、子孫コンビネーターと子コンビネーターを組み合わせています。

    <pre>div ol&gt;li p</pre>
    <!-- LEAVE THOSE SPACES OUT! see below -->
    <p>これは、li要素の子孫であるp要素を表します。li要素はol要素の子であり、ol要素はdiv要素の子孫です。「&gt;」コンビネーターの前後にある空白は省略されています。
  </div>

  <p>要素の最初の子を選択する方法については、<code><a href="#structural-pseudos">:first-child</a></code> 疑似クラスのセクションを参照してください。

  <h3 id=sibling-combinators><span class=secno>8.3. </span>兄弟コンビネーター</h3>

  <p>兄弟コンビネーターには「次兄弟コンビネーター」と「後続兄弟コンビネーター」の2種類があります。どちらの場合も、隣接判定の際に非要素ノード（例：要素間のテキスト）は無視されます。

  <h4 id=adjacent-sibling-combinators><span class=secno>8.3.1.
    </span>隣接兄弟コンビネーター</h4>

  <p><dfn id=next-sibling-combinator>隣接兄弟コンビネーター</dfn>は「プラス記号」（U+002B,
    <code>+</code>）で、2つの単純セレクター並びを区切ります。2つの並びが表す要素は同じ親を持ち、1つ目の並びが表す要素が2つ目の並びが表す要素の直前に位置します。

  <div class=example>
    <p>例：

    <p>次のセレクターは、math要素の直後に現れるp要素を表します：

    <pre>math + p</pre>

    <p>次のセレクターは、先ほどの例に属性セレクターを加えたものです。h1要素は class="opener" を持っている必要があります：

    <pre>h1.opener + h2</pre>
  </div>

  <h4 id=general-sibling-combinators><span class=secno>8.3.2.
    </span>後続兄弟コンビネーター</h4>

  <p><dfn id=subsequent-sibling-combinator>後続兄弟コンビネーター</dfn>は「チルダ」（U+007E,
    <code>~</code>）で、2つの単純セレクター並びを区切ります。2つの並びが表す要素は同じ親を持ち、1つ目の並びが表す要素が2つ目の並びが表す要素の前に（必ずしも直前でなくてよい）存在します。

  <div class=example>
    <p>例：

    <pre>h1 ~ pre</pre>

    <p>これは、h1要素の後に現れるpre要素を表します。次のフラグメントの部分的な説明として、正しく有効ですが完全ではありません：

    <pre>&lt;h1&gt;Definition of the function a&lt;/h1&gt;
&lt;p&gt;Function a(x) has to be applied to all figures in the table.&lt;/p&gt;
&lt;pre&gt;function a(x) = 12x/13.5&lt;/pre&gt;</pre>
  </div>

  <h2 id=specificity><span class=secno>9. </span>セレクターの詳細度（Specificity）の計算</h2>

  <p>セレクターの詳細度（specificity）は次のように計算します：

  <ul>
    <li>セレクター内のIDセレクターの数を数える（= a）

    <li>セレクター内のクラスセレクター、属性セレクター、疑似クラスの数を数える（= b）

    <li>セレクター内の型セレクターと疑似要素の数を数える（= c）

    <li>全称セレクターは無視する
  </ul>

  <p><a href="#negation">否定疑似クラス</a>内のセレクターも他と同様に数えますが、否定自体は疑似クラスとして数えません。

  <p>この3つの値 a-b-c を（大きな基数の数値体系で）連結したものが詳細度です。

  <div class=example>
    <p>例：

    <pre>*               /* a=0 b=0 c=0 → 詳細度 =   0 */
LI              /* a=0 b=0 c=1 → 詳細度 =   1 */
UL LI           /* a=0 b=0 c=2 → 詳細度 =   2 */
UL OL+LI        /* a=0 b=0 c=3 → 詳細度 =   3 */
H1 + *[REL=up]  /* a=0 b=1 c=1 → 詳細度 =  11 */
UL OL LI.red    /* a=0 b=1 c=3 → 詳細度 =  13 */
LI.red.level    /* a=0 b=2 c=1 → 詳細度 =  21 */
#x34y           /* a=1 b=0 c=0 → 詳細度 = 100 */
#s12:not(FOO)   /* a=1 b=0 c=1 → 詳細度 = 101 */
</pre>
  </div>

  <p class=note><strong>注意:</strong> 同じ単純セレクターを繰り返し使うことは可能で、その場合詳細度は増加します。

  <p class=note><strong>注意:</strong> HTMLの<code>style</code>属性で指定されたスタイルの詳細度についてはCSS 2.1で記述されています。
    <a href="#ref-CSS21">[CSS21]<!--{{!CSS21}}--></a>。

  <h2 id=w3cselgrammar><span class=secno>10. </span>セレクターの文法</h2>

  <h3 id=grammar><span class=secno>10.1. </span>文法</h3>

  <p>
    以下の文法はセレクターの構文を定義します。全体としてLL(1)、局所的にLL(2)です（ただし多くのUAは直接この文法を使うべきではありません。パース規約を表すものではないため）。生成式のフォーマットは人間が読みやすいよう最適化されており、Yaccを超える簡略記法も一部使われています（<a
      href="#ref-YACC">[YACC]<!--{{!YACC}}--></a>参照）：

  <ul>
    <li><b>*</b>: 0回以上

    <li><b>+</b>: 1回以上

    <li><b>?</b>: 0回または1回

    <li><b>|</b>: 選択肢の区切り

    <li><b>[ ]</b>: グループ化
  </ul>

  <p>生成式は以下の通りです：

  <pre>selectors_group
  : selector [ COMMA S* selector ]*
  ;

selector
  : simple_selector_sequence [ combinator simple_selector_sequence ]*
  ;

combinator
  /* combinators can be surrounded by whitespace */
  : PLUS S* | GREATER S* | TILDE S* | S+
  ;

simple_selector_sequence
  : [ type_selector | universal ]
    [ HASH | class | attrib | pseudo | negation ]*
  | [ HASH | class | attrib | pseudo | negation ]+
  ;

type_selector
  : [ namespace_prefix ]? element_name
  ;

namespace_prefix
  : [ IDENT | '*' ]? '|'
  ;

element_name
  : IDENT
  ;

universal
  : [ namespace_prefix ]? '*'
  ;

class
  : '.' IDENT
  ;

attrib
  : '[' S* [ namespace_prefix ]? IDENT S*
        [ [ PREFIXMATCH |
            SUFFIXMATCH |
            SUBSTRINGMATCH |
            '=' |
            INCLUDES |
            DASHMATCH ] S* [ IDENT | STRING ] S*
        ]? ']'
  ;

pseudo
  /* '::' starts a pseudo-element, ':' a pseudo-class */
  /* Exceptions: :first-line, :first-letter, :before and :after. */
  /* Note that pseudo-elements are restricted to one per selector and */
  /* occur only in the last simple_selector_sequence. */
  : ':' ':'? [ IDENT | functional_pseudo ]
  ;

functional_pseudo
  : FUNCTION S* expression ')'
  ;

expression
  /* In CSS3, the expressions are identifiers, strings, */
  /* or of the form "an+b" */
  : [ [ PLUS | '-' | DIMENSION | NUMBER | STRING | IDENT ] S* ]+
  ;

negation
  : NOT S* negation_arg S* ')'
  ;

negation_arg
  : type_selector | universal | HASH | class | attrib | pseudo
  ;</pre>

  <h3 id=lex><span class=secno>10.2. </span>字句スキャナー</h3>

  <p>以下は <a name=x3>トークナイザー</a>（Flex <a href="#ref-FLEX">[FLEX]<!--{{!FLEX}}--></a> 記法）。トークナイザーは大文字小文字を区別しません。

  <p>2箇所の "\377" はFlexの現行バージョンが扱える最大文字番号（10進255）を表します。これは"\4177777"（10進1114111）、Unicode/ISO-10646の最大コードポイントとして読むべきです。<a
      href="#ref-UNICODE">[UNICODE]<!--{{!UNICODE}}--></a>

  <pre>%option case-insensitive

ident     [-]?{nmstart}{nmchar}*
name      {nmchar}+
nmstart   [_a-z]|{nonascii}|{escape}
nonascii  [^\0-\177]
unicode   \\[0-9a-f]{1,6}(\r\n|[ \n\r\t\f])?
escape    {unicode}|\\[^\n\r\f0-9a-f]
nmchar    [_a-z0-9-]|{nonascii}|{escape}
num       [0-9]+|[0-9]*\.[0-9]+
string    {string1}|{string2}
string1   \"([^\n\r\f\\"]|\\{nl}|{nonascii}|{escape})*\"
string2   \'([^\n\r\f\\']|\\{nl}|{nonascii}|{escape})*\'
invalid   {invalid1}|{invalid2}
invalid1  \"([^\n\r\f\\"]|\\{nl}|{nonascii}|{escape})*
invalid2  \'([^\n\r\f\\']|\\{nl}|{nonascii}|{escape})*
nl        \n|\r\n|\r|\f
w         [ \t\r\n\f]*

D         d|\\0{0,4}(44|64)(\r\n|[ \t\r\n\f])?
E         e|\\0{0,4}(45|65)(\r\n|[ \t\r\n\f])?
N         n|\\0{0,4}(4e|6e)(\r\n|[ \t\r\n\f])?|\\n
O         o|\\0{0,4}(4f|6f)(\r\n|[ \t\r\n\f])?|\\o
T         t|\\0{0,4}(54|74)(\r\n|[ \t\r\n\f])?|\\t
V         v|\\0{0,4}(58|78)(\r\n|[ \t\r\n\f])?|\\v

%%

[ \t\r\n\f]+     return S;

"~="             return INCLUDES;
"|="             return DASHMATCH;
"^="             return PREFIXMATCH;
"$="             return SUFFIXMATCH;
"*="             return SUBSTRINGMATCH;
{ident}          return IDENT;
{string}         return STRING;
{ident}"("       return FUNCTION;
{num}            return NUMBER;
"#"{name}        return HASH;
{w}"+"           return PLUS;
{w}"&gt;"           return GREATER;
{w}","           return COMMA;
{w}"~"           return TILDE;
":"{N}{O}{T}"("  return NOT;
@{ident}         return ATKEYWORD;
{invalid}        return INVALID;
{num}%           return PERCENTAGE;
{num}{ident}     return DIMENSION;
"&lt;!--"           return CDO;
"--&gt;"            return CDC;

\/\*[^*]*\*+([^/*][^*]*\*+)*\/                    /* コメントは無視 */

.                return *yytext;</pre>

  <h2 id=profiling><span class=secno>11. </span>プロファイル</h2>

  <p>Selectorsを利用する各仕様は、許可および除外するSelectorsの部分集合を定義し、その部分集合の全構成要素のローカルな意味を記述しなければなりません。

  <p>非規範的な例：

  <div class=profile>
    <table class=tprofile>
      <tbody>
        <tr>
          <th class=title colspan=2>セレクタープロファイル

        <tr>
          <th>仕様

          <td>CSS レベル1

        <tr>
          <th>許可

          <td>型セレクター<br>
            クラスセレクター<br>
            IDセレクター<br>
            :link, :visited, :active 疑似クラス<br>
            子孫コンビネーター <br>
            ::first-line, ::first-letter 疑似要素

        <tr>
          <th>除外

          <td>
            <p>全称セレクター<br>
              属性セレクター<br>
              :hover, :focus 疑似クラス<br>
              :target 疑似クラス<br>
              :lang() 疑似クラス<br>
              UI要素状態疑似クラスすべて<br>
              構造疑似クラスすべて<br>
              否定疑似クラス<br>
              ::before, ::after 疑似要素<br>
              子コンビネーター<br>
              兄弟コンビネーター

            <p>名前空間

        <tr>
          <th>追加制約

          <td>単純セレクター並びごとにクラスセレクターは1つだけ許可
    </table>
    <br>
    <br>

    <table class=tprofile>
      <tbody>
        <tr>
          <th class=title colspan=2>セレクタープロファイル

        <tr>
          <th>仕様

          <td>CSS レベル2

        <tr>
          <th>許可

          <td>型セレクター<br>
            全称セレクター<br>
            属性存在・値セレクター<br>
            クラスセレクター<br>
            IDセレクター<br>
            :link, :visited, :active, :hover, :focus, :lang(), :first-child 疑似クラス <br>
            子孫コンビネーター<br>
            子コンビネーター<br>
            隣接兄弟コンビネーター<br>
            ::first-line, ::first-letter 疑似要素<br>
            ::before, ::after 疑似要素

        <tr>
          <th>除外

          <td>
            <p>部分文字列一致属性セレクター<br>
              :target 疑似クラス<br>
              UI要素状態疑似クラスすべて<br>
              :first-child以外の構造疑似クラスすべて<br>
              否定疑似クラス <br>
              後続兄弟コンビネーター

            <p>名前空間

        <tr>
          <th>追加制約

          <td>単純セレクター並びごとに複数のクラスセレクター（CSS1制約）も許可
    </table>

    <p>CSSでは、セレクターはパターンマッチ規則を表現し、どのスタイル規則が文書ツリー内の要素に適用されるか決定します。

    <p>次のセレクター（CSSレベル2）は、セクション1の見出し<code>h1</code>内に属性<code>name</code>を持つすべてのアンカー<code>a</code>に<b>一致</b>します：

    <pre>h1 a[name]</pre>

    <p>このようなセレクターに付与されたすべてのCSS宣言は、一致した要素に適用されます。
  </div>

  <div class=profile>
    <table class=tprofile>
      <tbody>
        <tr>
          <th class=title colspan=2>セレクタープロファイル

        <tr>
          <th>仕様

          <td>STTS 3

        <tr>
          <th>許可

          <td>
            <p>型セレクター<br>
              全称セレクター<br>
              属性セレクター<br>
              クラスセレクター<br>
              IDセレクター<br>
              構造疑似クラスすべて<br>
              すべてのコンビネーター

            <p>名前空間

        <tr>
          <th>除外

          <td>非対応疑似クラス<br>
            疑似要素<br>

        <tr>
          <th>追加制約

          <td>STTS宣言の右辺フラグメント記述では一部セレクターやコンビネーターは許可されない
    </table>

    <p>STTS 3でセレクターは2通りの使い方ができます：

    <ol>
      <li>CSSの選択機構と同等の選択：指定されたセレクターに付与された宣言が一致要素に適用される

      <li>宣言の右辺に現れるフラグメント記述
    </ol>
  </div>

  <h2 id=Conformance><span class=secno>12. </span>適合性および要件</h2>

  <p>このセクションは本仕様への適合性のみを定義します。

  <p>
    ユーザーエージェントが、特定のデバイスの制限によって本仕様の一部を実装できない場合（例：非インタラクティブなユーザーエージェントは、インタラクティブ性がないため動的疑似クラスを実装しない可能性が高い）、これにより非適合となるわけではありません。

  <p>Selectorsを再利用するすべての仕様は、受け入れるSelectorsのサブセットまたは除外するサブセットを記載した<a
      href="#profiling">プロファイル</a>を含み、現仕様に追加する制約について記述しなければなりません。

  <p>不正（invalid）はパースエラーによって発生します。例えば、認識できないトークンや、その時点で許可されていないトークンなどです。

  <p>ユーザーエージェントはパースエラーの扱いについて下記の規則を守らなければなりません：

  <ul>
    <li><a href="#nsdecl">宣言されていない名前空間接頭辞</a>を含む単純セレクターは不正です

    <li>不正な単純セレクター、不正なコンビネーター、不正なトークンを含むセレクターは不正です

    <li>不正なセレクターを含むセレクターグループ全体が不正です
  </ul>

  <p>Selectorsを再利用する仕様は、パースエラーの扱い方を定義しなければなりません。（CSSの場合、セレクターが使われているルール全体が破棄されます。）

  <h2 id=Tests><span class=secno>13. </span>テスト</h2>

  <p>本仕様には、ユーザーエージェントが仕様への基本的な適合性を確認できる<a
      href="https://test.csswg.org/harness/suite/selectors-3_dev/">テストスイート</a>があります。このテストスイートは網羅的であることを意図していませんし、Selectorsのすべての組み合わせケースをカバーするものではありません。

  <h2 id=ACKS><span class=secno>14. </span>謝辞</h2>

  <p>CSSワーキンググループは、長年にわたり本仕様にコメントを寄せてくださったすべての方々に感謝いたします。

  <p>特に、最終編集レビューを行ってくださったDonna McManus、Justin Baker、Joel Sklar、Molly Ives Browerの皆様に特別な感謝を申し上げます。また、Adam Kuehn、Boris
    Zbarsky、David Perrell、Elliotte Harold、Matthew Raymond、Ruud Steltenpool、Patrick Garies、Anton
    Prowse、そしてW3C国際化ワーキンググループの皆様にも、最終コメントと温かい言葉をいただき感謝いたします。

  <h2 id=references><span class=secno>15. </span>参考文献</h2>

  <h3 id=normative-references><span class=secno>15.1. </span>規範的参考文献</h3>
  <!--begin-normative-->
  <!-- Sorted by label -->

  <dl class=bibliography><!---->

    <dt id=ref-CSS21>[CSS21]

    <dd>Bert Bos 他. <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607"><cite>Cascading Style
          Sheets Level 2 Revision 1 (CSS 2.1) Specification.</cite></a> 2011年6月7日. W3C勧告. URL: <a
        href="https://www.w3.org/TR/2011/REC-CSS2-20110607">http://www.w3.org/TR/2011/REC-CSS2-20110607</a>
    </dd>
    <!---->

    <dt id=ref-CSS3NAMESPACE>[CSS3NAMESPACE]

    <dd>Elika J. Etemad. <a href="https://www.w3.org/TR/2014/REC-css-namespaces-3-20140320/"><cite>CSS
          Namespaces Module Level 3.</cite></a> 2011年9月29日. W3C勧告. URL: <a
        href="https://www.w3.org/TR/2014/REC-css-namespaces-3-20140320/">http://www.w3.org/TR/2014/REC-css-namespaces-3-20140320/</a>
    </dd>
    <!---->

    <dt id=ref-FLEX>[FLEX]

    <dd><cite>Flex: The Lexical Scanner Generator.</cite> バージョン2.3.7, ISBN 1882114213</dd>
    <!---->

    <dt id=ref-UNICODE>[UNICODE]

    <dd>Unicode Consortium. <a href="http://www.unicode.org/standard/versions/enumeratedversions.html"><cite>Unicode
          標準.</cite></a> 2012年. 定義: The Unicode Standard, Version 6.2.0 (Mountain View, CA: The Unicode Consortium,
      2012. ISBN
      978-1-936213-07-8)、新バージョンの公開ごとに随時更新. URL: <a
        href="http://www.unicode.org/standard/versions/enumeratedversions.html">http://www.unicode.org/standard/versions/enumeratedversions.html</a>
    </dd>
    <!---->

    <dt id=ref-YACC>[YACC]

    <dd>S. C. Johnson. <cite>YACC - Yet another compiler compiler.</cite>
      Murray Hill. 1975年. 技術報告.</dd>
    <!---->
  </dl>
  <!--end-normative-->

  <h3 id=informative-references><span class=secno>15.2. </span>参考情報</h3>
  <!--begin-informative-->
  <!-- Sorted by label -->

  <dl class=bibliography><!---->

    <dt id=ref-BCP47>[BCP47]

    <dd>A. Phillips; M. Davis. <a href="ftp://ftp.rfc-editor.org/in-notes/bcp/bcp47.txt"><cite>言語識別用タグ.</cite></a>
      2009年9月. 47. BCP. 現在はRFC 5646として表現. URL: <a
        href="ftp://ftp.rfc-editor.org/in-notes/bcp/bcp47.txt">ftp://ftp.rfc-editor.org/in-notes/bcp/bcp47.txt</a>
    </dd>
    <!---->

    <dt id=ref-CSS1>[CSS1]

    <dd>Håkon Wium Lie; Bert Bos. <a href="https://www.w3.org/TR/2008/REC-CSS1-20080411"><cite>Cascading Style
          Sheets (CSS1) Level 1 Specification.</cite></a> 2008年4月11日. W3C勧告. URL: <a
        href="https://www.w3.org/TR/2008/REC-CSS1-20080411">http://www.w3.org/TR/2008/REC-CSS1-20080411</a>
    </dd>
    <!---->

    <dt id=ref-DOM-LEVEL-3-CORE>[DOM-LEVEL-3-CORE]

    <dd>Gavin Nicol 他. <a href="https://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407"><cite>Document
          Object Model (DOM) Level 3 Core Specification.</cite></a> 2004年4月7日. W3C勧告. URL: <a
        href="https://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407">http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407</a>
    </dd>
    <!---->

    <dt id=ref-HTML401>[HTML401]

    <dd>Dave Raggett; Arnaud Le Hors; Ian Jacobs. <a href="https://www.w3.org/TR/1999/REC-html401-19991224"><cite>HTML
          4.01
          仕様書.</cite></a> 1999年12月24日. W3C勧告. URL: <a
        href="https://www.w3.org/TR/1999/REC-html401-19991224">http://www.w3.org/TR/1999/REC-html401-19991224</a>
    </dd>
    <!---->

    <dt id=ref-HTML5>[HTML5]

    <dd>Ian Hickson 他. <a href="https://www.w3.org/TR/2014/REC-html5-20141028/"><cite>HTML5.</cite></a>
      2014年10月28日. W3C勧告. URL: <a
        href="https://www.w3.org/TR/2014/REC-html5-20141028/">http://www.w3.org/TR/2014/REC-html5-20141028/</a>
    </dd>
    <!---->

    <dt id=ref-MATHML3>[MATHML3]

    <dd>David Carlisle; Patrick Ion; Robert Miner. <a
        href="https://www.w3.org/TR/2014/REC-MathML3-20140410/"><cite>数式マークアップ言語 (MathML) Version 3.0 第2版.</cite></a>
      2014年4月10日. W3C勧告. URL: <a
        href="https://www.w3.org/TR/2014/REC-MathML3-20140410/">http://www.w3.org/TR/2014/REC-MathML3-20140410/</a>
    </dd>
    <!---->

    <dt id=ref-STTS3>[STTS3]

    <dd>Daniel Glazman. <a href="https://www.w3.org/TR/NOTE-STTS3"><cite>Simple
          Tree Transformation Sheets 3.</cite></a> Electricité de France. 1998年11月11日. W3C提出. URL: <a
        href="https://www.w3.org/TR/NOTE-STTS3">http://www.w3.org/TR/NOTE-STTS3</a>
    </dd>
    <!---->

    <dt id=ref-SVG11>[SVG11]

    <dd>Erik Dahlström 他. <a href="https://www.w3.org/TR/2011/REC-SVG11-20110816/"><cite>Scalable
          Vector Graphics (SVG) 1.1 (第2版).</cite></a> 2011年8月16日. W3C勧告. URL: <a
        href="https://www.w3.org/TR/2011/REC-SVG11-20110816/">http://www.w3.org/TR/2011/REC-SVG11-20110816/</a>
    </dd>
    <!---->

    <dt id=ref-UAX29>[UAX29]

    <dd>Mark Davis. <a href="http://www.unicode.org/reports/tr29/"><cite>Unicode テキスト分割.</cite></a> 2012年9月12日. Unicode
      Standard Annex #29. URL: <a href="http://www.unicode.org/reports/tr29/">http://www.unicode.org/reports/tr29/</a>
    </dd>
    <!---->

    <dt id=ref-XML-NAMES>[XML-NAMES]

    <dd>Tim Bray 他. <a href="https://www.w3.org/TR/2009/REC-xml-names-20091208/"><cite>XML 1.0 の名前空間 (第3版).</cite></a>
      2009年12月8日. W3C勧告. URL: <a
        href="https://www.w3.org/TR/2009/REC-xml-names-20091208/">http://www.w3.org/TR/2009/REC-xml-names-20091208/</a>
    </dd>
    <!---->

    <dt id=ref-XML10>[XML10]

    <dd>C. M. Sperberg-McQueen 他. <a href="https://www.w3.org/TR/2008/REC-xml-20081126/"><cite>拡張マークアップ言語 (XML) 1.0
          (第5版).</cite></a> 2008年11月26日. W3C勧告. URL: <a
        href="https://www.w3.org/TR/2008/REC-xml-20081126/">http://www.w3.org/TR/2008/REC-xml-20081126/</a>
    </dd>
    <!---->
  </dl>
  <!--end-informative-->

  <h3 id=changes><span class=secno>15.3. </span>変更点</h3>

  <p>前回の勧告以降の主な変更点は以下の通りです：

  <ul>
    <li><a href="#structural-pseudos">構造疑似クラス</a>がルート要素にも一致するようになりました。<a
        href="http://lists.w3.org/Archives/Public/www-style/2013Apr/0246.html">議事録</a>および<a
        href="http://test.csswg.org/harness/details/selectors-3_dev/selector-structural-pseudo-root/">結果</a>、<a
        href="http://test.csswg.org/harness/test/selectors-3_dev/single/selector-structural-pseudo-root/format/html5/">テストケース</a>を参照してください。
  </ul>

  <p role="navigation" id="back-to-top"><a href="#toc"><abbr title="トップに戻る">↑</abbr></a></p>


  <script src="https://www.w3.org/scripts/TR/2016/fixup.js" type="application/javascript"></script>
  <script src="https://htmlspecs.com/dropdown.js"></script>