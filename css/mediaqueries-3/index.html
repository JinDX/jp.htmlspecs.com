<!doctype html>
<html lang=ja-JP>

<head>
    <meta content="text/html;charset=UTF-8" http-equiv=Content-type>
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>メディアクエリ レベル3</title>
    <meta content="REC" name="w3c-status">
    <!-- <link href="../default.css" rel=stylesheet> -->
    <link href="https://www.w3.org/TR/mediaqueries-3/default.css" rel=stylesheet>

    <link href="https://www.w3.org/2008/site/images/favicon.ico" rel="icon">
    <link href="https://drafts.csswg.org/csslogo.ico" rel="icon">
    <link rel="canonical" href="https://www.w3.org/TR/mediaqueries-3/">
    <style>
        /* style-counters */

        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-REC" rel=stylesheet>

<body>
    <div class=head>
        <p><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>

        <h1 id=title>メディアクエリ レベル3</h1>

        <p id="w3c-state"><a href="https://www.w3.org/standards/types#REC">W3C勧告</a>, <time class="dt-updated"
                datetime="2024-05-21">2024年5月21日</time></p>
        <!-- <p id="w3c-state"><a href="https://www.w3.org/standards/types#ED">Editor’s Draft</a>, <time class="dt-updated" datetime="2024-05-01">14 May 2024</time></p> -->

        <details open>
            <summary>この文書の詳細</summary>
            <dl>
                <dt>このバージョン:

                <dd><a
                        href="https://www.w3.org/TR/2024/REC-mediaqueries-3-20240521/">https://www.w3.org/TR/2024/REC-mediaqueries-3-20240521/</a>

                <dt>最新版:

                <dd><a href="https://www.w3.org/TR/mediaqueries-3/">https://www.w3.org/TR/mediaqueries-3/</a>

                <dt>編集者版（最新版）:

                <dd><a href="https://drafts.csswg.org/mediaqueries-3/">https://drafts.csswg.org/mediaqueries-3/</a>

                <dt>前回のバージョン:

                <dd><a
                        href="https://www.w3.org/TR/2022/REC-mediaqueries-3-20220405/">https://www.w3.org/TR/2022/REC-mediaqueries-3-20220405/</a>

                <dt>履歴:

                <dd><a
                        href="https://www.w3.org/standards/history/mediaqueries-3/">https://www.w3.org/standards/history/mediaqueries-3/</a>

                <dt>コメント対応状況:

                <dd><a
                        href="https://drafts.csswg.org/mediaqueries-3/issues-2012-and-later">https://drafts.csswg.org/mediaqueries-3/issues-2012-and-later</a>

                <dt>実装報告:

                <dd><a
                        href="https://drafts.csswg.org/mediaqueries-3/impl-report">https://drafts.csswg.org/mediaqueries-3/impl-report</a>
                </dd>

                <dt>編集者:

                <dd class="editor p-author h-card vcard" data-editor-id="43241"><a class="p-name fn u-url url"
                        href="https://florian.rivoal.net">Florian Rivoal</a> (<span class="p-org org">招待専門家</span>)

                <dt>過去の編集者:

                <dd class=vcard><a class="url fn n" href="http://people.opera.com/howcome/" lang=no> <span
                            class=given-name>H&aring;kon</span> <span class=additional-name>Wium</span> <span
                            class=family-name>Lie</span></a>
                    &lt;<span class=email>howcome&nbsp;@opera.com</span>&gt;

                <dd class=vcard><a class="url fn" href="http://tantek.com/" lang=tr>Tantek &Ccedil;elik</a> &lt;<span
                        class=email>tantek&nbsp;@cs.stanford.edu</span>&gt;

                <dd class=vcard><span class=given-name>Daniel</span> <span class=family-name>Glazman</span> &lt;<span
                        class=email>daniel.glazman&nbsp;@disruptive-innovations.com</span>&gt;

                <dd class=vcard><a class="url fn n" href="https://annevankesteren.nl/" hreflang=en lang=nl>Anne van
                        Kesteren</a> &lt;<span class=email>annevk@opera.com</span>&gt;

                <dt>フィードバック:

                <dd><a href="https://github.com/w3c/csswg-drafts/issues">GitHub
                        Issues</a>はこの仕様に関する議論に推奨されています。Issueを提出する際は、タイトルに「mediaqueries-3」という文字列を含めてください（例：「[mediaqueries-3]
                    <i>…コメント概要…</i>」）。すべてのIssueやコメントは<a
                        href="https://lists.w3.org/Archives/Public/public-css-archive/">アーカイブ</a>されており、<a
                        href="https://lists.w3.org/Archives/Public/www-style/">過去のアーカイブ</a>もあります。

                <dt>正誤表:
                <dd><a
                        href="https://www.w3.org/Style/2022/REC-mediaqueries-3-20220405-errata.html">http://www.w3.org/Style/2022/REC-mediaqueries-3-20220405-errata.html</a>
            </dl>
        </details>

        <!-- <p>Please refer to the <a href="http://www.w3.org/Style/2022/REC-mediaqueries-3-20220405-errata.html"><strong>errata</strong></a> for this document, which may include some normative corrections.</p> -->

        <!-- <p>See also <a href="http://www.w3.org/2003/03/Translations/byTechnology?technology=css3-mediaqueries"> <strong>translations</strong></a>.</p> -->

        <!--begin-copyright-->
        <p class="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 2024 <a
                href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr
                title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a
                href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/copyright/software-license/">permissive document license</a> rules apply.</p>
        <!--end-copyright-->
        <hr title="Separator for header">
    </div>

    <h2 class="no-num no-toc" id=abstract>概要</h2>

    <p>HTMLとCSSは現在、異なる<em>メディアタイプ</em>に合わせたメディア依存スタイルシートをサポートしています。例えば、文書は画面表示の際はサンセリフ体フォントを、印刷時にはセリフ体フォントを使用できます。
        <code class=css>screen</code>や<code class=css>print</code>は定義済みのメディアタイプの一例です。
        <em>メディアクエリ</em>は、スタイルシートのより厳密なラベリングを可能にすることで、メディアタイプの機能を拡張します。

    <p>メディアクエリは、メディアタイプと、特定の<em>メディア特性</em>の条件をチェックするゼロ個以上の式から構成されます。メディアクエリで使用できるメディア特性には、
        <code class=css>width</code>、<code class=css>height</code>、<code class=css>color</code>などがあります。メディアクエリを利用することで、
        プレゼンテーションをコンテンツ自体を変更せずに、特定の出力デバイスの範囲に合わせて調整できます。

    <h2 class="no-num no-toc" id=status>この文書のステータス</h2>
    <!--begin-status-->

    <p><em>このセクションでは、公開時点における本書のステータスについて説明します。最新のW3C出版物一覧と、この技術レポートの最新版は<a
                href="https://www.w3.org/TR/">W3C技術レポート一覧</a>（https://www.w3.org/TR/）で確認できます。</em></p>

    <!-- <p>これは編集者ドラフトの公開コピーです。議論のみを目的とし、随時変更される可能性があります。ここでの公開はW3Cによる内容の承認を意味しません。進行中の作業以外の引用は避けてください。 -->

    <p>この文書は
        <a href="https://www.w3.org/groups/wg/css">CSS作業グループ</a>
        によって、
        <a href="https://www.w3.org/2023/Process-20231103/#recs-and-notes">勧告トラック</a>を通じて勧告として公開されました。
        <a href="https://www.w3.org/2023/Process-20231103/#proposed-corrections">修正案</a>も含まれています。
    </p>

    <p>W3C勧告は、十分な合意形成の後、<abbr title="World Wide Web Consortium">W3C</abbr>とそのメンバーによって承認され、ワーキンググループメンバーによる
        実装のための<a href="https://www.w3.org/Consortium/Patent-Policy/#sec-Requirements">ロイヤリティフリーライセンス</a>への
        コミットメントが伴います。</p>

    <p>W3Cは本仕様をWeb標準として広く展開することを推奨します。</p>

    <p>ご意見・フィードバックは
        <a href="https://github.com/w3c/csswg-drafts/issues">GitHubでIssueを提出</a>（推奨）してください。
        件名に「mediaqueries-3」を含めてください（例：「[mediaqueries-3] <i>…コメント概要…</i>」）。
        すべてのIssueやコメントは<a href="https://lists.w3.org/Archives/Public/public-css-archive/">アーカイブ</a>されています。
        または、（<a href="https://lists.w3.org/Archives/Public/www-style/">アーカイブ</a>）された公開メーリングリスト
        <a href="mailto:www-style@w3.org?Subject=%5Bmediaqueries-3%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>
        までお送りください。
        コメントの締切は2024年7月21日です。
    </p>

    <p>将来のこの勧告の更新では<a href="https://www.w3.org/2023/Process-20231103/#allow-new-features">新機能</a>が追加される場合があります。</p>

    <p>この文書は<a href="https://www.w3.org/2023/Process-20231103/"
            id="w3c_process_revision">2023年11月3日W3Cプロセス文書</a>に従って管理されています。</p>

    <p>この文書は<a href="https://www.w3.org/Consortium/Patent-Policy/">W3C特許ポリシー</a>に従って活動するグループにより作成されました。
        W3Cはグループの成果物に関連して提出された特許開示の<a href="https://www.w3.org/groups/wg/css/ipr" rel=disclosure>公開リスト</a>を維持しています。
        そのページには特許開示の方法も記載されています。個人が本当に<abbr title="World Wide Web Consortium">W3C</abbr>必須特許と考える特許を知っている場合は、
        <a href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">W3C特許ポリシー第6節</a>に従って開示しなければなりません。
    </p>

    <p class="copyright"><a href="https://www.w3.org/policies/#copyright">著作権</a> © 2024 <a
            href="https://www.w3.org/">World Wide Web Consortium</a>。<abbr
            title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a
            href="https://www.w3.org/policies/#Legal_Disclaimer">免責事項</a>、<a
            href="https://www.w3.org/policies/#W3C_Trademarks">商標</a>および<a
            href="https://www.w3.org/copyright/software-license/">許諾型文書ライセンス</a>が適用されます。</p>
    <!--end-status-->

    <div class="correction proposed"><a
            href="https://www.w3.org/2021/Process-20211102/#proposed-corrections">修正案</a>は文書中でマークされています。</div>

    <nav id="toc">
        <h2 class="no-num no-toc" id=contents>目次</h2>
        <!--begin-toc-->

        <ul class=toc>
            <li><a href="#background"><span class=secno>1. </span>背景</a>

            <li><a href="#media0"><span class=secno>2. </span>メディアクエリ</a>

            <li><a href="#syntax"><span class=secno>3. </span>構文</a>
                <ul class=toc>
                    <li><a href="#error-handling"><span class=secno>3.1. </span>エラー処理</a>
                </ul>

            <li><a href="#media1"><span class=secno>4. </span>メディア特性</a>
                <ul class=toc>
                    <li><a href="#width"><span class=secno>4.1. </span>width</a>

                    <li><a href="#height"><span class=secno>4.2. </span>height</a>

                    <li><a href="#device-width"><span class=secno>4.3.
                            </span>device-width</a>

                    <li><a href="#device-height"><span class=secno>4.4.
                            </span>device-height</a>

                    <li><a href="#orientation"><span class=secno>4.5. </span>orientation</a>


                    <li><a href="#aspect-ratio"><span class=secno>4.6.
                            </span>aspect-ratio</a>

                    <li><a href="#device-aspect-ratio"><span class=secno>4.7.
                            </span>device-aspect-ratio</a>

                    <li><a href="#color"><span class=secno>4.8. </span>color</a>

                    <li><a href="#color-index"><span class=secno>4.9. </span>color-index</a>


                    <li><a href="#monochrome"><span class=secno>4.10. </span>monochrome</a>

                    <li><a href="#resolution"><span class=secno>4.11. </span>resolution</a>

                    <li><a href="#scan"><span class=secno>4.12. </span>scan</a>

                    <li><a href="#grid"><span class=secno>4.13. </span>grid</a>
                </ul>

            <li><a href="#values"><span class=secno>5. </span>値</a>

            <li><a href="#units"><span class=secno>6. </span>単位</a>
                <ul class=toc>
                    <li><a href="#resolution0"><span class=secno>6.1. </span>解像度</a>
                </ul>

            <li><a href="#changes"><span class=secno>7. </span>変更点</a>
                <ul class=toc>
                    <li><a href="#changes-2022"><span class=secno>7.1. </span>2022年4月5日勧告以降の変更点</a>
                    <li><a href="#changes-2012"><span class=secno>7.2. </span>2012年6月19日勧告以降の変更点</a>
                    <li><a href="#changes-2010"><span class=secno>7.4. </span>2010年7月27日候補勧告以降の変更点</a>
                </ul>

            <li class=no-num><a href="#acknowledgments">謝辞</a>

            <li class=no-num><a href="#references">参考文献</a>
                <ul class=toc>
                    <li class=no-num><a href="#normative-references">規定参考文献</a>

                    <li class=no-num><a href="#other-references">その他の参考文献</a>
                </ul>
        </ul>
        <!--end-toc-->
    </nav>

    <h2 id=background><span class=secno>1. </span>背景</h2>

    <p>（このセクションは規範的ではありません。）

    <p>HTML4 <a href="#HTML401" rel=biblioentry>[HTML401]<!--{{HTML401}}--></a>
        および CSS2 <a href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>
        は現在、異なるメディアタイプ向けに調整されたメディア依存スタイルシートをサポートしています。たとえば、文書は
        画面表示と印刷で異なるスタイルシートを使用できます。HTML4では、次のように記述できます：

    <div class=example>
        <pre><code>&lt;link rel="stylesheet" type="text/css" media="screen" href="sans-serif.css">
&lt;link rel="stylesheet" type="text/css" media="print" href="serif.css"></code></pre>
    </div>

    <p>CSSスタイルシート内では、特定のメディアタイプに適用されるセクションを宣言できます：

    <div class=example>
        <pre><code>@media screen {
  * { font-family: sans-serif }
}</code></pre>
    </div>

    <p>『<code class=css>print</code>』および『<code class=css>screen</code>』メディアタイプはHTML4で定義されています。
        HTML4におけるメディアタイプの完全なリストは、『<code class=css>aural</code>』、『<code class=css>braille</code>』、『<code
            class=css>handheld</code>』、『<code class=css>print</code>』、『<code class=css>projection</code>』、『<code
            class=css>screen</code>』、『<code class=css>tty</code>』、
        『<code class=css>tv</code>』です。CSS2は同じリストを定義し、
        『<code class=css>aural</code>』を非推奨とし、
        『<code class=css>embossed</code>』と『<code class=css>speech</code>』を追加しました。
        また、『<code class=css>all</code>』はスタイルシートがすべてのメディアタイプに適用されることを示します。

    <p>メディア固有のスタイルシートは複数のユーザーエージェントでサポートされています。最も一般的に使われる機能は『<code class=css>screen</code>』と『<code
            class=css>print</code>』の区別です。

    <p>スタイルシートがどの種の出力デバイスに適用されるかをより詳細に記述する方法を求める要望がありました。幸いにもHTML4はこれらの要望を予見し、メディアタイプの前方互換な構文を定義しました。
        以下は<a href="https://www.w3.org/TR/1999/REC-html401-19991224/types.html#h-6.13">HTML4、セクション6.13</a>からの引用です：

    <blockquote cite="http://www.w3.org/TR/1999/REC-html401-19991224/types.html#h-6.13">
        <p>将来のHTMLのバージョンでは新しい値やパラメータ付きの値が導入される可能性があります。これらの拡張を容易にするため、適合するユーザーエージェントは<a
                href="https://www.w3.org/TR/1999/REC-html401-19991224/present/styles.html#adef-media"><samp>media</samp></a>
            属性値を以下のようにパースできる必要があります：

        <ol>
            <li>値はカンマ区切りのエントリリストです。例：
                <pre><code>media="screen, 3d-glasses, print and resolution > 90dpi"</code></pre>

                <p>は次のようにマッピングされます：</p>

                <pre><code>"screen"
"3d-glasses"
"print and resolution > 90dpi"</code></pre>

            <li>各エントリは最初に現れる US ASCII 英字 [a-zA-Z]（Unicode 10進65-90, 97-122）、数字 [0-9]
                （Unicode 16進30-39）、またはハイフン（45）以外の文字の直前で切り詰められます。この例の場合、次のようになります：
                <pre><code>"screen"
"3d-glasses"
"print"</code></pre>
        </ol>
    </blockquote>

    <p>この仕様で記述されるメディアクエリは、HTML4で示されたメカニズムを拡張しています。メディアクエリの構文はHTML4で予約されたメディアタイプ構文に適合します。
        HTML4の<code class=html>media</code>属性は、XHTMLや汎用XMLにも存在します。
        同じ構文はCSSの『<code class=css>@media</code>』および『<code class=css>@import</code>』ルール内でも利用できます。

    <p>ただし、メディアクエリのパース規則はHTML4とは互換性がなく、CSSで使われるメディアクエリのパース規則と一致させています。

    <p class=note>新しいバージョンのHTML <a href="#biblio-html" rel=biblioentry>[HTML]</a>
        はMedia Queries仕様を直接参照しており、そのためHTMLの規則も更新されています。

    <h2 id=media0><span class=secno>2. </span>メディアクエリ</h2>

    <p>メディアクエリはメディアタイプと、特定の<span class=index id=media-features>メディア特性</span>の条件をチェックする
        ゼロ個以上の<span class=index id=expressions>式</span>から構成されます。

    <p>このセクションにおけるメディアクエリに関する記述は<a href="#syntax">構文セクション</a>が前提です。
        構文に適合しないメディアクエリについては<a href="#error-handling">エラー処理セクション</a>で扱います。
        つまり、構文がこのセクションの要件より優先されます。

    <div class=example>
        <p>HTMLで記述された簡単な例：</p>

        <pre><code>&lt;link rel="stylesheet" media="screen and (color)" href="example.css" /></code></pre>

        <p>この例は、特定のスタイルシート（<code>example.css</code>）が
            特定のメディアタイプ（『<code class=css>screen</code>』）かつ特定の特性（カラー画面）を持つ
            デバイスに適用されることを示しています。</p>
    </div>

    <div class=example>
        <p>同じメディアクエリをCSSの@import規則で記述した例：</p>

        <pre><code>@import url(color.css) screen and (color);</code></pre>
    </div>

    <p>メディアクエリはtrueまたはfalseの論理式です。メディアクエリがtrueとなるのは、メディアクエリのメディアタイプが
        ユーザーエージェントが動作しているデバイスのメディアタイプ（「適用対象」行で定義）と一致し、
        メディアクエリ内のすべての式がtrueである場合です。

    <p>すべてのメディアタイプに適用されるメディアクエリには略式構文が用意されています。
        キーワード『<code class=css>all</code>』は省略可能（および末尾の『<code class=css>and</code>』も）。
        つまり、メディアタイプが明示されていない場合は『<code class=css>all</code>』となります。

    <div class=example>
        <p>例えば、これらは同じ意味です：</p>

        <pre><code>@media all and (min-width:500px) { &hellip; }
@media (min-width:500px) { &hellip; }</code></pre>

        <p>また、これらも同じです：</p>

        <pre><code>@media (orientation: portrait) { &hellip; }
@media all and (orientation: portrait) { &hellip; }</code></pre>
    </div>

    <p>複数のメディアクエリは、カンマ区切りリストとして組み合わせることができます。
        カンマ区切りのメディアクエリリストのうち、一つ以上がtrueなら全体はtrue、そうでなければfalseです。
        メディアクエリ構文では、カンマは論理OR、『<code class=css>and</code>』は論理ANDを表します。

    <div class=example>
        <p>CSSの@media規則でカンマ区切りリストを使った複数のメディアクエリの例：</p>

        <pre><code>@media <em>screen and (color), projection and (color)</em> { &hellip; }</code></pre>
    </div>

    <p>メディアクエリリストが空（宣言が空文字列または空白のみ）ならtrueとなります。

    <div class=example>
        <p>これらは同じ意味です：</p>

        <pre><code>@media all { &hellip; }
@media { &hellip; }</code></pre>
    </div>

    <p>論理NOTは『<code class=css>not</code>』キーワードで表現できます。
        メディアクエリの先頭に『<code class=css>not</code>』があると結果が反転します。
        つまり、もともとtrueだったメディアクエリはfalseになり、その逆も同様です。
        メディアタイプしかサポートしないユーザーエージェント（HTML4記述）は
        『<code class=css>not</code>』を認識しないため、該当スタイルシートは適用されません。

    <div class=example>
        <pre><code>&lt;link rel="stylesheet" media="<em>not screen and (color)</em>" href="example.css" /&gt;</code></pre>
    </div>

    <p>『<code class=css>only</code>』キーワードも、古いユーザーエージェントから
        スタイルシートを隠すために使えます。ユーザーエージェントは
        先頭が『<code class=css>only</code>』のメディアクエリを
        『<code class=css>only</code>』が存在しないものとして処理しなければなりません。

    <div class=example>
        <pre><code>&lt;link rel="stylesheet" media="<em>only screen and (color)</em>" href="example.css" /&gt;</code></pre>
    </div>

    <p>メディアクエリ構文はHTML、XHTML、XML <a href="#XMLSTYLE"
            rel=biblioentry>[XMLSTYLE]<!--{{XMLSTYLE}}--></a>やCSSの@import・@media規則で利用できます。

    <div class=example>
        <p>HTML、XHTML、XML、@import、@mediaでの同じ例：</p>

        <pre><code>&lt;link media="<em>screen and (color), projection and (color)</em>" rel="stylesheet" href="example.css"></code></pre>

        <pre><code>&lt;link media="<em>screen and (color), projection and (color)</em>" rel="stylesheet" href="example.css" /></code></pre>

        <pre><code>&lt;?xml-stylesheet media="<em>screen and (color), projection and (color)</em>" rel="stylesheet" href="example.css" ?></code></pre>

        <pre><code>@import url(example.css) <em>screen and (color), projection and (color)</em>;</code></pre>

        <pre><code>@media <em>screen and (color), projection and (color)</em> { &hellip; }</code></pre>

        <p class=note><a href="#XMLSTYLE" rel=biblioentry>[XMLSTYLE]<!--{{XMLSTYLE}}--></a>仕様はまだ
            <code>media</code>疑似属性でメディアクエリを使用するように更新されていません。
        </p>
    </div>

    <p>メディア特性がUAの動作するデバイスに適用されない場合、その特性を用いた式はfalseになります。

    <div class=example>
        <p>メディア特性『<code class=css>device-aspect-ratio</code>』は
            視覚デバイスにのみ適用されます。聴覚デバイスでは、この特性を用いた式は
            常にfalseになります：</p>

        <pre><code>&lt;link rel="stylesheet" media="aural and (device-aspect-ratio: 16/9)" href="example.css" /&gt;</code></pre>
    </div>

    <p>単位がデバイスに適用できない場合も、式は必ずfalseになります。

    <div class=example>
        <p>『<code class=css>px</code>』単位は『<code class=css>speech</code>』デバイスには
            適用されないため、次のメディアクエリは常にfalseです：</p>

        <pre><code>&lt;link rel="stylesheet" media="speech and (min-device-width: 800px)" href="example.css" /&gt;</code></pre>

        <p>この例のメディアクエリは、先頭に『<code class=css>not</code>』をつけていればtrueになっていたことに注意してください。</p>
    </div>

    <p>循環依存を避けるため、他の特性が明示的にMedia Queriesの判定に影響すると指定しない限り、
        式の評価のためにスタイルシートを適用する必要はありません。
        たとえば、印刷文書の縦横比はスタイルシートで影響を受けるかもしれませんが、
        『<code class=css>device-aspect-ratio</code>』を用いた式は
        ユーザーエージェントのデフォルトの縦横比で評価されます。

    <p class=note>ユーザーエージェントは、ユーザー環境の変化（例：デバイスが横から縦に傾けられた場合）に応じて
        ページの再評価・再レイアウトを行うことが期待されていますが、必須ではありません。
    <h2 id=syntax><span class=secno>3. </span>構文</h2>

    <p>メディアクエリの構文は<a href="https://www.w3.org/TR/CSS21/grammar.html">CSS2
            文法</a>で記述されています。そのため、
        ここで定義されていない規則はCSS2で定義されています。
        下記で定義される<code>media_query_list</code>生成規則は
        CSS2の<code>media_list</code>生成規則を置き換えます。<a href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>

    <pre>media_query_list
 : S* [media_query [ ',' S* media_query ]* ]?
 ;
media_query
 : [ONLY | NOT]? S* media_type S* [ AND S* expression ]*
 | expression [ AND S* expression ]*
 ;
media_type
 : IDENT
 ;
expression
 : '(' S* media_feature S* [ ':' S* expr ]? ')' S*
 ;
media_feature
 : IDENT
 ;</pre>

    <p>CSS2で定義されるCOMMENTトークンは（可読性のため）文法には含めませんが、
        他のトークンの間に任意の個数出現可能です。<a href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>

    <p>以下の新しい定義が導入されます：

    <pre>L  l|\\0{0,4}(4c|6c)(\r\n|[ \t\r\n\f])?|\\l
Y  y|\\0{0,4}(59|79)(\r\n|[ \t\r\n\f])?|\\y</pre>

    <p>以下の新しいトークンが導入されます：

    <pre>{O}{N}{L}{Y}      {return ONLY;}
{N}{O}{T}         {return NOT;}
{A}{N}{D}         {return AND;}
{num}{D}{P}{I}    {return RESOLUTION;}
{num}{D}{P}{C}{M} {return RESOLUTION;}</pre>

    <p><code>RESOLUTION</code>はCSS2の<code>term</code>生成規則に追加されます。

    <p>CSSスタイルシートは一般的に<a href="https://infra.spec.whatwg.org/#ascii-case-insensitive">ASCII
            大文字小文字を区別しません</a>。メディアクエリも同様です。

    <p>構文に適合するだけでなく、各メディアクエリは、それぞれの仕様に従って
        メディアタイプやメディア特性を使用する必要があります。

    <div class=example>
        <p>下記の例では、最初のメディアクエリのみが適合しています。なぜなら
            "example"メディアタイプは存在しないためです。</p>

        <pre><code>@media all { body { background:lime } }
@media example { body { background:red } }</code></pre>
    </div>

    <h3 id=error-handling><span class=secno>3.1. </span>エラー処理</h3>

    <p>適合しないメディアクエリについては、ユーザーエージェントはこのセクションで説明する
        ルールに従う必要があります。

    <div class="correction proposed" id="c2">
        <span class="marker">修正案2:</span>
        ‘<code>layer</code>’も未知のメディアタイプとして扱わず、
        メディアタイプの位置で使われた場合は構文エラーとすることが要求されます。

        <p>この変更は<a href="https://github.com/w3c/csswg-drafts/issues/7225">issue
                7225</a>の結果として導入されました。

        <details>
            <summary>この変更にはテストがあります</summary>
            <a href="https://github.com/web-platform-tests/wpt/pull/33940">この変更のテスト</a>は
            <abbr title="Web Platform Tests">WPT</abbr>に追加されています。
            結果は<a href="https://wpt.fyi/results/css/mediaqueries?q=mq-invalid-media-type-layer">wpt.fyi</a>で閲覧できます。
        </details>

    </div>

    <ul>
        <li>
            <p><strong>未知のメディアタイプ。</strong> 未知のメディアタイプはfalseとして評価されます。実質的に、
                デバイスのメディアタイプに一致しない既知のメディアタイプと同じ扱いです。
                ただし例外として<ins
                    cite=#c2>‘<code>layer</code>’、</ins>‘<code>not</code>’、‘<code>and</code>’、‘<code>only</code>’、‘<code>or</code>’があります。
                これらはIDENT生成規則に一致するものの、未知のメディアタイプとして扱わず、
                クエリ不正句を発生させる必要があります。</p>

            <ins cite=#c2>
                <p class=note>
                    ‘<code>layer</code>’の除外は、<code>@import url(…) layer;</code>構文で
                    <a href="https://www.w3.org/TR/css-cascade-5/#layering">カスケードレイヤー</a>のために使われた場合、
                    曖昧になるためです。
                    <a href="#biblio-css-cascade-5">[CSS-CASCADE-5]</a>参照。
                </p>
            </ins>

            <div class=example>
                <p>メディアクエリ"<code>unknown</code>"はfalseとして評価されます。ただし
                    <code>unknown</code>が実際にサポートされるメディアタイプの場合は除きます。同様に、
                    "<code>not unknown</code>"はtrueとして評価されます。
                </p>
            </div>

            <div class="example">
                <p>下記は‘<code>only</code>’や‘<code>or</code>’をメディアタイプとして使っているため、不正なメディアクエリです。</p>
                <pre><code>@media only and or { … }</code></pre>
            </div>

            <p class=note>未知のメディアタイプは、IDENT生成規則に一致しないメディアタイプとは区別されます。
                それらは不正なメディアクエリ句に該当します。</p>

        <li>
            <p><strong>未知のメディア特性。</strong> ユーザーエージェントは、指定されたメディア特性のうち未知のものがある場合、
                メディアクエリを"<code>not all</code>"として扱う必要があります。</p>

            <div class=example>
                <pre><code>&lt;link rel="stylesheet" media="screen and (max-weight: 3kg) and (color), (color)" href="example.css" /&gt;</code></pre>

                <p>この例では、最初のメディアクエリは"<code>not all</code>"として扱われfalseとなり、
                    2つ目のメディアクエリは最初が指定されなかったかのように評価されます。</p>
            </div>

            <div class=example>
                <pre><code>@media (min-orientation:portrait) { &hellip; }</code></pre>

                <p>‘<code class=css>orientation</code>’特性は
                    ‘<code class=css>min-</code>’接頭辞を受け付けないため、
                    これは"<code>not all</code>"として扱われます。</p>
            </div>

        <li>
            <p><strong>未知のメディア特性値。</strong> 未知のメディア特性と同様に、
                指定されたメディア特性値が未知の場合は、ユーザーエージェントはメディアクエリを"<code>not all</code>"として扱う必要があります。</p>

            <div class=example>
                <p>メディアクエリ <code>(color:20example)</code> は
                    ‘<code class=css>color</code>’メディア特性に未知の値を指定しているため、"<code>not all</code>"として扱われます。</p>
            </div>

            <div class=example>
                <p>このメディアクエリは
                    ‘<code class=css>width</code>’メディア特性に負の長さを指定しているため、"<code>not all</code>"として扱われます：</p>

                <pre><code>@media (min-width: -100px) { &hellip; }</code></pre>
            </div>

        <li>
            <p><strong>不正なメディアクエリ。</strong> ユーザーエージェントは、メディアクエリのパース中に
                予期しないトークンに遭遇した場合、メディアクエリの終端まで読み進め、
                <a href="https://www.w3.org/TR/CSS21/syndata.html#block">(), [], {}, "", &#39;&#39; のペア一致ルール</a>や
                エスケープ処理を正しく扱う必要があります。予期しないトークンを含むメディアクエリは
                "<code>not all</code>"として扱われます。<a href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>

            <div class=example>
                <pre><code>@media (example, all,), speech { /* speechデバイスにだけ適用 */ }
@media &amp;test, screen           { /* screenデバイスにだけ適用 */ }</code></pre>
            </div>

            <div class=example>
                <p>下記は不正なメディアクエリです。
                    ‘<code class=css>and</code>’と式の間にスペースがないためです。
                    （これは関数型記法のために予約されています。）</p>

                <pre><code>@media all and(color) { &hellip; }</code></pre>
            </div>

            <p>メディアクエリはホスト言語のエラー処理規則にも従うことが期待されています。</p>

            <div class=example>
                <pre><code>@media test;,all { body { background:lime } }</code></pre>

                <p>…は適用されません。なぜならセミコロンが
                    <code>@media</code>規則をCSSで終了させるためです。
                </p>
            </div>
    </ul>

    <h2 id=media1><span class=secno>4. </span>メディア特性</h2>

    <p>構文上、メディア特性はCSSプロパティに似ています：名前があり、特定の値を受け付けます。
        しかし、プロパティとメディア特性には重要な違いがあります：

    <ul>
        <li>プロパティは<em>宣言</em>で文書の表示方法を記述します。一方、
            メディア特性は<em>式</em>で出力デバイスの要件を記述します。

        <li>ほとんどのメディア特性は、制約を表すために
            ‘<code class=css>min-</code>’や‘<code class=css>max-</code>’接頭辞を任意で受け付けます。
            この構文はHTMLやXMLと競合する可能性のある「&lt;」「&gt;」文字を避けるために使われます。
            接頭辞を受け付けるメディア特性は、通常接頭辞付きで使われますが、単独でも利用可能です。

        <li>プロパティは宣言を構成するために必ず値が必要です。
            メディア特性は値なしでも利用できます。メディア特性<var>feature</var>について、
            <code>(<var>feature</var>)</code>は<code>(<var>feature</var>:<var>x</var>)</code>が
            零または単位付き零（<code>0</code>、<code>0px</code>、<code>0em</code>など）以外の値<var>x</var>で
            trueになる場合にtrueとなります。min/max接頭辞付きメディア特性は値なしでは使えません。
            min/max接頭辞付きで値なしの場合、不正なメディアクエリになります。

        <li>プロパティは、他の値を含む計算式など、より複雑な値を受け付ける場合があります。
            メディア特性は単一の値のみを受け付けます：1つのキーワード、1つの数値、または単位付き数値です。
            （例外は‘<code class=css>aspect-ratio</code>’と
            ‘<code class=css>device-aspect-ratio</code>’メディア特性のみです。）

    </ul>

    <div class=example>
        <p>例えば、‘<code class=css>color</code>’メディア特性は
            値なし（‘<code class=css>(color)</code>’）や値あり（‘<code class=css>(min-color: 1)</code>’）の式を作れます。</p>
    </div>

    <p class=note>この仕様は視覚および触覚デバイスで利用可能なメディア特性を定義します。同様に、
        聴覚メディアタイプ向けのメディア特性も定義可能です。

    <h3 id=width><span class=secno>4.1. </span>width</h3>

    <div class=media-feature><span class=label>値:</span> &lt;length&gt;<br>
        <span class=label>適用対象:</span> 視覚・触覚メディアタイプ<br>
        <span class=label>min/max接頭辞受付:</span> はい<br>
    </div>

    <p>‘<code class=css>width</code>’メディア特性は、
        出力デバイスのターゲット表示領域の幅を記述します。
        連続メディアの場合、これはCSS2（セクション9.1.1 <a href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>）で記述される
        ビューポートの幅（表示されたスクロールバーのサイズを含む）です。
        ページメディアの場合は、CSS2（セクション13.2 <a href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>）で記述される
        ページボックスの幅です。

    <p>指定する&lt;length&gt;は負の値を取れません。

    <div class=example>
        <p>例えば、下記のメディアクエリは25cmより幅の広い印刷出力でスタイルシートを利用可能であることを示します：</p>

        <pre><code>&lt;link rel="stylesheet" media="print and (min-width: 25cm)" href="http://&hellip;" /></code></pre>
    </div>

    <div class=example>
        <p>このメディアクエリは、ビューポート（文書がレンダリングされるスクリーン/用紙部分）の幅が
            400～700pxのデバイスでスタイルシートを利用可能であることを示します：</p>

        <pre><code>@media screen and (min-width: 400px) and (max-width: 700px) { &hellip; }</code></pre>
    </div>

    <div class=example>
        <p>このメディアクエリは、ビューポートの幅が20emより大きい場合、画面・携帯デバイスで
            スタイルシートを利用可能であることを示します。</p>

        <pre><code>@media handheld and (min-width: 20em),
  screen and (min-width: 20em) { &hellip; }</code></pre>

        <p>‘<code class=css>em</code>’の値は‘font-size’の初期値に対する相対値です。</p>
    </div>

    <h3 id=height><span class=secno>4.2. </span>height</h3>

    <div class=media-feature><span class=label>値:</span> &lt;length&gt;<br>
        <span class=label>適用対象:</span> 視覚・触覚メディアタイプ<br>
        <span class=label>min/max接頭辞受付:</span> はい<br>
    </div>

    <p>‘<code class=css>height</code>’メディア特性は、
        出力デバイスのターゲット表示領域の高さを記述します。
        連続メディアの場合、これは表示されたスクロールバーのサイズを含む
        ビューポートの高さです。ページメディアの場合はページボックスの高さです。

    <p>指定する&lt;length&gt;は負の値を取れません。

    <h3 id=device-width><span class=secno>4.3. </span>device-width</h3>

    <div class=media-feature><span class=label>値:</span> &lt;length&gt;<br>
        <span class=label>適用対象:</span> 視覚・触覚メディアタイプ<br>
        <span class=label>min/max接頭辞受付:</span> はい<br>
    </div>

    <p>‘<code class=css>device-width</code>’メディア特性は、
        出力デバイスのレンダリング面の幅を記述します。
        連続メディアの場合はスクリーンの幅、ページメディアの場合は
        ページシートサイズの幅です。

    <p>指定する&lt;length&gt;は負の値を取れません。

    <div class=example>
        <pre><code>@media screen and (device-width: 800px) { &hellip; }</code></pre>

        <p>上記の例では、スタイルシートは現在800pxちょうどの横幅を表示している
            スクリーンにのみ適用されます。‘<code class=css>px</code>’単位は
            <a href="#units">単位</a>セクションで説明される論理単位です。
        </p>
    </div>

    <h3 id=device-height><span class=secno>4.4. </span>device-height</h3>

    <div class=media-feature><span class=label>値:</span> &lt;length&gt;<br>
        <span class=label>適用対象:</span> 視覚・触覚メディアタイプ<br>
        <span class=label>min/max接頭辞受付:</span> はい<br>
    </div>

    <p>‘<code
            class=css>device-height</code>’メディア特性は、出力デバイスのレンダリング面の高さを表します。連続メディアの場合はスクリーンの高さ、ページメディアの場合はページシートサイズの高さです。
    </p>

    <p>指定する&lt;length&gt;は負の値を取れません。</p>

    <div class=example>
        <pre><code>&lt;link rel="stylesheet" media="screen and (device-height: 600px)" /&gt;</code></pre>

        <p>上記の例では、スタイルシートは縦方向がちょうど600ピクセルのスクリーンにのみ適用されます。‘<code class=css>px</code>’単位の定義はCSSの他の部分と同じです。</p>
    </div>

    <h3 id=orientation><span class=secno>4.5. </span>orientation</h3>

    <div class=media-feature><span class=label>値:</span> portrait |
        landscape<br>
        <span class=label>適用対象:</span> ビットマップメディアタイプ<br>
        <span class=label>min/max接頭辞受付:</span> いいえ<br>
    </div>

    <p>‘<code class=css>orientation</code>’メディア特性は、‘<code class=css>height</code>’メディア特性の値が‘<code
            class=css>width</code>’メディア特性の値以上の時、‘<code class=css>portrait</code>’となります。それ以外の場合は‘<code
            class=css>landscape</code>’となります。</p>

    <div class=example>
        <pre><code>@media all and (orientation:portrait) { &hellip; }
@media all and (orientation:landscape) { &hellip; }</code></pre>
    </div>

    <h3 id=aspect-ratio><span class=secno>4.6. </span>aspect-ratio</h3>

    <div class=media-feature><span class=label>値:</span> &lt;ratio&gt;<br>
        <span class=label>適用対象:</span> ビットマップメディアタイプ<br>
        <span class=label>min/max接頭辞受付:</span> はい<br>
    </div>

    <p>‘<code class=css>aspect-ratio</code>’メディア特性は、‘<code class=css>width</code>’メディア特性の値と‘<code
            class=css>height</code>’メディア特性の値との比率として定義されます。</p>

    <h3 id=device-aspect-ratio><span class=secno>4.7.
        </span>device-aspect-ratio</h3>

    <div class=media-feature><span class=label>値:</span> &lt;ratio&gt;<br>
        <span class=label>適用対象:</span> ビットマップメディアタイプ<br>
        <span class=label>min/max接頭辞受付:</span> はい<br>
    </div>

    <p>‘<code class=css>device-aspect-ratio</code>’メディア特性は、‘<code class=css>device-width</code>’メディア特性の値と‘<code
            class=css>device-height</code>’メディア特性の値の比率として定義されます。</p>

    <div class=example>
        <p>例えば、正方ピクセルのスクリーンデバイスが1280ピクセル（横）×720ピクセル（縦）（一般に「16:9」と呼ばれる）の場合、以下のメディアクエリはすべてデバイスに一致します：</p>

        <pre><code>@media screen and (device-aspect-ratio: 16/9) { &hellip; }
@media screen and (device-aspect-ratio: 32/18) { &hellip; }
@media screen and (device-aspect-ratio: 1280/720) { &hellip; }
@media screen and (device-aspect-ratio: 2560/1440) { &hellip; }</code></pre>
    </div>

    <h3 id=color><span class=secno>4.8. </span>color</h3>

    <div class=media-feature><span class=label>値:</span>
        &lt;integer&gt;<br>
        <span class=label>適用対象:</span> 視覚メディアタイプ<br>
        <span class=label>min/max接頭辞受付:</span> はい<br>
    </div>

    <p>‘<code class=css>color</code>’メディア特性は、出力デバイスの各色成分のビット数を表します。カラーでないデバイスの場合、値は0です。</p>

    <p>指定する&lt;integer&gt;は負の値を取れません。</p>

    <div class=example>
        <p>例えば、以下2つのメディアクエリはスタイルシートがすべてのカラー対応デバイスに適用されることを示します：</p>

        <pre><code>@media all and (color) { &hellip; }
@media all and (min-color: 1) { &hellip; }</code></pre>
    </div>

    <div class=example>
        <p>このメディアクエリは、各色成分が2ビット以上のカラー対応デバイスにスタイルシートが適用されることを示します：</p>

        <pre><code>@media all and (min-color: 2) { &hellip; }</code></pre>
    </div>

    <p>異なる色成分でビット数が異なる場合、最小値が用いられます。</p>

    <div class=example>
        <p>例えば、8ビットカラーシステムで赤が3ビット、緑が3ビット、青が2ビットの場合、‘<code class=css>color</code>’メディア特性の値は2になります。</p>
    </div>

    <p>インデックスカラーのデバイスの場合、ルックアップテーブル内の各色成分の最小ビット数が使用されます。</p>

    <p class=note>ここで記述された機能は色の能力を表面的にしか記述できません。より高度な機能が必要な場合、RFC2531 <a href="#RFC2531"
            rel=biblioentry>[RFC2531]<!--{{RFC2531}}--></a>で定義されるメディア特性が将来的にサポートされる可能性があります。</p>

    <h3 id=color-index><span class=secno>4.9. </span>color-index</h3>

    <div class=media-feature><span class=label>値:</span>
        &lt;integer&gt;<br>
        <span class=label>適用対象:</span> 視覚メディアタイプ<br>
        <span class=label>min/max接頭辞受付:</span> はい<br>
    </div>

    <p>‘<code class=css>color-index</code>’メディア特性は、出力デバイスのカラールックアップテーブルのエントリ数を表します。カラールックアップテーブルを使用しないデバイスの場合、値は0です。</p>

    <p>指定する&lt;integer&gt;は負の値を取れません。</p>

    <div class=example>
        <p>例えば、すべてのカラーインデックスデバイスにスタイルシートが適用される2通りの記述例です：</p>

        <pre><code>@media all and (color-index) { &hellip; }
@media all and (min-color-index: 1) { &hellip; }</code></pre>
    </div>

    <div class=example>
        <p>このメディアクエリは、カラールックアップテーブルが256以上のエントリを持つデバイスにスタイルシートが適用されることを示します：</p>

        <pre><code>&lt;?xml-stylesheet media="all and (min-color-index: 256)"
  href="http://www.example.com/&hellip;" ?&gt;</code></pre>
    </div>

    <h3 id=monochrome><span class=secno>4.10. </span>monochrome</h3>

    <div class=media-feature><span class=label>値:</span>
        &lt;integer&gt;<br>
        <span class=label>適用対象:</span> 視覚メディアタイプ<br>
        <span class=label>min/max接頭辞受付:</span> はい<br>
    </div>

    <p>‘<code class=css>monochrome</code>’メディア特性は、モノクロフレームバッファでのピクセルごとのビット数を表します。モノクロデバイスでない場合、値は0です。</p>

    <p>指定する&lt;integer&gt;は負の値を取れません。</p>

    <div class=example>
        <p>例えば、すべてのモノクロデバイスにスタイルシートが適用される2通りの記述例です：</p>

        <pre><code>@media all and (monochrome) { &hellip; }
@media all and (min-monochrome: 1) { &hellip; }</code></pre>
    </div>

    <div class=example>
        <p>ピクセルごとのビット数が2以上のモノクロデバイスにスタイルシートを適用する例：</p>

        <pre><code>@media all and (min-monochrome: 2) { &hellip; }</code></pre>
    </div>

    <div class=example>
        <p>カラー用とモノクロ用でスタイルシートを分ける例：</p>

        <pre><code>&lt;link rel="stylesheet" media="print and (color)" href="http://&hellip;" /&gt;
&lt;link rel="stylesheet" media="print and (monochrome)" href="http://&hellip;" /&gt;</code></pre>
    </div>

    <h3 id=resolution><span class=secno>4.11. </span>resolution</h3>

    <div class=media-feature><span class=label>値:</span>
        &lt;resolution&gt;<br>
        <span class=label>適用対象:</span> ビットマップメディアタイプ<br>
        <span class=label>min/max接頭辞受付:</span> はい<br>
    </div>

    <p>‘<code class=css>resolution</code>’メディア特性は、出力デバイスの解像度（ピクセル密度）を表します。正方ピクセルでないデバイスをクエリする場合、‘<code
            class=css>min-resolution</code>’では最も密度が低い方向が基準となり、‘<code
            class=css>max-resolution</code>’では最も密度が高い方向が基準となります。‘<code
            class=css>resolution</code>’（"min-"や"max-"接頭辞なし）は正方ピクセルでないデバイスには一致しません。</p>

    <p>プリンターの場合、これは網点（任意の色のドット印刷）の解像度に相当します。</p>

    <div class=example>
        <p>例えば、解像度が300dpiを超えるデバイスでスタイルシートを利用可能とするメディアクエリ：</p>

        <pre><code>@media print and (min-resolution: 300dpi) { &hellip; }</code></pre>
    </div>

    <div class=example>
        <p>解像度が118dpcmを超えるデバイスで利用可能とするメディアクエリ：</p>

        <pre><code>@media print and (min-resolution: 118dpcm) { &hellip; }</code></pre>
    </div>

    <h3 id=scan><span class=secno>4.12. </span>scan</h3>

    <div class=media-feature><span class=label>値:</span> progressive |
        interlace<br>
        <span class=label>適用対象:</span> "tv"メディアタイプ<br>
        <span class=label>min/max接頭辞受付:</span> いいえ<br>
    </div>

    <p>‘<code class=css>scan</code>’メディア特性は、"tv"出力デバイスの走査方式を記述します。</p>

    <div class=example>
        <p>例えば、プログレッシブ走査のtvデバイスでスタイルシート利用可能とするメディアクエリ：</p>

        <pre><code>@media tv and (scan: progressive) { &hellip; }</code></pre>
    </div>

    <h3 id=grid><span class=secno>4.13. </span>grid</h3>

    <div class=media-feature><span class=label>値:</span>
        &lt;integer&gt;<br>
        <span class=label>適用対象:</span> 視覚・触覚メディアタイプ<br>
        <span class=label>min/max接頭辞受付:</span> いいえ<br>
    </div>

    <p>‘<code
            class=css>grid</code>’メディア特性は、出力デバイスがグリッド型かビットマップ型かを判定するために使用します。グリッド型（例："tty"端末や固定フォントのみの携帯ディスプレイ）の場合値は1、それ以外は0となります。
    </p>

    <p>有効な値は0と1のみです（-0を含む）。それ以外は不正なメディアクエリとなります。</p>

    <div class=example>
        <p>例を2つ挙げます：</p>

        <pre><code>@media handheld and (grid) and (max-width: 15em) { &hellip; }</code>
<code>@media handheld and (grid) and (max-device-height: 7em) { &hellip; }</code></pre>
    </div>

    <h2 id=values><span class=secno>5. </span>値</h2>

    <p>この仕様は新たに2つの値も導入します。</p>

    <p>&lt;ratio>値は、正の（ゼロまたは負でない）&lt;integer>の後にオプションの空白、
        スラッシュ（‘<code class=css>/</code>’）、オプションの空白、そして
        正の&lt;integer>が続きます。</p>

    <p>&lt;resolution>値は、正の&lt;number>の直後に単位識別子（‘<code class=css>dpi</code>’または
        ‘<code class=css>dpcm</code>’）が続きます。</p>

    <p>空白、&lt;integer>、&lt;number>およびこの仕様で使われるその他の値は、
        CSSの他の部分と同じであり、CSS 2.1によって規範的に定義されています。<a href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a></p>

    <h2 id=units><span class=secno>6. </span>単位</h2>

    <p>メディアクエリで使用される単位はCSSの他の部分と同じです。
        例えば、ピクセル単位はCSSピクセルを表し、物理ピクセルではありません。</p>

    <p>メディアクエリでの相対単位は初期値に基づきます。つまり、単位は宣言の結果には
        基づきません。例えばHTMLにおいて‘<code class=css>em</code>’単位は
        ‘<code class=property>font-size</code>’の初期値に対する相対値です。</p>

    <h3 id=resolution0><span class=secno>6.1. </span>解像度</h3>

    <p>‘<code class=css>dpi</code>’および‘<code class=css>dpcm</code>’単位は、出力デバイスの解像度、
        すなわちデバイスピクセルの密度を表します。解像度の単位識別子は：</p>

    <dl>
        <dt>dpi

        <dd>CSS‘<code class=css>inch</code>’あたりのドット数

        <dt>dpcm

        <dd>CSS‘<code class=css>centimeter</code>’あたりのドット数
    </dl>

    <p>この仕様では、これらの単位は‘<code class=css>resolution</code>’メディア特性でのみ使用されます。</p>

    <h2 id=changes><span class=secno>7. </span>変更点</h2>

    <h3 id=changes-2022><span class=secno>7.1. </span>2022年4月5日勧告以降の変更点</h3>

    以前の「提案修正1」が規範的に勧告に組み込まれました：
    <ul>
        <li id=c1>
            <a href="#error-handling">セクション3.1</a>の「以前の提案修正1」：
            キーワード‘<code>not</code>’, ‘<code>and</code>’, ‘<code>only</code>’, ‘<code>or</code>’は
            未知のメディアタイプとして扱うのではなく、メディアタイプの位置で使われた場合は
            構文エラーとすべきことを明確化。

            <blockquote>
                <p>未知のメディアタイプはfalseとして評価されます。実質的には、デバイスのメディアタイプに一致しない既知のメディアタイプと同じ扱いです。
                    <ins>ただし、キーワード‘<code>not</code>’, ‘<code>and</code>’, ‘<code>only</code>’,
                        ‘<code>or</code>’については例外です。
                        これらはIDENT生成規則に一致するものの、未知のメディアタイプとして扱わず、
                        クエリ不正句を発生させる必要があります。</ins>
                </p>
            </blockquote>

            <p>
                この変更の理由は<a href="https://lists.w3.org/Archives/Public/www-style/2013May/0783.html">2013年5月30日CSS
                    WG電話会議の議事録</a>
                およびそこで参照されたメールに記載されています。
            </p>

            <p>
                <a
                    href="https://github.com/web-platform-tests/wpt/commit/ea1821d4bd24ed1e859db03571cca8e783dbf957">この変更のテスト</a>は<abbr
                    title="Web Platform Tests">WPT</abbr>に追加されました。
                結果は<a href="https://wpt.fyi/results/css/mediaqueries?q=mq-invalid-media-type-0">wpt.fyi</a>で閲覧できます。
    </ul>

    <p>提案修正が導入されました：
    <ul>
        <li><a href="#c2">提案修正2</a> <a href="#error-handling">セクション3.1</a>にて：
            ‘<code>layer</code>’も未知のメディアタイプとして扱わず、メディアタイプの位置で使われた場合は
            構文エラーとすることが要求されます。
    </ul>

    <h3 id=changes-2012><span class=secno>7.2. </span>2012年6月19日勧告以降の変更点</h3>

    <p>提案修正が導入されました：
    <ul>
        <li><a href="#c1">提案修正1</a> <a href="#error-handling">セクション3.1</a>にて：
            キーワード‘<code>not</code>’, ‘<code>and</code>’, ‘<code>only</code>’, ‘<code>or</code>’は
            未知のメディアタイプとして扱うのではなく、メディアタイプの位置で使われた場合は
            構文エラーとすべきことを明確化。
    </ul>

    <p>いくつかの編集・マークアップ修正も行われました：</p>

    <ul>
        <li><a href="#media0">セクション2</a>：例内で冗長な属性を削除。
            <blockquote>
                <pre><code>&lt;link <del>rel="stylesheet" </del>media="<em>screen and (color), projection and (color)</em>" rel="stylesheet" href="example.css"&gt;</code></pre>
                <pre><code>&lt;link <del>rel="stylesheet" </del>media="<em>screen and (color), projection and (color)</em>" rel="stylesheet" href="example.css" /&gt;</code></pre>
            </blockquote>

        <li><a href="#media0">セクション2</a>：他仕様がこの仕様を拡張しやすいよう文章を調整。
            <blockquote>
                循環依存を避けるため、<del>it is never</del><ins>他の特性が明示的にMedia Queriesの判定に影響すると指定しない限り、</ins>
                式の評価のためにスタイルシートを適用する必要はありません。
            </blockquote>

        <li><a href="#syntax">セクション3</a>：CSSの構文をより正確な用語で記述（説明的文）。
            <blockquote>
                CSSスタイルシートは一般的に<del>case-insensitive</del>
                <a
                    href="https://infra.spec.whatwg.org/#ascii-case-insensitive"><ins>ASCII大文字小文字を区別しません</ins></a>。メディアクエリも同様です。
            </blockquote>
            この主張の正確性は<a href="https://wpt.fyi/results/css/mediaqueries/mq-case-insensitive-001.html">テスト</a>で検証されています。

        <li><a href="#grid">セクション4.13</a>：例の構文エラーを修正。
            <blockquote>
                <pre><code>@media handheld and (grid) and (<del>device-max-height</del><ins>max-device-height</ins>: 7em) { … }</code></pre>
            </blockquote>

        <li>参考文献が最新版へのリンクに更新されました。

        <li>仕様内の各リンクをhttpからhttpsに更新しました。
    </ul>

    <h3 id=changes-2010><span class=secno>7.3. </span>2010年7月27日候補勧告以降の変更点</h3>

    <p><a href="https://www.w3.org/TR/2010/CR-css3-mediaqueries-20100727/">2010年7月27日候補勧告</a>以降、
        本仕様には次の変更が加えられました：</p>

    <ul>
        <li><a href="#resolution">セクション4.11</a>：プリンターの場合の解像度の意味（dotsの意味が曖昧だった）を明確化。
            <blockquote>
                <p><ins>プリンターの場合、これは網点（任意の色のドット印刷）の解像度に相当します。</ins>
            </blockquote>

        <li><a href="#units">セクション6.1</a>：‘<code class=css>inch</code>’および‘<code
                class=css>cm</code>’はCSS単位であり、物理単位でないことを明記。
            <blockquote>
                <dl>
                    <dt>dpi

                    <dd><ins>CSS‘<code class=css>inch</code>’あたりのドット数</ins><del>inch</del>

                    <dt>dpcm

                    <dd><ins>CSS‘<code class=css>centimeter</code>’あたりのドット数</ins><del>cm</del>
                </dl>
            </blockquote>

        <li><a href="#width">セクション4.1</a>：非規範的な表現を、<a href="#units">セクション6</a>の正しい規範的表現に修正。
            <blockquote>
                <p>‘<code class=css>em</code>’値は
                    <del>font size of the root element</del><ins>‘font-size’の初期値</ins>に対する相対値です。
                </p>
            </blockquote>

        <li><a href="#units">セクション6</a>：単位は宣言の結果に基づかないことを明記。
            <blockquote>
                <p>メディアクエリでの相対単位は初期値に基づきます<ins>。つまり、単位は宣言の結果には基づきません</ins>。例えばHTMLにおいて、‘<code
                        class=css>em</code>’単位は‘<code class=property>font-size</code>’の初期値に対する相対値です。</p>
            </blockquote>
    </ul>

    <h2 class=no-num id=acknowledgments>謝辞</h2>

    <p>この仕様はW3Cカスケーディングスタイルシート作業グループの成果です。</p>

    <p>Bj&ouml;rn H&ouml;hrmann、Christoph P&auml;per、Chris Lilley、Simon Pieters、Rijk van Geijtenbeek、Sigurd Lerstad、Arve
        Bersvendsen、Susan Lesch、Philipp Hoschka、Roger Gimson、Steven Pemberton、Simon Kissane、Melinda Grant、L. David Baron
        からのコメントによってこの仕様は改善されました。</p>

    <h2 class="no-num heading settled" id="privacy"><span class="content">プライバシーに関する考慮事項</span><a class="self-link"
            href="#privacy"></a></h2>
    <p>この仕様について新たなプライバシー考慮事項は報告されていません。</p>
    <h2 class="no-num heading settled" id="security"><span class="content">セキュリティに関する考慮事項</span><a class="self-link"
            href="#security"></a></h2>
    <p>この仕様について新たなセキュリティ考慮事項は報告されていません。</p>

    <h2 class=no-num id=references>参考文献</h2>

    <h3 class=no-num id=normative-references>規定参考文献</h3>
    <!--begin-normative-->
    <!-- Sorted by label -->

    <dl class=bibliography>
        <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
            <!---->

        <dt id=CSS21>[CSS21]

        <dd>Bert Bos 他. <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607"><cite>Cascading Style
                    Sheets Level 2 Revision 1 (CSS&#160;2.1) Specification.</cite></a> 2011年6月7日. W3C勧告. URL: <a
                href="https://www.w3.org/TR/2011/REC-CSS2-20110607">http://www.w3.org/TR/2011/REC-CSS2-20110607</a>
        </dd>
        <!---->
    </dl>
    <!--end-normative-->

    <h3 class=no-num id=other-references>その他の参考文献</h3>
    <!--begin-informative-->
    <!-- Sorted by label -->

    <dl class=bibliography>
        <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
            <!---->

        <dt id=HTML401>[HTML401]

        <dd>Dave Raggett; Arnaud Le Hors; Ian Jacobs. <a
                href="https://www.w3.org/TR/2018/SPSD-html401-20180327/"><cite>HTML 4.01
                    Specification.</cite></a> 1999年12月24日（2018年3月27日に廃止）. W3C勧告. URL: <a
                href="https://www.w3.org/TR/2018/SPSD-html401-20180327/">https://www.w3.org/TR/2018/SPSD-html401-20180327/</a>
        </dd>
        <!---->

        <dt id="biblio-html">[HTML]

        <dd>Anne van Kesteren 他. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML
                    標準</cite></a>. Living Standard. URL: <a
                href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        </dd>
        <!---->

        <dt id=RFC2531>[RFC2531]

        <dd>G. Klyne; L. McIntyre. <a href="http://www.ietf.org/rfc/rfc2531.txt"><cite>Content Feature Schema
                    for Internet Fax.</cite></a> 1999年3月. Internet RFC 2531. URL: <a
                href="http://www.ietf.org/rfc/rfc2531.txt">http://www.ietf.org/rfc/rfc2531.txt</a>
        </dd>
        <!---->

        <dt id=XMLSTYLE>[XMLSTYLE]

        <dd>James Clark; Simon Pieters; Henry S. Thompson <a
                href="https://www.w3.org/TR/2010/REC-xml-stylesheet-20101028/"><cite>Associating Style Sheets
                    with XML documents 1.0 (Second Edition)</cite></a> 2010年10月28日. W3C勧告. URL: <a
                href="https://www.w3.org/TR/2010/REC-xml-stylesheet-20101028/">http://www.w3.org/TR/2010/REC-xml-stylesheet-20101028/</a>
        </dd>
        <!---->

        <dt id="biblio-css-cascade-5"><ins cite=#c2>[CSS-CASCADE-5]</ins>
        <dd><ins cite=#c2>
                Elika Etemad; Miriam Suzanne; Tab Atkins Jr..
                <a href="https://www.w3.org/TR/css-cascade-5/"><cite>CSS Cascading and Inheritance Level 5</cite></a>.
                2022年1月13日. CR.
                URL: <a href="https://www.w3.org/TR/css-cascade-5/">https://www.w3.org/TR/css-cascade-5/</a></ins>
        </dd>
    </dl>
    <!--end-informative-->

    <p role="navigation" id="back-to-top"><a href="#title"><abbr title="トップに戻る">↑</abbr></a></p>

    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <script src="https://htmlspecs.com/dropdown.js"></script>