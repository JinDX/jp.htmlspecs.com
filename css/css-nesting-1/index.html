<!doctype html>
<html lang="ja-JP">

<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>CSSネスティングモジュール</title>
  <meta content="WD" name="w3c-status">
  <meta content="Bikeshed version 2b7cf6020, updated Fri Feb 10 17:54:11 2023 -0800" name="generator">
  <link href="https://www.w3.org/TR/css-nesting-1/" rel="canonical">
  <meta content="3f8bb03fa2c86a9c1e114fb9ddc67e3137ea4c80" name="document-revision">
  <style>
    /* style-autolinks */

    .css.css,
    .property.property,
    .descriptor.descriptor {
      color: var(--a-normal-text);
      font-size: inherit;
      font-family: inherit;
    }

    .css::before,
    .property::before,
    .descriptor::before {
      content: "‘";
    }

    .css::after,
    .property::after,
    .descriptor::after {
      content: "’";
    }

    .property,
    .descriptor {
      /* Don't wrap property and descriptor names */
      white-space: nowrap;
    }

    .type {
      /* CSS value <type> */
      font-style: italic;
    }

    pre .property::before,
    pre .property::after {
      content: "";
    }

    [data-link-type="property"]::before,
    [data-link-type="propdesc"]::before,
    [data-link-type="descriptor"]::before,
    [data-link-type="value"]::before,
    [data-link-type="function"]::before,
    [data-link-type="at-rule"]::before,
    [data-link-type="selector"]::before,
    [data-link-type="maybe"]::before {
      content: "‘";
    }

    [data-link-type="property"]::after,
    [data-link-type="propdesc"]::after,
    [data-link-type="descriptor"]::after,
    [data-link-type="value"]::after,
    [data-link-type="function"]::after,
    [data-link-type="at-rule"]::after,
    [data-link-type="selector"]::after,
    [data-link-type="maybe"]::after {
      content: "’";
    }

    [data-link-type].production::before,
    [data-link-type].production::after,
    .prod [data-link-type]::before,
    .prod [data-link-type]::after {
      content: "";
    }

    [data-link-type=element],
    [data-link-type=element-attr] {
      font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
      font-size: .9em;
    }

    [data-link-type=element]::before {
      content: "<"
    }

    [data-link-type=element]::after {
      content: ">"
    }

    [data-link-type=biblio] {
      white-space: pre;
    }
  </style>
  <style>
    /* style-counters */

    body {
      counter-reset: example figure issue;
    }

    .issue {
      counter-increment: issue;
    }

    .issue:not(.no-marker)::before {
      content: "Issue " counter(issue);
    }

    .example {
      counter-increment: example;
    }

    .example:not(.no-marker)::before {
      content: "Example " counter(example);
    }

    .invalid.example:not(.no-marker)::before,
    .illegal.example:not(.no-marker)::before {
      content: "Invalid Example" counter(example);
    }

    figcaption {
      counter-increment: figure;
    }

    figcaption:not(.no-marker)::before {
      content: "Figure " counter(figure) " ";
    }
  </style>
  <style>
    /* style-dfn-panel */

    :root {
      --dfnpanel-bg: #ddd;
      --dfnpanel-text: var(--text);
    }

    .dfn-panel {
      position: absolute;
      z-index: 35;
      height: auto;
      width: -webkit-fit-content;
      width: fit-content;
      max-width: 300px;
      max-height: 500px;
      overflow: auto;
      padding: 0.5em 0.75em;
      font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
      background: var(--dfnpanel-bg);
      color: var(--dfnpanel-text);
      border: outset 0.2em;
    }

    .dfn-panel:not(.on) {
      display: none;
    }

    .dfn-panel * {
      margin: 0;
      padding: 0;
      text-indent: 0;
    }

    .dfn-panel>b {
      display: block;
    }

    .dfn-panel a {
      color: var(--dfnpanel-text);
    }

    .dfn-panel a:not(:hover) {
      text-decoration: none !important;
      border-bottom: none !important;
    }

    .dfn-panel>b+b {
      margin-top: 0.25em;
    }

    .dfn-panel ul {
      padding: 0;
    }

    .dfn-panel li {
      list-style: inside;
    }

    .dfn-panel.activated {
      display: inline-block;
      position: fixed;
      left: .5em;
      bottom: 2em;
      margin: 0 auto;
      max-width: calc(100vw - 1.5em - .4em - .5em);
      max-height: 30vh;
    }

    .dfn-paneled {
      cursor: pointer;
    }
  </style>
  <style>
    /* style-issues */

    a[href].issue-return {
      float: right;
      float: inline-end;
      color: var(--issueheading-text);
      font-weight: bold;
      text-decoration: none;
    }
  </style>
  <style>
    /* style-md-lists */

    /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
    [data-md]> :first-child {
      margin-top: 0;
    }

    [data-md]> :last-child {
      margin-bottom: 0;
    }
  </style>
  <style>
    /* style-selflinks */

    :root {
      --selflink-text: white;
      --selflink-bg: gray;
      --selflink-hover-text: black;
    }

    .heading,
    .issue,
    .note,
    .example,
    li,
    dt {
      position: relative;
    }

    a.self-link {
      position: absolute;
      top: 0;
      left: calc(-1 * (3.5rem - 26px));
      width: calc(3.5rem - 26px);
      height: 2em;
      text-align: center;
      border: none;
      transition: opacity .2s;
      opacity: .5;
    }

    a.self-link:hover {
      opacity: 1;
    }

    .heading>a.self-link {
      font-size: 83%;
    }

    .example>a.self-link,
    .note>a.self-link,
    .issue>a.self-link {
      /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
      left: auto;
      right: 0;
    }

    li>a.self-link {
      left: calc(-1 * (3.5rem - 26px) - 2em);
    }

    dfn>a.self-link {
      top: auto;
      left: auto;
      opacity: 0;
      width: 1.5em;
      height: 1.5em;
      background: var(--selflink-bg);
      color: var(--selflink-text);
      font-style: normal;
      transition: opacity .2s, background-color .2s, color .2s;
    }

    dfn:hover>a.self-link {
      opacity: 1;
    }

    dfn>a.self-link:hover {
      color: var(--selflink-hover-text);
    }

    a.self-link::before {
      content: "¶";
    }

    .heading>a.self-link::before {
      content: "§";
    }

    dfn>a.self-link::before {
      content: "#";
    }
  </style>
  <style>
    /* style-syntax-highlighting */

    pre.idl.highlight {
      background: var(--borderedblock-bg, var(--def-bg));
    }

    code.highlight {
      padding: .1em;
      border-radius: .3em;
    }

    pre.highlight,
    pre>code.highlight {
      display: block;
      padding: 1em;
      margin: .5em 0;
      overflow: auto;
      border-radius: 0;
    }

    .highlight:not(.idl) {
      background: rgba(0, 0, 0, .03);
    }

    c-[a] {
      color: #990055
    }

    /* Keyword.Declaration */
    c-[b] {
      color: #990055
    }

    /* Keyword.Type */
    c-[c] {
      color: #708090
    }

    /* Comment */
    c-[d] {
      color: #708090
    }

    /* Comment.Multiline */
    c-[e] {
      color: #0077aa
    }

    /* Name.Attribute */
    c-[f] {
      color: #669900
    }

    /* Name.Tag */
    c-[g] {
      color: #222222
    }

    /* Name.Variable */
    c-[k] {
      color: #990055
    }

    /* Keyword */
    c-[l] {
      color: #000000
    }

    /* Literal */
    c-[m] {
      color: #000000
    }

    /* Literal.Number */
    c-[n] {
      color: #0077aa
    }

    /* Name */
    c-[o] {
      color: #999999
    }

    /* Operator */
    c-[p] {
      color: #999999
    }

    /* Punctuation */
    c-[s] {
      color: #a67f59
    }

    /* Literal.String */
    c-[t] {
      color: #a67f59
    }

    /* Literal.String.Single */
    c-[u] {
      color: #a67f59
    }

    /* Literal.String.Double */
    c-[cp] {
      color: #708090
    }

    /* Comment.Preproc */
    c-[c1] {
      color: #708090
    }

    /* Comment.Single */
    c-[cs] {
      color: #708090
    }

    /* Comment.Special */
    c-[kc] {
      color: #990055
    }

    /* Keyword.Constant */
    c-[kn] {
      color: #990055
    }

    /* Keyword.Namespace */
    c-[kp] {
      color: #990055
    }

    /* Keyword.Pseudo */
    c-[kr] {
      color: #990055
    }

    /* Keyword.Reserved */
    c-[ld] {
      color: #000000
    }

    /* Literal.Date */
    c-[nc] {
      color: #0077aa
    }

    /* Name.Class */
    c-[no] {
      color: #0077aa
    }

    /* Name.Constant */
    c-[nd] {
      color: #0077aa
    }

    /* Name.Decorator */
    c-[ni] {
      color: #0077aa
    }

    /* Name.Entity */
    c-[ne] {
      color: #0077aa
    }

    /* Name.Exception */
    c-[nf] {
      color: #0077aa
    }

    /* Name.Function */
    c-[nl] {
      color: #0077aa
    }

    /* Name.Label */
    c-[nn] {
      color: #0077aa
    }

    /* Name.Namespace */
    c-[py] {
      color: #0077aa
    }

    /* Name.Property */
    c-[ow] {
      color: #999999
    }

    /* Operator.Word */
    c-[mb] {
      color: #000000
    }

    /* Literal.Number.Bin */
    c-[mf] {
      color: #000000
    }

    /* Literal.Number.Float */
    c-[mh] {
      color: #000000
    }

    /* Literal.Number.Hex */
    c-[mi] {
      color: #000000
    }

    /* Literal.Number.Integer */
    c-[mo] {
      color: #000000
    }

    /* Literal.Number.Oct */
    c-[sb] {
      color: #a67f59
    }

    /* Literal.String.Backtick */
    c-[sc] {
      color: #a67f59
    }

    /* Literal.String.Char */
    c-[sd] {
      color: #a67f59
    }

    /* Literal.String.Doc */
    c-[se] {
      color: #a67f59
    }

    /* Literal.String.Escape */
    c-[sh] {
      color: #a67f59
    }

    /* Literal.String.Heredoc */
    c-[si] {
      color: #a67f59
    }

    /* Literal.String.Interpol */
    c-[sx] {
      color: #a67f59
    }

    /* Literal.String.Other */
    c-[sr] {
      color: #a67f59
    }

    /* Literal.String.Regex */
    c-[ss] {
      color: #a67f59
    }

    /* Literal.String.Symbol */
    c-[vc] {
      color: #0077aa
    }

    /* Name.Variable.Class */
    c-[vg] {
      color: #0077aa
    }

    /* Name.Variable.Global */
    c-[vi] {
      color: #0077aa
    }

    /* Name.Variable.Instance */
    c-[il] {
      color: #000000
    }

    /* Literal.Number.Integer.Long */
  </style>
  <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD" rel="stylesheet">

<body class="h-entry">
  <div class="head">
    <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
          src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
    <h1 class="p-name no-ref" id="title">CSSネスティングモジュール</h1>
    <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C作業草案</a>, <time class="dt-updated"
        datetime="2023-02-14">2023年2月14日</time></p>
    <details open>
      <summary>この文書の詳細</summary>
      <div data-fill-with="spec-metadata">
        <dl>
          <dt>このバージョン:
          <dd><a class="u-url"
              href="https://www.w3.org/TR/2023/WD-css-nesting-1-20230214/">https://www.w3.org/TR/2023/WD-css-nesting-1-20230214/</a>
          <dt>最新公開バージョン:
          <dd><a href="https://www.w3.org/TR/css-nesting-1/">https://www.w3.org/TR/css-nesting-1/</a>
          <dt>編集者草案:
          <dd><a href="https://drafts.csswg.org/css-nesting/">https://drafts.csswg.org/css-nesting/</a>
          <dt>履歴:
          <dd><a class="u-url"
              href="https://www.w3.org/standards/history/css-nesting-1">https://www.w3.org/standards/history/css-nesting-1</a>
          <dt>フィードバック:
          <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-nesting-1">CSSWG課題リポジトリ</a>
          <dd><a href="#issues-index">仕様内のインライン</a>
          <dt class="editor">編集者:
          <dd class="editor p-author h-card vcard" data-editor-id="42199"><a class="p-name fn u-url url"
              href="http://xanthir.com/contact/">Tab Atkins-Bittner</a> (<span class="p-org org">Google</span>)
          <dd class="editor p-author h-card vcard" data-editor-id="112669"><a class="p-name fn u-url url"
              href="https://nerdy.dev">Adam Argyle</a> (<span class="p-org org">Google</span>)
          <dt>この仕様への編集提案:
          <dd><a href="https://github.com/w3c/csswg-drafts/blob/main/css-nesting-1/Overview.bs">GitHub編集者</a>
        </dl>
      </div>
    </details>
    <div data-fill-with="warning"></div>
    <p class="copyright" data-fill-with="copyright"><a
        href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2023 <a
        href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr
        title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a
        href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a
        href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a
        href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document" rel="license">permissive
        document license</a> rules apply. </p>
    <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
    <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">概要</span></h2>
    <p>このモジュールは、1つのスタイル規則の中に別のスタイル規則を入れ子にする能力を導入し、子規則のセレクターが親規則のセレクターに対して相対的になります。これにより、CSSスタイルシートのモジュール性と保守性が向上します。</p>
    <a href="https://www.w3.org/TR/CSS/">CSS</a>は、構造化文書（HTMLやXMLなど）の表示を画面や紙などで記述するための言語です。
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">この文書のステータス</span></h2>
  <div data-fill-with="status">
    <p><em>このセクションは、公開時点でのこの文書のステータスについて説明します。
        現在のW3C出版物の一覧や
        この技術報告の最新改訂版は
        <a href="https://www.w3.org/TR/">W3C技術報告インデックス https://www.w3.org/TR/</a>で確認できます。</em></p>
    <p>この文書は<a href="https://www.w3.org/groups/wg/css">CSS作業グループ</a>によって、<strong>作業草案</strong>として<a
        href="https://www.w3.org/2021/Process-20211102/#recs-and-notes">勧告トラック</a>を使用して公開されました。
      作業草案としての公開は、<abbr title="World Wide Web Consortium">W3C</abbr>およびその会員による承認を意味するものではありません。</p>
    <p>この文書はドラフト文書であり、今後いつでも更新、置き換え、または他の文書によって廃止される可能性があります。
      この文書を進行中の作業以外として引用するのは不適切です。</p>
    <p>フィードバックは<a
        href="https://github.com/w3c/csswg-drafts/issues">GitHubで課題を提出</a>（推奨）、タイトルに仕様コード「css-nesting」を含めてください。例:「[css-nesting]
      <i>…コメントの概要…</i>」。
      すべての課題やコメントは<a href="https://lists.w3.org/Archives/Public/public-css-archive/">アーカイブ</a>されています。
      または、(<a href="https://lists.w3.org/Archives/Public/www-style/">アーカイブ</a>) 公開メーリングリスト<a
        href="mailto:www-style@w3.org?Subject=%5Bcss-nesting%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>に送信することもできます。
    </p>
    <p>この文書は<a href="https://www.w3.org/2021/Process-20211102/"
        id="w3c_process_revision">2021年11月2日W3Cプロセス文書</a>に則っています。</p>
    <p>この文書は<a href="https://www.w3.org/Consortium/Patent-Policy-20200915/">W3C特許ポリシー</a>の下で運営されているグループによって作成されました。
      W3Cは、グループの成果物に関連して行われた<a href="https://www.w3.org/groups/wg/css/ipr" rel="disclosure">特許開示の公開リスト</a>を管理しています。
      そのページには特許開示方法の案内もあります。
      特許の存在を実際に知っている個人は、その特許に<a
        href="https://www.w3.org/Consortium/Patent-Policy-20200915/#def-essential">必須クレーム</a>が含まれていると考える場合、<a
        href="https://www.w3.org/Consortium/Patent-Policy-20200915/#sec-Disclosure">W3C特許ポリシー第6節</a>に従って情報を開示しなければなりません。
    </p>
    <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
    <h2 class="no-num no-toc no-ref" id="contents">目次</h2>
    <ol class="toc" role="directory">
      <li>
        <a href="#intro"><span class="secno">1</span> <span class="content">はじめに</span></a>
        <ol class="toc">
          <li><a href="#placement"><span class="secno">1.1</span> <span class="content">モジュールの相互作用</span></a>
          <li><a href="#values"><span class="secno">1.2</span> <span class="content">値</span></a>
          <li><a href="#motivation"><span class="secno">1.3</span> <span class="content">動機</span></a>
        </ol>
      <li>
        <a href="#nesting"><span class="secno">2</span> <span class="content">スタイル規則の入れ子</span></a>
        <ol class="toc">
          <li><a href="#syntax"><span class="secno">2.1</span> <span class="content">構文</span></a>
          <li>
            <a href="#conditionals"><span class="secno">2.2</span> <span class="content">他のアットルールの入れ子</span></a>
            <ol class="toc">
              <li><a href="#nesting-at-scope"><span class="secno">2.2.1</span> <span class="content">入れ子の <span
                      class="css">@scope</span> 規則</span></a>
            </ol>
          <li><a href="#mixing"><span class="secno">2.3</span> <span class="content">入れ子規則と宣言の混合</span></a>
        </ol>
      <li><a href="#nest-selector"><span class="secno">3</span> <span class="content">入れ子セレクター: <span
              class="css">&amp;</span> セレクター</span></a>
      <li>
        <a href="#cssom"><span class="secno">4</span> <span class="content">CSSOM</span></a>
        <ol class="toc">
          <li><a href="#cssom-style"><span class="secno">4.1</span> <span class="content"><code
                  class="idl"><span>CSSStyleRule</span></code>への修正</span></a>
        </ol>
      <li>
        <a href="#w3c-conformance"><span class="secno"></span> <span class="content">適合性</span></a>
        <ol class="toc">
          <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">文書の慣例</span></a>
          <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span class="content">適合クラス</span></a>
          <li>
            <a href="#w3c-partial"><span class="secno"></span> <span class="content">部分的な実装</span></a>
            <ol class="toc">
              <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span class="content">
                    不安定および独自拡張機能の実装</span></a>
            </ol>
          <li><a href="#w3c-testing"><span class="secno"></span> <span class="content">非実験的な実装</span></a>
        </ol>
      <li>
        <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
        <ol class="toc">
          <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">本仕様で定義される用語</span></a>
          <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                class="content">参照によって定義される用語</span></a>
        </ol>
      <li>
        <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
        <ol class="toc">
          <li><a href="#normative"><span class="secno"></span> <span class="content">規範的参考文献</span></a>
          <li><a href="#informative"><span class="secno"></span> <span class="content">参考情報</span></a>
        </ol>
      <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL索引</span></a>
      <li><a href="#issues-index"><span class="secno"></span> <span class="content">課題索引</span></a>
    </ol>
  </nav>
  <main>
    <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">
        はじめに</span><a class="self-link" href="#intro"></a></h2>
    <p><em>このセクションは規範的ではありません。</em></p>
    <p>このモジュールは、スタイル規則を他のスタイル規則の中に入れ子にすることをサポートし、
      内側の規則のセレクターが外側の規則で一致した要素を参照できるようにします。
      この機能により、関連するスタイルをCSS文書内の単一の構造にまとめることができ、
      可読性と保守性が向上します。</p>
    <h3 class="heading settled" data-level="1.1" id="placement"><span class="secno">1.1. </span><span class="content">
        モジュールの相互作用</span><a class="self-link" href="#placement"></a></h3>
    <p>このモジュールは、<a data-link-type="biblio" href="#biblio-css21"
        title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS21]</a>
      パーサーモデルを拡張する新しいパーサー規則を導入します。
      また、<a data-link-type="biblio" href="#biblio-selectors4" title="Selectors Level 4">[SELECTORS4]</a>
      モジュールを拡張するセレクターも導入します。</p>
    <h3 class="heading settled" data-level="1.2" id="values"><span class="secno">1.2. </span><span class="content">
        値</span><a class="self-link" href="#values"></a></h3>
    <p>この仕様では新しいプロパティや値は定義されていません。</p>
    <h3 class="heading settled" data-level="1.3" id="motivation"><span class="secno">1.3. </span><span class="content">
        動機</span><a class="self-link" href="#motivation"></a></h3>
    <p>CSSは、多少複雑なウェブページの場合でも、
      関連するコンテンツをスタイリングするために多くの重複を含むことがよくあります。
      例えば、これは <a data-link-type="biblio" href="#biblio-css-color-3" title="CSS Color Module Level 3">[CSS-COLOR-3]</a>
      モジュールのあるバージョンのCSSマークアップの一部です：</p>
    <div class="example" id="example-df188c81">
      <a class="self-link" href="#example-df188c81"></a>
      <pre class="lang-css highlight">table.colortable td <c- p>{</c->
  <c- k>text-align</c-><c- p>:</c->center<c- p>;</c->
<c- p>}</c->
table.colortable td.c <c- p>{</c->
  <c- k>text-transform</c-><c- p>:</c->uppercase<c- p>;</c->
<c- p>}</c->
table.colortable td:first-child<c- p>,</c-> table.colortable td:first-child+td <c- p>{</c->
  <c- k>border</c-><c- p>:</c-><c- m>1</c-><c- k>px</c-> solid black<c- p>;</c->
<c- p>}</c->
table.colortable th <c- p>{</c->
  <c- k>text-align</c-><c- p>:</c->center<c- p>;</c->
  <c- k>background</c-><c- p>:</c->black<c- p>;</c->
  <c- k>color</c-><c- p>:</c->white<c- p>;</c->
<c- p>}</c->
</pre>
    </div>
    <p>入れ子を使うと、関連するスタイル規則を次のようにまとめることができます：</p>
    <div class="example" id="example-aecb8796">
      <a class="self-link" href="#example-aecb8796"></a>
      <pre class="lang-css highlight">table.colortable <c- p>{</c->
  &amp; td <c- p>{</c->
    <c- k>text-align</c-><c- p>:</c->center<c- p>;</c->
    &amp;.c <c- p>{</c-> <c- k>text-transform</c-><c- p>:</c->uppercase <c- p>}</c->
    &amp;:first-child<c- p>,</c-> &amp;:first-child + td <c- p>{</c-> <c- k>border</c-><c- p>:</c-><c- m>1</c-><c- k>px</c-> solid black <c- p>}</c->
  <c- p>}</c->
  &amp; th <c- p>{</c->
    <c- k>text-align</c-><c- p>:</c->center<c- p>;</c->
    <c- k>background</c-><c- p>:</c->black<c- p>;</c->
    <c- k>color</c-><c- p>:</c->white<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
    </div>
    <p>重複を減らせるだけでなく、
      関連する規則のグループ化によって、CSSの可読性と保守性が向上します。</p>
    <h2 class="heading settled" data-level="2" id="nesting"><span class="secno">2. </span><span
        class="content">スタイル規則の入れ子</span><a class="self-link" href="#nesting"></a></h2>
    <p>スタイル規則は他のスタイル規則の中に入れ子にできます。
      これらの <dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-lt="nested style rule|nesting style rule"
        id="nested-style-rule">入れ子スタイル規則</dfn> は通常のスタイル規則と同様に、
      セレクターを使って要素にプロパティを関連付けますが、親規則のセレクターコンテキストを「継承」し、
      親のセレクターを繰り返すことなく、さらにその上に構築することができます。</p>
    <p><a data-link-type="dfn" href="#nested-style-rule"
        id="ref-for-nested-style-rule">入れ子スタイル規則</a>は、通常のスタイル規則とほぼ同じですが、
      その <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#selector" id="ref-for-selector">セレクター</a>は <a
        data-link-type="dfn" href="https://www.w3.org/TR/css-values-4/#css-css-identifier"
        id="ref-for-css-css-identifier">識別子</a>や
      <a data-link-type="dfn" href="https://www.w3.org/TR/css-values-4/#functional-notation"
        id="ref-for-functional-notation">関数表記</a>で始めることはできません。
      さらに、<span id="ref-for-nested-style-rule①">入れ子スタイル規則</span>は <a data-link-type="dfn"
        href="https://www.w3.org/TR/selectors-4/#relative-selector"
        id="ref-for-relative-selector">相対セレクター</a>を使用することができます。
    </p>
    <div class="example" id="example-20186287">
      <a class="self-link" href="#example-20186287"></a> つまり、次のような入れ子スタイル規則は：
      <pre class="lang-css highlight">.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c->

  .bar <c- p>{</c->
    <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
      <p>有効であり、次と同等になります：</p>
      <pre class="lang-css highlight">.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c->
<c- p>}</c->
.foo .bar <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
<c- p>}</c->
</pre>
      <p>入れ子規則では <a data-link-type="dfn" href="#nesting-selector" id="ref-for-nesting-selector">入れ子セレクター</a>
        を使って親規則で一致した要素を直接参照したり、
        <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#relative-selector"
          id="ref-for-relative-selector①">相対セレクター</a>構文を使って「子孫」以外の関係も指定できます。
      </p>
      <pre class="lang-css highlight">.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c->

  &amp;:hover <c- p>{</c->
    <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->

<c- c>/* 次と同等： */</c->

.foo <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
.foo:hover <c- p>{</c-> <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c->
</pre>
      <pre class="lang-css highlight">.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c->

  + .bar <c- p>{</c->
    <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->

<c- c>/* 次と同等： */</c->

.foo <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
.foo + .bar <c- p>{</c-> <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c->
</pre>
    </div>
    <div class="example" id="example-34e8e94f">
      <a class="self-link" href="#example-34e8e94f"></a> ただし、入れ子セレクターを識別子（つまり <a data-link-type="dfn"
        href="https://www.w3.org/TR/selectors-4/#type-selector" id="ref-for-type-selector">型セレクター</a>）で始めるのは無効です：
      <pre class="lang-css highlight">div <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c->

  input <c- p>{</c->
    <c- k>margin</c-><c- p>:</c-> <c- m>1</c-><c- k>em</c-><c- p>;</c->
  <c- p>}</c->
<c- p>}</c->
<c- c>/* 「input」は識別子なので無効 */</c->
</pre>
      <p>このようなセレクターも書くことはできますが、少し書き換える必要があります：</p>
      <pre class="lang-css highlight">div <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c->

  &amp; input <c- p>{</c-> <c- k>margin</c-><c- p>:</c-> <c- m>1</c-><c- k>em</c-><c- p>;</c-> <c- p>}</c->
  <c- c>/* 有効、識別子で始まらない */</c->

  <c- nf>:is</c-><c- p>(</c->input<c- p>)</c-> <c- p>{</c-> <c- k>margin</c-><c- p>:</c-> <c- m>1</c-><c- k>em</c-><c- p>;</c-> <c- p>}</c->
  <c- c>/* 有効、コロンで始まり、</c->
<c- c>     前の規則と同等 */</c->
<c- p>}</c->
</pre>
    </div>
    <details class="note">
      <summary>なぜ入れ子規則のセレクターに制約があるのですか？</summary>
      <p>スタイル規則を他のスタイル規則の中に素直に入れ子にすると、残念ながら曖昧になります。セレクターの構文が宣言の構文と重複するため、
        パーサーは宣言なのかスタイル規則の始まりなのかを判断するために無限の先読みが必要になります。</p>
      <p>例えば、パーサーが <span class="css">color:hover ...</span> を見たとき、
        それが <a class="property css" data-link-type="property" href="https://www.w3.org/TR/css-color-4/#propdef-color"
          id="ref-for-propdef-color">color</a> プロパティ
        （無効な値が設定されている...）
        なのか、<code>&lt;color></code> 要素のセレクターなのか、区別できません。
        有効なプロパティを探すことで判別することもできません。
        実装がサポートするプロパティによってパースが変わってしまい、時期によっても変化してしまうためです。</p>
      <p>入れ子スタイル規則が <a data-link-type="dfn" href="https://www.w3.org/TR/css-values-4/#css-css-identifier"
          id="ref-for-css-css-identifier①">識別子</a>で始まることを禁止することでこの問題を回避できます。
        <a data-link-type="dfn" href="https://www.w3.org/TR/cssom-1/#cssstyledeclaration-declarations"
          id="ref-for-cssstyledeclaration-declarations">宣言</a>はすべて識別子で始まり、
        その識別子がプロパティ名となるため、
        パーサーはすぐに <a data-link-type="dfn" href="https://www.w3.org/TR/css-syntax-3/#declaration"
          id="ref-for-declaration">宣言</a>か <a data-link-type="dfn" href="https://www.w3.org/TR/css-syntax-3/#style-rule"
          id="ref-for-style-rule">スタイル規則</a>か判断できます。
      </p>
      <p>一部の非ブラウザー実装ではこの制約を課していません。
        多くの場合、最終的にはプロパティとセレクターを区別できますが、
        それにはパーサーが無限の先読みを必要とします。
        つまり、どちらとして解釈するべきか判断できるまで不明な量の内容を保持しなければなりません。
        CSSはこれまで、パース時の先読み量が少なく、既知であることを要求してきました。
        これにより効率的なパースアルゴリズムが可能となり、
        無限先読みはCSSのブラウザー実装では一般に容認されていません。</p>
    </details>
    <h3 class="heading settled" data-level="2.1" id="syntax"><span class="secno">2.1. </span><span
        class="content">構文</span><a class="self-link" href="#syntax"></a></h3>
    <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-syntax-3/#style-rule"
        id="ref-for-style-rule①">スタイル規則</a>の内容には、従来の<a data-link-type="dfn"
        href="https://www.w3.org/TR/cssom-1/#cssstyledeclaration-declarations"
        id="ref-for-cssstyledeclaration-declarations①">宣言</a>に加えて、新たに<a data-link-type="dfn" href="#nested-style-rule"
        id="ref-for-nested-style-rule②">入れ子スタイル規則</a>や<a data-link-type="dfn"
        href="https://www.w3.org/TR/css-syntax-3/#at-rule" id="ref-for-at-rule">アットルール</a>が許可されます。</p>
    <p><a data-link-type="dfn" href="#nested-style-rule"
        id="ref-for-nested-style-rule③">入れ子スタイル規則</a>は、非入れ子規則と次の点で異なります：</p>
    <ul>
      <li data-md>
        <p><a data-link-type="dfn" href="#nested-style-rule" id="ref-for-nested-style-rule④">入れ子スタイル規則</a>のセレクターは、<a
            data-link-type="dfn" href="https://www.w3.org/TR/css-values-4/#css-css-identifier"
            id="ref-for-css-css-identifier②">識別子</a>や<a data-link-type="dfn"
            href="https://www.w3.org/TR/css-values-4/#functional-notation"
            id="ref-for-functional-notation①">関数表記</a>で始めてはなりません。</p>
      <li data-md>
        <p><a data-link-type="dfn" href="#nested-style-rule" id="ref-for-nested-style-rule⑤">入れ子スタイル規則</a>は、前置部として<a
            class="production css" data-link-type="type"
            href="https://www.w3.org/TR/selectors-4/#typedef-relative-selector-list"
            id="ref-for-typedef-relative-selector-list">&lt;relative-selector-list></a>を受け入れます
          （従来の<a class="production css" data-link-type="type"
            href="https://www.w3.org/TR/selectors-4/#typedef-selector-list"
            id="ref-for-typedef-selector-list">&lt;selector-list></a>だけでなく）。
          <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#relative-selector"
            id="ref-for-relative-selector②">相対セレクター</a>はすべて、<a data-link-type="dfn" href="#nesting-selector"
            id="ref-for-nesting-selector①">入れ子セレクター</a>で表される要素を基準に解釈されます。
        </p>
      <li data-md>
        <p><a class="production css" data-link-type="type"
            href="https://www.w3.org/TR/selectors-4/#typedef-relative-selector-list"
            id="ref-for-typedef-relative-selector-list①">&lt;relative-selector-list></a>内のセレクターが<a data-link-type="dfn"
            href="https://www.w3.org/TR/selectors-4/#selector-combinator"
            id="ref-for-selector-combinator">結合子</a>で始まらず、かつ<a data-link-type="dfn" href="#nesting-selector"
            id="ref-for-nesting-selector②">入れ子セレクター</a>を含む場合、
          それは非<a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#relative-selector"
            id="ref-for-relative-selector③">相対セレクター</a>として解釈されます。</p>
    </ul>
    <p>入れ子スタイル規則のパース方法の詳細は<a data-link-type="biblio" href="#biblio-css-syntax-3"
        title="CSS Syntax Module Level 3">[CSS-SYNTAX-3]</a>で定義されています。</p>
    <p class="issue" id="issue-8ec431e9"><a class="self-link" href="#issue-8ec431e9"></a> CSSWGは現在、パース時の先読みの影響を検討しており、
      その結果として許可される構文を調整する可能性があります。<a href="https://github.com/w3c/csswg-drafts/issues/7961">[Issue #7961]</a></p>
    <p>無効な<a data-link-type="dfn" href="#nested-style-rule"
        id="ref-for-nested-style-rule⑥">入れ子スタイル規則</a>は、その内容ごと無視されますが、親規則自体は無効になりません。</p>
    <div class="example" id="example-31845edf">
      <a class="self-link" href="#example-31845edf"></a> 例えば、次の入れ子は有効です：
      <pre class="lang-css highlight"><b><c- c>/* &amp; は単独でも利用可能 */</c-></b>
.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  &amp; > .bar <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
  > .baz <c- p>{</c-> <c- k>color</c-><c- p>:</c-> green<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
<c- c>/* 同等：</c->
<c- c>  .foo { color: blue; }</c->
<c- c>  .foo > .bar { color: red; }</c->
<c- c>  .foo > .baz { color: green; }</c->
<c- c>*/</c->


<b><c- c>/* 複合セレクターで、親のセレクターを絞り込む */</c-></b>
.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  &amp;.bar <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
<c- c>/* 同等：</c->
<c- c>  .foo { color: blue; }</c->
<c- c>  .foo.bar { color: red; }</c->
<c- c>*/</c->

<b><c- c>/* セレクターリストの複数のセレクターはすべて親に相対 */</c-></b>
.foo<c- p>,</c-> .bar <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  + .baz<c- p>,</c-> &amp;.qux <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
<c- c>/* 同等：</c->
<c- c>  .foo, .bar { color: blue; }</c->
<c- c>  :is(.foo, .bar) + .baz,</c->
<c- c>  :is(.foo, .bar).qux { color: red; }</c->
<c- c>*/</c->

<b><c- c>/* &amp; は1つのセレクター内で複数回使用可能 */</c-></b>
.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  &amp; .bar &amp; .baz &amp; .qux <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
<c- c>/* 同等：</c->
<c- c>  .foo { color: blue; }</c->
<c- c>  .foo .bar .foo .baz .foo .qux { color: red; }</c->
<c- c>*/</c->

<b><c- c>/* &amp; はセレクターの先頭でなくてもよい */</c-></b>

.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c->
  .parent &amp; <c- p>{</c->
    <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->
<c- c>/* 同等：</c->
<c- c>  .foo { color: red; }</c->
<c- c>  .parent .foo { color: blue; }</c->
<c- c>*/</c->

.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c->
  <c- nf>:not</c-><c- p>(</c->&amp;<c- p>)</c-> <c- p>{</c->
    <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->
<c- c>/* 同等：</c->
<c- c>  .foo { color: red; }</c->
<c- c>  :not(.foo) { color: blue; }</c->
<c- c>*/</c->

<b><c- c>/* </c-><a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#relative-selector" id="ref-for-relative-selector④"><c- c>相対セレクター</c-></a><c- c>を使う場合、</c->
<c- c>  先頭の &amp; は自動的に暗黙指定される */</c-></b>

.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c->
  + .bar + &amp; <c- p>{</c-> <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c->
<c- p>}</c->

<c- c>/* 同等：</c->
<c- c>  .foo { color: red; }</c->
<c- c>  .foo + .bar + .foo { color: blue; }</c->
<c- c>*/</c->

<b><c- c>/* ちょっと変ですが、&amp; 単独でも利用可能 */</c-></b>
.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  &amp; <c- p>{</c-> <c- k>padding</c-><c- p>:</c-> <c- m>2</c-><c- k>ch</c-><c- p>;</c-> <c- p>}</c->
<c- p>}</c->
<c- c>/* 同等：</c->
<c- c>  .foo { color: blue; }</c->
<c- c>  .foo { padding: 2ch; }</c->

<c- c>  // または</c->

<c- c>  .foo {</c->
<c- c>    color: blue;</c->
<c- c>    padding: 2ch;</c->
<c- c>  }</c->
<c- c>*/</c->

<b><c- c>/* さらに、&amp; の重複も可能 */</c-></b>
.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  &amp;&amp; <c- p>{</c-> <c- k>padding</c-><c- p>:</c-> <c- m>2</c-><c- k>ch</c-><c- p>;</c-> <c- p>}</c->
<c- p>}</c->
<c- c>/* 同等：</c->
<c- c>  .foo { color: blue; }</c->
<c- c>  .foo.foo { padding: 2ch; }</c->
<c- c>*/</c->

<b><c- c>/* 親セレクターは任意に複雑にできる */</c-></b>
.error<c- p>,</c-> #404 <c- p>{</c->
  &amp;:hover > .baz <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
<c- c>/* 同等：</c->
<c- c>  :is(.error, #404):hover > .baz { color: red; }</c->
<c- c>*/</c->

.ancestor .el <c- p>{</c->
  .other-ancestor &amp; <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
<c- c>/* 同等：</c->
<c- c>  .other-ancestor :is(.ancestor .el) { color: red; }</c->

<b><c- c>/* 入れ子セレクターも複雑にできる */</c-></b>
.foo <c- p>{</c->
  &amp; <c- nf>:is</c-><c- p>(</c->.bar<c- p>,</c-> &amp;.baz<c- p>)</c-> <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
<c- c>/* 同等：</c->
<c- c>  .foo :is(.bar, .foo.baz) { color: red; }</c->
<c- c>*/</c->

<b><c- c>/* 入れ子の多段構造ではセレクターが積み重なる */</c-></b>
figure <c- p>{</c->
  <c- k>margin</c-><c- p>:</c-> <c- m>0</c-><c- p>;</c->

  > figcaption <c- p>{</c->
    <c- k>background</c-><c- p>:</c-> <c- nf>hsl</c-><c- p>(</c-><c- m>0</c-> <c- m>0</c-><c- k>%</c-> <c- m>0</c-><c- k>%</c-> / <c- m>50</c-><c- k>%</c-><c- p>);</c->

    > p <c- p>{</c->
      <c- k>font-size</c-><c- p>:</c-> <c- m>.9</c-><c- k>rem</c-><c- p>;</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>}</c->
<c- c>/* 同等：</c->
<c- c>  figure { margin: 0; }</c->
<c- c>  figure > figcaption { background: hsl(0 0% 0% / 50%); }</c->
<c- c>  figure > figcaption > p { font-size: .9rem; }</c->
<c- c>*/</c->
		
<b><c- c>/* Cascade Layersの利用例 */</c-></b>
<c- n>@layer</c-> base <c- p>{</c->
  html <c- p>{</c->
    <c- k>block-size</c-><c- p>:</c-> <c- m>100</c-><c- k>%</c-><c- p>;</c->

    &amp; body <c- p>{</c->
      <c- k>min-block-size</c-><c- p>:</c-> <c- m>100</c-><c- k>%</c-><c- p>;</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>}</c->
<c- c>/* 同等：</c->
<c- c>  @layer base {</c->
<c- c>    html { block-size: 100%; }</c->
<c- c>    html body { min-block-size: 100%; }</c->
<c- c>  }</c->
<c- c>*/</c->

<b><c- c>/* Cascade Layersの入れ子利用例 */</c-></b>
<c- n>@layer</c-> base <c- p>{</c->
  html <c- p>{</c->
    <c- k>block-size</c-><c- p>:</c-> <c- m>100</c-><c- k>%</c-><c- p>;</c->

    <c- n>@layer</c-> support <c- p>{</c->
      &amp; body <c- p>{</c->
        <c- k>min-block-size</c-><c- p>:</c-> <c- m>100</c-><c- k>%</c-><c- p>;</c->
      <c- p>}</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>}</c->
<c- c>/* 同等：</c->
<c- c>  @layer base {</c->
<c- c>    html { block-size: 100%; }</c->
<c- c>  }</c->
<c- c>  @layer base.support {</c->
<c- c>    html body { min-block-size: 100%; }</c->
<c- c>  }</c->
<c- c>*/</c->
		
<b><c- c>/* Scopingの利用例 */</c-></b>
<c- n>@scope</c-> <c- p>(</c->.card<c- p>)</c-> to <c- p>(</c->> header<c- p>)</c-> <c- p>{</c->
  :scope <c- p>{</c->
    <c- k>inline-size</c-><c- p>:</c-> <c- m>40</c-><c- k>ch</c-><c- p>;</c->
    <c- k>aspect-ratio</c-><c- p>:</c-> <c- m>3</c->/<c- m>4</c-><c- p>;</c->
				
    > header <c- p>{</c->
      <c- k>border-block-end</c-><c- p>:</c-> <c- m>1</c-><c- k>px</c-> solid white<c- p>;</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>}</c->
<c- c>/* 同等：</c->
<c- c>  @scope (.card) to (> header) {</c->
<c- c>    :scope { inline-size: 40ch; aspect-ratio: 3/4; }</c->
<c- c>    :scope > header { border-block-end: 1px solid white; }</c->
<c- c>  }</c->
<c- c>*/</c->

<b><c- c>/* Scopingの入れ子利用例 */</c-></b>
.card <c- p>{</c->
  <c- k>inline-size</c-><c- p>:</c-> <c- m>40</c-><c- k>ch</c-><c- p>;</c->
  <c- k>aspect-ratio</c-><c- p>:</c-> <c- m>3</c->/<c- m>4</c-><c- p>;</c->

  <c- n>@scope</c-> <c- p>(</c->&amp;<c- p>)</c-> to <c- p>(</c->> header > *<c- p>)</c-> <c- p>{</c->
    :scope > header <c- p>{</c->
      <c- k>border-block-end</c-><c- p>:</c-> <c- m>1</c-><c- k>px</c-> solid white<c- p>;</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>}</c->

<c- c>/* 同等：</c->
<c- c>  .card { inline-size: 40ch; aspect-ratio: 3/4; }</c->
<c- c>  @scope (.card) to (> header > *) {</c->
<c- c>    :scope > header { border-block-end: 1px solid white; }</c->
<c- c>  }</c->
<c- c>*/</c->
</pre>
      <p>ただし、次のような場合は無効です：</p>
      <pre class="lang-css highlight"><b><c- c>/* セレクターが識別子で始まる */</c-></b>
.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  div <c- p>{</c->
    <c- k>color</c-><c- p>:</c-> red<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
    </div>
    <div class="note" role="note">
      ネスティングをプリプロセスするCSS生成ツールの中には、
      セレクターを文字列として連結し、入れ子レベルをまたいで<em>単一の</em><a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#simple"
        id="ref-for-simple">単純セレクター</a>を構築できるようにするものもあります。
      これはBEMのような階層的な命名パターンで、ファイル内での繰り返しを減らすために使われることがあります。
      セレクター自体に内部的な繰り返しが多い場合に便利です。
      <p>例えば、あるコンポーネントが<span class="css">.foo</span>クラスを使用し、
        入れ子のコンポーネントが<span class="css">.fooBar</span>を使用する場合、
        <a href="https://sass-lang.com/">Sass</a>では次のように書けます：
      </p>
      <pre class="lang-css highlight">.foo <c- p>{</c->
        <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
        &amp;Bar <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
<c- c>/* Sassでは同等：</c->
<c- c>   .foo { color: blue; }</c->
<c- c>   .fooBar { color: red; }</c->
<c- c>*/</c->
</pre>
      <p>しかし、この文字列ベースの解釈は、
        著者が入れ子規則で型セレクターを追加しようとした場合に曖昧になります。例えば<a class="css" data-link-type="maybe"
          href="https://www.w3.org/TR/css-ui-4/#valdef-caret-shape-bar" id="ref-for-valdef-caret-shape-bar">Bar</a>は
        HTMLの<a href="https://html.spec.whatwg.org/multipage/custom-elements.html">カスタム要素名</a>として有効です。</p>
      <p>CSSはこうした連結を行わず、
        入れ子セレクターの各部を個別に解釈します：</p>
      <pre class="lang-css highlight">.foo <c- p>{</c->
        <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
        &amp;Bar <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
<c- c>/* CSSでは同等：</c->
<c- c>   .foo { color: blue; }</c->
<c- c>   Bar.foo { color: red; }</c->
<c- c>*/</c->
</pre>
    </div>
    <h3 class="heading settled" data-level="2.2" id="conditionals"><span class="secno">2.2. </span><span
        class="content">他のアットルールの入れ子</span><a class="self-link" href="#conditionals"></a></h3>
    <p><a data-link-type="dfn" href="#nested-style-rule" id="ref-for-nested-style-rule⑦">入れ子スタイル規則</a>に加えて、
      この仕様では<a class="dfn-paneled" data-dfn-type="dfn" data-export id="nested-group-rules">入れ子グループ規則</a>を
      <a data-link-type="dfn" href="https://www.w3.org/TR/css-syntax-3/#style-rule"
        id="ref-for-style-rule②">スタイル規則</a>の中に入れ子にすることを許可します。
      本体に<span id="ref-for-style-rule③">スタイル規則</span>を含むアットルールは、<span
        id="ref-for-style-rule④">スタイル規則</span>内に入れ子にすることができます。
    </p>
    <p>このように入れ子にされた場合、
      <a data-link-type="dfn" href="#nested-group-rules" id="ref-for-nested-group-rules">入れ子グループ規則</a>の内容は
      <a class="production css" data-link-type="type" href="https://www.w3.org/TR/css-syntax-3/#typedef-style-block"
        id="ref-for-typedef-style-block">&lt;style-block></a>としてパースされ、
      <a class="production css" data-link-type="type" href="https://www.w3.org/TR/css-syntax-3/#typedef-stylesheet"
        id="ref-for-typedef-stylesheet">&lt;stylesheet></a>とは異なります：
    </p>
    <ul>
      <li data-md>
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-syntax-3/#style-rule"
            id="ref-for-style-rule⑤">スタイル規則</a>は<a data-link-type="dfn" href="#nested-style-rule"
            id="ref-for-nested-style-rule⑧">入れ子スタイル規則</a>となり、
          <a data-link-type="dfn" href="#nesting-selector" id="ref-for-nesting-selector③">入れ子セレクター</a>は
          最も近い祖先の<span id="ref-for-style-rule⑥">スタイル規則</span>から定義を取得します。
        </p>
      <li data-md>
        <p>プロパティは直接利用でき、
          <code>&amp; {...}</code>ブロックに入れ子にされているかのように動作します。
        </p>
    </ul>
    <div class="note" role="note">
      具体的には、次の規則が<a data-link-type="dfn" href="#nested-group-rules"
        id="ref-for-nested-group-rules①">入れ子グループ規則</a>として入れ子にできます：
      <ul>
        <li data-md>
          <p>すべての<a data-link-type="dfn" href="https://www.w3.org/TR/css-conditional-3/#conditional-group-rule"
              id="ref-for-conditional-group-rule">条件付きグループ規則</a>（<a class="css" data-link-type="maybe"
              href="https://www.w3.org/TR/css-conditional-3/#at-ruledef-media" id="ref-for-at-ruledef-media">@media</a>、
            <a class="css" data-link-type="maybe" href="https://www.w3.org/TR/css-conditional-3/#at-ruledef-supports"
              id="ref-for-at-ruledef-supports">@supports</a>）
          </p>
        <li data-md>
          <p><a class="css" data-link-type="maybe" href="https://www.w3.org/TR/css-cascade-5/#at-ruledef-layer"
              id="ref-for-at-ruledef-layer">@layer</a></p>
        <li data-md>
          <p><a class="css" data-link-type="maybe" href="https://www.w3.org/TR/css-cascade-6/#at-ruledef-scope"
              id="ref-for-at-ruledef-scope">@scope</a></p>
        <li data-md>
          <p><a class="css" data-link-type="maybe" href="https://www.w3.org/TR/css-contain-3/#at-ruledef-container"
              id="ref-for-at-ruledef-container">@container</a></p>
      </ul>
    </div>
    <p>これら<a data-link-type="dfn" href="#nested-group-rules"
        id="ref-for-nested-group-rules②">入れ子グループ規則</a>の意味や挙動は、特に指定がない限り変更されません。</p>
    <div class="example" id="example-f2b8b339">
      <a class="self-link" href="#example-f2b8b339"></a> 例えば、次のような条件付きの入れ子は有効です：
      <pre class="lang-css highlight"><b><c- c>/* プロパティを直接利用可能 */</c-></b>
.foo <c- p>{</c->
  <c- k>display</c-><c- p>:</c-> grid<c- p>;</c->

  <c- n>@media</c-> <c- p>(</c->orientation: landscape<c- p>)</c-> <c- p>{</c->
    <c- k>grid-auto-flow</c-><c- p>:</c-> column<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->
<c- c>/* 同等：</c->
<c- c>  .foo {</c->
<c- c>    display: grid;</c->
<c- c>				</c->
<c- c>    @media (orientation: landscape) {</c->
<c- c>      &amp; {</c->
<c- c>        grid-auto-flow: column;</c->
<c- c>      }</c->
<c- c>    }</c->
<c- c>  }</c->
<c- c>*/</c->

<c- c>/* 最終的な同等：</c->
<c- c>  .foo { display: grid; }</c->

<c- c>  @media (orientation: landscape) {</c->
<c- c>    .foo {</c->
<c- c>      grid-auto-flow: column;</c->
<c- c>    }</c->
<c- c>  }</c->
<c- c>*/</c->

<b><c- c>/* 条件付き規則はさらに入れ子にできる */</c-></b>
.foo <c- p>{</c->
  <c- k>display</c-><c- p>:</c-> grid<c- p>;</c->

  <c- n>@media</c-> <c- p>(</c->orientation: landscape<c- p>)</c-> <c- p>{</c->
    <c- k>grid-auto-flow</c-><c- p>:</c-> column<c- p>;</c->

    <c- n>@media</c-> <c- p>(</c->min-width > <c- m>1024</c-><c- k>px</c-><c- p>)</c-> <c- p>{</c->
      <c- k>max-inline-size</c-><c- p>:</c-> <c- m>1024</c-><c- k>px</c-><c- p>;</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>}</c->

<c- c>/* 同等：</c->
<c- c>  .foo { display: grid; }</c->

<c- c>  @media (orientation: landscape) {</c->
<c- c>    .foo {</c->
<c- c>      grid-auto-flow: column;</c->
<c- c>    }</c->
<c- c>  }</c->

<c- c>  @media (orientation: landscape) and (min-width > 1024px) {</c->
<c- c>    .foo {</c->
<c- c>      max-inline-size: 1024px;</c->
<c- c>    }</c->
<c- c>  }</c->
<c- c>*/</c->

<b><c- c>/* Cascade Layersの入れ子例 */</c-></b>
html <c- p>{</c->
  <c- n>@layer</c-> base <c- p>{</c->
    <c- k>block-size</c-><c- p>:</c-> <c- m>100</c-><c- k>%</c-><c- p>;</c->

    <c- n>@layer</c-> support <c- p>{</c->
      &amp; body <c- p>{</c->
        <c- k>min-block-size</c-><c- p>:</c-> <c- m>100</c-><c- k>%</c-><c- p>;</c->
      <c- p>}</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>}</c->
<c- c>/* 同等：</c->
<c- c>  @layer base {</c->
<c- c>    html { block-size: 100%; }</c->
<c- c>  }</c->
<c- c>  @layer base.support {</c->
<c- c>    html body { min-block-size: 100%; }</c->
<c- c>  }</c->
<c- c>*/</c->

<b><c- c>/* Scopingの入れ子例 */</c-></b>
.card <c- p>{</c->
  <c- k>inline-size</c-><c- p>:</c-> <c- m>40</c-><c- k>ch</c-><c- p>;</c->
  <c- k>aspect-ratio</c-><c- p>:</c-> <c- m>3</c->/<c- m>4</c-><c- p>;</c->

  <c- n>@scope</c-> <c- p>(</c->&amp;<c- p>)</c-> <c- p>{</c->
    :scope <c- p>{</c->
      <c- k>border</c-><c- p>:</c-> <c- m>1</c-><c- k>px</c-> solid white<c- p>;</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>}</c->

<c- c>/* 同等：</c->
<c- c>  .card { inline-size: 40ch; aspect-ratio: 3/4; }</c->
<c- c>  @scope (.card) {</c->
<c- c>    :scope { border-block-end: 1px solid white; }</c->
<c- c>  }</c->
<c- c>*/</c->
</pre>
    </div>
    <p>直接入れ子にされたプロパティはすべて、
      まとめて順に集められ、
      <a data-link-type="dfn" href="#nested-style-rule" id="ref-for-nested-style-rule⑨">入れ子スタイル規則</a>
      （セレクター<a class="css" data-link-type="maybe" href="#selectordef-"
        id="ref-for-selectordef-">&amp;</a>）として入れ子規則の先頭に配置されます。
      OMでも同様です。
      （つまり、<code class="idl"><a data-link-type="idl">childRules</a></code>属性は
      まずこの<span id="ref-for-nested-style-rule①⓪">入れ子スタイル規則</span>から始まり、
      直接入れ子にされたすべてのプロパティを含みます。）
    </p>
    <div class="example" id="example-6f271ab7">
      <a class="self-link" href="#example-6f271ab7"></a>
      <p>例えば、先ほどの例：</p>
      <pre class="highlight">.foo <c- p>{</c->
  <c- k>display</c-><c- p>:</c-> grid<c- p>;</c->

  <c- n>@media</c-> <c- p>(</c->orientation: landscape<c- p>)</c-> <c- p>{</c->
    <c- k>grid-auto-flow</c-><c- p>:</c-> column<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->
<c- c>/* 同等：</c->
<c- c>  .foo {</c->
<c- c>    display: grid;</c->

<c- c>    @media (orientation: landscape) {</c->
<c- c>      &amp; {</c->
<c- c>        grid-auto-flow: column;</c->
<c- c>      }</c->
<c- c>    }</c->
<c- c>  }</c->
<c- c>*/</c->
</pre>
      <p>は、<em>まさに</em>同等であり、CSSOM構造も全く同じになります。
        <code
          class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-conditional-3/#cssmediarule" id="ref-for-cssmediarule">CSSMediaRule</a></code>
        オブジェクトには
        <code
          class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule">CSSStyleRule</a></code>
        オブジェクトが1つあり、
        その<code class="highlight"><c- p>.</c->childRules</code>属性内に
        <a class="property css" data-link-type="property"
          href="https://www.w3.org/TR/css-grid-2/#propdef-grid-auto-flow"
          id="ref-for-propdef-grid-auto-flow">grid-auto-flow</a>プロパティが含まれます。
      </p>
    </div>
    <p class="note" role="note"><span class="marker">注:</span> このため、このような規則のシリアライズは
      元の記述方法と異なり、
      シリアライズには直接入れ子のプロパティが<em>一切含まれません</em>。</p>
    <h4 class="heading settled" data-level="2.2.1" id="nesting-at-scope"><span class="secno">2.2.1. </span><span
        class="content">入れ子の <a class="css" data-link-type="maybe"
          href="https://www.w3.org/TR/css-cascade-6/#at-ruledef-scope" id="ref-for-at-ruledef-scope①">@scope</a>
        規則</span><a class="self-link" href="#nesting-at-scope"></a></h4>
    <p><a class="css" data-link-type="maybe" href="https://www.w3.org/TR/css-cascade-6/#at-ruledef-scope"
        id="ref-for-at-ruledef-scope②">@scope</a>規則が<a data-link-type="dfn" href="#nested-group-rules"
        id="ref-for-nested-group-rules③">入れ子グループ規則</a>の場合、
      <a class="css" data-link-type="maybe" href="#selectordef-" id="ref-for-selectordef-①">&amp;</a>は
      <a class="production css" data-link-type="type" href="https://www.w3.org/TR/css-cascade-6/#typedef-scope-start"
        id="ref-for-typedef-scope-start">&lt;scope-start></a>セレクター内で、
      最も近い祖先のスタイル規則で一致した要素を参照します。
    </p>
    <p>本体のスタイル規則や自身の<a class="production css" data-link-type="type"
        href="https://www.w3.org/TR/css-cascade-6/#typedef-scope-end" id="ref-for-typedef-scope-end">&lt;scope-end></a>
      セレクターにおいては、
      <a class="css" data-link-type="maybe" href="https://www.w3.org/TR/css-cascade-6/#at-ruledef-scope"
        id="ref-for-at-ruledef-scope③">@scope</a>規則は祖先スタイル規則として扱われ、
      <a class="production css" data-link-type="type" href="https://www.w3.org/TR/css-cascade-6/#typedef-scope-start"
        id="ref-for-typedef-scope-start①">&lt;scope-start></a>で一致した要素をマッチします。
    </p>
    <div class="example" id="example-792b81d1">
      <a class="self-link" href="#example-792b81d1"></a> つまり、次のコードは：
      <pre class="highlight">.parent <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->

  <c- n>@scope</c-> <c- p>(</c->&amp; > .scope<c- p>)</c-> to <c- p>(</c->&amp; .limit<c- p>)</c-> <c- p>{</c->
    &amp; .content <c- p>{</c->
      <c- k>color</c-><c- p>:</c-> red<c- p>;</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
      <p>次のように同等です：</p>
      <pre class="highlight">.parent <c- p>{</c-> <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c->
<c- n>@scope</c-> <c- p>(</c->.parent > .scope<c- p>)</c-> to <c- p>(</c->.parent > .scope .limit<c- p>)</c-> <c- p>{</c->
  .parent > .scope .content <c- p>{</c->
    <c- k>color</c-><c- p>:</c-> red<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
    </div>
    <h3 class="heading settled" data-level="2.3" id="mixing"><span class="secno">2.3. </span><span
        class="content">入れ子規則と宣言の混合</span><a class="self-link" href="#mixing"></a></h3>
    <p>スタイル規則内に宣言と
      <a data-link-type="dfn" href="#nested-style-rule" id="ref-for-nested-style-rule①①">入れ子スタイル規則</a>や
      <a data-link-type="dfn" href="https://www.w3.org/TR/css-nesting-1/#nested-conditional-group-rules"
        id="ref-for-nested-conditional-group-rules">入れ子条件付きグループ規則</a>が混在している場合、
      3つは自由に混ぜることができます。
      ただし、宣言と他の規則との相対的な順序は保持されません。
    </p>
    <div class="example" id="example-ee2b228d">
      <a class="self-link" href="#example-ee2b228d"></a> 例えば、次のコードでは：
      <pre class="lang-css highlight">article <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> green<c- p>;</c->
  &amp; <c- p>{</c-> <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c->
  color: red<c- p>;</c->
<c- p>}</c->

<c- c>/* 同等 */</c->
article <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> green<c- p>;</c->
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c->
  &amp; <c- p>{</c-> <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
</pre>
    </div>
    <p><a href="https://www.w3.org/TR/css-cascade-4/#cascade-sort">出現順序</a>を決定する際、
      <a data-link-type="dfn" href="#nested-style-rule" id="ref-for-nested-style-rule①②">入れ子スタイル規則</a>や
      <a data-link-type="dfn" href="https://www.w3.org/TR/css-nesting-1/#nested-conditional-group-rules"
        id="ref-for-nested-conditional-group-rules①">入れ子条件付きグループ規則</a>は親規則の<em>後</em>に来るものとみなされます。
    </p>
    <div>
      例えば：
      <pre class="lang-css highlight">article <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  &amp; <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
</pre>
      <p>両方の宣言は同じ詳細度 (0,0,1) ですが、
        入れ子規則は親規則の<em>後</em>とみなされるため、
        <a class="css" data-link-type="propdesc" href="https://www.w3.org/TR/css-color-4/#propdef-color"
          id="ref-for-propdef-color①">color: red</a>宣言がカスケードで勝ちます。
      </p>
      <p>一方、次の例では：</p>
      <pre class="lang-css highlight">article <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  <c- nf>:where</c-><c- p>(</c->&amp;<c- p>)</c-> <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
</pre>
      <p><a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#where-pseudo"
          id="ref-for-where-pseudo">:where()</a>疑似クラスは<a data-link-type="dfn" href="#nesting-selector"
          id="ref-for-nesting-selector④">入れ子セレクター</a>の詳細度を0にするため、
        <a class="css" data-link-type="propdesc" href="https://www.w3.org/TR/css-color-4/#propdef-color"
          id="ref-for-propdef-color②">color: red</a>宣言の詳細度は(0,0,0)となり、
        <span class="css" id="ref-for-propdef-color③">color: blue</span>宣言が勝ちます。
        この場合は「出現順序」が考慮される前に決着します。
      </p>
    </div>
    <p class="note" role="note"><span class="marker">注:</span> 宣言と入れ子規則を自由に混ぜることはできますが、
      読みにくく混乱しやすいので、
      全てのプロパティはスタイル規則の先頭にまとめ、
      入れ子規則は後に書くことが推奨されます。
      （古いユーザーエージェントでもこのほうが挙動が良いです。
      パースとエラー回復の仕様により、入れ子規則の後に書かれたプロパティは無視されることがあります。）</p>
    <p class="note" role="note"><span class="marker">注:</span> 他の規則と同様、
      入れ子がある場合のスタイル規則のシリアライズは元の記述と異なります。
      特に、直接入れ子のプロパティは
      すべて入れ子規則より前にシリアライズされるため、
      先にプロパティを書くべきもう一つの理由となります。</p>
    <h2 class="heading settled" data-level="3" id="nest-selector"><span class="secno">3. </span><span
        class="content">入れ子セレクター：<a class="css" data-link-type="maybe" href="#selectordef-"
          id="ref-for-selectordef-②">&amp;</a> セレクター</span><a class="self-link" href="#nest-selector"></a></h2>
    <p><a data-link-type="dfn" href="#nested-style-rule" id="ref-for-nested-style-rule①③">入れ子スタイル規則</a>を使用する際、
      親規則で一致した要素を参照できる必要があります。
      これはつまり、<em>入れ子の主目的</em>です。
      これを実現するために、
      本仕様は新しいセレクター、
      <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="nesting-selector">入れ子セレクター</dfn>
      を定義します。記述は <dfn class="dfn-paneled css" data-dfn-type="selector" data-export id="selectordef-">&amp;</dfn> (U+0026
      アンパサンド) です。
    </p>
    <p><a data-link-type="dfn" href="#nested-style-rule" id="ref-for-nested-style-rule①④">入れ子スタイル規則</a>のセレクター内で使用した場合、
      <a data-link-type="dfn" href="#nesting-selector" id="ref-for-nesting-selector⑤">入れ子セレクター</a>は親規則で一致した要素を表します。
      他の文脈で使用した場合は、同じ文脈での<a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#scope-pseudo"
        id="ref-for-scope-pseudo">:scope</a>と同じ要素を表します
      （特に定義がなければ）。
    </p>
    <div class="note" role="note">
      <a data-link-type="dfn" href="#nesting-selector" id="ref-for-nesting-selector⑥">入れ子セレクター</a>は、
      親スタイル規則のセレクターを<a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#matches-pseudo"
        id="ref-for-matches-pseudo">:is()</a>セレクターでラップして置換することで展開できます。
      例えば、
      <pre class="lang-css highlight">a<c- p>,</c-> b <c- p>{</c->
  &amp; c <c- p>{</c-> <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
</pre>
      <p>は次と同等です：</p>
      <pre class="lang-css highlight"><c- nf>:is</c-><c- p>(</c->a<c- p>,</c-> b<c- p>)</c-> c <c- p>{</c-> <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c->
</pre>
    </div>
    <p><a data-link-type="dfn" href="#nesting-selector" id="ref-for-nesting-selector⑦">入れ子セレクター</a>は
      擬似要素を表すことはできません
      （<a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#matches-pseudo"
        id="ref-for-matches-pseudo①">:is()</a>疑似クラスと同様の挙動）。</p>
    <div class="example" id="example-7145ff1e">
      <a class="self-link" href="#example-7145ff1e"></a> 例えば、次のスタイル規則では：
      <pre class="lang-css highlight">.foo<c- p>,</c-> .foo::before<c- p>,</c-> .foo::after <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c->

  &amp;:hover <c- p>{</c-> <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
</pre>
      <p><a class="css" data-link-type="maybe" href="#selectordef-" id="ref-for-selectordef-③">&amp;</a>は
        <span class="css">.foo</span>で一致した要素のみを表し、
        次のように同等です：
      </p>
      <pre class="lang-css highlight">.foo<c- p>,</c-> .foo::before<c- p>,</c-> .foo::after <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c->
<c- p>}</c->
.foo:hover <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
<c- p>}</c->
</pre>
    </div>
    <p class="issue" id="issue-62c479a8"><a class="self-link" href="#issue-62c479a8"></a> この制約を緩和したいと考えていますが、
      <a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#matches-pseudo"
        id="ref-for-matches-pseudo②">:is()</a>と
      <a class="css" data-link-type="maybe" href="#selectordef-" id="ref-for-selectordef-④">&amp;</a>の両方を同時に変更する必要があります。
      どちらも同じ基盤の仕組みを意図して利用しているためです。
      (<a href="https://github.com/w3c/csswg-drafts/issues/7433">Issue 7433</a>)
    </p>
    <p><a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#specificity" id="ref-for-specificity">詳細度</a>は
      <a data-link-type="dfn" href="#nesting-selector" id="ref-for-nesting-selector⑧">入れ子セレクター</a>の場合、
      親スタイル規則のセレクターリストの中で最大の詳細度に等しくなります
      （<a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#matches-pseudo"
        id="ref-for-matches-pseudo③">:is()</a>と同様の挙動）。
    </p>
    <div class="example" id="example-a71fa710">
      <a class="self-link" href="#example-a71fa710"></a> 例えば、次のスタイル規則がある場合：
      <pre class="lang-css highlight">#a<c- p>,</c-> b <c- p>{</c->
  &amp; c <c- p>{</c-> <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
.foo c <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
</pre>
      <p>次のようなDOM構造の場合：</p>
      <pre class="lang-html highlight"><c- p>&lt;</c-><c- f>b</c-> <c- e>class</c-><c- o>=</c-><c- s>foo</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>c</c-><c- p>></c->Blue text<c- p>&lt;/</c-><c- f>c</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>b</c-><c- p>></c->
</pre>
      <p>このテキストは青色になります。
        <a class="css" data-link-type="maybe" href="#selectordef-" id="ref-for-selectordef-⑤">&amp;</a>の詳細度は
        <span class="css">#a</span>（[1,0,0]）と
        <span class="css">b</span>（[0,0,1]）のうち大きい方で[1,0,0]、
        <span class="css">&amp; c</span>セレクター全体では[1,0,1]となり、
        <span class="css">.foo c</span>（[0,1,1]）より大きくなります。
      </p>
      <p>これは、入れ子を手動展開した場合の結果とは<em>異なります</em>。
        展開した場合は<a class="css" data-link-type="propdesc" href="https://www.w3.org/TR/css-color-4/#propdef-color"
          id="ref-for-propdef-color④">color: blue</a>は
        <span class="css">b c</span>（[0,0,2]）で一致し、
        <span class="css">#a c</span>（[1,0,1]）ではありません。
      </p>
    </div>
    <details class="note">
      <summary>なぜ入れ子規則の詳細度は非入れ子規則と違うのですか？</summary>
      <p><a data-link-type="dfn" href="#nesting-selector" id="ref-for-nesting-selector⑨">入れ子セレクター</a>は意図的に
        <a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#matches-pseudo"
          id="ref-for-matches-pseudo④">:is()</a>疑似クラスと同じ詳細度ルールを使用します。
        これは、実際に一致したセレクターではなく、引数の中で最大の詳細度を使うというものです。
      </p>
      <p>これはパフォーマンス上の理由です。
        複数の詳細度を持つセレクターが一致方法によって変化する場合、
        セレクターの一致処理が非常に複雑かつ遅くなります。</p>
      <p>では、なぜ<a class="css" data-link-type="maybe" href="#selectordef-" id="ref-for-selectordef-⑥">&amp;</a>を<a
          class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#matches-pseudo"
          id="ref-for-matches-pseudo⑤">:is()</a>ベースで定義するのでしょうか？
        一部の非ブラウザー実装では<span class="css" id="ref-for-matches-pseudo⑥">:is()</span>に展開せず、
        直接展開しています（多くは<span class="css" id="ref-for-matches-pseudo⑦">:is()</span>導入前から存在）。
        ただし、この方法には深刻な問題があり、
        一部のよくあるケースで<em>膨大な</em>セレクターが生成されてしまいます。</p>
      <pre class="lang-css highlight">.a1<c- p>,</c-> .a2<c- p>,</c-> .a3 <c- p>{</c->
  .b1<c- p>,</c-> .b3<c- p>,</c-> .b3 <c- p>{</c->
    .c1<c- p>,</c-> .c2<c- p>,</c-> .c3 <c- p>{</c->
      ...<c- p>;</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>}</c->

<c- c>/* 素直に展開すると */</c->
.a1 .b1 .c1<c- p>,</c->
.a1 .b1 .c2<c- p>,</c->
.a1 .b1 .c3<c- p>,</c->
.a1 .b2 .c1<c- p>,</c->
.a1 .b2 .c2<c- p>,</c->
.a1 .b2 .c3<c- p>,</c->
.a1 .b3 .c1<c- p>,</c->
.a1 .b3 .c2<c- p>,</c->
.a1 .b3 .c3<c- p>,</c->
.a2 .b1 .c1<c- p>,</c->
.a2 .b1 .c2<c- p>,</c->
.a2 .b1 .c3<c- p>,</c->
.a2 .b2 .c1<c- p>,</c->
.a2 .b2 .c2<c- p>,</c->
.a2 .b2 .c3<c- p>,</c->
.a2 .b3 .c1<c- p>,</c->
.a2 .b3 .c2<c- p>,</c->
.a2 .b3 .c3<c- p>,</c->
.a3 .b1 .c1<c- p>,</c->
.a3 .b1 .c2<c- p>,</c->
.a3 .b1 .c3<c- p>,</c->
.a3 .b2 .c1<c- p>,</c->
.a3 .b2 .c2<c- p>,</c->
.a3 .b2 .c3<c- p>,</c->
.a3 .b3 .c1<c- p>,</c->
.a3 .b3 .c2<c- p>,</c->
.a3 .b3 .c3 <c- p>{</c->...<c- p>}</c->
</pre>
      <p>このように、3段階の入れ子で各リストに3つずつセレクターがあると、27個の展開セレクターが生成されます。
        リストや入れ子レベルを増やしたり、規則を複雑にすると、
        小さな規則がメガバイト級のセレクター（あるいはもっと膨大な量）に膨れ上がることがあります。</p>
      <p>一部CSSツールは最悪のケースを避けるため、いくつかの組み合わせをヒューリスティックに省くことがありますが、
        これはUA（ブラウザー）では選択できません。</p>
      <p><a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#matches-pseudo"
          id="ref-for-matches-pseudo⑧">:is()</a>で展開することで、この問題を完全に回避できます。
        詳細度の実用性が多少下がるものの、合理的なトレードオフと判断されました。</p>
    </details>
    <p><a data-link-type="dfn" href="#nesting-selector" id="ref-for-nesting-selector①⓪">入れ子セレクター</a>は
      <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#compound"
        id="ref-for-compound">複合セレクター</a>内のどこでも使えます。
      <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#type-selector"
        id="ref-for-type-selector①">型セレクター</a>の前でも使えます。
      <span id="ref-for-compound①">複合セレクター</span>の通常の並び順の制約を破ることができます。
    </p>
    <div class="example" id="example-3d40c7b0">
      <a class="self-link" href="#example-3d40c7b0"></a> 例えば、<span class="css">&amp;div</span>は有効な入れ子セレクターであり、
      「親規則で一致したもののうち、div要素のみ」を意味します。
      <p>同じ意味で<span class="css">div&amp;</span>とも書けますが、
        これは<a data-link-type="dfn" href="#nested-style-rule"
          id="ref-for-nested-style-rule①⑤">入れ子スタイル規則</a>の先頭としては無効ですが、セレクターの途中なら使用可能です。</p>
    </div>
    <h2 class="heading settled" data-level="4" id="cssom"><span class="secno">4. </span><span
        class="content">CSSOM</span><a class="self-link" href="#cssom"></a></h2>
    <h3 class="heading settled" data-level="4.1" id="cssom-style"><span class="secno">4.1. </span><span
        class="content"><code
          class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule①">CSSStyleRule</a></code>への修正</span><a
        class="self-link" href="#cssom-style"></a></h3>
    <p>CSSスタイル規則は入れ子規則を持てるようになります：</p>
    <pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule②"><c- g>CSSStyleRule</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssrulelist" id="ref-for-cssrulelist"><c- n>CSSRuleList</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="CSSRuleList" href="#dom-cssstylerule-cssrules" id="ref-for-dom-cssstylerule-cssrules"><c- g>cssRules</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="method" href="#dom-cssstylerule-insertrule" id="ref-for-dom-cssstylerule-insertrule"><c- g>insertRule</c-></a>(<a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssomstring" id="ref-for-cssomstring"><c- n>CSSOMString</c-></a> <dfn class="idl-code" data-dfn-for="CSSStyleRule/insertRule(rule, index), CSSStyleRule/insertRule(rule)" data-dfn-type="argument" data-export id="dom-cssstylerule-insertrule-rule-index-rule"><code><c- g>rule</c-></code><a class="self-link" href="#dom-cssstylerule-insertrule-rule-index-rule"></a></dfn>, <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long①"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="idl-code" data-dfn-for="CSSStyleRule/insertRule(rule, index), CSSStyleRule/insertRule(rule)" data-dfn-type="argument" data-export id="dom-cssstylerule-insertrule-rule-index-index"><code><c- g>index</c-></code><a class="self-link" href="#dom-cssstylerule-insertrule-rule-index-index"></a></dfn> = 0);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-cssstylerule-deleterule" id="ref-for-dom-cssstylerule-deleterule"><c- g>deleteRule</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long②"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="idl-code" data-dfn-for="CSSStyleRule/deleteRule(index)" data-dfn-type="argument" data-export id="dom-cssstylerule-deleterule-index-index"><code><c- g>index</c-></code><a class="self-link" href="#dom-cssstylerule-deleterule-index-index"></a></dfn>);
};
</pre>
    <p><dfn class="dfn-paneled idl-code" data-dfn-for="CSSStyleRule" data-dfn-type="attribute" data-export
        id="dom-cssstylerule-cssrules"><code>cssRules</code></dfn>属性は、
      <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssrulelist"
          id="ref-for-cssrulelist①">CSSRuleList</a></code>
      オブジェクトを<a data-link-type="dfn" href="https://www.w3.org/TR/cssom-1/#concept-css-rule-child-css-rules"
        id="ref-for-concept-css-rule-child-css-rules">子CSS規則</a>として返さなければなりません。
    </p>
    <p><dfn class="dfn-paneled idl-code" data-dfn-for="CSSStyleRule" data-dfn-type="method" data-export
        data-lt="insertRule(rule, index)|insertRule(rule)"
        id="dom-cssstylerule-insertrule"><code>insertRule(<var>rule</var>, <var>index</var>)</code></dfn>メソッドは、
      <a data-link-type="dfn" href="https://www.w3.org/TR/cssom-1/#insert-a-css-rule"
        id="ref-for-insert-a-css-rule">CSS規則を挿入</a>を呼び出して<var>rule</var>を
      <a data-link-type="dfn" href="https://www.w3.org/TR/cssom-1/#concept-css-rule-child-css-rules"
        id="ref-for-concept-css-rule-child-css-rules①">子CSS規則</a>の<var>index</var>に挿入した結果を返さなければなりません。
    </p>
    <p><dfn class="dfn-paneled idl-code" data-dfn-for="CSSStyleRule" data-dfn-type="method" data-export
        id="dom-cssstylerule-deleterule"><code>deleteRule(<var>index</var>)</code></dfn>メソッドは、
      <a data-link-type="dfn" href="https://www.w3.org/TR/cssom-1/#remove-a-css-rule"
        id="ref-for-remove-a-css-rule">CSS規則の削除</a>を
      <a data-link-type="dfn" href="https://www.w3.org/TR/cssom-1/#concept-css-rule-child-css-rules"
        id="ref-for-concept-css-rule-child-css-rules②">子CSS規則</a>の<var>index</var>で呼び出さなければなりません。
    </p>
    <p class="note" role="note"><span class="marker">注:</span> 入れ子規則を含む<code
        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule③">CSSStyleRule</a></code>の
      シリアライズは
      <a data-link-type="biblio" href="#biblio-cssom" title="CSS Object Model (CSSOM)">[CSSOM]</a>で既に定義済みです。
      <a data-link-type="dfn" href="https://www.w3.org/TR/cssom-1/#serialize-a-css-rule"
        id="ref-for-serialize-a-css-rule">CSS規則のシリアライズ</a>を参照してください。
    </p>
    <p class="note" role="note"><span class="marker">注:</span> <a data-link-type="dfn" href="#nested-style-rule"
        id="ref-for-nested-style-rule①⑥">入れ子スタイル規則</a>のセレクター先頭制約は
      <a data-link-type="dfn" href="https://www.w3.org/TR/cssom-1/#insert-a-css-rule"
        id="ref-for-insert-a-css-rule①">CSS規則を挿入</a>の手順5「CSSによる制約」に該当します
      （<span id="ref-for-nested-style-rule①⑦">入れ子スタイル規則</span>を受けるものに適用、<code
        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule④">CSSStyleRule</a></code>自体だけでなく）。
    </p>
    <p> <code
        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#dom-cssstylerule-selectortext" id="ref-for-dom-cssstylerule-selectortext">selectorText</a></code>を設定する際、
      <code
        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule⑤">CSSStyleRule</a></code>が
      <a data-link-type="dfn" href="#nested-style-rule" id="ref-for-nested-style-rule①⑧">入れ子スタイル規則</a>で、
      返されるセレクター群の先頭が識別子または関数トークンで始まる場合は何もせずリターンします。
    </p>
    <p class="issue" id="issue-bc4d708a"><a class="self-link" href="#issue-bc4d708a"></a>
      上記段落はCSSOMアルゴリズムにインライン化される予定です。</p>
  </main>
  <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">適合性</span><a class="self-link"
      href="#w3c-conformance"></a></h2>
  <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content">文書の慣例</span><a class="self-link"
      href="#w3c-conventions"></a></h3>
  <p>適合要件は、記述的な断言とRFC 2119の用語の組み合わせで表現されます。規範的な部分で使われるキーワード「MUST」「MUST NOT」「REQUIRED」「SHALL」「SHALL NOT」「SHOULD」「SHOULD
    NOT」「RECOMMENDED」「MAY」「OPTIONAL」はRFC 2119の説明に従って解釈されます。
    ただし、読みやすさのために、この仕様書ではこれらの単語はすべて大文字では表記されません。</p>
  <p>この仕様のすべての文章は、非規範的と明示されたセクション、例、注記を除き、規範的です。<a data-link-type="biblio" href="#biblio-rfc2119"
      title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a></p>
  <p>この仕様の例は「for example」という言葉で始まるか、または<code>class="example"</code>で規範的な本文から区別されて提示されます。例：</p>
  <div class="example" id="w3c-example">
    <a class="self-link" href="#w3c-example"></a>
    <p>これは情報的な例の一例です。</p>
  </div>
  <p>情報的な注記は「Note」で始まり、<code>class="note"</code>で規範的な本文から区分されます。例：</p>
  <p class="note" role="note">注：これは情報的な注記です。</p>
  <p>助言は、特別な注意を促すために規範的なセクションとして強調され、他の規範的な本文と区分され、<code>&lt;strong class="advisement"</code>で示されます。例：<strong
      class="advisement">UAはアクセシブルな代替手段を提供しなければなりません。</strong></p>
  <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content">適合クラス</span><a class="self-link"
      href="#w3c-conformance-classes"></a></h3>
  <p>この仕様への適合性は、3つの適合クラスについて定義されます：</p>
  <dl>
    <dt>style sheet
    <dd><a href="https://www.w3.org/TR/CSS21/conform.html#style-sheet">CSSスタイルシート</a>。
    <dt>renderer
    <dd><a
        href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>（ユーザーエージェント）：スタイルシートの意味を解釈し、スタイルシートを使用する文書をレンダリングするもの。
    <dt>authoring tool
    <dd><a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>（ユーザーエージェント）：スタイルシートを作成するもの。
  </dl>
  <p>スタイルシートは、このモジュールで定義された構文を使用するすべての文が、汎用CSS文法およびこのモジュールで定義された各機能の個別文法に従って有効であれば、本仕様に適合しています。</p>
  <p>
    レンダラーは、スタイルシートを適切な仕様に従って解釈することに加え、本仕様で定義されたすべての機能を正しくパースし、文書を適切にレンダリングすることで本仕様に適合します。ただし、デバイスの制限によりUAが文書を正しくレンダリングできない場合でも、UAが非適合となるわけではありません。（例えば、UAはモノクロモニターで色をレンダリングする必要はありません。）
  </p>
  <p>オーサリングツールは、汎用CSS文法およびこのモジュールの各機能の個別文法に従って構文的に正しいスタイルシートを出力し、このモジュールで説明されるスタイルシートのその他の適合要件を満たしている場合、本仕様に適合しています。</p>
  <h3 class="no-ref heading settled" id="w3c-partial"><span class="content">部分的な実装</span><a class="self-link"
      href="#w3c-partial"></a></h3>
  <p>
    著者が前方互換性のあるパース規則を利用してフォールバック値を割り当てられるように、CSSレンダラーは、サポートできないアットルール、プロパティ、プロパティ値、キーワード、およびその他の構文要素を<strong>無効</strong>として（<a
      href="https://www.w3.org/TR/CSS21/conform.html#ignore">適切に無視</a>）扱わなければなりません。特に、ユーザーエージェントは、単一の複数値プロパティ宣言において、サポートされていない構成値だけを選択的に無視し、サポートされている値だけを有効にしては<strong>なりません</strong>。いずれかの値が無効（サポートされていない値は必ず無効）とみなされる場合、CSSは宣言全体を無視することを要求します。
  </p>
  <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content">不安定および独自拡張機能の実装</span><a
      class="self-link" href="#w3c-conform-future-proofing"></a></h4>
  <p>将来の安定したCSS機能との衝突を避けるため、CSSWGは<a href="https://www.w3.org/TR/CSS/#future-proofing">ベストプラクティス</a>に従い、<a
      href="https://www.w3.org/TR/CSS/#unstable">不安定な機能</a>や<a
      href="https://www.w3.org/TR/CSS/#proprietary-extension">独自拡張</a>の実装を推奨しています。</p>
  <h3 class="no-ref heading settled" id="w3c-testing"><span class="content">非実験的な実装</span><a class="self-link"
      href="#w3c-testing"></a></h3>
  <p>仕様がCandidate Recommendation段階に達すると、非実験的な実装が可能となり、実装者は仕様に従って正しく実装できることを示せるCRレベルの機能について、接頭辞無しの実装を公開すべきです。</p>
  <p>
    CSSの実装間で相互運用性を確立・維持するため、CSSワーキンググループは非実験的なCSSレンダラーに対して、接頭辞無しのCSS機能を公開する前に、実装報告書（必要ならそのテストケースも）をW3Cに提出するよう求めています。W3Cに提出されたテストケースはCSSワーキンググループによるレビューや修正の対象となります。
  </p>
  <p>テストケースや実装報告書の提出方法については、CSSワーキンググループのウェブサイト<a
      href="https://www.w3.org/Style/CSS/Test/">https://www.w3.org/Style/CSS/Test/</a>で案内しています。
    質問は<a href="https://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>メーリングリストまで。
  </p>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
      href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本仕様で定義される用語</span><a
      class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
    <li><a href="#selectordef-">&amp;</a><span>、§3で</span>
    <li><a href="#dom-cssstylerule-cssrules">cssRules</a><span>、§4.1で</span>
    <li><a href="#dom-cssstylerule-deleterule">deleteRule(index)</a><span>、§4.1で</span>
    <li><a href="#dom-cssstylerule-insertrule">insertRule(rule)</a><span>、§4.1で</span>
    <li><a href="#dom-cssstylerule-insertrule">insertRule(rule, index)</a><span>、§4.1で</span>
    <li><a href="#nested-group-rules">nested group rules</a><span>、§2.2で</span>
    <li><a href="#nested-style-rule">nested style rule</a><span>、§2で</span>
    <li><a href="#nesting-selector">nesting selector</a><span>、§3で</span>
    <li><a href="#nested-style-rule">nesting style rule</a><span>、§2で</span>
  </ul>
  <aside class="dfn-panel" data-for="term-for-at-ruledef-layer">
    <a
      href="https://www.w3.org/TR/css-cascade-5/#at-ruledef-layer">https://www.w3.org/TR/css-cascade-5/#at-ruledef-layer</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-at-ruledef-layer">2.2. Nesting Other At-Rules</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-typedef-scope-end">
    <a
      href="https://www.w3.org/TR/css-cascade-6/#typedef-scope-end">https://www.w3.org/TR/css-cascade-6/#typedef-scope-end</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-typedef-scope-end">2.2.1.
          Nested @scope Rules</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-typedef-scope-start">
    <a
      href="https://www.w3.org/TR/css-cascade-6/#typedef-scope-start">https://www.w3.org/TR/css-cascade-6/#typedef-scope-start</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-typedef-scope-start">2.2.1.
          Nested @scope Rules</a> <a href="#ref-for-typedef-scope-start①">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-at-ruledef-scope">
    <a
      href="https://www.w3.org/TR/css-cascade-6/#at-ruledef-scope">https://www.w3.org/TR/css-cascade-6/#at-ruledef-scope</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-at-ruledef-scope">2.2. Nesting Other At-Rules</a>
      <li><a href="#ref-for-at-ruledef-scope①">2.2.1.
          Nested @scope Rules</a> <a href="#ref-for-at-ruledef-scope②">(2)</a> <a
          href="#ref-for-at-ruledef-scope③">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-propdef-color">
    <a href="https://www.w3.org/TR/css-color-4/#propdef-color">https://www.w3.org/TR/css-color-4/#propdef-color</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-propdef-color">2. Nesting Style Rules</a>
      <li><a href="#ref-for-propdef-color①">2.3. Mixing Nesting Rules and Declarations</a> <a
          href="#ref-for-propdef-color②">(2)</a> <a href="#ref-for-propdef-color③">(3)</a>
      <li><a href="#ref-for-propdef-color④">3. Nesting Selector: the &amp; selector</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-at-ruledef-media">
    <a
      href="https://www.w3.org/TR/css-conditional-3/#at-ruledef-media">https://www.w3.org/TR/css-conditional-3/#at-ruledef-media</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-at-ruledef-media">2.2. Nesting Other At-Rules</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-at-ruledef-supports">
    <a
      href="https://www.w3.org/TR/css-conditional-3/#at-ruledef-supports">https://www.w3.org/TR/css-conditional-3/#at-ruledef-supports</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-at-ruledef-supports">2.2. Nesting Other At-Rules</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-cssmediarule">
    <a
      href="https://www.w3.org/TR/css-conditional-3/#cssmediarule">https://www.w3.org/TR/css-conditional-3/#cssmediarule</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-cssmediarule">2.2. Nesting Other At-Rules</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-conditional-group-rule">
    <a
      href="https://www.w3.org/TR/css-conditional-3/#conditional-group-rule">https://www.w3.org/TR/css-conditional-3/#conditional-group-rule</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-conditional-group-rule">2.2. Nesting Other At-Rules</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-at-ruledef-container">
    <a
      href="https://www.w3.org/TR/css-contain-3/#at-ruledef-container">https://www.w3.org/TR/css-contain-3/#at-ruledef-container</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-at-ruledef-container">2.2. Nesting Other At-Rules</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-propdef-grid-auto-flow">
    <a
      href="https://www.w3.org/TR/css-grid-2/#propdef-grid-auto-flow">https://www.w3.org/TR/css-grid-2/#propdef-grid-auto-flow</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-propdef-grid-auto-flow">2.2. Nesting Other At-Rules</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-nested-conditional-group-rules">
    <a
      href="https://www.w3.org/TR/css-nesting-1/#nested-conditional-group-rules">https://www.w3.org/TR/css-nesting-1/#nested-conditional-group-rules</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-nested-conditional-group-rules">2.3. Mixing Nesting Rules and Declarations</a> <a
          href="#ref-for-nested-conditional-group-rules①">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-typedef-style-block">
    <a
      href="https://www.w3.org/TR/css-syntax-3/#typedef-style-block">https://www.w3.org/TR/css-syntax-3/#typedef-style-block</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-typedef-style-block">2.2. Nesting Other At-Rules</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-typedef-stylesheet">
    <a
      href="https://www.w3.org/TR/css-syntax-3/#typedef-stylesheet">https://www.w3.org/TR/css-syntax-3/#typedef-stylesheet</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-typedef-stylesheet">2.2. Nesting Other At-Rules</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-at-rule">
    <a href="https://www.w3.org/TR/css-syntax-3/#at-rule">https://www.w3.org/TR/css-syntax-3/#at-rule</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-at-rule">2.1. Syntax</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-declaration">
    <a href="https://www.w3.org/TR/css-syntax-3/#declaration">https://www.w3.org/TR/css-syntax-3/#declaration</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-declaration">2. Nesting Style Rules</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-style-rule">
    <a href="https://www.w3.org/TR/css-syntax-3/#style-rule">https://www.w3.org/TR/css-syntax-3/#style-rule</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-style-rule">2. Nesting Style Rules</a>
      <li><a href="#ref-for-style-rule①">2.1. Syntax</a>
      <li><a href="#ref-for-style-rule②">2.2. Nesting Other At-Rules</a> <a href="#ref-for-style-rule③">(2)</a> <a
          href="#ref-for-style-rule④">(3)</a> <a href="#ref-for-style-rule⑤">(4)</a> <a
          href="#ref-for-style-rule⑥">(5)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-valdef-caret-shape-bar">
    <a
      href="https://www.w3.org/TR/css-ui-4/#valdef-caret-shape-bar">https://www.w3.org/TR/css-ui-4/#valdef-caret-shape-bar</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-valdef-caret-shape-bar">2.1. Syntax</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-functional-notation">
    <a
      href="https://www.w3.org/TR/css-values-4/#functional-notation">https://www.w3.org/TR/css-values-4/#functional-notation</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-functional-notation">2. Nesting Style Rules</a>
      <li><a href="#ref-for-functional-notation①">2.1. Syntax</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-css-css-identifier">
    <a
      href="https://www.w3.org/TR/css-values-4/#css-css-identifier">https://www.w3.org/TR/css-values-4/#css-css-identifier</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-css-css-identifier">2. Nesting Style Rules</a> <a
          href="#ref-for-css-css-identifier①">(2)</a>
      <li><a href="#ref-for-css-css-identifier②">2.1. Syntax</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-cssomstring">
    <a href="https://www.w3.org/TR/cssom-1/#cssomstring">https://www.w3.org/TR/cssom-1/#cssomstring</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-cssomstring">4.1. Modifications to CSSStyleRule</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-cssrulelist">
    <a href="https://www.w3.org/TR/cssom-1/#cssrulelist">https://www.w3.org/TR/cssom-1/#cssrulelist</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-cssrulelist">4.1. Modifications to CSSStyleRule</a> <a href="#ref-for-cssrulelist①">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-cssstylerule">
    <a href="https://www.w3.org/TR/cssom-1/#cssstylerule">https://www.w3.org/TR/cssom-1/#cssstylerule</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-cssstylerule">2.2. Nesting Other At-Rules</a>
      <li><a href="#ref-for-cssstylerule①">4.1. Modifications to CSSStyleRule</a> <a
          href="#ref-for-cssstylerule②">(2)</a> <a href="#ref-for-cssstylerule③">(3)</a> <a
          href="#ref-for-cssstylerule④">(4)</a> <a href="#ref-for-cssstylerule⑤">(5)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-css-rule-child-css-rules">
    <a
      href="https://www.w3.org/TR/cssom-1/#concept-css-rule-child-css-rules">https://www.w3.org/TR/cssom-1/#concept-css-rule-child-css-rules</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-concept-css-rule-child-css-rules">4.1. Modifications to CSSStyleRule</a> <a
          href="#ref-for-concept-css-rule-child-css-rules①">(2)</a> <a
          href="#ref-for-concept-css-rule-child-css-rules②">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-cssstyledeclaration-declarations">
    <a
      href="https://www.w3.org/TR/cssom-1/#cssstyledeclaration-declarations">https://www.w3.org/TR/cssom-1/#cssstyledeclaration-declarations</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-cssstyledeclaration-declarations">2. Nesting Style Rules</a>
      <li><a href="#ref-for-cssstyledeclaration-declarations①">2.1. Syntax</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-insert-a-css-rule">
    <a href="https://www.w3.org/TR/cssom-1/#insert-a-css-rule">https://www.w3.org/TR/cssom-1/#insert-a-css-rule</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-insert-a-css-rule">4.1. Modifications to CSSStyleRule</a> <a
          href="#ref-for-insert-a-css-rule①">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-remove-a-css-rule">
    <a href="https://www.w3.org/TR/cssom-1/#remove-a-css-rule">https://www.w3.org/TR/cssom-1/#remove-a-css-rule</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-remove-a-css-rule">4.1. Modifications to CSSStyleRule</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-cssstylerule-selectortext">
    <a
      href="https://www.w3.org/TR/cssom-1/#dom-cssstylerule-selectortext">https://www.w3.org/TR/cssom-1/#dom-cssstylerule-selectortext</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-dom-cssstylerule-selectortext">4.1. Modifications to CSSStyleRule</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-serialize-a-css-rule">
    <a
      href="https://www.w3.org/TR/cssom-1/#serialize-a-css-rule">https://www.w3.org/TR/cssom-1/#serialize-a-css-rule</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-serialize-a-css-rule">4.1. Modifications to CSSStyleRule</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-the-div-element">
    <a
      href="https://html.spec.whatwg.org/multipage/grouping-content.html#the-div-element">https://html.spec.whatwg.org/multipage/grouping-content.html#the-div-element</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-the-div-element">3. Nesting Selector: the &amp; selector</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-matches-pseudo">
    <a href="https://www.w3.org/TR/selectors-4/#matches-pseudo">https://www.w3.org/TR/selectors-4/#matches-pseudo</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-matches-pseudo">3. Nesting Selector: the &amp; selector</a> <a
          href="#ref-for-matches-pseudo①">(2)</a> <a href="#ref-for-matches-pseudo②">(3)</a> <a
          href="#ref-for-matches-pseudo③">(4)</a> <a href="#ref-for-matches-pseudo④">(5)</a> <a
          href="#ref-for-matches-pseudo⑤">(6)</a> <a href="#ref-for-matches-pseudo⑥">(7)</a> <a
          href="#ref-for-matches-pseudo⑦">(8)</a> <a href="#ref-for-matches-pseudo⑧">(9)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-scope-pseudo">
    <a href="https://www.w3.org/TR/selectors-4/#scope-pseudo">https://www.w3.org/TR/selectors-4/#scope-pseudo</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-scope-pseudo">3. Nesting Selector: the &amp; selector</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-where-pseudo">
    <a href="https://www.w3.org/TR/selectors-4/#where-pseudo">https://www.w3.org/TR/selectors-4/#where-pseudo</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-where-pseudo">2.3. Mixing Nesting Rules and Declarations</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-typedef-relative-selector-list">
    <a
      href="https://www.w3.org/TR/selectors-4/#typedef-relative-selector-list">https://www.w3.org/TR/selectors-4/#typedef-relative-selector-list</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-typedef-relative-selector-list">2.1. Syntax</a> <a
          href="#ref-for-typedef-relative-selector-list①">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-typedef-selector-list">
    <a
      href="https://www.w3.org/TR/selectors-4/#typedef-selector-list">https://www.w3.org/TR/selectors-4/#typedef-selector-list</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-typedef-selector-list">2.1. Syntax</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-selector-combinator">
    <a
      href="https://www.w3.org/TR/selectors-4/#selector-combinator">https://www.w3.org/TR/selectors-4/#selector-combinator</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-selector-combinator">2.1. Syntax</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-compound">
    <a href="https://www.w3.org/TR/selectors-4/#compound">https://www.w3.org/TR/selectors-4/#compound</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-compound">3. Nesting Selector: the &amp; selector</a> <a href="#ref-for-compound①">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-relative-selector">
    <a
      href="https://www.w3.org/TR/selectors-4/#relative-selector">https://www.w3.org/TR/selectors-4/#relative-selector</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-relative-selector">2. Nesting Style Rules</a> <a href="#ref-for-relative-selector①">(2)</a>
      <li><a href="#ref-for-relative-selector②">2.1. Syntax</a> <a href="#ref-for-relative-selector③">(2)</a> <a
          href="#ref-for-relative-selector④">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-selector">
    <a href="https://www.w3.org/TR/selectors-4/#selector">https://www.w3.org/TR/selectors-4/#selector</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-selector">2. Nesting Style Rules</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-simple">
    <a href="https://www.w3.org/TR/selectors-4/#simple">https://www.w3.org/TR/selectors-4/#simple</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-simple">2.1. Syntax</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-specificity">
    <a href="https://www.w3.org/TR/selectors-4/#specificity">https://www.w3.org/TR/selectors-4/#specificity</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-specificity">3. Nesting Selector: the &amp; selector</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-type-selector">
    <a href="https://www.w3.org/TR/selectors-4/#type-selector">https://www.w3.org/TR/selectors-4/#type-selector</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-type-selector">2. Nesting Style Rules</a>
      <li><a href="#ref-for-type-selector①">3. Nesting Selector: the &amp; selector</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-SameObject">
    <a href="https://webidl.spec.whatwg.org/#SameObject">https://webidl.spec.whatwg.org/#SameObject</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-SameObject">4.1. Modifications to CSSStyleRule</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-undefined">
    <a href="https://webidl.spec.whatwg.org/#idl-undefined">https://webidl.spec.whatwg.org/#idl-undefined</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-idl-undefined">4.1. Modifications to CSSStyleRule</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-unsigned-long">
    <a href="https://webidl.spec.whatwg.org/#idl-unsigned-long">https://webidl.spec.whatwg.org/#idl-unsigned-long</a><b>Referenced
      in:</b>
    <ul>
      <li><a href="#ref-for-idl-unsigned-long">4.1. Modifications to CSSStyleRule</a> <a
          href="#ref-for-idl-unsigned-long①">(2)</a> <a href="#ref-for-idl-unsigned-long②">(3)</a>
    </ul>
  </aside>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">参照によって定義される用語</span><a
      class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
    <li>
      <a data-link-type="biblio">[CSS-CASCADE-5]</a> は次の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="term-for-at-ruledef-layer">@layer</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-CASCADE-6]</a> は次の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="term-for-typedef-scope-end">&lt;scope-end></span>
        <li><span class="dfn-paneled" id="term-for-typedef-scope-start">&lt;scope-start></span>
        <li><span class="dfn-paneled" id="term-for-at-ruledef-scope">@scope</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-COLOR-4]</a> は次の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="term-for-propdef-color">color</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-CONDITIONAL-3]</a> は次の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="term-for-at-ruledef-media">@media</span>
        <li><span class="dfn-paneled" id="term-for-at-ruledef-supports">@supports</span>
        <li><span class="dfn-paneled" id="term-for-cssmediarule">CSSMediaRule</span>
        <li><span class="dfn-paneled" id="term-for-conditional-group-rule">conditional group rule</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-CONTAIN-3]</a> は次の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="term-for-at-ruledef-container">@container</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-GRID-2]</a> は次の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="term-for-propdef-grid-auto-flow">grid-auto-flow</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-NESTING-1]</a> は次の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="term-for-nested-conditional-group-rules">nested conditional group rules</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-SYNTAX-3]</a> は次の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="term-for-typedef-style-block">&lt;style-block></span>
        <li><span class="dfn-paneled" id="term-for-typedef-stylesheet">&lt;stylesheet></span>
        <li><span class="dfn-paneled" id="term-for-at-rule">at-rule</span>
        <li><span class="dfn-paneled" id="term-for-declaration">declaration</span>
        <li><span class="dfn-paneled" id="term-for-style-rule">style rule</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-UI-4]</a> は次の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="term-for-valdef-caret-shape-bar">bar</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSS-VALUES-4]</a> は次の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="term-for-functional-notation">functional notation</span>
        <li><span class="dfn-paneled" id="term-for-css-css-identifier">identifier</span>
      </ul>
    <li>
      <a data-link-type="biblio">[CSSOM]</a> は次の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="term-for-cssomstring">CSSOMString</span>
        <li><span class="dfn-paneled" id="term-for-cssrulelist">CSSRuleList</span>
        <li><span class="dfn-paneled" id="term-for-cssstylerule">CSSStyleRule</span>
        <li><span class="dfn-paneled" id="term-for-concept-css-rule-child-css-rules">child css rules</span>
        <li><span class="dfn-paneled" id="term-for-cssstyledeclaration-declarations">declarations</span>
        <li><span class="dfn-paneled" id="term-for-insert-a-css-rule">insert a css rule</span>
        <li><span class="dfn-paneled" id="term-for-remove-a-css-rule">remove a css rule</span>
        <li><span class="dfn-paneled" id="term-for-dom-cssstylerule-selectortext">selectorText</span>
        <li><span class="dfn-paneled" id="term-for-serialize-a-css-rule">serialize a css rule</span>
      </ul>
    <li>
      <a data-link-type="biblio">[HTML]</a> は次の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="term-for-the-div-element">div</span>
      </ul>
    <li>
      <a data-link-type="biblio">[SELECTORS4]</a> は次の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="term-for-matches-pseudo">:is()</span>
        <li><span class="dfn-paneled" id="term-for-scope-pseudo">:scope</span>
        <li><span class="dfn-paneled" id="term-for-where-pseudo">:where()</span>
        <li><span class="dfn-paneled" id="term-for-typedef-relative-selector-list">&lt;relative-selector-list></span>
        <li><span class="dfn-paneled" id="term-for-typedef-selector-list">&lt;selector-list></span>
        <li><span class="dfn-paneled" id="term-for-selector-combinator">combinator</span>
        <li><span class="dfn-paneled" id="term-for-compound">compound selector</span>
        <li><span class="dfn-paneled" id="term-for-relative-selector">relative selector</span>
        <li><span class="dfn-paneled" id="term-for-selector">selector</span>
        <li><span class="dfn-paneled" id="term-for-simple">simple selector</span>
        <li><span class="dfn-paneled" id="term-for-specificity">specificity</span>
        <li><span class="dfn-paneled" id="term-for-type-selector">type selector</span>
      </ul>
    <li>
      <a data-link-type="biblio">[WEBIDL]</a> は次の用語を定義しています:
      <ul>
        <li><span class="dfn-paneled" id="term-for-SameObject">SameObject</span>
        <li><span class="dfn-paneled" id="term-for-idl-undefined">undefined</span>
        <li><span class="dfn-paneled" id="term-for-idl-unsigned-long">unsigned long</span>
      </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
      href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">規範的参考文献</span><a class="self-link"
      href="#normative"></a></h3>
  <dl>
    <dt id="biblio-css-cascade-4">[CSS-CASCADE-4]
    <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-cascade-4/"><cite>CSSカスケードと継承
          レベル4</cite></a>。2022年1月13日。CR。URL: <a
        href="https://www.w3.org/TR/css-cascade-4/">https://www.w3.org/TR/css-cascade-4/</a>
    <dt id="biblio-css-cascade-6">[CSS-CASCADE-6]
    <dd>Elika Etemad; Miriam Suzanne; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-cascade-6/"><cite>CSSカスケードと継承
          レベル6</cite></a>。2021年12月21日。WD。URL: <a
        href="https://www.w3.org/TR/css-cascade-6/">https://www.w3.org/TR/css-cascade-6/</a>
    <dt id="biblio-css-color-4">[CSS-COLOR-4]
    <dd>Tab Atkins Jr.; Chris Lilley; Lea Verou. <a href="https://www.w3.org/TR/css-color-4/"><cite>CSSカラーモジュール
          レベル4</cite></a>。2022年11月1日。CR。URL: <a
        href="https://www.w3.org/TR/css-color-4/">https://www.w3.org/TR/css-color-4/</a>
    <dt id="biblio-css-nesting-1">[CSS-NESTING-1]
    <dd>Tab Atkins Jr.; Adam Argyle. <a
        href="https://www.w3.org/TR/css-nesting-1/"><cite>CSSネスティングモジュール</cite></a>。2021年8月31日。WD。URL: <a
        href="https://www.w3.org/TR/css-nesting-1/">https://www.w3.org/TR/css-nesting-1/</a>
    <dt id="biblio-css-syntax-3">[CSS-SYNTAX-3]
    <dd>Tab Atkins Jr.; Simon Sapin. <a href="https://www.w3.org/TR/css-syntax-3/"><cite>CSS構文モジュール
          レベル3</cite></a>。2021年12月24日。CR。URL: <a
        href="https://www.w3.org/TR/css-syntax-3/">https://www.w3.org/TR/css-syntax-3/</a>
    <dt id="biblio-css-values-4">[CSS-VALUES-4]
    <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-4/"><cite>CSS値と単位モジュール
          レベル4</cite></a>。2022年10月19日。WD。URL: <a
        href="https://www.w3.org/TR/css-values-4/">https://www.w3.org/TR/css-values-4/</a>
    <dt id="biblio-css21">[CSS21]
    <dd>Bert Bos; 他. <a href="https://www.w3.org/TR/CSS21/"><cite>カスケーディング・スタイル・シート レベル2改訂1 (CSS 2.1)
          仕様書</cite></a>。2011年6月7日。REC。URL: <a href="https://www.w3.org/TR/CSS21/">https://www.w3.org/TR/CSS21/</a>
    <dt id="biblio-cssom">[CSSOM]
    <dd>Daniel Glazman; Emilio Cobos Álvarez. <a href="https://www.w3.org/TR/cssom-1/"><cite>CSSオブジェクトモデル
          (CSSOM)</cite></a>。2021年8月26日。WD。URL: <a
        href="https://www.w3.org/TR/cssom-1/">https://www.w3.org/TR/cssom-1/</a>
    <dt id="biblio-rfc2119">[RFC2119]
    <dd>S. Bradner. <a
        href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>RFCで要求レベルを示すキーワード</cite></a>。1997年3月。Best Current
      Practice。URL: <a
        href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
    <dt id="biblio-selectors4">[SELECTORS4]
    <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/selectors-4/"><cite>セレクター
          レベル4</cite></a>。2022年11月11日。WD。URL: <a
        href="https://www.w3.org/TR/selectors-4/">https://www.w3.org/TR/selectors-4/</a>
    <dt id="biblio-webidl">[WEBIDL]
    <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>。Living
      Standard。URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">参考情報</span><a class="self-link"
      href="#informative"></a></h3>
  <dl>
    <dt id="biblio-css-cascade-5">[CSS-CASCADE-5]
    <dd>Elika Etemad; Miriam Suzanne; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-cascade-5/"><cite>CSSカスケードと継承
          レベル5</cite></a>。2022年1月13日。CR。URL: <a
        href="https://www.w3.org/TR/css-cascade-5/">https://www.w3.org/TR/css-cascade-5/</a>
    <dt id="biblio-css-color-3">[CSS-COLOR-3]
    <dd>Tantek Çelik; Chris Lilley; David Baron. <a href="https://www.w3.org/TR/css-color-3/"><cite>CSSカラーモジュール
          レベル3</cite></a>。2022年1月18日。REC。URL: <a
        href="https://www.w3.org/TR/css-color-3/">https://www.w3.org/TR/css-color-3/</a>
    <dt id="biblio-css-conditional-3">[CSS-CONDITIONAL-3]
    <dd>David Baron; Elika Etemad; Chris Lilley. <a
        href="https://www.w3.org/TR/css-conditional-3/"><cite>CSS条件付きルールモジュール レベル3</cite></a>。2022年1月13日。CR。URL: <a
        href="https://www.w3.org/TR/css-conditional-3/">https://www.w3.org/TR/css-conditional-3/</a>
    <dt id="biblio-css-contain-3">[CSS-CONTAIN-3]
    <dd>Tab Atkins Jr.; Florian Rivoal; Miriam Suzanne. <a
        href="https://www.w3.org/TR/css-contain-3/"><cite>CSSコンテインメントモジュール レベル3</cite></a>。2022年8月18日。WD。URL: <a
        href="https://www.w3.org/TR/css-contain-3/">https://www.w3.org/TR/css-contain-3/</a>
    <dt id="biblio-css-grid-2">[CSS-GRID-2]
    <dd>Tab Atkins Jr.; Elika Etemad; Rossen Atanassov. <a
        href="https://www.w3.org/TR/css-grid-2/"><cite>CSSグリッドレイアウトモジュール レベル2</cite></a>。2020年12月18日。CR。URL: <a
        href="https://www.w3.org/TR/css-grid-2/">https://www.w3.org/TR/css-grid-2/</a>
    <dt id="biblio-css-ui-4">[CSS-UI-4]
    <dd>Florian Rivoal. <a href="https://www.w3.org/TR/css-ui-4/"><cite>CSS基本ユーザーインターフェースモジュール
          レベル4</cite></a>。2021年3月16日。WD。URL: <a
        href="https://www.w3.org/TR/css-ui-4/">https://www.w3.org/TR/css-ui-4/</a>
    <dt id="biblio-html">[HTML]
    <dd>Anne van Kesteren; 他. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML標準</cite></a>。Living
      Standard。URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL索引</span><a class="self-link"
      href="#idl-index"></a></h2>
  <pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://www.w3.org/TR/cssom-1/#cssstylerule"><c- g>CSSStyleRule</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssrulelist"><c- n>CSSRuleList</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="CSSRuleList" href="#dom-cssstylerule-cssrules"><c- g>cssRules</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="method" href="#dom-cssstylerule-insertrule"><c- g>insertRule</c-></a>(<a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssomstring"><c- n>CSSOMString</c-></a> <a href="#dom-cssstylerule-insertrule-rule-index-rule"><code><c- g>rule</c-></code></a>, <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a href="#dom-cssstylerule-insertrule-rule-index-index"><code><c- g>index</c-></code></a> = 0);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-cssstylerule-deleterule"><c- g>deleteRule</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a href="#dom-cssstylerule-deleterule-index-index"><code><c- g>index</c-></code></a>);
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">課題索引</span><a class="self-link"
      href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
    <div class="issue"> CSSWGは現在、パースの先読みによる影響を検討しており、
      その結果として許可される構文を調整する可能性があります。<a href="https://github.com/w3c/csswg-drafts/issues/7961">[Issue
        #7961]</a> <a class="issue-return" href="#issue-8ec431e9" title="Jump to section">↵</a></div>
    <div class="issue"> この制限を緩和したいと考えていますが、
      <a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#matches-pseudo">:is()</a>と<a
        class="css" data-link-type="maybe" href="#selectordef-">&amp;</a>の両方を同時に変更する必要があります。
      どちらも意図して同じ基盤の仕組みを使っているためです。
      (<a href="https://github.com/w3c/csswg-drafts/issues/7433">Issue 7433</a>) <a class="issue-return"
        href="#issue-62c479a8" title="Jump to section">↵</a>
    </div>
    <div class="issue"> 上記の段落はCSSOMアルゴリズムにインライン化される予定です。<a class="issue-return" href="#issue-bc4d708a"
        title="Jump to section">↵</a></div>
  </div>
  <aside class="dfn-panel" data-for="nested-style-rule">
    <b><a href="#nested-style-rule">#nested-style-rule</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-nested-style-rule">2. Nesting Style Rules</a> <a href="#ref-for-nested-style-rule①">(2)</a>
      <li><a href="#ref-for-nested-style-rule②">2.1. Syntax</a> <a href="#ref-for-nested-style-rule③">(2)</a> <a
          href="#ref-for-nested-style-rule④">(3)</a> <a href="#ref-for-nested-style-rule⑤">(4)</a> <a
          href="#ref-for-nested-style-rule⑥">(5)</a>
      <li><a href="#ref-for-nested-style-rule⑦">2.2. Nesting Other At-Rules</a> <a
          href="#ref-for-nested-style-rule⑧">(2)</a> <a href="#ref-for-nested-style-rule⑨">(3)</a> <a
          href="#ref-for-nested-style-rule①⓪">(4)</a>
      <li><a href="#ref-for-nested-style-rule①①">2.3. Mixing Nesting Rules and Declarations</a> <a
          href="#ref-for-nested-style-rule①②">(2)</a>
      <li><a href="#ref-for-nested-style-rule①③">3. Nesting Selector: the &amp; selector</a> <a
          href="#ref-for-nested-style-rule①④">(2)</a> <a href="#ref-for-nested-style-rule①⑤">(3)</a>
      <li><a href="#ref-for-nested-style-rule①⑥">4.1. Modifications to CSSStyleRule</a> <a
          href="#ref-for-nested-style-rule①⑦">(2)</a> <a href="#ref-for-nested-style-rule①⑧">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="nested-group-rules">
    <b><a href="#nested-group-rules">#nested-group-rules</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-nested-group-rules">2.2. Nesting Other At-Rules</a> <a
          href="#ref-for-nested-group-rules①">(2)</a> <a href="#ref-for-nested-group-rules②">(3)</a>
      <li><a href="#ref-for-nested-group-rules③">2.2.1.
          Nested @scope Rules</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="nesting-selector">
    <b><a href="#nesting-selector">#nesting-selector</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-nesting-selector">2. Nesting Style Rules</a>
      <li><a href="#ref-for-nesting-selector①">2.1. Syntax</a> <a href="#ref-for-nesting-selector②">(2)</a>
      <li><a href="#ref-for-nesting-selector③">2.2. Nesting Other At-Rules</a>
      <li><a href="#ref-for-nesting-selector④">2.3. Mixing Nesting Rules and Declarations</a>
      <li><a href="#ref-for-nesting-selector⑤">3. Nesting Selector: the &amp; selector</a> <a
          href="#ref-for-nesting-selector⑥">(2)</a> <a href="#ref-for-nesting-selector⑦">(3)</a> <a
          href="#ref-for-nesting-selector⑧">(4)</a> <a href="#ref-for-nesting-selector⑨">(5)</a> <a
          href="#ref-for-nesting-selector①⓪">(6)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="selectordef-">
    <b><a href="#selectordef-">#selectordef-</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-selectordef-">2.2. Nesting Other At-Rules</a>
      <li><a href="#ref-for-selectordef-①">2.2.1.
          Nested @scope Rules</a>
      <li><a href="#ref-for-selectordef-②">3. Nesting Selector: the &amp; selector</a> <a
          href="#ref-for-selectordef-③">(2)</a> <a href="#ref-for-selectordef-④">(3)</a> <a
          href="#ref-for-selectordef-⑤">(4)</a> <a href="#ref-for-selectordef-⑥">(5)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-cssstylerule-cssrules">
    <b><a href="#dom-cssstylerule-cssrules">#dom-cssstylerule-cssrules</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-cssstylerule-cssrules">4.1. Modifications to CSSStyleRule</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-cssstylerule-insertrule">
    <b><a href="#dom-cssstylerule-insertrule">#dom-cssstylerule-insertrule</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-cssstylerule-insertrule">4.1. Modifications to CSSStyleRule</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-cssstylerule-deleterule">
    <b><a href="#dom-cssstylerule-deleterule">#dom-cssstylerule-deleterule</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-cssstylerule-deleterule">4.1. Modifications to CSSStyleRule</a>
    </ul>
  </aside>
  <script>/* script-dfn-panel */

    document.body.addEventListener("click", function (e) {
      var queryAll = function (sel) { return [].slice.call(document.querySelectorAll(sel)); }
      // Find the dfn element or panel, if any, that was clicked on.
      var el = e.target;
      var target;
      var hitALink = false;
      while (el.parentElement) {
        if (el.tagName == "A") {
          // Clicking on a link in a <dfn> shouldn't summon the panel
          hitALink = true;
        }
        if (el.classList.contains("dfn-paneled")) {
          target = "dfn";
          break;
        }
        if (el.classList.contains("dfn-panel")) {
          target = "dfn-panel";
          break;
        }
        el = el.parentElement;
      }
      if (target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function (el) {
          el.classList.remove("on");
          el.classList.remove("activated");
        });
      }
      if (target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if (dfnPanel) {
          dfnPanel.classList.add("on");
          var rect = el.getBoundingClientRect();
          dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
          dfnPanel.style.top = window.scrollY + rect.top + "px";
          var panelRect = dfnPanel.getBoundingClientRect();
          var panelWidth = panelRect.right - panelRect.left;
          if (panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
            // Reposition, because the panel is overflowing
            dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
          }
        } else {
          console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
      } else if (target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
      }

    });
  </script>
  <script src="https://htmlspecs.com/dropdown.js"></script>