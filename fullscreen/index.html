<!doctype html>
<html lang="ja-JP">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta content="#3c790a" name="theme-color">
    <meta content="light dark" name="color-scheme">
    <title>全画面 API 現行標準</title>
    <link crossorigin href="https://resources.whatwg.org/standard-shared-with-dev.css" rel="stylesheet">
    <link crossorigin href="https://resources.whatwg.org/standard.css" rel="stylesheet">
    <link crossorigin href="https://resources.whatwg.org/spec.css" rel="stylesheet">
    <link crossorigin href="https://resources.whatwg.org/logo-fullscreen.svg" rel="icon">
    <script crossorigin defer src="https://resources.whatwg.org/commit-snapshot-shortcut-key.js"></script>
    <meta content="Bikeshed version 7a96e07ec, updated Mon Jul 14 11:12:36 2025 -0700" name="generator">
    <meta content="dd2b0983dae0ab32584b87e6ad76e5ebb67a846c" name="revision">
    <style>
        /* Boilerplate: style-dfn-panel */
        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
            --dfnpanel-target-bg: #ffc;
            --dfnpanel-target-outline: orange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dfnpanel-bg: #222;
                --dfnpanel-text: var(--text);
                --dfnpanel-target-bg: #333;
                --dfnpanel-target-outline: silver;
            }
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel a:focus {
            outline: 5px auto Highlight;
            outline: 5px auto -webkit-focus-ring-color;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0 0 0 1em;
            list-style: none;
        }

        .dfn-panel li a {
            max-width: calc(300px - 1.5em - 1em);
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: 8px;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
            transition: left 1s ease-out, bottom 1s ease-out;
        }

        .dfn-panel .link-item:hover {
            text-decoration: underline;
        }

        .dfn-panel .link-item .copy-icon {
            opacity: 0;
        }

        .dfn-panel .link-item:hover .copy-icon,
        .dfn-panel .link-item .copy-icon:focus {
            opacity: 1;
        }

        .dfn-panel .copy-icon {
            display: inline-block;
            margin-right: 0.5em;
            width: 0.85em;
            height: 1em;
            border-radius: 3px;
            background-color: #ccc;
            cursor: pointer;
        }

        .dfn-panel .copy-icon .icon {
            width: 100%;
            height: 100%;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .dfn-panel .copy-icon .icon::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 1px solid black;
            background-color: #ccc;
            opacity: 0.25;
            transform: translate(3px, -3px);
        }

        .dfn-panel .copy-icon:active .icon::before {
            opacity: 1;
        }

        .dfn-paneled[role="button"] {
            cursor: help;
        }

        .highlighted {
            animation: target-fade 3s;
        }

        @keyframes target-fade {
            from {
                background-color: var(--dfnpanel-target-bg);
                outline: 5px solid var(--dfnpanel-target-outline);
            }

            to {
                color: var(--a-normal-text);
                background-color: transparent;
                outline: transparent;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-mdn-anno */
        :root {
            --mdn-bg: #EEE;
            --mdn-shadow: #999;
            --mdn-nosupport-text: #ccc;
            --mdn-pass: green;
            --mdn-fail: red;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --mdn-bg: #222;
                --mdn-shadow: #444;
                --mdn-nosupport-text: #666;
                --mdn-pass: #690;
                --mdn-fail: #d22;
            }
        }

        .mdn-anno {
            background: var(--mdn-bg, #EEE);
            border-radius: .25em;
            box-shadow: 0 0 3px var(--mdn-shadow, #999);
            color: var(--text, black);
            font: 1em sans-serif;
            hyphens: none;
            max-width: min-content;
            overflow: hidden;
            padding: 0.2em;
            position: absolute;
            right: 0.3em;
            top: auto;
            white-space: nowrap;
            word-wrap: normal;
            z-index: 8;
        }

        .mdn-anno.unpositioned {
            display: none;
        }

        .mdn-anno.overlapping-main {
            opacity: .2;
            transition: opacity .1s;
        }

        .mdn-anno[open] {
            opacity: 1;
            z-index: 9;
            min-width: 9em;
        }

        .mdn-anno:hover {
            opacity: 1;
            outline: var(--text, black) 1px solid;
        }

        .mdn-anno>summary {
            font-weight: normal;
            text-align: right;
            cursor: pointer;
            display: block;
        }

        .mdn-anno>summary>.less-than-two-engines-flag {
            color: var(--mdn-fail);
            padding-right: 2px;
        }

        .mdn-anno>summary>.all-engines-flag {
            color: var(--mdn-pass);
            padding-right: 2px;
        }

        .mdn-anno>summary>span {
            color: #fff;
            background-color: #000;
            font-weight: normal;
            font-family: zillaslab, Palatino, "Palatino Linotype", serif;
            padding: 2px 3px 0px 3px;
            line-height: 1.3em;
            vertical-align: top;
        }

        .mdn-anno>.feature {
            margin-top: 20px;
        }

        .mdn-anno>.feature:not(:first-of-type) {
            border-top: 1px solid #999;
            margin-top: 6px;
            padding-top: 2px;
        }

        .mdn-anno>.feature>.less-than-two-engines-text {
            color: var(--mdn-fail);
        }

        .mdn-anno>.feature>.all-engines-text {
            color: var(--mdn-pass);
        }

        .mdn-anno>.feature>p {
            font-size: .75em;
            margin-top: 6px;
            margin-bottom: 0;
        }

        .mdn-anno>.feature>p+p {
            margin-top: 3px;
        }

        .mdn-anno>.feature>.support {
            display: block;
            font-size: 0.6em;
            margin: 0;
            padding: 0;
            margin-top: 2px;
        }

        .mdn-anno>.feature>.support+div {
            padding-top: 0.5em;
        }

        .mdn-anno>.feature>.support>hr {
            display: block;
            border: none;
            border-top: 1px dotted #999;
            padding: 3px 0px 0px 0px;
            margin: 2px 3px 0px 3px;
        }

        .mdn-anno>.feature>.support>hr::before {
            content: "";
        }

        .mdn-anno>.feature>.support>span {
            padding: 0.2em 0;
            display: block;
            display: table;
        }

        .mdn-anno>.feature>.support>span.no {
            color: var(--mdn-nosupport-text);
            filter: grayscale(100%);
        }

        .mdn-anno>.feature>.support>span.no::before {
            opacity: 0.5;
        }

        .mdn-anno>.feature>.support>span:first-of-type {
            padding-top: 0.5em;
        }

        .mdn-anno>.feature>.support>span>span {
            padding: 0 0.5em;
            display: table-cell;
        }

        .mdn-anno>.feature>.support>span>span:first-child {
            width: 100%;
        }

        .mdn-anno>.feature>.support>span>span:last-child {
            width: 100%;
            white-space: pre;
            padding: 0;
        }

        .mdn-anno>.feature>.support>span::before {
            content: ' ';
            display: table-cell;
            min-width: 1.5em;
            height: 1.5em;
            background: no-repeat center center;
            background-size: contain;
            text-align: right;
            font-size: 0.75em;
            font-weight: bold;
        }

        .mdn-anno>.feature>.support>.chrome_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
        }

        .mdn-anno>.feature>.support>.firefox_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
        }

        .mdn-anno>.feature>.support>.chrome::before {
            background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
        }

        .mdn-anno>.feature>.support>.edge_blink::before {
            background-image: url(https://resources.whatwg.org/browser-logos/edge.svg);
        }

        .mdn-anno>.feature>.support>.edge::before {
            background-image: url(https://resources.whatwg.org/browser-logos/edge_legacy.svg);
        }

        .mdn-anno>.feature>.support>.firefox::before {
            background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
        }

        .mdn-anno>.feature>.support>.ie::before {
            background-image: url(https://resources.whatwg.org/browser-logos/ie.png);
        }

        .mdn-anno>.feature>.support>.safari_ios::before {
            background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg);
        }

        .mdn-anno>.feature>.support>.nodejs::before {
            background-image: url(https://nodejs.org/favicon.ico);
        }

        .mdn-anno>.feature>.support>.opera_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
        }

        .mdn-anno>.feature>.support>.opera::before {
            background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
        }

        .mdn-anno>.feature>.support>.safari::before {
            background-image: url(https://resources.whatwg.org/browser-logos/safari.png);
        }

        .mdn-anno>.feature>.support>.samsunginternet_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/samsung.svg);
        }

        .mdn-anno>.feature>.support>.webview_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/android-webview.png);
        }

        .name-slug-mismatch {
            color: red;
        }

        .caniuse-status:hover {
            z-index: 9;
        }

        /* dt, li, .issue, .note, and .example are "position: relative", so to put annotation at right margin, must move to right of containing block */
        ;

        .h-entry:not(.status-LS) dt>.mdn-anno,
        .h-entry:not(.status-LS) li>.mdn-anno,
        .h-entry:not(.status-LS) .issue>.mdn-anno,
        .h-entry:not(.status-LS) .note>.mdn-anno,
        .h-entry:not(.status-LS) .example>.mdn-anno {
            right: -6.7em;
        }

        .h-entry p+.mdn-anno {
            margin-top: 0;
        }

        h2+.mdn-anno.after {
            margin: -48px 0 0 0;
        }

        h3+.mdn-anno.after {
            margin: -46px 0 0 0;
        }

        h4+.mdn-anno.after {
            margin: -42px 0 0 0;
        }

        h5+.mdn-anno.after {
            margin: -40px 0 0 0;
        }

        h6+.mdn-anno.after {
            margin: -40px 0 0 0;
        }
    </style>
    <style>
        /* Boilerplate: style-ref-hints */
        :root {
            --ref-hint-bg: #ddd;
            --ref-hint-text: var(--text);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --ref-hint-bg: #222;
                --ref-hint-text: var(--text);
            }
        }

        .ref-hint {
            display: inline-block;
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.5em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--ref-hint-bg);
            color: var(--ref-hint-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .ref-hint * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .ref-hint ul {
            padding: 0 0 0 1em;
            list-style: none;
        }
    </style>
    <style>
        /* Boilerplate: style-var-click-highlighting */
        /*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)

For darkmode:
0 = oklab(50%   0%  108%)
1 = oklab(50% -51%   51%)
2 = oklab(50% -64%  -20%)
3 = oklab(50%   6%   19%)
4 = oklab(50% -12%  -64%)
5 = oklab(50%  44%  -19%)  
6 = oklab(50% 102%   38%)
*/

        [data-algorithm] var {
            cursor: pointer;
        }

        var[data-var-color] {
            background-color: var(--var-bg);
            box-shadow: 0 0 0 2px var(--var-bg);
        }

        var[data-var-color] {
            --var-bg: #F4D200;
        }

        var[data-var-color="1"] {
            --var-bg: #FF87A2;
        }

        var[data-var-color="2"] {
            --var-bg: #96E885;
        }

        var[data-var-color="3"] {
            --var-bg: #3EEED2;
        }

        var[data-var-color="4"] {
            --var-bg: #EACFB6;
        }

        var[data-var-color="5"] {
            --var-bg: #82DDFF;
        }

        var[data-var-color="6"] {
            --var-vg: #FFBCF2;
        }

        @media (prefers-color-scheme: dark) {
            var[data-var-color] {
                --var-bg: #bc1a00;
            }

            var[data-var-color="1"] {
                --var-bg: #007f00;
            }

            var[data-var-color="2"] {
                --var-bg: #008698;
            }

            var[data-var-color="3"] {
                --var-bg: #7f5b2b;
            }

            var[data-var-color="4"] {
                --var-bg: #004df3;
            }

            var[data-var-color="5"] {
                --var-bg: #a1248a;
            }

            var[data-var-color="6"] {
                --var-vg: #ff0000;
            }
        }
    </style>

<body class="h-entry status-LS">
    <div class="head">

        <a class="logo" href="https://whatwg.org/">
            <img alt="WHATWG" class="darkmode-aware" crossorigin height="100"
                src="https://resources.whatwg.org/logo-fullscreen.svg">
        </a>

        <hgroup>
            <h1 class="p-name no-ref" id="title">全画面 API</h1>
            <p id="subtitle">現行標準 — 最終更新 <time class="dt-updated" datetime="2025-08-12">2025年8月12日</time>
            </p>
        </hgroup>
        <div data-fill-with="spec-metadata">
            <dl>
                <dt>参加方法:
                <dd><a href="https://github.com/whatwg/fullscreen">GitHub whatwg/fullscreen</a> (<a
                        href="https://github.com/whatwg/fullscreen/issues/new/choose">新規 issue</a>, <a
                        href="https://github.com/whatwg/fullscreen/issues">既存の issue</a>)
                <dd><a href="https://whatwg.org/chat">Matrix でチャット</a>
                <dt>コミット履歴:
                <dd><a href="https://github.com/whatwg/fullscreen/commits">GitHub whatwg/fullscreen/commits</a>
                <dd><a href="https://fullscreen.spec.whatwg.org/commit-snapshots/75c0c1d1b39ad73604344b5ecc657c1c9607c522/"
                        id="commit-snapshot-link">このコミット時点のスナップショット</a>
                <dd><a href="https://twitter.com/fullscreenapi">@fullscreenapi</a>
                <dt>テスト:
                <dd><a href="https://github.com/web-platform-tests/wpt/tree/master/fullscreen">web-platform-tests
                        fullscreen/</a> (<a
                        href="https://github.com/web-platform-tests/wpt/labels/fullscreen">進行中の作業</a>)
                <dt>翻訳 <small>（参考情報）</small>:
                <dd><span title="Japanese"><a href="https://triple-underscore.github.io/fullscreen-ja.html"
                            hreflang="ja" lang="ja" rel="alternate">日本語</a></span>
                <dd><span title="Simplified Chinese"><a href="https://htmlspecs.com/fullscreen/" hreflang="zh-hans"
                            lang="zh-hans" rel="alternate">简体中文</a></span>
                <dd><span title="Korean"><a href="https://ko.htmlspecs.com/fullscreen/" hreflang="ko" lang="ko"
                            rel="alternate">한국어</a></span>
            </dl>
        </div>
        <div data-fill-with="warning"></div>
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">概要</span></h2>
        <p>全画面 API 現行標準は、要素を全画面表示するための API を定義します。</p>
    </div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目次</h2>
        <ol class="toc" role="directory">
            <li><a href="#terminology"><span class="secno">1</span> <span class="content">用語</span></a>
            <li><a href="#model"><span class="secno">2</span> <span class="content">モデル</span></a>
            <li><a href="#api"><span class="secno">3</span> <span class="content">API</span></a>
            <li><a href="#ui"><span class="secno">4</span> <span class="content">UI</span></a>
            <li>
                <a href="#rendering"><span class="secno">5</span> <span class="content">レンダリング</span></a>
                <ol class="toc">
                    <li><a href="#:fullscreen-pseudo-class"><span class="secno">5.1</span> <span
                                class="content"><code>:fullscreen</code> 疑似クラス</span></a>
                    <li><a href="#user-agent-level-style-sheet-defaults"><span class="secno">5.2</span> <span
                                class="content">ユーザーエージェントレベルのスタイルシートのデフォルト</span></a>
                </ol>
            <li><a href="#permissions-policy-integration"><span class="secno">6</span> <span class="content">Permissions
                        Policy
                        統合</span></a>
            <li><a href="#security-and-privacy-considerations"><span class="secno">7</span> <span
                        class="content">セキュリティとプライバシーに関する考慮事項</span></a>
            <li><a href="#old-links"><span class="secno"></span> <span class="content">過去にホストされていた定義</span></a>
            <li><a href="#acknowledgments"><span class="secno"></span> <span class="content">謝辞</span></a>
            <li><a href="#ipr"><span class="secno"></span> <span class="content">知的財産権</span></a>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">この仕様で定義されている用語</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">参照で定義されている用語</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">規範的参考文献</span></a>
                </ol>
            <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL 索引</span></a>
        </ol>
    </nav>
    <main>
        <h2 class="heading settled" data-level="1" id="terminology"><span class="secno">1. </span><span
                class="content">用語</span><a class="self-link" href="#terminology"></a></h2>
        <p>この仕様は Infra Standard に依存します。<a data-link-type="biblio" href="#biblio-infra"
                title="Infra Standard">[INFRA]</a>

        </p>
        <p>この仕様で使用されるほとんどの用語は、CSS、DOM、HTML、Web IDL からのものです。<a data-link-type="biblio" href="#biblio-css"
                title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS]</a>
            <a data-link-type="biblio" href="#biblio-dom" title="DOM Standard">[DOM]</a> <a data-link-type="biblio"
                href="#biblio-html" title="HTML Standard">[HTML]</a> <a data-link-type="biblio" href="#biblio-webidl"
                title="Web IDL Standard">[WEBIDL]</a>



        </p>
        <h2 class="heading settled" data-level="2" id="model"><span class="secno">2. </span><span
                class="content">モデル</span><a class="self-link" href="#model"></a></h2>
        <p>すべての <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element"
                id="ref-for-concept-element">要素</a>には、<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="fullscreen-flag">fullscreen flag</dfn> が関連付けられています。特に指定がない限り、これは未設定です。

        </p>
        <p>
            すべての
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element">iframe</a></code>
            <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element"
                id="ref-for-concept-element①">要素</a>には、<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="iframe-fullscreen-flag">iframe fullscreen flag</dfn> が関連付けられています。特に指定がない限り、これは未設定です。

        </p>
        <p>すべての <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                id="ref-for-concept-document">文書</a>には、<dfn class="dfn-paneled" data-dfn-type="dfn" data-export
                id="fullscreen-element">fullscreen element</dfn> が関連付けられています。
            <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element">fullscreen element</a> は、
            <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                id="ref-for-concept-document①">文書</a> の
            <a data-link-type="dfn" href="https://drafts.csswg.org/css-position-4/#document-top-layer"
                id="ref-for-document-top-layer">top layer</a> において <a data-link-type="dfn" href="#fullscreen-flag"
                id="ref-for-fullscreen-flag">fullscreen flag</a> が設定されている最上位の <a data-link-type="dfn"
                href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element②">要素</a> です。該当しない場合は
            null です。

        </p>
        <p>すべての <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                id="ref-for-concept-document②">文書</a>には、<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="list-of-pending-fullscreen-events">list of pending fullscreen events</dfn> が関連付けられています。
            これは (<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string">string</a>, <a
                data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element"
                id="ref-for-concept-element③">要素</a>) からなる
            <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple" id="ref-for-tuple">タプル</a> の <a
                data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set"
                id="ref-for-ordered-set">順序付き集合</a> です。初期状態は空です。

        </p>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fullscreen-an-element"><var>element</var> を
                fullscreen にする</dfn>手順:

        </p>
        <ol>
            <li>
                <p><var>hideUntil</var> に、<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/popover.html#topmost-popover-ancestor"
                        id="ref-for-topmost-popover-ancestor">topmost popover ancestor</a> に <var>element</var>, null,
                    false を渡して実行した結果を設定する。

                </p>
            <li>
                <p><var>hideUntil</var> が null の場合、<var>element</var> の <span>node document</span> を
                    <var>hideUntil</var> に設定する。

                </p>
            <li>
                <p><a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/popover.html#hide-all-popovers-until"
                        id="ref-for-hide-all-popovers-until">hide all popovers until</a> に <var>hideUntil</var>, false,
                    true を渡して実行する。

                </p>
            <li>
                <p><var>element</var> の <a data-link-type="dfn" href="#fullscreen-flag"
                        id="ref-for-fullscreen-flag①">fullscreen flag</a> を設定する。

                </p>
            <li>
                <p><a data-link-type="dfn"
                        href="https://drafts.csswg.org/css-position-4/#remove-an-element-from-the-top-layer-immediately"
                        id="ref-for-remove-an-element-from-the-top-layer-immediately">Remove from the top layer
                        immediately</a> に <var>element</var> を渡して実行する。

                </p>
            <li><a data-link-type="dfn" href="https://drafts.csswg.org/css-position-4/#add-an-element-to-the-top-layer"
                    id="ref-for-add-an-element-to-the-top-layer">Add to the top layer</a> に <var>element</var> を渡して実行する。

        </ol>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="unfullscreen-an-element"><var>element</var> の
                fullscreen を解除する</dfn>には、
            <var>element</var> の <a data-link-type="dfn" href="#fullscreen-flag"
                id="ref-for-fullscreen-flag②">fullscreen flag</a> および
            <a data-link-type="dfn" href="#iframe-fullscreen-flag" id="ref-for-iframe-fullscreen-flag">iframe fullscreen
                flag</a>（存在する場合）を未設定にし、
            <a data-link-type="dfn"
                href="https://drafts.csswg.org/css-position-4/#remove-an-element-from-the-top-layer-immediately"
                id="ref-for-remove-an-element-from-the-top-layer-immediately①">remove from the top layer immediately</a>
            に <var>element</var> を渡して実行する。

        </p>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="unfullscreen-a-document"><var>document</var> の
                fullscreen を解除する</dfn>には、
            <var>document</var> の <a data-link-type="dfn"
                href="https://drafts.csswg.org/css-position-4/#document-top-layer" id="ref-for-document-top-layer①">top
                layer</a> 内で <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag③">fullscreen
                flag</a> が設定されているすべての <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element"
                id="ref-for-concept-element④">要素</a> に対して
            <a data-link-type="dfn" href="#unfullscreen-an-element"
                id="ref-for-unfullscreen-an-element">unfullscreen</a> を実行する。

        </p>
        <hr>
        <div class="algorithm" data-algorithm="fully exit fullscreen">
            <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fully-exit-fullscreen">fully exit
                    fullscreen</dfn> を
                <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                    id="ref-for-concept-document③">document</a> <var>document</var> に対して実行するには、次の手順を実行する:

            </p>
            <ol>
                <li>
                    <p><var>document</var> の <a data-link-type="dfn" href="#fullscreen-element"
                            id="ref-for-fullscreen-element①">fullscreen element</a> が null なら、これ以降の手順を終了する。

                    </p>
                <li>
                    <p><var>document</var> の <a data-link-type="dfn"
                            href="https://drafts.csswg.org/css-position-4/#document-top-layer"
                            id="ref-for-document-top-layer②">top layer</a> 内で、<a data-link-type="dfn"
                            href="#fullscreen-flag" id="ref-for-fullscreen-flag④">fullscreen flag</a> が設定されている
                        <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element②">fullscreen
                            element</a> 以外の要素について
                        <a data-link-type="dfn" href="#unfullscreen-an-element"
                            id="ref-for-unfullscreen-an-element①">Unfullscreen elements</a> を実行する。

                    </p>
                <li>
                    <p><a data-link-type="dfn" href="#exit-fullscreen" id="ref-for-exit-fullscreen">Exit fullscreen</a>
                        <var>document</var>.
                    </p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="fullscreen removing steps">
            <p id="removing-steps"><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-remove-ext"
                    id="ref-for-concept-node-remove-ext">removing steps</a> が <var>removedNode</var>
                で実行されるときは、次の手順を実行する:

            </p>
            <ol>
                <li>
                    <p><var>document</var> に <var>removedNode</var> の <a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#concept-node-document"
                            id="ref-for-concept-node-document">node document</a> を設定する。

                    </p>
                <li>
                    <p><var>nodes</var> に <var>removedNode</var> の
                        <a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-descendant"
                            id="ref-for-concept-shadow-including-inclusive-descendant">shadow-including inclusive
                            descendants</a> のうち
                        <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag⑤">fullscreen
                            flag</a> が設定されているものを
                        <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-shadow-including-tree-order"
                            id="ref-for-concept-shadow-including-tree-order">shadow-including tree order</a> で取得する。

                    </p>
                <li>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                            id="ref-for-list-iterate">各</a> <var>node</var> について、次のとおり:

                    </p>
                    <ol>
                        <li>
                            <p><var>node</var> が <var>document</var> の <a data-link-type="dfn"
                                    href="#fullscreen-element" id="ref-for-fullscreen-element③">fullscreen element</a>
                                なら、
                                <a data-link-type="dfn" href="#exit-fullscreen" id="ref-for-exit-fullscreen①">exit
                                    fullscreen</a> <var>document</var> を実行する。

                            </p>
                        <li>
                            <p>それ以外の場合は、<a data-link-type="dfn" href="#unfullscreen-an-element"
                                    id="ref-for-unfullscreen-an-element②"><var>node</var> の fullscreen を解除する</a>。

                            </p>
                        <li>
                            <p><var>document</var> の <a data-link-type="dfn"
                                    href="https://drafts.csswg.org/css-position-4/#document-top-layer"
                                    id="ref-for-document-top-layer③">top layer</a> が <var>node</var> を
                                <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain"
                                    id="ref-for-list-contain">含む</a>場合、
                                <a data-link-type="dfn"
                                    href="https://drafts.csswg.org/css-position-4/#remove-an-element-from-the-top-layer-immediately"
                                    id="ref-for-remove-an-element-from-the-top-layer-immediately②">remove from the top
                                    layer immediately</a> に <var>node</var> を渡して実行する。

                            </p>
                            <p class="note" role="note">他の仕様でも <a data-link-type="dfn"
                                    href="https://drafts.csswg.org/css-position-4/#document-top-layer"
                                    id="ref-for-document-top-layer④">top layer</a> に要素を追加・削除できるため、
                                <var>node</var> が <var>document</var> の <a data-link-type="dfn"
                                    href="#fullscreen-element" id="ref-for-fullscreen-element④">fullscreen element</a>
                                でない場合もあります。
                                例えば <var>node</var> が開いている
                                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element" id="ref-for-the-dialog-element">dialog</a></code>
                                要素である場合などです。
                            </p>
                    </ol>
            </ol>
        </div>
        <p><a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/document-lifecycle.html#unloading-document-cleanup-steps"
                id="ref-for-unloading-document-cleanup-steps">unloading document cleanup steps</a> が <var>document</var>
            で実行されるとき、
            <a data-link-type="dfn" href="#fully-exit-fullscreen" id="ref-for-fully-exit-fullscreen">fully exit
                fullscreen</a> を <var>document</var> に実行する。

        </p>
        <hr>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fullscreen-is-supported">Fullscreen
                がサポートされる</dfn>のは、
            事前に設定されたユーザーの好み、安全上のリスク、またはプラットフォームの制限がない場合です。

        </p>
        <hr>
        <div class="algorithm" data-algorithm="run the fullscreen steps">
            <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="run-the-fullscreen-steps">run the
                    fullscreen steps</dfn> を
                <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                    id="ref-for-concept-document④">document</a>
                <var>document</var> に対して実行するには、次の手順を実行する:

            </p>
            <ol>
                <li>
                    <p><var>pendingEvents</var> に <var>document</var> の
                        <a data-link-type="dfn" href="#list-of-pending-fullscreen-events"
                            id="ref-for-list-of-pending-fullscreen-events">list of pending fullscreen events</a> を設定する。

                    </p>
                <li>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty"
                            id="ref-for-list-empty"><var>document</var> の list of pending fullscreen events を空にする</a>。

                    </p>
                <li>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                            id="ref-for-list-iterate①">各</a> (<var>type</var>, <var>element</var>)
                        について、<var>pendingEvents</var> の中で:

                    </p>
                    <ol>
                        <li>
                            <p><var>element</var> が <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#connected" id="ref-for-connected">connected</a>
                                かつ、
                                その <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document"
                                    id="ref-for-concept-node-document①">node document</a> が <var>document</var> なら
                                <var>target</var> に <var>element</var> を設定し、そうでなければ <var>target</var> に
                                <var>document</var> を設定する。

                            </p>
                        <li>
                            <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire"
                                    id="ref-for-concept-event-fire">Fire an event</a> という名前で <var>type</var>、
                                <code
                                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-bubbles" id="ref-for-dom-event-bubbles">bubbles</a></code>
                                と
                                <code
                                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-composed" id="ref-for-dom-event-composed">composed</a></code>
                                属性を true にして <var>target</var> でイベントを発火する。
                            </p>
                    </ol>
            </ol>
            <p class="note" role="note">これらの手順は HTML で定義されている <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop"
                    id="ref-for-event-loop">event loop</a> と統合されています。<a data-link-type="biblio" href="#biblio-html"
                    title="HTML Standard">[HTML]</a>
            </p>
        </div>
        <h2 class="heading settled" data-level="3" id="api"><span class="secno">3. </span><span
                class="content">API</span><a class="self-link" href="#api"></a></h2>
        <pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-fullscreennavigationui"><code><c- g>FullscreenNavigationUI</c-></code></dfn> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-fullscreennavigationui-auto" id="ref-for-dom-fullscreennavigationui-auto"><c- s>"auto"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-fullscreennavigationui-show" id="ref-for-dom-fullscreennavigationui-show"><c- s>"show"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-fullscreennavigationui-hide" id="ref-for-dom-fullscreennavigationui-hide"><c- s>"hide"</c-></a>
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-fullscreenoptions"><code><c- g>FullscreenOptions</c-></code></dfn> {
  <a data-link-type="idl-name" href="#enumdef-fullscreennavigationui" id="ref-for-enumdef-fullscreennavigationui"><c- n>FullscreenNavigationUI</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;auto&quot;" data-dfn-for="FullscreenOptions" data-dfn-type="dict-member" data-export data-type="FullscreenNavigationUI" id="dom-fullscreenoptions-navigationui"><code><c- g>navigationUI</c-></code></dfn> = "auto";
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#element" id="ref-for-element"><c- g>Element</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-element-requestfullscreen" id="ref-for-dom-element-requestfullscreen"><c- g>requestFullscreen</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-fullscreenoptions" id="ref-for-dictdef-fullscreenoptions"><c- n>FullscreenOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Element/requestFullscreen(options), Element/requestFullscreen()" data-dfn-type="argument" data-export id="dom-element-requestfullscreen-options-options"><code><c- g>options</c-></code></dfn> = {});

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenchange" id="ref-for-handler-document-onfullscreenchange"><c- g>onfullscreenchange</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler①"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenerror" id="ref-for-handler-document-onfullscreenerror"><c- g>onfullscreenerror</c-></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#document" id="ref-for-document"><c- g>Document</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter" id="ref-for-LegacyLenientSetter"><c- g>LegacyLenientSetter</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-document-fullscreenenabled" id="ref-for-dom-document-fullscreenenabled"><c- g>fullscreenEnabled</c-></a>;
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter" id="ref-for-LegacyLenientSetter①"><c- g>LegacyLenientSetter</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Unscopable" id="ref-for-Unscopable"><c- g>Unscopable</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-document-fullscreen" id="ref-for-dom-document-fullscreen"><c- g>fullscreen</c-></a>; // historical

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-document-exitfullscreen" id="ref-for-dom-document-exitfullscreen"><c- g>exitFullscreen</c-></a>();

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler②"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenchange" id="ref-for-handler-document-onfullscreenchange①"><c- g>onfullscreenchange</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler③"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenerror" id="ref-for-handler-document-onfullscreenerror①"><c- g>onfullscreenerror</c-></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <c- b>mixin</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#documentorshadowroot" id="ref-for-documentorshadowroot"><c- g>DocumentOrShadowRoot</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter" id="ref-for-LegacyLenientSetter②"><c- g>LegacyLenientSetter</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①"><c- n>Element</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="Element?" href="#dom-document-fullscreenelement" id="ref-for-dom-document-fullscreenelement"><c- g>fullscreenElement</c-></a>;
};
</pre>
        <dl class="domintro">
            <dt><code><var>promise</var> = <var>element</var> . <a class="idl-code" data-link-type="method" href="#dom-element-requestfullscreen" id="ref-for-dom-element-requestfullscreen①">requestFullscreen([<var>options</var>])</a></code>

            <dd>

                <var>element</var> を全画面表示し、完了時に <var>promise</var> が解決されます。

                <p><var>options</var> が指定された場合、<var>options</var> の <code
                        class="idl"><a data-link-type="idl" href="#dom-fullscreenoptions-navigationui" id="ref-for-dom-fullscreenoptions-navigationui">navigationUI</a></code>
                    メンバーは、全画面表示中にナビゲーション UI の表示を優先するかどうかを示します。
                    "<code
                        class="idl"><a data-link-type="idl" href="#dom-fullscreennavigationui-show" id="ref-for-dom-fullscreennavigationui-show①">show</a></code>"
                    の場合はナビゲーションの簡易さを画面スペースよりも優先し、"<code
                        class="idl"><a data-link-type="idl" href="#dom-fullscreennavigationui-hide" id="ref-for-dom-fullscreennavigationui-hide①">hide</a></code>"
                    の場合は画面スペースをより優先します。ユーザーエージェントは常にアプリケーションの設定よりもユーザーの好みを優先してもかまいません。デフォルト値 "<code
                        class="idl"><a data-link-type="idl" href="#dom-fullscreennavigationui-auto" id="ref-for-dom-fullscreennavigationui-auto①">auto</a></code>"
                    はアプリケーションの好みがないことを示します。</p>
            <dt><code><var>document</var> . <code class="idl"><a data-link-type="idl" href="#dom-document-fullscreenenabled" id="ref-for-dom-document-fullscreenenabled①">fullscreenEnabled</a></code></code>

            <dd>
                <p><var>document</var> が <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element"
                        id="ref-for-concept-element⑤">要素</a> を全画面表示でき、
                    <a data-link-type="dfn" href="#fullscreen-is-supported"
                        id="ref-for-fullscreen-is-supported">全画面表示がサポートされている</a>場合は true、そうでなければ false を返します。

                </p>
            <dt><code><var>promise</var> = <var>document</var> . <code class="idl"><a data-link-type="idl" href="#dom-document-exitfullscreen" id="ref-for-dom-document-exitfullscreen①">exitFullscreen()</a></code></code>

            <dd>
                <p><var>document</var> の <a data-link-type="dfn" href="#fullscreen-element"
                        id="ref-for-fullscreen-element⑤">fullscreen element</a> の全画面表示を終了し、完了時に <var>promise</var>
                    が解決されます。

                </p>
            <dt><code><var>document</var> . <code class="idl"><a data-link-type="idl" href="#dom-document-fullscreenelement" id="ref-for-dom-document-fullscreenelement①">fullscreenElement</a></code></code>

            <dd>
                <p><var>document</var> の <a data-link-type="dfn" href="#fullscreen-element"
                        id="ref-for-fullscreen-element⑥">fullscreen element</a> を返します。

                </p>
            <dt><code><var>shadowroot</var> . <code class="idl"><a data-link-type="idl" href="#dom-document-fullscreenelement" id="ref-for-dom-document-fullscreenelement②">fullscreenElement</a></code></code>

            <dd>
                <p><var>shadowroot</var> の <a data-link-type="dfn" href="#fullscreen-element"
                        id="ref-for-fullscreen-element⑦">fullscreen element</a> を返します。
                </p>
        </dl>
        <p><a class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fullscreen-element-ready-check">fullscreen
                element ready check</a> は、<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element"
                id="ref-for-concept-element⑥">要素</a>
            <var>element</var> に対して、以下すべてが true の場合 true を返し、そうでなければ false を返します:

        </p>
        <ul>
            <li>
                <p><var>element</var> が <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#connected"
                        id="ref-for-connected①">connected</a> である。

                </p>
            <li>
                <p><var>element</var> の <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-node-document"
                        id="ref-for-concept-node-document②">node document</a> が
                    "<code><a data-link-type="dfn" href="#fullscreen-feature" id="ref-for-fullscreen-feature">fullscreen</a></code>"
                    機能の
                    <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use"
                        id="ref-for-allowed-to-use">allowed to use</a> である。

                </p>
            <li>
                <p><var>element</var> の <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-element-namespace"
                        id="ref-for-concept-element-namespace">namespace</a> が <a data-link-type="dfn"
                        href="https://infra.spec.whatwg.org/#html-namespace" id="ref-for-html-namespace">HTML
                        namespace</a> でないか、
                    <var>element</var> の <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/popover.html#popover-visibility-state"
                        id="ref-for-popover-visibility-state">popover visibility state</a> が <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/popover.html#popover-hidden-state"
                        id="ref-for-popover-hidden-state">hidden</a> である。
                </p>
        </ul>
        <div class="algorithm" data-algorithm="requestFullscreen(options)">
            <p><dfn class="dfn-paneled idl-code" data-dfn-for="Element" data-dfn-type="method" data-export
                    data-lt="requestFullscreen(options)|requestFullscreen()"
                    id="dom-element-requestfullscreen"><code>requestFullscreen(<var>options</var>)</code></dfn> メソッドの
                手順は以下の通りです:

            </p>
            <ol>
                <li>
                    <p><var>pendingDoc</var> に <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this">this</a> の <a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#concept-node-document"
                            id="ref-for-concept-node-document③">node document</a> を設定する。

                    </p>
                <li>
                    <p><var>promise</var> に新しい promise を作成する。

                    </p>
                <li>
                    <p><var>pendingDoc</var> が <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                            id="ref-for-fully-active">fully active</a> でない場合、<var>promise</var> を <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a></code>
                        例外で reject し、<var>promise</var> を返す。

                    </p>
                <li>
                    <p><var>error</var> に false を設定する。

                    </p>
                <li>
                    <p>次のいずれかの条件が false の場合、<var>error</var> を true にする:

                    </p>
                    <ul>
                        <li>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                    id="ref-for-this①">this</a> の <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#concept-element-namespace"
                                    id="ref-for-concept-element-namespace①">namespace</a> が <a data-link-type="dfn"
                                    href="https://infra.spec.whatwg.org/#html-namespace"
                                    id="ref-for-html-namespace①">HTML namespace</a> であるか、
                                <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                    id="ref-for-this②">this</a> が
                                <a href="https://www.w3.org/TR/SVG11/struct.html#SVGElement">SVG <code>svg</code></a>
                                または
                                <a href="https://www.w3.org/Math/draft-spec/chapter2.html#interf.toplevel">MathML
                                    <code>math</code></a>
                                要素である。<a data-link-type="biblio" href="#biblio-svg"
                                    title="Scalable Vector Graphics (SVG) 1.1 (Second Edition)">[SVG]</a> <a
                                    data-link-type="biblio" href="#biblio-mathml"
                                    title="Mathematical Markup Language (MathML™) 1.01 Specification">[MATHML]</a>

                            </p>
                        <li>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                    id="ref-for-this③">this</a> が
                                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element" id="ref-for-the-dialog-element①">dialog</a></code>
                                要素でない。

                            </p>
                        <li>
                            <p><a data-link-type="dfn" href="#fullscreen-element-ready-check"
                                    id="ref-for-fullscreen-element-ready-check">fullscreen element ready check</a> が
                                <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                    id="ref-for-this④">this</a> に対して true を返す。

                            </p>
                        <li>
                            <p><a data-link-type="dfn" href="#fullscreen-is-supported"
                                    id="ref-for-fullscreen-is-supported①">全画面表示がサポートされている</a>。

                            </p>
                        <li>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                    id="ref-for-this⑤">this</a> の <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                                    id="ref-for-concept-relevant-global">relevant global object</a> が
                                <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/interaction.html#transient-activation"
                                    id="ref-for-transient-activation">transient activation</a> を持つか、または
                                アルゴリズムが <a data-link-type="dfn"
                                    href="https://w3c.github.io/screen-orientation/#dfn-triggered-by-a-user-generated-orientation-change"
                                    id="ref-for-dfn-triggered-by-a-user-generated-orientation-change">ユーザー生成の向き変更によって起動された</a>場合。
                            </p>
                    </ul>
                <li>
                    <p><var>error</var> が false の場合、<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#consume-user-activation"
                            id="ref-for-consume-user-activation">consume user activation</a> を
                        <var>pendingDoc</var> の <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                            id="ref-for-concept-relevant-global①">relevant global object</a> で実行する。

                    </p>
                <li>
                    <p><var>promise</var> を返し、残りの手順を <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                            id="ref-for-in-parallel">並列で</a>実行する。

                    </p>
                <li>
                    <p><var>error</var> が false の場合、<var>pendingDoc</var> の <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable"
                            id="ref-for-node-navigable">node navigable</a> の
                        <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top"
                            id="ref-for-nav-top">top-level traversable</a> の <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document"
                            id="ref-for-nav-document">active document</a> のビューポートサイズを
                        <var>options</var>["<code
                            class="idl"><a data-link-type="idl" href="#dom-fullscreenoptions-navigationui" id="ref-for-dom-fullscreenoptions-navigationui①">navigationUI</a></code>"]
                        を考慮して変更する（任意）:

                    </p>
                    <table>
                        <thead>
                            <tr>
                                <th>値
                                <th>ビューポートサイズ
                        <tbody>
                            <tr>
                                <td>"<dfn class="dfn-paneled idl-code" data-dfn-for="FullscreenNavigationUI"
                                        data-dfn-type="enum-value" data-export data-lt="&quot;hide&quot;|hide"
                                        id="dom-fullscreennavigationui-hide"><code>hide</code></dfn>"
                                <td>出力デバイス画面の全サイズ
                            <tr>
                                <td>"<dfn class="dfn-paneled idl-code" data-dfn-for="FullscreenNavigationUI"
                                        data-dfn-type="enum-value" data-export data-lt="&quot;show&quot;|show"
                                        id="dom-fullscreennavigationui-show"><code>show</code></dfn>"
                                <td>ユーザーエージェントがページナビゲーションコントロールを表示できるように制限された出力デバイス画面のサイズ
                            <tr>
                                <td>"<dfn class="dfn-paneled idl-code" data-dfn-for="FullscreenNavigationUI"
                                        data-dfn-type="enum-value" data-export data-lt="&quot;auto&quot;|auto"
                                        id="dom-fullscreennavigationui-auto"><code>auto</code></dfn>"
                                <td>上記いずれかに一致するユーザーエージェント定義
                    </table>
                    <p>必要に応じて、ユーザーがこれを元に戻す方法を知らせるメッセージを表示することができます。

                    </p>
                <li>
                    <p>次のいずれかの条件が false の場合、<var>error</var> を true にする:

                    </p>
                    <ul>
                        <li>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                    id="ref-for-this⑥">this</a> の <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#concept-node-document"
                                    id="ref-for-concept-node-document④">node document</a> が <var>pendingDoc</var> である。

                            </p>
                        <li>
                            <p><a data-link-type="dfn" href="#fullscreen-element-ready-check"
                                    id="ref-for-fullscreen-element-ready-check①">fullscreen element ready check</a> が
                                <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                    id="ref-for-this⑦">this</a> で true を返す。
                            </p>
                    </ul>
                <li>
                    <p><var>error</var> が true の場合:

                    </p>
                    <ol>
                        <li>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append"
                                    id="ref-for-set-append">Append</a> (<code
                                    class="idl"><a data-link-type="idl" href="#eventdef-document-fullscreenerror" id="ref-for-eventdef-document-fullscreenerror">fullscreenerror</a></code>,
                                <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                    id="ref-for-this⑧">this</a>) を
                                <var>pendingDoc</var> の <a data-link-type="dfn"
                                    href="#list-of-pending-fullscreen-events"
                                    id="ref-for-list-of-pending-fullscreen-events②">list of pending fullscreen
                                    events</a> に追加する。

                            </p>
                        <li>
                            <p><var>promise</var> を <code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①">TypeError</a></code>
                                例外で reject し、これ以降の手順を終了する。
                            </p>
                    </ol>
                <li>
                    <p><var>fullscreenElements</var> に <a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①">順序付き集合</a>
                        を新規作成し、
                        初期値として <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this⑨">this</a> を入れる。

                    </p>
                <li>
                    <p>while true:

                    </p>
                    <ol>
                        <li>
                            <p><var>last</var> に <var>fullscreenElements</var> の最後の <a data-link-type="dfn"
                                    href="https://infra.spec.whatwg.org/#list-item" id="ref-for-list-item">要素</a> を設定する。

                            </p>
                        <li>
                            <p><var>container</var> に <var>last</var> の <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable"
                                    id="ref-for-node-navigable①">node navigable</a> の
                                <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-container"
                                    id="ref-for-nav-container">container</a> を設定する。

                            </p>
                        <li>
                            <p><var>container</var> が null なら <a data-link-type="dfn"
                                    href="https://infra.spec.whatwg.org/#iteration-break"
                                    id="ref-for-iteration-break">break</a> する。

                            </p>
                        <li>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append"
                                    id="ref-for-set-append①">Append</a> で <var>container</var> を
                                <var>fullscreenElements</var> に追加する。
                            </p>
                    </ol>
                <li>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                            id="ref-for-list-iterate②">各</a> <var>element</var> について <var>fullscreenElements</var> の中で:

                    </p>
                    <ol>
                        <li>
                            <p><var>doc</var> に <var>element</var> の <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#concept-node-document"
                                    id="ref-for-concept-node-document⑤">node document</a> を設定する。

                            </p>
                        <li>
                            <p><var>element</var> が <var>doc</var> の <a data-link-type="dfn" href="#fullscreen-element"
                                    id="ref-for-fullscreen-element⑧">fullscreen element</a> なら
                                <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue"
                                    id="ref-for-iteration-continue">continue</a> する。

                            </p>
                            <p class="note" role="note">何も変化していない場合はオブザーバに通知する必要はありません。

                            </p>
                        <li>
                            <p><var>element</var> が <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                    id="ref-for-this①⓪">this</a> かつ
                                <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                    id="ref-for-this①①">this</a> が
                                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element①">iframe</a></code>
                                <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element"
                                    id="ref-for-concept-element⑦">要素</a> なら、<var>element</var> の <a data-link-type="dfn"
                                    href="#iframe-fullscreen-flag" id="ref-for-iframe-fullscreen-flag①">iframe
                                    fullscreen flag</a> を設定する。

                            </p>
                        <li>
                            <p><a data-link-type="dfn" href="#fullscreen-an-element"
                                    id="ref-for-fullscreen-an-element">Fullscreen <var>element</var></a> を
                                <var>doc</var> で実行する。

                            </p>
                        <li>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append"
                                    id="ref-for-set-append②">Append</a> (<code
                                    class="idl"><a data-link-type="idl" href="#eventdef-document-fullscreenchange" id="ref-for-eventdef-document-fullscreenchange">fullscreenchange</a></code>,
                                <var>element</var>) を <var>doc</var> の <a data-link-type="dfn"
                                    href="#list-of-pending-fullscreen-events"
                                    id="ref-for-list-of-pending-fullscreen-events③">list of pending fullscreen
                                    events</a> に追加する。
                            </p>
                    </ol>
                    <p class="note" role="note">要素が <a data-link-type="dfn" href="#fullscreen-an-element"
                            id="ref-for-fullscreen-an-element①">fullscreened</a> される順序は観測できません。<a data-link-type="dfn"
                            href="#run-the-fullscreen-steps" id="ref-for-run-the-fullscreen-steps">run the fullscreen
                            steps</a> が <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-order"
                            id="ref-for-concept-tree-order">tree order</a> で呼ばれるためです。

                    </p>
                <li>
                    <p><var>promise</var> を undefined で解決する。
                    </p>
            </ol>
            <p class="note" role="note">アウトオブプロセスの <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigable"
                    id="ref-for-navigable">navigables</a> を持つ実装は読者への課題として残されています。改善案のフィードバック歓迎です。
            </p>
        </div>
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="attribute" data-export
                id="dom-document-fullscreenenabled"><code>fullscreenEnabled</code></dfn> ゲッターの手順は、
            <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①②">this</a> が
            "<code><a data-link-type="dfn" href="#fullscreen-feature" id="ref-for-fullscreen-feature①">fullscreen</a></code>"
            機能の <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use"
                id="ref-for-allowed-to-use①">allowed to use</a> であり、
            <a data-link-type="dfn" href="#fullscreen-is-supported"
                id="ref-for-fullscreen-is-supported②">全画面表示がサポートされている</a>場合 true を返し、
            そうでなければ false を返すことです。

        </p>
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="attribute" data-export
                id="dom-document-fullscreen"><code>fullscreen</code></dfn> ゲッターの手順は、
            <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①③">this</a> の
            <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element⑨">fullscreen element</a>
            が null なら false を返し、そうでなければ true を返すことです。

        </p>
        <p class="note" role="note"><code
                class="idl"><a data-link-type="idl" href="#dom-document-fullscreenelement" id="ref-for-dom-document-fullscreenelement③">fullscreenElement</a></code>
            属性を代わりに利用してください。

        </p>
        <div class="algorithm" data-algorithm="fullscreenElement" data-algorithm-for="DocumentOrShadowRoot">
            <p>
                <dfn class="dfn-paneled idl-code" data-dfn-for="DocumentOrShadowRoot" data-dfn-type="attribute"
                    data-export id="dom-document-fullscreenelement"><code>fullscreenElement</code></dfn>
                ゲッターの手順は以下の通りです:
            </p>
            <ol>
                <li>
                    <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①④">this</a>
                        が <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-shadow-root"
                            id="ref-for-concept-shadow-root">shadow root</a> かつその <a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#concept-documentfragment-host"
                            id="ref-for-concept-documentfragment-host">host</a> が
                        <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#connected"
                            id="ref-for-connected②">connected</a> でないなら、null を返す。

                    </p>
                <li>
                    <p><var>candidate</var> に <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#retarget"
                            id="ref-for-retarget">retargeting</a> を
                        <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①⓪">fullscreen
                            element</a> と
                        <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑤">this</a>
                        で実行した結果を設定する。

                    </p>
                <li>
                    <p><var>candidate</var> と <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this①⑥">this</a> が同じ <a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#concept-tree" id="ref-for-concept-tree">tree</a>
                        に属しているなら、
                        <var>candidate</var> を返す。

                    </p>
                <li>
                    <p>null を返す。
                    </p>
            </ol>
        </div>
        <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                id="ref-for-concept-document⑤">文書</a>は、その <a data-link-type="dfn"
                href="https://drafts.csswg.org/css-position-4/#document-top-layer" id="ref-for-document-top-layer⑤">top
                layer</a> に
            <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag⑥">fullscreen flag</a> が設定されている
            <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element"
                id="ref-for-concept-element⑧">要素</a> がちょうど 1 つだけある場合、
            <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="simple-fullscreen-document">単純な全画面文書</dfn>（simple fullscreen document）とされます。

        </p>
        <p class="note" role="note"><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                id="ref-for-concept-document⑥">文書</a>の <a data-link-type="dfn"
                href="https://drafts.csswg.org/css-position-4/#document-top-layer" id="ref-for-document-top-layer⑥">top
                layer</a> に <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element"
                id="ref-for-concept-element⑨">要素</a> が 2 つある場合でも
            <a data-link-type="dfn" href="#simple-fullscreen-document"
                id="ref-for-simple-fullscreen-document">単純な全画面文書</a>となる場合があります。
            例えば、<a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①①">fullscreen
                element</a> の他に
            開いている
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element" id="ref-for-the-dialog-element②">dialog</a></code>
            要素がある場合などです。

        </p>
        <div class="algorithm" data-algorithm="collect documents to unfullscreen">
            <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="collect-documents-to-unfullscreen">collect
                    documents to unfullscreen</dfn> を <var>doc</var> に対して実行する手順は以下の通りです:

            </p>
            <ol>
                <li>
                    <p><var>docs</var> に <var>doc</var> を含む <a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②">順序付き集合</a>
                        を作成する。

                    </p>
                <li>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-while"
                            id="ref-for-iteration-while">while</a> true:

                    </p>
                    <ol>
                        <li>
                            <p><var>lastDoc</var> に <var>docs</var> の最後の <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#concept-document"
                                    id="ref-for-concept-document⑦">文書</a> を設定する。

                            </p>
                        <li>
                            <p>保証: <var>lastDoc</var> の <a data-link-type="dfn" href="#fullscreen-element"
                                    id="ref-for-fullscreen-element①②">fullscreen element</a> は null ではない。

                            </p>
                        <li>
                            <p><var>lastDoc</var> が <a data-link-type="dfn" href="#simple-fullscreen-document"
                                    id="ref-for-simple-fullscreen-document①">単純な全画面文書</a>でない場合、
                                <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break"
                                    id="ref-for-iteration-break①">break</a> する。

                            </p>
                        <li>
                            <p><var>container</var> に <var>lastDoc</var> の <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable"
                                    id="ref-for-node-navigable②">node navigable</a> の
                                <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-container"
                                    id="ref-for-nav-container①">container</a> を設定する。

                            </p>
                        <li>
                            <p><var>container</var> が null の場合、<a data-link-type="dfn"
                                    href="https://infra.spec.whatwg.org/#iteration-break"
                                    id="ref-for-iteration-break②">break</a> する。

                            </p>
                        <li>
                            <p><var>container</var> の <a data-link-type="dfn" href="#iframe-fullscreen-flag"
                                    id="ref-for-iframe-fullscreen-flag②">iframe fullscreen flag</a> が設定されている場合、
                                <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break"
                                    id="ref-for-iteration-break③">break</a> する。

                            </p>
                        <li>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append"
                                    id="ref-for-set-append③">Append</a> で <var>container</var> の <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#concept-node-document"
                                    id="ref-for-concept-node-document⑥">node document</a> を <var>docs</var> に追加する。
                            </p>
                    </ol>
                <li>
                    <p><var>docs</var> を返す。

                    </p>
                    <p class="note" role="note">これは <a data-link-type="dfn" href="#fullscreen-element"
                            id="ref-for-fullscreen-element①③">fullscreen element</a> の
                        <a data-link-type="dfn" href="#unfullscreen-an-element"
                            id="ref-for-unfullscreen-an-element③">fullscreen解除</a>を行う文書集合ですが、
                        <var>docs</var> の最後の文書には <a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element①⓪">要素</a> が
                        <a data-link-type="dfn" href="https://drafts.csswg.org/css-position-4/#document-top-layer"
                            id="ref-for-document-top-layer⑦">top layer</a> に複数
                        <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag⑦">fullscreen
                            flag</a> が設定されている場合があり、
                        その場合その文書は引き続き全画面状態となります。
                    </p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="exit fullscreen">
            <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="exit-fullscreen">exit fullscreen</dfn>
                を <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                    id="ref-for-concept-document⑧">文書</a> <var>doc</var> に対して実行する手順は以下の通りです:

            </p>
            <ol>
                <li>
                    <p><var>promise</var> に新しい promise を作成する。

                    </p>
                <li>
                    <p><var>doc</var> が <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                            id="ref-for-fully-active①">fully active</a> でない、または <var>doc</var> の <a data-link-type="dfn"
                            href="#fullscreen-element" id="ref-for-fullscreen-element①④">fullscreen element</a>
                        が null の場合、<var>promise</var> を <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②">TypeError</a></code>
                        例外で reject し、<var>promise</var> を返す。

                    </p>
                <li>
                    <p><var>resize</var> に false を設定する。

                    </p>
                <li>
                    <p><var>docs</var> に
                        <a data-link-type="dfn" href="#collect-documents-to-unfullscreen"
                            id="ref-for-collect-documents-to-unfullscreen">collect documents to unfullscreen</a> を
                        <var>doc</var> に対して実行した結果を設定する。

                    </p>
                <li>
                    <p><var>topLevelDoc</var> に <var>doc</var> の <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable"
                            id="ref-for-node-navigable③">node navigable</a> の
                        <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top"
                            id="ref-for-nav-top①">top-level traversable</a> の <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document"
                            id="ref-for-nav-document①">active document</a> を設定する。

                    </p>
                <li>
                    <p><var>topLevelDoc</var> が <var>docs</var> に含まれていて、かつ
                        <a data-link-type="dfn" href="#simple-fullscreen-document"
                            id="ref-for-simple-fullscreen-document②">単純な全画面文書</a>の場合、
                        <var>doc</var> に <var>topLevelDoc</var> を設定し、
                        <var>resize</var> を true にする。

                    </p>
                <li>
                    <p><var>doc</var> の <a data-link-type="dfn" href="#fullscreen-element"
                            id="ref-for-fullscreen-element①⑤">fullscreen element</a> が <a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#connected" id="ref-for-connected③">connected</a>でない場合:
                    </p>
                    <ol>
                        <li>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append"
                                    id="ref-for-set-append④">Append</a> (<code
                                    class="idl"><a data-link-type="idl" href="#eventdef-document-fullscreenchange" id="ref-for-eventdef-document-fullscreenchange①">fullscreenchange</a></code>,
                                <var>doc</var> の <a data-link-type="dfn" href="#fullscreen-element"
                                    id="ref-for-fullscreen-element①⑥">fullscreen element</a>)
                                を <var>doc</var> の <a data-link-type="dfn" href="#list-of-pending-fullscreen-events"
                                    id="ref-for-list-of-pending-fullscreen-events④">list of pending fullscreen
                                    events</a> に追加する。

                            </p>
                        <li>
                            <p><a data-link-type="dfn" href="#unfullscreen-an-element"
                                    id="ref-for-unfullscreen-an-element④">fullscreen解除</a> を <var>doc</var> の <a
                                    data-link-type="dfn" href="#fullscreen-element"
                                    id="ref-for-fullscreen-element①⑦">fullscreen element</a> に対して実行する。
                            </p>
                    </ol>
                <li>
                    <p><var>promise</var> を返し、残りの手順を <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                            id="ref-for-in-parallel①">並列で</a>実行する。

                    </p>
                <li>
                    <p><a data-link-type="dfn"
                            href="https://w3c.github.io/screen-orientation/#dfn-fully-unlock-the-screen-orientation-steps"
                            id="ref-for-dfn-fully-unlock-the-screen-orientation-steps">画面の向きを完全に解除する手順</a> を
                        <var>doc</var> で実行する。

                    </p>
                <li>
                    <p><var>resize</var> が true の場合、<var>doc</var> のビューポートを「通常」のサイズに変更する。

                    </p>
                <li>
                    <p><var>doc</var> の <a data-link-type="dfn" href="#fullscreen-element"
                            id="ref-for-fullscreen-element①⑧">fullscreen element</a> が null なら、
                        <var>promise</var> を undefined で解決し、これ以降の手順を終了する。

                    </p>
                <li>
                    <p><var>exitDocs</var> に
                        <a data-link-type="dfn" href="#collect-documents-to-unfullscreen"
                            id="ref-for-collect-documents-to-unfullscreen①">collect documents to unfullscreen</a> を
                        <var>doc</var> に対して実行した結果を設定する。

                    </p>
                <li>
                    <p><var>descendantDocs</var> に <var>doc</var> の <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#descendant-navigables"
                            id="ref-for-descendant-navigables">descendant navigables</a> の
                        <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document"
                            id="ref-for-nav-document②">active document</a> のうち
                        <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①⑨">fullscreen
                            element</a> が null でないものを
                        <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-order"
                            id="ref-for-concept-tree-order①">tree order</a> で順序付き集合として取得する。

                    </p>
                <li>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                            id="ref-for-list-iterate③">各</a> <var>exitDoc</var> について <var>exitDocs</var> の中で:

                    </p>
                    <ol>
                        <li>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append"
                                    id="ref-for-set-append⑤">Append</a> (<code
                                    class="idl"><a data-link-type="idl" href="#eventdef-document-fullscreenchange" id="ref-for-eventdef-document-fullscreenchange②">fullscreenchange</a></code>,
                                <var>exitDoc</var> の
                                <a data-link-type="dfn" href="#fullscreen-element"
                                    id="ref-for-fullscreen-element②⓪">fullscreen element</a>) を <var>exitDoc</var> の <a
                                    data-link-type="dfn" href="#list-of-pending-fullscreen-events"
                                    id="ref-for-list-of-pending-fullscreen-events⑤">list of pending fullscreen
                                    events</a> に追加する。

                            </p>
                        <li>
                            <p><var>resize</var> が true の場合、<a data-link-type="dfn" href="#unfullscreen-a-document"
                                    id="ref-for-unfullscreen-a-document">exitDoc の fullscreen を解除</a>する。

                            </p>
                        <li>
                            <p>それ以外の場合、<a data-link-type="dfn" href="#unfullscreen-an-element"
                                    id="ref-for-unfullscreen-an-element⑤">fullscreen解除</a> を <var>exitDoc</var> の
                                <a data-link-type="dfn" href="#fullscreen-element"
                                    id="ref-for-fullscreen-element②①">fullscreen element</a> に対して実行する。
                            </p>
                    </ol>
                <li>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                            id="ref-for-list-iterate④">各</a> <var>descendantDoc</var> について <var>descendantDocs</var>
                        の中で:

                    </p>
                    <ol>
                        <li>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append"
                                    id="ref-for-set-append⑥">Append</a> (<code
                                    class="idl"><a data-link-type="idl" href="#eventdef-document-fullscreenchange" id="ref-for-eventdef-document-fullscreenchange③">fullscreenchange</a></code>,
                                <var>descendantDoc</var> の
                                <a data-link-type="dfn" href="#fullscreen-element"
                                    id="ref-for-fullscreen-element②②">fullscreen element</a>) を
                                <var>descendantDoc</var> の
                                <a data-link-type="dfn" href="#list-of-pending-fullscreen-events"
                                    id="ref-for-list-of-pending-fullscreen-events⑥">list of pending fullscreen
                                    events</a> に追加する。

                            </p>
                        <li>
                            <p><a data-link-type="dfn" href="#unfullscreen-a-document"
                                    id="ref-for-unfullscreen-a-document①">descendantDoc の fullscreen を解除</a>する。
                            </p>
                    </ol>
                    <p class="note" role="note">文書が <a data-link-type="dfn" href="#unfullscreen-a-document"
                            id="ref-for-unfullscreen-a-document②">fullscreen解除</a> される順序は観測できません。
                        <a data-link-type="dfn" href="#run-the-fullscreen-steps"
                            id="ref-for-run-the-fullscreen-steps①">run the fullscreen steps</a> が
                        <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-order"
                            id="ref-for-concept-tree-order②">tree order</a> で呼ばれるためです。

                    </p>
                <li>
                    <p><var>promise</var> を undefined で解決する。
                    </p>
            </ol>
        </div>
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="method" data-export
                id="dom-document-exitfullscreen"><code>exitFullscreen()</code></dfn> メソッドの手順は、
            <a data-link-type="dfn" href="#exit-fullscreen" id="ref-for-exit-fullscreen②">exit fullscreen</a> を
            <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑦">this</a>
            に対して実行した結果を返すことです。

        </p>
        <hr>
        <p>以下は <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers"
                id="ref-for-event-handlers">イベントハンドラ</a>（および対応する
            <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type"
                id="ref-for-event-handler-event-type">イベントハンドラ イベント型</a>）であり、
            <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element②">Element</a></code>
            および <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①">Document</a></code>
            オブジェクトで
            <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes"
                id="ref-for-event-handler-idl-attributes">event handler IDL attributes</a> としてサポートされなければなりません:

        </p>
        <table>
            <thead>
                <tr>
                    <th><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers"
                            id="ref-for-event-handlers①">イベントハンドラ</a>

                    <th><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type"
                            id="ref-for-event-handler-event-type①">イベントハンドラ イベント型</a>

            <tbody>
                <tr>
                    <td><dfn class="dfn-paneled idl-code" data-dfn-for="Document,Element" data-dfn-type="attribute"
                            data-export id="handler-document-onfullscreenchange"><code>onfullscreenchange</code></dfn>

                    <td><dfn class="dfn-paneled idl-code" data-dfn-for="Document,Element" data-dfn-type="event"
                            data-export id="eventdef-document-fullscreenchange"><code>fullscreenchange</code></dfn>

                <tr>
                    <td><dfn class="dfn-paneled idl-code" data-dfn-for="Document,Element" data-dfn-type="attribute"
                            data-export id="handler-document-onfullscreenerror"><code>onfullscreenerror</code></dfn>

                    <td><dfn class="dfn-paneled idl-code" data-dfn-for="Document,Element" data-dfn-type="event"
                            data-export id="eventdef-document-fullscreenerror"><code>fullscreenerror</code></dfn>

        </table>
        <p class="note" role="note">これらは <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#shadowroot" id="ref-for-shadowroot">ShadowRoot</a></code>
            や <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window">Window</a></code>
            オブジェクトではサポートされていません。また、いかなる名前空間でも <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element③">Element</a></code>
            オブジェクトに対応する <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-content-attributes"
                id="ref-for-event-handler-content-attributes">event handler content attributes</a> はありません。



        </p>
        <h2 class="heading settled" data-level="4" id="ui"><span class="secno">4. </span><span
                class="content">UI</span><a class="self-link" href="#ui"></a></h2>
        <p>ユーザーエージェントは、ネイティブのメディア全画面コントロールの実装に
            <code
                class="idl"><a data-link-type="idl" href="#dom-element-requestfullscreen" id="ref-for-dom-element-requestfullscreen②">requestFullscreen()</a></code>
            および <code
                class="idl"><a data-link-type="idl" href="#dom-document-exitfullscreen" id="ref-for-dom-document-exitfullscreen②">exitFullscreen()</a></code>
            を利用することが推奨されます。

        </p>
        <p>ユーザーが <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#close-request"
                id="ref-for-close-request">クローズリクエスト</a> を開始すると、これは <a data-link-type="dfn"
                href="#fully-exit-fullscreen" id="ref-for-fully-exit-fullscreen①">全画面から完全に退出する</a>
            アルゴリズムを <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/interaction.html#close-request-steps"
                id="ref-for-close-request-steps">クローズリクエスト手順</a>の一部として起動します。これは <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/interaction.html#close-watcher"
                id="ref-for-close-watcher">クローズウォッチャー</a> よりも優先されます。

        </p>
        <p>ユーザーエージェントは、ユーザーエージェントが必要と判断した場合、<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/interaction.html#close-request"
                id="ref-for-close-request①">クローズリクエスト</a>や
            <code
                class="idl"><a data-link-type="idl" href="#dom-document-exitfullscreen" id="ref-for-dom-document-exitfullscreen③">exitFullscreen()</a></code>
            の呼び出しなしで、いつでも全画面セッションを終了することができます。



        </p>
        <h2 class="heading settled" data-level="5" id="rendering"><span class="secno">5. </span><span
                class="content">レンダリング</span><a class="self-link" href="#rendering"></a></h2>
        <p>このセクションは HTML のレンダリングセクションと同等に解釈されます。<a data-link-type="biblio" href="#biblio-html"
                title="HTML Standard">[HTML]</a>


        </p>
        <h3 class="heading settled" data-level="5.1" id=":fullscreen-pseudo-class"><span class="secno">5.1. </span><span
                class="content"><code>:fullscreen</code> 疑似クラス</span><a class="self-link"
                href="#:fullscreen-pseudo-class"></a></h3>
        <p><dfn class="dfn-paneled css" data-dfn-type="selector" data-export
                id="css-pc-fullscreen"><code>:fullscreen</code></dfn> 疑似クラスは、次のいずれかの条件が true である
            <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element"
                id="ref-for-concept-element①①">要素</a> <var>element</var> にマッチしなければなりません:

        </p>
        <ul>
            <li>
                <p><var>element</var> の <a data-link-type="dfn" href="#fullscreen-flag"
                        id="ref-for-fullscreen-flag⑧">fullscreen flag</a> が設定されている。

                </p>
            <li>
                <p><var>element</var> が <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#element-shadow-host"
                        id="ref-for-element-shadow-host">シャドウホスト</a> であり、
                    <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#retarget"
                        id="ref-for-retarget①">retargeting</a> で
                    その <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document"
                        id="ref-for-concept-node-document⑦">node document</a> の <a data-link-type="dfn"
                        href="#fullscreen-element" id="ref-for-fullscreen-element②③">fullscreen element</a> を
                    <var>element</var> に対して実行した結果が
                    <var>element</var> である。
                </p>
        </ul>
        <p class="note no-backref" role="note">これは
            <code
                class="idl"><a data-link-type="idl" href="#dom-document-fullscreenelement" id="ref-for-dom-document-fullscreenelement④">fullscreenElement</a></code>
            API と異なり、API は最上位の <a data-link-type="dfn" href="#fullscreen-element"
                id="ref-for-fullscreen-element②④">fullscreen element</a> を返します。

        </p>
        <h3 class="heading settled" data-level="5.2" id="user-agent-level-style-sheet-defaults"><span class="secno">5.2.
            </span><span class="content">ユーザーエージェントレベルのスタイルシートのデフォルト</span><a class="self-link"
                href="#user-agent-level-style-sheet-defaults"></a></h3>
        <pre class="css">@namespace "http://www.w3.org/1999/xhtml";

*|*:not(:root):fullscreen {
  position:fixed !important;
  inset:0 !important;
  margin:0 !important;
  box-sizing:border-box !important;
  min-width:0 !important;
  max-width:none !important;
  min-height:0 !important;
  max-height:none !important;
  width:100% !important;
  height:100% !important;
  transform:none !important;

  /* intentionally not !important */
  object-fit:contain;
}

iframe:fullscreen {
  border:none !important;
  padding:0 !important;
}

*|*:not(:root):fullscreen::backdrop {
  background:black;
}
</pre>
        <h2 class="heading settled" data-level="6" id="permissions-policy-integration"><span class="secno">6.
            </span><span class="bs-old-id" id="feature-policy-integration"></span><span class="content">Permissions
                Policy
                統合</span><a class="self-link" href="#permissions-policy-integration"></a></h2>
        <p>この仕様は、"<code><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="fullscreen-feature" data-noexport id="fullscreen-feature">fullscreen</dfn></code>"
            という文字列で識別される
            <a data-link-type="dfn" href="https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature"
                id="ref-for-policy-controlled-feature">ポリシー制御機能</a>を定義します。
            その <a data-link-type="dfn"
                href="https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature-default-allowlist"
                id="ref-for-policy-controlled-feature-default-allowlist">デフォルト許可リスト</a> は <code>'self'</code> です。

        </p>
        <div class="note" role="note">
            <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                    id="ref-for-concept-document⑨">文書</a>の <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy"
                    id="ref-for-concept-document-permissions-policy">permissions policy</a>
                は、その文書内のコンテンツが全画面表示できるかどうかを決定します。いずれかの文書で無効化されている場合、その文書内のコンテンツは
                <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use"
                    id="ref-for-allowed-to-use②">全画面表示の使用が許可されません</a>。

            </p>
            <p>
                HTML
                <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen" id="ref-for-attr-iframe-allowfullscreen">allowfullscreen</a></code>
                属性は、<code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element②">iframe</a></code>
                要素の
                <a data-link-type="dfn" href="https://w3c.github.io/webappsec-permissions-policy/#container-policy"
                    id="ref-for-container-policy">container policy</a>
                に影響します。<code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow" id="ref-for-attr-iframe-allow">allow</a></code>
                属性で上書きされない限り、iframe の
                <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen" id="ref-for-attr-iframe-allowfullscreen①">allowfullscreen</a></code>
                を設定することは <code>&lt;iframe allow="fullscreen *"&gt;</code> と同等です。
                詳細は <a
                    href="https://w3c.github.io/webappsec-permissions-policy/#iframe-allowfullscreen-attribute"><cite>Permissions
                        Policy</cite> § 6.3.1 allowfullscreen</a> を参照してください。
            </p>
        </div>
        <h2 class="heading settled" data-level="7" id="security-and-privacy-considerations"><span class="secno">7.
            </span><span class="content">セキュリティとプライバシーに関する考慮事項</span><a class="self-link"
                href="#security-and-privacy-considerations"></a></h2>
        <p>ユーザーエージェントは、例えばオーバーレイにより、最終的なユーザーが何かが全画面表示されていることを認識できるようにするべきです。ユーザーエージェントは、常に機能する全画面解除手段を提供し、それをユーザーに通知するべきです。これは、全画面時にサイトがユーザーエージェントやオペレーティングシステムの環境を再現してユーザーを欺くことを防ぐためです。<code
                class="idl"><a data-link-type="idl" href="#dom-element-requestfullscreen" id="ref-for-dom-element-requestfullscreen③">requestFullscreen()</a></code>
            の定義も参照してください。

        </p>
        <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable"
                id="ref-for-child-navigable">子ナビゲーブル</a>内のコンテンツが全画面表示を行うには、permissions policy により明示的に許可されている必要があります。
            具体的には、HTML
            <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen" id="ref-for-attr-iframe-allowfullscreen②">allowfullscreen</a></code>
            属性や
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element③">iframe</a></code>
            要素の適切な
            <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow" id="ref-for-attr-iframe-allow①">allow</a></code>
            属性、またはそのドキュメントを経由して配信される
            `<a data-link-type="http-header"
                href="https://w3c.github.io/webappsec-permissions-policy/#permissions-policy-header"
                id="ref-for-permissions-policy-header"><code>Permissions-Policy</code></a>` HTTP ヘッダー
            で明示的に許可する必要があります。

        </p>
        <p>これにより、例えばサードパーティのコンテンツが明示的な許可なしに全画面表示されることを防ぎます。



        </p>
        <h2 class="no-num heading settled" id="old-links"><span class="bs-old-id" id="css-pe-backdrop"></span><span
                class="bs-old-id" id="::backdrop-pseudo-element"></span><span class="bs-old-id"
                id="top-layer-add"></span><span class="bs-old-id" id="top-layer"></span><span class="bs-old-id"
                id="new-stacking-layer"></span><span class="content">過去にホストされていた定義</span><a class="self-link"
                href="#old-links"></a></h2>
        <p>この仕様では以前、<a class="css" data-link-type="selector"
                href="https://drafts.csswg.org/css-position-4/#selectordef-backdrop"
                id="ref-for-selectordef-backdrop">::backdrop</a>
            や文書の <a data-link-type="dfn" href="https://drafts.csswg.org/css-position-4/#document-top-layer"
                id="ref-for-document-top-layer⑧">top layer</a> の概念を定義していました。</p>
        <h2 class="no-num heading settled" id="acknowledgments"><span class="content">謝辞</span><a class="self-link"
                href="#acknowledgments"></a></h2>
        <p>最初のモデル設計と素晴らしい貢献をしてくれた Robert O’Callahan 氏に多大なる感謝を申し上げます。

        </p>
        <p>以下の方々にも感謝します:
            Andy Earnshaw,
            Changwan Hong,
            Chris Pearce,
            Darin Fisher,
            Dave Tapuska,
            <i>fantasai</i>,
            Giuseppe Pascale,
            Glenn Maynard,
            Ian Clelland,
            Ian Hickson,
            Ignacio Solla,
            João Eiras,
            Josh Soref,
            Kagami Sascha Rosylight,
            Matt Falkenhagen,
            Mihai Balan,
            Mounir Lamouri,
            Øyvind Stenhaug,
            Pat Ladd,
            Rafał Chłodnicki,
            Riff Jiang,
            Rune Lillesveen,
            Sigbjørn Vik,
            Simon Pieters,
            Tab Atkins-Bittner,
            Takayoshi Kochi,
            Theresa O’Connor,
            triple-underscore,
            Vincent Scheib,
            Xidorn Quan
            も素晴らしい貢献者です。

        </p>
        <p>この標準は <a href="https://foolip.org/" lang="sv">Philip Jägenstedt</a>
            (<a href="https://google.com/">Google</a>,
            <a href="mailto:philip@foolip.org">philip@foolip.org</a>) によって編集されています。元の執筆者は
            <a href="https://annevankesteren.nl/" lang="nl">Anne van Kesteren</a>
            (<a href="https://www.apple.com/">Apple</a>, <a href="mailto:annevk@annevk.nl">annevk@annevk.nl</a>) です。
            <a href="http://tantek.com/" lang="tr">Tantek Çelik</a>
            (<a class="p-org org h-org h-card" href="https://www.mozilla.org/">Mozilla</a>,
            <a href="mailto:tantek@cs.stanford.edu">tantek@cs.stanford.edu</a>) は法的な整理を担当しました。


        </p>
        <h2 class="no-num heading settled" id="ipr"><span class="content">知的財産権</span><a class="self-link"
                href="#ipr"></a></h2>
        <p>Copyright © WHATWG (Apple, Google, Mozilla, Microsoft). この成果物は <a
                href="https://creativecommons.org/licenses/by/4.0/" rel="license">Creative Commons Attribution 4.0
                International License</a> の下でライセンスされています。その一部がソースコードに組み込まれる場合、その部分は <a
                href="https://opensource.org/licenses/BSD-3-Clause" rel="license">BSD 3-Clause License</a> の下でライセンスされます。
        </p>
        <p>これは現行標準です。
            特許審査版に興味がある方は
            <a href="/review-drafts/2025-07/">現行標準審査ドラフト</a> をご覧ください。
        </p>
    </main>
    <script>
        // "use strict";
        // if ("serviceWorker" in navigator) {
        //     navigator.serviceWorker.register("/service-worker.js");
        // }
    </script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">この仕様で定義されている用語</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#dom-fullscreennavigationui-auto">"auto"</a><span>（§ 3）</span>
        <li><a href="#dom-fullscreennavigationui-auto">auto</a><span>（§ 3）</span>
        <li><a href="#collect-documents-to-unfullscreen">collect documents to unfullscreen</a><span>（§ 3）</span>
        <li><a href="#exit-fullscreen">exit fullscreen</a><span>（§ 3）</span>
        <li><a href="#dom-document-exitfullscreen">exitFullscreen()</a><span>（§ 3）</span>
        <li><a href="#css-pc-fullscreen">:fullscreen</a><span>（§ 5.1）</span>
        <li><a href="#dom-document-fullscreen">fullscreen</a><span>（§ 3）</span>
        <li><a href="#fullscreen-an-element">fullscreen an element</a><span>（§ 2）</span>
        <li><a href="#eventdef-document-fullscreenchange">fullscreenchange</a><span>（§ 3）</span>
        <li><a href="#fullscreen-element">fullscreen element</a><span>（§ 2）</span>
        <li><a href="#dom-document-fullscreenelement">fullscreenElement</a><span>（§ 3）</span>
        <li><a href="#fullscreen-element-ready-check">fullscreen element ready check</a><span>（§ 3）</span>
        <li><a href="#dom-document-fullscreenenabled">fullscreenEnabled</a><span>（§ 3）</span>
        <li><a href="#eventdef-document-fullscreenerror">fullscreenerror</a><span>（§ 3）</span>
        <li><a href="#fullscreen-feature">fullscreen-feature</a><span>（§ 6）</span>
        <li><a href="#fullscreen-flag">fullscreen flag</a><span>（§ 2）</span>
        <li><a href="#fullscreen-is-supported">Fullscreen がサポートされる</a><span>（§ 2）</span>
        <li><a href="#enumdef-fullscreennavigationui">FullscreenNavigationUI</a><span>（§ 3）</span>
        <li><a href="#dictdef-fullscreenoptions">FullscreenOptions</a><span>（§ 3）</span>
        <li><a href="#fully-exit-fullscreen">fully exit fullscreen</a><span>（§ 2）</span>
        <li><a href="#dom-fullscreennavigationui-hide">"hide"</a><span>（§ 3）</span>
        <li><a href="#dom-fullscreennavigationui-hide">hide</a><span>（§ 3）</span>
        <li><a href="#iframe-fullscreen-flag">iframe fullscreen flag</a><span>（§ 2）</span>
        <li><a href="#list-of-pending-fullscreen-events">list of pending fullscreen events</a><span>（§ 2）</span>
        <li><a href="#dom-fullscreenoptions-navigationui">navigationUI</a><span>（§ 3）</span>
        <li><a href="#handler-document-onfullscreenchange">onfullscreenchange</a><span>（§ 3）</span>
        <li><a href="#handler-document-onfullscreenerror">onfullscreenerror</a><span>（§ 3）</span>
        <li><a href="#dom-element-requestfullscreen">requestFullscreen()</a><span>（§ 3）</span>
        <li><a href="#dom-element-requestfullscreen">requestFullscreen(options)</a><span>（§ 3）</span>
        <li><a href="#run-the-fullscreen-steps">run the fullscreen steps</a><span>（§ 2）</span>
        <li><a href="#dom-fullscreennavigationui-show">"show"</a><span>（§ 3）</span>
        <li><a href="#dom-fullscreennavigationui-show">show</a><span>（§ 3）</span>
        <li><a href="#simple-fullscreen-document">単純な全画面文書</a><span>（§ 3）</span>
        <li><a href="#unfullscreen-a-document">unfullscreen a document</a><span>（§ 2）</span>
        <li><a href="#unfullscreen-an-element">unfullscreen an element</a><span>（§ 2）</span>
    </ul>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">参照で定義されている用語</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[]</a> で定義されている用語:
            <ul>
                <li><span class="dfn-paneled" id="95ea01a3">triggered by a user generated orientation change</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-POSITION-4]</a> で定義されている用語:
            <ul>
                <li><span class="dfn-paneled" id="b9a45e7f">::backdrop</span>
                <li><span class="dfn-paneled" id="f3abaffb">add to the top layer</span>
                <li><span class="dfn-paneled" id="d4a9f2b2">remove from the top layer immediately</span>
                <li><span class="dfn-paneled" id="8f59bb58">top layer</span>
            </ul>
        <li>
            <a data-link-type="biblio">[DOM]</a> で定義されている用語:
            <ul>
                <li><span class="dfn-paneled" id="85394472">Document</span>
                <li><span class="dfn-paneled" id="9ac2aadf">DocumentOrShadowRoot</span>
                <li><span class="dfn-paneled" id="296f3551">Element</span>
                <li><span class="dfn-paneled" id="1cd7ff31">ShadowRoot</span>
                <li><span class="dfn-paneled" id="0c0ceb78">bubbles</span>
                <li><span class="dfn-paneled" id="8b547cc7">composed</span>
                <li><span class="dfn-paneled" id="9638f92b">connected</span>
                <li><span class="dfn-paneled" id="a973e0fe">document</span>
                <li><span class="dfn-paneled" id="27d9b7ea">element</span>
                <li><span class="dfn-paneled" id="5fd23811">fire an event</span>
                <li><span class="dfn-paneled" id="5d233601">host</span>
                <li><span class="dfn-paneled" id="746cc3ba">namespace</span>
                <li><span class="dfn-paneled" id="5216e1a0">node document</span>
                <li><span class="dfn-paneled" id="62e9a98d">removing steps</span>
                <li><span class="dfn-paneled" id="c200d9ce">retargeting</span>
                <li><span class="dfn-paneled" id="58a8f724">shadow host</span>
                <li><span class="dfn-paneled" id="3fcc582f">shadow root</span>
                <li><span class="dfn-paneled" id="a85a691e">shadow-including inclusive descendant</span>
                <li><span class="dfn-paneled" id="fefa5851">shadow-including tree order</span>
                <li><span class="dfn-paneled" id="e6cc3311">tree</span>
                <li><span class="dfn-paneled" id="25538777">tree order</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a> で定義されている用語:
            <ul>
                <li><span class="dfn-paneled" id="f0951476">EventHandler</span>
                <li><span class="dfn-paneled" id="5d7209e9">Window</span>
                <li><span class="dfn-paneled" id="35972864">active document</span>
                <li><span class="dfn-paneled" id="57435598">allow</span>
                <li><span class="dfn-paneled" id="3610bd67">allowed to use</span>
                <li><span class="dfn-paneled" id="06cba118">allowfullscreen</span>
                <li><span class="dfn-paneled" id="f23dc013">child navigable</span>
                <li><span class="dfn-paneled" id="7dc5cd57">close request</span>
                <li><span class="dfn-paneled" id="fd4d25d9">close request steps</span>
                <li><span class="dfn-paneled" id="48761476">close watcher</span>
                <li><span class="dfn-paneled" id="aca22383">consume user activation</span>
                <li><span class="dfn-paneled" id="762210c0">container</span>
                <li><span class="dfn-paneled" id="82529e79">descendant navigables</span>
                <li><span class="dfn-paneled" id="1812300f">dialog</span>
                <li><span class="dfn-paneled" id="6a5a59a0">event handler</span>
                <li><span class="dfn-paneled" id="cc6d9aed">event handler content attribute</span>
                <li><span class="dfn-paneled" id="9d386f55">event handler event type</span>
                <li><span class="dfn-paneled" id="03675365">event handler IDL attribute</span>
                <li><span class="dfn-paneled" id="c6d19e56">event loop</span>
                <li><span class="dfn-paneled" id="0e3ba9f8">fully active</span>
                <li><span class="dfn-paneled" id="7e214bfc">hidden</span>
                <li><span class="dfn-paneled" id="fa3971e0">hide all popovers until</span>
                <li><span class="dfn-paneled" id="87fcd40c">iframe</span>
                <li><span class="dfn-paneled" id="a72449dd">in parallel</span>
                <li><span class="dfn-paneled" id="9c19b7fc">navigable</span>
                <li><span class="dfn-paneled" id="13dd6cae">node navigable</span>
                <li><span class="dfn-paneled" id="a41102eb">permissions policy</span>
                <li><span class="dfn-paneled" id="83b82cf5">popover visibility state</span>
                <li><span class="dfn-paneled" id="e99bd18e">relevant global object</span>
                <li><span class="dfn-paneled" id="30717154">top-level traversable</span>
                <li><span class="dfn-paneled" id="04274997">topmost popover ancestor</span>
                <li><span class="dfn-paneled" id="47fe679e">transient activation</span>
                <li><span class="dfn-paneled" id="4411082c">unloading document cleanup steps</span>
            </ul>
        <li>
            <a data-link-type="biblio">[INFRA]</a> で定義されている用語:
            <ul>
                <li><span class="dfn-paneled" id="a3b18719">append</span>
                <li><span class="dfn-paneled" id="7b0d918d">break</span>
                <li><span class="dfn-paneled" id="ae8def21">contain</span>
                <li><span class="dfn-paneled" id="f937b7b6">continue</span>
                <li><span class="dfn-paneled" id="03afaf9c">empty</span>
                <li><span class="dfn-paneled" id="16d07e10">for each</span>
                <li><span class="dfn-paneled" id="f052b1ea">HTML namespace</span>
                <li><span class="dfn-paneled" id="5afbefcd">item</span>
                <li><span class="dfn-paneled" id="692595fe">ordered set</span>
                <li><span class="dfn-paneled" id="0698d556">string</span>
                <li><span class="dfn-paneled" id="0e8de730">tuple</span>
                <li><span class="dfn-paneled" id="cbdc89b4">while</span>
            </ul>
        <li>
            <a data-link-type="biblio">[PERMISSIONS-POLICY-1]</a> で定義されている用語:
            <ul>
                <li><span class="dfn-paneled" id="d080b91a">container policy</span>
                <li><span class="dfn-paneled" id="1570624a">default allowlist</span>
                <li><span class="dfn-paneled" id="0e3ba2bf">Permissions-Policy</span>
                <li><span class="dfn-paneled" id="cc890cc1">policy-controlled feature</span>
            </ul>
        <li>
            <a data-link-type="biblio">[SCREEN-ORIENTATION]</a> で定義されている用語:
            <ul>
                <li><span class="dfn-paneled" id="08e2f34f">fully unlock the screen orientation steps</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEBIDL]</a> で定義されている用語:
            <ul>
                <li><span class="dfn-paneled" id="459b02ed">LegacyLenientSetter</span>
                <li><span class="dfn-paneled" id="bdbd19d1">Promise</span>
                <li><span class="dfn-paneled" id="82ca3efc">TypeError</span>
                <li><span class="dfn-paneled" id="31d6b6c6">Unscopable</span>
                <li><span class="dfn-paneled" id="5372cca8">boolean</span>
                <li><span class="dfn-paneled" id="4013a022">this</span>
                <li><span class="dfn-paneled" id="5f90bbfb">undefined</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">規範的参考文献</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css">[CSS]
        <dd>Bert Bos 他. <a href="https://drafts.csswg.org/css2/"><cite>カスケーディング・スタイル・シート レベル2 改訂1 (CSS 2.1)
                    仕様</cite></a>。URL: <a href="https://drafts.csswg.org/css2/">https://drafts.csswg.org/css2/</a>
        <dt id="biblio-css-position-4">[CSS-POSITION-4]
        <dd><a href="https://drafts.csswg.org/css-position-4/"><cite>CSS Positioned Layout Module Level 4</cite></a>。
            URL: <a href="https://drafts.csswg.org/css-position-4/">https://drafts.csswg.org/css-position-4/</a>
        <dt id="biblio-dom">[DOM]
        <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM 現行標準</cite></a>。現行標準。
            URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren 他. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML 現行標準</cite></a>。
            現行標準。URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-infra">[INFRA]
        <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra
                    現行標準</cite></a>。現行標準。URL: <a
                href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
        <dt id="biblio-mathml">[MATHML]
        <dd>Patrick D F Ion; Robert R Miner. <a href="https://www.w3.org/TR/REC-MathML/"><cite>数学記法言語 (MathML™) 1.01
                    仕様</cite></a>。2023年3月7日。REC。URL: <a
                href="https://www.w3.org/TR/REC-MathML/">https://www.w3.org/TR/REC-MathML/</a>
        <dt id="biblio-permissions-policy-1">[PERMISSIONS-POLICY-1]
        <dd>Ian Clelland. <a href="https://w3c.github.io/webappsec-permissions-policy/"><cite>Permissions
                    Policy</cite></a>。URL: <a
                href="https://w3c.github.io/webappsec-permissions-policy/">https://w3c.github.io/webappsec-permissions-policy/</a>
        <dt id="biblio-screen-orientation">[SCREEN-ORIENTATION]
        <dd>Marcos Caceres. <a href="https://w3c.github.io/screen-orientation/"><cite>Screen Orientation</cite></a>。
            URL: <a href="https://w3c.github.io/screen-orientation/">https://w3c.github.io/screen-orientation/</a>
        <dt id="biblio-svg">[SVG]
        <dd>Erik Dahlström 他. <a href="https://www.w3.org/TR/SVG11/"><cite>スケーラブル・ベクター・グラフィックス (SVG) 1.1
                    (第2版)</cite></a>。2011年8月16日。REC。URL: <a
                href="https://www.w3.org/TR/SVG11/">https://www.w3.org/TR/SVG11/</a>
        <dt id="biblio-webidl">[WEBIDL]
        <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL 現行標準</cite></a>。現行標準。URL: <a
                href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL 索引</span><a class="self-link"
            href="#idl-index"></a></h2>
    <pre class="idl highlight def"><c- b>enum</c-> <a href="#enumdef-fullscreennavigationui"><code><c- g>FullscreenNavigationUI</c-></code></a> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-fullscreennavigationui-auto"><c- s>"auto"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-fullscreennavigationui-show"><c- s>"show"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-fullscreennavigationui-hide"><c- s>"hide"</c-></a>
};

<c- b>dictionary</c-> <a href="#dictdef-fullscreenoptions"><code><c- g>FullscreenOptions</c-></code></a> {
  <a data-link-type="idl-name" href="#enumdef-fullscreennavigationui"><c- n>FullscreenNavigationUI</c-></a> <a data-default="&quot;auto&quot;" data-type="FullscreenNavigationUI" href="#dom-fullscreenoptions-navigationui"><code><c- g>navigationUI</c-></code></a> = "auto";
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#element"><c- g>Element</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-element-requestfullscreen"><c- g>requestFullscreen</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-fullscreenoptions"><c- n>FullscreenOptions</c-></a> <a href="#dom-element-requestfullscreen-options-options"><code><c- g>options</c-></code></a> = {});

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenchange"><c- g>onfullscreenchange</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenerror"><c- g>onfullscreenerror</c-></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#document"><c- g>Document</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter"><c- g>LegacyLenientSetter</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-document-fullscreenenabled"><c- g>fullscreenEnabled</c-></a>;
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter"><c- g>LegacyLenientSetter</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Unscopable"><c- g>Unscopable</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-document-fullscreen"><c- g>fullscreen</c-></a>; // historical

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-document-exitfullscreen"><c- g>exitFullscreen</c-></a>();

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenchange"><c- g>onfullscreenchange</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenerror"><c- g>onfullscreenerror</c-></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <c- b>mixin</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#documentorshadowroot"><c- g>DocumentOrShadowRoot</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter"><c- g>LegacyLenientSetter</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"><c- n>Element</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="Element?" href="#dom-document-fullscreenelement"><c- g>fullscreenElement</c-></a>;
};

</pre>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-document-exitfullscreen①">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/exitFullscreen"
                    title="The Document method exitFullscreen() requests that the element on this document which is currently being presented in fullscreen mode be taken out of fullscreen mode, restoring the previous state of the screen. This usually reverses the effects of a previous call to Element.requestFullscreen().">Document/exitFullscreen</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span
                    class="safari yes"><span>Safari</span><span>16.4+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>71+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>58+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="handler-document-onfullscreenchange">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/fullscreenchange_event"
                    title="The fullscreenchange event is fired immediately after the browser switches into or out of fullscreen mode.">Document/fullscreenchange_event</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span
                    class="safari yes"><span>Safari</span><span>16.4+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>71+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>58+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
            </div>
        </div>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/fullscreenchange_event"
                    title="The fullscreenchange event is fired immediately after an Element switches into or out of fullscreen mode.">Element/fullscreenchange_event</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span
                    class="safari yes"><span>Safari</span><span>16.4+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>71+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>58+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-document-fullscreenelement①">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/fullscreenElement"
                    title="The Document.fullscreenElement read-only property returns the Element that is currently being presented in fullscreen mode in this document, or null if fullscreen mode is not currently in use.">Document/fullscreenElement</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span
                    class="safari yes"><span>Safari</span><span>16.4+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>71+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>58+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-document-fullscreenenabled①">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/fullscreenEnabled"
                    title="The read-only fullscreenEnabled property on the Document interface indicates whether or not fullscreen mode is available.">Document/fullscreenEnabled</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span
                    class="safari yes"><span>Safari</span><span>16.4+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>71+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>58+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="handler-document-onfullscreenerror">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/fullscreenerror_event"
                    title="The fullscreenerror event is fired when the browser cannot switch to fullscreen mode.">Document/fullscreenerror_event</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span
                    class="safari yes"><span>Safari</span><span>16.4+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>71+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>58+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
            </div>
        </div>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/fullscreenerror_event"
                    title="The fullscreenerror event is fired when the browser cannot switch to fullscreen mode.">Element/fullscreenerror_event</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span
                    class="safari yes"><span>Safari</span><span>16.4+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>71+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>58+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-element-requestfullscreen①">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/requestFullscreen"
                    title="The Element.requestFullscreen() method issues an asynchronous request to make the element be displayed in fullscreen mode.">Element/requestFullscreen</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span
                    class="safari yes"><span>Safari</span><span>16.4+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>71+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>58+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android yes"><span>Firefox for Android</span><span>64+</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="api">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element"
                    title="Element is the most general base class from which all element objects (i.e. objects that represent elements) in a Document inherit. It only has methods and properties common to all kinds of elements. More specific classes inherit from Element.">Element</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>1+</span></span><span
                    class="safari yes"><span>Safari</span><span>1+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>1+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>8+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie yes"><span>IE</span><span>4+</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android yes"><span>Android WebView</span><span>37+</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>10.1+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-document-fullscreenelement②">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot/fullscreenElement"
                    title="The fullscreenElement read-only property of the ShadowRoot interface returns the element within the shadow tree that is currently displayed in full screen.">ShadowRoot/fullscreenElement</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span
                    class="safari yes"><span>Safari</span><span>16.4+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>71+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for=":fullscreen-pseudo-class">
        <summary><span>MDN</span></summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:fullscreen"
                    title="The :fullscreen CSS pseudo-class matches every element which is currently in fullscreen mode. If multiple elements have been put into fullscreen mode, this selects them all.">:fullscreen</a>
            </p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span
                    class="safari no"><span>Safari</span><span>None</span></span><span
                    class="chrome yes"><span>Chrome</span><span>71+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="permissions-policy-integration">
        <summary><b class="less-than-two-engines-flag"
                title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy/fullscreen"
                    title="The HTTP Permissions-Policy header fullscreen directive controls whether the current document is allowed to use Element.requestFullscreen().">Headers/Feature-Policy/fullscreen</a>
            </p>
            <p class="less-than-two-engines-text">In only one current engine.</p>
            <div class="support">
                <span class="firefox no"><span>Firefox</span><span>None</span></span><span
                    class="safari no"><span>Safari</span><span>None</span></span><span
                    class="chrome yes"><span>Chrome</span><span>62+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Permissions-Policy/fullscreen"
                    title="The HTTP Permissions-Policy header fullscreen directive controls whether the current document is allowed to use Element.requestFullscreen().">Headers/Permissions-Policy/fullscreen</a>
            </p>
            <p class="less-than-two-engines-text">In only one current engine.</p>
            <div class="support">
                <span class="firefox no"><span>Firefox</span><span>None</span></span><span
                    class="safari no"><span>Safari</span><span>None</span></span><span
                    class="chrome yes"><span>Chrome</span><span>88+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>88+</span></span>
                <hr>
                <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <script>/* Boilerplate: script-dom-helper */
        "use strict";
        function query(sel) { return document.querySelector(sel); }

        function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

        function iter(obj) {
            if (!obj) return [];
            var it = obj[Symbol.iterator];
            if (it) return it;
            return Object.entries(obj);
        }

        function mk(tagname, attrs, ...children) {
            const el = document.createElement(tagname);
            for (const [k, v] of iter(attrs)) {
                if (k.slice(0, 3) == "_on") {
                    const eventName = k.slice(3);
                    el.addEventListener(eventName, v);
                } else if (k[0] == "_") {
                    // property, not attribute
                    el[k.slice(1)] = v;
                } else {
                    if (v === false || v == null) {
                        continue;
                    } else if (v === true) {
                        el.setAttribute(k, "");
                        continue;
                    } else {
                        el.setAttribute(k, v);
                    }
                }
            }
            append(el, children);
            return el;
        }

        /* Create shortcuts for every known HTML element */
        [
            "a",
            "abbr",
            "acronym",
            "address",
            "applet",
            "area",
            "article",
            "aside",
            "audio",
            "b",
            "base",
            "basefont",
            "bdo",
            "big",
            "blockquote",
            "body",
            "br",
            "button",
            "canvas",
            "caption",
            "center",
            "cite",
            "code",
            "col",
            "colgroup",
            "datalist",
            "dd",
            "del",
            "details",
            "dfn",
            "dialog",
            "div",
            "dl",
            "dt",
            "em",
            "embed",
            "fieldset",
            "figcaption",
            "figure",
            "font",
            "footer",
            "form",
            "frame",
            "frameset",
            "head",
            "header",
            "h1",
            "h2",
            "h3",
            "h4",
            "h5",
            "h6",
            "hr",
            "html",
            "i",
            "iframe",
            "img",
            "input",
            "ins",
            "kbd",
            "label",
            "legend",
            "li",
            "link",
            "main",
            "map",
            "mark",
            "meta",
            "meter",
            "nav",
            "nobr",
            "noscript",
            "object",
            "ol",
            "optgroup",
            "option",
            "output",
            "p",
            "param",
            "pre",
            "progress",
            "q",
            "s",
            "samp",
            "script",
            "section",
            "select",
            "small",
            "source",
            "span",
            "strike",
            "strong",
            "style",
            "sub",
            "summary",
            "sup",
            "table",
            "tbody",
            "td",
            "template",
            "textarea",
            "tfoot",
            "th",
            "thead",
            "time",
            "title",
            "tr",
            "u",
            "ul",
            "var",
            "video",
            "wbr",
            "xmp",
        ].forEach(tagname => {
            mk[tagname] = (...args) => mk(tagname, ...args);
        });

        function* nodesFromChildList(children) {
            for (const child of children.flat(Infinity)) {
                if (child instanceof Node) {
                    yield child;
                } else {
                    yield new Text(child);
                }
            }
        }
        function append(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                if (el instanceof Node) el.appendChild(child);
                else el.push(child);
            }
            return el;
        }

        function insertAfter(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                el.parentNode.insertBefore(child, el.nextSibling);
            }
            return el;
        }

        function clearContents(el) {
            el.innerHTML = "";
            return el;
        }

        function parseHTML(markup) {
            if (markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
                const doc = document.implementation.createHTMLDocument("");
                doc.documentElement.innerHTML = markup;
                return doc;
            } else {
                const el = mk.template({});
                el.innerHTML = markup;
                return el.content;
            }
        }</script>
    <script>/* Boilerplate: script-dfn-panel */
        "use strict";
        {
            let dfnPanelData = {
                "03675365": { "dfnID": "03675365", "dfnText": "event handler IDL attribute", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-handler-idl-attributes" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes" },
                "03afaf9c": { "dfnID": "03afaf9c", "dfnText": "empty", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-empty" }], "title": "2. Model" }], "url": "https://infra.spec.whatwg.org/#list-empty" },
                "04274997": { "dfnID": "04274997", "dfnText": "topmost popover ancestor", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-topmost-popover-ancestor" }], "title": "2. Model" }], "url": "https://html.spec.whatwg.org/multipage/popover.html#topmost-popover-ancestor" },
                "0698d556": { "dfnID": "0698d556", "dfnText": "string", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-string" }], "title": "2. Model" }], "url": "https://infra.spec.whatwg.org/#string" },
                "06cba118": { "dfnID": "06cba118", "dfnText": "allowfullscreen", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-iframe-allowfullscreen" }, { "id": "ref-for-attr-iframe-allowfullscreen\u2460" }], "title": "6. Permissions Policy\nIntegration" }, { "refs": [{ "id": "ref-for-attr-iframe-allowfullscreen\u2461" }], "title": "7. Security and Privacy Considerations" }], "url": "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen" },
                "08e2f34f": { "dfnID": "08e2f34f", "dfnText": "fully unlock the screen orientation steps", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-fully-unlock-the-screen-orientation-steps" }], "title": "3. API" }], "url": "https://w3c.github.io/screen-orientation/#dfn-fully-unlock-the-screen-orientation-steps" },
                "0c0ceb78": { "dfnID": "0c0ceb78", "dfnText": "bubbles", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-event-bubbles" }], "title": "2. Model" }], "url": "https://dom.spec.whatwg.org/#dom-event-bubbles" },
                "0e3ba2bf": { "dfnID": "0e3ba2bf", "dfnText": "Permissions-Policy", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-permissions-policy-header" }], "title": "7. Security and Privacy Considerations" }], "url": "https://w3c.github.io/webappsec-permissions-policy/#permissions-policy-header" },
                "0e3ba9f8": { "dfnID": "0e3ba9f8", "dfnText": "fully active", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-fully-active" }, { "id": "ref-for-fully-active\u2460" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" },
                "0e8de730": { "dfnID": "0e8de730", "dfnText": "tuple", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-tuple" }], "title": "2. Model" }], "url": "https://infra.spec.whatwg.org/#tuple" },
                "13dd6cae": { "dfnID": "13dd6cae", "dfnText": "node navigable", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-node-navigable" }, { "id": "ref-for-node-navigable\u2460" }, { "id": "ref-for-node-navigable\u2461" }, { "id": "ref-for-node-navigable\u2462" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable" },
                "1570624a": { "dfnID": "1570624a", "dfnText": "default allowlist", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-policy-controlled-feature-default-allowlist" }], "title": "6. Permissions Policy\nIntegration" }], "url": "https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature-default-allowlist" },
                "16d07e10": { "dfnID": "16d07e10", "dfnText": "for each", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-iterate" }, { "id": "ref-for-list-iterate\u2460" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-list-iterate\u2461" }, { "id": "ref-for-list-iterate\u2462" }, { "id": "ref-for-list-iterate\u2463" }], "title": "3. API" }], "url": "https://infra.spec.whatwg.org/#list-iterate" },
                "1812300f": { "dfnID": "1812300f", "dfnText": "dialog", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-dialog-element" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-the-dialog-element\u2460" }, { "id": "ref-for-the-dialog-element\u2461" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element" },
                "1cd7ff31": { "dfnID": "1cd7ff31", "dfnText": "ShadowRoot", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-shadowroot" }], "title": "3. API" }], "url": "https://dom.spec.whatwg.org/#shadowroot" },
                "25538777": { "dfnID": "25538777", "dfnText": "tree order", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-tree-order" }, { "id": "ref-for-concept-tree-order\u2460" }, { "id": "ref-for-concept-tree-order\u2461" }], "title": "3. API" }], "url": "https://dom.spec.whatwg.org/#concept-tree-order" },
                "27d9b7ea": { "dfnID": "27d9b7ea", "dfnText": "element", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-element" }, { "id": "ref-for-concept-element\u2460" }, { "id": "ref-for-concept-element\u2461" }, { "id": "ref-for-concept-element\u2462" }, { "id": "ref-for-concept-element\u2463" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-concept-element\u2464" }, { "id": "ref-for-concept-element\u2465" }, { "id": "ref-for-concept-element\u2466" }, { "id": "ref-for-concept-element\u2467" }, { "id": "ref-for-concept-element\u2468" }, { "id": "ref-for-concept-element\u2460\u24ea" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-concept-element\u2460\u2460" }], "title": "5.1. :fullscreen pseudo-class" }], "url": "https://dom.spec.whatwg.org/#concept-element" },
                "296f3551": { "dfnID": "296f3551", "dfnText": "Element", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-element" }, { "id": "ref-for-element\u2460" }, { "id": "ref-for-element\u2461" }, { "id": "ref-for-element\u2462" }], "title": "3. API" }], "url": "https://dom.spec.whatwg.org/#element" },
                "30717154": { "dfnID": "30717154", "dfnText": "top-level traversable", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-nav-top" }, { "id": "ref-for-nav-top\u2460" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top" },
                "31d6b6c6": { "dfnID": "31d6b6c6", "dfnText": "Unscopable", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-Unscopable" }], "title": "3. API" }], "url": "https://webidl.spec.whatwg.org/#Unscopable" },
                "35972864": { "dfnID": "35972864", "dfnText": "active document", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-nav-document" }, { "id": "ref-for-nav-document\u2460" }, { "id": "ref-for-nav-document\u2461" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" },
                "3610bd67": { "dfnID": "3610bd67", "dfnText": "allowed to use", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-allowed-to-use" }, { "id": "ref-for-allowed-to-use\u2460" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-allowed-to-use\u2461" }], "title": "6. Permissions Policy\nIntegration" }], "url": "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use" },
                "3fcc582f": { "dfnID": "3fcc582f", "dfnText": "shadow root", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-shadow-root" }], "title": "3. API" }], "url": "https://dom.spec.whatwg.org/#concept-shadow-root" },
                "4013a022": { "dfnID": "4013a022", "dfnText": "this", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-this" }, { "id": "ref-for-this\u2460" }, { "id": "ref-for-this\u2461" }, { "id": "ref-for-this\u2462" }, { "id": "ref-for-this\u2463" }, { "id": "ref-for-this\u2464" }, { "id": "ref-for-this\u2465" }, { "id": "ref-for-this\u2466" }, { "id": "ref-for-this\u2467" }, { "id": "ref-for-this\u2468" }, { "id": "ref-for-this\u2460\u24ea" }, { "id": "ref-for-this\u2460\u2460" }, { "id": "ref-for-this\u2460\u2461" }, { "id": "ref-for-this\u2460\u2462" }, { "id": "ref-for-this\u2460\u2463" }, { "id": "ref-for-this\u2460\u2464" }, { "id": "ref-for-this\u2460\u2465" }, { "id": "ref-for-this\u2460\u2466" }], "title": "3. API" }], "url": "https://webidl.spec.whatwg.org/#this" },
                "4411082c": { "dfnID": "4411082c", "dfnText": "unloading document cleanup steps", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-unloading-document-cleanup-steps" }], "title": "2. Model" }], "url": "https://html.spec.whatwg.org/multipage/document-lifecycle.html#unloading-document-cleanup-steps" },
                "459b02ed": { "dfnID": "459b02ed", "dfnText": "LegacyLenientSetter", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-LegacyLenientSetter" }, { "id": "ref-for-LegacyLenientSetter\u2460" }, { "id": "ref-for-LegacyLenientSetter\u2461" }], "title": "3. API" }], "url": "https://webidl.spec.whatwg.org/#LegacyLenientSetter" },
                "47fe679e": { "dfnID": "47fe679e", "dfnText": "transient activation", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-transient-activation" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/interaction.html#transient-activation" },
                "48761476": { "dfnID": "48761476", "dfnText": "close watcher", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-close-watcher" }], "title": "4. UI" }], "url": "https://html.spec.whatwg.org/multipage/interaction.html#close-watcher" },
                "5216e1a0": { "dfnID": "5216e1a0", "dfnText": "node document", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-node-document" }, { "id": "ref-for-concept-node-document\u2460" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-concept-node-document\u2461" }, { "id": "ref-for-concept-node-document\u2462" }, { "id": "ref-for-concept-node-document\u2463" }, { "id": "ref-for-concept-node-document\u2464" }, { "id": "ref-for-concept-node-document\u2465" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-concept-node-document\u2466" }], "title": "5.1. :fullscreen pseudo-class" }], "url": "https://dom.spec.whatwg.org/#concept-node-document" },
                "5372cca8": { "dfnID": "5372cca8", "dfnText": "boolean", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-boolean" }, { "id": "ref-for-idl-boolean\u2460" }], "title": "3. API" }], "url": "https://webidl.spec.whatwg.org/#idl-boolean" },
                "57435598": { "dfnID": "57435598", "dfnText": "allow", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-iframe-allow" }], "title": "6. Permissions Policy\nIntegration" }, { "refs": [{ "id": "ref-for-attr-iframe-allow\u2460" }], "title": "7. Security and Privacy Considerations" }], "url": "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow" },
                "58a8f724": { "dfnID": "58a8f724", "dfnText": "shadow host", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-element-shadow-host" }], "title": "5.1. :fullscreen pseudo-class" }], "url": "https://dom.spec.whatwg.org/#element-shadow-host" },
                "5afbefcd": { "dfnID": "5afbefcd", "dfnText": "item", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-item" }], "title": "3. API" }], "url": "https://infra.spec.whatwg.org/#list-item" },
                "5d233601": { "dfnID": "5d233601", "dfnText": "host", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-documentfragment-host" }], "title": "3. API" }], "url": "https://dom.spec.whatwg.org/#concept-documentfragment-host" },
                "5d7209e9": { "dfnID": "5d7209e9", "dfnText": "Window", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-window" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" },
                "5f90bbfb": { "dfnID": "5f90bbfb", "dfnText": "undefined", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-undefined" }, { "id": "ref-for-idl-undefined\u2460" }], "title": "3. API" }], "url": "https://webidl.spec.whatwg.org/#idl-undefined" },
                "5fd23811": { "dfnID": "5fd23811", "dfnText": "fire an event", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-event-fire" }], "title": "2. Model" }], "url": "https://dom.spec.whatwg.org/#concept-event-fire" },
                "62e9a98d": { "dfnID": "62e9a98d", "dfnText": "removing steps", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-node-remove-ext" }], "title": "2. Model" }], "url": "https://dom.spec.whatwg.org/#concept-node-remove-ext" },
                "692595fe": { "dfnID": "692595fe", "dfnText": "ordered set", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-ordered-set" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-ordered-set\u2460" }, { "id": "ref-for-ordered-set\u2461" }, { "id": "ref-for-ordered-set\u2462" }], "title": "3. API" }], "url": "https://infra.spec.whatwg.org/#ordered-set" },
                "6a5a59a0": { "dfnID": "6a5a59a0", "dfnText": "event handler", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-handlers" }, { "id": "ref-for-event-handlers\u2460" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers" },
                "746cc3ba": { "dfnID": "746cc3ba", "dfnText": "namespace", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-element-namespace" }, { "id": "ref-for-concept-element-namespace\u2460" }], "title": "3. API" }], "url": "https://dom.spec.whatwg.org/#concept-element-namespace" },
                "762210c0": { "dfnID": "762210c0", "dfnText": "container", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-nav-container" }, { "id": "ref-for-nav-container\u2460" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-container" },
                "7b0d918d": { "dfnID": "7b0d918d", "dfnText": "break", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-iteration-break" }, { "id": "ref-for-iteration-break\u2460" }, { "id": "ref-for-iteration-break\u2461" }, { "id": "ref-for-iteration-break\u2462" }], "title": "3. API" }], "url": "https://infra.spec.whatwg.org/#iteration-break" },
                "7dc5cd57": { "dfnID": "7dc5cd57", "dfnText": "close request", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-close-request" }, { "id": "ref-for-close-request\u2460" }], "title": "4. UI" }], "url": "https://html.spec.whatwg.org/multipage/interaction.html#close-request" },
                "7e214bfc": { "dfnID": "7e214bfc", "dfnText": "hidden", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-popover-hidden-state" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/popover.html#popover-hidden-state" },
                "82529e79": { "dfnID": "82529e79", "dfnText": "descendant navigables", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-descendant-navigables" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#descendant-navigables" },
                "82ca3efc": { "dfnID": "82ca3efc", "dfnText": "TypeError", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-exceptiondef-typeerror" }, { "id": "ref-for-exceptiondef-typeerror\u2460" }, { "id": "ref-for-exceptiondef-typeerror\u2461" }], "title": "3. API" }], "url": "https://webidl.spec.whatwg.org/#exceptiondef-typeerror" },
                "83b82cf5": { "dfnID": "83b82cf5", "dfnText": "popover visibility state", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-popover-visibility-state" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/popover.html#popover-visibility-state" },
                "85394472": { "dfnID": "85394472", "dfnText": "Document", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-document" }, { "id": "ref-for-document\u2460" }], "title": "3. API" }], "url": "https://dom.spec.whatwg.org/#document" },
                "87fcd40c": { "dfnID": "87fcd40c", "dfnText": "iframe", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-iframe-element" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-the-iframe-element\u2460" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-the-iframe-element\u2461" }], "title": "6. Permissions Policy\nIntegration" }, { "refs": [{ "id": "ref-for-the-iframe-element\u2462" }, { "id": "ref-for-the-iframe-element\u2463" }], "title": "7. Security and Privacy Considerations" }], "url": "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" },
                "8b547cc7": { "dfnID": "8b547cc7", "dfnText": "composed", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-event-composed" }], "title": "2. Model" }], "url": "https://dom.spec.whatwg.org/#dom-event-composed" },
                "8f59bb58": { "dfnID": "8f59bb58", "dfnText": "top layer", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-document-top-layer" }, { "id": "ref-for-document-top-layer\u2460" }, { "id": "ref-for-document-top-layer\u2461" }, { "id": "ref-for-document-top-layer\u2462" }, { "id": "ref-for-document-top-layer\u2463" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-document-top-layer\u2464" }, { "id": "ref-for-document-top-layer\u2465" }, { "id": "ref-for-document-top-layer\u2466" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-document-top-layer\u2467" }], "title": "Previously-hosted definitions" }], "url": "https://drafts.csswg.org/css-position-4/#document-top-layer" },
                "95ea01a3": { "dfnID": "95ea01a3", "dfnText": "triggered by a user generated orientation change", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-triggered-by-a-user-generated-orientation-change" }], "title": "3. API" }], "url": "https://w3c.github.io/screen-orientation/#dfn-triggered-by-a-user-generated-orientation-change" },
                "9638f92b": { "dfnID": "9638f92b", "dfnText": "connected", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-connected" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-connected\u2460" }, { "id": "ref-for-connected\u2461" }, { "id": "ref-for-connected\u2462" }], "title": "3. API" }], "url": "https://dom.spec.whatwg.org/#connected" },
                "9ac2aadf": { "dfnID": "9ac2aadf", "dfnText": "DocumentOrShadowRoot", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-documentorshadowroot" }], "title": "3. API" }], "url": "https://dom.spec.whatwg.org/#documentorshadowroot" },
                "9c19b7fc": { "dfnID": "9c19b7fc", "dfnText": "navigable", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-navigable" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#navigable" },
                "9d386f55": { "dfnID": "9d386f55", "dfnText": "event handler event type", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-handler-event-type" }, { "id": "ref-for-event-handler-event-type\u2460" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type" },
                "a3b18719": { "dfnID": "a3b18719", "dfnText": "append", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-set-append" }, { "id": "ref-for-set-append\u2460" }, { "id": "ref-for-set-append\u2461" }, { "id": "ref-for-set-append\u2462" }, { "id": "ref-for-set-append\u2463" }, { "id": "ref-for-set-append\u2464" }, { "id": "ref-for-set-append\u2465" }], "title": "3. API" }], "url": "https://infra.spec.whatwg.org/#set-append" },
                "a41102eb": { "dfnID": "a41102eb", "dfnText": "permissions policy", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-document-permissions-policy" }], "title": "6. Permissions Policy\nIntegration" }], "url": "https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy" },
                "a72449dd": { "dfnID": "a72449dd", "dfnText": "in parallel", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-in-parallel" }, { "id": "ref-for-in-parallel\u2460" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" },
                "a85a691e": { "dfnID": "a85a691e", "dfnText": "shadow-including inclusive descendant", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-shadow-including-inclusive-descendant" }], "title": "2. Model" }], "url": "https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-descendant" },
                "a973e0fe": { "dfnID": "a973e0fe", "dfnText": "document", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-document" }, { "id": "ref-for-concept-document\u2460" }, { "id": "ref-for-concept-document\u2461" }, { "id": "ref-for-concept-document\u2462" }, { "id": "ref-for-concept-document\u2463" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-concept-document\u2464" }, { "id": "ref-for-concept-document\u2465" }, { "id": "ref-for-concept-document\u2466" }, { "id": "ref-for-concept-document\u2467" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-concept-document\u2468" }], "title": "6. Permissions Policy\nIntegration" }, { "refs": [{ "id": "ref-for-concept-document\u2460\u24ea" }], "title": "7. Security and Privacy Considerations" }], "url": "https://dom.spec.whatwg.org/#concept-document" },
                "aca22383": { "dfnID": "aca22383", "dfnText": "consume user activation", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-consume-user-activation" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/interaction.html#consume-user-activation" },
                "ae8def21": { "dfnID": "ae8def21", "dfnText": "contain", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-contain" }], "title": "2. Model" }], "url": "https://infra.spec.whatwg.org/#list-contain" },
                "b9a45e7f": { "dfnID": "b9a45e7f", "dfnText": "::backdrop", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-selectordef-backdrop" }], "title": "Previously-hosted definitions" }], "url": "https://drafts.csswg.org/css-position-4/#selectordef-backdrop" },
                "bdbd19d1": { "dfnID": "bdbd19d1", "dfnText": "Promise", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-promise" }, { "id": "ref-for-idl-promise\u2460" }], "title": "3. API" }], "url": "https://webidl.spec.whatwg.org/#idl-promise" },
                "c200d9ce": { "dfnID": "c200d9ce", "dfnText": "retargeting", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-retarget" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-retarget\u2460" }], "title": "5.1. :fullscreen pseudo-class" }], "url": "https://dom.spec.whatwg.org/#retarget" },
                "c6d19e56": { "dfnID": "c6d19e56", "dfnText": "event loop", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-loop" }], "title": "2. Model" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-loop" },
                "cbdc89b4": { "dfnID": "cbdc89b4", "dfnText": "while", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-iteration-while" }], "title": "3. API" }], "url": "https://infra.spec.whatwg.org/#iteration-while" },
                "cc6d9aed": { "dfnID": "cc6d9aed", "dfnText": "event handler content attribute", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-handler-content-attributes" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-content-attributes" },
                "cc890cc1": { "dfnID": "cc890cc1", "dfnText": "policy-controlled feature", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-policy-controlled-feature" }], "title": "6. Permissions Policy\nIntegration" }], "url": "https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature" },
                "collect-documents-to-unfullscreen": { "dfnID": "collect-documents-to-unfullscreen", "dfnText": "collect documents to unfullscreen", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-collect-documents-to-unfullscreen" }, { "id": "ref-for-collect-documents-to-unfullscreen\u2460" }], "title": "3. API" }], "url": "#collect-documents-to-unfullscreen" },
                "css-pc-fullscreen": { "dfnID": "css-pc-fullscreen", "dfnText": ":fullscreen", "external": false, "refSections": [], "url": "#css-pc-fullscreen" },
                "d080b91a": { "dfnID": "d080b91a", "dfnText": "container policy", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-container-policy" }], "title": "6. Permissions Policy\nIntegration" }], "url": "https://w3c.github.io/webappsec-permissions-policy/#container-policy" },
                "d4a9f2b2": { "dfnID": "d4a9f2b2", "dfnText": "remove from the top layer immediately", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-remove-an-element-from-the-top-layer-immediately" }, { "id": "ref-for-remove-an-element-from-the-top-layer-immediately\u2460" }, { "id": "ref-for-remove-an-element-from-the-top-layer-immediately\u2461" }], "title": "2. Model" }], "url": "https://drafts.csswg.org/css-position-4/#remove-an-element-from-the-top-layer-immediately" },
                "dictdef-fullscreenoptions": { "dfnID": "dictdef-fullscreenoptions", "dfnText": "FullscreenOptions", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-fullscreenoptions" }], "title": "3. API" }], "url": "#dictdef-fullscreenoptions" },
                "dom-document-exitfullscreen": { "dfnID": "dom-document-exitfullscreen", "dfnText": "exitFullscreen()", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-document-exitfullscreen" }, { "id": "ref-for-dom-document-exitfullscreen\u2460" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-dom-document-exitfullscreen\u2461" }, { "id": "ref-for-dom-document-exitfullscreen\u2462" }], "title": "4. UI" }], "url": "#dom-document-exitfullscreen" },
                "dom-document-fullscreen": { "dfnID": "dom-document-fullscreen", "dfnText": "fullscreen", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-document-fullscreen" }], "title": "3. API" }], "url": "#dom-document-fullscreen" },
                "dom-document-fullscreenelement": { "dfnID": "dom-document-fullscreenelement", "dfnText": "fullscreenElement", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-document-fullscreenelement" }, { "id": "ref-for-dom-document-fullscreenelement\u2460" }, { "id": "ref-for-dom-document-fullscreenelement\u2461" }, { "id": "ref-for-dom-document-fullscreenelement\u2462" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-dom-document-fullscreenelement\u2463" }], "title": "5.1. :fullscreen pseudo-class" }], "url": "#dom-document-fullscreenelement" },
                "dom-document-fullscreenenabled": { "dfnID": "dom-document-fullscreenenabled", "dfnText": "fullscreenEnabled", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-document-fullscreenenabled" }, { "id": "ref-for-dom-document-fullscreenenabled\u2460" }], "title": "3. API" }], "url": "#dom-document-fullscreenenabled" },
                "dom-element-requestfullscreen": { "dfnID": "dom-element-requestfullscreen", "dfnText": "requestFullscreen(options)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-element-requestfullscreen" }, { "id": "ref-for-dom-element-requestfullscreen\u2460" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-dom-element-requestfullscreen\u2461" }], "title": "4. UI" }, { "refs": [{ "id": "ref-for-dom-element-requestfullscreen\u2462" }], "title": "7. Security and Privacy Considerations" }], "url": "#dom-element-requestfullscreen" },
                "dom-element-requestfullscreen-options-options": { "dfnID": "dom-element-requestfullscreen-options-options", "dfnText": "options", "external": false, "refSections": [], "url": "#dom-element-requestfullscreen-options-options" },
                "dom-fullscreennavigationui-auto": { "dfnID": "dom-fullscreennavigationui-auto", "dfnText": "auto", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-fullscreennavigationui-auto" }, { "id": "ref-for-dom-fullscreennavigationui-auto\u2460" }], "title": "3. API" }], "url": "#dom-fullscreennavigationui-auto" },
                "dom-fullscreennavigationui-hide": { "dfnID": "dom-fullscreennavigationui-hide", "dfnText": "hide", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-fullscreennavigationui-hide" }, { "id": "ref-for-dom-fullscreennavigationui-hide\u2460" }], "title": "3. API" }], "url": "#dom-fullscreennavigationui-hide" },
                "dom-fullscreennavigationui-show": { "dfnID": "dom-fullscreennavigationui-show", "dfnText": "show", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-fullscreennavigationui-show" }, { "id": "ref-for-dom-fullscreennavigationui-show\u2460" }], "title": "3. API" }], "url": "#dom-fullscreennavigationui-show" },
                "dom-fullscreenoptions-navigationui": { "dfnID": "dom-fullscreenoptions-navigationui", "dfnText": "navigationUI", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-fullscreenoptions-navigationui" }, { "id": "ref-for-dom-fullscreenoptions-navigationui\u2460" }], "title": "3. API" }], "url": "#dom-fullscreenoptions-navigationui" },
                "e6cc3311": { "dfnID": "e6cc3311", "dfnText": "tree", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-tree" }], "title": "3. API" }], "url": "https://dom.spec.whatwg.org/#concept-tree" },
                "e99bd18e": { "dfnID": "e99bd18e", "dfnText": "relevant global object", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-relevant-global" }, { "id": "ref-for-concept-relevant-global\u2460" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" },
                "enumdef-fullscreennavigationui": { "dfnID": "enumdef-fullscreennavigationui", "dfnText": "FullscreenNavigationUI", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-enumdef-fullscreennavigationui" }], "title": "3. API" }], "url": "#enumdef-fullscreennavigationui" },
                "eventdef-document-fullscreenchange": { "dfnID": "eventdef-document-fullscreenchange", "dfnText": "fullscreenchange", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-eventdef-document-fullscreenchange" }, { "id": "ref-for-eventdef-document-fullscreenchange\u2460" }, { "id": "ref-for-eventdef-document-fullscreenchange\u2461" }, { "id": "ref-for-eventdef-document-fullscreenchange\u2462" }], "title": "3. API" }], "url": "#eventdef-document-fullscreenchange" },
                "eventdef-document-fullscreenerror": { "dfnID": "eventdef-document-fullscreenerror", "dfnText": "fullscreenerror", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-eventdef-document-fullscreenerror" }], "title": "3. API" }], "url": "#eventdef-document-fullscreenerror" },
                "exit-fullscreen": { "dfnID": "exit-fullscreen", "dfnText": "exit fullscreen", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-exit-fullscreen" }, { "id": "ref-for-exit-fullscreen\u2460" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-exit-fullscreen\u2461" }], "title": "3. API" }], "url": "#exit-fullscreen" },
                "f052b1ea": { "dfnID": "f052b1ea", "dfnText": "HTML namespace", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-html-namespace" }, { "id": "ref-for-html-namespace\u2460" }], "title": "3. API" }], "url": "https://infra.spec.whatwg.org/#html-namespace" },
                "f0951476": { "dfnID": "f0951476", "dfnText": "EventHandler", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-eventhandler" }, { "id": "ref-for-eventhandler\u2460" }, { "id": "ref-for-eventhandler\u2461" }, { "id": "ref-for-eventhandler\u2462" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" },
                "f23dc013": { "dfnID": "f23dc013", "dfnText": "child navigable", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-child-navigable" }], "title": "7. Security and Privacy Considerations" }], "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable" },
                "f3abaffb": { "dfnID": "f3abaffb", "dfnText": "add to the top layer", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-add-an-element-to-the-top-layer" }], "title": "2. Model" }], "url": "https://drafts.csswg.org/css-position-4/#add-an-element-to-the-top-layer" },
                "f937b7b6": { "dfnID": "f937b7b6", "dfnText": "continue", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-iteration-continue" }], "title": "3. API" }], "url": "https://infra.spec.whatwg.org/#iteration-continue" },
                "fa3971e0": { "dfnID": "fa3971e0", "dfnText": "hide all popovers until", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-hide-all-popovers-until" }], "title": "2. Model" }], "url": "https://html.spec.whatwg.org/multipage/popover.html#hide-all-popovers-until" },
                "fd4d25d9": { "dfnID": "fd4d25d9", "dfnText": "close request steps", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-close-request-steps" }], "title": "4. UI" }], "url": "https://html.spec.whatwg.org/multipage/interaction.html#close-request-steps" },
                "fefa5851": { "dfnID": "fefa5851", "dfnText": "shadow-including tree order", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-shadow-including-tree-order" }], "title": "2. Model" }], "url": "https://dom.spec.whatwg.org/#concept-shadow-including-tree-order" },
                "fullscreen-an-element": { "dfnID": "fullscreen-an-element", "dfnText": "fullscreen an element", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-fullscreen-an-element" }, { "id": "ref-for-fullscreen-an-element\u2460" }], "title": "3. API" }], "url": "#fullscreen-an-element" },
                "fullscreen-element": { "dfnID": "fullscreen-element", "dfnText": "fullscreen element", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-fullscreen-element" }, { "id": "ref-for-fullscreen-element\u2460" }, { "id": "ref-for-fullscreen-element\u2461" }, { "id": "ref-for-fullscreen-element\u2462" }, { "id": "ref-for-fullscreen-element\u2463" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-fullscreen-element\u2464" }, { "id": "ref-for-fullscreen-element\u2465" }, { "id": "ref-for-fullscreen-element\u2466" }, { "id": "ref-for-fullscreen-element\u2467" }, { "id": "ref-for-fullscreen-element\u2468" }, { "id": "ref-for-fullscreen-element\u2460\u24ea" }, { "id": "ref-for-fullscreen-element\u2460\u2460" }, { "id": "ref-for-fullscreen-element\u2460\u2461" }, { "id": "ref-for-fullscreen-element\u2460\u2462" }, { "id": "ref-for-fullscreen-element\u2460\u2463" }, { "id": "ref-for-fullscreen-element\u2460\u2464" }, { "id": "ref-for-fullscreen-element\u2460\u2465" }, { "id": "ref-for-fullscreen-element\u2460\u2466" }, { "id": "ref-for-fullscreen-element\u2460\u2467" }, { "id": "ref-for-fullscreen-element\u2460\u2468" }, { "id": "ref-for-fullscreen-element\u2461\u24ea" }, { "id": "ref-for-fullscreen-element\u2461\u2460" }, { "id": "ref-for-fullscreen-element\u2461\u2461" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-fullscreen-element\u2461\u2462" }, { "id": "ref-for-fullscreen-element\u2461\u2463" }], "title": "5.1. :fullscreen pseudo-class" }], "url": "#fullscreen-element" },
                "fullscreen-element-ready-check": { "dfnID": "fullscreen-element-ready-check", "dfnText": "fullscreen element ready check", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-fullscreen-element-ready-check" }, { "id": "ref-for-fullscreen-element-ready-check\u2460" }], "title": "3. API" }], "url": "#fullscreen-element-ready-check" },
                "fullscreen-feature": { "dfnID": "fullscreen-feature", "dfnText": "fullscreen", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-fullscreen-feature" }, { "id": "ref-for-fullscreen-feature\u2460" }], "title": "3. API" }], "url": "#fullscreen-feature" },
                "fullscreen-flag": { "dfnID": "fullscreen-flag", "dfnText": "fullscreen flag", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-fullscreen-flag" }, { "id": "ref-for-fullscreen-flag\u2460" }, { "id": "ref-for-fullscreen-flag\u2461" }, { "id": "ref-for-fullscreen-flag\u2462" }, { "id": "ref-for-fullscreen-flag\u2463" }, { "id": "ref-for-fullscreen-flag\u2464" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-fullscreen-flag\u2465" }, { "id": "ref-for-fullscreen-flag\u2466" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-fullscreen-flag\u2467" }], "title": "5.1. :fullscreen pseudo-class" }], "url": "#fullscreen-flag" },
                "fullscreen-is-supported": { "dfnID": "fullscreen-is-supported", "dfnText": "Fullscreen is supported", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-fullscreen-is-supported" }, { "id": "ref-for-fullscreen-is-supported\u2460" }, { "id": "ref-for-fullscreen-is-supported\u2461" }], "title": "3. API" }], "url": "#fullscreen-is-supported" },
                "fully-exit-fullscreen": { "dfnID": "fully-exit-fullscreen", "dfnText": "fully exit fullscreen", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-fully-exit-fullscreen" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-fully-exit-fullscreen\u2460" }], "title": "4. UI" }], "url": "#fully-exit-fullscreen" },
                "handler-document-onfullscreenchange": { "dfnID": "handler-document-onfullscreenchange", "dfnText": "onfullscreenchange", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-handler-document-onfullscreenchange" }, { "id": "ref-for-handler-document-onfullscreenchange\u2460" }], "title": "3. API" }], "url": "#handler-document-onfullscreenchange" },
                "handler-document-onfullscreenerror": { "dfnID": "handler-document-onfullscreenerror", "dfnText": "onfullscreenerror", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-handler-document-onfullscreenerror" }, { "id": "ref-for-handler-document-onfullscreenerror\u2460" }], "title": "3. API" }], "url": "#handler-document-onfullscreenerror" },
                "iframe-fullscreen-flag": { "dfnID": "iframe-fullscreen-flag", "dfnText": "iframe fullscreen flag", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-iframe-fullscreen-flag" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-iframe-fullscreen-flag\u2460" }, { "id": "ref-for-iframe-fullscreen-flag\u2461" }], "title": "3. API" }], "url": "#iframe-fullscreen-flag" },
                "list-of-pending-fullscreen-events": { "dfnID": "list-of-pending-fullscreen-events", "dfnText": "list of pending fullscreen events", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-list-of-pending-fullscreen-events" }, { "id": "ref-for-list-of-pending-fullscreen-events\u2460" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-list-of-pending-fullscreen-events\u2461" }, { "id": "ref-for-list-of-pending-fullscreen-events\u2462" }, { "id": "ref-for-list-of-pending-fullscreen-events\u2463" }, { "id": "ref-for-list-of-pending-fullscreen-events\u2464" }, { "id": "ref-for-list-of-pending-fullscreen-events\u2465" }], "title": "3. API" }], "url": "#list-of-pending-fullscreen-events" },
                "run-the-fullscreen-steps": { "dfnID": "run-the-fullscreen-steps", "dfnText": "run the fullscreen steps", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-run-the-fullscreen-steps" }, { "id": "ref-for-run-the-fullscreen-steps\u2460" }], "title": "3. API" }], "url": "#run-the-fullscreen-steps" },
                "simple-fullscreen-document": { "dfnID": "simple-fullscreen-document", "dfnText": "simple fullscreen document", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-simple-fullscreen-document" }, { "id": "ref-for-simple-fullscreen-document\u2460" }, { "id": "ref-for-simple-fullscreen-document\u2461" }], "title": "3. API" }], "url": "#simple-fullscreen-document" },
                "unfullscreen-a-document": { "dfnID": "unfullscreen-a-document", "dfnText": "unfullscreen a document", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-unfullscreen-a-document" }, { "id": "ref-for-unfullscreen-a-document\u2460" }, { "id": "ref-for-unfullscreen-a-document\u2461" }], "title": "3. API" }], "url": "#unfullscreen-a-document" },
                "unfullscreen-an-element": { "dfnID": "unfullscreen-an-element", "dfnText": "unfullscreen an element", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-unfullscreen-an-element" }, { "id": "ref-for-unfullscreen-an-element\u2460" }, { "id": "ref-for-unfullscreen-an-element\u2461" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-unfullscreen-an-element\u2462" }, { "id": "ref-for-unfullscreen-an-element\u2463" }, { "id": "ref-for-unfullscreen-an-element\u2464" }], "title": "3. API" }], "url": "#unfullscreen-an-element" },
            };

            document.addEventListener("DOMContentLoaded", () => {
                genAllDfnPanels();

                document.body.addEventListener("click", (e) => {
                    // If not handled already, just hide all dfn panels.
                    hideAllDfnPanels();
                });
            });

            window.addEventListener("resize", () => {
                // Pin any visible dfn panel
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el => positionDfnPanel(el));
            });

            function genAllDfnPanels() {
                for (const panelData of Object.values(dfnPanelData)) {
                    const dfnID = panelData.dfnID;
                    const dfn = document.getElementById(dfnID);
                    if (!dfn) {
                        console.log(`Can't find dfn#${dfnID}.`, panelData);
                        continue;
                    }
                    dfn.panelData = panelData;
                    insertDfnPopupAction(dfn);
                }
            }

            function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
                const dfnPanel = mk.aside({
                    class: "dfn-panel on",
                    id: `infopanel-for-${dfnID}`,
                    "data-for": dfnID,
                    "aria-labelled-by": `infopaneltitle-for-${dfnID}`,
                },
                    mk.span({ id: `infopaneltitle-for-${dfnID}`, style: "display:none" },
                        `Info about the '${dfnText}' ${external ? "external" : ""} reference.`),
                    mk.a({ href: url, class: "dfn-link" }, url),
                    refSections.length == 0 ? [] :
                        mk.b({}, "Referenced in:"),
                    mk.ul({},
                        ...refSections.map(section =>
                            mk.li({},
                                ...section.refs.map((ref, refI) =>
                                    [
                                        mk.a({ href: `#${ref.id}` },
                                            (refI == 0) ? section.title : `(${refI + 1})`
                                        ),
                                        " ",
                                    ]
                                ),
                            ),
                        ),
                    ),
                    genLinkingSyntaxes(dfn),
                );

                dfnPanel.addEventListener('click', (event) => {
                    if (event.target.nodeName == 'A') {
                        scrollToTargetAndHighlight(event);
                        pinDfnPanel(dfnPanel);
                    }
                    event.stopPropagation();
                    refocusOnTarget(event);
                });
                dfnPanel.addEventListener('keydown', (event) => {
                    if (event.keyCode == 27) { // Escape key
                        hideDfnPanel({ dfnPanel });
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });

                dfnPanel.dfn = dfn;
                dfn.dfnPanel = dfnPanel;
                return dfnPanel;
            }



            function hideAllDfnPanels() {
                // Delete the currently-active dfn panel.
                queryAll(".dfn-panel").forEach(dfnPanel => hideDfnPanel({ dfnPanel }));
            }

            function showDfnPanel(dfn) {
                hideAllDfnPanels(); // Only display one at a time.

                dfn.setAttribute("aria-expanded", "true");

                const dfnPanel = genDfnPanel(dfn, dfn.panelData);

                // Give the dfn a unique tabindex, and then
                // give all the tabbable panel bits successive indexes.
                let tabIndex = 100;
                dfn.tabIndex = tabIndex++;
                const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
                for (const el of tabbable) {
                    el.tabIndex = tabIndex++;
                }

                append(document.body, dfnPanel);
                positionDfnPanel(dfnPanel);
            }

            function positionDfnPanel(dfnPanel) {
                const dfn = dfnPanel.dfn;
                const dfnPos = getBounds(dfn);
                dfnPanel.style.top = dfnPos.bottom + "px";
                dfnPanel.style.left = dfnPos.left + "px";

                const panelPos = dfnPanel.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
                    dfnPanel.style.left = newLeft + "px";
                }
            }

            function pinDfnPanel(dfnPanel) {
                // Switch it to "activated" state, which pins it.
                dfnPanel.classList.add("activated");
                dfnPanel.style.position = "fixed";
                dfnPanel.style.left = null;
                dfnPanel.style.top = null;
            }

            function hideDfnPanel({ dfn, dfnPanel }) {
                if (!dfnPanel) dfnPanel = dfn.dfnPanel;
                if (!dfn) dfn = dfnPanel.dfn;
                dfn.dfnPanel = undefined;
                dfnPanel.dfn = undefined;
                dfn.setAttribute("aria-expanded", "false");
                dfn.tabIndex = undefined;
                dfnPanel.remove()
            }

            function toggleDfnPanel(dfn) {
                if (dfn.dfnPanel) {
                    hideDfnPanel(dfn);
                } else {
                    showDfnPanel(dfn);
                }
            }

            function insertDfnPopupAction(dfn) {
                dfn.setAttribute('role', 'button');
                dfn.setAttribute('aria-expanded', 'false')
                dfn.tabIndex = 0;
                dfn.classList.add('has-dfn-panel');
                dfn.addEventListener('click', (event) => {
                    toggleDfnPanel(dfn);
                    event.stopPropagation();
                });
                dfn.addEventListener('keypress', (event) => {
                    const kc = event.keyCode;
                    // 32->Space, 13->Enter
                    if (kc == 32 || kc == 13) {
                        toggleDfnPanel(dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });
            }

            function refocusOnTarget(event) {
                const target = event.target;
                setTimeout(() => {
                    // Refocus on the event.target element.
                    // This is needed after browser scrolls to the destination.
                    target.focus();
                });
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function scrollToTargetAndHighlight(event) {
                let hash = event.target.hash;
                if (hash) {
                    hash = decodeURIComponent(hash.substring(1));
                    const dest = document.getElementById(hash);
                    if (dest) {
                        dest.classList.add('highlighted');
                        setTimeout(() => dest.classList.remove('highlighted'), 1000);
                    }
                }
            }

            // Functions, divided by link type, that wrap an autolink's
            // contents with the appropriate outer syntax.
            // Alternately, a string naming another type they format
            // the same as.
            function needsFor(type) {
                switch (type) {
                    case "descriptor":
                    case "value":
                    case "element-attr":
                    case "attr-value":
                    case "element-state":
                    case "method":
                    case "constructor":
                    case "argument":
                    case "attribute":
                    case "const":
                    case "dict-member":
                    case "event":
                    case "enum-value":
                    case "stringifier":
                    case "serializer":
                    case "iterator":
                    case "maplike":
                    case "setlike":
                    case "state":
                    case "mode":
                    case "context":
                    case "facet": return true;

                    default: return false;
                }
            }
            function refusesFor(type) {
                switch (type) {
                    case "property":
                    case "element":
                    case "interface":
                    case "namespace":
                    case "callback":
                    case "dictionary":
                    case "enum":
                    case "exception":
                    case "typedef":
                    case "http-header":
                    case "permission": return true;

                    default: return false;
                }
            }
            function linkFormatterFromType(type) {
                switch (type) {
                    case 'scheme':
                    case 'permission':
                    case 'dfn': return (text) => `[=${text}=]`;

                    case 'abstract-op': return (text) => `[\$${text}\$]`;

                    case 'function':
                    case 'at-rule':
                    case 'selector':
                    case 'value': return (text) => `''${text}''`;

                    case 'http-header': return (text) => `[:${text}:]`;

                    case 'interface':
                    case 'constructor':
                    case 'method':
                    case 'argument':
                    case 'attribute':
                    case 'callback':
                    case 'dictionary':
                    case 'dict-member':
                    case 'enum':
                    case 'enum-value':
                    case 'exception':
                    case 'const':
                    case 'typedef':
                    case 'stringifier':
                    case 'serializer':
                    case 'iterator':
                    case 'maplike':
                    case 'setlike':
                    case 'extended-attribute':
                    case 'event':
                    case 'idl': return (text) => `{{${text}}}`;

                    case 'element-state':
                    case 'element-attr':
                    case 'attr-value':
                    case 'element': return (element) => `<{${element}}>`;

                    case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

                    case 'type': return (text) => `<<${text}>>`;

                    case 'descriptor':
                    case 'property': return (text) => `'${text}'`;

                    default: return;
                };
            };

            function genLinkingSyntaxes(dfn) {
                if (dfn.tagName != "DFN") return;

                const type = dfn.getAttribute('data-dfn-type');
                if (!type) {
                    console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
                    return [];
                }

                // Return a function that wraps link text based on the type
                const linkFormatter = linkFormatterFromType(type);
                if (!linkFormatter) {
                    console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
                    return [];
                }

                let ltAlts;
                if (dfn.hasAttribute('data-lt')) {
                    ltAlts = dfn.getAttribute('data-lt')
                        .split("|")
                        .map(x => x.trim());
                } else {
                    ltAlts = [dfn.textContent.trim()];
                }
                if (type == "type") {
                    // lt of "<foo>", but "foo" is the interior;
                    // <<foo/bar>> is how you write it with a for,
                    // not <foo/<bar>> or whatever.
                    for (var i = 0; i < ltAlts.length; i++) {
                        const lt = ltAlts[i];
                        const match = /<(.*)>/.exec(lt);
                        if (match) { ltAlts[i] = match[1]; }
                    }
                }

                let forAlts;
                if (dfn.hasAttribute('data-dfn-for')) {
                    forAlts = dfn.getAttribute('data-dfn-for')
                        .split(",")
                        .map(x => x.trim());
                } else {
                    forAlts = [''];
                }

                let linkingSyntaxes = [];
                if (!needsFor(type)) {
                    for (const lt of ltAlts) {
                        linkingSyntaxes.push(linkFormatter(lt));
                    }
                }
                if (!refusesFor(type)) {
                    for (const f of forAlts) {
                        linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
                    }
                }
                return [
                    mk.b({}, 'Possible linking syntaxes:'),
                    mk.ul({},
                        ...linkingSyntaxes.map(link => {
                            const copyLink = async () =>
                                await navigator.clipboard.writeText(link);
                            return mk.li({},
                                mk.div({ class: 'link-item' },
                                    mk.button({
                                        class: 'copy-icon', title: 'Copy',
                                        type: 'button',
                                        _onclick: copyLink,
                                        tabindex: 0,
                                    }, mk.span({ class: 'icon' })),
                                    mk.span({}, link)
                                )
                            );
                        })
                    )
                ];
            }
        }
    </script>
    <script>/* Boilerplate: script-position-annos */
        "use strict";
        {
            function repositionAnnoPanels() {
                const panels = [...document.querySelectorAll("[data-anno-for]")];
                hydratePanels(panels);
                let vSoFar = 0;
                for (const panel of panels.sort(cmpTops)) {
                    if (panel.top < vSoFar) {
                        panel.top = vSoFar;
                        panel.style.top = vSoFar + "px";
                    }
                    vSoFar = panel.top + panel.height + 15;
                }
            }
            function hydratePanels(panels) {
                const main = document.querySelector("main");
                let mainRect;
                if (main) mainRect = main.getBoundingClientRect();
                // First display them all, if they're not already visible.
                for (const panel of panels) {
                    panel.classList.remove("unpositioned");
                }
                // Measure them all
                for (const panel of panels) {
                    const dfn = document.getElementById(panel.getAttribute("data-anno-for"));
                    if (!dfn) {
                        console.log("Can't find the annotation panel target:", panel);
                        continue;
                    }
                    panel.dfn = dfn;
                    panel.top = window.scrollY + dfn.getBoundingClientRect().top;
                    let panelRect = panel.getBoundingClientRect();
                    panel.height = panelRect.height;
                    if (main) {
                        panel.overlappingMain = panelRect.left < mainRect.right;
                    } else {
                        panel.overlappingMain = false;
                    }
                }
                // And finally position them
                for (const panel of panels) {
                    const dfn = panel.dfn;
                    if (!dfn) continue;
                    panel.style.top = panel.top + "px";
                    panel.classList.toggle("overlapping-main", panel.overlappingMain);
                }
            }

            function cmpTops(a, b) {
                return a.top - b.top;
            }

            window.addEventListener("load", repositionAnnoPanels);
            window.addEventListener("resize", repositionAnnoPanels);
        }
    </script>
    <script>/* Boilerplate: script-ref-hints */
        "use strict";
        {
            let refsData = {
                "#collect-documents-to-unfullscreen": { "displayText": "collect documents to unfullscreen", "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "collect documents to unfullscreen", "type": "dfn", "url": "#collect-documents-to-unfullscreen" },
                "#dictdef-fullscreenoptions": { "displayText": "FullscreenOptions", "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "FullscreenOptions", "type": "dictionary", "url": "#dictdef-fullscreenoptions" },
                "#dom-document-exitfullscreen": { "displayText": "exitFullscreen()", "export": true, "for_": ["Document"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "exitFullscreen()", "type": "method", "url": "#dom-document-exitfullscreen" },
                "#dom-document-fullscreen": { "displayText": "fullscreen", "export": true, "for_": ["Document"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreen", "type": "attribute", "url": "#dom-document-fullscreen" },
                "#dom-document-fullscreenelement": { "displayText": "fullscreenElement", "export": true, "for_": ["DocumentOrShadowRoot"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreenElement", "type": "attribute", "url": "#dom-document-fullscreenelement" },
                "#dom-document-fullscreenenabled": { "displayText": "fullscreenEnabled", "export": true, "for_": ["Document"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreenEnabled", "type": "attribute", "url": "#dom-document-fullscreenenabled" },
                "#dom-element-requestfullscreen": { "displayText": "requestFullscreen(options)", "export": true, "for_": ["Element"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "requestFullscreen(options)", "type": "method", "url": "#dom-element-requestfullscreen" },
                "#dom-fullscreennavigationui-auto": { "displayText": "\"auto\"", "export": true, "for_": ["FullscreenNavigationUI"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "\"auto\"", "type": "enum-value", "url": "#dom-fullscreennavigationui-auto" },
                "#dom-fullscreennavigationui-hide": { "displayText": "\"hide\"", "export": true, "for_": ["FullscreenNavigationUI"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "\"hide\"", "type": "enum-value", "url": "#dom-fullscreennavigationui-hide" },
                "#dom-fullscreennavigationui-show": { "displayText": "\"show\"", "export": true, "for_": ["FullscreenNavigationUI"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "\"show\"", "type": "enum-value", "url": "#dom-fullscreennavigationui-show" },
                "#dom-fullscreenoptions-navigationui": { "displayText": "navigationUI", "export": true, "for_": ["FullscreenOptions"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "navigationUI", "type": "dict-member", "url": "#dom-fullscreenoptions-navigationui" },
                "#enumdef-fullscreennavigationui": { "displayText": "FullscreenNavigationUI", "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "FullscreenNavigationUI", "type": "enum", "url": "#enumdef-fullscreennavigationui" },
                "#eventdef-document-fullscreenchange": { "displayText": "fullscreenchange", "export": true, "for_": ["Document", "Element"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreenchange", "type": "event", "url": "#eventdef-document-fullscreenchange" },
                "#eventdef-document-fullscreenerror": { "displayText": "fullscreenerror", "export": true, "for_": ["Document", "Element"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreenerror", "type": "event", "url": "#eventdef-document-fullscreenerror" },
                "#exit-fullscreen": { "displayText": "exit fullscreen", "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "exit fullscreen", "type": "dfn", "url": "#exit-fullscreen" },
                "#fullscreen-an-element": { "displayText": "fullscreen an element", "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreen an element", "type": "dfn", "url": "#fullscreen-an-element" },
                "#fullscreen-element": { "displayText": "fullscreen element", "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreen element", "type": "dfn", "url": "#fullscreen-element" },
                "#fullscreen-element-ready-check": { "displayText": "fullscreen element ready check", "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreen element ready check", "type": "dfn", "url": "#fullscreen-element-ready-check" },
                "#fullscreen-feature": { "displayText": "fullscreen-feature", "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreen-feature", "type": "dfn", "url": "#fullscreen-feature" },
                "#fullscreen-flag": { "displayText": "fullscreen flag", "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreen flag", "type": "dfn", "url": "#fullscreen-flag" },
                "#fullscreen-is-supported": { "displayText": "fullscreen is supported", "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreen is supported", "type": "dfn", "url": "#fullscreen-is-supported" },
                "#fully-exit-fullscreen": { "displayText": "fully exit fullscreen", "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fully exit fullscreen", "type": "dfn", "url": "#fully-exit-fullscreen" },
                "#handler-document-onfullscreenchange": { "displayText": "onfullscreenchange", "export": true, "for_": ["Document", "Element"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "onfullscreenchange", "type": "attribute", "url": "#handler-document-onfullscreenchange" },
                "#handler-document-onfullscreenerror": { "displayText": "onfullscreenerror", "export": true, "for_": ["Document", "Element"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "onfullscreenerror", "type": "attribute", "url": "#handler-document-onfullscreenerror" },
                "#iframe-fullscreen-flag": { "displayText": "iframe fullscreen flag", "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "iframe fullscreen flag", "type": "dfn", "url": "#iframe-fullscreen-flag" },
                "#list-of-pending-fullscreen-events": { "displayText": "list of pending fullscreen events", "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "list of pending fullscreen events", "type": "dfn", "url": "#list-of-pending-fullscreen-events" },
                "#run-the-fullscreen-steps": { "displayText": "run the fullscreen steps", "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "run the fullscreen steps", "type": "dfn", "url": "#run-the-fullscreen-steps" },
                "#simple-fullscreen-document": { "displayText": "simple fullscreen document", "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "simple fullscreen document", "type": "dfn", "url": "#simple-fullscreen-document" },
                "#unfullscreen-a-document": { "displayText": "unfullscreen a document", "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "unfullscreen a document", "type": "dfn", "url": "#unfullscreen-a-document" },
                "#unfullscreen-an-element": { "displayText": "unfullscreen an element", "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "unfullscreen an element", "type": "dfn", "url": "#unfullscreen-an-element" },
                "https://dom.spec.whatwg.org/#concept-document": { "displayText": "document", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "document", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-document" },
                "https://dom.spec.whatwg.org/#concept-documentfragment-host": { "displayText": "host", "export": true, "for_": ["DocumentFragment"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "host", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-documentfragment-host" },
                "https://dom.spec.whatwg.org/#concept-element": { "displayText": "element", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "element", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-element" },
                "https://dom.spec.whatwg.org/#concept-element-namespace": { "displayText": "namespace", "export": true, "for_": ["Element"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "namespace", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-element-namespace" },
                "https://dom.spec.whatwg.org/#concept-event-fire": { "displayText": "fire an event", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "fire an event", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-event-fire" },
                "https://dom.spec.whatwg.org/#concept-node-document": { "displayText": "node document", "export": true, "for_": ["Node"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "node document", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-node-document" },
                "https://dom.spec.whatwg.org/#concept-node-remove-ext": { "displayText": "removing steps", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "removing steps", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-node-remove-ext" },
                "https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-descendant": { "displayText": "shadow-including inclusive descendant", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "shadow-including inclusive descendant", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-descendant" },
                "https://dom.spec.whatwg.org/#concept-shadow-including-tree-order": { "displayText": "shadow-including tree order", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "shadow-including tree order", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-shadow-including-tree-order" },
                "https://dom.spec.whatwg.org/#concept-shadow-root": { "displayText": "shadow root", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "shadow root", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-shadow-root" },
                "https://dom.spec.whatwg.org/#concept-tree": { "displayText": "tree", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "tree", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-tree" },
                "https://dom.spec.whatwg.org/#concept-tree-order": { "displayText": "tree order", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "tree order", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-tree-order" },
                "https://dom.spec.whatwg.org/#connected": { "displayText": "connected", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "connected", "type": "dfn", "url": "https://dom.spec.whatwg.org/#connected" },
                "https://dom.spec.whatwg.org/#document": { "displayText": "Document", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "Document", "type": "interface", "url": "https://dom.spec.whatwg.org/#document" },
                "https://dom.spec.whatwg.org/#documentorshadowroot": { "displayText": "DocumentOrShadowRoot", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "DocumentOrShadowRoot", "type": "interface", "url": "https://dom.spec.whatwg.org/#documentorshadowroot" },
                "https://dom.spec.whatwg.org/#dom-event-bubbles": { "displayText": "bubbles", "export": true, "for_": ["Event"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "bubbles", "type": "attribute", "url": "https://dom.spec.whatwg.org/#dom-event-bubbles" },
                "https://dom.spec.whatwg.org/#dom-event-composed": { "displayText": "composed", "export": true, "for_": ["Event"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "composed", "type": "attribute", "url": "https://dom.spec.whatwg.org/#dom-event-composed" },
                "https://dom.spec.whatwg.org/#element": { "displayText": "Element", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "Element", "type": "interface", "url": "https://dom.spec.whatwg.org/#element" },
                "https://dom.spec.whatwg.org/#element-shadow-host": { "displayText": "shadow host", "export": true, "for_": ["Element"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "shadow host", "type": "dfn", "url": "https://dom.spec.whatwg.org/#element-shadow-host" },
                "https://dom.spec.whatwg.org/#retarget": { "displayText": "retargeting", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "retargeting", "type": "dfn", "url": "https://dom.spec.whatwg.org/#retarget" },
                "https://dom.spec.whatwg.org/#shadowroot": { "displayText": "ShadowRoot", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "ShadowRoot", "type": "interface", "url": "https://dom.spec.whatwg.org/#shadowroot" },
                "https://drafts.csswg.org/css-position-4/#add-an-element-to-the-top-layer": { "displayText": "add to the top layer", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-position", "spec": "css-position-4", "status": "current", "text": "add to the top layer", "type": "dfn", "url": "https://drafts.csswg.org/css-position-4/#add-an-element-to-the-top-layer" },
                "https://drafts.csswg.org/css-position-4/#document-top-layer": { "displayText": "top layer", "export": true, "for_": ["Document"], "level": "4", "normative": true, "shortname": "css-position", "spec": "css-position-4", "status": "current", "text": "top layer", "type": "dfn", "url": "https://drafts.csswg.org/css-position-4/#document-top-layer" },
                "https://drafts.csswg.org/css-position-4/#remove-an-element-from-the-top-layer-immediately": { "displayText": "remove from the top layer immediately", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-position", "spec": "css-position-4", "status": "current", "text": "remove from the top layer immediately", "type": "dfn", "url": "https://drafts.csswg.org/css-position-4/#remove-an-element-from-the-top-layer-immediately" },
                "https://drafts.csswg.org/css-position-4/#selectordef-backdrop": { "displayText": "::backdrop", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-position", "spec": "css-position-4", "status": "current", "text": "::backdrop", "type": "selector", "url": "https://drafts.csswg.org/css-position-4/#selectordef-backdrop" },
                "https://html.spec.whatwg.org/multipage/document-lifecycle.html#unloading-document-cleanup-steps": { "displayText": "unloading document cleanup steps", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "unloading document cleanup steps", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/document-lifecycle.html#unloading-document-cleanup-steps" },
                "https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable": { "displayText": "child navigable", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "child navigable", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable" },
                "https://html.spec.whatwg.org/multipage/document-sequences.html#descendant-navigables": { "displayText": "descendant navigables", "export": true, "for_": ["Document"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "descendant navigables", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#descendant-navigables" },
                "https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active": { "displayText": "fully active", "export": true, "for_": ["Document"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "fully active", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" },
                "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-container": { "displayText": "container", "export": true, "for_": ["navigable"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "container", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-container" },
                "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document": { "displayText": "active document", "export": true, "for_": ["navigable"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "active document", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" },
                "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top": { "displayText": "top-level traversable", "export": true, "for_": ["navigable"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "top-level traversable", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top" },
                "https://html.spec.whatwg.org/multipage/document-sequences.html#navigable": { "displayText": "navigable", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "navigable", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#navigable" },
                "https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable": { "displayText": "node navigable", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "node navigable", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable" },
                "https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy": { "displayText": "permissions policy", "export": true, "for_": ["Document"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "permissions policy", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy" },
                "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use": { "displayText": "allowed to use", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "allowed to use", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use" },
                "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow": { "displayText": "allow", "export": true, "for_": ["iframe"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "allow", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow" },
                "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen": { "displayText": "allowfullscreen", "export": true, "for_": ["iframe"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "allowfullscreen", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen" },
                "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element": { "displayText": "iframe", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "iframe", "type": "element", "url": "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" },
                "https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel": { "displayText": "in parallel", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "in parallel", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" },
                "https://html.spec.whatwg.org/multipage/interaction.html#close-request": { "displayText": "close request", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "close request", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/interaction.html#close-request" },
                "https://html.spec.whatwg.org/multipage/interaction.html#close-request-steps": { "displayText": "close request steps", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "close request steps", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/interaction.html#close-request-steps" },
                "https://html.spec.whatwg.org/multipage/interaction.html#close-watcher": { "displayText": "close watcher", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "close watcher", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/interaction.html#close-watcher" },
                "https://html.spec.whatwg.org/multipage/interaction.html#consume-user-activation": { "displayText": "consume user activation", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "consume user activation", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/interaction.html#consume-user-activation" },
                "https://html.spec.whatwg.org/multipage/interaction.html#transient-activation": { "displayText": "transient activation", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "transient activation", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/interaction.html#transient-activation" },
                "https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element": { "displayText": "dialog", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "dialog", "type": "element", "url": "https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element" },
                "https://html.spec.whatwg.org/multipage/nav-history-apis.html#window": { "displayText": "Window", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "Window", "type": "interface", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" },
                "https://html.spec.whatwg.org/multipage/popover.html#hide-all-popovers-until": { "displayText": "hide all popovers until", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "hide all popovers until", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/popover.html#hide-all-popovers-until" },
                "https://html.spec.whatwg.org/multipage/popover.html#popover-hidden-state": { "displayText": "hidden", "export": true, "for_": ["popover visibility state"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "hidden", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/popover.html#popover-hidden-state" },
                "https://html.spec.whatwg.org/multipage/popover.html#popover-visibility-state": { "displayText": "popover visibility state", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "popover visibility state", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/popover.html#popover-visibility-state" },
                "https://html.spec.whatwg.org/multipage/popover.html#topmost-popover-ancestor": { "displayText": "topmost popover ancestor", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "topmost popover ancestor", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/popover.html#topmost-popover-ancestor" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global": { "displayText": "relevant global object", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "relevant global object", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-content-attributes": { "displayText": "event handler content attribute", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "event handler content attribute", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-content-attributes" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type": { "displayText": "event handler event type", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "event handler event type", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes": { "displayText": "event handler IDL attribute", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "event handler idl attribute", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers": { "displayText": "event handler", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "event handler", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#event-loop": { "displayText": "event loop", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "event loop", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-loop" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler": { "displayText": "EventHandler", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "EventHandler", "type": "typedef", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" },
                "https://infra.spec.whatwg.org/#html-namespace": { "displayText": "HTML namespace", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "html namespace", "type": "dfn", "url": "https://infra.spec.whatwg.org/#html-namespace" },
                "https://infra.spec.whatwg.org/#iteration-break": { "displayText": "break", "export": true, "for_": ["iteration"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "break", "type": "dfn", "url": "https://infra.spec.whatwg.org/#iteration-break" },
                "https://infra.spec.whatwg.org/#iteration-continue": { "displayText": "continue", "export": true, "for_": ["iteration"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "continue", "type": "dfn", "url": "https://infra.spec.whatwg.org/#iteration-continue" },
                "https://infra.spec.whatwg.org/#iteration-while": { "displayText": "while", "export": true, "for_": ["iteration"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "while", "type": "dfn", "url": "https://infra.spec.whatwg.org/#iteration-while" },
                "https://infra.spec.whatwg.org/#list-contain": { "displayText": "contain", "export": true, "for_": ["list", "stack", "queue", "set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "contain", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list-contain" },
                "https://infra.spec.whatwg.org/#list-empty": { "displayText": "empty", "export": true, "for_": ["list", "stack", "queue", "set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "empty", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list-empty" },
                "https://infra.spec.whatwg.org/#list-item": { "displayText": "item", "export": true, "for_": ["list", "stack", "queue", "set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "item", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list-item" },
                "https://infra.spec.whatwg.org/#list-iterate": { "displayText": "for each", "export": true, "for_": ["list", "set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "for each", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list-iterate" },
                "https://infra.spec.whatwg.org/#ordered-set": { "displayText": "ordered set", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "ordered set", "type": "dfn", "url": "https://infra.spec.whatwg.org/#ordered-set" },
                "https://infra.spec.whatwg.org/#set-append": { "displayText": "append", "export": true, "for_": ["set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "append", "type": "dfn", "url": "https://infra.spec.whatwg.org/#set-append" },
                "https://infra.spec.whatwg.org/#string": { "displayText": "string", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "string", "type": "dfn", "url": "https://infra.spec.whatwg.org/#string" },
                "https://infra.spec.whatwg.org/#tuple": { "displayText": "tuple", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "tuple", "type": "dfn", "url": "https://infra.spec.whatwg.org/#tuple" },
                "https://w3c.github.io/screen-orientation/#dfn-fully-unlock-the-screen-orientation-steps": { "displayText": "fully unlock the screen orientation steps", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "screen-orientation", "spec": "screen-orientation", "status": "current", "text": "fully unlock the screen orientation steps", "type": "dfn", "url": "https://w3c.github.io/screen-orientation/#dfn-fully-unlock-the-screen-orientation-steps" },
                "https://w3c.github.io/screen-orientation/#dfn-triggered-by-a-user-generated-orientation-change": { "displayText": "triggered by a user generated orientation change", "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "", "status": "anchor-block", "text": "triggered by a user generated orientation change", "type": "dfn", "url": "https://w3c.github.io/screen-orientation/#dfn-triggered-by-a-user-generated-orientation-change" },
                "https://w3c.github.io/webappsec-permissions-policy/#container-policy": { "displayText": "container policy", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "permissions-policy", "spec": "permissions-policy-1", "status": "current", "text": "container policy", "type": "dfn", "url": "https://w3c.github.io/webappsec-permissions-policy/#container-policy" },
                "https://w3c.github.io/webappsec-permissions-policy/#permissions-policy-header": { "displayText": "Permissions-Policy", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "permissions-policy", "spec": "permissions-policy-1", "status": "current", "text": "permissions-policy", "type": "http-header", "url": "https://w3c.github.io/webappsec-permissions-policy/#permissions-policy-header" },
                "https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature": { "displayText": "policy-controlled feature", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "permissions-policy", "spec": "permissions-policy-1", "status": "current", "text": "policy-controlled feature", "type": "dfn", "url": "https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature" },
                "https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature-default-allowlist": { "displayText": "default allowlist", "export": true, "for_": ["policy-controlled feature"], "level": "1", "normative": true, "shortname": "permissions-policy", "spec": "permissions-policy-1", "status": "current", "text": "default allowlist", "type": "dfn", "url": "https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature-default-allowlist" },
                "https://webidl.spec.whatwg.org/#LegacyLenientSetter": { "displayText": "LegacyLenientSetter", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "LegacyLenientSetter", "type": "extended-attribute", "url": "https://webidl.spec.whatwg.org/#LegacyLenientSetter" },
                "https://webidl.spec.whatwg.org/#Unscopable": { "displayText": "Unscopable", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "Unscopable", "type": "extended-attribute", "url": "https://webidl.spec.whatwg.org/#Unscopable" },
                "https://webidl.spec.whatwg.org/#exceptiondef-typeerror": { "displayText": "TypeError", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "TypeError", "type": "exception", "url": "https://webidl.spec.whatwg.org/#exceptiondef-typeerror" },
                "https://webidl.spec.whatwg.org/#idl-boolean": { "displayText": "boolean", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "boolean", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-boolean" },
                "https://webidl.spec.whatwg.org/#idl-promise": { "displayText": "Promise", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "Promise", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-promise" },
                "https://webidl.spec.whatwg.org/#idl-undefined": { "displayText": "undefined", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "undefined", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-undefined" },
                "https://webidl.spec.whatwg.org/#this": { "displayText": "this", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "this", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#this" },
            };

            function mkRefHint(link, ref) {
                const linkText = link.textContent;
                let dfnTextElements = '';
                if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
                    // Give the original term if it's being displayed in a different way.
                    // But allow casing differences, they're insignificant.
                    dfnTextElements =
                        mk.li({},
                            mk.b({}, "Term: "),
                            mk.span({}, ref.displayText)
                        );
                }
                const forList = ref.for_;
                let forListElements;
                if (forList.length == 0) {
                    forListElements = [];
                } else if (forList.length == 1) {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.span({}, forList[0]),
                    );
                } else {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.ul({},
                            ...forList.map(forItem =>
                                mk.li({},
                                    mk.span({}, forItem)
                                ),
                            ),
                        ),
                    );
                }
                const url = ref.url;
                const safeUrl = encodeURIComponent(url);
                const hintPanel = mk.aside({
                    class: "ref-hint",
                    id: `ref-hint-for-${safeUrl}`,
                    "data-for": url,
                    "aria-labelled-by": `ref-hint-for-${safeUrl}`,
                },
                    mk.ul({},
                        dfnTextElements,
                        mk.li({},
                            mk.b({}, "URL: "),
                            mk.a({ href: url, class: "ref" }, url),
                        ),
                        mk.li({},
                            mk.b({}, "Type: "),
                            mk.span({}, `${ref.type}`),
                        ),
                        mk.li({},
                            mk.b({}, "Spec: "),
                            mk.span({}, `${ref.spec ? ref.spec : ''}`),
                        ),
                        forListElements
                    ),
                );
                hintPanel.forLink = link;
                setupRefHintEventListeners(link, hintPanel);
                return hintPanel;
            }

            function hideAllRefHints() {
                queryAll(".ref-hint").forEach(el => hideRefHint(el));
            }

            function hideRefHint(refHint) {
                const link = refHint.forLink;
                link.setAttribute("aria-expanded", "false");
                if (refHint.teardownEventListeners) {
                    refHint.teardownEventListeners();
                }
                refHint.remove();
            }

            function showRefHint(link) {
                if (link.classList.contains("dfn-link")) return;
                const url = link.getAttribute("href");
                const refHintKey = link.getAttribute("data-refhint-key");
                let key = url;
                if (refHintKey) {
                    key = refHintKey + "_" + url;
                }
                const ref = refsData[key];
                if (!ref) return;

                hideAllRefHints(); // Only display one at this time.

                const refHint = mkRefHint(link, ref);
                append(document.body, refHint);
                link.setAttribute("aria-expanded", "true");
                positionRefHint(refHint);
            }

            function setupRefHintEventListeners(link, refHint) {
                if (refHint.teardownEventListeners) return;
                // Add event handlers to hide the refHint after the user moves away
                // from both the link and refHint, if not hovering either within one second.
                let timeout = null;
                const startHidingRefHint = (event) => {
                    if (timeout) {
                        clearTimeout(timeout);
                    }
                    timeout = setTimeout(() => {
                        hideRefHint(refHint);
                    }, 1000);
                }
                const resetHidingRefHint = (event) => {
                    if (timeout) clearTimeout(timeout);
                    timeout = null;
                };
                link.addEventListener("mouseleave", startHidingRefHint);
                link.addEventListener("mouseenter", resetHidingRefHint);
                link.addEventListener("blur", startHidingRefHint);
                link.addEventListener("focus", resetHidingRefHint);
                refHint.addEventListener("mouseleave", startHidingRefHint);
                refHint.addEventListener("mouseenter", resetHidingRefHint);
                refHint.addEventListener("blur", startHidingRefHint);
                refHint.addEventListener("focus", resetHidingRefHint);

                refHint.teardownEventListeners = () => {
                    // remove event listeners
                    resetHidingRefHint();
                    link.removeEventListener("mouseleave", startHidingRefHint);
                    link.removeEventListener("mouseenter", resetHidingRefHint);
                    link.removeEventListener("blur", startHidingRefHint);
                    link.removeEventListener("focus", resetHidingRefHint);
                    refHint.removeEventListener("mouseleave", startHidingRefHint);
                    refHint.removeEventListener("mouseenter", resetHidingRefHint);
                    refHint.removeEventListener("blur", startHidingRefHint);
                    refHint.removeEventListener("focus", resetHidingRefHint);
                };
            }

            function positionRefHint(refHint) {
                const link = refHint.forLink;
                const linkPos = getBounds(link);
                refHint.style.top = linkPos.bottom + "px";
                refHint.style.left = linkPos.left + "px";

                const panelPos = refHint.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
                    refHint.style.left = newLeft + "px";
                }
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function showRefHintListener(e) {
                // If the target isn't in a link (or is a link),
                // just ignore it.
                let link = e.target.closest("a");
                if (!link) return;

                // If the target is in a ref-hint panel
                // (aka a link in the already-open one),
                // also just ignore it.
                if (link.closest(".ref-hint")) return;

                // Otherwise, show the panel for the link.
                showRefHint(link);
            }

            function hideAllHintsListener(e) {
                // If the click is inside a ref-hint panel, ignore it.
                if (e.target.closest(".ref-hint")) return;
                // Otherwise, close all the current panels.
                hideAllRefHints();
            }

            document.addEventListener("DOMContentLoaded", () => {
                document.body.addEventListener("mousedown", showRefHintListener);
                document.body.addEventListener("focus", showRefHintListener);

                document.body.addEventListener("click", hideAllHintsListener);
            });

            window.addEventListener("resize", () => {
                // Hide any open ref hint.
                hideAllRefHints();
            });
        }
    </script>
    <script>/* Boilerplate: script-var-click-highlighting */
        "use strict";
        {
            /*
            Color-choosing design:
            
            * Colors are ordered by goodness.
            * On clicking a var, give it the earliest color
                with the lowest usage in the algorithm.
            * On re-clicking, re-use the var's most recent color
                if that's not currently being used elsewhere.
            */

            const COLOR_COUNT = 7;

            document.addEventListener("click", e => {
                if (e.target.nodeName == "VAR") {
                    highlightSameAlgoVars(e.target);
                }
            });

            function highlightSameAlgoVars(v) {
                // Find the algorithm container.
                let algoContainer = findAlgoContainer(v);

                // Not highlighting document-global vars,
                // too likely to be unrelated.
                if (algoContainer == null) return;

                const varName = nameFromVar(v);
                if (!v.hasAttribute("data-var-color")) {
                    const newColor = chooseHighlightColor(algoContainer, v);
                    for (const el of algoContainer.querySelectorAll("var")) {
                        if (nameFromVar(el) == varName) {
                            el.setAttribute("data-var-color", newColor);
                            el.setAttribute("data-var-last-color", newColor);
                        }
                    }
                } else {
                    for (const el of algoContainer.querySelectorAll("var")) {
                        if (nameFromVar(el) == varName) {
                            el.removeAttribute("data-var-color");
                        }
                    }
                }
            }
            function findAlgoContainer(el) {
                while (el != document.body) {
                    if (el.hasAttribute("data-algorithm")) return el;
                    el = el.parentNode;
                }
                return null;
            }
            function nameFromVar(el) {
                return el.textContent.replace(/(\s|\xa0)+/g, " ").trim();
            }
            function colorCountsFromContainer(container) {
                const namesFromColor = Array.from({ length: COLOR_COUNT }, x => new Set());
                for (let v of container.querySelectorAll("var[data-var-color]")) {
                    let color = +v.getAttribute("data-var-color");
                    namesFromColor[color].add(nameFromVar(v));
                }

                return namesFromColor.map(x => x.size);
            }
            function leastUsedColor(colors) {
                // Find the earliest color with the lowest count.
                let minCount = Infinity;
                let minColor = null;
                for (var i = 0; i < colors.length; i++) {
                    if (colors[i] < minCount) {
                        minColor = i;
                        minCount = colors[i];
                    }
                }
                return minColor;
            }
            function chooseHighlightColor(container, v) {
                const colorCounts = colorCountsFromContainer(container);
                if (v.hasAttribute("data-var-last-color")) {
                    let color = +v.getAttribute("data-var-last-color");
                    if (colorCounts[color] == 0) return color;
                }
                return leastUsedColor(colorCounts);
            }
        }
    </script>