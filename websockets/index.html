<!doctype html>
<html lang=ja-JP>

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta content="#3c790a" name="theme-color">
    <meta content="light dark" name="color-scheme">
    <title>WebSockets標準</title>
    <link crossorigin href="https://resources.whatwg.org/standard-shared-with-dev.css" rel="stylesheet">
    <link crossorigin href="https://resources.whatwg.org/standard.css" rel="stylesheet">
    <link crossorigin href="https://resources.whatwg.org/spec.css" rel="stylesheet">
    <link crossorigin href="https://resources.whatwg.org/logo-websockets.svg" rel="icon">
    <script crossorigin defer src="https://resources.whatwg.org/commit-snapshot-shortcut-key.js"></script>
    <!-- <meta content="Bikeshed version 618007319, updated Thu Jun 26 17:23:55 2025 -0700" name="generator">
    <meta content="1b3525cb24f58240581b06b7681ba46849dae182" name="revision"> -->
    <style>
        /* Boilerplate: style-dfn-panel */
        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
            --dfnpanel-target-bg: #ffc;
            --dfnpanel-target-outline: orange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dfnpanel-bg: #222;
                --dfnpanel-text: var(--text);
                --dfnpanel-target-bg: #333;
                --dfnpanel-target-outline: silver;
            }
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel a:focus {
            outline: 5px auto Highlight;
            outline: 5px auto -webkit-focus-ring-color;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0 0 0 1em;
            list-style: none;
        }

        .dfn-panel li a {
            max-width: calc(300px - 1.5em - 1em);
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: 8px;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
            transition: left 1s ease-out, bottom 1s ease-out;
        }

        .dfn-panel .link-item:hover {
            text-decoration: underline;
        }

        .dfn-panel .link-item .copy-icon {
            opacity: 0;
        }

        .dfn-panel .link-item:hover .copy-icon,
        .dfn-panel .link-item .copy-icon:focus {
            opacity: 1;
        }

        .dfn-panel .copy-icon {
            display: inline-block;
            margin-right: 0.5em;
            width: 0.85em;
            height: 1em;
            border-radius: 3px;
            background-color: #ccc;
            cursor: pointer;
        }

        .dfn-panel .copy-icon .icon {
            width: 100%;
            height: 100%;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .dfn-panel .copy-icon .icon::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 1px solid black;
            background-color: #ccc;
            opacity: 0.25;
            transform: translate(3px, -3px);
        }

        .dfn-panel .copy-icon:active .icon::before {
            opacity: 1;
        }

        .dfn-paneled[role="button"] {
            cursor: help;
        }

        .highlighted {
            animation: target-fade 3s;
        }

        @keyframes target-fade {
            from {
                background-color: var(--dfnpanel-target-bg);
                outline: 5px solid var(--dfnpanel-target-outline);
            }

            to {
                color: var(--a-normal-text);
                background-color: transparent;
                outline: transparent;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-mdn-anno */
        :root {
            --mdn-bg: #EEE;
            --mdn-shadow: #999;
            --mdn-nosupport-text: #ccc;
            --mdn-pass: green;
            --mdn-fail: red;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --mdn-bg: #222;
                --mdn-shadow: #444;
                --mdn-nosupport-text: #666;
                --mdn-pass: #690;
                --mdn-fail: #d22;
            }
        }

        .mdn-anno {
            background: var(--mdn-bg, #EEE);
            border-radius: .25em;
            box-shadow: 0 0 3px var(--mdn-shadow, #999);
            color: var(--text, black);
            font: 1em sans-serif;
            hyphens: none;
            max-width: min-content;
            overflow: hidden;
            padding: 0.2em;
            position: absolute;
            right: 0.3em;
            top: auto;
            white-space: nowrap;
            word-wrap: normal;
            z-index: 8;
        }

        .mdn-anno.unpositioned {
            display: none;
        }

        .mdn-anno.overlapping-main {
            opacity: .2;
            transition: opacity .1s;
        }

        .mdn-anno[open] {
            opacity: 1;
            z-index: 9;
            min-width: 9em;
        }

        .mdn-anno:hover {
            opacity: 1;
            outline: var(--text, black) 1px solid;
        }

        .mdn-anno>summary {
            font-weight: normal;
            text-align: right;
            cursor: pointer;
            display: block;
        }

        .mdn-anno>summary>.less-than-two-engines-flag {
            color: var(--mdn-fail);
            padding-right: 2px;
        }

        .mdn-anno>summary>.all-engines-flag {
            color: var(--mdn-pass);
            padding-right: 2px;
        }

        .mdn-anno>summary>span {
            color: #fff;
            background-color: #000;
            font-weight: normal;
            font-family: zillaslab, Palatino, "Palatino Linotype", serif;
            padding: 2px 3px 0px 3px;
            line-height: 1.3em;
            vertical-align: top;
        }

        .mdn-anno>.feature {
            margin-top: 20px;
        }

        .mdn-anno>.feature:not(:first-of-type) {
            border-top: 1px solid #999;
            margin-top: 6px;
            padding-top: 2px;
        }

        .mdn-anno>.feature>.less-than-two-engines-text {
            color: var(--mdn-fail);
        }

        .mdn-anno>.feature>.all-engines-text {
            color: var(--mdn-pass);
        }

        .mdn-anno>.feature>p {
            font-size: .75em;
            margin-top: 6px;
            margin-bottom: 0;
        }

        .mdn-anno>.feature>p+p {
            margin-top: 3px;
        }

        .mdn-anno>.feature>.support {
            display: block;
            font-size: 0.6em;
            margin: 0;
            padding: 0;
            margin-top: 2px;
        }

        .mdn-anno>.feature>.support+div {
            padding-top: 0.5em;
        }

        .mdn-anno>.feature>.support>hr {
            display: block;
            border: none;
            border-top: 1px dotted #999;
            padding: 3px 0px 0px 0px;
            margin: 2px 3px 0px 3px;
        }

        .mdn-anno>.feature>.support>hr::before {
            content: "";
        }

        .mdn-anno>.feature>.support>span {
            padding: 0.2em 0;
            display: block;
            display: table;
        }

        .mdn-anno>.feature>.support>span.no {
            color: var(--mdn-nosupport-text);
            filter: grayscale(100%);
        }

        .mdn-anno>.feature>.support>span.no::before {
            opacity: 0.5;
        }

        .mdn-anno>.feature>.support>span:first-of-type {
            padding-top: 0.5em;
        }

        .mdn-anno>.feature>.support>span>span {
            padding: 0 0.5em;
            display: table-cell;
        }

        .mdn-anno>.feature>.support>span>span:first-child {
            width: 100%;
        }

        .mdn-anno>.feature>.support>span>span:last-child {
            width: 100%;
            white-space: pre;
            padding: 0;
        }

        .mdn-anno>.feature>.support>span::before {
            content: ' ';
            display: table-cell;
            min-width: 1.5em;
            height: 1.5em;
            background: no-repeat center center;
            background-size: contain;
            text-align: right;
            font-size: 0.75em;
            font-weight: bold;
        }

        .mdn-anno>.feature>.support>.chrome_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
        }

        .mdn-anno>.feature>.support>.firefox_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
        }

        .mdn-anno>.feature>.support>.chrome::before {
            background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
        }

        .mdn-anno>.feature>.support>.edge_blink::before {
            background-image: url(https://resources.whatwg.org/browser-logos/edge.svg);
        }

        .mdn-anno>.feature>.support>.edge::before {
            background-image: url(https://resources.whatwg.org/browser-logos/edge_legacy.svg);
        }

        .mdn-anno>.feature>.support>.firefox::before {
            background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
        }

        .mdn-anno>.feature>.support>.ie::before {
            background-image: url(https://resources.whatwg.org/browser-logos/ie.png);
        }

        .mdn-anno>.feature>.support>.safari_ios::before {
            background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg);
        }

        .mdn-anno>.feature>.support>.nodejs::before {
            background-image: url(https://nodejs.org/favicon.ico);
        }

        .mdn-anno>.feature>.support>.opera_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
        }

        .mdn-anno>.feature>.support>.opera::before {
            background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
        }

        .mdn-anno>.feature>.support>.safari::before {
            background-image: url(https://resources.whatwg.org/browser-logos/safari.png);
        }

        .mdn-anno>.feature>.support>.samsunginternet_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/samsung.svg);
        }

        .mdn-anno>.feature>.support>.webview_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/android-webview.png);
        }

        .name-slug-mismatch {
            color: red;
        }

        .caniuse-status:hover {
            z-index: 9;
        }

        /* dt, li, .issue, .note, and .example are "position: relative", so to put annotation at right margin, must move to right of containing block */
        ;

        .h-entry:not(.status-LS) dt>.mdn-anno,
        .h-entry:not(.status-LS) li>.mdn-anno,
        .h-entry:not(.status-LS) .issue>.mdn-anno,
        .h-entry:not(.status-LS) .note>.mdn-anno,
        .h-entry:not(.status-LS) .example>.mdn-anno {
            right: -6.7em;
        }

        .h-entry p+.mdn-anno {
            margin-top: 0;
        }

        h2+.mdn-anno.after {
            margin: -48px 0 0 0;
        }

        h3+.mdn-anno.after {
            margin: -46px 0 0 0;
        }

        h4+.mdn-anno.after {
            margin: -42px 0 0 0;
        }

        h5+.mdn-anno.after {
            margin: -40px 0 0 0;
        }

        h6+.mdn-anno.after {
            margin: -40px 0 0 0;
        }
    </style>
    <style>
        /* Boilerplate: style-ref-hints */
        :root {
            --ref-hint-bg: #ddd;
            --ref-hint-text: var(--text);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --ref-hint-bg: #222;
                --ref-hint-text: var(--text);
            }
        }

        .ref-hint {
            display: inline-block;
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.5em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--ref-hint-bg);
            color: var(--ref-hint-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .ref-hint * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .ref-hint ul {
            padding: 0 0 0 1em;
            list-style: none;
        }
    </style>
    <style>
        /* Boilerplate: style-var-click-highlighting */
        /*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)

For darkmode:
0 = oklab(50%   0%  108%)
1 = oklab(50% -51%   51%)
2 = oklab(50% -64%  -20%)
3 = oklab(50%   6%   19%)
4 = oklab(50% -12%  -64%)
5 = oklab(50%  44%  -19%)  
6 = oklab(50% 102%   38%)
*/

        [data-algorithm] var {
            cursor: pointer;
        }

        var[data-var-color] {
            background-color: var(--var-bg);
            box-shadow: 0 0 0 2px var(--var-bg);
        }

        var[data-var-color] {
            --var-bg: #F4D200;
        }

        var[data-var-color="1"] {
            --var-bg: #FF87A2;
        }

        var[data-var-color="2"] {
            --var-bg: #96E885;
        }

        var[data-var-color="3"] {
            --var-bg: #3EEED2;
        }

        var[data-var-color="4"] {
            --var-bg: #EACFB6;
        }

        var[data-var-color="5"] {
            --var-bg: #82DDFF;
        }

        var[data-var-color="6"] {
            --var-vg: #FFBCF2;
        }

        @media (prefers-color-scheme: dark) {
            var[data-var-color] {
                --var-bg: #bc1a00;
            }

            var[data-var-color="1"] {
                --var-bg: #007f00;
            }

            var[data-var-color="2"] {
                --var-bg: #008698;
            }

            var[data-var-color="3"] {
                --var-bg: #7f5b2b;
            }

            var[data-var-color="4"] {
                --var-bg: #004df3;
            }

            var[data-var-color="5"] {
                --var-bg: #a1248a;
            }

            var[data-var-color="6"] {
                --var-vg: #ff0000;
            }
        }
    </style>

<body class="h-entry status-LS">
    <div class="head">

        <a class="logo" href="https://whatwg.org/">
            <img alt="WHATWG" class="darkmode-aware" crossorigin height="100"
                src="https://resources.whatwg.org/logo-websockets.svg">
        </a>

        <hgroup>
            <h1 class="p-name no-ref" id="title">WebSockets</h1>
            <p id="subtitle">現行標準 — 最終更新 <time class="dt-updated" datetime="2025-08-12">2025年8月12日</time>
            </p>
        </hgroup>
        <div data-fill-with="spec-metadata">
            <dl>
                <dt>参加方法:
                <dd><a href="https://github.com/whatwg/websockets">GitHub whatwg/websockets</a> (<a
                        href="https://github.com/whatwg/websockets/issues/new/choose">新規issue</a>, <a
                        href="https://github.com/whatwg/websockets/issues">オープンissue</a>)
                <dd><a href="https://whatwg.org/chat">Matrixでチャット</a>
                <dt>コミット:
                <dd><a href="https://github.com/whatwg/websockets/commits">GitHub whatwg/websockets/commits</a>
                <dd><a href="https://websockets.spec.whatwg.org/commit-snapshots/0fb19b09dcfdc98e97f3075af96aa69b00d18238/"
                        id="commit-snapshot-link">このコミット時点のスナップショット</a>
                <dd><a href="https://twitter.com/whatsockets">@whatsockets</a>
                <dt>テスト:
                <dd><a href="https://github.com/web-platform-tests/wpt/tree/master/websockets">web-platform-tests
                        websockets/</a> (<a
                        href="https://github.com/web-platform-tests/wpt/labels/websockets">進行中の作業</a>)
                <dt>翻訳 <small>(規範的ではありません)</small>:
                <dd><span title="Japanese"><a href="https://triple-underscore.github.io/WebSocket-ja.html" hreflang="ja"
                            lang="ja" rel="alternate">日本語</a></span>
                <dd><span title="Simplified Chinese"><a href="https://htmlspecs.com/websockets/" hreflang="zh-hans"
                            lang="zh-hans" rel="alternate">简体中文</a></span>
                <dd><span title="Korean"><a href="https://ko.htmlspecs.com/websockets/" hreflang="ko" lang="ko"
                            rel="alternate">한국어</a></span>
            </dl>
        </div>
        <div data-fill-with="warning"></div>
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">概要</span></h2>
        <p>この仕様は、ウェブアプリケーションがサーバーサイドプロセスと双方向通信を維持するためのAPIを提供します。</p>
    </div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目次</h2>
        <ol class="toc" role="directory">
            <li><a href="#network-intro"><span class="secno">1</span> <span class="content">序章</span></a>
            <li>
                <a href="#websocket-protocol"><span class="secno">2</span> <span
                        class="content">WebSocketプロトコルの変更</span></a>
                <ol class="toc">
                    <li><a href="#websocket-connections"><span class="secno">2.1</span> <span
                                class="content">接続</span></a>
                    <li><a href="#websocket-opening-handshake"><span class="secno">2.2</span> <span
                                class="content">オープニングハンドシェイク</span></a>
                </ol>
            <li>
                <a href="#the-websocket-interface"><span class="secno">3</span> <span class="content"><code
                            class="idl"><span>WebSocket</span></code> インターフェイス</span></a>
                <ol class="toc">
                    <li><a href="#interface-definition"><span class="secno">3.1</span> <span
                                class="content">インターフェイス定義</span></a>
                </ol>
            <li><a href="#feedback-from-the-protocol"><span class="secno">4</span> <span
                        class="content">プロトコルからのフィードバック</span></a>
            <li><a href="#ping-and-pong-frames"><span class="secno">5</span> <span
                        class="content">PingとPongフレーム</span></a>
            <li><a href="#the-closeevent-interface"><span class="secno">6</span> <span class="content"><code
                            class="idl"><span>CloseEvent</span></code> インターフェイス</span></a>
            <li><a href="#garbage-collection"><span class="secno">7</span> <span class="content">ガベージコレクション</span></a>
            <li><a href="#acks"><span class="secno"></span> <span class="content">謝辞</span></a>
            <li><a href="#ipr"><span class="secno"></span> <span class="content">知的財産権</span></a>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">この仕様により定義された用語</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">参照により定義された用語</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">規範参照</span></a>
                </ol>
            <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL索引</span></a>
        </ol>
    </nav>
    <main>
        <h2 class="heading settled" data-level="1" id="network-intro"><span class="secno">1. </span><span
                class="content">序章</span><a class="self-link" href="#network-intro"></a></h2>
        <div class="non-normative">
            <p><em>このセクションは規範的ではありません。</em></p>
            <p>ウェブアプリケーションがサーバーサイドプロセスと双方向通信を維持できるようにするため、この仕様は<code
                    class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket">WebSocket</a></code>
                インターフェイスを導入します。</p>
            <p class="note" role="note">
                このインターフェイスは、基盤となるネットワークへの生のアクセスを許可しません。例えば、このインターフェイスを使用してカスタムサーバーを介さずにIRCクライアントを実装することはできません。</p>
        </div>
        <h2 class="heading settled" data-level="2" id="websocket-protocol"><span class="secno">2. </span><span
                class="content">WebSocketプロトコルの変更</span><a class="self-link" href="#websocket-protocol"></a></h2>
        <div class="note" role="note">

            このセクションは、<cite>Fetch</cite>で定義されたアルゴリズムと統合するためにWebSocketプロトコルのオープニングハンドシェイクのクライアント要件の一部を置き換えます。これにより、CSP、クッキー、HSTS、その他の<cite>Fetch</cite>関連プロトコルが単一の場所で処理されます。理想的には、RFCがこの文言を反映して更新されるべきですが、それは簡単ではありません。この<code
                class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket①">WebSocket</a></code>
            APIは、以下に定義される言語を使用します。<a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
            <a data-link-type="biblio" href="#biblio-fetch" title="Fetch Standard">[FETCH]</a>


            <p>この動作は、WebSocketプロトコルの「WebSocket接続を確立する」アルゴリズムを<cite>Fetch</cite>と統合する新しいものと置き換えることによって機能します。「WebSocket接続を確立する」は3つのアルゴリズムで構成されます：接続のセットアップ、ハンドシェイクリクエストの作成と送信、ハンドシェイクの応答の検証。この階層構造は<cite>Fetch</cite>とは異なり、最初にハンドシェイクを作成し、その後接続をセットアップしてハンドシェイクを送信し、最後に応答を検証します。これらの変更を読む際にその点を留意してください。
            </p>
        </div>
        <h3 class="heading settled" data-level="2.1" id="websocket-connections"><span class="secno">2.1. </span><span
                class="content">接続</span><a class="self-link" href="#websocket-connections"></a></h3>
        <div class="algorithm" data-algorithm="obtain a WebSocket connection">
            <p><var>url</var>を与えられた場合に<dfn class="dfn-paneled" data-dfn-type="dfn" data-export
                    id="concept-websocket-connection-obtain">WebSocket接続を取得する</dfn>には、次の手順を実行します：
            </p>
            <ol>
                <li data-md>
                    <p><var>host</var>を<var>url</var>の<a data-link-type="dfn"
                            href="https://url.spec.whatwg.org/#concept-url-host"
                            id="ref-for-concept-url-host">ホスト</a>とします。
                    </p>
                <li data-md>
                    <p><var>port</var>を<var>url</var>の<a data-link-type="dfn"
                            href="https://url.spec.whatwg.org/#concept-url-port"
                            id="ref-for-concept-url-port">ポート</a>とします。
                    </p>
                <li data-md>
                    <p><var>resource name</var>をU+002F (/)および<var>url</var>の<a data-link-type="dfn"
                            href="https://url.spec.whatwg.org/#concept-url-path"
                            id="ref-for-concept-url-path">パス</a>（空文字列を含む）があればそれらをU+002F (/)で区切って連結した文字列とします。</p>
                <li data-md>
                    <p>もし<var>url</var>の<a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-query"
                            id="ref-for-concept-url-query">クエリ</a>が空でない場合は、U+003F (?)と<var>url</var>の
                        <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-query"
                            id="ref-for-concept-url-query①">クエリ</a>を<var>resource name</var>に追加します。
                    </p>
                <li data-md>
                    <p><var>secure</var>を<var>url</var>の<a data-link-type="dfn"
                            href="https://url.spec.whatwg.org/#concept-url-scheme"
                            id="ref-for-concept-url-scheme">スキーム</a>が"<code>http</code>"の場合はfalse、それ以外の場合はtrueとします。</p>
                <li data-md>
                    <p><a
                            href="https://datatracker.ietf.org/doc/html/rfc6455#section-4.1">セクション4.1</a>の最初の手順セットのステップ2から5（含む）の要件に従い、<var>host</var>、<var>port</var>、<var>resource
                            name</var>、<var>secure</var>を渡して<a data-link-type="dfn"
                            href="#concept-websocket-connection-obtain"
                            id="ref-for-concept-websocket-connection-obtain">WebSocket接続</a>を確立します。<a
                            data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
                    </p>
                <li data-md>
                    <p>もし接続が確立された場合はそれを返し、そうでなければ失敗を返します。</p>
            </ol>
            <p class="note" role="note">構造や保持するプロパティが若干異なるため共有はできませんが、WebSocket接続は「通常の」
                <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-connection"
                    id="ref-for-concept-connection">接続</a>と非常に近いものです。
            </p>
        </div>
        <h3 class="heading settled" data-level="2.2" id="websocket-opening-handshake"><span class="secno">2.2.
            </span><span class="content">オープニングハンドシェイク</span><a class="self-link"
                href="#websocket-opening-handshake"></a></h3>
        <div class="algorithm" data-algorithm="establish a WebSocket connection">
            <p><var>url</var>、<var>protocols</var>、および<var>client</var>を与えられた場合に<dfn class="dfn-paneled"
                    data-dfn-type="dfn" data-noexport
                    id="concept-websocket-establish">WebSocket接続を確立する</dfn>には、次の手順を実行します：
            </p>
            <ol>
                <li data-md>
                    <p><var>requestURL</var>を<var>url</var>のコピーとし、<var>url</var>の<a data-link-type="dfn"
                            href="https://url.spec.whatwg.org/#concept-url-scheme"
                            id="ref-for-concept-url-scheme①">スキーム</a>が"<code>ws</code>"の場合は"<code>http</code>"に、そうでない場合は"<code>https</code>"に設定します。
                    </p>
                    <p class="note no-backref" role="note">このスキームの変更は、<a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-fetch"
                            id="ref-for-concept-fetch">fetching</a>と適切に統合するために重要です。例えば、HSTSはこれがないと機能しません。WebSocketが独自のスキームを持つ必要は実際にはなく、それはレガシーの名残です。
                        <a data-link-type="biblio" href="#biblio-hsts"
                            title="HTTP Strict Transport Security (HSTS)">[HSTS]</a>

                    </p>
                <li data-md>
                    <p><var>request</var>を新しい<a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-request"
                            id="ref-for-concept-request">リクエスト</a>とし、その<a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-request-url"
                            id="ref-for-concept-request-url">URL</a>を<var>requestURL</var>、
                        <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client"
                            id="ref-for-concept-request-client">クライアント</a>を<var>client</var>、
                        <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#request-service-workers-mode"
                            id="ref-for-request-service-workers-mode">サービスワーカーのモード</a>を"<code>none</code>"、
                        <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-referrer"
                            id="ref-for-concept-request-referrer">リファラー</a>を"<code>no-referrer</code>"、
                        <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-mode"
                            id="ref-for-concept-request-mode">モード</a>を"<code>websocket</code>"、
                        <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-credentials-mode"
                            id="ref-for-concept-request-credentials-mode">認証モード</a>を"<code>include</code>"、
                        <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-cache-mode"
                            id="ref-for-concept-request-cache-mode">キャッシュモード</a>を"<code>no-store</code>"、
                        <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-redirect-mode"
                            id="ref-for-concept-request-redirect-mode">リダイレクトモード</a>を"<code>error</code>"とします。
                    </p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-list-append"
                            id="ref-for-concept-header-list-append">追加</a> (`<code>Upgrade</code>`,
                        `<code>websocket</code>`) を<var>request</var>の
                        <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-header-list"
                            id="ref-for-concept-request-header-list">ヘッダーリスト</a>に行います。
                    </p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-list-append"
                            id="ref-for-concept-header-list-append①">追加</a> (`<code>Connection</code>`,
                        `<code>Upgrade</code>`) を<var>request</var>の
                        <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-header-list"
                            id="ref-for-concept-request-header-list①">ヘッダーリスト</a>に行います。
                    </p>
                <li data-md>
                    <p><var>keyValue</var>をランダムに選択された16バイトの値で構成され、
                        <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#forgiving-base64-encode"
                            id="ref-for-forgiving-base64-encode">forgiving-base64エンコード</a>され、
                        <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#isomorphic-encode"
                            id="ref-for-isomorphic-encode">等価エンコード</a>されたノンスとします。
                    </p>
                    <p class="example" id="example-random-value"><a class="self-link"
                            href="#example-random-value"></a>もしランダムに選択された値がバイト列0x01 0x02 0x03 0x04 0x05 0x06 0x07 0x08
                        0x09 0x0a 0x0b 0x0c 0x0d 0x0e 0x0f 0x10だった場合、<var>keyValue</var>は
                        forgiving-base64エンコードされ"<code>AQIDBAUGBwgJCgsMDQ4PEC==</code>"となり、等価エンコードされ`<code>AQIDBAUGBwgJCgsMDQ4PEC==</code>`となります。

                    </p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-list-append"
                            id="ref-for-concept-header-list-append②">追加</a> (`<code>Sec-WebSocket-Key</code>`,
                        <var>keyValue</var>) を<var>request</var>の
                        <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-header-list"
                            id="ref-for-concept-request-header-list②">ヘッダーリスト</a>に行います。
                    </p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-list-append"
                            id="ref-for-concept-header-list-append③">追加</a> (`<code>Sec-WebSocket-Version</code>`,
                        `<code>13</code>`) を<var>request</var>の
                        <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-header-list"
                            id="ref-for-concept-request-header-list③">ヘッダーリスト</a>に行います。
                    </p>
                <li data-md>
                    <p>各<var>protocol</var>について、<var>protocols</var>の中から`<code>Sec-WebSocket-Protocol</code>`と<var>protocol</var>で<a
                            data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-list-combine"
                            id="ref-for-concept-header-list-combine">結合</a>を<var>request</var>の
                        <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-header-list"
                            id="ref-for-concept-request-header-list④">ヘッダーリスト</a>に行います。
                    </p>
                <li data-md>
                    <p><var>permessageDeflate</var>をユーザーエージェントが定義した"<code>permessage-deflate</code>"拡張の
                        <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#header-value"
                            id="ref-for-header-value">ヘッダー値</a>とします。<a data-link-type="biblio" href="#biblio-wsp"
                            title="The WebSocket Protocol">[WSP]</a>
                    </p>
                    <p class="example" id="example-permessage-deflate"><a class="self-link"
                            href="#example-permessage-deflate"></a>`<code>permessage-deflate; client_max_window_bits</code>`

                    </p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-list-append"
                            id="ref-for-concept-header-list-append④">追加</a>
                        (`<code>Sec-WebSocket-Extensions</code>`, <var>permessageDeflate</var>) を
                        <var>request</var>の<a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-request-header-list"
                            id="ref-for-concept-request-header-list⑤">ヘッダーリスト</a>に行います。
                    </p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-fetch"
                            id="ref-for-concept-fetch①">Fetch</a> <var>request</var>を<a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#fetch-useparallelqueue"
                            id="ref-for-fetch-useparallelqueue"><i>useParallelQueue</i></a>をtrueに設定し、
                        <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#process-response"
                            id="ref-for-process-response"><i>processResponse</i></a>として以下の<var>response</var>のステップを指定して行います：
                    </p>
                    <ol>
                        <li data-md>
                            <p>もし<var>response</var>が<a data-link-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#concept-network-error"
                                    id="ref-for-concept-network-error">ネットワークエラー</a>であるか、
                                <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-status"
                                    id="ref-for-concept-response-status">ステータス</a>が101でない場合、<a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.7"
                                    id="ref-for-section-7.1.7">WebSocket接続を失敗させます</a>。
                            </p>
                        <li data-md>
                            <p>もし<var>protocols</var>が空リストでなく、`<code>Sec-WebSocket-Protocol</code>`および<var>response</var>の
                                <a data-link-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#concept-request-header-list"
                                    id="ref-for-concept-request-header-list⑥">ヘッダーリスト</a>を指定して
                                <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#extract-header-list-values"
                                    id="ref-for-extract-header-list-values">ヘッダーリスト値を抽出</a>する結果がnull、失敗、または空バイト列である場合、<a
                                    data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.7"
                                    id="ref-for-section-7.1.7①">WebSocket接続を失敗させます</a>。
                            </p>
                            <p class="note" role="note">これはWebSocketプロトコルで定義されたこのヘッダーのチェックと異なります。
                                それはクライアントによって要求されていないサブプロトコルのみをカバーします。これはクライアントによって要求されたがサーバーによって認識されなかったサブプロトコルをカバーします。

                            </p>
                        <li data-md>
                            <p><a
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-4.1">セクション4.1</a>の最後の手順セットのステップ2からステップ6（含む）の要件に従い、<var>response</var>を検証します。これにより<a
                                    data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.7"
                                    id="ref-for-section-7.1.7②">WebSocket接続を失敗させる</a>または<a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and"
                                    id="ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and">WebSocket接続が確立されます</a>。

                            </p>
                    </ol>
            </ol>
        </div>
        <p><a data-link-type="dfn" href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.7"
                id="ref-for-section-7.1.7③">WebSocket接続を失敗させる</a>および<a data-link-type="dfn"
                href="https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and"
                id="ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and①">WebSocket接続が確立される</a>は、WebSocketプロトコルで定義されています。
            <a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
        </p>
        <p class="warning">
            リダイレクトがフォローされず、このハンドシェイクが一般的に制限される理由は、Webブラウザーのコンテキストで深刻なセキュリティ問題を引き起こす可能性があるためです。例えば、あるホストが1つのパスにWebSocketサーバーを持ち、別のパスにオープンなHTTPリダイレクタを持っているとします。この場合、特定のWebSocket
            URLを指定するスクリプトは、正しいホスト名を持つURLであることをチェックしても、インターネット上の任意のホストと通信し（そしておそらく秘密を共有する）ように騙される可能性があります。


        </p>
        <h2 class="heading settled" data-level="3" id="the-websocket-interface"><span class="secno">3. </span><span
                class="content"><code
                    class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket②">WebSocket</a></code>
                インターフェイス</span><a class="self-link" href="#the-websocket-interface"></a></h2>
        <h3 class="heading settled" data-level="3.1" id="interface-definition"><span class="secno">3.1. </span><span
                class="content">インターフェイス定義</span><a class="self-link" href="#interface-definition"></a></h3>
        <p><code class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket③">WebSocket</a></code>
            クラスのWeb IDL定義は以下の通りです:</p>
        <pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-binarytype"><code><c- g>BinaryType</c-></code></dfn> { <a class="idl-code" data-link-type="enum-value" href="#dom-binarytype-blob" id="ref-for-dom-binarytype-blob"><c- s>"blob"</c-></a>, <a class="idl-code" data-link-type="enum-value" href="#dom-binarytype-arraybuffer" id="ref-for-dom-binarytype-arraybuffer"><c- s>"arraybuffer"</c-></a> };

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="websocket"><code><c- g>WebSocket</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget"><c- n>EventTarget</c-></a> {
  <a class="idl-code" data-link-type="constructor" href="#dom-websocket-websocket" id="ref-for-dom-websocket-websocket"><c- g>constructor</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket/WebSocket(url, protocols), WebSocket/constructor(url, protocols), WebSocket/WebSocket(url), WebSocket/constructor(url)" data-dfn-type="argument" data-export id="dom-websocket-websocket-url-protocols-url"><code><c- g>url</c-></code></dfn>, <c- b>optional</c-> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <c- b>or</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a>>) <dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket/WebSocket(url, protocols), WebSocket/constructor(url, protocols), WebSocket/WebSocket(url), WebSocket/constructor(url)" data-dfn-type="argument" data-export id="dom-websocket-websocket-url-protocols-protocols"><code><c- g>protocols</c-></code></dfn> = []);
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①"><c- b>USVString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="USVString" href="#dom-websocket-url" id="ref-for-dom-websocket-url"><c- g>url</c-></a>;

  // ready state
  <c- b>const</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-short" id="ref-for-idl-unsigned-short"><c- b>unsigned</c-> <c- b>short</c-></a> <a class="idl-code" data-link-type="const" href="#dom-websocket-connecting" id="ref-for-dom-websocket-connecting"><c- g>CONNECTING</c-></a> = 0;
  <c- b>const</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-short" id="ref-for-idl-unsigned-short①"><c- b>unsigned</c-> <c- b>short</c-></a> <a class="idl-code" data-link-type="const" href="#dom-websocket-open" id="ref-for-dom-websocket-open"><c- g>OPEN</c-></a> = 1;
  <c- b>const</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-short" id="ref-for-idl-unsigned-short②"><c- b>unsigned</c-> <c- b>short</c-></a> <a class="idl-code" data-link-type="const" href="#dom-websocket-closing" id="ref-for-dom-websocket-closing"><c- g>CLOSING</c-></a> = 2;
  <c- b>const</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-short" id="ref-for-idl-unsigned-short③"><c- b>unsigned</c-> <c- b>short</c-></a> <a class="idl-code" data-link-type="const" href="#dom-websocket-closed" id="ref-for-dom-websocket-closed"><c- g>CLOSED</c-></a> = 3;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-short" id="ref-for-idl-unsigned-short④"><c- b>unsigned</c-> <c- b>short</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned short" href="#dom-websocket-readystate" id="ref-for-dom-websocket-readystate"><c- g>readyState</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long long" href="#dom-websocket-bufferedamount" id="ref-for-dom-websocket-bufferedamount"><c- g>bufferedAmount</c-></a>;

  // networking
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-websocket-onopen" id="ref-for-dom-websocket-onopen"><c- g>onopen</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler①"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-websocket-onerror" id="ref-for-dom-websocket-onerror"><c- g>onerror</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler②"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-websocket-onclose" id="ref-for-dom-websocket-onclose"><c- g>onclose</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-websocket-extensions" id="ref-for-dom-websocket-extensions"><c- g>extensions</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString③"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-websocket-protocol" id="ref-for-dom-websocket-protocol"><c- g>protocol</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-websocket-close" id="ref-for-dom-websocket-close"><c- g>close</c-></a>(<c- b>optional</c-> [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Clamp" id="ref-for-Clamp"><c- g>Clamp</c-></a>] <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-short" id="ref-for-idl-unsigned-short⑤"><c- b>unsigned</c-> <c- b>short</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket/close(code, reason), WebSocket/close(code), WebSocket/close()" data-dfn-type="argument" data-export id="dom-websocket-close-code-reason-code"><code><c- g>code</c-></code></dfn>, <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString②"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket/close(code, reason), WebSocket/close(code), WebSocket/close()" data-dfn-type="argument" data-export id="dom-websocket-close-code-reason-reason"><code><c- g>reason</c-></code></dfn>);

  // messaging
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler③"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-websocket-onmessage" id="ref-for-dom-websocket-onmessage"><c- g>onmessage</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-binarytype" id="ref-for-enumdef-binarytype"><c- n>BinaryType</c-></a> <a class="idl-code" data-link-type="attribute" data-type="BinaryType" href="#dom-websocket-binarytype" id="ref-for-dom-websocket-binarytype"><c- g>binaryType</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-websocket-send" id="ref-for-dom-websocket-send"><c- g>send</c-></a>((<a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#BufferSource" id="ref-for-BufferSource"><c- n>BufferSource</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://w3c.github.io/FileAPI/#dfn-Blob" id="ref-for-dfn-Blob"><c- n>Blob</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString③"><c- b>USVString</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket/send(data)" data-dfn-type="argument" data-export id="dom-websocket-send-data-data"><code><c- g>data</c-></code></dfn>);
};
</pre>
        <p>各<code class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket④">WebSocket</a></code>
            オブジェクトには、関連付けられた<dfn class="dfn-paneled" data-dfn-for="WebSocket" data-dfn-type="dfn" data-lt="internal-url"
                data-noexport id="websocket-internal-url">url</dfn>があります。
            これは<a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url"
                id="ref-for-concept-url">URLレコード</a>です。</p>
        <p>各<code class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket⑤">WebSocket</a></code>
            オブジェクトには関連付けられた<dfn class="dfn-paneled" data-dfn-for="WebSocket" data-dfn-type="dfn" data-noexport
                id="websocket-binary-type">binary type</dfn>があり、
            これは<code
                class="idl"><a data-link-type="idl" href="#enumdef-binarytype" id="ref-for-enumdef-binarytype①">BinaryType</a></code>
            です。初期値は
            "<code
                class="idl"><a data-link-type="idl" href="#dom-binarytype-blob" id="ref-for-dom-binarytype-blob①">blob</a></code>"
            に設定される必要があります。
        </p>
        <p>各<code class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket⑥">WebSocket</a></code>
            オブジェクトには関連付けられた<dfn class="dfn-paneled" data-dfn-for="WebSocket" data-dfn-type="dfn" data-noexport
                id="websocket-ready-state">ready state</dfn>があり、
            これは接続状態を表す数値です。初期値は<code
                class="idl"><a data-link-type="idl" href="#dom-websocket-connecting" id="ref-for-dom-websocket-connecting①">CONNECTING</a></code>
            (0)に設定される必要があります。
            以下の値を取ることができます:</p>
        <dl>
            <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket" data-dfn-type="const" data-export
                    id="dom-websocket-connecting"><code>CONNECTING</code></dfn> (数値値 0)
            <dd data-md>
                <p>接続がまだ確立されていません。</p>
            <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket" data-dfn-type="const" data-export
                    id="dom-websocket-open"><code>OPEN</code></dfn> (数値値 1)
            <dd data-md>
                <p><a data-link-type="dfn"
                        href="https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and"
                        id="ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and②">WebSocket接続が確立され</a>、
                    通信が可能です。</p>
            <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket" data-dfn-type="const" data-export
                    id="dom-websocket-closing"><code>CLOSING</code></dfn> (数値値 2)
            <dd data-md>
                <p>接続が終了ハンドシェイクを行っているか、<code
                        class="idl"><a data-link-type="idl" href="#dom-websocket-close" id="ref-for-dom-websocket-close①">close()</a></code>
                    メソッドが呼び出されました。</p>
            <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket" data-dfn-type="const" data-export
                    id="dom-websocket-closed"><code>CLOSED</code></dfn> (数値値 3)
            <dd data-md>
                <p>接続が閉じられたか、開くことができませんでした。</p>
        </dl>
        <dl class="domintro non-normative">
            <dt data-md>
                <code><var>socket</var> = new <code class="idl"><a data-link-type="idl" href="#dom-websocket-websocket" id="ref-for-dom-websocket-websocket①">WebSocket</a></code>(<var>url</var>
                [, <var>protocols</var> ])</code>
            <dd data-md>
                <p>新しい<code
                        class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket⑦">WebSocket</a></code>
                    オブジェクトを作成し、関連付けられたWebSocket接続を直ちに確立します。</p>
                <p><var>url</var>は、接続が確立される<a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url"
                        id="ref-for-concept-url①">URL</a>を示す文字列です。
                    "<code>ws</code>", "<code>wss</code>", "<code>http</code>",
                    "<code>https</code>"スキームのみが許可されます。他のスキームは
                    "<code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#syntaxerror" id="ref-for-syntaxerror">SyntaxError</a></code>"
                    <code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code>
                    を引き起こします。
                    <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-fragment"
                        id="ref-for-concept-url-fragment">フラグメント</a>を含むURLも常に例外を引き起こします。
                </p>
                <p><var>protocols</var>は文字列または文字列の配列です。文字列の場合、それはその文字列だけを含む配列と同等であり、省略された場合、空の配列と同等です。
                    配列内の各文字列はサブプロトコル名です。接続は、サーバーがこれらのサブプロトコルのいずれかを選択したことを報告した場合にのみ確立されます。サブプロトコル名は、`<a
                        data-link-type="http-header" href="https://datatracker.ietf.org/doc/html/rfc6455#section-11.3.4"
                        id="ref-for-section-11.3.4"><code>Sec-WebSocket-Protocol</code></a>`フィールドの値を構成する要素に対する要件に一致している必要があります。
                    <a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
                </p>
            <dt data-md>
                <code><var>socket</var>.<a class="idl-code" data-link-type="method" href="#dom-websocket-send" id="ref-for-dom-websocket-send①">send</a>(<var>data</var>)</code>
            <dd data-md>
                <p>WebSocket接続を使用して<var>data</var>を送信します。<var>data</var>は文字列、<code
                        class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-Blob" id="ref-for-dfn-Blob①">Blob</a></code>、
                    <code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer" id="ref-for-idl-ArrayBuffer">ArrayBuffer</a></code>、
                    または<code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#ArrayBufferView" id="ref-for-ArrayBufferView">ArrayBufferView</a></code>
                    です。
                </p>
            <dt data-md>
                <code><var>socket</var>.<a class="idl-code" data-link-type="method" href="#dom-websocket-close" id="ref-for-dom-websocket-close②">close</a>([ <var>code</var> ] [, <var>reason</var> ])</code>
            <dd data-md>
                <p>WebSocket接続を閉じます。オプションで<var>code</var>を<a data-link-type="dfn"
                        href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.5"
                        id="ref-for-section-7.1.5">WebSocket接続終了コード</a>として、<var>reason</var>を<a data-link-type="dfn"
                        href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.6"
                        id="ref-for-section-7.1.6">WebSocket接続終了理由</a>として使用します。</p>
            <dt data-md>
                <code><var>socket</var>.<a class="idl-code" data-link-type="attribute" href="#dom-websocket-url" id="ref-for-dom-websocket-url①">url</a></code>
            <dd data-md>
                <p>WebSocket接続を確立するために使用された<a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url"
                        id="ref-for-concept-url②">URL</a>を返します。</p>
            <dt data-md>
                <code><var>socket</var>.<a class="idl-code" data-link-type="attribute" href="#dom-websocket-readystate" id="ref-for-dom-websocket-readystate①">readyState</a></code>
            <dd data-md>
                <p>WebSocket接続の状態を返します。上記で説明した値を取ることができます。</p>
            <dt data-md>
                <code><var>socket</var>.<a class="idl-code" data-link-type="attribute" href="#dom-websocket-bufferedamount" id="ref-for-dom-websocket-bufferedamount①">bufferedAmount</a></code>
            <dd data-md>
                <p><code
                        class="idl"><a data-link-type="idl" href="#dom-websocket-send" id="ref-for-dom-websocket-send②">send()</a></code>
                    を使用してキューに入れられたがまだネットワークに送信されていないアプリケーションデータ（UTF-8テキストおよびバイナリデータ）のバイト数を返します。</p>
                <p>WebSocket接続が閉じられている場合、この属性の値は<code
                        class="idl"><a data-link-type="idl" href="#dom-websocket-send" id="ref-for-dom-websocket-send③">send()</a></code>
                    メソッドの呼び出しごとに増加するだけです。（接続が閉じた後にゼロにリセットされることはありません。）</p>
            <dt data-md>
                <code><var>socket</var>.<a class="idl-code" data-link-type="attribute" href="#dom-websocket-extensions" id="ref-for-dom-websocket-extensions①">extensions</a></code>
            <dd data-md>
                <p>サーバーによって選択された拡張機能を返します（存在する場合）。</p>
            <dt data-md>
                <code><var>socket</var>.<a class="idl-code" data-link-type="attribute" href="#dom-websocket-protocol" id="ref-for-dom-websocket-protocol①">protocol</a></code>
            <dd data-md>
                <p>サーバーによって選択されたサブプロトコルを返します（存在する場合）。これは、コンストラクタの第2引数の配列形式と組み合わせてサブプロトコルのネゴシエーションを行うために使用できます。</p>
            <dt data-md>
                <code><var>socket</var>.<a class="idl-code" data-link-type="attribute" href="#dom-websocket-binarytype" id="ref-for-dom-websocket-binarytype①">binaryType</a></code>
            <dd data-md>
                <p><var>socket</var>からスクリプトに公開されるバイナリデータを示す文字列を返します:</p>
                <dl>
                    <dt data-md>"<code
                            class="idl"><a data-link-type="idl" href="#dom-binarytype-blob" id="ref-for-dom-binarytype-blob②">blob</a></code>"
                    <dd data-md>
                        <p>バイナリデータは<code
                                class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-Blob" id="ref-for-dfn-Blob②">Blob</a></code>
                            形式で返されます。</p>
                    <dt data-md>"<code
                            class="idl"><a data-link-type="idl" href="#dom-binarytype-arraybuffer" id="ref-for-dom-binarytype-arraybuffer①">arraybuffer</a></code>"
                    <dd data-md>
                        <p>バイナリデータは<code
                                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer" id="ref-for-idl-ArrayBuffer①">ArrayBuffer</a></code>
                            形式で返されます。</p>
                </dl>
                <p>デフォルトは"<code
                        class="idl"><a data-link-type="idl" href="#dom-binarytype-blob" id="ref-for-dom-binarytype-blob③">blob</a></code>"です。
                </p>
            <dt data-md>
                <code><var>socket</var>.<a class="idl-code" data-link-type="attribute" href="#dom-websocket-binarytype" id="ref-for-dom-websocket-binarytype②">binaryType</a> = <var>value</var></code>
            <dd data-md>
                <p>バイナリデータの返され方を変更します。</p>
        </dl>
        <div class="algorithm" data-algorithm="WebSocket(url, protocols)" data-algorithm-for="WebSocket">

            <dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket" data-dfn-type="constructor" data-export
                data-lt="WebSocket(url, protocols)|constructor(url, protocols)|WebSocket(url)|constructor(url)"
                id="dom-websocket-websocket"><code>new
 WebSocket(<var>url</var>, <var>protocols</var>)</code></dfn>
            コンストラクタの手順は以下の通りです:


            <ol>
                <li data-md>
                    <p><var>baseURL</var>を<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this">this</a>の<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object"
                            id="ref-for-relevant-settings-object">関連する設定オブジェクト</a>の<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#api-base-url"
                            id="ref-for-api-base-url">APIベースURL</a>とします。</p>
                <li data-md>
                    <p><var>urlRecord</var>を、<var>url</var>に<var>baseURL</var>を適用して<a data-link-type="dfn"
                            href="https://url.spec.whatwg.org/#concept-url-parser"
                            id="ref-for-concept-url-parser">URLパーサー</a>を実行した結果とします。</p>
                <li data-md>
                    <p>もし<var>urlRecord</var>が失敗ならば、"<code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#syntaxerror" id="ref-for-syntaxerror①">SyntaxError</a></code>"
                        <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException①">DOMException</a></code>
                        をスローします。
                    </p>
                <li data-md>
                    <p>もし<var>urlRecord</var>の<a data-link-type="dfn"
                            href="https://url.spec.whatwg.org/#concept-url-scheme"
                            id="ref-for-concept-url-scheme③">スキーム</a>が"<code>http</code>"ならば、
                        <var>urlRecord</var>の<a data-link-type="dfn"
                            href="https://url.spec.whatwg.org/#concept-url-scheme"
                            id="ref-for-concept-url-scheme④">スキーム</a>を"<code>ws</code>"に設定します。
                    </p>
                <li data-md>
                    <p>それ以外の場合、もし<var>urlRecord</var>の<a data-link-type="dfn"
                            href="https://url.spec.whatwg.org/#concept-url-scheme"
                            id="ref-for-concept-url-scheme⑤">スキーム</a>が"<code>https</code>"ならば、
                        <var>urlRecord</var>の<a data-link-type="dfn"
                            href="https://url.spec.whatwg.org/#concept-url-scheme"
                            id="ref-for-concept-url-scheme⑥">スキーム</a>を"<code>wss</code>"に設定します。
                    </p>
                <li data-md>
                    <p>もし<var>urlRecord</var>の<a data-link-type="dfn"
                            href="https://url.spec.whatwg.org/#concept-url-scheme"
                            id="ref-for-concept-url-scheme⑦">スキーム</a>が
                        "<code><a data-link-type="dfn" href="https://datatracker.ietf.org/doc/html/rfc6455#section-11.1.1" id="ref-for-section-11.1.1">ws</a></code>"または
                        "<code><a data-link-type="dfn" href="https://datatracker.ietf.org/doc/html/rfc6455#section-11.1.2" id="ref-for-section-11.1.2">wss</a></code>"でない場合、
                        "<code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#syntaxerror" id="ref-for-syntaxerror②">SyntaxError</a></code>"
                        <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException②">DOMException</a></code>
                        をスローします。
                    </p>
                <li data-md>
                    <p>もし<var>urlRecord</var>の<a data-link-type="dfn"
                            href="https://url.spec.whatwg.org/#concept-url-fragment"
                            id="ref-for-concept-url-fragment①">フラグメント</a>が非nullならば、"<code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#syntaxerror" id="ref-for-syntaxerror③">SyntaxError</a></code>"
                        <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException③">DOMException</a></code>
                        をスローします。
                    </p>
                <li data-md>
                    <p>もし<var>protocols</var>が文字列ならば、<var>protocols</var>をその文字列だけを含むシーケンスに設定します。</p>
                <li data-md>
                    <p>もし<var>protocols</var>内の値のいずれかが複数回出現するか、または
                        `<a data-link-type="http-header"
                            href="https://datatracker.ietf.org/doc/html/rfc6455#section-11.3.4"
                            id="ref-for-section-11.3.4①"><code>Sec-WebSocket-Protocol</code></a>`フィールドの値を構成する要素の要件に一致しない場合、
                        "<code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#syntaxerror" id="ref-for-syntaxerror④">SyntaxError</a></code>"
                        <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException④">DOMException</a></code>
                        をスローします。
                        <a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
                    </p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this①">this</a>の<a data-link-type="dfn" href="#websocket-internal-url"
                            id="ref-for-websocket-internal-url">url</a>を<var>urlRecord</var>に設定します。</p>
                <li data-md>
                    <p><var>client</var>を<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this②">this</a>の<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object"
                            id="ref-for-relevant-settings-object①">関連する設定オブジェクト</a>とします。</p>
                <li data-md>
                    <p>この手順を<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                            id="ref-for-in-parallel">並列で</a>実行します:</p>
                    <ol>
                        <li data-md>
                            <p><var>urlRecord</var>、<var>protocols</var>、および<var>client</var>を与えて
                                <a data-link-type="dfn" href="#concept-websocket-establish"
                                    id="ref-for-concept-websocket-establish">WebSocket接続を確立</a>します。
                                <a data-link-type="biblio" href="#biblio-fetch" title="Fetch Standard">[FETCH]</a>
                            </p>
                            <p class="note" role="note">もし
                                <a data-link-type="dfn" href="#concept-websocket-establish"
                                    id="ref-for-concept-websocket-establish①">WebSocket接続を確立</a>するアルゴリズムが失敗した場合、
                                それは<a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.7"
                                    id="ref-for-section-7.1.7④">WebSocket接続を失敗させる</a>アルゴリズムをトリガーし、
                                それは<a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.1"
                                    id="ref-for-section-7.1.1">WebSocket接続を閉じる</a>アルゴリズムを呼び出し、
                                それが<a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.4"
                                    id="ref-for-section-7.1.4">WebSocket接続が閉じられる</a>ことを確立し、
                                それが<a href="#closeWebSocket">以下に記載されているように</a>
                                <code
                                    class="idl"><a data-link-type="idl" href="#eventdef-websocket-close" id="ref-for-eventdef-websocket-close">close</a></code>
                                イベントを発生させます。
                            </p>
                    </ol>
            </ol>
        </div>
        <hr>
        <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket" data-dfn-type="attribute" data-export
                id="dom-websocket-url"><code>url</code></dfn>のgetter手順は、<a data-link-type="dfn"
                href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③">this</a>の
            <a data-link-type="dfn" href="#websocket-internal-url" id="ref-for-websocket-internal-url①">url</a>を
            <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-serializer"
                id="ref-for-concept-url-serializer">シリアライズ</a>して返します。
        </p>
        <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket" data-dfn-type="attribute" data-export
                id="dom-websocket-readystate"><code>readyState</code></dfn>のgetter手順は、<a data-link-type="dfn"
                href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④">this</a>の
            <a data-link-type="dfn" href="#websocket-ready-state" id="ref-for-websocket-ready-state">ready
                state</a>を返します。
        </p>
        <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket" data-dfn-type="attribute" data-export
                id="dom-websocket-extensions"><code>extensions</code></dfn>属性は初期状態では空文字列を返さなければなりません。
            <a data-link-type="dfn"
                href="https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and"
                id="ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and③">WebSocket接続が確立</a>
            された後、その値が変更されることがあります（以下参照）。
        </p>
        <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket" data-dfn-type="attribute" data-export
                id="dom-websocket-protocol"><code>protocol</code></dfn>属性は初期状態では空文字列を返さなければなりません。
            <a data-link-type="dfn"
                href="https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and"
                id="ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and④">WebSocket接続が確立</a>
            された後、その値が変更されることがあります（以下参照）。
        </p>
        <div class="algorithm" data-algorithm="close(code, reason)" data-algorithm-for="WebSocket">

            The <dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket" data-dfn-type="method" data-export
                data-lt="close(code, reason)|close(code)|close()"
                id="dom-websocket-close"><code>close(<var>code</var>, <var>reason</var>)</code></dfn>メソッドの手順は以下の通りです:


            <ol>
                <li data-md>
                    <p>もし<var>code</var>が存在し、1000に等しい整数でも3000から4999（含む）の範囲内の整数でもない場合は、
                        "<code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidaccesserror" id="ref-for-invalidaccesserror">InvalidAccessError</a></code>"
                        <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑤">DOMException</a></code>
                        をスローします。
                    </p>
                <li data-md>
                    <p>もし<var>reason</var>が存在する場合、以下のサブステップを実行します:</p>
                    <ol>
                        <li data-md>
                            <p><var>reasonBytes</var>を<var>reason</var>を<a data-link-type="dfn"
                                    href="https://encoding.spec.whatwg.org/#utf-8-encode"
                                    id="ref-for-utf-8-encode">UTF-8でエンコード</a>した結果とします。</p>
                        <li data-md>
                            <p>もし<var>reasonBytes</var>の長さが123バイトを超える場合、
                                "<code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#syntaxerror" id="ref-for-syntaxerror⑤">SyntaxError</a></code>"
                                <code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑥">DOMException</a></code>
                                をスローします。
                            </p>
                    </ol>
                <li data-md>
                    <p>以下のリストから最初に一致する手順を実行します:</p>
                    <dl class="switch">
                        <dt data-md>もし<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                id="ref-for-this⑤">this</a>の<a data-link-type="dfn" href="#websocket-ready-state"
                                id="ref-for-websocket-ready-state①">ready state</a>が
                            <code
                                class="idl"><a data-link-type="idl" href="#dom-websocket-closing" id="ref-for-dom-websocket-closing①">CLOSING</a></code>
                            (2)または<code
                                class="idl"><a data-link-type="idl" href="#dom-websocket-closed" id="ref-for-dom-websocket-closed①">CLOSED</a></code>
                            (3)の場合
                        <dd data-md>
                            <p>何もしません。</p>
                            <p class="note" role="note">接続はすでに閉じようとしているか、すでに閉じられています。
                                もしまだであれば、<code
                                    class="idl"><a data-link-type="idl" href="#eventdef-websocket-close" id="ref-for-eventdef-websocket-close①">close</a></code>
                                イベントが最終的に<a href="#closeWebSocket">以下に記載されているように</a>発生します。
                            </p>
                        <dt data-md>もしWebSocket接続がまだ<a data-link-type="dfn" data-refhint-key="801de31e"
                                href="https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and"
                                id="ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and⑤">確立されていない</a>
                            <a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>場合
                        <dd data-md>
                            <p><a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.7"
                                    id="ref-for-section-7.1.7⑤">WebSocket接続を失敗させ</a>、
                                <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                    id="ref-for-this⑥">this</a>の<a data-link-type="dfn" href="#websocket-ready-state"
                                    id="ref-for-websocket-ready-state②">ready state</a>を
                                <code
                                    class="idl"><a data-link-type="idl" href="#dom-websocket-closing" id="ref-for-dom-websocket-closing②">CLOSING</a></code>
                                (2)に設定します。
                                <a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
                            </p>
                            <p class="note" role="note"><a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.7"
                                    id="ref-for-section-7.1.7⑥">WebSocket接続を失敗させる</a>アルゴリズムは、
                                <a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.1"
                                    id="ref-for-section-7.1.1①">WebSocket接続を閉じる</a>アルゴリズムを呼び出し、
                                それが<a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.4"
                                    id="ref-for-section-7.1.4①">WebSocket接続が閉じられる</a>ことを確立し、
                                <code
                                    class="idl"><a data-link-type="idl" href="#eventdef-websocket-close" id="ref-for-eventdef-websocket-close②">close</a></code>
                                イベントを<a href="#closeWebSocket">以下に記載されているように</a>発生させます。
                            </p>
                        <dt data-md>もしWebSocketのクローズハンドシェイクがまだ<a data-link-type="dfn"
                                href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.3"
                                id="ref-for-section-7.1.3">開始されていない</a>
                            <a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>場合
                        <dd data-md>
                            <p><a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.2"
                                    id="ref-for-section-7.1.2">WebSocketのクローズハンドシェイクを開始</a>し、
                                <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                    id="ref-for-this⑦">this</a>の<a data-link-type="dfn" href="#websocket-ready-state"
                                    id="ref-for-websocket-ready-state③">ready state</a>を
                                <code
                                    class="idl"><a data-link-type="idl" href="#dom-websocket-closing" id="ref-for-dom-websocket-closing③">CLOSING</a></code>
                                (2)に設定します。
                                <a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
                            </p>
                            <p>もし<var>code</var>と<var>reason</var>のどちらも存在しない場合、WebSocketのCloseメッセージはボディを持ってはなりません。</p>
                            <p class="note" role="note">WebSocket Protocolは、<a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.2"
                                    id="ref-for-section-7.1.2①">WebSocketのクローズハンドシェイクを開始</a>
                                アルゴリズムのステータスコードが<span class="allow-2119">必須</span>であると誤って記述しています。
                            </p>
                            <p>もし<var>code</var>が存在する場合、WebSocketのCloseメッセージに使用されるステータスコードは<var>code</var>によって与えられる整数でなければなりません。
                                <a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
                            </p>
                            <p>もし<var>reason</var>も存在する場合、<var>reasonBytes</var>はCloseメッセージのステータスコードの後に提供されなければなりません。
                                <a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
                            </p>
                            <p class="note" role="note"><a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.2"
                                    id="ref-for-section-7.1.2②">WebSocketのクローズハンドシェイクを開始</a>
                                アルゴリズムは最終的に
                                <a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.1"
                                    id="ref-for-section-7.1.1②">WebSocket接続を閉じる</a>アルゴリズムを呼び出し、
                                それが<a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.4"
                                    id="ref-for-section-7.1.4②">WebSocket接続が閉じられる</a>ことを確立し、
                                <code
                                    class="idl"><a data-link-type="idl" href="#eventdef-websocket-close" id="ref-for-eventdef-websocket-close③">close</a></code>
                                イベントを<a href="#closeWebSocket">以下に記載されているように</a>発生させます。
                            </p>
                        <dt data-md>その他の場合
                        <dd data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                    id="ref-for-this⑧">this</a>の<a data-link-type="dfn" href="#websocket-ready-state"
                                    id="ref-for-websocket-ready-state④">ready state</a>を
                                <code
                                    class="idl"><a data-link-type="idl" href="#dom-websocket-closing" id="ref-for-dom-websocket-closing④">CLOSING</a></code>
                                (2)に設定します。
                            </p>
                            <p class="note" role="note"><a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.3"
                                    id="ref-for-section-7.1.3①">WebSocketのクローズハンドシェイクが開始され</a>、
                                最終的に
                                <a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.1"
                                    id="ref-for-section-7.1.1③">WebSocket接続を閉じる</a>アルゴリズムを呼び出し、
                                それが<a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.4"
                                    id="ref-for-section-7.1.4③">WebSocket接続が閉じられる</a>ことを確立し、
                                <code
                                    class="idl"><a data-link-type="idl" href="#eventdef-websocket-close" id="ref-for-eventdef-websocket-close④">close</a></code>
                                イベントが発生します。
                                <a href="#closeWebSocket">以下に記載されているように</a>。
                            </p>
                    </dl>
            </ol>
        </div>
        <p class="note" role="note"><code
                class="idl"><a data-link-type="idl" href="#dom-websocket-close" id="ref-for-dom-websocket-close③">close()</a></code>
            メソッドは、WebSocketクローズハンドシェイクを開始する前に以前送信したメッセージを破棄しません。実際には、ユーザーエージェントがそれらのメッセージの送信にまだ忙しい場合でも、ハンドシェイクはメッセージの送信が完了した後にのみ開始されます。

        </p>
        <hr>
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket" data-dfn-type="attribute" data-export
                id="dom-websocket-bufferedamount"><code>bufferedAmount</code></dfn>のgetter手順は、<code
                class="idl"><a data-link-type="idl" href="#dom-websocket-send" id="ref-for-dom-websocket-send④">send()</a></code>
            を使用してキューに入れられた、しかし<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop"
                id="ref-for-event-loop">イベントループ</a>が
            <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#step1"
                id="ref-for-step1">ステップ1</a>に到達した時点でまだネットワークに送信されていないアプリケーションデータ（UTF-8テキストおよびバイナリデータ）のバイト数を返します。
            （これは、スクリプトの実行中に送信されたテキストを含みます。ユーザーエージェントがスクリプトの実行と<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                id="ref-for-in-parallel①">並列</a>でテキストを送信できるかどうかに関係なく）。これは、プロトコルによって発生するフレーミングオーバーヘッドや、オペレーティングシステムやネットワークハードウェアによるバッファリングを含みません。
        </p>
        <div class="example" id="buffered-amount-example">
            <a class="self-link" href="#buffered-amount-example"></a>


            <p>この簡単な例では、<code
                    class="idl"><a data-link-type="idl" href="#dom-websocket-bufferedamount" id="ref-for-dom-websocket-bufferedamount②">bufferedAmount</a></code>
                属性を使用して、ネットワークがその速度を処理できる場合は50msごとに1回の更新を送信し、そうでない場合はネットワークが処理できる任意の速度で更新を送信します。</p>
            <pre class="highlight"><c- a>var</c-> socket <c- o>=</c-> <c- ow>new</c-> WebSocket<c- p>(</c-><c- t>'ws://game.example.com:12010/updates'</c-><c- p>);</c->
socket<c- p>.</c->onopen <c- o>=</c-> <c- a>function</c-> <c- p>()</c-> <c- p>{</c->
  setInterval<c- p>(</c-><c- a>function</c-><c- p>()</c-> <c- p>{</c->
    <c- k>if</c-> <c- p>(</c->socket<c- p>.</c->bufferedAmount <c- o>==</c-> <c- mf>0</c-><c- p>)</c->
      socket<c- p>.</c->send<c- p>(</c->getUpdateData<c- p>());</c->
  <c- p>},</c-> <c- mf>50</c-><c- p>);</c->
<c- p>};</c->
</pre>
            <p><code
                    class="idl"><a data-link-type="idl" href="#dom-websocket-bufferedamount" id="ref-for-dom-websocket-bufferedamount③">bufferedAmount</a></code>
                属性は、ネットワークが処理できる速度以上のデータを送信しないようにしながら、ネットワークを完全に使用するためにも利用できますが、これには時間の経過とともに属性値を注意深く監視する必要があります。</p>
        </div>
        <hr>
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket" data-dfn-type="attribute" data-export
                id="dom-websocket-binarytype"><code>binaryType</code></dfn>のgetter手順は、<a data-link-type="dfn"
                href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑨">this</a>の
            <a data-link-type="dfn" href="#websocket-binary-type" id="ref-for-websocket-binary-type">binary
                type</a>を返します。
        </p>
        <p><code
                class="idl"><a data-link-type="idl" href="#dom-websocket-binarytype" id="ref-for-dom-websocket-binarytype③">binaryType</a></code>
            のsetter手順は、<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                id="ref-for-this①⓪">this</a>の<a data-link-type="dfn" href="#websocket-binary-type"
                id="ref-for-websocket-binary-type①">binary type</a>を
            <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#the-given-value"
                id="ref-for-the-given-value">the given value</a>に設定します。
        </p>
        <p class="note" role="note">ユーザーエージェントは、<a data-link-type="dfn" href="#websocket-binary-type"
                id="ref-for-websocket-binary-type②">binary type</a>を使用して、受信したバイナリデータをどのように処理するかのヒントとして使用できます。
            "<code
                class="idl"><a data-link-type="idl" href="#dom-binarytype-blob" id="ref-for-dom-binarytype-blob④">blob</a></code>"
            の場合、安全にディスクにスプールでき、
            "<code
                class="idl"><a data-link-type="idl" href="#dom-binarytype-arraybuffer" id="ref-for-dom-binarytype-arraybuffer②">arraybuffer</a></code>"
            の場合、データをメモリに保持する方が効率的である可能性が高いです。当然のことながら、ユーザーエージェントは、受信したデータをメモリに保持するかどうかを決定するために、データのサイズやスクリプトが最後の瞬間に属性を変更する頻度などに基づいて、より微妙なヒューリスティックを使用することを推奨されます。
            特に重要なのは、ユーザーエージェントがデータを受信した後、イベントを発生させる前に属性が変更される可能性が十分にあるという点です。

        </p>
        <div class="algorithm" data-algorithm="send(data)" data-algorithm-for="WebSocket">

            <dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket" data-dfn-type="method" data-export
                id="dom-websocket-send"><code>send(<var>data</var>)</code></dfn>メソッドの手順は以下の通りです:


            <ol>
                <li data-md>
                    <p>もし<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this①①">this</a>の<a data-link-type="dfn" href="#websocket-ready-state"
                            id="ref-for-websocket-ready-state⑤">ready state</a>が<code
                            class="idl"><a data-link-type="idl" href="#dom-websocket-connecting" id="ref-for-dom-websocket-connecting②">CONNECTING</a></code>
                        ならば、"<code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror">InvalidStateError</a></code>"
                        <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑦">DOMException</a></code>
                        をスローします。
                    </p>
                <li data-md>
                    <p>以下のリストから適切な手順セットを実行します:</p>
                    <dl>
                        <dt data-md>もし<var>data</var>が文字列の場合
                        <dd data-md>
                            <p>もし<a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and"
                                    id="ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and⑥">WebSocket接続が確立</a>されており、
                                <a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.3"
                                    id="ref-for-section-7.1.3②">WebSocketクローズハンドシェイクがまだ開始されていない</a>
                                場合、ユーザーエージェントは<var>data</var>引数をテキストフレームオペコードを使用して構成された<a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#page-66:~:text=needs%20to-,_Send%20a%20WebSocket%20Message_"
                                    id="ref-for-page-66:~:text=needs%20to-,_Send%20a%20WebSocket%20Message_">WebSocketメッセージを送信</a>
                                しなければなりません。データを送信できない場合（例：バッファリングが必要だがバッファが満杯の場合）、ユーザーエージェントは<a data-link-type="dfn"
                                    href="#flagged-as-full" id="ref-for-flagged-as-full">WebSocketをフルとしてフラグ付け</a>し、その後<a
                                    data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.1"
                                    id="ref-for-section-7.1.1④">WebSocket接続を閉じなければなりません</a>。
                                このメソッドが例外をスローせずに文字列引数で呼び出された場合、
                                <code
                                    class="idl"><a data-link-type="idl" href="#dom-websocket-bufferedamount" id="ref-for-dom-websocket-bufferedamount④">bufferedAmount</a></code>
                                属性をUTF-8として引数を表現するのに必要なバイト数だけ増加させなければなりません。
                                <a data-link-type="biblio" href="#biblio-unicode"
                                    title="The Unicode Standard">[UNICODE]</a>
                                <a data-link-type="biblio" href="#biblio-encoding"
                                    title="Encoding Standard">[ENCODING]</a>
                                <a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
                            </p>
                        <dt data-md>もし<var>data</var>が<code
                                class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-Blob" id="ref-for-dfn-Blob③">Blob</a></code>
                            オブジェクトの場合
                        <dd data-md>
                            <p>もし<a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and"
                                    id="ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and⑦">WebSocket接続が確立</a>されており、
                                <a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.3"
                                    id="ref-for-section-7.1.3③">WebSocketクローズハンドシェイクがまだ開始されていない</a>
                                場合、ユーザーエージェントは<var>data</var>をバイナリフレームオペコードを用いて構成された<a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#page-66:~:text=needs%20to-,_Send%20a%20WebSocket%20Message_"
                                    id="ref-for-page-66:~:text=needs%20to-,_Send%20a%20WebSocket%20Message_①">WebSocketメッセージを送信</a>
                                しなければなりません。データを送信できない場合、ユーザーエージェントは<a data-link-type="dfn" href="#flagged-as-full"
                                    id="ref-for-flagged-as-full①">WebSocketをフルとしてフラグ付け</a>し、その後<a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.1"
                                    id="ref-for-section-7.1.1⑤">WebSocket接続を閉じなければなりません</a>。
                                送信されるデータは<code
                                    class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-Blob" id="ref-for-dfn-Blob④">Blob</a></code>
                                オブジェクトが表す生データです。このメソッドが例外をスローせずに<code
                                    class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-Blob" id="ref-for-dfn-Blob⑤">Blob</a></code>
                                引数で呼び出された場合、
                                <code
                                    class="idl"><a data-link-type="idl" href="#dom-websocket-bufferedamount" id="ref-for-dom-websocket-bufferedamount⑤">bufferedAmount</a></code>
                                属性を<code
                                    class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-Blob" id="ref-for-dfn-Blob⑥">Blob</a></code>
                                オブジェクトの生データのサイズ（バイト単位）だけ増加させなければなりません。
                                <a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
                                <a data-link-type="biblio" href="#biblio-fileapi" title="File API">[FILEAPI]</a>
                            </p>
                        <dt data-md>もし<var>data</var>が<code
                                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer" id="ref-for-idl-ArrayBuffer②">ArrayBuffer</a></code>
                            の場合
                        <dd data-md>
                            <p>もし<a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and"
                                    id="ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and⑧">WebSocket接続が確立</a>されており、
                                <a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.3"
                                    id="ref-for-section-7.1.3④">WebSocketクローズハンドシェイクがまだ開始されていない</a>
                                場合、ユーザーエージェントは<var>data</var>をバイナリフレームオペコードを用いて構成された<a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#page-66:~:text=needs%20to-,_Send%20a%20WebSocket%20Message_"
                                    id="ref-for-page-66:~:text=needs%20to-,_Send%20a%20WebSocket%20Message_②">WebSocketメッセージを送信</a>
                                しなければなりません。データを送信できない場合、ユーザーエージェントは<a data-link-type="dfn" href="#flagged-as-full"
                                    id="ref-for-flagged-as-full②">WebSocketをフルとしてフラグ付け</a>し、その後<a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.1"
                                    id="ref-for-section-7.1.1⑥">WebSocket接続を閉じなければなりません</a>。
                                送信されるデータは、<code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer" id="ref-for-idl-ArrayBuffer③">ArrayBuffer</a></code>
                                オブジェクトが記述するバッファに格納されたデータです。
                                このメソッドが例外をスローせずに<code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer" id="ref-for-idl-ArrayBuffer④">ArrayBuffer</a></code>
                                引数で呼び出された場合、
                                <code
                                    class="idl"><a data-link-type="idl" href="#dom-websocket-bufferedamount" id="ref-for-dom-websocket-bufferedamount⑥">bufferedAmount</a></code>
                                属性を<code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer" id="ref-for-idl-ArrayBuffer⑤">ArrayBuffer</a></code>
                                の長さ（バイト単位）だけ増加させなければなりません。
                                <a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
                            </p>
                        <dt data-md>もし<var>data</var>が<code
                                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#ArrayBufferView" id="ref-for-ArrayBufferView①">ArrayBufferView</a></code>
                            の場合
                        <dd data-md>
                            <p>もし<a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and"
                                    id="ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and⑨">WebSocket接続が確立</a>されており、
                                <a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.3"
                                    id="ref-for-section-7.1.3⑤">WebSocketクローズハンドシェイクがまだ開始されていない</a>
                                場合、ユーザーエージェントは<var>data</var>をバイナリフレームオペコードを用いて構成された<a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#page-66:~:text=needs%20to-,_Send%20a%20WebSocket%20Message_"
                                    id="ref-for-page-66:~:text=needs%20to-,_Send%20a%20WebSocket%20Message_③">WebSocketメッセージを送信</a>
                                しなければなりません。データを送信できない場合、ユーザーエージェントは<a data-link-type="dfn" href="#flagged-as-full"
                                    id="ref-for-flagged-as-full③">WebSocketをフルとしてフラグ付け</a>し、その後<a data-link-type="dfn"
                                    href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.1"
                                    id="ref-for-section-7.1.1⑦">WebSocket接続を閉じなければなりません</a>。
                                送信されるデータは、<var>data</var>が参照するバッファのセクションに格納されたデータです。この種の引数でこのメソッドが例外をスローせずに呼び出された場合、
                                <code
                                    class="idl"><a data-link-type="idl" href="#dom-websocket-bufferedamount" id="ref-for-dom-websocket-bufferedamount⑦">bufferedAmount</a></code>
                                属性を<var>data</var>のバッファの長さ（バイト単位）だけ増加させなければなりません。
                                <a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
                            </p>
                    </dl>
            </ol>
        </div>
        <hr>
        <p>以下は、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers"
                id="ref-for-event-handlers">イベントハンドラ</a>（および対応する<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type"
                id="ref-for-event-handler-event-type">イベントハンドライベントタイプ</a>）であり、
            <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes"
                id="ref-for-event-handler-idl-attributes">イベントハンドラIDL属性</a>として、
            <code class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket⑧">WebSocket</a></code>
            インターフェースを実装するすべてのオブジェクトによってサポートされなければなりません:
        </p>
        <table>
            <thead>
                <tr>
                    <th><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers"
                            id="ref-for-event-handlers①">イベントハンドラ</a>
                    <th><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type"
                            id="ref-for-event-handler-event-type①">イベントハンドライベントタイプ</a>

            <tbody>
                <tr>
                    <td><dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket" data-dfn-type="attribute" data-export
                            id="dom-websocket-onopen"><code>onopen</code></dfn>
                    <td> <code
                            class="idl"><a data-link-type="idl" href="#eventdef-websocket-open" id="ref-for-eventdef-websocket-open">open</a></code>

                <tr>
                    <td><dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket" data-dfn-type="attribute" data-export
                            id="dom-websocket-onmessage"><code>onmessage</code></dfn>
                    <td> <code
                            class="idl"><a data-link-type="idl" href="#eventdef-websocket-message" id="ref-for-eventdef-websocket-message">message</a></code>

                <tr>
                    <td><dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket" data-dfn-type="attribute" data-export
                            id="dom-websocket-onerror"><code>onerror</code></dfn>
                    <td> <code
                            class="idl"><a data-link-type="idl" href="#eventdef-websocket-error" id="ref-for-eventdef-websocket-error">error</a></code>

                <tr>
                    <td><dfn class="dfn-paneled idl-code" data-dfn-for="WebSocket" data-dfn-type="attribute" data-export
                            id="dom-websocket-onclose"><code>onclose</code></dfn>
                    <td> <code
                            class="idl"><a data-link-type="idl" href="#eventdef-websocket-close" id="ref-for-eventdef-websocket-close⑤">close</a></code>

        </table>
        <h2 class="heading settled" data-level="4" id="feedback-from-the-protocol"><span class="secno">4. </span><span
                class="content">プロトコルからのフィードバック</span><a class="self-link" href="#feedback-from-the-protocol"></a></h2>
        <p><a data-link-type="dfn"
                href="https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and"
                id="ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and①⓪">WebSocket接続が確立</a>されたとき、ユーザーエージェントは<a
                data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"
                id="ref-for-queue-a-task">タスクをキューに入れ</a>以下の手順を実行しなければなりません:</p>
        <div class="algorithm" data-algorithm="handle connection establishment">
            <ol>
                <li data-md>
                    <p><a data-link-type="dfn" href="#websocket-ready-state" id="ref-for-websocket-ready-state⑥">ready
                            state</a>を<code
                            class="idl"><a data-link-type="idl" href="#dom-websocket-open" id="ref-for-dom-websocket-open①">OPEN</a></code>
                        (1)に変更する。</p>
                <li data-md>
                    <p><code
                            class="idl"><a data-link-type="idl" href="#dom-websocket-extensions" id="ref-for-dom-websocket-extensions②">extensions</a></code>
                        属性の値を<a data-link-type="dfn" data-refhint-key="4a0b7b82"
                            href="https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and"
                            id="ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and①①">使用されている拡張機能</a>に変更する。ただし、それがnull値でない場合に限る。
                        <a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
                    </p>
                <li data-md>
                    <p><code
                            class="idl"><a data-link-type="idl" href="#dom-websocket-protocol" id="ref-for-dom-websocket-protocol②">protocol</a></code>
                        属性の値を<a data-link-type="dfn"
                            href="https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_Subprotocol%20In,Use_"
                            id="ref-for-page-19:~:text=_Subprotocol%20In,Use_">使用されているサブプロトコル</a>に変更する。ただし、それがnull値でない場合に限る。
                        <a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
                    </p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire"
                            id="ref-for-concept-event-fire">イベントを発火</a>し、名前を<dfn class="dfn-paneled idl-code"
                            data-dfn-for="WebSocket" data-dfn-type="event" data-export
                            id="eventdef-websocket-open"><code>open</code></dfn>とし、<code
                            class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket⑨">WebSocket</a></code>
                        オブジェクトで行う。</p>
            </ol>
            <p class="note" role="note">上記のアルゴリズムは<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"
                    id="ref-for-queue-a-task①">タスクとしてキューに入れられる</a>ため、<a data-link-type="dfn"
                    href="https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and"
                    id="ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and①②">WebSocket接続が確立</a>されることと、スクリプトが<code
                    class="idl"><a data-link-type="idl" href="#eventdef-websocket-open" id="ref-for-eventdef-websocket-open①">open</a></code>
                イベントのためのイベントリスナーを設定する間に競合状態は発生しません。

            </p>
        </div>
        <hr>
        <div class="algorithm" data-algorithm="handle a WebSocket message">
            <p><a data-link-type="dfn"
                    href="https://datatracker.ietf.org/doc/html/rfc6455#page-66:~:text=_A%20WebSocket%20Message%20Has%20Been%20Received_"
                    id="ref-for-page-66:~:text=_A%20WebSocket%20Message%20Has%20Been%20Received_">WebSocketメッセージが受信</a>され、タイプ<var>type</var>とデータ<var>data</var>が存在する場合、ユーザーエージェントは<a
                    data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"
                    id="ref-for-queue-a-task②">タスクをキューに入れ</a>以下の手順を実行しなければなりません: <a data-link-type="biblio"
                    href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
            </p>
            <ol>
                <li data-md>
                    <p><a data-link-type="dfn" href="#websocket-ready-state" id="ref-for-websocket-ready-state⑦">ready
                            state</a>が<code
                            class="idl"><a data-link-type="idl" href="#dom-websocket-open" id="ref-for-dom-websocket-open②">OPEN</a></code>
                        (1)でない場合、終了する。</p>
                <li data-md>
                    <p><var>type</var>と<a data-link-type="dfn" href="#websocket-binary-type"
                            id="ref-for-websocket-binary-type③">binary type</a>に基づいて<var>dataForEvent</var>を決定する:</p>
                    <dl class="switch">
                        <dt data-md><var>type</var>がテキストデータを示す場合
                        <dd data-md>
                            <p><var>data</var>を含む新しい<code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString④">DOMString</a></code>
                            </p>
                        <dt data-md><var>type</var>がバイナリデータを示し<a data-link-type="dfn" href="#websocket-binary-type"
                                id="ref-for-websocket-binary-type④">binary type</a>が
                            <dfn class="dfn-paneled idl-code" data-dfn-for="BinaryType" data-dfn-type="enum-value"
                                data-export id="dom-binarytype-blob"><code>"blob"</code></dfn>の場合
                        <dd data-md>
                            <p>新しい<code
                                    class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-Blob" id="ref-for-dfn-Blob⑦">Blob</a></code>
                                オブジェクト。このオブジェクトは<code
                                    class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket①⓪">WebSocket</a></code>
                                オブジェクトの<a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                                    id="ref-for-concept-relevant-realm">関連する領域</a>内で作成され、<var>data</var>をその生データとして表現します。
                                <a data-link-type="biblio" href="#biblio-fileapi" title="File API">[FILEAPI]</a>
                            </p>
                        <dt data-md><var>type</var>がバイナリデータを示し<a data-link-type="dfn" href="#websocket-binary-type"
                                id="ref-for-websocket-binary-type⑤">binary type</a>が
                            <dfn class="dfn-paneled idl-code" data-dfn-for="BinaryType" data-dfn-type="enum-value"
                                data-export id="dom-binarytype-arraybuffer"><code>"arraybuffer"</code></dfn>の場合
                        <dd data-md>
                            <p>新しい<code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer" id="ref-for-idl-ArrayBuffer⑦">ArrayBuffer</a></code>
                                オブジェクト。このオブジェクトは<code
                                    class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket①①">WebSocket</a></code>
                                オブジェクトの<a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                                    id="ref-for-concept-relevant-realm①">関連する領域</a>内で作成され、その内容は<var>data</var>です。</p>
                    </dl>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire"
                            id="ref-for-concept-event-fire①">イベントを発火</a>し、名前を<dfn class="dfn-paneled idl-code"
                            data-dfn-for="WebSocket" data-dfn-type="event" data-export
                            id="eventdef-websocket-message"><code>message</code></dfn>とし、<code
                            class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket①②">WebSocket</a></code>
                        オブジェクトで行い、
                        <code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/comms.html#messageevent" id="ref-for-messageevent">MessageEvent</a></code>
                        を使用し、<code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/comms.html#dom-messageevent-origin" id="ref-for-dom-messageevent-origin">origin</a></code>
                        属性を<code
                            class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket①③">WebSocket</a></code>
                        オブジェクトの<a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url"
                            id="ref-for-concept-url③">url</a>の<a data-link-type="dfn"
                            href="https://url.spec.whatwg.org/#concept-url-origin"
                            id="ref-for-concept-url-origin">origin</a>への<a data-link-type="dfn"
                            href="https://url.spec.whatwg.org/#concept-url-serializer"
                            id="ref-for-concept-url-serializer①">シリアライズ</a>に初期化し、<code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/comms.html#dom-messageevent-data" id="ref-for-dom-messageevent-data">data</a></code>
                        属性を<var>dataForEvent</var>に初期化する。
                    </p>
            </ol>
            <p class="note" role="note">ユーザーエージェントは、上記の手順を効率的に実行できるかどうかをタスク実行前に確認し、バッファの準備中に他の<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#task-queue"
                    id="ref-for-task-queue">タスクキュー</a>からタスクを選択することが推奨されます。
                例えば、データが到着した時点で<a data-link-type="dfn" href="#websocket-binary-type"
                    id="ref-for-websocket-binary-type⑥">binary type</a>が"<code
                    class="idl"><a data-link-type="idl" href="#dom-binarytype-blob" id="ref-for-dom-binarytype-blob⑤">blob</a></code>"
                であり、ユーザーエージェントがすべてのデータをディスクにスプールしていた場合、
                上記の特定のメッセージに対する<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task"
                    id="ref-for-concept-task">タスク</a>を実行する直前にスクリプトが<a data-link-type="dfn" href="#websocket-binary-type"
                    id="ref-for-websocket-binary-type⑦">binary type</a>を"<code
                    class="idl"><a data-link-type="idl" href="#dom-binarytype-arraybuffer" id="ref-for-dom-binarytype-arraybuffer③">arraybuffer</a></code>"
                に切り替えた場合、メインスレッドが<code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer" id="ref-for-idl-ArrayBuffer⑧">ArrayBuffer</a></code>
                オブジェクトを作成する間にスタールしないよう、この<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task"
                    id="ref-for-concept-task①">タスク</a>を実行する前にデータをRAMに戻すことを望むでしょう。

            </p>
        </div>
        <div class="example" id="message-example">
            <a class="self-link" href="#message-example"></a>


            <p>以下は、テキストフレームの場合における<code
                    class="idl"><a data-link-type="idl" href="#eventdef-websocket-message" id="ref-for-eventdef-websocket-message①">message</a></code>
                イベントのハンドラーを定義する例です:</p>
            <pre class="highlight">mysocket<c- p>.</c->onmessage <c- o>=</c-> <c- a>function</c-> <c- p>(</c->event<c- p>)</c-> <c- p>{</c->
  <c- k>if</c-> <c- p>(</c->event<c- p>.</c->data <c- o>==</c-> <c- t>'on'</c-><c- p>)</c-> <c- p>{</c->
    turnLampOn<c- p>();</c->
  <c- p>}</c-> <c- k>else</c-> <c- k>if</c-> <c- p>(</c->event<c- p>.</c->data <c- o>==</c-> <c- t>'off'</c-><c- p>)</c-> <c- p>{</c->
    turnLampOff<c- p>();</c->
  <c- p>}</c->
<c- p>};</c->
</pre>
            <p>ここでのプロトコルは単純で、サーバーは単に "on" または "off" のメッセージを送信するだけです。</p>
        </div>
        <hr>
        <p><a data-link-type="dfn" href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.3"
                id="ref-for-section-7.1.3⑥">WebSocketのクローズハンドシェイクが開始</a>されるとき、ユーザーエージェントは<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"
                id="ref-for-queue-a-task③">タスクをキューに入れ</a>
            <a data-link-type="dfn" href="#websocket-ready-state" id="ref-for-websocket-ready-state⑧">ready
                state</a>を<code
                class="idl"><a data-link-type="idl" href="#dom-websocket-closing" id="ref-for-dom-websocket-closing⑤">CLOSING</a></code>
            (2)に変更しなければなりません。（<code
                class="idl"><a data-link-type="idl" href="#dom-websocket-close" id="ref-for-dom-websocket-close④">close()</a></code>
            メソッドが呼び出された場合、このタスクが実行されるときには<a data-link-type="dfn" href="#websocket-ready-state"
                id="ref-for-websocket-ready-state⑨">ready state</a>はすでに<code
                class="idl"><a data-link-type="idl" href="#dom-websocket-closing" id="ref-for-dom-websocket-closing⑥">CLOSING</a></code>
            (2)に設定されています。）<a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
        </p>
        <hr>
        <p id="closeWebSocket"><a data-link-type="dfn"
                href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.4"
                id="ref-for-section-7.1.4④">WebSocket接続が閉じられ</a>、場合によっては<a data-link-type="dfn"
                href="https://datatracker.ietf.org/doc/html/rfc6455#page-41:~:text=closed-,_cleanly_."
                id="ref-for-page-41:~:text=closed-,_cleanly_.">正常に閉じられた</a>場合、ユーザーエージェントは<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"
                id="ref-for-queue-a-task④">タスクをキューに入れ</a>次のサブステップを実行しなければなりません:

        </p>
        <div class="algorithm" data-algorithm="handle connection close">
            <ol>
                <li data-md>
                    <p><a data-link-type="dfn" href="#websocket-ready-state" id="ref-for-websocket-ready-state①⓪">ready
                            state</a>を<code
                            class="idl"><a data-link-type="idl" href="#dom-websocket-closed" id="ref-for-dom-websocket-closed②">CLOSED</a></code>
                        (3)に変更する。</p>
                <li data-md>
                    <p>ユーザーエージェントが<a data-link-type="dfn"
                            href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.7"
                            id="ref-for-section-7.1.7⑦">WebSocket接続を失敗させる必要があった</a>場合、または<a data-link-type="dfn"
                            href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.4"
                            id="ref-for-section-7.1.4⑤">WebSocket接続が閉じられた</a>後に<dfn class="dfn-paneled"
                            data-dfn-type="dfn" data-lt="flagged as full" data-noexport
                            id="flagged-as-full">フルとしてフラグ付けされた</dfn>場合、<a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#concept-event-fire"
                            id="ref-for-concept-event-fire②">イベントを発火</a>し、名前を<dfn class="dfn-paneled idl-code"
                            data-dfn-for="WebSocket" data-dfn-type="event" data-export
                            id="eventdef-websocket-error"><code>error</code></dfn>とし
                        <code
                            class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket①④">WebSocket</a></code>
                        オブジェクトで行う。<a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
                    </p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire"
                            id="ref-for-concept-event-fire③">イベントを発火</a>し、名前を<dfn class="dfn-paneled idl-code"
                            data-dfn-for="WebSocket" data-dfn-type="event" data-export
                            id="eventdef-websocket-close"><code>close</code></dfn>とし、<code
                            class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket①⑤">WebSocket</a></code>
                        オブジェクトで行い、
                        <code
                            class="idl"><a data-link-type="idl" href="#closeevent" id="ref-for-closeevent">CloseEvent</a></code>
                        を使用し、<code
                            class="idl"><a data-link-type="idl" href="#dom-closeevent-wasclean" id="ref-for-dom-closeevent-wasclean">wasClean</a></code>
                        属性を接続が<a data-link-type="dfn"
                            href="https://datatracker.ietf.org/doc/html/rfc6455#page-41:~:text=closed-,_cleanly_."
                            id="ref-for-page-41:~:text=closed-,_cleanly_.①">正常に閉じられた</a>場合にtrue、それ以外の場合はfalseに初期化し、<code
                            class="idl"><a data-link-type="idl" href="#dom-closeevent-code" id="ref-for-dom-closeevent-code">code</a></code>
                        属性を<a data-link-type="dfn" href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.5"
                            id="ref-for-section-7.1.5①">WebSocket接続終了コード</a>に初期化し、<code
                            class="idl"><a data-link-type="idl" href="#dom-closeevent-reason" id="ref-for-dom-closeevent-reason">reason</a></code>
                        属性を<a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-decode-without-bom"
                            id="ref-for-utf-8-decode-without-bom">UTF-8デコード（BOMなし）</a>を<a data-link-type="dfn"
                            href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.6"
                            id="ref-for-section-7.1.6①">WebSocket接続終了理由</a>に適用した結果に初期化する。<a data-link-type="biblio"
                            href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
                    </p>
            </ol>
        </div>
        <div class="warning">
            <p>ユーザーエージェントは、スクリプトが以下の状況を区別できるような形で失敗情報を伝達してはなりません:</p>
            <ul>
                <li data-md>
                    <p>ホスト名が解決できなかったサーバー。</p>
                <li data-md>
                    <p>パケットを正常にルーティングできなかったサーバー。</p>
                <li data-md>
                    <p>指定されたポートで接続を拒否したサーバー。</p>
                <li data-md>
                    <p>TLSハンドシェイクを正しく実行できなかったサーバー（例: サーバー証明書を検証できない場合）。</p>
                <li data-md>
                    <p>オープニングハンドシェイクを完了しなかったサーバー（例: WebSocketサーバーでないため）。</p>
                <li data-md>
                    <p>正しいオープニングハンドシェイクを送信したが、クライアントが接続を切断する原因となるオプションを指定したWebSocketサーバー（例:
                        サーバーがクライアントが提供しなかったサブプロトコルを指定した場合）。</p>
                <li data-md>
                    <p>オープニングハンドシェイクを正常に完了した後に接続を突然閉じたWebSocketサーバー。</p>
            </ul>
            <p>これらすべての場合、<a data-link-type="dfn" href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.5"
                    id="ref-for-section-7.1.5②">WebSocket接続終了コード</a>は<cite>WebSocket
                    Protocol</cite>により要求される通り1006となります。<a data-link-type="biblio" href="#biblio-wsp"
                    title="The WebSocket Protocol">[WSP]</a>
            </p>
            <p>スクリプトがこれらのケースを区別できるようにすることは、攻撃の準備としてユーザーのローカルネットワークを調査することを可能にするでしょう。</p>
            <p class="note" role="note">特に、コード1015はユーザーエージェントによって使用されないことを意味します（ただし、サーバーが誤ってそのクローズフレーム内で使用した場合を除く）。

            </p>
        </div>
        <hr>
        <p>このセクションで<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"
                id="ref-for-queue-a-task⑤">キューに入れられる</a><a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task"
                id="ref-for-concept-task②">すべてのタスク</a>の<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#task-source"
                id="ref-for-task-source">タスクソース</a>は<dfn class="dfn-paneled" data-dfn-type="dfn" data-export
                id="websocket-task-source">WebSocketタスクソース</dfn>です。
        </p>
        <h2 class="heading settled" data-level="5" id="ping-and-pong-frames"><span class="secno">5. </span><span
                class="content">PingとPongフレーム</span><a class="self-link" href="#ping-and-pong-frames"></a></h2>
        <p><cite>WebSocketプロトコル</cite>では、PingフレームとPongフレームが定義されており、キープアライブやハートビート、ネットワーク状態のプロービング、遅延の計測などに使用できます。これらは現在APIでは公開されていません。
        </p>
        <p>ユーザーエージェントは、例えばローカルネットワークのNATマッピングを維持する試みとして、失敗した接続を検出するため、またはユーザーに遅延メトリクスを表示するために、Pingおよび未要求のPongフレームを任意に送信することができます。ユーザーエージェントは、サーバーを支援するためにPingや未要求のPongを使用してはなりません。サーバーが必要に応じてPongを要求することが前提とされています。
        </p>
        <h2 class="heading settled" data-level="6" id="the-closeevent-interface"><span class="secno">6. </span><span
                class="content"><code
                    class="idl"><a data-link-type="idl" href="#closeevent" id="ref-for-closeevent①">CloseEvent</a></code>
                インターフェース</span><a class="self-link" href="#the-closeevent-interface"></a></h2>
        <p><code class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket①⑥">WebSocket</a></code>
            オブジェクトは、<code
                class="idl"><a data-link-type="idl" href="#closeevent" id="ref-for-closeevent②">CloseEvent</a></code>
            インターフェースを<code
                class="idl"><a data-link-type="idl" href="#eventdef-websocket-close" id="ref-for-eventdef-websocket-close⑥">close</a></code>
            イベントに使用します:</p>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="closeevent"><code><c- g>CloseEvent</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event" id="ref-for-event"><c- n>Event</c-></a> {
  <dfn class="dfn-paneled idl-code" data-dfn-for="CloseEvent" data-dfn-type="constructor" data-export data-lt="CloseEvent(type, eventInitDict)|constructor(type, eventInitDict)|CloseEvent(type)|constructor(type)" id="dom-closeevent-closeevent"><code><c- g>constructor</c-></code></dfn>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑤"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CloseEvent/CloseEvent(type, eventInitDict), CloseEvent/constructor(type, eventInitDict), CloseEvent/CloseEvent(type), CloseEvent/constructor(type)" data-dfn-type="argument" data-export id="dom-closeevent-closeevent-type-eventinitdict-type"><code><c- g>type</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-closeeventinit" id="ref-for-dictdef-closeeventinit"><c- n>CloseEventInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CloseEvent/CloseEvent(type, eventInitDict), CloseEvent/constructor(type, eventInitDict), CloseEvent/CloseEvent(type), CloseEvent/constructor(type)" data-dfn-type="argument" data-export id="dom-closeevent-closeevent-type-eventinitdict-eventinitdict"><code><c- g>eventInitDict</c-></code></dfn> = {});

  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-closeevent-wasclean" id="ref-for-dom-closeevent-wasclean①"><c- g>wasClean</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-short" id="ref-for-idl-unsigned-short⑥"><c- b>unsigned</c-> <c- b>short</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned short" href="#dom-closeevent-code" id="ref-for-dom-closeevent-code①"><c- g>code</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString④"><c- b>USVString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="USVString" href="#dom-closeevent-reason" id="ref-for-dom-closeevent-reason①"><c- g>reason</c-></a>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-closeeventinit"><code><c- g>CloseEventInit</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit" id="ref-for-dictdef-eventinit"><c- n>EventInit</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="CloseEventInit" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-closeeventinit-wasclean"><code><c- g>wasClean</c-></code></dfn> = <c- b>false</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-short" id="ref-for-idl-unsigned-short⑦"><c- b>unsigned</c-> <c- b>short</c-></a> <dfn class="dfn-paneled idl-code" data-default="0" data-dfn-for="CloseEventInit" data-dfn-type="dict-member" data-export data-type="unsigned short" id="dom-closeeventinit-code"><code><c- g>code</c-></code></dfn> = 0;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString⑤"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;&quot;" data-dfn-for="CloseEventInit" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-closeeventinit-reason"><code><c- g>reason</c-></code></dfn> = "";
};
</pre>
        <dl class="domintro">
            <dt data-md><var>event</var> . <code
                    class="idl"><a data-link-type="idl" href="#dom-closeevent-wasclean" id="ref-for-dom-closeevent-wasclean②">wasClean</a></code>
            <dd data-md>
                <p>接続が正常に閉じられた場合はtrueを、それ以外の場合はfalseを返します。</p>
            <dt data-md><var>event</var> . <code
                    class="idl"><a data-link-type="idl" href="#dom-closeevent-code" id="ref-for-dom-closeevent-code②">code</a></code>
            <dd data-md>
                <p>サーバーによって提供されたWebSocket接続終了コードを返します。</p>
            <dt data-md><var>event</var> . <code
                    class="idl"><a data-link-type="idl" href="#dom-closeevent-reason" id="ref-for-dom-closeevent-reason②">reason</a></code>
            <dd data-md>
                <p>サーバーによって提供されたWebSocket接続終了理由を返します。</p>
        </dl>
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="CloseEvent" data-dfn-type="attribute" data-export
                id="dom-closeevent-wasclean"><code>wasClean</code></dfn> 属性は初期化された値を返さなければなりません。これは接続が正常に閉じられたかどうかを表します。
        </p>
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="CloseEvent" data-dfn-type="attribute" data-export
                id="dom-closeevent-code"><code>code</code></dfn>
            属性は初期化された値を返さなければなりません。これはサーバーによって提供されたWebSocket接続終了コードを表します。</p>
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="CloseEvent" data-dfn-type="attribute" data-export
                id="dom-closeevent-reason"><code>reason</code></dfn>
            属性は初期化された値を返さなければなりません。これはサーバーによって提供されたWebSocket接続終了理由を表します。</p>
        <h2 class="heading settled" data-level="7" id="garbage-collection"><span class="secno">7. </span><span
                class="content">ガベージコレクション</span><a class="self-link" href="#garbage-collection"></a></h2>
        <p><code class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket①⑦">WebSocket</a></code>
            オブジェクトで、その<a data-link-type="dfn" href="#websocket-ready-state" id="ref-for-websocket-ready-state①①">ready
                state</a>が最後に<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop"
                id="ref-for-event-loop①">イベントループ</a>が<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#step1"
                id="ref-for-step1①">ステップ1</a>に到達した時点で<code
                class="idl"><a data-link-type="idl" href="#dom-websocket-connecting" id="ref-for-dom-websocket-connecting③">CONNECTING</a></code>
            (0)に設定されていた場合、<code
                class="idl"><a data-link-type="idl" href="#eventdef-websocket-open" id="ref-for-eventdef-websocket-open②">open</a></code>イベント、
            <code
                class="idl"><a data-link-type="idl" href="#eventdef-websocket-message" id="ref-for-eventdef-websocket-message②">message</a></code>イベント、<code
                class="idl"><a data-link-type="idl" href="#eventdef-websocket-error" id="ref-for-eventdef-websocket-error①">error</a></code>イベント、または<code
                class="idl"><a data-link-type="idl" href="#eventdef-websocket-close" id="ref-for-eventdef-websocket-close⑦">close</a></code>イベントのために登録されたイベントリスナーが存在する場合、ガベージコレクションされてはなりません。
        </p>
        <p><code class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket①⑧">WebSocket</a></code>
            オブジェクトで、その<a data-link-type="dfn" href="#websocket-ready-state" id="ref-for-websocket-ready-state①②">ready
                state</a>が最後に<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop"
                id="ref-for-event-loop②">イベントループ</a>が<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#step1"
                id="ref-for-step1②">ステップ1</a>に到達した時点で<code
                class="idl"><a data-link-type="idl" href="#dom-websocket-open" id="ref-for-dom-websocket-open③">OPEN</a></code>
            (1)に設定されていた場合、<code
                class="idl"><a data-link-type="idl" href="#eventdef-websocket-message" id="ref-for-eventdef-websocket-message③">message</a></code>イベント、<code
                class="idl"><a data-link-type="idl" href="#eventdef-websocket-error" id="ref-for-eventdef-websocket-error②">error</a></code>イベント、または<code
                class="idl"><a data-link-type="idl" href="#eventdef-websocket-close" id="ref-for-eventdef-websocket-close⑧">close</a></code>イベントのために登録されたイベントリスナーが存在する場合、ガベージコレクションされてはなりません。
        </p>
        <p><code class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket①⑨">WebSocket</a></code>
            オブジェクトで、その<a data-link-type="dfn" href="#websocket-ready-state" id="ref-for-websocket-ready-state①③">ready
                state</a>が最後に<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop"
                id="ref-for-event-loop③">イベントループ</a>が<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#step1"
                id="ref-for-step1③">ステップ1</a>に到達した時点で<code
                class="idl"><a data-link-type="idl" href="#dom-websocket-closing" id="ref-for-dom-websocket-closing⑦">CLOSING</a></code>
            (2)に設定されていた場合、<code
                class="idl"><a data-link-type="idl" href="#eventdef-websocket-error" id="ref-for-eventdef-websocket-error③">error</a></code>イベントまたは<code
                class="idl"><a data-link-type="idl" href="#eventdef-websocket-close" id="ref-for-eventdef-websocket-close⑨">close</a></code>イベントのために登録されたイベントリスナーが存在する場合、ガベージコレクションされてはなりません。
        </p>
        <p><code class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket②⓪">WebSocket</a></code>
            オブジェクトで、<a data-link-type="dfn"
                href="https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and"
                id="ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and①③">確立された接続</a>があり、ネットワークに送信されるデータがキューに入れられている場合、ガベージコレクションされてはなりません。
            <a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
        </p>
        <p>接続がまだ開いている間に<code
                class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket②①">WebSocket</a></code>
            オブジェクトがガベージコレクションされた場合、ユーザーエージェントは<a data-link-type="dfn"
                href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.2"
                id="ref-for-section-7.1.2③">WebSocketのクローズハンドシェイクを開始</a>しなければならず、Closeメッセージにはステータスコードを指定しません。
            <a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
        </p>
        <hr>
        <p>ユーザーエージェントが<dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="make-disappear">消失させる</dfn><code
                class="idl"><a data-link-type="idl" href="#websocket" id="ref-for-websocket②②">WebSocket</a></code>
            オブジェクト（これは<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document">Document</a></code>
            オブジェクトが消失する場合に発生します）である場合、ユーザーエージェントは以下のリストから最初に該当する手順セットを実行しなければなりません:
        </p>
        <div class="algorithm" data-algorithm="to make disappear">
            <dl class="switch">
                <dt data-md>WebSocket接続がまだ<a data-link-type="dfn" data-refhint-key="801de31e"
                        href="https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and"
                        id="ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and①④">確立されていない場合</a>
                    <a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
                <dd data-md>
                    <p><a data-link-type="dfn" href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.7"
                            id="ref-for-section-7.1.7⑧">WebSocket接続を失敗させる</a>。<a data-link-type="biblio"
                            href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a></p>
                <dt data-md>WebSocketのクローズハンドシェイクがまだ<a data-link-type="dfn"
                        href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.3"
                        id="ref-for-section-7.1.3⑦">開始されていない場合</a> <a data-link-type="biblio" href="#biblio-wsp"
                        title="The WebSocket Protocol">[WSP]</a>
                <dd data-md>
                    <p><a data-link-type="dfn" href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.2"
                            id="ref-for-section-7.1.2④">WebSocketのクローズハンドシェイクを開始</a>し、WebSocket
                        Closeメッセージで使用されるステータスコードを1001とする。
                        <a data-link-type="biblio" href="#biblio-wsp" title="The WebSocket Protocol">[WSP]</a>
                    </p>
                <dt data-md>それ以外の場合
                <dd data-md>
                    <p>何もしない。</p>
            </dl>
        </div>
        <h2 class="no-num heading settled" id="acks"><span class="content">謝辞</span><a class="self-link"
                href="#acks"></a></h2>
        <p>この現行標準が2021年に作成されるまで、ここにあるテキストは<a href="https://html.spec.whatwg.org/multipage/">HTML現行標準</a>と<a
                href="https://fetch.spec.whatwg.org/">Fetch現行標準</a>で管理されていました。これらのリポジトリに貢献し、仕様の開発を助けてくださったすべての方々、特にそれぞれのオリジナル作者であるIan
            Hickson氏とAnne van Kesteren氏に感謝します。</p>
        <p>
            devsnek氏と
            平野裕 (Yutaka Hirano)氏
            にも、WebSockets標準の作成後の貢献に感謝します。</p>
        <p>この標準はAdam Rice氏 (<a href="https://google.com">Google</a>, <a
                href="mailto:ricea@chromium.org">ricea@chromium.org</a>) によって執筆されています。</p>
        <h2 class="no-num heading settled" id="ipr"><span class="content">知的財産権</span><a class="self-link"
                href="#ipr"></a></h2>
        <p>著作権 © WHATWG (Apple, Google, Mozilla, Microsoft)。この作業は<a href="https://creativecommons.org/licenses/by/4.0/"
                rel="license">クリエイティブ・コモンズ 表示 4.0 国際ライセンス</a>の下でライセンスされています。ソースコードに組み込まれた部分については、それらの部分は<a
                href="https://opensource.org/licenses/BSD-3-Clause" rel="license">BSD 3-Clauseライセンス</a>の下でライセンスされています。
        </p>
        <p>これは現行標準です。特許レビュー版に興味がある方は、<a href="/review-drafts/2023-09/">現行標準レビュー草案</a>をご覧ください。
        </p>
    </main>
    <script>
        // "use strict";
        // if ("serviceWorker" in navigator) {
        //     navigator.serviceWorker.register("/service-worker.js");
        // }
    </script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">この仕様により定義された用語</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#dom-binarytype-arraybuffer">"arraybuffer"</a><span>, § 4にて</span>
        <li><a href="#websocket-binary-type">binary type</a><span>, § 3.1にて</span>
        <li><a href="#enumdef-binarytype">BinaryType</a><span>, § 3.1にて</span>
        <li><a href="#dom-websocket-binarytype">binaryType</a><span>, § 3.1にて</span>
        <li><a href="#dom-binarytype-blob">"blob"</a><span>, § 4にて</span>
        <li><a href="#dom-websocket-bufferedamount">bufferedAmount</a><span>, § 3.1にて</span>
        <li><a href="#eventdef-websocket-close">close</a><span>, § 4にて</span>
        <li><a href="#dom-websocket-close">close()</a><span>, § 3.1にて</span>
        <li><a href="#dom-websocket-close">close(code)</a><span>, § 3.1にて</span>
        <li><a href="#dom-websocket-close">close(code, reason)</a><span>, § 3.1にて</span>
        <li><a href="#dom-websocket-closed">CLOSED</a><span>, § 3.1にて</span>
        <li><a href="#closeevent">CloseEvent</a><span>, § 6にて</span>
        <li><a href="#dictdef-closeeventinit">CloseEventInit</a><span>, § 6にて</span>
        <li><a href="#dom-closeevent-closeevent">CloseEvent(type)</a><span>, § 6にて</span>
        <li><a href="#dom-closeevent-closeevent">CloseEvent(type, eventInitDict)</a><span>, § 6にて</span>
        <li><a href="#dom-websocket-closing">CLOSING</a><span>, § 3.1にて</span>
        <li>
            code
            <ul>
                <li><a href="#dom-closeevent-code">CloseEventの属性</a><span>, § 6にて</span>
                <li><a href="#dom-closeeventinit-code">CloseEventInitの辞書メンバー</a><span>, § 6にて</span>
            </ul>
        <li><a href="#dom-websocket-connecting">CONNECTING</a><span>, § 3.1にて</span>
        <li><a href="#dom-closeevent-closeevent">constructor(type)</a><span>, § 6にて</span>
        <li><a href="#dom-closeevent-closeevent">constructor(type, eventInitDict)</a><span>, § 6にて</span>
        <li><a href="#dom-websocket-websocket">constructor(url)</a><span>, § 3.1にて</span>
        <li><a href="#dom-websocket-websocket">constructor(url, protocols)</a><span>, § 3.1にて</span>
        <li><a href="#eventdef-websocket-error">error</a><span>, § 4にて</span>
        <li><a href="#concept-websocket-establish">WebSocket接続を確立する</a><span>, § 2.2にて</span>
        <li><a href="#dom-websocket-extensions">extensions</a><span>, § 3.1にて</span>
        <li><a href="#flagged-as-full">満杯としてフラグ付けされる</a><span>, § 4にて</span>
        <li><a href="#websocket-internal-url">internal-url</a><span>, § 3.1にて</span>
        <li><a href="#make-disappear">消去する</a><span>, § 7にて</span>
        <li><a href="#eventdef-websocket-message">message</a><span>, § 4にて</span>
        <li><a href="#concept-websocket-connection-obtain">WebSocket接続を取得する</a><span>, § 2.1にて</span>
        <li><a href="#dom-websocket-onclose">onclose</a><span>, § 3.1にて</span>
        <li><a href="#dom-websocket-onerror">onerror</a><span>, § 3.1にて</span>
        <li><a href="#dom-websocket-onmessage">onmessage</a><span>, § 3.1にて</span>
        <li><a href="#dom-websocket-onopen">onopen</a><span>, § 3.1にて</span>
        <li><a href="#dom-websocket-open">OPEN</a><span>, § 3.1にて</span>
        <li><a href="#eventdef-websocket-open">open</a><span>, § 4にて</span>
        <li><a href="#dom-websocket-protocol">protocol</a><span>, § 3.1にて</span>
        <li><a href="#websocket-ready-state">ready state</a><span>, § 3.1にて</span>
        <li><a href="#dom-websocket-readystate">readyState</a><span>, § 3.1にて</span>
        <li>
            reason
            <ul>
                <li><a href="#dom-closeevent-reason">CloseEventの属性</a><span>, § 6にて</span>
                <li><a href="#dom-closeeventinit-reason">CloseEventInitの辞書メンバー</a><span>, § 6にて</span>
            </ul>
        <li><a href="#dom-websocket-send">send(data)</a><span>, § 3.1にて</span>
        <li><a href="#dom-websocket-url">url</a><span>, § 3.1にて</span>
        <li>
            wasClean
            <ul>
                <li><a href="#dom-closeevent-wasclean">CloseEventの属性</a><span>, § 6にて</span>
                <li><a href="#dom-closeeventinit-wasclean">CloseEventInitの辞書メンバー</a><span>, § 6にて</span>
            </ul>
        <li><a href="#websocket">WebSocket</a><span>, § 3.1にて</span>
        <li><a href="#websocket-task-source">WebSocketタスクソース</a><span>, § 4にて</span>
        <li><a href="#dom-websocket-websocket">WebSocket(url)</a><span>, § 3.1にて</span>
        <li><a href="#dom-websocket-websocket">WebSocket(url, protocols)</a><span>, § 3.1にて</span>
    </ul>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">参照により定義された用語</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[DOM]</a> 次の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="85394472">Document</span>
                <li><span class="dfn-paneled" id="129bdae8">Event</span>
                <li><span class="dfn-paneled" id="44a7708c">EventInit</span>
                <li><span class="dfn-paneled" id="2bc0cdf4">EventTarget</span>
                <li><span class="dfn-paneled" id="5fd23811">イベントを発火する</span>
            </ul>
        <li>
            <a data-link-type="biblio">[ENCODING]</a> 次の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="a3033be5">BOM無しUTF-8デコード</span>
                <li><span class="dfn-paneled" id="0303e8e5">UTF-8エンコード</span>
            </ul>
        <li>
            <a data-link-type="biblio">[FETCH]</a> 次の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="a6a8ec88">追加</span>
                <li><span class="dfn-paneled" id="688f9669">キャッシュモード</span>
                <li><span class="dfn-paneled" id="857d5516">クライアント</span>
                <li><span class="dfn-paneled" id="0a52a8b4">結合</span>
                <li><span class="dfn-paneled" id="697965b2">接続</span>
                <li><span class="dfn-paneled" id="902380f7">認証情報モード</span>
                <li><span class="dfn-paneled" id="3be1d4ac">ヘッダーリスト値の抽出</span>
                <li><span class="dfn-paneled" id="a33db89a">フェッチ</span>
                <li><span class="dfn-paneled" id="6ee0eab1">ヘッダーリスト</span>
                <li><span class="dfn-paneled" id="c07f8014">ヘッダー値</span>
                <li><span class="dfn-paneled" id="cb98f71f">モード</span>
                <li><span class="dfn-paneled" id="eb1b1af3">ネットワークエラー</span>
                <li><span class="dfn-paneled" id="bd2fe71e">プロセスレスポンス</span>
                <li><span class="dfn-paneled" id="64b62ea0">リダイレクトモード</span>
                <li><span class="dfn-paneled" id="358f1dbd">参照元</span>
                <li><span class="dfn-paneled" id="55213b5b">リクエスト</span>
                <li><span class="dfn-paneled" id="6d1db60d">サービスワーカーモード</span>
                <li><span class="dfn-paneled" id="a1d47575">ステータス</span>
                <li><span class="dfn-paneled" id="dc1cd39b">URL</span>
                <li><span class="dfn-paneled" id="2c8ec3a8">useParallelQueue</span>
            </ul>
        <li>
            <a data-link-type="biblio">[FILEAPI]</a> 次の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="b7d73f5b">Blob</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a> 次の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="f0951476">EventHandler</span>
                <li><span class="dfn-paneled" id="3e8c0e5f">MessageEvent</span>
                <li><span class="dfn-paneled" id="1b5b1c0c">API基本URL</span>
                <li><span class="dfn-paneled" id="3700794f">データ</span>
                <li><span class="dfn-paneled" id="6a5a59a0">イベントハンドラ</span>
                <li><span class="dfn-paneled" id="9d386f55">イベントハンドライベントタイプ</span>
                <li><span class="dfn-paneled" id="03675365">イベントハンドラIDL属性</span>
                <li><span class="dfn-paneled" id="c6d19e56">イベントループ</span>
                <li><span class="dfn-paneled" id="a72449dd">並列で</span>
                <li><span class="dfn-paneled" id="e0eefdd9">起源</span>
                <li><span class="dfn-paneled" id="9a517a7d">タスクをキューに追加する</span>
                <li><span class="dfn-paneled" id="5991ccfb">関連する領域</span>
                <li><span class="dfn-paneled" id="9c4c1e66">関連する設定オブジェクト</span>
                <li><span class="dfn-paneled" id="683cb370">ステップ1</span>
                <li><span class="dfn-paneled" id="e270bd2a">タスク</span>
                <li><span class="dfn-paneled" id="80726755">タスクキュー</span>
                <li><span class="dfn-paneled" id="c3b2d08c">タスクソース</span>
            </ul>
        <li>
            <a data-link-type="biblio">[INFRA]</a> 次の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="b012ccb2">寛容なbase64エンコード</span>
                <li><span class="dfn-paneled" id="16b1470a">等角エンコード</span>
            </ul>
        <li>
            <a data-link-type="biblio">[URL]</a> 次の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="ed948033">フラグメント</span>
                <li><span class="dfn-paneled" id="b85ee3be">ホスト</span>
                <li><span class="dfn-paneled" id="959ad97b">起源</span>
                <li><span class="dfn-paneled" id="c0868016">パス</span>
                <li><span class="dfn-paneled" id="852ada56">ポート</span>
                <li><span class="dfn-paneled" id="3ab2ec8b">クエリ</span>
                <li><span class="dfn-paneled" id="3a711be7">スキーム</span>
                <li><span class="dfn-paneled" id="dcffbccd">URL</span>
                <li><span class="dfn-paneled" id="ca3ca4ae">URLパーサー</span>
                <li><span class="dfn-paneled" id="a8c7461b">URLレコード</span>
                <li><span class="dfn-paneled" id="5442ea33">URLシリアライザー</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEBIDL]</a> 次の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="2f8afbfe">ArrayBuffer</span>
                <li><span class="dfn-paneled" id="6c9ab516">ArrayBufferView</span>
                <li><span class="dfn-paneled" id="3aff2fb3">BufferSource</span>
                <li><span class="dfn-paneled" id="f89c7d0d">Clamp</span>
                <li><span class="dfn-paneled" id="dca2de17">DOMException</span>
                <li><span class="dfn-paneled" id="8855a9aa">DOMString</span>
                <li><span class="dfn-paneled" id="889e932f">Exposed</span>
                <li><span class="dfn-paneled" id="37afd48d">InvalidAccessError</span>
                <li><span class="dfn-paneled" id="797018a7">InvalidStateError</span>
                <li><span class="dfn-paneled" id="be2d2b4c">SyntaxError</span>
                <li><span class="dfn-paneled" id="b0d7f3c3">USVString</span>
                <li><span class="dfn-paneled" id="5372cca8">boolean</span>
                <li><span class="dfn-paneled" id="9cce47fd">sequence</span>
                <li><span class="dfn-paneled" id="3b5f2424">与えられた値</span>
                <li><span class="dfn-paneled" id="4013a022">this</span>
                <li><span class="dfn-paneled" id="5f90bbfb">未定義</span>
                <li><span class="dfn-paneled" id="f14b47b8">unsigned long long</span>
                <li><span class="dfn-paneled" id="450958f7">unsigned short</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WSP]</a> 次の用語を定義しています:
            <ul>
                <li><span class="dfn-paneled" id="1172cc05">WebSocketメッセージが受信された</span>
                <li><span class="dfn-paneled" id="e746eb27">正常に</span>
                <li><span class="dfn-paneled" id="ae698447">WebSocket接続を閉じる</span>
                <li><span class="dfn-paneled" id="a7100bf9">確立された</span>
                <li><span class="dfn-paneled" id="cd622903">使用中の拡張機能</span>
                <li><span class="dfn-paneled" id="2bd00413">WebSocket接続を失敗させる</span>
                <li><span class="dfn-paneled" id="28bb6bc9">Sec-WebSocket-Protocol</span>
                <li><span class="dfn-paneled" id="f9982e17">WebSocketメッセージを送信する</span>
                <li><span class="dfn-paneled" id="a4fa4138">WebSocket終了ハンドシェイクを開始する</span>
                <li><span class="dfn-paneled" id="7eb570ba">使用中のサブプロトコル</span>
                <li><span class="dfn-paneled" id="b75eba20">WebSocket終了ハンドシェイクが開始された</span>
                <li><span class="dfn-paneled" id="a37b7863">WebSocket接続終了コード</span>
                <li><span class="dfn-paneled" id="a0841248">WebSocket接続終了理由</span>
                <li><span class="dfn-paneled" id="c9b060e8">WebSocket接続が閉じられた</span>
                <li><span class="dfn-paneled" id="4e3cd62b">WebSocket接続が確立された</span>
                <li><span class="dfn-paneled" id="33680a76">ws</span>
                <li><span class="dfn-paneled" id="7d0af9ea">wss</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参照</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">規範参照</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-dom">[DOM]
        <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. 現行標準.
            URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
        <dt id="biblio-encoding">[ENCODING]
        <dd>Anne van Kesteren. <a href="https://encoding.spec.whatwg.org/"><cite>Encoding Standard</cite></a>. 現行標準.
            URL: <a href="https://encoding.spec.whatwg.org/">https://encoding.spec.whatwg.org/</a>
        <dt id="biblio-fetch">[FETCH]
        <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/"><cite>Fetch Standard</cite></a>. 現行標準.
            URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
        <dt id="biblio-fileapi">[FILEAPI]
        <dd>Marijn Kruisselbrink. <a href="https://w3c.github.io/FileAPI/"><cite>File API</cite></a>. URL: <a
                href="https://w3c.github.io/FileAPI/">https://w3c.github.io/FileAPI/</a>
        <dt id="biblio-hsts">[HSTS]
        <dd>J. Hodges; C. Jackson; A. Barth. <a href="https://www.rfc-editor.org/rfc/rfc6797"><cite>HTTP Strict
                    Transport Security (HSTS)</cite></a>. 2012年11月. 提案標準. URL: <a
                href="https://www.rfc-editor.org/rfc/rfc6797">https://www.rfc-editor.org/rfc/rfc6797</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>.
            現行標準. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-infra">[INFRA]
        <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra
                    Standard</cite></a>. 現行標準. URL: <a
                href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
        <dt id="biblio-unicode">[UNICODE]
        <dd><a href="https://www.unicode.org/versions/latest/"><cite>The Unicode Standard</cite></a>. URL: <a
                href="https://www.unicode.org/versions/latest/">https://www.unicode.org/versions/latest/</a>
        <dt id="biblio-url">[URL]
        <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. 現行標準.
            URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
        <dt id="biblio-webidl">[WEBIDL]
        <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. 現行標準.
            URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
        <dt id="biblio-wsp">[WSP]
        <dd>I. Fette; A. Melnikov. <a href="https://www.rfc-editor.org/rfc/rfc6455"><cite>The WebSocket
                    Protocol</cite></a>. 2011年12月. 提案標準. URL: <a
                href="https://www.rfc-editor.org/rfc/rfc6455">https://www.rfc-editor.org/rfc/rfc6455</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL索引</span><a class="self-link"
            href="#idl-index"></a></h2>
    <pre class="idl highlight def"><c- b>enum</c-> <a href="#enumdef-binarytype"><code><c- g>BinaryType</c-></code></a> { <a class="idl-code" data-link-type="enum-value" href="#dom-binarytype-blob"><c- s>"blob"</c-></a>, <a class="idl-code" data-link-type="enum-value" href="#dom-binarytype-arraybuffer"><c- s>"arraybuffer"</c-></a> };

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <a href="#websocket"><code><c- g>WebSocket</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget"><c- n>EventTarget</c-></a> {
  <a class="idl-code" data-link-type="constructor" href="#dom-websocket-websocket"><c- g>constructor</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a href="#dom-websocket-websocket-url-protocols-url"><code><c- g>url</c-></code></a>, <c- b>optional</c-> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <c- b>or</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>>) <a href="#dom-websocket-websocket-url-protocols-protocols"><code><c- g>protocols</c-></code></a> = []);
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="USVString" href="#dom-websocket-url"><c- g>url</c-></a>;

  // ready state
  <c- b>const</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-short"><c- b>unsigned</c-> <c- b>short</c-></a> <a class="idl-code" data-link-type="const" href="#dom-websocket-connecting"><c- g>CONNECTING</c-></a> = 0;
  <c- b>const</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-short"><c- b>unsigned</c-> <c- b>short</c-></a> <a class="idl-code" data-link-type="const" href="#dom-websocket-open"><c- g>OPEN</c-></a> = 1;
  <c- b>const</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-short"><c- b>unsigned</c-> <c- b>short</c-></a> <a class="idl-code" data-link-type="const" href="#dom-websocket-closing"><c- g>CLOSING</c-></a> = 2;
  <c- b>const</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-short"><c- b>unsigned</c-> <c- b>short</c-></a> <a class="idl-code" data-link-type="const" href="#dom-websocket-closed"><c- g>CLOSED</c-></a> = 3;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-short"><c- b>unsigned</c-> <c- b>short</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned short" href="#dom-websocket-readystate"><c- g>readyState</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long long" href="#dom-websocket-bufferedamount"><c- g>bufferedAmount</c-></a>;

  // networking
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-websocket-onopen"><c- g>onopen</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-websocket-onerror"><c- g>onerror</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-websocket-onclose"><c- g>onclose</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-websocket-extensions"><c- g>extensions</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-websocket-protocol"><c- g>protocol</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-websocket-close"><c- g>close</c-></a>(<c- b>optional</c-> [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Clamp"><c- g>Clamp</c-></a>] <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-short"><c- b>unsigned</c-> <c- b>short</c-></a> <a href="#dom-websocket-close-code-reason-code"><code><c- g>code</c-></code></a>, <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a href="#dom-websocket-close-code-reason-reason"><code><c- g>reason</c-></code></a>);

  // messaging
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-websocket-onmessage"><c- g>onmessage</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-binarytype"><c- n>BinaryType</c-></a> <a class="idl-code" data-link-type="attribute" data-type="BinaryType" href="#dom-websocket-binarytype"><c- g>binaryType</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-websocket-send"><c- g>send</c-></a>((<a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#BufferSource"><c- n>BufferSource</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://w3c.github.io/FileAPI/#dfn-Blob"><c- n>Blob</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a>) <a href="#dom-websocket-send-data-data"><code><c- g>data</c-></code></a>);
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <a href="#closeevent"><code><c- g>CloseEvent</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event"><c- n>Event</c-></a> {
  <a href="#dom-closeevent-closeevent"><code><c- g>constructor</c-></code></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-closeevent-closeevent-type-eventinitdict-type"><code><c- g>type</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-closeeventinit"><c- n>CloseEventInit</c-></a> <a href="#dom-closeevent-closeevent-type-eventinitdict-eventinitdict"><code><c- g>eventInitDict</c-></code></a> = {});

  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-closeevent-wasclean"><c- g>wasClean</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-short"><c- b>unsigned</c-> <c- b>short</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned short" href="#dom-closeevent-code"><c- g>code</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="USVString" href="#dom-closeevent-reason"><c- g>reason</c-></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-closeeventinit"><code><c- g>CloseEventInit</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit"><c- n>EventInit</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean" href="#dom-closeeventinit-wasclean"><code><c- g>wasClean</c-></code></a> = <c- b>false</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-short"><c- b>unsigned</c-> <c- b>short</c-></a> <a data-default="0" data-type="unsigned short" href="#dom-closeeventinit-code"><code><c- g>code</c-></code></a> = 0;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-default="&quot;&quot;" data-type="USVString" href="#dom-closeeventinit-reason"><code><c- g>reason</c-></code></a> = "";
};

</pre>
    <details class="mdn-anno unpositioned" data-anno-for="dom-closeevent-closeevent">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent/CloseEvent"
                    title="The CloseEvent() constructor creates a new CloseEvent object.">CloseEvent/CloseEvent</a></p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>11+</span></span><span
                    class="safari yes"><span>Safari</span><span>6+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>16+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>14+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-closeevent-code②">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent/code"
                    title="The code read-only property of the CloseEvent interface returns a WebSocket connection close code indicating the reason the server gave for closing the connection.">CloseEvent/code</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>8+</span></span><span
                    class="safari yes"><span>Safari</span><span>6+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>15+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie yes"><span>IE</span><span>10+</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-closeevent-reason②">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent/reason"
                    title="The reason read-only property of the CloseEvent interface returns the WebSocket connection close reason the server gave for closing the connection; that is, a concise human-readable prose explanation for the closure.">CloseEvent/reason</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>8+</span></span><span
                    class="safari yes"><span>Safari</span><span>6+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>15+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie yes"><span>IE</span><span>10+</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-closeevent-wasclean②">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent/wasClean"
                    title="The wasClean read-only property of the CloseEvent interface returns true if the connection closed cleanly.">CloseEvent/wasClean</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>8+</span></span><span
                    class="safari yes"><span>Safari</span><span>6+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>15+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie yes"><span>IE</span><span>10+</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="the-closeevent-interface">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent"
                    title="A CloseEvent is sent to clients using WebSockets when the connection is closed. This is delivered to the listener indicated by the WebSocket object&apos;s onclose attribute.">CloseEvent</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>8+</span></span><span
                    class="safari yes"><span>Safari</span><span>6+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>15+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie yes"><span>IE</span><span>10+</span></span>
                <hr>
                <span class="firefox_android yes"><span>Firefox for Android</span><span>8+</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-websocket-websocket①">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/WebSocket"
                    title="The WebSocket() constructor returns a new WebSocket object.">WebSocket/WebSocket</a></p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>11+</span></span><span
                    class="safari yes"><span>Safari</span><span>5+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>5+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie yes"><span>IE</span><span>10+</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-websocket-binarytype①">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/binaryType"
                    title="The WebSocket.binaryType property controls the type of binary data being received over the WebSocket connection.">WebSocket/binaryType</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>11+</span></span><span
                    class="safari yes"><span>Safari</span><span>6+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>15+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie yes"><span>IE</span><span>10+</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-websocket-bufferedamount①">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/bufferedAmount"
                    title="The WebSocket.bufferedAmount read-only property returns the number of bytes of data that have been queued using calls to send() but not yet transmitted to the network. This value resets to zero once all queued data has been sent. This value does not reset to zero when the connection is closed; if you keep calling send(), this will continue to climb.">WebSocket/bufferedAmount</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>7+</span></span><span
                    class="safari yes"><span>Safari</span><span>5+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>5+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie yes"><span>IE</span><span>10+</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-websocket-close①">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/close"
                    title="The WebSocket.close() method closes the WebSocket connection or connection attempt, if any. If the connection is already CLOSED, this method does nothing.">WebSocket/close</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>7+</span></span><span
                    class="safari yes"><span>Safari</span><span>5+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>5+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie yes"><span>IE</span><span>10+</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="dom-websocket-onclose">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/close_event"
                    title="The close event is fired when a connection with a WebSocket is closed.">WebSocket/close_event</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>7+</span></span><span
                    class="safari yes"><span>Safari</span><span>5+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>5+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie yes"><span>IE</span><span>10+</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android yes"><span>Android WebView</span><span>37+</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="dom-websocket-onerror">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/error_event"
                    title="The error event is fired when a connection with a WebSocket has been closed due to an error (some data couldn&apos;t be sent for example).">WebSocket/error_event</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>7+</span></span><span
                    class="safari yes"><span>Safari</span><span>5+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>5+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie yes"><span>IE</span><span>10+</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android yes"><span>Android WebView</span><span>37+</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-websocket-extensions①">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/extensions"
                    title="The WebSocket.extensions read-only property returns the extensions selected by the server. This is currently only the empty string or a list of extensions as negotiated by the connection.">WebSocket/extensions</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>8+</span></span><span
                    class="safari yes"><span>Safari</span><span>6+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>16+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie yes"><span>IE</span><span>10+</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="dom-websocket-onmessage">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/message_event"
                    title="The message event is fired when data is received through a WebSocket.">WebSocket/message_event</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>7+</span></span><span
                    class="safari yes"><span>Safari</span><span>5+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>5+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie yes"><span>IE</span><span>10+</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android yes"><span>Android WebView</span><span>37+</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="dom-websocket-onopen">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/open_event"
                    title="The open event is fired when a connection with a WebSocket is opened.">WebSocket/open_event</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>7+</span></span><span
                    class="safari yes"><span>Safari</span><span>5+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>5+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie yes"><span>IE</span><span>10+</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android yes"><span>Android WebView</span><span>37+</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-websocket-protocol①">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/protocol"
                    title="The WebSocket.protocol read-only property returns the name of the sub-protocol the server selected; this will be one of the strings specified in the protocols parameter when creating the WebSocket object, or the empty string if no connection is established.">WebSocket/protocol</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>7+</span></span><span
                    class="safari yes"><span>Safari</span><span>6+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>15+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-websocket-readystate①">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/readyState"
                    title="The WebSocket.readyState read-only property returns the current state of the WebSocket connection.">WebSocket/readyState</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>7+</span></span><span
                    class="safari yes"><span>Safari</span><span>5+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>5+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie yes"><span>IE</span><span>10+</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-websocket-send①">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send"
                    title="The WebSocket.send() method enqueues the specified data to be transmitted to the server over the WebSocket connection, increasing the value of bufferedAmount by the number of bytes needed to contain the data. If the data can&apos;t be sent (for example, because it needs to be buffered but the buffer is full), the socket is closed automatically. The browser will throw an exception if you call send() when the connection is in the CONNECTING state. If you call send() when the connection is in the CLOSING or CLOSED states, the browser will silently discard the data.">WebSocket/send</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>18+</span></span><span
                    class="safari yes"><span>Safari</span><span>5+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>5+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie yes"><span>IE</span><span>10+</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-websocket-url①">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/url"
                    title="The WebSocket.url read-only property returns the absolute URL of the WebSocket as resolved by the constructor.">WebSocket/url</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>7+</span></span><span
                    class="safari yes"><span>Safari</span><span>6+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>18+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="the-websocket-interface">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket"
                    title="The WebSocket object provides the API for creating and managing a WebSocket connection to a server, as well as for sending and receiving data on the connection.">WebSocket</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>11+</span></span><span
                    class="safari yes"><span>Safari</span><span>5+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>5+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie yes"><span>IE</span><span>10+</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
            </div>
        </div>
    </details>
    <script>/* Boilerplate: script-dom-helper */
        "use strict";
        function query(sel) { return document.querySelector(sel); }

        function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

        function iter(obj) {
            if (!obj) return [];
            var it = obj[Symbol.iterator];
            if (it) return it;
            return Object.entries(obj);
        }

        function mk(tagname, attrs, ...children) {
            const el = document.createElement(tagname);
            for (const [k, v] of iter(attrs)) {
                if (k.slice(0, 3) == "_on") {
                    const eventName = k.slice(3);
                    el.addEventListener(eventName, v);
                } else if (k[0] == "_") {
                    // property, not attribute
                    el[k.slice(1)] = v;
                } else {
                    if (v === false || v == null) {
                        continue;
                    } else if (v === true) {
                        el.setAttribute(k, "");
                        continue;
                    } else {
                        el.setAttribute(k, v);
                    }
                }
            }
            append(el, children);
            return el;
        }

        /* Create shortcuts for every known HTML element */
        [
            "a",
            "abbr",
            "acronym",
            "address",
            "applet",
            "area",
            "article",
            "aside",
            "audio",
            "b",
            "base",
            "basefont",
            "bdo",
            "big",
            "blockquote",
            "body",
            "br",
            "button",
            "canvas",
            "caption",
            "center",
            "cite",
            "code",
            "col",
            "colgroup",
            "datalist",
            "dd",
            "del",
            "details",
            "dfn",
            "dialog",
            "div",
            "dl",
            "dt",
            "em",
            "embed",
            "fieldset",
            "figcaption",
            "figure",
            "font",
            "footer",
            "form",
            "frame",
            "frameset",
            "head",
            "header",
            "h1",
            "h2",
            "h3",
            "h4",
            "h5",
            "h6",
            "hr",
            "html",
            "i",
            "iframe",
            "img",
            "input",
            "ins",
            "kbd",
            "label",
            "legend",
            "li",
            "link",
            "main",
            "map",
            "mark",
            "meta",
            "meter",
            "nav",
            "nobr",
            "noscript",
            "object",
            "ol",
            "optgroup",
            "option",
            "output",
            "p",
            "param",
            "pre",
            "progress",
            "q",
            "s",
            "samp",
            "script",
            "section",
            "select",
            "small",
            "source",
            "span",
            "strike",
            "strong",
            "style",
            "sub",
            "summary",
            "sup",
            "table",
            "tbody",
            "td",
            "template",
            "textarea",
            "tfoot",
            "th",
            "thead",
            "time",
            "title",
            "tr",
            "u",
            "ul",
            "var",
            "video",
            "wbr",
            "xmp",
        ].forEach(tagname => {
            mk[tagname] = (...args) => mk(tagname, ...args);
        });

        function* nodesFromChildList(children) {
            for (const child of children.flat(Infinity)) {
                if (child instanceof Node) {
                    yield child;
                } else {
                    yield new Text(child);
                }
            }
        }
        function append(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                if (el instanceof Node) el.appendChild(child);
                else el.push(child);
            }
            return el;
        }

        function insertAfter(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                el.parentNode.insertBefore(child, el.nextSibling);
            }
            return el;
        }

        function clearContents(el) {
            el.innerHTML = "";
            return el;
        }

        function parseHTML(markup) {
            if (markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
                const doc = document.implementation.createHTMLDocument("");
                doc.documentElement.innerHTML = markup;
                return doc;
            } else {
                const el = mk.template({});
                el.innerHTML = markup;
                return el.content;
            }
        }</script>
    <script>/* Boilerplate: script-dfn-panel */
        "use strict";
        {
            let dfnPanelData = {
                "0303e8e5": { "dfnID": "0303e8e5", "dfnText": "UTF-8 encode", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-utf-8-encode" }], "title": "3.1. Interface definition" }], "url": "https://encoding.spec.whatwg.org/#utf-8-encode" },
                "03675365": { "dfnID": "03675365", "dfnText": "event handler IDL attribute", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-handler-idl-attributes" }], "title": "3.1. Interface definition" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes" },
                "0a52a8b4": { "dfnID": "0a52a8b4", "dfnText": "combine", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-header-list-combine" }], "title": "2.2. Opening handshake" }], "url": "https://fetch.spec.whatwg.org/#concept-header-list-combine" },
                "1172cc05": { "dfnID": "1172cc05", "dfnText": "a WebSocket message has been received", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-page-66:~:text=_A%20WebSocket%20Message%20Has%20Been%20Received_" }], "title": "4. Feedback from the protocol" }], "url": "https://datatracker.ietf.org/doc/html/rfc6455#page-66:~:text=_A%20WebSocket%20Message%20Has%20Been%20Received_" },
                "129bdae8": { "dfnID": "129bdae8", "dfnText": "Event", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event" }], "title": "6. The CloseEvent interface" }], "url": "https://dom.spec.whatwg.org/#event" },
                "16b1470a": { "dfnID": "16b1470a", "dfnText": "isomorphic encode", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-isomorphic-encode" }], "title": "2.2. Opening handshake" }], "url": "https://infra.spec.whatwg.org/#isomorphic-encode" },
                "1b5b1c0c": { "dfnID": "1b5b1c0c", "dfnText": "API base URL", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-api-base-url" }], "title": "3.1. Interface definition" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#api-base-url" },
                "28bb6bc9": { "dfnID": "28bb6bc9", "dfnText": "Sec-WebSocket-Protocol", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-section-11.3.4" }, { "id": "ref-for-section-11.3.4\u2460" }], "title": "3.1. Interface definition" }], "url": "https://datatracker.ietf.org/doc/html/rfc6455#section-11.3.4" },
                "2bc0cdf4": { "dfnID": "2bc0cdf4", "dfnText": "EventTarget", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-eventtarget" }], "title": "3.1. Interface definition" }], "url": "https://dom.spec.whatwg.org/#eventtarget" },
                "2bd00413": { "dfnID": "2bd00413", "dfnText": "fail the WebSocket connection", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-section-7.1.7" }, { "id": "ref-for-section-7.1.7\u2460" }, { "id": "ref-for-section-7.1.7\u2461" }, { "id": "ref-for-section-7.1.7\u2462" }], "title": "2.2. Opening handshake" }, { "refs": [{ "id": "ref-for-section-7.1.7\u2463" }, { "id": "ref-for-section-7.1.7\u2464" }, { "id": "ref-for-section-7.1.7\u2465" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-section-7.1.7\u2466" }], "title": "4. Feedback from the protocol" }, { "refs": [{ "id": "ref-for-section-7.1.7\u2467" }], "title": "7. Garbage collection" }], "url": "https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.7" },
                "2c8ec3a8": { "dfnID": "2c8ec3a8", "dfnText": "useParallelQueue", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-fetch-useparallelqueue" }], "title": "2.2. Opening handshake" }], "url": "https://fetch.spec.whatwg.org/#fetch-useparallelqueue" },
                "2f8afbfe": { "dfnID": "2f8afbfe", "dfnText": "ArrayBuffer", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-ArrayBuffer" }, { "id": "ref-for-idl-ArrayBuffer\u2460" }, { "id": "ref-for-idl-ArrayBuffer\u2461" }, { "id": "ref-for-idl-ArrayBuffer\u2462" }, { "id": "ref-for-idl-ArrayBuffer\u2463" }, { "id": "ref-for-idl-ArrayBuffer\u2464" }, { "id": "ref-for-idl-ArrayBuffer\u2465" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-idl-ArrayBuffer\u2466" }, { "id": "ref-for-idl-ArrayBuffer\u2467" }], "title": "4. Feedback from the protocol" }], "url": "https://webidl.spec.whatwg.org/#idl-ArrayBuffer" },
                "33680a76": { "dfnID": "33680a76", "dfnText": "ws", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-section-11.1.1" }], "title": "3.1. Interface definition" }], "url": "https://datatracker.ietf.org/doc/html/rfc6455#section-11.1.1" },
                "358f1dbd": { "dfnID": "358f1dbd", "dfnText": "referrer", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-request-referrer" }], "title": "2.2. Opening handshake" }], "url": "https://fetch.spec.whatwg.org/#concept-request-referrer" },
                "3700794f": { "dfnID": "3700794f", "dfnText": "data", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-messageevent-data" }], "title": "4. Feedback from the protocol" }], "url": "https://html.spec.whatwg.org/multipage/comms.html#dom-messageevent-data" },
                "37afd48d": { "dfnID": "37afd48d", "dfnText": "InvalidAccessError", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-invalidaccesserror" }], "title": "3.1. Interface definition" }], "url": "https://webidl.spec.whatwg.org/#invalidaccesserror" },
                "3a711be7": { "dfnID": "3a711be7", "dfnText": "scheme", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-url-scheme" }], "title": "2.1. Connections" }, { "refs": [{ "id": "ref-for-concept-url-scheme\u2460" }, { "id": "ref-for-concept-url-scheme\u2461" }], "title": "2.2. Opening handshake" }, { "refs": [{ "id": "ref-for-concept-url-scheme\u2462" }, { "id": "ref-for-concept-url-scheme\u2463" }, { "id": "ref-for-concept-url-scheme\u2464" }, { "id": "ref-for-concept-url-scheme\u2465" }, { "id": "ref-for-concept-url-scheme\u2466" }], "title": "3.1. Interface definition" }], "url": "https://url.spec.whatwg.org/#concept-url-scheme" },
                "3ab2ec8b": { "dfnID": "3ab2ec8b", "dfnText": "query", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-url-query" }, { "id": "ref-for-concept-url-query\u2460" }], "title": "2.1. Connections" }], "url": "https://url.spec.whatwg.org/#concept-url-query" },
                "3aff2fb3": { "dfnID": "3aff2fb3", "dfnText": "BufferSource", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-BufferSource" }], "title": "3.1. Interface definition" }], "url": "https://webidl.spec.whatwg.org/#BufferSource" },
                "3b5f2424": { "dfnID": "3b5f2424", "dfnText": "the given value", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-given-value" }], "title": "3.1. Interface definition" }], "url": "https://webidl.spec.whatwg.org/#the-given-value" },
                "3be1d4ac": { "dfnID": "3be1d4ac", "dfnText": "extracting header list values", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-extract-header-list-values" }], "title": "2.2. Opening handshake" }], "url": "https://fetch.spec.whatwg.org/#extract-header-list-values" },
                "3e8c0e5f": { "dfnID": "3e8c0e5f", "dfnText": "MessageEvent", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-messageevent" }], "title": "4. Feedback from the protocol" }], "url": "https://html.spec.whatwg.org/multipage/comms.html#messageevent" },
                "4013a022": { "dfnID": "4013a022", "dfnText": "this", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-this" }, { "id": "ref-for-this\u2460" }, { "id": "ref-for-this\u2461" }, { "id": "ref-for-this\u2462" }, { "id": "ref-for-this\u2463" }, { "id": "ref-for-this\u2464" }, { "id": "ref-for-this\u2465" }, { "id": "ref-for-this\u2466" }, { "id": "ref-for-this\u2467" }, { "id": "ref-for-this\u2468" }, { "id": "ref-for-this\u2460\u24ea" }, { "id": "ref-for-this\u2460\u2460" }], "title": "3.1. Interface definition" }], "url": "https://webidl.spec.whatwg.org/#this" },
                "44a7708c": { "dfnID": "44a7708c", "dfnText": "EventInit", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-eventinit" }], "title": "6. The CloseEvent interface" }], "url": "https://dom.spec.whatwg.org/#dictdef-eventinit" },
                "450958f7": { "dfnID": "450958f7", "dfnText": "unsigned short", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-unsigned-short" }, { "id": "ref-for-idl-unsigned-short\u2460" }, { "id": "ref-for-idl-unsigned-short\u2461" }, { "id": "ref-for-idl-unsigned-short\u2462" }, { "id": "ref-for-idl-unsigned-short\u2463" }, { "id": "ref-for-idl-unsigned-short\u2464" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-idl-unsigned-short\u2465" }, { "id": "ref-for-idl-unsigned-short\u2466" }], "title": "6. The CloseEvent interface" }], "url": "https://webidl.spec.whatwg.org/#idl-unsigned-short" },
                "4e3cd62b": { "dfnID": "4e3cd62b", "dfnText": "the WebSocket connection is established", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2460" }], "title": "2.2. Opening handshake" }, { "refs": [{ "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2461" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2462" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2463" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2464" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2465" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2466" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2467" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2468" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2460\u24ea" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2460\u2460" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2460\u2461" }], "title": "4. Feedback from the protocol" }, { "refs": [{ "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2460\u2462" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2460\u2463" }], "title": "7. Garbage collection" }], "url": "https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and" },
                "5372cca8": { "dfnID": "5372cca8", "dfnText": "boolean", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-boolean" }, { "id": "ref-for-idl-boolean\u2460" }], "title": "6. The CloseEvent interface" }], "url": "https://webidl.spec.whatwg.org/#idl-boolean" },
                "5442ea33": { "dfnID": "5442ea33", "dfnText": "URL serializer", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-url-serializer" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-concept-url-serializer\u2460" }], "title": "4. Feedback from the protocol" }], "url": "https://url.spec.whatwg.org/#concept-url-serializer" },
                "55213b5b": { "dfnID": "55213b5b", "dfnText": "request", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-request" }], "title": "2.2. Opening handshake" }], "url": "https://fetch.spec.whatwg.org/#concept-request" },
                "5991ccfb": { "dfnID": "5991ccfb", "dfnText": "relevant realm", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-relevant-realm" }, { "id": "ref-for-concept-relevant-realm\u2460" }], "title": "4. Feedback from the protocol" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" },
                "5f90bbfb": { "dfnID": "5f90bbfb", "dfnText": "undefined", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-undefined" }, { "id": "ref-for-idl-undefined\u2460" }], "title": "3.1. Interface definition" }], "url": "https://webidl.spec.whatwg.org/#idl-undefined" },
                "5fd23811": { "dfnID": "5fd23811", "dfnText": "fire an event", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-event-fire" }, { "id": "ref-for-concept-event-fire\u2460" }, { "id": "ref-for-concept-event-fire\u2461" }, { "id": "ref-for-concept-event-fire\u2462" }], "title": "4. Feedback from the protocol" }], "url": "https://dom.spec.whatwg.org/#concept-event-fire" },
                "64b62ea0": { "dfnID": "64b62ea0", "dfnText": "redirect mode", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-request-redirect-mode" }], "title": "2.2. Opening handshake" }], "url": "https://fetch.spec.whatwg.org/#concept-request-redirect-mode" },
                "683cb370": { "dfnID": "683cb370", "dfnText": "step 1", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-step1" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-step1\u2460" }, { "id": "ref-for-step1\u2461" }, { "id": "ref-for-step1\u2462" }], "title": "7. Garbage collection" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#step1" },
                "688f9669": { "dfnID": "688f9669", "dfnText": "cache mode", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-request-cache-mode" }], "title": "2.2. Opening handshake" }], "url": "https://fetch.spec.whatwg.org/#concept-request-cache-mode" },
                "697965b2": { "dfnID": "697965b2", "dfnText": "connection", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-connection" }], "title": "2.1. Connections" }], "url": "https://fetch.spec.whatwg.org/#concept-connection" },
                "6a5a59a0": { "dfnID": "6a5a59a0", "dfnText": "event handler", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-handlers" }, { "id": "ref-for-event-handlers\u2460" }], "title": "3.1. Interface definition" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers" },
                "6c9ab516": { "dfnID": "6c9ab516", "dfnText": "ArrayBufferView", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-ArrayBufferView" }, { "id": "ref-for-ArrayBufferView\u2460" }], "title": "3.1. Interface definition" }], "url": "https://webidl.spec.whatwg.org/#ArrayBufferView" },
                "6d1db60d": { "dfnID": "6d1db60d", "dfnText": "service-workers mode", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-request-service-workers-mode" }], "title": "2.2. Opening handshake" }], "url": "https://fetch.spec.whatwg.org/#request-service-workers-mode" },
                "6ee0eab1": { "dfnID": "6ee0eab1", "dfnText": "header list", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-request-header-list" }, { "id": "ref-for-concept-request-header-list\u2460" }, { "id": "ref-for-concept-request-header-list\u2461" }, { "id": "ref-for-concept-request-header-list\u2462" }, { "id": "ref-for-concept-request-header-list\u2463" }, { "id": "ref-for-concept-request-header-list\u2464" }, { "id": "ref-for-concept-request-header-list\u2465" }], "title": "2.2. Opening handshake" }], "url": "https://fetch.spec.whatwg.org/#concept-request-header-list" },
                "797018a7": { "dfnID": "797018a7", "dfnText": "InvalidStateError", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-invalidstateerror" }], "title": "3.1. Interface definition" }], "url": "https://webidl.spec.whatwg.org/#invalidstateerror" },
                "7d0af9ea": { "dfnID": "7d0af9ea", "dfnText": "wss", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-section-11.1.2" }], "title": "3.1. Interface definition" }], "url": "https://datatracker.ietf.org/doc/html/rfc6455#section-11.1.2" },
                "7eb570ba": { "dfnID": "7eb570ba", "dfnText": "subprotocol in use", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-page-19:~:text=_Subprotocol%20In,Use_" }], "title": "4. Feedback from the protocol" }], "url": "https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_Subprotocol%20In,Use_" },
                "80726755": { "dfnID": "80726755", "dfnText": "task queues", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-task-queue" }], "title": "4. Feedback from the protocol" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#task-queue" },
                "852ada56": { "dfnID": "852ada56", "dfnText": "port", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-url-port" }], "title": "2.1. Connections" }], "url": "https://url.spec.whatwg.org/#concept-url-port" },
                "85394472": { "dfnID": "85394472", "dfnText": "Document", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-document" }], "title": "7. Garbage collection" }], "url": "https://dom.spec.whatwg.org/#document" },
                "857d5516": { "dfnID": "857d5516", "dfnText": "client", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-request-client" }], "title": "2.2. Opening handshake" }], "url": "https://fetch.spec.whatwg.org/#concept-request-client" },
                "8855a9aa": { "dfnID": "8855a9aa", "dfnText": "DOMString", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-DOMString" }, { "id": "ref-for-idl-DOMString\u2460" }, { "id": "ref-for-idl-DOMString\u2461" }, { "id": "ref-for-idl-DOMString\u2462" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-idl-DOMString\u2463" }], "title": "4. Feedback from the protocol" }, { "refs": [{ "id": "ref-for-idl-DOMString\u2464" }], "title": "6. The CloseEvent interface" }], "url": "https://webidl.spec.whatwg.org/#idl-DOMString" },
                "889e932f": { "dfnID": "889e932f", "dfnText": "Exposed", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-Exposed" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-Exposed\u2460" }], "title": "6. The CloseEvent interface" }], "url": "https://webidl.spec.whatwg.org/#Exposed" },
                "902380f7": { "dfnID": "902380f7", "dfnText": "credentials mode", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-request-credentials-mode" }], "title": "2.2. Opening handshake" }], "url": "https://fetch.spec.whatwg.org/#concept-request-credentials-mode" },
                "959ad97b": { "dfnID": "959ad97b", "dfnText": "origin", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-url-origin" }], "title": "4. Feedback from the protocol" }], "url": "https://url.spec.whatwg.org/#concept-url-origin" },
                "9a517a7d": { "dfnID": "9a517a7d", "dfnText": "queue a task", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-queue-a-task" }, { "id": "ref-for-queue-a-task\u2460" }, { "id": "ref-for-queue-a-task\u2461" }, { "id": "ref-for-queue-a-task\u2462" }, { "id": "ref-for-queue-a-task\u2463" }, { "id": "ref-for-queue-a-task\u2464" }], "title": "4. Feedback from the protocol" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" },
                "9c4c1e66": { "dfnID": "9c4c1e66", "dfnText": "relevant settings object", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-relevant-settings-object" }, { "id": "ref-for-relevant-settings-object\u2460" }], "title": "3.1. Interface definition" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" },
                "9cce47fd": { "dfnID": "9cce47fd", "dfnText": "sequence", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-sequence" }], "title": "3.1. Interface definition" }], "url": "https://webidl.spec.whatwg.org/#idl-sequence" },
                "9d386f55": { "dfnID": "9d386f55", "dfnText": "event handler event type", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-handler-event-type" }, { "id": "ref-for-event-handler-event-type\u2460" }], "title": "3.1. Interface definition" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type" },
                "a0841248": { "dfnID": "a0841248", "dfnText": "the WebSocket connection close reason", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-section-7.1.6" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-section-7.1.6\u2460" }], "title": "4. Feedback from the protocol" }], "url": "https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.6" },
                "a1d47575": { "dfnID": "a1d47575", "dfnText": "status", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-response-status" }], "title": "2.2. Opening handshake" }], "url": "https://fetch.spec.whatwg.org/#concept-response-status" },
                "a3033be5": { "dfnID": "a3033be5", "dfnText": "UTF-8 decode without BOM", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-utf-8-decode-without-bom" }], "title": "4. Feedback from the protocol" }], "url": "https://encoding.spec.whatwg.org/#utf-8-decode-without-bom" },
                "a33db89a": { "dfnID": "a33db89a", "dfnText": "fetch", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-fetch" }, { "id": "ref-for-concept-fetch\u2460" }], "title": "2.2. Opening handshake" }], "url": "https://fetch.spec.whatwg.org/#concept-fetch" },
                "a37b7863": { "dfnID": "a37b7863", "dfnText": "the WebSocket connection close code", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-section-7.1.5" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-section-7.1.5\u2460" }, { "id": "ref-for-section-7.1.5\u2461" }], "title": "4. Feedback from the protocol" }], "url": "https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.5" },
                "a4fa4138": { "dfnID": "a4fa4138", "dfnText": "start the WebSocket closing handshake", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-section-7.1.2" }, { "id": "ref-for-section-7.1.2\u2460" }, { "id": "ref-for-section-7.1.2\u2461" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-section-7.1.2\u2462" }, { "id": "ref-for-section-7.1.2\u2463" }], "title": "7. Garbage collection" }], "url": "https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.2" },
                "a6a8ec88": { "dfnID": "a6a8ec88", "dfnText": "append", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-header-list-append" }, { "id": "ref-for-concept-header-list-append\u2460" }, { "id": "ref-for-concept-header-list-append\u2461" }, { "id": "ref-for-concept-header-list-append\u2462" }, { "id": "ref-for-concept-header-list-append\u2463" }], "title": "2.2. Opening handshake" }], "url": "https://fetch.spec.whatwg.org/#concept-header-list-append" },
                "a7100bf9": { "dfnID": "a7100bf9", "dfnText": "established", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2460" }], "title": "2.2. Opening handshake" }, { "refs": [{ "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2461" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2462" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2463" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2464" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2465" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2466" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2467" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2468" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2460\u24ea" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2460\u2460" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2460\u2461" }], "title": "4. Feedback from the protocol" }, { "refs": [{ "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2460\u2462" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2460\u2463" }], "title": "7. Garbage collection" }], "url": "https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and" },
                "a72449dd": { "dfnID": "a72449dd", "dfnText": "in parallel", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-in-parallel" }, { "id": "ref-for-in-parallel\u2460" }], "title": "3.1. Interface definition" }], "url": "https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" },
                "a8c7461b": { "dfnID": "a8c7461b", "dfnText": "URL record", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-url" }, { "id": "ref-for-concept-url\u2460" }, { "id": "ref-for-concept-url\u2461" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-concept-url\u2462" }], "title": "4. Feedback from the protocol" }], "url": "https://url.spec.whatwg.org/#concept-url" },
                "ae698447": { "dfnID": "ae698447", "dfnText": "close the WebSocket connection", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-section-7.1.1" }, { "id": "ref-for-section-7.1.1\u2460" }, { "id": "ref-for-section-7.1.1\u2461" }, { "id": "ref-for-section-7.1.1\u2462" }, { "id": "ref-for-section-7.1.1\u2463" }, { "id": "ref-for-section-7.1.1\u2464" }, { "id": "ref-for-section-7.1.1\u2465" }, { "id": "ref-for-section-7.1.1\u2466" }], "title": "3.1. Interface definition" }], "url": "https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.1" },
                "b012ccb2": { "dfnID": "b012ccb2", "dfnText": "forgiving-base64 encode", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-forgiving-base64-encode" }], "title": "2.2. Opening handshake" }], "url": "https://infra.spec.whatwg.org/#forgiving-base64-encode" },
                "b0d7f3c3": { "dfnID": "b0d7f3c3", "dfnText": "USVString", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-USVString" }, { "id": "ref-for-idl-USVString\u2460" }, { "id": "ref-for-idl-USVString\u2461" }, { "id": "ref-for-idl-USVString\u2462" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-idl-USVString\u2463" }, { "id": "ref-for-idl-USVString\u2464" }], "title": "6. The CloseEvent interface" }], "url": "https://webidl.spec.whatwg.org/#idl-USVString" },
                "b75eba20": { "dfnID": "b75eba20", "dfnText": "the WebSocket closing handshake is started", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-section-7.1.3" }, { "id": "ref-for-section-7.1.3\u2460" }, { "id": "ref-for-section-7.1.3\u2461" }, { "id": "ref-for-section-7.1.3\u2462" }, { "id": "ref-for-section-7.1.3\u2463" }, { "id": "ref-for-section-7.1.3\u2464" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-section-7.1.3\u2465" }], "title": "4. Feedback from the protocol" }, { "refs": [{ "id": "ref-for-section-7.1.3\u2466" }], "title": "7. Garbage collection" }], "url": "https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.3" },
                "b7d73f5b": { "dfnID": "b7d73f5b", "dfnText": "Blob", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-Blob" }, { "id": "ref-for-dfn-Blob\u2460" }, { "id": "ref-for-dfn-Blob\u2461" }, { "id": "ref-for-dfn-Blob\u2462" }, { "id": "ref-for-dfn-Blob\u2463" }, { "id": "ref-for-dfn-Blob\u2464" }, { "id": "ref-for-dfn-Blob\u2465" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-dfn-Blob\u2466" }], "title": "4. Feedback from the protocol" }], "url": "https://w3c.github.io/FileAPI/#dfn-Blob" },
                "b85ee3be": { "dfnID": "b85ee3be", "dfnText": "host", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-url-host" }], "title": "2.1. Connections" }], "url": "https://url.spec.whatwg.org/#concept-url-host" },
                "bd2fe71e": { "dfnID": "bd2fe71e", "dfnText": "processResponse", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-process-response" }], "title": "2.2. Opening handshake" }], "url": "https://fetch.spec.whatwg.org/#process-response" },
                "be2d2b4c": { "dfnID": "be2d2b4c", "dfnText": "SyntaxError", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-syntaxerror" }, { "id": "ref-for-syntaxerror\u2460" }, { "id": "ref-for-syntaxerror\u2461" }, { "id": "ref-for-syntaxerror\u2462" }, { "id": "ref-for-syntaxerror\u2463" }, { "id": "ref-for-syntaxerror\u2464" }], "title": "3.1. Interface definition" }], "url": "https://webidl.spec.whatwg.org/#syntaxerror" },
                "c07f8014": { "dfnID": "c07f8014", "dfnText": "header value", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-header-value" }], "title": "2.2. Opening handshake" }], "url": "https://fetch.spec.whatwg.org/#header-value" },
                "c0868016": { "dfnID": "c0868016", "dfnText": "path", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-url-path" }], "title": "2.1. Connections" }], "url": "https://url.spec.whatwg.org/#concept-url-path" },
                "c3b2d08c": { "dfnID": "c3b2d08c", "dfnText": "task source", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-task-source" }], "title": "4. Feedback from the protocol" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#task-source" },
                "c6d19e56": { "dfnID": "c6d19e56", "dfnText": "event loop", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-loop" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-event-loop\u2460" }, { "id": "ref-for-event-loop\u2461" }, { "id": "ref-for-event-loop\u2462" }], "title": "7. Garbage collection" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-loop" },
                "c9b060e8": { "dfnID": "c9b060e8", "dfnText": "the WebSocket connection is closed", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-section-7.1.4" }, { "id": "ref-for-section-7.1.4\u2460" }, { "id": "ref-for-section-7.1.4\u2461" }, { "id": "ref-for-section-7.1.4\u2462" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-section-7.1.4\u2463" }, { "id": "ref-for-section-7.1.4\u2464" }], "title": "4. Feedback from the protocol" }], "url": "https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.4" },
                "ca3ca4ae": { "dfnID": "ca3ca4ae", "dfnText": "URL parser", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-url-parser" }], "title": "3.1. Interface definition" }], "url": "https://url.spec.whatwg.org/#concept-url-parser" },
                "cb98f71f": { "dfnID": "cb98f71f", "dfnText": "mode", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-request-mode" }], "title": "2.2. Opening handshake" }], "url": "https://fetch.spec.whatwg.org/#concept-request-mode" },
                "cd622903": { "dfnID": "cd622903", "dfnText": "extensions in use", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2460" }], "title": "2.2. Opening handshake" }, { "refs": [{ "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2461" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2462" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2463" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2464" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2465" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2466" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2467" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2468" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2460\u24ea" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2460\u2460" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2460\u2461" }], "title": "4. Feedback from the protocol" }, { "refs": [{ "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2460\u2462" }, { "id": "ref-for-page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and\u2460\u2463" }], "title": "7. Garbage collection" }], "url": "https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and" },
                "closeevent": { "dfnID": "closeevent", "dfnText": "CloseEvent", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-closeevent" }], "title": "4. Feedback from the protocol" }, { "refs": [{ "id": "ref-for-closeevent\u2460" }, { "id": "ref-for-closeevent\u2461" }], "title": "6. The CloseEvent interface" }], "url": "#closeevent" },
                "concept-websocket-connection-obtain": { "dfnID": "concept-websocket-connection-obtain", "dfnText": "obtain a WebSocket connection", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-concept-websocket-connection-obtain" }], "title": "2.1. Connections" }], "url": "#concept-websocket-connection-obtain" },
                "concept-websocket-establish": { "dfnID": "concept-websocket-establish", "dfnText": "establish a WebSocket connection", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-concept-websocket-establish" }, { "id": "ref-for-concept-websocket-establish\u2460" }], "title": "3.1. Interface definition" }], "url": "#concept-websocket-establish" },
                "dc1cd39b": { "dfnID": "dc1cd39b", "dfnText": "URL", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-request-url" }], "title": "2.2. Opening handshake" }], "url": "https://fetch.spec.whatwg.org/#concept-request-url" },
                "dca2de17": { "dfnID": "dca2de17", "dfnText": "DOMException", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-DOMException" }, { "id": "ref-for-idl-DOMException\u2460" }, { "id": "ref-for-idl-DOMException\u2461" }, { "id": "ref-for-idl-DOMException\u2462" }, { "id": "ref-for-idl-DOMException\u2463" }, { "id": "ref-for-idl-DOMException\u2464" }, { "id": "ref-for-idl-DOMException\u2465" }, { "id": "ref-for-idl-DOMException\u2466" }], "title": "3.1. Interface definition" }], "url": "https://webidl.spec.whatwg.org/#idl-DOMException" },
                "dcffbccd": { "dfnID": "dcffbccd", "dfnText": "URL", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-url" }, { "id": "ref-for-concept-url\u2460" }, { "id": "ref-for-concept-url\u2461" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-concept-url\u2462" }], "title": "4. Feedback from the protocol" }], "url": "https://url.spec.whatwg.org/#concept-url" },
                "dictdef-closeeventinit": { "dfnID": "dictdef-closeeventinit", "dfnText": "CloseEventInit", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-closeeventinit" }], "title": "6. The CloseEvent interface" }], "url": "#dictdef-closeeventinit" },
                "dom-binarytype-arraybuffer": { "dfnID": "dom-binarytype-arraybuffer", "dfnText": "\"arraybuffer\"", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-binarytype-arraybuffer" }, { "id": "ref-for-dom-binarytype-arraybuffer\u2460" }, { "id": "ref-for-dom-binarytype-arraybuffer\u2461" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-dom-binarytype-arraybuffer\u2462" }], "title": "4. Feedback from the protocol" }], "url": "#dom-binarytype-arraybuffer" },
                "dom-binarytype-blob": { "dfnID": "dom-binarytype-blob", "dfnText": "\"blob\"", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-binarytype-blob" }, { "id": "ref-for-dom-binarytype-blob\u2460" }, { "id": "ref-for-dom-binarytype-blob\u2461" }, { "id": "ref-for-dom-binarytype-blob\u2462" }, { "id": "ref-for-dom-binarytype-blob\u2463" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-dom-binarytype-blob\u2464" }], "title": "4. Feedback from the protocol" }], "url": "#dom-binarytype-blob" },
                "dom-closeevent-closeevent": { "dfnID": "dom-closeevent-closeevent", "dfnText": "constructor", "external": false, "refSections": [], "url": "#dom-closeevent-closeevent" },
                "dom-closeevent-closeevent-type-eventinitdict-eventinitdict": { "dfnID": "dom-closeevent-closeevent-type-eventinitdict-eventinitdict", "dfnText": "eventInitDict", "external": false, "refSections": [], "url": "#dom-closeevent-closeevent-type-eventinitdict-eventinitdict" },
                "dom-closeevent-closeevent-type-eventinitdict-type": { "dfnID": "dom-closeevent-closeevent-type-eventinitdict-type", "dfnText": "type", "external": false, "refSections": [], "url": "#dom-closeevent-closeevent-type-eventinitdict-type" },
                "dom-closeevent-code": { "dfnID": "dom-closeevent-code", "dfnText": "code", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-closeevent-code" }], "title": "4. Feedback from the protocol" }, { "refs": [{ "id": "ref-for-dom-closeevent-code\u2460" }, { "id": "ref-for-dom-closeevent-code\u2461" }], "title": "6. The CloseEvent interface" }], "url": "#dom-closeevent-code" },
                "dom-closeevent-reason": { "dfnID": "dom-closeevent-reason", "dfnText": "reason", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-closeevent-reason" }], "title": "4. Feedback from the protocol" }, { "refs": [{ "id": "ref-for-dom-closeevent-reason\u2460" }, { "id": "ref-for-dom-closeevent-reason\u2461" }], "title": "6. The CloseEvent interface" }], "url": "#dom-closeevent-reason" },
                "dom-closeevent-wasclean": { "dfnID": "dom-closeevent-wasclean", "dfnText": "wasClean", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-closeevent-wasclean" }], "title": "4. Feedback from the protocol" }, { "refs": [{ "id": "ref-for-dom-closeevent-wasclean\u2460" }, { "id": "ref-for-dom-closeevent-wasclean\u2461" }], "title": "6. The CloseEvent interface" }], "url": "#dom-closeevent-wasclean" },
                "dom-closeeventinit-code": { "dfnID": "dom-closeeventinit-code", "dfnText": "code", "external": false, "refSections": [], "url": "#dom-closeeventinit-code" },
                "dom-closeeventinit-reason": { "dfnID": "dom-closeeventinit-reason", "dfnText": "reason", "external": false, "refSections": [], "url": "#dom-closeeventinit-reason" },
                "dom-closeeventinit-wasclean": { "dfnID": "dom-closeeventinit-wasclean", "dfnText": "wasClean", "external": false, "refSections": [], "url": "#dom-closeeventinit-wasclean" },
                "dom-websocket-binarytype": { "dfnID": "dom-websocket-binarytype", "dfnText": "binaryType", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-websocket-binarytype" }, { "id": "ref-for-dom-websocket-binarytype\u2460" }, { "id": "ref-for-dom-websocket-binarytype\u2461" }, { "id": "ref-for-dom-websocket-binarytype\u2462" }], "title": "3.1. Interface definition" }], "url": "#dom-websocket-binarytype" },
                "dom-websocket-bufferedamount": { "dfnID": "dom-websocket-bufferedamount", "dfnText": "bufferedAmount", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-websocket-bufferedamount" }, { "id": "ref-for-dom-websocket-bufferedamount\u2460" }, { "id": "ref-for-dom-websocket-bufferedamount\u2461" }, { "id": "ref-for-dom-websocket-bufferedamount\u2462" }, { "id": "ref-for-dom-websocket-bufferedamount\u2463" }, { "id": "ref-for-dom-websocket-bufferedamount\u2464" }, { "id": "ref-for-dom-websocket-bufferedamount\u2465" }, { "id": "ref-for-dom-websocket-bufferedamount\u2466" }], "title": "3.1. Interface definition" }], "url": "#dom-websocket-bufferedamount" },
                "dom-websocket-close": { "dfnID": "dom-websocket-close", "dfnText": "close(code, reason)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-websocket-close" }, { "id": "ref-for-dom-websocket-close\u2460" }, { "id": "ref-for-dom-websocket-close\u2461" }, { "id": "ref-for-dom-websocket-close\u2462" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-dom-websocket-close\u2463" }], "title": "4. Feedback from the protocol" }], "url": "#dom-websocket-close" },
                "dom-websocket-close-code-reason-code": { "dfnID": "dom-websocket-close-code-reason-code", "dfnText": "code", "external": false, "refSections": [], "url": "#dom-websocket-close-code-reason-code" },
                "dom-websocket-close-code-reason-reason": { "dfnID": "dom-websocket-close-code-reason-reason", "dfnText": "reason", "external": false, "refSections": [], "url": "#dom-websocket-close-code-reason-reason" },
                "dom-websocket-closed": { "dfnID": "dom-websocket-closed", "dfnText": "CLOSED", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-websocket-closed" }, { "id": "ref-for-dom-websocket-closed\u2460" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-dom-websocket-closed\u2461" }], "title": "4. Feedback from the protocol" }], "url": "#dom-websocket-closed" },
                "dom-websocket-closing": { "dfnID": "dom-websocket-closing", "dfnText": "CLOSING", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-websocket-closing" }, { "id": "ref-for-dom-websocket-closing\u2460" }, { "id": "ref-for-dom-websocket-closing\u2461" }, { "id": "ref-for-dom-websocket-closing\u2462" }, { "id": "ref-for-dom-websocket-closing\u2463" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-dom-websocket-closing\u2464" }, { "id": "ref-for-dom-websocket-closing\u2465" }], "title": "4. Feedback from the protocol" }, { "refs": [{ "id": "ref-for-dom-websocket-closing\u2466" }], "title": "7. Garbage collection" }], "url": "#dom-websocket-closing" },
                "dom-websocket-connecting": { "dfnID": "dom-websocket-connecting", "dfnText": "CONNECTING", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-websocket-connecting" }, { "id": "ref-for-dom-websocket-connecting\u2460" }, { "id": "ref-for-dom-websocket-connecting\u2461" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-dom-websocket-connecting\u2462" }], "title": "7. Garbage collection" }], "url": "#dom-websocket-connecting" },
                "dom-websocket-extensions": { "dfnID": "dom-websocket-extensions", "dfnText": "extensions", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-websocket-extensions" }, { "id": "ref-for-dom-websocket-extensions\u2460" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-dom-websocket-extensions\u2461" }], "title": "4. Feedback from the protocol" }], "url": "#dom-websocket-extensions" },
                "dom-websocket-onclose": { "dfnID": "dom-websocket-onclose", "dfnText": "onclose", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-websocket-onclose" }], "title": "3.1. Interface definition" }], "url": "#dom-websocket-onclose" },
                "dom-websocket-onerror": { "dfnID": "dom-websocket-onerror", "dfnText": "onerror", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-websocket-onerror" }], "title": "3.1. Interface definition" }], "url": "#dom-websocket-onerror" },
                "dom-websocket-onmessage": { "dfnID": "dom-websocket-onmessage", "dfnText": "onmessage", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-websocket-onmessage" }], "title": "3.1. Interface definition" }], "url": "#dom-websocket-onmessage" },
                "dom-websocket-onopen": { "dfnID": "dom-websocket-onopen", "dfnText": "onopen", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-websocket-onopen" }], "title": "3.1. Interface definition" }], "url": "#dom-websocket-onopen" },
                "dom-websocket-open": { "dfnID": "dom-websocket-open", "dfnText": "OPEN", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-websocket-open" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-dom-websocket-open\u2460" }, { "id": "ref-for-dom-websocket-open\u2461" }], "title": "4. Feedback from the protocol" }, { "refs": [{ "id": "ref-for-dom-websocket-open\u2462" }], "title": "7. Garbage collection" }], "url": "#dom-websocket-open" },
                "dom-websocket-protocol": { "dfnID": "dom-websocket-protocol", "dfnText": "protocol", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-websocket-protocol" }, { "id": "ref-for-dom-websocket-protocol\u2460" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-dom-websocket-protocol\u2461" }], "title": "4. Feedback from the protocol" }], "url": "#dom-websocket-protocol" },
                "dom-websocket-readystate": { "dfnID": "dom-websocket-readystate", "dfnText": "readyState", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-websocket-readystate" }, { "id": "ref-for-dom-websocket-readystate\u2460" }], "title": "3.1. Interface definition" }], "url": "#dom-websocket-readystate" },
                "dom-websocket-send": { "dfnID": "dom-websocket-send", "dfnText": "send(data)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-websocket-send" }, { "id": "ref-for-dom-websocket-send\u2460" }, { "id": "ref-for-dom-websocket-send\u2461" }, { "id": "ref-for-dom-websocket-send\u2462" }, { "id": "ref-for-dom-websocket-send\u2463" }], "title": "3.1. Interface definition" }], "url": "#dom-websocket-send" },
                "dom-websocket-send-data-data": { "dfnID": "dom-websocket-send-data-data", "dfnText": "data", "external": false, "refSections": [], "url": "#dom-websocket-send-data-data" },
                "dom-websocket-url": { "dfnID": "dom-websocket-url", "dfnText": "url", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-websocket-url" }, { "id": "ref-for-dom-websocket-url\u2460" }], "title": "3.1. Interface definition" }], "url": "#dom-websocket-url" },
                "dom-websocket-websocket": { "dfnID": "dom-websocket-websocket", "dfnText": "new\n WebSocket(url, protocols)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-websocket-websocket" }, { "id": "ref-for-dom-websocket-websocket\u2460" }], "title": "3.1. Interface definition" }], "url": "#dom-websocket-websocket" },
                "dom-websocket-websocket-url-protocols-protocols": { "dfnID": "dom-websocket-websocket-url-protocols-protocols", "dfnText": "protocols", "external": false, "refSections": [], "url": "#dom-websocket-websocket-url-protocols-protocols" },
                "dom-websocket-websocket-url-protocols-url": { "dfnID": "dom-websocket-websocket-url-protocols-url", "dfnText": "url", "external": false, "refSections": [], "url": "#dom-websocket-websocket-url-protocols-url" },
                "e0eefdd9": { "dfnID": "e0eefdd9", "dfnText": "origin", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-messageevent-origin" }], "title": "4. Feedback from the protocol" }], "url": "https://html.spec.whatwg.org/multipage/comms.html#dom-messageevent-origin" },
                "e270bd2a": { "dfnID": "e270bd2a", "dfnText": "task", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-task" }, { "id": "ref-for-concept-task\u2460" }, { "id": "ref-for-concept-task\u2461" }], "title": "4. Feedback from the protocol" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-task" },
                "e746eb27": { "dfnID": "e746eb27", "dfnText": "cleanly", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-page-41:~:text=closed-,_cleanly_." }, { "id": "ref-for-page-41:~:text=closed-,_cleanly_.\u2460" }], "title": "4. Feedback from the protocol" }], "url": "https://datatracker.ietf.org/doc/html/rfc6455#page-41:~:text=closed-,_cleanly_." },
                "eb1b1af3": { "dfnID": "eb1b1af3", "dfnText": "network error", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-network-error" }], "title": "2.2. Opening handshake" }], "url": "https://fetch.spec.whatwg.org/#concept-network-error" },
                "ed948033": { "dfnID": "ed948033", "dfnText": "fragment", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-url-fragment" }, { "id": "ref-for-concept-url-fragment\u2460" }], "title": "3.1. Interface definition" }], "url": "https://url.spec.whatwg.org/#concept-url-fragment" },
                "enumdef-binarytype": { "dfnID": "enumdef-binarytype", "dfnText": "BinaryType", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-enumdef-binarytype" }, { "id": "ref-for-enumdef-binarytype\u2460" }], "title": "3.1. Interface definition" }], "url": "#enumdef-binarytype" },
                "eventdef-websocket-close": { "dfnID": "eventdef-websocket-close", "dfnText": "close", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-eventdef-websocket-close" }, { "id": "ref-for-eventdef-websocket-close\u2460" }, { "id": "ref-for-eventdef-websocket-close\u2461" }, { "id": "ref-for-eventdef-websocket-close\u2462" }, { "id": "ref-for-eventdef-websocket-close\u2463" }, { "id": "ref-for-eventdef-websocket-close\u2464" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-eventdef-websocket-close\u2465" }], "title": "6. The CloseEvent interface" }, { "refs": [{ "id": "ref-for-eventdef-websocket-close\u2466" }, { "id": "ref-for-eventdef-websocket-close\u2467" }, { "id": "ref-for-eventdef-websocket-close\u2468" }], "title": "7. Garbage collection" }], "url": "#eventdef-websocket-close" },
                "eventdef-websocket-error": { "dfnID": "eventdef-websocket-error", "dfnText": "error", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-eventdef-websocket-error" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-eventdef-websocket-error\u2460" }, { "id": "ref-for-eventdef-websocket-error\u2461" }, { "id": "ref-for-eventdef-websocket-error\u2462" }], "title": "7. Garbage collection" }], "url": "#eventdef-websocket-error" },
                "eventdef-websocket-message": { "dfnID": "eventdef-websocket-message", "dfnText": "message", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-eventdef-websocket-message" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-eventdef-websocket-message\u2460" }], "title": "4. Feedback from the protocol" }, { "refs": [{ "id": "ref-for-eventdef-websocket-message\u2461" }, { "id": "ref-for-eventdef-websocket-message\u2462" }], "title": "7. Garbage collection" }], "url": "#eventdef-websocket-message" },
                "eventdef-websocket-open": { "dfnID": "eventdef-websocket-open", "dfnText": "open", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-eventdef-websocket-open" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-eventdef-websocket-open\u2460" }], "title": "4. Feedback from the protocol" }, { "refs": [{ "id": "ref-for-eventdef-websocket-open\u2461" }], "title": "7. Garbage collection" }], "url": "#eventdef-websocket-open" },
                "f0951476": { "dfnID": "f0951476", "dfnText": "EventHandler", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-eventhandler" }, { "id": "ref-for-eventhandler\u2460" }, { "id": "ref-for-eventhandler\u2461" }, { "id": "ref-for-eventhandler\u2462" }], "title": "3.1. Interface definition" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" },
                "f14b47b8": { "dfnID": "f14b47b8", "dfnText": "unsigned long long", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-unsigned-long-long" }], "title": "3.1. Interface definition" }], "url": "https://webidl.spec.whatwg.org/#idl-unsigned-long-long" },
                "f89c7d0d": { "dfnID": "f89c7d0d", "dfnText": "Clamp", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-Clamp" }], "title": "3.1. Interface definition" }], "url": "https://webidl.spec.whatwg.org/#Clamp" },
                "f9982e17": { "dfnID": "f9982e17", "dfnText": "send a WebSocket Message", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-page-66:~:text=needs%20to-,_Send%20a%20WebSocket%20Message_" }, { "id": "ref-for-page-66:~:text=needs%20to-,_Send%20a%20WebSocket%20Message_\u2460" }, { "id": "ref-for-page-66:~:text=needs%20to-,_Send%20a%20WebSocket%20Message_\u2461" }, { "id": "ref-for-page-66:~:text=needs%20to-,_Send%20a%20WebSocket%20Message_\u2462" }], "title": "3.1. Interface definition" }], "url": "https://datatracker.ietf.org/doc/html/rfc6455#page-66:~:text=needs%20to-,_Send%20a%20WebSocket%20Message_" },
                "flagged-as-full": { "dfnID": "flagged-as-full", "dfnText": "flagged\n  as full", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-flagged-as-full" }, { "id": "ref-for-flagged-as-full\u2460" }, { "id": "ref-for-flagged-as-full\u2461" }, { "id": "ref-for-flagged-as-full\u2462" }], "title": "3.1. Interface definition" }], "url": "#flagged-as-full" },
                "make-disappear": { "dfnID": "make-disappear", "dfnText": "make disappear", "external": false, "refSections": [], "url": "#make-disappear" },
                "websocket": { "dfnID": "websocket", "dfnText": "WebSocket", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-websocket" }], "title": "1. Introduction" }, { "refs": [{ "id": "ref-for-websocket\u2460" }], "title": "2. WebSocket protocol alterations" }, { "refs": [{ "id": "ref-for-websocket\u2461" }], "title": "3. The WebSocket interface" }, { "refs": [{ "id": "ref-for-websocket\u2462" }, { "id": "ref-for-websocket\u2463" }, { "id": "ref-for-websocket\u2464" }, { "id": "ref-for-websocket\u2465" }, { "id": "ref-for-websocket\u2466" }, { "id": "ref-for-websocket\u2467" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-websocket\u2468" }, { "id": "ref-for-websocket\u2460\u24ea" }, { "id": "ref-for-websocket\u2460\u2460" }, { "id": "ref-for-websocket\u2460\u2461" }, { "id": "ref-for-websocket\u2460\u2462" }, { "id": "ref-for-websocket\u2460\u2463" }, { "id": "ref-for-websocket\u2460\u2464" }], "title": "4. Feedback from the protocol" }, { "refs": [{ "id": "ref-for-websocket\u2460\u2465" }], "title": "6. The CloseEvent interface" }, { "refs": [{ "id": "ref-for-websocket\u2460\u2466" }, { "id": "ref-for-websocket\u2460\u2467" }, { "id": "ref-for-websocket\u2460\u2468" }, { "id": "ref-for-websocket\u2461\u24ea" }, { "id": "ref-for-websocket\u2461\u2460" }, { "id": "ref-for-websocket\u2461\u2461" }], "title": "7. Garbage collection" }], "url": "#websocket" },
                "websocket-binary-type": { "dfnID": "websocket-binary-type", "dfnText": "binary type", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-websocket-binary-type" }, { "id": "ref-for-websocket-binary-type\u2460" }, { "id": "ref-for-websocket-binary-type\u2461" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-websocket-binary-type\u2462" }, { "id": "ref-for-websocket-binary-type\u2463" }, { "id": "ref-for-websocket-binary-type\u2464" }, { "id": "ref-for-websocket-binary-type\u2465" }, { "id": "ref-for-websocket-binary-type\u2466" }], "title": "4. Feedback from the protocol" }], "url": "#websocket-binary-type" },
                "websocket-internal-url": { "dfnID": "websocket-internal-url", "dfnText": "url", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-websocket-internal-url" }, { "id": "ref-for-websocket-internal-url\u2460" }], "title": "3.1. Interface definition" }], "url": "#websocket-internal-url" },
                "websocket-ready-state": { "dfnID": "websocket-ready-state", "dfnText": "ready state", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-websocket-ready-state" }, { "id": "ref-for-websocket-ready-state\u2460" }, { "id": "ref-for-websocket-ready-state\u2461" }, { "id": "ref-for-websocket-ready-state\u2462" }, { "id": "ref-for-websocket-ready-state\u2463" }, { "id": "ref-for-websocket-ready-state\u2464" }], "title": "3.1. Interface definition" }, { "refs": [{ "id": "ref-for-websocket-ready-state\u2465" }, { "id": "ref-for-websocket-ready-state\u2466" }, { "id": "ref-for-websocket-ready-state\u2467" }, { "id": "ref-for-websocket-ready-state\u2468" }, { "id": "ref-for-websocket-ready-state\u2460\u24ea" }], "title": "4. Feedback from the protocol" }, { "refs": [{ "id": "ref-for-websocket-ready-state\u2460\u2460" }, { "id": "ref-for-websocket-ready-state\u2460\u2461" }, { "id": "ref-for-websocket-ready-state\u2460\u2462" }], "title": "7. Garbage collection" }], "url": "#websocket-ready-state" },
                "websocket-task-source": { "dfnID": "websocket-task-source", "dfnText": "WebSocket task source", "external": false, "refSections": [], "url": "#websocket-task-source" },
            };

            document.addEventListener("DOMContentLoaded", () => {
                genAllDfnPanels();

                document.body.addEventListener("click", (e) => {
                    // If not handled already, just hide all dfn panels.
                    hideAllDfnPanels();
                });
            });

            window.addEventListener("resize", () => {
                // Pin any visible dfn panel
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el => positionDfnPanel(el));
            });

            function genAllDfnPanels() {
                for (const panelData of Object.values(dfnPanelData)) {
                    const dfnID = panelData.dfnID;
                    const dfn = document.getElementById(dfnID);
                    if (!dfn) {
                        console.log(`Can't find dfn#${dfnID}.`, panelData);
                        continue;
                    }
                    dfn.panelData = panelData;
                    insertDfnPopupAction(dfn);
                }
            }

            function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
                const dfnPanel = mk.aside({
                    class: "dfn-panel on",
                    id: `infopanel-for-${dfnID}`,
                    "data-for": dfnID,
                    "aria-labelled-by": `infopaneltitle-for-${dfnID}`,
                },
                    mk.span({ id: `infopaneltitle-for-${dfnID}`, style: "display:none" },
                        `Info about the '${dfnText}' ${external ? "external" : ""} reference.`),
                    mk.a({ href: url, class: "dfn-link" }, url),
                    refSections.length == 0 ? [] :
                        mk.b({}, "Referenced in:"),
                    mk.ul({},
                        ...refSections.map(section =>
                            mk.li({},
                                ...section.refs.map((ref, refI) =>
                                    [
                                        mk.a({ href: `#${ref.id}` },
                                            (refI == 0) ? section.title : `(${refI + 1})`
                                        ),
                                        " ",
                                    ]
                                ),
                            ),
                        ),
                    ),
                    genLinkingSyntaxes(dfn),
                );

                dfnPanel.addEventListener('click', (event) => {
                    if (event.target.nodeName == 'A') {
                        scrollToTargetAndHighlight(event);
                        pinDfnPanel(dfnPanel);
                    }
                    event.stopPropagation();
                    refocusOnTarget(event);
                });
                dfnPanel.addEventListener('keydown', (event) => {
                    if (event.keyCode == 27) { // Escape key
                        hideDfnPanel({ dfnPanel });
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });

                dfnPanel.dfn = dfn;
                dfn.dfnPanel = dfnPanel;
                return dfnPanel;
            }



            function hideAllDfnPanels() {
                // Delete the currently-active dfn panel.
                queryAll(".dfn-panel").forEach(dfnPanel => hideDfnPanel({ dfnPanel }));
            }

            function showDfnPanel(dfn) {
                hideAllDfnPanels(); // Only display one at a time.

                dfn.setAttribute("aria-expanded", "true");

                const dfnPanel = genDfnPanel(dfn, dfn.panelData);

                // Give the dfn a unique tabindex, and then
                // give all the tabbable panel bits successive indexes.
                let tabIndex = 100;
                dfn.tabIndex = tabIndex++;
                const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
                for (const el of tabbable) {
                    el.tabIndex = tabIndex++;
                }

                append(document.body, dfnPanel);
                positionDfnPanel(dfnPanel);
            }

            function positionDfnPanel(dfnPanel) {
                const dfn = dfnPanel.dfn;
                const dfnPos = getBounds(dfn);
                dfnPanel.style.top = dfnPos.bottom + "px";
                dfnPanel.style.left = dfnPos.left + "px";

                const panelPos = dfnPanel.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
                    dfnPanel.style.left = newLeft + "px";
                }
            }

            function pinDfnPanel(dfnPanel) {
                // Switch it to "activated" state, which pins it.
                dfnPanel.classList.add("activated");
                dfnPanel.style.position = "fixed";
                dfnPanel.style.left = null;
                dfnPanel.style.top = null;
            }

            function hideDfnPanel({ dfn, dfnPanel }) {
                if (!dfnPanel) dfnPanel = dfn.dfnPanel;
                if (!dfn) dfn = dfnPanel.dfn;
                dfn.dfnPanel = undefined;
                dfnPanel.dfn = undefined;
                dfn.setAttribute("aria-expanded", "false");
                dfn.tabIndex = undefined;
                dfnPanel.remove()
            }

            function toggleDfnPanel(dfn) {
                if (dfn.dfnPanel) {
                    hideDfnPanel(dfn);
                } else {
                    showDfnPanel(dfn);
                }
            }

            function insertDfnPopupAction(dfn) {
                dfn.setAttribute('role', 'button');
                dfn.setAttribute('aria-expanded', 'false')
                dfn.tabIndex = 0;
                dfn.classList.add('has-dfn-panel');
                dfn.addEventListener('click', (event) => {
                    toggleDfnPanel(dfn);
                    event.stopPropagation();
                });
                dfn.addEventListener('keypress', (event) => {
                    const kc = event.keyCode;
                    // 32->Space, 13->Enter
                    if (kc == 32 || kc == 13) {
                        toggleDfnPanel(dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });
            }

            function refocusOnTarget(event) {
                const target = event.target;
                setTimeout(() => {
                    // Refocus on the event.target element.
                    // This is needed after browser scrolls to the destination.
                    target.focus();
                });
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function scrollToTargetAndHighlight(event) {
                let hash = event.target.hash;
                if (hash) {
                    hash = decodeURIComponent(hash.substring(1));
                    const dest = document.getElementById(hash);
                    if (dest) {
                        dest.classList.add('highlighted');
                        setTimeout(() => dest.classList.remove('highlighted'), 1000);
                    }
                }
            }

            // Functions, divided by link type, that wrap an autolink's
            // contents with the appropriate outer syntax.
            // Alternately, a string naming another type they format
            // the same as.
            function needsFor(type) {
                switch (type) {
                    case "descriptor":
                    case "value":
                    case "element-attr":
                    case "attr-value":
                    case "element-state":
                    case "method":
                    case "constructor":
                    case "argument":
                    case "attribute":
                    case "const":
                    case "dict-member":
                    case "event":
                    case "enum-value":
                    case "stringifier":
                    case "serializer":
                    case "iterator":
                    case "maplike":
                    case "setlike":
                    case "state":
                    case "mode":
                    case "context":
                    case "facet": return true;

                    default: return false;
                }
            }
            function refusesFor(type) {
                switch (type) {
                    case "property":
                    case "element":
                    case "interface":
                    case "namespace":
                    case "callback":
                    case "dictionary":
                    case "enum":
                    case "exception":
                    case "typedef":
                    case "http-header":
                    case "permission": return true;

                    default: return false;
                }
            }
            function linkFormatterFromType(type) {
                switch (type) {
                    case 'scheme':
                    case 'permission':
                    case 'dfn': return (text) => `[=${text}=]`;

                    case 'abstract-op': return (text) => `[\$${text}\$]`;

                    case 'function':
                    case 'at-rule':
                    case 'selector':
                    case 'value': return (text) => `''${text}''`;

                    case 'http-header': return (text) => `[:${text}:]`;

                    case 'interface':
                    case 'constructor':
                    case 'method':
                    case 'argument':
                    case 'attribute':
                    case 'callback':
                    case 'dictionary':
                    case 'dict-member':
                    case 'enum':
                    case 'enum-value':
                    case 'exception':
                    case 'const':
                    case 'typedef':
                    case 'stringifier':
                    case 'serializer':
                    case 'iterator':
                    case 'maplike':
                    case 'setlike':
                    case 'extended-attribute':
                    case 'event':
                    case 'idl': return (text) => `{{${text}}}`;

                    case 'element-state':
                    case 'element-attr':
                    case 'attr-value':
                    case 'element': return (element) => `<{${element}}>`;

                    case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

                    case 'type': return (text) => `<<${text}>>`;

                    case 'descriptor':
                    case 'property': return (text) => `'${text}'`;

                    default: return;
                };
            };

            function genLinkingSyntaxes(dfn) {
                if (dfn.tagName != "DFN") return;

                const type = dfn.getAttribute('data-dfn-type');
                if (!type) {
                    console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
                    return [];
                }

                // Return a function that wraps link text based on the type
                const linkFormatter = linkFormatterFromType(type);
                if (!linkFormatter) {
                    console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
                    return [];
                }

                let ltAlts;
                if (dfn.hasAttribute('data-lt')) {
                    ltAlts = dfn.getAttribute('data-lt')
                        .split("|")
                        .map(x => x.trim());
                } else {
                    ltAlts = [dfn.textContent.trim()];
                }
                if (type == "type") {
                    // lt of "<foo>", but "foo" is the interior;
                    // <<foo/bar>> is how you write it with a for,
                    // not <foo/<bar>> or whatever.
                    for (var i = 0; i < ltAlts.length; i++) {
                        const lt = ltAlts[i];
                        const match = /<(.*)>/.exec(lt);
                        if (match) { ltAlts[i] = match[1]; }
                    }
                }

                let forAlts;
                if (dfn.hasAttribute('data-dfn-for')) {
                    forAlts = dfn.getAttribute('data-dfn-for')
                        .split(",")
                        .map(x => x.trim());
                } else {
                    forAlts = [''];
                }

                let linkingSyntaxes = [];
                if (!needsFor(type)) {
                    for (const lt of ltAlts) {
                        linkingSyntaxes.push(linkFormatter(lt));
                    }
                }
                if (!refusesFor(type)) {
                    for (const f of forAlts) {
                        linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
                    }
                }
                return [
                    mk.b({}, 'Possible linking syntaxes:'),
                    mk.ul({},
                        ...linkingSyntaxes.map(link => {
                            const copyLink = async () =>
                                await navigator.clipboard.writeText(link);
                            return mk.li({},
                                mk.div({ class: 'link-item' },
                                    mk.button({
                                        class: 'copy-icon', title: 'Copy',
                                        type: 'button',
                                        _onclick: copyLink,
                                        tabindex: 0,
                                    }, mk.span({ class: 'icon' })),
                                    mk.span({}, link)
                                )
                            );
                        })
                    )
                ];
            }
        }
    </script>
    <script>/* Boilerplate: script-position-annos */
        "use strict";
        {
            function repositionAnnoPanels() {
                const panels = [...document.querySelectorAll("[data-anno-for]")];
                hydratePanels(panels);
                let vSoFar = 0;
                for (const panel of panels.sort(cmpTops)) {
                    if (panel.top < vSoFar) {
                        panel.top = vSoFar;
                        panel.style.top = vSoFar + "px";
                    }
                    vSoFar = panel.top + panel.height + 15;
                }
            }
            function hydratePanels(panels) {
                const main = document.querySelector("main");
                let mainRect;
                if (main) mainRect = main.getBoundingClientRect();
                // First display them all, if they're not already visible.
                for (const panel of panels) {
                    panel.classList.remove("unpositioned");
                }
                // Measure them all
                for (const panel of panels) {
                    const dfn = document.getElementById(panel.getAttribute("data-anno-for"));
                    if (!dfn) {
                        console.log("Can't find the annotation panel target:", panel);
                        continue;
                    }
                    panel.dfn = dfn;
                    panel.top = window.scrollY + dfn.getBoundingClientRect().top;
                    let panelRect = panel.getBoundingClientRect();
                    panel.height = panelRect.height;
                    if (main) {
                        panel.overlappingMain = panelRect.left < mainRect.right;
                    } else {
                        panel.overlappingMain = false;
                    }
                }
                // And finally position them
                for (const panel of panels) {
                    const dfn = panel.dfn;
                    if (!dfn) continue;
                    panel.style.top = panel.top + "px";
                    panel.classList.toggle("overlapping-main", panel.overlappingMain);
                }
            }

            function cmpTops(a, b) {
                return a.top - b.top;
            }

            window.addEventListener("load", repositionAnnoPanels);
            window.addEventListener("resize", repositionAnnoPanels);
        }
    </script>
    <script>/* Boilerplate: script-ref-hints */
        "use strict";
        {
            let refsData = {
                "#closeevent": { "displayText": "CloseEvent", "export": true, "for_": [], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "CloseEvent", "type": "interface", "url": "#closeevent" },
                "#concept-websocket-connection-obtain": { "displayText": "obtain a websocket connection", "export": true, "for_": [], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "obtain a websocket connection", "type": "dfn", "url": "#concept-websocket-connection-obtain" },
                "#concept-websocket-establish": { "displayText": "establish a websocket connection", "export": true, "for_": [], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "establish a websocket connection", "type": "dfn", "url": "#concept-websocket-establish" },
                "#dictdef-closeeventinit": { "displayText": "CloseEventInit", "export": true, "for_": [], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "CloseEventInit", "type": "dictionary", "url": "#dictdef-closeeventinit" },
                "#dom-binarytype-arraybuffer": { "displayText": "\"arraybuffer\"", "export": true, "for_": ["BinaryType"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "\"arraybuffer\"", "type": "enum-value", "url": "#dom-binarytype-arraybuffer" },
                "#dom-binarytype-blob": { "displayText": "\"blob\"", "export": true, "for_": ["BinaryType"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "\"blob\"", "type": "enum-value", "url": "#dom-binarytype-blob" },
                "#dom-closeevent-code": { "displayText": "code", "export": true, "for_": ["CloseEvent"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "code", "type": "attribute", "url": "#dom-closeevent-code" },
                "#dom-closeevent-reason": { "displayText": "reason", "export": true, "for_": ["CloseEvent"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "reason", "type": "attribute", "url": "#dom-closeevent-reason" },
                "#dom-closeevent-wasclean": { "displayText": "wasClean", "export": true, "for_": ["CloseEvent"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "wasClean", "type": "attribute", "url": "#dom-closeevent-wasclean" },
                "#dom-websocket-binarytype": { "displayText": "binaryType", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "binaryType", "type": "attribute", "url": "#dom-websocket-binarytype" },
                "#dom-websocket-bufferedamount": { "displayText": "bufferedAmount", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "bufferedAmount", "type": "attribute", "url": "#dom-websocket-bufferedamount" },
                "#dom-websocket-close": { "displayText": "close(code, reason)", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "close(code, reason)", "type": "method", "url": "#dom-websocket-close" },
                "#dom-websocket-closed": { "displayText": "CLOSED", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "CLOSED", "type": "const", "url": "#dom-websocket-closed" },
                "#dom-websocket-closing": { "displayText": "CLOSING", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "CLOSING", "type": "const", "url": "#dom-websocket-closing" },
                "#dom-websocket-connecting": { "displayText": "CONNECTING", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "CONNECTING", "type": "const", "url": "#dom-websocket-connecting" },
                "#dom-websocket-extensions": { "displayText": "extensions", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "extensions", "type": "attribute", "url": "#dom-websocket-extensions" },
                "#dom-websocket-onclose": { "displayText": "onclose", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "onclose", "type": "attribute", "url": "#dom-websocket-onclose" },
                "#dom-websocket-onerror": { "displayText": "onerror", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "onerror", "type": "attribute", "url": "#dom-websocket-onerror" },
                "#dom-websocket-onmessage": { "displayText": "onmessage", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "onmessage", "type": "attribute", "url": "#dom-websocket-onmessage" },
                "#dom-websocket-onopen": { "displayText": "onopen", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "onopen", "type": "attribute", "url": "#dom-websocket-onopen" },
                "#dom-websocket-open": { "displayText": "OPEN", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "OPEN", "type": "const", "url": "#dom-websocket-open" },
                "#dom-websocket-protocol": { "displayText": "protocol", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "protocol", "type": "attribute", "url": "#dom-websocket-protocol" },
                "#dom-websocket-readystate": { "displayText": "readyState", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "readyState", "type": "attribute", "url": "#dom-websocket-readystate" },
                "#dom-websocket-send": { "displayText": "send(data)", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "send(data)", "type": "method", "url": "#dom-websocket-send" },
                "#dom-websocket-url": { "displayText": "url", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "url", "type": "attribute", "url": "#dom-websocket-url" },
                "#dom-websocket-websocket": { "displayText": "WebSocket(url, protocols)", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "WebSocket(url, protocols)", "type": "constructor", "url": "#dom-websocket-websocket" },
                "#enumdef-binarytype": { "displayText": "BinaryType", "export": true, "for_": [], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "BinaryType", "type": "enum", "url": "#enumdef-binarytype" },
                "#eventdef-websocket-close": { "displayText": "close", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "close", "type": "event", "url": "#eventdef-websocket-close" },
                "#eventdef-websocket-error": { "displayText": "error", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "error", "type": "event", "url": "#eventdef-websocket-error" },
                "#eventdef-websocket-message": { "displayText": "message", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "message", "type": "event", "url": "#eventdef-websocket-message" },
                "#eventdef-websocket-open": { "displayText": "open", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "open", "type": "event", "url": "#eventdef-websocket-open" },
                "#flagged-as-full": { "displayText": "flagged as full", "export": true, "for_": [], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "flagged as full", "type": "dfn", "url": "#flagged-as-full" },
                "#websocket": { "displayText": "WebSocket", "export": true, "for_": [], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "WebSocket", "type": "interface", "url": "#websocket" },
                "#websocket-binary-type": { "displayText": "binary type", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "binary type", "type": "dfn", "url": "#websocket-binary-type" },
                "#websocket-internal-url": { "displayText": "internal-url", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "internal-url", "type": "dfn", "url": "#websocket-internal-url" },
                "#websocket-ready-state": { "displayText": "ready state", "export": true, "for_": ["WebSocket"], "level": "", "normative": true, "shortname": "websockets", "spec": "websockets", "status": "local", "text": "ready state", "type": "dfn", "url": "#websocket-ready-state" },
                "4a0b7b82_https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and": { "displayText": "extensions in use", "export": true, "for_": [], "level": "", "normative": true, "shortname": "rfc6455", "spec": "rfc6455", "status": "anchor-block", "text": "extensions in use", "type": "dfn", "url": "https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and" },
                "801de31e_https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and": { "displayText": "established", "export": true, "for_": [], "level": "", "normative": true, "shortname": "rfc6455", "spec": "rfc6455", "status": "anchor-block", "text": "established", "type": "dfn", "url": "https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and" },
                "https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_Subprotocol%20In,Use_": { "displayText": "subprotocol in use", "export": true, "for_": [], "level": "", "normative": true, "shortname": "rfc6455", "spec": "rfc6455", "status": "anchor-block", "text": "subprotocol in use", "type": "dfn", "url": "https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_Subprotocol%20In,Use_" },
                "https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and": { "displayText": "the WebSocket connection is established", "export": true, "for_": [], "level": "", "normative": true, "shortname": "rfc6455", "spec": "rfc6455", "status": "anchor-block", "text": "the websocket connection is established", "type": "dfn", "url": "https://datatracker.ietf.org/doc/html/rfc6455#page-19:~:text=_The%20WebSocket%20Connection%20is%20Established_,-and" },
                "https://datatracker.ietf.org/doc/html/rfc6455#page-41:~:text=closed-,_cleanly_.": { "displayText": "cleanly", "export": true, "for_": [], "level": "", "normative": true, "shortname": "rfc6455", "spec": "rfc6455", "status": "anchor-block", "text": "cleanly", "type": "dfn", "url": "https://datatracker.ietf.org/doc/html/rfc6455#page-41:~:text=closed-,_cleanly_." },
                "https://datatracker.ietf.org/doc/html/rfc6455#page-66:~:text=_A%20WebSocket%20Message%20Has%20Been%20Received_": { "displayText": "a WebSocket message has been received", "export": true, "for_": [], "level": "", "normative": true, "shortname": "rfc6455", "spec": "rfc6455", "status": "anchor-block", "text": "a websocket message has been received", "type": "dfn", "url": "https://datatracker.ietf.org/doc/html/rfc6455#page-66:~:text=_A%20WebSocket%20Message%20Has%20Been%20Received_" },
                "https://datatracker.ietf.org/doc/html/rfc6455#page-66:~:text=needs%20to-,_Send%20a%20WebSocket%20Message_": { "displayText": "send a WebSocket Message", "export": true, "for_": [], "level": "", "normative": true, "shortname": "rfc6455", "spec": "rfc6455", "status": "anchor-block", "text": "send a websocket message", "type": "dfn", "url": "https://datatracker.ietf.org/doc/html/rfc6455#page-66:~:text=needs%20to-,_Send%20a%20WebSocket%20Message_" },
                "https://datatracker.ietf.org/doc/html/rfc6455#section-11.1.1": { "displayText": "ws", "export": true, "for_": [], "level": "", "normative": true, "shortname": "rfc6455", "spec": "rfc6455", "status": "anchor-block", "text": "ws", "type": "dfn", "url": "https://datatracker.ietf.org/doc/html/rfc6455#section-11.1.1" },
                "https://datatracker.ietf.org/doc/html/rfc6455#section-11.1.2": { "displayText": "wss", "export": true, "for_": [], "level": "", "normative": true, "shortname": "rfc6455", "spec": "rfc6455", "status": "anchor-block", "text": "wss", "type": "dfn", "url": "https://datatracker.ietf.org/doc/html/rfc6455#section-11.1.2" },
                "https://datatracker.ietf.org/doc/html/rfc6455#section-11.3.4": { "displayText": "Sec-WebSocket-Protocol", "export": true, "for_": [], "level": "", "normative": true, "shortname": "rfc6455", "spec": "rfc6455", "status": "anchor-block", "text": "sec-websocket-protocol", "type": "http-header", "url": "https://datatracker.ietf.org/doc/html/rfc6455#section-11.3.4" },
                "https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.1": { "displayText": "close the WebSocket connection", "export": true, "for_": [], "level": "", "normative": true, "shortname": "rfc6455", "spec": "rfc6455", "status": "anchor-block", "text": "close the websocket connection", "type": "dfn", "url": "https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.1" },
                "https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.2": { "displayText": "start the WebSocket closing handshake", "export": true, "for_": [], "level": "", "normative": true, "shortname": "rfc6455", "spec": "rfc6455", "status": "anchor-block", "text": "start the websocket closing handshake", "type": "dfn", "url": "https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.2" },
                "https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.3": { "displayText": "the WebSocket closing handshake is started", "export": true, "for_": [], "level": "", "normative": true, "shortname": "rfc6455", "spec": "rfc6455", "status": "anchor-block", "text": "the websocket closing handshake is started", "type": "dfn", "url": "https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.3" },
                "https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.4": { "displayText": "the WebSocket connection is closed", "export": true, "for_": [], "level": "", "normative": true, "shortname": "rfc6455", "spec": "rfc6455", "status": "anchor-block", "text": "the websocket connection is closed", "type": "dfn", "url": "https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.4" },
                "https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.5": { "displayText": "the WebSocket connection close code", "export": true, "for_": [], "level": "", "normative": true, "shortname": "rfc6455", "spec": "rfc6455", "status": "anchor-block", "text": "the websocket connection close code", "type": "dfn", "url": "https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.5" },
                "https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.6": { "displayText": "the WebSocket connection close reason", "export": true, "for_": [], "level": "", "normative": true, "shortname": "rfc6455", "spec": "rfc6455", "status": "anchor-block", "text": "the websocket connection close reason", "type": "dfn", "url": "https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.6" },
                "https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.7": { "displayText": "fail the WebSocket connection", "export": true, "for_": [], "level": "", "normative": true, "shortname": "rfc6455", "spec": "rfc6455", "status": "anchor-block", "text": "fail the websocket connection", "type": "dfn", "url": "https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.7" },
                "https://dom.spec.whatwg.org/#concept-event-fire": { "displayText": "fire an event", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "fire an event", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-event-fire" },
                "https://dom.spec.whatwg.org/#dictdef-eventinit": { "displayText": "EventInit", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "EventInit", "type": "dictionary", "url": "https://dom.spec.whatwg.org/#dictdef-eventinit" },
                "https://dom.spec.whatwg.org/#document": { "displayText": "Document", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "Document", "type": "interface", "url": "https://dom.spec.whatwg.org/#document" },
                "https://dom.spec.whatwg.org/#event": { "displayText": "Event", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "Event", "type": "interface", "url": "https://dom.spec.whatwg.org/#event" },
                "https://dom.spec.whatwg.org/#eventtarget": { "displayText": "EventTarget", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "EventTarget", "type": "interface", "url": "https://dom.spec.whatwg.org/#eventtarget" },
                "https://encoding.spec.whatwg.org/#utf-8-decode-without-bom": { "displayText": "UTF-8 decode without BOM", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "encoding", "spec": "encoding", "status": "current", "text": "utf-8 decode without bom", "type": "dfn", "url": "https://encoding.spec.whatwg.org/#utf-8-decode-without-bom" },
                "https://encoding.spec.whatwg.org/#utf-8-encode": { "displayText": "UTF-8 encode", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "encoding", "spec": "encoding", "status": "current", "text": "utf-8 encode", "type": "dfn", "url": "https://encoding.spec.whatwg.org/#utf-8-encode" },
                "https://fetch.spec.whatwg.org/#concept-connection": { "displayText": "connection", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "connection", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#concept-connection" },
                "https://fetch.spec.whatwg.org/#concept-fetch": { "displayText": "fetch", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "fetch", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#concept-fetch" },
                "https://fetch.spec.whatwg.org/#concept-header-list-append": { "displayText": "append", "export": true, "for_": ["header list"], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "append", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#concept-header-list-append" },
                "https://fetch.spec.whatwg.org/#concept-header-list-combine": { "displayText": "combine", "export": true, "for_": ["header list"], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "combine", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#concept-header-list-combine" },
                "https://fetch.spec.whatwg.org/#concept-network-error": { "displayText": "network error", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "network error", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#concept-network-error" },
                "https://fetch.spec.whatwg.org/#concept-request": { "displayText": "request", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "request", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#concept-request" },
                "https://fetch.spec.whatwg.org/#concept-request-cache-mode": { "displayText": "cache mode", "export": true, "for_": ["request"], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "cache mode", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#concept-request-cache-mode" },
                "https://fetch.spec.whatwg.org/#concept-request-client": { "displayText": "client", "export": true, "for_": ["request"], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "client", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#concept-request-client" },
                "https://fetch.spec.whatwg.org/#concept-request-credentials-mode": { "displayText": "credentials mode", "export": true, "for_": ["request"], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "credentials mode", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#concept-request-credentials-mode" },
                "https://fetch.spec.whatwg.org/#concept-request-header-list": { "displayText": "header list", "export": true, "for_": ["request"], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "header list", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#concept-request-header-list" },
                "https://fetch.spec.whatwg.org/#concept-request-mode": { "displayText": "mode", "export": true, "for_": ["request"], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "mode", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#concept-request-mode" },
                "https://fetch.spec.whatwg.org/#concept-request-redirect-mode": { "displayText": "redirect mode", "export": true, "for_": ["request"], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "redirect mode", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#concept-request-redirect-mode" },
                "https://fetch.spec.whatwg.org/#concept-request-referrer": { "displayText": "referrer", "export": true, "for_": ["request"], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "referrer", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#concept-request-referrer" },
                "https://fetch.spec.whatwg.org/#concept-request-url": { "displayText": "URL", "export": true, "for_": ["request"], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "url", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#concept-request-url" },
                "https://fetch.spec.whatwg.org/#concept-response-status": { "displayText": "status", "export": true, "for_": ["response"], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "status", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#concept-response-status" },
                "https://fetch.spec.whatwg.org/#extract-header-list-values": { "displayText": "extracting header list values", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "extracting header list values", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#extract-header-list-values" },
                "https://fetch.spec.whatwg.org/#fetch-useparallelqueue": { "displayText": "useParallelQueue", "export": true, "for_": ["fetch"], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "useparallelqueue", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#fetch-useparallelqueue" },
                "https://fetch.spec.whatwg.org/#header-value": { "displayText": "header value", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "header value", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#header-value" },
                "https://fetch.spec.whatwg.org/#process-response": { "displayText": "processResponse", "export": true, "for_": ["fetch"], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "processresponse", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#process-response" },
                "https://fetch.spec.whatwg.org/#request-service-workers-mode": { "displayText": "service-workers mode", "export": true, "for_": ["request"], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "service-workers mode", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#request-service-workers-mode" },
                "https://html.spec.whatwg.org/multipage/comms.html#dom-messageevent-data": { "displayText": "data", "export": true, "for_": ["MessageEvent"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "data", "type": "attribute", "url": "https://html.spec.whatwg.org/multipage/comms.html#dom-messageevent-data" },
                "https://html.spec.whatwg.org/multipage/comms.html#dom-messageevent-origin": { "displayText": "origin", "export": true, "for_": ["MessageEvent"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "origin", "type": "attribute", "url": "https://html.spec.whatwg.org/multipage/comms.html#dom-messageevent-origin" },
                "https://html.spec.whatwg.org/multipage/comms.html#messageevent": { "displayText": "MessageEvent", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "MessageEvent", "type": "interface", "url": "https://html.spec.whatwg.org/multipage/comms.html#messageevent" },
                "https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel": { "displayText": "in parallel", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "in parallel", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#api-base-url": { "displayText": "API base URL", "export": true, "for_": ["environment settings object"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "api base url", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#api-base-url" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm": { "displayText": "relevant realm", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "relevant realm", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#concept-task": { "displayText": "task", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "task", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-task" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type": { "displayText": "event handler event type", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "event handler event type", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes": { "displayText": "event handler IDL attribute", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "event handler idl attribute", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers": { "displayText": "event handler", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "event handler", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#event-loop": { "displayText": "event loop", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "event loop", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-loop" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler": { "displayText": "EventHandler", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "EventHandler", "type": "typedef", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task": { "displayText": "queue a task", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "queue a task", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object": { "displayText": "relevant settings object", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "relevant settings object", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#step1": { "displayText": "step 1", "export": true, "for_": ["event loop"], "level": "", "normative": true, "shortname": "html", "spec": "html", "status": "anchor-block", "text": "step 1", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#step1" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#task-queue": { "displayText": "task queues", "export": false, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "task queues", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#task-queue" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#task-source": { "displayText": "task source", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "task source", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#task-source" },
                "https://infra.spec.whatwg.org/#forgiving-base64-encode": { "displayText": "forgiving-base64 encode", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "forgiving-base64 encode", "type": "dfn", "url": "https://infra.spec.whatwg.org/#forgiving-base64-encode" },
                "https://infra.spec.whatwg.org/#isomorphic-encode": { "displayText": "isomorphic encode", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "isomorphic encode", "type": "dfn", "url": "https://infra.spec.whatwg.org/#isomorphic-encode" },
                "https://url.spec.whatwg.org/#concept-url": { "displayText": "URL record", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "url", "spec": "url", "status": "current", "text": "url record", "type": "dfn", "url": "https://url.spec.whatwg.org/#concept-url" },
                "https://url.spec.whatwg.org/#concept-url-fragment": { "displayText": "fragment", "export": true, "for_": ["url"], "level": "1", "normative": true, "shortname": "url", "spec": "url", "status": "current", "text": "fragment", "type": "dfn", "url": "https://url.spec.whatwg.org/#concept-url-fragment" },
                "https://url.spec.whatwg.org/#concept-url-host": { "displayText": "host", "export": true, "for_": ["url"], "level": "1", "normative": true, "shortname": "url", "spec": "url", "status": "current", "text": "host", "type": "dfn", "url": "https://url.spec.whatwg.org/#concept-url-host" },
                "https://url.spec.whatwg.org/#concept-url-origin": { "displayText": "origin", "export": true, "for_": ["url"], "level": "1", "normative": true, "shortname": "url", "spec": "url", "status": "current", "text": "origin", "type": "dfn", "url": "https://url.spec.whatwg.org/#concept-url-origin" },
                "https://url.spec.whatwg.org/#concept-url-parser": { "displayText": "URL parser", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "url", "spec": "url", "status": "current", "text": "url parser", "type": "dfn", "url": "https://url.spec.whatwg.org/#concept-url-parser" },
                "https://url.spec.whatwg.org/#concept-url-path": { "displayText": "path", "export": true, "for_": ["url"], "level": "1", "normative": true, "shortname": "url", "spec": "url", "status": "current", "text": "path", "type": "dfn", "url": "https://url.spec.whatwg.org/#concept-url-path" },
                "https://url.spec.whatwg.org/#concept-url-port": { "displayText": "port", "export": true, "for_": ["url"], "level": "1", "normative": true, "shortname": "url", "spec": "url", "status": "current", "text": "port", "type": "dfn", "url": "https://url.spec.whatwg.org/#concept-url-port" },
                "https://url.spec.whatwg.org/#concept-url-query": { "displayText": "query", "export": true, "for_": ["url"], "level": "1", "normative": true, "shortname": "url", "spec": "url", "status": "current", "text": "query", "type": "dfn", "url": "https://url.spec.whatwg.org/#concept-url-query" },
                "https://url.spec.whatwg.org/#concept-url-scheme": { "displayText": "scheme", "export": true, "for_": ["url"], "level": "1", "normative": true, "shortname": "url", "spec": "url", "status": "current", "text": "scheme", "type": "dfn", "url": "https://url.spec.whatwg.org/#concept-url-scheme" },
                "https://url.spec.whatwg.org/#concept-url-serializer": { "displayText": "URL serializer", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "url", "spec": "url", "status": "current", "text": "url serializer", "type": "dfn", "url": "https://url.spec.whatwg.org/#concept-url-serializer" },
                "https://w3c.github.io/FileAPI/#dfn-Blob": { "displayText": "Blob", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "fileapi", "spec": "fileapi", "status": "current", "text": "Blob", "type": "interface", "url": "https://w3c.github.io/FileAPI/#dfn-Blob" },
                "https://webidl.spec.whatwg.org/#ArrayBufferView": { "displayText": "ArrayBufferView", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "ArrayBufferView", "type": "typedef", "url": "https://webidl.spec.whatwg.org/#ArrayBufferView" },
                "https://webidl.spec.whatwg.org/#BufferSource": { "displayText": "BufferSource", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "BufferSource", "type": "typedef", "url": "https://webidl.spec.whatwg.org/#BufferSource" },
                "https://webidl.spec.whatwg.org/#Clamp": { "displayText": "Clamp", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "Clamp", "type": "extended-attribute", "url": "https://webidl.spec.whatwg.org/#Clamp" },
                "https://webidl.spec.whatwg.org/#Exposed": { "displayText": "Exposed", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "Exposed", "type": "extended-attribute", "url": "https://webidl.spec.whatwg.org/#Exposed" },
                "https://webidl.spec.whatwg.org/#idl-ArrayBuffer": { "displayText": "ArrayBuffer", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "ArrayBuffer", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-ArrayBuffer" },
                "https://webidl.spec.whatwg.org/#idl-DOMException": { "displayText": "DOMException", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "DOMException", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-DOMException" },
                "https://webidl.spec.whatwg.org/#idl-DOMString": { "displayText": "DOMString", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "DOMString", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-DOMString" },
                "https://webidl.spec.whatwg.org/#idl-USVString": { "displayText": "USVString", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "USVString", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-USVString" },
                "https://webidl.spec.whatwg.org/#idl-boolean": { "displayText": "boolean", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "boolean", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-boolean" },
                "https://webidl.spec.whatwg.org/#idl-sequence": { "displayText": "sequence", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "sequence", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#idl-sequence" },
                "https://webidl.spec.whatwg.org/#idl-undefined": { "displayText": "undefined", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "undefined", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-undefined" },
                "https://webidl.spec.whatwg.org/#idl-unsigned-long-long": { "displayText": "unsigned long long", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "unsigned long long", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-unsigned-long-long" },
                "https://webidl.spec.whatwg.org/#idl-unsigned-short": { "displayText": "unsigned short", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "unsigned short", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-unsigned-short" },
                "https://webidl.spec.whatwg.org/#invalidaccesserror": { "displayText": "InvalidAccessError", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "InvalidAccessError", "type": "exception", "url": "https://webidl.spec.whatwg.org/#invalidaccesserror" },
                "https://webidl.spec.whatwg.org/#invalidstateerror": { "displayText": "InvalidStateError", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "InvalidStateError", "type": "exception", "url": "https://webidl.spec.whatwg.org/#invalidstateerror" },
                "https://webidl.spec.whatwg.org/#syntaxerror": { "displayText": "SyntaxError", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "SyntaxError", "type": "exception", "url": "https://webidl.spec.whatwg.org/#syntaxerror" },
                "https://webidl.spec.whatwg.org/#the-given-value": { "displayText": "the given value", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "the given value", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#the-given-value" },
                "https://webidl.spec.whatwg.org/#this": { "displayText": "this", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "this", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#this" },
            };

            function mkRefHint(link, ref) {
                const linkText = link.textContent;
                let dfnTextElements = '';
                if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
                    // Give the original term if it's being displayed in a different way.
                    // But allow casing differences, they're insignificant.
                    dfnTextElements =
                        mk.li({},
                            mk.b({}, "Term: "),
                            mk.span({}, ref.displayText)
                        );
                }
                const forList = ref.for_;
                let forListElements;
                if (forList.length == 0) {
                    forListElements = [];
                } else if (forList.length == 1) {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.span({}, forList[0]),
                    );
                } else {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.ul({},
                            ...forList.map(forItem =>
                                mk.li({},
                                    mk.span({}, forItem)
                                ),
                            ),
                        ),
                    );
                }
                const url = ref.url;
                const safeUrl = encodeURIComponent(url);
                const hintPanel = mk.aside({
                    class: "ref-hint",
                    id: `ref-hint-for-${safeUrl}`,
                    "data-for": url,
                    "aria-labelled-by": `ref-hint-for-${safeUrl}`,
                },
                    mk.ul({},
                        dfnTextElements,
                        mk.li({},
                            mk.b({}, "URL: "),
                            mk.a({ href: url, class: "ref" }, url),
                        ),
                        mk.li({},
                            mk.b({}, "Type: "),
                            mk.span({}, `${ref.type}`),
                        ),
                        mk.li({},
                            mk.b({}, "Spec: "),
                            mk.span({}, `${ref.spec ? ref.spec : ''}`),
                        ),
                        forListElements
                    ),
                );
                hintPanel.forLink = link;
                setupRefHintEventListeners(link, hintPanel);
                return hintPanel;
            }

            function hideAllRefHints() {
                queryAll(".ref-hint").forEach(el => hideRefHint(el));
            }

            function hideRefHint(refHint) {
                const link = refHint.forLink;
                link.setAttribute("aria-expanded", "false");
                if (refHint.teardownEventListeners) {
                    refHint.teardownEventListeners();
                }
                refHint.remove();
            }

            function showRefHint(link) {
                if (link.classList.contains("dfn-link")) return;
                const url = link.getAttribute("href");
                const refHintKey = link.getAttribute("data-refhint-key");
                let key = url;
                if (refHintKey) {
                    key = refHintKey + "_" + url;
                }
                const ref = refsData[key];
                if (!ref) return;

                hideAllRefHints(); // Only display one at this time.

                const refHint = mkRefHint(link, ref);
                append(document.body, refHint);
                link.setAttribute("aria-expanded", "true");
                positionRefHint(refHint);
            }

            function setupRefHintEventListeners(link, refHint) {
                if (refHint.teardownEventListeners) return;
                // Add event handlers to hide the refHint after the user moves away
                // from both the link and refHint, if not hovering either within one second.
                let timeout = null;
                const startHidingRefHint = (event) => {
                    if (timeout) {
                        clearTimeout(timeout);
                    }
                    timeout = setTimeout(() => {
                        hideRefHint(refHint);
                    }, 1000);
                }
                const resetHidingRefHint = (event) => {
                    if (timeout) clearTimeout(timeout);
                    timeout = null;
                };
                link.addEventListener("mouseleave", startHidingRefHint);
                link.addEventListener("mouseenter", resetHidingRefHint);
                link.addEventListener("blur", startHidingRefHint);
                link.addEventListener("focus", resetHidingRefHint);
                refHint.addEventListener("mouseleave", startHidingRefHint);
                refHint.addEventListener("mouseenter", resetHidingRefHint);
                refHint.addEventListener("blur", startHidingRefHint);
                refHint.addEventListener("focus", resetHidingRefHint);

                refHint.teardownEventListeners = () => {
                    // remove event listeners
                    resetHidingRefHint();
                    link.removeEventListener("mouseleave", startHidingRefHint);
                    link.removeEventListener("mouseenter", resetHidingRefHint);
                    link.removeEventListener("blur", startHidingRefHint);
                    link.removeEventListener("focus", resetHidingRefHint);
                    refHint.removeEventListener("mouseleave", startHidingRefHint);
                    refHint.removeEventListener("mouseenter", resetHidingRefHint);
                    refHint.removeEventListener("blur", startHidingRefHint);
                    refHint.removeEventListener("focus", resetHidingRefHint);
                };
            }

            function positionRefHint(refHint) {
                const link = refHint.forLink;
                const linkPos = getBounds(link);
                refHint.style.top = linkPos.bottom + "px";
                refHint.style.left = linkPos.left + "px";

                const panelPos = refHint.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
                    refHint.style.left = newLeft + "px";
                }
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function showRefHintListener(e) {
                // If the target isn't in a link (or is a link),
                // just ignore it.
                let link = e.target.closest("a");
                if (!link) return;

                // If the target is in a ref-hint panel
                // (aka a link in the already-open one),
                // also just ignore it.
                if (link.closest(".ref-hint")) return;

                // Otherwise, show the panel for the link.
                showRefHint(link);
            }

            function hideAllHintsListener(e) {
                // If the click is inside a ref-hint panel, ignore it.
                if (e.target.closest(".ref-hint")) return;
                // Otherwise, close all the current panels.
                hideAllRefHints();
            }

            document.addEventListener("DOMContentLoaded", () => {
                document.body.addEventListener("mousedown", showRefHintListener);
                document.body.addEventListener("focus", showRefHintListener);

                document.body.addEventListener("click", hideAllHintsListener);
            });

            window.addEventListener("resize", () => {
                // Hide any open ref hint.
                hideAllRefHints();
            });
        }
    </script>
    <script>/* Boilerplate: script-var-click-highlighting */
        "use strict";
        {
            /*
            Color-choosing design:
            
            * Colors are ordered by goodness.
            * On clicking a var, give it the earliest color
                with the lowest usage in the algorithm.
            * On re-clicking, re-use the var's most recent color
                if that's not currently being used elsewhere.
            */

            const COLOR_COUNT = 7;

            document.addEventListener("click", e => {
                if (e.target.nodeName == "VAR") {
                    highlightSameAlgoVars(e.target);
                }
            });

            function highlightSameAlgoVars(v) {
                // Find the algorithm container.
                let algoContainer = findAlgoContainer(v);

                // Not highlighting document-global vars,
                // too likely to be unrelated.
                if (algoContainer == null) return;

                const varName = nameFromVar(v);
                if (!v.hasAttribute("data-var-color")) {
                    const newColor = chooseHighlightColor(algoContainer, v);
                    for (const el of algoContainer.querySelectorAll("var")) {
                        if (nameFromVar(el) == varName) {
                            el.setAttribute("data-var-color", newColor);
                            el.setAttribute("data-var-last-color", newColor);
                        }
                    }
                } else {
                    for (const el of algoContainer.querySelectorAll("var")) {
                        if (nameFromVar(el) == varName) {
                            el.removeAttribute("data-var-color");
                        }
                    }
                }
            }
            function findAlgoContainer(el) {
                while (el != document.body) {
                    if (el.hasAttribute("data-algorithm")) return el;
                    el = el.parentNode;
                }
                return null;
            }
            function nameFromVar(el) {
                return el.textContent.replace(/(\s|\xa0)+/g, " ").trim();
            }
            function colorCountsFromContainer(container) {
                const namesFromColor = Array.from({ length: COLOR_COUNT }, x => new Set());
                for (let v of container.querySelectorAll("var[data-var-color]")) {
                    let color = +v.getAttribute("data-var-color");
                    namesFromColor[color].add(nameFromVar(v));
                }

                return namesFromColor.map(x => x.size);
            }
            function leastUsedColor(colors) {
                // Find the earliest color with the lowest count.
                let minCount = Infinity;
                let minColor = null;
                for (var i = 0; i < colors.length; i++) {
                    if (colors[i] < minCount) {
                        minColor = i;
                        minCount = colors[i];
                    }
                }
                return minColor;
            }
            function chooseHighlightColor(container, v) {
                const colorCounts = colorCountsFromContainer(container);
                if (v.hasAttribute("data-var-last-color")) {
                    let color = +v.getAttribute("data-var-last-color");
                    if (colorCounts[color] == 0) return color;
                }
                return leastUsedColor(colorCounts);
            }
        }
    </script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
