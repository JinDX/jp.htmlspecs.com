<!DOCTYPE html>
<html lang="ja-JP">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <!-- <meta name="generator" content="ReSpec 35.3.1"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        span.example-title {
            text-transform: none
        }

        :is(aside, div).example,
        div.illegal-example {
            padding: .5em;
            margin: 1em 0;
            position: relative;
            clear: both
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: #000
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff
        }
    </style>
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-color: var(--warning-border, #f11);
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
            background: var(--warning-bg, #fbe9e9);
            color: #000;
            color: var(--text, #000)
        }

        .warning-title:before {
            content: "⚠";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            background: var(--indextable-hover-bg, #fff);
            color: #000;
            color: var(--text, #000);
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 1em 3em -.4em var(--tocsidebar-shadow, rgba(0, 0, 0, .3)), 0 0 1px 1px var(--tocsidebar-shadow, rgba(0, 0, 0, .05));
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            border-bottom-color: var(--indextable-hover-bg, #fff);
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1;
            border-bottom-color: var(--indextable-hover-bg, #a2a9b1)
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            color: var(--text, #000);
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333;
            color: var(--text, #333)
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>

    <title>ポータブル・ネットワーク・グラフィックス（PNG）仕様書（第3版）</title>



    <style>
        span.chunk {
            color: #622;
        }
    </style>



    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: italic
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>
    <meta name="color-scheme" content="light">
    <meta name="description" content="This document describes PNG (Portable Network Graphics), an extensible file format for the lossless, portable,
    well-compressed storage of static and animated raster images. PNG provides a patent-free replacement for GIF and can also
    replace many common uses of TIFF. Indexed-color, greyscale, and truecolor images are supported, plus an optional alpha
    channel. Sample depths range from 1 to 16 bits.">
    <link rel="canonical" href="https://www.w3.org/TR/png-3/">
    <style>
        .hljs {
            --base: #fafafa;
            --mono-1: #383a42;
            --mono-2: #686b77;
            --mono-3: #717277;
            --hue-1: #0b76c5;
            --hue-2: #336ae3;
            --hue-3: #a626a4;
            --hue-4: #42803c;
            --hue-5: #ca4706;
            --hue-5-2: #c91243;
            --hue-6: #986801;
            --hue-6-2: #9a6a01
        }

        @media (prefers-color-scheme:dark) {
            .hljs {
                --base: #282c34;
                --mono-1: #abb2bf;
                --mono-2: #818896;
                --mono-3: #5c6370;
                --hue-1: #56b6c2;
                --hue-2: #61aeee;
                --hue-3: #c678dd;
                --hue-4: #98c379;
                --hue-5: #e06c75;
                --hue-5-2: #be5046;
                --hue-6: #d19a66;
                --hue-6-2: #e6c07b
            }
        }

        .hljs {
            display: block;
            overflow-x: auto;
            padding: .5em;
            color: #383a42;
            color: var(--mono-1, #383a42);
            background: #fafafa;
            background: var(--base, #fafafa)
        }

        .hljs-comment,
        .hljs-quote {
            color: #717277;
            color: var(--mono-3, #717277);
            font-style: italic
        }

        .hljs-doctag,
        .hljs-formula,
        .hljs-keyword {
            color: #a626a4;
            color: var(--hue-3, #a626a4)
        }

        .hljs-deletion,
        .hljs-name,
        .hljs-section,
        .hljs-selector-tag,
        .hljs-subst {
            color: #ca4706;
            color: var(--hue-5, #ca4706);
            font-weight: 700
        }

        .hljs-literal {
            color: #0b76c5;
            color: var(--hue-1, #0b76c5)
        }

        .hljs-addition,
        .hljs-attribute,
        .hljs-meta-string,
        .hljs-regexp,
        .hljs-string {
            color: #42803c;
            color: var(--hue-4, #42803c)
        }

        .hljs-built_in,
        .hljs-class .hljs-title {
            color: #9a6a01;
            color: var(--hue-6-2, #9a6a01)
        }

        .hljs-attr,
        .hljs-number,
        .hljs-selector-attr,
        .hljs-selector-class,
        .hljs-selector-pseudo,
        .hljs-template-variable,
        .hljs-type,
        .hljs-variable {
            color: #986801;
            color: var(--hue-6, #986801)
        }

        .hljs-bullet,
        .hljs-link,
        .hljs-meta,
        .hljs-selector-id,
        .hljs-symbol,
        .hljs-title {
            color: #336ae3;
            color: var(--hue-2, #336ae3)
        }

        .hljs-emphasis {
            font-style: italic
        }

        .hljs-strong {
            font-weight: 700
        }

        .hljs-link {
            text-decoration: underline
        }
    </style>
    <style>
        var:hover {
            text-decoration: underline;
            cursor: pointer
        }

        var.respec-hl {
            color: var(--color, #000);
            background-color: var(--bg-color);
            box-shadow: 0 0 0 2px var(--bg-color)
        }

        @media (prefers-color-scheme:dark) {
            var.respec-hl {
                filter: saturate(.9) brightness(.9)
            }
        }

        var.respec-hl-c1 {
            --bg-color: #f4d200
        }

        var.respec-hl-c2 {
            --bg-color: #ff87a2
        }

        var.respec-hl-c3 {
            --bg-color: #96e885
        }

        var.respec-hl-c4 {
            --bg-color: #3eeed2
        }

        var.respec-hl-c5 {
            --bg-color: #eacfb6
        }

        var.respec-hl-c6 {
            --bg-color: #82ddff
        }

        var.respec-hl-c7 {
            --bg-color: #ffbcf2
        }

        @media print {
            var.respec-hl {
                background: 0 0;
                color: #000;
                box-shadow: unset
            }
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #222
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #222;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "group": "png",
  "specStatus": "REC",
  "publishDate": "2025-06-24",
  "crEnd": "2025-05-13",
  prEnd: "2025-05-29",
  "implementationReportURI": "https://w3c.github.io/png/Implementation_Report_3e/",
  "shortName": "png-3",
  "copyrightStart": "1996",
  "previousPublishDate": "2025-05-15",
  "previousMaturity": "PR",
  "edDraftURI": "https://w3c.github.io/png/",
  "github": {
    "repoURL": "https://github.com/w3c/png",
    "branch": "main"
  },
  "extraCSS": [
    "https://dev.w3.org/2009/dap/ReSpec.js/css/respec.css"
  ],
  "editors": [
    {
      "name": "Chris Blume",
      "url": "https://www.programmax.net",
      "company": "W3C Invited Experts",
      "w3cid": 127631
    },
    {
      "name": "Pierre-Anthony Lemieux",
      "company": "MovieLabs",
      "companyURL": "https://movielabs.com/",
      "url": "mailto:pal@palemieux.com",
      "w3cid": 57073
    },
    {
      "name": "Chris Lilley",
      "url": "https://svgees.us",
      "company": "W3C",
      "companyURL": "https://www.w3.org",
      "w3cid": 1438
    },
    {
      "name": "Chris Needham",
      "url": "https://chrisneedham.com/about",
      "w3cid": 67414
    },
    {
      "name": "Leonard Rosenthol",
      "company": "Adobe Inc.",
      "companyURL": "https://www.adobe.com",
      "w3cid": 42485
    },
    {
      "name": "Chris Arley Seeger",
      "company": "NBCUniversal, LLC a subsidiary of Comcast Corporation",
      "companyURL": "https://www.xfinity.com",
      "w3cid": 125844
    },
    {
      "name": "Simon Thompson",
      "company": "British Broadcasting Corporation",
      "companyURL": "https://www.bbc.co.uk",
      "w3cid": 100939
    },
    {
      "name": "Cosmin Truta",
      "company": "W3C Invited Experts",
      "w3cid": 160971
    }
  ],
  "formerEditors": [
    {
      "name": "Thomas Boutell"
    },
    {
      "name": "Adam M. Costello"
    },
    {
      "name": "David Duce"
    },
    {
      "name": "Tom Lane"
    },
    {
      "name": "Glenn Randers-Pehrson"
    }
  ],
  "authors": [
    {
      "name": "Mark Adler",
      "url": "https://en.wikipedia.org/wiki/Mark_Adler"
    },
    {
      "name": "Thomas Boutell",
      "url": "https://boutell.dev/"
    },
    {
      "name": "Christian Brunschen"
    },
    {
      "name": "Adam M. Costello",
      "url": "http://www.nicemice.net/amc/"
    },
    {
      "name": "Lee Daniel Crocker"
    },
    {
      "name": "Andreas Dilger",
      "url": "http://www-mddsp.enel.ucalgary.ca/People/adilger/"
    },
    {
      "name": "Oliver Fromme",
      "url": "https://www.fromme.com/"
    },
    {
      "name": "Jean-loup Gailly",
      "url": "http://gailly.net/"
    },
    {
      "name": "Phil Harvey"
    },
    {
      "name": "Chris Herborth"
    },
    {
      "name": "Alex Jakulin"
    },
    {
      "name": "Neal Kettler"
    },
    {
      "name": "Tom Lane"
    },
    {
      "name": "Alexander Lehmann"
    },
    {
      "name": "Chris Lilley",
      "url": "https://svgees.us",
      "company": "W3C",
      "companyURL": "https://www.w3.org"
    },
    {
      "name": "Dave Martindale"
    },
    {
      "name": "Owen Mortensen"
    },
    {
      "name": "Stuart Parmenter"
    },
    {
      "name": "Keith S. Pickens"
    },
    {
      "name": "Robert P. Poole"
    },
    {
      "name": "Glenn Randers-Pehrson"
    },
    {
      "name": "Greg Roelofs",
      "url": "http://www.gregroelofs.com/"
    },
    {
      "name": "Willem van Schaik"
    },
    {
      "name": "Guy Schalnat"
    },
    {
      "name": "Paul Schmidt"
    },
    {
      "name": "Andrew Smith"
    },
    {
      "name": "Michael Stokes"
    },
    {
      "name": "Vladimir Vukicevic"
    },
    {
      "name": "Tim Wegner"
    },
    {
      "name": "Jeremy Wohl"
    }
  ],
  "wg": "Portable Network Graphics (PNG) Working Group",
  "wgURI": "https://www.w3.org/groups/wg/png",
  "wgPublicList": "public-png",
  "wgPatentURI": "https://www.w3.org/groups/wg/png/ipr",
  "lint": {
    "informative-dfn": false
  },
  "xref": [
    "i18n-glossary"
  ],
  "localBiblio": {
    "CIPA-DC-008": {
      "title": "Exchangeable image file format for digital still cameras: Exif Version 2.32",
      "href": "https://www.cipa.jp/std/documents/download_e.html?DC-008-Translation-2019-E",
      "date": "2019-05-17",
      "publisher": "Camera & Imaging Products Association",
      "id": "cipa-dc-008"
    },
    "COLOR-FAQ": {
      "title": "Color FAQ",
      "authors": [
        "Poynton, C."
      ],
      "href": "https://poynton.ca/ColorFAQ.html",
      "date": "2009-10-19",
      "id": "color-faq"
    },
    "CTA-861.3-A": {
      "title": "HDR Static Metadata Extensions (CTA-861.3-A)",
      "publisher": "Consumer Technology Association",
      "date": "2015-01",
      "href": "https://shop.cta.tech/products/cta-861-3",
      "id": "cta-861.3-a"
    },
    "Display-P3": {
      "title": "Display P3",
      "authors": [
        "Apple, Inc"
      ],
      "date": "2022-02",
      "publisher": "ICC",
      "href": "https://www.color.org/chardata/rgb/DisplayP3.xalter",
      "id": "display-p3"
    },
    "ICC-2": {
      "title": "Specification ICC.2:2019 (Profile version 5.0.0 - iccMAX)",
      "date": "2019",
      "href": "https://www.color.org/specification/ICC.2-2019.pdf",
      "publisher": "International Color Consortium",
      "id": "icc-2"
    },
    "GAMMA-FAQ": {
      "title": "Gamma FAQ",
      "authors": [
        "Poynton, C."
      ],
      "href": "https://poynton.ca/GammaFAQ.html",
      "date": "1998-08-04",
      "id": "gamma-faq"
    },
    "HDR10": {
      "title": "HDR10 Media Profile",
      "href": "https://en.wikipedia.org/wiki/HDR10",
      "id": "hdr10"
    },
    "HDR-Static-Meta": {
      "title": "On the Calculation and Usage of HDR Static Content Metadata",
      "authors": [
        "Smith, Michael D.",
        "Zink, Michael"
      ],
      "publisher": "Society of Motion Picture and Television Engineers",
      "date": "2021-08-05",
      "href": "https://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=9508136",
      "id": "hdr-static-meta"
    },
    "Hill": {
      "title": "Comparative analysis of the quantization of color spaces on the basis of the CIELAB color-difference formula",
      "authors": [
        "Hill, B.",
        "Roger, Th.",
        "Vorhagen, F.W."
      ],
      "journal": "ACM Transactions on Graphics, Volume 16, Issue 2, pp. 109–154",
      "date": "1997-04",
      "href": "https://dl.acm.org/doi/10.1145/248210.248212",
      "id": "hill"
    },
    "ISO-3309": {
      "title": "ISO/IEC 3309:1993, Information Technology — Telecommunications and information exchange between systems — High-level data link control (HDLC) procedures — Frame structure.",
      "date": "1993",
      "publisher": "ISO",
      "id": "iso-3309"
    },
    "ISO_8859-1": {
      "title": "ISO/IEC 8859-1:1998, Information technology — 8-bit single-byte coded graphic character sets — Part 1: Latin alphabet No. 1.",
      "date": "1998",
      "publisher": "ISO",
      "id": "iso_8859-1"
    },
    "ISO_9899": {
      "title": "ISO/IEC 9899:2018 Information technology — Programming languages — C",
      "href": "https://www.iso.org/standard/74528.html",
      "date": "2018-6",
      "publisher": "ISO",
      "id": "iso_9899"
    },
    "ISO_15076-1": {
      "title": "ISO 15076-1:2010 Image technology colour management — Architecture, profile format and data structure — Part 1: Based on ICC.1:2010",
      "href": "https://www.iso.org/standard/54754.html",
      "date": "2010-12",
      "publisher": "ISO",
      "id": "iso_15076-1"
    },
    "ISO_20677-1": {
      "title": "ISO 20677:2019 Image technology colour management — Extensions to architecture, profile format and data structure",
      "href": "https://www.iso.org/standard/68806.html",
      "date": "2019-02",
      "publisher": "ISO"
    },
    "ITU-R-BT.709": {
      "title": "ITU-R BT.709, SERIES BT: BROADCASTING SERVICE (TELEVISION). Parameter values for the HDTV standards for production and international programme exchange",
      "publisher": "ITU",
      "date": "2015-06",
      "href": "https://www.itu.int/rec/R-REC-BT.709",
      "id": "itu-r-bt.709"
    },
    "ITU-R-BT.2020": {
      "title": "Parameter values for ultra-high definition television systems for production and international programme exchange",
      "publisher": "ITU",
      "href": "https://www.itu.int/rec/R-REC-BT.2020",
      "id": "itu-r-bt.2020"
    },
    "ITU-R-BT.2100": {
      "title": "ITU-R BT.2100, SERIES BT: BROADCASTING SERVICE (TELEVISION). Image parameter values for high dynamic range television for use in production and international programme exchange",
      "publisher": "ITU",
      "date": "2018-07",
      "href": "https://www.itu.int/rec/R-REC-BT.2100",
      "id": "itu-r-bt.2100"
    },
    "ITU-R-BT.2390": {
      "title": "High dynamic range television for production and international programme exchange",
      "publisher": "ITU",
      "href": "https://www.itu.int/dms_pub/itu-r/opb/rep/R-REP-BT.2390-11-2023-PDF-E.pdf",
      "id": "itu-r-bt.2390"
    },
    "ITU-T-H.273": {
      "title": "ITU-T H.273, SERIES H: AUDIOVISUAL AND MULTIMEDIA SYSTEMS Infrastructure of audiovisual services – Coding of moving video. Coding-independent code points for video signal type identification",
      "publisher": "ITU",
      "date": "2024-07-14",
      "href": "https://www.itu.int/rec/T-REC-H.273",
      "id": "itu-t-h.273"
    },
    "ITU-T-V.42": {
      "title": "ITU-T V.42, SERIES V: DATA COMMUNICATION OVER THE TELEPHONE NETWORK. Error-correcting procedures for DCEs using asynchronous-to-synchronous conversion",
      "href": "https://www.itu.int/rec/T-REC-V.42-200203-I/en",
      "date": "2002-03-29",
      "publisher": "ITU",
      "id": "itu-t-v.42"
    },
    "Kasson": {
      "title": "An Analysis of Selected Computer Interchange Color Spaces",
      "authors": [
        "Kasson, J.",
        "W. Plouffe"
      ],
      "journal": "ACM Transactions on Graphics, vol. 11, no. 4, pp. 373-405",
      "date": "1992",
      "href": "https://dl.acm.org/doi/abs/10.1145/146443.146479",
      "id": "kasson"
    },
    "Paeth": {
      "authors": [
        "Paeth, A.W"
      ],
      "title": "Image File Compression Made Easy, in Graphics Gems II, pp. 93-100",
      "publisher": "Academic Press",
      "date": "1991",
      "isbn": "0-12-064481-9",
      "href": "https://www.sciencedirect.com/science/article/pii/B9780080507545500293",
      "id": "paeth"
    },
    "PNG-EXTENSIONS": {
      "title": "Extensions to the PNG Third Edition Specification, Version 1.6.0",
      "publisher": "W3C",
      "date": "2021",
      "href": "https://w3c.github.io/png/extensions/Overview.html",
      "id": "png-extensions"
    },
    "PostScript": {
      "title": "PostScript Language Reference Manual",
      "authors": [
        "Adobe Systems Incorporated"
      ],
      "publisher": "Addison-Wesley",
      "date": "1990",
      "edition": "2",
      "isbn": "0-201-18127-4",
      "id": "postscript"
    },
    "ROELOFS": {
      "title": "PNG: The Definitive Guide",
      "authors": [
        "Roelofs, G."
      ],
      "publisher": "O'Reilly &amp; Associates Inc",
      "isbn": "1-56592-542-4",
      "href": "http://www.libpng.org/pub/png/pngbook.html",
      "date": "1999-06-11",
      "id": "roelofs"
    },
    "SMPTE-170M": {
      "title": "Television — Composite Analog Video Signal — NTSC for Studio Applications",
      "publisher": "Society of Motion Picture and Television Engineers",
      "date": "2004-11-30",
      "href": "https://standards.globalspec.com/std/892300/SMPTE%20ST%20170M",
      "id": "smpte-170m"
    },
    "SMPTE-RP-177": {
      "title": "Derivation of Basic Television Color Equations",
      "publisher": "Society of Motion Picture and Television Engineers",
      "date": "1 November 1993",
      "href": "https://standards.globalspec.com/std/1284890/smpte-rp-177",
      "id": "smpte-rp-177"
    },
    "SMPTE-ST-2067-21": {
      "title": "Interoperable Master Format — Application #2E",
      "publisher": "Society of Motion Picture and Television Engineers",
      "date": "2023-02-20",
      "href": "https://doi.org/10.5594/SMPTE.ST2067-21.2023",
      "id": "smpte-st-2067-21"
    },
    "SMPTE-RP-2077": {
      "title": "Full-Range Image Mapping",
      "publisher": "Society of Motion Picture and Television Engineers",
      "date": "2013-01-01",
      "href": "https://doi.org/10.5594/SMPTE.RP2077.2013",
      "id": "smpte-rp-2077"
    },
    "SMPTE-ST-2086": {
      "title": "Mastering Display Color Volume Metadata Supporting High Luminance and Wide Color Gamut Images",
      "publisher": "Society of Motion Picture and Television Engineers",
      "date": "27 April 2018",
      "href": "https://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=8353899",
      "id": "smpte-st-2086"
    },
    "TIFF-6.0": {
      "href": "https://www.loc.gov/preservation/digital/formats/fdd/fdd000022.shtml",
      "title": "TIFF Revision 6.0",
      "date": "3 June 1992",
      "id": "tiff-6.0"
    },
    "Ziv-Lempel": {
      "authors": [
        "J. Ziv",
        "A. Lempel"
      ],
      "title": "A Universal Algorithm for Sequential Data Compression, IEEE Transactions on Information Theory, vol. IT-23, no. 3, pp. 337 - 343",
      "date": "1977-05",
      "publisher": "IEEE",
      "href": "https://ieeexplore.ieee.org/document/1055714",
      "id": "ziv-lempel"
    },
    "EBU-R-103": {
      "title": "Video Signal Tolerance in Digital Television Systems",
      "publisher": "EBU",
      "date": "2020-05",
      "href": "https://tech.ebu.ch/docs/r/r103.pdf",
      "id": "ebu-r-103"
    },
    "ITU-T-Series-H-Supplement-19": {
      "title": "Series H: Audio Visual and Multimedia Systems - Usage of video signal type code points",
      "publisher": "ITU",
      "date": "2021-04",
      "href": "https://www.itu.int/ITU-T/recommendations/rec.aspx?rec=14652",
      "id": "itu-t-series-h-supplement-19"
    }
  },
  "publishISODate": "2025-06-24T00:00:00.000Z",
  "generatedSubtitle": "W3C Recommendation 24 June 2025"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-REC">
</head>

<body class="h-entry" data-cite="i18n-glossary">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.w3.org/"><img crossorigin="" alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a></p>
        <h1 id="title" class="title">ポータブル・ネットワーク・グラフィックス（PNG）仕様書（第3版）</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#REC">W3C 勧告</a> <time class="dt-published"
                datetime="2025-06-24">2025年6月24日</time></p>
        <details open="">
            <summary>本ドキュメントの詳細</summary>
            <dl>
                <dt>このバージョン：</dt>
                <dd>
                    <a class="u-url"
                        href="https://www.w3.org/TR/2025/REC-png-3-20250624/">https://www.w3.org/TR/2025/REC-png-3-20250624/</a>
                </dd>
                <dt>最新公開バージョン：</dt>
                <dd>
                    <a href="https://www.w3.org/TR/png-3/">https://www.w3.org/TR/png-3/</a>
                </dd>
                <dt>最新編集者ドラフト：</dt>
                <dd><a href="https://w3c.github.io/png/">https://w3c.github.io/png/</a></dd>
                <dt>履歴：</dt>
                <dd>
                    <a
                        href="https://www.w3.org/standards/history/png-3/">https://www.w3.org/standards/history/png-3/</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/png/commits/main">コミット履歴</a>
                </dd>

                <dt>実装レポート：</dt>
                <dd>
                    <a
                        href="https://w3c.github.io/png/Implementation_Report_3e/">https://w3c.github.io/png/Implementation_Report_3e/</a>
                </dd>



                <dt>編集者：</dt>
                <dd class="editor p-author h-card vcard" data-editor-id="127631">
                    <a class="u-url url p-name fn" href="https://www.programmax.net">Chris Blume</a> (<span
                        class="p-org org h-org">W3C 招待専門家</span>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="57073">
                    <a class="ed_mailto u-email email p-name" href="mailto:pal@palemieux.com">Pierre-Anthony Lemieux</a>
                    (<a class="p-org org h-org" href="https://movielabs.com/">MovieLabs</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="1438">
                    <a class="u-url url p-name fn" href="https://svgees.us">Chris Lilley</a> (<a class="p-org org h-org"
                        href="https://www.w3.org">W3C</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="67414">
                    <a class="u-url url p-name fn" href="https://chrisneedham.com/about">Chris Needham</a>
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="42485">
                    <span class="p-name fn">Leonard Rosenthol</span> (<a class="p-org org h-org"
                        href="https://www.adobe.com">Adobe Inc.</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="125844">
                    <span class="p-name fn">Chris Arley Seeger</span> (<a class="p-org org h-org"
                        href="https://www.xfinity.com">NBCUniversal, LLC（Comcast Corporationの子会社）</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="100939">
                    <span class="p-name fn">Simon Thompson</span> (<a class="p-org org h-org"
                        href="https://www.bbc.co.uk">英国放送協会（BBC）</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="160971">
                    <span class="p-name fn">Cosmin Truta</span> (<span class="p-org org h-org">W3C 招待専門家</span>)
                </dd>
                <dt>
                    以前の編集者：
                </dt>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Thomas Boutell</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Adam M. Costello</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">David Duce</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Tom Lane</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Glenn Randers-Pehrson</span>
                </dd>
                <dt>著者：</dt>
                <dd class="editor p-author h-card vcard">
                    <a class="u-url url p-name fn" href="https://en.wikipedia.org/wiki/Mark_Adler">Mark Adler</a>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <a class="u-url url p-name fn" href="https://boutell.dev/">Thomas Boutell</a>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Christian Brunschen</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <a class="u-url url p-name fn" href="http://www.nicemice.net/amc/">Adam M. Costello</a>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Lee Daniel Crocker</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <a class="u-url url p-name fn" href="http://www-mddsp.enel.ucalgary.ca/People/adilger/">Andreas
                        Dilger</a>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <a class="u-url url p-name fn" href="https://www.fromme.com/">Oliver Fromme</a>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <a class="u-url url p-name fn" href="http://gailly.net/">Jean-loup Gailly</a>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Phil Harvey</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Chris Herborth</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Alex Jakulin</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Neal Kettler</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Tom Lane</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Alexander Lehmann</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <a class="u-url url p-name fn" href="https://svgees.us">Chris Lilley</a> (<a class="p-org org h-org"
                        href="https://www.w3.org">W3C</a>)
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Dave Martindale</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Owen Mortensen</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Stuart Parmenter</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Keith S. Pickens</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Robert P. Poole</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Glenn Randers-Pehrson</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <a class="u-url url p-name fn" href="http://www.gregroelofs.com/">Greg Roelofs</a>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Willem van Schaik</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Guy Schalnat</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Paul Schmidt</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Andrew Smith</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Michael Stokes</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Vladimir Vukicevic</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Tim Wegner</span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Jeremy Wohl</span>
                </dd>
                <dt>フィードバック：</dt>
                <dd>
                    <a href="https://github.com/w3c/png/">GitHub w3c/png</a>
                    (<a href="https://github.com/w3c/png/pulls/">プルリクエスト</a>,
                    <a href="https://github.com/w3c/png/issues/new/choose">新規イシュー</a>,
                    <a href="https://github.com/w3c/png/issues/">オープンイシュー</a>)
                </dd>
                <dd><a href="mailto:public-png@w3.org?subject=%5Bpng-3%5D%20YOUR%20TOPIC%20HERE">public-png@w3.org</a>
                    件名 <kbd>[png-3] <em>… メッセージのトピック …</em></kbd> (<a rel="discussion"
                        href="https://lists.w3.org/Archives/Public/public-png">アーカイブ</a>)</dd>

                <dt>正誤表：</dt>
                <dd><a
                        href="https://www.w3.org/2025/06/REC-PNG-20250624-errata">https://www.w3.org/2025/06/REC-PNG-20250624-errata</a>
                </dd>
            </dl>
        </details>

        <p>また、<a href="https://www.w3.org/Translations/?technology=png-3"><strong>翻訳</strong></a>もご覧ください。</p>


        <p class="copyright">
            <a href="https://www.w3.org/policies/#copyright">Copyright</a>
            ©
            1996-2025

            <a href="https://www.w3.org/">World Wide Web Consortium</a>.
            <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
            <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>,
            <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/copyright/software-license-2023/"
                title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>概要</h2>
        <p>本書はPNG（ポータブル・ネットワーク・グラフィックス）について説明します。PNGは、<a href="#dfn-lossless" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-lossless-1">ロスレス</a>で移植性に優れ、高効率に圧縮された静止画およびアニメーションラスタ画像の拡張可能なファイルフォーマットです。PNGはGIFの特許フリーな代替となり、TIFFの多くの一般的な用途も置き換えることができます。<a
                href="#3indexedColour" class="internalDFN" data-link-type="dfn"
                id="ref-for-3indexedColour-1">インデックスカラー</a>、<a href="#dfn-greyscale" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-greyscale-1">グレースケール</a>、<a href="#3truecolour" class="internalDFN"
                data-link-type="dfn"
                id="ref-for-3truecolour-1">トゥルーカラー</a>画像、およびオプションのアルファチャンネルをサポートします。サンプルのビット深度は1〜16ビットです。</p>

        <p>PNGは、ワールド・ワイド・ウェブなどオンラインでの閲覧アプリケーションでの利用を想定して設計されており、プログレッシブ表示オプション付きで完全なストリーム配信に対応しています。PNGは堅牢で、ファイル全体の整合性チェックや、一般的な伝送エラーの簡易検出を提供します。また、異種プラットフォーム間での色再現性向上のためカラースペース情報の格納も可能です。
        </p>

        <p>本仕様では、Internet Media Types「image/png」と「image/apng」の2種類を定義します。</p>

    </section>

    <section id="sotd" class="introductory">
        <h2>この文書のステータス</h2>
        <p><em>このセクションは、本書が公開された時点での文書のステータスを示します。現在の<abbr
                    title="World Wide Web Consortium">W3C</abbr>の公開文書や本技術レポートの最新版は、<a
                    href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr>
                    標準・草案インデックス</a>（https://www.w3.org/TR/）でご覧いただけます。</em></p>
        <p>本仕様は国際規格となることを意図していますが、現時点ではまだ国際規格ではありません。本仕様を国際規格として参照することは適切ではありません。</p>

        <p>本書は、<a href="https://www.w3.org/groups/wg/png">Portable Network Graphics (PNG) ワーキンググループ</a>によって、<a
                href="https://www.w3.org/policies/process/20231103/#recs-and-notes">勧告プロセス</a>を用いて勧告として公開されました。</p>

        <p>W3C勧告は、十分な合意形成の後、<abbr title="World Wide Web Consortium">W3C</abbr>とそのメンバーにより承認され、ワーキンググループのメンバーによる<a
                href="https://www.w3.org/policies/patent-policy/#sec-Requirements">ロイヤリティフリー・ライセンス</a>での実装へのコミットメントがあります。
        </p>

        <p>W3Cは本仕様をWebの標準として広く展開することを推奨します。</p>

        <p>
            本書は、<a href="https://www.w3.org/policies/patent-policy/"><abbr
                    title="World Wide Web Consortium">W3C</abbr>特許ポリシー</a>の下で運営されているグループによって作成されました。

            <abbr title="World Wide Web Consortium">W3C</abbr>は、グループ成果物に関連してなされた<a rel="disclosure"
                href="https://www.w3.org/groups/wg/png/ipr">公開特許開示リスト</a>を維持しています。このページには、特許開示の方法も記載されています。ある特許について「<a
                href="https://www.w3.org/policies/patent-policy/#def-essential">必須クレーム</a>」を含むと信じる個人は、<a
                href="https://www.w3.org/policies/patent-policy/#sec-Disclosure">W3C特許ポリシー第6節</a>に従い、その情報を開示しなければなりません。
        </p>
        <p>
            この文書は、<a id="w3c_process_revision" href="https://www.w3.org/policies/process/20231103/">2023年11月3日版 <abbr
                    title="World Wide Web Consortium">W3C</abbr>プロセス文書</a>に準拠しています。
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">目次</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">概要</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">この文書のステータス</a></li>
            <li class="tocline"><a class="tocxref" href="#Introduction"><bdi class="secno">1. </bdi>はじめに</a>
            </li>
            <li class="tocline"><a class="tocxref" href="#1Scope"><bdi class="secno">2. </bdi>適用範囲</a></li>
            <li class="tocline"><a class="tocxref" href="#3Defsandabbrevs"><bdi class="secno">3. </bdi>用語・定義・略語</a></li>
            <li class="tocline"><a class="tocxref" href="#4Concepts"><bdi class="secno">4. </bdi>概念</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#static-and-animated-images"><bdi class="secno">4.1
                            </bdi>静止画像とアニメーション画像</a></li>
                    <li class="tocline"><a class="tocxref" href="#4Concepts.Sourceimage"><bdi class="secno">4.2
                            </bdi>画像</a></li>
                    <li class="tocline"><a class="tocxref" href="#4Concepts.ColourSpaces"><bdi class="secno">4.3
                            </bdi>カラースペース</a></li>
                    <li class="tocline"><a class="tocxref" href="#4Concepts.PNGImageTransformation"><bdi
                                class="secno">4.4 </bdi>参照画像からPNG画像への変換</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#4Concepts.Introduction">はじめに</a></li>
                            <li class="tocline"><a class="tocxref" href="#4Concepts.Implied-alpha"><bdi
                                        class="secno">4.4.1 </bdi><span>アルファ分離</span></a></li>
                            <li class="tocline"><a class="tocxref" href="#4Concepts.Indexing"><bdi class="secno">4.4.2
                                    </bdi>インデックス化</a></li>
                            <li class="tocline"><a class="tocxref" href="#4Concepts.RGBMerging"><bdi class="secno">4.4.3
                                    </bdi><span>RGB結合</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#4Concepts.Alpha-indexing"><bdi
                                        class="secno">4.4.4 </bdi><span>アルファ圧縮</span></a></li>
                            <li class="tocline"><a class="tocxref" href="#4Concepts.Scaling"><bdi class="secno">4.4.5
                                    </bdi><span>サンプル深度のスケーリング</span>
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#4Concepts.PNGImage"><bdi class="secno">4.5
                            </bdi>PNG画像</a></li>
                    <li class="tocline"><a class="tocxref" href="#4Concepts.Encoding"><bdi class="secno">4.6
                            </bdi>PNG画像のエンコード</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#4Concepts.EncodingIntro">はじめに</a></li>
                            <li class="tocline"><a class="tocxref" href="#4Concepts.EncodingPassAbs"><bdi
                                        class="secno">4.6.1 </bdi>パス抽出</a></li>
                            <li class="tocline"><a class="tocxref" href="#4Concepts.EncodingScanlineAbs"><bdi
                                        class="secno">4.6.2 </bdi>スキャンライン直列化</a></li>
                            <li class="tocline"><a class="tocxref" href="#4Concepts.EncodingFiltering"><bdi
                                        class="secno">4.6.3 </bdi>フィルタ処理</a></li>
                            <li class="tocline"><a class="tocxref" href="#4Concepts.EncodingCompression"><bdi
                                        class="secno">4.6.4 </bdi>圧縮</a></li>
                            <li class="tocline"><a class="tocxref" href="#4Concepts.EncodingChunking"><bdi
                                        class="secno">4.6.5 </bdi>チャンク化</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#4Concepts.AncillInfo"><bdi class="secno">4.7
                            </bdi>付加情報</a></li>
                    <li class="tocline"><a class="tocxref" href="#4Concepts.Format"><bdi class="secno">4.8
                            </bdi>PNGデータストリーム</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#4Concepts.FormatChunks"><bdi
                                        class="secno">4.8.1 </bdi>チャンク</a></li>
                            <li class="tocline"><a class="tocxref" href="#4Concepts.FormatTypes"><bdi
                                        class="secno">4.8.2 </bdi>チャンクタイプ</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#apng-frame-based-animation"><bdi class="secno">4.9
                            </bdi><abbr title="Animated PNG">APNG</abbr>：フレームベースアニメーション</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#introduction-0">はじめに</a></li>
                            <li class="tocline"><a class="tocxref" href="#structure"><bdi class="secno">4.9.1
                                    </bdi>構造</a></li>
                            <li class="tocline"><a class="tocxref" href="#4Concepts.APNGSequence"><bdi
                                        class="secno">4.9.2 </bdi>シーケンス番号</a></li>
                            <li class="tocline"><a class="tocxref" href="#apng-output-buffer"><bdi class="secno">4.9.3
                                    </bdi>出力バッファ</a></li>
                            <li class="tocline"><a class="tocxref" href="#apng-canvas"><bdi class="secno">4.9.4
                                    </bdi>キャンバス</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#4Concepts.Errors"><bdi class="secno">4.10
                            </bdi>エラー処理</a></li>
                    <li class="tocline"><a class="tocxref" href="#4Concepts.Registration"><bdi class="secno">4.11
                            </bdi>拡張</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#5DataRep"><bdi class="secno">5. </bdi>データストリーム構造</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#5Introduction"><bdi class="secno">5.1
                            </bdi>PNGデータストリーム</a></li>
                    <li class="tocline"><a class="tocxref" href="#3PNGsignature"><bdi class="secno">5.2
                            </bdi>PNGシグネチャ</a></li>
                    <li class="tocline"><a class="tocxref" href="#5Chunk-layout"><bdi class="secno">5.3
                            </bdi>チャンクレイアウト</a></li>
                    <li class="tocline"><a class="tocxref" href="#5Chunk-naming-conventions"><bdi class="secno">5.4
                            </bdi>チャンクの命名規則</a></li>
                    <li class="tocline"><a class="tocxref" href="#5CRC-algorithm"><bdi class="secno">5.5 </bdi><abbr
                                title="Cyclic Redundancy Code">CRC</abbr>アルゴリズム</a></li>
                    <li class="tocline"><a class="tocxref" href="#5ChunkOrdering"><bdi class="secno">5.6
                            </bdi>チャンク順序</a></li>
                    <li class="tocline"><a class="tocxref" href="#sec-defining-new-chunks"><bdi class="secno">5.7
                            </bdi>チャンクの定義</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#sec-defining-public-chunks-general"><bdi
                                        class="secno">5.7.1 </bdi>一般</a></li>
                            <li class="tocline"><a class="tocxref" href="#sec-defining-public-chunks"><bdi
                                        class="secno">5.7.2 </bdi>パブリックチャンクの定義</a></li>
                            <li class="tocline"><a class="tocxref" href="#sec-defining-private-chunks"><bdi
                                        class="secno">5.7.3 </bdi>プライベートチャンクの定義</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#sec-field-value-extensibility"><bdi class="secno">5.8
                            </bdi>プライベートフィールド値</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#6Transformation"><bdi class="secno">6.
                    </bdi>参照画像からPNG画像への変換</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#6Colour-values"><bdi class="secno">6.1
                            </bdi>カラータイプと値</a></li>
                    <li class="tocline"><a class="tocxref" href="#6AlphaRepresentation"><bdi class="secno">6.2
                            </bdi>アルファ表現</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#7Transformation"><bdi class="secno">7.
                    </bdi>PNG画像をPNGデータストリームとしてエンコード</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#7Integers-and-byte-order"><bdi class="secno">7.1
                            </bdi>整数とバイト順</a></li>
                    <li class="tocline"><a class="tocxref" href="#7Scanline"><bdi class="secno">7.2 </bdi>スキャンライン</a>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#7Filtering"><bdi class="secno">7.3 </bdi>フィルタ処理</a>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#8Interlace"><bdi class="secno">8. </bdi>インターレースとパス抽出</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#8InterlaceIntro">はじめに</a></li>
                    <li class="tocline"><a class="tocxref" href="#8InterlaceMethods"><bdi class="secno">8.1
                            </bdi>インターレース方式</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#9Filters"><bdi class="secno">9. </bdi>フィルタ処理</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#9FtIntro"><bdi class="secno">9.1
                            </bdi>フィルタ方式とフィルタタイプ</a></li>
                    <li class="tocline"><a class="tocxref" href="#9Filter-types"><bdi class="secno">9.2
                            </bdi>フィルタ方式0のフィルタタイプ</a></li>
                    <li class="tocline"><a class="tocxref" href="#9Filter-type-3-Average"><bdi class="secno">9.3
                            </bdi>フィルタタイプ3：Average</a></li>
                    <li class="tocline"><a class="tocxref" href="#9Filter-type-4-Paeth"><bdi class="secno">9.4
                            </bdi>フィルタタイプ4：Paeth</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#10Compression"><bdi class="secno">10. </bdi>圧縮</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#10CompressionCM0"><bdi class="secno">10.1
                            </bdi>圧縮方式0</a></li>
                    <li class="tocline"><a class="tocxref" href="#10CompressionFSL"><bdi class="secno">10.2
                            </bdi>フィルタ済みスキャンライン列の圧縮</a></li>
                    <li class="tocline"><a class="tocxref" href="#10CompressionOtherUses"><bdi class="secno">10.3
                            </bdi>その他の圧縮の用途</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#11Chunks"><bdi class="secno">11. </bdi>チャンク仕様</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#11Introduction"><bdi class="secno">11.1
                            </bdi>一般事項</a></li>
                    <li class="tocline"><a class="tocxref" href="#11Critical-chunks"><bdi class="secno">11.2
                            </bdi>クリティカルチャンク</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#11CcGen">はじめに</a></li>
                            <li class="tocline"><a class="tocxref" href="#11IHDR"><bdi class="secno">11.2.1 </bdi><span
                                        class="chunk">IHDR</span> 画像ヘッダ</a></li>
                            <li class="tocline"><a class="tocxref" href="#11PLTE"><bdi class="secno">11.2.2 </bdi><span
                                        class="chunk">PLTE</span> パレット</a></li>
                            <li class="tocline"><a class="tocxref" href="#11IDAT"><bdi class="secno">11.2.3 </bdi><span
                                        class="chunk">IDAT</span> 画像データ</a></li>
                            <li class="tocline"><a class="tocxref" href="#11IEND"><bdi class="secno">11.2.4 </bdi><span
                                        class="chunk">IEND</span> 画像終端</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#11Ancillary-chunks"><bdi class="secno">11.3
                            </bdi>補助チャンク</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#11AcGen">はじめに</a></li>
                            <li class="tocline"><a class="tocxref" href="#11transinfo"><bdi class="secno">11.3.1
                                    </bdi>透過情報</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#11tRNS"><bdi class="secno">11.3.1.1
                                            </bdi><span class="chunk">tRNS</span> 透過</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#11addnlcolinfo"><bdi class="secno">11.3.2
                                    </bdi>カラースペース情報</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#11cHRM"><bdi class="secno">11.3.2.1
                                            </bdi><span class="chunk">cHRM</span> 基本色度とホワイトポイント</a></li>
                                    <li class="tocline"><a class="tocxref" href="#11gAMA"><bdi class="secno">11.3.2.2
                                            </bdi><span class="chunk">gAMA</span> 画像ガンマ</a></li>
                                    <li class="tocline"><a class="tocxref" href="#11iCCP"><bdi class="secno">11.3.2.3
                                            </bdi><span class="chunk">iCCP</span> 埋め込みICCプロファイル</a></li>
                                    <li class="tocline"><a class="tocxref" href="#11sBIT"><bdi class="secno">11.3.2.4
                                            </bdi><span class="chunk">sBIT</span> 有効ビット数</a></li>
                                    <li class="tocline"><a class="tocxref" href="#srgb-standard-colour-space"><bdi
                                                class="secno">11.3.2.5 </bdi><span class="chunk">sRGB</span>
                                            標準RGBカラースペース</a></li>
                                    <li class="tocline"><a class="tocxref" href="#cICP-chunk"><bdi
                                                class="secno">11.3.2.6 </bdi><span class="chunk">cICP</span>
                                            動画信号種別識別のためのコーディング非依存コードポイント</a></li>
                                    <li class="tocline"><a class="tocxref" href="#mDCV-chunk"><bdi
                                                class="secno">11.3.2.7 </bdi><span class="chunk">mDCV</span>
                                            マスタリングディスプレイ色域</a></li>
                                    <li class="tocline"><a class="tocxref" href="#cLLI-chunk"><bdi
                                                class="secno">11.3.2.8 </bdi><span class="chunk">cLLI</span>
                                            コンテンツ光度情報</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#11textinfo"><bdi class="secno">11.3.3
                                    </bdi>テキスト情報</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#11textIntro">はじめに</a></li>
                                    <li class="tocline"><a class="tocxref" href="#11keywords"><bdi
                                                class="secno">11.3.3.1 </bdi>キーワードとテキスト文字列</a></li>
                                    <li class="tocline"><a class="tocxref" href="#11tEXt"><bdi class="secno">11.3.3.2
                                            </bdi><span class="chunk">tEXt</span> テキストデータ</a></li>
                                    <li class="tocline"><a class="tocxref" href="#11zTXt"><bdi class="secno">11.3.3.3
                                            </bdi><span class="chunk">zTXt</span> 圧縮テキストデータ</a></li>
                                    <li class="tocline"><a class="tocxref" href="#11iTXt"><bdi class="secno">11.3.3.4
                                            </bdi><span class="chunk">iTXt</span> 国際化テキストデータ</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#11addnlsiinfo"><bdi class="secno">11.3.4
                                    </bdi>その他情報</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#11bKGD"><bdi class="secno">11.3.4.1
                                            </bdi><span class="chunk">bKGD</span> 背景色</a></li>
                                    <li class="tocline"><a class="tocxref" href="#11hIST"><bdi class="secno">11.3.4.2
                                            </bdi><span class="chunk">hIST</span> 画像ヒストグラム</a></li>
                                    <li class="tocline"><a class="tocxref" href="#11pHYs"><bdi class="secno">11.3.4.3
                                            </bdi><span class="chunk">pHYs</span> 物理ピクセル寸法</a></li>
                                    <li class="tocline"><a class="tocxref" href="#11sPLT"><bdi class="secno">11.3.4.4
                                            </bdi><span class="chunk">sPLT</span> 推奨パレット</a></li>
                                    <li class="tocline"><a class="tocxref" href="#eXIf"><bdi class="secno">11.3.4.5
                                            </bdi><span class="chunk">eXIf</span> Exchangeable Image File (Exif)
                                            プロファイル</a>
                                        <ol class="toc">
                                            <li class="tocline"><a class="tocxref"
                                                    href="#exif-general-recommendations"><bdi class="secno">11.3.4.5.1
                                                    </bdi><span class="chunk">eXIf</span> 一般的な推奨事項</a>
                                            </li>
                                            <li class="tocline"><a class="tocxref"
                                                    href="#exif-recommendations-for-decoders"><bdi
                                                        class="secno">11.3.4.5.2 </bdi><span class="chunk">eXIf</span>
                                                    デコーダ向け推奨事項</a></li>
                                            <li class="tocline"><a class="tocxref"
                                                    href="#exif-recommendations-for-encoders"><bdi
                                                        class="secno">11.3.4.5.3 </bdi><span class="chunk">eXIf</span>
                                                    エンコーダ向け推奨事項</a></li>
                                        </ol>
                                    </li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#11timestampinfo"><bdi class="secno">11.3.5
                                    </bdi>タイムスタンプ情報</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#11tIME"><bdi class="secno">11.3.5.1
                                            </bdi><span class="chunk">tIME</span> 最終更新日時</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#animation-information"><bdi
                                        class="secno">11.3.6 </bdi>アニメーション情報</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#acTL-chunk"><bdi
                                                class="secno">11.3.6.1 </bdi><span class="chunk">acTL</span>
                                            アニメーション制御チャンク</a></li>
                                    <li class="tocline"><a class="tocxref" href="#fcTL-chunk"><bdi
                                                class="secno">11.3.6.2 </bdi><span class="chunk">fcTL</span>
                                            フレーム制御チャンク</a></li>
                                    <li class="tocline"><a class="tocxref" href="#fdAT-chunk"><bdi
                                                class="secno">11.3.6.3 </bdi><span class="chunk">fdAT</span>
                                            フレームデータチャンク</a></li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#12Encoders"><bdi class="secno">12. </bdi>PNGエンコーダ</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#12Introduction">はじめに</a></li>
                    <li class="tocline"><a class="tocxref" href="#12Encoder-gamma-handling"><bdi class="secno">12.1
                            </bdi>エンコーダのガンマ処理</a></li>
                    <li class="tocline"><a class="tocxref" href="#12Encoder-colour-handling"><bdi class="secno">12.2
                            </bdi>エンコーダの色処理</a></li>
                    <li class="tocline"><a class="tocxref" href="#12Alpha-channel-creation"><bdi class="secno">12.3
                            </bdi>アルファチャンネル生成</a></li>
                    <li class="tocline"><a class="tocxref" href="#12Sample-depth-scaling"><bdi class="secno">12.4
                            </bdi>サンプル深度スケーリング</a></li>
                    <li class="tocline"><a class="tocxref" href="#12Suggested-palettes"><bdi class="secno">12.5
                            </bdi>推奨パレット</a></li>
                    <li class="tocline"><a class="tocxref" href="#12Interlacing"><bdi class="secno">12.6
                            </bdi>インターレース</a></li>
                    <li class="tocline"><a class="tocxref" href="#12Filter-selection"><bdi class="secno">12.7
                            </bdi>フィルタ選択</a></li>
                    <li class="tocline"><a class="tocxref" href="#12Compression"><bdi class="secno">12.8
                            </bdi>圧縮</a></li>
                    <li class="tocline"><a class="tocxref" href="#12Text-chunk-processing"><bdi class="secno">12.9
                            </bdi>テキストチャンク処理</a></li>
                    <li class="tocline"><a class="tocxref" href="#12Chunk-processing"><bdi class="secno">12.10
                            </bdi>チャンク処理</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#12Use-of-private-chunks"><bdi
                                        class="secno">12.10.1 </bdi>プライベートチャンクの使用</a></li>
                            <li class="tocline"><a class="tocxref" href="#12Private-type-and-method-codes"><bdi
                                        class="secno">12.10.2 </bdi>非予約フィールド値の使用</a></li>
                            <li class="tocline"><a class="tocxref" href="#12Ancillary"><bdi class="secno">12.10.3
                                    </bdi>補助チャンク</a></li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#13Decoders"><bdi class="secno">13. </bdi>PNGデコーダとビューア</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#13Introduction">はじめに</a></li>
                    <li class="tocline"><a class="tocxref" href="#13Decoders.Errors"><bdi class="secno">13.1
                            </bdi>エラー処理</a></li>
                    <li class="tocline"><a class="tocxref" href="#13Error-checking"><bdi class="secno">13.2
                            </bdi>エラー検査</a></li>
                    <li class="tocline"><a class="tocxref" href="#13Security-considerations"><bdi class="secno">13.3
                            </bdi>セキュリティに関する考慮</a></li>
                    <li class="tocline"><a class="tocxref" href="#Privacy-considerations"><bdi class="secno">13.4
                            </bdi>プライバシーに関する考慮</a></li>
                    <li class="tocline"><a class="tocxref" href="#13Chunking"><bdi class="secno">13.5 </bdi>チャンク処理</a>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#13Pixel-dimensions"><bdi class="secno">13.6
                            </bdi>ピクセル寸法</a></li>
                    <li class="tocline"><a class="tocxref" href="#13Text-chunk-processing"><bdi class="secno">13.7
                            </bdi>テキストチャンク処理</a></li>
                    <li class="tocline"><a class="tocxref" href="#13Decompression"><bdi class="secno">13.8
                            </bdi>伸長</a></li>
                    <li class="tocline"><a class="tocxref" href="#13Filtering"><bdi class="secno">13.9
                            </bdi>フィルタ処理</a></li>
                    <li class="tocline"><a class="tocxref" href="#13Progressive-display"><bdi class="secno">13.10
                            </bdi>インターレースと逐次表示</a></li>
                    <li class="tocline"><a class="tocxref" href="#13Truecolour-image-handling"><bdi class="secno">13.11
                            </bdi>Truecolor イメージの扱い</a></li>
                    <li class="tocline"><a class="tocxref" href="#13Sample-depth-rescaling"><bdi class="secno">13.12
                            </bdi>サンプル深度の再スケーリング</a></li>
                    <li class="tocline"><a class="tocxref" href="#13Decoder-gamma-handling"><bdi class="secno">13.13
                            </bdi>デコーダのガンマ処理</a></li>
                    <li class="tocline"><a class="tocxref" href="#13Decoder-colour-handling"><bdi class="secno">13.14
                            </bdi>デコーダの色処理</a></li>
                    <li class="tocline"><a class="tocxref" href="#13Background-colour"><bdi class="secno">13.15
                            </bdi>背景色</a></li>
                    <li class="tocline"><a class="tocxref" href="#13Alpha-channel-processing"><bdi class="secno">13.16
                            </bdi>アルファチャンネル処理</a></li>
                    <li class="tocline"><a class="tocxref" href="#13Histogram-and-suggested-palette-usage"><bdi
                                class="secno">13.17 </bdi>ヒストグラムと推奨パレットの使用</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#14EditorsExt"><bdi class="secno">14. </bdi>エディタ</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#14Additional-chunk-types"><bdi class="secno">14.1
                            </bdi>追加のチャンク型</a></li>
                    <li class="tocline"><a class="tocxref" href="#14Ordering"><bdi class="secno">14.2
                            </bdi>PNG エディタの振る舞い</a></li>
                    <li class="tocline"><a class="tocxref" href="#14Ordering-of-chunks"><bdi class="secno">14.3
                            </bdi>チャンクの並び順</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#14Ordering-of-critical-chunks"><bdi
                                        class="secno">14.3.1 </bdi>クリティカルチャンクの順序</a></li>
                            <li class="tocline"><a class="tocxref" href="#14Ordering-of-ancillary-chunks"><bdi
                                        class="secno">14.3.2 </bdi>補助チャンクの順序</a></li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">15. </bdi>適合性</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#conformance-0"><bdi class="secno">15.1
                            </bdi>適合性</a></li>
                    <li class="tocline"><a class="tocxref" href="#15ConfIntro"><bdi class="secno">15.2
                            </bdi>導入</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#15ConfObjectives"><bdi class="secno">15.2.1
                                    </bdi>目的</a></li>
                            <li class="tocline"><a class="tocxref" href="#15ConfScope"><bdi class="secno">15.2.2
                                    </bdi>適用範囲</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#15ConformanceConf"><bdi class="secno">15.3
                            </bdi>適合条件</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#15FileConformance"><bdi class="secno">15.3.1
                                    </bdi>PNGデータストリームの適合性</a></li>
                            <li class="tocline"><a class="tocxref" href="#15ConformanceEncoder"><bdi
                                        class="secno">15.3.2 </bdi>PNGエンコーダの適合性</a></li>
                            <li class="tocline"><a class="tocxref" href="#15ConformanceDecoder"><bdi
                                        class="secno">15.3.3 </bdi>PNGデコーダの適合性</a></li>
                            <li class="tocline"><a class="tocxref" href="#15ConformanceEditor"><bdi class="secno">15.3.4
                                    </bdi>PNGエディタの適合性</a></li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#IANA-registrations"><bdi class="secno">A.
                    </bdi>インターネットメディアタイプ</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#A-Media-type"><bdi class="secno">A.1
                            </bdi>image/png</a></li>
                    <li class="tocline"><a class="tocxref" href="#image-apng"><bdi class="secno">A.2
                            </bdi>image/apng</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#newchunks"><bdi class="secno">B.
                    </bdi>私的チャンク型に関するガイドライン</a></li>
            <li class="tocline"><a class="tocxref" href="#gammachromaticity"><bdi class="secno">C. </bdi>ガンマと色度</a></li>
            <li class="tocline"><a class="tocxref" href="#samplecrc"><bdi class="secno">D. </bdi><abbr
                        title="Cyclic Redundancy Code">CRC</abbr>（巡回冗長検査）のサンプル実装</a></li>
            <li class="tocline"><a class="tocxref" href="#onlineresources"><bdi class="secno">E. </bdi>オンラインリソース</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#E-Intro">はじめに</a></li>
                    <li class="tocline"><a class="tocxref" href="#E-icc-profile-specs"><bdi class="secno">E.1
                            </bdi>ICCプロファイル仕様</a></li>
                    <li class="tocline"><a class="tocxref" href="#E-PNG-home-page"><bdi class="secno">E.2
                            </bdi>PNGウェブサイト</a></li>
                    <li class="tocline"><a class="tocxref" href="#E-Sample-implementation"><bdi class="secno">E.3
                            </bdi>サンプル実装とテスト画像</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#F-ChangeList"><bdi class="secno">F. </bdi>変更履歴</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#changes-20250515"><bdi class="secno">F.1 </bdi><span
                                class="formerLink">Proposed Recommendation of 15 May 2025</span>以降の変更</a></li>
                    <li class="tocline"><a class="tocxref" href="#changes-20250313"><bdi class="secno">F.2 </bdi><span
                                class="formerLink">Candidate Recommendation Snapshot of 13 March 2025</span>以降の変更</a>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#changes-20250121/"><bdi class="secno">F.3
                            </bdi><span class="formerLink">Candidate Recommendation Draft of 21 January 2025 (Third
                                Edition)</span>以降の変更</a></li>
                    <li class="tocline"><a class="tocxref" href="#changes-20240718"><bdi class="secno">F.4 </bdi><span
                                class="formerLink">Candidate Recommendation Draft of 18 July 2024 (Third
                                Edition)</span>以降の変更</a></li>
                    <li class="tocline"><a class="tocxref" href="#changes-20230921"><bdi class="secno">F.5 </bdi><span
                                class="formerLink">Candidate Recommendation Snapshot of 21 September 2023 (Third
                                Edition)</span>以降の変更</a></li>
                    <li class="tocline"><a class="tocxref" href="#changes-20230720"><bdi class="secno">F.6 </bdi><span
                                class="formerLink">Working Draft of 20 July 2023 (Third Edition)</span>以降の変更</a>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#changes-20221025"><bdi class="secno">F.7 </bdi><span
                                class="formerLink">First Public Working Draft of 25 October 2022 (Third Edition)
                            </span>以降の変更</a></li>
                    <li class="tocline"><a class="tocxref" href="#changes-20031110"><bdi class="secno">F.8 </bdi><span
                                class="formerLink"><abbr title="World Wide Web Consortium">W3C</abbr>
                                Recommendation of 10 November 2003</span>（PNG Second Edition）以降の変更</a></li>
                    <li class="tocline"><a class="tocxref" href="#changes-between-first-and-second-editions"><bdi
                                class="secno">F.9 </bdi>第1版と第2版の差分</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">G. </bdi>参考文献</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">G.1
                            </bdi>規範的参照文献</a></li>
                    <li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">G.2
                            </bdi>参考情報</a></li>
                </ol>
            </li>
        </ol>
    </nav>


    <section id="introduction">
        <div class="header-wrapper">
            <h2 id="Introduction"><bdi class="secno">1. </bdi>はじめに</h2><a class="self-link" href="#Introduction"
                aria-label="Permalink for Section 1."></a>
        </div>

        <p>本仕様の設計目標は以下の通りです：</p>

        <ol>
            <li>移植性：エンコーディング、デコーディング、および伝送がソフトウェア・ハードウェアプラットフォームに依存せずに行えること。</li>

            <li>完全性：<a href="#3truecolour" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3truecolour-2">トゥルーカラー</a>、<a href="#3indexedColour" class="internalDFN"
                    data-link-type="dfn" id="ref-for-3indexedColour-2">インデックスカラー</a>、<a href="#dfn-greyscale"
                    class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-greyscale-2">グレースケール</a>画像を、それぞれ透明度やカラースペース情報、テキストコメントなどの補助情報とともに表現できること。
            </li>

            <li>逐次エンコード・デコード：データストリームが逐次生成・逐次読み取りでき、シリアル通信チャネル越しの画像のオンザフライ生成・表示に利用できること。</li>

            <li>プログレッシブ表示：データストリーム伝送時、全体の近似画像を最初に表示し、受信が進むにつれて徐々に精細化できること。</li>

            <li>伝送エラーへの耐性：データストリームの伝送エラーを確実に検出できること。</li>

            <li>ロスレス性：フィルタ処理や圧縮により全ての情報が保持されること。</li>

            <li>パフォーマンス：フィルタ処理・圧縮・プログレッシブ画像表示は効率的なデコードと表示を重視すること。エンコード速度よりデコード速度を優先し、デコードの高速化のためにエンコード速度を犠牲にしてもよい。</li>

            <li>圧縮：他の設計目標と両立しつつ、画像を効果的に圧縮できること。</li>

            <li>簡潔さ：開発者が容易に規格を実装できること。</li>

            <li>互換性：規格準拠のPNGデコーダは、全ての準拠PNGデータストリームを読み込めること。</li>

            <li>柔軟性：将来的な拡張やプライベートな追加が、標準PNGデータストリームの互換性を損なうことなく許容されること。</li>

            <li>法的制約の排除：自由に利用できないアルゴリズムを使用しないこと。</li>
        </ol>

    </section>
    <section id="scope">
        <div class="header-wrapper">
            <h2 id="1Scope"><bdi class="secno">2. </bdi>適用範囲</h2><a class="self-link" href="#1Scope"
                aria-label="Permalink for Section 2."></a>
        </div>




        <p>本仕様は、個々のコンピュータグラフィックス画像やフレームベースアニメーションを、<a href="#dfn-lossless" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-lossless-2">ロスレス</a>で移植性があり圧縮された形でインターネット上で伝送するための、データストリームおよび関連ファイルフォーマットであるPortable
            Network Graphics（PNG、発音は「ピン」）を規定します。
        </p>
    </section>

    <section id="terms-definitions-and-abbreviated-terms">
        <div class="header-wrapper">
            <h2 id="3Defsandabbrevs"><bdi class="secno">3. </bdi>用語・定義・略語</h2><a class="self-link"
                href="#3Defsandabbrevs" aria-label="Permalink for Section 3."></a>
        </div>




        <p>本仕様で使用する用語の定義は次の通りです。</p>

        <dl>



            <dt id="3byte"><dfn data-plurals="bytes" id="dfn-byte" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">バイト</dfn>
            </dt>
            <dt>オクテット</dt>

            <dd>ビット7が最上位、ビット0が最下位となる、範囲[0,255]の8ビットのバイナリ整数。</dd>


            <dt id="3byteOrder"><dfn id="dfn-byte-order" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">バイト順序</dfn>
            </dt>

            <dd>
                複数バイトのデータ値における<a href="#dfn-byte" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-byte-1">バイト</a>の並び順。
            </dd>



            <dt id="3chromaticity"><dfn id="dfn-chromaticity" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">色度（クロマティシティ）</dfn>
            </dt>

            <dd><i>xyY</i>空間における<i>x</i>および<i>y</i>のペア値。[<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-colorimetry"
                        title="Colorimetry, Fourth Edition. CIE 015:2018">COLORIMETRY</a></cite>]で規定。

                <div class="note" role="note" id="issue-container-generatedID">
                    <div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>注</span></div>
                    <p class="">色度は輝度を問わず色の質を示す指標です。</p>
                </div>
            </dd>



            <dt id="3composite"><dfn data-lt="composited|composite|composite (verb)" id="dfn-composited" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">合成（動詞）</dfn>
            </dt>

            <dd>前景画像と背景画像を透明度情報に基づき合成し、背景の見え方や範囲を決定して1枚の画像を作ること。
                <div class="note" role="note" id="issue-container-generatedID-0">
                    <div role="heading" class="note-title marker" id="h-note-0" aria-level="3"><span>注</span></div>
                    <p class="">前景画像は背景に対して<a href="#dfn-composited" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-composited-1">合成</a>されると言う。</p>
                </div>
            </dd>



            <dt id="3datastream"><dfn id="dfn-datastream" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">データストリーム</dfn>
            </dt>

            <dd>
                <a href="#dfn-byte" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-byte-2">バイト</a>の列。
            </dd>


            <dt id="3deflate"><dfn id="dfn-deflate" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">deflate</dfn>
            </dt>

            <dd>
                <a href="#3LZ77" class="internalDFN" data-link-type="dfn" id="ref-for-3LZ77-1">LZ77</a>法に属する圧縮方式。

                <p>出典: [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc1951"
                            title="DEFLATE Compressed Data Format Specification version 1.3">RFC1951</a></cite>]</p>
            </dd>



            <dt><dfn id="dfn-frame" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">フレーム</dfn></dt>

            <dd>静止PNGの場合、<a href="#dfn-static-image" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-static-image-1">静止画像</a>
                は最初（かつ唯一）のフレームと見なされます。
                アニメーションPNGでは、<a href="#apng-frame-based-animation">フレームベースアニメーション</a>列の各画像がフレームとなります。
                したがって、アニメーションPNGで静止画像が最初のフレームでない場合、その静止画像はフレームとはみなされません。
            </dd>




            <dt id="3frameBuffer"><dfn data-plurals="frame buffers" id="dfn-frame-buffer" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">フレームバッファ</dfn>
            </dt>

            <dd>
                多くのコンピュータディスプレイで画像を表示する最終的なデジタル記憶領域。

                <div class="note" role="note" id="issue-container-generatedID-1">
                    <div role="heading" class="note-title marker" id="h-note-1" aria-level="3"><span>注</span></div>
                    <p class="">ソフトウェアは画像を<a href="#dfn-frame-buffer" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-frame-buffer-1">フレームバッファ</a>に読み込むことで画面に表示させます。</p>
                </div>
            </dd>

            <dt><dfn id="dfn-fully-transparent-black" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">完全に透過な黒</dfn>
            </dt>

            <dd>赤・緑・青・アルファ成分がすべてゼロのピクセル。</dd>

            <dt><dfn data-plurals="gamma values" id="dfn-gamma-value" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">ガンマ値</dfn>
            </dt>

            <dd>
                <a href="#dfn-gamma" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gamma-1">ガンマ</a> <a
                    href="#dfn-transfer-function" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-transfer-function-1">伝達関数</a>の指数部の値。
            </dd>


            <dt id="3gamma"><dfn id="dfn-gamma" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">ガンマ</dfn>
            </dt>

            <dd>
                累乗型<a href="#dfn-transfer-function" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-transfer-function-2">伝達関数</a>。
            </dd>

            <dt>ハイダイナミックレンジ (<dfn id="dfn-hdr" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">HDR</dfn>)
            </dt>

            <dd>
                人間の瞬間的な視覚ダイナミックレンジ（約12-14<a href="#dfn-stop" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-stop-1">ストップ</a>）と同等またはそれ以上の高ダイナミックレンジ画像を格納できる画像形式。PNGは<a href="#dfn-hdr"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hdr-1">HDR</a>フォーマットとして<a href="#dfn-hlg"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hlg-1">HLG</a>と<a href="#dfn-pq"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-pq-1">PQ</a>をサポートする[<cite><a class="bibref"
                        data-link-type="biblio" href="#bib-itu-r-bt.2100"
                        title="ITU-R BT.2100, SERIES BT: BROADCASTING SERVICE (TELEVISION). Image parameter values for high dynamic range television for use in production and international programme exchange">ITU-R-BT.2100</a></cite>]。
            </dd>

            <dt>ハイブリッドログガンマ (<dfn id="dfn-hlg" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">HLG</dfn>)
            </dt>

            <dd>
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-itu-r-bt.2100"
                        title="ITU-R BT.2100, SERIES BT: BROADCASTING SERVICE (TELEVISION). Image parameter values for high dynamic range television for use in production and international programme exchange">ITU-R-BT.2100</a></cite>]表5で定義される<a
                    href="#dfn-transfer-function" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-transfer-function-3">伝達関数</a>。（相対的なシーンリファード方式）
            </dd>

            <dt><dfn data-plurals="full-range images" id="dfn-full-range-image" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">フルレンジ画像</dfn>
            </dt>

            <dd>参照黒と白がそれぞれサンプル値<code>0</code>および<code>2<sup>bit depth</sup> -
      1</code>に対応する画像。
            </dd>



            <dt id="3imageData"><dfn id="dfn-image-data" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">画像データ</dfn>
            </dt>

            <dd>
                画像内の<a href="#dfn-scanline" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-scanline-1">スキャンライン</a>の1次元配列。
            </dd>



            <dt id="3interlacedPNGimage"><dfn id="dfn-interlaced-png-image" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">インターレースPNG画像</dfn>
            </dt>

            <dd>
                <a href="#3PNGimage" class="internalDFN" data-link-type="dfn" id="ref-for-3PNGimage-1">PNG画像</a>から<a
                    href="#3passExtraction" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3passExtraction-1">パス抽出</a>で生成される<a href="#3reducedImage" class="internalDFN"
                    data-link-type="dfn" id="ref-for-3reducedImage-1">縮小画像</a>の列。
            </dd>


            <dt id="3losslessCompression"><dfn id="dfn-lossless" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">ロスレス</dfn>
            </dt>

            <dd>元データをビット単位で完全に復元できるデータ圧縮方式。</dd>


            <dt id="3luminance"><dfn id="dfn-luminance" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">輝度</dfn>
            </dt>

            <dd>
                人間の目の波長感度を考慮した、可視光の強度の客観的な測定値。

                <div class="note" role="note" id="issue-container-generatedID-2">
                    <div role="heading" class="note-title marker" id="h-note-2" aria-level="3"><span>注</span></div>
                    <p class="">輝度と<a href="#dfn-chromaticity" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-chromaticity-1">色度</a>の両方で色を完全に定義できます。正式な定義は[<cite><a class="bibref"
                                data-link-type="biblio" href="#bib-colorimetry"
                                title="Colorimetry, Fourth Edition. CIE 015:2018">COLORIMETRY</a></cite>]を参照。</p>
                </div>

            </dd>


            <dt><dfn id="3LZ77" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">LZ77</dfn>
            </dt>

            <dd>[<cite><a class="bibref" data-link-type="biblio" href="#bib-ziv-lempel"
                        title="A Universal Algorithm for Sequential Data Compression, IEEE Transactions on Information Theory, vol. IT-23, no. 3, pp. 337 - 343">Ziv-Lempel</a></cite>]で記述されるデータ圧縮アルゴリズム。
            </dd>

            <dt><dfn data-plurals="narrow-range images" id="dfn-narrow-range-image" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">ナローレンジ画像</dfn>
            </dt>

            <dd>参照黒と白がそれぞれサンプル値<code>0</code>および<code>2<sup>bit depth</sup> - 1</code>に対応しない画像。
            </dd>


            <dt id="3networkByteOrder"><dfn id="dfn-network-byte-order" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">ネットワークバイト順</dfn>
            </dt>

            <dd>
                最上位バイトから順に下位バイトへと並ぶ<a href="#dfn-byte-order" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-byte-order-1">バイト順序</a>（2バイト整数なら<abbr title="Most Significant Byte">MSB</abbr> <abbr
                    title="Least Significant Byte">LSB</abbr>、4バイト整数なら<abbr title="Most Significant Byte">MSB</abbr> B2
                B1 <abbr title="Least Significant Byte">LSB</abbr>）。
            </dd>

            <dt>パーセプチュアルクアンタイザー (<dfn id="dfn-pq" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">PQ</dfn>)
            </dt>

            <dd>
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-itu-r-bt.2100"
                        title="ITU-R BT.2100, SERIES BT: BROADCASTING SERVICE (TELEVISION). Image parameter values for high dynamic range television for use in production and international programme exchange">ITU-R-BT.2100</a></cite>]表4で定義される<a
                    href="#dfn-transfer-function" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-transfer-function-4">伝達関数</a>。（絶対的なディスプレイリファード方式）
                <div class="note" role="note" id="issue-container-generatedID-3">
                    <div role="heading" class="note-title marker" id="h-note-3" aria-level="3"><span>注</span></div>
                    <p class="">
                        PNGではRGBのみ利用可能であり、ICtCpはサポートされません。
                    </p>
                </div>
            </dd>



            <dt id="3PNGdecoder">PNGデコーダ</dt>

            <dd>
                <a href="#3PNGdatastream" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3PNGdatastream-1">PNGデータストリーム</a>から<a href="#3referenceImage" class="internalDFN"
                    data-link-type="dfn" id="ref-for-3referenceImage-1">参照画像</a>を復元し、対応する<a href="#3deliveredImage"
                    class="internalDFN" data-link-type="dfn" id="ref-for-3deliveredImage-1">出力画像</a>を生成するプロセスまたは装置。
            </dd>


            <dt id="3PNGeditor"><dfn data-plurals="png editors" id="dfn-png-editor" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">PNGエディタ</dfn>
            </dt>

            <dd>
                既存の<a href="#3PNGdatastream" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3PNGdatastream-2">PNGデータストリーム</a>を修正し、可能な限り未変更の補助情報を保持しつつ、未知のチャンクタイプも含め<a href="#3chunk"
                    class="internalDFN" data-link-type="dfn" id="ref-for-3chunk-1">チャンク</a>の順序規則を守るプロセスまたは装置。
            </dd>


            <dt id="3PNGencoder">PNGエンコーダ
            </dt>

            <dd>
                <a href="#3sourceImage" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3sourceImage-1">ソース画像</a>から<a href="#3referenceImage" class="internalDFN"
                    data-link-type="dfn" id="ref-for-3referenceImage-2">参照画像</a>を構築し、その参照画像を表す<a href="#3PNGdatastream"
                    class="internalDFN" data-link-type="dfn"
                    id="ref-for-3PNGdatastream-3">PNGデータストリーム</a>を生成するプロセスまたは装置。
            </dd>


            <dt id="3PNGfile">PNGファイル
            </dt>

            <dd>
                ファイルとして保存された<a href="#3PNGdatastream" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3PNGdatastream-4">PNGデータストリーム</a>。
            </dd>


            <dt id="3PNGfourByteUnSignedInteger"><dfn data-plurals="png four-byte unsigned integers"
                    id="dfn-png-four-byte-unsigned-integer" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">PNG
                    4バイト符号なし整数</dfn>
            </dt>

            <dd>
                <p>0〜2<sup>31</sup>-1の範囲に制限された4バイトの符号なし整数。</p>

                <div class="note" role="note" id="issue-container-generatedID-4">
                    <div role="heading" class="note-title marker" id="h-note-4" aria-level="3"><span>注</span></div>
                    <p class="">一部言語で4バイト符号なし値の扱いが困難なため、この制限があります。</p>
                </div>
            </dd>

            <dt id="3PNGtwoByteUnSignedInteger"><dfn id="dfn-png-two-byte-unsigned-integer" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">PNG 2バイト符号なし整数</dfn>
            </dt>

            <dd>
                <p>ネットワークバイト順の2バイト符号なし整数。</p>
            </dd>



            <dt id="3sample"><dfn data-plurals="samples" id="dfn-sample" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">サンプル</dfn>
            </dt>

            <dd>
                画像中の<a href="#3channel" class="internalDFN" data-link-type="dfn" id="ref-for-3channel-1">チャネル</a>と<a
                    href="#3pixel" class="internalDFN" data-link-type="dfn" id="ref-for-3pixel-1">ピクセル</a>の交点。
            </dd>


            <dt id="3sampleDepth">サンプル深度</dt>

            <dd>
                <a href="#dfn-sample" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-sample-1">サンプル</a>値を表現するビット数。
            </dd>


            <dt id="3scanline"><dfn data-plurals="scanlines" id="dfn-scanline" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">スキャンライン</dfn>
            </dt>

            <dd>
                画像または<a href="#dfn-interlaced-png-image" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-interlaced-png-image-1">インターレースPNG画像</a>内の<a href="#3pixel" class="internalDFN"
                    data-link-type="dfn" id="ref-for-3pixel-2">ピクセル</a>の行。
            </dd>

            <dt>スタンダードダイナミックレンジ (<dfn id="dfn-sdr" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">SDR</dfn>)
            </dt>

            <dd>
                5〜8<a href="#dfn-stop" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-stop-2">ストップ</a>の比較的低いダイナミックレンジを持つ画像を格納できる画像形式。例：[<cite><a class="bibref"
                        data-link-type="biblio" href="#bib-srgb"
                        title="Multimedia systems and equipment - Colour measurement and management - Part 2-1: Colour management - Default RGB colour space - sRGB">SRGB</a></cite>]、
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-display-p3"
                        title="Display P3">Display-P3</a></cite>]、[<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-itu-r-bt.709"
                        title="ITU-R BT.709, SERIES BT: BROADCASTING SERVICE (TELEVISION). Parameter values for the HDTV standards for production and international programme exchange">ITU-R-BT.709</a></cite>]。
                <div class="note" role="note" id="issue-container-generatedID-5">
                    <div role="heading" class="note-title marker" id="h-note-5" aria-level="3"><span>注</span></div>
                    <p class="">スタンダードダイナミックレンジはプライマリ（色域）と独立しており、PNGは広色域<a href="#dfn-sdr" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-sdr-1">SDR</a>形式もサポートします。</p>
                </div>
            </dd>

            <dt><dfn data-plurals="stops" id="dfn-stop" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">ストップ</dfn>
            </dt>

            <dd>
                シーンの光輝度が2倍変化すること。
            </dd>

            <dt><dfn data-plurals="transfer functions" id="dfn-transfer-function" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">伝達関数</dfn>
            </dt>

            <dd>画像輝度と画像サンプルを結ぶ関数。</dd>


            <dt id="3whitePoint"><dfn data-plurals="white points" id="dfn-white-point" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">ホワイトポイント</dfn>
            </dt>

            <dd>
                コンピュータディスプレイの公称ホワイト値の<a href="#dfn-chromaticity" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-chromaticity-2">色度</a>。
            </dd>


            <dt id="3zlib"><dfn id="dfn-zlib" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">zlib</dfn>
            </dt>

            <dd>
                <p><a href="#dfn-deflate" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-deflate-1">deflate</a>系の圧縮方式。</p>

                <p>出典: [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc1950"
                            title="ZLIB Compressed Data Format Specification version 3.3">rfc1950</a></cite>]</p>

                <div class="note" role="note" id="issue-container-generatedID-6">
                    <div role="heading" class="note-title marker" id="h-note-6" aria-level="3"><span>注</span></div>
                    <p class="">この方式のサンプル実装を含むライブラリ名も意味します。</p>
                </div>
            </dd>


            <dt id="3CRC">巡回冗長検査</dt>
            <dt><abbr title="Cyclic Redundancy Code">CRC</abbr></dt>
            <dd>
                <p>伝送エラーのほとんどを検出できるチェック値の一種。</p>

                <div class="note" role="note" id="issue-container-generatedID-7">
                    <div role="heading" class="note-title marker" id="h-note-7" aria-level="3"><span>注</span></div>
                    <p class="">デコーダは受信データの<abbr title="Cyclic Redundancy Code">CRC</abbr>を計算し、エンコーダが付加した<abbr
                            title="Cyclic Redundancy Code">CRC</abbr>と比較してチェックします。一致しない場合はデータまたは<abbr
                            title="Cyclic Redundancy Code">CRC</abbr>が破損していることを示します。</p>
                </div>
            </dd>


            <dt id="3CRT">陰極線管</dt>
            <dt><abbr title="Cathode Ray Tube">CRT</abbr></dt>

            <dd>1つ以上の電子銃を含み、電子ビームを操作して蛍光スクリーン上に画像を表示する真空管。</dd>

            <dt>電気-光学伝達関数</dt>
            <dt>
                <abbr title="Electro-Optical Transfer Function"><dfn id="dfn-eotf" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn"><abbr title="Electro-Optical Transfer Function">EOTF</abbr></dfn></abbr>
            </dt>
            <dd>電気もしくはデジタル領域と光エネルギーとの間の<a href="#dfn-transfer-function" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-transfer-function-5">伝達関数</a>。入力信号に対してディスプレイが放射する光量を定義します。</dd>


            <dt id="3LSB">最下位バイト</dt>
            <dt><abbr title="Least Significant Byte">LSB</abbr></dt>
            <dd>
                複数<a href="#dfn-byte" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-byte-3">バイト</a>値の最下位バイト。
            </dd>

            <dt id="3MSB">最上位バイト</dt>
            <dt><abbr title="Most Significant Byte">MSB</abbr></dt>

            <dd>
                複数<a href="#dfn-byte" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-byte-4">バイト</a>値の最上位バイト。
            </dd>

            <dt>光-電気伝達関数</dt>
            <dt>
                <abbr title="Opto-Electrical Transfer Function"><dfn id="dfn-oetf" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn"><abbr title="Opto-Electrical Transfer Function">OETF</abbr></dfn></abbr>
            </dt>
            <dd>光エネルギーと電気・デジタル領域との間の<a href="#dfn-transfer-function" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-transfer-function-6">伝達関数</a>。ある出力信号を得るためにシーンで必要な光量を定義します。
            </dd>
        </dl>
    </section>



    <section id="concepts">
        <div class="header-wrapper">
            <h2 id="4Concepts"><bdi class="secno">4. </bdi>概念</h2><a class="self-link" href="#4Concepts"
                aria-label="Permalink for Section 4."></a>
        </div>




        <section id="static-and-animated-images">
            <div class="header-wrapper">
                <h3 id="x4-1-static-and-animated-images"><bdi class="secno">4.1 </bdi>静止画像とアニメーション画像</h3><a
                    class="self-link" href="#static-and-animated-images" aria-label="Permalink for Section 4.1"></a>
            </div>


            <p>すべてのPNG画像には1つの<dfn id="dfn-static-image" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">静止画像</dfn>が含まれます。</p>

            <p>一部のPNG画像（<dfn class="lint-ignore" id="dfn-animated-png" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">Animated PNG</dfn>（<abbr
                    title="Animated PNG">APNG</abbr>）と呼ばれる）には、フレームベースのアニメーションシーケンス、すなわち<dfn id="dfn-animated-image"
                    tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">アニメーション画像</dfn>も含まれます。これは最初のフレームが—そうである場合も、そうでない場合もあります—<a
                    href="#dfn-static-image" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-static-image-2">静止画像</a>であることがあります。アニメーション非対応の表示装置（プリンタなど）は、アニメーションシーケンスではなく<a
                    href="#dfn-static-image" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-static-image-3">静止画像</a>を表示します。</p>

            <p><a href="#dfn-static-image" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-static-image-4">静止画像</a>および<a href="#dfn-animated-image" class="internalDFN"
                    data-link-type="dfn"
                    id="ref-for-dfn-animated-image-1">アニメーション画像</a>の各フレームは、それぞれ<em>参照画像</em>に対応し、<em>PNG画像</em>として格納されます。
            </p>

        </section>

        <section id="images">
            <div class="header-wrapper">
                <h3 id="4Concepts.Sourceimage"><bdi class="secno">4.2 </bdi>画像</h3><a class="self-link"
                    href="#4Concepts.Sourceimage" aria-label="Permalink for Section 4.2"></a>
            </div>




            <p>本仕様はPNGデータストリームを規定し、PNGデータストリームを生成するPNGエンコーダ、PNGデータストリームを解釈するPNGデコーダ、および一つのPNGデータストリームを別のPNGデータストリームに変換する<a
                    href="#dfn-png-editor" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-png-editor-1">PNGエディタ</a>に対していくつかの要件を課します。アプリケーションとPNGエンコーダ／デコーダ／エディタ間のインタフェースは規定しません。エンコーダに提示される、またはデコーダにより出力される画像の正確な形式も規定しません。ここでは4種類の画像を区別します。
            </p>

            <dl>

                <dt><dfn id="3sourceImage" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">ソース画像</dfn>
                </dt>
                <dd><i>ソース画像</i>は、PNGエンコーダに提示される画像です。</dd>



                <dt><dfn id="3referenceImage" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">参照画像</dfn></dt>
                <dd><a href="#3referenceImage" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3referenceImage-3">参照画像</a>は概念上のみ存在し、長方形の<dfn id="3pixel" data-plurals="pixel"
                        tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">ピクセル</dfn>の長方形配列で構成され、すべて同じ幅と高さを持ち、すべて同じ数の符号なし整数サンプル（3つ（赤・緑・青）または4つ（赤・緑・青・アルファ））を含みます。同種（赤・緑・青・アルファ）の全サンプルの配列を

                    <dfn id="3channel" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">チャネル</dfn>と呼びます。各チャネルのサンプル深度は1〜16の範囲で、これはそのチャネル内のすべてのサンプルに用いられるビット数です。チャネルごとにサンプル深度が異なる場合があります。赤・緑・青サンプルはピクセルの色の赤・緑・青成分の強度を決定します。これらがすべてゼロならピクセルは黒、すべて最大値（2<sup>sampledepth</sup>-1）なら白になります。<dfn
                        id="3alpha" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">アルファ</dfn>サンプルはピクセルの不透明度を決定し、ゼロは完全に透過、最大値は完全に不透明を意味します。3チャネルの参照画像では、すべてのピクセルは完全に不透明です。（4チャネルの参照画像でも全ピクセルが完全不透明である場合があります。この違いは、後者には特定のアルファのサンプル深度があるのに対し、前者にはない点です。）各水平方向のピクセル行はスキャンラインと呼ばれます。各スキャンライン内のピクセルは左から右へ、スキャンラインは上から下へ並びます。すべての参照画像は<a
                        href="#3PNGdatastream" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3PNGdatastream-5">PNGデータストリーム</a>で正確に表現でき、すべての<a href="#3PNGdatastream"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-3PNGdatastream-6">PNGデータストリーム</a>は参照画像に変換できます。PNGエンコーダはソース画像を直接PNG画像に変換しても構いませんが、概念的にはまずソース画像を参照画像に変換し、その後参照画像をPNG画像に変換します。ソース画像の種類によっては、ソース画像から参照画像への変換で情報の損失を伴う場合があります。この変換はこの国際規格の範囲外です。ただし参照画像は、PNGデータストリームから常に完全に復元できます。
                </dd>


                <dt><dfn id="3PNGimage" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">PNG画像</dfn></dt>
                <dd><i>PNG画像</i>は参照画像に次の一連の変換を適用して得られます：<a href="#3alphaSeparation" class="internalDFN"
                        data-link-type="dfn" id="ref-for-3alphaSeparation-1">アルファ分離</a>、
                    <a href="#3indexing" class="internalDFN" data-link-type="dfn" id="ref-for-3indexing-1">インデックス化</a>、
                    <a href="#3RGBmerging" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3RGBmerging-1">RGB結合</a>、<a href="#3alphaCompaction" class="internalDFN"
                        data-link-type="dfn" id="ref-for-3alphaCompaction-1">アルファ圧縮</a>、および<a
                        href="#3sampleDepthScaling" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3sampleDepthScaling-1">サンプル深度のスケーリング</a>。PNG画像は5種類が定義されています（<a
                        href="#6Colour-values" class="sec-ref"><bdi class="secno">6.1
                        </bdi>カラータイプと値</a>参照）。（エンコーダがソース画像を実際に直接PNG画像へ変換し、ソース画像形式が既にPNG画像形式に近い場合、これらの変換の一部を省略できることがあります。）PNG画像では1〜16ビットのすべてのサンプル深度が明示的にサポートされるわけではありませんが、参照画像の各チャネルの有効ビット数を記録できます。PNG画像内のすべてのチャネルは同じサンプル深度を持ちます。PNGエンコーダはPNG画像からPNGデータストリームを生成します。PNGデコーダはPNGデータストリームを受け取り、PNG画像を再構成します。
                </dd>


                <dt><dfn id="3deliveredImage" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">出力画像</dfn></dt>
                <dd><a href="#3deliveredImage" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3deliveredImage-2">出力画像</a>は、PNGデータストリームをデコードして得られたPNG画像から構築されます。<a
                        href="#3deliveredImage" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3deliveredImage-3">出力画像</a>の具体的な形式は規定しません。ビューアは、可能な限り元のソース画像の見た目に近い形で画像を提示します。
                </dd>
            </dl>

            <p>この4種類の画像の関係は、<a href="#image-relationship" class="fig-ref"
                    title="Relationships between source, reference, PNG, and display images">Figure <bdi
                        class="">1</bdi></a>に示します。</p>

            <figure id="image-relationship">

                <img id="figure41" src="https://www.w3.org/TR/png-3/figures/image-relationships.svg">

                <figcaption><a class="self-link" href="#image-relationship">Figure <bdi class="figno">1</bdi></a> <span
                        class="fig-title">
                        ソース、参照、PNG、表示画像の関係
                    </span></figcaption>
            </figure>



            <p>サンプル、チャネル、ピクセル、およびサンプル深度の関係は、<a href="#sample-pixel-channel-relationship" class="fig-ref"
                    title="Relationships between sample, sample depth, pixel, and channel">Figure <bdi
                        class="">2</bdi></a>に示します。</p>

            <figure id="sample-pixel-channel-relationship">

                <img id="figure42" src="https://www.w3.org/TR/png-3/figures/sample-pixel-channel-relationship.svg"
                    width="640" height="290">

                <figcaption><a class="self-link" href="#sample-pixel-channel-relationship">Figure <bdi
                            class="figno">2</bdi></a> <span class="fig-title">
                        サンプル、サンプル深度、ピクセル、チャネルの関係
                    </span></figcaption>
            </figure>
        </section>


        <section id="4Concepts.ColourSpaces">
            <div class="header-wrapper">
                <h3 id="x4-3-color-spaces"><bdi class="secno">4.3 </bdi>カラースペース</h3><a class="self-link"
                    href="#4Concepts.ColourSpaces" aria-label="Permalink for Section 4.3"></a>
            </div>


            <p>色サンプルが位置付けられるRGBカラースペースは、次の4つの方法のいずれかで指定できます。</p>


            <ol>
                <li>CICP画像フォーマットのシグナリングメタデータによる。</li>

                <li>ICCプロファイルによる。</li>

                <li>サンプルがこのカラースペースに準拠する場合、カラースペースがsRGBであることを明示する。</li>

                <li>画像で使用される赤・緑・青の各原色の1931 CIEの<i>x,y</i>色度と、参照<a href="#dfn-white-point" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-white-point-1">ホワイトポイント</a>、および<a href="#dfn-gamma-value"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gamma-value-1">ガンマ値</a>を指定する。</li>
            </ol>

            <p>ハイエンド用途では、最初の2つの方法が最も柔軟性と制御性を提供します。3つ目の方法は特定の（しかし非常に一般的な）カラースペースを示すのに有効です。4つ目の方法はICCプロファイルが広く採用される以前に標準化されたもので、RGBデータの正確な色度を<a
                    href="#dfn-gamma" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-gamma-2">ガンマ</a>補正とともに指定できます（<a href="#C-GammaAppendix" class="sec-ref"><bdi
                        class="secno">C.
                    </bdi>ガンマと色度</a>参照）。ただし、色管理対応アプリケーションは通常、最初の3つのいずれかを優先し、色管理非対応アプリケーションは通常、これら4つすべてを無視します。</p>

            <p><a href="#color-chunk-precendence" class="table-ref" title="Color Chunk Priority">Table <bdi
                        class="">1</bdi></a>は、カラースペース情報を提供するチャンクタイプの一覧で、それぞれに優先度（Priority）を割り当てています。単一の画像にこれらのチャンクタイプが複数含まれる場合、最も小さい優先度番号のチャンクが優先され、番号が大きいチャンクタイプは無視されるべきです。
            </p>

            <table id="color-chunk-precendence" class="numbered simple">
                <caption><a class="self-link" href="#color-chunk-precendence">Table <bdi class="tableno">1</bdi></a>
                    <span class="table-title">
                        色チャンクの優先順位
                    </span>
                </caption>

                <tbody>
                    <tr>
                        <th>チャンクタイプ</th>
                        <th>優先度</th>
                    </tr>

                    <tr>
                        <td><a href="#cICP-chunk" class="chunk">cICP</a></td>
                        <td>1</td>
                    </tr>

                    <tr>
                        <td><a class="chunk" href="#11iCCP">iCCP</a></td>
                        <td>2</td>
                    </tr>

                    <tr>
                        <td><a class="chunk" href="#11sRGB">sRGB</a></td>
                        <td>3</td>
                    </tr>

                    <tr>
                        <td><a class="chunk" href="#11cHRM">cHRM</a> と <a class="chunk" href="#11gAMA">gAMA</a></td>
                        <td>4</td>
                    </tr>
                </tbody>
            </table>

            <p><a href="#dfn-gamma" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-gamma-3">ガンマ</a>補正は、アルファチャネルが存在してもアルファチャネルには適用されません。アルファサンプルは常にフルレンジで、完全不透明に対する線形の割合を表します。
            </p>

            <p>マスタリング用のメタデータを提供してもかまいません。</p>
        </section>


        <section id="4Concepts.PNGImageTransformation">
            <div class="header-wrapper">
                <h3 id="x4-4-reference-image-to-png-image-transformation"><bdi class="secno">4.4 </bdi>参照画像からPNG画像への変換
                </h3><a class="self-link" href="#4Concepts.PNGImageTransformation"
                    aria-label="Permalink for Section 4.4"></a>
            </div>



            <section class="introductory" id="4Concepts.Introduction">
                <div class="header-wrapper">
                    <h3 id="introduction-1">はじめに</h3><a class="self-link" href="#4Concepts.Introduction"
                        aria-label="Permalink for this Section"></a>
                </div>


                <p>エンコード対象のPNG画像を作成するために、参照画像に複数の変換を適用します（<a href="#reference-to-png-transformation" class="fig-ref"
                        title="Reference image to PNG image transformation">Figure <bdi
                            class="">3</bdi></a>参照）。変換は次の順序で適用され、角括弧は任意であることを示します。</p>

                <pre aria-busy="false"><code class="hljs css"><span class="hljs-selector-attr">[alpha separation]</span>
indexing or ( <span class="hljs-selector-attr">[RGB merging]</span> <span class="hljs-selector-attr">[alpha compaction]</span> )
sample depth scaling</code></pre>
                <p>すべてのピクセルが完全透過または完全不透明のいずれかである場合、<a href="#3alphaSeparation" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3alphaSeparation-2">アルファ分離</a>、<a href="#3alphaCompaction" class="internalDFN"
                        data-link-type="dfn" id="ref-for-3alphaCompaction-2">アルファ圧縮</a>、および
                    <a href="#3indexing" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3indexing-2">インデックス化</a>の変換により、復元された参照画像のアルファのサンプル深度が元の参照画像と異なる、またはアルファチャネルがなくなることがあります。これはどのピクセルの不透明度の程度にも影響しません。両者の参照画像は等価と見なされ、これらの変換はロスレスと見なされます。それでもアルファのサンプル深度を保持したいエンコーダは、アルファのサンプル深度を変更する変換を行わない選択ができます。
                </p>



                <figure id="reference-to-png-transformation">

                    <img id="figure43" src="https://www.w3.org/TR/png-3/figures/reference-to-png-transformation.svg"
                        height="525" width="370">

                    <figcaption><a class="self-link" href="#reference-to-png-transformation">Figure <bdi
                                class="figno">3</bdi></a> <span class="fig-title">
                            参照画像からPNG画像への変換
                        </span></figcaption>
                </figure>
            </section>

            <section id="4Concepts.Implied-alpha">
                <div class="header-wrapper">
                    <h4 id="x4-4-1-alpha-separation"><bdi class="secno">4.4.1 </bdi><dfn id="3alphaSeparation"
                            tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">アルファ分離</dfn></h4><a
                        class="self-link" href="#4Concepts.Implied-alpha" aria-label="Permalink for Section 4.4.1"></a>
                </div>



                <p>参照画像内のすべてのアルファサンプルが最大値である場合、アルファチャネルは省略でき、よりコンパクトにエンコード可能な等価の画像になります。</p>
            </section>


            <section id="4Concepts.Indexing">
                <div class="header-wrapper">
                    <h4 id="x4-4-2-indexing"><bdi class="secno">4.4.2 </bdi>インデックス化</h4><a class="self-link"
                        href="#4Concepts.Indexing" aria-label="Permalink for Section 4.4.2"></a>
                </div>


                <p>異なるピクセル値の数が256以下で、RGBのサンプル深度が8を超えず、かつアルファチャネルが存在しない、またはちょうど8ビット長である、またはすべてのピクセルが完全透過か完全不透明のいずれかである場合、<a
                        href="#3indexedColour" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3indexedColour-3">インデックスカラー</a>表現（<dfn id="3indexing" tabindex="0"
                        aria-haspopup="dialog" data-dfn-type="dfn">インデックス化</dfn>変換により得られる）がエンコードにおいてより効率的となることがあります。




                    <dfn id="3indexedColour" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">インデックスカラー</dfn>表現では、各ピクセルはパレットへのインデックスに置き換えられます。<dfn id="3palette"
                        tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">パレット</dfn>は、8ビットのサンプル（赤・緑・青）3つを含むエントリのリストです。アルファチャネルが存在する場合、8ビットのアルファサンプルからなる並行の表（<dfn
                        id="3alphaTable" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">アルファテーブル</dfn>）も存在します。
                </p>



                <figure id="indexed-colour-image">

                    <img id="figure44" height="450" width="660"
                        src="https://www.w3.org/TR/png-3/figures/indexed-colour-image.svg">

                    <figcaption><a class="self-link" href="#indexed-colour-image">Figure <bdi class="figno">4</bdi></a>
                        <span class="fig-title">
                            インデックスカラー画像
                        </span>
                    </figcaption>
                </figure>

                <p>PNG画像が<a href="#3indexedColour" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3indexedColour-4">インデックスカラー</a>でない場合でも、限られた色数しか表示できないビューアを支援するために、推奨パレットを作成してもかまいません。
                </p>

                <p><a href="#3indexedColour" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3indexedColour-5">インデックスカラー</a>画像では、エンコーダはアルファ値が最大のテーブルエントリが末尾にまとまるようにパレットを並べ替えることができます。この場合、これらのエントリを省いた短縮形式でテーブルをエンコードできます。
                </p>

                <p>インデックスカラーのPNGを作成するエンコーダは、パレットテーブルの実際の長さを超えるインデックス値を挿入してはなりません。これはエラーであり、デコーダのエラー処理はまちまちです。</p>
            </section>


            <section id="4Concepts.RGBMerging">
                <div class="header-wrapper">
                    <h4 id="x4-4-3-rgb-merging"><bdi class="secno">4.4.3 </bdi><dfn id="3RGBmerging" tabindex="0"
                            aria-haspopup="dialog" data-dfn-type="dfn">RGB結合</dfn>
                    </h4><a class="self-link" href="#4Concepts.RGBMerging" aria-label="Permalink for Section 4.4.3"></a>
                </div>




                <p>赤・緑・青のチャネルのサンプル深度が同じで、かつ各ピクセルにおいて赤・緑・青サンプルの値が等しい場合、これら3つのチャネルは単一のグレースケールチャネルに結合できます。</p>
            </section>


            <section id="4Concepts.Alpha-indexing">
                <div class="header-wrapper">
                    <h4 id="x4-4-4-alpha-compaction"><bdi class="secno">4.4.4 </bdi><dfn id="3alphaCompaction"
                            tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">アルファ圧縮</dfn></h4><a
                        class="self-link" href="#4Concepts.Alpha-indexing" aria-label="Permalink for Section 4.4.4"></a>
                </div>



                <p>非インデックス画像において、あるRGB（またはグレースケール）値を持つすべてのピクセルが完全に透過で、それ以外のすべてのピクセルが完全に不透明であるような値が存在する場合、アルファチャネルは、その透過となるRGB（またはグレースケール）値を特定するだけで、よりコンパクトに表すことができます。
                </p>
            </section>


            <section id="4Concepts.Scaling">
                <div class="header-wrapper">
                    <h4 id="x4-4-5-sample-depth-scaling"><bdi class="secno">4.4.5 </bdi><dfn id="3sampleDepthScaling"
                            tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">サンプル深度のスケーリング</dfn>
                    </h4><a class="self-link" href="#4Concepts.Scaling" aria-label="Permalink for Section 4.4.5"></a>
                </div>




                <p>PNG画像では、すべてのサンプル深度がサポートされているわけではありません（<a href="#6Colour-values" class="sec-ref"><bdi
                            class="secno">6.1
                        </bdi>カラータイプと値</a>参照）。また、すべてのチャネルは同じサンプル深度でなければなりません。PNG画像のすべてのチャネルは、参照画像内のいずれのサンプル深度よりも小さくない最小の許容サンプル深度を使用し、参照画像の可能なサンプル値をPNG画像での次の許容範囲に線形に写像します。<a
                        href="#scaling-sample-values" class="fig-ref" title="Scaling sample values">Figure <bdi
                            class="">5</bdi></a>は、深度3のサンプルが深度4のサンプルにどのように写像されるかを示します。</p>



                <figure id="scaling-sample-values">

                    <img id="figure45" height="320" width="280"
                        src="https://www.w3.org/TR/png-3/figures/scaling-sample-values.svg">

                    <figcaption><a class="self-link" href="#scaling-sample-values">Figure <bdi class="figno">5</bdi></a>
                        <span class="fig-title">
                            サンプル値のスケーリング
                        </span>
                    </figcaption>
                </figure>

                <p>許容されるサンプル深度を少数に限定することで、デコーダが対処すべきケース数を減らせます。<a href="#3sampleDepthScaling" class="internalDFN"
                        data-link-type="dfn"
                        id="ref-for-3sampleDepthScaling-2">サンプル深度のスケーリング</a>は可逆でデータ損失はありません。これは参照画像のサンプル深度をPNGデータストリームに記録できるためです。サンプル深度の記録がない場合、参照画像のサンプル深度はPNG画像のサンプル深度に等しくなります。<a
                        href="#12Sample-depth-scaling" class="sec-ref"><bdi class="secno">12.4
                        </bdi>サンプル深度スケーリング</a>および<a href="#13Sample-depth-rescaling" class="sec-ref"><bdi
                            class="secno">13.12
                        </bdi>サンプル深度の再スケーリング</a>を参照してください。</p>

                <figure id="possible-pixel-types">

                    <img id="figure46" src="https://www.w3.org/TR/png-3/figures/possible-pixel-types.svg">

                    <figcaption><a class="self-link" href="#possible-pixel-types">Figure <bdi class="figno">6</bdi></a>
                        <span class="fig-title">
                            PNG画像の可能なピクセルタイプ
                        </span>
                    </figcaption>
                </figure>
            </section>
        </section>




        <section id="4Concepts.PNGImage">
            <div class="header-wrapper">
                <h3 id="x4-5-png-image"><bdi class="secno">4.5 </bdi>PNG画像</h3><a class="self-link"
                    href="#4Concepts.PNGImage" aria-label="Permalink for Section 4.5"></a>
            </div>


            <p>参照画像の変換結果は、5種類のPNG画像のいずれかになります（<a href="#possible-pixel-types" class="fig-ref"
                    title="Possible PNG image pixel types">Figure <bdi class="">6</bdi></a>参照）：</p>


            <dl>
                <dt><dfn id="dfn-truecolor-with-alpha" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">トゥルーカラー（アルファ付き）</dfn></dt>
                <dd>各<a href="#3pixel" class="internalDFN" data-link-type="dfn" id="ref-for-3pixel-3">ピクセル</a>は、赤・緑・青・<a
                        href="#dfn-sample" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-sample-2">サンプル</a>と<a href="#3alpha" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3alpha-1">アルファ</a>の4サンプルで構成されます。</dd>

                <dt><dfn id="dfn-greyscale-with-alpha" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">グレースケール（アルファ付き）</dfn></dt>
                <dd>各<a href="#3pixel" class="internalDFN" data-link-type="dfn" id="ref-for-3pixel-4">ピクセル</a>は、<a
                        href="#3greyscale" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3greyscale-1">グレーサンプル</a>1つと<a href="#3alpha" class="internalDFN"
                        data-link-type="dfn" id="ref-for-3alpha-2">アルファ</a>サンプル1つの合計2サンプルで構成されます。</dd>


                <dt id="truecolor"><dfn id="3truecolour" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">トゥルーカラー</dfn></dt>
                <dd>各<a href="#3pixel" class="internalDFN" data-link-type="dfn" id="ref-for-3pixel-5">ピクセル</a>は、赤・緑・青の<a
                        href="#dfn-sample" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-sample-4">サンプル</a>からなる三つ組で構成されます。オプションのアルファチャネルは、赤・緑・青の<a href="#dfn-sample"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-sample-5">サンプル</a>の単一の三つ組として指定できます。画像中で赤・緑・青の<a href="#dfn-sample"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-sample-6">サンプル</a>がアルファチャネルの赤・緑・青の<a
                        href="#dfn-sample" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-sample-7">サンプル</a>と同一である<a href="#3pixel" class="internalDFN"
                        data-link-type="dfn" id="ref-for-3pixel-6">ピクセル</a>は完全に透過であり、それ以外は完全に不透明です。アルファチャネルがない場合、すべての<a
                        href="#3pixel" class="internalDFN" data-link-type="dfn" id="ref-for-3pixel-7">ピクセル</a>は完全に不透明です。
                </dd>

                <dt><dfn id="dfn-greyscale" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">グレースケール</dfn></dt>

                <dd>各ピクセルは単一の<dfn id="3greyscale" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">グレーサンプル</dfn>で構成され、これは黒から白までの全体的な<a href="#dfn-luminance"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-luminance-1">輝度</a>を表します。オプションのアルファチャネルは単一の<a href="#3greyscale"
                        class="internalDFN" data-link-type="dfn" id="ref-for-3greyscale-2">グレーサンプル</a>として指定できます。画像中で<a
                        href="#3greyscale" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3greyscale-3">グレーサンプル</a>がアルファチャネルの<a href="#3greyscale" class="internalDFN"
                        data-link-type="dfn" id="ref-for-3greyscale-4">グレーサンプル</a>と同一である<a href="#3pixel"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-3pixel-8">ピクセル</a>は完全に透過で、それ以外は完全に不透明です。アルファチャネルがない場合、すべての<a href="#3pixel"
                        class="internalDFN" data-link-type="dfn" id="ref-for-3pixel-9">ピクセル</a>は完全に不透明です。
                </dd>

                <dt><a href="#3indexedColour" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3indexedColour-6">インデックスカラー</a></dt>
                <dd>各ピクセルは、パレット（および存在する場合は関連するアルファ値テーブル）へのインデックスで構成されます。</dd>
            </dl>

            <p>各ピクセルのフォーマットは、PNG画像タイプとビット深度に依存します。インデックスカラー以外のPNG画像タイプでは、ビット深度はピクセルあたりの総ビット数ではなく、サンプルあたりのビット数を指定します。<a
                    href="#3indexedColour" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3indexedColour-7">インデックスカラー</a>画像では、ビット深度はパレットインデックスのビット数を指定し、パレット内の色やアルファテーブルのサンプル深度を指定するものではありません。ピクセル内でのサンプルの順序は、PNG画像タイプに応じて次の通りです。
            </p>


            <ol>
                <li><a href="#dfn-truecolor-with-alpha" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-truecolor-with-alpha-1">トゥルーカラー（アルファ付き）</a>：赤、緑、青、アルファ。</li>

                <li><a href="#dfn-greyscale-with-alpha" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-greyscale-with-alpha-1">グレースケール（アルファ付き）</a>：グレー、アルファ。</li>

                <li><a href="#3truecolour" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3truecolour-3">トゥルーカラー</a>：赤、緑、青。</li>

                <li><a href="#dfn-greyscale" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-greyscale-3">グレースケール</a>：グレー。</li>

                <li><a href="#3indexedColour" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3indexedColour-8">インデックスカラー</a>：パレットインデックス。</li>
            </ol>
        </section>


        <section id="4Concepts.Encoding">
            <div class="header-wrapper">
                <h3 id="x4-6-encoding-the-png-image"><bdi class="secno">4.6 </bdi>PNG画像のエンコード</h3><a class="self-link"
                    href="#4Concepts.Encoding" aria-label="Permalink for Section 4.6"></a>
            </div>



            <section class="introductory" id="4Concepts.EncodingIntro">
                <div class="header-wrapper">
                    <h3 id="introduction-2">はじめに</h3><a class="self-link" href="#4Concepts.EncodingIntro"
                        aria-label="Permalink for this Section"></a>
                </div>


                <p>PNG画像をエンコードするプロセスの概念モデルを<a href="#encoding-png-image" class="fig-ref"
                        title="Encoding the PNG image">Figure <bdi
                            class="">7</bdi></a>に示します。各ステップは、PNG画像内のピクセルまたはインデックスの配列に対する操作を指します。<a href="#3palette"
                        class="internalDFN" data-link-type="dfn" id="ref-for-3palette-1">パレット</a>や<a href="#3alphaTable"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-3alphaTable-1">アルファテーブル</a>は、この方法ではエンコードされません。</p>


                <ol>
                    <li>パス抽出：プログレッシブ表示を可能にするため、PNG画像のピクセルを並べ替えて、縮小画像（パス）と呼ばれる複数の小さな画像を形成できます。</li>

                    <li>スキャンライン直列化：画像はスキャンライン単位で直列化されます。スキャンライン内のピクセルは左から右、スキャンラインは上から下の順に並びます。</li>

                    <li>フィルタ処理：定義されたフィルタタイプのいずれかを用いて、各スキャンラインをフィルタ済みスキャンラインに変換し、画像圧縮に備えます。</li>

                    <li>圧縮：画像内のすべてのフィルタ済みスキャンラインに対して行われます。</li>

                    <li>チャンク化：圧縮された画像を扱いやすいサイズの複数チャンクに分割します。各チャンクにはエラー検出コードが追加されます。</li>

                    <li>データストリーム構築：チャンクをデータストリームに挿入します。</li>
                </ol>
            </section>


            <section id="4Concepts.EncodingPassAbs">
                <div class="header-wrapper">
                    <h4 id="x4-6-1-pass-extraction"><bdi class="secno">4.6.1 </bdi>パス抽出</h4><a class="self-link"
                        href="#4Concepts.EncodingPassAbs" aria-label="Permalink for Section 4.6.1"></a>
                </div>



                <p><dfn id="3passExtraction" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">パス抽出</dfn>（<a
                        href="#encoding-png-image" class="fig-ref" title="Encoding the PNG image">Figure <bdi
                            class="">7</bdi></a>参照）は、PNG画像を<dfn id="3reducedImage" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">縮小画像</dfn>の列に分割します。最初の画像が粗いビューを定義し、後続の画像がそれを順次改善し、最後の画像でPNG画像が完成します。縮小画像の集合はインターレースPNG画像とも呼ばれます。本仕様では2つのインターレース方式を定義します。1つ目はヌル方式で、ピクセルは左から右へ、スキャンラインは上から下へ順に格納されます。2つ目は画像に対して複数回の走査を行い、7つの縮小画像列を生成します。サンプル画像の7つのパスは<a
                        href="#encoding-png-image" class="fig-ref" title="Encoding the PNG image">Figure <bdi
                            class="">7</bdi></a>に示します。<a href="#8Interlace" class="sec-ref"><bdi class="secno">8.
                        </bdi>インターレースとパス抽出</a>を参照してください。</p>



                <figure id="encoding-png-image">

                    <img id="figure47" src="https://www.w3.org/TR/png-3/figures/encoding-png-image.svg">

                    <figcaption><a class="self-link" href="#encoding-png-image">Figure <bdi class="figno">7</bdi></a>
                        <span class="fig-title">
                            PNG画像のエンコード
                        </span>
                    </figcaption>
                </figure>

                <figure id="pass-extraction">

                    <img id="figure48" src="https://www.w3.org/TR/png-3/figures/pass-extraction.svg">

                    <figcaption><a class="self-link" href="#pass-extraction">Figure <bdi class="figno">8</bdi></a> <span
                            class="fig-title">
                            パス抽出
                        </span></figcaption>
                </figure>
            </section>




            <section id="4Concepts.EncodingScanlineAbs">
                <div class="header-wrapper">
                    <h4 id="x4-6-2-scanline-serialization"><bdi class="secno">4.6.2 </bdi>スキャンライン直列化</h4><a
                        class="self-link" href="#4Concepts.EncodingScanlineAbs"
                        aria-label="Permalink for Section 4.6.2"></a>
                </div>


                <p>スキャンラインと呼ばれる各ピクセル行は、バイト列として表現されます。</p>
            </section>


            <section id="4Concepts.EncodingFiltering">
                <div class="header-wrapper">
                    <h4 id="x4-6-3-filtering"><bdi class="secno">4.6.3 </bdi>フィルタ処理</h4><a class="self-link"
                        href="#4Concepts.EncodingFiltering" aria-label="Permalink for Section 4.6.3"></a>
                </div>


                <p>PNGでは、圧縮前に<a href="#dfn-image-data" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-image-data-1">画像データ</a>にフィルタ処理を適用できます。フィルタ処理はデータの圧縮効率を高める場合があります。フィルタ操作は決定的で可逆かつロスレスです。これにより、伸長後のデータを逆フィルタすることで元のデータを得られます。<a
                        href="#7Filtering" class="sec-ref"><bdi class="secno">7.3 </bdi>フィルタ処理</a>を参照してください。</p>
            </section>


            <section id="4Concepts.EncodingCompression">
                <div class="header-wrapper">
                    <h4 id="x4-6-4-compression"><bdi class="secno">4.6.4 </bdi>圧縮</h4><a class="self-link"
                        href="#4Concepts.EncodingCompression" aria-label="Permalink for Section 4.6.4"></a>
                </div>


                <p>PNG画像の各パス（複数パスがある場合はそれら）のフィルタ済みスキャンライン列は、定義された圧縮方式のいずれかで圧縮されます（<a href="#compression" class="fig-ref"
                        title="Compression and chunking">Figure <bdi
                            class="">9</bdi></a>参照）。連結されたフィルタ済みスキャンラインが圧縮段階への入力となり、圧縮段階の出力は単一の圧縮データストリームになります。<a
                        href="#10Compression" class="sec-ref"><bdi class="secno">10. </bdi>圧縮</a>を参照してください。</p>
            </section>


            <section id="4Concepts.EncodingChunking">
                <div class="header-wrapper">
                    <h4 id="x4-6-5-chunking"><bdi class="secno">4.6.5 </bdi>チャンク化</h4><a class="self-link"
                        href="#4Concepts.EncodingChunking" aria-label="Permalink for Section 4.6.5"></a>
                </div>


                <p>チャンク化は、圧縮データストリームを扱いやすいサイズのチャンクに分割するための便利な手段です（<a href="#compression" class="fig-ref"
                        title="Compression and chunking">Figure <bdi class="">9</bdi></a>参照）。各チャンクには独自の冗長性チェックが付与されます。<a
                        href="#11Chunks" class="sec-ref"><bdi class="secno">11. </bdi>チャンク仕様</a>を参照してください。</p>



                <figure id="compression">

                    <img id="figure410" src="https://www.w3.org/TR/png-3/figures/compression.svg">

                    <figcaption><a class="self-link" href="#compression">Figure <bdi class="figno">9</bdi></a> <span
                            class="fig-title">
                            圧縮とチャンク化
                        </span></figcaption>
                </figure>
            </section>
        </section>


        <section id="4Concepts.AncillInfo">
            <div class="header-wrapper">
                <h3 id="x4-7-additional-information"><bdi class="secno">4.7 </bdi>付加情報</h3><a class="self-link"
                    href="#4Concepts.AncillInfo" aria-label="Permalink for Section 4.7"></a>
            </div>


            <p>画像には補助情報を関連付けることができます。デコーダは、補助情報の全部または一部を無視してもかまいません。提供される補助情報の種類は、<a href="#table41" class="table-ref"
                    title="Types of ancillary information">Table <bdi class="">2</bdi></a>に記載しています。</p>


            <table id="table41" class="simple numbered">
                <caption><a class="self-link" href="#table41">Table <bdi class="tableno">2</bdi></a> <span
                        class="table-title">
                        補助情報の種類
                    </span></caption>

                <tbody>
                    <tr>
                        <th>情報の種類</th>
                        <th>説明</th>
                    </tr>

                    <tr>
                        <td>アニメーション情報</td>
                        <td>
                            フレームの連なりと、それに関連するタイミング、位置、処理情報で定義されるアニメーション画像。ビューアが対応している場合に表示されます。プリンタなどの他のケースでは、<a
                                href="#dfn-static-image" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-static-image-5">静止画像</a>が代わりに表示されます。
                        </td>
                    </tr>

                    <tr>
                        <td>背景色</td>
                        <td>より適切な選択肢がない場合に画像表示に用いる単色の背景色。</td>
                    </tr>

                    <tr>
                        <td>コーディング非依存コードポイント</td>
                        <td>
                            <a href="#dfn-transfer-function" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-transfer-function-7">伝達関数</a>や色の原色などのメタデータを列挙してカラースペースを識別します。
                            もとは<a href="#dfn-sdr" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-sdr-2">SDR</a>や<a href="#dfn-hdr" class="internalDFN"
                                data-link-type="dfn" id="ref-for-dfn-hdr-2">HDR</a>ビデオ向けですが、静止画像やアニメーション画像にも使用されます。
                        </td>
                    </tr>

                    <tr>
                        <td>コンテンツ光度情報</td>
                        <td>画像（または画像列）中で最も明るいピクセルの<a href="#dfn-luminance" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-luminance-2">輝度</a>と、列の中で最も明るいフレームの平均輝度レベル。</td>
                    </tr>

                    <tr>
                        <td>EXIF情報</td>
                        <td>シャッタースピード、絞り、向きなどのExchangeable image file formatメタデータ。</td>
                    </tr>

                    <tr>
                        <td>ガンマと色度</td>
                        <td>
                            望ましい出力強度に対する画像の<a href="#dfn-gamma-value" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-gamma-value-2">ガンマ値</a>、および画像で使用されるRGB値の<a href="#dfn-chromaticity"
                                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-chromaticity-3">色度</a>特性。
                        </td>
                    </tr>

                    <tr>
                        <td>ICCプロファイル</td>
                        <td>画像内のサンプルが準拠するカラースペース（International Color Consortium（ICC）プロファイルの形）の記述。</td>
                    </tr>

                    <tr>
                        <td>画像ヒストグラム</td>
                        <td>各パレットエントリが画像でどの程度使用されるかの推定。</td>
                    </tr>

                    <tr>
                        <td>マスタリングディスプレイ色域</td>
                        <td>コンテンツの制作に用いられたディスプレイの絶対的な3次元カラーボリューム（マスタリングディスプレイが再現可能な最も明るい色と暗い色を含む）の記述。表示装置上での画像提示に役立ちます。
                        </td>
                    </tr>

                    <tr>
                        <td>物理ピクセル寸法</td>
                        <td>PNG画像の提示に用いる意図したピクセルサイズとアスペクト比。</td>
                    </tr>

                    <tr>
                        <td>有効ビット</td>
                        <td>サンプル内で有効なビット数。</td>
                    </tr>

                    <tr>
                        <td>sRGBカラースペース</td>
                        <td>（International Color Consortiumで定義される）レンダリングインテントと、画像サンプルがこのカラースペースに準拠していることの指示。</td>
                    </tr>

                    <tr>
                        <td>推奨パレット</td>
                        <td>表示装置が画像の全色域を表示できない場合に使用できる縮小パレット。</td>
                    </tr>

                    <tr>
                        <td>テキストデータ</td>
                        <td>画像に関連付けられた（圧縮されている場合がある）テキスト情報。</td>
                    </tr>

                    <tr>
                        <td>時刻</td>
                        <td>PNG画像が最後に変更された時刻。</td>
                    </tr>

                    <tr>
                        <td>透過</td>
                        <td>PNG画像にアルファチャネルが保持されない場合に、参照画像の再構成を可能にするアルファ情報。</td>
                    </tr>
                </tbody>
            </table>
        </section>


        <section id="4Concepts.Format">
            <div class="header-wrapper">
                <h3 id="x4-8-png-datastream"><bdi class="secno">4.8 </bdi>PNGデータストリーム</h3><a class="self-link"
                    href="#4Concepts.Format" aria-label="Permalink for Section 4.8"></a>
            </div>



            <section id="4Concepts.FormatChunks">
                <div class="header-wrapper">
                    <h4 id="x4-8-1-chunks"><bdi class="secno">4.8.1 </bdi>チャンク</h4><a class="self-link"
                        href="#4Concepts.FormatChunks" aria-label="Permalink for Section 4.8.1"></a>
                </div>


                <p>PNGデータストリームは、PNGシグネチャ（<a href="#5PNG-file-signature" class="sec-ref"><bdi class="secno">5.2
                        </bdi>PNGシグネチャ</a>参照）に続くチャンクの列（<a href="#11Chunks" class="sec-ref"><bdi class="secno">11.
                        </bdi>チャンク仕様</a>参照）で構成されます。各チャンクには、その機能を指定するチャンクタイプがあります。</p>
            </section>


            <section id="4Concepts.FormatTypes">
                <div class="header-wrapper">
                    <h4 id="x4-8-2-chunk-types"><bdi class="secno">4.8.2 </bdi>チャンクタイプ</h4><a class="self-link"
                        href="#4Concepts.FormatTypes" aria-label="Permalink for Section 4.8.2"></a>
                </div>


                <p>チャンクタイプは4バイトの並びで、ISO 646.IRV:1991（[<cite><a class="bibref" data-link-type="biblio" href="#bib-iso646"
                            title="Information technology — ISO 7-bit coded character set for information interchange">ISO646</a></cite>]）文字集合として解釈したときに可読ラベルに対応するように選ばれます。最初の4つはクリティカルチャンクと呼ばれ、本仕様の規定に従って理解され、正しく解釈されなければなりません。これらは次の通りです。
                </p>


                <ol>
                    <li>
                        <a class="chunk" href="#11IHDR">IHDR</a>：画像ヘッダ。PNGデータストリーム内の最初のチャンク。
                    </li>

                    <li>
                        <a class="chunk" href="#11PLTE">PLTE</a>：インデックスPNG画像に関連付けられるパレットテーブル。
                    </li>

                    <li>
                        <a class="chunk" href="#11IDAT">IDAT</a>：画像データチャンク。
                    </li>

                    <li>
                        <a class="chunk" href="#11IEND">IEND</a>：画像終端。PNGデータストリーム内の最後のチャンク。
                    </li>
                </ol>


                <p>残りのチャンクタイプは<dfn class="lint-ignore" id="3ancillaryChunk" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">補助チャンク</dfn>タイプと呼ばれ、エンコーダは生成でき、デコーダは解釈してもかまいません。</p>


                <ol>
                    <li>透過情報：<a class="chunk" href="#11tRNS">tRNS</a>（<a href="#11transinfo" class="sec-ref"><bdi
                                class="secno">11.3.1 </bdi>透過情報</a>参照）。
                    </li>

                    <li>カラースペース情報：<a class="chunk" href="#11cHRM">cHRM</a>、<a class="chunk" href="#11gAMA">gAMA</a>、
                        <a class="chunk" href="#11iCCP">iCCP</a>、<a class="chunk" href="#11sBIT">sBIT</a>、<a
                            class="chunk" href="#11sRGB">sRGB</a>、<a class="chunk" href="#cICP-chunk">cICP</a>、<a
                            class="chunk" href="#mDCV-chunk">mDCV</a>（<a href="#11addnlcolinfo" class="sec-ref"><bdi
                                class="secno">11.3.2 </bdi>カラースペース情報</a>参照）。
                    </li>

                    <li>テキスト情報：<a class="chunk" href="#11iTXt">iTXt</a>、<a class="chunk" href="#11tEXt">tEXt</a>、<a
                            class="chunk" href="#11zTXt">zTXt</a>（<a href="#11textinfo" class="sec-ref"><bdi
                                class="secno">11.3.3 </bdi>テキスト情報</a>参照）。
                    </li>

                    <li>その他情報：<a class="chunk" href="#11bKGD">bKGD</a>、<a class="chunk" href="#11hIST">hIST</a>、
                        <a class="chunk" href="#11pHYs">pHYs</a>、<a class="chunk" href="#11sPLT">sPLT</a>、<a
                            class="chunk" href="#eXIf">eXIf</a>（<a href="#11addnlsiinfo" class="sec-ref"><bdi
                                class="secno">11.3.4 </bdi>その他情報</a>参照）。
                    </li>

                    <li>時刻情報：<a class="chunk" href="#11tIME">tIME</a>（<a href="#11timestampinfo" class="sec-ref"><bdi
                                class="secno">11.3.5 </bdi>タイムスタンプ情報</a>参照）。
                    </li>

                    <li>アニメーション情報：<a class="chunk" href="#acTL-chunk">acTL</a>、<a class="chunk"
                            href="#fcTL-chunk">fcTL</a>、
                        <a class="chunk" href="#fdAT-chunk">fdAT</a>（<a href="#animation-information"
                            class="sec-ref"><bdi class="secno">11.3.6 </bdi>アニメーション情報</a>参照）。
                    </li>
                </ol>
            </section>
        </section>

        <section id="apng-frame-based-animation">
            <div class="header-wrapper">
                <h3 id="x4-9-apng-frame-based-animation"><bdi class="secno">4.9 </bdi><abbr
                        title="Animated PNG">APNG</abbr>：フレームベースアニメーション</h3><a class="self-link"
                    href="#apng-frame-based-animation" aria-label="Permalink for Section 4.9"></a>
            </div>


            <section class="introductory" id="introduction-0">
                <div class="header-wrapper">
                    <h3 id="introduction-3">はじめに</h3><a class="self-link" href="#introduction-0"
                        aria-label="Permalink for this Section"></a>
                </div>


                <p>Animated PNG（<abbr title="Animated PNG">APNG</abbr>）は、元の静止のみのPNGフォーマットを拡張し、<a href="#dfn-frame"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-frame-1">フレーム</a>ベースのアニメーション画像をサポートします。これは従来GIFフォーマット（[<cite><a class="bibref"
                            data-link-type="biblio" href="#bib-gif"
                            title="Graphics Interchange Format">GIF</a></cite>]）が用いられてきた単純なアニメーション画像の代替を意図しており、GIFにはない24ビット画像や8ビット透過もサポートします。
                </p>

                <p><abbr
                        title="Animated PNG">APNG</abbr>はPNGの以前のバージョンとの後方互換性を備えています。非アニメーション対応のPNGデコーダは、APNG特有の補助チャンクを無視して<a
                        href="#dfn-static-image" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-static-image-6">静止画像</a>を表示します。
                </p>
            </section>

            <section id="structure">
                <div class="header-wrapper">
                    <h4 id="x4-9-1-structure"><bdi class="secno">4.9.1 </bdi>構造</h4><a class="self-link"
                        href="#structure" aria-label="Permalink for Section 4.9.1"></a>
                </div>


                <p><abbr
                        title="Animated PNG">APNG</abbr>ストリームは、PNG仕様の以前の版で定義された通常のPNGストリームに、アニメーションを記述し追加のフレームデータを提供する3種類のチャンクタイプを追加したものです。
                </p>

                <p><abbr title="Animated PNG">APNG</abbr>として認識されるためには、<a class="chunk"
                        href="#acTL-chunk">acTL</a>チャンクがストリーム中の任意の<a class="chunk"
                        href="#11IDAT">IDAT</a>チャンクより前に現れなければなりません。<a class="chunk" href="#acTL-chunk">acTL</a>の構造は<a
                        href="#animation-information">後述</a>します。
                </p>

                <p>各再生の開始時点では、概念的に<a href="#dfn-output-buffer" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-output-buffer-1">出力バッファ</a>は、<a class="chunk"
                        href="#11IHDR">IHDR</a>チャンクの幅と高さに基づく寸法の、<a href="#dfn-fully-transparent-black"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-fully-transparent-black-1">完全に透過な黒</a>の長方形として完全に初期化されます。</p>

                <p><a class="chunk" href="#11IDAT">IDAT</a>の前に単一の<a class="chunk"
                        href="#fcTL-chunk">fcTL</a>チャンクが存在することにより、静止画像をアニメーションの最初のフレームとして含めることができます。そうでない場合、静止画像はアニメーションの一部ではありません。
                </p>

                <p>後続フレームは<a class="chunk" href="#fdAT-chunk">fdAT</a>チャンクにエンコードされ、これは<a class="chunk"
                        href="#11IDAT">IDAT</a>チャンクと同じ構造ですが、前に<a
                        href="#4Concepts.APNGSequence">シーケンス番号</a>が付きます。各フレームの配置とレンダリングに関する情報は<a class="chunk"
                        href="#fcTL-chunk">fcTL</a>チャンクに格納されます。<a class="chunk" href="#fdAT-chunk">fdAT</a>および<a
                        class="chunk" href="#fcTL-chunk">fcTL</a>チャンクの詳細な構造は<a href="#animation-information">後述</a>します。
                </p>

                <p>アニメーション全体の境界は、デフォルト画像がアニメーションの一部かどうかに関係なく、<a class="chunk"
                        href="#11IHDR">IHDR</a>チャンクの幅と高さのパラメータで指定されます。デフォルト画像は、後続フレームに追加のスペースが必要になる場合、<a
                        href="#dfn-fully-transparent-black" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-fully-transparent-black-2">完全に透過な黒</a>のピクセルで適切にパディングされるべきです。</p>

                <p>各フレームは各再生において同一であるため、アプリケーションがフレームをキャッシュしても安全です。</p>
            </section>

            <section id="4Concepts.APNGSequence">
                <div class="header-wrapper">
                    <h4 id="x4-9-2-sequence-numbers"><bdi class="secno">4.9.2 </bdi>シーケンス番号</h4><a class="self-link"
                        href="#4Concepts.APNGSequence" aria-label="Permalink for Section 4.9.2"></a>
                </div>


                <p><a class="chunk" href="#fcTL-chunk">fcTL</a>および<a class="chunk"
                        href="#fdAT-chunk">fdAT</a>チャンクには、ゼロ基準の4バイトのシーケンス番号があります。両チャンクタイプは同じ番号系列を共有します。この番号の目的は、補助チャンクの順序に制限を課さない本仕様において、Animated
                    PNGのシーケンスエラーを検出（および任意に修正）することです。</p>

                <p>最初の<a class="chunk" href="#fcTL-chunk">fcTL</a>チャンクはシーケンス番号0を含み、残りの<a class="chunk"
                        href="#fcTL-chunk">fcTL</a>および<a class="chunk"
                        href="#fdAT-chunk">fdAT</a>チャンクのシーケンス番号は、欠落や重複なしに昇順でなければなりません。</p>

                <p>以下の表は、複数フレームを持つ画像や、2番目のフレームに複数の<a class="chunk"
                        href="#fdAT-chunk">fdAT</a>チャンクがある場合のシーケンス番号の使用例を示します。（明瞭さのため、<a class="chunk"
                        href="#11IHDR">IHDR</a>および<a class="chunk" href="#11IEND">IEND</a>チャンクは省略しています。）</p>

                <table class="numbered simple" id="table-if-the-static-image-is-also-the-first-frame">
                    <caption><a class="self-link" href="#table-if-the-static-image-is-also-the-first-frame">Table <bdi
                                class="tableno">3</bdi></a> <span class="table-title">
                            静止画像が最初のフレームでもある場合
                        </span></caption>

                    <tbody>
                        <tr>
                            <th>シーケンス番号</th>
                            <th>チャンク</th>
                        </tr>

                        <tr>
                            <td>（なし）</td>
                            <td>
                                <a class="chunk" href="#acTL-chunk">acTL</a>
                            </td>
                        </tr>

                        <tr>
                            <td>0</td>
                            <td>
                                <a class="chunk" href="#fcTL-chunk">fcTL</a> 最初のフレーム
                            </td>
                        </tr>

                        <tr>
                            <td>（なし）</td>
                            <td>
                                <a class="chunk" href="#11IDAT">IDAT</a> 最初のフレーム／静止画像
                            </td>
                        </tr>

                        <tr>
                            <td>1</td>
                            <td>
                                <a class="chunk" href="#fcTL-chunk">fcTL</a> 2番目のフレーム
                            </td>
                        </tr>

                        <tr>
                            <td>2</td>
                            <td>
                                2番目のフレームの最初の<a class="chunk" href="#fdAT-chunk">fdAT</a>
                            </td>
                        </tr>

                        <tr>
                            <td>3</td>
                            <td>
                                2番目のフレームの2番目の<a class="chunk" href="#fdAT-chunk">fdAT</a>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <table class="numbered simple" id="table-if-the-static-image-is-not-part-of-the-animation">
                    <caption><a class="self-link" href="#table-if-the-static-image-is-not-part-of-the-animation">Table
                            <bdi class="tableno">4</bdi></a> <span class="table-title">
                            静止画像がアニメーションの一部でない場合
                        </span></caption>

                    <tbody>
                        <tr>
                            <th>シーケンス番号</th>
                            <th>チャンク</th>
                        </tr>

                        <tr>
                            <td>（なし）</td>
                            <td>
                                <a class="chunk" href="#acTL-chunk">acTL</a>
                            </td>
                        </tr>

                        <tr>
                            <td>（なし）</td>
                            <td>
                                <a class="chunk" href="#11IDAT">IDAT</a> 静止画像
                            </td>
                        </tr>

                        <tr>
                            <td>0</td>
                            <td>
                                <a class="chunk" href="#fcTL-chunk">fcTL</a> 最初のフレーム
                            </td>
                        </tr>

                        <tr>
                            <td>1</td>
                            <td>
                                最初のフレームの最初の<a class="chunk" href="#fdAT-chunk">fdAT</a>
                            </td>
                        </tr>

                        <tr>
                            <td>2</td>
                            <td>
                                最初のフレームの2番目の<a class="chunk" href="#fdAT-chunk">fdAT</a>
                            </td>
                        </tr>

                        <tr>
                            <td>3</td>
                            <td>
                                <a class="chunk" href="#fcTL-chunk">fcTL</a> 2番目のフレーム
                            </td>
                        </tr>

                        <tr>
                            <td>4</td>
                            <td>
                                2番目のフレームの最初の<a class="chunk" href="#fdAT-chunk">fdAT</a>
                            </td>
                        </tr>

                        <tr>
                            <td>5</td>
                            <td>
                                2番目のフレームの2番目の<a class="chunk" href="#fdAT-chunk">fdAT</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <section id="apng-output-buffer">
                <div class="header-wrapper">
                    <h4 id="x4-9-3-output-buffer"><bdi class="secno">4.9.3 </bdi>出力バッファ</h4><a class="self-link"
                        href="#apng-output-buffer" aria-label="Permalink for Section 4.9.3"></a>
                </div>


                <p><dfn id="dfn-output-buffer" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">出力バッファ</dfn>は、PNGの<a class="chunk"
                        href="#11IHDR">IHDR</a>チャンクの幅と高さパラメータで指定される寸法のピクセル配列です。概念的には、各フレームは<a href="#dfn-canvas"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canvas-1">キャンバス</a>へ<a
                        href="#dfn-composited" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-composited-2">合成</a>される前に出力バッファ内で構築されます。出力バッファの内容はデコーダから参照可能です。出力バッファの四隅は<a
                        href="#dfn-canvas" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-canvas-2">キャンバス</a>の四隅に対応付けられます。
                </p>
            </section>

            <section id="apng-canvas">
                <div class="header-wrapper">
                    <h4 id="x4-9-4-canvas"><bdi class="secno">4.9.4 </bdi>キャンバス</h4><a class="self-link"
                        href="#apng-canvas" aria-label="Permalink for Section 4.9.4"></a>
                </div>


                <p><dfn id="dfn-canvas" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">キャンバス</dfn>は、フレームを表示する出力装置上の領域です。キャンバスの内容は、必ずしもデコーダから参照できるとは限りません。<a
                        class="chunk" href="#11bKGD">bKGD</a>チャンクが存在する場合、より望ましい背景がないときにキャンバスの塗りつぶしに使用してもよいです。</p>
            </section>

        </section>


        <section id="4Concepts.Errors">
            <div class="header-wrapper">
                <h3 id="x4-10-error-handling"><bdi class="secno">4.10 </bdi>エラー処理</h3><a class="self-link"
                    href="#4Concepts.Errors" aria-label="Permalink for Section 4.10"></a>
            </div>


            <p>PNGデータストリームのエラーは、一般に次の2つのクラスに分類されます。</p>


            <ol>
                <li>データストリームの多くまたは全体を破損させる傾向がある、伝送エラーやコンピュータファイルシステムの損傷。</li>

                <li>チャンク内の無効値や、欠落または誤配置されたチャンクとして現れる構文エラー。構文エラーはエンコードミスだけでなく、デコーダが未知の登録済みまたはプライベート値の使用によっても引き起こされ得ます。
                </li>
            </ol>

            <p>PNGデコーダは、可能な限り早期にエラーを検出し、可能な場合はエラーから回復し、そうでない場合は穏やかに失敗すべきです。エラー処理の考え方については、<a href="#13Decoders.Errors"
                    class="sec-ref"><bdi class="secno">13.1 </bdi>エラー処理</a>で詳述します。</p>
        </section>


        <section class="informative" id="4Concepts.Registration">
            <div class="header-wrapper">
                <h3 id="x4-11-extensions"><bdi class="secno">4.11 </bdi>拡張</h3><a class="self-link"
                    href="#4Concepts.Registration" aria-label="Permalink for Section 4.11"></a>
            </div>
            <p><em>この節は参考（非規範）です。</em></p>


            <p>PNG形式はいくつかの拡張ポイントを公開しています。</p>

            <ul>
                <li>
                    <a href="#sec-defining-new-chunks">チャンクタイプ</a>；
                </li>

                <li>
                    <a href="#11tEXt">テキストキーワード</a>；
                </li>

                <li>
                    <a href="#dfn-private-field-values" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-private-field-values-1">プライベートフィールド値</a>。
                </li>
            </ul>

            <p>これらの拡張ポイントの一部は<abbr title="World Wide Web Consortium">W3C</abbr>により予約されており、他は私的利用に開放されています。</p>
        </section>
    </section>


    <section id="5DataRep">
        <div class="header-wrapper">
            <h2 id="x5-datastream-structure"><bdi class="secno">5. </bdi>データストリーム構造</h2><a class="self-link"
                href="#5DataRep" aria-label="Permalink for Section 5."></a>
        </div>



        <section id="5Introduction">
            <div class="header-wrapper">
                <h3 id="x5-1-png-datastream"><bdi class="secno">5.1 </bdi>PNGデータストリーム</h3><a class="self-link"
                    href="#5Introduction" aria-label="Permalink for Section 5.1"></a>
            </div>



            <p><dfn id="3PNGdatastream" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">PNGデータストリーム</dfn>は、PNGシグネチャに続くチャンク列で構成されます。これは<a href="#3PNGimage"
                    class="internalDFN" data-link-type="dfn" id="ref-for-3PNGimage-2">PNG画像</a>をエンコードした結果です。</p>

            <div class="note" role="note" id="issue-container-generatedID-8">
                <div role="heading" class="note-title marker" id="h-note-8" aria-level="4"><span>注</span></div>
                <p class="">
                    「ファイル」ではなくデータストリームという用語を用いるのは、バイト列がファイルの一部に過ぎない場合があるためです。また、バイト列が保存ファイルに全く現れず、「オンザフライ」で生成・消費される可能性を強調するためでもあります。
                </p>
            </div>
        </section>


        <section id="5PNG-file-signature">
            <div class="header-wrapper">
                <h3 id="3PNGsignature"><bdi class="secno">5.2 </bdi>PNGシグネチャ</h3><a class="self-link"
                    href="#3PNGsignature" aria-label="Permalink for Section 5.2"></a>
            </div>



            <p>PNGデータストリームの最初の8バイトは常に、次の16進値を含みます。</p>

            <pre aria-busy="false"><code class="hljs">
89 50 4E 47 0D 0A 1A 0A</code></pre>
            <p>このシグネチャは、データストリームの残りが単一のPNG画像を含み、<a class="chunk" href="#11IHDR">IHDR</a>チャンクで始まり<a class="chunk"
                    href="#11IEND">IEND</a>チャンクで終わる一連のチャンクから構成されていることを示します。</p>

            <p>このシグネチャにより、PNGデータストリームは他の種類の<a href="#dfn-datastream" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-datastream-1">データストリーム</a>と区別され、いくつかの伝送エラーを早期に検出できるようになります。</p>
        </section>


        <section id="5Chunk-layout">
            <div class="header-wrapper">
                <h3 id="x5-3-chunk-layout"><bdi class="secno">5.3 </bdi>チャンクレイアウト</h3><a class="self-link"
                    href="#5Chunk-layout" aria-label="Permalink for Section 5.3"></a>
            </div>



            <p>各<dfn id="3chunk" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">チャンク</dfn>は3つまたは4つのフィールドで構成されます（<a href="#figure411" class="fig-ref"
                    title="Chunk parts">Figure <bdi class="">10</bdi></a>参照）。各フィールドの意味は<a href="#table51"
                    class="table-ref" title="Chunk fields">Table <bdi
                        class="">5</bdi></a>に記載されています。チャンクデータフィールドは空であっても構いません。
            </p>

            <figure id="figure411">

                <img style="width: 70vw" src="https://www.w3.org/TR/png-3/figures/chunk-parts.svg">

                <figcaption><a class="self-link" href="#figure411">Figure <bdi class="figno">10</bdi></a> <span
                        class="fig-title">
                        チャンクの構成要素
                    </span></figcaption>
            </figure>


            <table id="table51" class="numbered simple">
                <caption><a class="self-link" href="#table51">Table <bdi class="tableno">5</bdi></a> <span
                        class="table-title">
                        チャンクのフィールド
                    </span></caption>

                <tbody>
                    <tr>
                        <th>名称</th>
                        <th>説明</th>
                    </tr>

                    <tr>
                        <td>長さ</td>
                        <td>
                            <a href="#dfn-png-four-byte-unsigned-integer" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-png-four-byte-unsigned-integer-1">PNG
                                4バイト符号なし整数</a>で、チャンクのデータフィールド内のバイト数を示します。長さはデータフィールド<strong>のみ</strong>を数え、長さ自身、チャンクタイプ、<abbr
                                title="Cyclic Redundancy Code">CRC</abbr>は<strong>含みません</strong>。ゼロも有効な長さです。エンコーダとデコーダは長さを符号なしとして扱うべきですが、その値は2<sup>31</sup>-1バイトを超えてはなりません。
                        </td>
                    </tr>

                    <tr>
                        <td>チャンクタイプ</td>
                        <td>
                            チャンクタイプを定義する4バイトの並びです。チャンクタイプの各バイトは、16進値41〜5Aおよび61〜7Aに制限されます。これは、説明やPNGデータストリームの検査の便宜上、ISO
                            646 [<cite><a class="bibref" data-link-type="biblio" href="#bib-iso646"
                                    title="Information technology — ISO 7-bit coded character set for information interchange">ISO646</a></cite>]の大文字・小文字に対応します（<code>A</code>-<code>Z</code>および<code>a</code>-<code>z</code>）。エンコーダおよびデコーダは、チャンクタイプを文字列ではなく固定のバイナリ値として扱わなければなりません。例えば、チャンクタイプ<a
                                class="chunk" href="#11IDAT">IDAT</a>をUCS
                            2文字集合内のそれらの文字に相当するもので表現するのは正しくありません。チャンクタイプの追加の命名規則については、<a
                                href="#5Chunk-naming-conventions" class="sec-ref"><bdi class="secno">5.4
                                </bdi>チャンクの命名規則</a>で述べます。
                        </td>
                    </tr>

                    <tr>
                        <td>チャンクデータ</td>
                        <td>該当する場合、チャンクタイプに応じたデータバイト。
                            <span id="zero-length-data">このフィールドは長さゼロであり得ます。</span>
                        </td>
                    </tr>

                    <tr>
                        <td><abbr title="Cyclic Redundancy Code">CRC</abbr></td>
                        <td>
                            チャンク内の直前のバイト（チャンクタイプフィールドおよびチャンクデータフィールドを含むが、長さフィールドは<strong>含まない</strong>）に対して計算される4バイトの<abbr
                                title="Cyclic Redundancy Code">CRC</abbr>です。<abbr
                                title="Cyclic Redundancy Code">CRC</abbr>はデータの破損チェックに利用できます。データを含まないチャンクでも、<abbr
                                title="Cyclic Redundancy Code">CRC</abbr>は常に存在します。<a href="#5CRC-algorithm"
                                class="sec-ref"><bdi class="secno">5.5
                                </bdi><abbr title="Cyclic Redundancy Code">CRC</abbr>アルゴリズム</a>を参照してください。
                        </td>
                    </tr>
                </tbody>
            </table>

            <p>チャンクデータの長さは最大値まで任意のバイト数になり得るため、実装者はバイトより大きな境界にチャンクが整列していると仮定してはなりません。</p>
        </section>




        <section id="5Chunk-naming-conventions">
            <div class="header-wrapper">
                <h3 id="x5-4-chunk-naming-conventions"><bdi class="secno">5.4 </bdi>チャンクの命名規則</h3><a class="self-link"
                    href="#5Chunk-naming-conventions" aria-label="Permalink for Section 5.4"></a>
            </div>


            <p>チャンクタイプは、そのバイトをISO 646の文字 [<cite><a class="bibref" data-link-type="biblio" href="#bib-iso646"
                        title="Information technology — ISO 7-bit coded character set for information interchange">ISO646</a></cite>]として解釈したときに意味のある名称になるように選ばれます。チャンクタイプは、タイプが認識されない場合でもデコーダがチャンクの性質をある程度判断できるように割り当てられています。これらの規則により、PNGデコーダが未知のチャンクに遭遇した際の扱いを決定できるため、PNG形式の安全で柔軟な拡張が可能になります。
            </p>

            <p>命名規則は通常、<a href="#13Decoders" class="sec-ref"><bdi class="secno">13.
                    </bdi>PNGデコーダとビューア</a>で規定されるように、デコーダがチャンクタイプを認識しない場合にのみ関心の対象となります。
            </p>

            <p>チャンクタイプの4つのビット、すなわち各バイトの第5ビット（値32）がプロパティビットとして、チャンクの性質を伝えるために使用されます。この選択により、人間がチャンクタイプの各バイトに対応する文字が大文字（ビット5が0）か小文字（ビット5が1）かによって、割り当てられた性質を読み取れます。
            </p>

            <p>プロパティビットはチャンクタイプ固有の一部であり、したがって任意のチャンクタイプに対して固定です。したがって、<span class="chunk">CHNK</span>と<span
                    class="chunk">cHNk</span>は、同じチャンクが異なる性質を持つのではなく、関連のない別個のチャンクタイプです。
            </p>

            <p>プロパティビットの意味は<a href="#table52" class="table-ref" title="Semantics of property bits">Table <bdi
                        class="">6</bdi></a>に定義されています。</p>


            <table id="table52" class="numbered simple">
                <caption><a class="self-link" href="#table52">Table <bdi class="tableno">6</bdi></a> <span
                        class="table-title">
                        プロパティビットの意味
                    </span></caption>

                <tbody>
                    <tr>
                        <th>名称と位置</th>
                        <th>定義</th>
                        <th>説明</th>
                    </tr>

                    <tr>
                        <td>補助ビット：1バイト目</td>
                        <td>0（大文字）＝クリティカル、<br>
                            1（小文字）＝補助。</td>
                        <td>
                            クリティカルチャンクは、データストリームの内容を正しく表示するために必要です（例：画像ヘッダチャンク（<a class="chunk"
                                href="#11IHDR">IHDR</a>））。デコーダが画像を抽出しようとして、補助ビットが0の未知のチャンクタイプに遭遇した場合、当該画像に安全に解釈できない情報が含まれていることをユーザに示さなければなりません。<br>
                            補助チャンクは、データストリームの内容を意味のある形で表示するのに厳密には必要ではありません（例：時刻チャンク（<a class="chunk"
                                href="#11tIME">tIME</a>））。補助ビットが1の未知のチャンクタイプに遭遇したデコーダは、そのチャンクを安全に無視して画像の表示を続行できます。
                        </td>
                    </tr>

                    <tr>
                        <td>プライベートビット：2バイト目</td>
                        <td>0（大文字）＝パブリック、<br>
                            1（小文字）＝プライベート。</td>
                        <td>
                            パブリックチャンクは<abbr title="World Wide Web Consortium">W3C</abbr>が定義のために予約しています。プライベートチャンクの定義は、<a
                                href="#12Use-of-private-chunks" class="sec-ref"><bdi class="secno">12.10.1
                                </bdi>プライベートチャンクの利用</a>に規定されています。プライベートチャンク名の2文字目は小文字、パブリックチャンク名の2文字目は大文字です。
                        </td>
                    </tr>

                    <tr>
                        <td>予約ビット：3バイト目</td>
                        <td>この版のPNGでは0（大文字）。<br>
                            予約ビットが1の場合、そのデータストリームはこの版のPNGに適合しません。</td>
                        <td>チャンク名の3文字目の大文字・小文字の意味は、将来の拡張のために予約されています。この国際規格では、すべてのチャンク名は3文字目が大文字でなければなりません。</td>
                    </tr>

                    <tr>
                        <td>コピー安全ビット：4バイト目</td>
                        <td>0（大文字）＝コピー非安全、<br>
                            1（小文字）＝コピー安全。</td>
                        <td>
                            このプロパティビットは純粋なデコーダには関係ありませんが、<a href="#dfn-png-editor" class="internalDFN"
                                data-link-type="dfn"
                                id="ref-for-dfn-png-editor-2">PNGエディタ</a>には必要です。このビットは、修正されているデータストリーム内の未認識チャンクの適切な取り扱いを定義します。<a
                                href="#dfn-png-editor" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-png-editor-3">PNGエディタ</a>の規則は、<a href="#14Ordering" class="sec-ref"><bdi
                                    class="secno">14.2
                                </bdi>PNGエディタの動作</a>でさらに議論します。
                        </td>
                    </tr>
                </tbody>
            </table>

            <p class="example">仮想的なチャンクタイプ「<span class="chunk">cHNk</span>」のプロパティビットは次のとおりです。</p>

            <pre
                aria-busy="false"><code class="hljs javascript">cHNk  &lt;-- <span class="hljs-number">32</span> bit chunk type represented <span class="hljs-keyword">in</span> text form
||||
|||+- <span class="hljs-title class_">Safe</span>-to-copy bit is <span class="hljs-number">1</span> (lower <span class="hljs-keyword">case</span> letter; bit <span class="hljs-number">5</span> is <span class="hljs-number">1</span>)
||+-- <span class="hljs-title class_">Reserved</span> bit is <span class="hljs-number">0</span>     (upper <span class="hljs-keyword">case</span> letter; bit <span class="hljs-number">5</span> is <span class="hljs-number">0</span>)
|+--- <span class="hljs-title class_">Private</span> bit is <span class="hljs-number">0</span>      (upper <span class="hljs-keyword">case</span> letter; bit <span class="hljs-number">5</span> is <span class="hljs-number">0</span>)
+---- <span class="hljs-title class_">Ancillary</span> bit is <span class="hljs-number">1</span>    (lower <span class="hljs-keyword">case</span> letter; bit <span class="hljs-number">5</span> is <span class="hljs-number">1</span>)</code></pre>
            <p>したがって、この名称は、補助・パブリック・コピー安全なチャンクを表します。</p>
        </section>


        <section id="5CRC-algorithm">
            <div class="header-wrapper">
                <h3 id="x5-5-crc-algorithm"><bdi class="secno">5.5 </bdi><abbr title="Cyclic Redundancy Code">CRC</abbr>
                    アルゴリズム</h3><a class="self-link" href="#5CRC-algorithm" aria-label="Permalink for Section 5.5"></a>
            </div>


            <p><abbr title="Cyclic Redundancy Code">CRC</abbr>フィールドは、[<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-iso-3309"
                        title="ISO/IEC 3309:1993, Information Technology — Telecommunications and information exchange between systems — High-level data link control (HDLC) procedures — Frame structure.">ISO-3309</a></cite>]および[<cite><a
                        class="bibref" data-link-type="biblio" href="#bib-itu-t-v.42"
                        title="ITU-T V.42, SERIES V: DATA COMMUNICATION OVER THE TELEPHONE NETWORK. Error-correcting procedures for DCEs using asynchronous-to-synchronous conversion">ITU-T-V.42</a></cite>]で定義される事前・事後条件付きの標準化された<abbr
                    title="Cyclic Redundancy Code">CRC</abbr>手法を用いて計算されます。採用される<abbr
                    title="Cyclic Redundancy Code">CRC</abbr>多項式（GZIPファイル形式仕様 [<cite><a class="bibref"
                        data-link-type="biblio" href="#bib-rfc1952"
                        title="GZIP file format specification version 4.3">RFC1952</a></cite>]で使用されるものと同一）は次の通りです。</p>

            <p>x<sup>32</sup> + x<sup>26</sup> + x<sup>23</sup> + x<sup>22</sup> + x<sup>16</sup> + x<sup>12</sup> +
                x<sup>11</sup> +
                x<sup>10</sup> + x<sup>8</sup> + x<sup>7</sup> + x<sup>5</sup> + x<sup>4</sup> + x<sup>2</sup> + x + 1
            </p>

            <p>PNGでは、32ビット<abbr
                    title="Cyclic Redundancy Code">CRC</abbr>はすべて1で初期化され、各バイトのデータは最下位ビット（1）から最上位ビット（128）へ処理されます。すべてのデータバイトが処理された後、<abbr
                    title="Cyclic Redundancy Code">CRC</abbr>は反転されます（1の補数が取られます）。この値は<abbr
                    title="Most Significant Byte">MSB</abbr>から順に送信（データストリームに格納）されます。バイトへの分割と順序付けのため、32ビット<abbr
                    title="Cyclic Redundancy Code">CRC</abbr>の最下位ビットは、<code>x<sup>31</sup></code>項の係数であると定義されます。
            </p>

            <p><abbr title="Cyclic Redundancy Code">CRC</abbr>の実用的な計算では、計算を高速化するためにあらかじめ計算されたテーブルがよく用いられます。<a
                    href="#D-CRCAppendix" class="sec-ref"><bdi class="secno">D. </bdi>サンプル<abbr
                        title="Cyclic Redundancy Code">CRC</abbr>実装</a>を参照してください。</p>
        </section>


        <section id="5ChunkOrdering">
            <div class="header-wrapper">
                <h3 id="x5-6-chunk-ordering"><bdi class="secno">5.6 </bdi>チャンク順序</h3><a class="self-link"
                    href="#5ChunkOrdering" aria-label="Permalink for Section 5.6"></a>
            </div>


            <p>各チャンクの配置に関する制約は<a href="#table53" class="table-ref" title="Chunk ordering rules">Table <bdi
                        class="">7</bdi></a>に一覧し、静止画像については<a href="#lattice-diagram-with-plte" class="fig-ref"
                    title="Lattice diagram: Static PNG images with PLTE">Figure <bdi class="">11</bdi></a>および<a
                    href="#lattice-diagram-without-plte" class="fig-ref"
                    title="Lattice diagram: Static PNG images without PLTE">Figure <bdi
                        class="">12</bdi></a>に模式的に示します。静止画像が最初のフレームを構成するアニメーション画像については、<a
                    href="#lattice-apng-static-with-plte" class="fig-ref"
                    title="Lattice diagram: Animated PNG images with PLTE, static image forms the first frame">Figure
                    <bdi class="">13</bdi></a>および<a href="#lattice-apng-static-without-plte" class="fig-ref"
                    title="Lattice diagram: Animated PNG images without PLTE, static image forms the first frame">Figure
                    <bdi class="">14</bdi></a>に、静止画像がアニメーションの一部でない場合は<a href="#lattice-apng-nostatic-with-plte"
                    class="fig-ref"
                    title="Lattice diagram: Animated PNG images with PLTE, static image not part of animation">Figure
                    <bdi class="">15</bdi></a>および<a href="#lattice-apng-nostatic-without-plte" class="fig-ref"
                    title="Lattice diagram: Animated PNG images without PLTE, static image not part of animation">Figure
                    <bdi
                        class="">16</bdi></a>に示します。これらのラティス図は、本仕様によって課される配置上の制約を表します。図中の線は部分順序関係を定義します。上にあるチャンクは下にあるチャンクよりも前に現れなければなりません。水平方向に整列し、他の2種類のチャンク（その水平方向に整列したチャンクよりも上と下にある）に挟まれて現れるチャンクは、それら上位および下位のチャンクタイプの間で、任意の順序で現れて構いません。チャンクタイプに付された上付き文字の意味は<a
                    href="#table54" class="table-ref" title="Meaning of symbols used in lattice diagrams">Table <bdi
                        class="">8</bdi></a>で定義されます。これは、チャンクが必須か任意か、複数回現れ得るかを示します。2つのチャンクタイプの間の縦棒は代替を示します。</p>




            <table id="table53" class="numbered simple">
                <caption><a class="self-link" href="#table53">Table <bdi class="tableno">7</bdi></a> <span
                        class="table-title">
                        チャンクの順序規則
                    </span></caption>

                <tbody>
                    <tr>
                        <th colspan="3">クリティカルチャンク<br>
                            （この順序で現れなければならない。PLTEは任意）</th>
                    </tr>

                    <tr>
                        <th>チャンク名</th>
                        <th>複数可</th>
                        <th>順序制約</th>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#11IHDR">IHDR</a>
                        </td>
                        <td>いいえ</td>
                        <td>最初でなければならない</td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#11PLTE">PLTE</a>
                        </td>
                        <td>いいえ</td>
                        <td>
                            最初の<a class="chunk" href="#11IDAT">IDAT</a>の前
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#11IDAT">IDAT</a>
                        </td>
                        <td>はい</td>
                        <td>
                            複数の<a class="chunk" href="#11IDAT">IDAT</a>チャンクは連続していなければならない
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#11IEND">IEND</a>
                        </td>
                        <td>いいえ</td>
                        <td>最後でなければならない</td>
                    </tr>

                    <tr>
                        <th colspan="3">補助チャンク<br>
                            （この順序で現れる必要はない）</th>
                    </tr>

                    <tr>
                        <th>チャンク名</th>
                        <th>複数可</th>
                        <th>順序制約</th>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#acTL-chunk">acTL</a>
                        </td>
                        <td>いいえ</td>
                        <td>
                            <a class="chunk" href="#11IDAT">IDAT</a>の前
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#11cHRM">cHRM</a>
                        </td>
                        <td>いいえ</td>
                        <td>
                            <a class="chunk" href="#11PLTE">PLTE</a>および<a class="chunk" href="#11IDAT">IDAT</a>の前
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#cICP-chunk">cICP</a>
                        </td>
                        <td>いいえ</td>
                        <td>
                            <a class="chunk" href="#11PLTE">PLTE</a>および<a class="chunk" href="#11IDAT">IDAT</a>の前
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#11gAMA">gAMA</a>
                        </td>
                        <td>いいえ</td>
                        <td>
                            <a class="chunk" href="#11PLTE">PLTE</a>および<a class="chunk" href="#11IDAT">IDAT</a>の前
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#11iCCP">iCCP</a>
                        </td>
                        <td>いいえ</td>
                        <td>
                            <a class="chunk" href="#11PLTE">PLTE</a>および<a class="chunk" href="#11IDAT">IDAT</a>の前。<a
                                class="chunk" href="#11iCCP">iCCP</a>チャンクが存在する場合、<a class="chunk"
                                href="#11sRGB">sRGB</a>チャンクは存在すべきではありません。
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#mDCV-chunk">mDCV</a>
                        </td>
                        <td>いいえ</td>
                        <td>
                            <a class="chunk" href="#11PLTE">PLTE</a>および<a class="chunk" href="#11IDAT">IDAT</a>の前
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#cLLI-chunk">cLLI</a>
                        </td>
                        <td>いいえ</td>
                        <td>
                            <a class="chunk" href="#11PLTE">PLTE</a>および<a class="chunk" href="#11IDAT">IDAT</a>の前
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#11sBIT">sBIT</a>
                        </td>
                        <td>いいえ</td>
                        <td>
                            <a class="chunk" href="#11PLTE">PLTE</a>および<a class="chunk" href="#11IDAT">IDAT</a>の前
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#11sRGB">sRGB</a>
                        </td>
                        <td>いいえ</td>
                        <td>
                            <a class="chunk" href="#11PLTE">PLTE</a>および<a class="chunk" href="#11IDAT">IDAT</a>の前。<a
                                class="chunk" href="#11sRGB">sRGB</a>チャンクが存在する場合、<a class="chunk"
                                href="#11iCCP">iCCP</a>チャンクは存在すべきではありません。
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#11bKGD">bKGD</a>
                        </td>
                        <td>いいえ</td>
                        <td>
                            <a class="chunk" href="#11PLTE">PLTE</a>の後；<a class="chunk" href="#11IDAT">IDAT</a>の前
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#11hIST">hIST</a>
                        </td>
                        <td>いいえ</td>
                        <td>
                            <a class="chunk" href="#11PLTE">PLTE</a>の後；<a class="chunk" href="#11IDAT">IDAT</a>の前
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#11tRNS">tRNS</a>
                        </td>
                        <td>いいえ</td>
                        <td>
                            <a class="chunk" href="#11PLTE">PLTE</a>の後；<a class="chunk" href="#11IDAT">IDAT</a>の前
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#eXIf">eXIf</a>
                        </td>
                        <td>いいえ</td>
                        <td>
                            <a class="chunk" href="#11IDAT">IDAT</a>の前
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#fcTL-chunk">fcTL</a>
                        </td>
                        <td>はい</td>
                        <td>
                            1つは<a class="chunk" href="#11IDAT">IDAT</a>の前に現れてもよい；他はすべて<a class="chunk"
                                href="#11IDAT">IDAT</a>の後でなければならない
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#11pHYs">pHYs</a>
                        </td>
                        <td>いいえ</td>
                        <td>
                            <a class="chunk" href="#11IDAT">IDAT</a>の前
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#11sPLT">sPLT</a>
                        </td>
                        <td>はい</td>
                        <td>
                            <a class="chunk" href="#11IDAT">IDAT</a>の前
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#fdAT-chunk">fdAT</a>
                        </td>
                        <td>はい</td>
                        <td>
                            <a class="chunk" href="#11IDAT">IDAT</a>の後
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#11tIME">tIME</a>
                        </td>
                        <td>いいえ</td>
                        <td>なし</td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#11iTXt">iTXt</a>
                        </td>
                        <td>はい</td>
                        <td>なし</td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#11tEXt">tEXt</a>
                        </td>
                        <td>はい</td>
                        <td>なし</td>
                    </tr>

                    <tr>
                        <td>
                            <a class="chunk" href="#11zTXt">zTXt</a>
                        </td>
                        <td>はい</td>
                        <td>なし</td>
                    </tr>
                </tbody>
            </table>


            <table id="table54" class="numbered simple">
                <caption><a class="self-link" href="#table54">Table <bdi class="tableno">8</bdi></a> <span
                        class="table-title">
                        ラティス図で用いる記号の意味
                    </span></caption>

                <tbody>
                    <tr>
                        <th>記号</th>
                        <th>意味</th>
                    </tr>

                    <tr>
                        <td>+</td>
                        <td>1回以上</td>
                    </tr>

                    <tr>
                        <td>1</td>
                        <td>1回のみ</td>
                    </tr>

                    <tr>
                        <td>?</td>
                        <td>0回または1回</td>
                    </tr>

                    <tr>
                        <td>*</td>
                        <td>0回以上</td>
                    </tr>

                    <tr>
                        <td>|</td>
                        <td>代替</td>
                    </tr>
                </tbody>
            </table>




            <figure id="lattice-diagram-with-plte">

                <img id="figure52" src="https://www.w3.org/TR/png-3/figures/lattice-diagram-with-plte.svg">

                <figcaption><a class="self-link" href="#lattice-diagram-with-plte">Figure <bdi
                            class="figno">11</bdi></a> <span class="fig-title">
                        ラティス図：<a class="chunk" href="#11PLTE">PLTE</a>ありの静止PNG画像
                    </span></figcaption>
            </figure>

            <figure id="lattice-diagram-without-plte">

                <img id="figure53" src="https://www.w3.org/TR/png-3/figures/lattice-diagram-without-plte.svg">

                <figcaption><a class="self-link" href="#lattice-diagram-without-plte">Figure <bdi
                            class="figno">12</bdi></a> <span class="fig-title">
                        ラティス図：<a class="chunk" href="#11PLTE">PLTE</a>なしの静止PNG画像
                    </span></figcaption>
            </figure>

            <figure id="lattice-apng-static-with-plte">
                <img id="figure52a"
                    src="https://www.w3.org/TR/png-3/figures/lattice-diagram-apng-static-first-with-plte.svg">

                <figcaption><a class="self-link" href="#lattice-apng-static-with-plte">Figure <bdi
                            class="figno">13</bdi></a> <span class="fig-title">
                        ラティス図：<a class="chunk" href="#11PLTE">PLTE</a>ありのAnimated PNG（静止画像が最初のフレーム）
                    </span></figcaption>
            </figure>

            <figure id="lattice-apng-static-without-plte">
                <img id="figure53a"
                    src="https://www.w3.org/TR/png-3/figures/lattice-diagram-apng-static-first-without-plte.svg">

                <figcaption><a class="self-link" href="#lattice-apng-static-without-plte">Figure <bdi
                            class="figno">14</bdi></a> <span class="fig-title">
                        ラティス図：<a class="chunk" href="#11PLTE">PLTE</a>なしのAnimated PNG（静止画像が最初のフレーム）
                    </span></figcaption>
            </figure>

            <figure id="lattice-apng-nostatic-with-plte">
                <img id="figure52b"
                    src="https://www.w3.org/TR/png-3/figures/lattice-diagram-apng-static-notfirst-with-plte.svg">

                <figcaption><a class="self-link" href="#lattice-apng-nostatic-with-plte">Figure <bdi
                            class="figno">15</bdi></a> <span class="fig-title">
                        ラティス図：<a class="chunk" href="#11PLTE">PLTE</a>ありのAnimated PNG（静止画像はアニメーションの一部ではない）
                    </span></figcaption>
            </figure>

            <figure id="lattice-apng-nostatic-without-plte">
                <img id="figure53b"
                    src="https://www.w3.org/TR/png-3/figures/lattice-diagram-apng-static-notfirst-without-plte.svg">

                <figcaption><a class="self-link" href="#lattice-apng-nostatic-without-plte">Figure <bdi
                            class="figno">16</bdi></a> <span class="fig-title">
                        ラティス図：<a class="chunk" href="#11PLTE">PLTE</a>なしのAnimated PNG（静止画像はアニメーションの一部ではない）
                    </span></figcaption>
            </figure>
        </section>

        <section id="sec-defining-new-chunks">
            <div class="header-wrapper">
                <h3 id="x5-7-defining-chunks"><bdi class="secno">5.7 </bdi>チャンクの定義</h3><a class="self-link"
                    href="#sec-defining-new-chunks" aria-label="Permalink for Section 5.7"></a>
            </div>


            <section id="sec-defining-public-chunks-general">
                <div class="header-wrapper">
                    <h4 id="x5-7-1-general"><bdi class="secno">5.7.1 </bdi>一般</h4><a class="self-link"
                        href="#sec-defining-public-chunks-general" aria-label="Permalink for Section 5.7.1"></a>
                </div>


                <p>すべてのチャンク（プライベートおよびパブリック）は、[<cite><a class="bibref" data-link-type="biblio" href="#bib-png-extensions"
                            title="Extensions to the PNG Third Edition Specification, Version 1.6.0">PNG-EXTENSIONS</a></cite>]に一覧化される<em
                        class="rfc2119">SHOULD</em>です。
                </p>
            </section>

            <section id="sec-defining-public-chunks">
                <div class="header-wrapper">
                    <h4 id="x5-7-2-defining-public-chunks"><bdi class="secno">5.7.2 </bdi>パブリックチャンクの定義</h4><a
                        class="self-link" href="#sec-defining-public-chunks"
                        aria-label="Permalink for Section 5.7.2"></a>
                </div>


                <p>パブリックチャンクは<abbr title="World Wide Web Consortium">W3C</abbr>が定義のために予約しています。
                </p>

                <p>パブリックチャンクは、PNGの理念に合致する広範な利用を意図しています。</p>

                <p>組織やアプリケーションは、上記の基準を満たす任意のチャンクを<a
                        href="https://www.w3.org/groups/wg/png">PNGワーキンググループ</a>にパブリックチャンクとして定義するため提出することが推奨されます。</p>

                <p>パブリックチャンクとしての定義は自動的でも即時でもありません。提案されたパブリックチャンクタイプは、そのように定義されるまでは、公的に利用可能なソフトウェアやデータストリームで使用<em
                        class="rfc2119">SHALL</em>ありません。</p>

                <p>新たなクリティカルチャンクタイプの定義は、必要な場合を除き非推奨です。</p>
            </section>

            <section id="sec-defining-private-chunks">
                <div class="header-wrapper">
                    <h4 id="x5-7-3-defining-private-chunks"><bdi class="secno">5.7.3 </bdi>プライベートチャンクの定義</h4>
                    <a class="self-link" href="#sec-defining-private-chunks"
                        aria-label="Permalink for Section 5.7.3"></a>
                </div>


                <p>組織およびアプリケーションは、プライベートおよび実験的な用途のためにプライベートチャンクを定義すること<em class="rfc2119">MAY</em>です。</p>

                <p>プライベートチャンクは、人間のユーザにとってのみ関心のあるテキスト情報を運ぶためだけに定義<em class="rfc2119">SHOULD NOT</em>です。代わりに<a
                        class="chunk" href="#11iTXt">iTXt</a>チャンクを使用<em class="rfc2119">SHOULD</em> BEし、対応するキーワードを使用<em
                        class="rfc2119">SHOULD</em> BEし、適切なキーワードを定義してください。</p>

                <p>プライベートチャンクを[<cite><a class="bibref" data-link-type="biblio" href="#bib-png-extensions"
                            title="Extensions to the PNG Third Edition Specification, Version 1.6.0">PNG-EXTENSIONS</a></cite>]に一覧化することは、同じプライベートチャンクが異なるアプリケーションで非互換な目的に使われる可能性を減らしますが、完全には排除しません。プライベートチャンクタイプを使用する場合、競合のリスクをさらに減らすために、追加の識別情報をチャンクデータの先頭に保存<em
                        class="rfc2119">SHOULD</em> BEです。</p>

                <p>画像の表示に絶対不可欠ではない情報を保存するすべてのプライベートチャンクには、クリティカルチャンクタイプではなく補助チャンクタイプを使用<em
                        class="rfc2119">SHOULD</em>です。</p>

                <p>プライベートクリティカルチャンクは定義<em class="rfc2119">SHOULD
                        NOT</em>です。なぜなら、そのようなチャンクを含むPNGデータストリームは移植性がなく、公的に利用可能なソフトウェアやデータストリームで使用<em
                        class="rfc2119">SHOULD
                        NOT</em>だからです。プライベートクリティカルチャンクがアプリケーションにとって不可欠な場合は、標準デコーダがデータストリームを処理できないと早い段階で判明するように、データストリームの先頭付近に現れる<em
                        class="rfc2119">SHOULD</em>です。
                </p>

                <p>プライベートチャンクの定義に関する追加の指針については、<a href="#newchunks" class="sec-ref"><bdi class="secno">B.
                        </bdi>プライベートチャンクタイプに関するガイドライン</a>を参照してください。</p>
            </section>
        </section>

        <section id="sec-field-value-extensibility">
            <div class="header-wrapper">
                <h3 id="x5-8-private-field-values"><bdi class="secno">5.8 </bdi>プライベートフィールド値</h3><a class="self-link"
                    href="#sec-field-value-extensibility" aria-label="Permalink for Section 5.8"></a>
            </div>


            <p>次のフィールドにおいて、128以上の値は<dfn id="dfn-private-field-values" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">プライベートフィールド値</dfn>です。</p>

            <ul>
                <li>
                    ビット深度
                </li>
                <li>
                    <a href="#3colourType" id="ref-for-3colourType-1">カラータイプ</a>
                </li>
                <li>
                    <a href="#10CompressionCM0">圧縮方式</a>
                </li>

                <li>
                    <a href="#8InterlaceMethods">インターレース方式</a>
                </li>

                <li>
                    <a href="#9FtIntro">フィルタ方式</a>
                </li>
            </ul>

            <p>これらの<a href="#dfn-private-field-values" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-private-field-values-2">プライベートフィールド値</a>は、本仕様では定義も予約もされていません。</p>

            <p><a href="#dfn-private-field-values" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-private-field-values-3">プライベートフィールド値</a>は、実験的またはプライベートな意味のために使用<em
                    class="rfc2119">MAY</em>です。</p>

            <p><a href="#dfn-private-field-values" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-private-field-values-4">プライベートフィールド値</a>は、PNGデコーダで読み取り不能なデータストリームを生じ得るため（<a
                    href="#13Decoders" class="sec-ref"><bdi class="secno">13.
                    </bdi>PNGデコーダとビューア</a>参照）、公的に利用可能なソフトウェアやデータストリームには出現<em class="rfc2119">SHOULD NOT</em>です。</p>
        </section>
    </section>




    <section id="6Transformation">
        <div class="header-wrapper">
            <h2 id="x6-reference-image-to-png-image-transformation"><bdi class="secno">6. </bdi>参照画像からPNG画像への変換</h2><a
                class="self-link" href="#6Transformation" aria-label="Permalink for Section 6."></a>
        </div>



        <section id="6Colour-values">
            <div class="header-wrapper">
                <h3 id="x6-1-color-types-and-values"><bdi class="secno">6.1 </bdi>カラータイプと値</h3><a class="self-link"
                    href="#6Colour-values" aria-label="Permalink for Section 6.1"></a>
            </div>


            <p><a href="#4Concepts.PNGImage" class="sec-ref"><bdi class="secno">4.5
                    </bdi>PNG画像</a>で説明したように、PNG画像には5種類があります。
                各タイプに対応して、<a id="colorType" href="#3colourType" class="internalDFN" data-link-type="dfn"><dfn
                        id="3colourType" data-plurals="color types" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">カラータイプ</dfn></a>があり、これは次の値の総和です：1（パレット使用）、2（<a href="#3truecolour"
                    class="internalDFN" data-link-type="dfn" id="ref-for-3truecolour-4">トゥルーカラー</a>使用）、4（アルファ使用）。<a
                    href="#dfn-greyscale" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-greyscale-4">グレースケール</a>および<a href="#3truecolour" class="internalDFN"
                    data-link-type="dfn" id="ref-for-3truecolour-5">トゥルーカラー</a>画像は明示的なアルファチャネルを持つことがあります。PNG画像タイプと対応する<a
                    href="#3colourType" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3colourType-3">カラータイプ</a>は<a href="#table6.1" class="table-ref"
                    title="PNG image types and color types">Table <bdi class="">9</bdi></a>に示します。</p>


            <table id="table6.1" class="numbered simple">
                <caption><a class="self-link" href="#table6.1">Table <bdi class="tableno">9</bdi></a> <span
                        class="table-title">
                        PNG画像タイプとカラータイプ
                    </span></caption>

                <tbody>
                    <tr>
                        <th>PNG画像タイプ</th>
                        <th>カラータイプ</th>
                    </tr>

                    <tr>
                        <td>グレースケール</td>
                        <td>0</td>
                    </tr>

                    <tr>
                        <td>トゥルーカラー</td>
                        <td>2</td>
                    </tr>

                    <tr>
                        <td>インデックスカラー</td>
                        <td>3</td>
                    </tr>

                    <tr>
                        <td>グレースケール（アルファ付き）</td>
                        <td>4</td>
                    </tr>

                    <tr>
                        <td>トゥルーカラー（アルファ付き）</td>
                        <td>6</td>
                    </tr>
                </tbody>
            </table>

            <p>各PNG画像タイプで許可されるビット深度とサンプル深度は、<a href="#11IHDR">画像ヘッダ</a>に示します。</p>

            <p>グレースケールサンプルは、転送曲線が（<a class="chunk" href="#11gAMA">gAMA</a>、
                <a class="chunk" href="#11sRGB">sRGB</a>、<a class="chunk" href="#11iCCP">iCCP</a>、または<a
                    href="#cICP-chunk" class="chunk">cICP</a>により）示されている場合は輝度を表し、示されていない場合はデバイス依存のグレースケールを表します。
                RGBサンプルは、カラースペースが（<a class="chunk" href="#11gAMA">gAMA</a>と<a class="chunk" href="#11cHRM">cHRM</a>、<a
                    class="chunk" href="#11sRGB">sRGB</a>、<a class="chunk" href="#11iCCP">iCCP</a>、または<a
                    href="#cICP-chunk"
                    class="chunk">cICP</a>により）示されている場合はキャリブレーション済みの色情報を表し、示されていない場合は非キャリブレーションのデバイス依存色を表します。
            </p>

            <p>サンプル値は必ずしも光強度に比例しません。<a class="chunk"
                    href="#11gAMA">gAMA</a>チャンクは、サンプル値と表示出力強度の関係を指定します。ビューアは適切に補正することが強く推奨されます。<a
                    href="#4Concepts.ColourSpaces" class="sec-ref"><bdi class="secno">4.3 </bdi>カラースペース</a>、<a
                    href="#13Decoder-gamma-handling" class="sec-ref"><bdi class="secno">13.13
                    </bdi>デコーダのガンマ処理</a>、および<a href="#C-GammaAppendix" class="sec-ref"><bdi class="secno">C.
                    </bdi>ガンマと色度</a>を参照してください。</p>
        </section>


        <section id="6AlphaRepresentation">
            <div class="header-wrapper">
                <h3 id="x6-2-alpha-representation"><bdi class="secno">6.2 </bdi>アルファ表現</h3><a class="self-link"
                    href="#6AlphaRepresentation" aria-label="Permalink for Section 6.2"></a>
            </div>


            <p>PNGデータストリームにおける透明性の表現は、PNG画像タイプに応じて4通りあります（<a href="#4Concepts.Implied-alpha" class="sec-ref"><bdi
                        class="secno">4.4.1 </bdi><span>アルファ分離</span></a>および<a href="#4Concepts.Alpha-indexing"
                    class="sec-ref"><bdi class="secno">4.4.4 </bdi><span>アルファ圧縮</span></a>参照）。</p>


            <ol>
                <li>
                    <a href="#dfn-truecolor-with-alpha" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-truecolor-with-alpha-2">トゥルーカラー（アルファ付き）</a>、<a href="#dfn-greyscale-with-alpha"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-greyscale-with-alpha-2">グレースケール（アルファ付き）</a>：アルファチャネルが画像配列の一部です。
                </li>

                <li>
                    <a href="#3truecolour" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3truecolour-6">トゥルーカラー</a>、<a href="#dfn-greyscale" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-greyscale-5">グレースケール</a>：<a class="chunk"
                        href="#11tRNS">tRNS</a>チャンクが単一のピクセル値を含み、完全に透過なピクセルと完全に不透明なピクセルを区別します。
                </li>

                <li><a href="#3indexedColour" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3indexedColour-9">インデックスカラー</a>：<a class="chunk"
                        href="#11tRNS">tRNS</a>チャンクは、各パレットエントリに対応するアルファサンプルを関連付けるアルファテーブルを含みます。
                </li>

                <li>
                    <a href="#3truecolour" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3truecolour-7">トゥルーカラー</a>、<a href="#dfn-greyscale" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-greyscale-6">グレースケール</a>、<a href="#3indexedColour"
                        class="internalDFN" data-link-type="dfn" id="ref-for-3indexedColour-10">インデックスカラー</a>：<a
                        class="chunk" href="#11tRNS">tRNS</a>チャンクが存在せず、すべてのピクセルは完全に不透明です。
                </li>
            </ol>

            <p>画像配列に含まれるアルファチャネルは、他のサンプルと同じサイズの8ビットまたは16ビットのサンプルを持ちます。各ピクセルのアルファサンプルは、そのピクセルのグレースケールまたはRGBサンプルの直後に格納されます。アルファ値0は完全透過を表し、2<sup>sampledepth</sup>
                - 1の値は完全不透明を表します。
                中間の値は部分的に透過なピクセルを示し、背景画像に<a href="#dfn-composited" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-composited-3">合成</a>することで出力画像を得られます。</p>

            <p>ピクセル内の色値は、そのピクセルに割り当てられたアルファ値で事前乗算（premultiplied）されていません。この規則は「非関連（unassociated）」あるいは「非プリマルチプライド（non-premultiplied）アルファ」と呼ばれることがあります。（別の一般的な手法として、サンプル値をアルファ値で事前乗算して格納する方法があります。この場合、その画像は事実上黒背景に<a
                    href="#dfn-composited" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-composited-4">合成</a>済みです。PNGは<strong>プリマルチプライドアルファを使用しません</strong>。その結果、画像エディタはPNG画像の透明度を容易に変更できます。）<a
                    href="#12Alpha-channel-creation" class="sec-ref"><bdi class="secno">12.3
                    </bdi>アルファチャネルの作成</a>および<a href="#13Alpha-channel-processing" class="sec-ref"><bdi
                        class="secno">13.16 </bdi>アルファチャネル処理</a>を参照してください。</p>
        </section>
    </section>




    <section id="7Transformation">
        <div class="header-wrapper">
            <h2 id="x7-encoding-the-png-image-as-a-png-datastream"><bdi class="secno">7. </bdi>PNG画像をPNGデータストリームとしてエンコード
            </h2><a class="self-link" href="#7Transformation" aria-label="Permalink for Section 7."></a>
        </div>



        <section id="7Integers-and-byte-order">
            <div class="header-wrapper">
                <h3 id="x7-1-integers-and-byte-order"><bdi class="secno">7.1 </bdi>整数とバイト順</h3><a class="self-link"
                    href="#7Integers-and-byte-order" aria-label="Permalink for Section 7.1"></a>
            </div>


            <p>1バイトを超える整数はすべて<a href="#dfn-network-byte-order" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-byte-order-1">ネットワークバイト順</a>（<a href="#integer-representation-in-png"
                    class="fig-ref" title="Integer representation in PNG">Figure <bdi
                        class="">17</bdi></a>参照）でなければなりません。すなわち、最上位バイトが先で、その後に重要度の低いバイトが重要度の降順で続きます（2バイト整数では<abbr
                    title="Most Significant Byte">MSB</abbr> <abbr
                    title="Least Significant Byte">LSB</abbr>、4バイト整数では<abbr title="Most Significant Byte">MSB</abbr> B2
                B1 <abbr
                    title="Least Significant Byte">LSB</abbr>）。バイトの最上位ビット（値128）はビット7とし、最下位ビット（値1）はビット0とします。特に断りがない限り値は符号なしです。符号付きと明示された値は、2の補数表現で表されます。
            </p>

            <p><a href="#dfn-png-four-byte-unsigned-integer" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-png-four-byte-unsigned-integer-2">PNG
                    4バイト符号なし整数</a>は、符号なし4バイト値の扱いが困難な言語に配慮して、0から2<sup>31</sup>-1の範囲に制限されています。</p>

            <figure id="integer-representation-in-png">

                <img id="figure71" src="https://www.w3.org/TR/png-3/figures/integer-representation-in-png.svg">

                <figcaption><a class="self-link" href="#integer-representation-in-png">Figure <bdi
                            class="figno">17</bdi></a> <span class="fig-title">
                        PNGにおける整数の表現
                    </span></figcaption>
            </figure>
        </section>


        <section id="7Scanline">
            <div class="header-wrapper">
                <h3 id="x7-2-scanlines"><bdi class="secno">7.2 </bdi>スキャンライン</h3><a class="self-link" href="#7Scanline"
                    aria-label="Permalink for Section 7.2"></a>
            </div>


            <p>PNG画像（またはパス。<a href="#8Interlace" class="sec-ref"><bdi class="secno">8.
                    </bdi>インターレースとパス抽出</a>参照）は長方形のピクセル配列であり、各スキャンライン内ではピクセルは左から右へ、スキャンラインは上から下へ並びます。各ピクセルのサイズは、ピクセルあたりのビット数によって決まります。
            </p>

            <p>スキャンライン内のピクセルは常に、ピクセル間に無駄なビットが生じないようバイト列に詰められます。スキャンラインは常にバイト境界から始まります。許可されるビット深度と<a href="#3colourType"
                    class="internalDFN" data-link-type="dfn"
                    id="ref-for-3colourType-4">カラータイプ</a>は、いずれの場合もパッキングが単純かつ効率的になるよう制限されています。</p>

            <p><a href="#3colourType" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3colourType-5">カラータイプ</a>0（グレースケール）のPNG画像では、各ピクセルは1つのサンプルであり、1バイト未満の精度（1、2、または4ビット）を持つことがあります。これらのサンプルは、スキャンラインの左端のサンプルがバイトの上位ビットになるように、続くサンプルとともにバイトに詰められます。
            </p>

            <p><a href="#3colourType" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3colourType-6">カラータイプ</a>3（インデックスカラー）のPNG画像では、各ピクセルは単一のパレットインデックスです。これらのインデックスは、<a
                    href="#3colourType" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3colourType-7">カラータイプ</a>0のサンプルと同様にバイトへ詰められます。</p>

            <p>1バイトあたり複数のピクセルが含まれる場合、スキャンラインの最後のバイトの下位ビットの一部が未使用となることがあります。これら未使用ビットの内容は規定されません。</p>

            <p><a href="#3indexedColour" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3indexedColour-11">インデックスカラー</a>でないPNG画像では、ビット深度16のサンプル値を持つことがあります。これらのサンプル値は<a
                    href="#dfn-network-byte-order" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-byte-order-2">ネットワークバイト順</a>（<abbr
                    title="Most Significant Byte">MSB</abbr>が先、<abbr
                    title="Least Significant Byte">LSB</abbr>が後）です。PNGでは複数サンプルのピクセルは8ビットまたは16ビットのサンプルに限られるため、単一ピクセルの複数サンプルが1バイトに詰められることはありません。
            </p>
        </section>




        <section id="7Filtering">
            <div class="header-wrapper">
                <h3 id="x7-3-filtering"><bdi class="secno">7.3 </bdi>フィルタ処理</h3><a class="self-link" href="#7Filtering"
                    aria-label="Permalink for Section 7.3"></a>
            </div>



            <p><dfn id="3filter" data-plurals="filter methods" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">フィルタ方式</dfn>は、<a href="#dfn-scanline" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-scanline-2">スキャンライン</a>配列に適用され、圧縮効率の向上を目的とした変換です。</p>

            <p>PNGは1つの<a href="#3filter" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3filter-1">フィルタ方式</a>と、圧縮に備えて<a href="#dfn-image-data" class="internalDFN"
                    data-link-type="dfn"
                    id="ref-for-dfn-image-data-2">画像データ</a>を準備するために使用できる複数のフィルタタイプを標準化しています。この変換は、フィルタタイプのバイトを先頭に付けた、同じ長さのバイト列へと変換します（例は<a
                    href="#serializing-and-filtering-scanline" class="fig-ref"
                    title="Serializing and filtering a scanline">Figure <bdi class="">18</bdi></a>参照）。
            </p>

            <p>エンコーダは、インターレースPNG画像に対して単一の<a href="#3filter" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3filter-2">フィルタ方式</a>のみを使用しなければなりませんが、縮小画像の各スキャンラインごとに異なるフィルタタイプを使用しても構いません。賢いエンコーダはスキャンラインごとにフィルタを切り替えることができます。どのフィルタを使用するかの選択方法はエンコーダに委ねられます。
            </p>

            <p>フィルタタイプのバイトは<a href="#dfn-image-data" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-image-data-3">画像データ</a>の一部とは見なされませんが、圧縮ステップに送られるデータストリームには含まれます。<a href="#9Filters"
                    class="sec-ref"><bdi class="secno">9. </bdi>フィルタ処理</a>を参照してください。</p>

            <figure id="serializing-and-filtering-scanline">

                <img id="figure49" src="https://www.w3.org/TR/png-3/figures/serializing-and-filtering-scanline.svg">

                <figcaption><a class="self-link" href="#serializing-and-filtering-scanline">Figure <bdi
                            class="figno">18</bdi></a> <span class="fig-title">
                        スキャンラインの直列化とフィルタ処理
                    </span></figcaption>
            </figure>
        </section>
    </section>




    <section id="8Interlace">
        <div class="header-wrapper">
            <h2 id="x8-interlacing-and-pass-extraction"><bdi class="secno">8. </bdi>インターレースとパス抽出</h2>
            <a class="self-link" href="#8Interlace" aria-label="Permalink for Section 8."></a>
        </div>



        <section class="introductory" id="8InterlaceIntro">
            <div class="header-wrapper">
                <h3 id="introduction-4">はじめに</h3><a class="self-link" href="#8InterlaceIntro"
                    aria-label="Permalink for this Section"></a>
            </div>


            <p>パス抽出（<a href="#figure48">Figure
                    4.8</a>参照）は、PNG画像を縮小画像（インターレースPNG画像）の列に分割します。最初の画像が粗いビューを定義し、続く画像がこの粗いビューを順次改善し、最後の画像でPNG画像が完成します。これにより、デコーダはインターレースPNG画像をプログレッシブに表示でき、オンザフライ表示時に画像が「フェードイン」することを可能にします。平均すると、インターレースはデータストリームサイズをわずかに増加させますが、より迅速に意味のある表示をユーザに提供できます。
            </p>
        </section>


        <section id="8InterlaceMethods">
            <div class="header-wrapper">
                <h3 id="x8-1-interlace-methods"><bdi class="secno">8.1 </bdi>インターレース方式</h3><a class="self-link"
                    href="#8InterlaceMethods" aria-label="Permalink for Section 8.1"></a>
            </div>


            <p>この国際規格では、インターレース方式として0と1の2つを定義します。その他の値は将来の標準化のために予約されています。</p>

            <p>インターレース方式0（ヌル方式）では、ピクセルは左から右へ順に抽出され、スキャンラインは上から下へ順に抽出されます。インターレースPNG画像は単一の縮小画像です。</p>

            <p>インターレース方式1（Adam7として知られる）では、画像に対して7つの明確なパスを定義します。各パスは参照画像内のピクセルの部分集合を送信します。各ピクセルが送信されるパス（1から7までの番号）は、左上隅から画像全体に次の8×8パターンを繰り返すことで定義されます。
            </p>

            <pre aria-busy="false"><code class="hljs">1 6 4 6 2 6 4 6
7 7 7 7 7 7 7 7
5 6 5 6 5 6 5 6
7 7 7 7 7 7 7 7
3 6 4 6 3 6 4 6
7 7 7 7 7 7 7 7
5 6 5 6 5 6 5 6
7 7 7 7 7 7 7 7</code></pre>
            <p><a href="#figure48">Figure
                    4.8</a>は、インターレース方式1の7つのパスを示します。各パス内では、選択されたピクセルはスキャンライン内で左から右へ送信され、選択されたスキャンラインは上から下へ順に送信されます。例えば、パス2にはスキャンライン0、8、16、…のピクセル4、12、20、…が含まれます（スキャンライン0、ピクセル0は左上隅）。最後のパスにはスキャンライン1、3、5、…がすべて含まれます。送信順序は、各パスで送信されるすべてのスキャンラインが同じピクセル数になるように定義されています。これは一部のフィルタを適切に適用するために必要です。インターレースPNG画像は、7つの縮小画像の列で構成されます。例えば、PNG画像が16×16ピクセルの場合、第3パスは4ピクセルを含む2本のスキャンラインからなる縮小画像になります（<a
                    href="#figure48">Figure 4.8</a>参照）。</p>

            <p>スキャンラインが整数個のバイトを完全に満たさない場合、そのパディングは<a href="#7Scanline" class="sec-ref"><bdi class="secno">7.2
                    </bdi>スキャンライン</a>で定義されるとおりです。</p>

            <div class="note" role="note" id="issue-container-generatedID-9">
                <div role="heading" class="note-title marker" id="h-note-9" aria-level="4"><span>Note</span></div>
                <p class="">注：参照画像の列数が5未満、または行数が5未満の場合、一部のパスは空になります。</p>
            </div>
        </section>
    </section>




    <section id="9Filters">
        <div class="header-wrapper">
            <h2 id="x9-filtering"><bdi class="secno">9. </bdi>フィルタ処理</h2><a class="self-link" href="#9Filters"
                aria-label="Permalink for Section 9."></a>
        </div>



        <section id="9FtIntro">
            <div class="header-wrapper">
                <h3 id="x9-1-filter-methods-and-filter-types"><bdi class="secno">9.1 </bdi>フィルタ方式とフィルタタイプ</h3><a
                    class="self-link" href="#9FtIntro" aria-label="Permalink for Section 9.1"></a>
            </div>


            <p>フィルタ処理は、圧縮の改善を目的としてPNG画像を変換します。全体のプロセスは<a href="#encoding-png-image" class="fig-ref"
                    title="Encoding the PNG image">Figure <bdi class="">7</bdi></a>に示され、スキャンラインの直列化とフィルタ処理の詳細は<a
                    href="#serializing-and-filtering-scanline" class="fig-ref"
                    title="Serializing and filtering a scanline">Figure <bdi class="">18</bdi></a>に示されます。</p>

            <p>PNGは複数の<a href="#3filter" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3filter-3">フィルタ方式</a>を許容します。インターレース画像のすべての縮小画像は単一の<a href="#3filter" class="internalDFN"
                    data-link-type="dfn" id="ref-for-3filter-4">フィルタ方式</a>を使用しなければなりません。本仕様で定義されるのは<a href="#3filter"
                    class="internalDFN" data-link-type="dfn" id="ref-for-3filter-5">フィルタ方式</a>0のみです。他の<a href="#3filter"
                    class="internalDFN" data-link-type="dfn" id="ref-for-3filter-6">フィルタ方式</a>は将来の標準化のために予約されています。<a
                    href="#3filter" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3filter-7">フィルタ方式</a>0は5種類のフィルタタイプを提供し、各縮小画像内のスキャンラインごとに異なるフィルタタイプを使用できます。
            </p>

            <p>PNGは、インターレースPNG画像に適用できるフィルタタイプに追加の制限を課しません。ただし、フィルタタイプはデータの種類によって効果が等しくはありません。<a
                    href="#12Filter-selection" class="sec-ref"><bdi class="secno">12.7 </bdi>フィルタ選択</a>を参照してください。</p>

            <p>フィルタ処理は、スキャンライン内のバイト列を、フィルタタイプを先頭に付けた同じ長さのバイト列へと変換します。フィルタタイプのバイトは非空のスキャンラインにのみ関連付けられます。空のパスにはフィルタタイプのバイトは存在しません。<a
                    href="#13Progressive-display" class="sec-ref"><bdi class="secno">13.10
                    </bdi>インターレースとプログレッシブ表示</a>を参照してください。
            </p>
        </section>


        <section id="9Filter-types">
            <div class="header-wrapper">
                <h3 id="x9-2-filter-types-for-filter-method-0"><bdi class="secno">9.2 </bdi>フィルタ方式0のフィルタタイプ</h3><a
                    class="self-link" href="#9Filter-types" aria-label="Permalink for Section 9.2"></a>
            </div>


            <p>フィルタは、画像のビット深度や<a href="#3colourType" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3colourType-8">カラータイプ</a>に関わらず、ピクセルではなく<strong>バイト</strong>に対して適用されます。フィルタは、<a
                    href="#7Scanline" class="sec-ref"><bdi class="secno">7.2
                    </bdi>スキャンライン</a>で説明された表現に従って構成されたスキャンラインのバイト列に対して動作します。画像にアルファチャネルが含まれる場合、アルファデータは<a
                    href="#dfn-image-data" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-image-data-4">画像データ</a>と同様にフィルタ処理されます。</p>

            <p>フィルタは、新しいバイト値を生成するために、以下のバイトの元の値を使用することがあります。</p>

            <table class="numbered simple" id="table-named-filter-bytes">
                <caption><a class="self-link" href="#table-named-filter-bytes">Table <bdi class="tableno">10</bdi></a>
                    <span class="table-title">
                        名称付きフィルタバイト
                    </span>
                </caption>

                <tbody>
                    <tr>
                        <th>名称</th>
                        <th>定義</th>
                    </tr>

                    <tr>
                        <td><var>x</var>
                        </td>
                        <td>フィルタ対象のバイト；</td>
                    </tr>

                    <tr>
                        <td><var>a</var>
                        </td>
                        <td>xを含むピクセルの直前のピクセルにおけるxに対応するバイト（ビット深度が8未満の場合はxの直前のバイト）；</td>
                    </tr>

                    <tr>
                        <td><var>b</var>
                        </td>
                        <td>前のスキャンラインにおけるxに対応するバイト；</td>
                    </tr>

                    <tr>
                        <td><var>c</var>
                        </td>
                        <td>bを含むピクセルの直前のピクセルにおけるbに対応するバイト（ビット深度が8未満の場合はbの直前のバイト）。</td>
                    </tr>
                </tbody>
            </table>

            <figure id="filter-byte-positions">
                <img id="figure72" src="https://www.w3.org/TR/png-3/figures/filter-bytes.svg" style="width: 12vw">

                <figcaption><a class="self-link" href="#filter-byte-positions">Figure <bdi class="figno">19</bdi></a>
                    <span class="fig-title">
                        xに対するフィルタバイトa, b, cの位置
                    </span>
                </figcaption>
            </figure>

            <p><a href="#filter-byte-positions" class="fig-ref"
                    title="Positions of filter bytes a, b and c relative to x">Figure <bdi
                        class="">19</bdi></a>は、<var>x</var>、<var>a</var>、<var>b</var>、<var>c</var>の相対位置を示します。</p>

            <p><a href="#3filter" class="internalDFN" data-link-type="dfn" id="ref-for-3filter-8">フィルタ方式</a>0は、<a
                    href="#9-table91" class="table-ref" title="Filter types">Table <bdi
                        class="">11</bdi></a>に示す5つの基本フィルタタイプを定義します。<code>Orig(y)</code>はバイト<var>y</var>の元の（非フィルタ）値を表します。<code>Filt(y)</code>はフィルタタイプを適用した後の値を表します。<code>Recon(y)</code>は対応する再構成関数を適用した後の値を表します。Paethフィルタタイプの<var>PaethPredictor</var>
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-paeth"
                        title="Image File Compression Made Easy, in Graphics Gems II, pp. 93-100">Paeth</a></cite>]は後述します。
            </p>

            <p><a href="#3filter" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3filter-9">フィルタ方式</a>0は、ちょうどこの5つのフィルタタイプの集合を規定しており、これを拡張してはなりません。これにより、デコーダはデータを伸長しなくても、未サポートのフィルタタイプが含まれているかどうかを判断できます。<a
                    href="#11IHDR" class="sec-ref"><bdi class="secno">11.2.1 </bdi><span class="chunk">IHDR</span>
                    画像ヘッダ</a>内の<a href="#3filter" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3filter-10">フィルタ方式</a>を確認するだけで十分です。</p>




            <table id="9-table91" class="numbered simple">
                <caption><a class="self-link" href="#9-table91">Table <bdi class="tableno">11</bdi></a> <span
                        class="table-title">
                        フィルタタイプ
                    </span></caption>

                <tbody>
                    <tr>
                        <th>タイプ</th>
                        <th>名称</th>
                        <th>フィルタ関数</th>
                        <th>再構成関数</th>
                    </tr>

                    <tr>
                        <td>0</td>
                        <td>None</td>
                        <td><code>Filt(x) = Orig(x)</code>
                        </td>
                        <td><code>Recon(x) = Filt(x)</code>
                        </td>
                    </tr>

                    <tr>
                        <td>1</td>
                        <td>Sub</td>
                        <td><code>Filt(x) = Orig(x) - Orig(a)</code>
                        </td>
                        <td><code>Recon(x) = Filt(x) + Recon(a)</code>
                        </td>
                    </tr>

                    <tr>
                        <td>2</td>
                        <td>Up</td>
                        <td><code>Filt(x) = Orig(x) - Orig(b)</code>
                        </td>
                        <td><code>Recon(x) = Filt(x) + Recon(b)</code>
                        </td>
                    </tr>

                    <tr>
                        <td>3</td>
                        <td>Average</td>
                        <td><code>Filt(x) = Orig(x) - floor((Orig(a) + Orig(b)) / 2)</code>
                        </td>
                        <td><code>Recon(x) = Filt(x) + floor((Recon(a) + Recon(b)) / 2)</code>
                        </td>
                    </tr>

                    <tr>
                        <td>4</td>
                        <td>Paeth</td>
                        <td><code>Filt(x) = Orig(x) - PaethPredictor(Orig(a), Orig(b), Orig(c))</code>
                        </td>
                        <td><code>Recon(x) = Filt(x) + PaethPredictor(Recon(a), Recon(b), Recon(c))</code>
                        </td>
                    </tr>
                </tbody>
            </table>

            <p>すべてのフィルタにおいて、スキャンラインの最初のピクセルの「左にある」バイトは0として扱われなければなりません。前のスキャンラインを参照するフィルタでは、縮小画像の最初のスキャンラインにおいて、前のスキャンライン全体とその最初のピクセルの「左にある」バイトは0として扱われなければなりません。
            </p>

            <p>フィルタの効果を逆にするには、同じスキャンライン上の直前のピクセルの復号値、前のスキャンラインで現在のピクセルの直上にあるピクセルの復号値、そしてその直上のピクセルの左隣のピクセルの復号値が必要です。</p>

            <p>入出力の両方をバイトに収めるため、256を法とする符号なし算術を用います。フィルタはビット深度に関係なく各バイトに適用されます。<code>Filt</code>値の列が、フィルタ済みスキャンラインとして送信されます。
            </p>
        </section>


        <section id="9Filter-type-3-Average">
            <div class="header-wrapper">
                <h3 id="x9-3-filter-type-3-average"><bdi class="secno">9.3 </bdi>フィルタタイプ3：Average</h3><a
                    class="self-link" href="#9Filter-type-3-Average" aria-label="Permalink for Section 9.3"></a>
            </div>


            <p><code>Orig(a) + Orig(b)</code>の和はオーバーフローなし（少なくとも9ビットの算術）で実行されなければなりません。<code>floor()</code>は、除算の結果が小数であれば次に小さい整数に切り下げることを示します。言い換えれば、これは整数除算または右シフト演算です。
            </p>
        </section>


        <section id="9Filter-type-4-Paeth">
            <div class="header-wrapper">
                <h3 id="x9-4-filter-type-4-paeth"><bdi class="secno">9.4 </bdi>フィルタタイプ4：Paeth</h3><a class="self-link"
                    href="#9Filter-type-4-Paeth" aria-label="Permalink for Section 9.4"></a>
            </div>


            <p>Paethフィルタタイプは、3つの隣接ピクセル（左、上、左上）の単純な線形関数を計算し、その値に最も近い隣接ピクセルを予測値として選択します。本仕様で用いるアルゴリズムは、Alan W.
                Paethによる手法の改変です（[<cite><a class="bibref" data-link-type="biblio" href="#bib-paeth"
                        title="Image File Compression Made Easy, in Graphics Gems II, pp. 93-100">Paeth</a></cite>]）。
            </p>

            <p>PaethPredictor関数は以下のコードで定義されます。関数のロジックと、バイト<var>a</var>、<var>b</var>、<var>c</var>、<var>x</var>の位置は<a
                    href="#paethpredictor-function" class="fig-ref" title="The PaethPredictor function">Figure <bdi
                        class="">20</bdi></a>に示します。<var>Pr</var>はバイト<var>x</var>の予測値です。
            </p>

            <pre aria-busy="false"><code class="hljs javascript">p = a + b - c
pa = <span class="hljs-title function_">abs</span>(p - a)
pb = <span class="hljs-title function_">abs</span>(p - b)
pc = <span class="hljs-title function_">abs</span>(p - c)
<span class="hljs-keyword">if</span> pa &lt;= pb and pa &lt;= pc then <span class="hljs-title class_">Pr</span> = a
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> pb &lt;= pc then <span class="hljs-title class_">Pr</span> = b
<span class="hljs-keyword">else</span> <span class="hljs-title class_">Pr</span> = c
<span class="hljs-keyword">return</span> <span class="hljs-title class_">Pr</span></code></pre>


            <figure id="paethpredictor-function">

                <img id="9-figure91" src="https://www.w3.org/TR/png-3/figures/paethpredictor-function.svg">

                <figcaption><a class="self-link" href="#paethpredictor-function">Figure <bdi class="figno">20</bdi></a>
                    <span class="fig-title">
                        PaethPredictor関数
                    </span>
                </figcaption>
            </figure>

            <p>PaethPredictor関数内の計算は、オーバーフローなしで厳密に実行されなければなりません。</p>

            <p><strong>比較の実行順序は重要であり、変更してはなりません。</strong>この関数は、（垂直、水平、対角の）3方向のうち、画像の勾配が最も小さい方向を見つけようとします。</p>

            <p>エンコーダとデコーダは、まったく同一のPaethPredictor関数を使用します。</p>
        </section>
    </section>




    <section id="10Compression">
        <div class="header-wrapper">
            <h2 id="x10-compression"><bdi class="secno">10. </bdi>圧縮</h2><a class="self-link" href="#10Compression"
                aria-label="Permalink for Section 10."></a>
        </div>



        <section id="10CompressionCM0">
            <div class="header-wrapper">
                <h3 id="x10-1-compression-method-0"><bdi class="secno">10.1 </bdi>圧縮方式0</h3><a class="self-link"
                    href="#10CompressionCM0" aria-label="Permalink for Section 10.1"></a>
            </div>


            <p>本国際規格で定義されるPNGの圧縮方式は方式0のみです。その他の圧縮方式の値は将来の標準化のために予約されています。PNG圧縮方式0は、スライディングウィンドウ（<a href="#dfn-deflate"
                    class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-deflate-3">deflate</a>ストリームに現れる距離の上限）最大32768バイトの<a href="#dfn-deflate"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-deflate-2">deflate</a>圧縮です。<a
                    href="#dfn-deflate" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-deflate-4">Deflate</a>圧縮は<a href="#3LZ77" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3LZ77-2">LZ77</a>に由来します。</p>

            <p>PNG内の<a href="#dfn-deflate" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-deflate-5">deflate</a>圧縮データストリームは<a href="#dfn-zlib" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-zlib-1">zlib</a>フォーマットで格納され、その構造は次のとおりです。</p>

            <table id="zlib-structure" class="simple numbered">
                <tbody>
                    <tr>
                        <td>zlib 圧縮方式/フラグコード</td>
                        <td>1 byte</td>
                    </tr>

                    <tr>
                        <td>追加フラグ/チェックビット</td>
                        <td>1 byte</td>
                    </tr>

                    <tr>
                        <td>圧縮データブロック</td>
                        <td>n bytes</td>
                    </tr>

                    <tr>
                        <td>チェック値</td>
                        <td>4 bytes</td>
                    </tr>
                </tbody>
            </table>

            <p><a href="#dfn-zlib" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-zlib-2">zlib</a>は[<cite><a
                        class="bibref" data-link-type="biblio" href="#bib-rfc1950"
                        title="ZLIB Compressed Data Format Specification version 3.3">rfc1950</a></cite>]で規定されています。</p>

            <p>PNG圧縮方式0では、<a href="#dfn-zlib" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-zlib-3">zlib</a>の圧縮方式/フラグコードは方式コード8（<a href="#dfn-deflate" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-deflate-6">deflate</a>圧縮）および32768バイト以下の<a href="#3LZ77"
                    class="internalDFN" data-link-type="dfn" id="ref-for-3LZ77-3">LZ77</a>ウィンドウサイズを指定しなければなりません。なお、<a
                    href="#dfn-zlib" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-zlib-4">zlib</a>の圧縮方式番号は、<a class="chunk"
                    href="#11IHDR">IHDR</a>チャンクにおけるPNGの圧縮方式番号と同一ではありません。追加フラグでプリセット辞書を指定してはなりません。</p>

            <p>圧縮対象データが16384バイト以下である場合、PNGエンコーダはウィンドウサイズを2の累乗（最小256）に切り上げて設定してもかまいません。これは圧縮率に悪影響を与えることなく、エンコードおよびデコードの両方に必要なメモリを削減します。
            </p>

            <p><a href="#dfn-zlib" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-zlib-5">zlib</a>データストリーム内の圧縮データは、一連のブロックとして格納されます。各ブロックは生（非圧縮）データ、固定ハフマン符号で符号化された<a
                    href="#3LZ77" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3LZ77-4">LZ77</a>圧縮データ、またはカスタムハフマン符号で符号化された<a href="#3LZ77" class="internalDFN"
                    data-link-type="dfn"
                    id="ref-for-3LZ77-5">LZ77</a>圧縮データのいずれかを表します。最終ブロックのマーカビットはそれが最後のブロックであることを示し、デコーダが圧縮データストリームの終端を認識できるようにします。圧縮アルゴリズムと符号化の詳細は、<a
                    href="#dfn-deflate" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-deflate-7">deflate</a>仕様[<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-rfc1951"
                        title="DEFLATE Compressed Data Format Specification version 1.3">rfc1951</a></cite>]に記載されています。
            </p>

            <p><a href="#dfn-zlib" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-zlib-6">zlib</a>データストリーム末尾に格納されるチェック値は、そのデータストリームが表す非圧縮データに対して計算されます。この計算に用いられるアルゴリズムは、PNGのチャンク<abbr
                    title="Cyclic Redundancy Code">CRC</abbr>フィールド値に用いられる<abbr
                    title="Cyclic Redundancy Code">CRC</abbr>計算と同一ではありません。<a href="#dfn-zlib" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-zlib-7">zlib</a>のチェック値は、主として<a href="#dfn-deflate"
                    class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-deflate-8">deflate</a>アルゴリズムが正しく実装されていることを相互確認するために有用です。各PNGチャンクのCRCを検証することで、PNGデータストリームが損傷なく伝送されたことに確信が持てます。
            </p>
        </section>


        <section id="10CompressionFSL">
            <div class="header-wrapper">
                <h3 id="x10-2-compression-of-the-sequence-of-filtered-scanlines"><bdi class="secno">10.2
                    </bdi>フィルタ済みスキャンライン列の圧縮</h3><a class="self-link" href="#10CompressionFSL"
                    aria-label="Permalink for Section 10.2"></a>
            </div>


            <p>フィルタ済みスキャンラインの列は圧縮され、その結果得られたデータストリームは<a class="chunk" href="#11IDAT">IDAT</a>チャンクに分割されます。すべての<a
                    class="chunk" href="#11IDAT">IDAT</a>チャンクの内容を連結したものが1つの<a href="#dfn-zlib" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-zlib-8">zlib</a>データストリームとなります。このデータストリームは伸長されるとフィルタ済みの<a
                    href="#dfn-image-data" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-image-data-5">画像データ</a>になります。</p>

            <p><a class="chunk" href="#11IDAT">IDAT</a>チャンク間の境界は任意であり、<a href="#dfn-zlib" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-zlib-9">zlib</a>データストリームのどこにでも置かれ得ることを強調しておくことが重要です。<a
                    class="chunk" href="#11IDAT">IDAT</a>チャンク境界と<a href="#dfn-deflate" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-deflate-9">deflate</a>ブロック境界、またはその他の<a href="#dfn-zlib"
                    class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-zlib-10">zlib</a>データの特徴との間に相関があるとは限りません。例えば、終端の<a href="#dfn-zlib"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-zlib-11">zlib</a>チェック値が<a class="chunk"
                    href="#11IDAT">IDAT</a>チャンクにまたがって分割されることも十分あり得ます。</p>

            <p>同様に、<a href="#dfn-image-data" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-image-data-6">画像データ</a>の構造（すなわちスキャンライン境界）と<a href="#dfn-deflate" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-deflate-10">deflate</a>ブロック境界や<a class="chunk"
                    href="#11IDAT">IDAT</a>チャンク境界との間に必要な相関はありません。完全なフィルタ済みPNG画像は、複数の<a class="chunk"
                    href="#11IDAT">IDAT</a>チャンクに格納された単一の<a href="#dfn-zlib" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-zlib-12">zlib</a>データストリームで表現されます。
            </p>
        </section>




        <section id="10CompressionOtherUses">
            <div class="header-wrapper">
                <h3 id="x10-3-other-uses-of-compression"><bdi class="secno">10.3 </bdi>その他の圧縮の用途</h3><a
                    class="self-link" href="#10CompressionOtherUses" aria-label="Permalink for Section 10.3"></a>
            </div>


            <p>PNGは<a class="chunk" href="#11iTXt">iTXt</a>、<a class="chunk" href="#11iCCP">iCCP</a>、および<a class="chunk"
                    href="#11zTXt">zTXt</a>チャンクにおいても圧縮方式0を使用します。<a href="#dfn-image-data" class="internalDFN"
                    data-link-type="dfn"
                    id="ref-for-dfn-image-data-7">画像データ</a>とは異なり、これらのデータストリームはチャンクをまたいで分割されません。各チャンクは独立した<a
                    href="#dfn-zlib" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-zlib-13">zlib</a>データストリームを含みます（<a href="#10CompressionCM0" class="sec-ref"><bdi
                        class="secno">10.1 </bdi>圧縮方式0</a>参照）。</p>
        </section>
    </section>




    <section id="11Chunks">
        <div class="header-wrapper">
            <h2 id="x11-chunk-specifications"><bdi class="secno">11. </bdi>チャンク仕様</h2><a class="self-link"
                href="#11Chunks" aria-label="Permalink for Section 11."></a>
        </div>



        <section id="11Introduction">
            <div class="header-wrapper">
                <h3 id="x11-1-general"><bdi class="secno">11.1 </bdi>一般事項</h3><a class="self-link"
                    href="#11Introduction" aria-label="Permalink for Section 11.1"></a>
            </div>


            <p>本節では本仕様で使用されるチャンクを定義します。</p>
        </section>


        <section id="11Critical-chunks">
            <div class="header-wrapper">
                <h3 id="x11-2-critical-chunks"><bdi class="secno">11.2 </bdi>クリティカルチャンク</h3><a class="self-link"
                    href="#11Critical-chunks" aria-label="Permalink for Section 11.2"></a>
            </div>



            <section class="introductory" id="11CcGen">
                <div class="header-wrapper">
                    <h3 id="introduction-5">はじめに</h3><a class="self-link" href="#11CcGen"
                        aria-label="Permalink for this Section"></a>
                </div>



                <p><dfn id="3criticalChunk" class="lint-ignore" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">クリティカルチャンク</dfn>は、PNGデータストリームからPNG画像を正常にデコードするために絶対に必要なチャンクです。拡張チャンクはクリティカルチャンクとして定義される場合があります（<a
                        href="#14EditorsExt" class="sec-ref"><bdi class="secno">14. </bdi>エディタ</a>参照）が、この運用は強く非推奨です。</p>

                <p>妥当なPNGデータストリームはPNGシグネチャで始まり、直後に<a class="chunk" href="#11IHDR">IHDR</a>チャンク、続いて1つ以上の<a class="chunk"
                        href="#11IDAT">IDAT</a>チャンクが続き、最後は<a class="chunk"
                        href="#11IEND">IEND</a>チャンクで終わらなければなりません。PNGデータストリーム内において、<a class="chunk"
                        href="#11IHDR">IHDR</a>チャンクと<a class="chunk" href="#11IEND">IEND</a>チャンクはそれぞれ1つのみ許可されます。</p>
            </section>


            <section id="11IHDR">
                <div class="header-wrapper">
                    <h4 id="x11-2-1-ihdr-image-header"><bdi class="secno">11.2.1 </bdi><span class="chunk">IHDR</span>
                        画像ヘッダ</h4><a class="self-link" href="#11IHDR" aria-label="Permalink for Section 11.2.1"></a>
                </div>


                <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます。</p>

                <pre aria-busy="false"><code class="hljs">49 48 44 52</code></pre>
                <p><a class="chunk" href="#11IHDR">IHDR</a>チャンクはPNGデータストリーム内の最初のチャンクでなければなりません。内容は次のとおりです。</p>

                <table id="IHDR-structure" class="simple numbered">
                    <tbody>
                        <tr>
                            <td>幅</td>
                            <td>4 bytes</td>
                        </tr>

                        <tr>
                            <td>高さ</td>
                            <td>4 bytes</td>
                        </tr>

                        <tr>
                            <td>ビット深度</td>
                            <td>1 byte</td>
                        </tr>

                        <tr>
                            <td>カラータイプ</td>
                            <td>1 byte</td>
                        </tr>

                        <tr>
                            <td>圧縮方式</td>
                            <td>1 byte</td>
                        </tr>

                        <tr>
                            <td>フィルタ方式</td>
                            <td>1 byte</td>
                        </tr>

                        <tr>
                            <td>インターレース方式</td>
                            <td>1 byte</td>
                        </tr>
                    </tbody>
                </table>

                <p>幅と高さはピクセル単位の画像寸法を与えます。これらは<a href="#dfn-png-four-byte-unsigned-integer" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-png-four-byte-unsigned-integer-3">PNG
                        4バイト符号なし整数</a>です。0は不正な値です。</p>


                <p id="3bitDepth">
                    ビット深度は、サンプルまたはパレットインデックス（ピクセル単位ではない）あたりのビット数を与える1バイト整数です。有効な値は1、2、4、8、16ですが、すべての値がすべての<a
                        href="#3colourType" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3colourType-9">カラータイプ</a>で許可されるわけではありません。<a href="#6Colour-values"
                        class="sec-ref"><bdi class="secno">6.1 </bdi>カラータイプと値</a>を参照してください。
                </p>

                <p><a href="#3colourType" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3colourType-10">カラータイプ</a>は1バイト整数です。</p>

                <p>各<a href="#3colourType" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3colourType-11">カラータイプ</a>に対するビット深度の制限は、実装を簡素化し、圧縮効率の低い組合せを禁止するために設けられています。許可される組合せは<a
                        href="#table111" class="table-ref"
                        title="Allowed combinations of color type and bit depth">Table <bdi
                            class="">12</bdi></a>で定義されます。</p>


                <table id="table111" class="numbered simple">
                    <caption><a class="self-link" href="#table111">Table <bdi class="tableno">12</bdi></a> <span
                            class="table-title">
                            <a href="#3colourType" class="internalDFN" data-link-type="dfn"
                                id="ref-for-3colourType-12">カラータイプ</a>とビット深度の許可される組合せ
                        </span></caption>

                    <tbody>
                        <tr>
                            <th>PNG画像タイプ</th>
                            <th>カラータイプ</th>
                            <th>許可されるビット深度</th>
                            <th>解釈</th>
                        </tr>

                        <tr>
                            <td>グレースケール</td>
                            <td>0</td>
                            <td>1, 2, 4, 8, 16</td>
                            <td>各ピクセルはグレースケールサンプル</td>
                        </tr>

                        <tr>
                            <td>トゥルーカラー</td>
                            <td>2</td>
                            <td>8, 16</td>
                            <td>各ピクセルは R,G,B 三つ組</td>
                        </tr>

                        <tr>
                            <td>インデックスカラー</td>
                            <td>3</td>
                            <td>1, 2, 4, 8</td>
                            <td>
                                各ピクセルはパレットインデックス；<a class="chunk" href="#11PLTE">PLTE</a>チャンクが現れなければならない。
                            </td>
                        </tr>

                        <tr>
                            <td>グレースケール（アルファ付き）</td>
                            <td>4</td>
                            <td>8, 16</td>
                            <td>各ピクセルはグレースケールサンプルに続いてアルファサンプル。</td>
                        </tr>

                        <tr>
                            <td>トゥルーカラー（アルファ付き）</td>
                            <td>6</td>
                            <td>8, 16</td>
                            <td>各ピクセルは R,G,B 三つ組に続いてアルファサンプル。</td>
                        </tr>
                    </tbody>
                </table>

                <p>サンプル深度は、<a href="#3indexedColour" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3indexedColour-12">インデックスカラー</a>PNG画像（<a href="#3colourType" class="internalDFN"
                        data-link-type="dfn"
                        id="ref-for-3colourType-13">カラータイプ</a>3）の場合を除きビット深度と同じです。この場合、サンプル深度は常に8ビットです（<a
                        href="#4Concepts.PNGImage" class="sec-ref"><bdi class="secno">4.5 </bdi>PNG画像</a>参照）。</p>

                <p>圧縮方式は、<a href="#dfn-image-data" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-image-data-8">画像データ</a>の圧縮に用いられた方式を示す1バイト整数です。本仕様で定義されるのは方式0（最大32768バイトのスライディングウィンドウを用いる<a
                        href="#dfn-deflate" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-deflate-11">deflate</a>圧縮）のみです。すべての準拠PNG画像はこの方式で圧縮されなければなりません。</p>

                <p>フィルタ方式は、圧縮前に<a href="#dfn-image-data" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-image-data-9">画像データ</a>に適用された前処理方式を示す1バイト整数です。本仕様で定義されるのは<a href="#3filter"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-3filter-11">フィルタ方式</a>0（5種類の基本フィルタタイプを用いた適応フィルタリング）のみです。詳細は<a href="#9Filters"
                        class="sec-ref"><bdi class="secno">9. </bdi>フィルタ処理</a>を参照してください。</p>

                <p>インターレース方式は、<a href="#dfn-image-data" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-image-data-10">画像データ</a>の伝送順序を示す1バイト整数です。本仕様では2つの値が定義されています：0（非インターレース）および1（Adam7インターレース）。詳細は<a
                        href="#8Interlace" class="sec-ref"><bdi class="secno">8. </bdi>インターレースとパス抽出</a>を参照してください。</p>
            </section>


            <section id="11PLTE">
                <div class="header-wrapper">
                    <h4 id="x11-2-2-plte-palette"><bdi class="secno">11.2.2 </bdi><span class="chunk">PLTE</span>
                        パレット</h4><a class="self-link" href="#11PLTE" aria-label="Permalink for Section 11.2.2"></a>
                </div>


                <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます。</p>

                <pre aria-busy="false"><code class="hljs">50 4C 54 45</code></pre>
                <p><span class="chunk">PLTE</span>チャンクには1～256個のパレットエントリが含まれ、各エントリは次の形式の3バイト系列です。</p>

                <table id="PLTE-structure" class="simple numbered">
                    <tbody>
                        <tr>
                            <td>赤</td>
                            <td>1 byte</td>
                        </tr>

                        <tr>
                            <td>緑</td>
                            <td>1 byte</td>
                        </tr>

                        <tr>
                            <td>青</td>
                            <td>1 byte</td>
                        </tr>
                    </tbody>
                </table>

                <p>エントリ数はチャンク長から決定されます。チャンク長が3で割り切れない場合はエラーです。</p>

                <p>このチャンクは<a href="#3colourType" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3colourType-14">カラータイプ</a>3では現れなければならず、<a href="#3colourType" class="internalDFN"
                        data-link-type="dfn" id="ref-for-3colourType-15">カラータイプ</a>2および6では現れてもかまいません。<a
                        href="#3colourType" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3colourType-16">カラータイプ</a>0および4では現れてはなりません。<span
                        class="chunk">PLTE</span>チャンクは2個以上存在してはなりません。</p>

                <p><a href="#3colourType" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3colourType-17">カラータイプ</a>3（インデックスカラー）では、<span
                        class="chunk">PLTE</span>チャンクは必須です。<span
                        class="chunk">PLTE</span>の最初のエントリはピクセル値0、2番目はピクセル値1、というように参照されます。パレットエントリ数は、画像のビット深度で表現できる範囲（例えばビット深度4では2<sup>4</sup>=16）を超えてはなりません。ビット深度が許す数より少ないエントリ数であってもかまいませんが、その場合、範囲外のピクセル値が<a
                        href="#dfn-image-data" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-image-data-11">画像データ</a>内で見つかった場合はエラーとなります。
                </p>

                <p><a href="#3colourType" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3colourType-18">カラータイプ</a>2および6（<a href="#3truecolour" class="internalDFN"
                        data-link-type="dfn" id="ref-for-3truecolour-8">トゥルーカラー</a>および<a
                        href="#dfn-truecolor-with-alpha" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-truecolor-with-alpha-3">トゥルーカラー（アルファ付き）</a>）では、<span
                        class="chunk">PLTE</span>チャンクは任意です。存在する場合、直接表示できないときに<a href="#3truecolour" class="internalDFN"
                        data-link-type="dfn"
                        id="ref-for-3truecolour-9">トゥルーカラー</a>画像を量子化するための（1～256の）推奨色セットを提供します。ただし、この目的には<span
                        class="chunk">PLTE</span>チャンクではなく<a class="chunk"
                        href="#11sPLT">sPLT</a>チャンクを使用することが推奨されます。<span class="chunk">PLTE</span>および<a class="chunk"
                        href="#11sPLT">sPLT</a>のいずれのチャンクも存在せず、画像を直接表示できない場合、量子化はビューイングシステム側で行う必要があります。しかし、しばしば色の選択はPNGエンコーダが一度行っておく方が望ましいことがあります（<a
                        href="#12Suggested-palettes" class="sec-ref"><bdi class="secno">12.5 </bdi>推奨パレット</a>参照）。
                </p>

                <p>パレットは、画像のビット深度に関わらずサンプルあたり8ビット（1バイト）を使用することに注意してください。特に、16ビットの<a href="#3truecolour"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-3truecolour-10">トゥルーカラー</a>画像を量子化した推奨パレットであっても、パレット自身は8ビット深度です。</p>

                <p>パレットエントリがすべて画像で使用されている必要はなく、またすべてが相互に異なる必要もありません。</p>
            </section>


            <section id="11IDAT">
                <div class="header-wrapper">
                    <h4 id="x11-2-3-idat-image-data"><bdi class="secno">11.2.3 </bdi><span class="chunk">IDAT</span>
                        画像データ</h4><a class="self-link" href="#11IDAT" aria-label="Permalink for Section 11.2.3"></a>
                </div>


                <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます。</p>

                <pre aria-busy="false"><code class="hljs">49 44 41 54</code></pre>
                <p><span class="chunk">IDAT</span>チャンクには、圧縮アルゴリズムの出力ストリームである実際の<a href="#dfn-image-data"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-image-data-12">画像データ</a>が含まれます。詳細は<a
                        href="#9Filters" class="sec-ref"><bdi class="secno">9.
                        </bdi>フィルタ処理</a>および<a href="#10Compression" class="sec-ref"><bdi class="secno">10.
                        </bdi>圧縮</a>を参照してください。</p>

                <p><span
                        class="chunk">IDAT</span>チャンクは複数存在してもかまいません。その場合、間に他のチャンクを挟まず連続して現れなければなりません。圧縮データストリームは、すべての<span
                        class="chunk">IDAT</span>チャンクのデータフィールドの内容を連結したものです（データフィールドは<a
                        href="#zero-length-data">長さゼロであり得る</a>ことに注意）。</p>

                <p>一部の画像では、最後のIDATチャンクの末尾に未使用の余剰バイトが存在する場合があります。これは、使用されたバッファの一部だけでなくバッファ全体を格納した場合に起こり得ます。これは望ましくありません。可能であれば、エンコーダはこれら未使用バイトを含めないべきです。どうしても含める必要がある場合は、それらのバイトをゼロに設定することで偶発的なデータ共有を防げます。デコーダはこれらの末尾バイトを無視すべきです。
                </p>
            </section>


            <section id="11IEND">
                <div class="header-wrapper">
                    <h4 id="x11-2-4-iend-image-trailer"><bdi class="secno">11.2.4 </bdi><span class="chunk">IEND</span>
                        画像終端</h4><a class="self-link" href="#11IEND" aria-label="Permalink for Section 11.2.4"></a>
                </div>


                <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます。</p>

                <pre aria-busy="false"><code class="hljs">49 45 4E 44</code></pre>
                <p><span class="chunk">IEND</span>チャンクはPNGデータストリームの終端を示します。このチャンクのデータフィールドは空です。</p>
            </section>
        </section>


        <section id="11Ancillary-chunks">
            <div class="header-wrapper">
                <h3 id="x11-3-ancillary-chunks"><bdi class="secno">11.3 </bdi>補助チャンク</h3><a class="self-link"
                    href="#11Ancillary-chunks" aria-label="Permalink for Section 11.3"></a>
            </div>



            <section class="introductory" id="11AcGen">
                <div class="header-wrapper">
                    <h3 id="introduction-6">はじめに</h3><a class="self-link" href="#11AcGen"
                        aria-label="Permalink for this Section"></a>
                </div>


                <p>本仕様で定義される補助チャンクは、<a href="#4Concepts.FormatTypes" class="sec-ref"><bdi class="secno">4.8.2
                        </bdi>チャンクタイプ</a>に示した順序で列挙されています。これはPNGデータストリーム中に現れる順序を意味するものではありません。補助チャンクはデコーダによって無視されてもかまいません。各補助チャンクについて、ここで記述する動作はデコーダがそのチャンクを無視しないことを前提としています。
                </p>
            </section>


            <section id="11transinfo">
                <div class="header-wrapper">
                    <h4 id="x11-3-1-transparency-information"><bdi class="secno">11.3.1 </bdi>透過情報
                    </h4><a class="self-link" href="#11transinfo" aria-label="Permalink for Section 11.3.1"></a>
                </div>



                <section id="11tRNS">
                    <div class="header-wrapper">
                        <h5 id="x11-3-1-1-trns-transparency"><bdi class="secno">11.3.1.1 </bdi><span
                                class="chunk">tRNS</span> 透過</h5><a class="self-link" href="#11tRNS"
                            aria-label="Permalink for Section 11.3.1.1"></a>
                    </div>


                    <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます。</p>

                    <pre aria-busy="false"><code class="hljs">74 52 4E 53</code></pre>
                    <p><span class="chunk">tRNS</span>チャンクは、（<a href="#3indexedColour" class="internalDFN"
                            data-link-type="dfn"
                            id="ref-for-3indexedColour-13">インデックスカラー</a>画像に対する）パレットエントリに対応するアルファ値、または（<a
                            href="#dfn-greyscale" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-greyscale-7">グレースケール</a>および<a href="#3truecolour" class="internalDFN"
                            data-link-type="dfn" id="ref-for-3truecolour-11">トゥルーカラー</a>画像に対する）単一の透過色を指定します。<span
                            class="chunk">tRNS</span>チャンクの内容は次のとおりです。
                    </p>


                    <table id="tRNS-structure" class="simple numbered">
                        <tbody>
                            <tr>
                                <th colspan="2">
                                    <a href="#3colourType" class="internalDFN" data-link-type="dfn"
                                        id="ref-for-3colourType-19">カラータイプ</a> 0
                                </th>
                            </tr>

                            <tr>
                                <td>グレーサンプル値</td>
                                <td>2 bytes</td>
                            </tr>

                            <tr>
                                <th colspan="2">
                                    <a href="#3colourType" class="internalDFN" data-link-type="dfn"
                                        id="ref-for-3colourType-20">カラータイプ</a> 2
                                </th>
                            </tr>

                            <tr>
                                <td>赤サンプル値</td>
                                <td>2 bytes</td>
                            </tr>

                            <tr>
                                <td>緑サンプル値</td>
                                <td>2 bytes</td>
                            </tr>

                            <tr>
                                <td>青サンプル値</td>
                                <td>2 bytes</td>
                            </tr>

                            <tr>
                                <th colspan="2">
                                    <a href="#3colourType" class="internalDFN" data-link-type="dfn"
                                        id="ref-for-3colourType-21">カラータイプ</a> 3
                                </th>
                            </tr>

                            <tr>
                                <td>パレットインデックス0のアルファ</td>
                                <td>1 byte</td>
                            </tr>

                            <tr>
                                <td>パレットインデックス1のアルファ</td>
                                <td>1 byte</td>
                            </tr>

                            <tr>
                                <td>…等…</td>
                                <td>1 byte</td>
                            </tr>
                        </tbody>
                    </table>

                    <p><a href="#3colourType" class="internalDFN" data-link-type="dfn"
                            id="ref-for-3colourType-22">カラータイプ</a>3（インデックスカラー）の場合、<span class="chunk">tRNS</span>チャンクは<a
                            class="chunk"
                            href="#11PLTE">PLTE</a>チャンクの各エントリに対応する1バイトのアルファ値の系列を含みます。各エントリは、対応するパレットインデックスのピクセルが指定のアルファ値を持つものとして扱われることを示します。アルファ値の解釈は8ビットのフルアルファチャネルと同じで、0は完全透過、255は完全不透明を意味し、画像のビット深度に依存しません。<span
                            class="chunk">tRNS</span>チャンクはパレットエントリ数を超える数のアルファ値を含んではなりませんが、パレットエントリ数より少ない値を含んでいてもかまいません。この場合、残りのすべてのパレットエントリのアルファ値は255と見なされます。一般的なケースとしてパレットインデックス0のみを透過にしたい場合は、1バイトの<span
                            class="chunk">tRNS</span>チャンクだけで十分であり、すべてのパレットインデックスが不透明である場合には<span
                            class="chunk">tRNS</span>チャンクは省略できます。</p>

                    <p><a href="#3colourType" class="internalDFN" data-link-type="dfn"
                            id="ref-for-3colourType-23">カラータイプ</a>0または2の場合、画像のビット深度にかかわらずサンプルあたり2バイトが使用されます（<a
                            href="#7Integers-and-byte-order" class="sec-ref"><bdi class="secno">7.1
                            </bdi>整数とバイト順</a>参照）。指定されたグレーサンプル値またはRGBサンプル値のピクセルは透過（アルファ値0と同等）として扱い、それ以外のピクセルは完全不透明（アルファ値
                        2<sup>bitdepth</sup>-1）として扱います。画像のビット深度が16未満の場合は下位ビットが使用されます。エンコーダは残りのビットを0に設定すべきであり、デコーダは値を使用する前に残りのビットを0にマスクしなければなりません。
                    </p>

                    <p><a href="#3colourType" class="internalDFN" data-link-type="dfn"
                            id="ref-for-3colourType-24">カラータイプ</a>4および6では、すでにフルアルファチャネルが存在するため、<span
                            class="chunk">tRNS</span>チャンクを出現させてはなりません。</p>

                    <div class="note" role="note" id="issue-container-generatedID-10">
                        <div role="heading" class="note-title marker" id="h-note-10" aria-level="6"><span>注</span>
                        </div>
                        <p class="">16ビットの<a href="#dfn-greyscale" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-greyscale-8">グレースケール</a>または<a href="#3truecolour" class="internalDFN"
                                data-link-type="dfn" id="ref-for-3truecolour-12">トゥルーカラー</a>データでは、<a
                                href="#13Sample-depth-rescaling" class="sec-ref"><bdi class="secno">13.12
                                </bdi>サンプル深度の再スケーリング</a>で述べるように、<span class="chunk">tRNS</span>チャンク内の<a
                                href="#tRNS-compare-exactly">16ビット値全体に一致するピクセル</a>のみが透過になります。デコーダは透過性の判定が終わるまで、サンプル深度の再スケーリングを延期しなければなりません。
                        </p>
                    </div>
                </section>
            </section>


            <section id="11addnlcolinfo">
                <div class="header-wrapper">
                    <h4 id="x11-3-2-color-space-information"><bdi class="secno">11.3.2 </bdi>カラースペース情報
                    </h4><a class="self-link" href="#11addnlcolinfo" aria-label="Permalink for Section 11.3.2"></a>
                </div>



                <section id="11cHRM">
                    <div class="header-wrapper">
                        <h5 id="x11-3-2-1-chrm-primary-chromaticities-and-white-point"><bdi class="secno">11.3.2.1
                            </bdi><span class="chunk">cHRM</span> 基本色度とホワイトポイント</h5><a class="self-link" href="#11cHRM"
                            aria-label="Permalink for Section 11.3.2.1"></a>
                    </div>



                    <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます。</p>

                    <pre aria-busy="false"><code class="hljs">63 48 52 4D</code></pre>
                    <p><span class="chunk">cHRM</span>チャンクは、<a href="#3PNGimage" class="internalDFN"
                            data-link-type="dfn" id="ref-for-3PNGimage-3">PNG画像</a>で使用される赤・緑・青の表示基本色の1931
                        CIEの<i>x,y</i>色度および参照される<a href="#dfn-white-point" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-white-point-2">ホワイトポイント</a>を指定するために使用できます。詳細は<a href="#C-GammaAppendix"
                            class="sec-ref"><bdi class="secno">C. </bdi>ガンマと色度</a>を参照してください。より高度な色管理と制御のためには、<a
                            class="chunk" href="#11iCCP">iCCP</a>および<a class="chunk"
                            href="#11sRGB">sRGB</a>チャンクが提供されています。</p>

                    <p><span class="chunk">cHRM</span>チャンクの内容は次のとおりです。</p>



                    <table id="cHRM-structure" class="numbered simple">
                        <caption><a class="self-link" href="#cHRM-structure">Table <bdi class="tableno">13</bdi></a>
                            <span class="table-title">
                                cHRM チャンクの構成要素
                            </span>
                        </caption>

                        <tbody>
                            <tr>
                                <th>名称</th>
                                <th>サイズ</th>
                            </tr>

                            <tr>
                                <td>ホワイトポイント x</td>
                                <td>4 bytes</td>
                            </tr>

                            <tr>
                                <td>ホワイトポイント y</td>
                                <td>4 bytes</td>
                            </tr>

                            <tr>
                                <td>赤 x</td>
                                <td>4 bytes</td>
                            </tr>

                            <tr>
                                <td>赤 y</td>
                                <td>4 bytes</td>
                            </tr>

                            <tr>
                                <td>緑 x</td>
                                <td>4 bytes</td>
                            </tr>

                            <tr>
                                <td>緑 y</td>
                                <td>4 bytes</td>
                            </tr>

                            <tr>
                                <td>青 x</td>
                                <td>4 bytes</td>
                            </tr>

                            <tr>
                                <td>青 y</td>
                                <td>4 bytes</td>
                            </tr>
                        </tbody>
                    </table>

                    <p>各値は、<a href="#dfn-png-four-byte-unsigned-integer" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-png-four-byte-unsigned-integer-4">PNG
                            4バイト符号なし整数</a>としてエンコードされ、<i>x</i>または<i>y</i>の値に100000を掛けたものを表します。</p>

                    <p class="example">0.3127 の値は整数 31270 として格納されます。</p>

                    <p><span class="chunk">cHRM</span>チャンクはすべてのPNGデータストリームで許可されていますが、<a href="#dfn-greyscale"
                            class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-greyscale-9">グレースケール</a>画像では有用性は低くなります。
                    </p>

                    <p>このチャンクは、デコーダが理解する<a href="#color-chunk-precendence">最優先の色チャンク</a>でない限り無視されます。</p>
                </section>


                <section id="11gAMA">
                    <div class="header-wrapper">
                        <h5 id="x11-3-2-2-gama-image-gamma"><bdi class="secno">11.3.2.2 </bdi><span
                                class="chunk">gAMA</span> 画像ガンマ</h5><a class="self-link" href="#11gAMA"
                            aria-label="Permalink for Section 11.3.2.2"></a>
                    </div>



                    <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます。</p>

                    <pre aria-busy="false"><code class="hljs">67 41 4D 41</code></pre>
                    <p><a class="chunk" href="#11gAMA">gAMA</a>チャンクは<a href="#dfn-gamma-value" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-gamma-value-3">ガンマ値</a>を指定します。</p>

                    <p>実際には、望ましい表示出力の強度を指定するだけでは不十分です。望ましい出力が得られる視聴条件も指定する必要があります。<span
                            class="chunk">gAMA</span>における視聴条件は、sRGB仕様 [<cite><a class="bibref" data-link-type="biblio"
                                href="#bib-srgb"
                                title="Multimedia systems and equipment - Colour measurement and management - Part 2-1: Colour management - Default RGB colour space - sRGB">SRGB</a></cite>]
                        の参照視聴条件です。異なる視聴条件への調整は通常カラーマネジメントシステムによって処理されます。調整が行われない場合でも、誤差は通常小さくなります。高い色忠実度を望むアプリケーションは、<a
                            class="chunk" href="#11sRGB">sRGB</a>や<a class="chunk"
                            href="#11iCCP">iCCP</a>チャンクの利用を検討してもよいでしょう。</p>

                    <p><span class="chunk">gAMA</span>チャンクの内容は次のとおりです。</p>

                    <table id="gAMA-structure" class="simple numbered">
                        <tbody>
                            <tr>
                                <td>画像ガンマ</td>
                                <td>4 bytes</td>
                            </tr>
                        </tbody>
                    </table>

                    <p>値は<a href="#dfn-png-four-byte-unsigned-integer" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-png-four-byte-unsigned-integer-5">PNG 4バイト符号なし整数</a>としてエンコードされ、<a
                            href="#dfn-gamma-value" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-gamma-value-4">ガンマ値</a>に100000を掛けたものを表します。</p>

                    <p class="example"><a href="#dfn-gamma-value" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-gamma-value-5">ガンマ値</a> 1/2.2 は整数 45455 として格納されます。</p>

                    <p><a href="#12Encoder-gamma-handling" class="sec-ref"><bdi class="secno">12.1
                            </bdi>エンコーダのガンマ処理</a>および<a href="#13Decoder-gamma-handling" class="sec-ref"><bdi
                                class="secno">13.13 </bdi>デコーダのガンマ処理</a>も参照してください。</p>

                    <p>このチャンクは、デコーダが理解する<a href="#color-chunk-precendence">最優先の色チャンク</a>でない限り無視されます。</p>
                </section>


                <section id="11iCCP">
                    <div class="header-wrapper">
                        <h5 id="x11-3-2-3-iccp-embedded-icc-profile"><bdi class="secno">11.3.2.3 </bdi><span
                                class="chunk">iCCP</span> 埋め込みICCプロファイル</h5><a class="self-link" href="#11iCCP"
                            aria-label="Permalink for Section 11.3.2.3"></a>
                    </div>



                    <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます。</p>

                    <pre aria-busy="false"><code class="hljs">69 43 43 50</code></pre>
                    <p><span class="chunk">iCCP</span>チャンクの内容は次のとおりです。</p>

                    <table id="iCCP-structure" class="simple numbered">
                        <tbody>
                            <tr>
                                <td>プロファイル名</td>
                                <td>1-79 bytes（文字列）</td>
                            </tr>

                            <tr>
                                <td>ヌル区切り</td>
                                <td>1 byte（ヌル文字）</td>
                            </tr>

                            <tr>
                                <td>圧縮方式</td>
                                <td>1 byte</td>
                            </tr>

                            <tr>
                                <td>圧縮済みプロファイル</td>
                                <td>n bytes</td>
                            </tr>
                        </tbody>
                    </table>

                    <p>プロファイル名は、そのプロファイルを参照するための任意の分かりやすい名称でよく、大文字小文字は区別されます。プロファイル名には印字可能なLatin-1文字と空白のみを含めなければなりません（使用可能なコードポイントは
                        0x20-7E と 0xA1-FF のみ）。先頭・末尾・連続する空白は許可されません。本仕様で定義される圧縮方式は方式0（<a href="#dfn-deflate"
                            class="internalDFN" data-link-type="dfn" id="ref-for-dfn-deflate-12">deflate</a>圧縮による<a
                            href="#dfn-zlib" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-zlib-14">zlib</a>データストリーム。<a href="#10CompressionOtherUses"
                            class="sec-ref"><bdi class="secno">10.3
                            </bdi>その他の圧縮の用途</a>参照）のみです。圧縮方式のエントリに続いて、チャンクの残り全体を構成する圧縮済みプロファイルが続きます。このデータストリームを伸長すると、埋め込みICCプロファイルが得られます。
                    </p>

                    <p><span class="chunk">iCCP</span>チャンクが存在する場合、画像サンプルはInternational Color Consortium [<cite><a
                                class="bibref" data-link-type="biblio" href="#bib-icc"
                                title="ICC.1:2022 (Profile version 4.4.0.0)">ICC</a></cite>][<cite><a class="bibref"
                                data-link-type="biblio" href="#bib-iso_15076-1"
                                title="ISO 15076-1:2010 Image technology colour management — Architecture, profile format and data structure — Part 1: Based on ICC.1:2010">ISO_15076-1</a></cite>]で定義される埋め込みICCプロファイルが表すカラースペースに準拠します。ICCプロファイルのカラースペースは、カラー画像（<a
                            href="#3colourType" class="internalDFN" data-link-type="dfn"
                            id="ref-for-3colourType-25">カラータイプ</a>2、3、6）の場合はRGBカラースペース、<a href="#dfn-greyscale"
                            class="internalDFN" data-link-type="dfn" id="ref-for-dfn-greyscale-10">グレースケール</a>画像（<a
                            href="#3colourType" class="internalDFN" data-link-type="dfn"
                            id="ref-for-3colourType-26">カラータイプ</a>0、4）の場合はグレースケールカラースペースでなければなりません。<span
                            class="chunk">iCCP</span>チャンクを書き出すPNGエンコーダは、<span
                            class="chunk">iCCP</span>チャンクを使用しないアプリケーションとの互換性のため、ICCプロファイルを近似する<a class="chunk"
                            href="#11gAMA">gAMA</a>および<a class="chunk" href="#11cHRM">cHRM</a>チャンクも併せて書き出すことが推奨されます。
                    </p>

                    <p>
                        このチャンクは、デコーダが理解する<a href="#color-chunk-precendence">最優先の色チャンク</a>でない限り無視されます。
                    </p>

                    <p><a class="chunk" href="#cICP-chunk">cICP</a>チャンクが存在しない限り、PNGデータストリームに含める埋め込みプロファイルは、<span
                            class="chunk">iCCP</span>で明示的に指定するか<a class="chunk"
                            href="#srgb-standard-colour-space">sRGB</a>チャンクで暗黙的に指定するかのいずれか一つにとどめるのが望ましいです。</p>
                </section>


                <section id="11sBIT">
                    <div class="header-wrapper">
                        <h5 id="x11-3-2-4-sbit-significant-bits"><bdi class="secno">11.3.2.4 </bdi><span
                                class="chunk">sBIT</span> 有効ビット数</h5><a class="self-link" href="#11sBIT"
                            aria-label="Permalink for Section 11.3.2.4"></a>
                    </div>



                    <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます。</p>

                    <pre aria-busy="false"><code class="hljs">73 42 49 54</code></pre>
                    <p>デコーダを簡素化するため、PNGは使用可能なサンプル深度を限定し、さらにサンプル値がサンプル深度における可能な値の全域へスケーリングされるべきであると規定しています。<span
                            class="chunk">sBIT</span>チャンクは元の有効ビット数（サンプル深度以下）を定義します。これにより、データがPNGで直接サポートされないサンプル深度であっても、PNGデコーダは元のデータをロスレスに復元できます。
                    </p>

                    <p><span class="chunk">sBIT</span>チャンクの内容は次のとおりです。</p>



                    <table id="sBIT-structure" class="numbered simple">
                        <caption><a class="self-link" href="#sBIT-structure">Table <bdi class="tableno">14</bdi></a>
                            <span class="table-title">
                                sBIT チャンクの内容
                            </span>
                        </caption>

                        <tbody>
                            <tr>
                                <th colspan="2">カラータイプ 0</th>
                            </tr>

                            <tr>
                                <td>有効グレースケールビット数</td>
                                <td>1 byte</td>
                            </tr>

                            <tr>
                                <th colspan="2">カラータイプ 2 および 3</th>
                            </tr>

                            <tr>
                                <td>有効赤ビット数</td>
                                <td>1 byte</td>
                            </tr>

                            <tr>
                                <td>有効緑ビット数</td>
                                <td>1 byte</td>
                            </tr>

                            <tr>
                                <td>有効青ビット数</td>
                                <td>1 byte</td>
                            </tr>

                            <tr>
                                <th colspan="2">カラータイプ 4</th>
                            </tr>

                            <tr>
                                <td>有効グレースケールビット数</td>
                                <td>1 byte</td>
                            </tr>

                            <tr>
                                <td>有効アルファビット数</td>
                                <td>1 byte</td>
                            </tr>

                            <tr>
                                <th colspan="2">カラータイプ 6</th>
                            </tr>

                            <tr>
                                <td>有効赤ビット数</td>
                                <td>1 byte</td>
                            </tr>

                            <tr>
                                <td>有効緑ビット数</td>
                                <td>1 byte</td>
                            </tr>

                            <tr>
                                <td>有効青ビット数</td>
                                <td>1 byte</td>
                            </tr>

                            <tr>
                                <td>有効アルファビット数</td>
                                <td>1 byte</td>
                            </tr>
                        </tbody>
                    </table>

                    <p><span class="chunk">sBIT</span>で指定される各深度は0より大きく、サンプル深度（<a href="#3indexedColour"
                            class="internalDFN" data-link-type="dfn"
                            id="ref-for-3indexedColour-14">インデックスカラー</a>画像では8、その他の<a href="#3colourType"
                            class="internalDFN" data-link-type="dfn" id="ref-for-3colourType-27">カラータイプ</a>では<a
                            class="chunk" href="#11IHDR">IHDR</a>で与えられるビット深度）以下でなければなりません。なお、<span
                            class="chunk">sBIT</span>は、<a class="chunk"
                            href="#11tRNS">tRNS</a>チャンクによって暗示されるアルファチャネルのサンプル深度は提供しません。その場合、アルファチャネルのすべてのサンプルビットは有効と見なされます。<span
                            class="chunk">sBIT</span>チャンクが存在しない場合、すべてのチャネルのすべてのサンプルビットは有効と見なされます。</p>
                </section>


                <section id="11sRGB">
                    <div class="header-wrapper">
                        <h5 id="srgb-standard-colour-space"><bdi class="secno">11.3.2.5 </bdi><span
                                class="chunk">sRGB</span> 標準RGBカラースペース</h5><a class="self-link"
                            href="#srgb-standard-colour-space" aria-label="Permalink for Section 11.3.2.5"></a>
                    </div>



                    <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます。</p>

                    <pre aria-busy="false"><code class="hljs">73 52 47 42</code></pre>
                    <p><span class="chunk">sRGB</span>チャンクが存在する場合、画像サンプルは sRGB カラースペース [<cite><a class="bibref"
                                data-link-type="biblio" href="#bib-srgb"
                                title="Multimedia systems and equipment - Colour measurement and management - Part 2-1: Colour management - Default RGB colour space - sRGB">SRGB</a></cite>]
                        に準拠し、International Color Consortium [<cite><a class="bibref" data-link-type="biblio"
                                href="#bib-icc" title="ICC.1:2022 (Profile version 4.4.0.0)">ICC</a></cite>] または
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-icc-2"
                                title="Specification ICC.2:2019 (Profile version 5.0.0 - iccMAX)">ICC-2</a></cite>]で定義される指定のレンダリングインテントを用いて表示されるべきです。
                    </p>

                    <p><span class="chunk">sRGB</span>チャンクの内容は次のとおりです。</p>

                    <table id="sRGB-structure" class="numbered simple">
                        <caption><a class="self-link" href="#sRGB-structure">Table <bdi class="tableno">15</bdi></a>
                            <span class="table-title">
                                sRGB チャンクの内容
                            </span>
                        </caption>

                        <tbody>
                            <tr>
                                <th>名称</th>
                                <th>サイズ</th>
                            </tr>

                            <tr>
                                <td>レンダリングインテント</td>
                                <td>1 byte</td>
                            </tr>
                        </tbody>
                    </table>

                    <p>レンダリングインテントには次の値が定義されています。</p>

                    <table id="rendering-intent-structure" class="numbered simple">
                        <caption><a class="self-link" href="#rendering-intent-structure">Table <bdi
                                    class="tableno">16</bdi></a> <span class="table-title">
                                レンダリングインテントの値
                            </span></caption>

                        <tbody>
                            <tr>
                                <th>値</th>
                                <th>名称</th>
                                <th>説明</th>
                            </tr>

                            <tr>
                                <td>0</td>
                                <td>知覚（Perceptual）</td>
                                <td>写真など、測色的な正確さを犠牲にしても出力デバイスの色域への良好な適応を優先する画像。</td>
                            </tr>

                            <tr>
                                <td>1</td>
                                <td>相対測色（Relative colorimetric）</td>
                                <td>
                                    ロゴなど、出力デバイスの<a href="#dfn-white-point" class="internalDFN" data-link-type="dfn"
                                        id="ref-for-dfn-white-point-3">ホワイトポイント</a>に相対的な色外観の一致を要する画像。
                                </td>
                            </tr>

                            <tr>
                                <td>2</td>
                                <td>彩度（Saturation）</td>
                                <td>チャートやグラフなど、色相や明度よりも彩度の保持を優先する画像。</td>
                            </tr>

                            <tr>
                                <td>3</td>
                                <td>絶対測色（Absolute colorimetric）</td>
                                <td>別の出力デバイス向け画像のプルーフなど、絶対的な測色の保持を要する画像。</td>
                            </tr>
                        </tbody>
                    </table>

                    <p><span class="chunk">sRGB</span>チャンクを書き出すPNGエンコーダは、<span
                            class="chunk">sRGB</span>チャンクを使用しないデコーダとの互換性のため、<a class="chunk"
                            href="#11gAMA">gAMA</a>チャンク（および任意で<a class="chunk"
                            href="#11cHRM">cHRM</a>チャンク）も書き出すことが推奨されます。使用すべき値は次のみです。</p>

                    <table id="sRGB-gAMA-cHRM" class="numbered simple">
                        <caption><a class="self-link" href="#sRGB-gAMA-cHRM">Table <bdi class="tableno">17</bdi></a>
                            <span class="table-title">
                                sRGB 用の gAMA および cHRM 値
                            </span>
                        </caption>

                        <tbody>
                            <tr>
                                <th colspan="2">gAMA</th>
                            </tr>

                            <tr>
                                <td>ガンマ</td>
                                <td>45455</td>
                            </tr>

                            <tr>
                                <th colspan="2">cHRM</th>
                            </tr>

                            <tr>
                                <td>ホワイトポイント x</td>
                                <td>31270</td>
                            </tr>

                            <tr>
                                <td>ホワイトポイント y</td>
                                <td>32900</td>
                            </tr>

                            <tr>
                                <td>赤 x</td>
                                <td>64000</td>
                            </tr>

                            <tr>
                                <td>赤 y</td>
                                <td>33000</td>
                            </tr>

                            <tr>
                                <td>緑 x</td>
                                <td>30000</td>
                            </tr>

                            <tr>
                                <td>緑 y</td>
                                <td>60000</td>
                            </tr>

                            <tr>
                                <td>青 x</td>
                                <td>15000</td>
                            </tr>

                            <tr>
                                <td>青 y</td>
                                <td>6000</td>
                            </tr>
                        </tbody>
                    </table>

                    <p>
                        このチャンクは、デコーダが理解する<a href="#color-chunk-precendence">最優先の色チャンク</a>でない限り無視されます。
                    </p>

                    <p><a class="chunk" href="#11sRGB">sRGB</a>チャンクと<a class="chunk"
                            href="#11iCCP">iCCP</a>チャンクが同時にPNGデータストリームに現れないことが推奨されます。</p>
                </section>


                <section id="cICP-chunk">
                    <div class="header-wrapper">
                        <h5 id="x11-3-2-6-cicp-coding-independent-code-points-for-video-signal-type-identification"><bdi
                                class="secno">11.3.2.6 </bdi><span class="chunk">cICP</span>
                            動画信号種別識別のためのコーディング非依存コードポイント</h5><a class="self-link" href="#cICP-chunk"
                            aria-label="Permalink for Section 11.3.2.6"></a>
                    </div>



                    <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます。</p>

                    <pre aria-busy="false"><code class="hljs">63 49 43 50</code></pre>
                    <p>存在する場合、<span class="chunk">cICP</span>チャンクは、[<cite><a class="bibref" data-link-type="biblio"
                                href="#bib-itu-t-h.273"
                                title="ITU-T H.273, SERIES H: AUDIOVISUAL AND MULTIMEDIA SYSTEMS Infrastructure of audiovisual services – Coding of moving video. Coding-independent code points for video signal type identification">ITU-T-H.273</a></cite>]で規定されるコードポイントを用いて、画像のカラースペース（原色）、伝達関数、行列係数およびスケーリング係数を指定します。ビデオフォーマットのシグナリングは、デコーダやレンダリング時を含めて、画像の処理において使用することが<em
                            class="rfc2119">SHOULD</em>です。</p>

                    <p>cICPチャンクは、上述の特性を識別する4つの1バイト符号なし整数から構成されます。</p>

                    <p><span class="chunk">cICP</span>チャンクの構文は次のとおりです。</p>

                    <table id="cICP-chunk-syntax" class="numbered simple">
                        <caption><a class="self-link" href="#cICP-chunk-syntax">Table <bdi class="tableno">18</bdi></a>
                            <span class="table-title">
                                cICP チャンクの構成要素
                            </span>
                        </caption>

                        <tbody>
                            <tr>
                                <th>名称</th>
                                <th>サイズ</th>
                            </tr>

                            <tr>
                                <td>色度点（Color Primaries）</td>
                                <td>1 byte</td>
                            </tr>

                            <tr>
                                <td>伝達関数（Transfer Function）</td>
                                <td>1 byte</td>
                            </tr>

                            <tr>
                                <td>行列係数（Matrix Coefficients）</td>
                                <td>1 byte</td>
                            </tr>

                            <tr>
                                <td>フルレンジフラグ（Video Full Range Flag）</td>
                                <td>1 byte</td>
                            </tr>
                        </tbody>
                    </table>

                    <p><span class="chunk">cICP</span>チャンクの各フィールドは、[<cite><a class="bibref" data-link-type="biblio"
                                href="#bib-itu-t-h.273"
                                title="ITU-T H.273, SERIES H: AUDIOVISUAL AND MULTIMEDIA SYSTEMS Infrastructure of audiovisual services – Coding of moving video. Coding-independent code points for video signal type identification">ITU-T-H.273</a></cite>]における同名のパラメータに対応します。
                    </p>

                    <p>PNGで現在サポートされるカラーモデルはRGBのみであるため、
                        <code>Matrix Coefficients</code>は<code>0</code>に設定しなければなりません（shall）。
                    </p>

                    <div class="note" role="note" id="issue-container-generatedID-11">
                        <div role="heading" class="note-title marker" id="h-note-11" aria-level="6"><span>注</span>
                        </div>
                        <aside class="">
                            <code>Video Full Range Flag</code>の値が<code>1</code>の場合、その画像は<a href="#dfn-full-range-image"
                                class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-full-range-image-1">フルレンジ画像</a>です。通常、RGB表現の画像はフルレンジの信号量子化で格納されるため、従来のPNGワークフローで用いられるものを含め、ほとんどのコンピュータグラフィックスやWeb画像は<a
                                href="#dfn-full-range-image" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-full-range-image-2">フルレンジ画像</a>です。<code>Video Full Range Flag</code>の値が<code>0</code>の場合、その画像は<a
                                href="#dfn-narrow-range-image" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-narrow-range-image-1">ナローレンジ画像</a>です。ナローレンジ画像は、基準黒（0%信号レベル）より下や名目ピーク（100%信号レベル）より上のサンプル値が存在するビデオワークフローで見られます。例えば
                            [<cite><a class="bibref" data-link-type="biblio" href="#bib-itu-r-bt.709"
                                    title="ITU-R BT.709, SERIES BT: BROADCASTING SERVICE (TELEVISION). Parameter values for the HDTV standards for production and international programme exchange">ITU-R-BT.709</a></cite>]
                            は、10ビット符号化では基準黒（黒レベル）がコード値64、名目ピークがコード値940に対応すると規定しています。ナローレンジでは、フィルタリング／圧縮による処理アーティファクトや非制御照明による影響をクリップせず保持するため、基準黒より下や名目ピークより上にオーバーシュート／アンダーシュートと定義される一時的な逸脱が存在します。これは、後続の処理や圧縮の段階での画質改善に寄与し得ます。アンダーシュート／オーバーシュートの使用は、[<cite><a
                                    class="bibref" data-link-type="biblio" href="#bib-ebu-r-103"
                                    title="Video Signal Tolerance in Digital Television Systems">EBU-R-103</a></cite>]で述べられるように、追加のカラー・ボリューム（明るさと色）の保持にも用いられてきました。[<cite><a
                                    class="bibref" data-link-type="biblio" href="#bib-smpte-rp-2077"
                                    title="Full-Range Image Mapping">SMPTE-RP-2077</a></cite>]はフルレンジの詳細と、<a
                                href="#dfn-full-range-image" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-full-range-image-3">フルレンジ画像</a>から<a href="#dfn-narrow-range-image"
                                class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-narrow-range-image-2">ナローレンジ画像</a>へのマッピング、さらにSDI（ベースバンド）伝送の保護コード値について記述しています。
                        </aside>
                    </div>

                    <p><code>Video Full Range Flag</code>が<code>0</code>（<a href="#dfn-narrow-range-image"
                            class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-narrow-range-image-3">ナローレンジ画像</a>）の場合、推奨される実践は、負の値を含むように、<a
                            href="#dfn-eotf" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-eotf-1"><abbr
                                title="Electro-Optical Transfer Function">EOTF</abbr></a>または逆の<a href="#dfn-oetf"
                            class="internalDFN" data-link-type="dfn" id="ref-for-dfn-oetf-1"><abbr
                                title="Opto-Electrical Transfer Function">OETF</abbr></a>などの伝達関数を拡張範囲にわたって定義することです。
                        これは次のように行います。
                    </p>

                    <pre
                        aria-busy="false"><code class="hljs abnf"><span class="hljs-attribute">out</span> <span class="hljs-operator">=</span> sign(in) * TransferFunction(abs(in))</code></pre>

                    <p><span class="chunk">cICP</span>チャンクは<a class="chunk" href="#11PLTE">PLTE</a>および<a class="chunk"
                            href="#11IDAT">IDAT</a>チャンクより前に置かなければなりません（<em class="rfc2119">MUST</em>）。</p>

                    <p>
                        このチャンクは、デコーダが理解する場合、<a href="#color-chunk-precendence">最優先の色チャンク</a>です。
                    </p>


                    <aside class="example" id="ex-cICP-BT.2100-PQ-full">
                        <div class="marker">
                            <a class="self-link" href="#ex-cICP-BT.2100-PQ-full">例<bdi> 1</bdi></a>
                        </div>
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-itu-r-bt.2100"
                                title="ITU-R BT.2100, SERIES BT: BROADCASTING SERVICE (TELEVISION). Image parameter values for high dynamic range television for use in production and international programme exchange">ITU-R-BT.2100</a></cite>]で規定される色度点と<a
                            href="#dfn-pq" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-pq-2">PQ</a><a
                            href="#dfn-transfer-function" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-transfer-function-8">伝達関数</a>を用いる<a href="#dfn-full-range-image"
                            class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-full-range-image-4">フルレンジ画像</a>の<span class="chunk">cICP</span>チャンクのフィールド値：

                        <pre aria-busy="false"><code class="hljs">09 10 00 01</code></pre>
                        <p>（4つの1バイト符号なし整数、16進表記）</p>
                    </aside>

                    <aside class="example" id="ex-cICP-BT.2100-HLG-full">
                        <div class="marker">
                            <a class="self-link" href="#ex-cICP-BT.2100-HLG-full">例<bdi> 2</bdi></a>
                        </div>
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-itu-r-bt.2100"
                                title="ITU-R BT.2100, SERIES BT: BROADCASTING SERVICE (TELEVISION). Image parameter values for high dynamic range television for use in production and international programme exchange">ITU-R-BT.2100</a></cite>]で規定される色度点と<a
                            href="#dfn-hlg" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hlg-2">HLG</a><a
                            href="#dfn-transfer-function" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-transfer-function-9">伝達関数</a>を用いる<a href="#dfn-full-range-image"
                            class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-full-range-image-5">フルレンジ画像</a>の<span class="chunk">cICP</span>チャンクのフィールド値：

                        <pre aria-busy="false"><code class="hljs">09 12 00 01</code></pre>
                        <p>（4つの1バイト符号なし整数、16進表記）</p>
                    </aside>

                    <aside class="example" id="ex-cICP-BT.709-narrow">
                        <div class="marker">
                            <a class="self-link" href="#ex-cICP-BT.709-narrow">例<bdi> 3</bdi></a>
                        </div>
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-itu-r-bt.709"
                                title="ITU-R BT.709, SERIES BT: BROADCASTING SERVICE (TELEVISION). Parameter values for the HDTV standards for production and international programme exchange">ITU-R-BT.709</a></cite>]で定義される色度点と<a
                            href="#dfn-transfer-function" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-transfer-function-10">伝達関数</a>を用いる<a href="#dfn-narrow-range-image"
                            class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-narrow-range-image-4">ナローレンジ画像</a>の<span
                            class="chunk">cICP</span>チャンクのフィールド値：

                        <pre aria-busy="false"><code class="hljs">01 01 00 00</code></pre>
                        <p>（4つの1バイト符号なし整数、16進表記）</p>
                    </aside>

                    <p id="display-p3"><a href="#srgb-standard-colour-space"><span
                                class="chunk">sRGB</span></a>チャンクを用いてsRGB画像を簡潔にシグナルするのと同様に、<span
                            class="chunk">cICP</span>はDisplay P3画像 [<cite><a class="bibref" data-link-type="biblio"
                                href="#bib-display-p3" title="Display P3">Display-P3</a></cite>] を簡潔にシグナルするためにも使用できます。
                    </p>

                    <aside class="example" id="ex-cICP-Display-P3-full">
                        <div class="marker">
                            <a class="self-link" href="#ex-cICP-Display-P3-full">例<bdi> 4</bdi></a>
                        </div>
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-display-p3"
                                title="Display P3">Display-P3</a></cite>]で定義される色度点と<a href="#dfn-transfer-function"
                            class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-transfer-function-11">伝達関数</a>を用いる<a href="#dfn-full-range-image"
                            class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-full-range-image-6">フルレンジ画像</a>の<span class="chunk">cICP</span>チャンクのフィールド値：

                        <pre aria-busy="false"><code class="hljs">0C 0D 00 01</code></pre>
                        <p>（4つの1バイト符号なし整数、16進表記）</p>
                    </aside>

                </section>


                <section id="mDCV-chunk">
                    <div class="header-wrapper">
                        <h5 id="x11-3-2-7-mdcv-mastering-display-color-volume"><bdi class="secno">11.3.2.7 </bdi><span
                                class="chunk">mDCV</span> マスタリングディスプレイ色域（Color Volume）</h5><a class="self-link"
                            href="#mDCV-chunk" aria-label="Permalink for Section 11.3.2.7"></a>
                    </div>



                    <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます。</p>

                    <pre aria-busy="false"><code class="hljs">6D 44 43 56</code></pre>

                    <p>存在する場合、<span class="chunk">mDCV</span>チャンクは、[<cite><a class="bibref" data-link-type="biblio"
                                href="#bib-smpte-st-2086"
                                title="Mastering Display Color Volume Metadata Supporting High Luminance and Wide Color Gamut Images">SMPTE-ST-2086</a></cite>]で規定される、コンテンツ制作時点で用いられたマスタリングディスプレイのカラーボリューム（mDCV）を特徴付けます。mDCVチャンクは情報的な静的メタデータを提供し、ターゲット（視聴者側）ディスプレイが自身の能力と元のマスタリングディスプレイの能力を比較してトーンマッピングを最適化できる可能性を与えます。
                    </p>

                    <p>mDCVは一般に、<a href="#dfn-pq" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-pq-3">PQ</a>
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-itu-r-bt.2100"
                                title="ITU-R BT.2100, SERIES BT: BROADCASTING SERVICE (TELEVISION). Image parameter values for high dynamic range television for use in production and international programme exchange">ITU-R-BT.2100</a></cite>]
                        の伝達関数および追加の<a href="#cLLI-chunk">cLLI</a>メタデータと共に使用され、この組合せは一般に
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-hdr10"
                                title="HDR10 Media Profile">HDR10</a></cite>]（PQ + ST 2086
                        静的メタデータ、MaxFALL、MaxCLL）と呼ばれます。<span class="chunk">mDCV</span>チャンクは<a href="#dfn-hlg"
                            class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hlg-3">HLG</a> [<cite><a
                                class="bibref" data-link-type="biblio" href="#bib-itu-r-bt.2100"
                                title="ITU-R BT.2100, SERIES BT: BROADCASTING SERVICE (TELEVISION). Image parameter values for high dynamic range television for use in production and international programme exchange">ITU-R-BT.2100</a></cite>]や
                        <a href="#dfn-sdr" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-sdr-3">SDR</a>画像形式（例：[<cite><a class="bibref" data-link-type="biblio"
                                href="#bib-itu-r-bt.709"
                                title="ITU-R BT.709, SERIES BT: BROADCASTING SERVICE (TELEVISION). Parameter values for the HDTV standards for production and international programme exchange">ITU-R-BT.709</a></cite>]）にも含めることができます。
                    </p>

                    <p>mDCVはもともと、ビデオ表示ターゲット上での画像のトーンマッピング最適化を目的とした補助的な静的メタデータとして作られたため、<span
                            class="chunk">mDCV</span>を使用する際は、画像コンテンツの基本特性を確立するためにcICPチャンクを伴わせる必要があります。色度点およびホワイトポイントの特性はcICPチャンクの形式から導出できます。HDR
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-itu-r-bt.2100"
                                title="ITU-R BT.2100, SERIES BT: BROADCASTING SERVICE (TELEVISION). Image parameter values for high dynamic range television for use in production and international programme exchange">ITU-R-BT.2100</a></cite>]
                        と SDR [<cite><a class="bibref" data-link-type="biblio" href="#bib-itu-r-bt.709"
                                title="ITU-R BT.709, SERIES BT: BROADCASTING SERVICE (TELEVISION). Parameter values for the HDTV standards for production and international programme exchange">ITU-R-BT.709</a></cite>]
                        の双方を用いる画像に関する代表的ユースケースは
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-itu-t-series-h-supplement-19"
                                title="Series H: Audio Visual and Multimedia Systems - Usage of video signal type code points">ITU-T-Series-H-Supplement-19</a></cite>]に示されています。基本（cICP）の特性に加え、補助（mDCV）の静的メタデータは、トーンマッピングの最適化に有用な情報となり得ます。
                    </p>


                    <div class="note" role="note" id="issue-container-generatedID-12">
                        <div role="heading" class="note-title marker" id="h-note-12" aria-level="6"><span>注</span>
                        </div>
                        <p class=""><a href="https://github.com/w3c/png/issues/319">Issue #319</a>は、<span
                                class="chunk">mDCV</span>チャンクが存在する場合のトーンマッピング動作について議論しています。</p>
                    </div>

                    <p><a href="#dfn-sdr" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-sdr-4">SDR</a>画像において、mDCVの表示最小／最大輝度が不明な場合、デフォルト特性は [<cite><a class="bibref"
                                data-link-type="biblio" href="#bib-itu-t-series-h-supplement-19"
                                title="Series H: Audio Visual and Multimedia Systems - Usage of video signal type code points">ITU-T-Series-H-Supplement-19</a></cite>]
                        表11の値、または関連する<a href="#dfn-sdr" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-sdr-5">SDR</a>仕様から導出できます。現時点では、SDR画像信号をデフォルトの視聴条件（表示輝度と周囲照明）からmDCVチャンクでシグナルされる条件へ変換する標準化された公開手法はありません。
                    </p>

                    <div class="note" role="note" id="issue-container-generatedID-13">
                        <div role="heading" class="note-title marker" id="h-note-13" aria-level="6"><span>注</span>
                        </div>
                        <aside class="">
                            <a href="#dfn-hlg" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hlg-4">HLG</a>
                            [<cite><a class="bibref" data-link-type="biblio" href="#bib-itu-r-bt.2100"
                                    title="ITU-R BT.2100, SERIES BT: BROADCASTING SERVICE (TELEVISION). Image parameter values for high dynamic range television for use in production and international programme exchange">ITU-R-BT.2100</a></cite>]
                            画像形式には、表示輝度（[<cite><a class="bibref" data-link-type="biblio" href="#bib-itu-r-bt.2100"
                                    title="ITU-R BT.2100, SERIES BT: BROADCASTING SERVICE (TELEVISION). Image parameter values for high dynamic range television for use in production and international programme exchange">ITU-R-BT.2100</a></cite>]内）および周囲照明（付随する報告書
                            [<cite><a class="bibref" data-link-type="biblio" href="#bib-itu-r-bt.2390"
                                    title="High dynamic range television for production and international programme exchange">ITU-R-BT.2390</a></cite>]
                            内）の変化に対する変換手法が公開されています。これはSDR画像にも利用できます。
                        </aside>
                    </div>

                    <p>以下に<span class="chunk">mDCV</span>チャンクの構文を示します。</p>

                    <table id="mDCV-chunk-syntax" class="numbered simple">
                        <caption><a class="self-link" href="#mDCV-chunk-syntax">Table <bdi class="tableno">19</bdi></a>
                            <span class="table-title">
                                mDCV チャンクの構成要素
                            </span>
                        </caption>

                        <tbody>
                            <tr>
                                <th>名称</th>
                                <th>サイズ</th>
                                <th>除数値</th>
                            </tr>

                            <tr>
                                <td>マスタリングディスプレイの色度点（CIE 1931 <i>x,y</i> の R,G,B）</td>
                                <td>12 bytes</td>
                                <td>0.00002</td>
                            </tr>

                            <tr>
                                <td>マスタリングディスプレイのホワイトポイント色度（CIE 1931 <i>x,y</i>）</td>
                                <td>4 bytes</td>
                                <td>0.00002</td>
                            </tr>

                            <tr>
                                <td>マスタリングディスプレイの最大輝度（cd/m<sup>2</sup>）</td>
                                <td>4 bytes</td>
                                <td>0.0001</td>
                            </tr>

                            <tr>
                                <td>マスタリングディスプレイの最小輝度（cd/m<sup>2</sup>）</td>
                                <td>4 bytes</td>
                                <td>0.0001</td>
                            </tr>
                        </tbody>
                    </table>

                    <p>色度点は、順に<em>x</em>、<em>y</em>の順で、各々が除数値で割られた x または y の基本色度値を表す、3組の<a
                            href="#dfn-png-two-byte-unsigned-integer" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-png-two-byte-unsigned-integer-1">PNG
                            2バイト符号なし整数</a>としてエンコードされます。並び順は、x色度が最大の原色、次にy色度が最大の原色、最後に残る原色の順です。RGBカラースペースではR、G、Bの順に対応します。
                    </p>
                    <p>
                        ホワイトポイントは、順に<em>x</em>、<em>y</em>の順で、各々が除数値で割られた x または y のホワイト色度値を表す、1組の<a
                            href="#dfn-png-two-byte-unsigned-integer" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-png-two-byte-unsigned-integer-2">PNG 2バイト符号なし整数</a>としてエンコードされます。
                    </p>

                    <p>
                        最大および最小輝度値は、cd/m<sup>2</sup>の絶対輝度値を除数値で割った値を表す<a href="#dfn-png-four-byte-unsigned-integer"
                            class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-png-four-byte-unsigned-integer-6">PNG 4バイト符号なし整数</a>としてエンコードされます。
                    </p>

                    <p>除数は実際の値から格納値への写像を与えます。例えば、原色およびホワイトポイントに対する単位なしの除数 0.00002 の場合、色度 (0.6800, 0.3200) は {34000,
                        16000} として格納されます。</p>

                    <p><span class="chunk">mDCV</span>チャンクは<a class="chunk" href="#11PLTE">PLTE</a>および<a class="chunk"
                            href="#11IDAT">IDAT</a>チャンクより前に置かなければなりません（<em class="rfc2119">MUST</em>）。</p>

                    <p>以下に [<cite><a class="bibref" data-link-type="biblio" href="#bib-itu-r-bt.2100"
                                title="ITU-R BT.2100, SERIES BT: BROADCASTING SERVICE (TELEVISION). Image parameter values for high dynamic range television for use in production and international programme exchange">ITU-R-BT.2100</a></cite>]
                        <a href="#dfn-hdr" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hdr-3">HDR</a> の
                        mDCV 例を示します。
                    </p>

                    <aside class="example" id="example-5">
                        <div class="marker">
                            <a class="self-link" href="#example-5">例<bdi> 5</bdi></a>
                        </div>
                        <a href="#dfn-hdr" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hdr-4">HDR</a>
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-itu-r-bt.2100"
                                title="ITU-R BT.2100, SERIES BT: BROADCASTING SERVICE (TELEVISION). Image parameter values for high dynamic range television for use in production and international programme exchange">ITU-R-BT.2100</a></cite>]
                        における<span class="chunk">mDCV</span>チャンクのマスタリングディスプレイの色度点の例：
                        <table id="mDCV-chunk-hdr-primaries-example" class="numbered simple">
                            <tbody>
                                <tr>
                                    <th>名称</th>
                                    <th>実際の値</th>
                                    <th>保存される10進値</th>
                                    <th>保存される16進値</th>
                                </tr>

                                <tr>
                                    <td rowspan="3">[<cite><a class="bibref" data-link-type="biblio"
                                                href="#bib-itu-r-bt.2020"
                                                title="Parameter values for ultra-high definition television systems for production and international programme exchange">ITU-R-BT.2020</a></cite>]
                                        で規定される色度点
                                    </td>
                                    <td>(0.708, 0.292)</td>
                                    <td>{ 35400, 14600 }</td>
                                    <td>{ 8A 48, 39 08 }</td>
                                </tr>

                                <tr>
                                    <td>(0.170, 0.797)</td>
                                    <td>{ 8500, 39850 }</td>
                                    <td>{ 21 34, 9B AA }</td>
                                </tr>

                                <tr>
                                    <td>(0.131, 0.046)</td>
                                    <td>{ 6550, 2300 }</td>
                                    <td>{ 19 96, 08 FC }</td>
                                </tr>
                            </tbody>
                        </table>
                    </aside>

                    <aside class="example" id="example-6">
                        <div class="marker">
                            <a class="self-link" href="#example-6">例<bdi> 6</bdi></a>
                        </div>
                        <a href="#dfn-hdr" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hdr-5">HDR</a>
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-itu-r-bt.2100"
                                title="ITU-R BT.2100, SERIES BT: BROADCASTING SERVICE (TELEVISION). Image parameter values for high dynamic range television for use in production and international programme exchange">ITU-R-BT.2100</a></cite>]
                        における<span class="chunk">mDCV</span>チャンクのマスタリングディスプレイのホワイトポイントの例：

                        <table id="mDCV-chunk-hdr-white-point-example" class="numbered simple">
                            <tbody>
                                <tr>
                                    <th>名称</th>
                                    <th>実際の値</th>
                                    <th>保存される10進値</th>
                                    <th>保存される16進値</th>
                                </tr>

                                <tr>
                                    <td>[<cite><a class="bibref" data-link-type="biblio" href="#bib-smpte-rp-177"
                                                title="Derivation of Basic Television Color Equations">SMPTE-RP-177</a></cite>]
                                        で規定されるD65光源
                                    </td>
                                    <td>(0.3127, 0.3290)</td>
                                    <td>{ 15635, 16450 }</td>
                                    <td>{ 3C 05, 40 42 }</td>
                                </tr>
                            </tbody>
                        </table>
                    </aside>

                    <aside class="example" id="example-7">
                        <div class="marker">
                            <a class="self-link" href="#example-7">例<bdi> 7</bdi></a>
                        </div>

                        <a href="#dfn-hdr" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hdr-6">HDR</a>
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-itu-r-bt.2100"
                                title="ITU-R BT.2100, SERIES BT: BROADCASTING SERVICE (TELEVISION). Image parameter values for high dynamic range television for use in production and international programme exchange">ITU-R-BT.2100</a></cite>]
                        における<span class="chunk">mDCV</span>チャンクのマスタリングディスプレイ最大輝度の例：

                        <table id="mDCV-chunk-hdr-max-luminance-example" class="numbered simple">
                            <tbody>
                                <tr>
                                    <th>実際の値</th>
                                    <th>保存される10進値</th>
                                    <th>保存される16進値</th>
                                </tr>

                                <tr>
                                    <td>4000 cd/m<sup>2</sup></td>
                                    <td>40000000</td>
                                    <td>02 62 5A 00</td>
                                </tr>
                            </tbody>
                        </table>
                    </aside>

                    <aside class="example" id="example-8">
                        <div class="marker">
                            <a class="self-link" href="#example-8">例<bdi> 8</bdi></a>
                        </div>
                        <span class="chunk">mDCV</span>チャンクのマスタリングディスプレイ最小輝度の例：
                        <table id="mDCV-chunk-hdr-min-luminance-example" class="numbered simple">
                            <tbody>
                                <tr>
                                    <th>実際の値</th>
                                    <th>保存される10進値</th>
                                    <th>保存される16進値</th>
                                </tr>

                                <tr>
                                    <td>0.0005 cd/m<sup>2</sup></td>
                                    <td>5</td>
                                    <td>00 00 00 05</td>
                                </tr>
                            </tbody>
                        </table>
                    </aside>

                    <p>以下に [<cite><a class="bibref" data-link-type="biblio" href="#bib-display-p3"
                                title="Display P3">Display-P3</a></cite>] の<a href="#dfn-sdr" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-sdr-6">SDR</a>に関する mDCV の例を示します。</p>

                    <aside class="example" id="example-9">
                        <div class="marker">
                            <a class="self-link" href="#example-9">例<bdi> 9</bdi></a>
                        </div>
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-display-p3"
                                title="Display P3">Display-P3</a></cite>] に対する<span
                            class="chunk">mDCV</span>チャンクのマスタリングディスプレイの色度点の例：

                        <table id="mDCV-chunk-sdr-primaries-example" class="numbered simple">
                            <tbody>
                                <tr>
                                    <th>名称</th>
                                    <th>実際の値</th>
                                    <th>保存される10進値</th>
                                    <th>保存される16進値</th>
                                </tr>

                                <tr>
                                    <td rowspan="3">[<cite><a class="bibref" data-link-type="biblio"
                                                href="#bib-display-p3" title="Display P3">Display-P3</a></cite>]
                                        で規定される色度点</td>
                                    <td>(0.68, 0.32)</td>
                                    <td>{ 34000, 16000 }</td>
                                    <td>{ 84 D0, 3E 80 }</td>
                                </tr>

                                <tr>
                                    <td>(0.265, 0.69)</td>
                                    <td>{ 13520, 34500 }</td>
                                    <td>{ 34 D0, 86 C4 }</td>
                                </tr>

                                <tr>
                                    <td>(0.15, 0.06)</td>
                                    <td>{ 7500, 3000 }</td>
                                    <td>{ 1D 4C, 0B B8 }</td>
                                </tr>
                            </tbody>
                        </table>
                    </aside>

                    <aside class="example" id="example-10">
                        <div class="marker">
                            <a class="self-link" href="#example-10">例<bdi> 10</bdi></a>
                        </div>
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-display-p3"
                                title="Display P3">Display-P3</a></cite>] に対する<span
                            class="chunk">mDCV</span>チャンクのマスタリングディスプレイのホワイトポイントの例：

                        <table id="mDCV-chunk-sdr-white-point-example" class="numbered simple">
                            <tbody>
                                <tr>
                                    <th>名称</th>
                                    <th>実際の値</th>
                                    <th>保存される10進値</th>
                                    <th>保存される16進値</th>
                                </tr>

                                <tr>
                                    <td>[<cite><a class="bibref" data-link-type="biblio" href="#bib-smpte-rp-177"
                                                title="Derivation of Basic Television Color Equations">SMPTE-RP-177</a></cite>]
                                        で規定されるD65光源
                                    </td>
                                    <td>(0.3127, 0.3290)</td>
                                    <td>{ 15635, 16450 }</td>
                                    <td>{ 3D 13, 40 42 }</td>
                                </tr>
                            </tbody>
                        </table>
                    </aside>

                    <aside class="example" id="example-11">
                        <div class="marker">
                            <a class="self-link" href="#example-11">例<bdi> 11</bdi></a>
                        </div>
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-display-p3"
                                title="Display P3">Display-P3</a></cite>] に対する<span
                            class="chunk">mDCV</span>チャンクのマスタリングディスプレイ最大輝度の例：
                        <table id="mDCV-chunk-sdr-max-luminance-example" class="numbered simple">
                            <tbody>
                                <tr>
                                    <th>実際の値</th>
                                    <th>保存される10進値</th>
                                    <th>保存される16進値</th>
                                </tr>

                                <tr>
                                    <td>80 cd/m<sup>2</sup></td>
                                    <td>800000</td>
                                    <td>00 0C 35 00</td>
                                </tr>
                            </tbody>
                        </table>
                    </aside>

                    <aside class="example" id="example-12">
                        <div class="marker">
                            <a class="self-link" href="#example-12">例<bdi> 12</bdi></a>
                        </div>
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-display-p3"
                                title="Display P3">Display-P3</a></cite>] に対する mDCV チャンクのマスタリングディスプレイ最小輝度の例：
                        <table id="mDCV-chunk-sdr-min-luminance-example" class="numbered simple">
                            <tbody>
                                <tr>
                                    <th>実際の値</th>
                                    <th>保存される10進値</th>
                                    <th>保存される16進値</th>
                                </tr>

                                <tr>
                                    <td>0.05 cd/m<sup>2</sup></td>
                                    <td>500</td>
                                    <td>00 00 01 F4</td>
                                </tr>
                            </tbody>
                        </table>
                    </aside>
                </section>

                <section id="cLLI-chunk">
                    <div class="header-wrapper">
                        <h5 id="x11-3-2-8-clli-content-light-level-information"><bdi class="secno">11.3.2.8 </bdi><span
                                class="chunk">cLLI</span> コンテンツ光度情報（Content Light Level Information）</h5><a
                            class="self-link" href="#cLLI-chunk" aria-label="Permalink for Section 11.3.2.8"></a>
                    </div>

                    <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます。</p>

                    <pre aria-busy="false"><code class="hljs">63 4C 4C 49</code></pre>
                    <p>存在する場合、<span class="chunk">cLLI</span>チャンクは<a href="#dfn-hdr" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-hdr-7">HDR</a>コンテンツの2つの特性を識別します：</p>

                    <p><span
                            class="chunk">cLLI</span>チャンクは静的メタデータを追加し、関連コンテンツのトーンマッピングを特定のターゲットディスプレイに最適化する機会を提供します。これは、コンテンツ自体のトーンマッピングをターゲットディスプレイのピーク輝度能力に合わせて調整し、クリッピングを防ぐことで達成されます。トーンマッピングの最適化手法は現時点では主観的です。
                    </p>

                    <p>MaxCLL（Maximum Content Light
                        Level）は、再生シーケンス全体における単一ピクセルの最大光度（cd/m<sup>2</sup>、ニトとも）の静的メタデータ値を用います。処理やノイズに起因する誤検出が下流の意図されたトーンマッピングに悪影響を与えるのを防ぐため、しばしばアルゴリズム的なフィルタが用いられます。
                    </p>

                    <p>MaxFALL（Maximum Frame Average Light Level）は、再生シーケンス全体における<a href="#dfn-frame" class="internalDFN"
                            data-link-type="dfn"
                            id="ref-for-dfn-frame-2">フレーム</a>平均光度（cd/m<sup>2</sup>、ニトとも）の最大値を静的メタデータ値で示します。MaxFALLは、まず各フレームのすべてのピクセルの復号輝度値を平均し、その後、最大の値を持つフレームの値を用いて算出します。
                    </p>

                    <p>MaxCLL と MaxFALL の値は、<a href="#dfn-png-four-byte-unsigned-integer" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-png-four-byte-unsigned-integer-7">PNG
                            4バイト符号なし整数</a>としてエンコードされます。</p>

                    <div class="note" role="note" id="issue-container-generatedID-14">
                        <div role="heading" class="note-title marker" id="h-note-14" aria-level="6"><span>注</span>
                        </div>
                        <p class="">[<cite><a class="bibref" data-link-type="biblio" href="#bib-cta-861.3-a"
                                    title="HDR Static Metadata Extensions (CTA-861.3-A)">CTA-861.3-A</a></cite>] は<span
                                class="chunk">cLLI</span>値を生成するための計算方法を記述していますが、フィルタリングについては規定していません。[<cite><a
                                    class="bibref" data-link-type="biblio" href="#bib-hdr-static-meta"
                                    title="On the Calculation and Usage of HDR Static Content Metadata">HDR-Static-Meta</a></cite>]
                            は、統計的外れ値やノイズ、リサンプリングフィルタによるリンギングから生じる極端な値を排除する改良手法を記述しており、実装において推奨されます。
                        </p>
                    </div>

                    <div class="note" role="note" id="issue-container-generatedID-15">
                        <div role="heading" class="note-title marker" id="h-note-15" aria-level="6"><span>注</span>
                        </div>
                        <p class="">[<cite><a class="bibref" data-link-type="biblio" href="#bib-smpte-st-2067-21"
                                    title="Interoperable Master Format — Application #2E">SMPTE-ST-2067-21</a></cite>]
                            セクション7.5は、<span class="chunk">cLLI</span>の値が不明で未計算の場合に追加情報を提供します。</p>
                    </div>

                    <div class="note" role="note" id="issue-container-generatedID-16">
                        <div role="heading" class="note-title marker" id="h-note-16" aria-level="6"><span>注</span>
                        </div>
                        <p class=""><a href="https://github.com/w3c/png/issues/319">Issue #319</a>は、<span
                                class="chunk">cLLI</span>チャンクが存在する場合のトーンマッピング動作について議論しています。</p>
                    </div>

                    <p>各<a href="#dfn-frame" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-frame-3">フレーム</a>が分析されます。</p>

                    <p>MaxCLL または MaxFALL の値がゼロの場合、その値は不明、または現在計算できないことを意味します。</p>

                    <div class="note" role="note" id="issue-container-generatedID-17">
                        <div role="heading" class="note-title marker" id="h-note-17" aria-level="6"><span>注</span>
                        </div>
                        <p class="">
                            この値が計算不能となる例として、ライブのアニメーションPNGストリームを作成している場合が挙げられます。このとき、ストリームが終了するまで全フレームが利用可能にならないため、値を計算できません。エンコーダは当初ゼロを用い、ストリーム終了時に計算値へ置き換えることを望むかもしれません。
                        </p>
                    </div>

                    <p>以下に<span class="chunk">cLLI</span>チャンクの構文を示します。</p>

                    <table id="cLLI-chunk-syntax" class="numbered simple">
                        <caption><a class="self-link" href="#cLLI-chunk-syntax">Table <bdi class="tableno">20</bdi></a>
                            <span class="table-title">cLLI チャンクの構成要素</span>
                        </caption>

                        <tbody>
                            <tr>
                                <th>名称</th>
                                <th>サイズ</th>
                                <th>除数値</th>
                            </tr>

                            <tr>
                                <td>Maximum Content Light Level（MaxCLL）</td>
                                <td>4 bytes</td>
                                <td>0.0001 cd/m<sup>2</sup></td>
                            </tr>

                            <tr>
                                <td>Maximum Frame-Average Light Level（MaxFALL）</td>
                                <td>4 bytes</td>
                                <td>0.0001 cd/m<sup>2</sup></td>
                            </tr>
                        </tbody>
                    </table>

                    <aside class="example" id="example-13">
                        <div class="marker">
                            <a class="self-link" href="#example-13">例<bdi> 13</bdi></a>
                        </div>
                        <span class="chunk">cLLI</span>チャンクのMaximum Content Light Levelの例：

                        <table id="cLLI-chunk-max-content-light-level-example" class="numbered simple">
                            <tbody>
                                <tr>
                                    <th>実際の値</th>
                                    <th>保存される10進値</th>
                                    <th>保存される16進値</th>
                                </tr>

                                <tr>
                                    <td>1000 cd/m<sup>2</sup></td>
                                    <td>10000000</td>
                                    <td>00 98 96 80</td>
                                </tr>
                            </tbody>
                        </table>
                    </aside>

                    <aside class="example" id="example-14">
                        <div class="marker">
                            <a class="self-link" href="#example-14">例<bdi> 14</bdi></a>
                        </div>
                        <span class="chunk">cLLI</span>チャンクのMaximum Frame-Average Light Levelの例：

                        <table id="cLLI-chunk-max-frame-avg-luminance-example" class="numbered simple">
                            <tbody>
                                <tr>
                                    <th>実際の値</th>
                                    <th>保存される10進値</th>
                                    <th>保存される16進値</th>
                                </tr>

                                <tr>
                                    <td>250 cd/m<sup>2</sup></td>
                                    <td>2500000</td>
                                    <td>00 26 25 A0</td>
                                </tr>
                            </tbody>
                        </table>
                    </aside>
                </section>
            </section>



            <section id="11textinfo">
                <div class="header-wrapper">
                    <h4 id="x11-3-3-textual-information"><bdi class="secno">11.3.3 </bdi>テキスト情報</h4><a class="self-link"
                        href="#11textinfo" aria-label="Permalink for Section 11.3.3"></a>
                </div>



                <section class="introductory" id="11textIntro">
                    <div class="header-wrapper">
                        <h3 id="introduction-7">はじめに</h3><a class="self-link" href="#11textIntro"
                            aria-label="Permalink for this Section"></a>
                    </div>


                    <p>PNG は、画像の説明や著作権表示など、画像に関連付けられたテキスト文字列を格納するために、<a class="chunk" href="#11tEXt">tEXt</a>、<a
                            class="chunk" href="#11iTXt">iTXt</a>、および <a class="chunk" href="#11zTXt">zTXt</a>
                        チャンクを提供します。各テキスト文字列が何を表しているかを示すためにキーワードが使用されます。任意の数のそのようなテキストチャンクが出現することができ、同じキーワードを持つ複数のチャンクも許容されます。
                    </p>
                </section>


                <section id="11keywords">
                    <div class="header-wrapper">
                        <h5 id="x11-3-3-1-keywords-and-text-strings"><bdi class="secno">11.3.3.1 </bdi>キーワードとテキスト文字列
                        </h5><a class="self-link" href="#11keywords" aria-label="Permalink for Section 11.3.3.1"></a>
                    </div>


                    <p>次のキーワードは事前定義されており、適切な場面で使用されるべきです。</p>

                    <table id="keywords-predefined" class="numbered simple">
                        <caption><a class="self-link" href="#keywords-predefined">Table <bdi
                                    class="tableno">21</bdi></a> <span class="table-title">
                                Predefined keywords
                            </span></caption>

                        <tbody>
                            <tr>
                                <th>Keyword value</th>
                                <th>Description</th>
                            </tr>

                            <tr>
                                <td>Title</td>
                                <td>Short (one line) title or caption for image</td>
                            </tr>

                            <tr>
                                <td>Author</td>
                                <td>Name of image's creator</td>
                            </tr>

                            <tr>
                                <td>Description</td>
                                <td>Description of image (possibly long)</td>
                            </tr>

                            <tr>
                                <td>Copyright</td>
                                <td>Copyright notice</td>
                            </tr>

                            <tr>
                                <td>Creation Time</td>
                                <td>Time of original image creation</td>
                            </tr>

                            <tr>
                                <td>Software</td>
                                <td>Software used to create the image</td>
                            </tr>

                            <tr>
                                <td>Disclaimer</td>
                                <td>Legal disclaimer</td>
                            </tr>

                            <tr>
                                <td>Warning</td>
                                <td>Warning of nature of content</td>
                            </tr>

                            <tr>
                                <td>Source</td>
                                <td>Device used to create the image</td>
                            </tr>

                            <tr>
                                <td>Comment</td>
                                <td>Miscellaneous comment</td>
                            </tr>

                            <tr>
                                <td>XML:com.adobe.xmp</td>
                                <td>
                                    Extensible Metadata Platform (XMP) information, formatted as required by the XMP
                                    specification [<cite><a class="bibref" data-link-type="biblio" href="#bib-xmp"
                                            title="Extensible metadata platform (XMP) specification -- Part 1">XMP</a></cite>].
                                    The use of
                                    <a class="chunk" href="#11iTXt">iTXt</a>, with Compression Flag set to 0, and both
                                    Language Tag and Translated
                                    Keyword set to the null string, are recommended for XMP compliance.
                                </td>
                            </tr>

                            <tr>
                                <td>Collection</td>
                                <td>Name of a collection
                                    to which the image belongs.
                                    An image may belong to one or more collections,
                                    each named by a separate text chunk.</td>
                            </tr>
                        </tbody>
                    </table>

                    <p>その他のキーワードは、プライベートまたは一般的な用途のために任意のアプリケーションによって定義されることが <em class="rfc2119">MAY</em> あります。</p>

                    <p>キーワードは <em class="rfc2119">SHOULD</em> 以下のようにすることが望まれます。</p>

                    <ul>
                        <li>チャンクに何が含まれているかを他の人間の利用者が理解できるように、妥当な程度に自己説明的であること；および</li>

                        <li>異なるアプリケーションが互換性のない目的で同じキーワードを使う可能性を最小限にするよう選ばれていること。</li>
                    </ul>

                    <p>一般的に有用なキーワードは <em class="rfc2119">SHOULD</em> で [<cite><a class="bibref" data-link-type="biblio"
                                href="#bib-png-extensions"
                                title="Extensions to the PNG Third Edition Specification, Version 1.6.0">PNG-EXTENSIONS</a></cite>]
                        に登録されるべきです。</p>

                    <p>キーワードには印字可能な Latin-1 [<cite><a class="bibref" data-link-type="biblio" href="#bib-iso_8859-1"
                                title="ISO/IEC 8859-1:1998, Information technology — 8-bit single-byte coded graphic character sets — Part 1: Latin alphabet No. 1.">ISO_8859-1</a></cite>]
                        の文字とスペースのみを含めるものとします。すなわち、許可されるコードポイントは 0x20-7E および 0xA1-FF
                        のみです。キーワードの先頭や末尾のスペース、連続するスペースは許可されません。また、視覚的に通常のスペースと区別できない U+00A0 NON-BREAKING SPACE も許可されません。
                    </p>

                    <p>キーワードは登録されたとおりに正確に綴られるべきであり、デコーダは特定のキーワードを探す際に単純なリテラル比較を使用できるようにします。特にキーワードは大文字小文字を区別するとみなされます。キーワードは長さが
                        1 〜 79 バイトの範囲でなければなりません。</p>

                    <p>Creation Time キーワードについては、日付形式は RFC 3339 [<cite><a class="bibref" data-link-type="biblio"
                                href="#bib-rfc3339"
                                title="Date and Time on the Internet: Timestamps">rfc3339</a></cite>] の日付時刻形式、または RFC
                        1123 のセクション 5.2.14 で定義される日付形式のいずれかであることが <em class="rfc2119">SHOULD</em> です。RFC3339
                        の日付時刻形式が推奨されます。実際のフィールドの形式は未定義です。</p>

                    <p><a class="chunk" href="#11iTXt">iTXt</a> チャンクは UTF-8 エンコーディング [<cite><a class="bibref"
                                data-link-type="biblio" href="#bib-rfc3629"
                                title="UTF-8, a transformation format of ISO 10646">rfc3629</a></cite>]
                        を使用し、任意の言語の文字を伝えるために使用できます。<a class="chunk" href="#11iTXt">iTXt</a>
                        チャンクにはテキスト文字列を圧縮するオプションがあります。Unicode をサポートするため、すべてのテキスト文字列に対して <a class="chunk"
                            href="#11iTXt">iTXt</a> の使用が推奨されます。また、印字可能な Latin-1 文字集合と U+000A LINE FEED (LF) に制限される <a
                            class="chunk" href="#11tEXt">tEXt</a> および <a class="chunk" href="#11zTXt">zTXt</a>
                        チャンクも存在します。<a class="chunk" href="#11zTXt">zTXt</a> 内のテキスト文字列は、<a href="#dfn-zlib"
                            class="internalDFN" data-link-type="dfn" id="ref-for-dfn-zlib-15">zlib</a> データストリームに圧縮され、<a
                            href="#dfn-deflate" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-deflate-13">deflate</a> 圧縮を用います（<a href="#10CompressionOtherUses"
                            class="sec-ref"><bdi class="secno">10.3 </bdi>Other uses of compression</a>参照）。</p>
                </section>


                <section id="11tEXt">
                    <div class="header-wrapper">
                        <h5 id="x11-3-3-2-text-textual-data"><bdi class="secno">11.3.3.2 </bdi><span
                                class="chunk">tEXt</span> テキストデータ</h5><a class="self-link" href="#11tEXt"
                            aria-label="Permalink for Section 11.3.3.2"></a>
                    </div>


                    <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます</p>

                    <pre aria-busy="false"><code class="hljs">74 45 58 74</code></pre>
                    <p>各 <span class="chunk">tEXt</span> チャンクはキーワードとテキスト文字列を次の形式で含みます。</p>

                    <table id="tEXt-structure" class="simple numbered">
                        <tbody>
                            <tr>
                                <td>Keyword</td>
                                <td>1-79 bytes (character string)</td>
                            </tr>

                            <tr>
                                <td>Null separator</td>
                                <td>1 byte (null character)</td>
                            </tr>

                            <tr>
                                <td>Text string</td>
                                <td>0 or more bytes (character string)</td>
                            </tr>
                        </tbody>
                    </table>

                    <p>キーワードとテキスト文字列はゼロバイト（ヌル文字）で区切られます。キーワードもテキスト文字列もヌル文字を含んではなりません。テキスト文字列はヌル終端ではなく（チャンク長が終了位置を定義します）、長さはゼロバイトからキーワードとヌル区切り文字の長さを差し引いた最大許容チャンク長まで任意です。
                    </p>

                    <p>キーワードは <a href="#11keywords" class="sec-ref"><bdi class="secno">11.3.3.1 </bdi>Keywords and text
                            strings</a> に記述されたとおり、テキスト文字列が表す情報の種類を示します。</p>

                    <p>テキストは Latin-1 文字集合に従って解釈されます [<cite><a class="bibref" data-link-type="biblio"
                                href="#bib-iso_8859-1"
                                title="ISO/IEC 8859-1:1998, Information technology — 8-bit single-byte coded graphic character sets — Part 1: Latin alphabet No. 1.">ISO_8859-1</a></cite>]。テキスト文字列は任意の
                        Latin-1 文字を含むことができます。テキスト内の改行は単一の linefeed 文字（10）で表すべきです。Latin-1 に定義される文字と linefeed 文字以外の文字は
                        <span class="chunk">tEXt</span> チャンク内では定義された意味を持ちません。Latin-1 のレパートリー外の文字を含むテキストは <a
                            class="chunk" href="#11iTXt">iTXt</a> チャンクを使用してエンコードすべきです。
                    </p>
                </section>


                <section id="11zTXt">
                    <div class="header-wrapper">
                        <h5 id="x11-3-3-3-ztxt-compressed-textual-data"><bdi class="secno">11.3.3.3 </bdi><span
                                class="chunk">zTXt</span> 圧縮テキストデータ</h5><a class="self-link" href="#11zTXt"
                            aria-label="Permalink for Section 11.3.3.3"></a>
                    </div>


                    <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます</p>

                    <pre aria-busy="false"><code class="hljs">7A 54 58 74</code></pre>
                    <p><span class="chunk">zTXt</span> と <a class="chunk" href="#11tEXt">tEXt</a> チャンクは意味的に同等ですが、<span
                            class="chunk">zTXt</span> は大きなテキストブロックを格納するのに推奨されます。</p>

                    <p><span class="chunk">zTXt</span> チャンクは次を含みます。</p>

                    <table id="zTXt-structure" class="simple numbered">
                        <tbody>
                            <tr>
                                <td>Keyword</td>
                                <td>1-79 bytes (character string)</td>
                            </tr>

                            <tr>
                                <td>Null separator</td>
                                <td>1 byte (null character)</td>
                            </tr>

                            <tr>
                                <td>Compression method</td>
                                <td>1 byte</td>
                            </tr>

                            <tr>
                                <td>Compressed text datastream</td>
                                <td>n bytes</td>
                            </tr>
                        </tbody>
                    </table>

                    <p>キーワードとヌル文字は <a class="chunk" href="#11tEXt">tEXt</a>
                        チャンクと同じ形式です。キーワードは圧縮されません。圧縮方式フィールドは使用された圧縮方式を定義します。本国際規格で定義される唯一の値は 0（<a href="#dfn-deflate"
                            class="internalDFN" data-link-type="dfn" id="ref-for-dfn-deflate-14">deflate</a>
                        圧縮）です。他の値は将来の標準化のために予約されています。圧縮方式フィールドの後に、チャンクの残りを構成する圧縮されたテキストデータストリームが続きます。圧縮方式 0
                        の場合、このデータストリームは <a href="#dfn-zlib" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-zlib-16">zlib</a> データストリーム（deflate 圧縮）です（<a href="#10CompressionOtherUses"
                            class="sec-ref"><bdi class="secno">10.3 </bdi>Other uses of
                            compression</a>参照）。このデータストリームを伸長すると、同等の <a class="chunk" href="#11tEXt">tEXt</a>
                        チャンクに格納されるテキストと同一の Latin-1 テキストが得られます。</p>
                </section>


                <section id="11iTXt">
                    <div class="header-wrapper">
                        <h5 id="x11-3-3-4-itxt-international-textual-data"><bdi class="secno">11.3.3.4 </bdi><span
                                class="chunk">iTXt</span> 国際化テキストデータ</h5><a class="self-link" href="#11iTXt"
                            aria-label="Permalink for Section 11.3.3.4"></a>
                    </div>


                    <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます</p>

                    <pre aria-busy="false"><code class="hljs">69 54 58 74</code></pre>
                    <p>各 <span class="chunk">iTXt</span> チャンクは次を含みます。</p>

                    <table id="iTXt-structure" class="simple numbered">
                        <tbody>
                            <tr>
                                <td>Keyword</td>
                                <td>1-79 bytes (character string)</td>
                            </tr>

                            <tr>
                                <td>Null separator</td>
                                <td>1 byte (null character)</td>
                            </tr>

                            <tr>
                                <td>Compression flag</td>
                                <td>1 byte</td>
                            </tr>

                            <tr>
                                <td>Compression method</td>
                                <td>1 byte</td>
                            </tr>

                            <tr>
                                <td>Language tag</td>
                                <td>0 or more bytes (character string)</td>
                            </tr>

                            <tr>
                                <td>Null separator</td>
                                <td>1 byte (null character)</td>
                            </tr>

                            <tr>
                                <td>Translated keyword</td>
                                <td>0 or more bytes</td>
                            </tr>

                            <tr>
                                <td>Null separator</td>
                                <td>1 byte (null character)</td>
                            </tr>

                            <tr>
                                <td>Text</td>
                                <td>0 or more bytes</td>
                            </tr>
                        </tbody>
                    </table>

                    <p>キーワードは <a href="#11keywords" class="sec-ref"><bdi class="secno">11.3.3.1
                            </bdi>Keywords and text strings</a> に記述されています。</p>

                    <p>圧縮フラグは、非圧縮テキストであれば 0、圧縮テキストであれば 1
                        です。圧縮できるのはテキストフィールドのみです。圧縮方式フィールドは使用された圧縮方式を定義します。本仕様で定義される唯一の圧縮方式は 0（<a href="#dfn-zlib"
                            class="internalDFN" data-link-type="dfn" id="ref-for-dfn-zlib-17">zlib</a> データストリームと <a
                            href="#dfn-deflate" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-deflate-15">deflate</a> 圧縮）です（<a href="#10CompressionOtherUses"
                            class="sec-ref"><bdi class="secno">10.3 </bdi>Other uses of
                            compression</a>参照）。非圧縮テキストの場合、エンコーダは圧縮方式を 0 に設定し、デコーダはそれを無視しなければなりません。</p>

                    <p>言語タグは [<cite><a class="bibref" data-link-type="biblio" href="#bib-bcp47"
                                title="Tags for Identifying Languages">BCP47</a></cite>]
                        によって定義される正しい言語タグでなければなりません。キーワードとは異なり、言語タグは大文字小文字を区別しません。サブタグは
                        <a href="https://www.iana.org/assignments/language-subtag-registry/language-subtag-registry">IANA
                            language subtag registry</a> に存在する必要があります。言語タグが空の場合、言語は未指定です。言語タグの例には <code>en</code>,
                        <code>en-GB</code>, <code>es-419</code>, <code>zh-Hans</code>, <code>zh-Hans-CN</code>,
                        <code>tlh-Cyrl-AQ</code>, <code>ar-AE-u-nu-latn</code>, および <code>x-private</code> などがあります。
                    </p>

                    <p>翻訳されたキーワードとテキストは両方とも UTF-8 エンコーディング [<cite><a class="bibref" data-link-type="biblio"
                                href="#bib-rfc3629"
                                title="UTF-8, a transformation format of ISO 10646">rfc3629</a></cite>]
                        を使用し、いずれもゼロバイト（ヌル文字）を含んではなりません。テキストは、このチャンク内の他のテキストデータと異なりヌル終端ではなく、長さはチャンク長から導出されます。</p>

                    <p>翻訳キーワードには改行を含めてはなりません。テキスト内の改行は単一の linefeed（16進 0A）で表すべきです。残りの制御文字（01-09, 0B-1F,
                        7F-9F）は、翻訳キーワードおよびテキストの両方で使用が推奨されません。UTF-8 では、文字としての 80-9F（使用が推奨されない）と、バイトとしての
                        80-9F（多くの場合必要となる）の間に差異がある点に注意してください。</p>

                    <p>翻訳キーワードが空でない場合、それは言語タグで示された言語へのキーワードの翻訳を含むべきであり、キーワードを表示するアプリケーションは翻訳キーワードも併せて表示することが望まれます。</p>
                </section>
            </section>




            <section id="11addnlsiinfo">
                <div class="header-wrapper">
                    <h4 id="x11-3-4-miscellaneous-information"><bdi class="secno">11.3.4 </bdi>その他情報
                    </h4><a class="self-link" href="#11addnlsiinfo" aria-label="Permalink for Section 11.3.4"></a>
                </div>



                <section id="11bKGD">
                    <div class="header-wrapper">
                        <h5 id="x11-3-4-1-bkgd-background-color"><bdi class="secno">11.3.4.1 </bdi><span
                                class="chunk">bKGD</span> 背景色</h5><a class="self-link" href="#11bKGD"
                            aria-label="Permalink for Section 11.3.4.1"></a>
                    </div>


                    <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます</p>

                    <pre aria-busy="false"><code class="hljs">62 4B 47 44</code></pre>
                    <p><span class="chunk">bKGD</span>
                        チャンクは、画像を提示するためのデフォルトの背景色を指定します。ユーザ指定の背景や、ブラウザのような大きなページの一部としての優先される背景がある場合は、<span
                            class="chunk">bKGD</span> チャンクは無視されるべきです。<span class="chunk">bKGD</span> チャンクは次を含みます：</p>

                    <table id="bKGD-structure" class="numbered simple">
                        <caption><a class="self-link" href="#bKGD-structure">Table <bdi class="tableno">22</bdi></a>
                            <span class="table-title">
                                bKGD chunk contents
                            </span>
                        </caption>

                        <tbody>
                            <tr>
                                <th colspan="2">Color types 0 and 4</th>
                            </tr>

                            <tr>
                                <td>Greyscale</td>
                                <td>2 bytes</td>
                            </tr>

                            <tr>
                                <th colspan="2">Color types 2 and 6</th>
                            </tr>

                            <tr>
                                <td>Red</td>
                                <td>2 bytes</td>
                            </tr>

                            <tr>
                                <td>Green</td>
                                <td>2 bytes</td>
                            </tr>

                            <tr>
                                <td>Blue</td>
                                <td>2 bytes</td>
                            </tr>

                            <tr>
                                <th colspan="2">Color type 3</th>
                            </tr>

                            <tr>
                                <td>Palette index</td>
                                <td>1 byte</td>
                            </tr>
                        </tbody>
                    </table>

                    <p><a href="#3colourType" class="internalDFN" data-link-type="dfn" id="ref-for-3colourType-28">color
                            type</a> 3（<a href="#3indexedColour" class="internalDFN" data-link-type="dfn"
                            id="ref-for-3indexedColour-15">indexed-color</a>）の場合、値は背景として用いる色のパレットインデックスです。</p>

                    <p><a href="#3colourType" class="internalDFN" data-link-type="dfn" id="ref-for-3colourType-29">color
                            types</a> 0 および 4（<a href="#dfn-greyscale" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-greyscale-11">greyscale</a>, <a href="#dfn-greyscale-with-alpha"
                            class="internalDFN" data-link-type="dfn" id="ref-for-dfn-greyscale-with-alpha-3">greyscale
                            with alpha</a>）では、値は背景に使うグレーのレベルで、範囲は 0 から (2<sup>bitdepth</sup>)-1 です。<a
                            href="#3colourType" class="internalDFN" data-link-type="dfn"
                            id="ref-for-3colourType-30">color types</a> 2 および 6（<a href="#3truecolour"
                            class="internalDFN" data-link-type="dfn" id="ref-for-3truecolour-13">truecolor</a>, <a
                            href="#dfn-truecolor-with-alpha" class="internalDFN" data-link-type="dfn"
                            id="ref-for-truecolor-with-alpha">truecolor with alpha</a>）では、値は背景に用いる色を RGB サンプルとして与え、範囲は 0
                        から (2<sup>bitdepth</sup>)-1 です。いずれの場合も、一貫性のためにサンプルあたり 2
                        バイトが使用され、画像のビット深度にかかわらず二バイトで格納されます。画像のビット深度が 16 未満の場合は下位ビットが使用されます。エンコーダは残りのビットを 0
                        に設定すべきであり、デコーダは値を使用する前に残りのビットを 0 にマスクしなければなりません。</p>
                </section>


                <section id="11hIST">
                    <div class="header-wrapper">
                        <h5 id="x11-3-4-2-hist-image-histogram"><bdi class="secno">11.3.4.2 </bdi><span
                                class="chunk">hIST</span> 画像ヒストグラム</h5><a class="self-link" href="#11hIST"
                            aria-label="Permalink for Section 11.3.4.2"></a>
                    </div>


                    <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます</p>

                    <pre aria-busy="false"><code class="hljs">68 49 53 54</code></pre>
                    <p><span class="chunk">hIST</span> チャンクは一連の 2 バイト符号なし整数を含みます：</p>

                    <table id="hIST-structure" class="simple numbered">
                        <tbody>
                            <tr>
                                <td>Frequency</td>
                                <td>2 bytes (unsigned integer)</td>
                            </tr>

                            <tr>
                                <td>...etc...</td>
                                <td>&nbsp;</td>
                            </tr>
                        </tbody>
                    </table>

                    <p><span class="chunk">hIST</span> チャンクはパレット中の各色の概略的な使用頻度を示します。ヒストグラムチャンクは <a class="chunk"
                            href="#11PLTE">PLTE</a>
                        チャンクが存在する場合にのみ出現できます。ビューアがパレットのすべての色を提供できない場合、ヒストグラムは表示用に色のサブセットを選択するのに役立つかもしれません。</p>

                    <p><a class="chunk" href="#11PLTE">PLTE</a>
                        の各エントリに対して正確に一つのエントリが存在しなければなりません。各エントリはそのパレットインデックスを持つピクセルの画像内での割合に比例します；正確なスケール係数はエンコーダが選びます。
                    </p>

                    <p>ヒストグラムのエントリは概算であり、例外としてゼロのエントリは対応するパレットエントリが画像内で全く使用されていないことを示します。ある色のピクセルが存在するならば、そのヒストグラムエントリはゼロであってはなりません。
                    </p>

                    <div class="note" role="note" id="issue-container-generatedID-18">
                        <div role="heading" class="note-title marker" id="h-note-18" aria-level="6"><span>Note</span>
                        </div>
                        <p class="">注：パレットが <a href="#3truecolour" class="internalDFN" data-link-type="dfn"
                                id="ref-for-3truecolour-14">truecolor</a>
                            画像を量子化した推奨パレットである場合、デコーダはエンコーダとは異なる方法でピクセルをパレットエントリにマップする可能性があるため、ヒストグラムは必然的に概算になります。この状況では、いかなるエントリも使用され得るため通常ゼロのエントリは現れないはずです。
                        </p>
                    </div>
                </section>


                <section id="11pHYs">
                    <div class="header-wrapper">
                        <h5 id="x11-3-4-3-phys-physical-pixel-dimensions"><bdi class="secno">11.3.4.3 </bdi><span
                                class="chunk">pHYs</span> 物理ピクセル寸法</h5><a class="self-link" href="#11pHYs"
                            aria-label="Permalink for Section 11.3.4.3"></a>
                    </div>


                    <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます</p>

                    <pre aria-busy="false"><code class="hljs">70 48 59 73</code></pre>
                    <p><span class="chunk">pHYs</span> チャンクは、画像の表示における意図されたピクセルサイズまたはアスペクト比を指定します。内容は次のとおりです：</p>

                    <table id="pHYs-structure" class="numbered simple">
                        <caption><a class="self-link" href="#pHYs-structure">Table <bdi class="tableno">23</bdi></a>
                            <span class="table-title">
                                pHYs chunk contents
                            </span>
                        </caption>

                        <tbody>
                            <tr>
                                <th>Name</th>
                                <th>Size</th>
                            </tr>

                            <tr>
                                <td>Pixels per unit, X axis</td>
                                <td>
                                    4 bytes (<a href="#dfn-png-four-byte-unsigned-integer" class="internalDFN"
                                        data-link-type="dfn" id="ref-for-dfn-png-four-byte-unsigned-integer-8">PNG
                                        four-byte unsigned integer</a>)
                                </td>
                            </tr>

                            <tr>
                                <td>Pixels per unit, Y axis</td>
                                <td>
                                    4 bytes (<a href="#dfn-png-four-byte-unsigned-integer" class="internalDFN"
                                        data-link-type="dfn" id="ref-for-dfn-png-four-byte-unsigned-integer-9">PNG
                                        four-byte unsigned integer</a>)
                                </td>
                            </tr>

                            <tr>
                                <td>Unit specifier</td>
                                <td>1 byte</td>
                            </tr>
                        </tbody>
                    </table>

                    <p>unit specifier に対して定義される値は次のとおりです：</p>

                    <table id="unit-specifiers" class="numbered simple">
                        <caption><a class="self-link" href="#unit-specifiers">Table <bdi class="tableno">24</bdi></a>
                            <span class="table-title">
                                Unit specifier values
                            </span>
                        </caption>

                        <tbody>
                            <tr>
                                <th>Value</th>
                                <th>Description</th>
                            </tr>

                            <tr>
                                <td>0</td>
                                <td>unit is unknown</td>
                            </tr>

                            <tr>
                                <td>1</td>
                                <td>unit is the metre</td>
                            </tr>
                        </tbody>
                    </table>

                    <p>unit specifier が 0 の場合、<span class="chunk">pHYs</span>
                        チャンクはピクセルのアスペクト比のみを定義し、ピクセルの実際の物理サイズは未指定のままです。</p>

                    <p><span class="chunk">pHYs</span> チャンクが存在しない場合、ピクセルは正方形であると仮定され、各ピクセルの物理サイズは未指定です。</p>
                </section>


                <section id="11sPLT">
                    <div class="header-wrapper">
                        <h5 id="x11-3-4-4-splt-suggested-palette"><bdi class="secno">11.3.4.4 </bdi><span
                                class="chunk">sPLT</span> 推奨パレット</h5><a class="self-link" href="#11sPLT"
                            aria-label="Permalink for Section 11.3.4.4"></a>
                    </div>


                    <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます</p>

                    <pre aria-busy="false"><code class="hljs">73 50 4C 54</code></pre>
                    <p><span class="chunk">sPLT</span> チャンクは次を含みます：</p>

                    <table id="sPLT-structure" class="numbered simple">
                        <caption><a class="self-link" href="#sPLT-structure">Table <bdi class="tableno">25</bdi></a>
                            <span class="table-title">
                                sPLT chunk contents
                            </span>
                        </caption>

                        <tbody>
                            <tr>
                                <th>Name</th>
                                <th>Size</th>
                            </tr>

                            <tr>
                                <td>Palette name</td>
                                <td>1-79 bytes (character string)</td>
                            </tr>

                            <tr>
                                <td>Null separator</td>
                                <td>1 byte (null character)</td>
                            </tr>

                            <tr>
                                <td>Sample depth</td>
                                <td>1 byte</td>
                            </tr>

                            <tr>
                                <td>Red</td>
                                <td>1 or 2 bytes</td>
                            </tr>

                            <tr>
                                <td>Green</td>
                                <td>1 or 2 bytes</td>
                            </tr>

                            <tr>
                                <td>Blue</td>
                                <td>1 or 2 bytes</td>
                            </tr>

                            <tr>
                                <td>Alpha</td>
                                <td>1 or 2 bytes</td>
                            </tr>

                            <tr>
                                <td>Frequency</td>
                                <td>2 bytes</td>
                            </tr>

                            <tr>
                                <td>...etc...</td>
                                <td>&nbsp;</td>
                            </tr>
                        </tbody>
                    </table>

                    <p>各パレットエントリは 6 バイトまたは 10 バイトで、5 つの符号なし整数（red, blue, green, alpha, frequency）を含みます。</p>

                    <p>エントリ数は任意です。PNG デコーダは sample depth バイトの後に残るチャンク長からエントリ数を決定します。<span class="chunk">sPLT</span> の
                        sample depth が 8 の場合、残り長は 6 で割り切れるべきであり、sample depth が 16 の場合は 10
                        で割り切れるべきです。エントリは周波数の降順で現れるべきです。エントリがすべて画像で使用されている必要も、すべて異なる必要もありません。</p>

                    <p>パレット名はパレットを参照するための任意の分かりやすい名前（例えば "256 color including Macintosh default", "256 color including
                        Windows-3.1 default", "Optimal 512"）にできます。PNG データストリーム内に複数の推奨パレットが存在する場合、パレット名は適切なパレットの選択を助けます。
                    </p>

                    <p>パレット名は大文字小文字を区別し、<a class="chunk" href="#11tEXt">tEXt</a> チャンクのキーワードパラメータと同じ制限を受けます。パレット名は印字可能な
                        Latin-1 文字とスペースのみを含むべきで、許可されるコードポイントは 0x20-7E および 0xA1-FF のみです。先頭・末尾・連続するスペースは許可されません。</p>

                    <p><span class="chunk">sPLT</span> の sample depth は 8 または 16 でなければなりません。</p>

                    <p>red, green, blue, alpha のサンプルは <span class="chunk">sPLT</span> の sample depth に応じて各々 1 または 2
                        バイトです。これは画像のビット深度に関係ありません。色サンプルはアルファで事前乗算されておらず、任意の背景と事前に合成されてもいません。アルファ値 0 は完全透過、アルファ値
                        255（sample depth が 8 の場合）または 65535（sample depth が 16 の場合）は完全不透明を意味します。<span
                            class="chunk">sPLT</span> チャンクは任意の <a href="#3colourType" class="internalDFN"
                            data-link-type="dfn" id="ref-for-3colourType-31">color type</a> に現れて構いません。<span
                            class="chunk">sPLT</span> エントリは PNG 画像と同じ <a href="#dfn-gamma-value" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-gamma-value-6">gamma value</a> と <a
                            href="#dfn-chromaticity" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-chromaticity-4">chromaticity</a> 値を使いますが、PNG
                        画像のカラースペースで用いられる範囲外の値を取り得ます。例えばグレースケール PNG では各 <span class="chunk">sPLT</span> エントリは通常 R,G,B
                        が等しい値を持ちますが、それが必須というわけではありません。同様に、PNG 画像が透明度を使用していない場合でも <span class="chunk">sPLT</span>
                        エントリは不透明でないアルファ値を持ち得ます。</p>

                    <p>各 frequency 値は、そのパレットエントリが RGBA 空間で最も近い一致となるピクセルの割合に比例します（任意の背景に対して <a href="#dfn-composited"
                            class="internalDFN" data-link-type="dfn" id="ref-for-dfn-composited-5">composited</a>
                        される前）。正確なスケール係数は PNG エンコーダが選びます；個々の値が 0 〜 65535
                        の範囲を適度に満たすようにすることが推奨されます。エンコーダはロゴや顔の特徴のような「重要」と考える色の周波数を人工的に大きくすることができます。ゼロは最も重要でない色、またはほとんど使われない色を意味する有効な周波数です。すべての周波数がゼロの場合、それらは意味を持たない、つまり
                        PNG 画像における実際の出現頻度について何も推測できないことを意味します。</p>

                    <p>複数の <span class="chunk">sPLT</span> チャンクは許容されますが、それぞれ異なるパレット名を持たなければなりません。</p>
                </section>


                <section id="eXIf">
                    <div class="header-wrapper">
                        <h5 id="x11-3-4-5-exif-exchangeable-image-file-exif-profile"><bdi class="secno">11.3.4.5
                            </bdi><span class="chunk">eXIf</span> Exchangeable Image File (Exif) Profile</h5><a
                            class="self-link" href="#eXIf" aria-label="Permalink for Section 11.3.4.5"></a>
                    </div>


                    <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます</p>

                    <pre aria-busy="false"><code class="hljs">65 58 49 66</code></pre>
                    <p><span class="chunk">eXIf</span> チャンクのデータセグメントは、[<cite><a class="bibref" data-link-type="biblio"
                                href="#bib-cipa-dc-008"
                                title="Exchangeable image file format for digital still cameras: Exif Version 2.32">CIPA-DC-008</a></cite>]
                        の "4.7.2 Interoperability Structure of APP1 in Compressed Data" で指定された形式の Exif
                        プロファイルを含みます。ただし、JPEG APP1 マーカー、長さ、および 4.7.2(C) で記述される "Exif ID code"（すなわち "Exif", NULL,
                        およびパディングバイト）は含まれません。</p>

                    <p><span class="chunk">eXIf</span> チャンクのサイズは PNG 仕様によって課される最大 2<sup>31</sup>-1 バイトのみで制約されます。PNG
                        データストリーム内には <span class="chunk">eXIf</span> チャンクは 1 個のみ許可されます。</p>

                    <p><span class="chunk">eXIf</span> チャンクは元の <a href="#dfn-image-data" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-image-data-13">image data</a> に関するメタデータを格納します。画像が Exif
                        プロファイル作成後に編集されている場合、このデータはもはや PNG の <a href="#dfn-image-data" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-image-data-14">image data</a> に適用されないかもしれません。デコーダが Exif
                        データの有効性について独立した知識を持たない限り、そのデータは歴史的価値のみと見なすべきであることが推奨されます。<span class="chunk">eXIf</span> チャンクと他の
                        PNG チャンク内のデータ間の潜在的な矛盾を解決することは本仕様の範囲外です。</p>

                    <section id="exif-general-recommendations">
                        <div class="header-wrapper">
                            <h6 id="x11-3-4-5-1-exif-general-recommendations"><bdi class="secno">11.3.4.5.1 </bdi><span
                                    class="chunk">eXIf</span> General Recommendations</h6><a class="self-link"
                                href="#exif-general-recommendations" aria-label="Permalink for Section 11.3.4.5.1"></a>
                        </div>


                        <p>PNG 仕様はチャンクサイズを最大 2<sup>31</sup>-1 バイトまで許容しますが、Exif プロファイルが JPEG [<cite><a class="bibref"
                                    data-link-type="biblio" href="#bib-jpeg"
                                    title="JPEG File Interchange Format">JPEG</a></cite>] データストリームに書き込まれる予定がある場合、Exif
                            データ全体の長さを JPEG APP1 マーカー（Exif）セグメントに収まるように 2<sup>16</sup>-9 バイトを超えないように調整する必要があることに注意すべきです。
                        </p>
                    </section>

                    <section id="exif-recommendations-for-decoders">
                        <div class="header-wrapper">
                            <h6 id="x11-3-4-5-2-exif-recommendations-for-decoders"><bdi class="secno">11.3.4.5.2
                                </bdi><span class="chunk">eXIf</span> Recommendations for Decoders</h6><a
                                class="self-link" href="#exif-recommendations-for-decoders"
                                aria-label="Permalink for Section 11.3.4.5.2"></a>
                        </div>


                        <p>データの最初の 2 バイトは、リトルエンディアン（Intel）の場合は "II"、ビッグエンディアン（Motorola）の場合は "MM" です。デコーダは最初の 4
                            バイトをチェックして次の16進値を持つことを確認すべきです：</p>

                        <pre
                            aria-busy="false"><code class="hljs javascript"><span class="hljs-number">49</span> <span class="hljs-number">49</span> 2A <span class="hljs-number">00</span> (<span class="hljs-variable constant_">ASCII</span> <span class="hljs-string">"II"</span>, <span class="hljs-number">16</span>-bit little-endian integer <span class="hljs-number">42</span>)</code></pre>
                        <p>または</p>

                        <pre
                            aria-busy="false"><code class="hljs javascript">4D 4D <span class="hljs-number">00</span> 2A (<span class="hljs-variable constant_">ASCII</span> <span class="hljs-string">"MM"</span>, <span class="hljs-number">16</span>-bit big-endian integer <span class="hljs-number">42</span>)</code></pre>
                        <p>その他の値は将来の定義のために予約されています。</p>
                    </section>

                    <section id="exif-recommendations-for-encoders">
                        <div class="header-wrapper">
                            <h6 id="x11-3-4-5-3-exif-recommendations-for-encoders"><bdi class="secno">11.3.4.5.3
                                </bdi><span class="chunk">eXIf</span> Recommendations for Encoders</h6><a
                                class="self-link" href="#exif-recommendations-for-encoders"
                                aria-label="Permalink for Section 11.3.4.5.3"></a>
                        </div>


                        <p>画像編集アプリケーションは、Exif 仕様の付録 E.3 を検討すべきであり [<cite><a class="bibref" data-link-type="biblio"
                                    href="#bib-cipa-dc-008"
                                    title="Exchangeable image file format for digital still cameras: Exif Version 2.32">CIPA-DC-008</a></cite>]、画像が変更されたときに
                            Exif データを更新するための要件について議論されている箇所を参照すべきです。エンコーダはこれらの要件に従うべきですが、デコーダは必ずしもそれが実行されていると仮定してはなりません。
                        </p>

                        <p>エンコーダがサムネイルを更新することを選択する場合もありますが、メイン画像が変更された場合に Exif プロファイル内のサムネイルが更新されているかどうかは保証されません。</p>
                    </section>
                </section>
            </section>


            <section id="11timestampinfo">
                <div class="header-wrapper">
                    <h4 id="x11-3-5-time-stamp-information"><bdi class="secno">11.3.5 </bdi>タイムスタンプ情報</h4>
                    <a class="self-link" href="#11timestampinfo" aria-label="Permalink for Section 11.3.5"></a>
                </div>



                <section id="11tIME">
                    <div class="header-wrapper">
                        <h5 id="x11-3-5-1-time-image-last-modification-time"><bdi class="secno">11.3.5.1 </bdi><span
                                class="chunk">tIME</span> 画像最終更新時刻</h5><a class="self-link" href="#11tIME"
                            aria-label="Permalink for Section 11.3.5.1"></a>
                    </div>


                    <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます</p>

                    <pre aria-busy="false"><code class="hljs">74 49 4D 45</code></pre>
                    <p><span class="chunk">tIME</span> チャンクは、画像の最終変更時刻（初回作成時刻では<strong>ありません</strong>）を与えます。内容は次のとおりです：
                    </p>

                    <table id="tIME-structure" class="numbered simple">
                        <caption><a class="self-link" href="#tIME-structure">Table <bdi class="tableno">26</bdi></a>
                            <span class="table-title">
                                tIME チャンクの内容
                            </span>
                        </caption>

                        <tbody>
                            <tr>
                                <th>Name</th>
                                <th>Size</th>
                            </tr>

                            <tr>
                                <td>Year</td>
                                <td>2 bytes (完全な年; たとえば 1995、<strong>95 ではない</strong>)</td>
                            </tr>

                            <tr>
                                <td>Month</td>
                                <td>1 byte (1-12)</td>
                            </tr>

                            <tr>
                                <td>Day</td>
                                <td>1 byte (1-31)</td>
                            </tr>

                            <tr>
                                <td>Hour</td>
                                <td>1 byte (0-23)</td>
                            </tr>

                            <tr>
                                <td>Minute</td>
                                <td>1 byte (0-59)</td>
                            </tr>

                            <tr>
                                <td>Second</td>
                                <td>1 byte (0-60)（うるう秒を許容するため）</td>
                            </tr>
                        </tbody>
                    </table>

                    <p>ローカル時刻ではなく協定世界時（UTC）を指定するべきです。</p>

                    <p><span class="chunk">tIME</span> チャンクは、<a href="#dfn-image-data" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-image-data-15">image data</a>
                        が変更されるたびに自動的に適用・更新されるタイムスタンプとしての使用を意図しています。</p>
                </section>
            </section>

            <section id="animation-information">
                <div class="header-wrapper">
                    <h4 id="x11-3-6-animation-information"><bdi class="secno">11.3.6 </bdi>アニメーション情報</h4><a
                        class="self-link" href="#animation-information" aria-label="Permalink for Section 11.3.6"></a>
                </div>


                <section id="acTL-chunk">
                    <div class="header-wrapper">
                        <h5 id="x11-3-6-1-actl-animation-control-chunk"><bdi class="secno">11.3.6.1 </bdi><span
                                class="chunk">acTL</span> アニメーション制御チャンク</h5><a class="self-link" href="#acTL-chunk"
                            aria-label="Permalink for Section 11.3.6.1"></a>
                    </div>


                    <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます</p>

                    <pre aria-busy="false"><code class="hljs">61 63 54 4C</code></pre>
                    <p><span class="chunk">acTL</span> チャンクはこれがアニメーションPNG画像であることを宣言し、フレーム数およびループ回数を与えます。内容は次のとおりです：</p>

                    <table id="acTL-structure" class="simple numbered">
                        <tbody>
                            <tr>
                                <td><code>num_frames</code></td>
                                <td>4 bytes</td>
                            </tr>

                            <tr>
                                <td><code>num_plays</code></td>
                                <td>4 bytes</td>
                            </tr>
                        </tbody>
                    </table>

                    <p>各値は<a href="#dfn-png-four-byte-unsigned-integer" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-png-four-byte-unsigned-integer-10">PNG four-byte unsigned
                            integer</a>としてエンコードされます。</p>

                    <p><code>num_frames</code> はアニメーション内の総フレーム数を示します。これは <a class="chunk" href="#fcTL-chunk">fcTL</a>
                        チャンクの数と等しくなければなりません。0 は無効な値です。単一フレームの PNG の場合は 1 が有効です。この値が実際のフレーム数と一致しない場合はエラーとして扱うべきです。</p>

                    <p><code>num_plays</code> はこのアニメーションが再生される回数を示します；0 の場合は無限に再生すべきです。0
                        でない場合、最後の再生の終了時にアニメーションは最終フレームで停止すべきです。</p>

                    <p><span class="chunk">acTL</span> チャンクは有効な PNG ストリーム内で最初の <a class="chunk" href="#11IDAT">IDAT</a>
                        チャンクの前に現れなければなりません。</p>

                    <div class="note" role="note" id="issue-container-generatedID-19">
                        <div role="heading" class="note-title marker" id="h-note-19" aria-level="6"><span>Note</span>
                        </div>
                        <p class="">Web 互換性のために、このチャンクの開発と展開の間に長い時間差があり PNG
                            仕様への組み込みが遅れたことから、このチャンク名は例外的にプライベートチャンクであるかのように定義されています。</p>
                    </div>
                </section>

                <section id="fcTL-chunk">
                    <div class="header-wrapper">
                        <h5 id="x11-3-6-2-fctl-frame-control-chunk"><bdi class="secno">11.3.6.2 </bdi><span
                                class="chunk">fcTL</span> フレーム制御チャンク</h5><a class="self-link" href="#fcTL-chunk"
                            aria-label="Permalink for Section 11.3.6.2"></a>
                    </div>


                    <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます</p>

                    <pre aria-busy="false"><code class="hljs">66 63 54 4C</code></pre>
                    <p><span class="chunk">fcTL</span> チャンクは個々のフレームの寸法、位置、表示遅延、および破棄動作を定義します。各フレームに対して正確に1つの <span
                            class="chunk">fcTL</span> チャンクが必要です。内容は次のとおりです：
                    </p>

                    <table id="fcTL-structure" class="numbered simple">
                        <caption><a class="self-link" href="#fcTL-structure">Table <bdi class="tableno">27</bdi></a>
                            <span class="table-title">
                                fcTL チャンクの内容
                            </span>
                        </caption>

                        <tbody>
                            <tr>
                                <th>Name</th>
                                <th>Size</th>
                            </tr>

                            <tr>
                                <td><code>sequence_number</code></td>
                                <td>4 bytes</td>
                            </tr>

                            <tr>
                                <td><code>width</code></td>
                                <td>4 bytes</td>
                            </tr>

                            <tr>
                                <td><code>height</code></td>
                                <td>4 bytes</td>
                            </tr>

                            <tr>
                                <td><code>x_offset</code></td>
                                <td>4 bytes</td>
                            </tr>

                            <tr>
                                <td><code>y_offset</code></td>
                                <td>4 bytes</td>
                            </tr>

                            <tr>
                                <td><code>delay_num</code></td>
                                <td>2 bytes</td>
                            </tr>

                            <tr>
                                <td><code>delay_den</code></td>
                                <td>2 bytes</td>
                            </tr>

                            <tr>
                                <td><code>dispose_op</code></td>
                                <td>1 byte</td>
                            </tr>

                            <tr>
                                <td><code>blend_op</code></td>
                                <td>1 byte</td>
                            </tr>
                        </tbody>
                    </table>

                    <p><code>sequence_number</code> はアニメーションチャンクの<a href="#4Concepts.APNGSequence">シーケンス番号</a>を定義し、0
                        から始まります。これは <a href="#dfn-png-four-byte-unsigned-integer" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-png-four-byte-unsigned-integer-11">PNG four-byte
                            unsigned integer</a> としてエンコードされます。</p>

                    <p><code>width</code> と <code>height</code> は続くフレームの幅と高さを定義します。これらは <a
                            href="#dfn-png-four-byte-unsigned-integer" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-png-four-byte-unsigned-integer-12">PNG four-byte unsigned integers</a>
                        としてエンコードされ、0 より大きくなければなりません。</p>

                    <p><code>x_offset</code> と <code>y_offset</code> は続くフレームの x および y 位置を定義します。これらは <a
                            href="#dfn-png-four-byte-unsigned-integer" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-png-four-byte-unsigned-integer-13">PNG four-byte unsigned integers</a>
                        としてエンコードされます。0 は有効な値です。</p>

                    <p>フレームは <code>x_offset</code>, <code>y_offset</code>, <code>width</code>, <code>height</code>
                        で定義される領域内にレンダリングされなければなりません。この領域はデフォルト画像の外に出てはならないため、<code>x_offset</code> + <code>width</code>
                        は <a class="chunk" href="#11IHDR">IHDR</a> の幅を超えてはならず、同様に <code>y_offset</code> +
                        <code>height</code> は <a class="chunk" href="#11IHDR">IHDR</a> の高さを超えてはなりません。
                    </p>

                    <p><code>delay_num</code> と <code>delay_den</code> は遅延分数の分子と分母を定義し、現在のフレームを表示する時間（秒）を示します。分母が 0 の場合は
                        100 として扱われます（すなわち <code>delay_num</code> は 1/100 秒単位を指定します）。分子の値が 0
                        の場合、デコーダは可能な限り速やかに次のフレームをレンダリングするべきですが、ビューアは合理的な下限を課すことがあります。これらは2バイトの符号なし整数としてエンコードされます。</p>

                    <p>フレームのタイミングは各フレームのデコードや表示に要する時間に依存しないようにするべきであり、そうすることでデコーダの性能に関わらず同じ速度でアニメーションが再生されます。</p>

                    <p><code>dispose_op</code>
                        はこのフレームのレンダリング後に行う領域の破棄方法を定義します。すなわち遅延終了時（次フレームをレンダリングする前）に出力バッファをどのように変更するかを指定します。これは1バイトの符号なし整数としてエンコードされます。
                    </p>

                    <p><code>dispose_op</code> の有効な値は次のとおりです：</p>

                    <table id="dispose-op-values" class="simple numbered">
                        <tbody>
                            <tr>
                                <td>0</td>
                                <td><code>APNG_DISPOSE_OP_NONE</code></td>
                            </tr>

                            <tr>
                                <td>1</td>
                                <td><code>APNG_DISPOSE_OP_BACKGROUND</code></td>
                            </tr>

                            <tr>
                                <td>2</td>
                                <td><code>APNG_DISPOSE_OP_PREVIOUS</code></td>
                            </tr>
                        </tbody>
                    </table>

                    <dl>
                        <dt><code>APNG_DISPOSE_OP_NONE</code></dt>

                        <dd>次フレームをレンダリングする前にこのフレームの破棄は行われません；出力バッファの内容はそのまま残されます。</dd>

                        <dt><code>APNG_DISPOSE_OP_BACKGROUND</code></dt>

                        <dd>次フレームをレンダリングする前に、出力バッファのこのフレーム領域を完全に透明な黒でクリアします。</dd>

                        <dt><code>APNG_DISPOSE_OP_PREVIOUS</code></dt>

                        <dd>次フレームをレンダリングする前に、出力バッファのこのフレーム領域を以前の内容に復元します。</dd>
                    </dl>

                    <p>最初の <span class="chunk">fcTL</span> チャンクが <code>dispose_op</code> に
                        <code>APNG_DISPOSE_OP_PREVIOUS</code> を使用している場合、それは <code>APNG_DISPOSE_OP_BACKGROUND</code>
                        として扱うべきです。
                    </p>

                    <p><code>blend_op</code>
                        はフレームが現在の出力バッファ内容にアルファ合成されるか、あるいはその領域を完全に置き換えるかを指定します。これは1バイトの符号なし整数としてエンコードされます。</p>

                    <p><code>blend_op</code> の有効な値は次のとおりです：</p>

                    <table id="blend-op-values" class="simple numbered">
                        <tbody>
                            <tr>
                                <td>0</td>
                                <td><code>APNG_BLEND_OP_SOURCE</code></td>
                            </tr>

                            <tr>
                                <td>1</td>
                                <td><code>APNG_BLEND_OP_OVER</code></td>
                            </tr>
                        </tbody>
                    </table>

                    <p><code>blend_op</code> が <code>APNG_BLEND_OP_SOURCE</code>
                        の場合、アルファを含むフレームのすべての色成分がフレーム領域の現在の内容を上書きします。<code>blend_op</code> が
                        <code>APNG_BLEND_OP_OVER</code> の場合、フレームはそのアルファに基づいて出力バッファ上に<a href="#dfn-composited"
                            class="internalDFN" data-link-type="dfn" id="ref-for-dfn-composited-6">合成</a>され、単純な OVER
                        演算（<a href="#13Alpha-channel-processing">Alpha Channel
                            Processing</a>参照）を使用します。サンプルコードの第2のバリエーションが適用可能である点に注意してください。
                    </p>

                    <p>最初のフレームについては、再生の開始時に出力バッファがクリアされるため、両方のブレンドモードは機能的に等価であることに注意してください。</p>

                    <p>デフォルト画像に対応する <span class="chunk">fcTL</span> チャンク（存在する場合）には次の制約があります：</p>

                    <ul>
                        <li><code>x_offset</code> と <code>y_offset</code> フィールドは 0 でなければなりません。</li>

                        <li><code>width</code> と <code>height</code> フィールドは <a class="chunk" href="#11IHDR">IHDR</a>
                            チャンクの対応するフィールドと等しくなければなりません。</li>
                    </ul>

                    <p>前述のとおり、出力バッファは各再生の開始時に完全に透明な黒で初期化されなければなりません。これは各再生が同一になることを保証するためです。デコーダは結果が同一になる限り明示的なクリア手順を回避してもかまいません。例えば、デフォルト画像がアニメーションに含まれ、かつ
                        <code>blend_op</code> に <code>APNG_BLEND_OP_SOURCE</code> を使用する場合、出力バッファ全体が上書きされるためクリアは不要です。
                    </p>



                    <div class="note" role="note" id="issue-container-generatedID-20">
                        <div role="heading" class="note-title marker" id="h-note-20" aria-level="6"><span>Note</span>
                        </div>
                        <p class="">Web 互換性のために、このチャンクの開発と展開の間に長い時間差があり PNG
                            仕様への組み込みが遅れたことから、このチャンク名は例外的にプライベートチャンクであるかのように定義されています。</p>
                    </div>
                </section>

                <section id="fdAT-chunk">
                    <div class="header-wrapper">
                        <h5 id="x11-3-6-3-fdat-frame-data-chunk"><bdi class="secno">11.3.6.3 </bdi><span
                                class="chunk">fdAT</span> フレームデータチャンク</h5><a class="self-link" href="#fdAT-chunk"
                            aria-label="Permalink for Section 11.3.6.3"></a>
                    </div>


                    <p>4バイトのチャンクタイプフィールドには次の16進値が含まれます</p>

                    <pre aria-busy="false"><code class="hljs">66 64 41 54</code></pre>
                    <p><span class="chunk">fdAT</span> チャンクはアニメーションにおいて <a class="chunk" href="#11IDAT">IDAT</a>
                        チャンクが静止画像に対して果たす役割と同じ役割を持ちます；すなわち <span class="chunk">fdAT</span>
                        の集合はすべてのフレーム（または静止画像が最初のフレームとして含まれるアニメーションでは最初のフレーム以降のすべて）の <a href="#dfn-image-data"
                            class="internalDFN" data-link-type="dfn" id="ref-for-dfn-image-data-16">image data</a>
                        を含みます。内容は次のとおりです：</p>

                    <table id="fdAT-structure" class="numbered simple">
                        <caption><a class="self-link" href="#fdAT-structure">Table <bdi class="tableno">28</bdi></a>
                            <span class="table-title">
                                fdAT チャンクの内容
                            </span>
                        </caption>

                        <tbody>
                            <tr>
                                <th>Name</th>
                                <th>Size</th>
                            </tr>

                            <tr>
                                <td><code>sequence_number</code></td>
                                <td>4 bytes</td>
                            </tr>

                            <tr>
                                <td><code>frame_data</code></td>
                                <td><i>n</i> bytes</td>
                            </tr>
                        </tbody>
                    </table>

                    <p>各フレームに対して少なくとも1つの <span class="chunk">fdAT</span> チャンクが必要です（ただし、そのフレームが <a class="chunk"
                            href="#11IDAT">IDAT</a> チャンクで表現される最初のフレームである場合を除く）。</p>

                    <p>各フレームの圧縮データストリームは、同フレーム内のすべての <span class="chunk">fdAT</span> チャンクの <code>frame_data</code>
                        フィールドの内容を <code>sequence_number</code> の昇順で連結したものになります。</p>

                    <p>シーケンス番号が存在するため、<span class="chunk">fdAT</span> チャンクは<a
                            href="#zero-length-data">長さゼロであってはなりません</a>；ただし <code>frame_data</code> フィールドはゼロ長であり得ます。

                        伸長すると、このデータストリームは各スキャンラインの先頭にあるフィルタバイトを含む完全なピクセルデータとなり、すべての <a class="chunk"
                            href="#11IDAT">IDAT</a> チャンクの非圧縮データと同様です。ビット深度、<a href="#3colourType" class="internalDFN"
                            data-link-type="dfn" id="ref-for-3colourType-32">color type</a>、圧縮方式、<a href="#3filter"
                            class="internalDFN" data-link-type="dfn" id="ref-for-3filter-12">filter
                            method</a>、インターレース方式、およびパレット（存在する場合）は <a href="#dfn-static-image" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-static-image-8">static image</a> と同じです。
                    </p>

                    <p>各フレームは、ファイル内の最初の <a class="chunk" href="#11IDAT">IDAT</a>
                        チャンクの<em>前</em>に現れる任意のクリティカルまたは補助チャンクによって指定されたすべてのプロパティを継承します。ただし幅と高さは <span
                            class="chunk">fcTL</span> チャンクから取得されます。</p>

                    <p>PNG に <a class="chunk" href="#11pHYs">pHYs</a> チャンクが存在する場合、<abbr title="Animated PNG">APNG</abbr>
                        画像とその <code>x_offset</code> および <code>y_offset</code>
                        の値はメイン画像と同様にスケーリングされなければなりません。概念的には、そのようなスケーリングは出力バッファを <a href="#dfn-canvas"
                            class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canvas-3">canvas</a> にマップする際に行われます。
                    </p>

                    <div class="note" role="note" id="issue-container-generatedID-21">
                        <div role="heading" class="note-title marker" id="h-note-21" aria-level="6"><span>Note</span>
                        </div>
                        <p class="">Web 互換性のために、このチャンクの開発と展開の間に長い時間差があり PNG
                            仕様への組み込みが遅れたことから、このチャンク名は例外的にプライベートチャンクであるかのように定義されています。</p>
                    </div>
                </section>
            </section>
        </section>
    </section>




    <section id="12Encoders">
        <div class="header-wrapper">
            <h2 id="x12-png-encoders"><bdi class="secno">12. </bdi>PNG エンコーダ</h2><a class="self-link" href="#12Encoders"
                aria-label="Permalink for Section 12."></a>
        </div>



        <section class="introductory" id="12Introduction">
            <div class="header-wrapper">
                <h3 id="introduction-8">はじめに</h3><a class="self-link" href="#12Introduction"
                    aria-label="Permalink for this Section"></a>
            </div>


            <p>この節はエンコーダの動作に関する要件と推奨事項を示します。PNG エンコーダは、前節で規定された形式に準拠する PNG イメージから PNG
                データストリームを生成しなければなりません。ここに示す追加の推奨事項に従うことで、通常は最良の結果が得られます。</p>
        </section>


        <section id="12Encoder-gamma-handling">
            <div class="header-wrapper">
                <h3 id="x12-1-encoder-gamma-handling"><bdi class="secno">12.1 </bdi>エンコーダのガンマ処理</h3><a class="self-link"
                    href="#12Encoder-gamma-handling" aria-label="Permalink for Section 12.1"></a>
            </div>


            <p>簡単なガンマの導入については <a href="#C-GammaAppendix" class="sec-ref"><bdi class="secno">C. </bdi>Gamma and
                    chromaticity</a> を参照してください。</p>

            <p>フルカラーマネジメント対応の PNG エンコーダは、ここで説明するよりも高度な計算を行い、<a class="chunk" href="#11iCCP">iCCP</a>
                チャンクを使用することを選択する場合があります。もしイメージのサンプルが sRGB 仕様 [<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-srgb"
                        title="Multimedia systems and equipment - Colour measurement and management - Part 2-1: Colour management - Default RGB colour space - sRGB">SRGB</a></cite>]
                に準拠していることが分かっているなら、エンコーダは追加のガンマ処理を行わずに <a class="chunk" href="#srgb-standard-colour-space">sRGB</a>
                チャンクを書き込むことが強く推奨されます。どちらの場合でも、<a class="chunk" href="#11iCCP">iCCP</a> や <a class="chunk"
                    href="#srgb-standard-colour-space">sRGB</a> チャンクを認識しない PNG デコーダ向けに、適切な <a class="chunk"
                    href="#11gAMA">gAMA</a> チャンクを生成することが推奨されます。</p>

            <p>PNG エンコーダは以下を決定する必要があります：</p>


            <ol>
                <li>どの値を <a class="chunk" href="#11gAMA">gAMA</a> チャンクに書き込むか；</li>

                <li>提供されたイメージサンプルを PNG データストリームに書き込む値にどのように変換するか。</li>
            </ol>

            <p><a class="chunk" href="#11gAMA">gAMA</a> チャンクに書き込むべき値は、PNG デコーダが期待通りに動作するようにする値です。<a
                    href="#13Decoder-gamma-handling" class="Href sec-ref"><bdi class="secno">13.13 </bdi>Decoder gamma
                    handling</a> を参照してください。</p>

            <p>適用すべき変換は、イメージサンプルの性質とその精度に依存します。もしサンプルが浮動小数点や高精度整数で光強度を表している場合（たとえばコンピュータグラフィックスのレンダラから）、エンコーダは PNG
                データストリームに含めるために整数へ量子化する前に <dfn id="dfn-gamma-encoding" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">ガンマエンコーディング</dfn>（指数が1未満のべき関数を適用）を実行することがあります。これにより与えられたサンプル深度でバンディングのアーティファクトが少なくなったり、同等の視覚品質を保ちながらより小さなサンプルを使えたりします。0
                から 1 の範囲の浮動小数点値で表現された強度レベルは、次の式でデータストリームのイメージサンプルに変換できます：</p>

            <p><code>integer_sample = floor((2<sup>sampledepth</sup>-1) * intensity<sup>encoding_exponent</sup> + 0.5)</code>
            </p>

            <p>式中の intensity が望ましい出力強度を表す場合、encoding_exponent は <a href="#dfn-gamma-value" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-gamma-value-7">gAMA</a> チャンクに使用する <a class="chunk"
                    href="#11gAMA">gamma value</a> になります。</p>

            <p>もしエンコーダが利用できる強度が元のシーン強度であるなら、別の変換が必要になることがあります。表示画像が元のソース画像よりコントラストを高くする必要がある場合があります。これは元のシーンから表示出力へのエンドツーエンドの
                <a href="#dfn-transfer-function" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-transfer-function-12">伝達関数</a> が 1 より大きい指数を持つことに対応します。この場合：
            </p>

            <pre
                aria-busy="false"><code class="hljs abnf"><span class="hljs-attribute">gamma</span> <span class="hljs-operator">=</span> encoding_exponent/end_to_end_exponent</code></pre>
            <p>もし元の画像がキャプチャまたは計算された条件がそのようなコントラスト変化を正当化するか不明な場合、表示強度は元のシーン強度に比例すると仮定してよい（すなわち end_to_end_exponent は
                1）ので：</p>

            <pre
                aria-busy="false"><code class="hljs abnf"><span class="hljs-attribute">gamma</span> <span class="hljs-operator">=</span> encoding_exponent</code></pre>


            <p>もし画像がデータストリームにのみ書き込まれるのであれば、エンコーダはエンコーディング指数を自由に選べます。<a href="#dfn-gamma-value" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-gamma-value-8">gAMA</a> チャンクに 1/2.2
                を与えるような値を選ぶことは、多くの場合妥当です。なぜなら典型的なビデオモニタ上で表示する PNG デコーダの負担を最小にするからです。</p>

            <p>いくつかのイメージレンダラはイメージを PNG データストリームへ書き込むと同時に画面にも表示することがあります。表示されるピクセルは、その表示システムと視聴条件に合わせて<a
                    href="#dfn-gamma" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-gamma-6">ガンマ補正</a>されるべきであり、ユーザが意図したシーンの適切な表現を目にするようにすべきです。</p>

            <p>もしレンダラが画面上に表示されたサンプル値を PNG データストリームへ書き込みたい（データストリームのために別個の <a href="#dfn-gamma-encoding"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gamma-encoding-1">ガンマエンコーディング</a>
                ステップを回避したい）場合、レンダラは表示システムの <a href="#dfn-transfer-function" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-transfer-function-13">伝達関数</a> をべき関数で近似し、その指数の逆数を <a class="chunk"
                    href="#11gAMA">gAMA</a> チャンクに書き込むべきです。これにより PNG デコーダはレンダリング中に作成者が画面で見たものを再現できます。</p>

            <p>しかしながら、レンダラが表示デバイスに適した表示ピクセルを計算し、データ保存用に別途 <a href="#dfn-gamma-encoding" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-gamma-encoding-2">ガンマエンコーディング</a> を実行し、将来の使用により適した値を <a
                    class="chunk" href="#11gAMA">gAMA</a> に入れるようにすることも同様に合理的です。</p>

            <p>コンピュータグラフィックスのレンダラはしばしば <a href="#dfn-gamma-encoding" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-gamma-encoding-3">ガンマエンコーディング</a> を行わず、サンプル値をシーン光強度に直接比例させることが多いです。もし PNG
                エンコーダが既に整数に量子化されたサンプル値を受け取るなら、それに対して再び <a href="#dfn-gamma-encoding" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-gamma-encoding-4">ガンマエンコーディング</a>
                を行う意味はありません；単に情報損失を招くだけです。エンコーダはサンプル値をそのまま PNG データストリームへ書き込むべきです。これは <a class="chunk"
                    href="#11gAMA">gAMA</a> チャンクに 1.0 を入れるべきだという意味ではありません。なぜならシーン強度から表示出力への望ましいエンドツーエンドの <a
                    href="#dfn-transfer-function" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-transfer-function-14">伝達関数</a> が線形であるとは限らないからです。しかし望ましい <a href="#dfn-gamma-value"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gamma-value-9">gamma value</a> はおそらく 1.0
                に近いでしょう。これはレンダリングされているシーンが屋外の昼光シーンか室内シーンか等に依存するかもしれません。</p>

            <p>サンプル値がハードウェアから直接来る場合、正しい <a class="chunk" href="#11gAMA">gAMA</a> 値は理論上ハードウェアの <a
                    href="#dfn-transfer-function" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-transfer-function-15">伝達関数</a> とシーンの照明条件から推定できます。ビデオのフレームグラバのような場合、サンプルはおそらく sRGB
                カラースペースにあるでしょう。イメージスキャナの出力は予測しにくく、CCD
                センサ自体は線形であるため入力光強度に比例する場合もあれば、スキャナハードウェアが印刷でのドットゲイン補正用のべき関数を既に適用している場合（約 0.57
                の指数）や、モニタ表示用に補正済みの場合もあります。特定のスキャナの特性を知るにはマニュアルや校正ターゲットのスキャンが必要になることがあります。<a href="#dfn-gamma"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gamma-7">gamma</a>
                はサンプルと望ましい表示出力との関係を表すものであって、スキャナ入力そのものには関係しない点を忘れないでください。</p>

            <p>データストリーム形式の変換器は、一般に供給された画像のガンマを別のものへ変換しようとするべきではありません。データは変換せずに PNG データストリームへ保存されるべきであり、可能ならソースデータストリームから
                <a href="#dfn-gamma-value" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-gamma-value-11">gamma value</a>
                を推定して書き込むべきです。データストリーム変換時のガンマ変更は、表現される強度レベル集合の再量子化を引き起こし、利点がほとんどないまま丸め誤差を追加します。入力から出力へサンプル値をそのままコピーする方がほとんどの場合良いでしょう。
            </p>

            <p>もしソースデータストリームが画像の <a href="#dfn-gamma" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-gamma-10">gamma</a> 特性を記述しているなら、データストリーム変換器は <a class="chunk"
                    href="#11gAMA">gAMA</a> チャンクを書くことが強く推奨されます。一部の形式は表示指数（画像サンプルを表示出力へマップする関数の指数）を指定します。もしソースファイルの <a
                    href="#dfn-gamma-value" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-gamma-value-12">gamma value</a> が 1.0 より大きいなら、それはおそらく表示指数であり、その逆数を PNG の <a
                    href="#dfn-gamma-value" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-gamma-value-13">gamma value</a> に使うべきです。もしソースファイルが画像サンプルと表示出力以外の量との関係を記録している場合、PNG の
                <a href="#dfn-gamma-value" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-gamma-value-14">gamma value</a> を推定するのはもっと複雑になります。
            </p>

            <p>もし PNG エンコーダやデータストリーム変換器が、表示システムの <a href="#dfn-transfer-function" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-transfer-function-16">伝達関数</a> をべき関数で近似できることを知っているなら、その指数を
                <var>display_exponent</var> として、イメージには次の <a href="#dfn-gamma-value" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-gamma-value-15">gamma value</a> を付与できます：
            </p>

            <pre
                aria-busy="false"><code class="hljs abnf"><span class="hljs-attribute">gamma</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>/display_exponent</code></pre>


            <p>おおよそ正しい値の <a class="chunk" href="#11gAMA">gAMA</a> チャンクを書き込む方が、チャンクを省略して PNG デコーダに適当な <a
                    href="#dfn-gamma-value" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-gamma-value-16">gamma value</a> を推測させるよりも望ましいです。もし PNG エンコーダが <a
                    href="#dfn-gamma-value" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-gamma-value-17">gamma value</a> を推定できないなら、<a class="chunk" href="#11gAMA">gAMA</a>
                チャンクを省略する方が望ましいです。推測しなければならない場合は、それを PNG デコーダに任せるべきです。</p>

            <p><a href="#dfn-gamma" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gamma-11">gamma</a>
                はアルファサンプルには適用されません；アルファは常に線形で表されます。</p>

            <p>また <a href="#13Decoder-gamma-handling" class="sec-ref"><bdi class="secno">13.13 </bdi>Decoder gamma
                    handling</a> も参照してください。</p>
        </section>


        <section id="12Encoder-colour-handling">
            <div class="header-wrapper">
                <h3 id="x12-2-encoder-color-handling"><bdi class="secno">12.2 </bdi>エンコーダの色処理</h3><a class="self-link"
                    href="#12Encoder-colour-handling" aria-label="Permalink for Section 12.2"></a>
            </div>


            <p>色に関する参考は <a href="#C-GammaAppendix" class="sec-ref"><bdi class="secno">C. </bdi>Gamma and
                    chromaticity</a> を参照してください。</p>

            <p>フルカラーマネジメント対応の PNG エンコーダは、ここで述べるより高度な計算を行い、<a class="chunk" href="#11iCCP">iCCP</a>
                チャンクを使用することを選ぶかもしれません。もしイメージサンプルが sRGB 仕様に準拠すると分かっているなら、PNG エンコーダは <a class="chunk"
                    href="#srgb-standard-colour-space">sRGB</a> チャンクを使用することが強く推奨されます。</p>

            <p>ソースの表示原色の色度を決定できる、または画像の起源や実行ハードウェアに基づいて強い推測ができる場合、エンコーダは <a class="chunk" href="#11cHRM">cHRM</a>
                チャンクを出力することが強く推奨されます。もしそれを行うなら、<a class="chunk" href="#11gAMA">gAMA</a> チャンクも併せて書き込むべきです；デコーダは <a
                    class="chunk" href="#11cHRM">cHRM</a> だけではあまり利用できません。</p>

            <p>原色や <a href="#dfn-white-point" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-white-point-4">ホワイトポイント</a> に関してはいくつかの推奨や標準があり、技術に結びつくものもあります。たとえば CCIR 709
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-itu-r-bt.709"
                        title="ITU-R BT.709, SERIES BT: BROADCASTING SERVICE (TELEVISION). Parameter values for the HDTV standards for production and international programme exchange">ITU-R-BT.709</a></cite>]
                や SMPTE-C [<cite><a class="bibref" data-link-type="biblio" href="#bib-smpte-170m"
                        title="Television — Composite Analog Video Signal — NTSC for Studio Applications">SMPTE-170M</a></cite>]
                などです。</p>

            <p>考慮すべきケースは次の三つです：</p>

            <ol>
                <li>エンコーダが生成システムの一部である場合；</li>

                <li>ソース画像がカメラやスキャナでキャプチャされた場合；</li>

                <li>PNG データストリームが他の形式から変換によって生成された場合。</li>
            </ol>


            <p>手描きやデジタル編集された画像の場合、制作時にどのモニタで表示していたかを特定する必要があります。多くの画像編集プログラムは使用中のモニタ種別を指定でき、内部でデバイス非依存空間を使っていることが多いです。そのようなプログラムは有効な
                <a class="chunk" href="#11cHRM">cHRM</a> および <a class="chunk" href="#11gAMA">gAMA</a>
                チャンクを書き込むのに十分な情報を持っており、自動的にそれらを書き込むことが強く推奨されます。
            </p>

            <p>エンコーダがフルスペクトルレンダリングを行うコンピュータレンダラの一部としてコンパイルされている場合、内部のデバイス非依存色空間から RGB へ変換するために使用したモニタ値を <a class="chunk"
                    href="#11cHRM">cHRM</a> チャンクに書くべきです。選択した RGB デバイスのガモット外の色はガモット内にマップされるべきです；PNG はガモット外の色を格納しません。</p>

            <p>もしコンピュータレンダラがデバイス依存の RGB 空間で直接計算を行うなら、シーン記述とレンダリングパラメータが特定のモニタに合わせて調整されていない限り <a class="chunk"
                    href="#11cHRM">cHRM</a> チャンクは書くべきではありません。その場合は、そのモニタのデータを使って <a class="chunk"
                    href="#11cHRM">cHRM</a> チャンクを構築すべきです。</p>

            <p>一部のイメージ形式はキャリブレーション情報を格納しており、それを使って <a class="chunk" href="#11cHRM">cHRM</a> チャンクを埋めることができます。たとえば TIFF
                6.0 [<cite><a class="bibref" data-link-type="biblio" href="#bib-tiff-6.0"
                        title="TIFF Revision 6.0">TIFF-6.0</a></cite>] はオプションでキャリブレーション情報を持ち、存在するなら <a class="chunk"
                    href="#11cHRM">cHRM</a> チャンクの構築に使うべきです。</p>

            <p>最近のビデオ機器で作成されたビデオはおそらく CCIR 709 の原色と D65 のホワイトポイントを使用しており、これらは <a href="#12-table121" class="table-ref"
                    title="CCIR 709 primaries and D65 whitepoint">Table <bdi class="">29</bdi></a> に示されています。</p>




            <table id="12-table121" class="numbered simple">
                <caption><a class="self-link" href="#12-table121">Table <bdi class="tableno">29</bdi></a> <span
                        class="table-title">
                        CCIR 709 原色と D65 ホワイトポイント
                    </span></caption>

                <tbody>
                    <tr>
                        <th>&nbsp;</th>
                        <th>R</th>
                        <th>G</th>
                        <th>B</th>
                        <th>White</th>
                    </tr>

                    <tr>
                        <td>x</td>
                        <td>0.640</td>
                        <td>0.300</td>
                        <td>0.150</td>
                        <td>0.3127</td>
                    </tr>

                    <tr>
                        <td>y</td>
                        <td>0.330</td>
                        <td>0.600</td>
                        <td>0.060</td>
                        <td>0.3290</td>
                    </tr>
                </tbody>
            </table>

            <p>古くから広く使われているビデオ標準の一つに SMPTE-C [<cite><a class="bibref" data-link-type="biblio" href="#bib-smpte-170m"
                        title="Television — Composite Analog Video Signal — NTSC for Studio Applications">SMPTE-170M</a></cite>]
                があり、これは <a href="#12-table122" class="table-ref" title="SMPTE-C video standard">Table <bdi
                        class="">30</bdi></a> に示されています。</p>


            <table id="12-table122" class="numbered simple">
                <caption><a class="self-link" href="#12-table122">Table <bdi class="tableno">30</bdi></a> <span
                        class="table-title">
                        SMPTE-C ビデオ標準
                    </span></caption>

                <tbody>
                    <tr>
                        <th>&nbsp;</th>
                        <th>R</th>
                        <th>G</th>
                        <th>B</th>
                        <th>White</th>
                    </tr>

                    <tr>
                        <td>x</td>
                        <td>0.630</td>
                        <td>0.310</td>
                        <td>0.155</td>
                        <td>0.3127</td>
                    </tr>

                    <tr>
                        <td>y</td>
                        <td>0.340</td>
                        <td>0.595</td>
                        <td>0.070</td>
                        <td>0.3290</td>
                    </tr>
                </tbody>
            </table>

            <p>データストリーム形式の変換器が供給された画像を別の RGB カラースペースへ変換しようとすることは<strong>推奨されません</strong>。データは変換せずに PNG
                データストリームに格納されるべきであり、ソースの原色色度が分かっていればそれを記録すべきです。データストリーム変換時の色空間変換は、ガモットの不一致や丸め誤差のために悪い考えです。ガンマ変換と同様に、データをロスレスに格納し、最終的な表示時に多くても一度だけ変換を行う方が良いのです。
            </p>

            <p>また <a href="#13Decoder-colour-handling" class="sec-ref"><bdi class="secno">13.14 </bdi>Decoder
                    color handling</a> を参照してください。</p>
        </section>


        <section id="12Alpha-channel-creation">
            <div class="header-wrapper">
                <h3 id="x12-3-alpha-channel-creation"><bdi class="secno">12.3 </bdi>アルファチャネルの作成</h3><a class="self-link"
                    href="#12Alpha-channel-creation" aria-label="Permalink for Section 12.3"></a>
            </div>


            <p>アルファチャネルは、透明な部分を一時的に隠すマスクとして考えることも、非矩形イメージを構築する手段と考えることもできます。前者の場合、完全に透明なピクセルの色値は将来の利用のために保持するべきです。後者の場合、透明ピクセルは有用なデータを持たず、PNG
                が要求する矩形イメージ領域を満たすために存在するだけです。この場合、完全に透明なピクセルには圧縮のために同一の色値を割り当てるべきです。</p>

            <p>イメージ作者は、デコーダが透明性制御を完全にはサポートしない可能性があることを念頭に置くべきです（<a href="#13Alpha-channel-processing"
                    class="sec-ref"><bdi class="secno">13.16 </bdi>Alpha channel processing</a>
                を参照）。したがって、可能であれば透明ピクセルに割り当てる色は合理的な背景色にしておくべきです。</p>

            <p>完全なアルファチャネルを必要としない、あるいは圧縮効率の面で許容できないアプリケーション向けに、<a class="chunk" href="#11tRNS">tRNS</a> 透過チャンクも利用可能です。
            </p>

            <p>もしイメージに既知の背景色があるなら、その色は <a class="chunk" href="#11bKGD">bKGD</a> チャンクに書き込むべきです。透明性を無視するデコーダであっても、<a
                    class="chunk" href="#11bKGD">bKGD</a> の色を未使用領域の塗りつぶしに使うことができます。</p>

            <p>もし元の画像がプリマルチプライド（associated）アルファを持つ場合、それを PNG
                の非プリマルチプライド形式へ変換するには、各サンプル値を対応するアルファ値で割り、次に画像ビット深度の最大値を掛け、最も近い整数へ丸めればよいです。有効なプリマルチプライドデータでは、サンプル値が対応するアルファ値を超えることはないので、除算の結果は常に
                0 〜 1 の範囲になるはずです。もしアルファ値がゼロなら、出力は黒（ゼロ）にしてください。</p>
        </section>




        <section id="12Sample-depth-scaling">
            <div class="header-wrapper">
                <h3 id="x12-4-sample-depth-scaling"><bdi class="secno">12.4 </bdi>サンプル深度のスケーリング</h3><a class="self-link"
                    href="#12Sample-depth-scaling" aria-label="Permalink for Section 12.4"></a>
            </div>


            <p>PNG で直接表現できないサンプル深度の入力サンプルをエンコードする場合、エンコーダはサンプルを PNG が許容するサンプル深度へ拡大スケールしなければなりません。最も正確なスケーリング方法は線形式です：
            </p>

            <pre
                aria-busy="false"><code class="hljs">output = floor((input * MAXOUTSAMPLE / MAXINSAMPLE) + 0.5)</code></pre>
            <p>ここで入力サンプルは 0 から <var>MAXINSAMPLE</var> の範囲で、出力は 0 から <var>MAXOUTSAMPLE</var>（これは
                2<sup>sampledepth</sup>-1）までの範囲です。
            </p>

            <p>線形スケーリングに近い近似は「左ビット複製（left bit
                replication）」によって得られます。これは有効ビットを最上位ビットにシフトし、開いている下位ビットへ最上位ビットを繰り返して埋める方法です。この方法は線形スケーリングより計算が速いことが多いです。
            </p>

            <p class="example">例えば 5 ビットサンプルを 8 ビットへ拡大する場合を考えます。ソースサンプル値が 27（0-31 の範囲）であれば、元のビットは：</p>

            <pre aria-busy="false"><code class="hljs">4 3 2 1 0
---------
1 1 0 1 1</code></pre>
            <p>左ビット複製は値 222 を与えます：</p>

            <pre aria-busy="false"><code class="hljs">7 6 5 4 3  2 1 0
----------------
1 1 0 1 1  1 1 0
|=======|  |===|
    |      Leftmost Bits Repeated to Fill Open Bits
    |
Original Bits</code></pre>
            <p>これは線形式で計算した値と一致します。左ビット複製は通常線形スケーリングと同じ値を与え、最大でも 1 だけ差が出ることはありません。</p>

            <p>より精度の低い近似は単に入力値を左シフトして下位ビットをゼロで埋める方法です。この方式は最大値が全て 1
                にはならないため白を正確に再現できず、結果として画像がわずかに暗くなります。一般にはこの方法は推奨されませんが、特に 8
                ビットより大きなサンプル深度を扱うときに圧縮が改善される効果があります。高いサンプル深度ではゼロフィルスケーリングによる相対誤差は小さいため、いくつかのエンコーダはこれを選ぶかもしれません。ただしアルファチャネルデータに対してゼロフィルは<strong>使用してはなりません</strong>。多くのデコーダはアルファ値が全ゼロや全
                1 の場合を特別扱いするからです。スケーリング後のデータではこれらの値を正確に表現することが重要です。</p>

            <p>エンコーダが <a class="chunk" href="#11sBIT">sBIT</a>
                チャンクを書き込む場合、格納されたサンプルの高位ビットが元のデータと一致するようにスケーリングを行うことが要求されます。すなわち、もし <a class="chunk"
                    href="#11sBIT">sBIT</a> が S ビットのサンプル深度を示す場合、格納データの高位 S ビットは元の S
                ビット値と一致しなければなりません。これによりデコーダは右シフトして元のデータを復元できます。追加される下位ビットには制約がありません。上述のスケーリング方法はすべてこの制約を満たします。</p>

            <p>ソースのイメージデータをスケールアップする際、下位ビットはすべてのサンプルで一貫して埋めることが推奨されます。すなわち同じソース値はどの画素位置でも同じ生成サンプル値を生むべきです。これにより異なるサンプル値の数が減り圧縮が改善されます。これは必須ではなく、一部のエンコーダはむしろ下位ビットにディザを施して表示品質を向上させる代わりにファイルサイズを増やすことを選ぶ場合があります。
            </p>

            <p>一部の用途では元のソースデータのレンジが 2 の冪でないことがあります。その場合でも線形スケーリング式は機能しますが、シフト法は適しません。そのような画像では <a class="chunk"
                    href="#11sBIT">sBIT</a> を書かないことが推奨されます。なぜなら <a class="chunk" href="#11sBIT">sBIT</a> は元のデータレンジが正確に
                0..2<sup>S</sup>-1 であったことを示唆してしまうからです。</p>
        </section>




        <section id="12Suggested-palettes">
            <div class="header-wrapper">
                <h3 id="x12-5-suggested-palettes"><bdi class="secno">12.5 </bdi>推奨パレット</h3><a class="self-link"
                    href="#12Suggested-palettes" aria-label="Permalink for Section 12.5"></a>
            </div>


            <p>推奨パレットは任意の PNG データストリーム内で <a class="chunk" href="#11sPLT">sPLT</a> チャンクとして、あるいは <a class="chunk"
                    href="#11PLTE">PLTE</a> チャンクとして（<a href="#3truecolour" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3truecolour-15">truecolor</a> の PNG データストリームにおいて）出現することがあります。いずれの場合も、推奨パレットは <a
                    href="#dfn-image-data" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-image-data-18">image
                    data</a> の本質的な一部ではありませんが、インデックスカラ表示ハードウェア上でイメージを表示するために使われ得ます。推奨パレットは <a href="#3truecolour"
                    class="internalDFN" data-link-type="dfn" id="ref-for-3truecolour-16">truecolor</a>
                ハードウェア上で動作するビューアには興味がないことがあります。</p>

            <p><a class="chunk" href="#11sPLT">sPLT</a> チャンクを用いて推奨パレットを提供する場合、エンコーダは周波数フィールドを
                すべてゼロ（未定義）にせず、パレットエントリの相対的重要性を示すために使用することが推奨されます。周波数値は「最近傍」カウント、すなわちディザを適用しない場合に各 RGBA
                パレットエントリがどれだけ使われるかの概算として最も容易に計算できます。（これらのカウントは推奨パレットを作る過程で「無料で」得られることが多いです。）推奨パレットは透明情報を含むため、合成されていないイメージに対して計算するべきです。
            </p>

            <p>インデックスカラー画像であっても、<a class="chunk" href="#11sPLT">sPLT</a> は表示可能色の少ないビューア向けの代替縮小パレットを定義するために使用できます。もし <a
                    class="chunk" href="#11PLTE">PLTE</a> が <a class="chunk" href="#11bKGD">bKGD</a> なしで <a
                    href="#3colourType" class="internalDFN" data-link-type="dfn" id="ref-for-3colourType-33">color
                    type</a> 6 のイメージに現れる場合、パレットがどのような状況で計算されたかは未定義です。</p>

            <p>truecolor PNG データストリームに推奨パレットを含める古い方法として <a class="chunk" href="#11PLTE">PLTE</a>
                チャンクを用いるものがあります。この方法を使うならヒストグラム（周波数）は別の <a class="chunk" href="#11hIST">hIST</a> チャンクに置くべきです。<a
                    class="chunk" href="#11PLTE">PLTE</a> チャンクは透明情報を含まないため、<a href="#3colourType" class="internalDFN"
                    data-link-type="dfn" id="ref-for-3colourType-34">color type</a> 6（<a
                    href="#dfn-truecolor-with-alpha" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-truecolor-with-alpha-5">truecolor with alpha</a>）の画像では、<a class="chunk"
                    href="#11bKGD">bKGD</a>
                チャンクが現れること、そしてパレットとヒストグラムは指定された背景色に対して合成された後の画像を基準に計算されることが推奨されます。この定義は、分数アルファ値を持つピクセルに対して有用なパレットエントリを生成するために必要です。結果のパレットはおそらく同じ背景色で画像を提示するビューアにのみ有用でしょう。<a
                    href="#dfn-png-editor" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-png-editor-4">PNG
                    エディタ</a> が <a class="chunk" href="#11bKGD">bKGD</a> を変更または削除する場合、パレットを削除または再計算することが推奨されます（<a
                    href="#3colourType" class="internalDFN" data-link-type="dfn" id="ref-for-3colourType-35">color
                    type</a>）。</p>

            <p><a href="#3colourType" class="internalDFN" data-link-type="dfn" id="ref-for-3colourType-36">color
                    type</a> 2（<a href="#3truecolour" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3truecolour-18">truecolor</a>）の画像に対しては、<a class="chunk" href="#11PLTE">PLTE</a> と <a
                    class="chunk" href="#11hIST">hIST</a> は透明色の指定を無視して RGB データのみを基準に計算することが推奨されます。もしデータストリームが透過を使っている（<a
                    class="chunk" href="#11tRNS">tRNS</a> を持つ）場合、ビューアは意図する背景色に合わせて生成されたパレットを容易に適応させることができます（<a
                    href="#13Histogram-and-suggested-palette-usage" class="sec-ref"><bdi class="secno">13.17
                    </bdi>Histogram and suggested palette usage</a> を参照）。</p>

            <p>推奨パレットを提供するにあたり、<a class="chunk" href="#11sPLT">sPLT</a> チャンクは <a class="chunk" href="#11PLTE">PLTE</a>
                チャンクより柔軟です：</p>


            <ol>
                <li><a class="chunk" href="#11sPLT">sPLT</a> では複数の推奨パレットを提供できます。PNG デコーダは名前やエントリ数に基づいて適切なパレットを選択できます。
                </li>

                <li>PNG データストリームが <a href="#3colourType" class="internalDFN" data-link-type="dfn"
                        id="ref-for-3colourType-37">color type</a> 6 の場合、<a class="chunk" href="#11PLTE">PLTE</a> チャンクは
                    <a class="chunk" href="#11bKGD">bKGD</a> 色に対して既に合成されたパレットを表すため、その背景色に対してのみ有用です。<a class="chunk"
                        href="#11sPLT">sPLT</a> は合成されていないパレットを提供し、デコーダが選ぶ背景に対して有用です。
                </li>

                <li><a class="chunk" href="#11sPLT">sPLT</a> は補助チャンクであるため、<a href="#dfn-png-editor" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-png-editor-5">PNG エディタ</a>
                    は未知の安全でないコピー不可チャンクを破棄することを強制されることなく推奨パレットを追加・修正できます。</li>

                <li><a class="chunk" href="#11sPLT">sPLT</a> はカラータイプ 0, 3, 4 の PNG データストリームにも許されますが、これらの場合 <a
                        class="chunk" href="#11PLTE">PLTE</a> は縮小パレットの提供には使えません。</li>

                <li><a class="chunk" href="#11sPLT">sPLT</a> には 256 を超えるエントリが現れることがあります。</li>
            </ol>

            <p><a class="chunk" href="#11sPLT">sPLT</a> を使う PNG エンコーダは、<a class="chunk" href="#11sPLT">sPLT</a>
                を認識しないデコーダとの互換性のために、<a class="chunk" href="#11PLTE">PLTE</a> と <a class="chunk" href="#11hIST">hIST</a>
                を併せて書き込むことを選べます。</p>
        </section>




        <section id="12Interlacing">
            <div class="header-wrapper">
                <h3 id="x12-6-interlacing"><bdi class="secno">12.6 </bdi>インターレース</h3><a class="self-link"
                    href="#12Interlacing" aria-label="Permalink for Section 12.6"></a>
            </div>


            <p>本仕様は 2 種類のインターレース方式（そのうち一つはインターレースなし）を定義します。インターレースはデコーダが画像をプログレッシブに表示するための便利な基盤を提供します（<a
                    href="#13Progressive-display" class="sec-ref"><bdi class="secno">13.10 </bdi>Interlacing and
                    progressive display</a> を参照）。</p>
        </section>


        <section id="12Filter-selection">
            <div class="header-wrapper">
                <h3 id="x12-7-filter-selection"><bdi class="secno">12.7 </bdi>フィルタ選択</h3><a class="self-link"
                    href="#12Filter-selection" aria-label="Permalink for Section 12.7"></a>
            </div>


            <p><a href="#3colourType" class="internalDFN" data-link-type="dfn" id="ref-for-3colourType-39">color
                    type</a> 3（インデックスカラー）の画像では、フィルタタイプ 0（None）が通常最も効果的です。色数が 256 以下のカラー画像はほとんど常に <a
                    href="#3indexedColour" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3indexedColour-17">indexed-color</a> 形式で保存されるべきであり、<a href="#3truecolour"
                    class="internalDFN" data-link-type="dfn" id="ref-for-3truecolour-19">truecolor</a>
                形式ははるかに大きくなる傾向があります。</p>

            <p>ビット深度が 8 未満の画像にもフィルタタイプ 0 が推奨されます。低ビット深度のグレースケール画像では、稀に画像をまず 8
                ビット表現へ展開してからフィルタを適用することでより良い圧縮が得られることがあります。</p>

            <p><a href="#3truecolour" class="internalDFN" data-link-type="dfn" id="ref-for-3truecolour-20">truecolor</a>
                および <a href="#dfn-greyscale" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-greyscale-14">greyscale</a> の画像では、5 種類のいずれのフィルタが最も効果的かは画像に依存します。固定フィルタを用いるなら Paeth
                フィルタが最も良いことが多いです。</p>

            <p><a href="#3truecolour" class="internalDFN" data-link-type="dfn" id="ref-for-3truecolour-21">truecolor</a>
                および <a href="#dfn-greyscale" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-greyscale-15">greyscale</a>
                画像の最高の圧縮を得るため、もし圧縮効率を速度より重視するなら、各スキャンラインごとにフィルタタイプを選ぶ適応フィルタリングが推奨されます。各画像はそれぞれ最適なフィルタの組合せを持ちます。エンコーダは全てのフィルタの組合せを試して最も圧縮されるものを見つけることもできますが、全探索が許容できない場合、次のような一般的ヒューリスティックが有効です：各スキャンラインについて
                5 種類のフィルタすべてを適用して、出力バイトの絶対値の和が最小となるフィルタを選びます（このテストでは出力バイトを符号付き差分として扱ってください）。この方法は単一の固定フィルタを選ぶより通常優れます。
            </p>

            <p>これらの推奨に基づくフィルタ適用は、本仕様で定義されたいずれのインターレース方式と組み合わせても効果的です。</p>
        </section>


        <section id="12Compression">
            <div class="header-wrapper">
                <h3 id="x12-8-compression"><bdi class="secno">12.8 </bdi>圧縮</h3><a class="self-link"
                    href="#12Compression" aria-label="Permalink for Section 12.8"></a>
            </div>


            <p>エンコーダは圧縮データストリームを任意に <a class="chunk" href="#11IDAT">IDAT</a> チャンクへ分割できます。（複数の <a class="chunk"
                    href="#11IDAT">IDAT</a> チャンクは、エンコーダが固定量のメモリで動作できるようにするために許可されています；通常チャンクサイズはエンコーダのバッファサイズに対応します。）各
                <a class="chunk" href="#11IDAT">IDAT</a> チャンクが 1 バイトのみのデータを含むような PNG データストリームも有効ですが、著しく無駄です。（<a
                    href="#zero-length-data">ゼロ長</a> の <a class="chunk" href="#11IDAT">IDAT</a> チャンクも有効ですが、さらに無駄です。）
            </p>
        </section>


        <section id="12Text-chunk-processing">
            <div class="header-wrapper">
                <h3 id="x12-9-text-chunk-processing"><bdi class="secno">12.9 </bdi>テキストチャンク処理</h3><a class="self-link"
                    href="#12Text-chunk-processing" aria-label="Permalink for Section 12.9"></a>
            </div>


            <p>各テキストチャンクには空でないキーワードを付ける必要があります。もし適切な説明がない場合は汎用キーワード "Comment"
                を使えます。ユーザ提供のキーワードを使う場合、エンコーダはそのキーワードがキーワードの制限に合致しているかをチェックすべきです。</p>

            <p><a class="chunk" href="#11iTXt">iTXt</a> チャンクは Unicode の UTF-8 エンコーディングを使うため任意の言語のテキストを格納できます。<a
                    class="chunk" href="#11tEXt">tEXt</a> および <a class="chunk" href="#11zTXt">zTXt</a> は Latin-1（ISO
                8859-1）を使い、これらのチャンクで使用できる文字の範囲を制限します。エンコーダは文字の範囲を広くしてデータ損失を避けるために <a class="chunk"
                    href="#11iTXt">iTXt</a> を <a class="chunk" href="#11tEXt">tEXt</a> や <a class="chunk"
                    href="#11zTXt">zTXt</a> より優先して使うべきです。エンコーダはローカルのレガシー文字エンコーディングを適切なエンコーディングへ変換してテキストを保存しなければなりません。
            </p>

            <p><a href="#11iTXt" class="chunk">iTXt</a> チャンクを作成する際、エンコーダは <a
                    href="https://encoding.spec.whatwg.org/#utf-8-encode">UTF-8 encode</a>（<cite><a
                        data-matched-text="[[[ENCODING]]]" href="https://encoding.spec.whatwg.org/">Encoding
                        Standard</a></cite>）に従うべきです。</p>

            <p>エンコーダは 79 個を超える Unicode の code point からなる単一行テキストの作成を思いとどまらせるべきで、読みやすさを促進するべきです。1024
                バイト未満のテキスト項目は非圧縮テキストチャンクで出力することが推奨されます。基本的なタイトルや作成者キーワードは非圧縮テキストチャンクで出力することが推奨されます。大きなテキストチャンクを <a
                    href="#dfn-image-data" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-image-data-19">画像データ</a> の後（すなわち <a class="chunk" href="#11IDAT">IDAT</a>
                チャンクの後）に置くと、状況によっては画像表示を速くできることがあります。小さなテキストチャンク（画像タイトルなど）は <a class="chunk" href="#11IDAT">IDAT</a>
                チャンクの前に置くことが推奨されます。</p>
        </section>




        <section id="12Chunk-processing">
            <div class="header-wrapper">
                <h3 id="x12-10-chunking"><bdi class="secno">12.10 </bdi>チャンク処理</h3><a class="self-link"
                    href="#12Chunk-processing" aria-label="Permalink for Section 12.10"></a>
            </div>



            <section id="12Use-of-private-chunks">
                <div class="header-wrapper">
                    <h4 id="x12-10-1-use-of-private-chunks"><bdi class="secno">12.10.1 </bdi>プライベートチャンクの使用</h4>
                    <a class="self-link" href="#12Use-of-private-chunks" aria-label="Permalink for Section 12.10.1"></a>
                </div>


                <p>エンコーダは、他のアプリケーションが理解する必要のない情報を保持するためにプライベートチャンクを使用しても <em class="rfc2119">MAY</em> です。</p>
            </section>


            <section id="12Private-type-and-method-codes">
                <div class="header-wrapper">
                    <h4 id="x12-10-2-use-of-non-reserved-field-values"><bdi class="secno">12.10.2 </bdi>非予約フィールド値の使用
                    </h4><a class="self-link" href="#12Private-type-and-method-codes"
                        aria-label="Permalink for Section 12.10.2"></a>
                </div>


                <p>エンコーダは実験的またはプライベート利用のために非予約フィールド値を使用しても <em class="rfc2119">MAY</em> です。</p>
            </section>


            <section id="12Ancillary">
                <div class="header-wrapper">
                    <h4 id="x12-10-3-ancillary-chunks"><bdi class="secno">12.10.3 </bdi>補助チャンク</h4><a class="self-link"
                        href="#12Ancillary" aria-label="Permalink for Section 12.10.3"></a>
                </div>


                <p>すべての補助チャンクは任意であり、エンコーダはそれらを書かなければならないわけではありません。しかし、情報が利用可能な場合は標準的な補助チャンクを書くことが推奨されます。</p>
            </section>
        </section>
    </section>




    <section id="13Decoders">
        <div class="header-wrapper">
            <h2 id="x13-png-decoders-and-viewers"><bdi class="secno">13. </bdi>PNG デコーダとビューア</h2><a class="self-link"
                href="#13Decoders" aria-label="Permalink for Section 13."></a>
        </div>



        <section class="introductory" id="13Introduction">
            <div class="header-wrapper">
                <h2 id="introduction-9">はじめに</h2><a class="self-link" href="#13Introduction"
                    aria-label="Permalink for this Section"></a>
            </div>


            <p>本節は PNG デコーダおよびビューアの振る舞いに関するいくつかの要件と推奨事項を示します。ビューアは復号された PNG
                イメージをユーザに提示します。ビューアとデコーダの振る舞いは密接に関連しているため、ここではデコーダとビューアを一緒に扱います。PNG
                デコーダに対する唯一の絶対的な要件は、前章で規定された形式に準拠する任意のデータストリームを正しく読み取ることができることです。ただし、通常は以下の追加の推奨事項に従うことでより良い結果が得られます。</p>

            <p>PNG デコーダは、本国際規格で明示的に定義された、ビット深度、<a href="#3colourType" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3colourType-40">color type</a>、圧縮方式、<a href="#3filter" class="internalDFN"
                    data-link-type="dfn" id="ref-for-3filter-13">filter
                    method</a>、およびインターレース方式のすべての有効な組合せをサポートしなければなりません。</p>
        </section>

        <section id="error-handling">
            <div class="header-wrapper">
                <h3 id="13Decoders.Errors"><bdi class="secno">13.1 </bdi>エラー処理</h3><a class="self-link"
                    href="#13Decoders.Errors" aria-label="Permalink for Section 13.1"></a>
            </div>




            <p>PNG データストリームのエラーは大きく二つのクラスに分かれます：伝送エラーと構文エラーです（<a href="#4Concepts.Errors" class="sec-ref"><bdi
                        class="secno">4.10 </bdi>Error handling</a> を参照）。</p>

            <p>伝送エラーの例としては、バイトコード 13 および/または 10
                がデータストリーム全体にわたって追加・削除・変換される「text」や「ascii」モードでの伝送、データストリームが切断される予期しない終了、あるいは記憶装置上の物理エラーでブロック（通常 512
                バイト単位）が乱れたりランダムな値になる場合などがあります。構文エラーの例としては、行フィルタの無効な値、無効な圧縮方式、無効なチャンク長、インデックス画像で最初の <a class="chunk"
                    href="#11IDAT">IDAT</a> チャンクの前に <a class="chunk" href="#11PLTE">PLTE</a> チャンクがないこと、あるいは複数の <a
                    class="chunk" href="#11gAMA">gAMA</a> チャンクの存在などがあります。PNG デコーダは次のようにエラーを処理するべきです：</p>


            <ol>
                <li>PNG シグネチャバイトや各チャンクの CRC を用いて、できるだけ早期にエラーを検出すること。デコーダは PNG シグネチャの全 8 バイトが正しいことを検証すべきです。次の 8
                    バイトが正しいチャンク長を持つ <a class="chunk" href="#11IHDR">IHDR</a>
                    チャンクで始まる場合、データストリームの整合性に対する追加の信頼が得られます。チャンクデータを処理する前に <abbr
                        title="Cyclic Redundancy Code">CRC</abbr> をチェックするべきです。ストリーミング PNG デコーダが大きな <a class="chunk"
                        href="#11IDAT">IDAT</a> チャンクを処理しているような場合は実用上難しいことがありますが、その場合はチャンク終端に到達した時点で <abbr
                        title="Cyclic Redundancy Code">CRC</abbr> をチェックすべきです。</li>

                <li>可能ならばエラーから回復し、そうでなければ優雅に失敗すること。画像処理にほとんど影響のないエラーは無視できる一方、重要なデータに影響するエラーはアプリケーションに適した方法で扱うべきです。</li>

                <li>回復可能なエラーを含め、エラーを説明する有用なメッセージを提供すること。</li>
            </ol>

            <p>この方針に関連する PNG
                チャンクのクラスは三種類あります。この分類における「未知のチャンク」とは、デコーダ作成者にとって真に型が不明なチャンク、あるいは作成者が扱いを既定の方法（デフォルトハンドリング）に任せたために「未知」と扱うことにしたチャンクを指します。他のチャンクは「既知のチャンク」と呼ばれます。この定義に基づく三つのクラスは次のとおりです：
            </p>


            <ol>
                <li>既知のチャンク。これは本仕様で定義されたすべてのクリティカルチャンク（<a class="chunk" href="#11IHDR">IHDR</a>, <a class="chunk"
                        href="#11PLTE">PLTE</a>, <a class="chunk" href="#11IDAT">IDAT</a>, <a class="chunk"
                        href="#11IEND">IEND</a>）を必ず含みます。</li>

                <li>未知のクリティカルチャンク（チャンクタイプの最初のバイトのビット5が 0）</li>

                <li>未知の補助（ancillary）チャンク（チャンクタイプの最初のバイトのビット5が 1）</li>
            </ol>

            <p>チャンク命名規約の説明は <a href="#5Chunk-naming-conventions" class="sec-ref"><bdi class="secno">5.4 </bdi>Chunk
                    naming conventions</a> を参照してください。</p>



            <p>PNG チャンクの型は、表示可能なイメージを取り出すために重要かどうか（<a class="chunk" href="#11IHDR">IHDR</a>, <a class="chunk"
                    href="#11PLTE">PLTE</a>, <a class="chunk" href="#11IDAT">IDAT</a>
                のように）あるいはデータストリーム構造を理解するために重要かどうか（<a class="chunk" href="#11IEND">IEND</a>
                のように）に応じて「critical」または「ancillary」に分類されます。これは特定の種類の重要度であり、あらゆるデコーダに必ずしも関連するとは限りません。例えば注釈（例えば著作権情報）を抽出するだけのプログラムは表示可能なイメージを必要としませんが、<a
                    href="https://encoding.spec.whatwg.org/#utf-8-decode">UTF-8 を正しくデコードする</a>べきです。別のデコーダは <a
                    class="chunk" href="#11tRNS">tRNS</a> や <a class="chunk" href="#11gAMA">gAMA</a>
                チャンクを実行上必須と考えるかもしれません。</p>

            <p>構文エラーは常に既知のチャンクに関するものです。未知チャンクの構文エラーは検出できないためです。PNG
                デコーダは状況と要件に応じて構文エラーが致命的（回復不能）かどうかを判断しなければなりません。例えば多くのデコーダは無効な <a class="chunk" href="#11IEND">IEND</a>
                チャンクを無視できます；テキスト抽出プログラムは <a class="chunk" href="#11IDAT">IDAT</a> の欠如を無視できます；画像ビューアはインデックス画像における空の <a
                    class="chunk" href="#11PLTE">PLTE</a> チャンクからは回復できませんが、<a href="#3truecolour" class="internalDFN"
                    data-link-type="dfn" id="ref-for-3truecolour-22">truecolor</a> 画像の無効な <a class="chunk"
                    href="#11PLTE">PLTE</a> を無視することはできます；アルファチャネルを抽出するプログラムは無効な <a class="chunk" href="#11gAMA">gAMA</a>
                を無視できますが、複数の <a class="chunk" href="#11tRNS">tRNS</a>
                があることを致命的なエラーと見なすかもしれません。構文エラー以外の異常な状況は次のように扱うべきです：</p>


            <ol>
                <li>未知の補助チャンクに遭遇することは決してエラーではありません。そのチャンクは単に無視できます。</li>

                <li>未知のクリティカルチャンクに遭遇することは、データストリームから画像を抽出しようとする任意のデコーダにとって致命的な状態です。クリティカルチャンクを無視したデコーダは、エンコーダが意図した画像を抽出したかどうかを判断できなくなります。
                </li>

                <li>PNG シグネチャ不一致、<abbr title="Cyclic Redundancy Code">CRC</abbr>
                    不一致、あるいは予期しないストリーム終端はデータストリームの破損を示し、致命的なエラーと見なすことができます。デコーダはデータストリームから何かを救出しようとすることもできますが、損傷の程度は不明です。
                </li>
            </ol>

            <p>致命的な状態が発生した場合、デコーダは直ちに失敗し、適切であればユーザにエラーを通知し、オプションとしてすでにユーザに表示されている <a href="#dfn-image-data"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-image-data-21">image data</a>
                の表示を継続すべきです（つまり「優雅に失敗」する）。アプリケーション全体が終了する必要はありません。</p>

            <p>致命的でないエラーが発生した場合、デコーダは適切であればユーザに警告を出し、エラーから回復して通常の処理を継続すべきです。</p>

            <p>インデックスカラ PNG をデコードする際に範囲外のインデックスが見つかった場合、その処理は歴史的にデコーダ間でばらつきがありました。<span
                    id="oor-index-black">ピクセルを不透明の黒として表示する</span>
                は一般的な回復手段であり、本仕様ではこれを必須とします。古い実装では挙動が異なるため、この振る舞いをエンコーダが前提とすることはできません。</p>

            <p>CRC を計算しないデコーダは、明らかな構文エラーを破損の兆候と解釈すべきです（<a href="#13Error-checking" class="sec-ref"><bdi
                        class="secno">13.2 </bdi>Error checking</a> も参照）。</p>

            <p>圧縮チャンク（<a class="chunk" href="#11IDAT">IDAT</a>, <a class="chunk" href="#11zTXt">zTXt</a>,
                <a class="chunk" href="#11iTXt">iTXt</a>, <a class="chunk"
                    href="#11iCCP">iCCP</a>）のエラーはバッファオーバーランにつながる可能性があります。<a href="#dfn-deflate" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-deflate-16">deflate</a> の伸長器を実装する者はこの可能性に備えるべきです。
            </p>

            <p><abbr title="Animated PNG">APNG</abbr>
                はデータストリームの全体が読み込まれる前にフレームを逐次表示できるように設計されています。したがって一部のエラーはアニメーションの途中まで検出されない可能性があります。いかなるエラーに遭遇した場合でも、デコーダは以後のすべてのフレームを破棄してアニメーションを停止し、静止画像の表示に戻ることを強く推奨します。アニメーションが開始する前にエラーを検出したデコーダは静止画像を表示すべきです。必要に応じてエラーメッセージをユーザに表示してもよいでしょう。
            </p>

            <p>デコーダは順序が乱れた <abbr title="Animated PNG">APNG</abbr> チャンクをエラーとして扱わなければなりません。<abbr
                    title="Animated PNG">APNG</abbr> 対応の <a href="#dfn-png-editor" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-png-editor-6">PNG editors</a> はシーケンス番号を用いて正しい順序に復元すべきです。</p>
        </section>


        <section id="13Error-checking">
            <div class="header-wrapper">
                <h3 id="x13-2-error-checking"><bdi class="secno">13.2 </bdi>エラー検査</h3><a class="self-link"
                    href="#13Error-checking" aria-label="Permalink for Section 13.2"></a>
            </div>


            <p>PNG のエラー処理方針は <a href="#13Decoders.Errors" class="sec-ref"><bdi class="secno">13.1 </bdi>Error
                    handling</a> に記述されています。</p>

            <p>未知のチャンク型は、それがクリティカルチャンクでない限りエラーとして扱ってはなりません。</p>

            <p>チャンク型の妥当性は、4 バイトすべてが 41-5A および 61-7A（16
                進）範囲内かどうかを確認することで判定できます；これは未認識チャンク型に対してのみ行えばよいことに注意してください。もし総データストリームサイズが（ファイルシステム情報や HTTP
                プロトコル等から）既知であれば、チャンク長の妥当性もチェックできます。CRC
                をチェックしない場合、バイトの欠落／追加や誤ったチャンク長によりデコーダが同期を失い、以後のデータをチャンクヘッダと誤解する可能性があります。</p>

            <p>既知長のチャンク（例えば <a class="chunk"
                    href="#11IHDR">IHDR</a>）に対しては、予期しないチャンク長をエラーとして扱うべきです。本仕様の将来の拡張では既存チャンクへ新フィールドを追加するのではなく、新しいチャンク型を追加して新情報を運ぶ設計となります。
            </p>

            <p>既知チャンクのフィールドにおける予期しない値（例えば <a class="chunk" href="#11IHDR">IHDR</a>
                の圧縮方式フィールドでの未確認値）は検出されエラーとして扱われるべきです。ただし、予期しないフィールド値は <strong>クリティカル</strong>
                なチャンクでのみ致命的なエラーとして扱うことが推奨されます。補助チャンクの予期しない値は、そのチャンク全体を未知のチャンク型と同様に無視することで扱うことができます（この推奨はチャンクの <abbr
                    title="Cyclic Redundancy Code">CRC</abbr> が検証済みであることを前提とします。CRC
                をチェックしないデコーダでは、予期しない値を破損したデータストリームの兆候として扱う方が安全です）。</p>

            <p>標準的な PNG 画像は圧縮方式 0 で圧縮されなければなりません。<a class="chunk" href="#11IHDR">IHDR</a>
                チャンクの圧縮方式フィールドは将来の標準化や独自拡張のために用意されています。デコーダはこのバイトをチェックし、未認識のコードであればエラーを報告すべきです。詳細は <a
                    href="#10Compression" class="sec-ref"><bdi class="secno">10. </bdi>Compression</a> を参照してください。</p>
        </section>


        <section id="13Security-considerations">
            <div class="header-wrapper">
                <h3 id="x13-3-security-considerations"><bdi class="secno">13.3 </bdi>セキュリティに関する考慮</h3><a
                    class="self-link" href="#13Security-considerations" aria-label="Permalink for Section 13.3"></a>
            </div>


            <p>PNG データストリームは明示的に型付けされたチャンクの集合で構成されます。仕様で内容が定義されたチャンクでも、実際には任意のデータ（悪意のあるコードを含む可能性）を含むことがあり得ます。同様に <a
                    class="chunk" href="#11IEND">IEND</a> チャンクの後にあるデータも任意のものであり、悪意あるコードを含む場合があります。そのような悪意あるコードが PNG
                画像のデコードの結果として受信側のコンピュータ上で実行されるという既知のリスクはありません。しかしながら悪意のあるアプリケーションが無害に見える画像ファイル内にコードを隠し、その後それを実行する可能性はあります。
            </p>

            <p>将来のチャンク型に関連する可能性のあるセキュリティリスクは現時点で特定できません。将来の公開チャンクを定義する際にはセキュリティ問題が考慮されます。未知または未実装のチャンク型には追加のセキュリティリスクはありません。なぜならそのようなチャンクは無視されるか、最大でも別の
                PNG データストリームへコピーされるだけだからです。</p>

            <p><a class="chunk" href="#11iTXt">iTXt</a>, <a class="chunk" href="#11tEXt">tEXt</a>, <a class="chunk"
                    href="#11zTXt">zTXt</a> チャンクはキーワードと表示用のプレーンテキストを含みます。<a class="chunk" href="#11iCCP">iCCP</a> および <a
                    class="chunk" href="#11sPLT">sPLT</a> もキーワードを含み、表示用テキストです。デコーダがこれらのテキストを制御文字、特に
                ESC（エスケープ）文字をフィルタリングせずに表示すると、一部のシステムや端末で望ましくない動作や安全上の問題を引き起こす可能性があります。デコーダはこのリスクを避けるために制御文字を除去することを推奨します；詳細は
                <a href="#13Text-chunk-processing" class="sec-ref"><bdi class="secno">13.7 </bdi>Text chunk
                    processing</a> を参照してください。
            </p>

            <p><a class="chunk" href="#eXIf">eXIf</a> チャンクについては、Exif 仕様 [<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-cipa-dc-008"
                        title="Exchangeable image file format for digital still cameras: Exif Version 2.32">CIPA-DC-008</a></cite>]
                において、タグの「value offset」ポインタが実際にファイル内の有効なアドレスを指すべきという明示的な要件は含まれていません。この要件は暗黙的に示唆されるのみです（Exif IFD
                構造を説明するパラグラフ 4.6.2 を参照）。いずれにせよ、デコーダは無効なポインタに遭遇する可能性に備え、それらを適切に処理するべきです。</p>

            <p>すべてのチャンクは長さフィールドで始まるため、バッファオーバーフローを試みるような不正なチャンクに対して脆弱でないデコーダを書くのが容易になります。各チャンク末尾の <abbr
                    title="Cyclic Redundancy Code">CRC</abbr> は偶発的な破損に対する強力な防御手段を提供します。PNG
                シグネチャバイトは一般的なファイル伝送エラーを早期に検出するためのものです。</p>

            <p>CRC をチェックしないデコーダはデータ破損に晒される可能性があります。その唯一のありそうな結果は画像内のピクセル表示の誤りです。もっと悪い事態としては、<a class="chunk"
                    href="#11IHDR">IHDR</a> チャンクの CRC をチェックせず、幅や高さフィールドが破損していると重大な問題が発生することがあります。詳細は <a
                    href="#13Error-checking" class="sec-ref"><bdi class="secno">13.2 </bdi>Error checking</a> を参照してください。
            </p>

            <p>不適切に書かれたデコーダはチャンクが極めて大きく（最大 2<sup>31</sup>-1
                バイト）なり得ることからバッファオーバーフローの対象となるかもしれません。しかし、適切に書かれたデコーダは大きなチャンクを問題なく扱います。</p>
        </section>

        <section id="Privacy-considerations">
            <div class="header-wrapper">
                <h3 id="x13-4-privacy-considerations"><bdi class="secno">13.4 </bdi>プライバシーに関する考慮</h3><a
                    class="self-link" href="#Privacy-considerations" aria-label="Permalink for Section 13.4"></a>
            </div>


            <p>一部の画像編集ツールは歴史的に、編集領域のアルファチャネルをゼロに設定するだけで実際の画像データを削除していないまま機密情報を抹消したつもりになることがありました。そのような画像を見た目だけで信頼すると、実際の画像データが容易に復元され得るためプライバシーリスクがあります。
            </p>

            <p>同様に、一部の画像編集ツールは <span class="chunk">IHDR</span>
                の幅と高さを書き換えることで切り取り（clipping）を行い、画像データ自体を再エンコードしないため、新しい幅と高さの外側に元のデータが残り復元される可能性があります。</p>

            <p><span class="chunk">eXIf</span> チャンクを含む画像は、自動的に付加されるデータ（例えば写真の GPS 座標）を含んでいることがあり、ユーザが PNG
                にそのようなデータが含まれていることに気づいていないとプライバシー上のリスクになり得ます。（Exif を含む他の画像形式、例えば JPEG/JFIF も同様のリスクがあります。）</p>
        </section>

        <section id="13Chunking">
            <div class="header-wrapper">
                <h3 id="x13-5-chunking"><bdi class="secno">13.5 </bdi>チャンク処理</h3><a class="self-link" href="#13Chunking"
                    aria-label="Permalink for Section 13.5"></a>
            </div>


            <p>デコーダはチャンク型を単純な 4 バイトのリテラル比較で認識しなければなりません；チャンク型に対して大文字小文字変換を行うのは誤りです。補助ビットが 1
                の未知チャンクに遭遇したデコーダは安全にそのチャンクを無視して画像表示を続行できます。補助ビットが
                0（クリティカル）である未知チャンクに遭遇した画像抽出を試みるデコーダは、その画像に安全に解釈できない情報が含まれていることをユーザに示すべきです。</p>

            <p>デコーダは未知のチャンク型の性質を指定されたビットを数値的にテストすることで検証すべきです。文字が大文字か小文字かをテストするのは非効率であり、ロケール特有の大文字小文字定義を用いた場合に誤りとなることがあります。
            </p>

            <p>予約ビットが 1 に設定されている場合はエラーを報告すべきではありません。将来の PNG
                仕様でこのビットに意味が定義される可能性があるためです。このビットがセットされたチャンクは他の未知チャンク型と同様に扱えば十分です。</p>

            <p>チャンク型のプライベートビットは機能的な意味を持たず、W3C によって定義されたチャンクと個別定義のチャンクの衝突を避けるために使用されるものであるため、デコーダはこれをテストする必要はありません。</p>

            <p>すべての補助チャンクは任意です；デコーダはそれらを無視できます。しかし、適切かつ可能であればデコーダはこれらのチャンクを解釈することが奨励されます。</p>
        </section>


        <section id="13Pixel-dimensions">
            <div class="header-wrapper">
                <h3 id="x13-6-pixel-dimensions"><bdi class="secno">13.6 </bdi>ピクセル寸法</h3><a class="self-link"
                    href="#13Pixel-dimensions" aria-label="Permalink for Section 13.6"></a>
            </div>


            <p>非正方ピクセルは表現可能です（<a href="#11pHYs" class="sec-ref"><bdi class="secno">11.3.4.3
                    </bdi><span class="chunk">pHYs</span> Physical pixel dimensions</a>
                を参照）が、ビューアがそれを考慮する義務はありません；ビューアは任意の PNG データストリームをピクセルが正方形であるかのように提示できます。</p>

            <p>表示のピクセルアスペクト比が PNG データストリームで定義された物理ピクセル寸法のアスペクト比と異なる場合、ビューアは適切な表示のために画像をリスケールすることが強く推奨されます。</p>

            <p><a class="chunk" href="#11pHYs">pHYs</a> チャンクの unit specifier が 0（単位不明）の場合、デコーダの挙動は 2 つの pixels-per-unit
                値の比に依存してもよいですが、その大きさには依存すべきではありません。例えば <a class="chunk" href="#11pHYs">pHYs</a> が
                <code>(ppuX, ppuY, unit) = (2, 1, 0)</code> を含む場合、それは <code>(1000, 500, 0)</code>
                を含むものと同等です；どちらも画像のピクセルが幅の 2 倍の高さを持つことを示す有効な指示です。
            </p>

            <p>ビューアが画像と表示装置のピクセルアスペクト比の違いを扱う一つの合理的な方法は、画像を水平方向か垂直方向のどちらか一方に拡大することです。スケール係数は次の浮動小数点計算で得られるかもしれません：</p>

            <pre><code aria-busy="false" class="hljs">image_ratio = pHYs_ppuY / pHYs_ppuX
display_ratio = display_ppuY / display_ppuX
scale_factor_X = max(1.0, image_ratio/display_ratio)
scale_factor_Y = max(1.0, display_ratio/image_ratio)</code></pre>
            <p>面積維持など他の方法も合理的であり、<a class="chunk" href="#11pHYs">pHYs</a>
                チャンクを無視することも許容されるため、作成者はすべてのビューアがこのスケーリング方法を使うと仮定すべきではありません。</p>

            <p>ピクセルアスペクト比の補正に加えて、ビューアは水平方向および垂直方向の追加スケーリングを行う理由があるかもしれません。例えばディスプレイに収まらないほど大きな画像を縮小したり、高解像度プリンタへ送る際に表示と同じ物理寸法に見えるよう拡大する場合などです。
            </p>
        </section>


        <section id="13Text-chunk-processing">
            <div class="header-wrapper">
                <h3 id="x13-7-text-chunk-processing"><bdi class="secno">13.7 </bdi>テキストチャンク処理</h3><a class="self-link"
                    href="#13Text-chunk-processing" aria-label="Permalink for Section 13.7"></a>
            </div>


            <p>現実的であれば、PNG デコーダはデータストリーム内で見つかったすべての <a class="chunk" href="#11iTXt">iTXt</a>、<a class="chunk"
                    href="#11tEXt">tEXt</a>、および <a class="chunk" href="#11zTXt">zTXt</a>
                チャンクをユーザに表示する手段を持つべきです。デコーダが特定のテキストキーワードを認識しなくても、ユーザはそれを理解できるかもしれません。</p>

            <p><a class="chunk" href="#11tEXt">tEXt</a> および <a class="chunk" href="#11zTXt">zTXt</a>
                を処理する際、デコーダは許可されていない文字に遭遇する可能性があります。一部は安全に表示できます（例えば TAB, FF, CR、16 進で 09, 0C, 0D）が、特に ESC 文字（16 進
                1B）は表示ハードウェアやソフトウェアに予期せぬ動作を引き起こす可能性があり安全上の危険をもたらすかもしれません。デコーダは <a class="chunk" href="#11tEXt">tEXt</a>
                または <a class="chunk" href="#11zTXt">zTXt</a> で見つかった非 Latin-1 文字（改行および場合によっては TAB
                を除く）を直接表示しようとすべきではありません。代わりにそれらを無視するか、"<code>\nnn</code>" のような可視表記で表示するべきです。詳細は <a
                    href="#13Security-considerations" class="sec-ref"><bdi class="secno">13.3 </bdi>Security
                    considerations</a> を参照してください。</p>

            <p><a href="#11iTXt" class="chunk">iTXt</a> チャンクを処理する際、デコーダは <a
                    href="https://encoding.spec.whatwg.org/#utf-8-decode">UTF-8 decode</a>（<cite><a
                        data-matched-text="[[[ENCODING]]]" href="https://encoding.spec.whatwg.org/">Encoding
                        Standard</a></cite>）に従うべきです。</p>

            <p>エンコーダは改行を linefeed（16 進 0A）で表すことが推奨されていますが、デコーダはこれに依存すべきではありません。CR, LF, CR-LF
                といった一般的な改行の組合せすべてを認識し、それぞれを単一の改行として表示するのが最良です。TAB は 8 の倍数の列に整列するために適切な数のスペースに展開できます。</p>

            <p>非 Latin-1 のレガシー文字エンコーディングを持つシステム上で動作するデコーダは、Latin-1
                文字が正しく表示されるよう文字コードをリマップすべきです。サポートされない文字はシステムに適した置換文字（例えば U+FFFD REPLACEMENT CHARACTER、U+003F QUESTION
                MARK、または U+001A SUB）に置き換えるか、"<code>\nn</code>"
                のような可視表記にマップするべきです。文字はデコードシステム上で印字可能な文字である場合にのみ表示されるべきです。一部のバイト値はデコードシステム上で制御文字として解釈され得るため、そのようなシステム上で動作するデコーダはこれらの制御文字を表示しないべきです（セキュリティのため）。
            </p>

            <p>デコーダは、エンコーダが 79 文字を超える行を作らないよう推奨されているにもかかわらず、改行間に任意の数の印字文字を含むテキストチャンクを表示できる用意をしておくべきです。</p>
        </section>


        <section id="13Decompression">
            <div class="header-wrapper">
                <h3 id="x13-8-decompression"><bdi class="secno">13.8 </bdi>伸長（Decompression）</h3><a class="self-link"
                    href="#13Decompression" aria-label="Permalink for Section 13.8"></a>
            </div>


            <p>本仕様で用いる圧縮技術は、伸長を開始する前に圧縮データストリーム全体が利用可能であることを要求しません。したがって伸長済みデータ全体が得られる前に表示を開始できます。将来の本仕様のバージョンで用いられる一般的な圧縮手法がこの性質を失う可能性は極めて低いと考えられます。
            </p>

            <p><a class="chunk" href="#11IDAT">IDAT</a> チャンク境界は意味的な重要性を持たず、圧縮データストリームの任意の点で現れ得ることを強調することが重要です。<a
                    href="#dfn-image-data" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-image-data-22">image
                    data</a>（例えばスキャンライン境界）と <a href="#dfn-deflate" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-deflate-17">deflate</a> ブロック境界や <a class="chunk" href="#11IDAT">IDAT</a>
                チャンク境界との間に必須の相関はありません。完全な <a href="#dfn-image-data" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-image-data-23">image data</a> は、複数の <a href="#dfn-zlib" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-zlib-18">zlib</a> データストリームとして表現され、それがいくつかの <a class="chunk"
                    href="#11IDAT">IDAT</a>
                チャンクに格納されます；デコーダがこれ以上のものを仮定するのは誤りです。エンコーダの実装によってはこれらの構造が関連づけられる場合もありますが、デコーダはそれに依存してはなりません。</p>
        </section>


        <section id="13Filtering">
            <div class="header-wrapper">
                <h3 id="x13-9-filtering"><bdi class="secno">13.9 </bdi>フィルタ処理</h3><a class="self-link"
                    href="#13Filtering" aria-label="Permalink for Section 13.9"></a>
            </div>


            <p>フィルタの効果を逆にするために、デコーダは同じ行の前のピクセル、前行の現在ピクセルのすぐ上のピクセル、および前行の左隣のピクセルの復号済み値を使う必要がある場合があります。これはデコーダが常に少なくとも 1
                行分の <a href="#dfn-image-data" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-image-data-24">image data</a>
                を保持しておく必要があることを意味します。いくつかのフィルタタイプは前行を参照しないものもありますが、次の行がその参照を使うかもしれないため、デコーダは各スキャンラインをデコードするごとに格納する必要があります。詳細は
                <a href="#7Filtering" class="sec-ref"><bdi class="secno">7.3 </bdi>Filtering</a> を参照してください。
            </p>
        </section>


        <section id="13Progressive-display">
            <div class="header-wrapper">
                <h3 id="x13-10-interlacing-and-progressive-display"><bdi class="secno">13.10 </bdi>インターレースと逐次表示</h3><a
                    class="self-link" href="#13Progressive-display" aria-label="Permalink for Section 13.10"></a>
            </div>


            <p>デコーダはインターレースされた画像を読み取ることが要求されます。参照画像が 5 列未満または 5
                行未満の場合、いくつかのパスは空になります。エンコーダとデコーダはこのケースを正しく扱わなければなりません。特に、フィルタタイプバイトは非空のスキャンラインにのみ関連付けられており、空の縮約画像にはフィルタタイプバイトは存在しません。
            </p>

            <p>低速伝送リンク上で画像を受信する場合、ビューアはインターレース画像を段階的に表示することで知覚的性能を改善できます。これは各縮約画像を受信するごとに、これまで受信したデータに基づく完全画像の近似を表示することを意味します。受信した各ピクセルをまだ伝送されていない右下方向の位置を覆う長方形に拡大して塗りつぶすという単純で見栄えの良い効果が得られます。この処理は以下の
                ISO C コードで説明できます [<cite><a class="bibref" data-link-type="biblio" href="#bib-iso_9899"
                        title="ISO/IEC 9899:2018 Information technology — Programming languages — C">ISO_9899</a></cite>]：
            </p>

            <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-comment">/*
    variables declared and initialized elsewhere in the code:
        height, width
    functions or macros defined elsewhere in the code:
        visit(), min()
 */</span>

int starting_row[<span class="hljs-number">7</span>]  = { <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span> };
int starting_col[<span class="hljs-number">7</span>]  = { <span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span> };
int row_increment[<span class="hljs-number">7</span>] = { <span class="hljs-number">8</span>, <span class="hljs-number">8</span>, <span class="hljs-number">8</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span> };
int col_increment[<span class="hljs-number">7</span>] = { <span class="hljs-number">8</span>, <span class="hljs-number">8</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span> };
int block_height[<span class="hljs-number">7</span>]  = { <span class="hljs-number">8</span>, <span class="hljs-number">8</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span> };
int block_width[<span class="hljs-number">7</span>]   = { <span class="hljs-number">8</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span> };

int pass;
long row, col;

pass = <span class="hljs-number">0</span>;
<span class="hljs-keyword">while</span> (pass &lt; <span class="hljs-number">7</span>)
{
    row = starting_row[pass];
    <span class="hljs-keyword">while</span> (row &lt; height)
    {
        col = starting_col[pass];
        <span class="hljs-keyword">while</span> (col &lt; width)
        {
            <span class="hljs-title function_">visit</span>(row, col,
                  <span class="hljs-title function_">min</span>(block_height[pass], height - row),
                  <span class="hljs-title function_">min</span>(block_width[pass], width - col));
            col = col + col_increment[pass];
        }
        row = row + row_increment[pass];
    }
    pass = pass + <span class="hljs-number">1</span>;
}</code></pre>
            <p>関数 <code>visit(row,column,height,width)</code> は次に送られてくるピクセルを取得し、その色で指定された高さと幅の長方形（左上隅が指定の行と列）を塗ります。row と
                column は左上隅を 0,0 とした測度であることに注意してください。</p>

            <p>ビューアが受信した画像を背景画像と合成している場合、受信したピクセル位置だけを描画する方が都合がよいかもしれません（<code>visit()</code>
                は指定の行と列のピクセルのみを設定し、長方形全体を塗るわけではありません）。これにより新しい画像が徐々に古い画像を置き換える「フェードイン」効果が得られます。この方法の利点は各ピクセルが置き換えられるたびに適切なアルファまたは透過処理が行えることです。上で説明したように長方形を塗る方法は、後に受信されるピクセルが完全または部分的に透明である場合に必要となる背景画像のピクセルを上書きしてしまい得ます。これは背景画像がオフスクリーンに保存されていない場合にのみ問題になります。
            </p>
        </section>


        <section id="13Truecolour-image-handling">
            <div class="header-wrapper">
                <h3 id="x13-11-truecolor-image-handling"><bdi class="secno">13.11 </bdi>Truecolor イメージの扱い</h3><a
                    class="self-link" href="#13Truecolour-image-handling" aria-label="Permalink for Section 13.11"></a>
            </div>


            <p>PNG のユニバーサルな交換性という目標を達成するために、デコーダはすべての種類の PNG イメージを受け入れなければなりません：<a href="#3indexedColour"
                    class="internalDFN" data-link-type="dfn" id="ref-for-3indexedColour-18">indexed-color</a>、
                <a href="#3truecolour" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3truecolour-23">truecolor</a>、および <a href="#dfn-greyscale" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-greyscale-16">greyscale</a>。indexed-color
                表示ハードウェア上で動作するビューアは、表示のために <a href="#3truecolour" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3truecolour-24">truecolor</a> イメージを indexed-color に縮約できる必要があります。この処理は「カラ量子化（color
                quantization）」と呼ばれます。
            </p>

            <p>カラ量子化の簡単で高速な方法は、イメージを固定パレットへ縮約することです。均一な色間隔のパレット（いわゆる「カラキューブ」）はピクセルごとの計算を最小にするために通常用いられます。写真のような画像の場合、滑らかなグラデーションに不自然な段差が生じないようにディザリングが推奨されますが、ディザリングは雑味（graininess）を導入するため好ましくない場合もあります。
            </p>

            <p>レンダリング品質は、画像固有に選ばれたパレットを使うことで大幅に改善され得ます。というのも、カラキューブには特定の画像で使われないエントリが多く含まれることが一般的だからです。この方法では、まずパレットを選ぶ作業、次に個々のピクセルを最も近い色にマップする作業が必要になり、作業量が増えます。PNG
                ではエンコーダが推奨パレットを提供できるようになっていますが、すべてのエンコーダがそれを行うわけではなく、提供された推奨パレットが不適切である可能性もあります（色数が多すぎる／少なすぎるなど）。したがって、高品質なビューアはパレット選択ルーチンを持っている必要があります。個々のピクセルを十分な速度でパレットエントリへマップするためには、大きなルックアップテーブルが通常もっとも実行可能な方法です。
            </p>

            <p>カラ量子化の実装は多数存在します。PNG のサンプル実装である libpng (<a
                    href="http://www.libpng.org/pub/png/libpng.html"><code>http://www.libpng.org/pub/png/libpng.html</code></a>)
                にはこの目的のためのコードが含まれています。</p>
        </section>


        <section id="13Sample-depth-rescaling">
            <div class="header-wrapper">
                <h3 id="x13-12-sample-depth-rescaling"><bdi class="secno">13.12 </bdi>サンプル深度の再スケーリング</h3><a
                    class="self-link" href="#13Sample-depth-rescaling" aria-label="Permalink for Section 13.12"></a>
            </div>


            <p>デコーダは表示のために PNG データをより低いサンプル深度（データ精度）へ縮小したい場合があります。例えば、16 ビットデータは現在のほとんどの表示ハードウェアで利用するために 8
                ビット深度へ縮小する必要があります。8 ビットから 5 ビットへの縮小も一般的です。</p>

            <p>最も正確なスケーリングは次の線形式で得られます</p>

            <p><code>output = floor((input * MAXOUTSAMPLE / MAXINSAMPLE) + 0.5)</code>
            </p>

            <p>ここで</p>

            <p><code>MAXINSAMPLE = (2<sup>sampledepth</sup>)-1</code><br>
                <code>MAXOUTSAMPLE = (2<sup>desired_sampledepth</sup>)-1</code>
            </p>

            <p>わずかに精度が落ちる変換として、単に <code>(sampledepth - desired_sampledepth)</code> ビットだけ右シフトする方法があります。例えば 16 ビットサンプルを 8
                ビットに縮小するには低位バイトを破棄できます。多くの状況ではシフト法は表示目的には十分な精度を持ち、速度面で有利です。（ただしもし <a href="#dfn-gamma"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gamma-13">gamma</a> 補正が行われる場合、サンプルの再スケーリングは
                <a href="#dfn-gamma" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gamma-14">gamma</a>
                補正のルックアップテーブルへ統合でき、これは <a href="#13Decoder-gamma-handling" class="sec-ref"><bdi class="secno">13.13
                    </bdi>Decoder gamma handling</a> に示されています。）
            </p>

            <p>デコーダがサンプルを拡大する必要がある場合（例えば <a href="#dfn-frame_buffer" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-frame-buffer-2">frame buffer</a> のサンプル深度が PNG イメージより大きい場合）、<a
                    href="#12Sample-depth-scaling" class="sec-ref"><bdi class="secno">12.4 </bdi>Sample depth
                    scaling</a> に記述されたように線形スケーリングまたは左ビット複製（left-bit-replication）を使用するべきです。</p>

            <p><a class="chunk" href="#11sBIT">sBIT</a> チャンクが存在する場合、参照用の <a href="#dfn-image-data" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-image-data-25">image data</a> は <a class="chunk"
                    href="#11sBIT">sBIT</a>
                で指定されたサンプル深度へ右シフトして復元できます。線形スケーリングは必ずしも元のデータを再現しないことに注意してください。なぜならエンコーダが上向きスケーリングに線形スケーリングを使ったと要求されているわけではないからです。しかしエンコーダは高位ビットを保つ方法を用いることが要求されているため、右シフトは常に機能します。これはシフト法が線形スケーリングより正確であると言える唯一のケースです。デコーダは
                <a class="chunk" href="#11sBIT">sBIT</a> を無視してもかまいません；格納された画像は <a class="chunk" href="#11IHDR">IHDR</a>
                チャンクで示されたサンプル深度の有効な PNG データストリームです。しかし <a class="chunk" href="#11sBIT">sBIT</a>
                を使って表示用にスケーリングする前の元のサンプルを回復することは、<a class="chunk" href="#11sBIT">sBIT</a> を無視するよりもより正確な表示をもたらすことが多いです。
            </p>

            <p id="tRNS-compare-exactly"><a class="chunk" href="#11tRNS">tRNS</a>
                チャンク値とピクセル値を比較して透過ピクセルを検出する場合、比較は正確に行われなければなりません。したがって、透過ピクセル検出はサンプル精度を下げる前に行わなければなりません。</p>
        </section>


        <section id="13Decoder-gamma-handling">
            <div class="header-wrapper">
                <h3 id="x13-13-decoder-gamma-handling"><bdi class="secno">13.13 </bdi>デコーダのガンマ処理</h3><a
                    class="self-link" href="#13Decoder-gamma-handling" aria-label="Permalink for Section 13.13"></a>
            </div>


            <p>ガンマに関する簡単な導入は <a href="#C-GammaAppendix" class="sec-ref"><bdi class="secno">C. </bdi>Gamma and
                    chromaticity</a> を参照してください。</p>

            <p>フルカラーマネジメント対応のビューアは、ここで述べるよりも高度な計算を行うでしょう。</p>

            <p>正しいトーン再現を行うために、表示プログラムはサンプルと表示出力との関係、および表示システムの <a href="#dfn-transfer-function" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-transfer-function-17">transfer function</a>
                を考慮する必要があります。これは次のように計算することで行えます：</p>

            <p><code>sample = integer_sample / (2<sup>sampledepth</sup> - 1.0)<br>
      display_output = sample<sup>1.0/gamma</sup><br>
      display_input = inverse_display_transfer(display_output)<br>
      framebuf_sample = floor((display_input * MAX_FRAMEBUF_SAMPLE)+0.5)</code>
            </p>

            <p>ここで <var>integer_sample</var> はデータストリームからのサンプル値、<var>framebuf_sample</var> は <a href="#dfn-frame-buffer"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-frame-buffer-3">frame buffer</a>
                に書き込む値、<var>MAX_FRAMEBUF_SAMPLE</var> はフレームバッファサンプルの最大値（8 ビットなら 255、5 ビットなら 31 など）です。第一行は整数サンプルを 0.0〜1.0
                範囲の正規化された浮動小数点値へ変換します。第二行は望ましい表示出力強度に比例する値へ変換し、第三行は表示システムの <a href="#dfn-transfer-function"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-transfer-function-18">transfer function</a>
                を考慮し、第四行は整数のフレームバッファサンプルへ変換します。0 を正のべき乗に上げると 0 になります。</p>

            <p>第二行と第三行の間にステップを挿入して、実際の視聴条件と参照視聴条件の差を補正することもできます。しかしこの補正は veiling glare、black
                mapping、色の見え方モデルなどを考慮する必要があり、べき関数だけでは良く近似できません。ここではそのような計算は記述しません。視聴条件を無視しても通常誤差は小さいです。</p>

            <p>表示の <a href="#dfn-transfer-function" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-transfer-function-19">transfer function</a> は通常、指数 <var>display_exponent</var>
                によるべき関数で近似できます。その場合、第二行と第三行は次のようにまとめられます：</p>

            <p><code>display_input = sample<sup>1.0/(gamma * display_exponent)</sup> = sample<sup>decoding_exponent</sup></code>
            </p>

            <p>これによりべき乗計算を 1 回だけ行えばよくなります。カラー画像ではこの計算を R, G, B 各々について行います。</p>

            <p><a class="chunk" href="#11gAMA">gAMA</a> チャンクから <a href="#dfn-gamma-value" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-gamma-value-18">gamma value</a>
                を直接取得できます。あるいはアプリケーションでユーザが表示外観を調整できるようにして <a href="#dfn-gamma-value" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-gamma-value-19">gamma value</a>
                に影響を与えられるようにすることも可能です。例えば、ユーザはデフォルト 1.0 のパラメータ <var>user_exponent</var> を手動で設定し、アプリケーションは次のように設定できます：
            </p>

            <pre><code aria-busy="false" class="hljs abnf"><span class="hljs-attribute">gamma</span> <span class="hljs-operator">=</span> gamma_from_file / user_exponent
decoding_exponent <span class="hljs-operator">=</span> <span class="hljs-number">1.0</span> / (gamma * display_exponent)
   <span class="hljs-operator">=</span> user_exponent / (gamma_from_file * display_exponent)</code></pre>
            <p>ユーザは中間階調を暗くしたいときは <var>user_exponent</var> を 1 より大きく、明るくしたいときは 1 より小さく設定します。</p>

            <p><a class="chunk" href="#11gAMA">gAMA</a>
                チャンクにゼロが入っていると意味を成しませんが、誤って出現することがあります。デコーダはそれを無視し、エディタはそれを破棄してユーザに警告してもよいでしょう。</p>

            <p>すべてのピクセルごとに超越関数を計算する必要はありません。代わりに、各可能なサンプル値に対して正しい出力値を与えるルックアップテーブルを事前に作成できます。これは 8 ビット精度なら各イメージにつき 256
                回の計算だけで済みます。インデックスカラー画像では、パレットの一度だけの補正で十分です（画像が透過を使っていて非一様な背景に表示する場合を除く）。</p>

            <p>浮動小数点計算が使えない場合でも、<a href="#dfn-gamma" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-gamma-16">gamma</a> 補正テーブルは整数演算と事前計算した対数表を使って作成できます。例コードは [<cite><a class="bibref"
                        data-link-type="biblio" href="#bib-png-extensions"
                        title="Extensions to the PNG Third Edition Specification, Version 1.6.0">PNG-EXTENSIONS</a></cite>]
                にあります。</p>

            <p>入力イメージの <a href="#dfn-gamma-value" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-gamma-value-20">gamma value</a> が不明な場合（<a class="chunk" href="#11gAMA">gAMA</a>、<a
                    class="chunk" href="#srgb-standard-colour-space">sRGB</a>、および <a class="chunk"
                    href="#11iCCP">iCCP</a> がすべてない場合）、単体の画像ビューアは妥当と思われるデフォルトの <a href="#dfn-gamma-value"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gamma-value-21">gamma value</a>
                を選ぶべきですが、結果が暗すぎる／明るすぎる場合にはユーザが新しい値を選べるようにすべきです。デフォルトの <a href="#dfn-gamma-value" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-gamma-value-22">gamma value</a>
                は、画像がインターネット由来かローカル由来かなど他の情報に依存して決めてもよいでしょう。HTML のような文書形式や SVG のようなベクタ形式のビューアは、未タグの PNG
                画像を他の未タグ画像と同様に扱うべきです。</p>

            <p>実際には、どの表示指数を用いるべきかを決めるのはしばしば難しいです。システムに組み込みの <a href="#dfn-gamma" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-gamma-17">gamma</a> 補正がない場合、表示指数は主に CRT によって決まります。特定の CRT
                の詳細な較正測定がない限り、表示指数 2.2 を用いるべきです。</p>

            <p>多くの現代の <a href="#dfn-frame_buffer" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-frame-buffer-6">frame buffers</a> には <a href="#dfn-gamma" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-gamma-18">gamma</a>
                補正を実行するためのルックアップテーブルがあり、これらのシステムでは表示指数はそのルックアップテーブルと CRT
                の複合指数であるべきです。ビューア内からルックアップテーブルの内容を取得できない場合、ユーザに表示システムの指数値を入力してもらう必要があるかもしれません。残念ながら、異なるメーカーはルックアップテーブルの指定方法が異なるため、システムの
                <a href="#dfn-gamma-value" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-gamma-value-24">gamma value</a> の解釈はシステム依存になります。
            </p>

            <p>実際の表示器の応答は単一の数値（表示指数）で表せるよりも複雑です。もしモニタの電圧入力に対する光出力の実測値が利用可能なら、上記の第三・第四行はこれらの実測値を参照することで置き換えられ、望ましい明るさに最も近い実際のフレームバッファ値を求めることができます。
            </p>
        </section>


        <section id="13Decoder-colour-handling">
            <div class="header-wrapper">
                <h3 id="x13-14-decoder-color-handling"><bdi class="secno">13.14 </bdi>デコーダの色処理</h3><a class="self-link"
                    href="#13Decoder-colour-handling" aria-label="Permalink for Section 13.14"></a>
            </div>


            <p>色に関する参照は <a href="#C-GammaAppendix" class="sec-ref"><bdi class="secno">C. </bdi>Gamma and
                    chromaticity</a> を参照してください。</p>

            <p>多くの場合、PNG データストリーム内の <a href="#dfn-image-data" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-image-data-26">image data</a> はデバイス依存の RGB 値として扱われ、（適切な <a href="#dfn-gamma"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gamma-19">gamma</a>
                補正を除いて）変更せずに表示されます。これは最速の表示方法ですが、ビューアが元の画像の作成者とまったく同じ表示ハードウェアを用いない限り、特に暗色やほぼ中立の色において色は作成者が見たものと完全には一致しません。<a
                    class="chunk" href="#11cHRM">cHRM</a> チャンクは、単なる <a href="#dfn-gamma" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-gamma-20">gamma</a> 補正よりも緻密な色合わせを可能にする情報を提供します。</p>

            <p><a class="chunk" href="#11cHRM">cHRM</a> データは <a href="#dfn-image-data" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-image-data-27">image data</a> を RGB から XYZ へ変換し、さらに CIE LAB
                のような知覚的に線形な色空間へ変換するために使えます。色を CIE LAB 空間で分割すれば最適パレットを生成できます。というのも CIE LAB における 2
                色間の幾何学的距離は、人間の見た目での差異と強く相関するからです（RGB や XYZ 空間とは異なります）。得られたパレットを再び RGB へ戻して表示に用いるか、<a class="chunk"
                    href="#11PLTE">PLTE</a> チャンクへ書き込むことができます。</p>

            <p>画像処理アプリケーションの一部として動作するデコーダは、解析のために <a href="#dfn-image-data" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-image-data-28">image data</a> を CIE LAB 空間へ変換することもあるでしょう。</p>

            <p>色忠実度が重要な用途（プロダクトデザイン、科学的可視化、医療、建築、広告など）では、PNG デコーダはソース RGB から表示に用いるモニタの display RGB 空間への変換を行えます。これはソース
                RGB → XYZ の行列と XYZ → 表示 RGB の行列を計算し、それらを合成して全体の変換を得ることを含みます。PNG デコーダはガモットマッピングを実装する責任があります。</p>

            <p>プラットフォームにカラーマネジメントシステム（CMS）が備わっている場合、デコーダは <a href="#dfn-image-data" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-image-data-30">image data</a>、<a class="chunk"
                    href="#11gAMA">gAMA</a>、および <a class="chunk" href="#11cHRM">cHRM</a> の値を CMS
                に渡して表示やさらなる処理を行わせることができます。</p>

            <p>カラー印刷機能を提供する PNG デコーダは、Level 2 PostScript の機能を使ってキャリブレートされた RGB 空間や XYZ のようなデバイス非依存色空間で <a
                    href="#dfn-image-data" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-image-data-31">image
                    data</a> を指定できます。これは単純な RGB→CMYK 変換よりも良い色忠実度を提供します。PostScript Language Reference マニュアル [<cite><a
                        class="bibref" data-link-type="biblio" href="#bib-postscript"
                        title="PostScript Language Reference Manual">PostScript</a></cite>] に例が示されています。そのようなデコーダはソース
                RGB（<a class="chunk" href="#11cHRM">cHRM</a> に指定）とターゲットプリンタ間のガモットマッピングを実装する責任があり、PostScript
                インタプリタが所望の色を生成します。</p>

            <p>PNG デコーダは <a class="chunk" href="#11cHRM">cHRM</a> データを使用して、カラー画像の正確なグレースケール表現を計算できます。RGB からグレイへの変換は単に
                XYZ の Y（輝度）成分を計算することであり、これは R, G, B の重み付き和です。重みはモニタの種類、すなわち <a class="chunk" href="#11cHRM">cHRM</a>
                チャンクの値に依存します。PNG デコーダは <a class="chunk" href="#11cHRM">cHRM</a>
                を持たないデータストリームに対してこれを行いたい場合があります。その場合の妥当なデフォルトは CCIR 709 原色です [<cite><a class="bibref"
                        data-link-type="biblio" href="#bib-itu-r-bt.709"
                        title="ITU-R BT.709, SERIES BT: BROADCASTING SERVICE (TELEVISION). Parameter values for the HDTV standards for production and international programme exchange">ITU-R-BT.709</a></cite>]。オリジナルの
                NTSC 原色は、PNG 画像が本当にそのようなモニタ用に色合わせされていない限り <strong>使用すべきではありません</strong>。</p>
        </section>


        <section id="13Background-colour">
            <div class="header-wrapper">
                <h3 id="x13-15-background-color"><bdi class="secno">13.15 </bdi>背景色</h3><a class="self-link"
                    href="#13Background-colour" aria-label="Permalink for Section 13.15"></a>
            </div>


            <p><a class="chunk" href="#11bKGD">bKGD</a>
                チャンクで指定された背景色は、通常画像周辺の未使用スクリーンスペースや、画像内の透過ピクセルを塗りつぶすために使用されます。（したがって、画像が透過を使用していない場合でも <a class="chunk"
                    href="#11bKGD">bKGD</a> は有効かつ有用です。）もし <a class="chunk" href="#11bKGD">bKGD</a>
                チャンクが存在しない場合、ビューアは適切な背景色を決定する必要があります。他に情報がない場合、8 ビット sRGB カラースペースで 153
                のような中間灰色が妥当な選択です。透明な黒や白のテキストや暗いドロップシャドウなどは、この背景に対して判読可能です。</p>

            <p>特定の背景で画像を提示するビューア（ウェブブラウザなど）は <a class="chunk" href="#11bKGD">bKGD</a> を無視し、自身の好む背景色や背景画像で <a
                    class="chunk" href="#11bKGD">bKGD</a> を上書きすべきです。</p>

            <p><a class="chunk" href="#11bKGD">bKGD</a> チャンクで示された背景色は、たとえそれが <a class="chunk" href="#11tRNS">tRNS</a>
                チャンクで示された色と一致していても、透明とは見なされません（または、indexed-color 画像の場合に <a class="chunk" href="#11tRNS">tRNS</a>
                が透過としてマークしているパレットインデックスに対応する場合でも同様です）。さもなければ背景の「背後に何か」を想定して合成しなければならなくなります。背景色は使用されるか無視されるかのどちらかであり、PNG
                イメージと他の背景の間の中間レイヤーではありません。</p>

            <p>実際、多くの場合 <a class="chunk" href="#11bKGD">bKGD</a> と <a class="chunk" href="#11tRNS">tRNS</a>
                が同じ色を指定することが普通です。そうすれば透過処理を実装していないデコーダでも、部分的に透明なピクセルが存在しない限り意図した表示が得られます。</p>
        </section>


        <section id="13Alpha-channel-processing">
            <div class="header-wrapper">
                <h3 id="x13-16-alpha-channel-processing"><bdi class="secno">13.16 </bdi>アルファチャネル処理</h3><a
                    class="self-link" href="#13Alpha-channel-processing" aria-label="Permalink for Section 13.16"></a>
            </div>


            <p>アルファチャネルは前景イメージを背景イメージに<a href="#dfn-composited" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-composited-11">合成（composite）</a>するために使用できます。PNG
                データストリームは前景画像と透過マスクを定義しますが、背景画像は定義しません。PNG
                デコーダはこの最も一般的なケースをサポートすることを<strong>要求されません</strong>。多くのデコーダは単一の背景色に対する合成をサポートすることが期待されます。</p>

            <p>合成されたサンプル値を計算する式は次の通りです：</p>

            <pre aria-busy="false"><code class="hljs">output = alpha * foreground + (1-alpha) * background</code></pre>
            <p>ここで alpha および入出力サンプル値は 0〜1 の分数で表されます。この計算は強度サンプル（<a href="#dfn-gamma" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-gamma-21">gamma</a> エンコードされていないサンプル）で行うべきです。カラー画像の場合、R, G, B
                の各サンプルについて個別に計算します。</p>

            <p>以下のコードは、前景画像を背景画像に合成する一般的なケースを示します。背景画像の元のピクセルデータが利用可能であり、出力が表示用の <a href="#dfn-frame-buffer"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-frame-buffer-8">frame buffer</a>
                であると仮定します。他のバリエーションも可能です；コード下のコメントを参照してください。このコードは前景画像と背景画像のサンプル深度や <a href="#dfn-gamma-value"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gamma-value-25">gamma values</a>
                が異なっていて、表示システムに最適化されていない場合でも動作するようにしています。実際には何も仮定せずまずチェックすべきです。</p>



            <p>このコードは ISO C 構文で、コメント参照用に行番号を付しています。</p>

            <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-number">01</span>  int foreground[<span class="hljs-number">4</span>];  <span class="hljs-comment">/* image pixel: R, G, B, A */</span>
<span class="hljs-number">02</span>  int background[<span class="hljs-number">3</span>];  <span class="hljs-comment">/* background pixel: R, G, B */</span>
<span class="hljs-number">03</span>  int fbpix[<span class="hljs-number">3</span>];       <span class="hljs-comment">/* frame buffer pixel */</span>
<span class="hljs-number">04</span>  int fg_maxsample;   <span class="hljs-comment">/* foreground max sample */</span>
<span class="hljs-number">05</span>  int bg_maxsample;   <span class="hljs-comment">/* background max sample */</span>
<span class="hljs-number">06</span>  int fb_maxsample;   <span class="hljs-comment">/* frame buffer max sample */</span>
<span class="hljs-number">07</span>  int ialpha;
<span class="hljs-number">08</span>  float alpha, compalpha;
<span class="hljs-number">09</span>  float gamfg, linfg, gambg, linbg, comppix, gcvideo;

    <span class="hljs-comment">/* Get max sample values in data and frame buffer */</span>
<span class="hljs-number">10</span>  fg_maxsample = (<span class="hljs-number">1</span> &lt;&lt; fg_sample_depth) - <span class="hljs-number">1</span>;
<span class="hljs-number">11</span>  bg_maxsample = (<span class="hljs-number">1</span> &lt;&lt; bg_sample_depth) - <span class="hljs-number">1</span>;
<span class="hljs-number">12</span>  fb_maxsample = (<span class="hljs-number">1</span> &lt;&lt; frame_buffer_sample_depth) - <span class="hljs-number">1</span>;
    <span class="hljs-comment">/*
     * Get integer version of alpha.
     * Check for opaque and transparent special cases;
     * no compositing needed if so.
     *
     * We show the whole gamma decode/correct process in
     * floating point, but it would more likely be done
     * with lookup tables.
     */</span>
<span class="hljs-number">13</span>  ialpha = foreground[<span class="hljs-number">3</span>];

<span class="hljs-number">14</span>  <span class="hljs-keyword">if</span> (ialpha == <span class="hljs-number">0</span>) {
        <span class="hljs-comment">/*
         * Foreground image is transparent here.
         * If the background image is already in the frame
         * buffer, there is nothing to do.
         */</span>
<span class="hljs-number">15</span>      ;
<span class="hljs-number">16</span>  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ialpha == fg_maxsample) {
        <span class="hljs-comment">/*
         * Copy foreground pixel to frame buffer.
         */</span>
<span class="hljs-number">17</span>      <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
<span class="hljs-number">18</span>          gamfg = (float) foreground[i] / fg_maxsample;
<span class="hljs-number">19</span>          linfg = <span class="hljs-title function_">pow</span>(gamfg, <span class="hljs-number">1.0</span> / fg_gamma);
<span class="hljs-number">20</span>          comppix = linfg;
<span class="hljs-number">21</span>          gcvideo = <span class="hljs-title function_">pow</span>(comppix, <span class="hljs-number">1.0</span> / display_exponent);
<span class="hljs-number">22</span>          fbpix[i] = (int) (gcvideo * fb_maxsample + <span class="hljs-number">0.5</span>);
<span class="hljs-number">23</span>      }
<span class="hljs-number">24</span>  } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">/*
         * Compositing is necessary.
         * Get floating-point alpha and its complement.
         * Note: alpha is always linear; gamma does not
         * affect it.
         */</span>
<span class="hljs-number">25</span>      alpha = (float) ialpha / fg_maxsample;
<span class="hljs-number">26</span>      compalpha = <span class="hljs-number">1.0</span> - alpha;

<span class="hljs-number">27</span>      <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
            <span class="hljs-comment">/*
             * Convert foreground and background to floating
             * point, then undo gamma encoding.
             */</span>
<span class="hljs-number">28</span>          gamfg = (float) foreground[i] / fg_maxsample;
<span class="hljs-number">29</span>          linfg = <span class="hljs-title function_">pow</span>(gamfg, <span class="hljs-number">1.0</span> / fg_gamma);
<span class="hljs-number">30</span>          gambg = (float) background[i] / bg_maxsample;</code></pre>


            <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-number">31</span>          linbg = <span class="hljs-title function_">pow</span>(gambg, <span class="hljs-number">1.0</span> / bg_gamma);
            <span class="hljs-comment">/*
             * Composite.
             */</span>
<span class="hljs-number">32</span>          comppix = linfg * alpha + linbg * compalpha;
            <span class="hljs-comment">/*
             * Gamma correct for display.
             * Convert to integer frame buffer pixel.
             */</span>
<span class="hljs-number">33</span>          gcvideo = <span class="hljs-title function_">pow</span>(comppix, <span class="hljs-number">1.0</span> / display_exponent);
<span class="hljs-number">34</span>          fbpix[i] = (int) (gcvideo * fb_maxsample + <span class="hljs-number">0.5</span>);
<span class="hljs-number">35</span>      }
<span class="hljs-number">36</span>  }</code></pre>
            <p>バリエーション：</p>


            <ol>
                <li>出力が <a href="#dfn-frame-buffer" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-frame-buffer-9">frame buffer</a> ではなく別の PNG データストリームの場合、行 21, 22, 33, 34
                    は次のように変更されるべきです。

                    <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-comment">/*
 * Gamma encode for storage in output datastream.
 * Convert to integer sample value.
 */</span>
gamout = <span class="hljs-title function_">pow</span>(comppix, outfile_gamma);
outpix[i] = (int) (gamout * out_maxsample + <span class="hljs-number">0.5</span>);</code></pre>
                    また、アルファがゼロのときに背景ピクセルを処理する必要があり、ただスキップするだけではなく、行 15 は背景ピクセルを処理するために行 17-23 のコピーに置き換える必要があります。
                </li>

                <li>出力ファイル、前景ファイル、背景ファイルのサンプル深度がすべて同じで、かつ三者の <a href="#dfn-gamma-value" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-gamma-value-26">gamma values</a> も一致するなら、行 14-23
                    の非合成コードは、アルファが 1 の場合は入力から出力へピクセル値をコピーし、アルファが 0 の場合は背景を出力へコピーするだけに簡略化されます。画像内の大多数のピクセルでアルファが 0 または 1
                    であることが一般的であるため、これは大きな時間節約になります。ほとんどのピクセルについて <a href="#dfn-gamma" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-gamma-22">gamma</a> 計算は不要です。</li>

                <li>サンプル深度と <a href="#dfn-gamma-value" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-gamma-value-27">gamma values</a> がすべて一致する場合、行 28-31 と 33-34 の <a
                        href="#dfn-gamma" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gamma-23">gamma</a>
                    デコード／エンコードを省略して、行 32 を <a href="#dfn-gamma" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-gamma-24">gamma</a>
                    エンコード済みサンプル値で直接行うことが一見魅力的に見えます。これは画像品質に大きな悪影響を与えないことがありますが、アルファ値が 0 と 1 の特殊ケースをここで扱うなら時間節約は小さいです。
                </li>

                <li>背景画像の元のピクセル値が利用できない場合、背景の表示で残された処理済みの <a href="#dfn-frame-buffer" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-frame-buffer-10">frame buffer</a> ピクセルしか残っていない場合、行 30 と 31
                    は次のようにフレームバッファ値から強度を抽出するコードへ置き換える必要があります：

                    <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-comment">/*
 * Convert frame buffer value into intensity sample.
 */</span>
gcvideo = (float) fbpix[i] / fb_maxsample;
linbg = <span class="hljs-title function_">pow</span>(gcvideo, display_exponent);</code></pre>
                    ただし丸め誤差が生じる可能性があるため、可能なら元の背景ピクセルを利用する方が望ましいです。
                </li>

                <li>行 18-22 はアルファが無い場合に行われるのと全く同じ <a href="#dfn-gamma" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-gamma-25">gamma</a>
                    計算を実行しています。もし非アルファのケースをルックアップテーブルで処理しているなら、同じルックアップテーブルをここでも使えます。行 28-31 と 33-34
                    も（別の）ルックアップテーブルで行えます。</li>

                <li>整数演算を用いることも可能です。その場合は十分な精度を保つために注意を払うべきです。</li>
            </ol>

            <div class="note" role="note" id="issue-container-generatedID-22">
                <div role="heading" class="note-title marker" id="h-note-22" aria-level="4"><span>Note</span></div>
                <p class="">注：浮動小数点演算では入力サンプル値が 0〜1
                    の間に保証され、合成は常に入力値の範囲内に収まるため、オーバーフローやアンダーフローのチェックは不要です。整数演算の場合は丸め誤差解析が必要になり得て、オーバーフローやアンダーフローが発生しないことを保証する必要があります。
                </p>
            </div>



            <p>フルアルファチャネルを持つ PNG 画像を表示する際は、たとえ背景が単なる黒であっても画像を何かの背景に<a href="#dfn-composited" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-composited-13">合成</a>できることが重要です。アルファを無視すると、associated-alpha
                表現から変換された PNG 画像は見た目が正しくなくなります。（もちろんアルファチャネルが別個の透明マスクである場合、アルファを無視するのは隠された部分を回復するために有用なオプションになります。）</p>

            <p>デコーダが真の合成ロジックを実装していない場合でも、アルファ値が 0 と 1 のみを含む画像への対処は簡単です（これは <a href="#dfn-greyscale" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-greyscale-17">greyscale</a> や <a href="#3truecolour"
                    class="internalDFN" data-link-type="dfn" id="ref-for-3truecolour-25">truecolor</a> の PNG データストリームが
                <a class="chunk" href="#11tRNS">tRNS</a> チャンクを使う場合に暗黙的に当てはまります。indexed-color PNG データストリームの場合、<a
                    class="chunk" href="#11tRNS">tRNS</a> が 0 と 255
                以外の値を含むかどうかを簡単にチェックできます。）この単純なケースでは、透過ピクセルは背景色で置き換えられ、他のピクセルは変更されません。
            </p>

            <p>もしデコーダがこれだけの透過機能しか持たない場合、フルアルファチャネルを扱うときは、すべての非ゼロアルファ値を不透明として扱うか、あるいはディザリングするべきです。いずれの方法も
                associated-alpha
                形式から変換された画像に対してはあまり良い結果を与えませんが、何もしないよりは望ましいです。フルアルファを二値アルファへディザするのは、グレースケールを白黒へディザするのと非常に似ていますが、完全に透明なピクセルと完全に不透明なピクセルはディザによって変更されないようにするべきです。
            </p>
        </section>


        <section id="13Histogram-and-suggested-palette-usage">
            <div class="header-wrapper">
                <h3 id="x13-17-histogram-and-suggested-palette-usage"><bdi class="secno">13.17 </bdi>ヒストグラムと推奨パレットの使用
                </h3><a class="self-link" href="#13Histogram-and-suggested-palette-usage"
                    aria-label="Permalink for Section 13.17"></a>
            </div>


            <p>indexed-color ハードウェア上で <a href="#3truecolour" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3truecolour-26">truecolor</a> 画像を表示しようとするビューア、またはフレームバッファーが受け入れられるよりも大きなパレットを持つ
                indexed-color 画像に対しては、エンコーダが一つ以上の推奨パレットを <a class="chunk" href="#11sPLT">sPLT</a>
                チャンクで提供している場合があります。サイズや（場合によっては）名前に基づいてそれらの中から適切なものが見つかった場合、PNG
                デコーダはそのパレットを使用できます。デコーダが必要とするものとサンプル深度が異なる推奨パレットは、サンプル深度の再スケーリングで変換できます（<a
                    href="#13Sample-depth-rescaling" class="sec-ref"><bdi class="secno">13.12 </bdi>Sample depth
                    rescaling</a>参照）。
            </p>

            <p>背景が単色である場合、ビューアは画像と推奨パレットをその色に対して合成（<a href="#dfn-composited" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-composited-14">composite</a>）し、得られた画像を元に RGB
                パレットへ量子化するべきです。画像が透過を使用していて背景が単色でない場合、推奨パレットはほとんど役に立たないでしょう。</p>

            <p><a href="#3truecolour" class="internalDFN" data-link-type="dfn" id="ref-for-3truecolour-27">truecolor</a>
                画像の場合、推奨パレットは <a class="chunk" href="#11PLTE">PLTE</a> チャンクにも含められていることがあります。画像が <a class="chunk"
                    href="#11tRNS">tRNS</a> チャンクを持ち背景が単色である場合、ビューアは望ましい背景色に合わせて推奨パレットを調整する必要があります。その方法としては、<a
                    class="chunk" href="#11tRNS">tRNS</a> の色に最も近いパレットエントリを望ましい背景色に置き換えるか、ビューアが <a class="chunk"
                    href="#11PLTE">PLTE</a> エントリ数より多くの色を扱えるなら背景色用のパレットエントリを追加する、などがあります。</p>

            <p><a href="#3colourType" class="internalDFN" data-link-type="dfn" id="ref-for-3colourType-41">color
                    type</a> 6（<a href="#dfn-truecolour-with-alpha" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-truecolor-with-alpha-7">truecolor with
                    alpha</a>）の画像については、任意の <a class="chunk" href="#11PLTE">PLTE</a> チャンクは <a class="chunk"
                    href="#11bKGD">bKGD</a> チャンクで指定された単色背景に対して画像を表示するために設計されているはずです。ビューアが異なる背景を使うつもりである場合や <a
                    class="chunk" href="#11bKGD">bKGD</a>
                チャンクが存在しない場合は、そのパレットを無視するのが妥当でしょう。異なる背景で表示するために推奨パレットを使うことは可能ですが、結果はあまり良くない場合があります。</p>

            <p>ビューアが透明な <a href="#3truecolour" class="internalDFN" data-link-type="dfn"
                    id="ref-for-3truecolour-28">truecolor</a> 画像を非均一な背景（単色より複雑な背景）に対して提示する場合、推奨パレットが合成（<a
                    href="#dfn-composited" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-composited-15">composite</a>）された画像に最適であることはほとんど期待できません。この場合は、<a href="#3truecolour"
                    class="internalDFN" data-link-type="dfn" id="ref-for-3truecolour-29">truecolor</a> PNG
                画像と背景画像を先に合成し、その結果画像を色量子化するのが最良です。</p>

            <p>truecolor の PNG データストリーム内で <a class="chunk" href="#11PLTE">PLTE</a> と <a class="chunk"
                    href="#11sPLT">sPLT</a> の両方のチャンクが現れる場合、PNG デコーダは両者が提案するパレットの中から選ぶことができますが、上述した透明性に関する違いを考慮に入れるべきです。
            </p>

            <p><a class="chunk" href="#11sPLT">sPLT</a> および <a class="chunk" href="#11hIST">hIST</a> チャンクの周波数情報は、ビューアが
                PNG
                データストリームで使用されているパレットと同じだけの色を提供できない場合に有用です。もしビューアがほんの数色しか不足していないなら、パレットの使用頻度が最も低い色を削るだけで十分な場合が多いです。色数を大幅に減らす必要がある場合は、既存パレットのサブセットを使おうとするよりも、まったく新しい代表色を選ぶ方が良いです。これは新しい色量子化処理を行うことに相当しますが、既存のパレットとヒストグラムを入力データとして使えば、<a
                    class="chunk" href="#11IDAT">IDAT</a> チャンク中の <a href="#dfn-image-data" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-image-data-32">image data</a> を走査する手間を省くことができます。</p>

            <p>推奨パレットが提供されていない場合、デコーダは自前でパレットを生成できますが、そのためには <a class="chunk" href="#11IDAT">IDAT</a> チャンク内の <a
                    href="#dfn-image-data" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-image-data-33">image
                    data</a> を一度走査する必要があり追加のコストがかかります。代わりにデフォルトのパレット（おそらくカラキューブ）を使用することもできます。
            </p>

            <p>関連項目は <a href="#12Suggested-palettes" class="sec-ref"><bdi class="secno">12.5 </bdi>Suggested
                    palettes</a> を参照してください。</p>
        </section>
    </section>




    <section id="14EditorsExt">
        <div class="header-wrapper">
            <h2 id="x14-editors"><bdi class="secno">14. </bdi>エディタ</h2><a class="self-link" href="#14EditorsExt"
                aria-label="Permalink for Section 14."></a>
        </div>



        <section id="14Additional-chunk-types">
            <div class="header-wrapper">
                <h3 id="x14-1-additional-chunk-types"><bdi class="secno">14.1 </bdi>追加のチャンク型</h3><a class="self-link"
                    href="#14Additional-chunk-types" aria-label="Permalink for Section 14.1"></a>
            </div>


            <p>作者は新しいチャンク型を検討する前に、本仕様や [<cite><a class="bibref" data-link-type="biblio" href="#bib-png-extensions"
                        title="Extensions to the PNG Third Edition Specification, Version 1.6.0">PNG-EXTENSIONS</a></cite>]
                にある既存のチャンク型を確認することが奨励されます。<a class="bibref" data-link-type="biblio"
                    href="#bib-png-extensions">PNG-EXTENSIONS</a> にあるチャンク型は、本仕様で定義されたものよりも広くサポートされないことが予想されます。</p>
        </section>


        <section id="14Ordering">
            <div class="header-wrapper">
                <h3 id="x14-2-behavior-of-png-editors"><bdi class="secno">14.2 </bdi>PNG エディタの振る舞い</h3><a
                    class="self-link" href="#14Ordering" aria-label="Permalink for Section 14.2"></a>
            </div>


            <p><a href="#dfn-png-editor" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-png-editor-7">PNG
                    editors</a> の例として、テキストチャンクを追加・変更するプログラムや、<a href="#3truecolour" class="internalDFN"
                    data-link-type="dfn" id="ref-for-3truecolour-32">truecolor</a> PNG
                データストリームに推奨パレットを追加するプログラムが挙げられます。一般的な画像編集ソフトは画像を読み込む際に未認識の情報を破棄するため、通常は <a href="#dfn-png-editor"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-png-editor-8">PNG editors</a> とは見なされません。
            </p>

            <p>PNG に新しいチャンク型を追加できるようにするためには、すべてのチャンク型に対する並び順の要件について規則を確立する必要があります。さもなければ、<a href="#dfn-png-editor"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-png-editor-9">PNG editor</a>
                が未知のチャンクに遭遇したときに何をすべきか分からなくなります。</p>

            <p>例: 仮想的な新しい補助チャンク型があって、それは <a class="chunk" href="#11PLTE">PLTE</a> が存在する場合に <a class="chunk"
                    href="#11PLTE">PLTE</a> の後に現れることが要求されるとします。プログラムがその新チャンクを認識せずに <a class="chunk"
                    href="#11PLTE">PLTE</a> を追加しようとすると、誤って新チャンクの後に <a class="chunk" href="#11PLTE">PLTE</a>
                を挿入してしまう可能性があります。このような問題は、未知チャンクをすべて破棄するように <a href="#dfn-png-editor" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-png-editor-10">PNG editors</a>
                に強制すれば防げますが、それは非常に魅力のない解決策です。代わりに、PNG は補助チャンクにこのような厳しい順序制約を持たせないことを要求します。</p>

            <p>この種の問題を将来の拡張を許容しつつ防ぐために、<a href="#dfn-png-editor" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-png-editor-11">PNG editors</a> の振る舞いとチャンクの並び順に制約が課されています。safe-to-copy
                ビットは、修正されるデータストリーム内の未認識チャンクの取り扱いを定義します。</p>


            <ol>
                <li>チャンクの safe-to-copy ビットが 1 の場合、そのチャンクは <a href="#dfn-png-editor" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-png-editor-12">PNG editor</a>
                    がそのチャンク型を認識しているかどうかにかかわらず、修正後の PNG データストリームへコピーしてよい。</li>

                <li>チャンクの safe-to-copy ビットが 0 の場合、そのチャンクは <a href="#dfn-image-data" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-image-data-34">image data</a>
                    に依存することを示します。プログラムがクリティカルなチャンクに対して何らかの変更（追加、変更、削除、または並べ替え）を行った場合、未認識の unsafe チャンクは出力 PNG
                    データストリームへコピーしてはなりません。（もちろん、プログラムがそのチャンクを認識していれば、適切に修正した版を出力することはできます。）</li>

                <li><a href="#dfn-png-editor" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-png-editor-13">PNG editor</a>
                    が補助チャンクのみを追加・削除・変更・並べ替えた場合、未認識の補助チャンクをすべてコピーして構いません。これは補助チャンクが他の補助チャンクに依存してはならないことを意味します。</li>

                <li><a href="#dfn-png-editor" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-png-editor-14">PNG editors</a>
                    は、未認識のクリティカルチャンク型に遭遇した場合に処理を中止しなければなりません。というのも、そのようなチャンクを含むデータストリームを修正しても有効なデータストリームが得られると確実に言えないからです。（単にそのチャンクを破棄するだけでは不十分で、そのチャンクが他のチャンクの解釈に未知の影響を与える可能性があるためです。）safe/unsafe
                    機構は補助チャンクに対して想定されています。クリティカルチャンクの safe-to-copy ビットは常に 0 になります。</li>
            </ol>

            <p>チャンクの並び順を決める規則は次の通りです。</p>


            <ol>
                <li>未認識の <strong>unsafe-to-copy</strong> 補助チャンクをコピーする場合、<a href="#dfn-png-editor" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-png-editor-15">PNG editor</a>
                    はそのチャンクを任意のクリティカルチャンクに対して相対的に移動してはなりません。同じ一対のクリティカルチャンクの間に現れる他の補助チャンクに対しては自由に位置を変更できます。（これは、編集者が未知の
                    unsafe-to-copy チャンクを保持する場合、クリティカルチャンクを追加・削除・変更・並べ替えしてはならない、という前提により明確に定義されます。）</li>

                <li>未認識の <strong>safe-to-copy</strong> 補助チャンクをコピーする場合、<a href="#dfn-png-editor" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-png-editor-16">PNG editor</a> はそのチャンクを <a class="chunk"
                        href="#11IDAT">IDAT</a> の前から後へ、または後から前へ移動してはなりません。（これは <a class="chunk" href="#11IDAT">IDAT</a>
                    が常に存在するため明確に定義されます。）それ以外の並べ替えは許可されます。</li>

                <li>既知の補助チャンク型をコピーする場合、エディタはそのチャンク型に対して存在する特定の順序規則を守れば十分です。しかし、常に上記の一般規則を適用することもできます。</li>
            </ol>

            <p>これらの規則は入力データストリームから出力データストリームへチャンクをコピーする観点で表現されていますが、データストリームをその場で修正する場合にも明白な方法で適用されます。</p>

            <p>また <a href="#5Chunk-naming-conventions" class="sec-ref"><bdi class="secno">5.4 </bdi>Chunk naming
                    conventions</a> を参照してください。</p>

            <p><a href="#dfn-png-editor" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-png-editor-17">PNG
                    editors</a> が <a href="#dfn-image-data" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-image-data-35">image data</a> を変更しない場合、<a class="chunk" href="#11tIME">tIME</a>
                チャンクを変更してはなりません。<a class="chunk" href="#11tEXt">tEXt</a>、<a class="chunk" href="#11zTXt">zTXt</a>、および <a
                    class="chunk" href="#11iTXt">iTXt</a> チャンクの Creation Time キーワードは、ユーザ提供の時刻として使用できます。</p>
        </section>


        <section id="14Ordering-of-chunks">
            <div class="header-wrapper">
                <h3 id="x14-3-ordering-of-chunks"><bdi class="secno">14.3 </bdi>チャンクの並び順</h3><a class="self-link"
                    href="#14Ordering-of-chunks" aria-label="Permalink for Section 14.3"></a>
            </div>



            <section id="14Ordering-of-critical-chunks">
                <div class="header-wrapper">
                    <h4 id="x14-3-1-ordering-of-critical-chunks"><bdi class="secno">14.3.1 </bdi>クリティカルチャンクの順序</h4><a
                        class="self-link" href="#14Ordering-of-critical-chunks"
                        aria-label="Permalink for Section 14.3.1"></a>
                </div>


                <p>クリティカルチャンクには任意の並び順要件があり得ます。というのも <a href="#dfn-png-editor" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-png-editor-18">PNG editors</a> は未知のクリティカルチャンクに遭遇した場合に終了することが要求されるからです。例えば <a
                        class="chunk" href="#11IHDR">IHDR</a> には常に最初に現れるという特定の順序規則があります。PNG エディタ、または PNG
                    を書き出す任意のプログラムは、自身が生成できるクリティカルチャンク型の順序規則を知り、それに従わなければなりません。</p>
            </section>


            <section id="14Ordering-of-ancillary-chunks">
                <div class="header-wrapper">
                    <h4 id="x14-3-2-ordering-of-ancillary-chunks"><bdi class="secno">14.3.2 </bdi>補助チャンクの順序</h4><a
                        class="self-link" href="#14Ordering-of-ancillary-chunks"
                        aria-label="Permalink for Section 14.3.2"></a>
                </div>


                <p>補助チャンク型に対する最も厳しい順序規則は次のとおりです：</p>


                <ol>
                    <li>Unsafe-to-copy のチャンクはクリティカルチャンクに対して順序要件を持ち得る。</li>

                    <li>Safe-to-copy のチャンクは <a class="chunk" href="#11IDAT">IDAT</a> に対して順序要件を持ち得る。</li>
                </ol>

                <p>特定の補助チャンク型に対する実際の順序規則はこれより緩やかであることがあります。例えば標準的な補助チャンク型の順序規則は <a href="#5ChunkOrdering"
                        class="sec-ref"><bdi class="secno">5.6 </bdi>Chunk ordering</a> に示されています。</p>

                <p>デコーダは、任意の補助チャンクが他の補助チャンクに対して特定の位置にあると仮定してはなりません。特に、ある私的な補助チャンクが常に <a class="chunk"
                        href="#11IEND">IEND</a> の直前に現れると仮定するのは安全ではありません。特定のアプリケーションがいつもその位置に書いている場合でも、<a
                        href="#dfn-png-editor" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-png-editor-19">PNG editor</a> がその後に別の補助チャンクを挿入する可能性があるためです。ただし、そのチャンクが <a
                        class="chunk" href="#11IDAT">IDAT</a> と <a class="chunk" href="#11IEND">IEND</a>
                    の間のどこかに残ることは安全に仮定できます。</p>
            </section>
        </section>
    </section>




    <div id="15Conformance">
    </div>

    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x15-conformance"><bdi class="secno">15. </bdi>適合性</h2><a class="self-link" href="#conformance"
                aria-label="Permalink for Section 15."></a>
        </div>
        <p>非規範（non-normative）としてマークされた節に加え、本仕様のすべての作成ガイドライン、図、例、および注記は非規範的です。それ以外の本仕様の全内容は規範的です。</p>
        <p>
            本文書中のキーワード <em class="rfc2119">MAY</em>、<em class="rfc2119">MUST</em>、<em class="rfc2119">SHALL</em>、
            <em class="rfc2119">SHOULD</em>、および <em class="rfc2119">SHOULD NOT</em> は、<a
                href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119"
                    title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc8174"
                    title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
            に従って解釈されますが、その場合に限り、すなわちここに示すようにすべて大文字で現れるときのみ適用されます。
        </p>
        <section id="conformance-0">
            <div class="header-wrapper">
                <h3 id="x15-1-conformance"><bdi class="secno">15.1 </bdi>適合性</h3><a class="self-link"
                    href="#conformance-0" aria-label="Permalink for Section 15.1"></a>
            </div>


        </section>
        <section id="15ConfIntro">
            <div class="header-wrapper">
                <h3 id="x15-2-introduction"><bdi class="secno">15.2 </bdi>導入</h3><a class="self-link"
                    href="#15ConfIntro" aria-label="Permalink for Section 15.2"></a>
            </div>



            <section id="15ConfObjectives">
                <div class="header-wrapper">
                    <h4 id="x15-2-1-objectives"><bdi class="secno">15.2.1 </bdi>目的</h4><a class="self-link"
                        href="#15ConfObjectives" aria-label="Permalink for Section 15.2.1"></a>
                </div>


                <p>本節は PNG データストリーム、PNG エンコーダ、PNG デコーダ、および <a href="#dfn-png-editor" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-png-editor-20">PNG エディタ</a> の適合性を扱います。</p>

                <p>本節における仕様の主な目的は次のとおりです：</p>


                <ol>
                    <li>本仕様の恣意的な部分集合や拡張を排除することで相互運用性を促進すること；</li>

                    <li>適合性テストの開発における一貫性を促進すること；</li>

                    <li>PNG エンコーダ、デコーダ、およびエディタ間で一貫した結果を促進すること；</li>

                    <li>自動テスト生成を容易にすること。</li>
                </ol>
            </section>


            <section id="15ConfScope">
                <div class="header-wrapper">
                    <h4 id="x15-2-2-scope"><bdi class="secno">15.2.2 </bdi>適用範囲</h4><a class="self-link"
                        href="#15ConfScope" aria-label="Permalink for Section 15.2.2"></a>
                </div>


                <p>適合性は PNG データストリームおよび PNG エンコーダ、デコーダ、エディタについて定義されます。</p>

                <p>本節は PNG データストリームと実装要件、ならびに PNG エンコーダ、PNG デコーダ、及び <a href="#dfn-png-editor" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-png-editor-21">PNG エディタ</a>
                    に許容される差異の範囲を扱います。本節はエンコーダ、デコーダ、またはエディタの環境要件、性能要件、またはリソース要件を直接扱うものではありません。</p>

                <p>本節の適用範囲は、PNG データストリームの公開される相互交換のための規則に限定されます。</p>
            </section>
        </section>


        <section id="15ConformanceConf">
            <div class="header-wrapper">
                <h3 id="x15-3-conformance-conditions"><bdi class="secno">15.3 </bdi>適合条件</h3><a class="self-link"
                    href="#15ConformanceConf" aria-label="Permalink for Section 15.3"></a>
            </div>



            <section id="15FileConformance">
                <div class="header-wrapper">
                    <h4 id="x15-3-1-conformance-of-png-datastreams"><bdi class="secno">15.3.1 </bdi>PNG データストリームの適合性
                    </h4><a class="self-link" href="#15FileConformance" aria-label="Permalink for Section 15.3.1"></a>
                </div>


                <p>PNG データストリームが本仕様に適合するためには、次の条件を満たしている必要があります。</p>

                <ol>
                    <li>PNG データストリームは最初の内容として PNG シグネチャを含んでいること（<a href="#5PNG-file-signature" class="sec-ref"><bdi
                                class="secno">5.2 </bdi>PNG signature</a> を参照）。
                    </li>

                    <li>本国際規格で定義されたチャンク型に関して：
                        <ul>
                            <li>PNG データストリームは PNG シグネチャに続いて最初のチャンクとして <a class="chunk" href="#11IHDR">IHDR</a>
                                チャンクを含むこと；
                            </li>

                            <li>PNG データストリームは最後のチャンクとして <a class="chunk" href="#11IEND">IEND</a> チャンクを含むこと。
                            </li>
                        </ul>
                    </li>

                    <li><a class="chunk" href="#11IEND">IEND</a> チャンクの後にチャンクや他のコンテンツが続かないこと。
                    </li>

                    <li>そこに含まれるすべてのチャンクは、本仕様の該当するチャンク型の規定と一致していること。PNG データストリームは本仕様で定義されたチャンク型間の関係を守ること。</li>

                    <li>PNG データストリーム内のチャンクの並びは、本国際規格で指定された順序関係に従うこと。</li>

                    <li>PNG データストリーム内のすべてのフィールド値は、本仕様で指定された関係に従い、指定された構造を生成すること。</li>

                    <li>本仕様で指定されたもの、または本仕様に従って新しいチャンク型を作成するための規則に従って定義されたもの以外のチャンクが PNG データストリームに現れないこと。</li>

                    <li>PNG データストリームは本国際規格の規則に従ってエンコードされていること。</li>
                </ol>
            </section>




            <section id="15ConformanceEncoder">
                <div class="header-wrapper">
                    <h4 id="x15-3-2-conformance-of-png-encoders"><bdi class="secno">15.3.2 </bdi>PNG エンコーダの適合性</h4><a
                        class="self-link" href="#15ConformanceEncoder" aria-label="Permalink for Section 15.3.2"></a>
                </div>


                <p>PNG エンコーダが本仕様に適合するためには、次の条件を満たす必要があります。</p>


                <ol>
                    <li>その PNG エンコーダが生成するすべての PNG データストリームは適合する PNG データストリームであること。</li>

                    <li>PNG で直接表現できないサンプル深度を持つ入力サンプルをエンコードする場合、エンコーダはサンプルを PNG
                        が許容する次に大きいサンプル深度へスケールアップすること。データは高位ビットが元のデータと一致するようにスケーリングされること。</li>

                    <li>
                        <a href="#dfn-private-field-values" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-private-field-values-5">Private field values</a>
                        は、方式や型フィールドの実験的または私的な定義をエンコードする際に使用されること。
                    </li>
                </ol>
            </section>


            <section id="15ConformanceDecoder">
                <div class="header-wrapper">
                    <h4 id="x15-3-3-conformance-of-png-decoders"><bdi class="secno">15.3.3 </bdi>PNG デコーダの適合性</h4><a
                        class="self-link" href="#15ConformanceDecoder" aria-label="Permalink for Section 15.3.3"></a>
                </div>


                <p>PNG デコーダが本仕様に適合するためには、次の条件を満たす必要があります。</p>


                <ol>
                    <li>本国際規格に適合する任意の PNG データストリーム（認識されない型のパブリックおよびプライベートチャンクを含む）を読み取ることができること。</li>

                    <li>標準化されたすべてのクリティカルチャンク、および本国際規格に適合する任意の PNG データストリーム内のすべての標準的な圧縮、フィルタ、インタレース方式および型をサポートすること。</li>

                    <li>未知のチャンク型は <a href="#5Chunk-naming-conventions" class="sec-ref"><bdi class="secno">5.4
                            </bdi>Chunk naming conventions</a> に記述されている通りに扱うこと。未知のチャンク型はクリティカルでない限りエラーとして扱われないこと。
                    </li>

                    <li>既知チャンクのフィールドにおける予期しない値（例えば <a class="chunk" href="#11IHDR">IHDR</a> チャンクの予期しない圧縮方式）はエラーとして扱うこと。
                    </li>

                    <li>すべての種類の PNG 画像（indexed-color、<a href="#3truecolour" class="internalDFN" data-link-type="dfn"
                            id="ref-for-3truecolour-33">truecolor</a>、<a href="#dfn-greyscale" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-greyscale-18">greyscale</a>、<a
                            href="#dfn-truecolor-with-alpha" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-truecolor-with-alpha-8">truecolor with alpha</a>、および <a
                            href="#dfn-greyscale-with-alpha" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-greyscale-with-alpha-4">greyscale with
                            alpha</a>）を処理できること。例えば、インデックスカラー表示ハードウェア上で動作するビューアの一部であるデコーダは、表示のために <a href="#3truecolour"
                            class="internalDFN" data-link-type="dfn" id="ref-for-3truecolour-34">truecolor</a>
                        画像をインデックス形式へ縮約することを保証する必要があります。
                    </li>

                    <li>補助ビットが 0 の未知チャンクに遭遇した場合、デコーダが画像を抽出しようとしているならエラーを生成すること。</li>

                    <li>予約ビットが設定されているチャンク型は未知のチャンク型として扱うこと。</li>

                    <li><a href="#11IHDR" class="chunk sec-ref"><bdi class="secno">11.2.1 </bdi><span
                                class="chunk">IHDR</span> Image header</a> に定義されたとおり、すべての有効なビット深度と <a
                            href="#3colourType" class="internalDFN" data-link-type="dfn"
                            id="ref-for-3colourType-42">color type</a> の組合せをサポートすること。
                    </li>

                    <li><a class="chunk" href="#11tRNS">tRNS</a> チャンク内の 16 ビット <a href="#dfn-greyscale"
                            class="internalDFN" data-link-type="dfn" id="ref-for-dfn-greyscale-19">greyscale</a> または <a
                            href="#3truecolour" class="internalDFN" data-link-type="dfn"
                            id="ref-for-3truecolour-35">truecolor</a> データを処理する場合、透過ピクセルかどうかを判定するためにサンプル値の両方のバイトを評価すること。
                    </li>

                    <li>圧縮方式 0 で圧縮された画像を処理する場合、デコーダは完全な <a href="#dfn-image-data" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-image-data-36">image data</a>
                        が単一の圧縮データストリームによって表現され、それがいくつかの <a class="chunk" href="#11IDAT">IDAT</a>
                        チャンクに格納されているにすぎないとみなすこと。
                    </li>

                    <li>チャンク順序ルールで指定されたもの以外の、任意の補助チャンクの位置について仮定を行わないこと。</li>
                </ol>
            </section>


            <section id="15ConformanceEditor">
                <div class="header-wrapper">
                    <h4 id="x15-3-4-conformance-of-png-editors"><bdi class="secno">15.3.4 </bdi>PNG エディタの適合性</h4><a
                        class="self-link" href="#15ConformanceEditor" aria-label="Permalink for Section 15.3.4"></a>
                </div>


                <p><a href="#dfn-png-editor" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-png-editor-22">PNG
                        エディタ</a> が本仕様に適合するためには、次の条件を満たす必要があります。</p>

                <ol>
                    <li>PNG エンコーダの要件に適合していること。</li>

                    <li>PNG デコーダの要件に適合していること。</li>

                    <li>デコードしたすべてのチャンクをエンコードできること。</li>

                    <li><a href="#5ChunkOrdering" class="sec-ref"><bdi class="secno">5.6 </bdi>Chunk ordering</a>
                        の規則内で提示されたチャンクの順序を保持すること。
                    </li>

                    <li>safe-to-copy ビット情報を適切に処理し、safe-to-copy 規則が許す場合に未知チャンクを保存すること。</li>

                    <li>ユーザが明示的にロッシー操作を許可しない限り、またはエディタが警告を出さない限り、参照画像を正確に再構築するために必要なすべての情報を保持すること。ただしアルファチャネルのサンプル深度は、ゼロと最大値のみを含む場合には保持する必要はない。color
                        type を変更することや、indexed-color データストリームでパレットを並べ替える操作は、新しいデータストリームが同じ参照画像をロスレスに表現する限り許容される。
                    </li>
                </ol>
            </section>
        </section>
    </section>




    <section class="appendix" id="A-Conventions">
        <div class="header-wrapper">
            <h2 id="IANA-registrations"><bdi class="secno">A. </bdi>インターネットメディアタイプ</h2><a class="self-link"
                href="#IANA-registrations" aria-label="Permalink for Appendix A."></a>
        </div>





        <section id="image-png">
            <div class="header-wrapper">
                <h3 id="A-Media-type"><bdi class="secno">A.1 </bdi>image/png</h3><a class="self-link"
                    href="#A-Media-type" aria-label="Permalink for Appendix A.1"></a>
            </div>


            <p>これは <span class="tt">image/png</span> インターネット・メディアタイプの既存登録を更新するものです。トップレベル型は <span
                    class="tt">image</span> です。本付録は <a href="https://www.rfc-editor.org/info/bcp13">BCP 13</a> および <a
                    href="https://www.w3.org/2020/01/registering-mediatypes.html">W3CRegMedia</a> に準拠しています。</p>

            <dl>
                <dt>Media type name:</dt>

                <dd>image</dd>

                <dt>Media subtype name:</dt>

                <dd>png</dd>

                <dt>Required parameters:</dt>

                <dd>None</dd>

                <dt>Optional parameters:</dt>

                <dd>None</dd>

                <dt>Encoding considerations:</dt>

                <dd>binary</dd>

                <dt>Security considerations:</dt>

                <dd>
                    <p>PNG 文書は明示的に型付けされた「チャンク」の集合で構成されます。PNG 仕様で定義された各チャンク型（<span class="chunk">gIFx</span>
                        を除く）について、それらのチャンクに関連する唯一の効果は受信者の表示またはプリンタ上で画像をレンダリングさせることです。</p>

                    <p><span class="chunk">gIFx</span>
                        チャンク型はアプリケーション拡張データをカプセル化するために使われ、そのデータの利用はセキュリティリスクを呈する可能性がありますが、既知のリスクは報告されていません。同様に、将来のチャンク型（特に未登録のもの）に関連するセキュリティリスクは評価できません。ただし
                        PNG ワーキンググループは「実行可能」データを含むチャンクが登録チャンクになることを許さない意図を持っています。</p>

                    <p>テキストチャンクである <a class="chunk" href="#11tEXt">tEXt</a>、<a class="chunk" href="#11iTXt">iTXT</a>、および
                        <a class="chunk" href="#11zTXt">zTXt</a> は、コメント等として表示可能なデータを含みます。いくつかの OS
                        や端末は埋め込まれた制御文字を含むテキスト表示によりキー再割当やファイル作成などの操作を許す場合があるため、その理由からテキストチャンクは直接表示する前に制御文字でフィルタすることが仕様で推奨されています。
                    </p>

                    <p>PNG 形式はファイル伝送エラーの早期検出を容易にするよう設計されており、チャンク内のデータ整合性を保証するために巡回冗長検査（CRC）を使用します。</p>
                </dd>

                <dt>Interoperability considerations:</dt>

                <dd>Network byte order used throughout.</dd>

                <dt>Published specification:</dt>

                <dd>
                    <a href="https://www.w3.org/TR/PNG/">Portable Network Graphics (PNG) Specification</a>, <a
                        href="https://www.w3.org/TR/PNG/">https://www.w3.org/TR/PNG/</a>
                </dd>

                <dt>Applications which use this media:</dt>

                <dd>PNG is widely implemented in all Web browsers, image viewers, and image creation tools</dd>

                <dt>Fragment identifier considerations:</dt>

                <dd>N/A</dd>

                <dt>Restrictions on usage:</dt>

                <dd>N/A</dd>

                <dt>Provisional registration? (standards tree only):</dt>

                <dd>No</dd>

                <dt>Additional information:</dt>

                <dd>
                    <dl>
                        <dt>Deprecated alias names for this type:</dt>

                        <dd>N/A</dd>

                        <dt>Magic number(s):</dt>

                        <dd>89 50 4E 47 0D 0A 1A 0A</dd>

                        <dt>File extension(s):</dt>

                        <dd>.png</dd>

                        <dt>Macintosh file type code:</dt>

                        <dd>PNGf</dd>

                        <dt>Object Identifiers:</dt>

                        <dd>N/A</dd>
                    </dl>
                </dd>

                <dt>General Comments:</dt>

                <dd>
                    <p>この登録は以前のものを更新するものです：</p>

                    <ol>
                        <li>旧登録は期限切れの Internet Draft を指していました。本更新登録は <abbr title="World Wide Web Consortium">W3C</abbr>
                            推奨勧告を指します。</li>

                        <li>旧連絡担当者は故人になっています。新しい連絡先メールアドレスは PNG ワーキンググループの公開アーカイブされた <abbr
                                title="World Wide Web Consortium">W3C</abbr> メーリングリストです。</li>

                        <li>変更管理者は <abbr title="World Wide Web Consortium">W3C</abbr> です。</li>
                    </ol>
                </dd>

                <dt>Person to contact for further information:</dt>

                <dd>
                    <dl>
                        <dt>Name:</dt>

                        <dd>PNG Working Group</dd>

                        <dt>Email:</dt>

                        <dd>
                            <a href="mailto:public-png@w3.org">public-png@w3.org</a>
                        </dd>
                    </dl>
                </dd>

                <dt>Intended usage:</dt>

                <dd>Common</dd>

                <dt>Author/Change controller:</dt>

                <dd><abbr title="World Wide Web Consortium">W3C</abbr></dd>
            </dl>
        </section>

        <section id="image-apng">
            <div class="header-wrapper">
                <h3 id="a-2-image-apng"><bdi class="secno">A.2 </bdi>image/apng</h3><a class="self-link"
                    href="#image-apng" aria-label="Permalink for Appendix A.2"></a>
            </div>


            <p>この付録は <a href="https://www.rfc-editor.org/info/bcp13">BCP 13</a> および <a
                    href="https://www.w3.org/2020/01/registering-mediatypes.html">W3CRegMedia</a> に準拠しています。</p>

            <dl>
                <dt>Media type name:</dt>

                <dd>image</dd>

                <dt>Media subtype name:</dt>

                <dd>apng</dd>

                <dt>Required parameters:</dt>

                <dd>N/A</dd>

                <dt>Optional parameters:</dt>

                <dd>N/A</dd>

                <dt>Encoding considerations:</dt>

                <dd>binary</dd>

                <dt>Security considerations:</dt>

                <dd>
                    <p><abbr title="Animated PNG">APNG</abbr> 文書は明示的に型付けされた「チャンク」の集合で構成されます。PNG 仕様で定義された各チャンク型（<span
                            class="chunk">gIFx</span> を除く）について、それらのチャンクに関連する唯一の効果は受信者の表示上でアニメーション画像をレンダリングさせることです。</p>

                    <p><span class="chunk">gIFx</span>
                        チャンク型はアプリケーション拡張データをカプセル化するために使われ、その利用はセキュリティリスクを呈する可能性がありますが、既知のリスクはありません。同様に将来のチャンク型（特に未登録のもの）に伴うセキュリティリスクは評価できません。ただし
                        PNG ワーキンググループは「実行可能」データを含むチャンクが登録チャンクになることを許さない意図を持っています。</p>

                    <p>テキストチャンク（<a class="chunk" href="#11tEXt">tEXt</a>、<a class="chunk" href="#11iTXt">iTXt</a>、および <a
                            class="chunk" href="#11zTXt">zTXt</a>）はコメント等として表示可能なデータを含みます。いくつかの OS
                        や端末は埋め込まれた制御文字を含むテキストを表示することでキー再割当やファイル作成などの操作を行わせる可能性があるため、テキストチャンクは直接表示する前に制御文字でフィルタすることが推奨されます。
                    </p>

                    <p>PNG 形式はファイル伝送エラーの早期検出を容易にするよう設計されており、チャンク内のデータ整合性を確保するために巡回冗長検査（CRC）を用います。</p>

                    <p>もし静的画像チャンクとアニメーション画像チャンクが混在する APNG ファイルを作成した場合、APNG
                        をサポートしないツールを使う者は静的画像しか見えず、追加コンテンツに気づかないことがあります。この状況は例えばモデレーションを回避するために悪用され得ます。</p>
                </dd>

                <dt>Interoperability considerations:</dt>

                <dd>None</dd>

                <dt>Published specification:</dt>

                <dd>
                    <a href="https://www.w3.org/TR/png/">Portable Network Graphics (PNG) Specification</a>, <a
                        href="https://www.w3.org/TR/png/">https://www.w3.org/TR/png/</a>
                </dd>

                <dt>Applications which use this media:</dt>

                <dd>Animated PNG (<abbr title="Animated PNG">APNG</abbr>)
                    は広くウェブブラウザに実装され、画像ビューアやアニメーション・画像作成ツールでも利用が増えています。</dd>

                <dt>Fragment identifier considerations:</dt>

                <dd>N/A</dd>

                <dt>Restrictions on usage:</dt>

                <dd>N/A</dd>

                <dt>Provisional registration? (standards tree only):</dt>

                <dd>No</dd>

                <dt>Additional information:</dt>

                <dd>
                    <dl>
                        <dt>Deprecated alias names for this type:</dt>

                        <dd>image/vnd.mozilla.apng</dd>

                        <dt>Magic number(s):</dt>

                        <dd>89 50 4E 47 0D 0A 1A 0A</dd>

                        <dt>File extension(s):</dt>

                        <dd>.apng</dd>

                        <dt>Object Identifiers:</dt>

                        <dd>N/A</dd>
                    </dl>
                </dd>

                <dt>General Comments:</dt>

                <dd>
                    <p>image/apng は 2015 年以来広く未登録で使用されてきました。Animated PNG は 2022 年まで公式 PNG 仕様の一部ではありませんでした。本登録と PNG
                        仕様（第3版）は既に広く展開されている現実と公式文書を整合させるものです。</p>
                </dd>

                <dt>Person to contact for further information:</dt>

                <dd>
                    <dl>
                        <dt>Name:</dt>

                        <dd>PNG Working Group</dd>

                        <dt>Email:</dt>

                        <dd>
                            <a href="mailto:public-png@w3.org">public-png@w3.org</a>
                        </dd>
                    </dl>
                </dd>

                <dt>Intended usage:</dt>

                <dd>Common</dd>

                <dt>Author/Change controller:</dt>

                <dd><abbr title="World Wide Web Consortium">W3C</abbr></dd>
            </dl>
        </section>
    </section>




    <section class="appendix informative" id="B-NewChunksAppendix">
        <div class="header-wrapper">
            <h2 class="Annex" id="newchunks"><bdi class="secno">B. </bdi>私的チャンク型に関するガイドライン</h2><a class="self-link"
                href="#newchunks" aria-label="Permalink for Appendix B."></a>
        </div>
        <p><em>この節は規範的ではありません。</em></p>




        <p>以下は私的チャンクの定義に関するガイドラインです：</p>


        <ol>
            <li>既存のチャンクの意味を再定義したり、既存の標準化チャンクの解釈を変更したりするような新しいチャンクを定義しないでください。例えば RGB とアルファ値が実際には CMYK
                を意味する、などの追加は行ってはいけません。
            </li>

            <li>移植性を高めるために私的チャンクの使用は最小限にしてください。</li>

            <li>データストリーム全体の内容に依存するチャンクの定義は避けてください。もしそのようなチャンクを定義しなければならない場合は、それらをクリティカルチャンクにしてください。</li>

            <li>Latin-1 で表現可能なテキスト情報については、新しいチャンク型を定義するのではなく、適切なキーワードを付けた <a class="chunk" href="#11tEXt">tEXt</a> または
                <a class="chunk" href="#11zTXt">zTXt</a> チャンクを使用してください。Latin-1 で表現できないが UTF-8
                で表現可能なテキスト情報については、適切なキーワードを付けた <a class="chunk" href="#11iTXt">iTXt</a> チャンクを使用してください。
            </li>

            <li>相互に依存する補助情報はひとつのチャンクにまとめてください。これによりチャンク順序の関係を導入する必要がなくなります。</li>

            <li>私的なクリティカルチャンクの定義は避けてください。</li>
        </ol>
    </section>




    <section class="appendix informative" id="C-GammaAppendix">
        <div class="header-wrapper">
            <h2 class="Annex" id="gammachromaticity"><bdi class="secno">C. </bdi>ガンマと色度</h2><a class="self-link"
                href="#gammachromaticity" aria-label="Permalink for Appendix C."></a>
        </div>
        <p><em>この節は規範的ではありません。</em></p>




        <p><a href="#dfn-gamma-value" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gamma-value-28">gamma
                value</a> は、画像の取り込みや再現で遭遇する非線形な <a href="#dfn-transfer-function" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-transfer-function-20">transfer functions</a>
            の近似を記述するために用いられる数値パラメータです。<a href="#dfn-gamma-value" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-gamma-value-29">gamma value</a> はべき法則の関数における指数です。
            例えば次の関数：</p>

        <p><code>intensity = (voltage + constant)<sup>exponent</sup></code>
        </p>

        <p>は CRT（<abbr title="Cathode Ray Tube">Cathode Ray Tube</abbr>）表示器の非線形性をモデル化するために使われます。本国際規格では、この constant が 0
            であると仮定することが多いです。</p>

        <p>本規格の目的のために、一般的な画像パイプラインにおいて非線形な <a href="#dfn-transfer-function" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-transfer-function-21">transfer functions</a>
            が現れ、べき法則でモデル化できる可能性のある五つの位置を考えることが便利です。それぞれに関連する特徴的な指数には特定の名前が付けられます。</p>

        <table id="gamma-pipeline" class="simple numbered">
            <tbody>
                <tr>
                    <td><var>input_exponent</var>
                    </td>
                    <td>イメージセンサの指数。</td>
                </tr>

                <tr>
                    <td><var>encoding_exponent</var>
                    </td>
                    <td>
                        データストリームを書き込むプロセスやデバイスが実行する任意の <a href="#dfn-transfer-function" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-transfer-function-22">transfer function</a> の指数。
                    </td>
                </tr>

                <tr>
                    <td><var>decoding_exponent</var>
                    </td>
                    <td>
                        ソフトウェアが <a href="#dfn-image-data" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-image-data-37">image data</a> ストリームを読み取る際に行う任意の <a
                            href="#dfn-transfer-function" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-transfer-function-23">transfer function</a> の指数。
                    </td>
                </tr>

                <tr>
                    <td><var>LUT_exponent</var>
                    </td>
                    <td>
                        <a href="#dfn-frame-buffer" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-frame-buffer-13">frame buffer</a> と表示デバイスの間で適用される <a
                            href="#dfn-transfer-function" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-transfer-function-24">transfer function</a> の指数（通常はルックアップテーブルによって適用される）。
                    </td>
                </tr>

                <tr>
                    <td><var>output_exponent</var>
                    </td>
                    <td>
                        表示デバイスの指数。CRT の場合、通常約 2.2 に近い値になります。
                    </td>
                </tr>
            </tbody>
        </table>

        <p>いくつかの合成された <a href="#dfn-transfer-function" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-transfer-function-25">transfer functions</a>、すなわち段階の組合せを記述する追加の概念を定義することが便利です。</p>

        <table id="gamma-composite" class="simple numbered">
            <tbody>
                <tr>
                    <td><var>display_exponent</var>
                    </td>
                    <td>
                        <a href="#dfn-frame-buffer" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-frame-buffer-14">frame buffer</a> と表示装置の表示面の間で適用される <a
                            href="#dfn-transfer-function" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-transfer-function-26">transfer function</a> の指数。<br>
                        <code>display_exponent = LUT_exponent * output_exponent</code>
                    </td>
                </tr>

                <tr>
                    <td><var>gamma</var>
                    </td>
                    <td>PNG データストリーム内のサンプルへ表示出力強度を写像する関数の指数。<br>
                        <code>gamma = 1.0 / (decoding_exponent * display_exponent)</code>
                    </td>
                </tr>

                <tr>
                    <td><var>end_to_end_exponent</var>
                    </td>
                    <td>イメージセンサの入力強度から表示出力強度へマッピングする関数の指数。一般に 1.0 から 1.5 の範囲の値です。</td>
                </tr>
            </tbody>
        </table>

        <p>PNG の <a class="chunk" href="#11gAMA">gAMA</a> チャンクは <a href="#dfn-gamma-value" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-gamma-value-30">gamma value</a>
            を記録するために使用されます。この情報は、デコーダが表示環境に関する追加情報と組み合わせて、望ましい表示出力を達成または近似するために使用され得ます。</p>

        <p>この主題に関する追加情報は [<cite><a class="bibref" data-link-type="biblio" href="#bib-gamma-faq"
                    title="Gamma FAQ">GAMMA-FAQ</a></cite>] にあります。</p>

        <p>画像エンコーディングに対するカラースペースの影響に関する追加情報は [<cite><a class="bibref" data-link-type="biblio" href="#bib-kasson"
                    title="An Analysis of Selected Computer Interchange Color Spaces">Kasson</a></cite>] および [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-hill"
                    title="Comparative analysis of the quantization of color spaces on the basis of the CIELAB color-difference formula">Hill</a></cite>]
            にあります。
        </p>

        <p><a href="#dfn-chromaticity" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-chromaticity-5">chromaticity</a> とカラースペースに関する背景情報は [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-color-faq" title="Color FAQ">COLOR-FAQ</a></cite>] にあります。</p>
    </section>




    <section class="appendix" id="D-CRCAppendix">
        <div class="header-wrapper">
            <h2 class="Annex" id="samplecrc"><bdi class="secno">D. </bdi>CRC（巡回冗長検査）のサンプル実装</h2><a class="self-link"
                href="#samplecrc" aria-label="Permalink for Appendix D."></a>
        </div>




        <p>以下のサンプルコード — 参考情報 — は、PNG チャンクで用いられる CRC（Cyclic Redundancy Check）の実用的な実装を示します。（正式な仕様については ISO 3309 [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-iso-3309"
                    title="ISO/IEC 3309:1993, Information Technology — Telecommunications and information exchange between systems — High-level data link control (HDLC) procedures — Frame structure.">ISO-3309</a></cite>]
            や ITU-T V.42 [<cite><a class="bibref" data-link-type="biblio" href="#bib-itu-t-v.42"
                    title="ITU-T V.42, SERIES V: DATA COMMUNICATION OVER THE TELEPHONE NETWORK. Error-correcting procedures for DCEs using asynchronous-to-synchronous conversion">ITU-T-V.42</a></cite>]
            を参照してください。）</p>

        <p>サンプルコードは ISO C [<cite><a class="bibref" data-link-type="biblio" href="#bib-iso_9899"
                    title="ISO/IEC 9899:2018 Information technology — Programming languages — C">ISO_9899</a></cite>]
            のプログラミング言語で書かれています。表 <a href="#D-tabled1" class="table-ref" title="Hints for reading ISO C code">Table <bdi
                    class="">31</bdi></a> のヒントは C 以外のユーザがコードを読みやすくする助けになるでしょう。</p>


        <table id="D-tabled1" class="numbered simple">
            <caption><a class="self-link" href="#D-tabled1">Table <bdi class="tableno">31</bdi></a> <span
                    class="table-title">
                    ISO C コードを読むためのヒント
                </span></caption>

            <tbody>
                <tr>
                    <th>演算子</th>
                    <th>説明</th>
                </tr>

                <tr>
                    <td><code>&amp;</code>
                    </td>
                    <td>ビット単位の AND 演算子。</td>
                </tr>

                <tr>
                    <td><code>^</code>
                    </td>
                    <td>ビット単位の排他的 OR 演算子。</td>
                </tr>

                <tr>
                    <td><code>&gt;&gt;</code>
                    </td>
                    <td>ビット単位の右シフト演算子。ここでのように符号なし量に適用されると、右シフトは左側にゼロを挿入します。</td>
                </tr>

                <tr>
                    <td><code>!</code>
                    </td>
                    <td>論理否定演算子。</td>
                </tr>

                <tr>
                    <td><code>++</code>
                    </td>
                    <td>"<code>n++</code>" は変数 <var>n</var> をインクリメントします。for ループではテストの後に適用されます。</td>
                </tr>

                <tr>
                    <td><code>0xNNN</code>
                    </td>
                    <td><code>0x</code> は 16 進定数を示します。接尾辞 <code>L</code> は long 値（少なくとも 32 ビット）を示します。</td>
                </tr>
            </tbody>
        </table>

        <hr>

        <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-comment">/* Table of CRCs of all 8-bit messages. */</span>
unsigned long crc_table[<span class="hljs-number">256</span>];

<span class="hljs-comment">/* Flag: has the table been computed? Initially false. */</span>
int crc_table_computed = <span class="hljs-number">0</span>;

<span class="hljs-comment">/* Make the table for a fast CRC. */</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">make_crc_table</span>(<span class="hljs-params"><span class="hljs-keyword">void</span></span>)
{
  unsigned long c;
  int n, k;

  <span class="hljs-keyword">for</span> (n = <span class="hljs-number">0</span>; n &lt; <span class="hljs-number">256</span>; n++) {
    c = (unsigned long) n;
    <span class="hljs-keyword">for</span> (k = <span class="hljs-number">0</span>; k &lt; <span class="hljs-number">8</span>; k++) {
      <span class="hljs-keyword">if</span> (c &amp; <span class="hljs-number">1</span>)
        c = 0xedb88320L ^ (c &gt;&gt; <span class="hljs-number">1</span>);
      <span class="hljs-keyword">else</span>
        c = c &gt;&gt; <span class="hljs-number">1</span>;
    }
    crc_table[n] = c;
  }
  crc_table_computed = <span class="hljs-number">1</span>;
}</code></pre>


        <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-comment">/* Update a running CRC with the bytes buf[0..len-1]--the CRC
   should be initialized to all 1's, and the transmitted value
   is the 1's complement of the final running CRC (see the
   crc() routine below). */</span>

unsigned long <span class="hljs-title function_">update_crc</span>(<span class="hljs-params">unsigned long crc, unsigned char *buf,
                         int len</span>)
{
  unsigned long c = crc;
  int n;

  <span class="hljs-keyword">if</span> (!crc_table_computed)
    <span class="hljs-title function_">make_crc_table</span>();
  <span class="hljs-keyword">for</span> (n = <span class="hljs-number">0</span>; n &lt; len; n++) {
    c = crc_table[(c ^ buf[n]) &amp; <span class="hljs-number">0xff</span>] ^ (c &gt;&gt; <span class="hljs-number">8</span>);
  }
  <span class="hljs-keyword">return</span> c;
}

<span class="hljs-comment">/* Return the CRC of the bytes buf[0..len-1]. */</span>
unsigned long <span class="hljs-title function_">crc</span>(<span class="hljs-params">unsigned char *buf, int len</span>)
{
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">update_crc</span>(0xffffffffL, buf, len) ^ 0xffffffffL;
}</code></pre>
    </section>




    <section class="appendix informative" id="E-Resources">
        <div class="header-wrapper">
            <h2 class="Annex" id="onlineresources"><bdi class="secno">E. </bdi>オンラインリソース</h2><a class="self-link"
                href="#onlineresources" aria-label="Permalink for Appendix E."></a>
        </div>
        <p><em>この節は規範的ではありません。</em></p>





        <section class="introductory" id="E-Intro">
            <div class="header-wrapper">
                <h3 id="introduction-10">はじめに</h3><a class="self-link" href="#E-Intro"
                    aria-label="Permalink for this Appendix"></a>
            </div>


            <p>この付録は PNG ソフトウェア開発者のためのいくつかのインターネット上のリソースの所在を示します。インターネットの性質上、このリストは不完全であり変更される可能性があります。</p>
        </section>



        <section id="E-icc-profile-specs">
            <div class="header-wrapper">
                <h3 id="e-1-icc-profile-specifications"><bdi class="secno">E.1 </bdi>ICC プロファイル仕様</h3><a
                    class="self-link" href="#E-icc-profile-specs" aria-label="Permalink for Appendix E.1"></a>
            </div>


            <p>ICC プロファイル仕様は次で参照できます: <a href="https://www.color.org/"><code>https://www.color.org/</code></a></p>
        </section>


        <section id="E-PNG-home-page">
            <div class="header-wrapper">
                <h3 id="e-2-png-web-site"><bdi class="secno">E.2 </bdi>PNG ウェブサイト</h3><a class="self-link"
                    href="#E-PNG-home-page" aria-label="Permalink for Appendix E.2"></a>
            </div>


            <p>PNG の World Wide Web サイトは <a
                    href="http://www.libpng.org/pub/png/"><code>http://www.libpng.org/pub/png/</code></a> にあります。このページは
                PNG と PNG 関連ツールに関する最新情報の中心的な場所です。</p>

            <p>deflate の追加ドキュメントや移植可能な C コード、および最適化された <abbr title="Cyclic Redundancy Code">CRC</abbr> アルゴリズムの実装は zlib
                のウェブサイト <a href="https://www.zlib.net/"><code>https://www.zlib.net/</code></a> で入手できます。
            </p>
        </section>


        <section id="E-Sample-implementation">
            <div class="header-wrapper">
                <h3 id="e-3-sample-implementation-and-test-images"><bdi class="secno">E.3 </bdi>サンプル実装とテスト画像</h3><a
                    class="self-link" href="#E-Sample-implementation" aria-label="Permalink for Appendix E.3"></a>
            </div>


            <p>移植可能な C によるサンプル実装、<strong>libpng</strong> は <a
                    href="http://www.libpng.org/pub/png/libpng.html"><code>http://www.libpng.org/pub/png/libpng.html</code></a>
                で入手できます。libpng のサンプルビューアおよびエンコーダアプリケーションは <a
                    href="http://www.libpng.org/pub/png/book/sources.html"><code>http://www.libpng.org/pub/png/book/sources.html</code></a>
                で入手可能で、<i>PNG: The Definitive Guide</i> [<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-roelofs" title="PNG: The Definitive Guide">ROELOFS</a></cite>] に詳述されています。テスト画像も PNG
                ウェブサイトからアクセスできます。</p>
        </section>
    </section>


    <section id="F-ChangeList" class="appendix informative">
        <div class="header-wrapper">
            <h2 class="Annex" id="f-changes"><bdi class="secno">F. </bdi>変更履歴</h2><a class="self-link"
                href="#F-ChangeList" aria-label="Permalink for Appendix F."></a>
        </div>
        <p><em>この節は非規範です。</em></p>

        <section id="changes-since-the-proposed-recommendation-of-15-may-2025">
            <div class="header-wrapper">
                <h3 id="changes-20250515"><bdi class="secno">F.1 </bdi><a
                        href="https://www.w3.org/TR/2025/PR-png-3-20250515/">Proposed Recommendation of 15 May 2025</a>
                    以降の変更
                </h3><a class="self-link" href="#changes-20250515" aria-label="Permalink for Appendix F.1"></a>
            </div>

            <ul>
                <li><em>なし</em></li>
            </ul>
        </section>


        <section id="changes-since-the-candidate-recommendation-snapshot-of-13-march-2025">
            <div class="header-wrapper">
                <h3 id="changes-20250313"><bdi class="secno">F.2 </bdi><a
                        href="https://www.w3.org/TR/2025/CR-png-3-20250313/">Candidate Recommendation Snapshot of 13
                        March 2025</a> 以降の変更</h3><a class="self-link" href="#changes-20250313"
                    aria-label="Permalink for Appendix F.2"></a>
            </div>

            <ul>
                <li><em>なし</em></li>
            </ul>

        </section>
        <section id="changes-since-the-candidate-recommendation-draft-of-21-january-2025-third-edition">
            <div class="header-wrapper">
                <h3 id="changes-20250121/"><bdi class="secno">F.3 </bdi><a
                        href="https://www.w3.org/TR/2025/CRD-png-3-20250121/">Candidate Recommendation Draft of 21
                        January 2025 (Third Edition)</a> 以降の変更</h3><a class="self-link" href="#changes-20250121/"
                    aria-label="Permalink for Appendix F.3"></a>
            </div>

            <ul>
                <li><span class="chunk">eXIf</span> チャンクの元の著者を明記</li>
                <li>符号なし整数が負になり得ないという無意味な制約を削除（!）</li>
                <li>「Collection」キーワードを拡張ドキュメントから本仕様へ移動</li>
                <li>拡張ドキュメントから EXIF に関する元のセキュリティノートを転載</li>
                <li>ITU H.273 の最新版への参照を更新</li>
            </ul>

        </section>
        <section id="changes-since-the-candidate-recommendation-draft-of-18-july-2024-third-edition">
            <div class="header-wrapper">
                <h3 id="changes-20240718"><bdi class="secno">F.4 </bdi><a
                        href="https://www.w3.org/TR/2024/CRD-png-3-20240718/">Candidate Recommendation Draft of 18 July
                        2024 (Third Edition)</a> 以降の変更</h3><a class="self-link" href="#changes-20240718"
                    aria-label="Permalink for Appendix F.4"></a>
            </div>

            <ul>

                <li><span class="chunk">mDCv</span> を <span class="chunk">mDCV</span> に名称変更</li>
                <li><span class="chunk">cLLi</span> を <span class="chunk">cLLI</span> に名称変更</li>
                <li><span class="chunk">acTL</span> が常に <span class="chunk">IDAT</span> の前にのみ来ることを一貫して要求（<span
                        class="chunk">PLTE</span> の前ではない）</li>
            </ul>

        </section>
        <section id="changes-since-the-candidate-recommendation-snapshot-of-21-september-2023-third-edition">
            <div class="header-wrapper">
                <h3 id="changes-20230921"><bdi class="secno">F.5 </bdi><a
                        href="https://www.w3.org/TR/2023/CR-png-3-20230921/">Candidate Recommendation Snapshot of 21
                        September 2023 (Third Edition)</a> 以降の変更</h3><a class="self-link" href="#changes-20230921"
                    aria-label="Permalink for Appendix F.5"></a>
            </div>

            <ul>
                <li>ビット深度とカラタイプフィールドがプライベート値を取り得ることを明確化</li>
                <li>MaxCLL および MaxFALL の例に十進値と十六進値の両方を列挙</li>
                <li><span class="chunk">mDCV</span> セクションの用語を修正</li>
                <li>cHRM セクションの "PNG image" 用語を修正</li>
                <li>カラーチャンクの優先順位情報を統合</li>
                <li>カラースペースチャンクの優先順位の順序を追加</li>
                <li>カラーチャンク優先度の記述を明確化</li>
                <li>SMPTE RP 2077 を参考情報（informative）としてマーク（自由入手できないため）</li>
                <li>カラーチャンク優先度表を追加</li>
                <li>アルファチャネルは常にフルレンジであることを明確化</li>
                <li><abbr title="Electro-Optical Transfer Function">EOTF</abbr> と <abbr
                        title="Opto-Electrical Transfer Function">OETF</abbr> の定義を追加</li>
                <li>拡張レンジ伝達関数を用いる狭レンジ画像から生じる負値の処理に関する推奨を追加</li>
                <li>"video" と "video full range flag" の説明を明確化（H.273 の用語と一致させるが静止画にも適用される）</li>
                <li>IANA サブタグレジストリへのリンクを追加</li>
                <li>アルファ結合（alpha compaction）およびアルファ分離（alpha separation）セクションへのリンクを修正</li>
                <li>壊れていた tRNS のリンクを修正</li>
                <li>Display P3 の cICP 例を追加</li>
                <li>"perceived"（知覚された）表現を "measured"（測定された）に変更（輝度と色度は知覚色を定義しないため）</li>
                <li>HDR10 のメタデータに含まれるどのメタデータかを明確化</li>
                <li>ITU-R BT.2390 への参照を最新に更新</li>
                <li>現時点で <span class="chunk">mDCV</span> で示される既定の視聴条件（表示輝度と周囲光）から SDR 画像を適合させる公表された標準がないことを注記</li>
                <li>BT.2390 に示される BT.2100 HLG イメージの視聴条件への適応は SDR 画像にも使用できることを注記</li>
                <li>絶対輝度を使用する BT.2100 PQ のようなフォーマットでは、ターゲット表示の輝度レベルに合わせて <span class="chunk">cLLI</span>
                    の輝度レベルをトーンマップしてクリッピングを防ぐことが特に重要であることを注記</li>
                <li>フルレンジ BT.709 値の使用は一般的だが BT.709 標準の一部ではないことを注記</li>
                <li>狭レンジ／フルレンジビデオの説明に Serial Digital Interface（ベースバンドビデオ）用の保護コード値の言及を追加</li>
                <li>ITU-R-BT.2390 への参照を追加</li>
                <li><span class="chunk">mDCV</span> の説明を BT.2100 PQ に焦点を当てるよう変更（他フォーマットでの使用は現在稀であるため）</li>
                <li>16ビット <span class="chunk">tRNS</span> の一致要件を明確化</li>
                <li>"primaries" より正確な表現である "primary chromaticities" を使用</li>
                <li><span class="chunk">mDCV</span> が既存の HDR10 ワークフローの期待に沿うように <span class="chunk">cICP</span>
                    を伴うことを要求に追加</li>
                <li><code>Video Full Range Flag</code> の説明を改善</li>
                <li>シーケンス番号の順序およびエンコードの明確化、<span class="chunk">fdAT</span> の連結はシーケンス番号の順序で行われることを明確化</li>
                <li>関連チャンクの説明に <span class="chunk">cICP</span> の欠落言及を追加</li>
                <li><span class="chunk">mDCV</span> のフィールド順序とバイト順を完全に規定</li>
                <li>PNG の 2 バイト符号なし整数の欠落定義を追加</li>
                <li>SDR の <span class="chunk">mDCV</span> 例で sRGB の代わりに Display P3 を使用</li>
                <li>Chris Needham を共著者として追加</li>
                <li><span class="chunk">mDCV</span> の例を更新、SMPTE-ST-2086 への参照を追加</li>
                <li>Display P3 への参照を追加</li>
                <li><span class="chunk">IDAT</span> と <span class="chunk">fdAT</span>
                    から連結されるデータがゼロ長データのチャンクを含み得ることを明示的に記載</li>
                <li>マークアップ、スタイル、内部相互リンク、タイプミス、句読点、文法、米国英語の一貫使用などの非実質的改善</li>
            </ul>

        </section>
        <section id="changes-since-the-working-draft-of-20-july-2023-third-edition">
            <div class="header-wrapper">
                <h3 id="changes-20230720"><bdi class="secno">F.6 </bdi><a
                        href="https://www.w3.org/TR/2023/WD-png-3-20230720/">Working Draft of 20 July 2023 (Third
                        Edition)</a> 以降の変更</h3><a class="self-link" href="#changes-20230720"
                    aria-label="Permalink for Appendix F.6"></a>
            </div>

            <ul>

                <li><span class="chunk">mDCV</span> と <span class="chunk">cLLi</span> の記述を明確化</li>
                <li><span class="chunk">IEND</span> の後に続く可能性のある悪意あるデータについてのセキュリティ考慮の注記を追加</li>
                <li><a href="#cLLI-chunk" class="chunk">cLLI</a> が HDR コンテンツ向けであることを明確化</li>
                <li>Smith &amp; Zink「On the Calculation and Usage of HDR Static Content Metadata」への参考（informative）を追加
                </li>
                <li>静的 HDR メタデータ用の CTA-861.3-A への参考（informative）を追加</li>
                <li>壊れていた ITU-R BT.2100 への参照を修正</li>
                <li>SMPTE-ST-2067-21 への参照を更新</li>

                <li>MaxCLL と MaxFALL の値を計算するガイダンスを追加</li>
                <li><a href="#cLLI-chunk" class="chunk">cLLI</a> が事前計算できないライブストリーミングの例を追加</li>
                <li>stop、SDR、HDR、HLG、PQ の定義を追加</li>
                <li>狭レンジの定義を明確化</li>
                <li>ITU-T H 補遺 19 の参照を最新に更新</li>
                <li>Simon Thompson を著者として追加</li>
                <li>範囲外のパレットインデックスの取り扱いについて、現在のブラウザ処理を義務付け</li>
                <li>「追加情報」表に <a href="#mDCV-chunk" class="chunk">mDCV</a> と <a href="#cLLI-chunk" class="chunk">cLLI</a>
                    を追加</li>
            </ul>

        </section>
        <section id="changes-since-the-first-public-working-draft-of-25-october-2022-third-edition">
            <div class="header-wrapper">
                <h3 id="changes-20221025"><bdi class="secno">F.7 </bdi><a
                        href="https://www.w3.org/TR/2022/WD-png-3-20221025/">First Public Working Draft of 25 October
                        2022 (Third Edition)</a> 以降の変更</h3><a class="self-link" href="#changes-20221025"
                    aria-label="Permalink for Appendix F.7"></a>
            </div>

            <ul>

                <li>エンコーダとデコーダ向けに、最終 <a href="#11IDAT" class="chunk">IDAT</a> チャンクの末尾バイトの取り扱いに関する望ましい処理を説明</li>
                <li>mDCV が存在する場合の <a href="#dfn-hdr" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-hdr-8">HDR</a> 画像のトーンマッピングに関する未解決の課題へのリンクを追加 [<cite><a class="bibref"
                            data-link-type="biblio" href="#bib-itu-r-bt.2100"
                            title="ITU-R BT.2100, SERIES BT: BROADCASTING SERVICE (TELEVISION). Image parameter values for high dynamic range television for use in production and international programme exchange">ITU-R-BT.2100</a></cite>]。
                </li>
                <li>Encoding Standard に従った UTF-8 のエンコードとデコードの採用</li>
                <li>フレームの定義を追加</li>
                <li><a href="#cICP-chunk" class="chunk">cICP</a> の Matrix Coefficients をゼロ（RGB データ）にすることを要求</li>
                <li>回復可能なデータが抹消されたように見えて実際は残る既知のプライバシ問題を追加</li>
                <li>フィルタ選択に関する助言を改善</li>
                <li>カラ―イメージタイプ定義へのリンクを追加</li>
                <li>MaxFALL は平均輝度の最も高いフレームの値を使用することを明確化</li>
                <li>輝度の単位を明確化</li>
                <li>Creation Time には RFC 3339 形式を推奨</li>
                <li><a href="#mDCV-chunk" class="chunk">mDCV</a> の定義を改善（説明、デフォルト値、SMPTE 標準への参照を含む）</li>
                <li>用語と定義をリファクタリングして明確化</li>
                <li>ソース、参照、PNG イメージの定義を改善</li>
                <li>用語と定義セクションの概念を本文へ移動</li>

                <li><a href="#eXIf" class="chunk">eXIf</a> チャンクのエラー（チャンク順序セクションと矛盾）を修正</li>
                <li><a href="#1Scope">Scope</a> セクションを簡素化して他で重複している詳細を削除</li>
                <li>チャンク順序のラティス図をより明確かつ一貫したものに再作成</li>
                <li><a href="#cLLI-chunk" class="chunk">cLLI</a> という新チャンクを追加（静的およびアニメーション HDR PNG
                    画像の単一ピクセル最大輝度とフレーム平均輝度を記述）</li>
                <li>外部リンクを最新のものへ更新、http より https を優先</li>
                <li><a href="#11tRNS" class="chunk">tRNS</a> と <a href="#11bKGD" class="chunk">bKGD</a>
                    チャンクにおける指定ビット深度を超える余剰ビットの相互運用的な処理を規定</li>
                <li><a href="#mDCV-chunk" class="chunk">mDCV</a> という新チャンクを追加（HDR のマスタリング表示の色空間を記述）</li>

                <li>Unicode 文字名の正しい使用</li>
                <li>チャンク型コードを十進ではなく十六進で表記へ変更</li>
                <li>テキストチャンク処理の記述をより明確に</li>
                <li>新規コンテンツには <a href="#11iTXt" class="chunk">iTXt</a> を推奨</li>
                <li><a href="#11iTXt" class="chunk">iTXt</a> チャンクの言語タグフィールドの説明を明確化、例を BCP47 に合わせて修正</li>
                <li>image/apng 登録付録を更新。APNG MIME タイプが IANA に登録</li>
                <li>ASCII アート図をよりアクセシブルな図に変換</li>
            </ul>

        </section>
        <section id="changes-since-the-w3c-recommendation-of-10-november-2003-png-second-edition">
            <div class="header-wrapper">
                <h3 id="changes-20031110"><bdi class="secno">F.8 </bdi><a
                        href="https://www.w3.org/TR/2003/REC-PNG-20031110/">W3C Recommendation of 10 November
                        2003</a>（PNG Second Edition）以降の変更</h3><a class="self-link" href="#changes-20031110"
                    aria-label="Permalink for Appendix F.8"></a>
            </div>

            <ul>


                <li>
                    <p>これまで定義されていたが非公式であった Animated PNG (<abbr title="Animated PNG">APNG</abbr>) 用の 3 つのチャンクが追加されました：
                    </p>

                    <ul>
                        <li><a href="#acTL-chunk" class="chunk">acTL</a> Animation Control チャンク</li>
                        <li><a href="#fcTL-chunk" class="chunk">fcTL</a> Frame Control チャンク</li>
                        <li><a href="#fdAT-chunk" class="chunk">fdAT</a> Frame Data チャンク</li>
                    </ul>

                    <p>これにより PNG 仕様は広く展開されている業界の実践と整合します。</p>
                </li>

                <li>
                    <p><a class="chunk" href="#cICP-chunk">cICP</a> チャンク（ビデオ信号タイプ識別のための Coding-independent code
                        points）を追加しました。これは [<cite><a class="bibref" data-link-type="biblio" href="#bib-itu-t-h.273"
                                title="ITU-T H.273 ...">ITU-T-H.273</a></cite>] で定義された画像形式メタデータを含めるもので、PNG が [<cite><a
                                class="bibref" data-link-type="biblio" href="#bib-itu-r-bt.2100"
                                title="ITU-R BT.2100 ...">ITU-R-BT.2100</a></cite>] の High Dynamic Range（<a
                            href="#dfn-hdr" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hdr-11">HDR</a>）および
                        Wide Color Gamut（WCG）画像を含められるようにします。</p>
                </li>

                <li>
                    <p>画像のカラースペースを定義するチャンクが複数存在する場合の優先順位が明確に定義されました。</p>
                </li>

                <li>
                    <p>以前定義されていた <a class="chunk" href="#eXIf">eXIf</a> チャンクは PNG-Extensions
                        文書から本仕様の本文へ移されました。これはその使用の増加を反映するためです。</p>
                </li>

                <li>
                    <p>HDR コンテンツのトーンマッピング支援のために、マスタリング時に使用された表示の色空間を記述する <a class="chunk" href="#mDCV-chunk">mDCV</a>
                        チャンクと、ピークおよびフレーム平均輝度レベルを記述する <a href="#cLLI-chunk" class="chunk">cLLI</a>
                        を追加しました。これにより異種プラットフォーム間でのより正確な色合わせが可能になります。</p>
                </li>

                <li>
                    <p>ICC プロファイルを含む <a href="#11iCCP" class="chunk">iCCP</a> チャンクは、ICC.1
                        仕様の任意のバージョンに準拠するプロファイルを含め得ることを明確にしました。PNG Second Edition は当時の v2
                        のみを参照していましたが、その後業界実務としてより高いバージョンも用いられるようになっています。</p>
                </li>

                <li>
                    <p>インデックスカラー PNG における範囲外インデックスの取り扱いを明確化</p>
                </li>

                <li>
                    <p>未知かつ無効な補助チャンクのエラー回復を明確化</p>
                </li>

                <li>
                    <p><a href="https://www.w3.org/2003/11/REC-PNG-20031110-errata">PNG Second Edition Errata</a>
                        の全てを取り込みました。特に、未特定のガンマ値を持つ PNG 画像が HTML や SVG のような形式に埋め込まれた場合、それらは <a
                            href="https://drafts.csswg.org/css-color-4/#untagged">untagged images</a>
                        として扱われるべきであることを明確にしました。</p>
                </li>

                <li>
                    <p>コミュニティからのフィードバックに基づく様々な編集上の明確化</p>
                </li>

                <li>
                    <p>参照を最新版へ更新</p>
                </li>

                <li>
                    <p>マークアップの修正およびリンク修正</p>
                </li>

                <li>
                    <p>ドキュメントソースを ReSpec に合わせて再フォーマット</p>
                </li>
            </ul>

        </section>
        <section id="changes-between-first-and-second-editions">
            <div class="header-wrapper">
                <h3 id="f-8-changes-between-first-and-second-editions"><bdi class="secno">F.9 </bdi>第1版と第2版の差分</h3><a
                    class="self-link" href="#changes-between-first-and-second-editions"
                    aria-label="Permalink for Appendix F.9"></a>
            </div>

            <p><abbr title="World Wide Web Consortium">W3C</abbr> 推奨 <a href="https://www.w3.org/TR/REC-png-961001">PNG
                    Specification Version 1.0</a> と <a href="https://www.w3.org/TR/2003/REC-PNG-20031110/">PNG Second
                    Edition</a> の間の変更一覧は、<a href="https://www.w3.org/TR/2003/REC-PNG-20031110/#F-ChangeList">PNG Second
                    Edition changelist</a> を参照してください。</p>
        </section>
    </section>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-byte"
        aria-label="Links in this document to definition: byte">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-byte"
                aria-label="Permalink for definition: byte. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-byte-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a> <a href="#ref-for-dfn-byte-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-byte-3" title="Reference 3">(3)</a> <a href="#ref-for-dfn-byte-4"
                    title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-byte-order"
        aria-label="Links in this document to definition: byte order">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-byte-order"
                aria-label="Permalink for definition: byte order. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-byte-order-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-chromaticity"
        aria-label="Links in this document to definition: chromaticity">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-chromaticity"
                aria-label="Permalink for definition: chromaticity. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-chromaticity-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a> <a href="#ref-for-dfn-chromaticity-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-chromaticity-3" title="§ 4.7 Additional information">§ 4.7 Additional
                    information</a>
            </li>
            <li>
                <a href="#ref-for-dfn-chromaticity-4" title="§ 11.3.4.4 sPLT Suggested palette">§ 11.3.4.4 sPLT
                    Suggested palette</a>
            </li>
            <li>
                <a href="#ref-for-dfn-chromaticity-5" title="§ C. Gamma and chromaticity">§ C. Gamma and
                    chromaticity</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-composited"
        aria-label="Links in this document to definition: composite (verb)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-composited"
                aria-label="Permalink for definition: composite (verb). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-composited-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a>
            </li>
            <li>
                <a href="#ref-for-dfn-composited-2" title="§ 4.9.3 Output buffer">§ 4.9.3 Output buffer</a>
            </li>
            <li>
                <a href="#ref-for-dfn-composited-3" title="§ 6.2 Alpha representation">§ 6.2 Alpha representation</a> <a
                    href="#ref-for-dfn-composited-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-composited-5" title="§ 11.3.4.4 sPLT Suggested palette">§ 11.3.4.4 sPLT Suggested
                    palette</a>
            </li>
            <li>
                <a href="#ref-for-dfn-composited-6" title="§ 11.3.6.2 fcTL Frame Control Chunk">§ 11.3.6.2 fcTL Frame
                    Control Chunk</a>
            </li>
            <li>
                <a href="#ref-for-dfn-composited-7" title="§ 12.5 Suggested palettes">§ 12.5 Suggested palettes</a> <a
                    href="#ref-for-dfn-composited-8" title="Reference 2">(2)</a> <a href="#ref-for-dfn-composited-9"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-composited-10" title="§ 13.15 Background color">§ 13.15 Background color</a>
            </li>
            <li>
                <a href="#ref-for-dfn-composited-11" title="§ 13.16 Alpha channel processing">§ 13.16 Alpha channel
                    processing</a> <a href="#ref-for-dfn-composited-12" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-composited-13" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-composited-14" title="§ 13.17 Histogram and suggested palette usage">§ 13.17
                    Histogram and suggested palette usage</a> <a href="#ref-for-dfn-composited-15"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-datastream"
        aria-label="Links in this document to definition: datastream">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-datastream"
                aria-label="Permalink for definition: datastream. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-datastream-1" title="§ 5.2 PNG signature">§ 5.2 PNG signature</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-deflate"
        aria-label="Links in this document to definition: deflate">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-deflate"
                aria-label="Permalink for definition: deflate. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-deflate-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deflate-2" title="§ 10.1 Compression method 0">§ 10.1 Compression method 0</a> <a
                    href="#ref-for-dfn-deflate-3" title="Reference 2">(2)</a> <a href="#ref-for-dfn-deflate-4"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-deflate-5" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-deflate-6" title="Reference 5">(5)</a> <a href="#ref-for-dfn-deflate-7"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-deflate-8" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deflate-9" title="§ 10.2 Compression of the sequence of filtered scanlines">§ 10.2
                    Compression of the sequence of filtered scanlines</a> <a href="#ref-for-dfn-deflate-10"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deflate-11" title="§ 11.2.1 IHDR Image header">§ 11.2.1 IHDR Image header</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deflate-12" title="§ 11.3.2.3 iCCP Embedded ICC profile">§ 11.3.2.3 iCCP Embedded
                    ICC profile</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deflate-13" title="§ 11.3.3.1 Keywords and text strings">§ 11.3.3.1 Keywords and
                    text strings</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deflate-14" title="§ 11.3.3.3 zTXt Compressed textual data">§ 11.3.3.3 zTXt
                    Compressed textual data</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deflate-15" title="§ 11.3.3.4 iTXt International textual data">§ 11.3.3.4 iTXt
                    International textual data</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deflate-16" title="§ 13.1 Error handling">§ 13.1 Error handling</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deflate-17" title="§ 13.8 Decompression">§ 13.8 Decompression</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deflate-18" title="§ E.2 PNG web site">§ E.2 PNG web site</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-frame"
        aria-label="Links in this document to definition: frame">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-frame"
                aria-label="Permalink for definition: frame. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-frame-1" title="§ Introduction">§ Introduction</a>
            </li>
            <li>
                <a href="#ref-for-dfn-frame-2" title="§ 11.3.2.8 cLLI Content Light Level Information">§ 11.3.2.8 cLLI
                    Content Light Level Information</a> <a href="#ref-for-dfn-frame-3" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-frame-buffer"
        aria-label="Links in this document to definition: frame buffer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-frame-buffer"
                aria-label="Permalink for definition: frame buffer. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-frame-buffer-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a>
            </li>
            <li>
                <a href="#ref-for-dfn-frame-buffer-2" title="§ 13.12 Sample depth rescaling">§ 13.12 Sample depth
                    rescaling</a>
            </li>
            <li>
                <a href="#ref-for-dfn-frame-buffer-3" title="§ 13.13 Decoder gamma handling">§ 13.13 Decoder gamma
                    handling</a> <a href="#ref-for-dfn-frame-buffer-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-frame-buffer-5" title="Reference 3">(3)</a> <a href="#ref-for-dfn-frame-buffer-6"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-frame-buffer-7" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-frame-buffer-8" title="§ 13.16 Alpha channel processing">§ 13.16 Alpha channel
                    processing</a> <a href="#ref-for-dfn-frame-buffer-9" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-frame-buffer-10" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-frame-buffer-11" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-frame-buffer-12" title="§ 13.17 Histogram and suggested palette usage">§ 13.17
                    Histogram and suggested palette usage</a>
            </li>
            <li>
                <a href="#ref-for-dfn-frame-buffer-13" title="§ C. Gamma and chromaticity">§ C. Gamma and
                    chromaticity</a> <a href="#ref-for-dfn-frame-buffer-14" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-fully-transparent-black"
        aria-label="Links in this document to definition: fully transparent black">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-fully-transparent-black"
                aria-label="Permalink for definition: fully transparent black. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-fully-transparent-black-1" title="§ 4.9.1 Structure">§ 4.9.1 Structure</a> <a
                    href="#ref-for-dfn-fully-transparent-black-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-gamma-value"
        aria-label="Links in this document to definition: gamma value">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-gamma-value"
                aria-label="Permalink for definition: gamma value. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-gamma-value-1" title="§ 4.3 Color spaces">§ 4.3 Color spaces</a>
            </li>
            <li>
                <a href="#ref-for-dfn-gamma-value-2" title="§ 4.7 Additional information">§ 4.7 Additional
                    information</a>
            </li>
            <li>
                <a href="#ref-for-dfn-gamma-value-3" title="§ 11.3.2.2 gAMA Image gamma">§ 11.3.2.2 gAMA Image gamma</a>
                <a href="#ref-for-dfn-gamma-value-4" title="Reference 2">(2)</a> <a href="#ref-for-dfn-gamma-value-5"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-gamma-value-6" title="§ 11.3.4.4 sPLT Suggested palette">§ 11.3.4.4 sPLT Suggested
                    palette</a>
            </li>
            <li>
                <a href="#ref-for-dfn-gamma-value-7" title="§ 12.1 Encoder gamma handling">§ 12.1 Encoder gamma
                    handling</a> <a href="#ref-for-dfn-gamma-value-8" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-gamma-value-9" title="Reference 3">(3)</a> <a href="#ref-for-dfn-gamma-value-10"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-gamma-value-11" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-gamma-value-12" title="Reference 6">(6)</a> <a href="#ref-for-dfn-gamma-value-13"
                    title="Reference 7">(7)</a> <a href="#ref-for-dfn-gamma-value-14" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-gamma-value-15" title="Reference 9">(9)</a> <a href="#ref-for-dfn-gamma-value-16"
                    title="Reference 10">(10)</a> <a href="#ref-for-dfn-gamma-value-17" title="Reference 11">(11)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-gamma-value-18" title="§ 13.13 Decoder gamma handling">§ 13.13 Decoder gamma
                    handling</a> <a href="#ref-for-dfn-gamma-value-19" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-gamma-value-20" title="Reference 3">(3)</a> <a href="#ref-for-dfn-gamma-value-21"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-gamma-value-22" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-gamma-value-23" title="Reference 6">(6)</a> <a href="#ref-for-dfn-gamma-value-24"
                    title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-gamma-value-25" title="§ 13.16 Alpha channel processing">§ 13.16 Alpha channel
                    processing</a> <a href="#ref-for-dfn-gamma-value-26" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-gamma-value-27" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-gamma-value-28" title="§ C. Gamma and chromaticity">§ C. Gamma and
                    chromaticity</a> <a href="#ref-for-dfn-gamma-value-29" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-gamma-value-30" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-gamma"
        aria-label="Links in this document to definition: gamma">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-gamma"
                aria-label="Permalink for definition: gamma. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-gamma-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a>
            </li>
            <li>
                <a href="#ref-for-dfn-gamma-2" title="§ 4.3 Color spaces">§ 4.3 Color spaces</a> <a
                    href="#ref-for-dfn-gamma-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-gamma-4" title="§ 12.1 Encoder gamma handling">§ 12.1 Encoder gamma handling</a>
                <a href="#ref-for-dfn-gamma-5" title="Reference 2">(2)</a> <a href="#ref-for-dfn-gamma-6"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-gamma-7" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-gamma-8" title="Reference 5">(5)</a> <a href="#ref-for-dfn-gamma-9"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-gamma-10" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-gamma-11" title="Reference 8">(8)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-gamma-12" title="§ 12.2 Encoder color handling">§ 12.2 Encoder color handling</a>
            </li>
            <li>
                <a href="#ref-for-dfn-gamma-13" title="§ 13.12 Sample depth rescaling">§ 13.12 Sample depth
                    rescaling</a> <a href="#ref-for-dfn-gamma-14" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-gamma-15" title="§ 13.13 Decoder gamma handling">§ 13.13 Decoder gamma
                    handling</a> <a href="#ref-for-dfn-gamma-16" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-gamma-17" title="Reference 3">(3)</a> <a href="#ref-for-dfn-gamma-18"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-gamma-19" title="§ 13.14 Decoder color handling">§ 13.14 Decoder color
                    handling</a> <a href="#ref-for-dfn-gamma-20" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-gamma-21" title="§ 13.16 Alpha channel processing">§ 13.16 Alpha channel
                    processing</a> <a href="#ref-for-dfn-gamma-22" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-gamma-23" title="Reference 3">(3)</a> <a href="#ref-for-dfn-gamma-24"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-gamma-25" title="Reference 5">(5)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-hdr"
        aria-label="Links in this document to definition: HDR">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-hdr"
                aria-label="Permalink for definition: HDR. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-hdr-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a>
            </li>
            <li>
                <a href="#ref-for-dfn-hdr-2" title="§ 4.7 Additional information">§ 4.7 Additional information</a>
            </li>
            <li>
                <a href="#ref-for-dfn-hdr-3" title="§ 11.3.2.7 mDCV Mastering Display Color Volume">§ 11.3.2.7 mDCV
                    Mastering Display Color Volume</a> <a href="#ref-for-dfn-hdr-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-hdr-5" title="Reference 3">(3)</a> <a href="#ref-for-dfn-hdr-6"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-hdr-7" title="§ 11.3.2.8 cLLI Content Light Level Information">§ 11.3.2.8 cLLI
                    Content Light Level Information</a>
            </li>
            <li>
                <a href="#ref-for-dfn-hdr-8"
                    title="§ F.6 Changes since the First Public Working Draft of 25 October 2022 (Third Edition)">§ F.6
                    Changes since the First Public Working Draft of 25 October 2022 (Third Edition)</a> <a
                    href="#ref-for-dfn-hdr-9" title="Reference 2">(2)</a> <a href="#ref-for-dfn-hdr-10"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-hdr-11"
                    title="§ F.7 Changes since the W3C Recommendation of 10 November 2003 (PNG Second Edition)">§ F.7
                    Changes since the W3C Recommendation of 10 November 2003 (PNG Second Edition)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-hlg"
        aria-label="Links in this document to definition: HLG">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-hlg"
                aria-label="Permalink for definition: HLG. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-hlg-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a>
            </li>
            <li>
                <a href="#ref-for-dfn-hlg-2"
                    title="§ 11.3.2.6 cICP Coding-independent code points for video signal type identification">§
                    11.3.2.6 cICP Coding-independent code points for video signal type identification</a>
            </li>
            <li>
                <a href="#ref-for-dfn-hlg-3" title="§ 11.3.2.7 mDCV Mastering Display Color Volume">§ 11.3.2.7 mDCV
                    Mastering Display Color Volume</a> <a href="#ref-for-dfn-hlg-4" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-full-range-image"
        aria-label="Links in this document to definition: full-range image">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-full-range-image"
                aria-label="Permalink for definition: full-range image. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-full-range-image-1"
                    title="§ 11.3.2.6 cICP Coding-independent code points for video signal type identification">§
                    11.3.2.6 cICP Coding-independent code points for video signal type identification</a> <a
                    href="#ref-for-dfn-full-range-image-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-full-range-image-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-full-range-image-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-full-range-image-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-full-range-image-6" title="Reference 6">(6)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-image-data"
        aria-label="Links in this document to definition: image data">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-image-data"
                aria-label="Permalink for definition: image data. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-image-data-1" title="§ 4.6.3 Filtering">§ 4.6.3 Filtering</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-2" title="§ 7.3 Filtering">§ 7.3 Filtering</a> <a
                    href="#ref-for-dfn-image-data-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-4" title="§ 9.2 Filter types for filter method 0">§ 9.2 Filter types
                    for filter method 0</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-5" title="§ 10.2 Compression of the sequence of filtered scanlines">§
                    10.2 Compression of the sequence of filtered scanlines</a> <a href="#ref-for-dfn-image-data-6"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-7" title="§ 10.3 Other uses of compression">§ 10.3 Other uses of
                    compression</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-8" title="§ 11.2.1 IHDR Image header">§ 11.2.1 IHDR Image header</a> <a
                    href="#ref-for-dfn-image-data-9" title="Reference 2">(2)</a> <a href="#ref-for-dfn-image-data-10"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-11" title="§ 11.2.2 PLTE Palette">§ 11.2.2 PLTE Palette</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-12" title="§ 11.2.3 IDAT Image data">§ 11.2.3 IDAT Image data</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-13" title="§ 11.3.4.5 eXIf Exchangeable Image File (Exif) Profile">§
                    11.3.4.5 eXIf Exchangeable Image File (Exif) Profile</a> <a href="#ref-for-dfn-image-data-14"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-15" title="§ 11.3.5.1 tIME Image last-modification time">§ 11.3.5.1
                    tIME Image last-modification time</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-16" title="§ 11.3.6.3 fdAT Frame Data Chunk">§ 11.3.6.3 fdAT Frame Data
                    Chunk</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-17" title="§ 12.4 Sample depth scaling">§ 12.4 Sample depth scaling</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-18" title="§ 12.5 Suggested palettes">§ 12.5 Suggested palettes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-19" title="§ 12.9 Text chunk processing">§ 12.9 Text chunk
                    processing</a> <a href="#ref-for-dfn-image-data-20" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-21" title="§ 13.1 Error handling">§ 13.1 Error handling</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-22" title="§ 13.8 Decompression">§ 13.8 Decompression</a> <a
                    href="#ref-for-dfn-image-data-23" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-24" title="§ 13.9 Filtering">§ 13.9 Filtering</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-25" title="§ 13.12 Sample depth rescaling">§ 13.12 Sample depth
                    rescaling</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-26" title="§ 13.14 Decoder color handling">§ 13.14 Decoder color
                    handling</a> <a href="#ref-for-dfn-image-data-27" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-image-data-28" title="Reference 3">(3)</a> <a href="#ref-for-dfn-image-data-29"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-image-data-30" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-image-data-31" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-32" title="§ 13.17 Histogram and suggested palette usage">§ 13.17
                    Histogram and suggested palette usage</a> <a href="#ref-for-dfn-image-data-33"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-34" title="§ 14.2 Behavior of PNG editors">§ 14.2 Behavior of PNG
                    editors</a> <a href="#ref-for-dfn-image-data-35" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-36" title="§ 15.3.3 Conformance of PNG decoders">§ 15.3.3 Conformance
                    of PNG decoders</a>
            </li>
            <li>
                <a href="#ref-for-dfn-image-data-37" title="§ C. Gamma and chromaticity">§ C. Gamma and chromaticity</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-interlaced-png-image"
        aria-label="Links in this document to definition: interlaced PNG image">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-interlaced-png-image"
                aria-label="Permalink for definition: interlaced PNG image. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-interlaced-png-image-1" title="§ 3. Terms, definitions, and abbreviated terms">§
                    3. Terms, definitions, and abbreviated terms</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-lossless"
        aria-label="Links in this document to definition: lossless">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-lossless"
                aria-label="Permalink for definition: lossless. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-lossless-1" title="§ Abstract">§ Abstract</a>
            </li>
            <li>
                <a href="#ref-for-dfn-lossless-2" title="§ 2. Scope">§ 2. Scope</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-luminance"
        aria-label="Links in this document to definition: luminance">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-luminance"
                aria-label="Permalink for definition: luminance. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-luminance-1" title="§ 4.5 PNG image">§ 4.5 PNG image</a>
            </li>
            <li>
                <a href="#ref-for-dfn-luminance-2" title="§ 4.7 Additional information">§ 4.7 Additional information</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3LZ77"
        aria-label="Links in this document to definition: LZ77">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3LZ77"
                aria-label="Permalink for definition: LZ77. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3LZ77-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a>
            </li>
            <li>
                <a href="#ref-for-3LZ77-2" title="§ 10.1 Compression method 0">§ 10.1 Compression method 0</a> <a
                    href="#ref-for-3LZ77-3" title="Reference 2">(2)</a> <a href="#ref-for-3LZ77-4"
                    title="Reference 3">(3)</a> <a href="#ref-for-3LZ77-5" title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-narrow-range-image"
        aria-label="Links in this document to definition: narrow-range image">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-narrow-range-image"
                aria-label="Permalink for definition: narrow-range image. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-narrow-range-image-1"
                    title="§ 11.3.2.6 cICP Coding-independent code points for video signal type identification">§
                    11.3.2.6 cICP Coding-independent code points for video signal type identification</a> <a
                    href="#ref-for-dfn-narrow-range-image-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-narrow-range-image-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-narrow-range-image-4" title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-network-byte-order"
        aria-label="Links in this document to definition: network byte order">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-network-byte-order"
                aria-label="Permalink for definition: network byte order. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-network-byte-order-1" title="§ 7.1 Integers and byte order">§ 7.1 Integers and
                    byte order</a>
            </li>
            <li>
                <a href="#ref-for-dfn-network-byte-order-2" title="§ 7.2 Scanlines">§ 7.2 Scanlines</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-pq"
        aria-label="Links in this document to definition: PQ">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-pq"
                aria-label="Permalink for definition: PQ. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-pq-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a>
            </li>
            <li>
                <a href="#ref-for-dfn-pq-2"
                    title="§ 11.3.2.6 cICP Coding-independent code points for video signal type identification">§
                    11.3.2.6 cICP Coding-independent code points for video signal type identification</a>
            </li>
            <li>
                <a href="#ref-for-dfn-pq-3" title="§ 11.3.2.7 mDCV Mastering Display Color Volume">§ 11.3.2.7 mDCV
                    Mastering Display Color Volume</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-png-editor"
        aria-label="Links in this document to definition: PNG editor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-png-editor"
                aria-label="Permalink for definition: PNG editor. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-png-editor-1" title="§ 4.2 Images">§ 4.2 Images</a>
            </li>
            <li>
                <a href="#ref-for-dfn-png-editor-2" title="§ 5.4 Chunk naming conventions">§ 5.4 Chunk naming
                    conventions</a> <a href="#ref-for-dfn-png-editor-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-png-editor-4" title="§ 12.5 Suggested palettes">§ 12.5 Suggested palettes</a> <a
                    href="#ref-for-dfn-png-editor-5" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-png-editor-6" title="§ 13.1 Error handling">§ 13.1 Error handling</a>
            </li>
            <li>
                <a href="#ref-for-dfn-png-editor-7" title="§ 14.2 Behavior of PNG editors">§ 14.2 Behavior of PNG
                    editors</a> <a href="#ref-for-dfn-png-editor-8" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-png-editor-9" title="Reference 3">(3)</a> <a href="#ref-for-dfn-png-editor-10"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-png-editor-11" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-png-editor-12" title="Reference 6">(6)</a> <a href="#ref-for-dfn-png-editor-13"
                    title="Reference 7">(7)</a> <a href="#ref-for-dfn-png-editor-14" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-png-editor-15" title="Reference 9">(9)</a> <a href="#ref-for-dfn-png-editor-16"
                    title="Reference 10">(10)</a> <a href="#ref-for-dfn-png-editor-17" title="Reference 11">(11)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-png-editor-18" title="§ 14.3.1 Ordering of critical chunks">§ 14.3.1 Ordering of
                    critical chunks</a>
            </li>
            <li>
                <a href="#ref-for-dfn-png-editor-19" title="§ 14.3.2 Ordering of ancillary chunks">§ 14.3.2 Ordering of
                    ancillary chunks</a>
            </li>
            <li>
                <a href="#ref-for-dfn-png-editor-20" title="§ 15.2.1 Objectives">§ 15.2.1 Objectives</a>
            </li>
            <li>
                <a href="#ref-for-dfn-png-editor-21" title="§ 15.2.2 Scope">§ 15.2.2 Scope</a>
            </li>
            <li>
                <a href="#ref-for-dfn-png-editor-22" title="§ 15.3.4 Conformance of PNG editors">§ 15.3.4 Conformance of
                    PNG editors</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-png-four-byte-unsigned-integer"
        aria-label="Links in this document to definition: PNG four-byte unsigned integer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-png-four-byte-unsigned-integer"
                aria-label="Permalink for definition: PNG four-byte unsigned integer. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-png-four-byte-unsigned-integer-1" title="§ 5.3 Chunk layout">§ 5.3 Chunk
                    layout</a>
            </li>
            <li>
                <a href="#ref-for-dfn-png-four-byte-unsigned-integer-2" title="§ 7.1 Integers and byte order">§ 7.1
                    Integers and byte order</a>
            </li>
            <li>
                <a href="#ref-for-dfn-png-four-byte-unsigned-integer-3" title="§ 11.2.1 IHDR Image header">§ 11.2.1 IHDR
                    Image header</a>
            </li>
            <li>
                <a href="#ref-for-dfn-png-four-byte-unsigned-integer-4"
                    title="§ 11.3.2.1 cHRM Primary chromaticities and white point">§ 11.3.2.1 cHRM Primary
                    chromaticities and white point</a>
            </li>
            <li>
                <a href="#ref-for-dfn-png-four-byte-unsigned-integer-5" title="§ 11.3.2.2 gAMA Image gamma">§ 11.3.2.2
                    gAMA Image gamma</a>
            </li>
            <li>
                <a href="#ref-for-dfn-png-four-byte-unsigned-integer-6"
                    title="§ 11.3.2.7 mDCV Mastering Display Color Volume">§ 11.3.2.7 mDCV Mastering Display Color
                    Volume</a>
            </li>
            <li>
                <a href="#ref-for-dfn-png-four-byte-unsigned-integer-7"
                    title="§ 11.3.2.8 cLLI Content Light Level Information">§ 11.3.2.8 cLLI Content Light Level
                    Information</a>
            </li>
            <li>
                <a href="#ref-for-dfn-png-four-byte-unsigned-integer-8"
                    title="§ 11.3.4.3 pHYs Physical pixel dimensions">§ 11.3.4.3 pHYs Physical pixel dimensions</a> <a
                    href="#ref-for-dfn-png-four-byte-unsigned-integer-9" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-png-four-byte-unsigned-integer-10"
                    title="§ 11.3.6.1 acTL Animation Control Chunk">§ 11.3.6.1 acTL Animation Control Chunk</a>
            </li>
            <li>
                <a href="#ref-for-dfn-png-four-byte-unsigned-integer-11" title="§ 11.3.6.2 fcTL Frame Control Chunk">§
                    11.3.6.2 fcTL Frame Control Chunk</a> <a href="#ref-for-dfn-png-four-byte-unsigned-integer-12"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-png-four-byte-unsigned-integer-13"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-png-two-byte-unsigned-integer"
        aria-label="Links in this document to definition: PNG two-byte unsigned integer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-png-two-byte-unsigned-integer"
                aria-label="Permalink for definition: PNG two-byte unsigned integer. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-png-two-byte-unsigned-integer-1"
                    title="§ 11.3.2.7 mDCV Mastering Display Color Volume">§ 11.3.2.7 mDCV Mastering Display Color
                    Volume</a> <a href="#ref-for-dfn-png-two-byte-unsigned-integer-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-sample"
        aria-label="Links in this document to definition: sample">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-sample"
                aria-label="Permalink for definition: sample. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-sample-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a>
            </li>
            <li>
                <a href="#ref-for-dfn-sample-2" title="§ 4.5 PNG image">§ 4.5 PNG image</a> <a
                    href="#ref-for-dfn-sample-3" title="Reference 2">(2)</a> <a href="#ref-for-dfn-sample-4"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-sample-5" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-sample-6" title="Reference 5">(5)</a> <a href="#ref-for-dfn-sample-7"
                    title="Reference 6">(6)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-scanline"
        aria-label="Links in this document to definition: scanline">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-scanline"
                aria-label="Permalink for definition: scanline. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-scanline-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a>
            </li>
            <li>
                <a href="#ref-for-dfn-scanline-2" title="§ 7.3 Filtering">§ 7.3 Filtering</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-sdr"
        aria-label="Links in this document to definition: SDR">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-sdr"
                aria-label="Permalink for definition: SDR. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-sdr-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a>
            </li>
            <li>
                <a href="#ref-for-dfn-sdr-2" title="§ 4.7 Additional information">§ 4.7 Additional information</a>
            </li>
            <li>
                <a href="#ref-for-dfn-sdr-3" title="§ 11.3.2.7 mDCV Mastering Display Color Volume">§ 11.3.2.7 mDCV
                    Mastering Display Color Volume</a> <a href="#ref-for-dfn-sdr-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-sdr-5" title="Reference 3">(3)</a> <a href="#ref-for-dfn-sdr-6"
                    title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-stop"
        aria-label="Links in this document to definition: stop">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-stop"
                aria-label="Permalink for definition: stop. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-stop-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a> <a href="#ref-for-dfn-stop-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-transfer-function"
        aria-label="Links in this document to definition: transfer function">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-transfer-function"
                aria-label="Permalink for definition: transfer function. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-transfer-function-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3.
                    Terms, definitions, and abbreviated terms</a> <a href="#ref-for-dfn-transfer-function-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-transfer-function-3" title="Reference 3">(3)</a>
                <a href="#ref-for-dfn-transfer-function-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-transfer-function-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-transfer-function-6" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-transfer-function-7" title="§ 4.7 Additional information">§ 4.7 Additional
                    information</a>
            </li>
            <li>
                <a href="#ref-for-dfn-transfer-function-8"
                    title="§ 11.3.2.6 cICP Coding-independent code points for video signal type identification">§
                    11.3.2.6 cICP Coding-independent code points for video signal type identification</a> <a
                    href="#ref-for-dfn-transfer-function-9" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-transfer-function-10" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-transfer-function-11" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-transfer-function-12" title="§ 12.1 Encoder gamma handling">§ 12.1 Encoder gamma
                    handling</a> <a href="#ref-for-dfn-transfer-function-13" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-transfer-function-14" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-transfer-function-15" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-transfer-function-16" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-transfer-function-17" title="§ 13.13 Decoder gamma handling">§ 13.13 Decoder gamma
                    handling</a> <a href="#ref-for-dfn-transfer-function-18" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-transfer-function-19" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-transfer-function-20" title="§ C. Gamma and chromaticity">§ C. Gamma and
                    chromaticity</a> <a href="#ref-for-dfn-transfer-function-21" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-transfer-function-22" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-transfer-function-23" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-transfer-function-24" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-transfer-function-25" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-transfer-function-26" title="Reference 7">(7)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-white-point"
        aria-label="Links in this document to definition: white point">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-white-point"
                aria-label="Permalink for definition: white point. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-white-point-1" title="§ 4.3 Color spaces">§ 4.3 Color spaces</a>
            </li>
            <li>
                <a href="#ref-for-dfn-white-point-2" title="§ 11.3.2.1 cHRM Primary chromaticities and white point">§
                    11.3.2.1 cHRM Primary chromaticities and white point</a>
            </li>
            <li>
                <a href="#ref-for-dfn-white-point-3" title="§ 11.3.2.5 sRGB Standard RGB color space">§ 11.3.2.5 sRGB
                    Standard RGB color space</a>
            </li>
            <li>
                <a href="#ref-for-dfn-white-point-4" title="§ 12.2 Encoder color handling">§ 12.2 Encoder color
                    handling</a> <a href="#ref-for-dfn-white-point-5" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-zlib"
        aria-label="Links in this document to definition: zlib">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-zlib"
                aria-label="Permalink for definition: zlib. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-zlib-1" title="§ 10.1 Compression method 0">§ 10.1 Compression method 0</a> <a
                    href="#ref-for-dfn-zlib-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-zlib-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-zlib-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-zlib-5" title="Reference 5">(5)</a> <a href="#ref-for-dfn-zlib-6"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-zlib-7" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-zlib-8" title="§ 10.2 Compression of the sequence of filtered scanlines">§ 10.2
                    Compression of the sequence of filtered scanlines</a> <a href="#ref-for-dfn-zlib-9"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-zlib-10" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-zlib-11" title="Reference 4">(4)</a> <a href="#ref-for-dfn-zlib-12"
                    title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-zlib-13" title="§ 10.3 Other uses of compression">§ 10.3 Other uses of
                    compression</a>
            </li>
            <li>
                <a href="#ref-for-dfn-zlib-14" title="§ 11.3.2.3 iCCP Embedded ICC profile">§ 11.3.2.3 iCCP Embedded ICC
                    profile</a>
            </li>
            <li>
                <a href="#ref-for-dfn-zlib-15" title="§ 11.3.3.1 Keywords and text strings">§ 11.3.3.1 Keywords and text
                    strings</a>
            </li>
            <li>
                <a href="#ref-for-dfn-zlib-16" title="§ 11.3.3.3 zTXt Compressed textual data">§ 11.3.3.3 zTXt
                    Compressed textual data</a>
            </li>
            <li>
                <a href="#ref-for-dfn-zlib-17" title="§ 11.3.3.4 iTXt International textual data">§ 11.3.3.4 iTXt
                    International textual data</a>
            </li>
            <li>
                <a href="#ref-for-dfn-zlib-18" title="§ 13.8 Decompression">§ 13.8 Decompression</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-eotf"
        aria-label="Links in this document to definition: EOTF">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-eotf"
                aria-label="Permalink for definition: EOTF. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-eotf-1"
                    title="§ 11.3.2.6 cICP Coding-independent code points for video signal type identification">§
                    11.3.2.6 cICP Coding-independent code points for video signal type identification</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-oetf"
        aria-label="Links in this document to definition: OETF">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-oetf"
                aria-label="Permalink for definition: OETF. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-oetf-1"
                    title="§ 11.3.2.6 cICP Coding-independent code points for video signal type identification">§
                    11.3.2.6 cICP Coding-independent code points for video signal type identification</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-static-image"
        aria-label="Links in this document to definition: static image">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-static-image"
                aria-label="Permalink for definition: static image. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-static-image-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a>
            </li>
            <li>
                <a href="#ref-for-dfn-static-image-2" title="§ 4.1 Static and Animated images">§ 4.1 Static and Animated
                    images</a> <a href="#ref-for-dfn-static-image-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-static-image-4" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-static-image-5" title="§ 4.7 Additional information">§ 4.7 Additional
                    information</a>
            </li>
            <li>
                <a href="#ref-for-dfn-static-image-6" title="§ Introduction">§ Introduction</a>
            </li>
            <li>
                <a href="#ref-for-dfn-static-image-7" title="§ 11.3.6.3 fdAT Frame Data Chunk">§ 11.3.6.3 fdAT Frame
                    Data Chunk</a> <a href="#ref-for-dfn-static-image-8" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-animated-png"
        aria-label="Links in this document to definition: Animated PNG">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-animated-png"
                aria-label="Permalink for definition: Animated PNG. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-animated-image"
        aria-label="Links in this document to definition: animated image">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-animated-image"
                aria-label="Permalink for definition: animated image. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-animated-image-1" title="§ 4.1 Static and Animated images">§ 4.1 Static and
                    Animated images</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3sourceImage"
        aria-label="Links in this document to definition: Source image">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3sourceImage"
                aria-label="Permalink for definition: Source image. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3sourceImage-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3referenceImage"
        aria-label="Links in this document to definition: Reference image">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3referenceImage"
                aria-label="Permalink for definition: Reference image. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3referenceImage-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a> <a href="#ref-for-3referenceImage-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-3referenceImage-3" title="§ 4.2 Images">§ 4.2 Images</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3pixel"
        aria-label="Links in this document to definition: pixels">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3pixel"
                aria-label="Permalink for definition: pixels. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3pixel-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a> <a href="#ref-for-3pixel-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-3pixel-3" title="§ 4.5 PNG image">§ 4.5 PNG image</a> <a href="#ref-for-3pixel-4"
                    title="Reference 2">(2)</a> <a href="#ref-for-3pixel-5" title="Reference 3">(3)</a> <a
                    href="#ref-for-3pixel-6" title="Reference 4">(4)</a> <a href="#ref-for-3pixel-7"
                    title="Reference 5">(5)</a> <a href="#ref-for-3pixel-8" title="Reference 6">(6)</a> <a
                    href="#ref-for-3pixel-9" title="Reference 7">(7)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3channel"
        aria-label="Links in this document to definition: channel">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3channel"
                aria-label="Permalink for definition: channel. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3channel-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3alpha"
        aria-label="Links in this document to definition: alpha">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3alpha"
                aria-label="Permalink for definition: alpha. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3alpha-1" title="§ 4.5 PNG image">§ 4.5 PNG image</a> <a href="#ref-for-3alpha-2"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3PNGimage"
        aria-label="Links in this document to definition: PNG image">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3PNGimage"
                aria-label="Permalink for definition: PNG image. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3PNGimage-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a>
            </li>
            <li>
                <a href="#ref-for-3PNGimage-2" title="§ 5.1 PNG datastream">§ 5.1 PNG datastream</a>
            </li>
            <li>
                <a href="#ref-for-3PNGimage-3" title="§ 11.3.2.1 cHRM Primary chromaticities and white point">§ 11.3.2.1
                    cHRM Primary chromaticities and white point</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3deliveredImage"
        aria-label="Links in this document to definition: Delivered image">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3deliveredImage"
                aria-label="Permalink for definition: Delivered image. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3deliveredImage-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a>
            </li>
            <li>
                <a href="#ref-for-3deliveredImage-2" title="§ 4.2 Images">§ 4.2 Images</a> <a
                    href="#ref-for-3deliveredImage-3" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3alphaSeparation"
        aria-label="Links in this document to definition: Alpha separation">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3alphaSeparation"
                aria-label="Permalink for definition: Alpha separation. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3alphaSeparation-1" title="§ 4.2 Images">§ 4.2 Images</a>
            </li>
            <li>
                <a href="#ref-for-3alphaSeparation-2" title="§ Introduction">§ Introduction</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3indexing"
        aria-label="Links in this document to definition: indexing">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3indexing"
                aria-label="Permalink for definition: indexing. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3indexing-1" title="§ 4.2 Images">§ 4.2 Images</a>
            </li>
            <li>
                <a href="#ref-for-3indexing-2" title="§ Introduction">§ Introduction</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3indexedColour"
        aria-label="Links in this document to definition: indexed-color">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3indexedColour"
                aria-label="Permalink for definition: indexed-color. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3indexedColour-1" title="§ Abstract">§ Abstract</a>
            </li>
            <li>
                <a href="#ref-for-3indexedColour-2" title="§ 1. Introduction">§ 1. Introduction</a>
            </li>
            <li>
                <a href="#ref-for-3indexedColour-3" title="§ 4.4.2 Indexing">§ 4.4.2 Indexing</a> <a
                    href="#ref-for-3indexedColour-4" title="Reference 2">(2)</a> <a href="#ref-for-3indexedColour-5"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-3indexedColour-6" title="§ 4.5 PNG image">§ 4.5 PNG image</a> <a
                    href="#ref-for-3indexedColour-7" title="Reference 2">(2)</a> <a href="#ref-for-3indexedColour-8"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-3indexedColour-9" title="§ 6.2 Alpha representation">§ 6.2 Alpha representation</a> <a
                    href="#ref-for-3indexedColour-10" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-3indexedColour-11" title="§ 7.2 Scanlines">§ 7.2 Scanlines</a>
            </li>
            <li>
                <a href="#ref-for-3indexedColour-12" title="§ 11.2.1 IHDR Image header">§ 11.2.1 IHDR Image header</a>
            </li>
            <li>
                <a href="#ref-for-3indexedColour-13" title="§ 11.3.1.1 tRNS Transparency">§ 11.3.1.1 tRNS
                    Transparency</a>
            </li>
            <li>
                <a href="#ref-for-3indexedColour-14" title="§ 11.3.2.4 sBIT Significant bits">§ 11.3.2.4 sBIT
                    Significant bits</a>
            </li>
            <li>
                <a href="#ref-for-3indexedColour-15" title="§ 11.3.4.1 bKGD Background color">§ 11.3.4.1 bKGD Background
                    color</a>
            </li>
            <li>
                <a href="#ref-for-3indexedColour-16" title="§ 12.5 Suggested palettes">§ 12.5 Suggested palettes</a>
            </li>
            <li>
                <a href="#ref-for-3indexedColour-17" title="§ 12.7 Filter selection">§ 12.7 Filter selection</a>
            </li>
            <li>
                <a href="#ref-for-3indexedColour-18" title="§ 13.11 Truecolor image handling">§ 13.11 Truecolor image
                    handling</a>
            </li>
            <li>
                <a href="#ref-for-3indexedColour-19" title="§ 13.15 Background color">§ 13.15 Background color</a>
            </li>
            <li>
                <a href="#ref-for-3indexedColour-20" title="§ 13.16 Alpha channel processing">§ 13.16 Alpha channel
                    processing</a>
            </li>
            <li>
                <a href="#ref-for-3indexedColour-21" title="§ 15.3.4 Conformance of PNG editors">§ 15.3.4 Conformance of
                    PNG editors</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3palette"
        aria-label="Links in this document to definition: palette">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3palette"
                aria-label="Permalink for definition: palette. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3palette-1" title="§ Introduction">§ Introduction</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3alphaTable"
        aria-label="Links in this document to definition: alpha table">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3alphaTable"
                aria-label="Permalink for definition: alpha table. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3alphaTable-1" title="§ Introduction">§ Introduction</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3RGBmerging"
        aria-label="Links in this document to definition: RGB merging">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3RGBmerging"
                aria-label="Permalink for definition: RGB merging. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3RGBmerging-1" title="§ 4.2 Images">§ 4.2 Images</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3alphaCompaction"
        aria-label="Links in this document to definition: Alpha compaction">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3alphaCompaction"
                aria-label="Permalink for definition: Alpha compaction. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3alphaCompaction-1" title="§ 4.2 Images">§ 4.2 Images</a>
            </li>
            <li>
                <a href="#ref-for-3alphaCompaction-2" title="§ Introduction">§ Introduction</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3sampleDepthScaling"
        aria-label="Links in this document to definition: Sample depth scaling">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3sampleDepthScaling"
                aria-label="Permalink for definition: Sample depth scaling. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3sampleDepthScaling-1" title="§ 4.2 Images">§ 4.2 Images</a>
            </li>
            <li>
                <a href="#ref-for-3sampleDepthScaling-2" title="§ 4.4.5 Sample depth scaling">§ 4.4.5 Sample depth
                    scaling</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-truecolor-with-alpha"
        aria-label="Links in this document to definition: Truecolor with alpha">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-truecolor-with-alpha"
                aria-label="Permalink for definition: Truecolor with alpha. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-truecolor-with-alpha-1" title="§ 4.5 PNG image">§ 4.5 PNG image</a>
            </li>
            <li>
                <a href="#ref-for-dfn-truecolor-with-alpha-2" title="§ 6.2 Alpha representation">§ 6.2 Alpha
                    representation</a>
            </li>
            <li>
                <a href="#ref-for-dfn-truecolor-with-alpha-3" title="§ 11.2.2 PLTE Palette">§ 11.2.2 PLTE Palette</a>
            </li>
            <li>
                <a href="#ref-for-dfn-truecolor-with-alpha-4" title="§ 11.3.4.1 bKGD Background color">§ 11.3.4.1 bKGD
                    Background color</a>
            </li>
            <li>
                <a href="#ref-for-dfn-truecolor-with-alpha-5" title="§ 12.5 Suggested palettes">§ 12.5 Suggested
                    palettes</a> <a href="#ref-for-dfn-truecolor-with-alpha-6" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-truecolor-with-alpha-7" title="§ 13.17 Histogram and suggested palette usage">§
                    13.17 Histogram and suggested palette usage</a>
            </li>
            <li>
                <a href="#ref-for-dfn-truecolor-with-alpha-8" title="§ 15.3.3 Conformance of PNG decoders">§ 15.3.3
                    Conformance of PNG decoders</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-greyscale-with-alpha"
        aria-label="Links in this document to definition: Greyscale with alpha">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-greyscale-with-alpha"
                aria-label="Permalink for definition: Greyscale with alpha. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-greyscale-with-alpha-1" title="§ 4.5 PNG image">§ 4.5 PNG image</a>
            </li>
            <li>
                <a href="#ref-for-dfn-greyscale-with-alpha-2" title="§ 6.2 Alpha representation">§ 6.2 Alpha
                    representation</a>
            </li>
            <li>
                <a href="#ref-for-dfn-greyscale-with-alpha-3" title="§ 11.3.4.1 bKGD Background color">§ 11.3.4.1 bKGD
                    Background color</a>
            </li>
            <li>
                <a href="#ref-for-dfn-greyscale-with-alpha-4" title="§ 15.3.3 Conformance of PNG decoders">§ 15.3.3
                    Conformance of PNG decoders</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3truecolour"
        aria-label="Links in this document to definition: Truecolor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3truecolour"
                aria-label="Permalink for definition: Truecolor. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3truecolour-1" title="§ Abstract">§ Abstract</a>
            </li>
            <li>
                <a href="#ref-for-3truecolour-2" title="§ 1. Introduction">§ 1. Introduction</a>
            </li>
            <li>
                <a href="#ref-for-3truecolour-3" title="§ 4.5 PNG image">§ 4.5 PNG image</a>
            </li>
            <li>
                <a href="#ref-for-3truecolour-4" title="§ 6.1 Color types and values">§ 6.1 Color types and values</a>
                <a href="#ref-for-3truecolour-5" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-3truecolour-6" title="§ 6.2 Alpha representation">§ 6.2 Alpha representation</a> <a
                    href="#ref-for-3truecolour-7" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-3truecolour-8" title="§ 11.2.2 PLTE Palette">§ 11.2.2 PLTE Palette</a> <a
                    href="#ref-for-3truecolour-9" title="Reference 2">(2)</a> <a href="#ref-for-3truecolour-10"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-3truecolour-11" title="§ 11.3.1.1 tRNS Transparency">§ 11.3.1.1 tRNS Transparency</a>
                <a href="#ref-for-3truecolour-12" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-3truecolour-13" title="§ 11.3.4.1 bKGD Background color">§ 11.3.4.1 bKGD Background
                    color</a>
            </li>
            <li>
                <a href="#ref-for-3truecolour-14" title="§ 11.3.4.2 hIST Image histogram">§ 11.3.4.2 hIST Image
                    histogram</a>
            </li>
            <li>
                <a href="#ref-for-3truecolour-15" title="§ 12.5 Suggested palettes">§ 12.5 Suggested palettes</a> <a
                    href="#ref-for-3truecolour-16" title="Reference 2">(2)</a> <a href="#ref-for-3truecolour-17"
                    title="Reference 3">(3)</a> <a href="#ref-for-3truecolour-18" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-3truecolour-19" title="§ 12.7 Filter selection">§ 12.7 Filter selection</a> <a
                    href="#ref-for-3truecolour-20" title="Reference 2">(2)</a> <a href="#ref-for-3truecolour-21"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-3truecolour-22" title="§ 13.1 Error handling">§ 13.1 Error handling</a>
            </li>
            <li>
                <a href="#ref-for-3truecolour-23" title="§ 13.11 Truecolor image handling">§ 13.11 Truecolor image
                    handling</a> <a href="#ref-for-3truecolour-24" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-3truecolour-25" title="§ 13.16 Alpha channel processing">§ 13.16 Alpha channel
                    processing</a>
            </li>
            <li>
                <a href="#ref-for-3truecolour-26" title="§ 13.17 Histogram and suggested palette usage">§ 13.17
                    Histogram and suggested palette usage</a> <a href="#ref-for-3truecolour-27"
                    title="Reference 2">(2)</a> <a href="#ref-for-3truecolour-28" title="Reference 3">(3)</a> <a
                    href="#ref-for-3truecolour-29" title="Reference 4">(4)</a> <a href="#ref-for-3truecolour-30"
                    title="Reference 5">(5)</a> <a href="#ref-for-3truecolour-31" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-3truecolour-32" title="§ 14.2 Behavior of PNG editors">§ 14.2 Behavior of PNG
                    editors</a>
            </li>
            <li>
                <a href="#ref-for-3truecolour-33" title="§ 15.3.3 Conformance of PNG decoders">§ 15.3.3 Conformance of
                    PNG decoders</a> <a href="#ref-for-3truecolour-34" title="Reference 2">(2)</a> <a
                    href="#ref-for-3truecolour-35" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-greyscale"
        aria-label="Links in this document to definition: Greyscale">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-greyscale"
                aria-label="Permalink for definition: Greyscale. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-greyscale-1" title="§ Abstract">§ Abstract</a>
            </li>
            <li>
                <a href="#ref-for-dfn-greyscale-2" title="§ 1. Introduction">§ 1. Introduction</a>
            </li>
            <li>
                <a href="#ref-for-dfn-greyscale-3" title="§ 4.5 PNG image">§ 4.5 PNG image</a>
            </li>
            <li>
                <a href="#ref-for-dfn-greyscale-4" title="§ 6.1 Color types and values">§ 6.1 Color types and values</a>
            </li>
            <li>
                <a href="#ref-for-dfn-greyscale-5" title="§ 6.2 Alpha representation">§ 6.2 Alpha representation</a> <a
                    href="#ref-for-dfn-greyscale-6" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-greyscale-7" title="§ 11.3.1.1 tRNS Transparency">§ 11.3.1.1 tRNS Transparency</a>
                <a href="#ref-for-dfn-greyscale-8" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-greyscale-9" title="§ 11.3.2.1 cHRM Primary chromaticities and white point">§
                    11.3.2.1 cHRM Primary chromaticities and white point</a>
            </li>
            <li>
                <a href="#ref-for-dfn-greyscale-10" title="§ 11.3.2.3 iCCP Embedded ICC profile">§ 11.3.2.3 iCCP
                    Embedded ICC profile</a>
            </li>
            <li>
                <a href="#ref-for-dfn-greyscale-11" title="§ 11.3.4.1 bKGD Background color">§ 11.3.4.1 bKGD Background
                    color</a>
            </li>
            <li>
                <a href="#ref-for-dfn-greyscale-12" title="§ 11.3.4.4 sPLT Suggested palette">§ 11.3.4.4 sPLT Suggested
                    palette</a>
            </li>
            <li>
                <a href="#ref-for-dfn-greyscale-13" title="§ 12.5 Suggested palettes">§ 12.5 Suggested palettes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-greyscale-14" title="§ 12.7 Filter selection">§ 12.7 Filter selection</a> <a
                    href="#ref-for-dfn-greyscale-15" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-greyscale-16" title="§ 13.11 Truecolor image handling">§ 13.11 Truecolor image
                    handling</a>
            </li>
            <li>
                <a href="#ref-for-dfn-greyscale-17" title="§ 13.16 Alpha channel processing">§ 13.16 Alpha channel
                    processing</a>
            </li>
            <li>
                <a href="#ref-for-dfn-greyscale-18" title="§ 15.3.3 Conformance of PNG decoders">§ 15.3.3 Conformance of
                    PNG decoders</a> <a href="#ref-for-dfn-greyscale-19" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3greyscale"
        aria-label="Links in this document to definition: grey sample">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3greyscale"
                aria-label="Permalink for definition: grey sample. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3greyscale-1" title="§ 4.5 PNG image">§ 4.5 PNG image</a> <a
                    href="#ref-for-3greyscale-2" title="Reference 2">(2)</a> <a href="#ref-for-3greyscale-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-3greyscale-4" title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3passExtraction"
        aria-label="Links in this document to definition: Pass extraction">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3passExtraction"
                aria-label="Permalink for definition: Pass extraction. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3passExtraction-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3reducedImage"
        aria-label="Links in this document to definition: reduced images">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3reducedImage"
                aria-label="Permalink for definition: reduced images. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3reducedImage-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3ancillaryChunk"
        aria-label="Links in this document to definition: ancillary chunk">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3ancillaryChunk"
                aria-label="Permalink for definition: ancillary chunk. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-output-buffer"
        aria-label="Links in this document to definition: output buffer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-output-buffer"
                aria-label="Permalink for definition: output buffer. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-output-buffer-1" title="§ 4.9.1 Structure">§ 4.9.1 Structure</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-canvas"
        aria-label="Links in this document to definition: canvas">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-canvas"
                aria-label="Permalink for definition: canvas. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-canvas-1" title="§ 4.9.3 Output buffer">§ 4.9.3 Output buffer</a> <a
                    href="#ref-for-dfn-canvas-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-canvas-3" title="§ 11.3.6.3 fdAT Frame Data Chunk">§ 11.3.6.3 fdAT Frame Data
                    Chunk</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3PNGdatastream"
        aria-label="Links in this document to definition: PNG datastream">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3PNGdatastream"
                aria-label="Permalink for definition: PNG datastream. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3PNGdatastream-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a> <a href="#ref-for-3PNGdatastream-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-3PNGdatastream-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-3PNGdatastream-4" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-3PNGdatastream-5" title="§ 4.2 Images">§ 4.2 Images</a> <a
                    href="#ref-for-3PNGdatastream-6" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3chunk"
        aria-label="Links in this document to definition: chunk">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3chunk"
                aria-label="Permalink for definition: chunk. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3chunk-1" title="§ 3. Terms, definitions, and abbreviated terms">§ 3. Terms,
                    definitions, and abbreviated terms</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-private-field-values"
        aria-label="Links in this document to definition: private field values">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-private-field-values"
                aria-label="Permalink for definition: private field values. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-private-field-values-1" title="§ 4.11 Extensions">§ 4.11 Extensions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-private-field-values-2" title="§ 5.8 Private field values">§ 5.8 Private field
                    values</a> <a href="#ref-for-dfn-private-field-values-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-private-field-values-4" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-private-field-values-5" title="§ 15.3.2 Conformance of PNG encoders">§ 15.3.2
                    Conformance of PNG encoders</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3colourType"
        aria-label="Links in this document to definition: color type">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3colourType"
                aria-label="Permalink for definition: color type. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3colourType-1" title="§ 5.8 Private field values">§ 5.8 Private field values</a>
            </li>
            <li>
                <a href="#colorType" title="§ 6.1 Color types and values">§ 6.1 Color types and values</a> <a
                    href="#ref-for-3colourType-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-3colourType-4" title="§ 7.2 Scanlines">§ 7.2 Scanlines</a> <a
                    href="#ref-for-3colourType-5" title="Reference 2">(2)</a> <a href="#ref-for-3colourType-6"
                    title="Reference 3">(3)</a> <a href="#ref-for-3colourType-7" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-3colourType-8" title="§ 9.2 Filter types for filter method 0">§ 9.2 Filter types for
                    filter method 0</a>
            </li>
            <li>
                <a href="#ref-for-3colourType-9" title="§ 11.2.1 IHDR Image header">§ 11.2.1 IHDR Image header</a> <a
                    href="#ref-for-3colourType-10" title="Reference 2">(2)</a> <a href="#ref-for-3colourType-11"
                    title="Reference 3">(3)</a> <a href="#ref-for-3colourType-12" title="Reference 4">(4)</a> <a
                    href="#ref-for-3colourType-13" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-3colourType-14" title="§ 11.2.2 PLTE Palette">§ 11.2.2 PLTE Palette</a> <a
                    href="#ref-for-3colourType-15" title="Reference 2">(2)</a> <a href="#ref-for-3colourType-16"
                    title="Reference 3">(3)</a> <a href="#ref-for-3colourType-17" title="Reference 4">(4)</a> <a
                    href="#ref-for-3colourType-18" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-3colourType-19" title="§ 11.3.1.1 tRNS Transparency">§ 11.3.1.1 tRNS Transparency</a>
                <a href="#ref-for-3colourType-20" title="Reference 2">(2)</a> <a href="#ref-for-3colourType-21"
                    title="Reference 3">(3)</a> <a href="#ref-for-3colourType-22" title="Reference 4">(4)</a> <a
                    href="#ref-for-3colourType-23" title="Reference 5">(5)</a> <a href="#ref-for-3colourType-24"
                    title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-3colourType-25" title="§ 11.3.2.3 iCCP Embedded ICC profile">§ 11.3.2.3 iCCP Embedded
                    ICC profile</a> <a href="#ref-for-3colourType-26" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-3colourType-27" title="§ 11.3.2.4 sBIT Significant bits">§ 11.3.2.4 sBIT Significant
                    bits</a>
            </li>
            <li>
                <a href="#ref-for-3colourType-28" title="§ 11.3.4.1 bKGD Background color">§ 11.3.4.1 bKGD Background
                    color</a> <a href="#ref-for-3colourType-29" title="Reference 2">(2)</a> <a
                    href="#ref-for-3colourType-30" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-3colourType-31" title="§ 11.3.4.4 sPLT Suggested palette">§ 11.3.4.4 sPLT Suggested
                    palette</a>
            </li>
            <li>
                <a href="#ref-for-3colourType-32" title="§ 11.3.6.3 fdAT Frame Data Chunk">§ 11.3.6.3 fdAT Frame Data
                    Chunk</a>
            </li>
            <li>
                <a href="#ref-for-3colourType-33" title="§ 12.5 Suggested palettes">§ 12.5 Suggested palettes</a> <a
                    href="#ref-for-3colourType-34" title="Reference 2">(2)</a> <a href="#ref-for-3colourType-35"
                    title="Reference 3">(3)</a> <a href="#ref-for-3colourType-36" title="Reference 4">(4)</a> <a
                    href="#ref-for-3colourType-37" title="Reference 5">(5)</a> <a href="#ref-for-3colourType-38"
                    title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-3colourType-39" title="§ 12.7 Filter selection">§ 12.7 Filter selection</a>
            </li>
            <li>
                <a href="#ref-for-3colourType-40" title="§ Introduction">§ Introduction</a>
            </li>
            <li>
                <a href="#ref-for-3colourType-41" title="§ 13.17 Histogram and suggested palette usage">§ 13.17
                    Histogram and suggested palette usage</a>
            </li>
            <li>
                <a href="#ref-for-3colourType-42" title="§ 15.3.3 Conformance of PNG decoders">§ 15.3.3 Conformance of
                    PNG decoders</a> <a href="#ref-for-3colourType-43" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-3colourType-44" title="§ 15.3.4 Conformance of PNG editors">§ 15.3.4 Conformance of
                    PNG editors</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3filter"
        aria-label="Links in this document to definition: filter method">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3filter"
                aria-label="Permalink for definition: filter method. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-3filter-1" title="§ 7.3 Filtering">§ 7.3 Filtering</a> <a href="#ref-for-3filter-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-3filter-3" title="§ 9.1 Filter methods and filter types">§ 9.1 Filter methods and
                    filter types</a> <a href="#ref-for-3filter-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-3filter-5" title="Reference 3">(3)</a> <a href="#ref-for-3filter-6"
                    title="Reference 4">(4)</a> <a href="#ref-for-3filter-7" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-3filter-8" title="§ 9.2 Filter types for filter method 0">§ 9.2 Filter types for
                    filter method 0</a> <a href="#ref-for-3filter-9" title="Reference 2">(2)</a> <a
                    href="#ref-for-3filter-10" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-3filter-11" title="§ 11.2.1 IHDR Image header">§ 11.2.1 IHDR Image header</a>
            </li>
            <li>
                <a href="#ref-for-3filter-12" title="§ 11.3.6.3 fdAT Frame Data Chunk">§ 11.3.6.3 fdAT Frame Data
                    Chunk</a>
            </li>
            <li>
                <a href="#ref-for-3filter-13" title="§ Introduction">§ Introduction</a>
            </li>
            <li>
                <a href="#ref-for-3filter-14" title="§ 15.3.3 Conformance of PNG decoders">§ 15.3.3 Conformance of PNG
                    decoders</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-3criticalChunk"
        aria-label="Links in this document to definition: critical chunk">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#3criticalChunk"
                aria-label="Permalink for definition: critical chunk. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-gamma-encoding"
        aria-label="Links in this document to definition: gamma encoding">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-gamma-encoding"
                aria-label="Permalink for definition: gamma encoding. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-gamma-encoding-1" title="§ 12.1 Encoder gamma handling">§ 12.1 Encoder gamma
                    handling</a> <a href="#ref-for-dfn-gamma-encoding-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-gamma-encoding-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-gamma-encoding-4" title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <script src="https://www.w3.org/scripts/TR/fixup.js"></script>


    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="g-references"><bdi class="secno">G. </bdi>参考文献</h2><a class="self-link" href="#references"
                aria-label="Permalink for Appendix G."></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="g-1-normative-references"><bdi class="secno">G.1 </bdi>規範的参照文献</h3><a class="self-link"
                    href="#normative-references" aria-label="Permalink for Appendix G.1"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-bcp47">[BCP47]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc5646"><cite>言語識別のためのタグ（Tags for Identifying
                            Languages）</cite></a>．A. Phillips（編集）；M. Davis（編集）．IETF．2009年9月．Best Current Practice．URL:
                    <a href="https://www.rfc-editor.org/rfc/rfc5646">https://www.rfc-editor.org/rfc/rfc5646</a>
                </dd>
                <dt id="bib-cipa-dc-008">[CIPA-DC-008]</dt>
                <dd>
                    <a href="https://www.cipa.jp/std/documents/download_e.html?DC-008-Translation-2019-E"><cite>デジタルスチルカメラ用交換可能画像ファイル形式：Exif
                            Version 2.32（Exchangeable image file format for digital still cameras: Exif Version
                            2.32）</cite></a>．Camera &amp;
                    Imaging Products Association．2019-05-17．URL: <a
                        href="https://www.cipa.jp/std/documents/download_e.html?DC-008-Translation-2019-E">https://www.cipa.jp/std/documents/download_e.html?DC-008-Translation-2019-E</a>
                </dd>
                <dt id="bib-colorimetry">[COLORIMETRY]</dt>
                <dd>
                    <a href="http://www.cie.co.at/publications/colorimetry-4th-edition"><cite>色度学（Colorimetry），第4版 CIE
                            015:2018</cite></a>．CIE．2018年．URL: <a
                        href="http://www.cie.co.at/publications/colorimetry-4th-edition">http://www.cie.co.at/publications/colorimetry-4th-edition</a>
                </dd>
                <dt id="bib-display-p3">[Display-P3]</dt>
                <dd>
                    <a href="https://www.color.org/chardata/rgb/DisplayP3.xalter"><cite>Display P3</cite></a>．Apple,
                    Inc.／ICC．2022-02．URL: <a
                        href="https://www.color.org/chardata/rgb/DisplayP3.xalter">https://www.color.org/chardata/rgb/DisplayP3.xalter</a>
                </dd>
                <dt id="bib-encoding">[ENCODING]</dt>
                <dd>
                    <a href="https://encoding.spec.whatwg.org/"><cite>Encoding Standard（エンコーディング標準）</cite></a>．Anne van
                    Kesteren．WHATWG．Living Standard．URL: <a
                        href="https://encoding.spec.whatwg.org/">https://encoding.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-icc">[ICC]</dt>
                <dd>
                    <a href="http://www.color.org/specification/ICC.1-2022-05.pdf"><cite>ICC.1:2022（プロファイルバージョン
                            4.4.0.0）</cite></a>．International Color Consortium．2022年5月．URL: <a
                        href="http://www.color.org/specification/ICC.1-2022-05.pdf">http://www.color.org/specification/ICC.1-2022-05.pdf</a>
                </dd>
                <dt id="bib-icc-2">[ICC-2]</dt>
                <dd>
                    <a href="https://www.color.org/specification/ICC.2-2019.pdf"><cite>Specification
                            ICC.2:2019（プロファイルバージョン 5.0.0 - iccMAX）</cite></a>．International Color Consortium．2019年．URL:
                    <a
                        href="https://www.color.org/specification/ICC.2-2019.pdf">https://www.color.org/specification/ICC.2-2019.pdf</a>
                </dd>
                <dt id="bib-iso_15076-1">[ISO_15076-1]</dt>
                <dd>
                    <a href="https://www.iso.org/standard/54754.html"><cite>ISO 15076-1:2010 Image technology colour
                            management — Architecture, profile format and data structure — Part 1: Based on
                            ICC.1:2010</cite></a>．ISO．2010-12．URL: <a
                        href="https://www.iso.org/standard/54754.html">https://www.iso.org/standard/54754.html</a>
                </dd>
                <dt id="bib-iso_8859-1">[ISO_8859-1]</dt>
                <dd>
                    <cite>ISO/IEC 8859-1:1998, Information technology — 8-bit single-byte coded graphic character sets —
                        Part 1: Latin alphabet No. 1.</cite>．ISO．1998年．
                </dd>
                <dt id="bib-iso_9899">[ISO_9899]</dt>
                <dd>
                    <a href="https://www.iso.org/standard/74528.html"><cite>ISO/IEC 9899:2018 Information technology —
                            Programming languages — C</cite></a>．ISO．2018年6月．URL: <a
                        href="https://www.iso.org/standard/74528.html">https://www.iso.org/standard/74528.html</a>
                </dd>
                <dt id="bib-iso-3309">[ISO-3309]</dt>
                <dd>
                    <cite>ISO/IEC 3309:1993, Information Technology — Telecommunications and information exchange
                        between systems — High-level data link control (HDLC) procedures — Frame
                        structure.</cite>．ISO．1993年．
                </dd>
                <dt id="bib-iso646">[ISO646]</dt>
                <dd>
                    <a href="https://www.iso.org/standard/4777.html"><cite>Information technology — ISO 7-bit coded
                            character set for information interchange</cite></a>．International Organization for
                    Standardization (ISO)．1991年12月．URL: <a
                        href="https://www.iso.org/standard/4777.html">https://www.iso.org/standard/4777.html</a>
                </dd>
                <dt id="bib-itu-r-bt.2100">[ITU-R-BT.2100]</dt>
                <dd>
                    <a href="https://www.itu.int/rec/R-REC-BT.2100"><cite>ITU-R
                            BT.2100（高ダイナミックレンジテレビ用の画像パラメータ値）</cite></a>．ITU．2018-07．URL: <a
                        href="https://www.itu.int/rec/R-REC-BT.2100">https://www.itu.int/rec/R-REC-BT.2100</a>
                </dd>
                <dt id="bib-itu-r-bt.709">[ITU-R-BT.709]</dt>
                <dd>
                    <a href="https://www.itu.int/rec/R-REC-BT.709"><cite>ITU-R BT.709（HDTV
                            標準のパラメータ値）</cite></a>．ITU．2015-06．URL: <a
                        href="https://www.itu.int/rec/R-REC-BT.709">https://www.itu.int/rec/R-REC-BT.709</a>
                </dd>
                <dt id="bib-itu-t-h.273">[ITU-T-H.273]</dt>
                <dd>
                    <a href="https://www.itu.int/rec/T-REC-H.273"><cite>ITU-T
                            H.273（ビデオ信号タイプ識別のためのコーディング独立コードポイント）</cite></a>．ITU．2024-07-14．URL: <a
                        href="https://www.itu.int/rec/T-REC-H.273">https://www.itu.int/rec/T-REC-H.273</a>
                </dd>
                <dt id="bib-itu-t-series-h-supplement-19">[ITU-T-Series-H-Supplement-19]</dt>
                <dd>
                    <a href="https://www.itu.int/ITU-T/recommendations/rec.aspx?rec=14652"><cite>Series H: Audio Visual
                            and Multimedia Systems - Usage of video signal type code points</cite></a>．ITU．2021-04．URL:
                    <a
                        href="https://www.itu.int/ITU-T/recommendations/rec.aspx?rec=14652">https://www.itu.int/ITU-T/recommendations/rec.aspx?rec=14652</a>
                </dd>
                <dt id="bib-itu-t-v.42">[ITU-T-V.42]</dt>
                <dd>
                    <a href="https://www.itu.int/rec/T-REC-V.42-200203-I/en"><cite>ITU-T
                            V.42（電話網上のデータ通信：誤り訂正手順）</cite></a>．ITU．2002-03-29．URL: <a
                        href="https://www.itu.int/rec/T-REC-V.42-200203-I/en">https://www.itu.int/rec/T-REC-V.42-200203-I/en</a>
                </dd>
                <dt id="bib-jpeg">[JPEG]</dt>
                <dd>
                    <a href="https://www.w3.org/Graphics/JPEG/jfif3.pdf"><cite>JPEG File Interchange
                            Format（JFIF）</cite></a>．Eric Hamilton．C-Cube Microsystems．Milpitas, CA, USA．1992年9月．URL: <a
                        href="https://www.w3.org/Graphics/JPEG/jfif3.pdf">https://www.w3.org/Graphics/JPEG/jfif3.pdf</a>
                </dd>
                <dt id="bib-paeth">[Paeth]</dt>
                <dd>
                    <a href="https://www.sciencedirect.com/science/article/pii/B9780080507545500293"><cite>Image File
                            Compression Made Easy（Graphics Gems II 内）, pp.93–100</cite></a>．A.W. Paeth．Academic
                    Press．1991年．URL: <a
                        href="https://www.sciencedirect.com/science/article/pii/B9780080507545500293">https://www.sciencedirect.com/science/article/pii/B9780080507545500293</a>
                </dd>
                <dt id="bib-png-extensions">[PNG-EXTENSIONS]</dt>
                <dd>
                    <a href="https://w3c.github.io/png/extensions/Overview.html"><cite>Extensions to the PNG Third
                            Edition Specification, Version 1.6.0</cite></a>．W3C．2021年．URL: <a
                        href="https://w3c.github.io/png/extensions/Overview.html">https://w3c.github.io/png/extensions/Overview.html</a>
                </dd>
                <dt id="bib-rfc1123">[rfc1123]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc1123"><cite>Requirements for Internet Hosts - Application
                            and Support</cite></a>．R. Braden（編集）．IETF．1989年10月．Internet Standard．URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc1123">https://www.rfc-editor.org/rfc/rfc1123</a>
                </dd>
                <dt id="bib-rfc1950">[rfc1950]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc1950"><cite>ZLIB Compressed Data Format Specification
                            version 3.3</cite></a>．P. Deutsch；J-L. Gailly．IETF．1996年5月．Informational．URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc1950">https://www.rfc-editor.org/rfc/rfc1950</a>
                </dd>
                <dt id="bib-rfc1951">[RFC1951]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc1951"><cite>DEFLATE Compressed Data Format Specification
                            version 1.3</cite></a>．P. Deutsch．IETF．1996年5月．Informational．URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc1951">https://www.rfc-editor.org/rfc/rfc1951</a>
                </dd>
                <dt id="bib-rfc1952">[RFC1952]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc1952"><cite>GZIP file format specification version
                            4.3</cite></a>．P. Deutsch．IETF．1996年5月．Informational．URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc1952">https://www.rfc-editor.org/rfc/rfc1952</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>要求レベルを示す RFC 用キーワード（Key words for use in RFCs
                            to Indicate Requirement Levels）</cite></a>．S. Bradner．IETF．1997年3月．Best Current
                    Practice．URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
                </dd>
                <dt id="bib-rfc3339">[rfc3339]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc3339"><cite>インターネット上の日時：タイムスタンプ（Date and Time on the
                            Internet: Timestamps）</cite></a>．G. Klyne；C. Newman．IETF．2002年7月．Proposed Standard．URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc3339">https://www.rfc-editor.org/rfc/rfc3339</a>
                </dd>
                <dt id="bib-rfc3629">[rfc3629]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc3629"><cite>UTF-8（ISO 10646 の変換形式）</cite></a>．F.
                    Yergeau．IETF．2003年11月．Internet Standard．URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc3629">https://www.rfc-editor.org/rfc/rfc3629</a>
                </dd>
                <dt id="bib-rfc8174">[RFC8174]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>RFC2119 キーワードの大文字小文字の曖昧さ（Ambiguity of
                            Uppercase vs Lowercase in RFC 2119 Key Words）</cite></a>．B. Leiba．IETF．2017年5月．Best Current
                    Practice．URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
                </dd>
                <dt id="bib-smpte-170m">[SMPTE-170M]</dt>
                <dd>
                    <a href="https://standards.globalspec.com/std/892300/SMPTE%20ST%20170M"><cite>Television — Composite
                            Analog Video Signal — NTSC for Studio Applications</cite></a>．Society of Motion Picture and
                    Television Engineers（SMPTE）．2004-11-30．URL: <a
                        href="https://standards.globalspec.com/std/892300/SMPTE%20ST%20170M">https://standards.globalspec.com/std/892300/SMPTE%20ST%20170M</a>
                </dd>
                <dt id="bib-smpte-st-2086">[SMPTE-ST-2086]</dt>
                <dd>
                    <a href="https://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=8353899"><cite>Mastering Display Color
                            Volume Metadata Supporting High Luminance and Wide Color Gamut
                            Images</cite></a>．SMPTE．2018-04-27．URL: <a
                        href="https://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=8353899">https://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=8353899</a>
                </dd>
                <dt id="bib-srgb">[SRGB]</dt>
                <dd>
                    <a href="https://webstore.iec.ch/publication/6169"><cite>Multimedia systems and equipment - Colour
                            measurement and management - Part 2-1: Colour management - Default RGB colour space -
                            sRGB</cite></a>．IEC．URL: <a
                        href="https://webstore.iec.ch/publication/6169">https://webstore.iec.ch/publication/6169</a>
                </dd>
                <dt id="bib-xmp">[XMP]</dt>
                <dd>
                    <a href="https://www.iso.org/standard/75163.html"><cite>Extensible metadata platform (XMP)
                            specification -- Part 1</cite></a>．Adobe Systems Incorporated．ISO/IEC．2019年4月．URL: <a
                        href="https://www.iso.org/standard/75163.html">https://www.iso.org/standard/75163.html</a>
                </dd>
                <dt id="bib-ziv-lempel">[Ziv-Lempel]</dt>
                <dd>
                    <a href="https://ieeexplore.ieee.org/document/1055714"><cite>A Universal Algorithm for Sequential
                            Data Compression（IEEE Transactions on Information Theory, vol. IT-23, no. 3, pp.
                            337-343）</cite></a>．J. Ziv；A. Lempel．IEEE．1977-05．URL: <a
                        href="https://ieeexplore.ieee.org/document/1055714">https://ieeexplore.ieee.org/document/1055714</a>
                </dd>
            </dl>
        </section>
        <section id="informative-references">
            <div class="header-wrapper">
                <h3 id="g-2-informative-references"><bdi class="secno">G.2 </bdi>参考情報</h3><a class="self-link"
                    href="#informative-references" aria-label="Permalink for Appendix G.2"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-color-faq">[COLOR-FAQ]</dt>
                <dd>
                    <a href="https://poynton.ca/ColorFAQ.html"><cite>Color FAQ（色に関する FAQ）</cite></a>．Poynton, C.
                    2009-10-19．URL:
                    <a href="https://poynton.ca/ColorFAQ.html">https://poynton.ca/ColorFAQ.html</a>
                </dd>
                <dt id="bib-cta-861.3-a">[CTA-861.3-A]</dt>
                <dd>
                    <a href="https://shop.cta.tech/products/cta-861-3"><cite>HDR Static Metadata Extensions
                            (CTA-861.3-A)</cite></a>．Consumer Technology Association．2015-01．URL: <a
                        href="https://shop.cta.tech/products/cta-861-3">https://shop.cta.tech/products/cta-861-3</a>
                </dd>
                <dt id="bib-ebu-r-103">[EBU-R-103]</dt>
                <dd>
                    <a href="https://tech.ebu.ch/docs/r/r103.pdf"><cite>Video Signal Tolerance in Digital Television
                            Systems</cite></a>．EBU．2020-05．URL: <a
                        href="https://tech.ebu.ch/docs/r/r103.pdf">https://tech.ebu.ch/docs/r/r103.pdf</a>
                </dd>
                <dt id="bib-gamma-faq">[GAMMA-FAQ]</dt>
                <dd>
                    <a href="https://poynton.ca/GammaFAQ.html"><cite>Gamma FAQ（ガンマに関する FAQ）</cite></a>．Poynton, C.
                    1998-08-04．URL:
                    <a href="https://poynton.ca/GammaFAQ.html">https://poynton.ca/GammaFAQ.html</a>
                </dd>
                <dt id="bib-gif">[GIF]</dt>
                <dd>
                    <a href="https://www.w3.org/Graphics/GIF/spec-gif89a.txt"><cite>Graphics Interchange
                            Format（GIF）</cite></a>．CompuServe Incorporated．1990-07-31．URL: <a
                        href="https://www.w3.org/Graphics/GIF/spec-gif89a.txt">https://www.w3.org/Graphics/GIF/spec-gif89a.txt</a>
                </dd>
                <dt id="bib-hdr-static-meta">[HDR-Static-Meta]</dt>
                <dd>
                    <a href="https://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=9508136"><cite>On the Calculation and
                            Usage of HDR Static Content Metadata</cite></a>．Smith, Michael D.; Zink,
                    Michael．SMPTE．2021-08-05．URL: <a
                        href="https://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=9508136">https://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=9508136</a>
                </dd>
                <dt id="bib-hdr10">[HDR10]</dt>
                <dd>
                    <a href="https://en.wikipedia.org/wiki/HDR10"><cite>HDR10 Media Profile</cite></a>．URL: <a
                        href="https://en.wikipedia.org/wiki/HDR10">https://en.wikipedia.org/wiki/HDR10</a>
                </dd>
                <dt id="bib-hill">[Hill]</dt>
                <dd>
                    <a href="https://dl.acm.org/doi/10.1145/248210.248212"><cite>CIELAB 色差公式に基づく色空間量子化の比較解析（Comparative
                            analysis of the quantization of color spaces on the basis of the CIELAB color-difference
                            formula）</cite></a>．Hill, B.; Roger, Th.; Vorhagen, F.W. 1997-04．URL: <a
                        href="https://dl.acm.org/doi/10.1145/248210.248212">https://dl.acm.org/doi/10.1145/248210.248212</a>
                </dd>
                <dt id="bib-itu-r-bt.2020">[ITU-R-BT.2020]</dt>
                <dd>
                    <a href="https://www.itu.int/rec/R-REC-BT.2020"><cite>超高精細テレビジョンシステムのパラメータ値（Parameter values for
                            ultra-high definition television systems）</cite></a>．ITU．URL:
                    <a href="https://www.itu.int/rec/R-REC-BT.2020">https://www.itu.int/rec/R-REC-BT.2020</a>
                </dd>
                <dt id="bib-itu-r-bt.2390">[ITU-R-BT.2390]</dt>
                <dd>
                    <a href="https://www.itu.int/dms_pub/itu-r/opb/rep/R-REP-BT.2390-11-2023-PDF-E.pdf"><cite>国際番組交換のための高ダイナミックレンジテレビ（High
                            dynamic range television for production and international programme
                            exchange）</cite></a>．ITU．URL: <a
                        href="https://www.itu.int/dms_pub/itu-r/opb/rep/R-REP-BT.2390-11-2023-PDF-E.pdf">https://www.itu.int/dms_pub/itu-r/opb/rep/R-REP-BT.2390-11-2023-PDF-E.pdf</a>
                </dd>
                <dt id="bib-kasson">[Kasson]</dt>
                <dd>
                    <a href="https://dl.acm.org/doi/abs/10.1145/146443.146479"><cite>An Analysis of Selected Computer
                            Interchange Color Spaces</cite></a>．Kasson, J.; W. Plouffe．1992年．URL: <a
                        href="https://dl.acm.org/doi/abs/10.1145/146443.146479">https://dl.acm.org/doi/abs/10.1145/146443.146479</a>
                </dd>
                <dt id="bib-postscript">[PostScript]</dt>
                <dd>
                    <cite>PostScript Language Reference Manual</cite>．Adobe Systems Incorporated．Addison-Wesley．1990年．
                </dd>
                <dt id="bib-roelofs">[ROELOFS]</dt>
                <dd>
                    <a href="http://www.libpng.org/pub/png/pngbook.html"><cite>PNG: The Definitive
                            Guide</cite></a>．Roelofs, G.．O'Reilly &amp; Associates Inc.．1999-06-11．URL: <a
                        href="http://www.libpng.org/pub/png/pngbook.html">http://www.libpng.org/pub/png/pngbook.html</a>
                </dd>
                <dt id="bib-smpte-rp-177">[SMPTE-RP-177]</dt>
                <dd>
                    <a href="https://standards.globalspec.com/std/1284890/smpte-rp-177"><cite>Derivation of Basic
                            Television Color Equations</cite></a>．SMPTE．1993-11-01．URL: <a
                        href="https://standards.globalspec.com/std/1284890/smpte-rp-177">https://standards.globalspec.com/std/1284890/smpte-rp-177</a>
                </dd>
                <dt id="bib-smpte-rp-2077">[SMPTE-RP-2077]</dt>
                <dd>
                    <a href="https://doi.org/10.5594/SMPTE.RP2077.2013"><cite>Full-Range Image
                            Mapping</cite></a>．SMPTE．2013-01-01．URL: <a
                        href="https://doi.org/10.5594/SMPTE.RP2077.2013">https://doi.org/10.5594/SMPTE.RP2077.2013</a>
                </dd>
                <dt id="bib-smpte-st-2067-21">[SMPTE-ST-2067-21]</dt>
                <dd>
                    <a href="https://doi.org/10.5594/SMPTE.ST2067-21.2023"><cite>Interoperable Master Format —
                            Application #2E</cite></a>．SMPTE．2023-02-20．URL: <a
                        href="https://doi.org/10.5594/SMPTE.ST2067-21.2023">https://doi.org/10.5594/SMPTE.ST2067-21.2023</a>
                </dd>
                <dt id="bib-tiff-6.0">[TIFF-6.0]</dt>
                <dd>
                    <a href="https://www.loc.gov/preservation/digital/formats/fdd/fdd000022.shtml"><cite>TIFF Revision
                            6.0</cite></a>．1992-06-03．URL: <a
                        href="https://www.loc.gov/preservation/digital/formats/fdd/fdd000022.shtml">https://www.loc.gov/preservation/digital/formats/fdd/fdd000022.shtml</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="トップへ戻る">↑</abbr></a>
    </p>
    <script id="respec-highlight-vars">(() => {
            // @ts-check

            if (document.respec) {
                document.respec.ready.then(setupVarHighlighter);
            } else {
                setupVarHighlighter();
            }

            function setupVarHighlighter() {
                document
                    .querySelectorAll("var")
                    .forEach(varElem => varElem.addEventListener("click", highlightListener));
            }

            function highlightListener(ev) {
                ev.stopPropagation();
                const { target: varElem } = ev;
                const hightligtedElems = highlightVars(varElem);
                const resetListener = () => {
                    const hlColor = getHighlightColor(varElem);
                    hightligtedElems.forEach(el => removeHighlight(el, hlColor));
                    [...HL_COLORS.keys()].forEach(key => HL_COLORS.set(key, true));
                };
                if (hightligtedElems.length) {
                    document.body.addEventListener("click", resetListener, { once: true });
                }
            }

            // availability of highlight colors. colors from var.css
            const HL_COLORS = new Map([
                ["respec-hl-c1", true],
                ["respec-hl-c2", true],
                ["respec-hl-c3", true],
                ["respec-hl-c4", true],
                ["respec-hl-c5", true],
                ["respec-hl-c6", true],
                ["respec-hl-c7", true],
            ]);

            function getHighlightColor(target) {
                // return current colors if applicable
                const { value } = target.classList;
                const re = /respec-hl-\w+/;
                const activeClass = re.test(value) && value.match(re);
                if (activeClass) return activeClass[0];

                // first color preference
                if (HL_COLORS.get("respec-hl-c1") === true) return "respec-hl-c1";

                // otherwise get some other available color
                return [...HL_COLORS.keys()].find(c => HL_COLORS.get(c)) || "respec-hl-c1";
            }

            function highlightVars(varElem) {
                const textContent = norm(varElem.textContent);
                const parent = varElem.closest(".algorithm, section");
                const highlightColor = getHighlightColor(varElem);

                const varsToHighlight = [...parent.querySelectorAll("var")].filter(
                    el =>
                        norm(el.textContent) === textContent &&
                        el.closest(".algorithm, section") === parent
                );

                // update availability of highlight color
                const colorStatus = varsToHighlight[0].classList.contains("respec-hl");
                HL_COLORS.set(highlightColor, colorStatus);

                // highlight vars
                if (colorStatus) {
                    varsToHighlight.forEach(el => removeHighlight(el, highlightColor));
                    return [];
                } else {
                    varsToHighlight.forEach(el => addHighlight(el, highlightColor));
                }
                return varsToHighlight;
            }

            function removeHighlight(el, highlightColor) {
                el.classList.remove("respec-hl", highlightColor);
                // clean up empty class attributes so they don't come in export
                if (!el.classList.length) el.removeAttribute("class");
            }

            function addHighlight(elem, highlightColor) {
                elem.classList.add("respec-hl", highlightColor);
            }

            /**
             * Same as `norm` from src/core/utils, but our build process doesn't allow
             * imports in runtime scripts, so duplicated here.
             * @param {string} str
             */
            function norm(str) {
                return str.trim().replace(/\s+/g, " ");
            }
        })()</script>
    <script id="respec-dfn-panel">(() => {
                                               // @ts-check
                                               if (document.respec) {
                                                   document.respec.ready.then(setupPanel);
                                               } else {
                                                   setupPanel();
                                               }

                                               function setupPanel() {
                                                   const listener = panelListener();
                                                   document.body.addEventListener("keydown", listener);
                                                   document.body.addEventListener("click", listener);
                                               }

                                               function panelListener() {
                                                   /** @type {HTMLElement} */
                                                   let panel = null;
                                                   return event => {
                                                       const { target, type } = event;

                                                       if (!(target instanceof HTMLElement)) return;

                                                       // For keys, we only care about Enter key to activate the panel
                                                       // otherwise it's activated via a click.
                                                       if (type === "keydown" && event.key !== "Enter") return;

                                                       const action = deriveAction(event);

                                                       switch (action) {
                                                           case "show": {
                                                               hidePanel(panel);
                                                               /** @type {HTMLElement} */
                                                               const dfn = target.closest("dfn, .index-term");
                                                               panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                                                               const coords = deriveCoordinates(event);
                                                               displayPanel(dfn, panel, coords);
                                                               break;
                                                           }
                                                           case "dock": {
                                                               panel.style.left = null;
                                                               panel.style.top = null;
                                                               panel.classList.add("docked");
                                                               break;
                                                           }
                                                           case "hide": {
                                                               hidePanel(panel);
                                                               panel = null;
                                                               break;
                                                           }
                                                       }
                                                   };
                                               }

                                               /**
                                                * @param {MouseEvent|KeyboardEvent} event
                                                */
                                               function deriveCoordinates(event) {
                                                   const target = /** @type HTMLElement */ (event.target);

                                                   // We prevent synthetic AT clicks from putting
                                                   // the dialog in a weird place. The AT events sometimes
                                                   // lack coordinates, so they have clientX/Y = 0
                                                   const rect = target.getBoundingClientRect();
                                                   if (
                                                       event instanceof MouseEvent &&
                                                       event.clientX >= rect.left &&
                                                       event.clientY >= rect.top
                                                   ) {
                                                       // The event probably happened inside the bounding rect...
                                                       return { x: event.clientX, y: event.clientY };
                                                   }

                                                   // Offset to the middle of the element
                                                   const x = rect.x + rect.width / 2;
                                                   // Placed at the bottom of the element
                                                   const y = rect.y + rect.height;
                                                   return { x, y };
                                               }

                                               /**
                                                * @param {Event} event
                                                */
                                               function deriveAction(event) {
                                                   const target = /** @type {HTMLElement} */ (event.target);
                                                   const hitALink = !!target.closest("a");
                                                   if (target.closest("dfn:not([data-cite]), .index-term")) {
                                                       return hitALink ? "none" : "show";
                                                   }
                                                   if (target.closest(".dfn-panel")) {
                                                       if (hitALink) {
                                                           return target.classList.contains("self-link") ? "hide" : "dock";
                                                       }
                                                       const panel = target.closest(".dfn-panel");
                                                       return panel.classList.contains("docked") ? "hide" : "none";
                                                   }
                                                   if (document.querySelector(".dfn-panel:not([hidden])")) {
                                                       return "hide";
                                                   }
                                                   return "none";
                                               }

                                               /**
                                                * @param {HTMLElement} dfn
                                                * @param {HTMLElement} panel
                                                * @param {{ x: number, y: number }} clickPosition
                                                */
                                               function displayPanel(dfn, panel, { x, y }) {
                                                   panel.hidden = false;
                                                   // distance (px) between edge of panel and the pointing triangle (caret)
                                                   const MARGIN = 20;

                                                   const dfnRects = dfn.getClientRects();
                                                   // Find the `top` offset when the `dfn` can be spread across multiple lines
                                                   let closestTop = 0;
                                                   let minDiff = Infinity;
                                                   for (const rect of dfnRects) {
                                                       const { top, bottom } = rect;
                                                       const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                                                       if (diffFromClickY < minDiff) {
                                                           minDiff = diffFromClickY;
                                                           closestTop = top;
                                                       }
                                                   }

                                                   const top = window.scrollY + closestTop + dfnRects[0].height;
                                                   const left = x - MARGIN;
                                                   panel.style.left = `${left}px`;
                                                   panel.style.top = `${top}px`;

                                                   // Find if the panel is flowing out of the window
                                                   const panelRect = panel.getBoundingClientRect();
                                                   const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                                                   if (panelRect.right > SCREEN_WIDTH) {
                                                       const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                                                       const newCaretOffset = left - newLeft;
                                                       panel.style.left = `${newLeft}px`;
                                                       /** @type {HTMLElement} */
                                                       const caret = panel.querySelector(".caret");
                                                       caret.style.left = `${newCaretOffset}px`;
                                                   }

                                                   // As it's a dialog, we trap focus.
                                                   // TODO: when <dialog> becomes a implemented, we should really
                                                   // use that.
                                                   trapFocus(panel, dfn);
                                               }

                                               /**
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function trapFocus(panel, dfn) {
                                                   /** @type NodeListOf<HTMLAnchorElement> elements */
                                                   const anchors = panel.querySelectorAll("a[href]");
                                                   // No need to trap focus
                                                   if (!anchors.length) return;

                                                   // Move focus to first anchor element
                                                   const first = anchors.item(0);
                                                   first.focus();

                                                   const trapListener = createTrapListener(anchors, panel, dfn);
                                                   panel.addEventListener("keydown", trapListener);

                                                   // Hiding the panel releases the trap
                                                   const mo = new MutationObserver(records => {
                                                       const [record] = records;
                                                       const target = /** @type HTMLElement */ (record.target);
                                                       if (target.hidden) {
                                                           panel.removeEventListener("keydown", trapListener);
                                                           mo.disconnect();
                                                       }
                                                   });
                                                   mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
                                               }

                                               /**
                                                *
                                                * @param {NodeListOf<HTMLAnchorElement>} anchors
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function createTrapListener(anchors, panel, dfn) {
                                                   const lastIndex = anchors.length - 1;
                                                   let currentIndex = 0;
                                                   return event => {
                                                       switch (event.key) {
                                                           // Hitting "Tab" traps us in a nice loop around elements.
                                                           case "Tab": {
                                                               event.preventDefault();
                                                               currentIndex += event.shiftKey ? -1 : +1;
                                                               if (currentIndex < 0) {
                                                                   currentIndex = lastIndex;
                                                               } else if (currentIndex > lastIndex) {
                                                                   currentIndex = 0;
                                                               }
                                                               anchors.item(currentIndex).focus();
                                                               break;
                                                           }

                                                           // Hitting "Enter" on an anchor releases the trap.
                                                           case "Enter":
                                                               hidePanel(panel);
                                                               break;

                                                           // Hitting "Escape" returns focus to dfn.
                                                           case "Escape":
                                                               hidePanel(panel);
                                                               dfn.focus();
                                                               return;
                                                       }
                                                   };
                                               }

                                               /** @param {HTMLElement} panel */
                                               function hidePanel(panel) {
                                                   if (!panel) return;
                                                   panel.hidden = true;
                                                   panel.classList.remove("docked");
                                               }
                                           })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
</body>

</html>