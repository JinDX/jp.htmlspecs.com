<!DOCTYPE html>
<html lang="ja-JP">

<head>
    <meta charset="UTF-8">
    <!-- <meta name="generator" content="ReSpec 35.0.2"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        span.example-title {
            text-transform: none
        }

        :is(aside, div).example,
        div.illegal-example {
            padding: .5em;
            margin: 1em 0;
            position: relative;
            clear: both
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: #000
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff
        }
    </style>
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-color: var(--warning-border, #f11);
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
            background: var(--warning-bg, #fbe9e9);
            color: #000;
            color: var(--text, #000)
        }

        .warning-title:before {
            content: "⚠";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        pre.idl {
            padding: 1em;
            position: relative
        }

        pre.idl>code {
            color: #000;
            color: var(--text, #000)
        }

        @media print {
            pre.idl {
                white-space: pre-wrap
            }
        }

        .idlHeader {
            display: block;
            width: 150px;
            background: #8ccbf2;
            background: var(--def-border, #8ccbf2);
            color: #fff;
            color: var(--defrow-border, #fff);
            font-family: sans-serif;
            font-weight: 700;
            margin: -1em 0 1em -1em;
            height: 28px;
            line-height: 28px
        }

        .idlHeader a.self-link {
            margin-left: .3cm;
            text-decoration: none;
            border-bottom: none;
            color: inherit
        }

        .idlID {
            font-weight: 700;
            color: #005a9c
        }

        .idlType {
            color: #005a9c
        }

        .idlName {
            color: #ff4500
        }

        .idlName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none
        }

        a.idlEnumItem {
            color: #000;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        .idlSuperclass {
            font-style: italic;
            color: #005a9c
        }

        .idlDefaultValue,
        .idlParamName {
            font-style: italic
        }

        .extAttr {
            color: #666
        }

        .idlSectionComment {
            color: gray
        }

        .idlIncludes a {
            font-weight: 700
        }

        .respec-button-copy-paste:focus {
            text-decoration: none;
            border-color: #51a7e8;
            outline: 0;
            box-shadow: 0 0 5px rgba(81, 167, 232, .5)
        }

        .respec-button-copy-paste:is(:focus:hover, .selected:focus) {
            border-color: #51a7e8
        }

        .respec-button-copy-paste:is(:hover, :active, .zeroclipboard-is-hover, .zeroclipboard-is-active) {
            text-decoration: none;
            background-color: #ddd;
            background-image: linear-gradient(#eee, #ddd);
            border-color: #ccc
        }

        .respec-button-copy-paste:is(:active, .selected, .zeroclipboard-is-active) {
            background-color: #dcdcdc;
            background-image: none;
            border-color: #b5b5b5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, .15)
        }

        .respec-button-copy-paste.selected:hover {
            background-color: #cfcfcf
        }

        .respec-button-copy-paste:is(:disabled, :disabled:hover, .disabled, .disabled:hover) {
            color: rgba(102, 102, 102, .5);
            cursor: default;
            background-color: rgba(229, 229, 229, .5);
            background-image: none;
            border-color: rgba(197, 197, 197, .5);
            box-shadow: none
        }

        @media print {
            .respec-button-copy-paste {
                visibility: hidden
            }
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            background: var(--indextable-hover-bg, #fff);
            color: #000;
            color: var(--text, #000);
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 1em 3em -.4em var(--tocsidebar-shadow, rgba(0, 0, 0, .3)), 0 0 1px 1px var(--tocsidebar-shadow, rgba(0, 0, 0, .05));
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            border-bottom-color: var(--indextable-hover-bg, #fff);
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1;
            border-bottom-color: var(--indextable-hover-bg, #a2a9b1)
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            color: var(--text, #000);
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333;
            color: var(--text, #333)
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>


    <title>リモート再生 API</title>



    <style>
        /* Note formatting taken from Presentation API spec for consistency in the
       Second Screen WG */
        .note {
            border-left-style: solid;
            border-left-width: 0.25em;
            background: none repeat scroll 0 0 #E9FBE9;
            border-color: #52E052;
        }

        .note em,
        .warning em,
        .note i,
        .warning i {
            font-style: normal;
        }

        p.note,
        div.note {
            padding: 0.5em 2em;
        }

        span.note {
            padding: 0 2em;
        }

        .note p:first-child {
            margin-top: 0;
        }

        .note p:last-child {
            margin-bottom: 0;
        }

        p.note:before {
            content: 'NOTE: ';
        }

        .non-normative {
            border-left-style: solid;
            border-left-width: 0.25em;
            background: none repeat scroll 0 0 #E9FBE9;
            border-color: #52E052;
        }

        p.non-normative:before {
            content: 'Non-normative: ';
            font-weight: bolder;
        }

        p.non-normative,
        div.non-normative {
            padding: 0.5em 2em;
        }

        .algorithm li {
            margin-bottom: 0.5em;
        }

        .interface dd,
        .parameters dt {
            margin-bottom: 0.5em;
        }

        code {
            color: orangered;
        }

        table {
            border-collapse: collapse;
            border-style: hidden hidden none hidden;
        }

        table thead,
        table tbody {
            border-bottom: solid;
        }

        table td,
        table th {
            border-left: solid;
            border-right: solid;
            border-bottom: solid thin;
            vertical-align: top;
            padding: 0.2em;
        }

        dfn {
            font-weight: bolder;
            font-style: normal;
        }

        .copyright {
            font-size: small;
        }

        .issue[id^='issue-']>*:not([role='heading']) {
            display: none;
        }
    </style>

    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: normal
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>
    <meta name="color-scheme" content="light">
    <!-- <meta name="revision" content="151a3f48986c0a390903c4a16c09e5c85c2cb6d0"> -->
    <meta name="description" content="この仕様は、HTMLMediaElement を拡張し、ウェブページからメディアのリモート再生を制御することを可能にする API を定義します。">
    <link rel="canonical" href="https://www.w3.org/TR/remote-playback/">
    <style>
        .hljs {
            --base: #fafafa;
            --mono-1: #383a42;
            --mono-2: #686b77;
            --mono-3: #717277;
            --hue-1: #0b76c5;
            --hue-2: #336ae3;
            --hue-3: #a626a4;
            --hue-4: #42803c;
            --hue-5: #ca4706;
            --hue-5-2: #c91243;
            --hue-6: #986801;
            --hue-6-2: #9a6a01
        }

        @media (prefers-color-scheme:dark) {
            .hljs {
                --base: #282c34;
                --mono-1: #abb2bf;
                --mono-2: #818896;
                --mono-3: #5c6370;
                --hue-1: #56b6c2;
                --hue-2: #61aeee;
                --hue-3: #c678dd;
                --hue-4: #98c379;
                --hue-5: #e06c75;
                --hue-5-2: #be5046;
                --hue-6: #d19a66;
                --hue-6-2: #e6c07b
            }
        }

        .hljs {
            display: block;
            overflow-x: auto;
            padding: .5em;
            color: #383a42;
            color: var(--mono-1, #383a42);
            background: #fafafa;
            background: var(--base, #fafafa)
        }

        .hljs-comment,
        .hljs-quote {
            color: #717277;
            color: var(--mono-3, #717277);
            font-style: italic
        }

        .hljs-doctag,
        .hljs-formula,
        .hljs-keyword {
            color: #a626a4;
            color: var(--hue-3, #a626a4)
        }

        .hljs-deletion,
        .hljs-name,
        .hljs-section,
        .hljs-selector-tag,
        .hljs-subst {
            color: #ca4706;
            color: var(--hue-5, #ca4706);
            font-weight: 700
        }

        .hljs-literal {
            color: #0b76c5;
            color: var(--hue-1, #0b76c5)
        }

        .hljs-addition,
        .hljs-attribute,
        .hljs-meta-string,
        .hljs-regexp,
        .hljs-string {
            color: #42803c;
            color: var(--hue-4, #42803c)
        }

        .hljs-built_in,
        .hljs-class .hljs-title {
            color: #9a6a01;
            color: var(--hue-6-2, #9a6a01)
        }

        .hljs-attr,
        .hljs-number,
        .hljs-selector-attr,
        .hljs-selector-class,
        .hljs-selector-pseudo,
        .hljs-template-variable,
        .hljs-type,
        .hljs-variable {
            color: #986801;
            color: var(--hue-6, #986801)
        }

        .hljs-bullet,
        .hljs-link,
        .hljs-meta,
        .hljs-selector-id,
        .hljs-symbol,
        .hljs-title {
            color: #336ae3;
            color: var(--hue-2, #336ae3)
        }

        .hljs-emphasis {
            font-style: italic
        }

        .hljs-strong {
            font-weight: 700
        }

        .hljs-link {
            text-decoration: underline
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #222
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #222;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "specStatus": "CRD",
  "edDraftURI": "https://w3c.github.io/remote-playback/",
  "shortName": "remote-playback",
  "group": "secondscreen",
  "editors": [
    {
      "w3cid": 68454,
      "name": "Mark Foltz",
      "company": "Google"
    }
  ],
  "formerEditors": [
    {
      "w3cid": 45389,
      "name": "Mounir Lamouri",
      "company": "Google"
    },
    {
      "w3cid": 68811,
      "name": "Anton Vayvod",
      "company": "Google"
    }
  ],
  "sotdAfterWGinfo": true,
  "license": "w3c-software-doc",
  "otherLinks": [
    {
      "key": "Test suite",
      "data": [
        {
          "value": "GitHub web-platform-tests/remote-playback",
          "href": "https://github.com/web-platform-tests/wpt/tree/master/remote-playback"
        },
        {
          "value": "w3c-test.org/remote-playback/",
          "href": "https://w3c-test.org/remote-playback/"
        }
      ]
    }
  ],
  "github": "https://github.com/w3c/remote-playback",
  "crEnd": "2017-11-30",
  "implementationReportURI": "https://www.w3.org/wiki/Second_Screen/Implementation_Status#Remote_Playback_API",
  "gitRevision": "151a3f48986c0a390903c4a16c09e5c85c2cb6d0",
  "publishDate": "2024-04-30",
  "previousMaturity": "CRD",
  "previousPublishDate": "2024-04-15",
  "publishISODate": "2024-04-30T00:00:00.000Z",
  "generatedSubtitle": "W3C Candidate Recommendation Draft 30 April 2024"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-CRD">
</head>

<body data-cite="WEBIDL HTML DOM URL SECURE-CONTEXTS" class="h-entry">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.w3.org/"><img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a></p>
        <h1 id="title" class="title">リモート再生 API</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#CRD">W3C 勧告候補ドラフト</a> <time class="dt-published"
                datetime="2024-04-30">2024年4月30日</time></p>
        <details open="">
            <summary>この文書の詳細</summary>
            <dl>
                <dt>このバージョン：</dt>
                <dd>
                    <a class="u-url"
                        href="https://www.w3.org/TR/2024/CRD-remote-playback-20240430/">https://www.w3.org/TR/2024/CRD-remote-playback-20240430/</a>
                </dd>
                <dt>最新公開バージョン：</dt>
                <dd>
                    <a href="https://www.w3.org/TR/remote-playback/">https://www.w3.org/TR/remote-playback/</a>
                </dd>
                <dt>最新エディタードラフト：</dt>
                <dd><a href="https://w3c.github.io/remote-playback/">https://w3c.github.io/remote-playback/</a></dd>
                <dt>履歴：</dt>
                <dd>
                    <a
                        href="https://www.w3.org/standards/history/remote-playback/">https://www.w3.org/standards/history/remote-playback/</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/remote-playback/commits/">コミット履歴</a>
                </dd>

                <dt>実装レポート：</dt>
                <dd>
                    <a
                        href="https://www.w3.org/wiki/Second_Screen/Implementation_Status#Remote_Playback_API">https://www.w3.org/wiki/Second_Screen/Implementation_Status#Remote_Playback_API</a>
                </dd>



                <dt>編集者：</dt>
                <dd class="editor p-author h-card vcard" data-editor-id="68454">
                    <span class="p-name fn">Mark Foltz</span> (<span class="p-org org h-org">Google</span>)
                </dd>
                <dt>
                    旧編集者：
                </dt>
                <dd class="editor p-author h-card vcard" data-editor-id="45389">
                    <span class="p-name fn">Mounir Lamouri</span> (<span class="p-org org h-org">Google</span>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="68811">
                    <span class="p-name fn">Anton Vayvod</span> (<span class="p-org org h-org">Google</span>)
                </dd>

                <dt>フィードバック：</dt>
                <dd>
                    <a href="https://github.com/w3c/remote-playback/">GitHub w3c/remote-playback</a>
                    (<a href="https://github.com/w3c/remote-playback/pulls/">プルリクエスト</a>,
                    <a href="https://github.com/w3c/remote-playback/issues/new/choose">新しい issue</a>,
                    <a href="https://github.com/w3c/remote-playback/issues/">オープン issue</a>)
                </dd>

                <dt>テストスイート</dt>
                <dd>
                    <a href="https://github.com/web-platform-tests/wpt/tree/master/remote-playback">GitHub
                        web-platform-tests/remote-playback</a>
                </dd>
                <dd>
                    <a href="https://w3c-test.org/remote-playback/">w3c-test.org/remote-playback/</a>
                </dd>
            </dl>
        </details>


        <p class="copyright">
            <a href="https://www.w3.org/policies/#copyright">Copyright</a>
            ©
            2024

            <a href="https://www.w3.org/">World Wide Web Consortium</a>.
            <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
            <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>,
            <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/copyright/software-license-2023/"
                title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>要約</h2>
        <p>
            本仕様は、<a data-link-type="idl" data-lt="HTMLMediaElement" data-type="interface"
                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
            を拡張し、ウェブページからメディアのリモート再生を制御可能にするAPIを定義します。
        </p>
    </section>
    <section id="sotd" class="introductory">
        <h2>この文書の状態</h2>
        <p><em>このセクションは、本書の公開時点での状態を示します。<abbr title="World Wide Web Consortium">W3C</abbr>
                の現行出版物の一覧と、この技術報告書の最新版は
                <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr>技術報告書インデックス</a>
                （https://www.w3.org/TR/）で確認できます。</em></p>
        <p>
            本文書は<a href="https://www.w3.org/groups/wg/secondscreen">Second Screen Working
                Group</a>によって、
            <a href="https://www.w3.org/2023/Process-20231103/#recs-and-notes">Recommendation track</a>を用いたCandidate
            Recommendation Draftとして公開されました。
        </p>
        <p>
            本文書はグループが外部のプレゼンテーション型ディスプレイでウェブコンテンツを表示した経験に基づいており、必要に応じてPresentation API仕様[<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-presentation-api"
                    title="Presentation API">PRESENTATION-API</a></cite>]からパターンや設計上の配慮事項を再利用しています。
        </p>
        <p>
            この文書はまだ<strong>作業中</strong>であり変更される可能性がありますが、Working GroupはAPIのインターフェースが安定していると考えています。<a
                href="https://github.com/w3c/remote-playback/issues/">issue
                tracker</a>に記載された残りの問題の大半は現段階で軽微なものと見なされていますが、Issue <a
                href="https://github.com/w3c/remote-playback/issues/41">#41</a>は例外です。
        </p>
        <p>
            Issue <a href="https://github.com/w3c/remote-playback/issues/41">#41</a>
            では、リモート再生デバイスが対応すべきメディア再生機能のセットについて議論されています。これらの機能がリモート再生中に利用された際の相互運用性問題を特定するため、グループは今後さらに開発者フィードバックや実装経験を求め、受けたフィードバックに基づき仕様の明確化を行います。
        </p>
        <p>
            その他の問題や懸念については、<a href="https://github.com/w3c/remote-playback/issues/new">バグをファイル</a>したり、<a
                href="https://lists.w3.org/Archives/Public/public-secondscreen/">メーリングリスト</a>にメールを送信できます。スペルミスのような小さな編集上の修正であれば、プルリクエストでの提案も歓迎します。
        </p>
        <p>
            Working Groupはどなたにも本文書のレビューを呼びかけており、<abbr
                title="World Wide Web Consortium">W3C</abbr>内の関係グループと連携して、アクセシビリティ、国際化、プライバシー、セキュリティ、技術アーキテクチャ原則について水平レビューを行う予定です。
        </p>
        <p>
            <strong>リスクあり</strong>と特定された機能はありません。
        </p>
        <p>
            Second Screen Working GroupはCandidate Recommendation期間中にRemote Playback
            APIのテストスイートを作成し、実装レポートを準備します。本仕様がProposed Recommendationへ進むには、各機能について2つの独立した相互運用可能な実装が実証されなければなりません（詳細は<a
                href="#candidate-recommendation-exit-criteria">Candidate Recommendation exit
                criteria</a>セクションを参照）。
        </p>
        <p>Candidate Recommendationとしての公開は、<abbr
                title="World Wide Web Consortium">W3C</abbr>およびそのメンバーによる支持を意味しません。Candidate Recommendation
            Draftは先行するCandidate RecommendationからWorking Groupが次のCandidate Recommendation Snapshotに含める意図のある変更内容を統合したものです。
        </p>
        <p>
            この文書はドラフトであり、いつでも更新、置換、または他の文書によって破棄される可能性があります。本書を作業中以外のものとして引用することは適切ではありません。

        </p>
        <p>

            本文書は、
            <a href="https://www.w3.org/Consortium/Patent-Policy/"><abbr title="World Wide Web Consortium">W3C</abbr>
                Patent
                Policy</a>の下で運営されるグループによって作成されました。


            <abbr title="World Wide Web Consortium">W3C</abbr>は、グループの成果物に関して行われた<a rel="disclosure"
                href="https://www.w3.org/groups/wg/secondscreen/ipr">公開特許開示リスト</a>を維持しています。また、そのリストには特許の開示方法も記載されています。自身が本質的請求(<a
                href="https://www.w3.org/Consortium/Patent-Policy/#def-essential">Essential
                Claim(s)</a>)を含むと信じる特許について実際に知識を持つ個人は、<a
                href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">W3C Patent
                Policy第6節</a>に従ってその情報を開示しなければなりません。
        </p>
        <p>
            本文書は<a id="w3c_process_revision" href="https://www.w3.org/2023/Process-20231103/">2023年11月3日付
                <abbr title="World Wide Web Consortium">W3C</abbr>プロセス文書</a>によって管理されています。
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">目次</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">要約</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">この文書の状態</a></li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">1. </bdi>適合性</a></li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">2. </bdi>
                    はじめに
                </a></li>
            <li class="tocline"><a class="tocxref" href="#use-cases-and-requirements"><bdi class="secno">3. </bdi>
                    ユースケースと要件
                </a></li>
            <li class="tocline"><a class="tocxref" href="#examples"><bdi class="secno">4. </bdi>
                    例
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref"
                            href="#monitor-availability-of-remote-playback-devices-example"><bdi class="secno">4.1
                            </bdi>
                            リモート再生デバイスの利用可否監視例
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#starting-remote-playback-of-a-video-example"><bdi
                                class="secno">4.2 </bdi>
                            動画のリモート再生開始例
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#monitoring-remote-playback-state-changes"><bdi
                                class="secno">4.3 </bdi>
                            リモート再生状態の変化監視
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#api"><bdi class="secno">5. </bdi>
                    API
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#common-idioms"><bdi class="secno">5.1 </bdi>
                            共通表現
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#remoteplayback-interface"><bdi class="secno">5.2
                            </bdi>
                            <span data-export="" data-dfn-type="interface" data-idl="interface"
                                data-title="RemotePlayback" data-dfn-for=""><code>RemotePlayback</code></span> インターフェース
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref"
                                    href="#observing-remote-playback-device-availability"><bdi class="secno">5.2.1
                                    </bdi>
                                    リモート再生デバイスの可用性監視
                                </a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref"
                                            href="#the-set-of-availability-callbacks"><bdi class="secno">5.2.1.1 </bdi>
                                            可用性コールバックのセット
                                        </a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#the-list-of-available-remote-playback-devices"><bdi
                                                class="secno">5.2.1.2 </bdi>
                                            利用可能なリモート再生デバイスのリスト
                                        </a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#getting-the-remote-playback-devices-availability-information"><bdi
                                                class="secno">5.2.1.3 </bdi>
                                            <span class="formerLink" data-link-type="dfn">リモート再生デバイス</span>の可用性情報の取得
                                        </a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#monitoring-the-list-of-available-remote-playback-devices"><bdi
                                                class="secno">5.2.1.4 </bdi>
                                            利用可能なリモート再生デバイスのリストの監視
                                        </a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#stop-observing-remote-playback-devices-availability"><bdi
                                                class="secno">5.2.1.5 </bdi>
                                            リモート再生デバイス可用性の監視停止
                                        </a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref"
                                    href="#prompt-user-for-changing-remote-playback-state"><bdi class="secno">5.2.2
                                    </bdi>
                                    リモート再生状態の変更をユーザーに促す
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#the-state-attribute"><bdi class="secno">5.2.3
                                    </bdi>
                                    <span data-dfn-for="RemotePlayback" data-export="" data-dfn-type="attribute"
                                        data-idl="attribute" data-title="state" data-type="RemotePlaybackState"
                                        data-lt="state" data-local-lt="RemotePlayback.state"><code>state</code></span>
                                    属性
                                </a></li>
                            <li class="tocline"><a class="tocxref"
                                    href="#establishing-a-connection-with-a-remote-playback-device"><bdi
                                        class="secno">5.2.4 </bdi>
                                    リモート再生デバイスとの接続確立
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#browser-initiated-remote-playback"><bdi
                                        class="secno">5.2.5 </bdi>
                                    ブラウザによるリモート再生の開始
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#media-commands-and-media-playback-state"><bdi
                                        class="secno">5.2.6 </bdi>
                                    メディアコマンドと再生状態
                                </a></li>
                            <li class="tocline"><a class="tocxref"
                                    href="#disconnecting-from-a-remote-playback-device"><bdi class="secno">5.2.7 </bdi>
                                    リモート再生デバイスからの切断
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#event-handlers"><bdi class="secno">5.2.8
                                    </bdi>
                                    イベントハンドラ
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#extensions-to-htmlmediaelement"><bdi class="secno">5.3
                            </bdi>
                            <span data-xref-type="_IDL_" data-link-type="idl" data-lt="HTMLMediaElement"
                                data-cite="html" data-cite-path="/media.html" data-cite-frag="htmlmediaelement"
                                data-type="interface" class="formerLink"><code>HTMLMediaElement</code></span>
                            への拡張
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#the-disableremoteplayback-attribute"><bdi
                                        class="secno">5.3.1 </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="disableRemotePlayback" data-dfn-for="HTMLMediaElement"
                                        data-type="boolean" data-lt="disableRemotePlayback"
                                        data-local-lt="HTMLMediaElement.disableRemotePlayback"><code>disableRemotePlayback</code></span>
                                    属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#disabling-remote-playback"><bdi
                                        class="secno">5.3.2 </bdi>
                                    リモート再生の無効化
                                </a></li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#security-and-privacy-considerations"><bdi class="secno">6.
                    </bdi>
                    セキュリティとプライバシーに関する考慮事項
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#personally-identifiable-information"><bdi
                                class="secno">6.1 </bdi>
                            個人を特定できる情報
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#user-interface-guidelines"><bdi class="secno">6.2
                            </bdi>
                            ユーザーインターフェースのガイドライン
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#device-access"><bdi class="secno">6.3 </bdi>
                            デバイスアクセス
                        </a></li>
                    <li class="tocline"><a class="tocxref"
                            href="#messaging-between-the-local-and-remote-playback-devices"><bdi class="secno">6.4
                            </bdi>
                            ローカルおよびリモート再生デバイス間のメッセージング
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#secure-contexts"><bdi class="secno">6.5 </bdi>
                            セキュアコンテキスト
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#candidate-recommendation-exit-criteria"><bdi class="secno">A.
                    </bdi>
                    勧告候補終了基準
                </a></li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">B. </bdi>参考文献</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">B.1
                            </bdi>規範的参照</a></li>
                    <li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">B.2
                            </bdi>参考情報</a></li>
                </ol>
            </li>
        </ol>
    </nav>
    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x1-conformance"><bdi class="secno">1. </bdi>適合性</h2><a class="self-link" href="#conformance"
                aria-label="Permalink for Section 1."></a>
        </div>
        <p>非規範的と記載されたセクションだけでなく、この仕様内のすべての執筆ガイドライン、図、例、および注記は規範的ではありません。それ以外の内容はすべて規範的です。</p>
        <p>
            本文書における <em class="rfc2119">MAY</em>、<em class="rfc2119">MUST</em>、<em class="rfc2119">MUST
                NOT</em>、<em class="rfc2119">RECOMMENDED</em>、<em class="rfc2119">SHOULD</em> というキーワードは、
            <a href="https://datatracker.ietf.org/doc/html/bcp14">BCP 14</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119"
                    title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc8174"
                    title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
            で示されているとおり、ここで示すようにすべて大文字で現れた場合のみ、同じ意味で解釈されます。
        </p>
        <p>
            この仕様は、単一のプロダクト、すなわちその中で定義されているインターフェースを実装するユーザーエージェントに適用される適合基準を定めます。
        </p>
        <p>
            この仕様で定義されたAPIをECMAScriptで公開する実装は、Web IDL仕様 [<cite><a class="bibref" data-link-type="biblio"
                    href="#bib-webidl" title="Web IDL Standard">WEBIDL</a></cite>] で定義された ECMAScript
            バインディングに従って一貫して実装<em class="rfc2119">しなければなりません (MUST)</em>。
        </p>
    </section>
    <section class="informative" id="introduction">
        <div class="header-wrapper">
            <h2 id="x2-introduction"><bdi class="secno">2. </bdi>
                はじめに
            </h2><a class="self-link" href="#introduction" aria-label="Permalink for Section 2."></a>
        </div>
        <p><em>このセクションは規範的ではありません。</em></p>

        <p>
            本仕様は、接続されたテレビやプロジェクター、オーディオ専用スピーカーなどの<a href="#dfn-remote-playback-devices" class="internalDFN"
                data-link-type="dfn"
                id="ref-for-dfn-remote-playback-devices-1">リモート再生デバイス</a>をWebで利用可能にし、有線（HDMI、DVIなど）や無線技術（Miracast、Chromecast、DLNA、AirPlay
            など）で接続された再生デバイスも考慮しています。
        </p>
        <p>
            画面サイズが小さい、またはスピーカーが小さいデバイスは、例えば会議室の同僚や自宅の家族・友人など、多くの人へのメディアコンテンツ再生に適していません。外部のより大きな/より大きな音量の <a
                href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-remote-playback-devices-2">リモート再生デバイス</a>
            でメディアコンテンツを再生することで、再生されるメディアの体験とインパクトを高めることができます。
        </p>
        <p>
            基本的に、本仕様は<a data-type="dfn"
                href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">ブラウジングコンテキスト</a>として動作するページが、選択された<a
                href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-remote-playback-devices-3">リモート再生デバイス</a>上で特定のメディア要素のリモート再生を開始・制御できるようにします。リモート再生の開始や制御方法はユーザーエージェント側に委ねており、様々な手段で接続されるリモート再生デバイスに対応できるようになっています。例えば
            <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-remote-playback-devices-5">リモート再生デバイス</a>がHDMIやMiracastで接続された場合、同じUAが<a data-type="dfn"
                href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">ブラウジングコンテキスト</a>としてリモートメディアをレンダリングします。ただし、メディアを同じデバイスで再生せず、OSが提供する手段で外部の<a
                href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-remote-playback-devices-6">リモート再生デバイス</a>を利用できます。この場合、<a data-type="dfn"
                href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">ブラウジングコンテキスト</a>とメディアプレイヤーは同じUA上で動作し、OSがプレイヤーの出力を<a
                href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-remote-playback-devices-7">リモート再生デバイス</a>へルーティングします。これは一般的に<dfn id="dfn-media-mirroring"
                tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">メディアミラーリング</dfn>ケースと呼ばれ、この仕様はこの方法で接続された<a
                href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-remote-playback-devices-8">リモート再生デバイス</a>には何の要件も課しません。
        </p>
        <p>
            <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-remote-playback-devices-9">リモート再生デバイス</a>がメディアを再生でき、<a data-type="dfn"
                href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">ブラウジングコンテキスト</a>と通信はできるがメディア自体を取得できない場合、<a
                data-type="dfn"
                href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">ブラウジングコンテキスト</a>がメディアデータを取得して<a
                href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-remote-playback-devices-10">リモート再生デバイス</a>に渡す必要があります。これは一般的に<dfn id="dfn-media-remoting"
                tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">メディアリモーティング</dfn>ケースと呼ばれます。
        </p>
        <p>
            <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-remote-playback-devices-11">リモート再生デバイス</a>がメディアを取得・再生でき、かつ<a data-type="dfn"
                href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">ブラウジングコンテキスト</a>とも通信できる場合は、<a
                data-type="dfn"
                href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">ブラウジングコンテキスト</a>がリモートメディアを取得・レンダリングする必要はありません。この場合、UAはプロキシとして必要なデータ（メディアソースなど）を渡し、<a
                href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-remote-playback-devices-12">リモート再生デバイス</a>自体でメディアを再生するようリクエストします。これは一般的に<dfn
                id="dfn-media-flinging" tabindex="0" aria-haspopup="dialog"
                data-dfn-type="dfn">メディアフリンギング</dfn>ケースと呼ばれます。この接続方法は、今後リモート再生デバイスが実装可能なメッセージ伝送標準プロトコルを定めることで拡張できるでしょう。
        </p>
        <p>
            ここで定義されているAPIは、上記いずれかの方法で<a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-remote-playback-devices-13">リモート再生デバイス</a>に接続するUAで利用することを意図しています。
        </p>
    </section>
    <section class="informative" id="use-cases-and-requirements">
        <div class="header-wrapper">
            <h2 id="x3-use-cases-and-requirements"><bdi class="secno">3. </bdi>
                ユースケースと要件
            </h2><a class="self-link" href="#use-cases-and-requirements" aria-label="Permalink for Section 3."></a>
        </div>
        <p><em>このセクションは規範的ではありません。</em></p>

        <p>
            この仕様のユースケースと要件は、<a
                href="https://github.com/w3c/remote-playback/blob/gh-pages/use-cases.md">こちら</a>の別文書でまとめられています。
        </p>
    </section>
    <section id="examples">
        <div class="header-wrapper">
            <h2 id="x4-examples"><bdi class="secno">4. </bdi>
                例
            </h2><a class="self-link" href="#examples" aria-label="Permalink for Section 4."></a>
        </div>

        <p>
            このセクションでは、Remote Playback API の主な機能の使い方を示すコード例を示します。これらの例では、
            <code>player.html</code> はリモート再生を制御するプレイヤーページであり、<code>media.ext</code>
            はリモート再生されるメディアファイルです。ページとメディアファイルはいずれも <code>https://example.org</code> ドメインで提供されます。詳細はコード例内のコメントを参照してください。
        </p>
        <section id="monitor-availability-of-remote-playback-devices-example">
            <div class="header-wrapper">
                <h3 id="x4-1-monitor-availability-of-remote-playback-devices-example"><bdi class="secno">4.1 </bdi>
                    リモート再生デバイスの利用可否監視例
                </h3><a class="self-link" href="#monitor-availability-of-remote-playback-devices-example"
                    aria-label="Permalink for Section 4.1"></a>
            </div>

            <div class="example" id="example-1">
                <div class="marker">
                    <a class="self-link" href="#example-1">例<bdi> 1</bdi></a>
                </div>
                <pre aria-busy="false"><code class="hljs xml"><span class="hljs-comment">&lt;!-- player.html --&gt;</span>
<span class="hljs-comment">&lt;!-- リモート再生に対応したカスタムコントロール付きビデオ要素 --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"videoElement"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://example.org/media.ext"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"deviceBtn"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display: none;"</span>&gt;</span>デバイスを選択<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-comment">// 少なくとも1台のリモート再生デバイスが利用可能な場合、デバイス選択ボタンが表示されます。</span>
  <span class="hljs-keyword">const</span> deviceBtn = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"deviceBtn"</span>);
  <span class="hljs-keyword">const</span> videoElem = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"videoElement"</span>);

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">availabilityCallback</span>(<span class="hljs-params">available</span>) </span>{
    <span class="hljs-comment">// デバイスの可用性に応じてデバイス選択ボタンの表示/非表示を切り替えます。</span>
    deviceBtn.style.display = available ? <span class="hljs-string">"inline"</span> : <span class="hljs-string">"none"</span>;
  }

  videoElem.remote.watchAvailability(availabilityCallback).catch(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// プラットフォームで可用性監視がサポートされていない場合、リモート再生デバイスの検出は</span>
    <span class="hljs-comment">// remote.prompt() を呼び出してからのみ行われます。</span>
    <span class="hljs-comment">// 簡略化のため、デバイスが利用可能だと仮定して表示します。あるいは、</span>
    <span class="hljs-comment">// ボタン用に第3の状態を実装しても構いません。</span>
    deviceBtn.style.display = <span class="hljs-string">"inline"</span>;
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
            </div>
        </section>
        <section id="starting-remote-playback-of-a-video-example">
            <div class="header-wrapper">
                <h3 id="x4-2-starting-remote-playback-of-a-video-example"><bdi class="secno">4.2 </bdi>
                    動画のリモート再生開始例
                </h3><a class="self-link" href="#starting-remote-playback-of-a-video-example"
                    aria-label="Permalink for Section 4.2"></a>
            </div>

            <div class="example" id="example-2">
                <div class="marker">
                    <a class="self-link" href="#example-2">例<bdi> 2</bdi></a>
                </div>
                <pre aria-busy="false"><code class="hljs xml"><span class="hljs-comment">&lt;!-- player.html --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  deviceBtn.onclick = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// ユーザーにリモート再生デバイスの選択を促します。</span>
    videoElem.remote.prompt()
      <span class="hljs-comment">// UIを更新し、接続状態を監視します。</span>
      .then(updateRemotePlaybackState);
      <span class="hljs-comment">// ユーザーが選択UIをキャンセル、またはスクリーンが見つからなかった場合は何もしません。</span>
  };
&lt;script&gt;</span></code></pre>
            </div>
        </section>
        <section id="monitoring-remote-playback-state-changes">
            <div class="header-wrapper">
                <h3 id="x4-3-monitoring-remote-playback-state-changes"><bdi class="secno">4.3 </bdi>
                    リモート再生状態の変化監視
                </h3><a class="self-link" href="#monitoring-remote-playback-state-changes"
                    aria-label="Permalink for Section 4.3"></a>
            </div>

            <div class="example" id="example-3">
                <div class="marker">
                    <a class="self-link" href="#example-3">例<bdi> 3</bdi></a>
                </div>
                <pre aria-busy="false"><code class="hljs xml"><span class="hljs-comment">&lt;!-- player.html --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-comment">// リモート再生はユーザーエージェントからも開始される可能性があるため、</span>
  <span class="hljs-comment">// 初期状態を確認してUIを同期します。</span>
  <span class="hljs-keyword">if</span> (videoElem.remote.state == <span class="hljs-string">"disconnected"</span>)
    switchToLocalUI();
  <span class="hljs-keyword">else</span>
    switchToRemoteUI();

  videoElem.remote.onconnecting = switchToRemoteUI;
  videoElem.remote.onconnect = switchToRemoteUI;
  videoElem.remote.ondisconnect = switchToLocalUI;

  <span class="hljs-comment">// 「connecting」や「connected」状態両方に対応。複数回呼んでも何も起きません。</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switchToRemoteUI</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// 状態が 'connecting' または 'connected' であることをユーザーに示す。</span>
    <span class="hljs-comment">// 例えば、ビデオ要素はコントロールだけが必要なので非表示にする。</span>
    videoElem.style.display = <span class="hljs-string">"none"</span>;

    <span class="hljs-comment">// リモート再生デバイスの可用性監視を停止。</span>
    videoElem.remote.cancelWatchAvailability();
  };

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switchToLocalUI</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// ビデオ要素を表示する。</span>
    videoElem.style.display = <span class="hljs-string">"inline"</span>;
    <span class="hljs-comment">// 再度デバイス可用性の監視を開始。</span>
    videoElem.remote.watchAvailability(availabilityCallback);
  };
&lt;script&gt;</span></code></pre>
            </div>
        </section>
    </section>
    <section id="api">
        <div class="header-wrapper">
            <h2 id="x5-api"><bdi class="secno">5. </bdi>
                API
            </h2><a class="self-link" href="#api" aria-label="Permalink for Section 5."></a>
        </div>

        <section id="common-idioms">
            <div class="header-wrapper">
                <h3 id="x5-1-common-idioms"><bdi class="secno">5.1 </bdi>
                    共通表現
                </h3><a class="self-link" href="#common-idioms" aria-label="Permalink for Section 5.1"></a>
            </div>

            <p>
                <dfn id="dfn-local-playback-device" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">ローカル再生デバイス</dfn>は、<a data-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">ブラウジングコンテキスト</a>が動作しているデバイスおよび、そのデバイスが持つデフォルトのビデオ／オーディオ出力を指します。
            </p>
            <div class="note" role="note" id="issue-container-generatedID">
                <div role="heading" class="note-title marker" id="h-note" aria-level="4"><span>注</span></div>
                <div class="">
                    <a href="#dfn-local-playback-device" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-local-playback-device-1">ローカル再生デバイス</a>
                    は外部ディスプレイやスピーカー／ヘッドホンなど追加出力を持つ場合もあります。その出力先の切り替えがユーザーエージェント以外のシステムレベルで行われている限り、この仕様の観点ではローカル再生デバイスでの再生と見なされます。
                </div>
            </div>
            <p>
                <dfn data-lt="remote playback devices|remote playback device" id="dfn-remote-playback-devices"
                    tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">リモート再生デバイス</dfn>とは、<a
                    href="#dfn-local-playback-device" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-local-playback-device-3">ローカル再生デバイス</a>以外であり、<a data-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">ブラウジングコンテキスト</a>がメディア再生に利用できるその他全てのデバイスを指します。
            </p>
            <p>
                <dfn id="dfn-media-element-state" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">メディア要素状態</dfn>とは、ページやユーザーがユーザーエージェント実装を通じて観測できる、すべての単一
                <dfn data-plurals="media elements" id="dfn-media-element" class="externalDFN" data-no-export=""
                    data-dfn-type="dfn"><a href="https://html.spec.whatwg.org/multipage/#media-element">メディア要素</a></dfn>
                のプロパティの集合である。本仕様によって導入される新しいプロパティは、便宜上<a href="#dfn-media-element-state" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-media-element-state-1">メディア要素状態</a>
                には含まれない。
            </p>
            <div class="example">
                例えば、<code>paused</code>属性や、メディア要素の既定コントロール上でその状態を反映する一時停止／再開ボタンなどは<a href="#dfn-media-element-state"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-media-element-state-2">メディア要素状態</a>の一例です。
            </div>
            <p>
                <dfn id="dfn-local-playback-state" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">ローカル再生状態</dfn>は、特定の<a href="#dfn-media-element-state" class="internalDFN"
                    data-link-type="dfn"
                    id="ref-for-dfn-media-element-state-3">メディア要素状態</a>をローカル再生デバイスで再生する場合の、ユーザーエージェントによる実装状態です。
            </p>
            <p>
                <dfn id="dfn-remote-playback-state" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">リモート再生状態</dfn>は、特定の<a href="#dfn-media-element-state" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-media-element-state-4">メディア要素状態</a>を特定の<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/#media-element">メディア要素</a>に対し、ある<a
                    href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-remote-playback-devices-14">リモート再生デバイス</a>上で再生する場合のユーザーエージェントによる実装状態です。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-0">
                <div role="heading" class="note-title marker" id="h-note-0" aria-level="4"><span>注</span></div>
                <p class="">
                    良好なユーザー体験を提供するには、<a href="#dfn-media-element-state" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-media-element-state-5">メディア要素状態</a>が予期せず変化しないことが重要です（<a data-link-type="idl"
                        href="#dom-remoteplayback-state" class="internalDFN"
                        id="ref-for-dom-remoteplayback-state-1"><code>state</code></a>が変化した場合も同様）。また、<a
                        href="#dfn-remote-playback-state" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-remote-playback-state-1">リモート再生状態</a>と<a href="#dfn-media-element-state"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-media-element-state-6">メディア要素状態</a>が同期していることも重要です。リモート再生デバイスでメディアを一時停止したとき、ユーザーとページの双方で一時停止状態が反映されるべきです。
                </p>
            </div>
            <p>
                本仕様で言及されるタスクの<a data-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#task-source">タスクソース</a>は、<a
                    href="https://html.spec.whatwg.org/multipage/#media-element-event-task-source">
                    メディア要素イベントタスクソース</a>です。
            </p>
        </section>
        <section id="remoteplayback-interface">
            <div class="header-wrapper">
                <h3 id="x5-2-remoteplayback-interface"><bdi class="secno">5.2 </bdi>
                    <dfn data-export="" data-dfn-type="interface" id="dom-remoteplayback" data-idl="interface"
                        data-title="RemotePlayback" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>RemotePlayback</code></dfn> インターフェース
                </h3><a class="self-link" href="#remoteplayback-interface" aria-label="Permalink for Section 5.2"></a>
            </div>

            <pre class="idl def"
                id="webidl-1015675303"><span class="idlHeader"><a class="self-link" href="#webidl-1015675303">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-remoteplayback" data-title="RemotePlayback">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-remoteplayback" id="ref-for-dom-remoteplayback-1"><code>RemotePlayback</code></a> : <span class="idlSuperclass"><a data-link-type="idl" data-type="interface" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a></span> {<span data-idl="" class="idlMethod" id="idl-def-remoteplayback-watchavailability-callback" data-title="watchAvailability" data-dfn-for="RemotePlayback"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-long">long</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-remoteplayback-watchavailability" id="ref-for-dom-remoteplayback-watchavailability-1"><code>watchAvailability</code></a>(<span class="idlType"><a data-link-type="idl" href="#dom-remoteplaybackavailabilitycallback" class="internalDFN" id="ref-for-dom-remoteplaybackavailabilitycallback-1"><code>RemotePlaybackAvailabilityCallback</code></a></span> <span class="idlParamName">callback</span>);</span><span data-idl="" class="idlMethod" id="idl-def-remoteplayback-cancelwatchavailability-id" data-title="cancelWatchAvailability" data-dfn-for="RemotePlayback"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-remoteplayback-cancelwatchavailability" id="ref-for-dom-remoteplayback-cancelwatchavailability-1"><code>cancelWatchAvailability</code></a>(optional<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-long">long</a></span> <span class="idlParamName">id</span>);</span><span data-idl="" class="idlAttribute" id="idl-def-remoteplayback-state" data-title="state" data-dfn-for="RemotePlayback">

  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-remoteplaybackstate" class="internalDFN" id="ref-for-dom-remoteplaybackstate-1"><code>RemotePlaybackState</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-remoteplayback-state" id="ref-for-dom-remoteplayback-state-2"><code>state</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-remoteplayback-onconnecting" data-title="onconnecting" data-dfn-for="RemotePlayback">

  attribute<span class="idlType"> <a data-link-type="idl" data-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-remoteplayback-onconnecting" id="ref-for-dom-remoteplayback-onconnecting-1"><code>onconnecting</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-remoteplayback-onconnect" data-title="onconnect" data-dfn-for="RemotePlayback">
  attribute<span class="idlType"> <a data-link-type="idl" data-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-remoteplayback-onconnect" id="ref-for-dom-remoteplayback-onconnect-1"><code>onconnect</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-remoteplayback-ondisconnect" data-title="ondisconnect" data-dfn-for="RemotePlayback">
  attribute<span class="idlType"> <a data-link-type="idl" data-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-remoteplayback-ondisconnect" id="ref-for-dom-remoteplayback-ondisconnect-1"><code>ondisconnect</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-remoteplayback-prompt" data-title="prompt" data-dfn-for="RemotePlayback"><span class="idlType">

  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-remoteplayback-prompt" id="ref-for-dom-remoteplayback-prompt-1"><code>prompt</code></a>();</span>
};</span><span data-idl="" class="idlEnum" id="idl-def-remoteplaybackstate" data-title="RemotePlaybackState">

enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-remoteplaybackstate" id="ref-for-dom-remoteplaybackstate-2"><code>RemotePlaybackState</code></a> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-remoteplaybackstate-connecting" id="ref-for-dom-remoteplaybackstate-connecting-1"><code>connecting</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-remoteplaybackstate-connected" id="ref-for-dom-remoteplaybackstate-connected-1"><code>connected</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-remoteplaybackstate-disconnected" id="ref-for-dom-remoteplaybackstate-disconnected-1"><code>disconnected</code></a>"</span>
};</span><span data-idl="" class="idlCallback" id="idl-def-remoteplaybackavailabilitycallback" data-title="RemotePlaybackAvailabilityCallback">

callback <a class="internalDFN idlID" data-link-type="callback" href="#dom-remoteplaybackavailabilitycallback" id="ref-for-dom-remoteplaybackavailabilitycallback-2"><code>RemotePlaybackAvailabilityCallback</code></a> =<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <span class="idlParamName">available</span>);</span></code></pre>
            <p>
                <a data-link-type="idl" data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN"
                    id="ref-for-dom-remoteplayback-2"><code>RemotePlayback</code></a> オブジェクトは、ページが<a
                    href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-remote-playback-devices-16">リモート再生デバイス</a>の利用可否の検出・接続および再生制御を行うことを可能にします。
            </p>
            <p>
                <dfn data-export="" data-dfn-type="enum" id="dom-remoteplaybackstate" data-idl="enum"
                    data-title="RemotePlaybackState" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>RemotePlaybackState</code></dfn> 列挙型は、<a
                    href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-remote-playback-devices-17">リモート再生デバイス</a>への接続状態を表します。
            </p>
            <p>
                <dfn data-export="" data-dfn-type="callback" id="dom-remoteplaybackavailabilitycallback"
                    data-idl="callback" data-title="RemotePlaybackAvailabilityCallback" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>RemotePlaybackAvailabilityCallback</code></dfn> は、現在の<a
                    href="#dfn-remote-playback-device-availability" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-remote-playback-device-availability-1">リモート再生デバイスの可用性</a>を返します。
            </p>
            <section data-link-for="RemotePlayback" id="observing-remote-playback-device-availability">
                <div class="header-wrapper">
                    <h4 id="x5-2-1-observing-remote-playback-device-availability"><bdi class="secno">5.2.1 </bdi>
                        リモート再生デバイスの可用性監視
                    </h4><a class="self-link" href="#observing-remote-playback-device-availability"
                        aria-label="Permalink for Section 5.2.1"></a>
                </div>

                <p>
                    <a data-link-type="idl" data-lt="RemotePlaybackAvailabilityCallback"
                        href="#dom-remoteplaybackavailabilitycallback" class="internalDFN"
                        id="ref-for-dom-remoteplaybackavailabilitycallback-3"><code>RemotePlaybackAvailabilityCallback</code></a>
                    は、対応する<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/#media-element">メディア要素</a>の<dfn
                        id="dfn-remote-playback-device-availability" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">リモート再生デバイス可用性</dfn>をページが取得するための手段です。ユーザーエージェントが未処理の<a data-link-type="idl"
                        data-lt="prompt()" href="#dom-remoteplayback-prompt" class="internalDFN"
                        id="ref-for-dom-remoteplayback-prompt-2"><code>prompt</code></a><code>()</code>要求なしにバックグラウンドで<a
                        href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN"
                        data-link-type="dfn"
                        id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-1">リモート再生デバイス一覧監視</a>ができるなら、次に定義する<a
                        data-link-type="idl" data-lt="RemotePlaybackAvailabilityCallback"
                        href="#dom-remoteplaybackavailabilitycallback" class="internalDFN"
                        id="ref-for-dom-remoteplaybackavailabilitycallback-4"><code>RemotePlaybackAvailabilityCallback</code></a>
                    の挙動をユーザーエージェントは<em class="rfc2119">実装しなければなりません (MUST)</em>。そうでなければ、<a data-link-type="idl"
                        data-lt="watchAvailability()" href="#dom-remoteplayback-watchavailability" class="internalDFN"
                        id="ref-for-dom-remoteplayback-watchavailability-2"><code>watchAvailability</code></a><code>()</code>が返すPromiseは<em
                        class="rfc2119">NotSupportedError</em>で拒否されなければなりません。
                </p>
                <section id="the-set-of-availability-callbacks">
                    <div class="header-wrapper">
                        <h5 id="x5-2-1-1-the-set-of-availability-callbacks"><bdi class="secno">5.2.1.1 </bdi>
                            可用性コールバックのセット
                        </h5><a class="self-link" href="#the-set-of-availability-callbacks"
                            aria-label="Permalink for Section 5.2.1.1"></a>
                    </div>

                    <p>
                        ユーザーエージェントは、各<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/#media-element">メディア要素</a>に対して
                        <dfn data-dfn-for="RemotePlayback" data-export="" data-dfn-type="method"
                            id="dom-remoteplayback-watchavailability" data-idl="operation"
                            data-title="watchAvailability()" data-type="Promise"
                            data-lt="watchAvailability()|watchAvailability(callback)"
                            data-local-lt="RemotePlayback.watchAvailability|RemotePlayback.watchAvailability()|watchAvailability"
                            tabindex="0" aria-haspopup="dialog"><code>watchAvailability()</code></dfn>
                        メソッドを通じて登録された<dfn id="dfn-set-of-availability-callbacks" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">可用性コールバックの集合</dfn>を<em class="rfc2119">必ず</em>管理しなければならない。
                        各<a data-link-type="idl" data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN"
                            id="ref-for-dom-remoteplayback-3"><code>RemotePlayback</code></a>オブジェクトの
                        <a href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-set-of-availability-callbacks-1">可用性コールバックの集合</a>
                        は、タプルの集合
                        <em>(<var data-type="long">callbackId</var>, <var
                                data-type="RemotePlaybackAvailabilityCallback">callback</var>)</em>
                        として表され、最初は空である。
                    <ol>
                        <li>
                            <var data-type="long">callbackId</var> は、同一<a data-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">ブラウジングコンテキスト</a>内で<a
                                data-link-type="idl" data-lt="watchAvailability()"
                                href="#dom-remoteplayback-watchavailability" class="internalDFN"
                                id="ref-for-dom-remoteplayback-watchavailability-3"><code>watchAvailability</code></a><code>()</code>から返されるIDの中で一意な正の整数、
                        </li>
                        <li>
                            <var data-type="RemotePlaybackAvailabilityCallback">callback</var> は <a data-link-type="idl"
                                data-lt="RemotePlaybackAvailabilityCallback"
                                href="#dom-remoteplaybackavailabilitycallback" class="internalDFN"
                                id="ref-for-dom-remoteplaybackavailabilitycallback-5"><code>RemotePlaybackAvailabilityCallback</code></a>
                            オブジェクト。
                        </li>
                    </ol>
                    <p>
                        各<a data-link-type="idl" data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN"
                            id="ref-for-dom-remoteplayback-4"><code>RemotePlayback</code></a>オブジェクトは1つの<a
                            data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/#media-element">メディア要素</a>につき1つだけ作られるため、メディア要素の<a
                            href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-set-of-availability-callbacks-2">可用性コールバックのセット</a>は、その要素の<a
                            data-link-type="idl" data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN"
                            id="ref-for-dom-remoteplayback-5"><code>RemotePlayback</code></a>オブジェクトの<code>remote</code>プロパティで参照されるオブジェクトの可用性コールバックセットと同一です。
                    </p>
                    <p>
                        <a data-lt="set of availability callbacks" href="#dfn-set-of-availability-callbacks"
                            class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-set-of-availability-callbacks-4">全RemotePlayback
                            オブジェクト</a>の全可用性コールバックセットの合成集合は、<dfn id="dfn-global-set-of-availability-callbacks"
                            tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">グローバル可用性コールバックセット</dfn>と呼ばれます。
                    </p>
                </section>
                <section id="the-list-of-available-remote-playback-devices">
                    <div class="header-wrapper">
                        <h5 id="x5-2-1-2-the-list-of-available-remote-playback-devices"><bdi class="secno">5.2.1.2
                            </bdi>
                            利用可能なリモート再生デバイスのリスト
                        </h5><a class="self-link" href="#the-list-of-available-remote-playback-devices"
                            aria-label="Permalink for Section 5.2.1.2"></a>
                    </div>

                    <p>
                        ユーザーエージェントは<em class="rfc2119">利用可能なリモート再生デバイスリスト</em><dfn
                            id="dfn-list-of-available-remote-playback-devices" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">（list of available remote playback devices）</dfn>を維持<em
                            class="rfc2119">しなければなりません (MUST)</em>。このリストには<a href="#dfn-remote-playback-devices"
                            class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-18">リモート再生
                            デバイス</a>が含まれ、実装依存の発見メカニズムにより構成されます。このアルゴリズムがまだ未実行の場合は空リスト、そうでない場合は<a
                            href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN"
                            data-link-type="dfn"
                            id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-2">利用可能なリモート再生デバイス一覧監視アルゴリズム</a>の最新の結果となります。
                    </p>
                    <p>
                        ユーザーエージェントは、連続的な<a href="#dfn-monitor-the-list-of-available-remote-playback-devices"
                            class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-3">リモート再生デバイス一覧の監視</a>をサポートしない場合があります（たとえばプラットフォームまたは消費電力の制約など）。この場合、<a
                            data-link-type="idl" data-lt="watchAvailability()"
                            href="#dom-remoteplayback-watchavailability" class="internalDFN"
                            id="ref-for-dom-remoteplayback-watchavailability-4"><code>watchAvailability</code></a><code>()</code>が返すPromiseは<em
                            class="rfc2119">NotSupportedError</em>で拒否されなければならず、<a
                            href="#dfn-global-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-global-set-of-availability-callbacks-1">グローバル可用性コールバックセット</a>は空となり、<a
                            href="#dfn-initiate-remote-playback" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-initiate-remote-playback-1">リモート再生開始アルゴリズム</a>の一部としてのみ監視アルゴリズムを実行することとなります。
                    </p>
                    <p>
                        <a href="#dfn-global-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-global-set-of-availability-callbacks-2">グローバル可用性コールバックセット</a>が空でないとき、ユーザーエージェントは連続的に<a
                            href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN"
                            data-link-type="dfn"
                            id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-5">リモート再生デバイス一覧監視</a>を実行<em
                            class="rfc2119">しなければなりません
                            (MUST)</em>。これによりページ側が登録済みコールバック経由で最新可用値を維持でき、利用可能機器がある時のみリモート再生を案内できます。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-1">
                        <div role="heading" class="note-title marker" id="h-note-1" aria-level="6"><span>注</span>
                        </div>
                        <p class="">
                            ユーザーエージェントは可能な限り<a href="#dfn-monitor-the-list-of-available-remote-playback-devices"
                                class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-6">リモート再生デバイス一覧監視</a>を回避すべきです。これは<a
                                href="https://github.com/w3c/remote-playback/blob/gh-pages/use-cases.md#power-saving-friendly">
                                省電力の非機能要件</a>を満たすためです。たとえば、全ての<code>remote</code>付きメディア要素持つページがバックグラウンドになり、かつ全ページの<a
                                href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-set-of-availability-callbacks-5">可用性コールバックセット</a>が空の場合などです。
                        </p>
                    </div>
                    <p>
                        一部の<a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-devices-19">リモート再生デバイス</a>は、機能・セキュリティ・ハードウェアの制約により再生できる<a
                            href="https://html.spec.whatwg.org/multipage/#media-resource">メディアリソース</a>が限られる場合があります。たとえば、特定フォーマットのみを扱うセットトップボックスやスマートTV、ネットワークスピーカーなどです。そのようなデバイスが、特定<a
                            href="https://html.spec.whatwg.org/multipage/#media-resource">メディアリソース</a>のリモート再生が十分に保証できる場合、そのデバイスは当該リソースに対する<dfn
                            id="dfn-compatible-remote-playback-device" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">互換リモート再生デバイス</dfn>と呼びます。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-2">
                        <div role="heading" class="note-title marker" id="h-note-2" aria-level="6"><span>注</span>
                        </div>
                        <p class="">
                            ユーザーエージェントは<code><a data-link-type="element" data-type="element" href="https://html.spec.whatwg.org/multipage/media.html#the-track-element">track</a></code>要素の<a
                                data-link-type="idl" data-type="attribute"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-track-srclang"><code>srclang</code></a>
                            属性をヒントとして利用し、テキストトラックデータの言語から<a href="#dfn-compatible-remote-playback-device"
                                class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-compatible-remote-playback-device-1">互換リモート再生デバイス</a>の特定を補助できます。
                        </p>
                    </div>
                    <p>
                        ユーザーエージェントが<a href="#dfn-compatible-remote-playback-device" class="internalDFN"
                            data-link-type="dfn"
                            id="ref-for-dfn-compatible-remote-playback-device-2">互換リモート再生デバイス</a>を見つける際に考慮された<a
                            href="https://html.spec.whatwg.org/multipage/#media-resource">メディア要素のメディアリソース</a>の集合を、<dfn
                            id="dfn-availability-sources-set" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">可用性ソース集合</dfn>といいます。
                    </p>
                    <p>
                        選択中の<a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-devices-20">リモート再生デバイス</a>で<a
                            href="#dfn-initiate-remote-playback" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-initiate-remote-playback-2">リモート再生を開始</a>する際に使われる<a
                            href="https://html.spec.whatwg.org/multipage/#media-resource">メディアリソース</a>を<dfn
                            id="dfn-remote-playback-source" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">リモート再生ソース</dfn>と呼び、リモート再生ソースは可用性ソース集合のメンバーである<em class="rfc2119">必要があります
                            (MUST)</em>。
                    </p>
                    <p>
                        <a href="#dfn-availability-sources-set" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-availability-sources-set-2">可用性ソース集合</a>から<a
                            href="#dfn-remote-playback-source" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-source-2">リモート再生ソース</a>を選択する仕組みは実装依存ですが、ユーザーエージェントは可用性ソース集合内の全リソースを候補として評価<em
                            class="rfc2119">すべきです (SHOULD)</em>。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-3">
                        <div role="heading" class="note-title marker" id="h-note-3" aria-level="6"><span>注</span>
                        </div>
                        <div class="">
                            選択デバイスに対する<a href="#dfn-remote-playback-source" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-remote-playback-source-3">リモート再生ソース</a>の選択アルゴリズムは、ユーザーエージェントおよびサポートされている<a
                                href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-remote-playback-devices-21">リモート再生デバイスタイプ</a>によって変わる。たとえば<a
                                href="#dfn-media-mirroring" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-media-mirroring-1">メディアミラーリング</a>の場合は、<a data-link-type="idl"
                                data-lt="HTMLMediaElement" data-type="interface"
                                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>の<a
                                href="https://html.spec.whatwg.org/multipage/#concept-media-load-algorithm">
                                リソース選択アルゴリズム</a>をそのまま使える。ただし<a href="#dfn-media-remoting" class="internalDFN"
                                data-link-type="dfn" id="ref-for-dfn-media-remoting-1">メディアリモーティング</a>や<a
                                href="#dfn-media-flinging" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-media-flinging-1">メディアフリンギング</a>の場合は、選択リソースは選択デバイスの取得／再生能力にも依存する。
                        </div>
                    </div>
                    <p>
                        ユーザーエージェントが<a href="#dfn-remote-playback-device" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-device-4">リモート再生デバイス</a>に適切な<a
                            href="#dfn-remote-playback-source" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-source-4">リモート再生ソース</a>を判定できない場合、<em
                            class="rfc2119">推奨</em>される動作として、ユーザーエージェントは<a href="#dfn-availability-sources-set"
                            class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-availability-sources-set-4">可用性ソースセット</a>内のすべてのリソースについてのメタデータ（たとえば、<a
                            href="https://html.spec.whatwg.org/multipage/#attr-source-type">拡張MIMEタイプ</a>など）を<a
                            href="#dfn-remote-playback-device" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-device-5">リモート再生デバイス</a>へ送信し、デバイス側で自身の<a
                            href="https://html.spec.whatwg.org/multipage/#concept-media-load-algorithm">リソース選択アルゴリズム</a>を実行できるようにし、<a
                            href="#dfn-remote-playback-source" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-source-5">リモート再生ソース</a>を選択させる。
                    </p>
                    <p>
                        <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/#media-element">メディア要素</a>に対して、<a
                            href="#dfn-list-of-available-remote-playback-devices" class="internalDFN"
                            data-link-type="dfn"
                            id="ref-for-dfn-list-of-available-remote-playback-devices-1">利用可能なリモート再生デバイスのリスト</a>が空であるか、いずれもその<a
                            href="#dfn-availability-sources-set" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-availability-sources-set-5">可用性ソースセット</a>のいずれのソースとも互換性がない場合、リモート再生は<dfn
                            id="dfn-unavailable" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">利用不可</dfn>である。それ以外の場合、リモート再生は<dfn id="dfn-available" tabindex="0"
                            aria-haspopup="dialog" data-dfn-type="dfn">利用可能</dfn>である。リモート再生が<a href="#dfn-unavailable"
                            class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-unavailable-1">利用不可</a>の場合に<code>false</code>、<a href="#dfn-available"
                            class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-available-1">利用可能</a>の場合に<code>true</code>となる<code>boolean</code>値を、その<a
                            data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/#media-element">メディア要素</a>の<dfn
                            id="dfn-availability" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">可用性</dfn>と呼ぶ。
                    </p>
                    <p>
                        ユーザーエージェントが<a data-lt="monitor the list of available remote playback devices"
                            href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN"
                            data-link-type="dfn"
                            id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-7">利用可能なリモート再生デバイスのリストの監視</a>を停止した場合（例：ユーザー操作や省電力のため）、<em
                            class="rfc2119">推奨</em>される動作として、<a href="#dfn-global-set-of-availability-callbacks"
                            class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-global-set-of-availability-callbacks-4">可用性コールバックのグローバル集合</a>内のすべてのコールバックを<code>false</code>で呼び出し、各ページがユーザー体験を適切に更新できるようにすべきである。また、すべての<a
                            data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/#media-element">メディア要素</a>の<a
                            href="#dfn-availability" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-availability-1">可用性</a>値も<code>false</code>に設定して、後でユーザーエージェントが<a
                            data-lt="monitor the list of available remote playback devices"
                            href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN"
                            data-link-type="dfn"
                            id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-8">リストの監視</a>を再開した場合にも、可用性情報が正しく伝播されるようにすべきである。
                    </p>
                </section>
                <section id="getting-the-remote-playback-devices-availability-information">
                    <div class="header-wrapper">
                        <h5 id="x5-2-1-3-getting-the-remote-playback-devices-availability-information"><bdi
                                class="secno">5.2.1.3 </bdi>
                            リモート再生デバイスの可用性情報の取得
                        </h5><a class="self-link" href="#getting-the-remote-playback-devices-availability-information"
                            aria-label="Permalink for Section 5.2.1.3"></a>
                    </div>

                    <p>
                        <a data-link-type="idl" data-lt="watchAvailability()"
                            href="#dom-remoteplayback-watchavailability" class="internalDFN"
                            id="ref-for-dom-remoteplayback-watchavailability-5"><code>watchAvailability</code></a><code>()</code>
                        メソッドが呼び出されたとき、ユーザーエージェントは以下の手順を<em class="rfc2119">実行しなければならない</em>:
                    </p>
                    <dl>
                        <dt>
                            入力
                        </dt>
                        <dd>
                            <var data-type="RemotePlaybackAvailabilityCallback">callback</var> ― 可用性情報を受け取るコールバック。
                        </dd>
                        <dt>
                            出力
                        </dt>
                        <dd>
                            <var data-type="Promise">promise</var> ― <a data-link-type="idl" data-lt="Promise"
                                data-type="interface"
                                href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a> 型。
                        </dd>
                    </dl>
                    <ol>
                        <li>
                            <var data-type="Promise">promise</var> に新しい <a data-link-type="idl" data-lt="Promise"
                                data-type="interface"
                                href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a> を設定する。
                        </li>
                        <li>
                            <var data-type="Promise">promise</var> を返し、以下の手順を継続する:
                        </li>
                        <li>
                            <a href="#dom-htmlmediaelement-disableremoteplayback" class="internalDFN"
                                data-link-type="idl"
                                id="ref-for-dom-htmlmediaelement-disableremoteplayback-1"><code>disableRemotePlayback</code></a>
                            属性が <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/#media-element">media element</a>
                            に存在する場合、<var data-type="Promise">promise</var>
                            を<a data-link-type="idl" data-lt="InvalidStateError" data-type="exception"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                            で拒否し、以降の手順を中止する。
                        </li>
                        <li>
                            ユーザーエージェントが<a href="#dfn-monitor-the-list-of-available-remote-playback-devices"
                                class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-9">利用可能なリモート再生デバイスのリストを監視</a>できない場合（たとえば、ユーザーがこの機能を無効にしているなど）、<a
                                data-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">ブラウジングコンテキスト</a>の存続期間全体にわたる場合は、次の手順を<a
                                data-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">並行して</a>実行する：
                            <ol>
                                <li>
                                    <var data-type="Promise">promise</var>を fulfill する。
                                </li>
                                <li>
                                    <a data-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキューする</a>ことで、<var
                                        data-type="RemotePlaybackAvailabilityCallback">callback</var> を
                                    引数 <code>false</code> で呼び出す。
                                </li>
                                <li>
                                    残りの手順をすべて中止する。
                                </li>
                            </ol>
                        </li>
                        <li>
                            ユーザーエージェントが継続的な<a href="#dfn-monitor-the-list-of-available-remote-playback-devices"
                                class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-10">リモート再生デバイスのリスト監視</a>はできないが、
                            <a data-lt="initiate remote playback" href="#dfn-initiate-remote-playback"
                                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-initiate-remote-playback-3">
                                リモート再生開始</a>時の短時間だけ可能な場合：
                            <ol>
                                <li>
                                    <var data-type="Promise">promise</var> を <a data-link-type="idl"
                                        data-lt="NotSupportedError" data-type="exception"
                                        href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>
                                    で拒否する。
                                </li>
                                <li>
                                    以降の手順を中止する。
                                </li>
                            </ol>
                        </li>
                        <li>
                            <var data-type="long">callbackId</var> をこの<a data-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">ブラウジングコンテキスト</a>
                            でこれまで返した<var>callbackIds</var> と一意となる正の整数とする。
                        </li>
                        <li>
                            タプル <em>(<var data-type="long">callbackId</var>, <var
                                    data-type="RemotePlaybackAvailabilityCallback">callback</var>)</em> を作り、
                            この<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media
                                element</a>の
                            <a href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-set-of-availability-callbacks-6">可用性コールバックセット</a>
                            に追加する。
                        </li>
                        <li>
                            <var data-type="long">callbackId</var>で<var
                                data-type="Promise">promise</var>をfulfillし、次の手順を<a data-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">並行して</a>実行する:
                            <ol>
                                <li>
                                    <a data-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキューする</a>ことで、<a
                                        href="#dfn-availability" class="internalDFN" data-link-type="dfn"
                                        id="ref-for-dfn-availability-2">可用性</a>の現在値を引数として<a
                                        data-type="RemotePlaybackAvailabilityCallback">callback</a>を呼び出す（対象の<a
                                        data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/#media-element">メディア要素</a>）。
                                </li>
                                <li>ユーザーエージェントが<a data-lt="monitor the list of available remote playback devices"
                                        href="#dfn-monitor-the-list-of-available-remote-playback-devices"
                                        class="internalDFN" data-link-type="dfn"
                                        id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-11">利用可能なリモート再生デバイスのリストを監視</a>していない場合は、
                                    <a href="#dfn-monitor-the-list-of-available-remote-playback-devices"
                                        class="internalDFN" data-link-type="dfn"
                                        id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-12">リスト監視アルゴリズム</a>を実行する。
                                </li>
                            </ol>
                        </li>
                    </ol>
                    <div class="note" role="note" id="issue-container-generatedID-4">
                        <div role="heading" class="note-title marker" id="h-note-4" aria-level="6"><span>注</span>
                        </div>
                        <p class="">
                            <var data-type="long">callbackId</var> を割り当てる単純な方法は、
                            各<a data-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">ブラウジングコンテキスト</a>
                            ごとにカウンターを用意し、手順6で増やすことです。
                        </p>
                    </div>
                    <div class="note" role="note" id="issue-container-generatedID-5">
                        <div role="heading" class="note-title marker" id="h-note-5" aria-level="6"><span>注</span>
                        </div>
                        <div class="">
                            ユーザーのフィンガープリント防止のため、
                            ブラウザプロファイルや<a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-remote-playback-devices-26">リモート再生デバイス</a>の永続情報を使った<var
                                data-type="long">callbackId</var> の割り当ては避けることが望まれます。
                        </div>
                    </div>
                </section>
                <section id="monitoring-the-list-of-available-remote-playback-devices">
                    <div class="header-wrapper">
                        <h5 id="x5-2-1-4-monitoring-the-list-of-available-remote-playback-devices"><bdi
                                class="secno">5.2.1.4 </bdi>
                            利用可能なリモート再生デバイスのリストの監視
                        </h5><a class="self-link" href="#monitoring-the-list-of-available-remote-playback-devices"
                            aria-label="Permalink for Section 5.2.1.4"></a>
                    </div>

                    <p>
                        <a href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-set-of-availability-callbacks-7">可用性コールバックセット</a>が空でない、または
                        <a data-lt="prompt" href="#dom-remoteplayback-prompt" class="internalDFN" data-link-type="idl"
                            id="ref-for-dom-remoteplayback-prompt-3">
                            リモート再生の開始</a>リクエストが保留中の場合、ユーザーエージェントは
                        <em class="rfc2119">利用可能なリモート再生デバイスリストを監視</em>（<dfn
                            id="dfn-monitor-the-list-of-available-remote-playback-devices" tabindex="0"
                            aria-haspopup="dialog" data-dfn-type="dfn">monitor the list of available remote playback
                            devices</dfn>）しなければならない。手順は以下のとおり：
                    </p>
                    <ol>
                        <li>
                            利用可能なリモート再生デバイスを取得し（実装依存）、<var data-type="list">newDevices</var>とする。
                        </li>
                        <li>
                            <a data-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">ブラウジングコンテキスト</a>内の全<a
                                data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media
                                element</a>について：
                            <ol>
                                <li>
                                    <a href="#dom-htmlmediaelement-disableremoteplayback" class="internalDFN"
                                        data-link-type="idl"
                                        id="ref-for-dom-htmlmediaelement-disableremoteplayback-2"><code>disableRemotePlayback</code></a>
                                    属性が <var data-type="HTMLMediaElement">mediaElement</var> に存在する場合は残りの手順をスキップして次へ。
                                </li>
                                <li>
                                    <var data-type="boolean">newAvailabilityValue</var> に、<var
                                        data-type="list">newDevices</var>
                                    を用いて算出した<a href="#dfn-availability" class="internalDFN" data-link-type="dfn"
                                        id="ref-for-dfn-availability-3">可用性</a>の値を代入する。
                                </li>
                                <li>
                                    現在の<a href="#dfn-availability" class="internalDFN" data-link-type="dfn"
                                        id="ref-for-dfn-availability-4">可用性</a>が<var
                                        data-type="boolean">newAvailabilityValue</var>と異なる場合、その要素のすべての<em>(<var
                                            data-type="long">callbackId</var>,
                                        <var data-type="RemotePlaybackAvailabilityCallback">callback</var>)</em>
                                    について
                                    <ol>
                                        <li>
                                            <a data-type="dfn"
                                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキュー</a>し、<var
                                                data-type="RemotePlaybackAvailabilityCallback">callback</var> を
                                            <var data-type="boolean">newAvailabilityValue</var> で呼び出す。
                                        </li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <a href="#dfn-list-of-available-remote-playback-devices" class="internalDFN"
                                data-link-type="dfn"
                                id="ref-for-dfn-list-of-available-remote-playback-devices-3">利用可能なリモート再生デバイスのリスト</a>を
                            <var data-type="list">newDevices</var>の値に設定する。
                        </li>
                    </ol>
                </section>
                <section id="stop-observing-remote-playback-devices-availability">
                    <div class="header-wrapper">
                        <h5 id="x5-2-1-5-stop-observing-remote-playback-devices-availability"><bdi class="secno">5.2.1.5
                            </bdi>
                            リモート再生デバイス可用性の監視停止
                        </h5><a class="self-link" href="#stop-observing-remote-playback-devices-availability"
                            aria-label="Permalink for Section 5.2.1.5"></a>
                    </div>

                    <p>
                        <dfn data-dfn-for="RemotePlayback" data-export="" data-dfn-type="method"
                            id="dom-remoteplayback-cancelwatchavailability" data-idl="operation"
                            data-title="cancelWatchAvailability()" data-type="Promise"
                            data-lt="cancelWatchAvailability()|cancelWatchAvailability(id)"
                            data-local-lt="RemotePlayback.cancelWatchAvailability|RemotePlayback.cancelWatchAvailability()|cancelWatchAvailability"
                            tabindex="0" aria-haspopup="dialog"><code>cancelWatchAvailability()</code></dfn>
                        メソッドが呼ばれた場合、ユーザーエージェントは以下を<em class="rfc2119">実行しなければならない</em>:
                    </p>
                    <dl>
                        <dt>
                            入力
                        </dt>
                        <dd>
                            <var data-type="long">id</var> ― コールバック識別子
                        </dd>
                        <dt>
                            出力
                        </dt>
                        <dd>
                            <var data-type="Promise">promise</var> ― <a data-link-type="idl" data-lt="Promise"
                                data-type="interface"
                                href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a> 型。
                        </dd>
                    </dl>
                    <ol>
                        <li>
                            <var data-type="Promise">promise</var> に新しい <a data-link-type="idl" data-lt="Promise"
                                data-type="interface"
                                href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a> を設定する。
                        </li>
                        <li>
                            <var data-type="Promise">promise</var> を返し、以下の手順を継続する:
                        </li>
                        <li>
                            <a href="#dom-htmlmediaelement-disableremoteplayback" class="internalDFN"
                                data-link-type="idl"
                                id="ref-for-dom-htmlmediaelement-disableremoteplayback-3"><code>disableRemotePlayback</code></a>
                            属性が<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/#media-element">media element</a> に存在する場合、
                            <var data-type="Promise">promise</var> を
                            <a data-link-type="idl" data-lt="InvalidStateError" data-type="exception"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                            で拒否し、残りを中止する。
                        </li>
                        <li>
                            パラメータ <var data-type="long">id</var> が <code>undefined</code> の場合、
                            <a href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-set-of-availability-callbacks-9">可用性コールバックセット</a>
                            をクリアする。
                        </li>
                        <li>
                            そうでなければ、<var data-type="long">id</var> が<a href="#dfn-set-of-availability-callbacks"
                                class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-set-of-availability-callbacks-10">可用性コールバックセット</a>
                            の <var data-type="long">callbackId</var> に一致する場合、そのエントリを除去する。
                        </li>
                        <li>
                            それ以外の場合、<var data-type="Promise">promise</var> を
                            <a data-link-type="idl" data-lt="NotFoundError" data-type="exception"
                                href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a>
                            で拒否し、残りを中止する。
                        </li>
                        <li>
                            <a href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-set-of-availability-callbacks-11">可用性コールバックセット</a> が空 かつ
                            未処理の <a data-lt="prompt" href="#dom-remoteplayback-prompt" class="internalDFN"
                                data-link-type="idl" id="ref-for-dom-remoteplayback-prompt-4">リモート再生開始</a> 要求がなければ、
                            省電力のため<a href="#dfn-monitor-the-list-of-available-remote-playback-devices"
                                class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-13">リモート再生デバイスのリスト監視</a>
                            タスクをキャンセルする。
                        </li>
                        <li>
                            <var data-type="Promise">promise</var> を解決する。
                        </li>
                    </ol>
                    <div class="note" role="note" id="issue-container-generatedID-6">
                        <div role="heading" class="note-title marker" id="h-note-6" aria-level="6"><span>注</span>
                        </div>
                        <div class="">
                            リモート再生デバイス可用性の監視や、
                            選択済<a href="#dfn-availability-sources-set" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-availability-sources-set-6">可用性ソース集合</a>
                            との<a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-remote-playback-devices-28">リモート再生デバイス</a>の互換性の判定方法はユーザーエージェント次第です。
                        </div>
                    </div>
                </section>
            </section>
            <section data-link-for="RemotePlayback" id="prompt-user-for-changing-remote-playback-state">
                <div class="header-wrapper">
                    <h4 id="x5-2-2-prompt-user-for-changing-remote-playback-state"><bdi class="secno">5.2.2 </bdi>
                        リモート再生状態の変更をユーザーに促す
                    </h4><a class="self-link" href="#prompt-user-for-changing-remote-playback-state"
                        aria-label="Permalink for Section 5.2.2"></a>
                </div>

                <p>
                    <dfn data-dfn-for="RemotePlayback" data-export="" data-dfn-type="method"
                        id="dom-remoteplayback-prompt" data-idl="operation" data-title="prompt()" data-type="Promise"
                        data-lt="prompt()" data-local-lt="RemotePlayback.prompt|RemotePlayback.prompt()|prompt"
                        tabindex="0" aria-haspopup="dialog"><code>prompt()</code></dfn> メソッドが呼び出されたとき、ユーザーエージェントは<em
                        class="rfc2119">以下の手順を実行しなければならない</em>:
                </p>
                <dl>
                    <dt>
                        入力
                    </dt>
                    <dd>
                        なし。ただしアルゴリズムは<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/#media-element">メディア要素</a>、その
                        <a data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN" data-link-type="idl"
                            id="ref-for-dom-remoteplayback-7">remote</a> プロパティおよび
                        <a href="#dfn-availability-sources-set" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-availability-sources-set-7">可用性ソース集合</a>を参照する。
                    </dd>
                    <dt>
                        出力
                    </dt>
                    <dd>
                        <a data-link-type="idl" data-lt="Promise" data-type="interface"
                            href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a>
                    </dd>
                </dl>
                <ol>
                    <li>
                        <var data-type="Promise">promise</var> を新しい<a data-link-type="idl" data-lt="Promise"
                            data-type="interface"
                            href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a>として作成する。
                    </li>
                    <li>
                        <var data-type="Promise">promise</var> を返し、以降の手順を<a data-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">並列で</a>続ける。
                    </li>
                    <li>
                        <a href="#dom-htmlmediaelement-disableremoteplayback" class="internalDFN" data-link-type="idl"
                            id="ref-for-dom-htmlmediaelement-disableremoteplayback-4"><code>disableRemotePlayback</code></a>
                        属性が
                        <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/#media-element">メディア要素</a>に設定されている場合、<var
                            data-type="Promise">promise</var> を<a data-link-type="idl" data-lt="InvalidStateError"
                            data-type="exception"
                            href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>で拒否し、残りの手順を中止する。
                    </li>
                    <li>
                        同じ<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/#media-element">メディア要素</a>または
                        同じ<a data-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">ブラウジングコンテキスト</a>内で、以前の
                        <a data-link-type="idl" data-lt="prompt()" href="#dom-remoteplayback-prompt" class="internalDFN"
                            id="ref-for-dom-remoteplayback-prompt-5"><code>prompt</code></a><code>()</code>の呼び出しで未解決のPromiseが存在する場合、ユーザーエージェントは<em
                            class="rfc2119">promiseを<a data-link-type="idl" data-lt="OperationError"
                                data-type="exception"
                                href="https://webidl.spec.whatwg.org/#operationerror"><code>OperationError</code></a>例外で拒否してもよい（MAY）</em>。そして以降の手順を中止する。
                        <div class="note" role="note" id="issue-container-generatedID-7">
                            <div role="heading" class="note-title marker" id="h-note-7" aria-level="5"><span>注</span>
                            </div>
                            <div class="">
                                ここでの理由は、ユーザーエージェントが<a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/#media-element">メディア要素</a>または
                                <a data-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">ブラウジングコンテキスト</a>に対してモーダルなダイアログを表示する場合があるため。同一箇所の2回目以降の
                                <a data-link-type="idl" data-lt="prompt()" href="#dom-remoteplayback-prompt"
                                    class="internalDFN"
                                    id="ref-for-dom-remoteplayback-prompt-6"><code>prompt</code></a><code>()</code>ではUIを表示できないことがある。
                            </div>
                        </div>
                    </li>
                    <li>
                        文書の<a data-link-type="dfn|abstract-op" data-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window">アクティブウィンドウ</a>が
                        <a data-link-type="dfn|abstract-op" data-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#transient-activation">一時的なアクティベーション</a>を持たなければ、
                        <var data-type="Promise">promise</var>を<a data-link-type="idl" data-lt="InvalidAccessError"
                            data-type="exception"
                            href="https://webidl.spec.whatwg.org/#invalidaccesserror"><code>InvalidAccessError</code></a>例外で拒否し、これ以降を中止する。
                    </li>
                    <li>
                        （オプション）ユーザーエージェントが予めこの<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/#media-element">メディア要素</a>のリモート再生が決して実現できないことを知っている場合（現在の<a
                            href="#dom-remoteplayback-state" class="internalDFN" data-link-type="idl"
                            id="ref-for-dom-remoteplayback-state-3"><code>state</code></a>や
                        <a href="#dfn-list-of-available-remote-playback-devices" class="internalDFN"
                            data-link-type="dfn"
                            id="ref-for-dfn-list-of-available-remote-playback-devices-4">利用可能なリモート再生デバイス一覧</a>の有無にかかわらず）、<var
                            data-type="Promise">promise</var> を<a data-link-type="idl" data-lt="NotSupportedError"
                            data-type="exception"
                            href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>で拒否して残りを中止してもよい。
                        <div class="note" role="note" id="issue-container-generatedID-8">
                            <div role="heading" class="note-title marker" id="h-note-8" aria-level="5"><span>注</span>
                            </div>
                            <div class="">
                                例えば、ユーザーエージェントが<a href="#dfn-media-flinging" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-media-flinging-2">メディアフリンギング</a>しかサポートしない場合で、メディア要素のソースが<a
                                    data-link-type="idl" data-lt="URL" data-type="interface"
                                    href="https://url.spec.whatwg.org/#url"><code>URL</code></a>でなければ、<a
                                    href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-remote-playback-devices-29">リモート再生デバイス</a>に渡せないケースが該当する。
                            </div>
                        </div>
                    </li>
                    <li>
                        ユーザーエージェントが<a href="#dfn-list-of-available-remote-playback-devices" class="internalDFN"
                            data-link-type="dfn"
                            id="ref-for-dfn-list-of-available-remote-playback-devices-5">利用可能なリモート再生デバイスのリスト</a>を表示する必要があり、かつ<a
                            data-lt="monitor the list of
              available remote playback devices" href="#dfn-monitor-the-list-of-available-remote-playback-devices"
                            class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-14">利用可能なリモート再生デバイスのリストを監視</a>していない場合、<a
                            href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN"
                            data-link-type="dfn"
                            id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-15">リストの監視手順</a>を<a
                            data-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">並行して</a>実行する。
                    </li>
                    <li>
                        リモート再生が<a href="#dfn-unavailable" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-unavailable-2">利用不可</a>状態から変わらず、ユーザー許可要求が完了する前にそのままになる場合、
                        <var data-type="Promise">promise</var>を<a data-link-type="idl" data-lt="NotFoundError"
                            data-type="exception"
                            href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a>で拒否して以降を中止する。
                    </li>
                    <li>
                        <dfn id="dfn-change-remote-playback-state" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">リモート再生状態の変更</dfn>をユーザーに許可要求する。
                        <div class="note" role="note" id="issue-container-generatedID-9">
                            <div role="heading" class="note-title marker" id="h-note-9" aria-level="5"><span>注</span>
                            </div>
                            <div class="">
                                許可を求めるUI例としては、新しい<a href="#dfn-remote-playback-devices" class="internalDFN"
                                    data-link-type="dfn"
                                    id="ref-for-dfn-remote-playback-devices-30">リモート再生デバイス</a>の選択、ローカル／リモートデバイスの切り替え、<a
                                    href="#dfn-disconnect-from-a-remote-playback-device" class="internalDFN"
                                    data-link-type="dfn"
                                    id="ref-for-dfn-disconnect-from-a-remote-playback-device-1">リモート再生デバイスからの切断</a>などが考えられる。
                            </div>
                        </div>
                        <div class="note" role="note" id="issue-container-generatedID-10">
                            <div role="heading" class="note-title marker" id="h-note-10" aria-level="5">
                                <span>注</span>
                            </div>
                            <div class="">
                                ユーザーが既に画面ミラーリングなど別用途で<a href="#dfn-remote-playback-devices" class="internalDFN"
                                    data-link-type="dfn"
                                    id="ref-for-dfn-remote-playback-devices-31">リモート再生デバイス</a>を選んでいる場合、UIを省略して即次の手順に進めてもよい。
                            </div>
                        </div>
                    </li>
                    <li>
                        ユーザーが <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-devices-32">リモート再生デバイス</a>
                        <var data-type="remote
              playback device">device</var> を<dfn id="dfn-initiate-remote-playback" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">リモート再生開始</dfn>に選択した場合、ユーザーエージェントは<em class="rfc2119">次の手順を行う必要がある
                            (MUST)</em>:
                        <ol>
                            <li>
                                <var data-type="RemotePlayback">remote</var> オブジェクトの <a href="#dom-remoteplayback-state"
                                    class="internalDFN" data-link-type="idl"
                                    id="ref-for-dom-remoteplayback-state-4"><code>state</code></a> を <a
                                    href="#dom-remoteplaybackstate-connecting" class="internalDFN" data-link-type="idl"
                                    id="ref-for-dom-remoteplaybackstate-connecting-2"><code>connecting</code></a> に設定する。
                            </li>
                            <li>
                                <var data-type="Promise">promise</var> を解決する。
                            </li>
                            <li>
                                <a data-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキュー</a>し、<a
                                    data-type="dfn"
                                    href="https://dom.spec.whatwg.org/#concept-event-fire">connecting</a>という名前のイベントを
                                <a data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN"
                                    data-link-type="idl" id="ref-for-dom-remoteplayback-8">remote</a> プロパティで持つ<a
                                    data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/#media-element">メディア要素</a>で発火する（バブルしない、キャンセル不可、デフォルト動作なし）。
                            </li>
                            <li>
                                <a href="#dfn-establish-a-connection-with-the-remote-playback-device"
                                    class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-establish-a-connection-with-the-remote-playback-device-1">リモート再生デバイスとの接続確立</a>
                                を当該<var data-type="remote
              playback device">device</var>と<a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/#media-element">メディア要素</a>で行う。
                            </li>
                        </ol>
                        <div class="note" role="note" id="issue-container-generatedID-11">
                            <div role="heading" class="note-title marker" id="h-note-11" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                ユーザーが<a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-remote-playback-devices-33">リモート再生デバイス</a>を選ぶことは、そのデバイス利用への<em>明示的許可</em>を与えることになる。
                            </p>
                        </div>
                    </li>
                    <li>
                        そうでなくユーザーが<a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-devices-34">リモート再生デバイス</a> <var data-type="remote
              playback device">device</var> との接続解除を選んだ場合、ユーザーエージェントは<em class="rfc2119">次の手順を実行しなければならない (MUST)</em>:
                        <ol>
                            <li>
                                <var data-type="Promise">promise</var>を解決する。
                            </li>
                            <li>
                                <a href="#dfn-disconnect-from-a-remote-playback-device" class="internalDFN"
                                    data-link-type="dfn"
                                    id="ref-for-dfn-disconnect-from-a-remote-playback-device-2">リモート再生デバイスとの切断</a>
                                アルゴリズムをこの<var data-type="remote
              playback device">device</var> で実行する。
                            </li>
                        </ol>
                    </li>
                    <li>
                        それ以外の場合は、ユーザーがデバイス利用に<em>許可しなかった</em>と見なされるため、<var data-type="Promise">promise</var>を<a
                            data-link-type="idl" data-lt="NotAllowedError" data-type="exception"
                            href="https://webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a>で拒否し、ユーザーエージェントのUIを閉じる。
                    </li>
                </ol>
                <div class="note" role="note" id="issue-container-generatedID-12">
                    <div role="heading" class="note-title marker" id="h-note-12" aria-level="5"><span>注</span></div>
                    <div class="">
                        UI・デバイス選択の詳細実装はユーザーエージェント依存である。たとえば、ユーザーにはダイアログ表示によるデバイス選択（<em>許可</em>）もキャンセル（<em>不許可</em>）もできる。多くの場合、デバイスはユーザーフレンドリーな名前・ロケール・文字方向情報を広告し、ユーザーエージェントはそれに合わせて表示が推奨される。
                    </div>
                </div>
            </section>
            <section id="the-state-attribute">
                <div class="header-wrapper">
                    <h4 id="x5-2-3-the-state-attribute"><bdi class="secno">5.2.3 </bdi>
                        <dfn data-dfn-for="RemotePlayback" data-export="" data-dfn-type="attribute"
                            id="dom-remoteplayback-state" data-idl="attribute" data-title="state"
                            data-type="RemotePlaybackState" data-lt="state" data-local-lt="RemotePlayback.state"
                            tabindex="0" aria-haspopup="dialog"><code>state</code></dfn> 属性
                    </h4><a class="self-link" href="#the-state-attribute" aria-label="Permalink for Section 5.2.3"></a>
                </div>

                <p>
                    <a data-link-type="idl" href="#dom-remoteplayback-state" class="internalDFN"
                        id="ref-for-dom-remoteplayback-state-5"><code>state</code></a> 属性は、
                    <a data-link-type="idl" data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN"
                        id="ref-for-dom-remoteplayback-9"><code>RemotePlayback</code></a> 接続の現在の状態を表します。
                    状態に応じて、<a data-link-type="idl" data-lt="RemotePlaybackState" href="#dom-remoteplaybackstate"
                        class="internalDFN" id="ref-for-dom-remoteplaybackstate-3"><code>RemotePlaybackState</code></a>
                    の値のいずれかとなります:
                </p>
                <ul>
                    <li>
                        <dfn data-dfn-for="RemotePlaybackState" data-export="" data-dfn-type="enum-value"
                            id="dom-remoteplaybackstate-connecting" data-idl="enum-value" data-title="connecting"
                            tabindex="0" aria-haspopup="dialog"><code>connecting</code></dfn> は、
                        ユーザーエージェントが選択した <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-devices-35">リモート再生デバイス</a> との
                        <a href="#dfn-initiate-remote-playback" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-initiate-remote-playback-4">リモート再生の開始</a>を試みていることを意味します。
                        この状態は <code>prompt</code><code>()</code> の返す <code>promise</code> が fulfill された直後の初期状態です。
                        この状態でもメディア要素のローカル再生は継続され、メディアコマンドも <a href="#dfn-local-playback-state" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-local-playback-state-1">ローカル再生状態</a> に対して有効です。
                    </li>
                    <li>
                        <dfn data-dfn-for="RemotePlaybackState" data-export="" data-dfn-type="enum-value"
                            id="dom-remoteplaybackstate-connected" data-idl="enum-value" data-title="connected"
                            tabindex="0" aria-haspopup="dialog"><code>connected</code></dfn> は、
                        ローカルからリモート再生への切り替えが完了し、すべてのメディアコマンドが <a href="#dfn-remote-playback-state" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-remote-playback-state-2">リモート再生状態</a> に作用することを意味します。
                    </li>
                    <li>
                        <dfn data-dfn-for="RemotePlaybackState" data-export="" data-dfn-type="enum-value"
                            id="dom-remoteplaybackstate-disconnected" data-idl="enum-value" data-title="disconnected"
                            tabindex="0" aria-haspopup="dialog"><code>disconnected</code></dfn> は、
                        リモート再生が<a data-lt="initiate remote
              playback" href="#dfn-initiate-remote-playback" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-initiate-remote-playback-5">開始されていない</a>・開始に失敗または停止した状態を意味します。
                        すべてのメディアコマンドは <a href="#dfn-local-playback-state" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-local-playback-state-2">ローカル再生状態</a>
                        に作用します。リモート再生は <a data-link-type="idl" data-lt="prompt()" href="#dom-remoteplayback-prompt"
                            class="internalDFN"
                            id="ref-for-dom-remoteplayback-prompt-8"><code>prompt</code></a><code>()</code>
                        の呼び出しで開始できます。
                    </li>
                </ul>
            </section>
            <section data-link-for="RemotePlayback" id="establishing-a-connection-with-a-remote-playback-device">
                <div class="header-wrapper">
                    <h4 id="x5-2-4-establishing-a-connection-with-a-remote-playback-device"><bdi class="secno">5.2.4
                        </bdi>
                        リモート再生デバイスとの接続確立
                    </h4><a class="self-link" href="#establishing-a-connection-with-a-remote-playback-device"
                        aria-label="Permalink for Section 5.2.4"></a>
                </div>

                <p>
                    ユーザーエージェントが <dfn id="dfn-establish-a-connection-with-the-remote-playback-device" tabindex="0"
                        aria-haspopup="dialog" data-dfn-type="dfn">リモート再生デバイスとの接続確立</dfn> を行うときは、<em
                        class="rfc2119">以下の手順を実行しなければなりません (MUST)</em>:
                </p>
                <dl>
                    <dt>
                        入力
                    </dt>
                    <dd>
                        <var data-type="RemotePlayback">remote</var>: 接続する <a data-link-type="idl"
                            data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN"
                            id="ref-for-dom-remoteplayback-10"><code>RemotePlayback</code></a> オブジェクト
                    </dd>
                    <dd>
                        <var data-type="remote playback device">device</var>: 接続先の <a
                            href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-devices-36">リモート再生デバイス</a>
                    </dd>
                </dl>
                <ol>
                    <li>
                        <var data-type="RemotePlayback">remote</var> の <a data-link-type="idl"
                            href="#dom-remoteplayback-state" class="internalDFN"
                            id="ref-for-dom-remoteplayback-state-6"><code>state</code></a> が "<a data-link-type="idl"
                            href="#dom-remoteplaybackstate-connecting" class="internalDFN"
                            id="ref-for-dom-remoteplaybackstate-connecting-3"><code>connecting</code></a>"
                        でない場合、残りの手順を中止する。
                    </li>
                    <li>
                        <var data-type="RemotePlayback">remote</var> を <var
                            data-type="remote playback device">device</var> に接続要求する。この手順の詳細はユーザーエージェント依存です。
                    </li>
                    <li>
                        接続が正常に完了した場合、<a data-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキュー</a>し
                        以下を実行する:
                        <ol>
                            <li>
                                <var data-type="RemotePlayback">remote</var> の <a data-link-type="idl"
                                    href="#dom-remoteplayback-state" class="internalDFN"
                                    id="ref-for-dom-remoteplayback-state-7"><code>state</code></a> を
                                "<a data-link-type="idl" href="#dom-remoteplaybackstate-connected" class="internalDFN"
                                    id="ref-for-dom-remoteplaybackstate-connected-2"><code>connected</code></a>" に設定する。
                            </li>
                            <li>
                                <a data-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">connect</a>
                                という名前のイベントを <var data-type="RemotePlayback">remote</var> で発火する。
                            </li>
                            <li>
                                現在の <a href="#dfn-media-element-state" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-media-element-state-7">メディア要素状態</a> を
                                <a href="#dfn-remote-playback-state" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-remote-playback-state-3">リモート再生状態</a> と同期させる。この手順の実装はユーザーエージェント依存です。
                            </li>
                        </ol>
                    </li>
                    <li>
                        接続に失敗した場合、<a data-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキュー</a>し
                        以下を実行する:
                        <ol>
                            <li>
                                <var data-type="RemotePlayback">remote</var> の <a data-lt="state"
                                    href="#dom-remoteplayback-state" class="internalDFN" data-link-type="idl"
                                    id="ref-for-dom-remoteplayback-state-8">remote playback
                                    state</a> を "<a data-link-type="idl" href="#dom-remoteplaybackstate-disconnected"
                                    class="internalDFN"
                                    id="ref-for-dom-remoteplaybackstate-disconnected-2"><code>disconnected</code></a>"
                                に設定する。
                            </li>
                            <li>
                                <a data-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">disconnect</a>
                                という名前のイベントを <var data-type="RemotePlayback">remote</var> で発火する。
                            </li>
                        </ol>
                    </li>
                </ol>
                <p>
                    <a href="#dfn-remote-playback-state" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-remote-playback-state-4">リモート再生状態</a> が
                    "<a data-link-type="idl" href="#dom-remoteplaybackstate-connected" class="internalDFN"
                        id="ref-for-dom-remoteplaybackstate-connected-3"><code>connected</code></a>" の間は
                    ユーザーエージェントはメディア要素のローカルの音声・映像出力を <em class="rfc2119">一時停止すべきです (SHOULD)</em>。
                </p>
                <p>
                    ユーザーエージェントが<a
                        href="https://html.spec.whatwg.org/multipage/#expose-a-user-interface-to-the-user">ユーザーにUIを表示</a>している（つまりデフォルトコントロールを使っている）場合、
                    <a href="#dfn-remote-playback-state" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-remote-playback-state-5">リモート再生状態</a>が "<a data-link-type="idl"
                        href="#dom-remoteplaybackstate-connected" class="internalDFN"
                        id="ref-for-dom-remoteplaybackstate-connected-4"><code>connected</code></a>" であることをアイコン等で伝えるべきです
                    (<em>SHOULD</em>)。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-13">
                    <div role="heading" class="note-title marker" id="h-note-13" aria-level="5"><span>注</span></div>
                    <div class="">
                        ユーザーエージェントが <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-devices-37">リモート再生デバイス</a> との接続・ <a
                            href="#dfn-remote-playback-source" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-source-6">リモート再生ソース</a> 選択・再生開始に使う仕組みは実装依存です。
                        通常、双方向のメッセージングを行い、コマンド転送や再生状態受信で
                        <a href="#dfn-media-element-state" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-media-element-state-8">メディア要素状態</a> と <a href="#dfn-remote-playback-state"
                            class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-state-6">リモート再生状態</a> の同期をとる（<a href="#dfn-media-mirroring"
                            class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-media-mirroring-2">メディアミラーリング</a>時を除く）必要があるでしょう。
                    </div>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-14">
                    <div role="heading" class="note-title marker" id="h-note-14" aria-level="5"><span>注</span></div>
                    <div class="">
                        ユーザーエージェントは
                        <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-devices-38">リモート再生デバイス</a>
                        に可能ならロケールや文字方向情報を渡すことが推奨されます。これにより
                        <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-devices-39">リモート再生デバイス</a> はユーザーの嗜好を反映する
                        ロケール属性・インターフェースに調整できるほか、デフォルトトラックやHTTP <code>Accept-Language</code>ヘッダーなども設定できます。
                    </div>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-15">
                    <div role="heading" class="note-title marker" id="h-note-15" aria-level="5"><span>注</span></div>
                    <div class="">
                        リモート再生状態が "<a data-link-type="idl" href="#dom-remoteplaybackstate-connected" class="internalDFN"
                            id="ref-for-dom-remoteplaybackstate-connected-5"><code>connected</code></a>" で、その内容が
                        <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-devices-41">リモート再生デバイス</a>
                        でレンダリングされている間はメディア要素の出力は行うべきではありません。
                    </div>
                </div>
            </section>
            <section data-link-for="RemotePlayback" id="browser-initiated-remote-playback">
                <div class="header-wrapper">
                    <h4 id="x5-2-5-browser-initiated-remote-playback"><bdi class="secno">5.2.5 </bdi>
                        ブラウザによるリモート再生の開始
                    </h4><a class="self-link" href="#browser-initiated-remote-playback"
                        aria-label="Permalink for Section 5.2.5"></a>
                </div>

                <p>
                    ユーザーエージェントは、ブラウザから <a data-lt="establish a connection with the remote playback device"
                        href="#dfn-establish-a-connection-with-the-remote-playback-device" class="internalDFN"
                        data-link-type="dfn"
                        id="ref-for-dfn-establish-a-connection-with-the-remote-playback-device-2">リモート再生デバイスへの接続</a>
                    をサポートしてもよい（MAY）。これは、<a
                        href="https://html.spec.whatwg.org/multipage/#expose-a-user-interface-to-the-user">ユーザーに公開されているユーザーインターフェース</a>に適切なメディアコントロールを追加したり、システム全体のディスプレイミラーリングをユーザーが有効にすることで実現できる。この機能は
                    <dfn id="dfn-browser-initiated-remote-playback" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">ブラウザによるリモート再生開始</dfn> と呼ばれる。<a href="#dfn-browser-initiated-remote-playback"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-browser-initiated-remote-playback-1">ブラウザによるリモート再生開始</a>
                    をサポートするユーザーエージェントは、ユーザーが明示的な意図を示した場合（例：ブラウザのボタンをクリックするなど）のみ、リモート再生を開始するべきである（SHOULD）。
                </p>
                <p>
                    ユーザーエージェントが<a href="#dfn-browser-initiated-remote-playback" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-browser-initiated-remote-playback-2">ブラウザによるリモート再生開始</a>
                    をサポートする場合、<a href="#dom-remoteplayback-state" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-remoteplayback-state-9"><code>state</code></a>
                    属性はリモート再生デバイスとの接続状態を常に反映しなければならない（MUST）。ブラウザがリモート再生を開始または終了する場合、ユーザーエージェントは対応するイベントを、<a
                        href="#dfn-establish-a-connection-with-the-remote-playback-device" class="internalDFN"
                        data-link-type="dfn"
                        id="ref-for-dfn-establish-a-connection-with-the-remote-playback-device-3">リモート再生デバイスへの接続確立</a>と<a
                        href="#dfn-disconnect-from-a-remote-playback-device" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-disconnect-from-a-remote-playback-device-3">リモート再生デバイスからの切断</a>のアルゴリズムに従って発火しなければならない（MUST）。
                </p>
                <p>
                    <a data-lt="browser initiated remote playback" href="#dfn-browser-initiated-remote-playback"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-browser-initiated-remote-playback-3">ブラウザが新たに作成されたメディア要素でリモート再生を開始</a>する場合、
                    その<code>state</code>属性は"<a data-link-type="idl" href="#dom-remoteplaybackstate-connecting"
                        class="internalDFN"
                        id="ref-for-dom-remoteplaybackstate-connecting-4"><code>connecting</code></a>"で初期化し、その後<a
                        href="#dfn-establish-a-connection-with-the-remote-playback-device" class="internalDFN"
                        data-link-type="dfn"
                        id="ref-for-dfn-establish-a-connection-with-the-remote-playback-device-4">リモート再生デバイスへの接続確立</a>の手順に従うべきである（SHOULD）。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-16">
                    <div role="heading" class="note-title marker" id="h-note-16" aria-level="5"><span>注</span></div>
                    <div class="">
                        ブラウザによるリモート再生開始を実装するユーザーエージェントは、どの <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/#media-element">メディア要素</a>が<a
                            href="https://html.spec.whatwg.org/multipage/#allowed-to-play">再生可能</a>かや、バックグラウンド再生最適化など、他のメディア再生関連ポリシーとの連携を考慮すべきである。
                    </div>
                </div>
            </section>
            <section id="media-commands-and-media-playback-state">
                <div class="header-wrapper">
                    <h4 id="x5-2-6-media-commands-and-media-playback-state"><bdi class="secno">5.2.6 </bdi>
                        メディアコマンドと再生状態
                    </h4><a class="self-link" href="#media-commands-and-media-playback-state"
                        aria-label="Permalink for Section 5.2.6"></a>
                </div>

                <p>
                    <a data-link-type="idl" data-lt="HTMLMediaElement" data-type="interface"
                        href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                    インターフェースは、<a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-remote-playback-devices-43">リモート再生デバイス</a>との
                    接続が確立されると、リモート再生されるメディアと連携する。
                </p>
                <p>
                    <a data-link-type="idl" href="#dom-remoteplayback-state" class="internalDFN"
                        id="ref-for-dom-remoteplayback-state-11"><code>state</code></a> が "<a data-link-type="idl"
                        href="#dom-remoteplaybackstate-connected" class="internalDFN"
                        id="ref-for-dom-remoteplaybackstate-connected-6"><code>connected</code></a>"
                    である <a data-link-type="idl" data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN"
                        id="ref-for-dom-remoteplayback-11"><code>RemotePlayback</code></a> オブジェクトの場合、以下の条件で
                    <a href="#dfn-local-playback-state" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-local-playback-state-3">ローカル再生状態</a>、<a href="#dfn-media-element-state"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-media-element-state-9">メディア要素状態</a>、
                    <a href="#dfn-remote-playback-state" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-remote-playback-state-7">リモート再生状態</a> が関連付けられる:
                </p>
                <ul>
                    <li>
                        ユーザーエージェントは、その関連する<a data-link-type="idl" data-lt="HTMLMediaElement" data-type="interface"
                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                        オブジェクトで実行された全てのメディアコマンドを、リモート再生状態を変更するために<a href="#dfn-remote-playback-devices"
                            class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-devices-44">リモート再生デバイス</a>に送信しなければならない（MUST）。
                    </li>
                    <li>
                        <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-devices-45">リモート再生デバイス</a>は、ユーザーエージェントから送信されたすべてのメディアコマンドを実装すべきである（SHOULD）。
                    </li>
                    <li>
                        <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-devices-46">リモート再生デバイス</a>は、<a
                            href="#dfn-media-element-state" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-media-element-state-10">メディア要素状態</a>
                        に公開されるすべての属性に影響する<span>リモート再生状態</span>の更新情報をユーザーエージェントへ送信すべきである（SHOULD）。
                    </li>
                    <li>
                        ユーザーエージェントは、<a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-devices-47">リモート再生デバイス</a>から受け取った
                        <a href="#dfn-remote-playback-state" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-state-10">リモート再生状態</a>の全ての更新情報を処理し、
                        メディア要素の<a href="#dfn-local-playback-state" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-local-playback-state-4">ローカル再生状態</a>を適切に更新しなければならない（MUST）。
                    </li>
                </ul>
                <p>
                    いずれかのコマンドの送信に失敗した場合、ユーザーエージェントは<a href="#dfn-disconnect-from-a-remote-playback-device"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-disconnect-from-a-remote-playback-device-4">リモート再生デバイスから切断</a>を実行してもよい（MAY）。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-17">
                    <div role="heading" class="note-title marker" id="h-note-17" aria-level="5"><span>注</span></div>
                    <div class="">
                        <p>
                            <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-remote-playback-devices-48">リモート再生デバイス</a>は、ユーザーエージェントが持つ再生エンジンの機能の一部のみを実装することがあり、<a
                                data-link-type="idl" data-lt="HTMLMediaElement" data-type="interface"
                                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>のAPIの中にはリモート再生時の利用に適さないものもある。この場合、リモート再生でサポートされないメディアコマンドを実行した後は、<a
                                href="#dfn-local-playback-state" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-local-playback-state-5">ローカル再生状態</a>が、
                            できるだけ実際の<a href="#dfn-remote-playback-state" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-remote-playback-state-11">リモート再生状態</a>に近く反映されるべきである。
                        </p>
                        <p>
                            例えば <a data-link-type="idl" data-lt="fastSeek()" data-type="method"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-fastseek"><code>fastSeek</code></a><code>()</code>
                            をサポートしていない<a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-remote-playback-devices-49">リモート再生デバイス</a>に接続中に呼び出すと、
                            <a data-link-type="idl" data-type="attribute"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-seeking"><code>seeking</code></a>
                            属性は <code>false</code> のままとなり、<a
                                href="https://html.spec.whatwg.org/multipage/#event-media-seeking"><code>seeking</code></a>
                            イベントも発火しなくてよい。
                        </p>
                    </div>
                </div>
            </section>
            <section id="disconnecting-from-a-remote-playback-device">
                <div class="header-wrapper">
                    <h4 id="x5-2-7-disconnecting-from-a-remote-playback-device"><bdi class="secno">5.2.7 </bdi>
                        リモート再生デバイスからの切断
                    </h4><a class="self-link" href="#disconnecting-from-a-remote-playback-device"
                        aria-label="Permalink for Section 5.2.7"></a>
                </div>

                <p>
                    ユーザーエージェントが <dfn id="dfn-disconnect-from-a-remote-playback-device" tabindex="0"
                        aria-haspopup="dialog" data-dfn-type="dfn">リモート再生デバイスから切断</dfn> を行うとき、その手順は<em
                        class="rfc2119">以下の通りでなければならない (MUST)</em>:
                </p>
                <dl>
                    <dt>
                        入力
                    </dt>
                    <dd>
                        <var data-type="RemotePlayback">remote</var>：停止対象の<a data-link-type="idl"
                            data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN"
                            id="ref-for-dom-remoteplayback-12"><code>RemotePlayback</code></a>オブジェクト
                    </dd>
                    <dd>
                        <var data-type="remote playback device">device</var>：切断先の <a href="#dfn-remote-playback-devices"
                            class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-devices-50">リモート再生デバイス</a>
                    </dd>
                </dl>
                <ol>
                    <li>
                        <var data-type="RemotePlayback">remote</var> の <a href="#dom-remoteplayback-state"
                            class="internalDFN" data-link-type="idl"
                            id="ref-for-dom-remoteplayback-state-12"><code>state</code></a>
                        が <code>disconnected</code> なら、残りの手順を中止。
                    </li>
                    <li>
                        <a data-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキュー</a>
                        し、以下のステップを実行する:
                        <ol>
                            <li>
                                <var data-type="RemotePlayback">remote</var> を <var
                                    data-type="remote playback device">device</var> から切断要求する。この手順の具体的な実装はユーザーエージェント依存。
                            </li>
                            <li>
                                <var data-type="RemotePlayback">remote</var> の <code>state</code> を
                                <code>disconnected</code> に変更。
                            </li>
                            <li>
                                <a data-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">disconnect</a>
                                という名前のイベントを <var data-type="RemotePlayback">remote</var> で発火。
                            </li>
                            <li>
                                現在の <a href="#dfn-media-element-state" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-media-element-state-11">メディア要素状態</a> を
                                <a href="#dfn-local-playback-state" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-local-playback-state-6">ローカル再生状態</a> と同期させる。このステップの実装はユーザーエージェント依存。
                            </li>
                        </ol>
                    </li>
                </ol>
                <p>
                    再生中にリモート再生デバイスが突然切断（例：電源断やネットワーク切断など）された場合、ユーザーエージェントは<em class="rfc2119">、<a
                            href="#dfn-disconnect-from-a-remote-playback-device" class="internalDFN"
                            data-link-type="dfn"
                            id="ref-for-dfn-disconnect-from-a-remote-playback-device-5">リモート再生デバイスから切断</a>の手順の前に<a
                            href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN"
                            data-link-type="dfn"
                            id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-16">利用可能なリモート再生デバイスのリストを監視</a>の手順を実行するべきである
                        (SHOULD)</em>。
                    これにより、<a href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-set-of-availability-callbacks-12">可用性コールバックセット</a>内のコールバック呼び出しが
                    <a data-link-type="idl" href="#dfn-disconnect" class="internalDFN"
                        id="ref-for-dfn-disconnect-3"><code><code>disconnect</code></code></a>
                    イベントが発火する前に行われるため、ページ側で再開できないことをUIで案内できる。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-18">
                    <div role="heading" class="note-title marker" id="h-note-18" aria-level="5"><span>注</span></div>
                    <div class="">
                        ユーザーエージェントがリモート再生デバイスに停止要求を出しても、実際に再生が止まるかはユーザーエージェント・リモートデバイス実装による。場合によっては、ユーザーエージェント側が単にリモートデバイスから切断し、<code>disconnected</code>状態に遷移するだけとなる。
                    </div>
                </div>
            </section>
            <section id="event-handlers">
                <div class="header-wrapper">
                    <h4 id="x5-2-8-event-handlers"><bdi class="secno">5.2.8 </bdi>
                        イベントハンドラ
                    </h4><a class="self-link" href="#event-handlers" aria-label="Permalink for Section 5.2.8"></a>
                </div>

                <p>
                    以下は <a data-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers">イベントハンドラ</a>
                    （およびそれに対応する<a data-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">イベントハンドライベント種別</a>）であり、<a
                        data-link-type="idl" data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN"
                        id="ref-for-dom-remoteplayback-13"><code>RemotePlayback</code></a> インターフェースを実装するオブジェクトは
                    <a data-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers">イベントハンドラ</a>IDL属性として
                    サポートしなければならない：
                </p>
                <table data-dfn-for="RemotePlayback">
                    <thead>
                        <tr>
                            <th>
                                イベントハンドラ
                            </th>
                            <th>
                                イベントハンドライベント種別
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <dfn data-export="" data-dfn-type="attribute" id="dom-remoteplayback-onconnecting"
                                    data-idl="attribute" data-title="onconnecting" data-dfn-for="RemotePlayback"
                                    data-type="EventHandler" data-lt="onconnecting"
                                    data-local-lt="RemotePlayback.onconnecting" tabindex="0"
                                    aria-haspopup="dialog"><code>onconnecting</code></dfn>
                            </td>
                            <td>
                                <dfn data-dfn-type="event" id="dfn-connecting" tabindex="0" aria-haspopup="dialog"
                                    data-export=""><code>connecting</code></dfn>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <dfn data-export="" data-dfn-type="attribute" id="dom-remoteplayback-onconnect"
                                    data-idl="attribute" data-title="onconnect" data-dfn-for="RemotePlayback"
                                    data-type="EventHandler" data-lt="onconnect"
                                    data-local-lt="RemotePlayback.onconnect" tabindex="0"
                                    aria-haspopup="dialog"><code>onconnect</code></dfn>
                            </td>
                            <td>
                                <dfn data-dfn-type="event" id="dfn-connect" tabindex="0" aria-haspopup="dialog"
                                    data-export=""><code>connect</code></dfn>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <dfn data-export="" data-dfn-type="attribute" id="dom-remoteplayback-ondisconnect"
                                    data-idl="attribute" data-title="ondisconnect" data-dfn-for="RemotePlayback"
                                    data-type="EventHandler" data-lt="ondisconnect"
                                    data-local-lt="RemotePlayback.ondisconnect" tabindex="0"
                                    aria-haspopup="dialog"><code>ondisconnect</code></dfn>
                            </td>
                            <td>
                                <dfn data-dfn-type="event" id="dfn-disconnect" tabindex="0" aria-haspopup="dialog"
                                    data-export=""><code>disconnect</code></dfn>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </section>
        </section>
        <section data-dfn-for="HTMLMediaElement" id="extensions-to-htmlmediaelement">
            <div class="header-wrapper">
                <h3 id="x5-3-extensions-to-htmlmediaelement"><bdi class="secno">5.3 </bdi>
                    <a data-link-type="idl" data-lt="HTMLMediaElement" data-type="interface"
                        href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                    への拡張
                </h3><a class="self-link" href="#extensions-to-htmlmediaelement"
                    aria-label="Permalink for Section 5.3"></a>
            </div>

            <pre class="idl def" id="webidl-1396475025"><span class="idlHeader"><a class="self-link" href="#webidl-1396475025">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-htmlmediaelement-partial-1" data-title="HTMLMediaElement">partial interface <a data-idl="partial" data-link-type="interface" data-title="HTMLMediaElement" class="idlID" data-dfn-for="HTMLMediaElement" data-type="interface" href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement">HTMLMediaElement</a> {<span data-idl="" class="idlAttribute" id="idl-def-htmlmediaelement-remote" data-title="remote" data-dfn-for="HTMLMediaElement">
  [<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-remoteplayback" class="internalDFN" id="ref-for-dom-remoteplayback-14"><code>RemotePlayback</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-htmlmediaelement-remote" id="ref-for-dom-htmlmediaelement-remote-2"><code>remote</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-htmlmediaelement-disableremoteplayback" data-title="disableRemotePlayback" data-dfn-for="HTMLMediaElement">

  [<span class="extAttr"><a data-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions">CEReactions</a></span>] attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-htmlmediaelement-disableremoteplayback" id="ref-for-dom-htmlmediaelement-disableremoteplayback-5"><code>disableRemotePlayback</code></a>;</span>
};</span></code></pre>
            <p>
                <dfn data-export="" data-dfn-type="attribute" id="dom-htmlmediaelement-remote" data-idl="attribute"
                    data-title="remote" data-dfn-for="HTMLMediaElement" data-type="RemotePlayback" data-lt="remote"
                    data-local-lt="HTMLMediaElement.remote" tabindex="0"
                    aria-haspopup="dialog"><code>remote</code></dfn> 属性は、<em class="rfc2119">必ず</em>
                当該<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/#media-element">メディア要素</a>に関連付けられた <a
                    data-link-type="idl" data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN"
                    id="ref-for-dom-remoteplayback-15"><code>RemotePlayback</code></a> インスタンスを返します。
            </p>
            <section data-link-for="HTMLMediaElement" id="the-disableremoteplayback-attribute">
                <div class="header-wrapper">
                    <h4 id="x5-3-1-the-disableremoteplayback-attribute"><bdi class="secno">5.3.1 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-htmlmediaelement-disableremoteplayback"
                            data-idl="attribute" data-title="disableRemotePlayback" data-dfn-for="HTMLMediaElement"
                            data-type="boolean" data-lt="disableRemotePlayback"
                            data-local-lt="HTMLMediaElement.disableRemotePlayback" tabindex="0"
                            aria-haspopup="dialog"><code>disableRemotePlayback</code></dfn> 属性
                    </h4><a class="self-link" href="#the-disableremoteplayback-attribute"
                        aria-label="Permalink for Section 5.3.1"></a>
                </div>

                <p>
                    一部のページではメディア要素の <a href="#dfn-disable-remote-playback" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-disable-remote-playback-1">リモート再生を無効化</a> したい場合があります。たとえば、<a
                        href="https://www.w3.org/TR/presentation-api/#interface-presentationrequest"><code>PresentationRequest</code></a>
                    で発表用画面にドキュメント全体を提示したいケース等です。この用途に対応するため、 <code>audio</code> と <code>video</code> 要素のコンテンツ属性に新しく
                    <code>disableRemotePlayback</code> 属性が追加されています。
                </p>
                <p>
                    また、<a href="#dom-htmlmediaelement-disableremoteplayback" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-htmlmediaelement-disableremoteplayback-6"><code>disableRemotePlayback</code></a>
                    IDL属性が、各要素の <code>disableRemotePlayback</code> コンテンツ属性の値を反映するように <code>HTMLMediaElement</code>
                    インターフェースに追加されています。
                    <a href="#dom-htmlmediaelement-disableremoteplayback" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-htmlmediaelement-disableremoteplayback-7"><code>disableRemotePlayback</code></a>
                    IDL属性は、同名のコンテンツ属性を<em class="rfc2119">反映</em>しなければなりません。
                </p>
            </section>
            <section data-link-for="HTMLMediaElement" id="disabling-remote-playback">
                <div class="header-wrapper">
                    <h4 id="x5-3-2-disabling-remote-playback"><bdi class="secno">5.3.2 </bdi>
                        リモート再生の無効化
                    </h4><a class="self-link" href="#disabling-remote-playback"
                        aria-label="Permalink for Section 5.3.2"></a>
                </div>

                <p>
                    <a href="#dom-htmlmediaelement-disableremoteplayback" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-htmlmediaelement-disableremoteplayback-8"><code>disableRemotePlayback</code></a>
                    属性が<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/#media-element">メディア要素</a>に存在する場合、ユーザーエージェントは
                    そのメディア要素をリモート再生したり、そのためのUIを表示したり<em class="rfc2119">してはなりません</em>。
                </p>
                <p>
                    <a href="#dom-htmlmediaelement-disableremoteplayback" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-htmlmediaelement-disableremoteplayback-9"><code>disableRemotePlayback</code></a>
                    属性が <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">メディア要素</a>
                    に付与されたとき、ユーザーエージェントは
                    <dfn id="dfn-disable-remote-playback" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">リモート再生を無効化</dfn>する手順を必ず実行します:
                </p>
                <ol>
                    <li>
                        <a data-link-type="idl" data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN"
                            id="ref-for-dom-remoteplayback-16"><code>RemotePlayback</code></a> のメソッドが返す保留中のPromiseを
                        <a data-link-type="idl" data-lt="InvalidStateError" data-type="exception"
                            href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                        で拒否する。
                    </li>
                    <li>
                        メディア要素の <a href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-set-of-availability-callbacks-13">可用性コールバックセット</a> をクリアする。
                    </li>
                    <li>
                        その <a href="#dom-remoteplayback-state" class="internalDFN" data-link-type="idl"
                            id="ref-for-dom-remoteplayback-state-13"><code>state</code></a> が <code>disconnected</code>
                        でなければ、
                        メディア要素が接続または接続中の<a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-devices-51">リモート再生デバイス</a>
                        について<a href="#dfn-disconnect-from-a-remote-playback-device" class="internalDFN"
                            data-link-type="dfn"
                            id="ref-for-dfn-disconnect-from-a-remote-playback-device-6">リモート再生デバイスからの切断</a>アルゴリズムを実行する。
                    </li>
                </ol>
            </section>
        </section>
    </section>
    <section class="informative" id="security-and-privacy-considerations">
        <div class="header-wrapper">
            <h2 id="x6-security-and-privacy-considerations"><bdi class="secno">6. </bdi>
                セキュリティとプライバシーに関する考慮事項
            </h2><a class="self-link" href="#security-and-privacy-considerations"
                aria-label="Permalink for Section 6."></a>
        </div>
        <p><em>このセクションは規範的ではありません。</em></p>

        <section id="personally-identifiable-information">
            <div class="header-wrapper">
                <h3 id="x6-1-personally-identifiable-information"><bdi class="secno">6.1 </bdi>
                    個人を特定できる情報
                </h3><a class="self-link" href="#personally-identifiable-information"
                    aria-label="Permalink for Section 6.1"></a>
            </div>

            <p>
                <code>callback</code>を
                <a data-link-type="idl" data-lt="watchAvailability()" href="#dom-remoteplayback-watchavailability"
                    class="internalDFN"
                    id="ref-for-dom-remoteplayback-watchavailability-6"><code>watchAvailability</code></a><code>()</code>
                メソッド経由で発火すると、
                <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-remote-playback-devices-52">リモート再生デバイス</a>の有無に関する1ビットの情報が局所
                ネットワークを通じて発見される。この情報は他の
                情報と組み合わせてユーザーを指紋化するのに利用される可能性がある。ただし、この情報は
                ユーザーのローカルネットワークの文脈にも依存するため、リスクは
                最小限である。また設計上、<a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-remote-playback-devices-53">リモート再生デバイス</a>の人が読める名前はページには公開されない。
            </p>
            <p>
                このAPIは、<a data-lt="monitor the list of available remote
          playback devices" href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN"
                    data-link-type="dfn"
                    id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-17">利用可能なリモート再生デバイスのリストを監視する</a>ことを可能にする。ユーザーエージェントが
                <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-remote-playback-devices-54">リモート再生デバイス</a>と<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/#media-element">メディア要素</a>の<a
                    href="https://html.spec.whatwg.org/multipage/#media-resource">リソース</a>
                の互換性および可用性をどのように判断するかは実装依存である。ユーザーエージェントが
                <a href="https://html.spec.whatwg.org/multipage/#media-resource">メディアリソース</a>
                を特定の種類のデバイスにマッチさせて可用性を確認する場合、
                この機能はユーザーの
                <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-remote-playback-devices-55">リモート再生デバイス</a>の情報をユーザーの同意なく推定するために利用できる。
            </p>
            <p>
                ユーザーがブラウザの設定からバックグラウンドでの監視を無効にした場合、
                ユーザーエージェントは<a href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN"
                    data-link-type="dfn"
                    id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-18">利用可能なリモート再生デバイスのリストを監視</a>
                すべきではない。
            </p>
        </section>
        <section id="user-interface-guidelines">
            <div class="header-wrapper">
                <h3 id="x6-2-user-interface-guidelines"><bdi class="secno">6.2 </bdi>
                    ユーザーインターフェースのガイドライン
                </h3><a class="self-link" href="#user-interface-guidelines" aria-label="Permalink for Section 6.2"></a>
            </div>

            <dl>
                <dt>
                    オリジンの表示
                </dt>
                <dd>
                    <p>
                        <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-remote-playback-devices-56">リモート再生デバイス</a>の利用許可を求められた際、
                        <a href="#dfn-change-remote-playback-state" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-change-remote-playback-state-1">リモート再生状態変更</a>
                        の手順中、ユーザーエージェントは要求元のオリジンを明示すべきである。
                    </p>
                    <p>
                        リモート再生を要求するオリジンを表示することで、
                        特に<a data-link-type="dfn|abstract-op" data-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable">子ナビゲーブル</a>
                        から要求が発生した場合、ユーザーがどのコンテンツからの要求か理解できる。例えば、埋め込みコンテンツは
                        不要なリモート再生開始を誘うクリックをユーザーに促す可能性がある。
                    </p>
                    <p>
                        表示されるオリジンを明示することで、ユーザーは
                        そのコンテンツが<a data-type="dfn"
                            href="https://www.w3.org/TR/secure-contexts/#potentially-trustworthy-origin">信頼できるオリジン</a>
                        （例：<code>https:</code>）からのものであり、既知または想定されたサイトに対応しているかどうかを判断しやすくなる。
                    </p>
                </dd>
            </dl>
        </section>
        <section id="device-access">
            <div class="header-wrapper">
                <h3 id="x6-3-device-access"><bdi class="secno">6.3 </bdi>
                    デバイスアクセス
                </h3><a class="self-link" href="#device-access" aria-label="Permalink for Section 6.3"></a>
            </div>

            <p>
                Remote Playback APIはディスプレイの「ローカル」の意味を抽象化し、
                ネットワークアクセス可能なディスプレイもローカルディスプレイとして扱う。Remote Playback APIは
                いかなるディスプレイへもページがアクセスするにはユーザーの許可が必要となり、
                第三者に見られる表示デバイスで意図しないコンテンツが表示されるなどの
                問題を軽減する。
            </p>
        </section>
        <section id="messaging-between-the-local-and-remote-playback-devices">
            <div class="header-wrapper">
                <h3 id="x6-4-messaging-between-the-local-and-remote-playback-devices"><bdi class="secno">6.4 </bdi>
                    ローカルおよびリモート再生デバイス間のメッセージング
                </h3><a class="self-link" href="#messaging-between-the-local-and-remote-playback-devices"
                    aria-label="Permalink for Section 6.4"></a>
            </div>

            <p>
                本仕様は
                <a href="#dfn-local-playback-device" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-local-playback-device-5">ローカル再生デバイス</a>と<a href="#dfn-remote-playback-devices"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-57">リモート再生デバイス</a>
                間の通信プロトコルは定義しないが、ユーザーエージェントは両者間のメッセージ
                の機密性や真正性をある程度保証すべきである。
            </p>
        </section>
        <section id="secure-contexts">
            <div class="header-wrapper">
                <h3 id="x6-5-secure-contexts"><bdi class="secno">6.5 </bdi>
                    セキュアコンテキスト
                </h3><a class="self-link" href="#secure-contexts" aria-label="Permalink for Section 6.5"></a>
            </div>

            <p>
                Remote Playback APIは[<cite><a class="bibref" data-link-type="biblio" href="#bib-secure-contexts"
                        title="Secure Contexts">SECURE-CONTEXTS</a></cite>]に限定されていない。
                なぜならこのAPIは通常、ユーザーエージェントが
                <a data-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">ブラウジングコンテキスト</a>
                に関係なく全てのメディアで提供する機能をWebアプリケーションに公開するためである。
                ユーザーエージェントは[<cite><a class="bibref" data-link-type="biblio" href="#bib-secure-contexts"
                        title="Secure Contexts">SECURE-CONTEXTS</a></cite>]
                にAPIの利用を制限でき、その場合はセキュアでないコンテキストでは
                <a href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN"
                    data-link-type="dfn"
                    id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-19">利用可能なリモート再生デバイスのリストを監視</a>アルゴリズムで常に空のリストを返すことになる。
            </p>
        </section>
    </section>
    <section class="appendix" id="candidate-recommendation-exit-criteria">
        <div class="header-wrapper">
            <h2 id="a-candidate-recommendation-exit-criteria"><bdi class="secno">A. </bdi>
                勧告候補終了基準
            </h2><a class="self-link" href="#candidate-recommendation-exit-criteria"
                aria-label="Permalink for Appendix A."></a>
        </div>

        <p>
            本仕様を提案勧告へ進めるには、各機能について少なくとも二つの独立した相互運用可能な
            実装が存在する必要がある。個々の機能は別々の製品によって実装されていてよく、
            全ての機能を単一の製品が実装する必要はない。さらに、実装は
            <a href="#dfn-media-remoting" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-media-remoting-2">メディアリモート</a>及び<a href="#dfn-media-flinging" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-media-flinging-3">メディアフリング</a>のケースにも
            対応している必要があり、同一製品内または別製品間で満たしてもよい。
        </p>
        <p>
            これらの基準の目的上、次の用語を定義する：
        </p>
        <dl>
            <dt>
                独立
            </dt>
            <dd>
                各実装は異なる事業者によって開発され、他の資格を満たす実装のコードを
                共有・再利用・派生してはならない。本仕様の実装に関係しない
                コードの断片はこの要件から除外される。
            </dd>
            <dt>
                相互運用可能
            </dt>
            <dd>
                公式テストスイートの該当テストケースをパスすること。
            </dd>
            <dt>
                実装
            </dt>
            <dd>
                次を満たすユーザーエージェント：
                <ol>
                    <li>仕様を実装していること
                    </li>
                    <li>一般公開されていること。実装は出荷製品やβ版、プレビューリリース、
                        "nightly build"等の公開バージョンでよい。非出荷製品のリリースは
                        少なくとも1か月以上その機能を実装し、安定性を示している必要がある。
                    </li>
                    <li>実験的でないこと（テストスイート通過のみを目的としたバージョンや
                        今後通常利用を想定しないものではないこと）。
                    </li>
                </ol>
            </dd>
        </dl>
    </section>


    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="b-references"><bdi class="secno">B. </bdi>参考文献</h2><a class="self-link" href="#references"
                aria-label="Permalink for Appendix B."></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="b-1-normative-references"><bdi class="secno">B.1 </bdi>規範的参照</h3><a class="self-link"
                    href="#normative-references" aria-label="Permalink for Appendix B.1"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-dom">[dom]</dt>
                <dd>
                    <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Anne van Kesteren. WHATWG.
                    Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-html">[HTML]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren;
                    Domenic Denicola; Ian Hickson; Philip Jägenstedt; Simon Pieters. WHATWG. Living Standard. URL: <a
                        href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-presentation-api">[PRESENTATION-API]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/presentation-api/"><cite>Presentation API</cite></a>. Mark Foltz;
                    Dominik Röttsches. W3C. 16 October 2023. W3C Candidate Recommendation. URL: <a
                        href="https://www.w3.org/TR/presentation-api/">https://www.w3.org/TR/presentation-api/</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate
                            Requirement Levels</cite></a>. S. Bradner. IETF. March 1997. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
                </dd>
                <dt id="bib-rfc8174">[RFC8174]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC
                            2119 Key Words</cite></a>. B. Leiba. IETF. May 2017. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
                </dd>
                <dt id="bib-webidl">[WEBIDL]</dt>
                <dd>
                    <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Edgar Chen; Timothy Gu.
                    WHATWG. Living Standard. URL: <a
                        href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
        <section id="informative-references">
            <div class="header-wrapper">
                <h3 id="b-2-informative-references"><bdi class="secno">B.2 </bdi>参考情報</h3><a class="self-link"
                    href="#informative-references" aria-label="Permalink for Appendix B.2"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-secure-contexts">[SECURE-CONTEXTS]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/secure-contexts/"><cite>Secure Contexts</cite></a>. Mike West. W3C.
                    10 November 2023. W3C Candidate Recommendation. URL: <a
                        href="https://www.w3.org/TR/secure-contexts/">https://www.w3.org/TR/secure-contexts/</a>
                </dd>
                <dt id="bib-url">[url]</dt>
                <dd>
                    <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Anne van Kesteren. WHATWG.
                    Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="Back to Top">↑</abbr></a>
    </p>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-media-mirroring"
        aria-label="Links in this document to definition: media mirroring">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-media-mirroring"
                aria-label="Permalink for definition: media mirroring. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-media-mirroring-1"
                    title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available
                    remote playback devices</a>
            </li>
            <li>
                <a href="#ref-for-dfn-media-mirroring-2"
                    title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a
                    connection with a remote playback device</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-media-remoting"
        aria-label="Links in this document to definition: media remoting">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-media-remoting"
                aria-label="Permalink for definition: media remoting. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-media-remoting-1"
                    title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available
                    remote playback devices</a>
            </li>
            <li>
                <a href="#ref-for-dfn-media-remoting-2" title="§ A. Candidate Recommendation exit criteria">§ A.
                    Candidate Recommendation exit criteria</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-media-flinging"
        aria-label="Links in this document to definition: media flinging">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-media-flinging"
                aria-label="Permalink for definition: media flinging. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-media-flinging-1"
                    title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available
                    remote playback devices</a>
            </li>
            <li>
                <a href="#ref-for-dfn-media-flinging-2" title="§ 5.2.2 Prompt user for changing remote playback state">§
                    5.2.2 Prompt user for changing remote playback state</a>
            </li>
            <li>
                <a href="#ref-for-dfn-media-flinging-3" title="§ A. Candidate Recommendation exit criteria">§ A.
                    Candidate Recommendation exit criteria</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-local-playback-device"
        aria-label="Links in this document to definition: local playback device">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-local-playback-device"
                aria-label="Permalink for definition: local playback device. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-local-playback-device-1" title="§ 5.1 Common idioms">§ 5.1 Common idioms</a> <a
                    href="#ref-for-dfn-local-playback-device-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-local-playback-device-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-local-playback-device-4" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-local-playback-device-5"
                    title="§ 6.4 Messaging between the local and remote playback devices">§ 6.4 Messaging between the
                    local and remote playback devices</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-remote-playback-devices"
        aria-label="Links in this document to definition: remote playback device">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-remote-playback-devices"
                aria-label="Permalink for definition: remote playback device. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-remote-playback-devices-1" title="§ 2. Introduction">§ 2. Introduction</a> <a
                    href="#ref-for-dfn-remote-playback-devices-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-remote-playback-devices-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-remote-playback-devices-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-remote-playback-devices-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-remote-playback-devices-6" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-remote-playback-devices-7" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-remote-playback-devices-8" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-remote-playback-devices-9" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-remote-playback-devices-10" title="Reference 10">(10)</a> <a
                    href="#ref-for-dfn-remote-playback-devices-11" title="Reference 11">(11)</a> <a
                    href="#ref-for-dfn-remote-playback-devices-12" title="Reference 12">(12)</a> <a
                    href="#ref-for-dfn-remote-playback-devices-13" title="Reference 13">(13)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-remote-playback-devices-14" title="§ 5.1 Common idioms">§ 5.1 Common idioms</a> <a
                    href="#ref-for-dfn-remote-playback-devices-15" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-remote-playback-devices-16" title="§ 5.2 RemotePlayback interface">§ 5.2
                    RemotePlayback interface</a> <a href="#ref-for-dfn-remote-playback-devices-17"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-remote-playback-devices-18"
                    title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available
                    remote playback devices</a> <a href="#ref-for-dfn-remote-playback-devices-19"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-remote-playback-devices-20"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-remote-playback-devices-21"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-remote-playback-devices-22"
                    title="Reference 5">(5)</a> <a href="#ref-for-dfn-remote-playback-devices-23"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-remote-playback-devices-24"
                    title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-remote-playback-devices-25"
                    title="§ 5.2.1.3 Getting the remote playback devices availability information">§ 5.2.1.3 Getting the
                    remote playback devices availability information</a> <a
                    href="#ref-for-dfn-remote-playback-devices-26" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-remote-playback-devices-27"
                    title="§ 5.2.1.5 Stop observing remote playback devices availability">§ 5.2.1.5 Stop observing
                    remote playback devices availability</a> <a href="#ref-for-dfn-remote-playback-devices-28"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-remote-playback-devices-29"
                    title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing
                    remote playback state</a> <a href="#ref-for-dfn-remote-playback-devices-30"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-remote-playback-devices-31"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-remote-playback-devices-32"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-remote-playback-devices-33"
                    title="Reference 5">(5)</a> <a href="#ref-for-dfn-remote-playback-devices-34"
                    title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-remote-playback-devices-35" title="§ 5.2.3 The state attribute">§ 5.2.3 The state
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-dfn-remote-playback-devices-36"
                    title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a
                    connection with a remote playback device</a> <a href="#ref-for-dfn-remote-playback-devices-37"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-remote-playback-devices-38"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-remote-playback-devices-39"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-remote-playback-devices-40"
                    title="Reference 5">(5)</a> <a href="#ref-for-dfn-remote-playback-devices-41"
                    title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-remote-playback-devices-42" title="§ 5.2.5 Browser initiated remote playback">§
                    5.2.5 Browser initiated remote playback</a>
            </li>
            <li>
                <a href="#ref-for-dfn-remote-playback-devices-43"
                    title="§ 5.2.6 Media commands and media playback state">§ 5.2.6 Media commands and media playback
                    state</a> <a href="#ref-for-dfn-remote-playback-devices-44" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-remote-playback-devices-45" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-remote-playback-devices-46" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-remote-playback-devices-47" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-remote-playback-devices-48" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-remote-playback-devices-49" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-remote-playback-devices-50"
                    title="§ 5.2.7 Disconnecting from a remote playback device">§ 5.2.7 Disconnecting from a remote
                    playback device</a>
            </li>
            <li>
                <a href="#ref-for-dfn-remote-playback-devices-51" title="§ 5.3.2 Disabling remote playback">§ 5.3.2
                    Disabling remote playback</a>
            </li>
            <li>
                <a href="#ref-for-dfn-remote-playback-devices-52" title="§ 6.1 Personally identifiable information">§
                    6.1 Personally identifiable information</a> <a href="#ref-for-dfn-remote-playback-devices-53"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-remote-playback-devices-54"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-remote-playback-devices-55"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-remote-playback-devices-56" title="§ 6.2 User interface guidelines">§ 6.2 User
                    interface guidelines</a>
            </li>
            <li>
                <a href="#ref-for-dfn-remote-playback-devices-57"
                    title="§ 6.4 Messaging between the local and remote playback devices">§ 6.4 Messaging between the
                    local and remote playback devices</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-media-element-state"
        aria-label="Links in this document to definition: media element state">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-media-element-state"
                aria-label="Permalink for definition: media element state. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-media-element-state-1" title="§ 5.1 Common idioms">§ 5.1 Common idioms</a> <a
                    href="#ref-for-dfn-media-element-state-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-media-element-state-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-media-element-state-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-media-element-state-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-media-element-state-6" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-media-element-state-7"
                    title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a
                    connection with a remote playback device</a> <a href="#ref-for-dfn-media-element-state-8"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-media-element-state-9" title="§ 5.2.6 Media commands and media playback state">§
                    5.2.6 Media commands and media playback state</a> <a href="#ref-for-dfn-media-element-state-10"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-media-element-state-11"
                    title="§ 5.2.7 Disconnecting from a remote playback device">§ 5.2.7 Disconnecting from a remote
                    playback device</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-local-playback-state"
        aria-label="Links in this document to definition: local playback state">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-local-playback-state"
                aria-label="Permalink for definition: local playback state. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-local-playback-state-1" title="§ 5.2.3 The state attribute">§ 5.2.3 The state
                    attribute</a> <a href="#ref-for-dfn-local-playback-state-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-local-playback-state-3" title="§ 5.2.6 Media commands and media playback state">§
                    5.2.6 Media commands and media playback state</a> <a href="#ref-for-dfn-local-playback-state-4"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-local-playback-state-5"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-local-playback-state-6"
                    title="§ 5.2.7 Disconnecting from a remote playback device">§ 5.2.7 Disconnecting from a remote
                    playback device</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-remote-playback-state"
        aria-label="Links in this document to definition: remote playback state">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-remote-playback-state"
                aria-label="Permalink for definition: remote playback state. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-remote-playback-state-1" title="§ 5.1 Common idioms">§ 5.1 Common idioms</a>
            </li>
            <li>
                <a href="#ref-for-dfn-remote-playback-state-2" title="§ 5.2.3 The state attribute">§ 5.2.3 The state
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-dfn-remote-playback-state-3"
                    title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a
                    connection with a remote playback device</a> <a href="#ref-for-dfn-remote-playback-state-4"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-remote-playback-state-5"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-remote-playback-state-6"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-remote-playback-state-7" title="§ 5.2.6 Media commands and media playback state">§
                    5.2.6 Media commands and media playback state</a> <a href="#ref-for-dfn-remote-playback-state-8"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-remote-playback-state-9"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-remote-playback-state-10"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-remote-playback-state-11"
                    title="Reference 5">(5)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-remoteplayback"
        aria-label="Links in this document to definition: RemotePlayback">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-remoteplayback"
                aria-label="Permalink for definition: RemotePlayback. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-remoteplayback-1" title="§ 5.2 RemotePlayback interface">§ 5.2 RemotePlayback
                    interface</a> <a href="#ref-for-dom-remoteplayback-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-3" title="§ 5.2.1.1 The set of availability callbacks">§ 5.2.1.1
                    The set of availability callbacks</a> <a href="#ref-for-dom-remoteplayback-4"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-remoteplayback-5" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-remoteplayback-6" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-7" title="§ 5.2.2 Prompt user for changing remote playback state">§
                    5.2.2 Prompt user for changing remote playback state</a> <a href="#ref-for-dom-remoteplayback-8"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-9" title="§ 5.2.3 The state attribute">§ 5.2.3 The state
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-10"
                    title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a
                    connection with a remote playback device</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-11" title="§ 5.2.6 Media commands and media playback state">§ 5.2.6
                    Media commands and media playback state</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-12" title="§ 5.2.7 Disconnecting from a remote playback device">§
                    5.2.7 Disconnecting from a remote playback device</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-13" title="§ 5.2.8 Event Handlers">§ 5.2.8 Event Handlers</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-14" title="§ 5.3 Extensions to HTMLMediaElement">§ 5.3 Extensions
                    to HTMLMediaElement</a> <a href="#ref-for-dom-remoteplayback-15" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-16" title="§ 5.3.2 Disabling remote playback">§ 5.3.2 Disabling
                    remote playback</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-remoteplaybackstate"
        aria-label="Links in this document to definition: RemotePlaybackState">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-remoteplaybackstate"
                aria-label="Permalink for definition: RemotePlaybackState. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-remoteplaybackstate-1" title="§ 5.2 RemotePlayback interface">§ 5.2 RemotePlayback
                    interface</a> <a href="#ref-for-dom-remoteplaybackstate-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplaybackstate-3" title="§ 5.2.3 The state attribute">§ 5.2.3 The state
                    attribute</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-remoteplaybackavailabilitycallback"
        aria-label="Links in this document to definition: RemotePlaybackAvailabilityCallback">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-remoteplaybackavailabilitycallback"
                aria-label="Permalink for definition: RemotePlaybackAvailabilityCallback. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-remoteplaybackavailabilitycallback-1" title="§ 5.2 RemotePlayback interface">§ 5.2
                    RemotePlayback interface</a> <a href="#ref-for-dom-remoteplaybackavailabilitycallback-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplaybackavailabilitycallback-3"
                    title="§ 5.2.1 Observing remote playback device availability">§ 5.2.1 Observing remote playback
                    device availability</a> <a href="#ref-for-dom-remoteplaybackavailabilitycallback-4"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplaybackavailabilitycallback-5"
                    title="§ 5.2.1.1 The set of availability callbacks">§ 5.2.1.1 The set of availability callbacks</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-remote-playback-device-availability"
        aria-label="Links in this document to definition: remote playback device availability">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-remote-playback-device-availability"
                aria-label="Permalink for definition: remote playback device availability. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-remote-playback-device-availability-1" title="§ 5.2 RemotePlayback interface">§
                    5.2 RemotePlayback interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-set-of-availability-callbacks"
        aria-label="Links in this document to definition: set of availability callbacks">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-set-of-availability-callbacks"
                aria-label="Permalink for definition: set of availability callbacks. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-set-of-availability-callbacks-1"
                    title="§ 5.2.1.1 The set of availability callbacks">§ 5.2.1.1 The set of availability callbacks</a>
                <a href="#ref-for-dfn-set-of-availability-callbacks-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-set-of-availability-callbacks-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-set-of-availability-callbacks-4" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-set-of-availability-callbacks-5"
                    title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available
                    remote playback devices</a>
            </li>
            <li>
                <a href="#ref-for-dfn-set-of-availability-callbacks-6"
                    title="§ 5.2.1.3 Getting the remote playback devices availability information">§ 5.2.1.3 Getting the
                    remote playback devices availability information</a>
            </li>
            <li>
                <a href="#ref-for-dfn-set-of-availability-callbacks-7"
                    title="§ 5.2.1.4 Monitoring the list of available remote playback devices">§ 5.2.1.4 Monitoring the
                    list of available remote playback devices</a> <a href="#ref-for-dfn-set-of-availability-callbacks-8"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-set-of-availability-callbacks-9"
                    title="§ 5.2.1.5 Stop observing remote playback devices availability">§ 5.2.1.5 Stop observing
                    remote playback devices availability</a> <a href="#ref-for-dfn-set-of-availability-callbacks-10"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-set-of-availability-callbacks-11"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-set-of-availability-callbacks-12"
                    title="§ 5.2.7 Disconnecting from a remote playback device">§ 5.2.7 Disconnecting from a remote
                    playback device</a>
            </li>
            <li>
                <a href="#ref-for-dfn-set-of-availability-callbacks-13" title="§ 5.3.2 Disabling remote playback">§
                    5.3.2 Disabling remote playback</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-remoteplayback-watchavailability"
        aria-label="Links in this document to definition: watchAvailability()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-remoteplayback-watchavailability"
                aria-label="Permalink for definition: watchAvailability(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-remoteplayback-watchavailability-1" title="§ 5.2 RemotePlayback interface">§ 5.2
                    RemotePlayback interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-watchavailability-2"
                    title="§ 5.2.1 Observing remote playback device availability">§ 5.2.1 Observing remote playback
                    device availability</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-watchavailability-3"
                    title="§ 5.2.1.1 The set of availability callbacks">§ 5.2.1.1 The set of availability callbacks</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-watchavailability-4"
                    title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available
                    remote playback devices</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-watchavailability-5"
                    title="§ 5.2.1.3 Getting the remote playback devices availability information">§ 5.2.1.3 Getting the
                    remote playback devices availability information</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-watchavailability-6"
                    title="§ 6.1 Personally identifiable information">§ 6.1 Personally identifiable information</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-global-set-of-availability-callbacks"
        aria-label="Links in this document to definition: global set of availability callbacks">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-global-set-of-availability-callbacks"
                aria-label="Permalink for definition: global set of availability callbacks. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-global-set-of-availability-callbacks-1"
                    title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available
                    remote playback devices</a> <a href="#ref-for-dfn-global-set-of-availability-callbacks-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-global-set-of-availability-callbacks-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-global-set-of-availability-callbacks-4"
                    title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-list-of-available-remote-playback-devices"
        aria-label="Links in this document to definition: list of available remote playback devices">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-list-of-available-remote-playback-devices"
                aria-label="Permalink for definition: list of available remote playback devices. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-list-of-available-remote-playback-devices-1"
                    title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available
                    remote playback devices</a>
            </li>
            <li>
                <a href="#ref-for-dfn-list-of-available-remote-playback-devices-2"
                    title="§ 5.2.1.4 Monitoring the list of available remote playback devices">§ 5.2.1.4 Monitoring the
                    list of available remote playback devices</a> <a
                    href="#ref-for-dfn-list-of-available-remote-playback-devices-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-list-of-available-remote-playback-devices-4"
                    title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing
                    remote playback state</a> <a href="#ref-for-dfn-list-of-available-remote-playback-devices-5"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-compatible-remote-playback-device"
        aria-label="Links in this document to definition: compatible remote playback device">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-compatible-remote-playback-device"
                aria-label="Permalink for definition: compatible remote playback device. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-compatible-remote-playback-device-1"
                    title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available
                    remote playback devices</a> <a href="#ref-for-dfn-compatible-remote-playback-device-2"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-availability-sources-set"
        aria-label="Links in this document to definition: availability sources set">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-availability-sources-set"
                aria-label="Permalink for definition: availability sources set. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-availability-sources-set-1"
                    title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available
                    remote playback devices</a> <a href="#ref-for-dfn-availability-sources-set-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-availability-sources-set-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-availability-sources-set-4"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-availability-sources-set-5"
                    title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-availability-sources-set-6"
                    title="§ 5.2.1.5 Stop observing remote playback devices availability">§ 5.2.1.5 Stop observing
                    remote playback devices availability</a>
            </li>
            <li>
                <a href="#ref-for-dfn-availability-sources-set-7"
                    title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing
                    remote playback state</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-remote-playback-source"
        aria-label="Links in this document to definition: remote playback source">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-remote-playback-source"
                aria-label="Permalink for definition: remote playback source. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-remote-playback-source-1"
                    title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available
                    remote playback devices</a> <a href="#ref-for-dfn-remote-playback-source-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-remote-playback-source-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-remote-playback-source-4"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-remote-playback-source-5"
                    title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-remote-playback-source-6"
                    title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a
                    connection with a remote playback device</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-unavailable"
        aria-label="Links in this document to definition: unavailable">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-unavailable"
                aria-label="Permalink for definition: unavailable. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-unavailable-1" title="§ 5.2.1.2 The list of available remote playback devices">§
                    5.2.1.2 The list of available remote playback devices</a>
            </li>
            <li>
                <a href="#ref-for-dfn-unavailable-2" title="§ 5.2.2 Prompt user for changing remote playback state">§
                    5.2.2 Prompt user for changing remote playback state</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-available"
        aria-label="Links in this document to definition: available">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-available"
                aria-label="Permalink for definition: available. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-available-1" title="§ 5.2.1.2 The list of available remote playback devices">§
                    5.2.1.2 The list of available remote playback devices</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-availability"
        aria-label="Links in this document to definition: availability">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-availability"
                aria-label="Permalink for definition: availability. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-availability-1" title="§ 5.2.1.2 The list of available remote playback devices">§
                    5.2.1.2 The list of available remote playback devices</a>
            </li>
            <li>
                <a href="#ref-for-dfn-availability-2"
                    title="§ 5.2.1.3 Getting the remote playback devices availability information">§ 5.2.1.3 Getting the
                    remote playback devices availability information</a>
            </li>
            <li>
                <a href="#ref-for-dfn-availability-3"
                    title="§ 5.2.1.4 Monitoring the list of available remote playback devices">§ 5.2.1.4 Monitoring the
                    list of available remote playback devices</a> <a href="#ref-for-dfn-availability-4"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-monitor-the-list-of-available-remote-playback-devices"
        aria-label="Links in this document to definition: monitor the list of available remote playback devices">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-monitor-the-list-of-available-remote-playback-devices"
                aria-label="Permalink for definition: monitor the list of available remote playback devices. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-1"
                    title="§ 5.2.1 Observing remote playback device availability">§ 5.2.1 Observing remote playback
                    device availability</a>
            </li>
            <li>
                <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-2"
                    title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available
                    remote playback devices</a> <a
                    href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-3"
                    title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-4"
                    title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-5"
                    title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-6"
                    title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-7"
                    title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-8"
                    title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-9"
                    title="§ 5.2.1.3 Getting the remote playback devices availability information">§ 5.2.1.3 Getting the
                    remote playback devices availability information</a> <a
                    href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-10"
                    title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-11"
                    title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-12"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-13"
                    title="§ 5.2.1.5 Stop observing remote playback devices availability">§ 5.2.1.5 Stop observing
                    remote playback devices availability</a>
            </li>
            <li>
                <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-14"
                    title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing
                    remote playback state</a> <a
                    href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-15"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-16"
                    title="§ 5.2.7 Disconnecting from a remote playback device">§ 5.2.7 Disconnecting from a remote
                    playback device</a>
            </li>
            <li>
                <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-17"
                    title="§ 6.1 Personally identifiable information">§ 6.1 Personally identifiable information</a> <a
                    href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-18"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-19"
                    title="§ 6.5 Secure Contexts">§ 6.5 Secure Contexts</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-remoteplayback-cancelwatchavailability"
        aria-label="Links in this document to definition: cancelWatchAvailability()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-remoteplayback-cancelwatchavailability"
                aria-label="Permalink for definition: cancelWatchAvailability(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-remoteplayback-cancelwatchavailability-1" title="§ 5.2 RemotePlayback interface">§
                    5.2 RemotePlayback interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-remoteplayback-prompt"
        aria-label="Links in this document to definition: prompt()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-remoteplayback-prompt"
                aria-label="Permalink for definition: prompt(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-remoteplayback-prompt-1" title="§ 5.2 RemotePlayback interface">§ 5.2
                    RemotePlayback interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-prompt-2"
                    title="§ 5.2.1 Observing remote playback device availability">§ 5.2.1 Observing remote playback
                    device availability</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-prompt-3"
                    title="§ 5.2.1.4 Monitoring the list of available remote playback devices">§ 5.2.1.4 Monitoring the
                    list of available remote playback devices</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-prompt-4"
                    title="§ 5.2.1.5 Stop observing remote playback devices availability">§ 5.2.1.5 Stop observing
                    remote playback devices availability</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-prompt-5"
                    title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing
                    remote playback state</a> <a href="#ref-for-dom-remoteplayback-prompt-6" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-prompt-7" title="§ 5.2.3 The state attribute">§ 5.2.3 The state
                    attribute</a> <a href="#ref-for-dom-remoteplayback-prompt-8" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-change-remote-playback-state"
        aria-label="Links in this document to definition: change remote playback state">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-change-remote-playback-state"
                aria-label="Permalink for definition: change remote playback state. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-change-remote-playback-state-1" title="§ 6.2 User interface guidelines">§ 6.2 User
                    interface guidelines</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-initiate-remote-playback"
        aria-label="Links in this document to definition: initiate remote playback">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-initiate-remote-playback"
                aria-label="Permalink for definition: initiate remote playback. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-initiate-remote-playback-1"
                    title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available
                    remote playback devices</a> <a href="#ref-for-dfn-initiate-remote-playback-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initiate-remote-playback-3"
                    title="§ 5.2.1.3 Getting the remote playback devices availability information">§ 5.2.1.3 Getting the
                    remote playback devices availability information</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initiate-remote-playback-4" title="§ 5.2.3 The state attribute">§ 5.2.3 The state
                    attribute</a> <a href="#ref-for-dfn-initiate-remote-playback-5" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-remoteplayback-state"
        aria-label="Links in this document to definition: state">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-remoteplayback-state"
                aria-label="Permalink for definition: state. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-remoteplayback-state-1" title="§ 5.1 Common idioms">§ 5.1 Common idioms</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-state-2" title="§ 5.2 RemotePlayback interface">§ 5.2
                    RemotePlayback interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-state-3"
                    title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing
                    remote playback state</a> <a href="#ref-for-dom-remoteplayback-state-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-state-5" title="§ 5.2.3 The state attribute">§ 5.2.3 The state
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-state-6"
                    title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a
                    connection with a remote playback device</a> <a href="#ref-for-dom-remoteplayback-state-7"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-remoteplayback-state-8"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-state-9" title="§ 5.2.5 Browser initiated remote playback">§ 5.2.5
                    Browser initiated remote playback</a> <a href="#ref-for-dom-remoteplayback-state-10"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-state-11" title="§ 5.2.6 Media commands and media playback state">§
                    5.2.6 Media commands and media playback state</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-state-12"
                    title="§ 5.2.7 Disconnecting from a remote playback device">§ 5.2.7 Disconnecting from a remote
                    playback device</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplayback-state-13" title="§ 5.3.2 Disabling remote playback">§ 5.3.2
                    Disabling remote playback</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-remoteplaybackstate-connecting"
        aria-label="Links in this document to definition: connecting">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-remoteplaybackstate-connecting"
                aria-label="Permalink for definition: connecting. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-remoteplaybackstate-connecting-1" title="§ 5.2 RemotePlayback interface">§ 5.2
                    RemotePlayback interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplaybackstate-connecting-2"
                    title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing
                    remote playback state</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplaybackstate-connecting-3"
                    title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a
                    connection with a remote playback device</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplaybackstate-connecting-4"
                    title="§ 5.2.5 Browser initiated remote playback">§ 5.2.5 Browser initiated remote playback</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-remoteplaybackstate-connected"
        aria-label="Links in this document to definition: connected">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-remoteplaybackstate-connected"
                aria-label="Permalink for definition: connected. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-remoteplaybackstate-connected-1" title="§ 5.2 RemotePlayback interface">§ 5.2
                    RemotePlayback interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplaybackstate-connected-2"
                    title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a
                    connection with a remote playback device</a> <a href="#ref-for-dom-remoteplaybackstate-connected-3"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-remoteplaybackstate-connected-4"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-remoteplaybackstate-connected-5"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplaybackstate-connected-6"
                    title="§ 5.2.6 Media commands and media playback state">§ 5.2.6 Media commands and media playback
                    state</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-remoteplaybackstate-disconnected"
        aria-label="Links in this document to definition: disconnected">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-remoteplaybackstate-disconnected"
                aria-label="Permalink for definition: disconnected. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-remoteplaybackstate-disconnected-1" title="§ 5.2 RemotePlayback interface">§ 5.2
                    RemotePlayback interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-remoteplaybackstate-disconnected-2"
                    title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a
                    connection with a remote playback device</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-establish-a-connection-with-the-remote-playback-device"
        aria-label="Links in this document to definition: establish a connection with the remote playback device">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-establish-a-connection-with-the-remote-playback-device"
                aria-label="Permalink for definition: establish a connection with the remote playback device. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-establish-a-connection-with-the-remote-playback-device-1"
                    title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing
                    remote playback state</a>
            </li>
            <li>
                <a href="#ref-for-dfn-establish-a-connection-with-the-remote-playback-device-2"
                    title="§ 5.2.5 Browser initiated remote playback">§ 5.2.5 Browser initiated remote playback</a> <a
                    href="#ref-for-dfn-establish-a-connection-with-the-remote-playback-device-3"
                    title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-establish-a-connection-with-the-remote-playback-device-4"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-browser-initiated-remote-playback"
        aria-label="Links in this document to definition: browser initiated remote playback">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-browser-initiated-remote-playback"
                aria-label="Permalink for definition: browser initiated remote playback. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-browser-initiated-remote-playback-1"
                    title="§ 5.2.5 Browser initiated remote playback">§ 5.2.5 Browser initiated remote playback</a> <a
                    href="#ref-for-dfn-browser-initiated-remote-playback-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-browser-initiated-remote-playback-3" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-disconnect-from-a-remote-playback-device"
        aria-label="Links in this document to definition: disconnect from a remote playback device">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-disconnect-from-a-remote-playback-device"
                aria-label="Permalink for definition: disconnect from a remote playback device. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-disconnect-from-a-remote-playback-device-1"
                    title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing
                    remote playback state</a> <a href="#ref-for-dfn-disconnect-from-a-remote-playback-device-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-disconnect-from-a-remote-playback-device-3"
                    title="§ 5.2.5 Browser initiated remote playback">§ 5.2.5 Browser initiated remote playback</a>
            </li>
            <li>
                <a href="#ref-for-dfn-disconnect-from-a-remote-playback-device-4"
                    title="§ 5.2.6 Media commands and media playback state">§ 5.2.6 Media commands and media playback
                    state</a>
            </li>
            <li>
                <a href="#ref-for-dfn-disconnect-from-a-remote-playback-device-5"
                    title="§ 5.2.7 Disconnecting from a remote playback device">§ 5.2.7 Disconnecting from a remote
                    playback device</a>
            </li>
            <li>
                <a href="#ref-for-dfn-disconnect-from-a-remote-playback-device-6"
                    title="§ 5.3.2 Disabling remote playback">§ 5.3.2 Disabling remote playback</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-remoteplayback-onconnecting"
        aria-label="Links in this document to definition: onconnecting">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-remoteplayback-onconnecting"
                aria-label="Permalink for definition: onconnecting. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-remoteplayback-onconnecting-1" title="§ 5.2 RemotePlayback interface">§ 5.2
                    RemotePlayback interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-connecting"
        aria-label="Links in this document to definition: connecting">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-connecting"
                aria-label="Permalink for definition: connecting. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-connecting-1" title="§ 5.2.2 Prompt user for changing remote playback state">§
                    5.2.2 Prompt user for changing remote playback state</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-remoteplayback-onconnect"
        aria-label="Links in this document to definition: onconnect">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-remoteplayback-onconnect"
                aria-label="Permalink for definition: onconnect. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-remoteplayback-onconnect-1" title="§ 5.2 RemotePlayback interface">§ 5.2
                    RemotePlayback interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-connect"
        aria-label="Links in this document to definition: connect">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-connect"
                aria-label="Permalink for definition: connect. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-connect-1"
                    title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a
                    connection with a remote playback device</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-remoteplayback-ondisconnect"
        aria-label="Links in this document to definition: ondisconnect">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-remoteplayback-ondisconnect"
                aria-label="Permalink for definition: ondisconnect. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-remoteplayback-ondisconnect-1" title="§ 5.2 RemotePlayback interface">§ 5.2
                    RemotePlayback interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-disconnect"
        aria-label="Links in this document to definition: disconnect">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-disconnect"
                aria-label="Permalink for definition: disconnect. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-disconnect-1"
                    title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a
                    connection with a remote playback device</a>
            </li>
            <li>
                <a href="#ref-for-dfn-disconnect-2" title="§ 5.2.7 Disconnecting from a remote playback device">§ 5.2.7
                    Disconnecting from a remote playback device</a> <a href="#ref-for-dfn-disconnect-3"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-htmlmediaelement-remote"
        aria-label="Links in this document to definition: remote">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-htmlmediaelement-remote"
                aria-label="Permalink for definition: remote. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1396475025">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-remote-1" title="§ 5.2.1.1 The set of availability callbacks">§
                    5.2.1.1 The set of availability callbacks</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-remote-2" title="§ 5.3 Extensions to HTMLMediaElement">§ 5.3
                    Extensions to HTMLMediaElement</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-htmlmediaelement-disableremoteplayback"
        aria-label="Links in this document to definition: disableRemotePlayback">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-htmlmediaelement-disableremoteplayback"
                aria-label="Permalink for definition: disableRemotePlayback. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1396475025">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-disableremoteplayback-1"
                    title="§ 5.2.1.3 Getting the remote playback devices availability information">§ 5.2.1.3 Getting the
                    remote playback devices availability information</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-disableremoteplayback-2"
                    title="§ 5.2.1.4 Monitoring the list of available remote playback devices">§ 5.2.1.4 Monitoring the
                    list of available remote playback devices</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-disableremoteplayback-3"
                    title="§ 5.2.1.5 Stop observing remote playback devices availability">§ 5.2.1.5 Stop observing
                    remote playback devices availability</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-disableremoteplayback-4"
                    title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing
                    remote playback state</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-disableremoteplayback-5"
                    title="§ 5.3 Extensions to HTMLMediaElement">§ 5.3 Extensions to HTMLMediaElement</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-disableremoteplayback-6"
                    title="§ 5.3.1 The disableRemotePlayback attribute">§ 5.3.1 The disableRemotePlayback attribute</a>
                <a href="#ref-for-dom-htmlmediaelement-disableremoteplayback-7" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-disableremoteplayback-8"
                    title="§ 5.3.2 Disabling remote playback">§ 5.3.2 Disabling remote playback</a> <a
                    href="#ref-for-dom-htmlmediaelement-disableremoteplayback-9" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-disable-remote-playback"
        aria-label="Links in this document to definition: disable remote playback">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-disable-remote-playback"
                aria-label="Permalink for definition: disable remote playback. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-disable-remote-playback-1" title="§ 5.3.1 The disableRemotePlayback attribute">§
                    5.3.1 The disableRemotePlayback attribute</a>
            </li>
        </ul>
    </div>
    <script id="respec-dfn-panel">(() => {
            // @ts-check
            if (document.respec) {
                document.respec.ready.then(setupPanel);
            } else {
                setupPanel();
            }

            function setupPanel() {
                const listener = panelListener();
                document.body.addEventListener("keydown", listener);
                document.body.addEventListener("click", listener);
            }

            function panelListener() {
                /** @type {HTMLElement} */
                let panel = null;
                return event => {
                    const { target, type } = event;

                    if (!(target instanceof HTMLElement)) return;

                    // For keys, we only care about Enter key to activate the panel
                    // otherwise it's activated via a click.
                    if (type === "keydown" && event.key !== "Enter") return;

                    const action = deriveAction(event);

                    switch (action) {
                        case "show": {
                            hidePanel(panel);
                            /** @type {HTMLElement} */
                            const dfn = target.closest("dfn, .index-term");
                            panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                            const coords = deriveCoordinates(event);
                            displayPanel(dfn, panel, coords);
                            break;
                        }
                        case "dock": {
                            panel.style.left = null;
                            panel.style.top = null;
                            panel.classList.add("docked");
                            break;
                        }
                        case "hide": {
                            hidePanel(panel);
                            panel = null;
                            break;
                        }
                    }
                };
            }

            /**
             * @param {MouseEvent|KeyboardEvent} event
             */
            function deriveCoordinates(event) {
                const target = /** @type HTMLElement */ (event.target);

                // We prevent synthetic AT clicks from putting
                // the dialog in a weird place. The AT events sometimes
                // lack coordinates, so they have clientX/Y = 0
                const rect = target.getBoundingClientRect();
                if (
                    event instanceof MouseEvent &&
                    event.clientX >= rect.left &&
                    event.clientY >= rect.top
                ) {
                    // The event probably happened inside the bounding rect...
                    return { x: event.clientX, y: event.clientY };
                }

                // Offset to the middle of the element
                const x = rect.x + rect.width / 2;
                // Placed at the bottom of the element
                const y = rect.y + rect.height;
                return { x, y };
            }

            /**
             * @param {Event} event
             */
            function deriveAction(event) {
                const target = /** @type {HTMLElement} */ (event.target);
                const hitALink = !!target.closest("a");
                if (target.closest("dfn:not([data-cite]), .index-term")) {
                    return hitALink ? "none" : "show";
                }
                if (target.closest(".dfn-panel")) {
                    if (hitALink) {
                        return target.classList.contains("self-link") ? "hide" : "dock";
                    }
                    const panel = target.closest(".dfn-panel");
                    return panel.classList.contains("docked") ? "hide" : "none";
                }
                if (document.querySelector(".dfn-panel:not([hidden])")) {
                    return "hide";
                }
                return "none";
            }

            /**
             * @param {HTMLElement} dfn
             * @param {HTMLElement} panel
             * @param {{ x: number, y: number }} clickPosition
             */
            function displayPanel(dfn, panel, { x, y }) {
                panel.hidden = false;
                // distance (px) between edge of panel and the pointing triangle (caret)
                const MARGIN = 20;

                const dfnRects = dfn.getClientRects();
                // Find the `top` offset when the `dfn` can be spread across multiple lines
                let closestTop = 0;
                let minDiff = Infinity;
                for (const rect of dfnRects) {
                    const { top, bottom } = rect;
                    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                    if (diffFromClickY < minDiff) {
                        minDiff = diffFromClickY;
                        closestTop = top;
                    }
                }

                const top = window.scrollY + closestTop + dfnRects[0].height;
                const left = x - MARGIN;
                panel.style.left = `${left}px`;
                panel.style.top = `${top}px`;

                // Find if the panel is flowing out of the window
                const panelRect = panel.getBoundingClientRect();
                const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                if (panelRect.right > SCREEN_WIDTH) {
                    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                    const newCaretOffset = left - newLeft;
                    panel.style.left = `${newLeft}px`;
                    /** @type {HTMLElement} */
                    const caret = panel.querySelector(".caret");
                    caret.style.left = `${newCaretOffset}px`;
                }

                // As it's a dialog, we trap focus.
                // TODO: when <dialog> becomes a implemented, we should really
                // use that.
                trapFocus(panel, dfn);
            }

            /**
             * @param {HTMLElement} panel
             * @param {HTMLElement} dfn
             * @returns
             */
            function trapFocus(panel, dfn) {
                /** @type NodeListOf<HTMLAnchorElement> elements */
                const anchors = panel.querySelectorAll("a[href]");
                // No need to trap focus
                if (!anchors.length) return;

                // Move focus to first anchor element
                const first = anchors.item(0);
                first.focus();

                const trapListener = createTrapListener(anchors, panel, dfn);
                panel.addEventListener("keydown", trapListener);

                // Hiding the panel releases the trap
                const mo = new MutationObserver(records => {
                    const [record] = records;
                    const target = /** @type HTMLElement */ (record.target);
                    if (target.hidden) {
                        panel.removeEventListener("keydown", trapListener);
                        mo.disconnect();
                    }
                });
                mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
            }

            /**
             *
             * @param {NodeListOf<HTMLAnchorElement>} anchors
             * @param {HTMLElement} panel
             * @param {HTMLElement} dfn
             * @returns
             */
            function createTrapListener(anchors, panel, dfn) {
                const lastIndex = anchors.length - 1;
                let currentIndex = 0;
                return event => {
                    switch (event.key) {
                        // Hitting "Tab" traps us in a nice loop around elements.
                        case "Tab": {
                            event.preventDefault();
                            currentIndex += event.shiftKey ? -1 : +1;
                            if (currentIndex < 0) {
                                currentIndex = lastIndex;
                            } else if (currentIndex > lastIndex) {
                                currentIndex = 0;
                            }
                            anchors.item(currentIndex).focus();
                            break;
                        }

                        // Hitting "Enter" on an anchor releases the trap.
                        case "Enter":
                            hidePanel(panel);
                            break;

                        // Hitting "Escape" returns focus to dfn.
                        case "Escape":
                            hidePanel(panel);
                            dfn.focus();
                            return;
                    }
                };
            }

            /** @param {HTMLElement} panel */
            function hidePanel(panel) {
                if (!panel) return;
                panel.hidden = true;
                panel.classList.remove("docked");
            }
        })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
</body>

</html>